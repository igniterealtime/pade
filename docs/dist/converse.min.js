(()=>{var e={"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/bookmark-views/styles/bookmarks.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/chatboxviews/styles/chats.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/chatview/styles/chat-bottom-panel.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/chatview/styles/chat-head.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/chatview/styles/index.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/controlbox/styles/_controlbox.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/controlbox/styles/buttons.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/controlbox/styles/loginform.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/disco-views/styles/disco-browser.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/fullscreen/styles/fullscreen.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/headlines-view/styles/headlines-head.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/headlines-view/styles/headlines.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/mam-views/styles/placeholder.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/minimize/styles/minimize.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/modal/styles/_modal.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/modal/styles/popover.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/modal/styles/toast.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/modals/styles/config.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/modals/styles/occupant.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/add-muc-modal.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/affiliation-form.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/index.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/moderator-tools.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/muc-bottom-panel.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/muc-chat-content.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/muc-details-modal.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/muc-head.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/muc-occupant.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/muc-occupants.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/muc-sidebar.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/nickname-form.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/occupant-bottom-panel.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/role-form.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/omemo/styles/omemo.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/profile/modals/styles/profile.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/profile/modals/styles/user-settings.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/profile/styles/profile.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/register/styles/register.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/roomslist/styles/roomsgroups.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/rootview/styles/background.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/rootview/styles/root.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/rosterview/modals/styles/add-contact.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/rosterview/styles/approval-alert.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/rosterview/styles/roster.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/singleton/singleton.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/autocomplete/styles/_autocomplete.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/avatar/avatar.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/chat/styles/chat-content.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/chat/styles/emoji.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/chat/styles/message-actions.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/chat/styles/message-body.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/chat/styles/retraction.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/chat/styles/toolbar.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/chat/styles/unfurl.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/components/styles/dropdown.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/components/styles/icon.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/components/styles/image-picker.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/components/styles/list-filter.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/components/styles/message-versions.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/components/styles/split-resize.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/gif/styles.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/modals/styles/image.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/modals/styles/user-details.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/qrcode/qrcode.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/styles/index.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/styles/status.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/texture/styles/audio.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/texture/styles/texture.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/templates/styles/spinner.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),i=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),a=s.n(o)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);let l=a},"./node_modules/dayjs/locale lazy recursive ^\\.\\/.*\\.js$":function(e,t,s){var r={"./lv.js":["./node_modules/dayjs/locale/lv.js","locales/dayjs/lv-js"],"./sr-cyrl.js":["./node_modules/dayjs/locale/sr-cyrl.js","locales/dayjs/sr-cyrl-js"],"./bi.js":["./node_modules/dayjs/locale/bi.js","locales/dayjs/bi-js"],"./id.js":["./node_modules/dayjs/locale/id.js","locales/dayjs/id-js"],"./he.js":["./node_modules/dayjs/locale/he.js","locales/dayjs/he-js"],"./kk.js":["./node_modules/dayjs/locale/kk.js","locales/dayjs/kk-js"],"./ar-ly.js":["./node_modules/dayjs/locale/ar-ly.js","locales/dayjs/ar-ly-js"],"./hr.js":["./node_modules/dayjs/locale/hr.js","locales/dayjs/hr-js"],"./ko.js":["./node_modules/dayjs/locale/ko.js","locales/dayjs/ko-js"],"./ar-dz.js":["./node_modules/dayjs/locale/ar-dz.js","locales/dayjs/ar-dz-js"],"./nl.js":["./node_modules/dayjs/locale/nl.js","locales/dayjs/nl-js"],"./tet.js":["./node_modules/dayjs/locale/tet.js","locales/dayjs/tet-js"],"./lb.js":["./node_modules/dayjs/locale/lb.js","locales/dayjs/lb-js"],"./de.js":["./node_modules/dayjs/locale/de.js","locales/dayjs/de-js"],"./zh-tw.js":["./node_modules/dayjs/locale/zh-tw.js","locales/dayjs/zh-tw-js"],"./de-at.js":["./node_modules/dayjs/locale/de-at.js","locales/dayjs/de-at-js"],"./tg.js":["./node_modules/dayjs/locale/tg.js","locales/dayjs/tg-js"],"./am.js":["./node_modules/dayjs/locale/am.js","locales/dayjs/am-js"],"./ky.js":["./node_modules/dayjs/locale/ky.js","locales/dayjs/ky-js"],"./kn.js":["./node_modules/dayjs/locale/kn.js","locales/dayjs/kn-js"],"./ss.js":["./node_modules/dayjs/locale/ss.js","locales/dayjs/ss-js"],"./hu.js":["./node_modules/dayjs/locale/hu.js","locales/dayjs/hu-js"],"./ar-iq.js":["./node_modules/dayjs/locale/ar-iq.js","locales/dayjs/ar-iq-js"],"./uk.js":["./node_modules/dayjs/locale/uk.js","locales/dayjs/uk-js"],"./se.js":["./node_modules/dayjs/locale/se.js","locales/dayjs/se-js"],"./pt-br.js":["./node_modules/dayjs/locale/pt-br.js","locales/dayjs/pt-br-js"],"./ar-sa.js":["./node_modules/dayjs/locale/ar-sa.js","locales/dayjs/ar-sa-js"],"./en-il.js":["./node_modules/dayjs/locale/en-il.js","locales/dayjs/en-il-js"],"./nb.js":["./node_modules/dayjs/locale/nb.js","locales/dayjs/nb-js"],"./hi.js":["./node_modules/dayjs/locale/hi.js","locales/dayjs/hi-js"],"./gl.js":["./node_modules/dayjs/locale/gl.js","locales/dayjs/gl-js"],"./mi.js":["./node_modules/dayjs/locale/mi.js","locales/dayjs/mi-js"],"./en-ie.js":["./node_modules/dayjs/locale/en-ie.js","locales/dayjs/en-ie-js"],"./ur.js":["./node_modules/dayjs/locale/ur.js","locales/dayjs/ur-js"],"./me.js":["./node_modules/dayjs/locale/me.js","locales/dayjs/me-js"],"./fy.js":["./node_modules/dayjs/locale/fy.js","locales/dayjs/fy-js"],"./ar.js":["./node_modules/dayjs/locale/ar.js","locales/dayjs/ar-js"],"./ar-kw.js":["./node_modules/dayjs/locale/ar-kw.js","locales/dayjs/ar-kw-js"],"./fr-ca.js":["./node_modules/dayjs/locale/fr-ca.js","locales/dayjs/fr-ca-js"],"./de-ch.js":["./node_modules/dayjs/locale/de-ch.js","locales/dayjs/de-ch-js"],"./pa-in.js":["./node_modules/dayjs/locale/pa-in.js","locales/dayjs/pa-in-js"],"./eo.js":["./node_modules/dayjs/locale/eo.js","locales/dayjs/eo-js"],"./ro.js":["./node_modules/dayjs/locale/ro.js","locales/dayjs/ro-js"],"./te.js":["./node_modules/dayjs/locale/te.js","locales/dayjs/te-js"],"./tl-ph.js":["./node_modules/dayjs/locale/tl-ph.js","locales/dayjs/tl-ph-js"],"./zh.js":["./node_modules/dayjs/locale/zh.js","locales/dayjs/zh-js"],"./es-mx.js":["./node_modules/dayjs/locale/es-mx.js","locales/dayjs/es-mx-js"],"./it.js":["./node_modules/dayjs/locale/it.js","locales/dayjs/it-js"],"./zh-hk.js":["./node_modules/dayjs/locale/zh-hk.js","locales/dayjs/zh-hk-js"],"./da.js":["./node_modules/dayjs/locale/da.js","locales/dayjs/da-js"],"./fr-ch.js":["./node_modules/dayjs/locale/fr-ch.js","locales/dayjs/fr-ch-js"],"./uz-latn.js":["./node_modules/dayjs/locale/uz-latn.js","locales/dayjs/uz-latn-js"],"./bo.js":["./node_modules/dayjs/locale/bo.js","locales/dayjs/bo-js"],"./ht.js":["./node_modules/dayjs/locale/ht.js","locales/dayjs/ht-js"],"./lo.js":["./node_modules/dayjs/locale/lo.js","locales/dayjs/lo-js"],"./en-sg.js":["./node_modules/dayjs/locale/en-sg.js","locales/dayjs/en-sg-js"],"./ml.js":["./node_modules/dayjs/locale/ml.js","locales/dayjs/ml-js"],"./br.js":["./node_modules/dayjs/locale/br.js","locales/dayjs/br-js"],"./my.js":["./node_modules/dayjs/locale/my.js","locales/dayjs/my-js"],"./uz.js":["./node_modules/dayjs/locale/uz.js","locales/dayjs/uz-js"],"./tzm.js":["./node_modules/dayjs/locale/tzm.js","locales/dayjs/tzm-js"],"./zh-cn.js":["./node_modules/dayjs/locale/zh-cn.js","locales/dayjs/zh-cn-js"],"./ne.js":["./node_modules/dayjs/locale/ne.js","locales/dayjs/ne-js"],"./gom-latn.js":["./node_modules/dayjs/locale/gom-latn.js","locales/dayjs/gom-latn-js"],"./az.js":["./node_modules/dayjs/locale/az.js","locales/dayjs/az-js"],"./bg.js":["./node_modules/dayjs/locale/bg.js","locales/dayjs/bg-js"],"./en-au.js":["./node_modules/dayjs/locale/en-au.js","locales/dayjs/en-au-js"],"./mr.js":["./node_modules/dayjs/locale/mr.js","locales/dayjs/mr-js"],"./gd.js":["./node_modules/dayjs/locale/gd.js","locales/dayjs/gd-js"],"./oc-lnc.js":["./node_modules/dayjs/locale/oc-lnc.js","locales/dayjs/oc-lnc-js"],"./yo.js":["./node_modules/dayjs/locale/yo.js","locales/dayjs/yo-js"],"./cv.js":["./node_modules/dayjs/locale/cv.js","locales/dayjs/cv-js"],"./lt.js":["./node_modules/dayjs/locale/lt.js","locales/dayjs/lt-js"],"./th.js":["./node_modules/dayjs/locale/th.js","locales/dayjs/th-js"],"./cs.js":["./node_modules/dayjs/locale/cs.js","locales/dayjs/cs-js"],"./es.js":["./node_modules/dayjs/locale/es.js","locales/dayjs/es-js"],"./bn.js":["./node_modules/dayjs/locale/bn.js","locales/dayjs/bn-js"],"./sr.js":["./node_modules/dayjs/locale/sr.js","locales/dayjs/sr-js"],"./sw.js":["./node_modules/dayjs/locale/sw.js","locales/dayjs/sw-js"],"./et.js":["./node_modules/dayjs/locale/et.js","locales/dayjs/et-js"],"./sv-fi.js":["./node_modules/dayjs/locale/sv-fi.js","locales/dayjs/sv-fi-js"],"./fa.js":["./node_modules/dayjs/locale/fa.js","locales/dayjs/fa-js"],"./gu.js":["./node_modules/dayjs/locale/gu.js","locales/dayjs/gu-js"],"./fo.js":["./node_modules/dayjs/locale/fo.js","locales/dayjs/fo-js"],"./bs.js":["./node_modules/dayjs/locale/bs.js","locales/dayjs/bs-js"],"./eu.js":["./node_modules/dayjs/locale/eu.js","locales/dayjs/eu-js"],"./ja.js":["./node_modules/dayjs/locale/ja.js","locales/dayjs/ja-js"],"./es-do.js":["./node_modules/dayjs/locale/es-do.js","locales/dayjs/es-do-js"],"./nl-be.js":["./node_modules/dayjs/locale/nl-be.js","locales/dayjs/nl-be-js"],"./tk.js":["./node_modules/dayjs/locale/tk.js","locales/dayjs/tk-js"],"./en-ca.js":["./node_modules/dayjs/locale/en-ca.js","locales/dayjs/en-ca-js"],"./tzm-latn.js":["./node_modules/dayjs/locale/tzm-latn.js","locales/dayjs/tzm-latn-js"],"./ug-cn.js":["./node_modules/dayjs/locale/ug-cn.js","locales/dayjs/ug-cn-js"],"./mn.js":["./node_modules/dayjs/locale/mn.js","locales/dayjs/mn-js"],"./pt.js":["./node_modules/dayjs/locale/pt.js","locales/dayjs/pt-js"],"./cy.js":["./node_modules/dayjs/locale/cy.js","locales/dayjs/cy-js"],"./ru.js":["./node_modules/dayjs/locale/ru.js","locales/dayjs/ru-js"],"./sq.js":["./node_modules/dayjs/locale/sq.js","locales/dayjs/sq-js"],"./ga.js":["./node_modules/dayjs/locale/ga.js","locales/dayjs/ga-js"],"./km.js":["./node_modules/dayjs/locale/km.js","locales/dayjs/km-js"],"./ku.js":["./node_modules/dayjs/locale/ku.js","locales/dayjs/ku-js"],"./tr.js":["./node_modules/dayjs/locale/tr.js","locales/dayjs/tr-js"],"./af.js":["./node_modules/dayjs/locale/af.js","locales/dayjs/af-js"],"./hy-am.js":["./node_modules/dayjs/locale/hy-am.js","locales/dayjs/hy-am-js"],"./x-pseudo.js":["./node_modules/dayjs/locale/x-pseudo.js","locales/dayjs/x-pseudo-js"],"./tlh.js":["./node_modules/dayjs/locale/tlh.js","locales/dayjs/tlh-js"],"./sd.js":["./node_modules/dayjs/locale/sd.js","locales/dayjs/sd-js"],"./is.js":["./node_modules/dayjs/locale/is.js","locales/dayjs/is-js"],"./sl.js":["./node_modules/dayjs/locale/sl.js","locales/dayjs/sl-js"],"./ms-my.js":["./node_modules/dayjs/locale/ms-my.js","locales/dayjs/ms-my-js"],"./jv.js":["./node_modules/dayjs/locale/jv.js","locales/dayjs/jv-js"],"./el.js":["./node_modules/dayjs/locale/el.js","locales/dayjs/el-js"],"./ka.js":["./node_modules/dayjs/locale/ka.js","locales/dayjs/ka-js"],"./bn-bd.js":["./node_modules/dayjs/locale/bn-bd.js","locales/dayjs/bn-bd-js"],"./en-gb.js":["./node_modules/dayjs/locale/en-gb.js","locales/dayjs/en-gb-js"],"./mk.js":["./node_modules/dayjs/locale/mk.js","locales/dayjs/mk-js"],"./sv.js":["./node_modules/dayjs/locale/sv.js","locales/dayjs/sv-js"],"./be.js":["./node_modules/dayjs/locale/be.js","locales/dayjs/be-js"],"./pl.js":["./node_modules/dayjs/locale/pl.js","locales/dayjs/pl-js"],"./rn.js":["./node_modules/dayjs/locale/rn.js","locales/dayjs/rn-js"],"./dv.js":["./node_modules/dayjs/locale/dv.js","locales/dayjs/dv-js"],"./si.js":["./node_modules/dayjs/locale/si.js","locales/dayjs/si-js"],"./en.js":["./node_modules/dayjs/locale/en.js","locales/dayjs/en-js"],"./vi.js":["./node_modules/dayjs/locale/vi.js","locales/dayjs/vi-js"],"./en-in.js":["./node_modules/dayjs/locale/en-in.js","locales/dayjs/en-in-js"],"./es-us.js":["./node_modules/dayjs/locale/es-us.js","locales/dayjs/es-us-js"],"./es-pr.js":["./node_modules/dayjs/locale/es-pr.js","locales/dayjs/es-pr-js"],"./fi.js":["./node_modules/dayjs/locale/fi.js","locales/dayjs/fi-js"],"./bm.js":["./node_modules/dayjs/locale/bm.js","locales/dayjs/bm-js"],"./ca.js":["./node_modules/dayjs/locale/ca.js","locales/dayjs/ca-js"],"./ar-ma.js":["./node_modules/dayjs/locale/ar-ma.js","locales/dayjs/ar-ma-js"],"./ms.js":["./node_modules/dayjs/locale/ms.js","locales/dayjs/ms-js"],"./nn.js":["./node_modules/dayjs/locale/nn.js","locales/dayjs/nn-js"],"./ta.js":["./node_modules/dayjs/locale/ta.js","locales/dayjs/ta-js"],"./ar-tn.js":["./node_modules/dayjs/locale/ar-tn.js","locales/dayjs/ar-tn-js"],"./sk.js":["./node_modules/dayjs/locale/sk.js","locales/dayjs/sk-js"],"./rw.js":["./node_modules/dayjs/locale/rw.js","locales/dayjs/rw-js"],"./tzl.js":["./node_modules/dayjs/locale/tzl.js","locales/dayjs/tzl-js"],"./en-nz.js":["./node_modules/dayjs/locale/en-nz.js","locales/dayjs/en-nz-js"],"./mt.js":["./node_modules/dayjs/locale/mt.js","locales/dayjs/mt-js"],"./en-tt.js":["./node_modules/dayjs/locale/en-tt.js","locales/dayjs/en-tt-js"],"./fr.js":["./node_modules/dayjs/locale/fr.js","locales/dayjs/fr-js"],"./it-ch.js":["./node_modules/dayjs/locale/it-ch.js","locales/dayjs/it-ch-js"]};function i(e){if(!s.o(r,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return s.e(t[1]).then(function(){return s.t(i,23)})}i.keys=()=>Object.keys(r),i.id="./node_modules/dayjs/locale lazy recursive ^\\.\\/.*\\.js$",e.exports=i},"./node_modules/@converse/localforage-getitems/dist/localforage-getitems.es6.js":function(e,t,s){"use strict";s.r(t),s.d(t,{extendPrototype:()=>p,extendPrototypeResult:()=>g,getItemsGeneric:()=>d,localforageGetItems:()=>f});var r=s("./node_modules/localforage/dist/localforage.js"),i=s.n(r);function o(e){return o.result?o.result:e&&"function"==typeof e.getSerializer?(o.result=e.getSerializer(),o.result):Promise.reject(Error("localforage.getSerializer() was not available! localforage v1.4+ is required!"))}function a(e,t){return t&&e.then(function(e){t(null,e)},function(e){t(e)}),e}function l(e,t){var s=this.getItem(e).then(function(t){return{key:e,value:t}});return a(s,t),s}function d(e){var t=this;return new Promise(function(s,r){for(var i=[],o=0,a=e.length;o<a;o++)i.push(l.call(t,e[o]));Promise.all(i).then(function(e){for(var t={},r=0,i=e.length;r<i;r++){var o=e[r];t[o.key]=o.value}s(t)}).catch(r)})}function c(){var e={};return this.iterate(function(t,s){e[s]=t}).then(function(){return e})}var u="undefined"!=typeof IDBKeyRange?IDBKeyRange:"undefined"!=typeof webkitIDBKeyRange?webkitIDBKeyRange:"undefined"!=typeof mozIDBKeyRange?mozIDBKeyRange:void 0;function h(e){e=e.slice();var t=this;function s(e,t){return e<t?-1:+(e>t)}return new Promise(function(r,i){t.ready().then(function(){var o,a=t._dbInfo,l=a.db.transaction(a.storeName,"readonly").objectStore(a.storeName),d=e.sort(s),c=u.bound(e[0],e[e.length-1],!1,!1);if("getAll"in l)(o=l.getAll(c)).onsuccess=function(){var e=o.result;void 0===e&&(e=null),r(e)};else{o=l.openCursor(c);var h={},m=0;o.onsuccess=function(){var e=o.result;if(!e)return void r(h);for(var t=e.key;t>d[m];)if(++m===d.length)return void r(h);if(t===d[m]){var s=e.value;void 0===s&&(s=null),h[t]=s,e.continue()}else e.continue(d[m])}}o.onerror=function(){i(o.error)}}).catch(i)})}function m(e){var t=this;return new Promise(function(s,r){t.ready().then(function(){return o(t)}).then(function(i){var o=t._dbInfo;o.db.transaction(function(t){for(var a=Array(e.length),l=0,d=e.length;l<d;l++)a[l]="?";t.executeSql("SELECT * FROM "+o.storeName+" WHERE (key IN ("+a.join(",")+"))",e,function(e,t){for(var r={},o=t.rows,a=0,l=o.length;a<l;a++){var d=o.item(a),c=d.value;c&&(c=i.deserialize(c)),r[d.key]=c}s(r)},function(e,t){r(t)})})}).catch(r)})}function f(e,t){var s;if(arguments.length&&null!==e){var r=this.driver();s=r===this.INDEXEDDB?h.apply(this,arguments):r===this.WEBSQL?m.apply(this,arguments):d.apply(this,arguments)}else s=c.apply(this);return a(s,t),s}function p(e){var t=Object.getPrototypeOf(e);t&&(t.getItems=f,t.getItems.indexedDB=function(){return h.apply(this,arguments)},t.getItems.websql=function(){return m.apply(this,arguments)},t.getItems.generic=function(){return d.apply(this,arguments)})}var g=p(i())},"./node_modules/@converse/openpromise/dist/openpromise.js":function(e,t,s){"use strict";function r(){let e,t=()=>{},s=()=>{};if("function"==typeof Promise.withResolvers){let{promise:r,resolve:i,reject:o}=Promise.withResolvers();e=r,t=i,s=o}else e=new Promise((e,r)=>{t=e,s=r});return Object.assign(e,{isResolved:!1,isPending:!0,isRejected:!1,resolve:t,reject:s}),e.then(t=>(e.isResolved=!0,e.isPending=!1,e.isRejected=!1,t),t=>{throw e.isResolved=!1,e.isPending=!1,e.isRejected=!0,t}),e}s.r(t),s.d(t,{getOpenPromise:()=>r})},"./node_modules/@converse/skeletor/dist/skeletor.js":function(e,t,s){e=s.nmd(e),function(t){"use strict";let r;var i,o,a,l,d,c,u,h,m,f,p="object"==typeof s.g&&s.g&&s.g.Object===Object&&s.g,g="object"==typeof self&&self&&self.Object===Object&&self,_=p||g||Function("return this")(),v=_.Symbol;function y(e,t){for(var s=-1,r=null==e?0:e.length,i=Array(r);++s<r;)i[s]=t(e[s],s,e);return i}var b=Array.isArray,j=Object.prototype,w=j.hasOwnProperty,S=j.toString,x=v?v.toStringTag:void 0,E=Object.prototype.toString,A=v?v.toStringTag:void 0;function C(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":A&&A in Object(e)?function(e){var t=w.call(e,x),s=e[x];try{e[x]=void 0;var r=!0}catch(e){}var i=S.call(e);return r&&(t?e[x]=s:delete e[x]),i}(e):E.call(e)}function k(e){return null!=e&&"object"==typeof e}function $(e){return"symbol"==typeof e||k(e)&&"[object Symbol]"==C(e)}var T=v?v.prototype:void 0,M=T?T.toString:void 0;function O(e){return null==e?"":function e(t){if("string"==typeof t)return t;if(b(t))return y(t,e)+"";if($(t))return M?M.call(t):"";var s=t+"";return"0"==s&&1/t==-1/0?"-0":s}(e)}var I=0;function N(e){var t=++I;return O(e)+t}let R=globalThis,D=R.trustedTypes,L=D?D.createPolicy("lit-html",{createHTML:e=>e}):void 0,P="$lit$",z=`lit$${Math.random().toFixed(9).slice(2)}$`,U="?"+z,B=`<${U}>`,F=document,q=()=>F.createComment(""),H=e=>null===e||"object"!=typeof e&&"function"!=typeof e,G=Array.isArray,W=e=>G(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]),V="[ 	\n\f\r]",K=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,J=/-->/g,Q=/>/g,Y=RegExp(`>|${V}(?:([^\\s"'>=/]+)(${V}*=${V}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),X=/'/g,Z=/"/g,ee=/^(?:script|style|textarea|title)$/i,et=Symbol.for("lit-noChange"),es=Symbol.for("lit-nothing"),er=new WeakMap,en=F.createTreeWalker(F,129);function ei(e,t){if(!G(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==L?L.createHTML(t):t}let eo=(e,t)=>{let s=e.length-1,r=[],i,o=2===t?"<svg>":3===t?"<math>":"",a=K;for(let t=0;t<s;t++){let s=e[t],d,c,u=-1,h=0;for(;h<s.length&&(a.lastIndex=h,null!==(c=a.exec(s)));){var l;h=a.lastIndex,a===K?"!--"===c[1]?a=J:void 0!==c[1]?a=Q:void 0!==c[2]?(ee.test(c[2])&&(i=RegExp("</"+c[2],"g")),a=Y):void 0!==c[3]&&(a=Y):a===Y?">"===c[0]?(a=null!=(l=i)?l:K,u=-1):void 0===c[1]?u=-2:(u=a.lastIndex-c[2].length,d=c[1],a=void 0===c[3]?Y:'"'===c[3]?Z:X):a===Z||a===X?a=Y:a===J||a===Q?a=K:(a=Y,i=void 0)}let m=a===Y&&e[t+1].startsWith("/>")?" ":"";o+=a===K?s+B:u>=0?(r.push(d),s.slice(0,u)+P+s.slice(u)+z+m):s+z+(-2===u?t:m)}return[ei(e,o+(e[s]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),r]};class ea{constructor({strings:e,_$litType$:t},s){let r;this.parts=[];let i=0,o=0,a=e.length-1,l=this.parts,[d,c]=eo(e,t);if(this.el=ea.createElement(d,s),en.currentNode=this.el.content,2===t||3===t){let e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(r=en.nextNode())&&l.length<a;){if(1===r.nodeType){if(r.hasAttributes())for(let e of r.getAttributeNames())if(e.endsWith(P)){let t=c[o++],s=r.getAttribute(e).split(z),a=/([.?@])?(.*)/.exec(t);l.push({type:1,index:i,name:a[2],strings:s,ctor:"."===a[1]?eh:"?"===a[1]?em:"@"===a[1]?ef:eu}),r.removeAttribute(e)}else e.startsWith(z)&&(l.push({type:6,index:i}),r.removeAttribute(e));if(ee.test(r.tagName)){let e=r.textContent.split(z),t=e.length-1;if(t>0){r.textContent=D?D.emptyScript:"";for(let s=0;s<t;s++)r.append(e[s],q()),en.nextNode(),l.push({type:2,index:++i});r.append(e[t],q())}}}else if(8===r.nodeType)if(r.data===U)l.push({type:2,index:i});else{let e=-1;for(;-1!==(e=r.data.indexOf(z,e+1));)l.push({type:7,index:i}),e+=z.length-1}i++}}static createElement(e,t){let s=F.createElement("template");return s.innerHTML=e,s}}function el(e,t,s=e,r){var i,o,a,l;if(t===et)return t;let d=void 0!==r?null==(i=s._$Co)?void 0:i[r]:s._$Cl,c=H(t)?void 0:t._$litDirective$;return(null==(o=d)?void 0:o.constructor)!==c&&(null!=(a=d)&&null!=(l=a._$AO)&&l.call(a,!1),void 0===c?d=void 0:(d=new c(e))._$AT(e,s,r),void 0!==r?(s._$Co??=[])[r]=d:s._$Cl=d),void 0!==d&&(t=el(e,d._$AS(e,t.values),d,r)),t}class ed{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t,s;let{el:{content:r},parts:i}=this._$AD,o=(null!=(t=null==e?void 0:e.creationScope)?t:F).importNode(r,!0);en.currentNode=o;let a=en.nextNode(),l=0,d=0,c=i[0];for(;void 0!==c;){if(l===c.index){let t;2===c.type?t=new ec(a,a.nextSibling,this,e):1===c.type?t=new c.ctor(a,c.name,c.strings,this,e):6===c.type&&(t=new ep(a,this,e)),this._$AV.push(t),c=i[++d]}l!==(null==(s=c)?void 0:s.index)&&(a=en.nextNode(),l++)}return en.currentNode=F,o}p(e){let t=0;for(let s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(e,s,t),t+=s.strings.length-2):s._$AI(e[t])),t++}}class ec{get _$AU(){var e,t;return null!=(e=null==(t=this._$AM)?void 0:t._$AU)?e:this._$Cv}constructor(e,t,s,r){var i;this.type=2,this._$AH=es,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=s,this.options=r,this._$Cv=null==(i=null==r?void 0:r.isConnected)||i}get parentNode(){var e;let t=this._$AA.parentNode,s=this._$AM;return void 0!==s&&11===(null==(e=t)?void 0:e.nodeType)&&(t=s.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){H(e=el(this,e,t))?e===es||null==e||""===e?(this._$AH!==es&&this._$AR(),this._$AH=es):e!==this._$AH&&e!==et&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):W(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==es&&H(this._$AH)?this._$AA.nextSibling.data=e:this.T(F.createTextNode(e)),this._$AH=e}$(e){var t;let{values:s,_$litType$:r}=e,i="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=ea.createElement(ei(r.h,r.h[0]),this.options)),r);if((null==(t=this._$AH)?void 0:t._$AD)===i)this._$AH.p(s);else{let e=new ed(i,this),t=e.u(this.options);e.p(s),this.T(t),this._$AH=e}}_$AC(e){let t=er.get(e.strings);return void 0===t&&er.set(e.strings,t=new ea(e)),t}k(e){G(this._$AH)||(this._$AH=[],this._$AR());let t=this._$AH,s,r=0;for(let i of e)r===t.length?t.push(s=new ec(this.O(q()),this.O(q()),this,this.options)):s=t[r],s._$AI(i),r++;r<t.length&&(this._$AR(s&&s._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){for(null==(s=this._$AP)||s.call(this,!1,!0,t);e&&e!==this._$AB;){var s;let t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cv=e,null==(t=this._$AP)||t.call(this,e))}}class eu{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,s,r,i){this.type=1,this._$AH=es,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=i,s.length>2||""!==s[0]||""!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=es}_$AI(e,t=this,s,r){let i=this.strings,o=!1;if(void 0===i)(o=!H(e=el(this,e,t,0))||e!==this._$AH&&e!==et)&&(this._$AH=e);else{let r,l,d=e;for(e=i[0],r=0;r<i.length-1;r++){var a;(l=el(this,d[s+r],t,r))===et&&(l=this._$AH[r]),o||=!H(l)||l!==this._$AH[r],l===es?e=es:e!==es&&(e+=(null!=(a=l)?a:"")+i[r+1]),this._$AH[r]=l}}o&&!r&&this.j(e)}j(e){e===es?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class eh extends eu{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===es?void 0:e}}class em extends eu{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==es)}}class ef extends eu{constructor(e,t,s,r,i){super(e,t,s,r,i),this.type=5}_$AI(e,t=this){var s;if((e=null!=(s=el(this,e,t,0))?s:es)===et)return;let r=this._$AH,i=e===es&&r!==es||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,o=e!==es&&(r===es||i);i&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,s;"function"==typeof this._$AH?this._$AH.call(null!=(t=null==(s=this.options)?void 0:s.host)?t:this.element,e):this._$AH.handleEvent(e)}}class ep{constructor(e,t,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(e){el(this,e)}}let eg=R.litHtmlPolyfillSupport;null!=eg&&eg(ea,ec),(R.litHtmlVersions??=[]).push("3.2.1");let e_=(e,t,s)=>{let r=t,i=r._$litPart$;if(void 0===i){let e=null;r._$litPart$=i=new ec(t.insertBefore(q(),e),e,void 0,{})}return i._$AI(e),i};var ev=Object.prototype;function ey(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ev)}function eb(e,t){return function(s){return e(t(s))}}var ej=eb(Object.keys,Object),ew=Object.prototype.hasOwnProperty;function eS(e){if(!ey(e))return ej(e);var t=[];for(var s in Object(e))ew.call(e,s)&&"constructor"!=s&&t.push(s);return t}function ex(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eE(e){if(!ex(e))return!1;var t=C(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var eA=_["__core-js_shared__"],eC=(i=/[^.]+$/.exec(eA&&eA.keys&&eA.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",ek=Function.prototype.toString;function e$(e){if(null!=e){try{return ek.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var eT=/^\[object .+?Constructor\]$/,eM=Object.prototype,eO=Function.prototype.toString,eI=eM.hasOwnProperty,eN=RegExp("^"+eO.call(eI).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function eR(e,t){var s=null==e?void 0:e[t];return ex(s)&&(!eC||!(eC in s))&&(eE(s)?eN:eT).test(e$(s))?s:void 0}var eD=eR(_,"DataView"),eL=eR(_,"Map"),eP=eR(_,"Promise"),ez=eR(_,"Set"),eU=eR(_,"WeakMap"),eB="[object Map]",eF="[object Promise]",eq="[object Set]",eH="[object WeakMap]",eG="[object DataView]",eW=e$(eD),eV=e$(eL),eK=e$(eP),eJ=e$(ez),eQ=e$(eU),eY=C;function eX(e){return k(e)&&"[object Arguments]"==C(e)}(eD&&eY(new eD(new ArrayBuffer(1)))!=eG||eL&&eY(new eL)!=eB||eP&&eY(eP.resolve())!=eF||ez&&eY(new ez)!=eq||eU&&eY(new eU)!=eH)&&(eY=function(e){var t=C(e),s="[object Object]"==t?e.constructor:void 0,r=s?e$(s):"";if(r)switch(r){case eW:return eG;case eV:return eB;case eK:return eF;case eJ:return eq;case eQ:return eH}return t});var eZ=Object.prototype,e0=eZ.hasOwnProperty,e1=eZ.propertyIsEnumerable,e2=eX(function(){return arguments}())?eX:function(e){return k(e)&&e0.call(e,"callee")&&!e1.call(e,"callee")};function e4(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}function e3(e){return null!=e&&e4(e.length)&&!eE(e)}var e6="object"==typeof t&&t&&!t.nodeType&&t,e8=e6&&e&&!e.nodeType&&e,e5=e8&&e8.exports===e6?_.Buffer:void 0,e9=(e5?e5.isBuffer:void 0)||function(){return!1},e7={};function te(e){return function(t){return e(t)}}e7["[object Float32Array]"]=e7["[object Float64Array]"]=e7["[object Int8Array]"]=e7["[object Int16Array]"]=e7["[object Int32Array]"]=e7["[object Uint8Array]"]=e7["[object Uint8ClampedArray]"]=e7["[object Uint16Array]"]=e7["[object Uint32Array]"]=!0,e7["[object Arguments]"]=e7["[object Array]"]=e7["[object ArrayBuffer]"]=e7["[object Boolean]"]=e7["[object DataView]"]=e7["[object Date]"]=e7["[object Error]"]=e7["[object Function]"]=e7["[object Map]"]=e7["[object Number]"]=e7["[object Object]"]=e7["[object RegExp]"]=e7["[object Set]"]=e7["[object String]"]=e7["[object WeakMap]"]=!1;var tt="object"==typeof t&&t&&!t.nodeType&&t,ts=tt&&e&&!e.nodeType&&e,tr=ts&&ts.exports===tt&&p.process,tn=function(){try{var e=ts&&ts.require&&ts.require("util").types;if(e)return e;return tr&&tr.binding&&tr.binding("util")}catch(e){}}(),ti=tn&&tn.isTypedArray,to=ti?te(ti):function(e){return k(e)&&e4(e.length)&&!!e7[C(e)]},ta=Object.prototype.hasOwnProperty;function tl(e){if(null==e)return!0;if(e3(e)&&(b(e)||"string"==typeof e||"function"==typeof e.splice||e9(e)||to(e)||e2(e)))return!e.length;var t=eY(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(ey(e))return!eS(e).length;for(var s in e)if(ta.call(e,s))return!1;return!0}var td=/^(?:0|[1-9]\d*)$/;function tc(e,t){var s=typeof e;return!!(t=null==t?0x1fffffffffffff:t)&&("number"==s||"symbol"!=s&&td.test(e))&&e>-1&&e%1==0&&e<t}var tu=Object.prototype.hasOwnProperty;function th(e,t){var s=b(e),r=!s&&e2(e),i=!s&&!r&&e9(e),o=!s&&!r&&!i&&to(e),a=s||r||i||o,l=a?function(e,t){for(var s=-1,r=Array(e);++s<e;)r[s]=t(s);return r}(e.length,String):[],d=l.length;for(var c in e)(t||tu.call(e,c))&&!(a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||tc(c,d)))&&l.push(c);return l}function tm(e){return e3(e)?th(e):eS(e)}var tf=/\s/,tp=/^\s+/,tg=0/0,t_=/^[-+]0x[0-9a-f]+$/i,tv=/^0b[01]+$/i,ty=/^0o[0-7]+$/i,tb=parseInt,tj=1/0;let tw=/\s+/;function tS(e,t,s,r,i){let o=0,a;if(s&&"object"==typeof s)for(void 0!==r&&("context"in i)&&void 0===i.context&&(i.context=r),a=tm(s);o<a.length;o++)t=tS(e,t,a[o],s[a[o]],i);else if(s&&tw.test(s))for(a=s.split(tw);o<a.length;o++)t=e(t,a[o],r,i);else t=e(t,s,r,i);return t}function tx(e,t,s,r){if(s){let i=e[t]||(e[t]=[]),o=r.context,a=r.ctx,l=r.listening;l&&l.count++,i.push({callback:s,context:o,ctx:o||a,listening:l})}return e}function tE(e,t,s,r){if(!e)return;let i=r.context,o=r.listeners,a=0,l;if(!t&&!i&&!s){for(l=tm(o);a<l.length;a++)o[l[a]].cleanup();return}for(l=t?[t]:tm(e);a<l.length;a++){let r=e[t=l[a]];if(!r)break;let o=[];for(let e=0;e<r.length;e++){let a=r[e];if(s&&s!==a.callback&&s!==a.callback._callback||i&&i!==a.context)o.push(a);else{let e=a.listening;e&&e.stop(t,s)}}o.length?e[t]=o:delete e[t]}return e}function tA(e,t,s,r){if(s){let i=e[t]=function(e){var t,s,r,i,o=2,a=e;if("function"!=typeof a)throw TypeError("Expected a function");return i=(r=(s=o)?(s=function(e){if("number"==typeof e)return e;if($(e))return tg;if(ex(e)){var t,s="function"==typeof e.valueOf?e.valueOf():e;e=ex(s)?s+"":s}if("string"!=typeof e)return 0===e?e:+e;e=(t=e)?t.slice(0,function(e){for(var t=e.length;t--&&tf.test(e.charAt(t)););return t}(t)+1).replace(tp,""):t;var r=tv.test(e);return r||ty.test(e)?tb(e.slice(2),r?2:8):t_.test(e)?tg:+e}(s))===tj||s===-1/0?(s<0?-1:1)*17976931348623157e292:s==s?s:0:0===s?s:0)%1,o=r==r?i?r-i:r:0,function(){return--o>0&&(t=a.apply(this,arguments)),o<=1&&(a=void 0),t}}(function(){r(t,i),s.apply(this,arguments)});i._callback=s}return e}function tC(e,t,s,r){if(e){let s=e[t],i=e.all;s&&i&&(i=i.slice()),s&&tk(s,r),i&&tk(i,[t].concat(r))}return e}function tk(e,t){let s,r=-1,i=e.length,o=t[0],a=t[1],l=t[2];switch(t.length){case 0:for(;++r<i;)(s=e[r]).callback.call(s.ctx);return;case 1:for(;++r<i;)(s=e[r]).callback.call(s.ctx,o);return;case 2:for(;++r<i;)(s=e[r]).callback.call(s.ctx,o,a);return;case 3:for(;++r<i;)(s=e[r]).callback.call(s.ctx,o,a,l);return;default:for(;++r<i;)(s=e[r]).callback.apply(s.ctx,t);return}}class t${constructor(e,t){this.id=e._listenId,this.listener=e,this.obj=t,this.interop=!0,this.count=0,this._events=void 0}start(e,t,s,r){return this._events=tS(tx,this._events||{},e,t,{context:this.obj,ctx:s,listening:r}),r&&((this.obj._listeners||(this.obj._listeners={}))[this.id]=this,this.interop=!1),this}stop(e,t){let s;this.interop?(this._events=tS(tE,this._events,e,t,{context:void 0,listeners:void 0}),s=!this._events):(this.count--,s=0===this.count),s&&this.cleanup()}cleanup(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]}}function tT(e){return class extends e{on(e,t,s){return this._events=tS(tx,this._events||{},e,t,{context:s,ctx:this,listening:r}),r&&((this._listeners||(this._listeners={}))[r.id]=r,r.interop=!1),this}listenTo(e,t,s){if(!e)return this;let i=e._listenId||(e._listenId=N("l")),o=this._listeningTo||(this._listeningTo={}),a=r=o[i];a||(this._listenId||(this._listenId=N("l")),a=r=o[i]=new t$(this,e));let l=function(e,t,s,r){try{e.on(t,s,r)}catch(e){return e}}(e,t,s,this);if(r=void 0,l)throw l;return a.interop&&a.start(t,s,this,r),this}off(e,t,s){return this._events&&(this._events=tS(tE,this._events,e,t,{context:s,listeners:this._listeners})),this}stopListening(e,t,s){let r=this._listeningTo;if(!r)return this;let i=e?[e._listenId]:tm(r);for(let e=0;e<i.length;e++){let o=r[i[e]];if(!o)break;o.obj.off(t,s,this),o.interop&&o.stop(t,s)}return tl(r)&&(this._listeningTo=void 0),this}once(e,t,s){let r=tS(tA,{},e,t,this.off.bind(this));return"string"==typeof e&&null==s&&(t=void 0),this.on(r,t,s)}listenToOnce(e,t,s){let r=tS(tA,{},t,s,this.stopListening.bind(this,e));return this.listenTo(e,r)}trigger(e,...t){return this._events&&tS(tC,this._events,e,void 0,t),this}}}let tM=/^(\S+)\s*(.*)$/;class tO extends tT(HTMLElement){set events(e){this._declarativeEvents=e}get events(){return this._declarativeEvents}constructor(e={}){super(),this.stopListening=null,this.cid=N("view"),this._declarativeEvents={},this._domEvents=[];let{model:t,collection:s,events:r}=e;Object.assign(this,{model:t,collection:s,events:r})}createRenderRoot(){return this}connectedCallback(){this._initialized||(this.preinitialize.apply(this,arguments),this.initialize.apply(this,arguments),this._initialized=!0),this.delegateEvents()}disconnectedCallback(){var e;this.undelegateEvents(),null==(e=this.stopListening)||e.call(this)}preinitialize(){}initialize(){}beforeRender(){}afterRender(){}render(){return this.beforeRender(),e_(this.toHTML(),this),this.afterRender(),this}toHTML(){return""}delegateEvents(){if(!this.events)return this;for(let e in this.undelegateEvents(),this.events){let t=this.events[e];if("function"!=typeof t&&(t=this[t]),!t)continue;let s=e.match(tM);this.delegate(s[1],s[2],t.bind(this))}return this}delegate(e,t,s){let r=this;if(!r)return this;if("function"==typeof t&&(s=t,t=null),-1!==["focus","blur"].indexOf(e)){let r=this.querySelectorAll(t);for(let t=0,i=r.length;t<i;t++){let i=r[t];i.addEventListener(e,s,!1),this._domEvents.push({el:i,eventName:e,handler:s})}return s}let i=t?function(e){let i=e.target||e.srcElement;for(;i&&i!=r;i=i.parentNode)i.matches(t)&&(e.delegateTarget=i,s(e))}:s;return this.addEventListener(e,i,!1),this._domEvents.push({el:this,eventName:e,handler:i,listener:s,selector:t}),this}undelegateEvents(){if(this){for(let e=0,t=this._domEvents.length;e<t;e++){let t=this._domEvents[e];t.el.removeEventListener(t.eventName,t.handler,!1)}this._domEvents.length=0}return this}undelegate(e,t,s){if("function"==typeof t&&(s=t,t=null),this){let r=this._domEvents.slice(),i=r.length;for(;i--;){let o=r[i];o.eventName!==e||s&&o.listener!==s||t&&o.selector!==t||(o.el.removeEventListener(o.eventName,o.handler,!1),this._domEvents.splice(i,1))}}return this}}var tI=/^~~local_forage_type~([^~]+)~/,tN=Object.prototype.toString;function tR(e){var t=.75*e.length,s=e.length;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);for(var r=new ArrayBuffer(t),i=new Uint8Array(r),o=0,a=0;o<s;o+=4){var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o]),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o+1]),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o+2]),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o+3]);i[a++]=l<<2|d>>4,i[a++]=(15&d)<<4|c>>2,i[a++]=(3&c)<<6|63&u}return r}function tD(e){for(var t=new Uint8Array(e),s="",r=0;r<t.length;r+=3)s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t[r]>>2],s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&t[r])<<4|t[r+1]>>4],s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&t[r+1])<<2|t[r+2]>>6],s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&t[r+2]];return t.length%3==2?s=s.substring(0,s.length-1)+"=":t.length%3==1&&(s=s.substring(0,s.length-2)+"=="),s}function tL(e,t){return(e.name||t.name)+"/"+(e.storeName||t.storeName)+"/"}function tP(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function tz(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function tU(e,t){var s,r=this;if(t=tz.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var i=this.config();e.name=e.name||i.name,e.storeName=e.storeName||i.storeName}return{promise:e.name?new Promise(function(t){t(e.storeName?tL(e,r._defaultConfig):e.name+"/")}):Promise.reject("Invalid arguments"),callback:t}}function tB(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}var tF={bufferToString:tD,deserialize:function(e){if("__lfsc__:"!==e.substring(0,9))return JSON.parse(e);var t,s=e.substring(13),r=e.substring(9,13);if("blob"===r&&tI.test(s)){var i=s.match(tI);t=i[1],s=s.substring(i[0].length)}var o=tR(s);switch(r){case"arbf":return o;case"blob":return function(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var s=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)s.append(e[r]);return s.getBlob(t.type)}}([o],{type:t});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw Error("Unkown type: "+r)}},serialize:function(e,t){var s="";if(e&&(s=tN.call(e)),e&&("[object ArrayBuffer]"===s||e.buffer&&"[object ArrayBuffer]"===tN.call(e.buffer))){var r=void 0,i="__lfsc__:";e instanceof ArrayBuffer?(r=e,i+="arbf"):(r=e.buffer,"[object Int8Array]"===s?i+="si08":"[object Uint8Array]"===s?i+="ui08":"[object Uint8ClampedArray]"===s?i+="uic8":"[object Int16Array]"===s?i+="si16":"[object Uint16Array]"===s?i+="ur16":"[object Int32Array]"===s?i+="si32":"[object Uint32Array]"===s?i+="ui32":"[object Float32Array]"===s?i+="fl32":"[object Float64Array]"===s?i+="fl64":t(Error("Failed to get type for BinaryArray"))),t(i+tD(r))}else if("[object Blob]"===s){var o=new FileReader;o.onload=function(){t("__lfsc__:blob"+("~~local_forage_type~"+e.type+"~")+tD(this.result))},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),t(null,s)}},stringToBuffer:tR},tq="localforage-driver-memory",tH={},tG=function(){function e(e){this.kp=e,this.data={}}return e.resolve=function(t){return tH[t]||(tH[t]=new e(t)),tH[t]},e.prototype.clear=function(){this.data={}},e.prototype.drop=function(){this.clear(),delete tH[this.kp]},e.prototype.get=function(e){return this.data[e]},e.prototype.key=function(e){return this.keys()[e]},e.prototype.keys=function(){return Object.keys(this.data)},e.prototype.rm=function(e){delete this.data[e]},e.prototype.set=function(e,t){this.data[e]=t},e}(),tW=Object.freeze({__proto__:null,_driver:tq,_initStorage:function(e){var t=e?function e(t){if(null===t||"object"!=typeof t||"isActiveClone"in t)return t;var s,r,i=t instanceof Date?new Date(t):t.constructor();try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,s=t&&e[t],r=0;if(s)return s.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(t)),a=o.next();!a.done;a=o.next()){var l=a.value;Object.prototype.hasOwnProperty.call(t,l)&&(t.isActiveClone=null,i[l]=e(t[l]),delete t.isActiveClone)}}catch(e){s={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return i}(e):{},s=tL(t,this._defaultConfig),r=tG.resolve(s);return this._dbInfo=t,this._dbInfo.serializer=tF,this._dbInfo.keyPrefix=s,this._dbInfo.mStore=r,Promise.resolve()},_support:!0,clear:function(e){var t=this,s=this.ready().then(function(){t._dbInfo.mStore.clear()});return tP(s,e),s},dropInstance:function(e,t){var s=tU.apply(this,arguments),r=s.promise,i=s.callback;return tP(r.then(function(e){tG.resolve(e).drop()}),i),r},getItem:function(e,t){var s=this;e=tB(e);var r=this.ready().then(function(){var t=s._dbInfo.mStore.get(e);return null==t?null:s._dbInfo.serializer.deserialize(t)});return tP(r,t),r},iterate:function(e,t){var s=this,r=this.ready().then(function(){for(var t=s._dbInfo.mStore,r=t.keys(),i=0;i<r.length;i++){var o=t.get(r[i]);if(o&&(o=s._dbInfo.serializer.deserialize(o)),void 0!==(o=e(o,r[i],i+1)))return o}});return tP(r,t),r},key:function(e,t){var s=this,r=this.ready().then(function(){var t;try{t=s._dbInfo.mStore.key(e),void 0===t&&(t=null)}catch(e){t=null}return t});return tP(r,t),r},keys:function(e){var t=this,s=this.ready().then(function(){return t._dbInfo.mStore.keys()});return tP(s,e),s},length:function(e){var t=this.keys().then(function(e){return e.length});return tP(t,e),t},removeItem:function(e,t){var s=this;e=tB(e);var r=this.ready().then(function(){s._dbInfo.mStore.rm(e)});return tP(r,t),r},setItem:function(e,t,s){var r=this;e=tB(e);var i=this.ready().then(function(){void 0===t&&(t=null);var s=t;return new Promise(function(i,o){r._dbInfo.serializer.serialize(t,function(t,a){if(a)o(a);else try{r._dbInfo.mStore.set(e,t),i(s)}catch(e){o(e)}})})});return tP(i,s),i}});function tV(e,t){return e===t||e!=e&&t!=t}function tK(e,t){for(var s=e.length;s--;)if(tV(e[s][0],t))return s;return -1}var tJ=Array.prototype.splice;function tQ(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}tQ.prototype.clear=function(){this.__data__=[],this.size=0},tQ.prototype.delete=function(e){var t=this.__data__,s=tK(t,e);return!(s<0)&&(s==t.length-1?t.pop():tJ.call(t,s,1),--this.size,!0)},tQ.prototype.get=function(e){var t=this.__data__,s=tK(t,e);return s<0?void 0:t[s][1]},tQ.prototype.has=function(e){return tK(this.__data__,e)>-1},tQ.prototype.set=function(e,t){var s=this.__data__,r=tK(s,e);return r<0?(++this.size,s.push([e,t])):s[r][1]=t,this};var tY=eR(Object,"create"),tX=Object.prototype.hasOwnProperty,tZ=Object.prototype.hasOwnProperty;function t0(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}function t1(e,t){var s,r=e.__data__;return("string"==(s=typeof t)||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==t:null===t)?r["string"==typeof t?"string":"hash"]:r.map}function t2(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}function t4(e){var t=this.__data__=new tQ(e);this.size=t.size}t0.prototype.clear=function(){this.__data__=tY?tY(null):{},this.size=0},t0.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t},t0.prototype.get=function(e){var t=this.__data__;if(tY){var s=t[e];return"__lodash_hash_undefined__"===s?void 0:s}return tX.call(t,e)?t[e]:void 0},t0.prototype.has=function(e){var t=this.__data__;return tY?void 0!==t[e]:tZ.call(t,e)},t0.prototype.set=function(e,t){var s=this.__data__;return this.size+=+!this.has(e),s[e]=tY&&void 0===t?"__lodash_hash_undefined__":t,this},t2.prototype.clear=function(){this.size=0,this.__data__={hash:new t0,map:new(eL||tQ),string:new t0}},t2.prototype.delete=function(e){var t=t1(this,e).delete(e);return this.size-=!!t,t},t2.prototype.get=function(e){return t1(this,e).get(e)},t2.prototype.has=function(e){return t1(this,e).has(e)},t2.prototype.set=function(e,t){var s=t1(this,e),r=s.size;return s.set(e,t),this.size+=+(s.size!=r),this},t4.prototype.clear=function(){this.__data__=new tQ,this.size=0},t4.prototype.delete=function(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s},t4.prototype.get=function(e){return this.__data__.get(e)},t4.prototype.has=function(e){return this.__data__.has(e)},t4.prototype.set=function(e,t){var s=this.__data__;if(s instanceof tQ){var r=s.__data__;if(!eL||r.length<199)return r.push([e,t]),this.size=++s.size,this;s=this.__data__=new t2(r)}return s.set(e,t),this.size=s.size,this};var t3=function(){try{var e=eR(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();function t6(e,t,s){"__proto__"==t&&t3?t3(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}var t8=Object.prototype.hasOwnProperty;function t5(e,t,s){var r=e[t];t8.call(e,t)&&tV(r,s)&&(void 0!==s||t in e)||t6(e,t,s)}function t9(e,t,s,r){var i=!s;s||(s={});for(var o=-1,a=t.length;++o<a;){var l=t[o],d=void 0;void 0===d&&(d=e[l]),i?t6(s,l,d):t5(s,l,d)}return s}var t7=Object.prototype.hasOwnProperty;function se(e){return e3(e)?th(e,!0):function(e){if(!ex(e)){var t=[];if(null!=e)for(var s in Object(e))t.push(s);return t}var r=ey(e),i=[];for(var o in e)"constructor"==o&&(r||!t7.call(e,o))||i.push(o);return i}(e)}var st="object"==typeof t&&t&&!t.nodeType&&t,ss=st&&e&&!e.nodeType&&e,sr=ss&&ss.exports===st?_.Buffer:void 0,sn=sr?sr.allocUnsafe:void 0;function si(e,t){if(t)return e.slice();var s=e.length,r=sn?sn(s):new e.constructor(s);return e.copy(r),r}function so(e,t){var s=-1,r=e.length;for(t||(t=Array(r));++s<r;)t[s]=e[s];return t}function sa(){return[]}var sl=Object.prototype.propertyIsEnumerable,sd=Object.getOwnPropertySymbols,sc=sd?function(e){return null==e?[]:function(e,t){for(var s=-1,r=null==e?0:e.length,i=0,o=[];++s<r;){var a=e[s];t(a,s,e)&&(o[i++]=a)}return o}(sd(e=Object(e)),function(t){return sl.call(e,t)})}:sa;function su(e,t){for(var s=-1,r=t.length,i=e.length;++s<r;)e[i+s]=t[s];return e}var sh=eb(Object.getPrototypeOf,Object),sm=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)su(t,sc(e)),e=sh(e);return t}:sa;function sf(e,t,s){var r=t(e);return b(e)?r:su(r,s(e))}function sp(e){return sf(e,tm,sc)}function sg(e){return sf(e,se,sm)}var s_=Object.prototype.hasOwnProperty,sv=_.Uint8Array;function sy(e){var t=new e.constructor(e.byteLength);return new sv(t).set(new sv(e)),t}var sb=/\w*$/,sj=v?v.prototype:void 0,sw=sj?sj.valueOf:void 0;function sS(e,t){var s=t?sy(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}var sx=Object.create,sE=function(){function e(){}return function(t){if(!ex(t))return{};if(sx)return sx(t);e.prototype=t;var s=new e;return e.prototype=void 0,s}}();function sA(e){return"function"!=typeof e.constructor||ey(e)?{}:sE(sh(e))}var sC=tn&&tn.isMap,sk=sC?te(sC):function(e){return k(e)&&"[object Map]"==eY(e)},s$=tn&&tn.isSet,sT=s$?te(s$):function(e){return k(e)&&"[object Set]"==eY(e)},sM="[object Arguments]",sO="[object Function]",sI="[object Object]",sN={};function sR(e,t,s,r,i,o){var a,l=1&t,d=2&t,c=4&t;if(s&&(a=i?s(e,r,i,o):s(e)),void 0!==a)return a;if(!ex(e))return e;var u=b(e);if(u){if(h=e.length,m=new e.constructor(h),h&&"string"==typeof e[0]&&s_.call(e,"index")&&(m.index=e.index,m.input=e.input),a=m,!l)return so(e,a)}else{var h,m,f,p,g,_,v=eY(e),y=v==sO||"[object GeneratorFunction]"==v;if(e9(e))return si(e,l);if(v==sI||v==sM||y&&!i){if(a=d||y?{}:sA(e),!l)return d?(p=(f=a)&&t9(e,se(e),f),t9(e,sm(e),p)):(_=(g=a)&&t9(e,tm(e),g),t9(e,sc(e),_))}else{if(!sN[v])return i?e:{};a=function(e,t,s){var r,i,o=e.constructor;switch(t){case"[object ArrayBuffer]":return sy(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return r=s?sy(e.buffer):e.buffer,new e.constructor(r,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return sS(e,s);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return(i=new e.constructor(e.source,sb.exec(e))).lastIndex=e.lastIndex,i;case"[object Symbol]":return sw?Object(sw.call(e)):{}}}(e,v,l)}}o||(o=new t4);var j=o.get(e);if(j)return j;o.set(e,a),sT(e)?e.forEach(function(r){a.add(sR(r,t,s,r,e,o))}):sk(e)&&e.forEach(function(r,i){a.set(i,sR(r,t,s,i,e,o))});var w=c?d?sg:sp:d?se:tm,S=u?void 0:w(e);return!function(e,t){for(var s=-1,r=null==e?0:e.length;++s<r&&!1!==t(e[s],s,e););}(S||e,function(r,i){S&&(r=e[i=r]),t5(a,i,sR(r,t,s,i,e,o))}),a}function sD(e){return"string"==typeof e||!b(e)&&k(e)&&"[object String]"==C(e)}sN[sM]=sN["[object Array]"]=sN["[object ArrayBuffer]"]=sN["[object DataView]"]=sN["[object Boolean]"]=sN["[object Date]"]=sN["[object Float32Array]"]=sN["[object Float64Array]"]=sN["[object Int8Array]"]=sN["[object Int16Array]"]=sN["[object Int32Array]"]=sN["[object Map]"]=sN["[object Number]"]=sN[sI]=sN["[object RegExp]"]=sN["[object Set]"]=sN["[object String]"]=sN["[object Symbol]"]=sN["[object Uint8Array]"]=sN["[object Uint8ClampedArray]"]=sN["[object Uint16Array]"]=sN["[object Uint32Array]"]=!0,sN["[object Error]"]=sN[sO]=sN["[object WeakMap]"]=!1;var sL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==s.g?s.g:"undefined"!=typeof self?self:{};function sP(e){throw Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sz={exports:{}};function sU(){return m?sz.exports:(m=1,sz.exports=(function e(t,s,r){function i(a,l){if(!s[a]){if(!t[a]){if(!l&&sP)return sP(a,!0);if(o)return o(a,!0);var d=Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=s[a]={exports:{}};t[a][0].call(c.exports,function(e){return i(t[a][1][e]||e)},c,c.exports,e,t,s,r)}return s[a].exports}for(var o=sP,a=0;a<r.length;a++)i(r[a]);return i})({1:[function(e,t,s){(function(e){var s,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(u),l=e.document.createTextNode("");a.observe(l,{characterData:!0}),s=function(){l.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)s="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var d=new e.MessageChannel;d.port1.onmessage=u,s=function(){d.port2.postMessage(0)}}var c=[];function u(){r=!0;for(var e,t,s=c.length;s;){for(t=c,c=[],e=-1;++e<s;)t[e]();s=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||s()}}).call(this,void 0!==sL?sL:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,s){var r=e(1);function i(){}var o={},a=["REJECTED"],l=["FULFILLED"],d=["PENDING"];function c(e){if("function"!=typeof e)throw TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function u(e,t,s){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof s&&(this.onRejected=s,this.callRejected=this.otherCallRejected)}function h(e,t,s){r(function(){var r;try{r=t(s)}catch(t){return o.reject(e,t)}r===e?o.reject(e,TypeError("Cannot resolve promise with itself")):o.resolve(e,r)})}function m(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var s=!1;function r(t){s||(s=!0,o.reject(e,t))}function i(t){s||(s=!0,o.resolve(e,t))}var a=p(function(){t(i,r)});"error"===a.status&&r(a.value)}function p(e,t){var s={};try{s.value=e(t),s.status="success"}catch(e){s.status="error",s.value=e}return s}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===l||"function"!=typeof t&&this.state===a)return this;var s=new this.constructor(i);return this.state!==d?h(s,this.state===l?e:t,this.outcome):this.queue.push(new u(s,e,t)),s},u.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){o.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},o.resolve=function(e,t){var s=p(m,t);if("error"===s.status)return o.reject(e,s.value);var r=s.value;if(r)f(e,r);else{e.state=l,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var s=-1,r=e.queue.length;++s<r;)e.queue[s].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(TypeError("must be an array"));var s=e.length,r=!1;if(!s)return this.resolve([]);for(var a=Array(s),l=0,d=-1,c=new this(i);++d<s;)!function(e,i){t.resolve(e).then(function(e){a[i]=e,++l!==s||r||(r=!0,o.resolve(c,a))},function(e){r||(r=!0,o.reject(c,e))})}(e[d],d);return c},c.race=function(e){var t,s=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(TypeError("must be an array"));var r=e.length,a=!1;if(!r)return this.resolve([]);for(var l=-1,d=new this(i);++l<r;){t=e[l],s.resolve(t).then(function(e){a||(a=!0,o.resolve(d,e))},function(e){a||(a=!0,o.reject(d,e))})}return d}},{1:1}],3:[function(e,t,s){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==sL?sL:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,s){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var s=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)s.append(e[r]);return s.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function l(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function d(e,t,s){"function"==typeof t&&e.then(t),"function"==typeof s&&e.catch(s)}function c(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",m=void 0,f={},p=Object.prototype.toString,g="readonly",_="readwrite";function v(e){var t=f[e.name],s={};s.promise=new a(function(e,t){s.resolve=e,s.reject=t}),t.deferredOperations.push(s),t.dbReady?t.dbReady=t.dbReady.then(function(){return s.promise}):t.dbReady=s.promise}function y(e){var t=f[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function b(e,t){var s=f[e.name].deferredOperations.pop();if(s)return s.reject(t),s.promise}function j(e,t){return new a(function(s,r){if(f[e.name]=f[e.name]||C(),e.db)if(!t)return s(e.db);else v(e),e.db.close();var o=[e.name];t&&o.push(e.version);var a=i.open.apply(i,o);t&&(a.onupgradeneeded=function(t){var s=a.result;try{s.createObjectStore(e.storeName),t.oldVersion<=1&&s.createObjectStore(h)}catch(s){if("ConstraintError"===s.name)console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw s}}),a.onerror=function(e){e.preventDefault(),r(a.error)},a.onsuccess=function(){var t=a.result;t.onversionchange=function(e){e.target.close()},s(t),y(e)}})}function w(e,t){if(!e.db)return!0;var s=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||s){if(s){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function S(e){return o([function(e){for(var t=e.length,s=new ArrayBuffer(t),r=new Uint8Array(s),i=0;i<t;i++)r[i]=e.charCodeAt(i);return s}(atob(e.data))],{type:e.type})}function x(e){return e&&e.__local_forage_encoded_blob}function E(e){var t=this,s=t._initReady().then(function(){var e=f[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return d(s,e,e),s}function A(e,t,s,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);s(null,i)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return a.resolve().then(function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),j(e,!0)}).then(function(){return(function(e){v(e);for(var t=f[e.name],s=t.forages,r=0;r<s.length;r++){var i=s[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,j(e,!1).then(function(t){return(e.db=t,w(e))?j(e,!0):t}).then(function(r){e.db=t.db=r;for(var i=0;i<s.length;i++)s[i]._dbInfo.db=r}).catch(function(t){throw b(e,t),t})})(e).then(function(){A(e,t,s,r-1)})}).catch(s);s(i)}}function C(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}var k={_driver:"asyncStorage",_initStorage:function(e){var t=this,s={db:null};if(e)for(var r in e)s[r]=e[r];var i=f[s.name];i||(i=C(),f[s.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=E);var o=[];function l(){return a.resolve()}for(var d=0;d<i.forages.length;d++){var c=i.forages[d];c!==t&&o.push(c._initReady().catch(l))}var u=i.forages.slice(0);return a.all(o).then(function(){return s.db=i.db,j(s,!1)}).then(function(e){return(s.db=e,w(s,t._defaultConfig.version))?j(s,!0):e}).then(function(e){s.db=i.db=e,t._dbInfo=s;for(var r=0;r<u.length;r++){var o=u[r];o!==t&&(o._dbInfo.db=s.db,o._dbInfo.version=s.version)}})},_support:function(){try{if(!i||!i.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var s=this,r=new a(function(t,r){s.ready().then(function(){A(s._dbInfo,g,function(i,o){if(i)return r(i);try{var a=o.objectStore(s._dbInfo.storeName).openCursor(),l=1;a.onsuccess=function(){var s=a.result;if(s){var r=s.value;x(r)&&(r=S(r));var i=e(r,s.key,l++);void 0!==i?t(i):s.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return l(r,t),r},getItem:function(e,t){var s=this;e=c(e);var r=new a(function(t,r){s.ready().then(function(){A(s._dbInfo,g,function(i,o){if(i)return r(i);try{var a=o.objectStore(s._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),x(e)&&(e=S(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return l(r,t),r},setItem:function(e,t,s){var r=this;e=c(e);var i=new a(function(s,i){var l;r.ready().then(function(){return(l=r._dbInfo,"[object Blob]"===p.call(t))?(function(e){return"boolean"==typeof m?a.resolve(m):new a(function(t){var s=e.transaction(h,_),r=o([""]);s.objectStore(h).put(r,"key"),s.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},s.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);t(navigator.userAgent.match(/Edge\//)||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1}).then(function(e){return m=e})})(l.db).then(function(e){return e?t:new a(function(e,s){var r=new FileReader;r.onerror=s,r.onloadend=function(s){e({__local_forage_encoded_blob:!0,data:btoa(s.target.result||""),type:t.type})},r.readAsBinaryString(t)})}):t}).then(function(t){A(r._dbInfo,_,function(o,a){if(o)return i(o);try{var l=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var d=l.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),s(t)},a.onabort=a.onerror=function(){var e=d.error?d.error:d.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return l(i,s),i},removeItem:function(e,t){var s=this;e=c(e);var r=new a(function(t,r){s.ready().then(function(){A(s._dbInfo,_,function(i,o){if(i)return r(i);try{var a=o.objectStore(s._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(a.error)},o.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}})}).catch(r)});return l(r,t),r},clear:function(e){var t=this,s=new a(function(e,s){t.ready().then(function(){A(t._dbInfo,_,function(r,i){if(r)return s(r);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;s(e)}}catch(e){s(e)}})}).catch(s)});return l(s,e),s},length:function(e){var t=this,s=new a(function(e,s){t.ready().then(function(){A(t._dbInfo,g,function(r,i){if(r)return s(r);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){s(o.error)}}catch(e){s(e)}})}).catch(s)});return l(s,e),s},key:function(e,t){var s=this,r=new a(function(t,r){if(e<0)return void t(null);s.ready().then(function(){A(s._dbInfo,g,function(i,o){if(i)return r(i);try{var a=o.objectStore(s._dbInfo.storeName),l=!1,d=a.openKeyCursor();d.onsuccess=function(){var s=d.result;if(!s)return void t(null);0===e||l?t(s.key):(l=!0,s.advance(e))},d.onerror=function(){r(d.error)}}catch(e){r(e)}})}).catch(r)});return l(r,t),r},keys:function(e){var t=this,s=new a(function(e,s){t.ready().then(function(){A(t._dbInfo,g,function(r,i){if(r)return s(r);try{var o=i.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];o.onsuccess=function(){var t=o.result;if(!t)return void e(a);a.push(t.key),t.continue()},o.onerror=function(){s(o.error)}}catch(e){s(e)}})}).catch(s)});return l(s,e),s},dropInstance:function(e,t){t=u.apply(this,arguments);var s,r=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),e.name){var o=e.name===r.name&&this._dbInfo.db?a.resolve(this._dbInfo.db):j(e,!1).then(function(t){var s=f[e.name],r=s.forages;s.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t});s=e.storeName?o.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var s=t.version+1;v(e);var r=f[e.name],o=r.forages;t.close();for(var l=0;l<o.length;l++){var d=o[l];d._dbInfo.db=null,d._dbInfo.version=s}return new a(function(t,r){var o=i.open(e.name,s);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<o.length;t++){var s=o[t];s._dbInfo.db=e,y(s._dbInfo)}}).catch(function(t){throw(b(e,t)||a.resolve()).catch(function(){}),t})}}):o.then(function(t){v(e);var s=f[e.name],r=s.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new a(function(t,s){var r=i.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),s(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){s.db=e;for(var t=0;t<r.length;t++)y(r[t]._dbInfo)}).catch(function(t){throw(b(e,t)||a.resolve()).catch(function(){}),t})})}else s=a.reject("Invalid arguments");return l(s,t),s}},$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=/^~~local_forage_type~([^~]+)~/,M="__lfsc__:",O=M.length,I="arbf",N="blob",R="si08",D="ui08",L="uic8",P="si16",z="si32",U="ur16",B="ui32",F="fl32",q="fl64",H=O+I.length,G=Object.prototype.toString;function W(e){var t,s,r,i,o,a=.75*e.length,l=e.length,d=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),u=new Uint8Array(c);for(t=0;t<l;t+=4)s=$.indexOf(e[t]),r=$.indexOf(e[t+1]),i=$.indexOf(e[t+2]),o=$.indexOf(e[t+3]),u[d++]=s<<2|r>>4,u[d++]=(15&r)<<4|i>>2,u[d++]=(3&i)<<6|63&o;return c}function V(e){var t,s=new Uint8Array(e),r="";for(t=0;t<s.length;t+=3)r+=$[s[t]>>2],r+=$[(3&s[t])<<4|s[t+1]>>4],r+=$[(15&s[t+1])<<2|s[t+2]>>6],r+=$[63&s[t+2]];return s.length%3==2?r=r.substring(0,r.length-1)+"=":s.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var K={serialize:function(e,t){var s="";if(e&&(s=G.call(e)),e&&("[object ArrayBuffer]"===s||e.buffer&&"[object ArrayBuffer]"===G.call(e.buffer))){var r,i=M;e instanceof ArrayBuffer?(r=e,i+=I):(r=e.buffer,"[object Int8Array]"===s?i+=R:"[object Uint8Array]"===s?i+=D:"[object Uint8ClampedArray]"===s?i+=L:"[object Int16Array]"===s?i+=P:"[object Uint16Array]"===s?i+=U:"[object Int32Array]"===s?i+=z:"[object Uint32Array]"===s?i+=B:"[object Float32Array]"===s?i+=F:"[object Float64Array]"===s?i+=q:t(Error("Failed to get type for BinaryArray"))),t(i+V(r))}else if("[object Blob]"===s){var o=new FileReader;o.onload=function(){t(M+N+("~~local_forage_type~"+e.type+"~")+V(this.result))},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),t(null,s)}},deserialize:function(e){if(e.substring(0,O)!==M)return JSON.parse(e);var t,s=e.substring(H),r=e.substring(O,H);if(r===N&&T.test(s)){var i=s.match(T);t=i[1],s=s.substring(i[0].length)}var a=W(s);switch(r){case I:return a;case N:return o([a],{type:t});case R:return new Int8Array(a);case D:return new Uint8Array(a);case L:return new Uint8ClampedArray(a);case P:return new Int16Array(a);case U:return new Uint16Array(a);case z:return new Int32Array(a);case B:return new Uint32Array(a);case F:return new Float32Array(a);case q:return new Float64Array(a);default:throw Error("Unkown type: "+r)}},stringToBuffer:W,bufferToString:V};function J(e,t,s,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],s,r)}function Q(e,t,s,r,i,o){e.executeSql(s,r,i,function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],function(e,l){l.rows.length?o(e,a):J(e,t,function(){e.executeSql(s,r,i,o)},o)},o):o(e,a)},o)}function Y(e,t,s,r){var i=this;e=c(e);var o=new a(function(o,a){i.ready().then(function(){void 0===t&&(t=null);var l=t,d=i._dbInfo;d.serializer.serialize(t,function(t,c){c?a(c):d.db.transaction(function(s){Q(s,d,"INSERT OR REPLACE INTO "+d.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){o(l)},function(e,t){a(t)})},function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(Y.apply(i,[e,l,s,r-1]));a(t)}})})}).catch(a)});return l(o,s),o}var X={_driver:"webSQLStorage",_initStorage:function(e){var t=this,s={db:null};if(e)for(var r in e)s[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new a(function(e,r){try{s.db=openDatabase(s.name,String(s.version),s.description,s.size)}catch(e){return r(e)}s.db.transaction(function(i){J(i,s,function(){t._dbInfo=s,e()},function(e,t){r(t)})},r)});return s.serializer=K,i},_support:"function"==typeof openDatabase,iterate:function(e,t){var s=this,r=new a(function(t,r){s.ready().then(function(){var i=s._dbInfo;i.db.transaction(function(s){Q(s,i,"SELECT * FROM "+i.storeName,[],function(s,r){for(var o=r.rows,a=o.length,l=0;l<a;l++){var d=o.item(l),c=d.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,d.key,l+1)))return void t(c)}t()},function(e,t){r(t)})})}).catch(r)});return l(r,t),r},getItem:function(e,t){var s=this;e=c(e);var r=new a(function(t,r){s.ready().then(function(){var i=s._dbInfo;i.db.transaction(function(s){Q(s,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,s){var r=s.rows.length?s.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return l(r,t),r},setItem:function(e,t,s){return Y.apply(this,[e,t,s,1])},removeItem:function(e,t){var s=this;e=c(e);var r=new a(function(t,r){s.ready().then(function(){var i=s._dbInfo;i.db.transaction(function(s){Q(s,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return l(r,t),r},clear:function(e){var t=this,s=new a(function(e,s){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){Q(t,r,"DELETE FROM "+r.storeName,[],function(){e()},function(e,t){s(t)})})}).catch(s)});return l(s,e),s},length:function(e){var t=this,s=new a(function(e,s){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){Q(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,s){e(s.rows.item(0).c)},function(e,t){s(t)})})}).catch(s)});return l(s,e),s},key:function(e,t){var s=this,r=new a(function(t,r){s.ready().then(function(){var i=s._dbInfo;i.db.transaction(function(s){Q(s,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,s){t(s.rows.length?s.rows.item(0).key:null)},function(e,t){r(t)})})}).catch(r)});return l(r,t),r},keys:function(e){var t=this,s=new a(function(e,s){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){Q(t,r,"SELECT key FROM "+r.storeName,[],function(t,s){for(var r=[],i=0;i<s.rows.length;i++)r.push(s.rows.item(i).key);e(r)},function(e,t){s(t)})})}).catch(s)});return l(s,e),s},dropInstance:function(e,t){t=u.apply(this,arguments);var s,r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var i=this;return l(s=e.name?new a(function(t){var s;(s=e.name===r.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName)?t({db:s,storeNames:[e.storeName]}):t(new a(function(e,t){s.transaction(function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(t,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);e({db:s,storeNames:i})},function(e,s){t(s)})},function(e){t(e)})}))}).then(function(e){return new a(function(t,s){e.db.transaction(function(r){for(var i=[],o=0,l=e.storeNames.length;o<l;o++)i.push(function(e){return new a(function(t,s){r.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){s(t)})})}(e.storeNames[o]));a.all(i).then(function(){t()}).catch(function(e){s(e)})},function(e){s(e)})})}):a.reject("Invalid arguments"),t),s}};function Z(e,t){var s=e.name+"/";return e.storeName!==t.storeName&&(s+=e.storeName+"/"),s}var ee={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var s in e)t[s]=e[s];return(t.keyPrefix=Z(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||localStorage.length>0)?(this._dbInfo=t,t.serializer=K,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var s=this,r=s.ready().then(function(){for(var t=s._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,a=1,l=0;l<o;l++){var d=localStorage.key(l);if(0===d.indexOf(r)){var c=localStorage.getItem(d);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,d.substring(i),a++)))return c}}});return l(r,t),r},getItem:function(e,t){var s=this;e=c(e);var r=s.ready().then(function(){var t=s._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return l(r,t),r},setItem:function(e,t,s){var r=this;e=c(e);var i=r.ready().then(function(){void 0===t&&(t=null);var s=t;return new a(function(i,o){var a=r._dbInfo;a.serializer.serialize(t,function(t,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+e,t),i(s)}catch(e){("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&o(e),o(e)}})})});return l(i,s),i},removeItem:function(e,t){var s=this;e=c(e);var r=s.ready().then(function(){var t=s._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return l(r,t),r},clear:function(e){var t=this,s=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,s=localStorage.length-1;s>=0;s--){var r=localStorage.key(s);0===r.indexOf(e)&&localStorage.removeItem(r)}});return l(s,e),s},length:function(e){var t=this.keys().then(function(e){return e.length});return l(t,e),t},key:function(e,t){var s=this,r=s.ready().then(function(){var t,r=s._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return l(r,t),r},keys:function(e){var t=this,s=t.ready().then(function(){for(var e=t._dbInfo,s=localStorage.length,r=[],i=0;i<s;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r});return l(s,e),s},dropInstance:function(e,t){if(t=u.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var s,r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var i=this;return l(s=e.name?new a(function(t){t(e.storeName?Z(e,i._defaultConfig):e.name+"/")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var s=localStorage.key(t);0===s.indexOf(e)&&localStorage.removeItem(s)}}):a.reject("Invalid arguments"),t),s}},et=function(e,t){for(var s,r=e.length,i=0;i<r;){if((s=e[i])===t||"number"==typeof s&&"number"==typeof t&&isNaN(s)&&isNaN(t))return!0;i++}return!1},es=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},er={},en={},ei={INDEXEDDB:k,WEBSQL:X,LOCALSTORAGE:ee},eo=[ei.INDEXEDDB._driver,ei.WEBSQL._driver,ei.LOCALSTORAGE._driver],ea=["dropInstance"],el=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ea),ed={description:"",driver:eo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ec(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var s in t)t.hasOwnProperty(s)&&(es(t[s])?arguments[0][s]=t[s].slice():arguments[0][s]=t[s])}return arguments[0]}t.exports=new(function(){function e(t){if(!(this instanceof e))throw TypeError("Cannot call a class as a function");for(var s in ei)if(ei.hasOwnProperty(s)){var r=ei[s],i=r._driver;this[s]=i,er[i]||this.defineDriver(r)}this._defaultConfig=ec({},ed),this._config=ec({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if((void 0===e?"undefined":r(e))==="object"){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,s){var r=new a(function(t,s){try{var r=e._driver,i=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void s(i);for(var o=el.concat("_initStorage"),d=0,c=o.length;d<c;d++){var u=o[d];if((!et(ea,u)||e[u])&&"function"!=typeof e[u])return void s(i)}for(var h=function(e){return function(){var t=Error("Method "+e+" is not implemented by the current driver"),s=a.reject(t);return l(s,arguments[arguments.length-1]),s}},m=0,f=ea.length;m<f;m++){var p=ea[m];e[p]||(e[p]=h(p))}var g=function(s){er[r]&&console.info("Redefining LocalForage driver: "+r),er[r]=e,en[r]=s,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(g,s):g(!!e._support):g(!0)}catch(e){s(e)}});return d(r,t,s),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,s){var r=er[e]?a.resolve(er[e]):a.reject(Error("Driver not found."));return d(r,t,s),r},e.prototype.getSerializer=function(e){var t=a.resolve(K);return d(t,e),t},e.prototype.ready=function(e){var t=this,s=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return d(s,e,e),s},e.prototype.setDriver=function(e,t,s){var r=this;es(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function l(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}var c=null!==this._driverSet?this._driverSet.catch(function(){return a.resolve()}):a.resolve();return this._driverSet=c.then(function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then(function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(){var e=0;return function t(){for(;e<i.length;){var s=i[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(s).then(l).catch(t)}o();var d=Error("No available storage method found.");return r._driverSet=a.reject(d),r._driverSet}()}})}).catch(function(){o();var e=Error("No available storage method found.");return r._driverSet=a.reject(e),r._driverSet}),d(this._driverSet,t,s),this._driverSet},e.prototype.supports=function(e){return!!en[e]},e.prototype._extend=function(e){ec(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],s=0,r=e.length;s<r;s++){var i=e[s];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=el.length;e<t;e++)!function(e,t){e[t]=function(){var s=arguments;return e.ready().then(function(){return e[t].apply(e,s)})}}(this,el[e])},e.prototype.createInstance=function(t){return new e(t)},e}())},{3:3}]},{},[4])(4),sz.exports)}var sB=(o=sU())&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o;function sF(e,t,s){(void 0===s||tV(e[t],s))&&(void 0!==s||t in e)||t6(e,t,s)}var sq=function(e,t,s){for(var r=-1,i=Object(e),o=s(e),a=o.length;a--;){var l=o[++r];if(!1===t(i[l],l,i))break}return e},sH=Object.prototype,sG=Function.prototype.toString,sW=sH.hasOwnProperty,sV=sG.call(Object);function sK(e){if(!k(e)||"[object Object]"!=C(e))return!1;var t=sh(e);if(null===t)return!0;var s=sW.call(t,"constructor")&&t.constructor;return"function"==typeof s&&s instanceof s&&sG.call(s)==sV}function sJ(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function sQ(e,t,s,r,i){e!==t&&sq(t,function(o,a){if(i||(i=new t4),ex(o))!function(e,t,s,r,i,o,a){var l=sJ(e,s),d=sJ(t,s),c=a.get(d);if(c)return sF(e,s,c);var u=o?o(l,d,s+"",e,t,a):void 0,h=void 0===u;if(h){var m=b(d),f=!m&&e9(d),p=!m&&!f&&to(d);(u=d,m||f||p)?b(l)?u=l:k(l)&&e3(l)?u=so(l):f?(h=!1,u=si(d,!0)):p?(h=!1,u=sS(d,!0)):u=[]:sK(d)||e2(d)?(u=l,e2(l))?u=t9(l,se(l)):(!ex(l)||eE(l))&&(u=sA(d)):h=!1}h&&(a.set(d,u),i(u,d,r,o,a),a.delete(d)),sF(e,s,u)}(e,t,a,s,sQ,r,i);else{var l=r?r(sJ(e,a),o,a+"",e,t,i):void 0;void 0===l&&(l=o),sF(e,a,l)}},se)}function sY(e){return e}var sX=Math.max;function sZ(e,t,s){return t=sX(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=sX(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=r[i];l[t]=s(a);switch(l.length){case 0:return e.call(this);case 1:return e.call(this,l[0]);case 2:return e.call(this,l[0],l[1]);case 3:return e.call(this,l[0],l[1],l[2])}return e.apply(this,l)}}function s0(e){return function(){return e}}var s1=t3?function(e,t){return t3(e,"toString",{configurable:!0,enumerable:!1,value:s0(t),writable:!0})}:sY,s2=Date.now,s4=(a=0,l=0,function(){var e=s2(),t=16-(e-l);if(l=e,t>0){if(++a>=800)return arguments[0]}else a=0;return s1.apply(void 0,arguments)});function s3(e,t){return s4(sZ(e,t,sY),e+"")}function s6(e,t,s){if(!ex(s))return!1;var r=typeof t;return("number"==r?!!(e3(s)&&tc(t,s.length)):"string"==r&&t in s)&&tV(s[t],e)}function s8(e){return s3(function(t,s){var r=-1,i=s.length,o=i>1?s[i-1]:void 0,a=i>2?s[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&s6(s[0],s[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var l=s[r];l&&e(t,l,r,o)}return t})}var s5=s8(function(e,t,s){sQ(e,t,s)}),s9=s8(function(e,t,s,r){sQ(e,t,s,r)});function s7(){let e,t=()=>{},s=()=>{};if("function"==typeof Promise.withResolvers){let{promise:r,resolve:i,reject:o}=Promise.withResolvers();e=r,t=i,s=o}else e=new Promise((e,r)=>{t=e,s=r});return Object.assign(e,{isResolved:!1,isPending:!0,isRejected:!1,resolve:t,reject:s}),e.then(t=>(e.isResolved=!0,e.isPending=!1,e.isRejected=!1,t),t=>{throw e.isResolved=!1,e.isPending=!1,e.isRejected=!0,t}),e}let re=Math.max,rt=Math.min;function rs(e){if("number"==typeof e)return e;if("string"==typeof e){let t=parseFloat(e);return isNaN(t)?0:t}return 0}function rr(e,t,s={}){let r,i,o,a,l,d,c=0,u=!1,h=s.promise?s7():null;if("function"!=typeof e)throw TypeError("Expected a function");function m(t){let o=r,l=i,d=h;return r=i=void 0,c=t,a=e.apply(l,o),s.promise&&(d.resolve(a),h=s7()),s.promise?d:a}function f(e){let s=e-d,r=e-c;return void 0===d||s>=t||s<0||u&&r>=o}function p(){let e=Date.now();if(f(e))return g(e);l=setTimeout(p,function(e){let s=e-d,r=e-c,i=t-s;return u?rt(i,o-r):i}(e))}function g(e){return(l=void 0,r)?m(e):(r=i=void 0,s.promise?h:a)}function _(e,t){if(Array.isArray(e)&&Array.isArray(t))if(null!=s&&s.dedupeArrays)return e.concat(t.filter(t=>-1===e.indexOf(t)));else return e.concat(t)}function v(){var e,o;let g=Date.now(),v=f(g);if(e=Array.from(arguments),r=null!=(o=r)&&o.length?e.length?null!=s&&s.concatArrays||null!=s&&s.dedupeArrays?s9(r,e,_):s5(r,e):r:e||[],i=this,d=g,v){if(void 0===l)return c=d,l=setTimeout(p,t),s.promise?h:a;if(u)return clearTimeout(l),l=setTimeout(p,t),m(d)}return void 0===l&&(l=setTimeout(p,t)),s.promise?h:a}return t=rs(t)||0,function(e){let t=typeof e;return null!=e&&("object"===t||"function"===t)}(s)&&(o=(u="maxWait"in s)?re(rs(s.maxWait)||0,t):o),v.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=d=i=l=void 0},v.flush=function(){return void 0===l?a:g(Date.now())},v}function rn(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function ri(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function ro(e){return"string"!=typeof e&&(console.warn(`${e} used as a key, but it is not a string.`),e=String(e)),e}var ra="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rl=/^~~local_forage_type~([^~]+)~/,rd="__lfsc__:",rc=rd.length,ru="arbf",rh="blob",rm="si08",rf="ui08",rp="uic8",rg="si16",r_="si32",rv="ur16",ry="ui32",rb="fl32",rj="fl64",rw=rc+ru.length,rS=Object.prototype.toString;function rx(e){var t,s=new Uint8Array(e),r="";for(t=0;t<s.length;t+=3)r+=ra[s[t]>>2],r+=ra[(3&s[t])<<4|s[t+1]>>4],r+=ra[(15&s[t+1])<<2|s[t+2]>>6],r+=ra[63&s[t+2]];return s.length%3==2?r=r.substring(0,r.length-1)+"=":s.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function rE(e,t){let s=e.name+"/";return e.storeName!==t.storeName&&(s+=e.storeName+"/"),s}let rA={serializer:{serialize:function(e,t){var s="";if(e&&(s=rS.call(e)),e&&("[object ArrayBuffer]"===s||e.buffer&&"[object ArrayBuffer]"===rS.call(e.buffer))){var r,i=rd;e instanceof ArrayBuffer?(r=e,i+=ru):(r=e.buffer,"[object Int8Array]"===s?i+=rm:"[object Uint8Array]"===s?i+=rf:"[object Uint8ClampedArray]"===s?i+=rp:"[object Int16Array]"===s?i+=rg:"[object Uint16Array]"===s?i+=rv:"[object Int32Array]"===s?i+=r_:"[object Uint32Array]"===s?i+=ry:"[object Float32Array]"===s?i+=rb:"[object Float64Array]"===s?i+=rj:t(Error("Failed to get type for BinaryArray"))),t(i+rx(r))}else if("[object Blob]"===s){var o=new FileReader;o.onload=function(){t(rd+rh+("~~local_forage_type~"+e.type+"~")+rx(this.result))},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),t(null,s)}},deserialize:function(e){if(e.substring(0,rc)!==rd)return JSON.parse(e);var t,s=e.substring(rw),r=e.substring(rc,rw);if(r===rh&&rl.test(s)){var i=s.match(rl);t=i[1],s=s.substring(i[0].length)}var o=function(e){var t,s,r,i,o,a=.75*e.length,l=e.length,d=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),u=new Uint8Array(c);for(t=0;t<l;t+=4)s=ra.indexOf(e[t]),r=ra.indexOf(e[t+1]),i=ra.indexOf(e[t+2]),o=ra.indexOf(e[t+3]),u[d++]=s<<2|r>>4,u[d++]=(15&r)<<4|i>>2,u[d++]=(3&i)<<6|63&o;return c}(s);switch(r){case ru:return o;case rh:return function(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var s=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)s.append(e[r]);return s.getBlob(t.type)}}([o],{type:t});case rm:return new Int8Array(o);case rf:return new Uint8Array(o);case rp:return new Uint8ClampedArray(o);case rg:return new Int16Array(o);case rv:return new Uint16Array(o);case r_:return new Int32Array(o);case ry:return new Uint32Array(o);case rb:return new Float32Array(o);case rj:return new Float64Array(o);default:throw Error("Unkown type: "+r)}}}};async function rC(e,t,s){var r;e=ro(e),await this.ready();let i=t=null!=(r=t)?r:null;return rA.serializer.serialize(t,(t,r)=>{if(r)throw r;try{sessionStorage.setItem(rA.keyPrefix+e,t),rn(Promise.resolve(i),s)}catch(e){throw("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&console.error("Your sesionStorage capacity is used up."),e}}),t}let rk={_driver:"sessionStorageWrapper",_initStorage:function(e){if(rA.keyPrefix=rE(e,this._defaultConfig),e)for(let t in e)rA[t]=e[t]},_support:function(){try{if(sessionStorage&&"setItem"in sessionStorage)return!0}catch(e){console.log(e)}return!1}(),iterate:function(e,t){let s=this.ready().then(function(){let t=rA.keyPrefix,s=t.length,r=sessionStorage.length,i=1;for(let o=0;o<r;o++){let r=sessionStorage.key(o);if(0!==r.indexOf(t))continue;let a=sessionStorage.getItem(r);if(a&&(a=rA.serializer.deserialize(a)),void 0!==(a=e(a,r.substring(s),i++)))return a}});return rn(s,t),s},getItem:function(e,t){e=ro(e);let s=this.ready().then(function(){let t=sessionStorage.getItem(rA.keyPrefix+e);return t&&(t=rA.serializer.deserialize(t)),t});return rn(s,t),s},setItem:rC,removeItem:function(e,t){e=ro(e);let s=this.ready().then(function(){sessionStorage.removeItem(rA.keyPrefix+e)});return rn(s,t),s},clear:function(e){let t=this.ready().then(function(){let e=rA.keyPrefix;for(let t=sessionStorage.length-1;t>=0;t--){let s=sessionStorage.key(t);0===s.indexOf(e)&&sessionStorage.removeItem(s)}});return rn(t,e),t},length:function(e){let t=this.keys().then(function(e){return e.length});return rn(t,e),t},key:function(e,t){let s=this.ready().then(function(){let t;try{t=sessionStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(rA.keyPrefix.length)),t});return rn(s,t),s},keys:function(e){let t=this.ready().then(function(){let e=sessionStorage.length,t=[];for(let s=0;s<e;s++){let e=sessionStorage.key(s);0===e.indexOf(rA.keyPrefix)&&t.push(e.substring(rA.keyPrefix.length))}return t});return rn(t,e),t},dropInstance:function(e,t){let s;if(t=ri.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){let t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}let r=this;return rn(s=e.name?new Promise(function(t){t(e.storeName?rE(e,r._defaultConfig):`${e.name}/`)}).then(function(e){for(let t=sessionStorage.length-1;t>=0;t--){let s=sessionStorage.key(t);0===s.indexOf(e)&&sessionStorage.removeItem(s)}}):Promise.reject(Error("Invalid arguments")),t),s}};var r$={exports:{}},rT=(r$.exports,function(){return f?r$.exports:(f=1,function(e,t){function s(e){return s.result?s.result:e&&"function"==typeof e.getSerializer?(s.result=e.getSerializer(),s.result):Promise.reject(Error("localforage.getSerializer() was not available! localforage v1.4+ is required!"))}function r(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function i(e,t,s,r){function i(e,t){var s=e||t;return e&&"function"==typeof e||"string"!=typeof s||(e=function(e){return e[s]}),e}var o=[];if("[object Array]"===Object.prototype.toString.call(e)){t=i(t,"key"),s=i(s,"value");for(var a=0,l=e.length;a<l;a++){var d=e[a];o.push(r(t(d),s(d)))}}else for(var c in e)e.hasOwnProperty(c)&&o.push(r(c,e[c]));return o}function o(e,t,s,o){var a=this,l=a.ready().then(function(){return new Promise(function(r,o){var l,d=a._dbInfo,c=d.db.transaction(d.storeName,"readwrite"),u=c.objectStore(d.storeName);function h(e){var t=e.target||this;o(l=t.error||t.transaction.error)}c.oncomplete=function(){r(e)},c.onabort=c.onerror=function(e){o(l||e.target)},i(e,t,s,function(e,t){null===t&&(t=void 0),u.put(t,e).onerror=h})})});return r(l,o),l}function a(e,t,o,a){var l=this,d=new Promise(function(r,a){l.ready().then(function(){return s(l)}).then(function(s){var d=l._dbInfo;d.db.transaction(function(l){var c="INSERT OR REPLACE INTO "+d.storeName+" (key, value) VALUES (?, ?)";Promise.all(i(e,t,o,function(e,t){return new Promise(function(r,i){s.serialize(t,function(t,s){s?i(s):l.executeSql(c,[e,t],function(){r()},function(e,t){i(t)})})})})).then(function(){r(e)},a)},function(e){a(e)})}).catch(a)});return r(d,a),d}function l(e,t,s,o){var a=this,l=Promise.all(i(e,t,s,function(e,t){return a.setItem(e,t)}));return r(l,o),l}function d(e,t,s,r){var i=this.driver();return i===this.INDEXEDDB?o.call(this,e,t,s,r):i===this.WEBSQL?a.call(this,e,t,s,r):l.call(this,e,t,s,r)}function c(e){var t=Object.getPrototypeOf(e);t&&(t.setItems=d,t.setItems.indexedDB=function(){return o.apply(this,arguments)},t.setItems.websql=function(){return a.apply(this,arguments)},t.setItems.generic=function(){return l.apply(this,arguments)})}var u=c(t="default"in t?t.default:t);e.setItemsGeneric=l,e.localforageSetItems=d,e.extendPrototype=c,e.extendPrototypeResult=u,Object.defineProperty(e,"__esModule",{value:!0})}(r$.exports,sU()),r$.exports)}());function rM(e){return rM.result?rM.result:e&&"function"==typeof e.getSerializer?(rM.result=e.getSerializer(),rM.result):Promise.reject(Error("localforage.getSerializer() was not available! localforage v1.4+ is required!"))}function rO(e,t){return t&&e.then(function(e){t(null,e)},function(e){t(e)}),e}function rI(e,t){var s=this.getItem(e).then(function(t){return{key:e,value:t}});return rO(s,t),s}function rN(e){var t=this;return new Promise(function(s,r){for(var i=[],o=0,a=e.length;o<a;o++)i.push(rI.call(t,e[o]));Promise.all(i).then(function(e){for(var t={},r=0,i=e.length;r<i;r++){var o=e[r];t[o.key]=o.value}s(t)}).catch(r)})}function rR(){var e={};return this.iterate(function(t,s){e[s]=t}).then(function(){return e})}var rD="undefined"!=typeof IDBKeyRange?IDBKeyRange:"undefined"!=typeof webkitIDBKeyRange?webkitIDBKeyRange:"undefined"!=typeof mozIDBKeyRange?mozIDBKeyRange:void 0;function rL(e){e=e.slice();var t=this;function s(e,t){return e<t?-1:+(e>t)}return new Promise(function(r,i){t.ready().then(function(){var o,a=t._dbInfo,l=a.db.transaction(a.storeName,"readonly").objectStore(a.storeName),d=e.sort(s),c=rD.bound(e[0],e[e.length-1],!1,!1);if("getAll"in l)(o=l.getAll(c)).onsuccess=function(){var e=o.result;void 0===e&&(e=null),r(e)};else{o=l.openCursor(c);var u={},h=0;o.onsuccess=function(){var e=o.result;if(!e)return void r(u);for(var t=e.key;t>d[h];)if(++h===d.length)return void r(u);if(t===d[h]){var s=e.value;void 0===s&&(s=null),u[t]=s,e.continue()}else e.continue(d[h])}}o.onerror=function(){i(o.error)}}).catch(i)})}function rP(e){var t=this;return new Promise(function(s,r){t.ready().then(function(){return rM(t)}).then(function(i){var o=t._dbInfo;o.db.transaction(function(t){for(var a=Array(e.length),l=0,d=e.length;l<d;l++)a[l]="?";t.executeSql("SELECT * FROM "+o.storeName+" WHERE (key IN ("+a.join(",")+"))",e,function(e,t){for(var r={},o=t.rows,a=0,l=o.length;a<l;a++){var d=o.item(a),c=d.value;c&&(c=i.deserialize(c)),r[d.key]=c}s(r)},function(e,t){r(t)})})}).catch(r)})}function rz(e,t){var s;if(arguments.length&&null!==e){var r=this.driver();s=r===this.INDEXEDDB?rL.apply(this,arguments):r===this.WEBSQL?rP.apply(this,arguments):rN.apply(this,arguments)}else s=rR.apply(this);return rO(s,t),s}function rU(e){var t=Object.getPrototypeOf(e);t&&(t.getItems=rz,t.getItems.indexedDB=function(){return rL.apply(this,arguments)},t.getItems.websql=function(){return rP.apply(this,arguments)},t.getItems.generic=function(){return rN.apply(this,arguments)})}rU(sB);var rB=Object.prototype.hasOwnProperty;function rF(e,t){return null!=e&&rB.call(e,t)}var rq=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rH=/^\w*$/;function rG(e,t){if(b(e))return!1;var s=typeof e;return!!("number"==s||"symbol"==s||"boolean"==s||null==e||$(e))||rH.test(e)||!rq.test(e)||null!=t&&e in Object(t)}function rW(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var s=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=s.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return s.cache=o.set(i,a)||o,a};return s.cache=new(rW.Cache||t2),s}rW.Cache=t2;var rV=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rK=/\\(\\)?/g,rJ=(c=(d=rW(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rV,function(e,s,r,i){t.push(r?i.replace(rK,"$1"):s||e)}),t},function(e){return 500===c.size&&c.clear(),e})).cache,d);function rQ(e,t){return b(e)?e:rG(e,t)?[e]:rJ(O(e))}function rY(e){if("string"==typeof e||$(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function rX(e,t,s){t=rQ(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var a=rY(t[r]);if(!(o=null!=e&&s(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&e4(i)&&tc(a,i)&&(b(e)||e2(e))}function rZ(e,t,s){t=rQ(t,e);var r=-1,i=t.length;for(i||(i=1,e=void 0);++r<i;){var o=null==e?void 0:e[rY(t[r])];void 0===o&&(r=i,o=s),e=eE(o)?o.call(e):o}return e}function r0(){return((1+Math.random())*65536|0).toString(16).substring(1)}function r1(){let e={isResolved:!1,isPending:!0,isRejected:!1,resolve:null,reject:null},t=new Promise((t,s)=>{e.resolve=t,e.reject=s});return Object.assign(t,e),t.then(function(e){return t.isResolved=!0,t.isPending=!1,t.isRejected=!1,e},function(e){throw t.isResolved=!1,t.isPending=!1,t.isRejected=!0,e}),t}function r2(){throw Error('A "url" property or function must be specified')}function r4(e,t){let s=t.error;t.error=function(r){s&&s.call(t.context,e,r,t),e.trigger("error",e,r,t)}}let r3={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};function r6(e){let t=rZ(e,"browserStorage")||rZ(e.collection,"browserStorage");return t?t.sync():r8}function r8(e,t,s={}){let r=s.data;null==r&&t&&("create"===e||"update"===e||"patch"===e)&&(r=s.attrs||t.toJSON());let i={method:r3[e],body:r?JSON.stringify(r):"",success:s.success,error:s.error},o=s.url||rZ(t,"url")||r2(),a=s.xhr=fetch(o,i);return t.trigger("request",t,a,{...i,xhr:a}),a}sB.defineDriver(tW),rT.extendPrototype(sB),rU(sB);class r5{constructor(e,t,s=!1){if("local"!==t||window.localStorage){if("session"===t&&!window.sessionStorage)throw Error("Skeletor.storage: Environment does not support sessionStorage.")}else throw Error("Skeletor.storage: Environment does not support localStorage.");sD(t)?this.storeInitialized=this.initStore(t,s):(this.store=t,s&&(this.store.debouncedSetItems=rr(e=>this.store.setItems(e),50,{promise:!0})),this.storeInitialized=Promise.resolve()),this.name=e}async initStore(e,t){if("session"===e)await sB.setDriver(rk._driver);else if("local"===e)await sB.config({driver:sB.LOCALSTORAGE});else if("in_memory"===e)await sB.config({driver:tq});else if("indexed"!==e)throw Error("Skeletor.storage: No storage type was specified");this.store=sB,t&&(this.store.debouncedSetItems=rr(e=>this.store.setItems(e),50,{promise:!0}))}flush(){var e;return null==(e=this.store.debouncedSetItems)?void 0:e.flush()}async clear(){await this.store.removeItem(this.name).catch(e=>console.error(e));let e=RegExp(`^${this.name}-`),t=(await this.store.keys()).filter(t=>e.test(t));await Promise.all(t.map(e=>this.store.removeItem(e).catch(e=>console.error(e))))}sync(){let e=this;async function t(t,s,r){let i,o,a,l,d=s.collection;["patch","update"].includes(t)&&(l=sR(s.attributes,5)),await e.storeInitialized;try{let o=s.attributes;switch(t){case"read":i=void 0!==s.id?await e.find(s):await e.findAll();break;case"create":i=await e.create(s,r);break;case"patch":case"update":r.wait&&(s.attributes=l),a=e.update(s),r.wait&&(s.attributes=o),i=await a;break;case"delete":i=await e.destroy(s,d)}}catch(t){o=22===t.code&&0===e.getStorageSize()?"Private browsing is unsupported":t.message}if(i){if(r&&r.success){let e="read"===t?i:null;r.success(e,r)}}else o=o||"Record Not Found",r&&r.error&&r.error(o)}return t.__name__="localSync",t}removeCollectionReference(e,t){if(!t)return;let s=t.filter(t=>t.id!==e.id).map(e=>this.getItemName(e.id));return this.store.setItem(this.name,s)}addCollectionReference(e,t){if(!t)return;let s=t.map(e=>this.getItemName(e.id)),r=this.getItemName(e.id);return s.includes(r)||s.push(r),this.store.setItem(this.name,s)}getCollectionReferenceData(e){if(!e.collection)return{};let t=e.collection.map(e=>this.getItemName(e.id)),s=this.getItemName(e.id);t.includes(s)||t.push(s);let r={};return r[this.name]=t,r}async save(e){if(this.store.setItems){let t={};return t[this.getItemName(e.id)]=e.toJSON(),Object.assign(t,this.getCollectionReferenceData(e)),this.store.debouncedSetItems?this.store.debouncedSetItems(t):this.store.setItems(t)}{let t=this.getItemName(e.id),s=await this.store.setItem(t,e.toJSON());return await this.addCollectionReference(e,e.collection),s}}create(e,t){return e.id||(e.id=r0()+r0()+"-"+r0()+"-"+r0()+"-"+r0()+"-"+r0()+r0()+r0(),e.set(e.idAttribute,e.id,t)),this.save(e)}update(e){return this.save(e)}find(e){return this.store.getItem(this.getItemName(e.id))}async findAll(){let e=await this.store.getItem(this.name);return null!=e&&e.length?Object.values(await this.store.getItems(e)):[]}async destroy(e,t){return await this.flush(),await this.store.removeItem(this.getItemName(e.id)),await this.removeCollectionReference(e,t),e}getStorageSize(){return this.store.length}getItemName(e){return this.name+"-"+e}}function r9(e){return sR(e,4)}r5.sessionStorageInitialized=sB.defineDriver(rk),r5.localForage=sB;var r7=Object.prototype,ne=r7.hasOwnProperty,nt=s3(function(e,t){e=Object(e);var s=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&s6(t[0],t[1],i)&&(r=1);++s<r;)for(var o=t[s],a=se(o),l=-1,d=a.length;++l<d;){var c=a[l],u=e[c];(void 0===u||tV(u,r7[c])&&!ne.call(e,c))&&(e[c]=o[c])}return e}),ns=s3(function(e,t){if("function"!=typeof e)throw TypeError("Expected a function");return setTimeout(function(){e.apply(void 0,t)},1)});function nr(e,t){return e&&sq(e,t,tm)}var nn=Object.prototype.toString,ni=(u=function(e,t,s){null!=t&&"function"!=typeof t.toString&&(t=nn.call(t)),e[t]=s},h=s0(sY),function(e,t){var s,r;return s=h(t),r={},nr(e,function(e,t,i){u(r,s(e),t,i)}),r});function no(e){var t=-1,s=null==e?0:e.length;for(this.__data__=new t2;++t<s;)this.add(e[t])}function na(e,t,s,r,i,o){var a=1&s,l=e.length,d=t.length;if(l!=d&&!(a&&d>l))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var h=-1,m=!0,f=2&s?new no:void 0;for(o.set(e,t),o.set(t,e);++h<l;){var p=e[h],g=t[h];if(r)var _=a?r(g,p,h,t,e,o):r(p,g,h,e,t,o);if(void 0!==_){if(_)continue;m=!1;break}if(f){if(!function(e,t){for(var s=-1,r=null==e?0:e.length;++s<r;)if(t(e[s],s,e))return!0;return!1}(t,function(e,t){if(!f.has(t)&&(p===e||i(p,e,s,r,o)))return f.push(t)})){m=!1;break}}else if(!(p===g||i(p,g,s,r,o))){m=!1;break}}return o.delete(e),o.delete(t),m}function nl(e){var t=-1,s=Array(e.size);return e.forEach(function(e,r){s[++t]=[r,e]}),s}function nd(e){var t=-1,s=Array(e.size);return e.forEach(function(e){s[++t]=e}),s}no.prototype.add=no.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},no.prototype.has=function(e){return this.__data__.has(e)};var nc=v?v.prototype:void 0,nu=nc?nc.valueOf:void 0,nh=Object.prototype.hasOwnProperty,nm="[object Arguments]",nf="[object Array]",np="[object Object]",ng=Object.prototype.hasOwnProperty;function n_(e,t,s,r,i){return e===t||(null!=e&&null!=t&&(k(e)||k(t))?function(e,t,s,r,i,o){var a=b(e),l=b(t),d=a?nf:eY(e),c=l?nf:eY(t);d=d==nm?np:d,c=c==nm?np:c;var u=d==np,h=c==np,m=d==c;if(m&&e9(e)){if(!e9(t))return!1;a=!0,u=!1}if(m&&!u)return o||(o=new t4),a||to(e)?na(e,t,s,r,i,o):function(e,t,s,r,i,o,a){switch(s){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!o(new sv(e),new sv(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return tV(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=nl;case"[object Set]":var d=1&r;if(l||(l=nd),e.size!=t.size&&!d)break;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=na(l(e),l(t),r,i,o,a);return a.delete(e),u;case"[object Symbol]":if(nu)return nu.call(e)==nu.call(t)}return!1}(e,t,d,s,r,i,o);if(!(1&s)){var f=u&&ng.call(e,"__wrapped__"),p=h&&ng.call(t,"__wrapped__");if(f||p){var g=f?e.value():e,_=p?t.value():t;return o||(o=new t4),i(g,_,s,r,o)}}return!!m&&(o||(o=new t4),function(e,t,s,r,i,o){var a=1&s,l=sp(e),d=l.length;if(d!=sp(t).length&&!a)return!1;for(var c=d;c--;){var u=l[c];if(!(a?u in t:nh.call(t,u)))return!1}var h=o.get(e),m=o.get(t);if(h&&m)return h==t&&m==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<d;){var g=e[u=l[c]],_=t[u];if(r)var v=a?r(_,g,u,t,e,o):r(g,_,u,e,t,o);if(!(void 0===v?g===_||i(g,_,s,r,o):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(f=!1)}return o.delete(e),o.delete(t),f}(e,t,s,r,i,o))}(e,t,s,r,n_,i):e!=e&&t!=t)}function nv(e,t){return function(s){return null!=s&&s[e]===t&&(void 0!==t||e in Object(s))}}function ny(e,t){t=rQ(t,e);for(var s=0,r=t.length;null!=e&&s<r;)e=e[rY(t[s++])];return s&&s==r?e:void 0}function nb(e,t){return null!=e&&t in Object(e)}function nj(e,t){return null!=e&&rX(e,t,nb)}function nw(e){var t,s,r,i,o;return"function"==typeof e?e:null==e?sY:"object"==typeof e?b(e)?(t=e[0],s=e[1],rG(t)&&(r=s)==r&&!ex(r)?nv(rY(t),s):function(e){var r,i=void 0===(r=null==e?void 0:ny(e,t))?void 0:r;return void 0===i&&i===s?nj(e,t):n_(s,i,3)}):1==(i=function(e){for(var t=tm(e),s=t.length;s--;){var r=t[s],i=e[r];t[s]=[r,i,i==i&&!ex(i)]}return t}(e)).length&&i[0][2]?nv(i[0][0],i[0][1]):function(t){return t===e||function(e,t,s,r){var i=s.length,o=i;if(null==e)return!o;for(e=Object(e);i--;){var a=s[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var l=(a=s[i])[0],d=e[l],c=a[1];if(a[2]){if(void 0===d&&!(l in e))return!1}else{var u,h=new t4;if(!(void 0===u?n_(c,d,3,void 0,h):u))return!1}}return!0}(t,0,i)}:rG(e)?(o=rY(e),function(e){return null==e?void 0:e[o]}):function(t){return ny(t,e)}}function nS(e){return sK(e)?void 0:e}var nx=v?v.isConcatSpreadable:void 0;function nE(e){return b(e)||e2(e)||!!(nx&&e&&e[nx])}function nA(e,t,s,r,i){var o=-1,a=e.length;for(s||(s=nE),i||(i=[]);++o<a;){var l=e[o];s(l)?su(i,l):i[i.length]=l}return i}function nC(e){return(null==e?0:e.length)?nA(e):[]}function nk(e){return s4(sZ(e,void 0,nC),e+"")}var n$=nk(function(e,t){var s={};if(null==e)return s;var r=!1;t=y(t,function(t){return t=rQ(t,e),r||(r=t.length>1),t}),t9(e,sg(e),s),r&&(s=sR(s,7,nS));for(var i=t.length;i--;)!function(e,t){var s,r,i,o;t=rQ(t,e),s=e,null==(e=(r=t).length<2?s:ny(s,function(e,t,s){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(s=s>i?i:s)<0&&(s+=i),i=t>s?0:s-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}(r,0,-1)))||delete e[rY((o=null==(i=t)?0:i.length)?i[o-1]:void 0)]}(s,t[i]);return s}),nT=nk(function(e,t){return null==e?{}:function(e,t,s){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],l=ny(e,a);s(l,a)&&function(e,t,s,r){if(ex(e)){t=rQ(t,e);for(var i=-1,o=t.length,a=o-1,l=e;null!=l&&++i<o;){var d=rY(t[i]),c=s;if("__proto__"===d||"constructor"===d||"prototype"===d)break;if(i!=a){var u=l[d];c=void 0,c=ex(u)?u:tc(t[i+1])?[]:{}}t5(l,d,c),l=l[d]}}}(o,rQ(a,e),l)}return o}(e,t,function(t,s){return nj(e,s)})});class nM extends tT(Object){constructor(e,t){super();let s=e||{};t||(t={}),this.preinitialize.apply(this,arguments),this.cid=N(this.cidPrefix),this.attributes={},this.validationError=null,t.collection&&(this.collection=t.collection),t.parse&&(s=this.parse(s,t)||{});let r=rZ(this,"defaults");s=nt(Object.assign({},r,s),r),this.set(s,t),this.initialize.apply(this,arguments),this.changed={}}set browserStorage(e){this._browserStorage=e}get browserStorage(){return this._browserStorage}get idAttribute(){return"id"}get cidPrefix(){return"c"}preinitialize(){}initialize(e,t){}validate(e,t){return""}toJSON(){return r9(this.attributes)}sync(e,t,s){return r6(t)(e,t,s)}get(e){return this.attributes[e]}keys(){return Object.keys(this.attributes)}values(){return Object.values(this.attributes)}pairs(){return this.entries()}entries(){return Object.entries(this.attributes)}invert(){return ni(this.attributes)}pick(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),nT(this.attributes,e)}omit(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),n$(this.attributes,e)}isEmpty(){return tl(this.attributes)}has(e){return null!=this.get(e)}matches(e){return!!nw("function"==typeof e?e:sR(e,1))(this.attributes)}set(e,t,s){let r;if(null==e)return this;if("object"==typeof e?(r=e,s=t):(r={})[e]=t,s||(s={}),!this._validate(r,s))return!1;let i=s.unset,o=s.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=r9(this.attributes),this.changed={});let d=this.attributes,c=this.changed,u=this._previousAttributes;for(let e in r)(t=r[e],n_(d[e],t)||a.push(e),n_(u[e],t))?delete c[e]:c[e]=t,i?delete d[e]:d[e]=t;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!o){a.length&&(this._pending=s);for(let e=0;e<a.length;e++)this.trigger("change:"+a[e],this,d[a[e]],s)}if(l)return this;if(!o)for(;this._pending;)s=this._pending,this._pending=!1,this.trigger("change",this,s);return this._pending=!1,this._changing=!1,this}unset(e,t){return this.set(e,void 0,Object.assign({},t,{unset:!0}))}clear(e){let t={};for(let e in this.attributes)t[e]=void 0;return this.set(t,Object.assign({},e,{unset:!0}))}hasChanged(e){var t;return null==e?!tl(this.changed):(t=this.changed,null!=t&&rX(t,e,rF))}changedAttributes(e){let t;if(!e)return!!this.hasChanged()&&r9(this.changed);let s=this._changing?this._previousAttributes:this.attributes,r={};for(let i in e){let o=e[i];n_(s[i],o)||(r[i]=o,t=!0)}return!!t&&r}previous(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null}previousAttributes(){return r9(this._previousAttributes)}fetch(e={}){let t=(e=Object.assign({parse:!0},e)).success;return e.success=s=>{let r=e.parse?this.parse(s,e):s;if(!this.set(r,e))return!1;t&&t.call(e.context,this,s,e),this.trigger("sync",this,s,e)},r4(this,e),this.sync("read",this,e)}save(e,t,s){let r;null==e||"object"==typeof e?(r=e,s=t):(r={})[e]=t;let i=(s=Object.assign({validate:!0,parse:!0},s)).wait,o=s.promise,a=o&&r1();if(r&&!i){if(!this.set(r,s))return!1}else if(!this._validate(r,s))return!1;let l=s.success,d=s.error,c=this.attributes;s.success=e=>{this.attributes=c;let t=s.parse?this.parse(e,s):e;if(i&&(t=Object.assign({},r,t)),t&&!this.set(t,s))return!1;l&&l.call(s.context,this,e,s),this.trigger("sync",this,e,s),o&&a.resolve()},s.error=(e,t,s)=>{d&&d.call(s.context,e,t,s),o&&a.reject(t)},r4(this,s),r&&i&&(this.attributes=Object.assign({},c,r));let u=this.isNew()?"create":s.patch?"patch":"update";"patch"!==u||s.attrs||(s.attrs=r);let h=this.sync(u,this,s);return(this.attributes=c,o)?a:h}destroy(e){let t=(e=e?r9(e):{}).success,s=e.wait,r=()=>{this.stopListening(),this.trigger("destroy",this,this.collection,e)};e.success=i=>{s&&r(),t&&t.call(e.context,this,i,e),this.isNew()||this.trigger("sync",this,i,e)};let i=!1;return this.isNew()?ns(e.success):(r4(this,e),i=this.sync("delete",this,e)),s||r(),i}url(){let e=rZ(this,"urlRoot")||rZ(this.collection,"url")||r2();if(this.isNew())return e;let t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)}parse(e,t){return e}isNew(){return!this.has(this.idAttribute)}isValid(e){return this._validate({},Object.assign({},e,{validate:!0}))}_validate(e,t){if(!t.validate||!this.validate)return!0;e=Object.assign({},this.attributes,e);let s=this.validationError=this.validate(e,t)||null;return!s||(this.trigger("invalid",this,s,Object.assign(t,{validationError:s})),!1)}}var nO=function(e,t){if(null==e)return e;if(!e3(e))return nr(e,t);for(var s=e.length,r=-1,i=Object(e);++r<s&&!1!==t(i[r],r,i););return e};function nI(e,t){return function(t,s){return(b(t)?function(e,t,s,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,s(a),e)}return r}:function(e,t,s,r){return nO(e,function(e,i,o){t(r,e,s(e),o)}),r})(t,e,nw(s),{})}}var nN=Object.prototype.hasOwnProperty,nR=nI(function(e,t,s){nN.call(e,s)?++e[s]:t6(e,s,1)}),nD=Object.prototype.hasOwnProperty,nL=nI(function(e,t,s){nD.call(e,s)?e[s].push(t):t6(e,s,[t])}),nP=nI(function(e,t,s){t6(e,s,t)}),nz=s3(function(e,t){if(null==e)return[];var s=t.length;return s>1&&s6(e,t[0],t[1])?t=[]:s>2&&s6(t[0],t[1],t[2])&&(t=[t[0]]),function(e,t,s){t=t.length?y(t,function(e){return b(e)?function(t){return ny(t,1===e.length?e[0]:e)}:e}):[sY];var r,i,o,a=-1;t=y(t,te(nw));var l=(r=function(e,s,r){return{criteria:y(t,function(t){return t(e)}),index:++a,value:e}},i=-1,o=e3(e)?Array(e.length):[],nO(e,function(e,t,s){o[++i]=r(e,t,s)}),o),d=l.length;for(l.sort(function(e,t){return function(e,t,s){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,l=s.length;++r<a;){var d=function(e,t){if(e!==t){var s=void 0!==e,r=null===e,i=e==e,o=$(e),a=void 0!==t,l=null===t,d=t==t,c=$(t);if(!l&&!c&&!o&&e>t||o&&a&&d&&!l&&!c||r&&a&&d||!s&&d||!i)return 1;if(!r&&!o&&!c&&e<t||c&&s&&i&&!r&&!o||l&&s&&i||!a&&i||!d)return -1}return 0}(i[r],o[r]);if(d){if(r>=l)return d;return d*("desc"==s[r]?-1:1)}}return e.index-t.index}(e,t,s)});d--;)l[d]=l[d].value;return l}(e,nA(t),[])});let nU=Array.prototype.slice,nB={add:!0,remove:!0,merge:!0},nF={add:!0,remove:!1};class nq extends tT(Object){constructor(e,t){super(),t||(t={}),this.preinitialize.apply(this,arguments),t.model&&(this._model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,Object.assign({silent:!0},t)),this[Symbol.iterator]=this.values}set browserStorage(e){this._browserStorage=e}get browserStorage(){return this._browserStorage}get model(){var e;return null!=(e=this._model)?e:nM}set model(e){this._model=e}get length(){return this.models.length}preinitialize(){}initialize(){}toJSON(e){return this.map(function(t){return t.toJSON(e)})}sync(e,t,s){return r6(this)(e,t,s)}add(e,t){return this.set(e,Object.assign({merge:!1},t,nF))}remove(e,t){t=Object.assign({},t);let s=!Array.isArray(e),r=s?[e]:e.slice(),i=this._removeModels(r,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),s?i[0]:i}set(e,t){let s,r;if(null==e)return;(t=Object.assign({},nB,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);let i=!Array.isArray(e);e=i?[e]:e.slice();let o=t.at;null!=o&&(o*=1),o>this.length&&(o=this.length),o<0&&(o+=this.length+1);let a=[],l=[],d=[],c=[],u={},h=t.add,m=t.merge,f=t.remove,p=!1,g=this.comparator&&null==o&&!1!==t.sort,_=sD(this.comparator)?this.comparator:null;for(r=0;r<e.length;r++){s=e[r];let i=this.get(s);if(i){if(m&&s!==i){let e=this._isModel(s)?s.attributes:s;t.parse&&(e=i.parse(e,t)),i.set(e,t),d.push(i),g&&!p&&(p=i.hasChanged(_))}u[i.cid]||(u[i.cid]=!0,a.push(i)),e[r]=i}else h&&(s=e[r]=this._prepareModel(s,t))&&(l.push(s),this._addReference(s,t),u[s.cid]=!0,a.push(s))}if(f){for(r=0;r<this.length;r++)u[(s=this.models[r]).cid]||c.push(s);c.length&&this._removeModels(c,t)}let v=!1;if(a.length&&!g&&h&&f)v=this.length!==a.length||this.models.some((e,t)=>e!==a[t]),this.models.length=0,this.models.splice(0,0,...a);else if(l.length){g&&(p=!0);let e=null==o?this.length:o;e=Math.min(Math.max(e,0),this.models.length),this.models.splice(e,0,...l)}if(p&&this.sort({silent:!0}),!t.silent){for(r=0;r<l.length;r++)null!=o&&(t.index=o+r),(s=l[r]).trigger("add",s,this,t);(p||v)&&this.trigger("sort",this,t),(l.length||c.length||d.length)&&(t.changes={added:l,removed:c,merged:d},this.trigger("update",this,t))}return i?e[0]:e}async clearStore(e={},t=e=>e){await Promise.all(this.models.filter(t).map(t=>new Promise(s=>{t.destroy(Object.assign(e,{success:s,error:(e,t)=>{console.error(t),s()}}))}))),await this.browserStorage.clear(),this.reset()}reset(e,t){t=t?r9(t):{};for(let e=0;e<this.models.length;e++)this._removeReference(this.models[e],t);return t.previousModels=this.models,this._reset(),e=this.add(e,Object.assign({silent:!0},t)),t.silent||this.trigger("reset",this,t),e}push(e,t){return this.add(e,Object.assign({at:this.length},t))}pop(e){let t=this.at(this.length-1);return this.remove(t,e)}unshift(e,t){return this.add(e,Object.assign({at:0},t))}shift(e){let t=this.at(0);return this.remove(t,e)}slice(){return nU.apply(this.models,arguments)}filter(e,t){return this.models.filter(eE(e)?e:t=>t.matches(e),t)}every(e){return eE(e)?this.models.map(e=>e.attributes).every(e):this.models.every(t=>t.matches(e))}difference(e){return this.models.filter(t=>!e.includes(t))}max(){return Math.max.apply(Math,this.models)}min(){return Math.min.apply(Math,this.models)}drop(e=1){return this.models.slice(e)}some(e){return eE(e)?this.models.map(e=>e.attributes).some(e):this.models.some(t=>t.matches(e))}sortBy(e){return nz(this.models,eE(e)?e:t=>sD(e)?t.get(e):t.matches(e))}isEmpty(){return!this.models.length}keyBy(e){return nP(this.models,e)}each(e,t){return this.forEach(e,t)}forEach(e,t){return this.models.forEach(e,t)}includes(e){return this.models.includes(e)}size(){return this.models.length}countBy(e){return nR(this.models,eE(e)?e:t=>sD(e)?t.get(e):t.matches(e))}groupBy(e){return nL(this.models,eE(e)?e:t=>sD(e)?t.get(e):t.matches(e))}indexOf(e){return this.models.indexOf(e)}findLastIndex(e,t){return this.models.findLastIndex(eE(e)?e:t=>sD(e)?t.get(e):t.matches(e),t)}lastIndexOf(e){return this.models.lastIndexOf(e)}findIndex(e){return this.models.findIndex(eE(e)?e:t=>sD(e)?t.get(e):t.matches(e))}last(){let e=null==this.models?0:this.models.length;return e?this.models[e-1]:void 0}head(){return this.models[0]}first(){return this.head()}map(e,t){return this.models.map(eE(e)?e:t=>sD(e)?t.get(e):t.matches(e),t)}reduce(e,t){return this.models.reduce(e,t||this.models[0])}reduceRight(e,t){return this.models.reduceRight(e,t||this.models[0])}toArray(){return Array.from(this.models)}get(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(this._isModel(e)?e.attributes:e)]||e.cid&&this._byId[e.cid]}has(e){return null!=this.get(e)}at(e){return e<0&&(e+=this.length),this.models[e]}where(e,t){return this[t?"find":"filter"](e)}findWhere(e){return this.where(e,!0)}find(e,t){let s=eE(e)?e:t=>t.matches(e);return this.models.find(s,t)}sort(e){let t=this.comparator;if(!t)throw Error("Cannot sort a set without a comparator");e||(e={});let s=t.length;return eE(t)&&(t=t.bind(this)),1===s||sD(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this}pluck(e){return this.map(e+"")}fetch(e){let t=(e=Object.assign({parse:!0},e)).success,s=this,r=e.promise&&r1();return e.success=function(i){s[e.reset?"reset":"set"](i,e),t&&t.call(e.context,s,i,e),r&&r.resolve(),s.trigger("sync",s,i,e)},r4(this,e),r||this.sync("read",this,e)}create(e,t){let s=(t=t?r9(t):{}).wait,r=t.promise,i=r&&r1();if(!(e=this._prepareModel(e,t)))return!1;s||this.add(e,t);let o=this,a=t.success,l=t.error;return(t.success=function(e,t,l){s&&o.add(e,l),a&&a.call(l.context,e,t,l),r&&i.resolve(e)},t.error=function(e,t,s){l&&l.call(s.context,e,t,s),r&&i.reject(t)},e.save(null,Object.assign(t,{promise:!1})),r)?i:e}parse(e,t){return e}modelId(e){var t;return e[(null==(t=this.model.prototype)?void 0:t.idAttribute)||"id"]}values(){return new nV(this,nH)}keys(){return new nV(this,nG)}entries(){return new nV(this,nW)}_reset(){this.models=[],this._byId={}}createModel(e,t){return new this.model(e,t)}_prepareModel(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?r9(t):{}).collection=this;let s=this.createModel(e,t);return s.validationError?(this.trigger("invalid",this,s.validationError,t),null):s}_removeModels(e,t){let s=[];for(let r=0;r<e.length;r++){let i=this.get(e[r]);if(!i)continue;let o=this.indexOf(i);this.models.splice(o,1),delete this._byId[i.cid];let a=this.modelId(i.attributes);null!=a&&delete this._byId[a],t.silent||(t.index=o,i.trigger("remove",i,this,t)),s.push(i),this._removeReference(i,t)}return s}_isModel(e){return e instanceof nM}_addReference(e,t){this._byId[e.cid]=e;let s=this.modelId(e.attributes);null!=s&&(this._byId[s]=e),e.on("all",this._onModelEvent,this)}_removeReference(e,t){delete this._byId[e.cid];let s=this.modelId(e.attributes);null!=s&&delete this._byId[s],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)}_onModelEvent(e,t,s,r){if(t){if(("add"===e||"remove"===e)&&s!==this)return;if("destroy"===e&&this.remove(t,r),"change"===e){let e=this.modelId(t.previousAttributes()),s=this.modelId(t.attributes);e!==s&&(null!=e&&delete this._byId[e],null!=s&&(this._byId[s]=t))}}this.trigger.apply(this,arguments)}}let nH=1,nG=2,nW=3;class nV{constructor(e,t){this._collection=e,this._kind=t,this._index=0}next(){if(this._collection){if(this._index<this._collection.length){let e,t=this._collection.at(this._index);if(this._index++,this._kind===nH)e=t;else{let s=this._collection.modelId(t.attributes);e=this._kind===nG?s:[s,t]}return{value:e,done:!1}}this._collection=void 0}return{value:void 0,done:!0}}[Symbol.iterator](){return this}}let nK={Collection:nq,ElementView:tO,EventEmitter:tT,Model:nM,sync:r8},nJ="object"==typeof self&&self.self===self&&self||"object"==typeof s.g&&s.g.global===s.g&&s.g;nK.VERSION="0.0.1";let nQ=nJ.Skeletor;nK.noConflict=function(){return nJ.Skeletor=nQ,this},nJ.Skeletor=nK,t.Collection=nq,t.ElementView=tO,t.EventEmitter=tT,t.Model=nM,t.Storage=r5,t.default=nK,t.sync=r8,Object.defineProperty(t,"__esModule",{value:!0})}(t)},"./node_modules/@converse/skeletor/src/drivers/sessionStorage.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/localforage/src/utils/executeCallback.js"),i=s("./node_modules/localforage/src/utils/getCallback.js"),o=s("./node_modules/localforage/src/utils/normalizeKey.js"),a=s("./node_modules/localforage/src/utils/serializer.js");let l=a.default.serialize;function d(e,t){let s=e.name+"/";return e.storeName!==t.storeName&&(s+=e.storeName+"/"),s}let c={serializer:{serialize:l,deserialize:a.default.deserialize}};async function u(e,t,s){e=(0,o.default)(e),await this.ready();let i=t=t??null;return c.serializer.serialize(t,(t,o)=>{if(o)throw o;try{sessionStorage.setItem(c.keyPrefix+e,t),(0,r.default)(Promise.resolve(i),s)}catch(e){throw("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&console.error("Your sesionStorage capacity is used up."),e}}),t}let h={_driver:"sessionStorageWrapper",_initStorage:function(e){if(c.keyPrefix=d(e,this._defaultConfig),e)for(let t in e)c[t]=e[t]},_support:function(){try{if(sessionStorage&&"setItem"in sessionStorage)return!0}catch(e){console.log(e)}return!1}(),iterate:function(e,t){let s=this.ready().then(function(){let t=c.keyPrefix,s=t.length,r=sessionStorage.length,i=1;for(let o=0;o<r;o++){let r=sessionStorage.key(o);if(0!==r.indexOf(t))continue;let a=sessionStorage.getItem(r);if(a&&(a=c.serializer.deserialize(a)),void 0!==(a=e(a,r.substring(s),i++)))return a}});return(0,r.default)(s,t),s},getItem:function(e,t){e=(0,o.default)(e);let s=this.ready().then(function(){let t=sessionStorage.getItem(c.keyPrefix+e);return t&&(t=c.serializer.deserialize(t)),t});return(0,r.default)(s,t),s},setItem:u,removeItem:function(e,t){e=(0,o.default)(e);let s=this.ready().then(function(){sessionStorage.removeItem(c.keyPrefix+e)});return(0,r.default)(s,t),s},clear:function(e){let t=this.ready().then(function(){let e=c.keyPrefix;for(let t=sessionStorage.length-1;t>=0;t--){let s=sessionStorage.key(t);0===s.indexOf(e)&&sessionStorage.removeItem(s)}});return(0,r.default)(t,e),t},length:function(e){let t=this.keys().then(function(e){return e.length});return(0,r.default)(t,e),t},key:function(e,t){let s=this.ready().then(function(){let t;try{t=sessionStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(c.keyPrefix.length)),t});return(0,r.default)(s,t),s},keys:function(e){let t=this.ready().then(function(){let e=sessionStorage.length,t=[];for(let s=0;s<e;s++){let e=sessionStorage.key(s);0===e.indexOf(c.keyPrefix)&&t.push(e.substring(c.keyPrefix.length))}return t});return(0,r.default)(t,e),t},dropInstance:function(e,t){let s;if(t=i.default.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){let t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}let o=this;return s=e.name?new Promise(function(t){t(e.storeName?d(e,o._defaultConfig):`${e.name}/`)}).then(function(e){for(let t=sessionStorage.length-1;t>=0;t--){let s=sessionStorage.key(t);0===s.indexOf(e)&&sessionStorage.removeItem(s)}}):Promise.reject(Error("Invalid arguments")),(0,r.default)(s,t),s}}},"./node_modules/@converse/skeletor/src/helpers.js":function(e,t,s){"use strict";s.r(t),s.d(t,{NotImplementedError:()=>l,getResolveablePromise:()=>h,getSyncMethod:()=>g,guid:()=>c,inherits:()=>u,sync:()=>_,urlError:()=>m,wrapError:()=>f});var r=s("./node_modules/lodash-es/create.js"),i=s("./node_modules/lodash-es/assignIn.js"),o=s("./node_modules/lodash-es/has.js"),a=s("./node_modules/lodash-es/result.js");class l extends Error{}function d(){return((1+Math.random())*65536|0).toString(16).substring(1)}function c(){return d()+d()+"-"+d()+"-"+d()+"-"+d()+"-"+d()+d()+d()}function u(e,t){let s,a=this;return s=e&&(0,o.default)(e,"constructor")?e.constructor:function(){return a.apply(this,arguments)},(0,i.default)(s,a,t),s.prototype=(0,r.default)(a.prototype,e),s.prototype.constructor=s,s.__super__=a.prototype,s}function h(){let e={isResolved:!1,isPending:!0,isRejected:!1,resolve:null,reject:null},t=new Promise((t,s)=>{e.resolve=t,e.reject=s});return Object.assign(t,e),t.then(function(e){return t.isResolved=!0,t.isPending=!1,t.isRejected=!1,e},function(e){throw t.isResolved=!1,t.isPending=!1,t.isRejected=!0,e}),t}function m(){throw Error('A "url" property or function must be specified')}function f(e,t){let s=t.error;t.error=function(r){s&&s.call(t.context,e,r,t),e.trigger("error",e,r,t)}}let p={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};function g(e){let t=(0,a.default)(e,"browserStorage")||(0,a.default)(e.collection,"browserStorage");return t?t.sync():_}function _(e,t,s={}){let r=s.data;null==r&&t&&("create"===e||"update"===e||"patch"===e)&&(r=s.attrs||t.toJSON());let i={method:p[e],body:r?JSON.stringify(r):"",success:s.success,error:s.error},o=s.url||(0,a.default)(t,"url")||m(),l=s.xhr=fetch(o,i);return t.trigger("request",t,l,{...i,xhr:l}),l}},"./node_modules/@converse/skeletor/src/storage.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>g});var r=s("./node_modules/localforage-driver-memory/_bundle/umd.js"),i=s("./node_modules/lodash-es/cloneDeep.js"),o=s("./node_modules/lodash-es/isString.js"),a=s("./node_modules/localforage/dist/localforage.js"),l=s.n(a),d=s("./node_modules/mergebounce/mergebounce.js"),c=s("./node_modules/@converse/skeletor/src/drivers/sessionStorage.js"),u=s("./node_modules/localforage-setitems/dist/localforage-setitems.js"),h=s("./node_modules/@converse/localforage-getitems/dist/localforage-getitems.es6.js"),m=s("./node_modules/@converse/skeletor/src/helpers.js");let f=r._driver;l().defineDriver(r),(0,u.extendPrototype)(l()),(0,h.extendPrototype)(l());class p{constructor(e,t,s=!1){if("local"!==t||window.localStorage){if("session"===t&&!window.sessionStorage)throw Error("Skeletor.storage: Environment does not support sessionStorage.")}else throw Error("Skeletor.storage: Environment does not support localStorage.");(0,o.default)(t)?this.storeInitialized=this.initStore(t,s):(this.store=t,s&&(this.store.debouncedSetItems=(0,d.default)(e=>this.store.setItems(e),50,{promise:!0})),this.storeInitialized=Promise.resolve()),this.name=e}async initStore(e,t){if("session"===e)await l().setDriver(c.default._driver);else if("local"===e)await l().config({driver:l().LOCALSTORAGE});else if("in_memory"===e)await l().config({driver:f});else if("indexed"!==e)throw Error("Skeletor.storage: No storage type was specified");this.store=l(),t&&(this.store.debouncedSetItems=(0,d.default)(e=>this.store.setItems(e),50,{promise:!0}))}flush(){return this.store.debouncedSetItems?.flush()}async clear(){await this.store.removeItem(this.name).catch(e=>console.error(e));let e=RegExp(`^${this.name}-`),t=(await this.store.keys()).filter(t=>e.test(t));await Promise.all(t.map(e=>this.store.removeItem(e).catch(e=>console.error(e))))}sync(){let e=this;async function t(t,s,r){let o,a,l,d,c=s.collection;["patch","update"].includes(t)&&(d=(0,i.default)(s.attributes)),await e.storeInitialized;try{let i=s.attributes;switch(t){case"read":o=void 0!==s.id?await e.find(s):await e.findAll();break;case"create":o=await e.create(s,r);break;case"patch":case"update":r.wait&&(s.attributes=d),l=e.update(s),r.wait&&(s.attributes=i),o=await l;break;case"delete":o=await e.destroy(s,c)}}catch(t){a=22===t.code&&0===e.getStorageSize()?"Private browsing is unsupported":t.message}if(o){if(r&&r.success){let e="read"===t?o:null;r.success(e,r)}}else a=a||"Record Not Found",r&&r.error&&r.error(a)}return t.__name__="localSync",t}removeCollectionReference(e,t){if(!t)return;let s=t.filter(t=>t.id!==e.id).map(e=>this.getItemName(e.id));return this.store.setItem(this.name,s)}addCollectionReference(e,t){if(!t)return;let s=t.map(e=>this.getItemName(e.id)),r=this.getItemName(e.id);return s.includes(r)||s.push(r),this.store.setItem(this.name,s)}getCollectionReferenceData(e){if(!e.collection)return{};let t=e.collection.map(e=>this.getItemName(e.id)),s=this.getItemName(e.id);t.includes(s)||t.push(s);let r={};return r[this.name]=t,r}async save(e){if(this.store.setItems){let t={};return t[this.getItemName(e.id)]=e.toJSON(),Object.assign(t,this.getCollectionReferenceData(e)),this.store.debouncedSetItems?this.store.debouncedSetItems(t):this.store.setItems(t)}{let t=this.getItemName(e.id),s=await this.store.setItem(t,e.toJSON());return await this.addCollectionReference(e,e.collection),s}}create(e,t){return e.id||(e.id=(0,m.guid)(),e.set(e.idAttribute,e.id,t)),this.save(e)}update(e){return this.save(e)}find(e){return this.store.getItem(this.getItemName(e.id))}async findAll(){let e=await this.store.getItem(this.name);return e?.length?Object.values(await this.store.getItems(e)):[]}async destroy(e,t){return await this.flush(),await this.store.removeItem(this.getItemName(e.id)),await this.removeCollectionReference(e,t),e}getStorageSize(){return this.store.length}getItemName(e){return this.name+"-"+e}}p.sessionStorageInitialized=l().defineDriver(c.default),p.localForage=l();let g=p},"./node_modules/@popperjs/core/lib/createPopper.js":function(e,t,s){"use strict";s.r(t),s.d(t,{createPopper:()=>g,detectOverflow:()=>u.default,popperGenerator:()=>p});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js"),l=s("./node_modules/@popperjs/core/lib/utils/orderModifiers.js"),d=s("./node_modules/@popperjs/core/lib/utils/debounce.js"),c=s("./node_modules/@popperjs/core/lib/utils/mergeByName.js"),u=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),h=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),m={placement:"bottom",modifiers:[],strategy:"absolute"};function f(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function p(e){void 0===e&&(e={});var t=e,s=t.defaultModifiers,u=void 0===s?[]:s,p=t.defaultOptions,g=void 0===p?m:p;return function(e,t,s){void 0===s&&(s=g);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},m,g),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},_=[],v=!1,y={state:p,setOptions:function(s){var r="function"==typeof s?s(p.options):s;b(),p.options=Object.assign({},g,p.options,r),p.scrollParents={reference:(0,h.isElement)(e)?(0,o.default)(e):e.contextElement?(0,o.default)(e.contextElement):[],popper:(0,o.default)(t)};var i=(0,l.default)((0,c.default)([].concat(u,p.options.modifiers)));return p.orderedModifiers=i.filter(function(e){return e.enabled}),p.orderedModifiers.forEach(function(e){var t=e.name,s=e.options,r=e.effect;if("function"==typeof r){var i=r({state:p,name:t,instance:y,options:void 0===s?{}:s});_.push(i||function(){})}}),y.update()},forceUpdate:function(){if(!v){var e=p.elements,t=e.reference,s=e.popper;if(f(t,s)){p.rects={reference:(0,r.default)(t,(0,a.default)(s),"fixed"===p.options.strategy),popper:(0,i.default)(s)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(e){return p.modifiersData[e.name]=Object.assign({},e.data)});for(var o=0;o<p.orderedModifiers.length;o++){if(!0===p.reset){p.reset=!1,o=-1;continue}var l=p.orderedModifiers[o],d=l.fn,c=l.options,u=void 0===c?{}:c,h=l.name;"function"==typeof d&&(p=d({state:p,options:u,name:h,instance:y})||p)}}}},update:(0,d.default)(function(){return new Promise(function(e){y.forceUpdate(),e(p)})}),destroy:function(){b(),v=!0}};if(!f(e,t))return y;function b(){_.forEach(function(e){return e()}),_=[]}return y.setOptions(s).then(function(e){!v&&s.onFirstUpdate&&s.onFirstUpdate(e)}),y}}var g=p()},"./node_modules/@popperjs/core/lib/dom-utils/contains.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js");function i(e,t){var s=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(s&&(0,r.isShadowRoot)(s)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}},"./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),i=s("./node_modules/@popperjs/core/lib/utils/math.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js");function l(e,t,s){void 0===t&&(t=!1),void 0===s&&(s=!1);var l=e.getBoundingClientRect(),d=1,c=1;t&&(0,r.isHTMLElement)(e)&&(d=e.offsetWidth>0&&(0,i.round)(l.width)/e.offsetWidth||1,c=e.offsetHeight>0&&(0,i.round)(l.height)/e.offsetHeight||1);var u=((0,r.isElement)(e)?(0,o.default)(e):window).visualViewport,h=!(0,a.default)()&&s,m=(l.left+(h&&u?u.offsetLeft:0))/d,f=(l.top+(h&&u?u.offsetTop:0))/c,p=l.width/d,g=l.height/c;return{width:p,height:g,top:f,right:m+p,bottom:f+g,left:m,x:m,y:f}}},"./node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>y});var r=s("./node_modules/@popperjs/core/lib/enums.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js"),l=s("./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js"),d=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),c=s("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js"),u=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),h=s("./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js"),m=s("./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js"),f=s("./node_modules/@popperjs/core/lib/dom-utils/contains.js"),p=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),g=s("./node_modules/@popperjs/core/lib/utils/rectToClientRect.js"),_=s("./node_modules/@popperjs/core/lib/utils/math.js");function v(e,t,s){var a;return t===r.viewport?(0,g.default)((0,i.default)(e,s)):(0,u.isElement)(t)?((a=(0,h.default)(t,!1,"fixed"===s)).top=a.top+t.clientTop,a.left=a.left+t.clientLeft,a.bottom=a.top+t.clientHeight,a.right=a.left+t.clientWidth,a.width=t.clientWidth,a.height=t.clientHeight,a.x=a.left,a.y=a.top,a):(0,g.default)((0,o.default)((0,d.default)(e)))}function y(e,t,s,r){var i,o,d=[].concat("clippingParents"===t?(i=(0,a.default)((0,m.default)(e)),o=["absolute","fixed"].indexOf((0,c.default)(e).position)>=0&&(0,u.isHTMLElement)(e)?(0,l.default)(e):e,(0,u.isElement)(o)?i.filter(function(e){return(0,u.isElement)(e)&&(0,f.default)(e,o)&&"body"!==(0,p.default)(e)}):[]):[].concat(t),[s]),h=d[0],g=d.reduce(function(t,s){var i=v(e,s,r);return t.top=(0,_.max)(i.top,t.top),t.right=(0,_.min)(i.right,t.right),t.bottom=(0,_.min)(i.bottom,t.bottom),t.left=(0,_.max)(i.left,t.left),t},v(e,h,r));return g.width=g.right-g.left,g.height=g.bottom-g.top,g.x=g.left,g.y=g.top,g}},"./node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),l=s("./node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js"),d=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),c=s("./node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js"),u=s("./node_modules/@popperjs/core/lib/utils/math.js");function h(e,t,s){void 0===s&&(s=!1);var h,m,f,p=(0,a.isHTMLElement)(t),g=(0,a.isHTMLElement)(t)&&(h=t.getBoundingClientRect(),m=(0,u.round)(h.width)/t.offsetWidth||1,f=(0,u.round)(h.height)/t.offsetHeight||1,1!==m||1!==f),_=(0,d.default)(t),v=(0,r.default)(e,g,s),y={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(p||!p&&!s)&&(("body"!==(0,o.default)(t)||(0,c.default)(_))&&(y=(0,i.default)(t)),(0,a.isHTMLElement)(t)?(b=(0,r.default)(t,!0),b.x+=t.clientLeft,b.y+=t.clientTop):_&&(b.x=(0,l.default)(_))),{x:v.left+y.scrollLeft-b.x,y:v.top+y.scrollTop-b.y,width:v.width,height:v.height}}},"./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js");function i(e){return(0,r.default)(e).getComputedStyle(e)}},"./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js");function i(e){return(((0,r.isElement)(e)?e.ownerDocument:e.document)||window.document).documentElement}},"./node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js"),l=s("./node_modules/@popperjs/core/lib/utils/math.js");function d(e){var t,s=(0,r.default)(e),d=(0,a.default)(e),c=null==(t=e.ownerDocument)?void 0:t.body,u=(0,l.max)(s.scrollWidth,s.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),h=(0,l.max)(s.scrollHeight,s.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),m=-d.scrollLeft+(0,o.default)(e),f=-d.scrollTop;return"rtl"===(0,i.default)(c||s).direction&&(m+=(0,l.max)(s.clientWidth,c?c.clientWidth:0)-u),{width:u,height:h,x:m,y:f}}},"./node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js":function(e,t,s){"use strict";function r(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js");function i(e){var t=(0,r.default)(e),s=e.offsetWidth,i=e.offsetHeight;return 1>=Math.abs(t.width-s)&&(s=t.width),1>=Math.abs(t.height-i)&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:s,height:i}}},"./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js":function(e,t,s){"use strict";function r(e){return e?(e.nodeName||"").toLowerCase():null}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js");function l(e){return e!==(0,i.default)(e)&&(0,o.isHTMLElement)(e)?(0,a.default)(e):(0,r.default)(e)}},"./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),l=s("./node_modules/@popperjs/core/lib/dom-utils/isTableElement.js"),d=s("./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js"),c=s("./node_modules/@popperjs/core/lib/utils/userAgent.js");function u(e){return(0,a.isHTMLElement)(e)&&"fixed"!==(0,o.default)(e).position?e.offsetParent:null}function h(e){for(var t=(0,r.default)(e),s=u(e);s&&(0,l.default)(s)&&"static"===(0,o.default)(s).position;)s=u(s);return s&&("html"===(0,i.default)(s)||"body"===(0,i.default)(s)&&"static"===(0,o.default)(s).position)?t:s||function(e){var t=/firefox/i.test((0,c.default)());if(/Trident/i.test((0,c.default)())&&(0,a.isHTMLElement)(e)&&"fixed"===(0,o.default)(e).position)return null;var s=(0,d.default)(e);for((0,a.isShadowRoot)(s)&&(s=s.host);(0,a.isHTMLElement)(s)&&0>["html","body"].indexOf((0,i.default)(s));){var r=(0,o.default)(s);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return s;s=s.parentNode}return null}(e)||t}},"./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js");function a(e){return"html"===(0,r.default)(e)?e:e.assignedSlot||e.parentNode||((0,o.isShadowRoot)(e)?e.host:null)||(0,i.default)(e)}},"./node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>function e(t){return["html","body","#document"].indexOf((0,o.default)(t))>=0?t.ownerDocument.body:(0,a.isHTMLElement)(t)&&(0,i.default)(t)?t:e((0,r.default)(t))}});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js")},"./node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js");function l(e,t){var s=(0,r.default)(e),l=(0,i.default)(e),d=s.visualViewport,c=l.clientWidth,u=l.clientHeight,h=0,m=0;if(d){c=d.width,u=d.height;var f=(0,a.default)();(f||!f&&"fixed"===t)&&(h=d.offsetLeft,m=d.offsetTop)}return{width:c,height:u,x:h+(0,o.default)(e),y:m}}},"./node_modules/@popperjs/core/lib/dom-utils/getWindow.js":function(e,t,s){"use strict";function r(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js");function i(e){var t=(0,r.default)(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}},"./node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js");function a(e){return(0,r.default)((0,i.default)(e)).left+(0,o.default)(e).scrollLeft}},"./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js":function(e,t,s){"use strict";s.r(t),s.d(t,{isElement:()=>i,isHTMLElement:()=>o,isShadowRoot:()=>a});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js");function i(e){var t=(0,r.default)(e).Element;return e instanceof t||e instanceof Element}function o(e){var t=(0,r.default)(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function a(e){if("undefined"==typeof ShadowRoot)return!1;var t=(0,r.default)(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}},"./node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@popperjs/core/lib/utils/userAgent.js");function i(){return!/^((?!chrome|android).)*safari/i.test((0,r.default)())}},"./node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js");function i(e){var t=(0,r.default)(e),s=t.overflow,i=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(s+o+i)}},"./node_modules/@popperjs/core/lib/dom-utils/isTableElement.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js");function i(e){return["table","td","th"].indexOf((0,r.default)(e))>=0}},"./node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>function e(t,s){void 0===s&&(s=[]);var l,d=(0,r.default)(t),c=d===(null==(l=t.ownerDocument)?void 0:l.body),u=(0,o.default)(d),h=c?[u].concat(u.visualViewport||[],(0,a.default)(d)?d:[]):d,m=s.concat(h);return c?m:m.concat(e((0,i.default)(h)))}});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js")},"./node_modules/@popperjs/core/lib/enums.js":function(e,t,s){"use strict";s.r(t),s.d(t,{afterMain:()=>S,afterRead:()=>b,afterWrite:()=>A,auto:()=>l,basePlacements:()=>d,beforeMain:()=>j,beforeRead:()=>v,beforeWrite:()=>x,bottom:()=>i,clippingParents:()=>h,end:()=>u,left:()=>a,main:()=>w,modifierPhases:()=>C,placements:()=>_,popper:()=>f,read:()=>y,reference:()=>p,right:()=>o,start:()=>c,top:()=>r,variationPlacements:()=>g,viewport:()=>m,write:()=>E});var r="top",i="bottom",o="right",a="left",l="auto",d=[r,i,o,a],c="start",u="end",h="clippingParents",m="viewport",f="popper",p="reference",g=d.reduce(function(e,t){return e.concat([t+"-"+c,t+"-"+u])},[]),_=[].concat(d,[l]).reduce(function(e,t){return e.concat([t,t+"-"+c,t+"-"+u])},[]),v="beforeRead",y="read",b="afterRead",j="beforeMain",w="main",S="afterMain",x="beforeWrite",E="write",A="afterWrite",C=[v,y,b,j,w,S,x,E,A]},"./node_modules/@popperjs/core/lib/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{afterMain:()=>r.afterMain,afterRead:()=>r.afterRead,afterWrite:()=>r.afterWrite,applyStyles:()=>i.applyStyles,arrow:()=>i.arrow,auto:()=>r.auto,basePlacements:()=>r.basePlacements,beforeMain:()=>r.beforeMain,beforeRead:()=>r.beforeRead,beforeWrite:()=>r.beforeWrite,bottom:()=>r.bottom,clippingParents:()=>r.clippingParents,computeStyles:()=>i.computeStyles,createPopper:()=>l.createPopper,createPopperBase:()=>o.createPopper,createPopperLite:()=>d.createPopper,detectOverflow:()=>a.default,end:()=>r.end,eventListeners:()=>i.eventListeners,flip:()=>i.flip,hide:()=>i.hide,left:()=>r.left,main:()=>r.main,modifierPhases:()=>r.modifierPhases,offset:()=>i.offset,placements:()=>r.placements,popper:()=>r.popper,popperGenerator:()=>o.popperGenerator,popperOffsets:()=>i.popperOffsets,preventOverflow:()=>i.preventOverflow,read:()=>r.read,reference:()=>r.reference,right:()=>r.right,start:()=>r.start,top:()=>r.top,variationPlacements:()=>r.variationPlacements,viewport:()=>r.viewport,write:()=>r.write});var r=s("./node_modules/@popperjs/core/lib/enums.js"),i=s("./node_modules/@popperjs/core/lib/modifiers/index.js"),o=s("./node_modules/@popperjs/core/lib/createPopper.js"),a=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),l=s("./node_modules/@popperjs/core/lib/popper.js"),d=s("./node_modules/@popperjs/core/lib/popper-lite.js")},"./node_modules/@popperjs/core/lib/modifiers/applyStyles.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js");let o={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var s=t.styles[e]||{},o=t.attributes[e]||{},a=t.elements[e];(0,i.isHTMLElement)(a)&&(0,r.default)(a)&&(Object.assign(a.style,s),Object.keys(o).forEach(function(e){var t=o[e];!1===t?a.removeAttribute(e):a.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,s={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,s.popper),t.styles=s,t.elements.arrow&&Object.assign(t.elements.arrow.style,s.arrow),function(){Object.keys(t.elements).forEach(function(e){var o=t.elements[e],a=t.attributes[e]||{},l=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:s[e]).reduce(function(e,t){return e[t]="",e},{});(0,i.isHTMLElement)(o)&&(0,r.default)(o)&&(Object.assign(o.style,l),Object.keys(a).forEach(function(e){o.removeAttribute(e)}))})}},requires:["computeStyles"]}},"./node_modules/@popperjs/core/lib/modifiers/arrow.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/contains.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js"),l=s("./node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js"),d=s("./node_modules/@popperjs/core/lib/utils/within.js"),c=s("./node_modules/@popperjs/core/lib/utils/mergePaddingObject.js"),u=s("./node_modules/@popperjs/core/lib/utils/expandToHashMap.js"),h=s("./node_modules/@popperjs/core/lib/enums.js");let m={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,s=e.state,o=e.name,m=e.options,f=s.elements.arrow,p=s.modifiersData.popperOffsets,g=(0,r.default)(s.placement),_=(0,l.default)(g),v=[h.left,h.right].indexOf(g)>=0?"height":"width";if(f&&p){var y,b=(y=m.padding,y="function"==typeof y?y(Object.assign({},s.rects,{placement:s.placement})):y,(0,c.default)("number"!=typeof y?y:(0,u.default)(y,h.basePlacements))),j=(0,i.default)(f),w="y"===_?h.top:h.left,S="y"===_?h.bottom:h.right,x=s.rects.reference[v]+s.rects.reference[_]-p[_]-s.rects.popper[v],E=p[_]-s.rects.reference[_],A=(0,a.default)(f),C=A?"y"===_?A.clientHeight||0:A.clientWidth||0:0,k=b[w],$=C-j[v]-b[S],T=C/2-j[v]/2+(x/2-E/2),M=(0,d.within)(k,T,$);s.modifiersData[o]=((t={})[_]=M,t.centerOffset=M-T,t)}},effect:function(e){var t=e.state,s=e.options.element,r=void 0===s?"[data-popper-arrow]":s;if(null!=r)("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&(0,o.default)(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]}},"./node_modules/@popperjs/core/lib/modifiers/computeStyles.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>f,mapToStyles:()=>m});var r=s("./node_modules/@popperjs/core/lib/enums.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),l=s("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js"),d=s("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),c=s("./node_modules/@popperjs/core/lib/utils/getVariation.js"),u=s("./node_modules/@popperjs/core/lib/utils/math.js"),h={top:"auto",right:"auto",bottom:"auto",left:"auto"};function m(e){var t,s,d,c,m,f,p,g=e.popper,_=e.popperRect,v=e.placement,y=e.variation,b=e.offsets,j=e.position,w=e.gpuAcceleration,S=e.adaptive,x=e.roundOffsets,E=e.isFixed,A=b.x,C=void 0===A?0:A,k=b.y,$=void 0===k?0:k,T="function"==typeof x?x({x:C,y:$}):{x:C,y:$};C=T.x,$=T.y;var M=b.hasOwnProperty("x"),O=b.hasOwnProperty("y"),I=r.left,N=r.top,R=window;if(S){var D=(0,i.default)(g),L="clientHeight",P="clientWidth";D===(0,o.default)(g)&&(D=(0,a.default)(g),"static"!==(0,l.default)(D).position&&"absolute"===j&&(L="scrollHeight",P="scrollWidth")),(v===r.top||(v===r.left||v===r.right)&&y===r.end)&&(N=r.bottom,$-=(E&&D===R&&R.visualViewport?R.visualViewport.height:D[L])-_.height,$*=w?1:-1),(v===r.left||(v===r.top||v===r.bottom)&&y===r.end)&&(I=r.right,C-=(E&&D===R&&R.visualViewport?R.visualViewport.width:D[P])-_.width,C*=w?1:-1)}var z=Object.assign({position:j},S&&h),U=!0===x?(t={x:C,y:$},s=(0,o.default)(g),d=t.x,c=t.y,m=s.devicePixelRatio||1,{x:(0,u.round)(d*m)/m||0,y:(0,u.round)(c*m)/m||0}):{x:C,y:$};return(C=U.x,$=U.y,w)?Object.assign({},z,((p={})[N]=O?"0":"",p[I]=M?"0":"",p.transform=1>=(R.devicePixelRatio||1)?"translate("+C+"px, "+$+"px)":"translate3d("+C+"px, "+$+"px, 0)",p)):Object.assign({},z,((f={})[N]=O?$+"px":"",f[I]=M?C+"px":"",f.transform="",f))}let f={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,s=e.options,r=s.gpuAcceleration,i=s.adaptive,o=s.roundOffsets,a=void 0===o||o,l={placement:(0,d.default)(t.placement),variation:(0,c.default)(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:void 0===r||r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,m(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:void 0===i||i,roundOffsets:a})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,m(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}}},"./node_modules/@popperjs/core/lib/modifiers/eventListeners.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),i={passive:!0};let o={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,s=e.instance,o=e.options,a=o.scroll,l=void 0===a||a,d=o.resize,c=void 0===d||d,u=(0,r.default)(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return l&&h.forEach(function(e){e.addEventListener("scroll",s.update,i)}),c&&u.addEventListener("resize",s.update,i),function(){l&&h.forEach(function(e){e.removeEventListener("scroll",s.update,i)}),c&&u.removeEventListener("resize",s.update,i)}},data:{}}},"./node_modules/@popperjs/core/lib/modifiers/flip.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/@popperjs/core/lib/utils/getOppositePlacement.js"),i=s("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),o=s("./node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js"),a=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),l=s("./node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js"),d=s("./node_modules/@popperjs/core/lib/enums.js"),c=s("./node_modules/@popperjs/core/lib/utils/getVariation.js");let u={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,s=e.options,u=e.name;if(!t.modifiersData[u]._skip){for(var h=s.mainAxis,m=void 0===h||h,f=s.altAxis,p=void 0===f||f,g=s.fallbackPlacements,_=s.padding,v=s.boundary,y=s.rootBoundary,b=s.altBoundary,j=s.flipVariations,w=void 0===j||j,S=s.allowedAutoPlacements,x=t.options.placement,E=(0,i.default)(x)===x,A=g||(E||!w?[(0,r.default)(x)]:function(e){if((0,i.default)(e)===d.auto)return[];var t=(0,r.default)(e);return[(0,o.default)(e),t,(0,o.default)(t)]}(x)),C=[x].concat(A).reduce(function(e,s){return e.concat((0,i.default)(s)===d.auto?(0,l.default)(t,{placement:s,boundary:v,rootBoundary:y,padding:_,flipVariations:w,allowedAutoPlacements:S}):s)},[]),k=t.rects.reference,$=t.rects.popper,T=new Map,M=!0,O=C[0],I=0;I<C.length;I++){var N=C[I],R=(0,i.default)(N),D=(0,c.default)(N)===d.start,L=[d.top,d.bottom].indexOf(R)>=0,P=L?"width":"height",z=(0,a.default)(t,{placement:N,boundary:v,rootBoundary:y,altBoundary:b,padding:_}),U=L?D?d.right:d.left:D?d.bottom:d.top;k[P]>$[P]&&(U=(0,r.default)(U));var B=(0,r.default)(U),F=[];if(m&&F.push(z[R]<=0),p&&F.push(z[U]<=0,z[B]<=0),F.every(function(e){return e})){O=N,M=!1;break}T.set(N,F)}if(M)for(var q=w?3:1,H=function(e){var t=C.find(function(t){var s=T.get(t);if(s)return s.slice(0,e).every(function(e){return e})});if(t)return O=t,"break"},G=q;G>0&&"break"!==H(G);G--);t.placement!==O&&(t.modifiersData[u]._skip=!0,t.placement=O,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}}},"./node_modules/@popperjs/core/lib/modifiers/hide.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/@popperjs/core/lib/enums.js"),i=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js");function o(e,t,s){return void 0===s&&(s={x:0,y:0}),{top:e.top-t.height-s.y,right:e.right-t.width+s.x,bottom:e.bottom-t.height+s.y,left:e.left-t.width-s.x}}function a(e){return[r.top,r.right,r.bottom,r.left].some(function(t){return e[t]>=0})}let l={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,s=e.name,r=t.rects.reference,l=t.rects.popper,d=t.modifiersData.preventOverflow,c=(0,i.default)(t,{elementContext:"reference"}),u=(0,i.default)(t,{altBoundary:!0}),h=o(c,r),m=o(u,l,d),f=a(h),p=a(m);t.modifiersData[s]={referenceClippingOffsets:h,popperEscapeOffsets:m,isReferenceHidden:f,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":p})}}},"./node_modules/@popperjs/core/lib/modifiers/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{applyStyles:()=>r.default,arrow:()=>i.default,computeStyles:()=>o.default,eventListeners:()=>a.default,flip:()=>l.default,hide:()=>d.default,offset:()=>c.default,popperOffsets:()=>u.default,preventOverflow:()=>h.default});var r=s("./node_modules/@popperjs/core/lib/modifiers/applyStyles.js"),i=s("./node_modules/@popperjs/core/lib/modifiers/arrow.js"),o=s("./node_modules/@popperjs/core/lib/modifiers/computeStyles.js"),a=s("./node_modules/@popperjs/core/lib/modifiers/eventListeners.js"),l=s("./node_modules/@popperjs/core/lib/modifiers/flip.js"),d=s("./node_modules/@popperjs/core/lib/modifiers/hide.js"),c=s("./node_modules/@popperjs/core/lib/modifiers/offset.js"),u=s("./node_modules/@popperjs/core/lib/modifiers/popperOffsets.js"),h=s("./node_modules/@popperjs/core/lib/modifiers/preventOverflow.js")},"./node_modules/@popperjs/core/lib/modifiers/offset.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a,distanceAndSkiddingToXY:()=>o});var r=s("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),i=s("./node_modules/@popperjs/core/lib/enums.js");function o(e,t,s){var o=(0,r.default)(e),a=[i.left,i.top].indexOf(o)>=0?-1:1,l="function"==typeof s?s(Object.assign({},t,{placement:e})):s,d=l[0],c=l[1];return d=d||0,c=(c||0)*a,[i.left,i.right].indexOf(o)>=0?{x:c,y:d}:{x:d,y:c}}let a={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,s=e.options,r=e.name,a=s.offset,l=void 0===a?[0,0]:a,d=i.placements.reduce(function(e,s){return e[s]=o(s,t.rects,l),e},{}),c=d[t.placement],u=c.x,h=c.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=h),t.modifiersData[r]=d}}},"./node_modules/@popperjs/core/lib/modifiers/popperOffsets.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@popperjs/core/lib/utils/computeOffsets.js");let i={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,s=e.name;t.modifiersData[s]=(0,r.default)({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}}},"./node_modules/@popperjs/core/lib/modifiers/preventOverflow.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>p});var r=s("./node_modules/@popperjs/core/lib/enums.js"),i=s("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),o=s("./node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js"),a=s("./node_modules/@popperjs/core/lib/utils/getAltAxis.js"),l=s("./node_modules/@popperjs/core/lib/utils/within.js"),d=s("./node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js"),c=s("./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js"),u=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),h=s("./node_modules/@popperjs/core/lib/utils/getVariation.js"),m=s("./node_modules/@popperjs/core/lib/utils/getFreshSideObject.js"),f=s("./node_modules/@popperjs/core/lib/utils/math.js");let p={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,s=e.options,p=e.name,g=s.mainAxis,_=s.altAxis,v=s.boundary,y=s.rootBoundary,b=s.altBoundary,j=s.padding,w=s.tether,S=void 0===w||w,x=s.tetherOffset,E=void 0===x?0:x,A=(0,u.default)(t,{boundary:v,rootBoundary:y,padding:j,altBoundary:b}),C=(0,i.default)(t.placement),k=(0,h.default)(t.placement),$=!k,T=(0,o.default)(C),M=(0,a.default)(T),O=t.modifiersData.popperOffsets,I=t.rects.reference,N=t.rects.popper,R="function"==typeof E?E(Object.assign({},t.rects,{placement:t.placement})):E,D="number"==typeof R?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),L=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(O){if(void 0===g||g){var z,U="y"===T?r.top:r.left,B="y"===T?r.bottom:r.right,F="y"===T?"height":"width",q=O[T],H=q+A[U],G=q-A[B],W=S?-N[F]/2:0,V=k===r.start?I[F]:N[F],K=k===r.start?-N[F]:-I[F],J=t.elements.arrow,Q=S&&J?(0,d.default)(J):{width:0,height:0},Y=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:(0,m.default)(),X=Y[U],Z=Y[B],ee=(0,l.within)(0,I[F],Q[F]),et=$?I[F]/2-W-ee-X-D.mainAxis:V-ee-X-D.mainAxis,es=$?-I[F]/2+W+ee+Z+D.mainAxis:K+ee+Z+D.mainAxis,er=t.elements.arrow&&(0,c.default)(t.elements.arrow),en=er?"y"===T?er.clientTop||0:er.clientLeft||0:0,ei=null!=(z=null==L?void 0:L[T])?z:0,eo=(0,l.within)(S?(0,f.min)(H,q+et-ei-en):H,q,S?(0,f.max)(G,q+es-ei):G);O[T]=eo,P[T]=eo-q}if(void 0!==_&&_){var ea,el="x"===T?r.top:r.left,ed="x"===T?r.bottom:r.right,ec=O[M],eu="y"===M?"height":"width",eh=ec+A[el],em=ec-A[ed],ef=-1!==[r.top,r.left].indexOf(C),ep=null!=(ea=null==L?void 0:L[M])?ea:0,eg=ef?eh:ec-I[eu]-N[eu]-ep+D.altAxis,e_=ef?ec+I[eu]+N[eu]-ep-D.altAxis:em,ev=S&&ef?(0,l.withinMaxClamp)(eg,ec,e_):(0,l.within)(S?eg:eh,ec,S?e_:em);O[M]=ev,P[M]=ev-ec}t.modifiersData[p]=P}},requiresIfExists:["offset"]}},"./node_modules/@popperjs/core/lib/popper-lite.js":function(e,t,s){"use strict";s.r(t),s.d(t,{createPopper:()=>u,defaultModifiers:()=>c,detectOverflow:()=>i.default,popperGenerator:()=>r.popperGenerator});var r=s("./node_modules/@popperjs/core/lib/createPopper.js"),i=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),o=s("./node_modules/@popperjs/core/lib/modifiers/eventListeners.js"),a=s("./node_modules/@popperjs/core/lib/modifiers/popperOffsets.js"),l=s("./node_modules/@popperjs/core/lib/modifiers/computeStyles.js"),d=s("./node_modules/@popperjs/core/lib/modifiers/applyStyles.js"),c=[o.default,a.default,l.default,d.default],u=(0,r.popperGenerator)({defaultModifiers:c})},"./node_modules/@popperjs/core/lib/popper.js":function(e,t,s){"use strict";s.r(t),s.d(t,{applyStyles:()=>g.applyStyles,arrow:()=>g.arrow,computeStyles:()=>g.computeStyles,createPopper:()=>v,createPopperLite:()=>p.createPopper,defaultModifiers:()=>_,detectOverflow:()=>i.default,eventListeners:()=>g.eventListeners,flip:()=>g.flip,hide:()=>g.hide,offset:()=>g.offset,popperGenerator:()=>r.popperGenerator,popperOffsets:()=>g.popperOffsets,preventOverflow:()=>g.preventOverflow});var r=s("./node_modules/@popperjs/core/lib/createPopper.js"),i=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),o=s("./node_modules/@popperjs/core/lib/modifiers/eventListeners.js"),a=s("./node_modules/@popperjs/core/lib/modifiers/popperOffsets.js"),l=s("./node_modules/@popperjs/core/lib/modifiers/computeStyles.js"),d=s("./node_modules/@popperjs/core/lib/modifiers/applyStyles.js"),c=s("./node_modules/@popperjs/core/lib/modifiers/offset.js"),u=s("./node_modules/@popperjs/core/lib/modifiers/flip.js"),h=s("./node_modules/@popperjs/core/lib/modifiers/preventOverflow.js"),m=s("./node_modules/@popperjs/core/lib/modifiers/arrow.js"),f=s("./node_modules/@popperjs/core/lib/modifiers/hide.js"),p=s("./node_modules/@popperjs/core/lib/popper-lite.js"),g=s("./node_modules/@popperjs/core/lib/modifiers/index.js"),_=[o.default,a.default,l.default,d.default,c.default,u.default,h.default,m.default,f.default],v=(0,r.popperGenerator)({defaultModifiers:_})},"./node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/@popperjs/core/lib/utils/getVariation.js"),i=s("./node_modules/@popperjs/core/lib/enums.js"),o=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),a=s("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js");function l(e,t){void 0===t&&(t={});var s=t,l=s.placement,d=s.boundary,c=s.rootBoundary,u=s.padding,h=s.flipVariations,m=s.allowedAutoPlacements,f=void 0===m?i.placements:m,p=(0,r.default)(l),g=p?h?i.variationPlacements:i.variationPlacements.filter(function(e){return(0,r.default)(e)===p}):i.basePlacements,_=g.filter(function(e){return f.indexOf(e)>=0});0===_.length&&(_=g);var v=_.reduce(function(t,s){return t[s]=(0,o.default)(e,{placement:s,boundary:d,rootBoundary:c,padding:u})[(0,a.default)(s)],t},{});return Object.keys(v).sort(function(e,t){return v[e]-v[t]})}},"./node_modules/@popperjs/core/lib/utils/computeOffsets.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),i=s("./node_modules/@popperjs/core/lib/utils/getVariation.js"),o=s("./node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js"),a=s("./node_modules/@popperjs/core/lib/enums.js");function l(e){var t,s=e.reference,l=e.element,d=e.placement,c=d?(0,r.default)(d):null,u=d?(0,i.default)(d):null,h=s.x+s.width/2-l.width/2,m=s.y+s.height/2-l.height/2;switch(c){case a.top:t={x:h,y:s.y-l.height};break;case a.bottom:t={x:h,y:s.y+s.height};break;case a.right:t={x:s.x+s.width,y:m};break;case a.left:t={x:s.x-l.width,y:m};break;default:t={x:s.x,y:s.y}}var f=c?(0,o.default)(c):null;if(null!=f){var p="y"===f?"height":"width";switch(u){case a.start:t[f]=t[f]-(s[p]/2-l[p]/2);break;case a.end:t[f]=t[f]+(s[p]/2-l[p]/2)}}return t}},"./node_modules/@popperjs/core/lib/utils/debounce.js":function(e,t,s){"use strict";function r(e){var t;return function(){return t||(t=new Promise(function(s){Promise.resolve().then(function(){t=void 0,s(e())})})),t}}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/detectOverflow.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js"),a=s("./node_modules/@popperjs/core/lib/utils/computeOffsets.js"),l=s("./node_modules/@popperjs/core/lib/utils/rectToClientRect.js"),d=s("./node_modules/@popperjs/core/lib/enums.js"),c=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),u=s("./node_modules/@popperjs/core/lib/utils/mergePaddingObject.js"),h=s("./node_modules/@popperjs/core/lib/utils/expandToHashMap.js");function m(e,t){void 0===t&&(t={});var s=t,m=s.placement,f=void 0===m?e.placement:m,p=s.strategy,g=void 0===p?e.strategy:p,_=s.boundary,v=void 0===_?d.clippingParents:_,y=s.rootBoundary,b=void 0===y?d.viewport:y,j=s.elementContext,w=void 0===j?d.popper:j,S=s.altBoundary,x=s.padding,E=void 0===x?0:x,A=(0,u.default)("number"!=typeof E?E:(0,h.default)(E,d.basePlacements)),C=w===d.popper?d.reference:d.popper,k=e.rects.popper,$=e.elements[void 0!==S&&S?C:w],T=(0,r.default)((0,c.isElement)($)?$:$.contextElement||(0,i.default)(e.elements.popper),v,b,g),M=(0,o.default)(e.elements.reference),O=(0,a.default)({reference:M,element:k,strategy:"absolute",placement:f}),I=(0,l.default)(Object.assign({},k,O)),N=w===d.popper?I:M,R={top:T.top-N.top+A.top,bottom:N.bottom-T.bottom+A.bottom,left:T.left-N.left+A.left,right:N.right-T.right+A.right},D=e.modifiersData.offset;if(w===d.popper&&D){var L=D[f];Object.keys(R).forEach(function(e){var t=[d.right,d.bottom].indexOf(e)>=0?1:-1,s=[d.top,d.bottom].indexOf(e)>=0?"y":"x";R[e]+=L[s]*t})}return R}},"./node_modules/@popperjs/core/lib/utils/expandToHashMap.js":function(e,t,s){"use strict";function r(e,t){return t.reduce(function(t,s){return t[s]=e,t},{})}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/getAltAxis.js":function(e,t,s){"use strict";function r(e){return"x"===e?"y":"x"}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/getBasePlacement.js":function(e,t,s){"use strict";function r(e){return e.split("-")[0]}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/getFreshSideObject.js":function(e,t,s){"use strict";function r(){return{top:0,right:0,bottom:0,left:0}}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js":function(e,t,s){"use strict";function r(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/getOppositePlacement.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r={left:"right",right:"left",bottom:"top",top:"bottom"};function i(e){return e.replace(/left|right|bottom|top/g,function(e){return r[e]})}},"./node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r={start:"end",end:"start"};function i(e){return e.replace(/start|end/g,function(e){return r[e]})}},"./node_modules/@popperjs/core/lib/utils/getVariation.js":function(e,t,s){"use strict";function r(e){return e.split("-")[1]}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/math.js":function(e,t,s){"use strict";s.r(t),s.d(t,{max:()=>r,min:()=>i,round:()=>o});var r=Math.max,i=Math.min,o=Math.round},"./node_modules/@popperjs/core/lib/utils/mergeByName.js":function(e,t,s){"use strict";function r(e){var t=e.reduce(function(e,t){var s=e[t.name];return e[t.name]=s?Object.assign({},s,t,{options:Object.assign({},s.options,t.options),data:Object.assign({},s.data,t.data)}):t,e},{});return Object.keys(t).map(function(e){return t[e]})}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/mergePaddingObject.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@popperjs/core/lib/utils/getFreshSideObject.js");function i(e){return Object.assign({},(0,r.default)(),e)}},"./node_modules/@popperjs/core/lib/utils/orderModifiers.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@popperjs/core/lib/enums.js");function i(e){var t,s,i,o=(t=new Map,s=new Set,i=[],e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){s.has(e.name)||function e(r){s.add(r.name),[].concat(r.requires||[],r.requiresIfExists||[]).forEach(function(r){if(!s.has(r)){var i=t.get(r);i&&e(i)}}),i.push(r)}(e)}),i);return r.modifierPhases.reduce(function(e,t){return e.concat(o.filter(function(e){return e.phase===t}))},[])}},"./node_modules/@popperjs/core/lib/utils/rectToClientRect.js":function(e,t,s){"use strict";function r(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/userAgent.js":function(e,t,s){"use strict";function r(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/within.js":function(e,t,s){"use strict";s.r(t),s.d(t,{within:()=>i,withinMaxClamp:()=>o});var r=s("./node_modules/@popperjs/core/lib/utils/math.js");function i(e,t,s){return(0,r.max)(e,(0,r.min)(t,s))}function o(e,t,s){var r=i(e,t,s);return r>s?s:r}},"./node_modules/bootstrap/js/src/base-component.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/bootstrap/js/src/dom/data.js"),i=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),o=s("./node_modules/bootstrap/js/src/util/config.js"),a=s("./node_modules/bootstrap/js/src/util/index.js");class l extends o.default{constructor(e,t){if(super(),!(e=(0,a.getElement)(e)))return;this._element=e,this._config=this._getConfig(t),r.default.set(this._element,this.constructor.DATA_KEY,this)}dispose(){for(let e of(r.default.remove(this._element,this.constructor.DATA_KEY),i.default.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this)))this[e]=null}_queueCallback(e,t,s=!0){(0,a.executeAfterTransition)(e,t,s)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return r.default.get((0,a.getElement)(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.6"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}let d=l},"./node_modules/bootstrap/js/src/dom/data.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});let r=new Map,i={set(e,t,s){r.has(e)||r.set(e,new Map);let i=r.get(e);if(!i.has(t)&&0!==i.size)return void console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);i.set(t,s)},get:(e,t)=>r.has(e)&&r.get(e).get(t)||null,remove(e,t){if(!r.has(e))return;let s=r.get(e);s.delete(t),0===s.size&&r.delete(e)}}},"./node_modules/bootstrap/js/src/dom/event-handler.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>j});var r=s("./node_modules/bootstrap/js/src/util/index.js");let i=/[^.]*(?=\..*)\.|.*/,o=/\..*/,a=/::\d+$/,l={},d=1,c={mouseenter:"mouseover",mouseleave:"mouseout"},u=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function h(e,t){return t&&`${t}::${d++}`||e.uidEvent||d++}function m(e){let t=h(e);return e.uidEvent=t,l[t]=l[t]||{},l[t]}function f(e,t,s=null){return Object.values(e).find(e=>e.callable===t&&e.delegationSelector===s)}function p(e,t,s){let r="string"==typeof t,i=v(e);return u.has(i)||(i=e),[r,r?s:t||s,i]}function g(e,t,s,r,o){var a,l;if("string"!=typeof t||!e)return;let[d,u,g]=p(t,s,r);if(t in c){let e;e=u,u=function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)}}let _=m(e),v=_[g]||(_[g]={}),j=f(v,u,d?s:null);if(j){j.oneOff=j.oneOff&&o;return}let w=h(u,t.replace(i,"")),S=d?(a=u,function t(r){let i=e.querySelectorAll(s);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(let l of i)if(l===o)return b(r,{delegateTarget:o}),t.oneOff&&y.off(e,r.type,s,a),a.apply(o,[r])}):(l=u,function t(s){return b(s,{delegateTarget:e}),t.oneOff&&y.off(e,s.type,l),l.apply(e,[s])});S.delegationSelector=d?s:null,S.callable=u,S.oneOff=o,S.uidEvent=w,v[w]=S,e.addEventListener(g,S,d)}function _(e,t,s,r,i){let o=f(t[s],r,i);o&&(e.removeEventListener(s,o,!!i),delete t[s][o.uidEvent])}function v(e){return c[e=e.replace(o,"")]||e}let y={on(e,t,s,r){g(e,t,s,r,!1)},one(e,t,s,r){g(e,t,s,r,!0)},off(e,t,s,r){if("string"!=typeof t||!e)return;let[i,o,l]=p(t,s,r),d=l!==t,c=m(e),u=c[l]||{},h=t.startsWith(".");if(void 0!==o){if(!Object.keys(u).length)return;_(e,c,l,o,i?s:null);return}if(h)for(let s of Object.keys(c)){var f=t.slice(1);for(let[t,r]of Object.entries(c[s]||{}))t.includes(f)&&_(e,c,s,r.callable,r.delegationSelector)}for(let[s,r]of Object.entries(u)){let i=s.replace(a,"");(!d||t.includes(i))&&_(e,c,l,r.callable,r.delegationSelector)}},trigger(e,t,s){if("string"!=typeof t||!e)return null;let i=(0,r.getjQuery)(),o=v(t),a=null,l=!0,d=!0,c=!1;t!==o&&i&&(a=i.Event(t,s),i(e).trigger(a),l=!a.isPropagationStopped(),d=!a.isImmediatePropagationStopped(),c=a.isDefaultPrevented());let u=b(new Event(t,{bubbles:l,cancelable:!0}),s);return c&&u.preventDefault(),d&&e.dispatchEvent(u),u.defaultPrevented&&a&&a.preventDefault(),u}};function b(e,t={}){for(let[s,r]of Object.entries(t))try{e[s]=r}catch{Object.defineProperty(e,s,{configurable:!0,get:()=>r})}return e}let j=y},"./node_modules/bootstrap/js/src/dom/manipulator.js":function(e,t,s){"use strict";function r(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function i(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}s.r(t),s.d(t,{default:()=>o});let o={setDataAttribute(e,t,s){e.setAttribute(`data-bs-${i(t)}`,s)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${i(t)}`)},getDataAttributes(e){if(!e)return{};let t={};for(let s of Object.keys(e.dataset).filter(e=>e.startsWith("bs")&&!e.startsWith("bsConfig"))){let i=s.replace(/^bs/,"");t[i=i.charAt(0).toLowerCase()+i.slice(1)]=r(e.dataset[s])}return t},getDataAttribute:(e,t)=>r(e.getAttribute(`data-bs-${i(t)}`))}},"./node_modules/bootstrap/js/src/dom/selector-engine.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/bootstrap/js/src/util/index.js");let i=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let s=e.getAttribute("href");if(!s||!s.includes("#")&&!s.startsWith("."))return null;s.includes("#")&&!s.startsWith("#")&&(s=`#${s.split("#")[1]}`),t=s&&"#"!==s?s.trim():null}return t?t.split(",").map(e=>(0,r.parseSelector)(e)).join(","):null},o={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter(e=>e.matches(t)),parents(e,t){let s=[],r=e.parentNode.closest(t);for(;r;)s.push(r),r=r.parentNode.closest(t);return s},prev(e,t){let s=e.previousElementSibling;for(;s;){if(s.matches(t))return[s];s=s.previousElementSibling}return[]},next(e,t){let s=e.nextElementSibling;for(;s;){if(s.matches(t))return[s];s=s.nextElementSibling}return[]},focusableChildren(e){let t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(e=>!(0,r.isDisabled)(e)&&(0,r.isVisible)(e))},getSelectorFromElement(e){let t=i(e);return t&&o.findOne(t)?t:null},getElementFromSelector(e){let t=i(e);return t?o.findOne(t):null},getMultipleElementsFromSelector(e){let t=i(e);return t?o.find(t):[]}},a=o},"./node_modules/bootstrap/js/src/dropdown.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>R});var r=s("./node_modules/@popperjs/core/lib/index.js"),i=s("./node_modules/@popperjs/core/lib/popper.js"),o=s("./node_modules/bootstrap/js/src/base-component.js"),a=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),l=s("./node_modules/bootstrap/js/src/dom/manipulator.js"),d=s("./node_modules/bootstrap/js/src/dom/selector-engine.js"),c=s("./node_modules/bootstrap/js/src/util/index.js");let u="dropdown",h=".bs.dropdown",m=".data-api",f="ArrowDown",p=`hide${h}`,g=`hidden${h}`,_=`show${h}`,v=`shown${h}`,y=`click${h}${m}`,b=`keydown${h}${m}`,j=`keyup${h}${m}`,w="show",S='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',x=`${S}.${w}`,E=".dropdown-menu",A=(0,c.isRTL)()?"top-end":"top-start",C=(0,c.isRTL)()?"top-start":"top-end",k=(0,c.isRTL)()?"bottom-end":"bottom-start",$=(0,c.isRTL)()?"bottom-start":"bottom-end",T=(0,c.isRTL)()?"left-start":"right-start",M=(0,c.isRTL)()?"right-start":"left-start",O={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},I={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class N extends o.default{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=d.default.next(this._element,E)[0]||d.default.prev(this._element,E)[0]||d.default.findOne(E,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return O}static get DefaultType(){return I}static get NAME(){return u}toggle(){return this._isShown()?this.hide():this.show()}show(){if((0,c.isDisabled)(this._element)||this._isShown())return;let e={relatedTarget:this._element};if(!a.default.trigger(this._element,_,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(let e of[].concat(...document.body.children))a.default.on(e,"mouseover",c.noop);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(w),this._element.classList.add(w),a.default.trigger(this._element,v,e)}}hide(){if((0,c.isDisabled)(this._element)||!this._isShown())return;let e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!a.default.trigger(this._element,p,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(let e of[].concat(...document.body.children))a.default.off(e,"mouseover",c.noop);this._popper&&this._popper.destroy(),this._menu.classList.remove(w),this._element.classList.remove(w),this._element.setAttribute("aria-expanded","false"),l.default.removeDataAttribute(this._menu,"popper"),a.default.trigger(this._element,g,e),this._element.focus()}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!(0,c.isElement)(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw TypeError(`${u.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(void 0===r)throw TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;"parent"===this._config.reference?e=this._parent:(0,c.isElement)(this._config.reference)?e=(0,c.getElement)(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);let t=this._getPopperConfig();this._popper=i.createPopper(e,this._menu,t)}_isShown(){return this._menu.classList.contains(w)}_getPlacement(){let e=this._parent;if(e.classList.contains("dropend"))return T;if(e.classList.contains("dropstart"))return M;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";let t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?C:A:t?$:k}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){let{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){let e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(l.default.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...(0,c.execute)(this._config.popperConfig,[void 0,e])}}_selectMenuItem({key:e,target:t}){let s=d.default.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(e=>(0,c.isVisible)(e));s.length&&(0,c.getNextActiveElement)(s,t,e===f,!s.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){let t=N.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(2!==e.button&&("keyup"!==e.type||"Tab"===e.key))for(let t of d.default.find(x)){let s=N.getInstance(t);if(!s||!1===s._config.autoClose)continue;let r=e.composedPath(),i=r.includes(s._menu);if(r.includes(s._element)||"inside"===s._config.autoClose&&!i||"outside"===s._config.autoClose&&i||s._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;let o={relatedTarget:s._element};"click"===e.type&&(o.clickEvent=e),s._completeHide(o)}}static dataApiKeydownHandler(e){let t=/input|textarea/i.test(e.target.tagName),s="Escape"===e.key,r=["ArrowUp",f].includes(e.key);if(!r&&!s||t&&!s)return;e.preventDefault();let i=this.matches(S)?this:d.default.prev(this,S)[0]||d.default.next(this,S)[0]||d.default.findOne(S,e.delegateTarget.parentNode),o=N.getOrCreateInstance(i);if(r){e.stopPropagation(),o.show(),o._selectMenuItem(e);return}o._isShown()&&(e.stopPropagation(),o.hide(),i.focus())}}a.default.on(document,b,S,N.dataApiKeydownHandler),a.default.on(document,b,E,N.dataApiKeydownHandler),a.default.on(document,y,N.clearMenus),a.default.on(document,j,N.clearMenus),a.default.on(document,y,S,function(e){e.preventDefault(),N.getOrCreateInstance(this).toggle()}),(0,c.defineJQueryPlugin)(N);let R=N},"./node_modules/bootstrap/js/src/modal.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>$});var r=s("./node_modules/bootstrap/js/src/base-component.js"),i=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),o=s("./node_modules/bootstrap/js/src/dom/selector-engine.js"),a=s("./node_modules/bootstrap/js/src/util/backdrop.js"),l=s("./node_modules/bootstrap/js/src/util/component-functions.js"),d=s("./node_modules/bootstrap/js/src/util/focustrap.js"),c=s("./node_modules/bootstrap/js/src/util/index.js"),u=s("./node_modules/bootstrap/js/src/util/scrollbar.js");let h=".bs.modal",m=`hide${h}`,f=`hidePrevented${h}`,p=`hidden${h}`,g=`show${h}`,_=`shown${h}`,v=`resize${h}`,y=`click.dismiss${h}`,b=`mousedown.dismiss${h}`,j=`keydown.dismiss${h}`,w=`click${h}.data-api`,S="modal-open",x="show",E="modal-static",A={backdrop:!0,focus:!0,keyboard:!0},C={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class k extends r.default{constructor(e,t){super(e,t),this._dialog=o.default.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new u.default,this._addEventListeners()}static get Default(){return A}static get DefaultType(){return C}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||i.default.trigger(this._element,g,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(S),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){this._isShown&&!this._isTransitioning&&(i.default.trigger(this._element,m).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(x),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){i.default.off(window,h),i.default.off(this._dialog,h),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new a.default({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new d.default({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let t=o.default.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),(0,c.reflow)(this._element),this._element.classList.add(x),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,i.default.trigger(this._element,_,{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){i.default.on(this._element,j,e=>{if("Escape"===e.key){if(this._config.keyboard)return void this.hide();this._triggerBackdropTransition()}}),i.default.on(window,v,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),i.default.on(this._element,b,e=>{i.default.one(this._element,y,t=>{if(this._element===e.target&&this._element===t.target){if("static"===this._config.backdrop)return void this._triggerBackdropTransition();this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(S),this._resetAdjustments(),this._scrollBar.reset(),i.default.trigger(this._element,p)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(i.default.trigger(this._element,f).defaultPrevented)return;let e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(E)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(E),this._queueCallback(()=>{this._element.classList.remove(E),this._queueCallback(()=>{this._element.style.overflowY=t},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),s=t>0;if(s&&!e){let e=(0,c.isRTL)()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!s&&e){let e=(0,c.isRTL)()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){let s=k.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===s[e])throw TypeError(`No method named "${e}"`);s[e](t)}})}}i.default.on(document,w,'[data-bs-toggle="modal"]',function(e){let t=o.default.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),i.default.one(t,g,e=>{e.defaultPrevented||i.default.one(t,p,()=>{(0,c.isVisible)(this)&&this.focus()})});let s=o.default.findOne(".modal.show");s&&k.getInstance(s).hide(),k.getOrCreateInstance(t).toggle(this)}),(0,l.enableDismissTrigger)(k),(0,c.defineJQueryPlugin)(k);let $=k},"./node_modules/bootstrap/js/src/popover.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/bootstrap/js/src/tooltip.js"),i=s("./node_modules/bootstrap/js/src/util/index.js");let o={...r.default.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},a={...r.default.DefaultType,content:"(null|string|element|function)"};class l extends r.default{static get Default(){return o}static get DefaultType(){return a}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){let t=l.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw TypeError(`No method named "${e}"`);t[e]()}})}}(0,i.defineJQueryPlugin)(l);let d=l},"./node_modules/bootstrap/js/src/tooltip.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>S});var r=s("./node_modules/@popperjs/core/lib/index.js"),i=s("./node_modules/@popperjs/core/lib/popper.js"),o=s("./node_modules/bootstrap/js/src/base-component.js"),a=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),l=s("./node_modules/bootstrap/js/src/dom/manipulator.js"),d=s("./node_modules/bootstrap/js/src/util/index.js"),c=s("./node_modules/bootstrap/js/src/util/sanitizer.js"),u=s("./node_modules/bootstrap/js/src/util/template-factory.js");let h=new Set(["sanitize","allowList","sanitizeFn"]),m="fade",f="show",p=".modal",g="hide.bs.modal",_="hover",v="focus",y={AUTO:"auto",TOP:"top",RIGHT:(0,d.isRTL)()?"left":"right",BOTTOM:"bottom",LEFT:(0,d.isRTL)()?"right":"left"},b={allowList:c.DefaultAllowlist,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},j={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class w extends o.default{constructor(e,t){if(void 0===r)throw TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return b}static get DefaultType(){return j}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown())return void this._leave();this._enter()}}dispose(){clearTimeout(this._timeout),a.default.off(this._element.closest(p),g,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let e=a.default.trigger(this._element,this.constructor.eventName("show")),t=((0,d.findShadowRoot)(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();let s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));let{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(s),a.default.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(s),s.classList.add(f),"ontouchstart"in document.documentElement)for(let e of[].concat(...document.body.children))a.default.on(e,"mouseover",d.noop);this._queueCallback(()=>{a.default.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!a.default.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(f),"ontouchstart"in document.documentElement)for(let e of[].concat(...document.body.children))a.default.off(e,"mouseover",d.noop);this._activeTrigger.click=!1,this._activeTrigger[v]=!1,this._activeTrigger[_]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),a.default.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){let t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(m,f),t.classList.add(`bs-${this.constructor.NAME}-auto`);let s=(0,d.getUID)(this.constructor.NAME).toString();return t.setAttribute("id",s),this._isAnimated()&&t.classList.add(m),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new u.default({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(m)}_isShown(){return this.tip&&this.tip.classList.contains(f)}_createPopper(e){let t=y[(0,d.execute)(this._config.placement,[this,e,this._element]).toUpperCase()];return i.createPopper(this._element,e,this._getPopperConfig(t))}_getOffset(){let{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return(0,d.execute)(e,[this._element,this._element])}_getPopperConfig(e){let t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...(0,d.execute)(this._config.popperConfig,[void 0,t])}}_setListeners(){for(let e of this._config.trigger.split(" "))if("click"===e)a.default.on(this._element,this.constructor.eventName("click"),this._config.selector,e=>{this._initializeOnDelegatedTarget(e).toggle()});else if("manual"!==e){let t=e===_?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),s=e===_?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");a.default.on(this._element,t,this._config.selector,e=>{let t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?v:_]=!0,t._enter()}),a.default.on(this._element,s,this._config.selector,e=>{let t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?v:_]=t._element.contains(e.relatedTarget),t._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},a.default.on(this._element.closest(p),g,this._hideModalHandler)}_fixTitle(){let e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){let t=l.default.getDataAttributes(this._element);for(let e of Object.keys(t))h.has(e)&&delete t[e];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:(0,d.getElement)(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){let e={};for(let[t,s]of Object.entries(this._config))this.constructor.Default[t]!==s&&(e[t]=s);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){let t=w.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw TypeError(`No method named "${e}"`);t[e]()}})}}(0,d.defineJQueryPlugin)(w);let S=w},"./node_modules/bootstrap/js/src/util/backdrop.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),i=s("./node_modules/bootstrap/js/src/util/config.js"),o=s("./node_modules/bootstrap/js/src/util/index.js");let a="backdrop",l="show",d=`mousedown.bs.${a}`,c={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},u={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class h extends i.default{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return c}static get DefaultType(){return u}static get NAME(){return a}show(e){if(!this._config.isVisible)return void(0,o.execute)(e);this._append();let t=this._getElement();this._config.isAnimated&&(0,o.reflow)(t),t.classList.add(l),this._emulateAnimation(()=>{(0,o.execute)(e)})}hide(e){if(!this._config.isVisible)return void(0,o.execute)(e);this._getElement().classList.remove(l),this._emulateAnimation(()=>{this.dispose(),(0,o.execute)(e)})}dispose(){this._isAppended&&(r.default.off(this._element,d),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=(0,o.getElement)(e.rootElement),e}_append(){if(this._isAppended)return;let e=this._getElement();this._config.rootElement.append(e),r.default.on(e,d,()=>{(0,o.execute)(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){(0,o.executeAfterTransition)(e,this._getElement(),this._config.isAnimated)}}let m=h},"./node_modules/bootstrap/js/src/util/component-functions.js":function(e,t,s){"use strict";s.r(t),s.d(t,{enableDismissTrigger:()=>a});var r=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),i=s("./node_modules/bootstrap/js/src/dom/selector-engine.js"),o=s("./node_modules/bootstrap/js/src/util/index.js");let a=(e,t="hide")=>{let s=`click.dismiss${e.EVENT_KEY}`,a=e.NAME;r.default.on(document,s,`[data-bs-dismiss="${a}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),(0,o.isDisabled)(this))return;let r=i.default.getElementFromSelector(this)||this.closest(`.${a}`);e.getOrCreateInstance(r)[t]()})}},"./node_modules/bootstrap/js/src/util/config.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/bootstrap/js/src/dom/manipulator.js"),i=s("./node_modules/bootstrap/js/src/util/index.js");let o=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){let s=(0,i.isElement)(t)?r.default.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof s?s:{},...(0,i.isElement)(t)?r.default.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(let[s,r]of Object.entries(t)){let t=e[s],o=(0,i.isElement)(t)?"element":(0,i.toType)(t);if(!new RegExp(r).test(o))throw TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${r}".`)}}}},"./node_modules/bootstrap/js/src/util/focustrap.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>f});var r=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),i=s("./node_modules/bootstrap/js/src/dom/selector-engine.js"),o=s("./node_modules/bootstrap/js/src/util/config.js");let a=".bs.focustrap",l=`focusin${a}`,d=`keydown.tab${a}`,c="backward",u={autofocus:!0,trapElement:null},h={autofocus:"boolean",trapElement:"element"};class m extends o.default{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return u}static get DefaultType(){return h}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),r.default.off(document,a),r.default.on(document,l,e=>this._handleFocusin(e)),r.default.on(document,d,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,r.default.off(document,a))}_handleFocusin(e){let{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;let s=i.default.focusableChildren(t);0===s.length?t.focus():this._lastTabNavDirection===c?s[s.length-1].focus():s[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?c:"forward")}}let f=m},"./node_modules/bootstrap/js/src/util/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{defineJQueryPlugin:()=>j,execute:()=>w,executeAfterTransition:()=>S,findShadowRoot:()=>f,getElement:()=>u,getNextActiveElement:()=>x,getTransitionDurationFromElement:()=>l,getUID:()=>a,getjQuery:()=>_,isDisabled:()=>m,isElement:()=>c,isRTL:()=>b,isVisible:()=>h,noop:()=>p,onDOMContentLoaded:()=>y,parseSelector:()=>i,reflow:()=>g,toType:()=>o,triggerTransitionEnd:()=>d});let r="transitionend",i=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),e),o=e=>null==e?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),a=e=>{do e+=Math.floor(1e6*Math.random());while(document.getElementById(e));return e},l=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:s}=window.getComputedStyle(e),r=Number.parseFloat(t),i=Number.parseFloat(s);return r||i?(t=t.split(",")[0],s=s.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(s))*1e3):0},d=e=>{e.dispatchEvent(new Event(r))},c=e=>!!e&&"object"==typeof e&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),u=e=>c(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(i(e)):null,h=e=>{if(!c(e)||0===e.getClientRects().length)return!1;let t="visible"===getComputedStyle(e).getPropertyValue("visibility"),s=e.closest("details:not([open])");if(!s)return t;if(s!==e){let t=e.closest("summary");if(t&&t.parentNode!==s||null===t)return!1}return t},m=e=>!!(!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled"))||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),f=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){let t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?f(e.parentNode):null},p=()=>{},g=e=>{e.offsetHeight},_=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,v=[],y=e=>{"loading"===document.readyState?(v.length||document.addEventListener("DOMContentLoaded",()=>{for(let e of v)e()}),v.push(e)):e()},b=()=>"rtl"===document.documentElement.dir,j=e=>{y(()=>{let t=_();if(t){let s=e.NAME,r=t.fn[s];t.fn[s]=e.jQueryInterface,t.fn[s].Constructor=e,t.fn[s].noConflict=()=>(t.fn[s]=r,e.jQueryInterface)}})},w=(e,t=[],s=e)=>"function"==typeof e?e.call(...t):s,S=(e,t,s=!0)=>{if(!s)return void w(e);let i=l(t)+5,o=!1,a=({target:s})=>{s===t&&(o=!0,t.removeEventListener(r,a),w(e))};t.addEventListener(r,a),setTimeout(()=>{o||d(t)},i)},x=(e,t,s,r)=>{let i=e.length,o=e.indexOf(t);return -1===o?!s&&r?e[i-1]:e[0]:(o+=s?1:-1,r&&(o=(o+i)%i),e[Math.max(0,Math.min(o,i-1))])}},"./node_modules/bootstrap/js/src/util/sanitizer.js":function(e,t,s){"use strict";s.r(t),s.d(t,{DefaultAllowlist:()=>r,sanitizeHtml:()=>l});let r={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},i=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),o=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,a=(e,t)=>{let s=e.nodeName.toLowerCase();return t.includes(s)?!i.has(s)||!!o.test(e.nodeValue):t.filter(e=>e instanceof RegExp).some(e=>e.test(s))};function l(e,t,s){if(!e.length)return e;if(s&&"function"==typeof s)return s(e);let r=new window.DOMParser().parseFromString(e,"text/html");for(let e of[].concat(...r.body.querySelectorAll("*"))){let s=e.nodeName.toLowerCase();if(!Object.keys(t).includes(s)){e.remove();continue}let r=[].concat(...e.attributes),i=[].concat(t["*"]||[],t[s]||[]);for(let t of r)a(t,i)||e.removeAttribute(t.nodeName)}return r.body.innerHTML}},"./node_modules/bootstrap/js/src/util/scrollbar.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/bootstrap/js/src/dom/manipulator.js"),i=s("./node_modules/bootstrap/js/src/dom/selector-engine.js"),o=s("./node_modules/bootstrap/js/src/util/index.js");let a=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",l=".sticky-top",d="padding-right",c="margin-right",u=class{constructor(){this._element=document.body}getWidth(){let e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){let e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,d,t=>t+e),this._setElementAttributes(a,d,t=>t+e),this._setElementAttributes(l,c,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,d),this._resetElementAttributes(a,d),this._resetElementAttributes(l,c)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,s){let r=this.getWidth();this._applyManipulationCallback(e,e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+r)return;this._saveInitialAttribute(e,t);let i=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${s(Number.parseFloat(i))}px`)})}_saveInitialAttribute(e,t){let s=e.style.getPropertyValue(t);s&&r.default.setDataAttribute(e,t,s)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,e=>{let s=r.default.getDataAttribute(e,t);if(null===s)return void e.style.removeProperty(t);r.default.removeDataAttribute(e,t),e.style.setProperty(t,s)})}_applyManipulationCallback(e,t){if((0,o.isElement)(e))return void t(e);for(let s of i.default.find(e,this._element))t(s)}}},"./node_modules/bootstrap/js/src/util/template-factory.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/bootstrap/js/src/dom/selector-engine.js"),i=s("./node_modules/bootstrap/js/src/util/config.js"),o=s("./node_modules/bootstrap/js/src/util/sanitizer.js"),a=s("./node_modules/bootstrap/js/src/util/index.js");let l={allowList:o.DefaultAllowlist,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},d={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},c={entry:"(string|element|function|null)",selector:"(string|element)"};class u extends i.default{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return l}static get DefaultType(){return d}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){let e=document.createElement("div");for(let[t,s]of(e.innerHTML=this._maybeSanitize(this._config.template),Object.entries(this._config.content)))this._setContent(e,s,t);let t=e.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&t.classList.add(...s.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(let[t,s]of Object.entries(e))super._typeCheckConfig({selector:t,entry:s},c)}_setContent(e,t,s){let i=r.default.findOne(s,e);if(i){if(!(t=this._resolvePossibleFunction(t)))return void i.remove();if((0,a.isElement)(t))return void this._putElementInTemplate((0,a.getElement)(t),i);if(this._config.html){i.innerHTML=this._maybeSanitize(t);return}i.textContent=t}}_maybeSanitize(e){return this._config.sanitize?(0,o.sanitizeHtml)(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return(0,a.execute)(e,[void 0,this])}_putElementInTemplate(e,t){if(this._config.html){t.innerHTML="",t.append(e);return}t.textContent=e.textContent}}let h=u},"./node_modules/client-compress/dist/index.js":function(e){var t;window,e.exports=function(){var e=[function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadImageElement=function(e,t){return new Promise(function(s,r){e.addEventListener("load",function(){s(e)},!1),e.addEventListener("error",function(e){r(e)},!1),e.src=t})},t.resize=function(e,t,s,r){if(!s&&!r)return{currentWidth:e,currentHeight:t};var i=e/t,o=void 0,a=void 0;return i>s/r?a=(o=Math.min(e,s))/i:o=(a=Math.min(t,r))*i,{width:o,height:a}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base64ToFile=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg",s=window.atob(e),r=[],i=0;i<s.length;i++)r[i]=s.charCodeAt(i);return new window.Blob([new Uint8Array(r)],{type:t})},t.imageToCanvas=function(e,t,s,r){var i=document.createElement("canvas"),o=i.getContext("2d");if(i.width=t,i.height=s,!r||r>8)return o.drawImage(e,0,0,i.width,i.height),i;switch(r>4&&(i.width=s,i.height=t),r){case 2:o.translate(t,0),o.scale(-1,1);break;case 3:o.translate(t,s),o.rotate(Math.PI);break;case 4:o.translate(0,s),o.scale(1,-1);break;case 5:o.rotate(.5*Math.PI),o.scale(1,-1);break;case 6:o.rotate(.5*Math.PI),o.translate(0,-s);break;case 7:o.rotate(.5*Math.PI),o.translate(t,-s),o.scale(-1,1);break;case 8:o.rotate(-.5*Math.PI),o.translate(-t,0)}return r>4?o.drawImage(e,0,0,i.height,i.width):o.drawImage(e,0,0,i.width,i.height),i},t.canvasToBlob=function(e,t){return new Promise(function(s,r){e.toBlob(function(e){s(e)},"image/jpeg",t)})},t.size=function(e){return{kB:.001*e,MB:1e-6*e}},t.blobToBase64=function(e){return new Promise(function(t,s){var r=new window.FileReader;r.addEventListener("load",function(e){t(e.target.result)},!1),r.addEventListener("error",function(e){s(e)},!1),r.readAsDataURL(e)})}},function(e,t,s){e.exports=s(6)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractOrientation=function(e){return new Promise(function(t,s){var r=new window.FileReader;r.onload=function(e){var s=new DataView(e.target.result);65496!==s.getUint16(0,!1)&&t(-2);for(var r=s.byteLength,i=2;i<r;){var o=s.getUint16(i,!1);if(i+=2,65505===o){0x45786966!==s.getUint32(i+=2,!1)&&t(-1);var a=18761===s.getUint16(i+=6,!1);i+=s.getUint32(i+4,a);var l=s.getUint16(i,a);i+=2;for(var d=0;d<l;d++)274===s.getUint16(i+12*d,a)&&t(s.getUint16(i+12*d+8,a))}else{if(65280!=(65280&o))break;i+=s.getUint16(i,!1)}}t(-1)},r.readAsArrayBuffer(e.slice(0,65536))})}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(2),i=r&&r.__esModule?r:{default:r},o=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),a=s(3),l=s(0),d=s(1);function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,s){return function r(i,o){try{var a=t[i](o),l=a.value}catch(e){return void s(e)}if(!a.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}("next")})}}t.default=function(){var e,t;function s(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,s),this.data=e,this.name=e.name,this.type=e.type,this.size=e.size}return o(s,[{key:"setData",value:function(e){this.data=e,this.size=e.size,this.type=e.type}},{key:"_calculateOrientation",value:(e=c(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.extractOrientation)(this.data);case 2:t=e.sent,this.orientation=t;case 4:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"load",value:(t=c(i.default.mark(function e(){var t,s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._calculateOrientation();case 2:return t=URL.createObjectURL(this.data),s=new window.Image,e.next=6,(0,l.loadImageElement)(s,t);case 6:URL.revokeObjectURL(t),this._img=s,this.width=s.naturalWidth,this.height=s.naturalHeight;case 10:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"getCanvas",value:function(e,t,s){return void 0!==s?(0,d.imageToCanvas)(this._img,e,t,s):(0,d.imageToCanvas)(this._img,e,t,this.orientation)}}]),s}(),e.exports=t.default},function(e,t){!function(t){"use strict";var s,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag",c="object"==typeof e,u=t.regeneratorRuntime;if(u)c&&(e.exports=u);else{(u=t.regeneratorRuntime=c?e.exports:{}).wrap=j;var h="suspendedStart",m="suspendedYield",f="executing",p="completed",g={},_={};_[a]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(M([])));y&&y!==r&&i.call(y,a)&&(_=y);var b=E.prototype=S.prototype=Object.create(_);x.prototype=b.constructor=E,E.constructor=x,E[d]=x.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,d in e||(e[d]="GeneratorFunction")),e.prototype=Object.create(b),e},u.awrap=function(e){return{__await:e}},A(C.prototype),C.prototype[l]=function(){return this},u.AsyncIterator=C,u.async=function(e,t,s,r){var i=new C(j(e,t,s,r));return u.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},A(b),b[d]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var s in e)t.push(s);return t.reverse(),function s(){for(;t.length;){var r=t.pop();if(r in e)return s.value=r,s.done=!1,s}return s.done=!0,s}},u.values=M,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach($),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=s)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return l.type="throw",l.arg=e,t.next=r,i&&(t.method="next",t.arg=s),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var d=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(d&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(d){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var s=this.tryEntries.length-1;s>=0;--s){var r=this.tryEntries[s];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var s=this.tryEntries[t];if(s.finallyLoc===e)return this.complete(s.completion,s.afterLoc),$(s),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var s=this.tryEntries[t];if(s.tryLoc===e){var r=s.completion;if("throw"===r.type){var i=r.arg;$(s)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:M(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=s),g}}}function j(e,t,r,i){var o,a=Object.create((t&&t.prototype instanceof S?t:S).prototype),l=new T(i||[]);return o=h,a._invoke=function(t,i){if(o===f)throw Error("Generator is already running");if(o===p){if("throw"===t)throw i;return O()}for(l.method=t,l.arg=i;;){var a=l.delegate;if(a){var d=function e(t,r){var i=t.iterator[r.method];if(i===s){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=s,e(t,r),"throw"===r.method))return g;r.method="throw",r.arg=TypeError("The iterator does not provide a 'throw' method")}return g}var o=w(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=s),r.delegate=null,g):a:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,g)}(a,l);if(d){if(d===g)continue;return d}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(o===h)throw o=p,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);o=f;var c=w(e,r,l);if("normal"===c.type){if(o=l.done?p:m,c.arg===g)continue;return{value:c.arg,done:l.done}}"throw"===c.type&&(o=p,l.method="throw",l.arg=c.arg)}},a}function w(e,t,s){try{return{type:"normal",arg:e.call(t,s)}}catch(e){return{type:"throw",arg:e}}}function S(){}function x(){}function E(){}function A(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function C(e){var t;this._invoke=function(s,r){function o(){return new Promise(function(t,o){!function t(s,r,o,a){var l=w(e[s],e,r);if("throw"!==l.type){var d=l.arg,c=d.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(c).then(function(e){d.value=e,o(d)},a)}a(l.arg)}(s,r,t,o)})}return t=t?t.then(o,o):o()}}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function $(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=s,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:s,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,s){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=s(5),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(s(2)),i=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}(s(1)),a=s(0),l=d(s(4));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,s){return function r(i,o){try{var a=t[i](o),l=a.value}catch(e){return void s(e)}if(!a.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}("next")})}}t.default=function(){var e,t,s,d,u,h,m;function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,f),this.setOptions(e)}return i(f,[{key:"setOptions",value:function(e){var t={targetSize:1/0,quality:.75,minQuality:.5,qualityStepSize:.1,maxWidth:1920,maxHeight:1920,resize:!0,throwIfSizeNotReached:!1,autoRotate:!0},s=new Proxy(e,{get:function(e,s){return s in e?e[s]:t[s]}});this.options=s}},{key:"_compressFile",value:(e=c(r.default.mark(function e(t){var s,i;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=new l.default(t),(i={}).start=window.performance.now(),i.quality=this.options.quality,i.startType=s.type,e.next=7,s.load();case 7:return e.next=9,this._compressImage(s,i);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"_compressImage",value:(t=c(r.default.mark(function e(t,s){var i,l,d,c,u;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.startWidth=t.width,s.startHeight=t.height,i=void 0,l=void 0,this.options.resize?(i=(d=(0,a.resize)(t.width,t.height,this.options.maxWidth,this.options.maxHeight)).width,l=d.height):(i=t.width,l=t.height),s.endWidth=i,s.endHeight=l,c=this.doAutoRotation?void 0:1,u=t.getCanvas(i,l,c),s.iterations=0,s.startSizeMB=o.size(t.size).MB,e.next=12,this._loopCompression(u,t,s);case 12:return s.endSizeMB=o.size(t.size).MB,s.sizeReducedInPercent=(s.startSizeMB-s.endSizeMB)/s.startSizeMB*100,s.end=window.performance.now(),s.elapsedTimeInSeconds=(s.end-s.start)/1e3,s.endType=t.type,e.abrupt("return",{photo:t,info:s});case 18:case"end":return e.stop()}},e,this)})),function(e,s){return t.apply(this,arguments)})},{key:"_loopCompression",value:(s=c(r.default.mark(function e(t,s,i){var a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.iterations++,e.t0=s,e.next=4,o.canvasToBlob(t,i.quality);case 4:if(e.t1=e.sent,e.t0.setData.call(e.t0,e.t1),1==i.iterations&&(s.width=i.endWidth,s.height=i.endHeight),!(o.size(s.size).MB>this.options.targetSize)){e.next=24;break}if(!(i.quality.toFixed(10)-.1<this.options.minQuality)){e.next=18;break}if(a="Couldn't compress image to target size while maintaining quality.\n        Target size: "+this.options.targetSize+"\n        Actual size: "+o.size(s.size).MB,this.options.throwIfSizeNotReached){e.next=14;break}console.error(a),e.next=15;break;case 14:throw Error(a);case 15:case 24:return e.abrupt("return");case 18:return i.quality-=this.options.qualityStepSize,e.next=21,this._loopCompression(t,s,i);case 21:return e.abrupt("return",e.sent);case 22:e.next=25;break;case 25:case"end":return e.stop()}},e,this)})),function(e,t,r){return s.apply(this,arguments)})},{key:"setAutoRotate",value:(d=c(r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.automaticRotationFeatureTest();case 2:t=e.sent,this.doAutoRotation=this.options.autoRotate&&!t;case 4:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)})},{key:"compress",value:(u=c(r.default.mark(function e(t){var s=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setAutoRotate();case 2:return e.abrupt("return",Promise.all(t.map(function(e){return s._compressFile(e)})));case 3:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})}],[{key:"blobToBase64",value:(h=c(r.default.mark(function e(){var t=arguments;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.blobToBase64.apply(o,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return h.apply(this,arguments)})},{key:"loadImageElement",value:(m=c(r.default.mark(function e(){var t=arguments;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.loadImageElement.apply(void 0,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},{key:"automaticRotationFeatureTest",value:function(){return new Promise(function(e){var t=new Image;t.onload=function(){e(1===t.width&&2===t.height)},t.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}}]),f}(),e.exports=t.default}],t={};function s(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=7)}()},"./node_modules/css-loader/dist/runtime/api.js":function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var s="",r=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),r&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),r&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s}).join("")},t.i=function(e,s,r,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var l=0;l<this.length;l++){var d=this[l][0];null!=d&&(a[d]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&a[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),s&&(u[2]&&(u[1]="@media ".concat(u[2]," {").concat(u[1],"}")),u[2]=s),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},"./node_modules/css-loader/dist/runtime/sourceMaps.js":function(e){"use strict";e.exports=function(e){var t=e[1],s=e[3];if(!s)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(s))));return[t].concat(["/*# ".concat("sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r)," */")]).join("\n")}return[t].join("\n")}},"./node_modules/dayjs/dayjs.min.js":function(e){e.exports=function(){"use strict";var e="millisecond",t="second",s="minute",r="hour",i="week",o="month",a="quarter",l="year",d="date",c="Invalid Date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m=function(e,t,s){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(s)+e},f="en",p={};p[f]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],s=e%100;return"["+e+(t[(s-20)%10]||t[s]||t[0])+"]"}};var g="$isDayjsObject",_=function(e){return e instanceof j||!(!e||!e[g])},v=function e(t,s,r){var i;if(!t)return f;if("string"==typeof t){var o=t.toLowerCase();p[o]&&(i=o),s&&(p[o]=s,i=o);var a=t.split("-");if(!i&&a.length>1)return e(a[0])}else{var l=t.name;p[l]=t,i=l}return!r&&i&&(f=i),i||!r&&f},y=function(e,t){if(_(e))return e.clone();var s="object"==typeof t?t:{};return s.date=e,s.args=arguments,new j(s)},b={s:m,z:function(e){var t=-e.utcOffset(),s=Math.abs(t);return(t<=0?"+":"-")+m(Math.floor(s/60),2,"0")+":"+m(s%60,2,"0")},m:function e(t,s){if(t.date()<s.date())return-e(s,t);var r=12*(s.year()-t.year())+(s.month()-t.month()),i=t.clone().add(r,o),a=s-i<0,l=t.clone().add(r+(a?-1:1),o);return+(-(r+(s-i)/(a?i-l:l-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(c){return({M:o,y:l,w:i,d:"day",D:d,h:r,m:s,s:t,ms:e,Q:a})[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};b.l=v,b.i=_,b.w=function(e,t){return y(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var j=function(){function m(e){this.$L=v(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[g]=!0}var f=m.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,s=e.utc;if(null===t)return new Date(NaN);if(b.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(u);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return s?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return b},f.isValid=function(){return this.$d.toString()!==c},f.isSame=function(e,t){var s=y(e);return this.startOf(t)<=s&&s<=this.endOf(t)},f.isAfter=function(e,t){return y(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<y(e)},f.$g=function(e,t,s){return b.u(e)?this[t]:this.set(s,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,a){var c=this,u=!!b.u(a)||a,h=b.p(e),m=function(e,t){var s=b.w(c.$u?Date.UTC(c.$y,t,e):new Date(c.$y,t,e),c);return u?s:s.endOf("day")},f=function(e,t){return b.w(c.toDate()[e].apply(c.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),c)},p=this.$W,g=this.$M,_=this.$D,v="set"+(this.$u?"UTC":"");switch(h){case l:return u?m(1,0):m(31,11);case o:return u?m(1,g):m(0,g+1);case i:var y=this.$locale().weekStart||0,j=(p<y?p+7:p)-y;return m(u?_-j:_+(6-j),g);case"day":case d:return f(v+"Hours",0);case r:return f(v+"Minutes",1);case s:return f(v+"Seconds",2);case t:return f(v+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(i,a){var c,u=b.p(i),h="set"+(this.$u?"UTC":""),m=((c={}).day=h+"Date",c[d]=h+"Date",c[o]=h+"Month",c[l]=h+"FullYear",c[r]=h+"Hours",c[s]=h+"Minutes",c[t]=h+"Seconds",c[e]=h+"Milliseconds",c)[u],f="day"===u?this.$D+(a-this.$W):a;if(u===o||u===l){var p=this.clone().set(d,1);p.$d[m](f),p.init(),this.$d=p.set(d,Math.min(this.$D,p.daysInMonth())).$d}else m&&this.$d[m](f);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[b.p(e)]()},f.add=function(e,a){var d,c=this;e=Number(e);var u=b.p(a),h=function(t){var s=y(c);return b.w(s.date(s.date()+Math.round(t*e)),c)};if(u===o)return this.set(o,this.$M+e);if(u===l)return this.set(l,this.$y+e);if("day"===u)return h(1);if(u===i)return h(7);var m=((d={})[s]=6e4,d[r]=36e5,d[t]=1e3,d)[u]||1,f=this.$d.getTime()+e*m;return b.w(f,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this,s=this.$locale();if(!this.isValid())return s.invalidDate||c;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=b.z(this),o=this.$H,a=this.$m,l=this.$M,d=s.weekdays,u=s.months,m=s.meridiem,f=function(e,s,i,o){return e&&(e[s]||e(t,r))||i[s].slice(0,o)},p=function(e){return b.s(o%12||12,e,"0")},g=m||function(e,t,s){var r=e<12?"AM":"PM";return s?r.toLowerCase():r};return r.replace(h,function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return b.s(t.$y,4,"0");case"M":return l+1;case"MM":return b.s(l+1,2,"0");case"MMM":return f(s.monthsShort,l,u,3);case"MMMM":return f(u,l);case"D":return t.$D;case"DD":return b.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return f(s.weekdaysMin,t.$W,d,2);case"ddd":return f(s.weekdaysShort,t.$W,d,3);case"dddd":return d[t.$W];case"H":return String(o);case"HH":return b.s(o,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return g(o,a,!0);case"A":return g(o,a,!1);case"m":return String(a);case"mm":return b.s(a,2,"0");case"s":return String(t.$s);case"ss":return b.s(t.$s,2,"0");case"SSS":return b.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")})},f.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},f.diff=function(e,d,c){var u,h=this,m=b.p(d),f=y(e),p=(f.utcOffset()-this.utcOffset())*6e4,g=this-f,_=function(){return b.m(h,f)};switch(m){case l:u=_()/12;break;case o:u=_();break;case a:u=_()/3;break;case i:u=(g-p)/6048e5;break;case"day":u=(g-p)/864e5;break;case r:u=g/36e5;break;case s:u=g/6e4;break;case t:u=g/1e3;break;default:u=g}return c?u:b.a(u)},f.daysInMonth=function(){return this.endOf(o).$D},f.$locale=function(){return p[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var s=this.clone(),r=v(e,t,!0);return r&&(s.$L=r),s},f.clone=function(){return b.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},m}(),w=j.prototype;return y.prototype=w,[["$ms",e],["$s",t],["$m",s],["$H",r],["$W","day"],["$M",o],["$y",l],["$D",d]].forEach(function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),y.extend=function(e,t){return e.$i||(e(t,j,y),e.$i=!0),y},y.locale=v,y.isDayjs=_,y.unix=function(e){return y(1e3*e)},y.en=p[f],y.Ls=p,y.p={},y}()},"./node_modules/dayjs/plugin/advancedFormat.js":function(e){e.exports=function(e,t){var s=t.prototype,r=s.format;s.format=function(e){var t=this,s=this.$locale();if(!this.isValid())return r.bind(this)(e);var i=this.$utils(),o=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return s.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return s.ordinal(t.week(),"W");case"w":case"ww":return i.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return i.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return i.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}});return r.bind(this)(o)}}},"./node_modules/favico.js-slevomat/favico.js":function(e){!function(){var t=function(e){"use strict";e=e||{};var t,s,r,i,o,a,l,d,c,u,h,m,f,p,g,_={bgColor:"#d00",textColor:"#fff",fontFamily:"sans-serif",fontStyle:"bold",type:"circle",position:"down",animation:"slide",elementId:!1,element:null,dataUrl:!1,win:window};(m={}).ff="undefined"!=typeof InstallTrigger,m.chrome=!!window.chrome,m.opera=!!window.opera||navigator.userAgent.indexOf("Opera")>=0,m.ie=!1,m.safari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,m.supported=m.chrome||m.ff||m.opera;var v=[];h=function(){},d=!1;var y={};y.ready=function(){d=!0,y.reset(),h()},y.reset=function(){d&&(v=[],c=!1,u=!1,a.clearRect(0,0,i,r),a.drawImage(l,0,0,i,r),w.setIcon(o),window.clearTimeout(f),window.clearTimeout(p))},y.start=function(){if(d&&!u){var e=function(){c=v[0],u=!1,v.length>0&&(v.shift(),y.start())};if(v.length>0){u=!0;var s=function(){["type","animation","bgColor","textColor","fontFamily","fontStyle"].forEach(function(e){e in v[0].options&&(t[e]=v[0].options[e])}),E.run(v[0].options,function(){e()},!1)};c?E.run(c.options,function(){s()},!0):s()}}};var b={},j=function(e){return e.n="number"==typeof e.n?Math.abs(0|e.n):e.n,e.x=i*e.x,e.y=r*e.y,e.w=i*e.w,e.h=r*e.h,e.len=(""+e.n).length,e};b.circle=function(e){e=j(e);var s=!1;2===e.len?(e.x=e.x-.4*e.w,e.w=1.4*e.w,s=!0):e.len>=3&&(e.x=e.x-.65*e.w,e.w=1.65*e.w,s=!0),a.clearRect(0,0,i,r),a.drawImage(l,0,0,i,r),a.beginPath(),a.font=t.fontStyle+" "+Math.floor(e.h*(e.n>99?.85:1))+"px "+t.fontFamily,a.textAlign="center",s?(a.moveTo(e.x+e.w/2,e.y),a.lineTo(e.x+e.w-e.h/2,e.y),a.quadraticCurveTo(e.x+e.w,e.y,e.x+e.w,e.y+e.h/2),a.lineTo(e.x+e.w,e.y+e.h-e.h/2),a.quadraticCurveTo(e.x+e.w,e.y+e.h,e.x+e.w-e.h/2,e.y+e.h),a.lineTo(e.x+e.h/2,e.y+e.h),a.quadraticCurveTo(e.x,e.y+e.h,e.x,e.y+e.h-e.h/2),a.lineTo(e.x,e.y+e.h/2),a.quadraticCurveTo(e.x,e.y,e.x+e.h/2,e.y)):a.arc(e.x+e.w/2,e.y+e.h/2,e.h/2,0,2*Math.PI),a.fillStyle="rgba("+t.bgColor.r+","+t.bgColor.g+","+t.bgColor.b+","+e.o+")",a.fill(),a.closePath(),a.beginPath(),a.stroke(),a.fillStyle="rgba("+t.textColor.r+","+t.textColor.g+","+t.textColor.b+","+e.o+")","number"==typeof e.n&&e.n>999?a.fillText((e.n>9999?9:Math.floor(e.n/1e3))+"k+",Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.2*e.h)):a.fillText(e.n,Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.15*e.h)),a.closePath()},b.rectangle=function(e){e=j(e);2===e.len?(e.x=e.x-.4*e.w,e.w=1.4*e.w):e.len>=3&&(e.x=e.x-.65*e.w,e.w=1.65*e.w),a.clearRect(0,0,i,r),a.drawImage(l,0,0,i,r),a.beginPath(),a.font=t.fontStyle+" "+Math.floor(e.h*(e.n>99?.9:1))+"px "+t.fontFamily,a.textAlign="center",a.fillStyle="rgba("+t.bgColor.r+","+t.bgColor.g+","+t.bgColor.b+","+e.o+")",a.fillRect(e.x,e.y,e.w,e.h),a.fillStyle="rgba("+t.textColor.r+","+t.textColor.g+","+t.textColor.b+","+e.o+")","number"==typeof e.n&&e.n>999?a.fillText((e.n>9999?9:Math.floor(e.n/1e3))+"k+",Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.2*e.h)):a.fillText(e.n,Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.15*e.h)),a.closePath()};var w={};function S(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,s,r){return t+t+s+s+r+r});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return!!t&&{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}}function x(e,t){var s,r={};for(s in e)r[s]=e[s];for(s in t)r[s]=t[s];return r}w.getIcons=function(){var e=[];return t.element?e=[t.element]:t.elementId?(e=[g.getElementById(t.elementId)])[0].setAttribute("href",e[0].getAttribute("src")):0===(e=function(){for(var e=[],t=g.getElementsByTagName("head")[0].getElementsByTagName("link"),s=0;s<t.length;s++)/(^|\s)icon(\s|$)/i.test(t[s].getAttribute("rel"))&&e.push(t[s]);return e}()).length&&((e=[g.createElement("link")])[0].setAttribute("rel","icon"),g.getElementsByTagName("head")[0].appendChild(e[0])),e.forEach(function(e){e.setAttribute("type","image/png")}),e},w.setIcon=function(e){var t=e.toDataURL("image/png");w.setIconSrc(t)},w.setIconSrc=function(e){if(t.dataUrl&&t.dataUrl(e),t.element)t.element.setAttribute("href",e),t.element.setAttribute("src",e);else if(t.elementId){var r=g.getElementById(t.elementId);r.setAttribute("href",e),r.setAttribute("src",e)}else if(m.ff||m.opera){var i=s[s.length-1],o=g.createElement("link");s=[o],m.opera&&o.setAttribute("rel","icon"),o.setAttribute("rel","icon"),o.setAttribute("type","image/png"),g.getElementsByTagName("head")[0].appendChild(o),o.setAttribute("href",e),i.parentNode&&i.parentNode.removeChild(i)}else s.forEach(function(t){t.setAttribute("href",e)})};var E={};return E.duration=40,E.types={},E.types.fade=[{x:.4,y:.4,w:.6,h:.6,o:0},{x:.4,y:.4,w:.6,h:.6,o:.1},{x:.4,y:.4,w:.6,h:.6,o:.2},{x:.4,y:.4,w:.6,h:.6,o:.3},{x:.4,y:.4,w:.6,h:.6,o:.4},{x:.4,y:.4,w:.6,h:.6,o:.5},{x:.4,y:.4,w:.6,h:.6,o:.6},{x:.4,y:.4,w:.6,h:.6,o:.7},{x:.4,y:.4,w:.6,h:.6,o:.8},{x:.4,y:.4,w:.6,h:.6,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],E.types.none=[{x:.4,y:.4,w:.6,h:.6,o:1}],E.types.pop=[{x:1,y:1,w:0,h:0,o:1},{x:.9,y:.9,w:.1,h:.1,o:1},{x:.8,y:.8,w:.2,h:.2,o:1},{x:.7,y:.7,w:.3,h:.3,o:1},{x:.6,y:.6,w:.4,h:.4,o:1},{x:.5,y:.5,w:.5,h:.5,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],E.types.popFade=[{x:.75,y:.75,w:0,h:0,o:0},{x:.65,y:.65,w:.1,h:.1,o:.2},{x:.6,y:.6,w:.2,h:.2,o:.4},{x:.55,y:.55,w:.3,h:.3,o:.6},{x:.5,y:.5,w:.4,h:.4,o:.8},{x:.45,y:.45,w:.5,h:.5,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],E.types.slide=[{x:.4,y:1,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.8,w:.6,h:.6,o:1},{x:.4,y:.7,w:.6,h:.6,o:1},{x:.4,y:.6,w:.6,h:.6,o:1},{x:.4,y:.5,w:.6,h:.6,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],E.run=function(e,s,r,i){var a=E.types[g.hidden||g.msHidden||g.webkitHidden||g.mozHidden?"none":t.animation];if(i=!0===r?void 0!==i?i:a.length-1:void 0!==i?i:0,s=s||function(){},!(i<a.length)||!(i>=0))return void s();b[t.type](x(e,a[i])),f=setTimeout(function(){r?i-=1:i+=1,E.run(e,s,r,i)},E.duration),w.setIcon(o)},!function(){(t=x(_,e)).bgColor=S(t.bgColor),t.textColor=S(t.textColor),t.position=t.position.toLowerCase(),t.animation=E.types[""+t.animation]?t.animation:_.animation,g=t.win.document;var d=t.position.indexOf("up")>-1,c=t.position.indexOf("left")>-1;if(d||c)for(var u in E.types)for(var h=0;h<E.types[u].length;h++){var m=E.types[u][h];d&&(m.y<.6?m.y=m.y-.4:m.y=m.y-2*m.y+(1-m.w)),c&&(m.x<.6?m.x=m.x-.4:m.x=m.x-2*m.x+(1-m.h)),E.types[u][h]=m}t.type=b[""+t.type]?t.type:_.type,s=w.getIcons(),o=document.createElement("canvas"),l=document.createElement("img");var f=s[s.length-1];f.hasAttribute("href")?(l.setAttribute("crossOrigin","anonymous"),l.onload=function(){r=l.height>0?l.height:32,i=l.width>0?l.width:32,o.height=r,o.width=i,a=o.getContext("2d"),y.ready()},l.setAttribute("src",f.getAttribute("href"))):(r=32,i=32,l.height=r,l.width=i,o.height=r,o.width=i,a=o.getContext("2d"),y.ready())}(),{badge:function(e,t){t=("string"==typeof t?{animation:t}:t)||{},h=function(){try{if("number"==typeof e?e>0:""!==e){var s={type:"badge",options:{n:e}};if("animation"in t&&E.types[""+t.animation]&&(s.options.animation=""+t.animation),"type"in t&&b[""+t.type]&&(s.options.type=""+t.type),["bgColor","textColor"].forEach(function(e){e in t&&(s.options[e]=S(t[e]))}),["fontStyle","fontFamily"].forEach(function(e){e in t&&(s.options[e]=t[e])}),v.push(s),v.length>100)throw Error("Too many badges requests in queue.");y.start()}else y.reset()}catch(e){throw Error("Error setting badge. Message: "+e.message)}},d&&h()},setOpt:function(e,s){var r=e;(null!=s||"[object Object]"!=Object.prototype.toString.call(e))&&((r={})[e]=s);for(var i=Object.keys(r),o=0;o<i.length;o++)"bgColor"==i[o]||"textColor"==i[o]?t[i[o]]=S(r[i[o]]):t[i[o]]=r[i[o]];v.push(c),y.start()},reset:y.reset,browser:{supported:m.supported}}};"undefined"!=typeof define&&define.amd?define([],function(){return t}):e.exports?e.exports=t:this.Favico=t}()},"./node_modules/gifuct-js/lib/deinterlace.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deinterlace=void 0,t.deinterlace=function(e,t){for(var s=Array(e.length),r=e.length/t,i=[0,4,2,1],o=[8,8,4,2],a=0,l=0;l<4;l++)for(var d=i[l];d<r;d+=o[l])!function(r,i){var o=e.slice(i*t,(i+1)*t);s.splice.apply(s,[r*t,t].concat(o))}(d,a),a++;return s}},"./node_modules/gifuct-js/lib/index.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decompressFrames=t.decompressFrame=t.parseGIF=void 0;var r,i=(r=s("./node_modules/js-binary-schema-parser/lib/schemas/gif.js"))&&r.__esModule?r:{default:r},o=s("./node_modules/js-binary-schema-parser/lib/index.js"),a=s("./node_modules/js-binary-schema-parser/lib/parsers/uint8.js"),l=s("./node_modules/gifuct-js/lib/deinterlace.js"),d=s("./node_modules/gifuct-js/lib/lzw.js");t.parseGIF=function(e){var t=new Uint8Array(e);return(0,o.parse)((0,a.buildStream)(t),i.default)};var c=function(e){for(var t=e.pixels.length,s=new Uint8ClampedArray(4*t),r=0;r<t;r++){var i=4*r,o=e.pixels[r],a=e.colorTable[o]||[0,0,0];s[i]=a[0],s[i+1]=a[1],s[i+2]=a[2],s[i+3]=255*(o!==e.transparentIndex)}return s},u=function(e,t,s){if(!e.image)return void console.warn("gif frame does not have associated image.");var r=e.image,i=r.descriptor.width*r.descriptor.height,o=(0,d.lzw)(r.data.minCodeSize,r.data.blocks,i);r.descriptor.lct.interlaced&&(o=(0,l.deinterlace)(o,r.descriptor.width));var a={pixels:o,dims:{top:e.image.descriptor.top,left:e.image.descriptor.left,width:e.image.descriptor.width,height:e.image.descriptor.height}};return r.descriptor.lct&&r.descriptor.lct.exists?a.colorTable=r.lct:a.colorTable=t,e.gce&&(a.delay=10*(e.gce.delay||10),a.disposalType=e.gce.extras.disposal,e.gce.extras.transparentColorGiven&&(a.transparentIndex=e.gce.transparentColorIndex)),s&&(a.patch=c(a)),a};t.decompressFrame=u,t.decompressFrames=function(e,t){return e.frames.filter(function(e){return e.image}).map(function(s){return u(s,e.gct,t)})}},"./node_modules/gifuct-js/lib/lzw.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lzw=void 0,t.lzw=function(e,t,s){var r,i,o,a,l,d,c,u,h,m,f,p,g,_,v,y=Array(s),b=Array(4096),j=Array(4096),w=Array(4097);for(u=0,l=(i=1<<e)+1,r=i+2,c=-1,o=(1<<(a=e+1))-1;u<i;u++)b[u]=0,j[u]=u;for(h=0,m=f=p=g=_=v=0;h<s;){if(0===g){if(f<a){m+=t[v]<<f,f+=8,v++;continue}if(u=m&o,m>>=a,f-=a,u>r||u==l)break;if(u==i){o=(1<<(a=e+1))-1,r=i+2,c=-1;continue}if(-1==c){w[g++]=j[u],c=u,p=u;continue}for(d=u,u==r&&(w[g++]=p,u=c);u>i;)w[g++]=j[u],u=b[u];p=255&j[u],w[g++]=p,r<4096&&(b[r]=c,j[r]=p,(++r&o)==0&&r<4096&&(a++,o+=r)),c=d}g--,y[_++]=w[g],h++}for(h=_;h<s;h++)y[h]=0;return y}},"./node_modules/jed/jed.js":function(e,t){!function(s,r){var i,o,a=Array.prototype,l=Object.prototype,d=a.slice,c=l.hasOwnProperty,u=a.forEach,h={},m={forEach:function(e,t,s){var r,i,o;if(null!==e){if(u&&e.forEach===u)e.forEach(t,s);else if(e.length===+e.length){for(r=0,i=e.length;r<i;r++)if(r in e&&t.call(s,e[r],r,e)===h)return}else for(o in e)if(c.call(e,o)&&t.call(s,e[o],o,e)===h)return}},extend:function(e){return this.forEach(d.call(arguments,1),function(t){for(var s in t)e[s]=t[s]}),e}},f=function(e){if(this.defaults={locale_data:{messages:{"":{domain:"messages",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}}},domain:"messages",debug:!1},this.options=m.extend({},this.defaults,e),this.textdomain(this.options.domain),e.domain&&!this.options.locale_data[this.options.domain])throw Error("Text domain set to non-existent domain: `"+e.domain+"`")};function p(e){return f.PF.compile(e||"nplurals=2; plural=(n != 1);")}function g(e,t){this._key=e,this._i18n=t}f.context_delimiter="\x04",m.extend(g.prototype,{onDomain:function(e){return this._domain=e,this},withContext:function(e){return this._context=e,this},ifPlural:function(e,t){return this._val=e,this._pkey=t,this},fetch:function(e){return"[object Array]"!=({}).toString.call(e)&&(e=[].slice.call(arguments,0)),(e&&e.length?f.sprintf:function(e){return e})(this._i18n.dcnpgettext(this._domain,this._context,this._key,this._pkey,this._val),e)}}),m.extend(f.prototype,{translate:function(e){return new g(e,this)},textdomain:function(e){if(!e)return this._textdomain;this._textdomain=e},gettext:function(e){return this.dcnpgettext.call(this,r,r,e)},dgettext:function(e,t){return this.dcnpgettext.call(this,e,r,t)},dcgettext:function(e,t){return this.dcnpgettext.call(this,e,r,t)},ngettext:function(e,t,s){return this.dcnpgettext.call(this,r,r,e,t,s)},dngettext:function(e,t,s,i){return this.dcnpgettext.call(this,e,r,t,s,i)},dcngettext:function(e,t,s,i){return this.dcnpgettext.call(this,e,r,t,s,i)},pgettext:function(e,t){return this.dcnpgettext.call(this,r,e,t)},dpgettext:function(e,t,s){return this.dcnpgettext.call(this,e,t,s)},dcpgettext:function(e,t,s){return this.dcnpgettext.call(this,e,t,s)},npgettext:function(e,t,s,i){return this.dcnpgettext.call(this,r,e,t,s,i)},dnpgettext:function(e,t,s,r,i){return this.dcnpgettext.call(this,e,t,s,r,i)},dcnpgettext:function(e,t,s,r,i){if(r=r||s,e=e||this._textdomain,!this.options)return(a=new f).dcnpgettext.call(a,void 0,void 0,s,r,i);if(!this.options.locale_data)throw Error("No locale data provided.");if(!this.options.locale_data[e])throw Error("Domain `"+e+"` was not found.");if(!this.options.locale_data[e][""])throw Error("No locale meta information provided.");if(!s)throw Error("No translation key found.");var o,a,l,d,c=t?t+f.context_delimiter+s:s,u=this.options.locale_data,h=u[e],m=(u.messages||this.defaults.locale_data.messages)[""],g=h[""].plural_forms||h[""]["Plural-Forms"]||h[""]["plural-forms"]||m.plural_forms||m["Plural-Forms"]||m["plural-forms"];if(void 0===i)o=0;else{if("number"!=typeof i&&isNaN(i=parseInt(i,10)))throw Error("The number that was passed in is not a number.");o=p(g)(i)}if(!h)throw Error("No domain named `"+e+"` could be found.");return(l=h[c])&&!(o>l.length)?(d=l[o])?d:(d=[s,r])[p()(i)]:(this.options.missing_key_callback&&this.options.missing_key_callback(c,e),d=[s,r],!0===this.options.debug&&console.log(d[p(g)(i)]),d[p()(i)])}});var _=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var t=function(){return t.cache.hasOwnProperty(arguments[0])||(t.cache[arguments[0]]=t.parse(arguments[0])),t.format.call(null,t.cache[arguments[0]],arguments)};return t.format=function(t,s){var r,i,o,a,l,d,c,u=1,h=t.length,m="",f=[];for(i=0;i<h;i++)if("string"===(m=e(t[i])))f.push(t[i]);else if("array"===m){if((a=t[i])[2])for(o=0,r=s[u];o<a[2].length;o++){if(!r.hasOwnProperty(a[2][o]))throw _('[sprintf] property "%s" does not exist',a[2][o]);r=r[a[2][o]]}else r=a[1]?s[a[1]]:s[u++];if(/[^s]/.test(a[8])&&"number"!=e(r))throw _("[sprintf] expecting number but found %s",e(r));switch(null==r&&(r=""),a[8]){case"b":r=r.toString(2);break;case"c":r=String.fromCharCode(r);break;case"d":r=parseInt(r,10);break;case"e":r=a[7]?r.toExponential(a[7]):r.toExponential();break;case"f":r=a[7]?parseFloat(r).toFixed(a[7]):parseFloat(r);break;case"o":r=r.toString(8);break;case"s":r=(r=String(r))&&a[7]?r.substring(0,a[7]):r;break;case"u":r=Math.abs(r);break;case"x":r=r.toString(16);break;case"X":r=r.toString(16).toUpperCase()}r=/[def]/.test(a[8])&&a[3]&&r>=0?"+"+r:r,d=a[4]?"0"==a[4]?"0":a[4].charAt(1):" ",c=a[6]-String(r).length,l=a[6]?function(e,t){for(var s=[];t>0;s[--t]=e);return s.join("")}(d,c):"",f.push(a[5]?r+l:l+r)}return f.join("")},t.cache={},t.parse=function(e){for(var t=e,s=[],r=[],i=0;t;){if(null!==(s=/^[^\x25]+/.exec(t)))r.push(s[0]);else if(null!==(s=/^\x25{2}/.exec(t)))r.push("%");else if(null!==(s=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))){if(s[2]){i|=1;var o=[],a=s[2],l=[];if(null!==(l=/^([a-z_][a-z_\d]*)/i.exec(a)))for(o.push(l[1]);""!==(a=a.substring(l[0].length));)if(null!==(l=/^\.([a-z_][a-z_\d]*)/i.exec(a)))o.push(l[1]);else if(null!==(l=/^\[(\d+)\]/.exec(a)))o.push(l[1]);else throw"[sprintf] huh?";else throw"[sprintf] huh?";s[2]=o}else i|=2;if(3===i)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(s)}else throw"[sprintf] huh?";t=t.substring(s[0].length)}return r},t}();f.parse_plural=function(e,t){return e=e.replace(/n/g,t),f.parse_expression(e)},f.sprintf=function(e,t){if("[object Array]"==({}).toString.call(t)){var s;return(s=[].slice.call(t)).unshift(e),_.apply(null,s)}return _.apply(this,[].slice.call(arguments))},f.prototype.sprintf=function(){return f.sprintf.apply(this,arguments)},f.PF={},f.PF.parse=function(e){var t=f.PF.extractPluralExpr(e);return f.PF.parser.parse.call(f.PF.parser,t)},f.PF.compile=function(e){var t=f.PF.parse(e);return function(e){var s;return!0===(s=f.PF.interpreter(t)(e))?1:s||0}},f.PF.interpreter=function(e){return function(t){switch(e.type){case"GROUP":return f.PF.interpreter(e.expr)(t);case"TERNARY":if(f.PF.interpreter(e.expr)(t))return f.PF.interpreter(e.truthy)(t);return f.PF.interpreter(e.falsey)(t);case"OR":return f.PF.interpreter(e.left)(t)||f.PF.interpreter(e.right)(t);case"AND":return f.PF.interpreter(e.left)(t)&&f.PF.interpreter(e.right)(t);case"LT":return f.PF.interpreter(e.left)(t)<f.PF.interpreter(e.right)(t);case"GT":return f.PF.interpreter(e.left)(t)>f.PF.interpreter(e.right)(t);case"LTE":return f.PF.interpreter(e.left)(t)<=f.PF.interpreter(e.right)(t);case"GTE":return f.PF.interpreter(e.left)(t)>=f.PF.interpreter(e.right)(t);case"EQ":return f.PF.interpreter(e.left)(t)==f.PF.interpreter(e.right)(t);case"NEQ":return f.PF.interpreter(e.left)(t)!=f.PF.interpreter(e.right)(t);case"MOD":return f.PF.interpreter(e.left)(t)%f.PF.interpreter(e.right)(t);case"VAR":return t;case"NUM":return e.val;default:throw Error("Invalid Token found.")}}},f.PF.extractPluralExpr=function(e){e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),/;\s*$/.test(e)||(e=e.concat(";"));var t,s=/nplurals\=(\d+);/,r=e.match(s);if(r.length>1)r[1];else throw Error("nplurals not found in plural_forms string: "+e);if(!((t=(e=e.replace(s,"")).match(/plural\=(.*);/))&&t.length>1))throw Error("`plural` expression not found: "+e);return t[1]},f.PF.parser=((i={trace:function(){},yy:{},symbols_:{error:2,expressions:3,e:4,EOF:5,"?":6,":":7,"||":8,"&&":9,"<":10,"<=":11,">":12,">=":13,"!=":14,"==":15,"%":16,"(":17,")":18,n:19,NUMBER:20,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",6:"?",7:":",8:"||",9:"&&",10:"<",11:"<=",12:">",13:">=",14:"!=",15:"==",16:"%",17:"(",18:")",19:"n",20:"NUMBER"},productions_:[0,[3,2],[4,5],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,1],[4,1]],performAction:function(e,t,s,r,i,o,a){var l=o.length-1;switch(i){case 1:return{type:"GROUP",expr:o[l-1]};case 2:this.$={type:"TERNARY",expr:o[l-4],truthy:o[l-2],falsey:o[l]};break;case 3:this.$={type:"OR",left:o[l-2],right:o[l]};break;case 4:this.$={type:"AND",left:o[l-2],right:o[l]};break;case 5:this.$={type:"LT",left:o[l-2],right:o[l]};break;case 6:this.$={type:"LTE",left:o[l-2],right:o[l]};break;case 7:this.$={type:"GT",left:o[l-2],right:o[l]};break;case 8:this.$={type:"GTE",left:o[l-2],right:o[l]};break;case 9:this.$={type:"NEQ",left:o[l-2],right:o[l]};break;case 10:this.$={type:"EQ",left:o[l-2],right:o[l]};break;case 11:this.$={type:"MOD",left:o[l-2],right:o[l]};break;case 12:this.$={type:"GROUP",expr:o[l-1]};break;case 13:this.$={type:"VAR"};break;case 14:this.$={type:"NUM",val:Number(e)}}},table:[{3:1,4:2,17:[1,3],19:[1,4],20:[1,5]},{1:[3]},{5:[1,6],6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{4:17,17:[1,3],19:[1,4],20:[1,5]},{5:[2,13],6:[2,13],7:[2,13],8:[2,13],9:[2,13],10:[2,13],11:[2,13],12:[2,13],13:[2,13],14:[2,13],15:[2,13],16:[2,13],18:[2,13]},{5:[2,14],6:[2,14],7:[2,14],8:[2,14],9:[2,14],10:[2,14],11:[2,14],12:[2,14],13:[2,14],14:[2,14],15:[2,14],16:[2,14],18:[2,14]},{1:[2,1]},{4:18,17:[1,3],19:[1,4],20:[1,5]},{4:19,17:[1,3],19:[1,4],20:[1,5]},{4:20,17:[1,3],19:[1,4],20:[1,5]},{4:21,17:[1,3],19:[1,4],20:[1,5]},{4:22,17:[1,3],19:[1,4],20:[1,5]},{4:23,17:[1,3],19:[1,4],20:[1,5]},{4:24,17:[1,3],19:[1,4],20:[1,5]},{4:25,17:[1,3],19:[1,4],20:[1,5]},{4:26,17:[1,3],19:[1,4],20:[1,5]},{4:27,17:[1,3],19:[1,4],20:[1,5]},{6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[1,28]},{6:[1,7],7:[1,29],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{5:[2,3],6:[2,3],7:[2,3],8:[2,3],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,3]},{5:[2,4],6:[2,4],7:[2,4],8:[2,4],9:[2,4],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,4]},{5:[2,5],6:[2,5],7:[2,5],8:[2,5],9:[2,5],10:[2,5],11:[2,5],12:[2,5],13:[2,5],14:[2,5],15:[2,5],16:[1,16],18:[2,5]},{5:[2,6],6:[2,6],7:[2,6],8:[2,6],9:[2,6],10:[2,6],11:[2,6],12:[2,6],13:[2,6],14:[2,6],15:[2,6],16:[1,16],18:[2,6]},{5:[2,7],6:[2,7],7:[2,7],8:[2,7],9:[2,7],10:[2,7],11:[2,7],12:[2,7],13:[2,7],14:[2,7],15:[2,7],16:[1,16],18:[2,7]},{5:[2,8],6:[2,8],7:[2,8],8:[2,8],9:[2,8],10:[2,8],11:[2,8],12:[2,8],13:[2,8],14:[2,8],15:[2,8],16:[1,16],18:[2,8]},{5:[2,9],6:[2,9],7:[2,9],8:[2,9],9:[2,9],10:[2,9],11:[2,9],12:[2,9],13:[2,9],14:[2,9],15:[2,9],16:[1,16],18:[2,9]},{5:[2,10],6:[2,10],7:[2,10],8:[2,10],9:[2,10],10:[2,10],11:[2,10],12:[2,10],13:[2,10],14:[2,10],15:[2,10],16:[1,16],18:[2,10]},{5:[2,11],6:[2,11],7:[2,11],8:[2,11],9:[2,11],10:[2,11],11:[2,11],12:[2,11],13:[2,11],14:[2,11],15:[2,11],16:[2,11],18:[2,11]},{5:[2,12],6:[2,12],7:[2,12],8:[2,12],9:[2,12],10:[2,12],11:[2,12],12:[2,12],13:[2,12],14:[2,12],15:[2,12],16:[2,12],18:[2,12]},{4:30,17:[1,3],19:[1,4],20:[1,5]},{5:[2,2],6:[1,7],7:[2,2],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,2]}],defaultActions:{6:[2,1]},parseError:function(e,t){throw Error(e)},parse:function(e){var t=this,s=[0],r=[null],i=[],o=this.table,a="",l=0,d=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;function h(){var e;return"number"!=typeof(e=t.lexer.lex()||1)&&(e=t.symbols_[e]||e),e}i.push(u),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var m,f,p,g,_,v,y,b,j,w={};;){if(p=s[s.length-1],this.defaultActions[p]?g=this.defaultActions[p]:(null==m&&(m=h()),g=o[p]&&o[p][m]),void 0===g||!g.length||!g[0]){if(!c){for(v in j=[],o[p])this.terminals_[v]&&v>2&&j.push("'"+this.terminals_[v]+"'");var S="";S=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+j.join(", ")+", got '"+this.terminals_[m]+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==m?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:u,expected:j})}if(3==c){if(1==m)throw Error(S||"Parsing halted.");d=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,m=h()}for(;!("2"in o[p]);){;if(0==p)throw Error(S||"Parsing halted.");s.length=s.length-2,r.length=r.length-1,i.length=i.length-1,p=s[s.length-1]}f=m,m=2,g=o[p=s[s.length-1]]&&o[p][2],c=3}if(g[0]instanceof Array&&g.length>1)throw Error("Parse Error: multiple actions possible at state: "+p+", token: "+m);switch(g[0]){case 1:s.push(m),r.push(this.lexer.yytext),i.push(this.lexer.yylloc),s.push(g[1]),m=null,f?(m=f,f=null):(d=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,c>0&&c--);break;case 2:if(y=this.productions_[g[1]][1],w.$=r[r.length-y],w._$={first_line:i[i.length-(y||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(y||1)].first_column,last_column:i[i.length-1].last_column},void 0!==(_=this.performAction.call(w,a,d,l,this.yy,g[1],r,i)))return _;y&&(s=s.slice(0,-1*y*2),r=r.slice(0,-1*y),i=i.slice(0,-1*y)),s.push(this.productions_[g[1]][0]),r.push(w.$),i.push(w._$),b=o[s[s.length-2]][s[s.length-1]],s.push(b);break;case 3:return!0}}return!0}}).lexer=((o={EOF:1,parseError:function(e,t){if(this.yy.parseError)this.yy.parseError(e,t);else throw Error(e)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.match+=e,this.matched+=e,e.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),e},unput:function(e){return this._input=e+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,s,r=this._currentRules(),i=0;i<r.length;i++)if(t=this._input.match(this.rules[r[i]])){if((s=t[0].match(/\n.*/g))&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-1:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,r[i],this.conditionStack[this.conditionStack.length-1]))return e;return}if(""===this._input)return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}}).performAction=function(e,t,s,r){switch(s){case 0:break;case 1:return 20;case 2:return 19;case 3:return 8;case 4:return 9;case 5:return 6;case 6:return 7;case 7:return 11;case 8:return 13;case 9:return 10;case 10:return 12;case 11:return 14;case 12:return 15;case 13:return 16;case 14:return 17;case 15:return 18;case 16:return 5;case 17:return"INVALID"}},o.rules=[/^\s+/,/^[0-9]+(\.[0-9]+)?\b/,/^n\b/,/^\|\|/,/^&&/,/^\?/,/^:/,/^<=/,/^>=/,/^</,/^>/,/^!=/,/^==/,/^%/,/^\(/,/^\)/,/^$/,/^./],o.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],inclusive:!0}},o),i),e.exports&&(t=e.exports=f),t.Jed=f}(0)},"./node_modules/js-binary-schema-parser/lib/index.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loop=t.conditional=t.parse=void 0,t.parse=function e(t,s){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;if(Array.isArray(s))s.forEach(function(s){return e(t,s,r,i)});else if("function"==typeof s)s(t,r,i,e);else{var o=Object.keys(s)[0];Array.isArray(s[o])?(i[o]={},e(t,s[o],r,i[o])):i[o]=s[o](t,r,i,e)}return r},t.conditional=function(e,t){return function(s,r,i,o){t(s,r,i)&&o(s,e,r,i)}},t.loop=function(e,t){return function(s,r,i,o){for(var a=[],l=s.pos;t(s,r,i);){var d={};if(o(s,e,r,d),s.pos===l)break;l=s.pos,a.push(d)}return a}}},"./node_modules/js-binary-schema-parser/lib/parsers/uint8.js":function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readBits=t.readArray=t.readUnsigned=t.readString=t.peekBytes=t.readBytes=t.peekByte=t.readByte=t.buildStream=void 0,t.buildStream=function(e){return{data:e,pos:0}};var s=function(){return function(e){return e.data[e.pos++]}};t.readByte=s,t.peekByte=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){return t.data[t.pos+e]}};var r=function(e){return function(t){return t.data.subarray(t.pos,t.pos+=e)}};t.readBytes=r,t.peekBytes=function(e){return function(t){return t.data.subarray(t.pos,t.pos+e)}},t.readString=function(e){return function(t){return Array.from(r(e)(t)).map(function(e){return String.fromCharCode(e)}).join("")}},t.readUnsigned=function(e){return function(t){var s=r(2)(t);return e?(s[1]<<8)+s[0]:(s[0]<<8)+s[1]}},t.readArray=function(e,t){return function(s,i,o){for(var a="function"==typeof t?t(s,i,o):t,l=r(e),d=Array(a),c=0;c<a;c++)d[c]=l(s);return d}};var i=function(e,t,s){for(var r=0,i=0;i<s;i++)r+=e[t+i]&&Math.pow(2,s-i-1);return r};t.readBits=function(e){return function(t){for(var r=s()(t),o=Array(8),a=0;a<8;a++)o[7-a]=!!(r&1<<a);return Object.keys(e).reduce(function(t,s){var r=e[s];return r.length?t[s]=i(o,r.index,r.length):t[s]=o[r.index],t},{})}}},"./node_modules/js-binary-schema-parser/lib/schemas/gif.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s("./node_modules/js-binary-schema-parser/lib/index.js"),i=s("./node_modules/js-binary-schema-parser/lib/parsers/uint8.js"),o={blocks:function(e){for(var t=[],s=e.data.length,r=0,o=(0,i.readByte)()(e);0!==o&&o;o=(0,i.readByte)()(e)){if(e.pos+o>=s){var a=s-e.pos;t.push((0,i.readBytes)(a)(e)),r+=a;break}t.push((0,i.readBytes)(o)(e)),r+=o}for(var l=new Uint8Array(r),d=0,c=0;c<t.length;c++)l.set(t[c],d),d+=t[c].length;return l}},a=(0,r.conditional)({gce:[{codes:(0,i.readBytes)(2)},{byteSize:(0,i.readByte)()},{extras:(0,i.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,i.readUnsigned)(!0)},{transparentColorIndex:(0,i.readByte)()},{terminator:(0,i.readByte)()}]},function(e){var t=(0,i.peekBytes)(2)(e);return 33===t[0]&&249===t[1]}),l=(0,r.conditional)({image:[{code:(0,i.readByte)()},{descriptor:[{left:(0,i.readUnsigned)(!0)},{top:(0,i.readUnsigned)(!0)},{width:(0,i.readUnsigned)(!0)},{height:(0,i.readUnsigned)(!0)},{lct:(0,i.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,r.conditional)({lct:(0,i.readArray)(3,function(e,t,s){return Math.pow(2,s.descriptor.lct.size+1)})},function(e,t,s){return s.descriptor.lct.exists}),{data:[{minCodeSize:(0,i.readByte)()},o]}]},function(e){return 44===(0,i.peekByte)()(e)}),d=(0,r.conditional)({text:[{codes:(0,i.readBytes)(2)},{blockSize:(0,i.readByte)()},{preData:function(e,t,s){return(0,i.readBytes)(s.text.blockSize)(e)}},o]},function(e){var t=(0,i.peekBytes)(2)(e);return 33===t[0]&&1===t[1]}),c=(0,r.conditional)({application:[{codes:(0,i.readBytes)(2)},{blockSize:(0,i.readByte)()},{id:function(e,t,s){return(0,i.readString)(s.blockSize)(e)}},o]},function(e){var t=(0,i.peekBytes)(2)(e);return 33===t[0]&&255===t[1]}),u=(0,r.conditional)({comment:[{codes:(0,i.readBytes)(2)},o]},function(e){var t=(0,i.peekBytes)(2)(e);return 33===t[0]&&254===t[1]});t.default=[{header:[{signature:(0,i.readString)(3)},{version:(0,i.readString)(3)}]},{lsd:[{width:(0,i.readUnsigned)(!0)},{height:(0,i.readUnsigned)(!0)},{gct:(0,i.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,i.readByte)()},{pixelAspectRatio:(0,i.readByte)()}]},(0,r.conditional)({gct:(0,i.readArray)(3,function(e,t){return Math.pow(2,t.lsd.gct.size+1)})},function(e,t){return t.lsd.gct.exists}),{frames:(0,r.loop)([a,c,u,l,d],function(e){var t=(0,i.peekByte)()(e);return 33===t||44===t})}]},"./node_modules/localforage-driver-memory/_bundle/umd.js":function(e,t){var s;"undefined"!=typeof self&&self,function(e){"use strict";var t=/^~~local_forage_type~([^~]+)~/,s=Object.prototype.toString;function r(e){var t=.75*e.length,s=e.length;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);for(var r=new ArrayBuffer(t),i=new Uint8Array(r),o=0,a=0;o<s;o+=4){var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o]),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o+1]),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o+2]),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o+3]);i[a++]=l<<2|d>>4,i[a++]=(15&d)<<4|c>>2,i[a++]=(3&c)<<6|63&u}return r}function i(e){for(var t=new Uint8Array(e),s="",r=0;r<t.length;r+=3)s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t[r]>>2],s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&t[r])<<4|t[r+1]>>4],s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&t[r+1])<<2|t[r+2]>>6],s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&t[r+2]];return t.length%3==2?s=s.substring(0,s.length-1)+"=":t.length%3==1&&(s=s.substring(0,s.length-2)+"=="),s}function o(e,t){return(e.name||t.name)+"/"+(e.storeName||t.storeName)+"/"}function a(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function d(e,t){var s,r=this;if(t=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var i=this.config();e.name=e.name||i.name,e.storeName=e.storeName||i.storeName}return{promise:e.name?new Promise(function(t){t(e.storeName?o(e,r._defaultConfig):e.name+"/")}):Promise.reject("Invalid arguments"),callback:t}}function c(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}var u={bufferToString:i,deserialize:function(e){if("__lfsc__:"!==e.substring(0,9))return JSON.parse(e);var s,i=e.substring(13),o=e.substring(9,13);if("blob"===o&&t.test(i)){var a=i.match(t);s=a[1],i=i.substring(a[0].length)}var l=r(i);switch(o){case"arbf":return l;case"blob":return function(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var s=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)s.append(e[r]);return s.getBlob(t.type)}}([l],{type:s});case"si08":return new Int8Array(l);case"ui08":return new Uint8Array(l);case"uic8":return new Uint8ClampedArray(l);case"si16":return new Int16Array(l);case"ur16":return new Uint16Array(l);case"si32":return new Int32Array(l);case"ui32":return new Uint32Array(l);case"fl32":return new Float32Array(l);case"fl64":return new Float64Array(l);default:throw Error("Unkown type: "+o)}},serialize:function(e,t){var r="";if(e&&(r=s.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===s.call(e.buffer))){var o=void 0,a="__lfsc__:";e instanceof ArrayBuffer?(o=e,a+="arbf"):(o=e.buffer,"[object Int8Array]"===r?a+="si08":"[object Uint8Array]"===r?a+="ui08":"[object Uint8ClampedArray]"===r?a+="uic8":"[object Int16Array]"===r?a+="si16":"[object Uint16Array]"===r?a+="ur16":"[object Int32Array]"===r?a+="si32":"[object Uint32Array]"===r?a+="ui32":"[object Float32Array]"===r?a+="fl32":"[object Float64Array]"===r?a+="fl64":t(Error("Failed to get type for BinaryArray"))),t(a+i(o))}else if("[object Blob]"===r){var l=new FileReader;l.onload=function(){t("__lfsc__:blob"+("~~local_forage_type~"+e.type+"~")+i(this.result))},l.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),t(null,s)}},stringToBuffer:r},h={},m=function(){function e(e){this.kp=e,this.data={}}return e.resolve=function(t){return h[t]||(h[t]=new e(t)),h[t]},e.prototype.clear=function(){this.data={}},e.prototype.drop=function(){this.clear(),delete h[this.kp]},e.prototype.get=function(e){return this.data[e]},e.prototype.key=function(e){return this.keys()[e]},e.prototype.keys=function(){return Object.keys(this.data)},e.prototype.rm=function(e){delete this.data[e]},e.prototype.set=function(e,t){this.data[e]=t},e}();e._support=!0,e._driver="localforage-driver-memory",e._initStorage=function(e){var t=e?function e(t){if(null===t||"object"!=typeof t||"isActiveClone"in t)return t;var s,r,i=t instanceof Date?new Date(t):t.constructor();try{for(var o,a,l,d=(o=Object.keys(t),a="function"==typeof Symbol&&o[Symbol.iterator],l=0,a?a.call(o):{next:function(){return o&&l>=o.length&&(o=void 0),{value:o&&o[l++],done:!o}}}),c=d.next();!c.done;c=d.next()){var u=c.value;Object.prototype.hasOwnProperty.call(t,u)&&(t.isActiveClone=null,i[u]=e(t[u]),delete t.isActiveClone)}}catch(e){s={error:e}}finally{try{c&&!c.done&&(r=d.return)&&r.call(d)}finally{if(s)throw s.error}}return i}(e):{},s=o(t,this._defaultConfig),r=m.resolve(s);return this._dbInfo=t,this._dbInfo.serializer=u,this._dbInfo.keyPrefix=s,this._dbInfo.mStore=r,Promise.resolve()},e.clear=function(e){var t=this,s=this.ready().then(function(){t._dbInfo.mStore.clear()});return a(s,e),s},e.dropInstance=function(e,t){var s=d.apply(this,arguments),r=s.promise,i=s.callback;return a(r.then(function(e){m.resolve(e).drop()}),i),r},e.getItem=function(e,t){var s=this;e=c(e);var r=this.ready().then(function(){var t=s._dbInfo.mStore.get(e);return null==t?null:s._dbInfo.serializer.deserialize(t)});return a(r,t),r},e.iterate=function(e,t){var s=this,r=this.ready().then(function(){for(var t=s._dbInfo.mStore,r=t.keys(),i=0;i<r.length;i++){var o=t.get(r[i]);if(o&&(o=s._dbInfo.serializer.deserialize(o)),void 0!==(o=e(o,r[i],i+1)))return o}});return a(r,t),r},e.key=function(e,t){var s=this,r=this.ready().then(function(){var t;try{t=s._dbInfo.mStore.key(e),void 0===t&&(t=null)}catch(e){t=null}return t});return a(r,t),r},e.keys=function(e){var t=this,s=this.ready().then(function(){return t._dbInfo.mStore.keys()});return a(s,e),s},e.length=function(e){var t=this.keys().then(function(e){return e.length});return a(t,e),t},e.removeItem=function(e,t){var s=this;e=c(e);var r=this.ready().then(function(){s._dbInfo.mStore.rm(e)});return a(r,t),r},e.setItem=function(e,t,s){var r=this;e=c(e);var i=this.ready().then(function(){void 0===t&&(t=null);var s=t;return new Promise(function(i,o){r._dbInfo.serializer.serialize(t,function(t,a){if(a)o(a);else try{r._dbInfo.mStore.set(e,t),i(s)}catch(e){o(e)}})})});return a(i,s),i},Object.defineProperty(e,"__esModule",{value:!0})}(t)},"./node_modules/localforage-setitems/dist/localforage-setitems.js":function(e,t,s){(function(e,t){"use strict";function s(e){return s.result?s.result:e&&"function"==typeof e.getSerializer?(s.result=e.getSerializer(),s.result):Promise.reject(Error("localforage.getSerializer() was not available! localforage v1.4+ is required!"))}function r(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function i(e,t,s,r){function i(e,t){var s=e||t;return e&&"function"==typeof e||"string"!=typeof s||(e=function(e){return e[s]}),e}var o=[];if("[object Array]"===Object.prototype.toString.call(e)){t=i(t,"key"),s=i(s,"value");for(var a=0,l=e.length;a<l;a++){var d=e[a];o.push(r(t(d),s(d)))}}else for(var c in e)e.hasOwnProperty(c)&&o.push(r(c,e[c]));return o}function o(e,t,s,o){var a=this,l=a.ready().then(function(){return new Promise(function(r,o){var l,d=a._dbInfo,c=d.db.transaction(d.storeName,"readwrite"),u=c.objectStore(d.storeName);function h(e){var t=e.target||this;o(l=t.error||t.transaction.error)}c.oncomplete=function(){r(e)},c.onabort=c.onerror=function(e){o(l||e.target)},i(e,t,s,function(e,t){null===t&&(t=void 0),u.put(t,e).onerror=h})})});return r(l,o),l}function a(e,t,o,a){var l=this,d=new Promise(function(r,a){l.ready().then(function(){return s(l)}).then(function(s){var d=l._dbInfo;d.db.transaction(function(l){var c="INSERT OR REPLACE INTO "+d.storeName+" (key, value) VALUES (?, ?)";Promise.all(i(e,t,o,function(e,t){return new Promise(function(r,i){s.serialize(t,function(t,s){s?i(s):l.executeSql(c,[e,t],function(){r()},function(e,t){i(t)})})})})).then(function(){r(e)},a)},function(e){a(e)})}).catch(a)});return r(d,a),d}function l(e,t,s,o){var a=this,l=Promise.all(i(e,t,s,function(e,t){return a.setItem(e,t)}));return r(l,o),l}function d(e,t,s,r){var i=this.driver();return i===this.INDEXEDDB?o.call(this,e,t,s,r):i===this.WEBSQL?a.call(this,e,t,s,r):l.call(this,e,t,s,r)}function c(e){var t=Object.getPrototypeOf(e);t&&(t.setItems=d,t.setItems.indexedDB=function(){return o.apply(this,arguments)},t.setItems.websql=function(){return a.apply(this,arguments)},t.setItems.generic=function(){return l.apply(this,arguments)})}var u=c(t="default"in t?t.default:t);e.setItemsGeneric=l,e.localforageSetItems=d,e.extendPrototype=c,e.extendPrototypeResult=u,Object.defineProperty(e,"__esModule",{value:!0})})(t,s("./node_modules/localforage/dist/localforage.js"))},"./node_modules/localforage-webextensionstorage-driver/driver.js":function(e,t,s){"use strict";var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var s=(0,l.getStorage)(),r=!!(s&&s[t]),d=r?s[t]:{clear:function(){},get:function(){},remove:function(){},set:function(){}},c=d.clear.bind(d),u=d.get.bind(d),h=d.remove.bind(d),m=d.set.bind(d);return{_driver:e,_support:r,_initStorage:function(){return Promise.resolve()},clear:function(e){return(0,a.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c(),e&&e();case 2:case"end":return t.stop()}},t)}))()},iterate:function(e,t){return(0,a.default)(i.default.mark(function s(){var r;return i.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,l.usePromise)(u,null);case 2:Object.keys(r=s.sent).forEach(function(t,s){return e(r[t],t,s)}),t&&t();case 6:case"end":return s.stop()}},s)}))()},getItem:function(e,t){return(0,a.default)(i.default.mark(function s(){var r;return i.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,(0,l.usePromise)(u,e);case 3:return r=s.sent,r=void 0===(r="string"==typeof e?r[e]:r)?null:r,t&&t(null,r),s.abrupt("return",r);case 10:throw s.prev=10,s.t0=s.catch(0),t&&t(s.t0),s.t0;case 14:case"end":return s.stop()}},s,null,[[0,10]])}))()},key:function(e,t){return(0,a.default)(i.default.mark(function s(){var r;return i.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,l.usePromise)(u,null);case 2:return r=Object.keys(s.sent)[e],t&&t(r),s.abrupt("return",r);case 6:case"end":return s.stop()}},s)}))()},keys:function(e){return(0,a.default)(i.default.mark(function t(){var s;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.usePromise)(u,null);case 2:return s=Object.keys(t.sent),e&&e(s),t.abrupt("return",s);case 6:case"end":return t.stop()}},t)}))()},length:function(e){return(0,a.default)(i.default.mark(function t(){var s;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.usePromise)(u,null);case 2:return s=Object.keys(t.sent).length,e&&e(s),t.abrupt("return",s);case 6:case"end":return t.stop()}},t)}))()},removeItem:function(e,t){return(0,a.default)(i.default.mark(function s(){return i.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,l.usePromise)(h,e);case 2:t&&t();case 3:case"end":return s.stop()}},s)}))()},setItem:function(e,t,s){return(0,a.default)(i.default.mark(function r(){return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,l.usePromise)(m,(0,o.default)({},e,t));case 2:s&&s();case 3:case"end":return r.stop()}},r)}))()}}};var i=r(s("./node_modules/@babel/runtime/regenerator/index.js")),o=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),a=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),l=s("./node_modules/localforage-webextensionstorage-driver/utils.js")},"./node_modules/localforage-webextensionstorage-driver/local.js":function(e,t,s){"use strict";var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=(0,r(s("./node_modules/localforage-webextensionstorage-driver/driver.js")).default)("webExtensionLocalStorage","local")},"./node_modules/localforage-webextensionstorage-driver/sync.js":function(e,t,s){"use strict";var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=(0,r(s("./node_modules/localforage-webextensionstorage-driver/driver.js")).default)("webExtensionSyncStorage","sync")},"./node_modules/localforage-webextensionstorage-driver/utils.js":function(e,t){"use strict";function s(){return"undefined"!=typeof browser&&browser.storage||"undefined"!=typeof chrome&&chrome.storage}Object.defineProperty(t,"__esModule",{value:!0}),t.getStorage=s,t.usePromise=function(e,t){return!function(){var e=s();try{return e&&e.local.get&&e.local.get()&&"function"==typeof e.local.get().then}catch(e){return!1}}()?new Promise(function(s){e(t,function(){s.apply(void 0,arguments)})}):e(t)}},"./node_modules/localforage/dist/localforage.js":function(e,t,s){e.exports=(function e(t,s,r){function i(a,l){if(!s[a]){if(!t[a]){if(o)return o(a,!0);var d=Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=s[a]={exports:{}};t[a][0].call(c.exports,function(e){return i(t[a][1][e]||e)},c,c.exports,e,t,s,r)}return s[a].exports}for(var o=void 0,a=0;a<r.length;a++)i(r[a]);return i})({1:[function(e,t,r){(function(e){"use strict";var s,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(u),l=e.document.createTextNode("");a.observe(l,{characterData:!0}),s=function(){l.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)s="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var d=new e.MessageChannel;d.port1.onmessage=u,s=function(){d.port2.postMessage(0)}}var c=[];function u(){r=!0;for(var e,t,s=c.length;s;){for(t=c,c=[],e=-1;++e<s;)t[e]();s=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||s()}}).call(this,void 0!==s.g?s.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,s){"use strict";var r=e(1);function i(){}var o={},a=["REJECTED"],l=["FULFILLED"],d=["PENDING"];function c(e){if("function"!=typeof e)throw TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function u(e,t,s){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof s&&(this.onRejected=s,this.callRejected=this.otherCallRejected)}function h(e,t,s){r(function(){var r;try{r=t(s)}catch(t){return o.reject(e,t)}r===e?o.reject(e,TypeError("Cannot resolve promise with itself")):o.resolve(e,r)})}function m(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var s=!1;function r(t){s||(s=!0,o.reject(e,t))}function i(t){s||(s=!0,o.resolve(e,t))}var a=p(function(){t(i,r)});"error"===a.status&&r(a.value)}function p(e,t){var s={};try{s.value=e(t),s.status="success"}catch(e){s.status="error",s.value=e}return s}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===l||"function"!=typeof t&&this.state===a)return this;var s=new this.constructor(i);return this.state!==d?h(s,this.state===l?e:t,this.outcome):this.queue.push(new u(s,e,t)),s},u.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){o.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},o.resolve=function(e,t){var s=p(m,t);if("error"===s.status)return o.reject(e,s.value);var r=s.value;if(r)f(e,r);else{e.state=l,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var s=-1,r=e.queue.length;++s<r;)e.queue[s].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(TypeError("must be an array"));var s=e.length,r=!1;if(!s)return this.resolve([]);for(var a=Array(s),l=0,d=-1,c=new this(i);++d<s;)!function(e,i){t.resolve(e).then(function(e){a[i]=e,++l!==s||r||(r=!0,o.resolve(c,a))},function(e){r||(r=!0,o.reject(c,e))})}(e[d],d);return c},c.race=function(e){var t,s=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(TypeError("must be an array"));var r=e.length,a=!1;if(!r)return this.resolve([]);for(var l=-1,d=new this(i);++l<r;){t=e[l],s.resolve(t).then(function(e){a||(a=!0,o.resolve(d,e))},function(e){a||(a=!0,o.reject(d,e))})}return d}},{1:1}],3:[function(e,t,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==s.g?s.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,s){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var s=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)s.append(e[r]);return s.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function l(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function d(e,t,s){"function"==typeof t&&e.then(t),"function"==typeof s&&e.catch(s)}function c(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",m=void 0,f={},p=Object.prototype.toString,g="readonly",_="readwrite";function v(e){var t=f[e.name],s={};s.promise=new a(function(e,t){s.resolve=e,s.reject=t}),t.deferredOperations.push(s),t.dbReady?t.dbReady=t.dbReady.then(function(){return s.promise}):t.dbReady=s.promise}function y(e){var t=f[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function b(e,t){var s=f[e.name].deferredOperations.pop();if(s)return s.reject(t),s.promise}function j(e,t){return new a(function(s,r){if(f[e.name]=f[e.name]||C(),e.db)if(!t)return s(e.db);else v(e),e.db.close();var o=[e.name];t&&o.push(e.version);var a=i.open.apply(i,o);t&&(a.onupgradeneeded=function(t){var s=a.result;try{s.createObjectStore(e.storeName),t.oldVersion<=1&&s.createObjectStore(h)}catch(s){if("ConstraintError"===s.name)console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw s}}),a.onerror=function(e){e.preventDefault(),r(a.error)},a.onsuccess=function(){var t=a.result;t.onversionchange=function(e){e.target.close()},s(t),y(e)}})}function w(e,t){if(!e.db)return!0;var s=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||s){if(s){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function S(e){return o([function(e){for(var t=e.length,s=new ArrayBuffer(t),r=new Uint8Array(s),i=0;i<t;i++)r[i]=e.charCodeAt(i);return s}(atob(e.data))],{type:e.type})}function x(e){return e&&e.__local_forage_encoded_blob}function E(e){var t=this,s=t._initReady().then(function(){var e=f[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return d(s,e,e),s}function A(e,t,s,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);s(null,i)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return a.resolve().then(function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),j(e,!0)}).then(function(){return(function(e){v(e);for(var t=f[e.name],s=t.forages,r=0;r<s.length;r++){var i=s[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,j(e,!1).then(function(t){return(e.db=t,w(e))?j(e,!0):t}).then(function(r){e.db=t.db=r;for(var i=0;i<s.length;i++)s[i]._dbInfo.db=r}).catch(function(t){throw b(e,t),t})})(e).then(function(){A(e,t,s,r-1)})}).catch(s);s(i)}}function C(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}var k={_driver:"asyncStorage",_initStorage:function(e){var t=this,s={db:null};if(e)for(var r in e)s[r]=e[r];var i=f[s.name];i||(i=C(),f[s.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=E);var o=[];function l(){return a.resolve()}for(var d=0;d<i.forages.length;d++){var c=i.forages[d];c!==t&&o.push(c._initReady().catch(l))}var u=i.forages.slice(0);return a.all(o).then(function(){return s.db=i.db,j(s,!1)}).then(function(e){return(s.db=e,w(s,t._defaultConfig.version))?j(s,!0):e}).then(function(e){s.db=i.db=e,t._dbInfo=s;for(var r=0;r<u.length;r++){var o=u[r];o!==t&&(o._dbInfo.db=s.db,o._dbInfo.version=s.version)}})},_support:function(){try{if(!i||!i.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var s=this,r=new a(function(t,r){s.ready().then(function(){A(s._dbInfo,g,function(i,o){if(i)return r(i);try{var a=o.objectStore(s._dbInfo.storeName).openCursor(),l=1;a.onsuccess=function(){var s=a.result;if(s){var r=s.value;x(r)&&(r=S(r));var i=e(r,s.key,l++);void 0!==i?t(i):s.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return l(r,t),r},getItem:function(e,t){var s=this;e=c(e);var r=new a(function(t,r){s.ready().then(function(){A(s._dbInfo,g,function(i,o){if(i)return r(i);try{var a=o.objectStore(s._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),x(e)&&(e=S(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return l(r,t),r},setItem:function(e,t,s){var r=this;e=c(e);var i=new a(function(s,i){var l;r.ready().then(function(){return(l=r._dbInfo,"[object Blob]"===p.call(t))?(function(e){return"boolean"==typeof m?a.resolve(m):new a(function(t){var s=e.transaction(h,_),r=o([""]);s.objectStore(h).put(r,"key"),s.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},s.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);t(navigator.userAgent.match(/Edge\//)||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1}).then(function(e){return m=e})})(l.db).then(function(e){return e?t:new a(function(e,s){var r=new FileReader;r.onerror=s,r.onloadend=function(s){e({__local_forage_encoded_blob:!0,data:btoa(s.target.result||""),type:t.type})},r.readAsBinaryString(t)})}):t}).then(function(t){A(r._dbInfo,_,function(o,a){if(o)return i(o);try{var l=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var d=l.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),s(t)},a.onabort=a.onerror=function(){var e=d.error?d.error:d.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return l(i,s),i},removeItem:function(e,t){var s=this;e=c(e);var r=new a(function(t,r){s.ready().then(function(){A(s._dbInfo,_,function(i,o){if(i)return r(i);try{var a=o.objectStore(s._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(a.error)},o.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}})}).catch(r)});return l(r,t),r},clear:function(e){var t=this,s=new a(function(e,s){t.ready().then(function(){A(t._dbInfo,_,function(r,i){if(r)return s(r);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;s(e)}}catch(e){s(e)}})}).catch(s)});return l(s,e),s},length:function(e){var t=this,s=new a(function(e,s){t.ready().then(function(){A(t._dbInfo,g,function(r,i){if(r)return s(r);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){s(o.error)}}catch(e){s(e)}})}).catch(s)});return l(s,e),s},key:function(e,t){var s=this,r=new a(function(t,r){if(e<0)return void t(null);s.ready().then(function(){A(s._dbInfo,g,function(i,o){if(i)return r(i);try{var a=o.objectStore(s._dbInfo.storeName),l=!1,d=a.openKeyCursor();d.onsuccess=function(){var s=d.result;if(!s)return void t(null);0===e||l?t(s.key):(l=!0,s.advance(e))},d.onerror=function(){r(d.error)}}catch(e){r(e)}})}).catch(r)});return l(r,t),r},keys:function(e){var t=this,s=new a(function(e,s){t.ready().then(function(){A(t._dbInfo,g,function(r,i){if(r)return s(r);try{var o=i.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];o.onsuccess=function(){var t=o.result;if(!t)return void e(a);a.push(t.key),t.continue()},o.onerror=function(){s(o.error)}}catch(e){s(e)}})}).catch(s)});return l(s,e),s},dropInstance:function(e,t){t=u.apply(this,arguments);var s,r=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),e.name){var o=e.name===r.name&&this._dbInfo.db?a.resolve(this._dbInfo.db):j(e,!1).then(function(t){var s=f[e.name],r=s.forages;s.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t});s=e.storeName?o.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var s=t.version+1;v(e);var r=f[e.name],o=r.forages;t.close();for(var l=0;l<o.length;l++){var d=o[l];d._dbInfo.db=null,d._dbInfo.version=s}return new a(function(t,r){var o=i.open(e.name,s);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<o.length;t++){var s=o[t];s._dbInfo.db=e,y(s._dbInfo)}}).catch(function(t){throw(b(e,t)||a.resolve()).catch(function(){}),t})}}):o.then(function(t){v(e);var s=f[e.name],r=s.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new a(function(t,s){var r=i.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),s(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){s.db=e;for(var t=0;t<r.length;t++)y(r[t]._dbInfo)}).catch(function(t){throw(b(e,t)||a.resolve()).catch(function(){}),t})})}else s=a.reject("Invalid arguments");return l(s,t),s}},$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=/^~~local_forage_type~([^~]+)~/,M="__lfsc__:",O=M.length,I="arbf",N="blob",R="si08",D="ui08",L="uic8",P="si16",z="si32",U="ur16",B="ui32",F="fl32",q="fl64",H=O+I.length,G=Object.prototype.toString;function W(e){var t,s,r,i,o,a=.75*e.length,l=e.length,d=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),u=new Uint8Array(c);for(t=0;t<l;t+=4)s=$.indexOf(e[t]),r=$.indexOf(e[t+1]),i=$.indexOf(e[t+2]),o=$.indexOf(e[t+3]),u[d++]=s<<2|r>>4,u[d++]=(15&r)<<4|i>>2,u[d++]=(3&i)<<6|63&o;return c}function V(e){var t,s=new Uint8Array(e),r="";for(t=0;t<s.length;t+=3)r+=$[s[t]>>2],r+=$[(3&s[t])<<4|s[t+1]>>4],r+=$[(15&s[t+1])<<2|s[t+2]>>6],r+=$[63&s[t+2]];return s.length%3==2?r=r.substring(0,r.length-1)+"=":s.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var K={serialize:function(e,t){var s="";if(e&&(s=G.call(e)),e&&("[object ArrayBuffer]"===s||e.buffer&&"[object ArrayBuffer]"===G.call(e.buffer))){var r,i=M;e instanceof ArrayBuffer?(r=e,i+=I):(r=e.buffer,"[object Int8Array]"===s?i+=R:"[object Uint8Array]"===s?i+=D:"[object Uint8ClampedArray]"===s?i+=L:"[object Int16Array]"===s?i+=P:"[object Uint16Array]"===s?i+=U:"[object Int32Array]"===s?i+=z:"[object Uint32Array]"===s?i+=B:"[object Float32Array]"===s?i+=F:"[object Float64Array]"===s?i+=q:t(Error("Failed to get type for BinaryArray"))),t(i+V(r))}else if("[object Blob]"===s){var o=new FileReader;o.onload=function(){t(M+N+("~~local_forage_type~"+e.type+"~")+V(this.result))},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),t(null,s)}},deserialize:function(e){if(e.substring(0,O)!==M)return JSON.parse(e);var t,s=e.substring(H),r=e.substring(O,H);if(r===N&&T.test(s)){var i=s.match(T);t=i[1],s=s.substring(i[0].length)}var a=W(s);switch(r){case I:return a;case N:return o([a],{type:t});case R:return new Int8Array(a);case D:return new Uint8Array(a);case L:return new Uint8ClampedArray(a);case P:return new Int16Array(a);case U:return new Uint16Array(a);case z:return new Int32Array(a);case B:return new Uint32Array(a);case F:return new Float32Array(a);case q:return new Float64Array(a);default:throw Error("Unkown type: "+r)}},stringToBuffer:W,bufferToString:V};function J(e,t,s,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],s,r)}function Q(e,t,s,r,i,o){e.executeSql(s,r,i,function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],function(e,l){l.rows.length?o(e,a):J(e,t,function(){e.executeSql(s,r,i,o)},o)},o):o(e,a)},o)}function Y(e,t,s,r){var i=this;e=c(e);var o=new a(function(o,a){i.ready().then(function(){void 0===t&&(t=null);var l=t,d=i._dbInfo;d.serializer.serialize(t,function(t,c){c?a(c):d.db.transaction(function(s){Q(s,d,"INSERT OR REPLACE INTO "+d.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){o(l)},function(e,t){a(t)})},function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(Y.apply(i,[e,l,s,r-1]));a(t)}})})}).catch(a)});return l(o,s),o}var X={_driver:"webSQLStorage",_initStorage:function(e){var t=this,s={db:null};if(e)for(var r in e)s[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new a(function(e,r){try{s.db=openDatabase(s.name,String(s.version),s.description,s.size)}catch(e){return r(e)}s.db.transaction(function(i){J(i,s,function(){t._dbInfo=s,e()},function(e,t){r(t)})},r)});return s.serializer=K,i},_support:"function"==typeof openDatabase,iterate:function(e,t){var s=this,r=new a(function(t,r){s.ready().then(function(){var i=s._dbInfo;i.db.transaction(function(s){Q(s,i,"SELECT * FROM "+i.storeName,[],function(s,r){for(var o=r.rows,a=o.length,l=0;l<a;l++){var d=o.item(l),c=d.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,d.key,l+1)))return void t(c)}t()},function(e,t){r(t)})})}).catch(r)});return l(r,t),r},getItem:function(e,t){var s=this;e=c(e);var r=new a(function(t,r){s.ready().then(function(){var i=s._dbInfo;i.db.transaction(function(s){Q(s,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,s){var r=s.rows.length?s.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return l(r,t),r},setItem:function(e,t,s){return Y.apply(this,[e,t,s,1])},removeItem:function(e,t){var s=this;e=c(e);var r=new a(function(t,r){s.ready().then(function(){var i=s._dbInfo;i.db.transaction(function(s){Q(s,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return l(r,t),r},clear:function(e){var t=this,s=new a(function(e,s){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){Q(t,r,"DELETE FROM "+r.storeName,[],function(){e()},function(e,t){s(t)})})}).catch(s)});return l(s,e),s},length:function(e){var t=this,s=new a(function(e,s){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){Q(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,s){e(s.rows.item(0).c)},function(e,t){s(t)})})}).catch(s)});return l(s,e),s},key:function(e,t){var s=this,r=new a(function(t,r){s.ready().then(function(){var i=s._dbInfo;i.db.transaction(function(s){Q(s,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,s){t(s.rows.length?s.rows.item(0).key:null)},function(e,t){r(t)})})}).catch(r)});return l(r,t),r},keys:function(e){var t=this,s=new a(function(e,s){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){Q(t,r,"SELECT key FROM "+r.storeName,[],function(t,s){for(var r=[],i=0;i<s.rows.length;i++)r.push(s.rows.item(i).key);e(r)},function(e,t){s(t)})})}).catch(s)});return l(s,e),s},dropInstance:function(e,t){t=u.apply(this,arguments);var s,r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var i=this;return l(s=e.name?new a(function(t){var s;(s=e.name===r.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName)?t({db:s,storeNames:[e.storeName]}):t(new a(function(e,t){s.transaction(function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(t,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);e({db:s,storeNames:i})},function(e,s){t(s)})},function(e){t(e)})}))}).then(function(e){return new a(function(t,s){e.db.transaction(function(r){for(var i=[],o=0,l=e.storeNames.length;o<l;o++)i.push(function(e){return new a(function(t,s){r.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){s(t)})})}(e.storeNames[o]));a.all(i).then(function(){t()}).catch(function(e){s(e)})},function(e){s(e)})})}):a.reject("Invalid arguments"),t),s}};function Z(e,t){var s=e.name+"/";return e.storeName!==t.storeName&&(s+=e.storeName+"/"),s}var ee={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var s in e)t[s]=e[s];return(t.keyPrefix=Z(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||localStorage.length>0)?(this._dbInfo=t,t.serializer=K,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var s=this,r=s.ready().then(function(){for(var t=s._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,a=1,l=0;l<o;l++){var d=localStorage.key(l);if(0===d.indexOf(r)){var c=localStorage.getItem(d);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,d.substring(i),a++)))return c}}});return l(r,t),r},getItem:function(e,t){var s=this;e=c(e);var r=s.ready().then(function(){var t=s._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return l(r,t),r},setItem:function(e,t,s){var r=this;e=c(e);var i=r.ready().then(function(){void 0===t&&(t=null);var s=t;return new a(function(i,o){var a=r._dbInfo;a.serializer.serialize(t,function(t,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+e,t),i(s)}catch(e){("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&o(e),o(e)}})})});return l(i,s),i},removeItem:function(e,t){var s=this;e=c(e);var r=s.ready().then(function(){var t=s._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return l(r,t),r},clear:function(e){var t=this,s=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,s=localStorage.length-1;s>=0;s--){var r=localStorage.key(s);0===r.indexOf(e)&&localStorage.removeItem(r)}});return l(s,e),s},length:function(e){var t=this.keys().then(function(e){return e.length});return l(t,e),t},key:function(e,t){var s=this,r=s.ready().then(function(){var t,r=s._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return l(r,t),r},keys:function(e){var t=this,s=t.ready().then(function(){for(var e=t._dbInfo,s=localStorage.length,r=[],i=0;i<s;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r});return l(s,e),s},dropInstance:function(e,t){if(t=u.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var s,r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var i=this;return l(s=e.name?new a(function(t){t(e.storeName?Z(e,i._defaultConfig):e.name+"/")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var s=localStorage.key(t);0===s.indexOf(e)&&localStorage.removeItem(s)}}):a.reject("Invalid arguments"),t),s}},et=function(e,t){for(var s,r=e.length,i=0;i<r;){if((s=e[i])===t||"number"==typeof s&&"number"==typeof t&&isNaN(s)&&isNaN(t))return!0;i++}return!1},es=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},er={},en={},ei={INDEXEDDB:k,WEBSQL:X,LOCALSTORAGE:ee},eo=[ei.INDEXEDDB._driver,ei.WEBSQL._driver,ei.LOCALSTORAGE._driver],ea=["dropInstance"],el=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ea),ed={description:"",driver:eo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ec(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var s in t)t.hasOwnProperty(s)&&(es(t[s])?arguments[0][s]=t[s].slice():arguments[0][s]=t[s])}return arguments[0]}t.exports=new(function(){function e(t){if(!(this instanceof e))throw TypeError("Cannot call a class as a function");for(var s in ei)if(ei.hasOwnProperty(s)){var r=ei[s],i=r._driver;this[s]=i,er[i]||this.defineDriver(r)}this._defaultConfig=ec({},ed),this._config=ec({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if((void 0===e?"undefined":r(e))==="object"){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,s){var r=new a(function(t,s){try{var r=e._driver,i=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void s(i);for(var o=el.concat("_initStorage"),d=0,c=o.length;d<c;d++){var u=o[d];if((!et(ea,u)||e[u])&&"function"!=typeof e[u])return void s(i)}for(var h=function(e){return function(){var t=Error("Method "+e+" is not implemented by the current driver"),s=a.reject(t);return l(s,arguments[arguments.length-1]),s}},m=0,f=ea.length;m<f;m++){var p=ea[m];e[p]||(e[p]=h(p))}var g=function(s){er[r]&&console.info("Redefining LocalForage driver: "+r),er[r]=e,en[r]=s,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(g,s):g(!!e._support):g(!0)}catch(e){s(e)}});return d(r,t,s),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,s){var r=er[e]?a.resolve(er[e]):a.reject(Error("Driver not found."));return d(r,t,s),r},e.prototype.getSerializer=function(e){var t=a.resolve(K);return d(t,e),t},e.prototype.ready=function(e){var t=this,s=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return d(s,e,e),s},e.prototype.setDriver=function(e,t,s){var r=this;es(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function l(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}var c=null!==this._driverSet?this._driverSet.catch(function(){return a.resolve()}):a.resolve();return this._driverSet=c.then(function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then(function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(){var e=0;return function t(){for(;e<i.length;){var s=i[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(s).then(l).catch(t)}o();var d=Error("No available storage method found.");return r._driverSet=a.reject(d),r._driverSet}()}})}).catch(function(){o();var e=Error("No available storage method found.");return r._driverSet=a.reject(e),r._driverSet}),d(this._driverSet,t,s),this._driverSet},e.prototype.supports=function(e){return!!en[e]},e.prototype._extend=function(e){ec(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],s=0,r=e.length;s<r;s++){var i=e[s];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=el.length;e<t;e++)!function(e,t){e[t]=function(){var s=arguments;return e.ready().then(function(){return e[t].apply(e,s)})}}(this,el[e])},e.prototype.createInstance=function(t){return new e(t)},e}())},{3:3}]},{},[4])(4)},"./node_modules/localforage/src/utils/createBlob.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var s=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)s.append(e[r]);return s.getBlob(t.type)}}},"./node_modules/localforage/src/utils/executeCallback.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}},"./node_modules/localforage/src/utils/getCallback.js":function(e,t,s){"use strict";function r(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}s.r(t),s.d(t,{default:()=>r})},"./node_modules/localforage/src/utils/normalizeKey.js":function(e,t,s){"use strict";function r(e){return"string"!=typeof e&&(console.warn(`${e} used as a key, but it is not a string.`),e=String(e)),e}s.r(t),s.d(t,{default:()=>r})},"./node_modules/localforage/src/utils/serializer.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>x});var r=s("./node_modules/localforage/src/utils/createBlob.js"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=/^~~local_forage_type~([^~]+)~/,a="__lfsc__:",l=a.length,d="arbf",c="blob",u="si08",h="ui08",m="uic8",f="si16",p="si32",g="ur16",_="ui32",v="fl32",y="fl64",b=l+d.length,j=Object.prototype.toString;function w(e){var t,s,r,o,a,l=.75*e.length,d=e.length,c=0;"="===e[e.length-1]&&(l--,"="===e[e.length-2]&&l--);var u=new ArrayBuffer(l),h=new Uint8Array(u);for(t=0;t<d;t+=4)s=i.indexOf(e[t]),r=i.indexOf(e[t+1]),o=i.indexOf(e[t+2]),a=i.indexOf(e[t+3]),h[c++]=s<<2|r>>4,h[c++]=(15&r)<<4|o>>2,h[c++]=(3&o)<<6|63&a;return u}function S(e){var t,s=new Uint8Array(e),r="";for(t=0;t<s.length;t+=3)r+=i[s[t]>>2],r+=i[(3&s[t])<<4|s[t+1]>>4],r+=i[(15&s[t+1])<<2|s[t+2]>>6],r+=i[63&s[t+2]];return s.length%3==2?r=r.substring(0,r.length-1)+"=":s.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}let x={serialize:function(e,t){var s="";if(e&&(s=j.call(e)),e&&("[object ArrayBuffer]"===s||e.buffer&&"[object ArrayBuffer]"===j.call(e.buffer))){var r,i=a;e instanceof ArrayBuffer?(r=e,i+=d):(r=e.buffer,"[object Int8Array]"===s?i+=u:"[object Uint8Array]"===s?i+=h:"[object Uint8ClampedArray]"===s?i+=m:"[object Int16Array]"===s?i+=f:"[object Uint16Array]"===s?i+=g:"[object Int32Array]"===s?i+=p:"[object Uint32Array]"===s?i+=_:"[object Float32Array]"===s?i+=v:"[object Float64Array]"===s?i+=y:t(Error("Failed to get type for BinaryArray"))),t(i+S(r))}else if("[object Blob]"===s){var o=new FileReader;o.onload=function(){t(a+c+("~~local_forage_type~"+e.type+"~")+S(this.result))},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),t(null,s)}},deserialize:function(e){if(e.substring(0,l)!==a)return JSON.parse(e);var t,s=e.substring(b),i=e.substring(l,b);if(i===c&&o.test(s)){var j=s.match(o);t=j[1],s=s.substring(j[0].length)}var S=w(s);switch(i){case d:return S;case c:return(0,r.default)([S],{type:t});case u:return new Int8Array(S);case h:return new Uint8Array(S);case m:return new Uint8ClampedArray(S);case f:return new Int16Array(S);case g:return new Uint16Array(S);case p:return new Int32Array(S);case _:return new Uint32Array(S);case v:return new Float32Array(S);case y:return new Float64Array(S);default:throw Error("Unkown type: "+i)}},stringToBuffer:w,bufferToString:S}},"./node_modules/mergebounce/mergebounce.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lodash-es/merge.js"),i=s("./node_modules/lodash-es/mergeWith.js"),o=s("./node_modules/@converse/openpromise/dist/openpromise.js");let a=Math.max,l=Math.min;function d(e){if("number"==typeof e)return e;if("string"==typeof e){let t=parseFloat(e);return isNaN(t)?0:t}return 0}let c=function(e,t,s={}){let c,u,h,m,f,p,g=0,_=!1,v=s.promise?(0,o.getOpenPromise)():null;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){let r=c,i=u,a=v;return c=u=void 0,g=t,m=e.apply(i,r),s.promise&&(a.resolve(m),v=(0,o.getOpenPromise)()),s.promise?a:m}function b(e){let s=e-p,r=e-g;return void 0===p||s>=t||s<0||_&&r>=h}function j(){let e=Date.now();if(b(e))return w(e);f=setTimeout(j,function(e){let s=e-p,r=e-g,i=t-s;return _?l(i,h-r):i}(e))}function w(e){return(f=void 0,c)?y(e):(c=u=void 0,s.promise?v:m)}function S(e,t){if(Array.isArray(e)&&Array.isArray(t))if(s?.dedupeArrays)return e.concat(t.filter(t=>-1===e.indexOf(t)));else return e.concat(t)}function x(){var e;let o=Date.now(),a=b(o);if(e=Array.from(arguments),c=c?.length?e.length?s?.concatArrays||s?.dedupeArrays?(0,i.default)(c,e,S):(0,r.default)(c,e):c:e||[],u=this,p=o,a){if(void 0===f)return g=p,f=setTimeout(j,t),s.promise?v:m;if(_)return clearTimeout(f),f=setTimeout(j,t),y(p)}return void 0===f&&(f=setTimeout(j,t)),s.promise?v:m}return t=d(t)||0,function(e){let t=typeof e;return null!=e&&("object"===t||"function"===t)}(s)&&(h=(_="maxWait"in s)?a(d(s.maxWait)||0,t):h),x.cancel=function(){void 0!==f&&clearTimeout(f),g=0,c=p=u=f=void 0},x.flush=function(){return void 0===f?m:w(Date.now())},x}},"./node_modules/pluggable.js/src/pluggable.js":function(e,t,s){"use strict";function r(e,t,s,i,...o){return"function"==typeof s&&(void 0===this.__super__&&(this.__super__=i),this.__super__[e]=s.bind(this)),t.apply(this,o)}s.r(t),s.d(t,{default:()=>a,enable:()=>o});class i{constructor(e,t){this.name=t,this.plugged=e,void 0===this.plugged.__super__?this.plugged.__super__={}:"string"==typeof this.plugged.__super__&&(this.plugged.__super__={__string__:this.plugged.__super__}),this.plugged.__super__[t]=this.plugged,this.plugins={},this.initialized_plugins=[]}_overrideAttribute(e,t){let s=t.overrides[e];if("function"==typeof s){let t={};t[this.name]=this.plugged;let i=this.plugged[e];this.plugged[e]=function(...o){return r.apply(this,[e,s,i,t,...o])}}else this.plugged[e]=s}_extendObject(e,t){for(let[s,i]of(e.prototype.__super__||(e.prototype.__super__={},e.prototype.__super__[this.name]=this.plugged),Object.entries(t)))if("events"===s)e.prototype[s]=Object.assign(i,e.prototype[s]);else if("function"==typeof i){let t={};t[this.name]=this.plugged;let o=e.prototype[s];e.prototype[s]=function(...e){return r.apply(this,[s,i,o,t,...e])}}else e.prototype[s]=i}loadPluginDependencies(e){e.dependencies?.forEach(t=>{let s=this.plugins[t];if(s){if(s.dependencies?.includes(e.__name__))throw'Found a circular dependency between the plugins "'+e.__name__+'" and "'+t+'"';this.initializePlugin(s)}else this.throwUndefinedDependencyError('Could not find dependency "'+t+'" for the plugin "'+e.__name__+"\". If it's needed, make sure it's loaded by require.js")})}throwUndefinedDependencyError(e){if(this.plugged.strict_plugin_dependencies)throw e;console.warn?console.warn(e):console.log(e)}applyOverrides(e){Object.keys(e.overrides||{}).forEach(t=>{let s=e.overrides[t];"object"==typeof s?void 0===this.plugged[t]?this.throwUndefinedDependencyError(`Plugin "${e.__name__}" tried to override "${t}" but it's not found.`):this._extendObject(this.plugged[t],s):this._overrideAttribute(t,e)})}initializePlugin(e){Object.keys(this.allowed_plugins).includes(e.__name__)&&!this.initialized_plugins.includes(e.__name__)&&("boolean"==typeof e.enabled&&e.enabled||e.enabled?.(this.plugged)||null==e.enabled)&&(Object.assign(e,this.properties),e.dependencies&&this.loadPluginDependencies(e),this.applyOverrides(e),"function"==typeof e.initialize&&e.initialize.bind(e)(this),this.initialized_plugins.push(e.__name__))}registerPlugin(e,t){if(e in this.plugins)throw Error("Error: Plugin name "+e+" is already taken");t.__name__=e,this.plugins[e]=t}initializePlugins(e={},t=[],s=[]){if(Object.keys(this.plugins).length){for(let[r,i]of(this.properties=e,this.allowed_plugins={},Object.entries(this.plugins)))(!t.length||t.includes(r))&&!s.includes(r)&&(this.allowed_plugins[r]=i);Object.values(this.allowed_plugins).forEach(e=>this.initializePlugin(e))}}}function o(e,t,s){return void 0===s&&(s="pluginSocket"),void 0===t&&(t="plugged"),e[s]=new i(e,t),e}let a={enable:o}},"./node_modules/sizzle/dist/sizzle.js":function(e){!function(t){var s,r,i,o,a,l,d,c,u,h,m,f,p,g,_,v,y,b,j,w="sizzle"+ +new Date,S=t.document,x=0,E=0,A=ec(),C=ec(),k=ec(),$=ec(),T=function(e,t){return e===t&&(m=!0),0},M={}.hasOwnProperty,O=[],I=O.pop,N=O.push,R=O.push,D=O.slice,L=function(e,t){for(var s=0,r=e.length;s<r;s++)if(e[s]===t)return s;return -1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",z="[\\x20\\t\\r\\n\\f]",U="(?:\\\\[\\da-fA-F]{1,6}"+z+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\["+z+"*("+U+")(?:"+z+"*([*^$|!~]?=)"+z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+z+"*\\]",F=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",q=RegExp(z+"+","g"),H=RegExp("^"+z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+z+"+$","g"),G=RegExp("^"+z+"*,"+z+"*"),W=RegExp("^"+z+"*([>+~]|"+z+")"+z+"*"),V=RegExp(z+"|>"),K=new RegExp(F),J=RegExp("^"+U+"$"),Q={ID:RegExp("^#("+U+")"),CLASS:RegExp("^\\.("+U+")"),TAG:RegExp("^("+U+"|[*])"),ATTR:RegExp("^"+B),PSEUDO:RegExp("^"+F),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+z+"*(even|odd|(([+-]|)(\\d*)n|)"+z+"*(?:([+-]|)"+z+"*(\\d+)|))"+z+"*\\)|)","i"),bool:RegExp("^(?:"+P+")$","i"),needsContext:RegExp("^"+z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+z+"*((?:-\\d)?\\d*)"+z+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,ee=/^[^{]+\{\s*\[native \w/,et=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,es=/[+~]/,er=RegExp("\\\\[\\da-fA-F]{1,6}"+z+"?|\\\\([^\\r\\n\\f])","g"),en=function(e,t){var s="0x"+e.slice(1)-65536;return t||(s<0?String.fromCharCode(s+65536):String.fromCharCode(s>>10|55296,1023&s|56320))},ei=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,eo=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ea=function(){f()},el=eb(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{R.apply(O=D.call(S.childNodes),S.childNodes),O[S.childNodes.length].nodeType}catch(e){R={apply:O.length?function(e,t){N.apply(e,D.call(t))}:function(e,t){for(var s=e.length,r=0;e[s++]=t[r++];);e.length=s-1}}}function ed(e,t,s,i){var o,a,d,u,h,m,g,y=t&&t.ownerDocument,b=t?t.nodeType:9;if(s=s||[],"string"!=typeof e||!e||1!==b&&9!==b&&11!==b)return s;if(!i&&(f(t),t=t||p,_)){if(11!==b&&(h=et.exec(e))){if(o=h[1]){if(9===b){if(!(d=t.getElementById(o)))return s;else if(d.id===o)return s.push(d),s}else if(y&&(d=y.getElementById(o))&&j(t,d)&&d.id===o)return s.push(d),s}else if(h[2])return R.apply(s,t.getElementsByTagName(e)),s;else if((o=h[3])&&r.getElementsByClassName&&t.getElementsByClassName)return R.apply(s,t.getElementsByClassName(o)),s}if(r.qsa&&!$[e+" "]&&(!v||!v.test(e))&&(1!==b||"object"!==t.nodeName.toLowerCase())){if(g=e,y=t,1===b&&(V.test(e)||W.test(e))){for((y=es.test(e)&&e_(t.parentNode)||t)===t&&r.scope||((u=t.getAttribute("id"))?u=u.replace(ei,eo):t.setAttribute("id",u=w)),a=(m=l(e)).length;a--;)m[a]=(u?"#"+u:":scope")+" "+ey(m[a]);g=m.join(",")}try{return R.apply(s,y.querySelectorAll(g)),s}catch(t){$(e,!0)}finally{u===w&&t.removeAttribute("id")}}}return c(e.replace(H,"$1"),t,s,i)}function ec(){var e=[];function t(s,r){return e.push(s+" ")>i.cacheLength&&delete t[e.shift()],t[s+" "]=r}return t}function eu(e){return e[w]=!0,e}function eh(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function em(e,t){for(var s=e.split("|"),r=s.length;r--;)i.attrHandle[s[r]]=t}function ef(e,t){var s=t&&e,r=s&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(s){for(;s=s.nextSibling;)if(s===t)return -1}return e?1:-1}function ep(e){return function(t){if("form"in t){if(t.parentNode&&!1===t.disabled){if("label"in t)if("label"in t.parentNode)return t.parentNode.disabled===e;else return t.disabled===e;return t.isDisabled===e||!e!==t.isDisabled&&el(t)===e}return t.disabled===e}return"label"in t&&t.disabled===e}}function eg(e){return eu(function(t){return t*=1,eu(function(s,r){for(var i,o=e([],s.length,t),a=o.length;a--;)s[i=o[a]]&&(s[i]=!(r[i]=s[i]))})})}function e_(e){return e&&void 0!==e.getElementsByTagName&&e}for(s in r=ed.support={},a=ed.isXML=function(e){var t=e&&e.namespaceURI,s=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||s&&s.nodeName||"HTML")},f=ed.setDocument=function(e){var t,s,o=e?e.ownerDocument||e:S;return o!=p&&9===o.nodeType&&o.documentElement&&(g=(p=o).documentElement,_=!a(p),S!=p&&(s=p.defaultView)&&s.top!==s&&(s.addEventListener?s.addEventListener("unload",ea,!1):s.attachEvent&&s.attachEvent("onunload",ea)),r.scope=eh(function(e){return g.appendChild(e).appendChild(p.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),r.cssHas=eh(function(){try{return p.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}}),r.attributes=eh(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=eh(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ee.test(p.getElementsByClassName),r.getById=eh(function(e){return g.appendChild(e).id=w,!p.getElementsByName||!p.getElementsByName(w).length}),r.getById?(i.filter.ID=function(e){var t=e.replace(er,en);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&_){var s=t.getElementById(e);return s?[s]:[]}}):(i.filter.ID=function(e){var t=e.replace(er,en);return function(e){var s=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return s&&s.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&_){var s,r,i,o=t.getElementById(e);if(o){if((s=o.getAttributeNode("id"))&&s.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((s=o.getAttributeNode("id"))&&s.value===e)return[o]}return[]}}),i.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var s,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;s=o[i++];)1===s.nodeType&&r.push(s);return r}return o},i.find.CLASS=r.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&_)return t.getElementsByClassName(e)},y=[],v=[],(r.qsa=ee.test(p.querySelectorAll))&&(eh(function(e){var t;g.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+z+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+z+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+w+"-]").length||v.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+z+"*name"+z+"*="+z+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),eh(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+z+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),g.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(r.matchesSelector=ee.test(b=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.oMatchesSelector||g.msMatchesSelector))&&eh(function(e){r.disconnectedMatch=b.call(e,"*"),b.call(e,"[s!='']:x"),y.push("!=",F)}),r.cssHas||v.push(":has"),v=v.length&&new RegExp(v.join("|")),y=y.length&&new RegExp(y.join("|")),j=(t=ee.test(g.compareDocumentPosition))||ee.test(g.contains)?function(e,t){var s=9===e.nodeType&&e.documentElement||e,r=t&&t.parentNode;return e===r||!!(r&&1===r.nodeType&&(s.contains?s.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t){for(;t=t.parentNode;)if(t===e)return!0}return!1},T=t?function(e,t){if(e===t)return m=!0,0;var s=!e.compareDocumentPosition-!t.compareDocumentPosition;return s?s:1&(s=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===s?e==p||e.ownerDocument==S&&j(S,e)?-1:t==p||t.ownerDocument==S&&j(S,t)?1:h?L(h,e)-L(h,t):0:4&s?-1:1}:function(e,t){if(e===t)return m=!0,0;var s,r=0,i=e.parentNode,o=t.parentNode,a=[e],l=[t];if(!i||!o)return e==p?-1:t==p?1:i?-1:o?1:h?L(h,e)-L(h,t):0;if(i===o)return ef(e,t);for(s=e;s=s.parentNode;)a.unshift(s);for(s=t;s=s.parentNode;)l.unshift(s);for(;a[r]===l[r];)r++;return r?ef(a[r],l[r]):a[r]==S?-1:+(l[r]==S)}),p},ed.matches=function(e,t){return ed(e,null,null,t)},ed.matchesSelector=function(e,t){if(f(e),r.matchesSelector&&_&&!$[t+" "]&&(!y||!y.test(t))&&(!v||!v.test(t)))try{var s=b.call(e,t);if(s||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return s}catch(e){$(t,!0)}return ed(t,p,null,[e]).length>0},ed.contains=function(e,t){return(e.ownerDocument||e)!=p&&f(e),j(e,t)},ed.attr=function(e,t){(e.ownerDocument||e)!=p&&f(e);var s=i.attrHandle[t.toLowerCase()],o=s&&M.call(i.attrHandle,t.toLowerCase())?s(e,t,!_):void 0;return void 0!==o?o:r.attributes||!_?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ed.escape=function(e){return(e+"").replace(ei,eo)},ed.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ed.uniqueSort=function(e){var t,s=[],i=0,o=0;if(m=!r.detectDuplicates,h=!r.sortStable&&e.slice(0),e.sort(T),m){for(;t=e[o++];)t===e[o]&&(i=s.push(o));for(;i--;)e.splice(s[i],1)}return h=null,e},o=ed.getText=function(e){var t,s="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i)if("string"==typeof e.textContent)return e.textContent;else for(e=e.firstChild;e;e=e.nextSibling)s+=o(e);else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)s+=o(t);return s},(i=ed.selectors={cacheLength:50,createPseudo:eu,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(er,en),e[3]=(e[3]||e[4]||e[5]||"").replace(er,en),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ed.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ed.error(e[0]),e},PSEUDO:function(e){var t,s=!e[6]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":s&&K.test(s)&&(t=l(s,!0))&&(t=s.indexOf(")",s.length-t)-s.length)&&(e[0]=e[0].slice(0,t),e[2]=s.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(er,en).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=A[e+" "];return t||(t=RegExp("(^|"+z+")"+e+"("+z+"|$)"))&&A(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,s){return function(r){var i=ed.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===s:"!="===t?i!==s:"^="===t?s&&0===i.indexOf(s):"*="===t?s&&i.indexOf(s)>-1:"$="===t?s&&i.slice(-s.length)===s:"~="===t?(" "+i.replace(q," ")+" ").indexOf(s)>-1:"|="===t&&(i===s||i.slice(0,s.length+1)===s+"-"))}},CHILD:function(e,t,s,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),l="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,s,d){var c,u,h,m,f,p,g=o!==a?"nextSibling":"previousSibling",_=t.parentNode,v=l&&t.nodeName.toLowerCase(),y=!d&&!l,b=!1;if(_){if(o){for(;g;){for(m=t;m=m[g];)if(l?m.nodeName.toLowerCase()===v:1===m.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?_.firstChild:_.lastChild],a&&y){for(b=(f=(c=(u=(h=(m=_)[w]||(m[w]={}))[m.uniqueID]||(h[m.uniqueID]={}))[e]||[])[0]===x&&c[1])&&c[2],m=f&&_.childNodes[f];m=++f&&m&&m[g]||(b=f=0)||p.pop();)if(1===m.nodeType&&++b&&m===t){u[e]=[x,f,b];break}}else if(y&&(b=f=(c=(u=(h=(m=t)[w]||(m[w]={}))[m.uniqueID]||(h[m.uniqueID]={}))[e]||[])[0]===x&&c[1]),!1===b)for(;(m=++f&&m&&m[g]||(b=f=0)||p.pop())&&(!((l?m.nodeName.toLowerCase()===v:1===m.nodeType)&&++b)||(y&&((u=(h=m[w]||(m[w]={}))[m.uniqueID]||(h[m.uniqueID]={}))[e]=[x,b]),m!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var s,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ed.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(s=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?eu(function(e,s){for(var i,o=r(e,t),a=o.length;a--;)i=L(e,o[a]),e[i]=!(s[i]=o[a])}):function(e){return r(e,0,s)}):r}},pseudos:{not:eu(function(e){var t=[],s=[],r=d(e.replace(H,"$1"));return r[w]?eu(function(e,t,s,i){for(var o,a=r(e,null,i,[]),l=e.length;l--;)(o=a[l])&&(e[l]=!(t[l]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,s),t[0]=null,!s.pop()}}),has:eu(function(e){return function(t){return ed(e,t).length>0}}),contains:eu(function(e){return e=e.replace(er,en),function(t){return(t.textContent||o(t)).indexOf(e)>-1}}),lang:eu(function(e){return J.test(e||"")||ed.error("unsupported lang: "+e),e=e.replace(er,en).toLowerCase(),function(t){var s;do if(s=_?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(s=s.toLowerCase())===e||0===s.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var s=t.location&&t.location.hash;return s&&s.slice(1)===e.id},root:function(e){return e===g},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ep(!1),disabled:ep(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:eg(function(){return[0]}),last:eg(function(e,t){return[t-1]}),eq:eg(function(e,t,s){return[s<0?s+t:s]}),even:eg(function(e,t){for(var s=0;s<t;s+=2)e.push(s);return e}),odd:eg(function(e,t){for(var s=1;s<t;s+=2)e.push(s);return e}),lt:eg(function(e,t,s){for(var r=s<0?s+t:s>t?t:s;--r>=0;)e.push(r);return e}),gt:eg(function(e,t,s){for(var r=s<0?s+t:s;++r<t;)e.push(r);return e})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[s]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(s);for(s in{submit:!0,reset:!0})i.pseudos[s]=function(e){return function(t){var s=t.nodeName.toLowerCase();return("input"===s||"button"===s)&&t.type===e}}(s);function ev(){}function ey(e){for(var t=0,s=e.length,r="";t<s;t++)r+=e[t].value;return r}function eb(e,t,s){var r=t.dir,i=t.next,o=i||r,a=s&&"parentNode"===o,l=E++;return t.first?function(t,s,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,s,i);return!1}:function(t,s,d){var c,u,h,m=[x,l];if(d){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,s,d))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(u=(h=t[w]||(t[w]={}))[t.uniqueID]||(h[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=u[o])&&c[0]===x&&c[1]===l)return m[2]=c[2];if(u[o]=m,m[2]=e(t,s,d))return!0}return!1}}function ej(e){return e.length>1?function(t,s,r){for(var i=e.length;i--;)if(!e[i](t,s,r))return!1;return!0}:e[0]}function ew(e,t,s,r,i){for(var o,a=[],l=0,d=e.length,c=null!=t;l<d;l++)(o=e[l])&&(!s||s(o,r,i))&&(a.push(o),c&&t.push(l));return a}ev.prototype=i.filters=i.pseudos,i.setFilters=new ev,l=ed.tokenize=function(e,t){var s,r,o,a,l,d,c,u=C[e+" "];if(u)return t?0:u.slice(0);for(l=e,d=[],c=i.preFilter;l;){for(a in(!s||(r=G.exec(l)))&&(r&&(l=l.slice(r[0].length)||l),d.push(o=[])),s=!1,(r=W.exec(l))&&(s=r.shift(),o.push({value:s,type:r[0].replace(H," ")}),l=l.slice(s.length)),i.filter)(r=Q[a].exec(l))&&(!c[a]||(r=c[a](r)))&&(s=r.shift(),o.push({value:s,type:a,matches:r}),l=l.slice(s.length));if(!s)break}return t?l.length:l?ed.error(e):C(e,d).slice(0)},d=ed.compile=function(e,t){var s,r,o,a,d=[],c=[],h=k[e+" "];if(!h){for(t||(t=l(e)),a=t.length;a--;)(h=function e(t){for(var s,r,o,a=t.length,l=i.relative[t[0].type],d=l||i.relative[" "],c=+!!l,h=eb(function(e){return e===s},d,!0),m=eb(function(e){return L(s,e)>-1},d,!0),f=[function(e,t,r){var i=!l&&(r||t!==u)||((s=t).nodeType?h(e,t,r):m(e,t,r));return s=null,i}];c<a;c++)if(r=i.relative[t[c].type])f=[eb(ej(f),r)];else{if((r=i.filter[t[c].type].apply(null,t[c].matches))[w]){for(o=++c;o<a&&!i.relative[t[o].type];o++);return function e(t,s,r,i,o,a){return i&&!i[w]&&(i=e(i)),o&&!o[w]&&(o=e(o,a)),eu(function(e,a,l,d){var c,u,h,m=[],f=[],p=a.length,g=e||function(e,t,s){for(var r=0,i=t.length;r<i;r++)ed(e,t[r],s);return s}(s||"*",l.nodeType?[l]:l,[]),_=t&&(e||!s)?ew(g,m,t,l,d):g,v=r?o||(e?t:p||i)?[]:a:_;if(r&&r(_,v,l,d),i)for(c=ew(v,f),i(c,[],l,d),u=c.length;u--;)(h=c[u])&&(v[f[u]]=!(_[f[u]]=h));if(e){if(o||t){if(o){for(c=[],u=v.length;u--;)(h=v[u])&&c.push(_[u]=h);o(null,v=[],c,d)}for(u=v.length;u--;)(h=v[u])&&(c=o?L(e,h):m[u])>-1&&(e[c]=!(a[c]=h))}}else v=ew(v===a?v.splice(p,v.length):v),o?o(null,a,v,d):R.apply(a,v)})}(c>1&&ej(f),c>1&&ey(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(H,"$1"),r,c<o&&e(t.slice(c,o)),o<a&&e(t=t.slice(o)),o<a&&ey(t))}f.push(r)}return ej(f)}(t[a]))[w]?d.push(h):c.push(h);(h=k(e,(s=d.length>0,r=c.length>0,o=function(e,t,o,a,l){var h,m,g,v=0,y="0",b=e&&[],j=[],w=u,S=e||r&&i.find.TAG("*",l),E=x+=null==w?1:Math.random()||.1,A=S.length;for(l&&(u=t==p||t||l);y!==A&&null!=(h=S[y]);y++){if(r&&h){for(m=0,t||h.ownerDocument==p||(f(h),o=!_);g=c[m++];)if(g(h,t||p,o)){a.push(h);break}l&&(x=E)}s&&((h=!g&&h)&&v--,e&&b.push(h))}if(v+=y,s&&y!==v){for(m=0;g=d[m++];)g(b,j,t,o);if(e){if(v>0)for(;y--;)b[y]||j[y]||(j[y]=I.call(a));j=ew(j)}R.apply(a,j),l&&!e&&j.length>0&&v+d.length>1&&ed.uniqueSort(a)}return l&&(x=E,u=w),b},s?eu(o):o))).selector=e}return h},c=ed.select=function(e,t,s,r){var o,a,c,u,h,m="function"==typeof e&&e,f=!r&&l(e=m.selector||e);if(s=s||[],1===f.length){if((a=f[0]=f[0].slice(0)).length>2&&"ID"===(c=a[0]).type&&9===t.nodeType&&_&&i.relative[a[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(er,en),t)||[])[0]))return s;m&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(o=Q.needsContext.test(e)?0:a.length;o--&&(c=a[o],!i.relative[u=c.type]);)if((h=i.find[u])&&(r=h(c.matches[0].replace(er,en),es.test(a[0].type)&&e_(t.parentNode)||t))){if(a.splice(o,1),!(e=r.length&&ey(a)))return R.apply(s,r),s;break}}return(m||d(e,f))(r,t,!_,s,!t||es.test(e)&&e_(t.parentNode)||t),s},r.sortStable=w.split("").sort(T).join("")===w,r.detectDuplicates=!!m,f(),r.sortDetached=eh(function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))}),eh(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||em("type|href|height|width",function(e,t,s){if(!s)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),r.attributes&&eh(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||em("value",function(e,t,s){if(!s&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),eh(function(e){return null==e.getAttribute("disabled")})||em(P,function(e,t,s){var r;if(!s)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null});var eS=t.Sizzle;ed.noConflict=function(){return t.Sizzle===ed&&(t.Sizzle=eS),ed},"function"==typeof define&&define.amd?define(function(){return ed}):e.exports?e.exports=ed:t.Sizzle=ed}(window)},"./node_modules/sprintf-js/src/sprintf.js":function(e,t){!function(){"use strict";var e={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function s(t){return function(t,r){var i,o,a,l,d,c,u,h,m,f=1,p=t.length,g="";for(o=0;o<p;o++)if("string"==typeof t[o])g+=t[o];else if("object"==typeof t[o]){if((l=t[o]).keys)for(a=0,i=r[f];a<l.keys.length;a++){if(void 0==i)throw Error(s('[sprintf] Cannot access property "%s" of undefined value "%s"',l.keys[a],l.keys[a-1]));i=i[l.keys[a]]}else i=l.param_no?r[l.param_no]:r[f++];if(e.not_type.test(l.type)&&e.not_primitive.test(l.type)&&i instanceof Function&&(i=i()),e.numeric_arg.test(l.type)&&"number"!=typeof i&&isNaN(i))throw TypeError(s("[sprintf] expecting number but found %T",i));switch(e.number.test(l.type)&&(h=i>=0),l.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,l.width?parseInt(l.width):0);break;case"e":i=l.precision?parseFloat(i).toExponential(l.precision):parseFloat(i).toExponential();break;case"f":i=l.precision?parseFloat(i).toFixed(l.precision):parseFloat(i);break;case"g":i=l.precision?String(Number(i.toPrecision(l.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=l.precision?i.substring(0,l.precision):i;break;case"t":i=String(!!i),i=l.precision?i.substring(0,l.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=l.precision?i.substring(0,l.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=l.precision?i.substring(0,l.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}e.json.test(l.type)?g+=i:(e.number.test(l.type)&&(!h||l.sign)?(m=h?"+":"-",i=i.toString().replace(e.sign,"")):m="",c=l.pad_char?"0"===l.pad_char?"0":l.pad_char.charAt(1):" ",u=l.width-(m+i).length,d=l.width&&u>0?c.repeat(u):"",g+=l.align?m+i+d:"0"===c?m+d+i:d+m+i)}return g}(function(t){if(i[t])return i[t];for(var s,r=t,o=[],a=0;r;){if(null!==(s=e.text.exec(r)))o.push(s[0]);else if(null!==(s=e.modulo.exec(r)))o.push("%");else if(null!==(s=e.placeholder.exec(r))){if(s[2]){a|=1;var l=[],d=s[2],c=[];if(null!==(c=e.key.exec(d)))for(l.push(c[1]);""!==(d=d.substring(c[0].length));)if(null!==(c=e.key_access.exec(d)))l.push(c[1]);else if(null!==(c=e.index_access.exec(d)))l.push(c[1]);else throw SyntaxError("[sprintf] failed to parse named argument key");else throw SyntaxError("[sprintf] failed to parse named argument key");s[2]=l}else a|=2;if(3===a)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:s[0],param_no:s[1],keys:s[2],sign:s[3],pad_char:s[4],align:s[5],width:s[6],precision:s[7],type:s[8]})}else throw SyntaxError("[sprintf] unexpected placeholder");r=r.substring(s[0].length)}return i[t]=o}(t),arguments)}function r(e,t){return s.apply(null,[e].concat(t||[]))}var i=Object.create(null);t.sprintf=s,t.vsprintf=r,"undefined"!=typeof window&&(window.sprintf=s,window.vsprintf=r,"function"==typeof define&&define.amd&&define(function(){return{sprintf:s,vsprintf:r}}))}()},"./node_modules/strophe.js/dist/strophe.browser.esm.js":function(e,t,s){"use strict";s.r(t),s.d(t,{$build:()=>q,$iq:()=>G,$msg:()=>H,$pres:()=>W,Builder:()=>V,Request:()=>J,Stanza:()=>ej,Strophe:()=>eS,stx:()=>ew,toStanza:()=>ex});let r={HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",SERVER:"jabber:server",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},i={tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"]},o={ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9,CONNTIMEOUT:10,BINDREQUIRED:11,ATTACHFAIL:12,RECONNECTING:13},a={BAD_FORMAT:"bad-format",CONFLICT:"conflict",MISSING_JID_NODE:"x-strophe-bad-non-anon-jid",NO_AUTH_MECH:"no-auth-mech",UNKNOWN_REASON:"unknown"},l={DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},d={NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},c=l.DEBUG,u={setLogLevel(e){if(e<l.DEBUG||e>l.FATAL)throw Error("Invalid log level supplied to setLogLevel");c=e},log(e,t){var s,r,i,o;e<c||(e>=l.ERROR?null==(s=console)||s.error(t):e===l.INFO?null==(r=console)||r.info(t):e===l.WARN?null==(i=console)||i.warn(t):e===l.DEBUG&&(null==(o=console)||o.debug(t)))},debug(e){this.log(l.DEBUG,e)},info(e){this.log(l.INFO,e)},warn(e){this.log(l.WARN,e)},error(e){this.log(l.ERROR,e)},fatal(e){this.log(l.FATAL,e)}};function h(e,t){let s=x(e),r=E(s);if(r)throw Error(`Parser Error: ${r}`);let i=A(s);if(["message","iq","presence"].includes(i.nodeName.toLowerCase())&&"jabber:client"!==i.namespaceURI&&"jabber:server"!==i.namespaceURI){let e=`Invalid namespaceURI ${i.namespaceURI}`;if(t)throw Error(e);u.error(e)}return i}function m(e){void 0!==e.stack&&u.fatal(e.stack),u.fatal("error: "+e.message)}function f(e){let t="",s=e.length;for(let r=0;r<s;r++){let s=e.charCodeAt(r);s>=0&&s<=127?t+=e.charAt(r):(s>2047?(t+=String.fromCharCode(224|s>>12&15),t+=String.fromCharCode(128|s>>6&63)):t+=String.fromCharCode(192|s>>6&31),t+=String.fromCharCode(128|(0|s)&63))}return t}function p(e,t){let s=new Uint8Array(e),r=new Uint8Array(t),i=new Uint8Array(e.byteLength);for(let t=0;t<e.byteLength;t++)i[t]=s[t]^r[t];return i.buffer}function g(e){let t="",s=new Uint8Array(e),r=s.byteLength;for(let e=0;e<r;e++)t+=String.fromCharCode(s[e]);return btoa(t)}function _(e){var t;return null==(t=Uint8Array.from(atob(e),e=>e.charCodeAt(0)))?void 0:t.buffer}function v(e){return new TextEncoder().encode(e).buffer}function y(e){for(let t in"undefined"==typeof document&&u.error("addCookies: not adding any cookies, since there's no document object"),e=e||{})if(Object.prototype.hasOwnProperty.call(e,t)){let s="",r="",i="",o=e[t],a="object"==typeof o,l=escape(unescape(a?o.value:o));a&&(s=o.expires?";expires="+o.expires:"",r=o.domain?";domain="+o.domain:"",i=o.path?";path="+o.path:""),document.cookie=t+"="+l+s+r+i}}let b=null;function j(){return b||(b=document.implementation.createDocument("jabber:client","strophe",null)),b}function w(e){return j().createTextNode(e)}function S(e){let t=Array.from(e.childNodes);return 1===t.length&&t[0].nodeType===d.TEXT||t.forEach(t=>{"body"!==t.nodeName.toLowerCase()&&(t.nodeType!==d.TEXT||/\S/.test(t.nodeValue)?t.nodeType===d.NORMAL&&S(t):e.removeChild(t))}),e}function x(e){return new DOMParser().parseFromString(e,"text/xml")}function E(e){var t;let s=(null==(t=e.firstElementChild)?void 0:t.nodeName)==="parsererror"?e.firstElementChild:e.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","parsererror")[0];return(null==s?void 0:s.nodeName)==="parsererror"?null==s?void 0:s.textContent:null}function A(e){if(e.firstElementChild)return e.firstElementChild;let t,s=0,r=e.childNodes;for(;t=r[s++];)if(1===t.nodeType)return t;return null}function C(e,t,s){if(!e)return null;let r=j().createElement(e);if(s&&("string"==typeof s||"number"==typeof s))r.appendChild(w(s.toString()));else if("string"==typeof t||"number"==typeof t)return r.appendChild(w(t.toString())),r;if(t){if(Array.isArray(t))for(let e of t)Array.isArray(e)&&null!=e[0]&&null!=e[1]&&r.setAttribute(e[0],e[1]);else if("object"==typeof t)for(let e of Object.keys(t))e&&null!=t[e]&&r.setAttribute(e,t[e].toString())}return r}function k(e){for(let t=0;t<i.tags.length;t++)if(e===i.tags[t])return!0;return!1}function $(e,t){let s=i.attributes[e];if((null==s?void 0:s.length)>0){for(let e=0;e<s.length;e++)if(t===s[e])return!0}return!1}function T(e){for(let t=0;t<i.css.length;t++)if(e===i.css[t])return!0;return!1}function M(e){if(e.nodeType===d.NORMAL)return function(e){let t,s=e.nodeName.toLowerCase();if(k(s))try{if(t=C(s),s in i.attributes){let o=i.attributes[s];for(let s=0;s<o.length;s++){let i=o[s],a=e.getAttribute(i);if(null!=a&&""!==a){if("style"===i&&"object"==typeof a){var r;a=null!=(r=a.cssText)?r:a}if("style"===i){let e=[],s=a.split(";");for(let t=0;t<s.length;t++){let r=s[t].split(":"),i=r[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase();if(T(i)){let t=r[1].replace(/^\s*/,"").replace(/\s*$/,"");e.push(i+": "+t)}}e.length>0&&(a=e.join("; "),t.setAttribute(i,a))}else t.setAttribute(i,a)}}for(let s=0;s<e.childNodes.length;s++)t.appendChild(M(e.childNodes[s]))}}catch(e){t=w("")}else{t=j().createDocumentFragment();for(let s=0;s<e.childNodes.length;s++)t.appendChild(M(e.childNodes[s]))}return t}(e);if(e.nodeType===d.FRAGMENT){let t=j().createDocumentFragment();for(let s=0;s<e.childNodes.length;s++)t.appendChild(M(e.childNodes[s]));return t}if(e.nodeType===d.TEXT)return w(e.nodeValue)}function O(e){let t;if(e.nodeType===d.NORMAL){t=C(e.tagName);for(let s=0;s<e.attributes.length;s++)t.setAttribute(e.attributes[s].nodeName,e.attributes[s].value);for(let s=0;s<e.childNodes.length;s++)t.appendChild(O(e.childNodes[s]))}else e.nodeType===d.TEXT&&(t=j().createTextNode(e.nodeValue));return t}function I(e){return e=(e=(e=(e=(e=e.replace(/\&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/'/g,"&apos;")).replace(/"/g,"&quot;")}function N(e,t,s){for(let r=0;r<e.childNodes.length;r++){let i=e.childNodes[r];i.nodeType===d.NORMAL&&(!t||this.isTagEqual(i,t))&&s(i)}}function R(e,t){return e.tagName===t}function D(e){if(!e)return null;let t="";for(let s of(e.childNodes.length||e.nodeType!==d.TEXT||(t+=e.nodeValue),e.childNodes))s.nodeType===d.TEXT&&(t+=s.nodeValue);return I(t)}function L(e){return 0>e.indexOf("@")?null:e.split("@")[0]}function P(e){let t=U(e);if(0>t.indexOf("@"))return t;{let e=t.split("@");return e.splice(0,1),e.join("@")}}function z(e){if(!e)return null;let t=e.split("/");return t.length<2?null:(t.splice(0,1),t.join("/"))}function U(e){return e?e.split("/")[0]:null}let B={utf16to8:f,xorArrayBuffers:p,arrayBufToBase64:g,base64ToArrayBuf:_,stringToArrayBuf:v,addCookies:y};var F=Object.freeze({__proto__:null,toElement:h,handleError:m,utf16to8:f,xorArrayBuffers:p,arrayBufToBase64:g,base64ToArrayBuf:_,stringToArrayBuf:v,addCookies:y,xmlGenerator:j,xmlTextNode:w,stripWhitespace:S,xmlHtmlNode:x,getParserError:E,getFirstElementChild:A,xmlElement:C,validTag:k,validAttribute:$,validCSS:T,createHtml:M,copyElement:O,xmlescape:I,xmlunescape:function(e){return e=(e=(e=(e=(e=e.replace(/\&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&apos;/g,"'")).replace(/&quot;/g,'"')},forEachChild:N,isTagEqual:R,getText:D,escapeNode:function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(e){return"string"!=typeof e?e:e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:L,getDomainFromJid:P,getResourceFromJid:z,getBareJidFromJid:U,default:B});function q(e,t){return new V(e,t)}function H(e){return new V("message",e)}function G(e){return new V("iq",e)}function W(e){return new V("presence",e)}class V{#e;#t;#s;#r;constructor(e,t){("presence"===e||"message"===e||"iq"===e)&&(t&&!t.xmlns?t.xmlns=r.CLIENT:t||(t={xmlns:r.CLIENT})),this.#s=e,this.#r=t}static fromString(e){let t=h(e,!0),s=new V("");return s.#e=t,s}buildTree(){return C(this.#s,this.#r)}get nodeTree(){return this.#e||(this.#e=this.buildTree()),this.#e}get node(){return this.#t||(this.#t=this.tree()),this.#t}set node(e){this.#t=e}static serialize(e){if(!e)return null;let t=e instanceof V?e.tree():e,s=[...Array(t.attributes.length).keys()].map(e=>t.attributes[e].nodeName);s.sort();let r=s.reduce((e,s)=>`${e} ${s}="${I(t.attributes.getNamedItem(s).value)}"`,`<${t.nodeName}`);if(t.childNodes.length>0){r+=">";for(let e=0;e<t.childNodes.length;e++){let s=t.childNodes[e];switch(s.nodeType){case d.NORMAL:r+=V.serialize(s);break;case d.TEXT:r+=I(s.nodeValue);break;case d.CDATA:r+="<![CDATA["+s.nodeValue+"]]>"}}r+="</"+t.nodeName+">"}else r+="/>";return r}tree(){return this.nodeTree}toString(){return V.serialize(this.tree())}up(){return this.node=this.node.parentElement?this.node.parentElement:this.node.parentNode,this}root(){return this.node=this.tree(),this}attrs(e){for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(null!=e[t]?this.node.setAttribute(t,e[t].toString()):this.node.removeAttribute(t));return this}c(e,t,s){let r=C(e,t,s);return this.node.appendChild(r),"string"!=typeof s&&"number"!=typeof s&&(this.node=r),this}cnode(e){let t;e instanceof V&&(e=e.tree());let s=j();try{t=void 0!==s.importNode}catch(e){t=!1}let r=t?s.importNode(e,!0):O(e);return this.node.appendChild(r),this.node=r,this}t(e){let t=w(e);return this.node.appendChild(t),this}h(e){let t=j().createElement("body");t.innerHTML=e;let s=M(t);for(;s.childNodes.length>0;)this.node.appendChild(s.childNodes[0]);return this}}let K=0;class J{constructor(e,t,s,r=0){this.id=++K,this.xmlData=e,this.data=V.serialize(e),this.origFunc=t,this.func=t,this.rid=s,this.date=NaN,this.sends=r,this.abort=!1,this.dead=null,this.age=()=>this.date?(new Date().valueOf()-this.date.valueOf())/1e3:0,this.timeDead=()=>this.dead?(new Date().valueOf()-this.dead.valueOf())/1e3:0,this.xhr=this._newXHR()}getResponse(){var e;let t=null==(e=this.xhr.responseXML)?void 0:e.documentElement;if(t){if("parsererror"===t.tagName)throw u.error("invalid response received"),u.error("responseText: "+this.xhr.responseText),u.error("responseXML: "+V.serialize(t)),Error("parsererror")}else if(this.xhr.responseText){u.debug("Got responseText but no responseXML; attempting to parse it with DOMParser...");let e=x(this.xhr.responseText),t=E(e);if(!e||t){t&&(u.error("invalid response received: "+t),u.error("responseText: "+this.xhr.responseText));let e=Error();throw e.name=a.BAD_FORMAT,e}}return t}_newXHR(){let e=new XMLHttpRequest;return e.overrideMimeType&&e.overrideMimeType("text/xml; charset=utf-8"),e.onreadystatechange=this.func.bind(null,this),e}}let Q=1.1,Y=.1;class X{constructor(e){var t;this._conn=e,this.rid=Math.floor(0xffffffff*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this.inactivity=null,this.strip=null!=(t=X.prototype.strip)&&t,this.lastResponseHeaders=null,this._requests=[]}static setTimeoutMultiplier(e){Q=e}static getTimeoutMultplier(){return Q}static setSecondaryTimeoutMultiplier(e){Y=e}static getSecondaryTimeoutMultplier(){return Y}_buildBody(){let e=q("body",{rid:this.rid++,xmlns:r.HTTPBIND});return null!==this.sid&&e.attrs({sid:this.sid}),this._conn.options.keepalive&&this._conn._sessionCachingSupported()&&this._cacheSession(),e}_reset(){this.rid=Math.floor(0xffffffff*Math.random()),this.sid=null,this.errors=0,this._conn._sessionCachingSupported()&&sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)}_connect(e,t,s){this.wait=e||this.wait,this.hold=t||this.hold,this.errors=0;let i=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":r.BOSH});s&&i.attrs({route:s});let o=this._conn._connect_cb;this._requests.push(new J(i.tree(),this._onRequestStateChange.bind(this,o.bind(this._conn)),Number(i.tree().getAttribute("rid")))),this._throttledRequestHandler()}_attach(e,t,s,r,i,a,l){this._conn.jid=e,this.sid=t,this.rid=s,this._conn.connect_callback=r,this._conn.domain=P(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=i||this.wait,this.hold=a||this.hold,this.window=l||this.window,this._conn._changeConnectStatus(o.ATTACHED,null)}_restore(e,t,s,r,i){let o=JSON.parse(sessionStorage.getItem("strophe-bosh-session"));if(null!=o&&o.rid&&o.sid&&o.jid&&(null==e||U(o.jid)===U(e)||null===L(e)&&P(o.jid)===e))this._conn.restored=!0,this._attach(o.jid,o.sid,o.rid,t,s,r,i);else{let e=Error("_restore: no restoreable session.");throw e.name="StropheSessionError",e}}_cacheSession(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&sessionStorage.setItem("strophe-bosh-session",JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):sessionStorage.removeItem("strophe-bosh-session")}_connect_cb(e){let t=e.getAttribute("type");if(null!==t&&"terminate"===t){let t=e.getAttribute("condition");u.error("BOSH-Connection failed: "+t);let s=e.getElementsByTagName("conflict");return null!==t?("remote-stream-error"===t&&s.length>0&&(t="conflict"),this._conn._changeConnectStatus(o.CONNFAIL,t)):this._conn._changeConnectStatus(o.CONNFAIL,"unknown"),this._conn._doDisconnect(t),o.CONNFAIL}this.sid||(this.sid=e.getAttribute("sid"));let s=e.getAttribute("requests");s&&(this.window=parseInt(s,10));let r=e.getAttribute("hold");r&&(this.hold=parseInt(r,10));let i=e.getAttribute("wait");i&&(this.wait=parseInt(i,10));let a=e.getAttribute("inactivity");a&&(this.inactivity=parseInt(a,10))}_disconnect(e){this._sendTerminate(e)}_doDisconnect(){this.sid=null,this.rid=Math.floor(0xffffffff*Math.random()),this._conn._sessionCachingSupported()&&sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)}_emptyQueue(){return 0===this._requests.length}_callProtocolErrorHandlers(e){let t=X._getRequestStatus(e),s=this._conn.protocolErrorHandlers.HTTP[t];s&&s.call(this,t)}_hitError(e){this.errors++,u.warn("request errored, status: "+e+", number of errors: "+this.errors),this.errors>4&&this._conn._onDisconnectTimeout()}_no_auth_received(e){u.warn("Server did not yet offer a supported authentication mechanism. Sending a blank poll request."),e=e?e.bind(this._conn):this._conn._connect_cb.bind(this._conn);let t=this._buildBody();this._requests.push(new J(t.tree(),this._onRequestStateChange.bind(this,e),Number(t.tree().getAttribute("rid")))),this._throttledRequestHandler()}_onDisconnectTimeout(){this._abortAllRequests()}_abortAllRequests(){for(;this._requests.length>0;){let e=this._requests.pop();e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){}}}_onIdle(){let e=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===e.length&&!this._conn.disconnecting&&(u.debug("no requests during idle cycle, sending blank request"),e.push(null)),!this._conn.paused){if(this._requests.length<2&&e.length>0){let t=this._buildBody();for(let s=0;s<e.length;s++)null!==e[s]&&("restart"===e[s]?t.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":r.BOSH}):t.cnode(e[s]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new J(t.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),Number(t.tree().getAttribute("rid")))),this._throttledRequestHandler()}if(this._requests.length>0){let e=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(Q*this.wait)&&this._throttledRequestHandler(),e>Math.floor(Q*this.wait)&&(u.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(Q*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}}}static _getRequestStatus(e,t){let s;if(4===e.xhr.readyState)try{s=e.xhr.status}catch(e){u.error(`Caught an error while retrieving a request's status, reqStatus: ${s}, message: ${e.message}`)}return void 0===s&&(s="number"==typeof t?t:0),s}_onRequestStateChange(e,t){if(u.debug("request id "+t.id+"."+t.sends+" state changed to "+t.xhr.readyState),t.abort){t.abort=!1;return}if(4!==t.xhr.readyState)return;let s=X._getRequestStatus(t);if(this.lastResponseHeaders=t.xhr.getAllResponseHeaders(),this._conn.disconnecting&&s>=400){this._hitError(s),this._callProtocolErrorHandlers(t);return}let r=this._requests[0]===t,i=this._requests[1]===t,a=s>0&&s<500,l=t.sends>this._conn.maxRetries;(a||l)&&(this._removeRequest(t),u.debug("request id "+t.id+" should now be removed")),200===s?((i||r&&this._requests.length>0&&this._requests[0].age()>Math.floor(Q*this.wait))&&this._restartRequest(0),this._conn.nextValidRid(t.rid+1),u.debug("request id "+t.id+"."+t.sends+" got 200"),e(t),this.errors=0):0===s||s>=400&&s<600||s>=12e3?(u.error("request id "+t.id+"."+t.sends+" error "+s+" happened"),this._hitError(s),this._callProtocolErrorHandlers(t),s>=400&&s<500&&(this._conn._changeConnectStatus(o.DISCONNECTING,null),this._conn._doDisconnect())):u.error("request id "+t.id+"."+t.sends+" error "+s+" happened"),a||l?l&&!this._conn.connected&&this._conn._changeConnectStatus(o.CONNFAIL,"giving-up"):this._throttledRequestHandler()}_processRequest(e){let t=this._requests[e],s=X._getRequestStatus(t,-1);if(t.sends>this._conn.maxRetries)return void this._conn._onDisconnectTimeout();let r=t.age(),i=!isNaN(r)&&r>Math.floor(Q*this.wait),a=null!==t.dead&&t.timeDead()>Math.floor(Y*this.wait),l=4===t.xhr.readyState&&(s<1||s>=500);if((i||a||l)&&(a&&u.error(`Request ${this._requests[e].id} timed out (secondary), restarting`),t.abort=!0,t.xhr.abort(),t.xhr.onreadystatechange=function(){},this._requests[e]=new J(t.xmlData,t.origFunc,t.rid,t.sends),t=this._requests[e]),0===t.xhr.readyState){var d,c,h,m,f,p;u.debug("request id "+t.id+"."+t.sends+" posting");try{let e=this._conn.options.contentType||"text/xml; charset=utf-8";t.xhr.open("POST",this._conn.service,!this._conn.options.sync),void 0!==t.xhr.setRequestHeader&&t.xhr.setRequestHeader("Content-Type",e),this._conn.options.withCredentials&&(t.xhr.withCredentials=!0)}catch(e){u.error("XHR open failed: "+e.toString()),this._conn.connected||this._conn._changeConnectStatus(o.CONNFAIL,"bad-service"),this._conn.disconnect();return}let e=()=>{if(t.date=new Date().valueOf(),this._conn.options.customHeaders){let e=this._conn.options.customHeaders;for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.xhr.setRequestHeader(s,e[s])}t.xhr.send(t.data)};t.sends>1?setTimeout(function(){e()},1e3*Math.min(Math.floor(Q*this.wait),Math.pow(t.sends,3))):e(),t.sends++,this.strip&&"body"===t.xmlData.nodeName&&t.xmlData.childNodes.length?null==(h=(m=this._conn).xmlOutput)||h.call(m,t.xmlData.children[0]):null==(f=(p=this._conn).xmlOutput)||f.call(p,t.xmlData),null==(d=(c=this._conn).rawOutput)||d.call(c,t.data)}else u.debug("_processRequest: "+(0===e?"first":"second")+" request has readyState of "+t.xhr.readyState)}_removeRequest(e){u.debug("removing request");for(let t=this._requests.length-1;t>=0;t--)e===this._requests[t]&&this._requests.splice(t,1);e.xhr.onreadystatechange=function(){},this._throttledRequestHandler()}_restartRequest(e){let t=this._requests[e];null===t.dead&&(t.dead=new Date),this._processRequest(e)}_reqToData(e){try{return e.getResponse()}catch(e){if("parsererror"!==e.message)throw e;this._conn.disconnect("strophe-parsererror")}}_sendTerminate(e){u.debug("_sendTerminate was called");let t=this._buildBody().attrs({type:"terminate"}),s=e instanceof V?e.tree():e;e&&t.cnode(s);let r=new J(t.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),Number(t.tree().getAttribute("rid")));this._requests.push(r),this._throttledRequestHandler()}_send(){clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(()=>this._conn._onIdle(),100)}_sendRestart(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)}_throttledRequestHandler(){this._requests?u.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):u.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}}class Z{constructor(e,t,s,r,i,o,a){this.handler=e,this.ns=t,this.name=s,this.type=r,this.id=i,this.options=a||{matchBareFromJid:!1,ignoreNamespaceFragment:!1},this.options.matchBareFromJid?this.from=o?U(o):null:this.from=o,this.user=!0}getNamespace(e){let t=e.getAttribute("xmlns");return t&&this.options.ignoreNamespaceFragment&&(t=t.split("#")[0]),t}namespaceMatch(e){if(!this.ns||this.getNamespace(e)===this.ns)return!0;for(let s of null!=(t=e.children)?t:[]){var t;if(this.getNamespace(s)===this.ns||this.namespaceMatch(s))return!0}return!1}isMatch(e){let t=e.getAttribute("from");this.options.matchBareFromJid&&(t=U(t));let s=e.getAttribute("type");return!!(this.namespaceMatch(e)&&(!this.name||R(e,this.name)))&&(!this.type||(Array.isArray(this.type)?-1!==this.type.indexOf(s):s===this.type))&&(!this.id||e.getAttribute("id")===this.id)&&(!this.from||t===this.from)}run(e){let t=null;try{t=this.handler(e)}catch(e){throw m(e),e}return t}toString(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}}class ee{constructor(e,t){this.period=e,this.handler=t,this.lastCalled=new Date().getTime(),this.user=!0}run(){return this.lastCalled=new Date().getTime(),this.handler()}reset(){this.lastCalled=new Date().getTime()}toString(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}}class et{constructor(e,t,s){this.mechname=e,this.isClientFirst=t,this.priority=s}test(e){return!0}onStart(e){this._connection=e}onChallenge(e,t){throw Error("You should implement challenge handling!")}clientChallenge(e){if(!this.isClientFirst)throw Error("clientChallenge should not be called if isClientFirst is false!");return this.onChallenge(e)}onFailure(){this._connection=null}onSuccess(){this._connection=null}}class es extends et{constructor(e="ANONYMOUS",t=!1,s=20){super(e,t,s)}test(e){return null===e.authcid}}class er extends et{constructor(e="EXTERNAL",t=!0,s=10){super(e,t,s)}onChallenge(e){return e.authcid===e.authzid?"":e.authzid}}class en extends et{constructor(e="OAUTHBEARER",t=!0,s=40){super(e,t,s)}test(e){return null!==e.pass}onChallenge(e){let t="n,";return null!==e.authcid&&(t=t+"a="+e.authzid),t+=",",t+="\x01",t+="auth=Bearer ",t+=e.pass,t+="\x01",t+="\x01",B.utf16to8(t)}}class ei extends et{constructor(e="PLAIN",t=!0,s=50){super(e,t,s)}test(e){return null!==e.authcid}onChallenge(e){let{authcid:t,authzid:s,domain:r,pass:i}=e;if(!r)throw Error("SASLPlain onChallenge: domain is not defined!");let o=s!==`${t}@${r}`?s:"";return o+="\0",o+=t,o+="\0",o+=i,B.utf16to8(o)}}async function eo(e,t,s){let r=await crypto.subtle.importKey("raw",await crypto.subtle.digest(s,t),{name:"HMAC",hash:s},!1,["sign"]),i=await crypto.subtle.sign("HMAC",r,B.stringToArrayBuf(e));return B.xorArrayBuffers(t,i)}async function ea(e,t,s,r,i){let o=await crypto.subtle.deriveBits({name:"PBKDF2",salt:t,iterations:s,hash:{name:r}},await crypto.subtle.importKey("raw",B.stringToArrayBuf(e),"PBKDF2",!1,["deriveBits"]),i),a=await crypto.subtle.importKey("raw",o,{name:"HMAC",hash:r},!1,["sign"]);return{ck:await crypto.subtle.sign("HMAC",a,B.stringToArrayBuf("Client Key")),sk:await crypto.subtle.sign("HMAC",a,B.stringToArrayBuf("Server Key"))}}async function el(e,t,s){let r=await crypto.subtle.importKey("raw",t,{name:"HMAC",hash:s},!1,["sign"]);return crypto.subtle.sign("HMAC",r,B.stringToArrayBuf(e))}let ed={async scramResponse(e,t,s,r){let i,o,a=e._sasl_data.cnonce,l=function(e){let t,s,r,i=/([a-z]+)=([^,]+)(,|$)/;for(;e.match(i);){let o=e.match(i);switch(e=e.replace(o[0],""),o[1]){case"r":t=o[2];break;case"s":s=B.base64ToArrayBuf(o[2]);break;case"i":r=parseInt(o[2],10);break;case"m":return}}return isNaN(r)||r<4096?void u.warn("Failing SCRAM authentication because server supplied iteration count < 4096."):s?{nonce:t,salt:s,iter:r}:void u.warn("Failing SCRAM authentication because server supplied incorrect salt.")}(t);if(!l&&(null==l?void 0:l.nonce.slice(0,a.length))!==a)return u.warn("Failing SCRAM authentication because server supplied incorrect nonce."),e._sasl_data={},e._sasl_failure_cb();let{pass:d}=e;if("string"==typeof e.pass||e.pass instanceof String){let e=await ea(d,l.salt,l.iter,s,r);i=e.ck,o=e.sk}else{if((null==d?void 0:d.name)!==s||(null==d?void 0:d.salt)!==B.arrayBufToBase64(l.salt)||(null==d?void 0:d.iter)!==l.iter)return e._sasl_failure_cb();let{ck:t,sk:r}=d;i=B.base64ToArrayBuf(t),o=B.base64ToArrayBuf(r)}let c=e._sasl_data["client-first-message-bare"],h=`c=biws,r=${l.nonce}`,m=`${c},${t},${h}`,f=await eo(m,i,s),p=await el(m,o,s);return e._sasl_data["server-signature"]=B.arrayBufToBase64(p),e._sasl_data.keys={name:s,iter:l.iter,salt:B.arrayBufToBase64(l.salt),ck:B.arrayBufToBase64(i),sk:B.arrayBufToBase64(o)},`${h},p=${B.arrayBufToBase64(f)}`},clientChallenge(e,t){let s=t||function(){let e=new Uint8Array(16);return B.arrayBufToBase64(crypto.getRandomValues(e).buffer)}(),r=`n=${e.authcid},r=${s}`;return e._sasl_data.cnonce=s,e._sasl_data["client-first-message-bare"]=r,`n,,${r}`}};class ec extends et{constructor(e="SCRAM-SHA-1",t=!0,s=60){super(e,t,s)}test(e){return null!==e.authcid}async onChallenge(e,t){return await ed.scramResponse(e,t,"SHA-1",160)}clientChallenge(e,t){return ed.clientChallenge(e,t)}}class eu extends et{constructor(e="SCRAM-SHA-256",t=!0,s=70){super(e,t,s)}test(e){return null!==e.authcid}async onChallenge(e,t){return await ed.scramResponse(e,t,"SHA-256",256)}clientChallenge(e,t){return ed.clientChallenge(e,t)}}class eh extends et{constructor(e="SCRAM-SHA-384",t=!0,s=71){super(e,t,s)}test(e){return null!==e.authcid}async onChallenge(e,t){return await ed.scramResponse(e,t,"SHA-384",384)}clientChallenge(e,t){return ed.clientChallenge(e,t)}}class em extends et{constructor(e="SCRAM-SHA-512",t=!0,s=72){super(e,t,s)}test(e){return null!==e.authcid}async onChallenge(e,t){return await ed.scramResponse(e,t,"SHA-512",512)}clientChallenge(e,t){return ed.clientChallenge(e,t)}}class ef extends et{constructor(e="X-OAUTH2",t=!0,s=30){super(e,t,s)}test(e){return null!==e.pass}onChallenge(e){let t="\0";return null!==e.authcid&&(t+=e.authzid),t+="\0",t+=e.pass,B.utf16to8(t)}}class ep extends Error{constructor(e){super(e),this.name="StropheSessionError"}}class eg{constructor(e){this._conn=e,this.strip="wrapper";let t=e.service;if(0!==t.indexOf("ws:")&&0!==t.indexOf("wss:")){let s="";"ws"===e.options.protocol&&"https:"!==location.protocol?s+="ws":s+="wss",s+="://"+location.host,0!==t.indexOf("/")?s+=location.pathname+t:s+=t,e.service=s}}_buildStream(){return q("open",{xmlns:r.FRAMING,to:this._conn.domain,version:"1.0"})}_checkStreamError(e,t){let s;if(0===(s=e.getElementsByTagNameNS?e.getElementsByTagNameNS(r.STREAM,"error"):e.getElementsByTagName("stream:error")).length)return!1;let i=s[0],o="",a="";for(let e=0;e<i.childNodes.length;e++){let t=i.childNodes[e];if(t.nodeType===t.ELEMENT_NODE&&"urn:ietf:params:xml:ns:xmpp-streams"!==t.getAttribute("xmlns"))break;"text"===t.nodeName?a=t.textContent:o=t.nodeName}let l="WebSocket stream error: ";return o?l+=o:l+="unknown",a&&(l+=" - "+a),u.error(l),this._conn._changeConnectStatus(t,o),this._conn._doDisconnect(),!0}_reset(){}_connect(){this._closeSocket(),this.socket=new WebSocket(this._conn.service,"xmpp"),this.socket.onopen=()=>this._onOpen(),this.socket.onerror=e=>this._onError(e),this.socket.onclose=e=>this._onClose(e),this.socket.onmessage=e=>this._onInitialMessage(e)}_connect_cb(e){if(this._checkStreamError(e,o.CONNFAIL))return o.CONNFAIL}_handleStreamStart(e){let t=null,s=e.getAttribute("xmlns");"string"!=typeof s?t="Missing xmlns in <open />":s!==r.FRAMING&&(t="Wrong xmlns in <open />: "+s);let i=e.getAttribute("version");return"string"!=typeof i?t="Missing version in <open />":"1.0"!==i&&(t="Wrong version in <open />: "+i),!t||(this._conn._changeConnectStatus(o.CONNFAIL,t),this._conn._doDisconnect(),!1)}_onInitialMessage(e){if(0===e.data.indexOf("<open ")||0===e.data.indexOf("<?xml")){let t=e.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===t)return;let s=new DOMParser().parseFromString(t,"text/xml").documentElement;this._conn.xmlInput(s),this._conn.rawInput(e.data),this._handleStreamStart(s)&&this._connect_cb(s)}else if(0===e.data.indexOf("<close ")){let t=new DOMParser().parseFromString(e.data,"text/xml").documentElement;this._conn.xmlInput(t),this._conn.rawInput(e.data);let s=t.getAttribute("see-other-uri");if(s){let e=this._conn.service;(e.indexOf("wss:")>=0&&s.indexOf("wss:")>=0||e.indexOf("ws:")>=0)&&(this._conn._changeConnectStatus(o.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=s,this._connect())}else this._conn._changeConnectStatus(o.CONNFAIL,"Received closing stream"),this._conn._doDisconnect()}else{this._replaceMessageHandler();let t=this._streamWrap(e.data),s=new DOMParser().parseFromString(t,"text/xml").documentElement;this._conn._connect_cb(s,null,e.data)}}_replaceMessageHandler(){this.socket.onmessage=e=>this._onMessage(e)}_disconnect(e){if(this.socket&&this.socket.readyState!==WebSocket.CLOSED){e&&this._conn.send(e);let t=q("close",{xmlns:r.FRAMING});this._conn.xmlOutput(t.tree());let s=V.serialize(t);this._conn.rawOutput(s);try{this.socket.send(s)}catch(e){u.warn(`Couldn't send <close /> tag. "${e.message}"`)}}setTimeout(()=>this._conn._doDisconnect(),0)}_doDisconnect(){u.debug("WebSockets _doDisconnect was called"),this._closeSocket()}_streamWrap(e){return"<wrapper>"+e+"</wrapper>"}_closeSocket(){if(this.socket)try{this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null,this.socket.close()}catch(e){u.debug(e.message)}this.socket=null}_emptyQueue(){return!0}_onClose(e){this._conn.connected&&!this._conn.disconnecting?(u.error("Websocket closed unexpectedly"),this._conn._doDisconnect()):e&&1006===e.code&&!this._conn.connected&&this.socket?(u.error("Websocket closed unexcectedly"),this._conn._changeConnectStatus(o.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._conn._doDisconnect()):u.debug("Websocket closed")}_no_auth_received(e){u.error("Server did not offer a supported authentication mechanism"),this._conn._changeConnectStatus(o.CONNFAIL,a.NO_AUTH_MECH),null==e||e.call(this._conn),this._conn._doDisconnect()}_onDisconnectTimeout(){}_abortAllRequests(){}_onError(e){u.error("Websocket error "+JSON.stringify(e)),this._conn._changeConnectStatus(o.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._disconnect()}_onIdle(){let e=this._conn._data;if(e.length>0&&!this._conn.paused){for(let t=0;t<e.length;t++)if(null!==e[t]){let s="restart"===e[t]?this._buildStream().tree():e[t];if("restart"===s)throw Error("Wrong type for stanza");let r=V.serialize(s);this._conn.xmlOutput(s),this._conn.rawOutput(r),this.socket.send(r)}this._conn._data=[]}}_onMessage(e){let t,s='<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" />';if(e.data===s){this._conn.rawInput(s),this._conn.xmlInput(e),this._conn.disconnecting||this._conn._doDisconnect();return}if(0===e.data.search("<open ")){if(t=new DOMParser().parseFromString(e.data,"text/xml").documentElement,!this._handleStreamStart(t))return}else{let s=this._streamWrap(e.data);t=new DOMParser().parseFromString(s,"text/xml").documentElement}if(!this._checkStreamError(t,o.ERROR)){if(this._conn.disconnecting&&"presence"===t.firstElementChild.nodeName&&"unavailable"===t.firstElementChild.getAttribute("type")){this._conn.xmlInput(t),this._conn.rawInput(V.serialize(t));return}this._conn._dataRecv(t,e.data)}}_onOpen(){u.debug("Websocket open");let e=this._buildStream();this._conn.xmlOutput(e.tree());let t=V.serialize(e);this._conn.rawOutput(t),this.socket.send(t)}_send(){this._conn.flush()}_sendRestart(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}}class e_ extends eg{constructor(e){super(e),this._conn=e,this.worker=new SharedWorker(this._conn.options.worker,"Strophe XMPP Connection"),this.worker.onerror=e=>{var t;null==(t=console)||t.error(e),u.error(`Shared Worker Error: ${e}`)}}_setSocket(){this.socket={send:e=>this.worker.port.postMessage(["send",e]),close:()=>this.worker.port.postMessage(["_closeSocket"]),onopen:()=>{},onerror:e=>this._onError(e),onclose:e=>this._onClose(e),onmessage:()=>{},readyState:null}}_connect(){this._setSocket(),this._messageHandler=e=>this._onInitialMessage(e),this.worker.port.start(),this.worker.port.onmessage=e=>this._onWorkerMessage(e),this.worker.port.postMessage(["_connect",this._conn.service,this._conn.jid])}_attach(e){this._setSocket(),this._messageHandler=e=>this._onMessage(e),this._conn.connect_callback=e,this.worker.port.start(),this.worker.port.onmessage=e=>this._onWorkerMessage(e),this.worker.port.postMessage(["_attach",this._conn.service])}_attachCallback(e,t){e===o.ATTACHED?(this._conn.jid=t,this._conn.authenticated=!0,this._conn.connected=!0,this._conn.restored=!0,this._conn._changeConnectStatus(o.ATTACHED)):e===o.ATTACHFAIL&&(this._conn.authenticated=!1,this._conn.connected=!1,this._conn.restored=!1,this._conn._changeConnectStatus(o.ATTACHFAIL))}_disconnect(e){e&&this._conn.send(e);let t=q("close",{xmlns:r.FRAMING});this._conn.xmlOutput(t.tree());let s=V.serialize(t);this._conn.rawOutput(s),this.worker.port.postMessage(["send",s]),this._conn._doDisconnect()}_closeSocket(){this.socket.close()}_replaceMessageHandler(){this._messageHandler=e=>this._onMessage(e)}_onWorkerMessage(e){let{data:t}=e,s=t[0];if("_onMessage"===s)this._messageHandler(t[1]);else if(s in this)try{this[s].apply(this,e.data.slice(1))}catch(e){u.error(e)}else if("log"===s){let e={debug:l.DEBUG,info:l.INFO,warn:l.WARN,error:l.ERROR,fatal:l.FATAL},s=t[1],r=t[2];u.log(e[s],r)}else u.error(`Found unhandled service worker message: ${t}`)}}let ev={};class ey{constructor(e,t={}){for(let s in this.service=e,this.options=t,this.setProtocol(),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_bind=!1,this.do_session=!1,this.mechanisms={},this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.protocolErrorHandlers={HTTP:{},websocket:{}},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(()=>this._onIdle(),100),y(this.options.cookies),this.registerSASLMechanisms(this.options.mechanisms),this.iqFallbackHandler=new Z(e=>this.send(G({type:"error",id:e.getAttribute("id")}).c("error",{type:"cancel"}).c("service-unavailable",{xmlns:r.STANZAS})),null,"iq",["get","set"]),ev)if(Object.prototype.hasOwnProperty.call(ev,s)){let e=function(){};e.prototype=ev[s],this[s]=new e,this[s].init(this)}}static addConnectionPlugin(e,t){ev[e]=t}setProtocol(){let e=this.options.protocol||"";this.options.worker?this._proto=new e_(this):0===this.service.indexOf("ws:")||0===this.service.indexOf("wss:")||0===e.indexOf("ws")?this._proto=new eg(this):this._proto=new X(this)}reset(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this._data=[],this._requests=[],this._uniqueId=0}pause(){this.paused=!0}resume(){this.paused=!1}getUniqueId(e){let t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});return"string"==typeof e||"number"==typeof e?t+":"+e:t+""}addProtocolErrorHandler(e,t,s){this.protocolErrorHandlers[e][t]=s}connect(e,t,s,r,i,a,l,d=3e3){this.jid=e,this.authzid=U(this.jid),this.authcid=l||L(this.jid),this.pass=t,this.scram_keys=null,this.connect_callback=s,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.disconnection_timeout=d,this.domain=P(this.jid),this._changeConnectStatus(o.CONNECTING,null),this._proto._connect(r,i,a)}attach(e,t,s,r,i,o,a){if(this._proto instanceof X&&"string"==typeof e)return this._proto._attach(e,t,s,r,i,o,a);if(this._proto instanceof e_&&"function"==typeof e)return this._proto._attach(e);throw new ep('The "attach" method is not available for your connection protocol')}restore(e,t,s,r,i){if(!(this._proto instanceof X)||!this._sessionCachingSupported())throw new ep('The "restore" method can only be used with a BOSH connection.');this._sessionCachingSupported()&&this._proto._restore(e,t,s,r,i)}_sessionCachingSupported(){if(this._proto instanceof X){if(!JSON)return!1;try{sessionStorage.setItem("_strophe_","_strophe_"),sessionStorage.removeItem("_strophe_")}catch(e){return!1}return!0}return!1}xmlInput(e){}xmlOutput(e){}rawInput(e){}rawOutput(e){}nextValidRid(e){}send(e){if(null!==e){if(Array.isArray(e))e.forEach(e=>this._queueData(e instanceof V?e.tree():e));else{let t=e instanceof V?e.tree():e;this._queueData(t)}this._proto._send()}}flush(){clearTimeout(this._idleTimeout),this._onIdle()}sendPresence(e,t,s,r){let i=null,o=e instanceof V?e.tree():e,a=o.getAttribute("id");if(a||(a=this.getUniqueId("sendPresence"),o.setAttribute("id",a)),"function"==typeof t||"function"==typeof s){let e=this.addHandler(e=>{i&&this.deleteTimedHandler(i),"error"===e.getAttribute("type")?null==s||s(e):t&&t(e)},null,"presence",null,a);r&&(i=this.addTimedHandler(r,()=>(this.deleteHandler(e),null==s||s(null),!1)))}return this.send(o),a}sendIQ(e,t,s,r){let i=null,o=e instanceof V?e.tree():e,a=o.getAttribute("id");if(a||(a=this.getUniqueId("sendIQ"),o.setAttribute("id",a)),"function"==typeof t||"function"==typeof s){let e=this.addHandler(e=>{i&&this.deleteTimedHandler(i);let r=e.getAttribute("type");if("result"===r)null==t||t(e);else if("error"===r)null==s||s(e);else{let e=Error(`Got bad IQ type of ${r}`);throw e.name="StropheError",e}},null,"iq",["error","result"],a);r&&(i=this.addTimedHandler(r,()=>(this.deleteHandler(e),null==s||s(null),!1)))}return this.send(o),a}_queueData(e){if(null===e||!e.tagName||!e.childNodes){let e=Error("Cannot queue non-DOMElement.");throw e.name="StropheError",e}this._data.push(e)}_sendRestart(){this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout(()=>this._onIdle(),100)}addTimedHandler(e,t){let s=new ee(e,t);return this.addTimeds.push(s),s}deleteTimedHandler(e){this.removeTimeds.push(e)}addHandler(e,t,s,r,i,o,a){let l=new Z(e,t,s,r,i,o,a);return this.addHandlers.push(l),l}deleteHandler(e){this.removeHandlers.push(e);let t=this.addHandlers.indexOf(e);t>=0&&this.addHandlers.splice(t,1)}registerSASLMechanisms(e){this.mechanisms={},(e||[es,er,en,ef,ei,ec,eu,eh,em]).forEach(e=>this.registerSASLMechanism(e))}registerSASLMechanism(e){let t=new e;this.mechanisms[t.mechname]=t}disconnect(e){if(this._changeConnectStatus(o.DISCONNECTING,e),e?u.info("Disconnect was called because: "+e):u.debug("Disconnect was called"),this.connected){let e=null;this.disconnecting=!0,this.authenticated&&(e=W({xmlns:r.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(this.disconnection_timeout,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(e)}else u.debug("Disconnect was called before Strophe connected to the server"),this._proto._abortAllRequests(),this._doDisconnect()}_changeConnectStatus(e,t,s){for(let s in ev)if(Object.prototype.hasOwnProperty.call(ev,s)){let r=this[s];if(r.statusChanged)try{r.statusChanged(e,t)}catch(e){u.error(`${s} plugin caused an exception changing status: ${e}`)}}if(this.connect_callback)try{this.connect_callback(e,t,s)}catch(e){m(e),u.error(`User connection callback caused an exception: ${e}`)}}_doDisconnect(e){"number"==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),u.debug("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(o.DISCONNECTED,e),this.connected=!1}_dataRecv(e,t){let s="_reqToData"in this._proto?this._proto._reqToData(e):e;if(null===s)return;for(this.xmlInput!==ey.prototype.xmlInput&&(s.nodeName===this._proto.strip&&s.childNodes.length?this.xmlInput(s.childNodes[0]):this.xmlInput(s)),this.rawInput!==ey.prototype.rawInput&&(t?this.rawInput(t):this.rawInput(V.serialize(s)));this.removeHandlers.length>0;){let e=this.removeHandlers.pop(),t=this.handlers.indexOf(e);t>=0&&this.handlers.splice(t,1)}for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())return void this._doDisconnect();let r=s.getAttribute("type");if(null!==r&&"terminate"===r){if(this.disconnecting)return;let e=s.getAttribute("condition"),t=s.getElementsByTagName("conflict");null!==e?("remote-stream-error"===e&&t.length>0&&(e="conflict"),this._changeConnectStatus(o.CONNFAIL,e)):this._changeConnectStatus(o.CONNFAIL,a.UNKNOWN_REASON),this._doDisconnect(e);return}N(s,null,e=>{let t=[];this.handlers=this.handlers.reduce((s,r)=>{try{r.isMatch(e)&&(this.authenticated||!r.user)?(r.run(e)&&s.push(r),t.push(r)):s.push(r)}catch(e){u.warn("Removing Strophe handlers due to uncaught exception: "+e.message)}return s},[]),!t.length&&this.iqFallbackHandler.isMatch(e)&&this.iqFallbackHandler.run(e)})}_connect_cb(e,t,s){let i,l;u.debug("_connect_cb was called"),this.connected=!0;try{i="_reqToData"in this._proto?this._proto._reqToData(e):e}catch(e){if(e.name!==a.BAD_FORMAT)throw e;this._changeConnectStatus(o.CONNFAIL,a.BAD_FORMAT),this._doDisconnect(a.BAD_FORMAT)}if(!i||(this.xmlInput!==ey.prototype.xmlInput&&(i.nodeName===this._proto.strip&&i.childNodes.length?this.xmlInput(i.childNodes[0]):this.xmlInput(i)),this.rawInput!==ey.prototype.rawInput&&(s?this.rawInput(s):this.rawInput(V.serialize(i))),this._proto._connect_cb(i)===o.CONNFAIL))return;if(!(i.getElementsByTagNameNS?i.getElementsByTagNameNS(r.STREAM,"features").length>0:i.getElementsByTagName("stream:features").length>0||i.getElementsByTagName("features").length>0))return void this._proto._no_auth_received(t);let d=Array.from(i.getElementsByTagName("mechanism")).map(e=>this.mechanisms[e.textContent]).filter(e=>e);if(0===d.length&&0===i.getElementsByTagName("auth").length)return void this._proto._no_auth_received(t);!1!==this.do_authentication&&this.authenticate(d)}sortMechanismsByPriority(e){for(let t=0;t<e.length-1;++t){let s=t;for(let r=t+1;r<e.length;++r)e[r].priority>e[s].priority&&(s=r);if(s!==t){let r=e[t];e[t]=e[s],e[s]=r}}return e}authenticate(e){this._attemptSASLAuth(e)||this._attemptLegacyAuth()}_attemptSASLAuth(e){e=this.sortMechanismsByPriority(e||[]);let t=!1;for(let s=0;s<e.length;++s){if(!e[s].test(this))continue;this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=e[s],this._sasl_mechanism.onStart(this);let i=q("auth",{xmlns:r.SASL,mechanism:this._sasl_mechanism.mechname});if(this._sasl_mechanism.isClientFirst){let e=this._sasl_mechanism.clientChallenge(this);i.t(btoa(e))}this.send(i.tree()),t=!0;break}return t}async _sasl_challenge_cb(e){let t=atob(D(e)),s=await this._sasl_mechanism.onChallenge(this,t),i=q("response",{xmlns:r.SASL});return s&&i.t(btoa(s)),this.send(i.tree()),!0}_attemptLegacyAuth(){null===L(this.jid)?(this._changeConnectStatus(o.CONNFAIL,a.MISSING_JID_NODE),this.disconnect(a.MISSING_JID_NODE)):(this._changeConnectStatus(o.AUTHENTICATING,null),this._addSysHandler(this._onLegacyAuthIQResult.bind(this),null,null,null,"_auth_1"),this.send(G({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:r.AUTH}).c("username",{}).t(L(this.jid)).tree()))}_onLegacyAuthIQResult(){let e="string"==typeof this.pass?this.pass:"",t=G({type:"set",id:"_auth_2"}).c("query",{xmlns:r.AUTH}).c("username",{}).t(L(this.jid)).up().c("password").t(e);return z(this.jid)||(this.jid=U(this.jid)+"/strophe"),t.up().c("resource",{}).t(z(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(t.tree()),!1}_sasl_success_cb(e){if(this._sasl_data["server-signature"]){let t,s=atob(D(e)).match(/([a-z]+)=([^,]+)(,|$)/);if("v"===s[1]&&(t=s[2]),t!==this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}u.info("SASL authentication succeeded."),this._sasl_data.keys&&(this.scram_keys=this._sasl_data.keys),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);let t=[],s=(e,t)=>{for(;e.length;)this.deleteHandler(e.pop());return this._onStreamFeaturesAfterSASL(t),!1};return t.push(this._addSysHandler(e=>s(t,e),null,"stream:features",null,null)),t.push(this._addSysHandler(e=>s(t,e),r.STREAM,"features",null,null)),this._sendRestart(),!1}_onStreamFeaturesAfterSASL(e){this.features=e;for(let t=0;t<e.childNodes.length;t++){let s=e.childNodes[t];"bind"===s.nodeName&&(this.do_bind=!0),"session"===s.nodeName&&(this.do_session=!0)}return this.do_bind?this.options.explicitResourceBinding?this._changeConnectStatus(o.BINDREQUIRED,null):this.bind():this._changeConnectStatus(o.AUTHFAIL,null),!1}bind(){if(!this.do_bind)return void u.info('Connection.prototype.bind called but "do_bind" is false');this._addSysHandler(this._onResourceBindResultIQ.bind(this),null,null,null,"_bind_auth_2");let e=z(this.jid);e?this.send(G({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:r.BIND}).c("resource",{}).t(e).tree()):this.send(G({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:r.BIND}).tree())}_onResourceBindResultIQ(e){if("error"===e.getAttribute("type")){let t;return u.warn("Resource binding failed."),e.getElementsByTagName("conflict").length>0&&(t=a.CONFLICT),this._changeConnectStatus(o.AUTHFAIL,t,e),!1}let t=e.getElementsByTagName("bind");if(!(t.length>0))return u.warn("Resource binding failed."),this._changeConnectStatus(o.AUTHFAIL,null,e),!1;{let e=t[0].getElementsByTagName("jid");e.length>0&&(this.authenticated=!0,this.jid=D(e[0]),this.do_session?this._establishSession():this._changeConnectStatus(o.CONNECTED,null))}}_establishSession(){if(!this.do_session)throw Error(`Connection.prototype._establishSession called but apparently ${r.SESSION} wasn't advertised by the server`);this._addSysHandler(this._onSessionResultIQ.bind(this),null,null,null,"_session_auth_2"),this.send(G({type:"set",id:"_session_auth_2"}).c("session",{xmlns:r.SESSION}).tree())}_onSessionResultIQ(e){return"result"===e.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(o.CONNECTED,null)):"error"===e.getAttribute("type")&&(this.authenticated=!1,u.warn("Session creation failed."),this._changeConnectStatus(o.AUTHFAIL,null,e)),!1}_sasl_failure_cb(e){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(o.AUTHFAIL,null,e),!1}_auth2_cb(e){return"result"===e.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(o.CONNECTED,null)):"error"===e.getAttribute("type")&&(this._changeConnectStatus(o.AUTHFAIL,null,e),this.disconnect("authentication failed")),!1}_addSysTimedHandler(e,t){let s=new ee(e,t);return s.user=!1,this.addTimeds.push(s),s}_addSysHandler(e,t,s,r,i){let o=new Z(e,t,s,r,i);return o.user=!1,this.addHandlers.push(o),o}_onDisconnectTimeout(){return u.debug("_onDisconnectTimeout was called"),this._changeConnectStatus(o.CONNTIMEOUT,null),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1}_onIdle(){for(;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;){let e=this.removeTimeds.pop(),t=this.timedHandlers.indexOf(e);t>=0&&this.timedHandlers.splice(t,1)}let e=new Date().getTime(),t=[];for(let s=0;s<this.timedHandlers.length;s++){let r=this.timedHandlers[s];(this.authenticated||!r.user)&&(r.lastCalled+r.period-e<=0?r.run()&&t.push(r):t.push(r))}this.timedHandlers=t,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout(()=>this._onIdle(),100))}}class eb extends String{}class ej extends V{#n;#i;#o;constructor(e,t){super("stanza"),this.#i=e,this.#o=t}static unsafeXML(e){return new eb(e)}static toElement(e,t){let s=x(e),r=E(s);if(r)throw Error(`Parser Error: ${r}`);let i=S(A(s));if(["message","iq","presence"].includes(i.nodeName.toLowerCase())&&"jabber:client"!==i.namespaceURI&&"jabber:server"!==i.namespaceURI){let e=`Invalid namespaceURI ${i.namespaceURI}`;if(t)throw Error(e);u.error(e)}return i}buildTree(){return ej.toElement(this.toString(),!0)}toString(){return this.#n=this.#n||this.#i.reduce((e,t,s)=>{let r=this.#o.length>s?this.#o[s]:"";return e+t+(Array.isArray(r)?r.map(e=>e instanceof eb||e instanceof V?e:I(e.toString())).join(""):r instanceof eb||r instanceof V?r:I((null!=r?r:"").toString()))},"").trim(),this.#n}}function ew(e,...t){return new ej(e,t)}let eS={VERSION:"3.0.0",get TIMEOUT(){return X.getTimeoutMultplier()},set TIMEOUT(n){X.setTimeoutMultiplier(n)},get SECONDARY_TIMEOUT(){return X.getSecondaryTimeoutMultplier()},set SECONDARY_TIMEOUT(n){X.setSecondaryTimeoutMultiplier(n)},...F,...u,Request:J,Bosh:X,Websocket:eg,WorkerWebsocket:e_,Connection:ey,Handler:Z,SASLAnonymous:es,SASLPlain:ei,SASLSHA1:ec,SASLSHA256:eu,SASLSHA384:eh,SASLSHA512:em,SASLOAuthBearer:en,SASLExternal:er,SASLXOAuth2:ef,Stanza:ej,Builder:V,ElementType:d,ErrorCondition:a,LogLevel:l,NS:r,SASLMechanism:et,Status:o,TimedHandler:ee,XHTML:{...i,validTag:k,validCSS:T,validAttribute:$},serialize:e=>V.serialize(e),setLogLevel(e){u.setLogLevel(e)},addNamespace(e,t){eS.NS[e]=t},addConnectionPlugin(e,t){ey.addConnectionPlugin(e,t)}};globalThis.$build=q,globalThis.$iq=G,globalThis.$msg=H,globalThis.$pres=W,globalThis.Strophe=eS,globalThis.stx=ew;let ex=ej.toElement;globalThis.toStanza=ej.toElement},"./src/headless/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{BaseMessage:()=>h.default,Bookmark:()=>p.Bookmark,Bookmarks:()=>p.Bookmarks,ChatBox:()=>g.ChatBox,EmojiPicker:()=>f.EmojiPicker,MAMPlaceholderMessage:()=>_.MAMPlaceholderMessage,MUC:()=>v.MUC,MUCMessage:()=>v.MUCMessage,MUCMessages:()=>v.MUCMessages,MUCOccupant:()=>v.MUCOccupant,MUCOccupants:()=>v.MUCOccupants,Message:()=>g.Message,Messages:()=>g.Messages,ModelWithMessages:()=>m.default,Presence:()=>y.Presence,Presences:()=>y.Presences,Profile:()=>b.Profile,RosterContact:()=>y.RosterContact,RosterContacts:()=>y.RosterContacts,RosterFilter:()=>y.RosterFilter,VCard:()=>j.VCard,VCards:()=>j.VCards,_converse:()=>d._converse,api:()=>d.api,constants:()=>x,converse:()=>u.default,default:()=>E,errors:()=>S,i18n:()=>d.i18n,log:()=>l.default,parsers:()=>d.parsers,u:()=>c.default});var r=s("./node_modules/dayjs/dayjs.min.js"),i=s.n(r),o=s("./node_modules/dayjs/plugin/advancedFormat.js"),a=s.n(o),l=s("./src/log/index.js"),d=s("./src/headless/shared/index.js"),c=s("./src/headless/utils/index.js"),u=s("./src/headless/shared/api/public.js"),h=s("./src/headless/shared/message.js"),m=s("./src/headless/shared/model-with-messages.js"),f=s("./src/headless/plugins/emoji/index.js"),p=s("./src/headless/plugins/bookmarks/index.js");s("./src/headless/plugins/blocklist/index.js"),s("./src/headless/plugins/bosh/index.js"),s("./src/headless/plugins/caps/index.js");var g=s("./src/headless/plugins/chat/index.js");s("./src/headless/plugins/chatboxes/index.js"),s("./src/headless/plugins/disco/index.js"),s("./src/headless/plugins/adhoc/index.js"),s("./src/headless/plugins/headlines/index.js");var _=s("./src/headless/plugins/mam/index.js"),v=s("./src/headless/plugins/muc/index.js");s("./src/headless/plugins/ping/index.js"),s("./src/headless/plugins/pubsub/index.js");var y=s("./src/headless/plugins/roster/index.js");s("./src/headless/plugins/smacks/index.js");var b=s("./src/headless/plugins/status/index.js"),j=s("./src/headless/plugins/vcard/index.js"),w=s("./src/headless/plugins/muc/constants.js"),S=s("./src/headless/shared/errors.js");i().extend(a());let x=Object.assign({},d.constants,w);Object.assign(d._converse.constants,x);let E=u.default},"./src/headless/plugins/adhoc/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./src/log/index.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/plugins/adhoc/utils.js");let{Strophe:d,$iq:c,u,stx:h}=a.default.env,m={adhoc:{async getCommands(e){try{return(0,l.parseForCommands)(await o.default.disco.items(e,d.NS.ADHOC))}catch(t){return null===t?r.default.error(`Error: timeout while fetching ad-hoc commands for ${e}`):(r.default.error(`Error while fetching ad-hoc commands for ${e}`),r.default.error(t)),[]}},async fetchCommandForm(e,t){let s=c({type:"set",to:e}).c("command",{xmlns:d.NS.ADHOC,action:"execute",node:t});return(0,l.parseCommandResult)(await o.default.sendIQ(s))},async runCommand(e,t,s,a,c){let m=h`<iq type="set" to="${e}" xmlns="jabber:client">
                    <command sessionid="${t}" node="${s}" action="${a}" xmlns="${d.NS.ADHOC}">
                        ${!["cancel","prev"].includes(a)?h`
                            <x xmlns="${d.NS.XFORM}" type="submit">
                                ${c.map(({name:e,value:t})=>h`<field var="${e}"><value>${t}</value></field>`)}
                            </x>`:""}
                    </command>
                </iq>`,f=await o.default.sendIQ(m,null,!1);if(null===f){r.default.warn("A timeout occurred while trying to run an ad-hoc command");let{__:e}=i.default;return{status:"error",note:e("A timeout occurred")}}u.isErrorStanza(f)&&(r.default.error("Error while trying to execute an ad-hoc command"),r.default.error(f));let p=f.querySelector("command"),g=p?.getAttribute("status");return{status:g,..."executing"===g?(0,l.parseCommandResult)(f):{},note:f.querySelector("note")?.textContent}}}}},"./src/headless/plugins/adhoc/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/plugins/adhoc/api.js"),i=s("./src/headless/shared/api/public.js");let{Strophe:o}=i.default.env;o.addNamespace("ADHOC","http://jabber.org/protocol/commands"),i.default.plugins.add("converse-adhoc",{dependencies:["converse-disco"],initialize(){Object.assign(this._converse.api,r.default)}})},"./src/headless/plugins/adhoc/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{parseCommandResult:()=>u,parseForCommands:()=>c});var r=s("./node_modules/sizzle/dist/sizzle.js"),i=s.n(r),o=s("./src/headless/shared/api/public.js"),a=s("./src/headless/shared/parsers.js");let{Strophe:l,u:d}=o.default.env;function c(e){return i()(`query[xmlns="${l.NS.DISCO_ITEMS}"][node="${l.NS.ADHOC}"] item`,e).map(d.getAttributes)}function u(e){let t=i()(`command[xmlns="${l.NS.ADHOC}"]`,e).pop(),s=t.querySelector("note");return{...(0,a.parseXForm)(e),sessionid:t.getAttribute("sessionid"),note:s?{text:s.textContent,type:s.getAttribute("type")}:null,actions:Array.from(t.querySelector("actions")?.children??[]).map(e=>e.nodeName.toLowerCase())}}},"./src/headless/plugins/blocklist/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/shared/api/promise.js"),i=s("./src/headless/plugins/blocklist/utils.js");let{waitUntil:o}=r.default,a={blocklist:{get:async()=>await o("blocklistInitialized"),async add(e,t=!0){let s=await o("blocklistInitialized"),r=Array.isArray(e)?e:[e];return t&&await (0,i.sendBlockStanza)(r),r.forEach(e=>s.create({jid:e})),s},async remove(e,t=!0){let s=await o("blocklistInitialized"),r=Array.isArray(e)?e:[e];return t&&await (0,i.sendUnblockStanza)(r),r.forEach(e=>s.get(e)?.destroy()),s.remove(r),s}}}},"./src/headless/plugins/blocklist/collection.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>p});var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),i=s("./node_modules/@converse/skeletor/dist/skeletor.js"),o=s("./src/log/index.js"),a=s("./src/headless/shared/_converse.js"),l=s("./src/headless/utils/storage.js"),d=s("./src/headless/shared/api/index.js"),c=s("./src/headless/shared/api/public.js"),u=s("./src/headless/plugins/blocklist/model.js");let{stx:h,u:m}=c.default.env;class f extends i.Collection{get idAttribute(){return"jid"}constructor(){super(),this.model=u.default}async initialize(){let{session:e}=a.default,t=`converse.blocklist-${e.get("bare_jid")}`;this.fetched_flag=`${t}-fetched`,(0,l.initStorage)(this,t),this.on("add",this.rejectContactRequest),await this.fetchBlocklist(),d.default.trigger("blocklistInitialized",this)}async rejectContactRequest(e){let t=(await d.default.waitUntil("rosterContactsFetched")).get(e.get("jid"));if(t?.get("requesting")){let e=await d.default.chats.get(t.get("jid"));e?.close(),t.unauthorize().destroy()}}fetchBlocklist(){let e=(0,r.getOpenPromise)();return window.sessionStorage.getItem(this.fetched_flag)?this.fetch({success:()=>e.resolve(),error:()=>e.resolve()}):this.fetchBlocklistFromServer(e),e}async fetchBlocklistFromServer(e){let t=h`<iq xmlns="jabber:client"
            type="get"
            id="${m.getUniqueId()}"><blocklist xmlns="urn:xmpp:blocking"/></iq>`;try{this.onBlocklistReceived(e,await d.default.sendIQ(t))}catch(t){o.default.error(t),e.resolve();return}}async onBlocklistReceived(e,t){if(Array.from(t.querySelectorAll("blocklist item")).forEach(e=>{let t=e.getAttribute("jid"),s=this.get(t);s?s.save({jid:t}):this.create({jid:t})}),window.sessionStorage.setItem(this.fetched_flag,"true"),void 0!==e)return e.resolve()}}let p=f},"./src/headless/plugins/blocklist/index.js":function(e,t,s){"use strict";s.r(t),s("./src/headless/plugins/blocklist/plugin.js")},"./src/headless/plugins/blocklist/model.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js");let{Strophe:i}=s("./src/headless/shared/api/public.js").default.env;class o extends r.Model{get idAttribute(){return"jid"}getDisplayName(){return i.xmlunescape(this.get("name"))}}let a=o},"./src/headless/plugins/blocklist/plugin.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/api/public.js"),a=s("./src/log/index.js"),l=s("./src/headless/plugins/blocklist/collection.js"),d=s("./src/headless/plugins/blocklist/model.js"),c=s("./src/headless/plugins/blocklist/api.js"),u=s("./src/headless/plugins/roster/utils.js");let{Strophe:h,sizzle:m}=o.default.env;h.addNamespace("BLOCKING","urn:xmpp:blocking"),o.default.plugins.add("converse-blocklist",{dependencies:["converse-disco"],initialize(){let e={Blocklist:l.default,BlockedEntity:d.default};Object.assign(r.default.exports,e),Object.assign(i.default,c.default),i.default.promises.add(["blocklistInitialized"]),i.default.listen.on("cachedRoster",async e=>{let t=r.default.session.get("domain");if(await i.default.disco.supports(h.NS.BLOCKING,t)){let t=await i.default.blocklist.get();e.filter(e=>e.get("requesting")).forEach(async e=>{t.get(e.get("jid"))&&((0,u.rejectPresenceSubscription)(e.get("jid")),e.destroy())})}}),i.default.listen.on("getErrorAttributesForMessage",(e,t)=>{if(e.errors.find(e=>"blocked"===e.name&&e.xmlns===`${h.NS.BLOCKING}:errors`)){let{__:e}=r.default;t.error=e("You are blocked from sending messages.")}return t}),i.default.listen.on("connected",()=>{i.default.connection.get().addHandler(e=>{let t=r.default.session.get("bare_jid"),s=e.getAttribute("from");if(h.getBareJidFromJid(s??t)!=t)return a.default.warn(`Received a blocklist push stanza from a suspicious JID ${s}`),!0;let o=m(`block[xmlns="${h.NS.BLOCKING}"] item`,e).map(e=>e.getAttribute("jid"));o.length&&i.default.blocklist.add(o,!1);let l=m(`unblock[xmlns="${h.NS.BLOCKING}"] item`,e).map(e=>e.getAttribute("jid"));return l.length&&i.default.blocklist.remove(l,!1),!0},h.NS.BLOCKING,"iq","set")}),i.default.listen.on("clearSession",()=>{let{state:e}=r.default;e.blocklist&&(e.blocklist.clearStore({silent:!0}),window.sessionStorage.removeItem(e.blocklist.fetched_flag),delete e.blocklist)}),i.default.listen.on("discoInitialized",async()=>{let e=r.default.session.get("domain");await i.default.disco.supports(h.NS.BLOCKING,e)&&(r.default.state.blocklist=new r.default.exports.Blocklist)})}})},"./src/headless/plugins/blocklist/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{sendBlockStanza:()=>c,sendUnblockStanza:()=>d});var r=s("./src/headless/shared/api/public.js"),i=s("./src/headless/shared/api/send.js");let{Strophe:o,stx:a,u:l}=r.default.env;async function d(e){let t=Array.isArray(e)?e:[e],s=a`
        <iq xmlns="jabber:client" type="set" id="${l.getUniqueId()}">
            <unblock xmlns="${o.NS.BLOCKING}">
                ${t.map(e=>a`<item jid="${e}"/>`)}
            </unblock>
        </iq>`;await i.default.sendIQ(s)}async function c(e){let t=Array.isArray(e)?e:[e],s=a`
        <iq xmlns="jabber:client" type="set" id="${l.getUniqueId()}">
            <block xmlns="${o.NS.BLOCKING}">
                ${t.map(e=>a`<item jid="${e}"/>`)}
            </block>
        </iq>`;await i.default.sendIQ(s)}},"./src/headless/plugins/bookmarks/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i}),s("./src/headless/shared/_converse.js");let{waitUntil:r}=s("./src/headless/shared/api/promise.js").default,i={bookmarks:{set:async(e,t=!0,s={})=>(await r("bookmarksInitialized")).setBookmark(e,t,s),get:async e=>(await r("bookmarksInitialized")).get(e)}}},"./src/headless/plugins/bookmarks/collection.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>y});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),o=s("./node_modules/@converse/skeletor/dist/skeletor.js"),a=s("./node_modules/@converse/openpromise/dist/openpromise.js"),l=s("./src/headless/plugins/bookmarks/model.js"),d=s("./src/headless/shared/_converse.js"),c=s("./src/headless/shared/api/index.js"),u=s("./src/headless/shared/api/public.js"),h=s("./src/headless/shared/parsers.js"),m=s("./src/log/index.js"),f=s("./src/headless/utils/storage.js"),p=s("./src/headless/plugins/bookmarks/parsers.js");s("./src/headless/plugins/muc/index.js");let{Strophe:g,stx:_}=u.default.env;class v extends o.Collection{get idAttribute(){return"jid"}constructor(){super([],{comparator:e=>e.getDisplayName().toLowerCase()}),this.model=l.default}async initialize(){this.on("add",e=>this.openBookmarkedRoom(e).then(e=>this.markRoomAsBookmarked(e)).catch(e=>m.default.fatal(e))),this.on("remove",this.leaveRoom,this),this.on("change:autojoin",this.onAutoJoinChanged,this),this.on("remove",(e,t)=>this.sendBookmarkStanza(t),this);let{session:e}=d.default,t=`converse.room-bookmarks${e.get("bare_jid")}`;this.fetched_flag=t+"fetched",(0,f.initStorage)(this,t),await this.fetchBookmarks(),c.default.trigger("bookmarksInitialized",this)}static async checkBookmarksSupport(){let e=d.default.session.get("bare_jid");if(!e)return!1;let t=await c.default.disco.getIdentity("pubsub","pep",e);return c.default.settings.get("allow_public_bookmarks")?!!t:c.default.disco.supports(g.NS.PUBSUB+"#publish-options",e)}async openBookmarkedRoom(e){return c.default.settings.get("muc_respect_autojoin")&&e.get("autojoin")&&(await c.default.rooms.create(e.get("jid"),{nick:e.get("nick"),password:e.get("password")})).maybeShow(),e}fetchBookmarks(){let e=(0,a.getOpenPromise)();return window.sessionStorage.getItem(this.fetched_flag)?this.fetch({success:()=>e.resolve(),error:()=>e.resolve()}):this.fetchBookmarksFromServer(e),e}setBookmark(e,t=!0,s={}){if(!e.jid)return m.default.warn("No JID provided for setBookmark");let r=!1,i=this.get(e.jid);i?Object.keys(e).reduce((t,s)=>t||(e[s]??"")!==(i.attributes[s]??""),!1)&&(i.save(e,s),r=!0):t&&(i=this.create(e,s),r=!0),r&&this.sendBookmarkStanza(i).catch(e=>this.onBookmarkError(e))}getPublishedItems(e,t){if(e!==g.NS.BOOKMARKS2)return _`<item id="current">
                <storage xmlns="${g.NS.BOOKMARKS}">
                ${this.map(e=>_`<conference name="${e.get("name")}" autojoin="${e.get("autojoin")}"
                        jid="${e.get("jid")}">
                        ${e.get("nick")?_`<nick>${e.get("nick")}</nick>`:""}
                        ${e.get("password")?_`<password>${e.get("password")}</password>`:""}
                    </conference>`)}
                </storage>
            </item>`;{let e=t.get("extensions")??[];return _`<item id="${t.get("jid")}">
                        <conference xmlns="${g.NS.BOOKMARKS2}"
                                name="${t.get("name")||r.nothing}"
                                autojoin="${t.get("autojoin")}">
                            ${t.get("nick")?_`<nick>${t.get("nick")}</nick>`:""}
                            ${t.get("password")?_`<password>${t.get("password")}</password>`:""}
                        ${e.length?_`<extensions>${e.map(e=>i.Stanza.fromString(e))}</extensions>`:""}
                        </conference>
                    </item>`}}async sendBookmarkStanza(e){let t=d.default.session.get("bare_jid"),s=await c.default.disco.supports(`${g.NS.BOOKMARKS2}#compat`,t)?g.NS.BOOKMARKS2:g.NS.BOOKMARKS,r=await c.default.disco.supports(`${g.NS.PUBSUB}#config-node-max`,t);return c.default.pubsub.publish(null,s,this.getPublishedItems(s,e),{persist_items:!0,max_items:r?"max":9999,send_last_published_item:"never",access_model:"whitelist"})}onBookmarkError(e){m.default.error("Error while trying to add bookmark"),m.default.error(e)}async fetchBookmarksFromServer(e){let t=d.default.session.get("bare_jid"),s=await c.default.disco.supports(`${g.NS.BOOKMARKS2}#compat`,t)?g.NS.BOOKMARKS2:g.NS.BOOKMARKS,r=_`
            <iq type="get" from="${c.default.connection.get().jid}" xmlns="jabber:client">
                <pubsub xmlns="${g.NS.PUBSUB}">
                    <items node="${s}"/>
                </pubsub>
            </iq>`;c.default.sendIQ(r).then(t=>this.onBookmarksReceived(e,t)).catch(t=>this.onBookmarksReceivedError(e,t))}markRoomAsBookmarked(e){let{chatboxes:t}=d.default.state,s=t.get(e.get("jid"));s?.save("bookmarked",!0)}onAutoJoinChanged(e){e.get("autojoin")?this.openBookmarkedRoom(e):this.leaveRoom(e)}async leaveRoom(e){let t=await c.default.rooms.get(e.get("jid"));t?.close()}async setBookmarksFromStanza(e){(await (0,p.parseStanzaForBookmarks)(e)).forEach(e=>{let t=this.get(e.jid);t?t.save(e):this.create(e)})}async onBookmarksReceived(e,t){if(await this.setBookmarksFromStanza(t),window.sessionStorage.setItem(this.fetched_flag,"true"),void 0!==e)return e.resolve()}async onBookmarksReceivedError(e,t){if(null===t){let{__:t}=d.default;m.default.error("Error: timeout while fetching bookmarks"),c.default.alert("error",t("Timeout Error"),[t("The server did not return your bookmarks within the allowed time. You can reload the page to request them again.")]),e?.reject(Error("Could not fetch bookmarks"))}else{let{errors:s}=u.default.env;await (0,h.parseErrorStanza)(t) instanceof s.ItemNotFoundError?(window.sessionStorage.setItem(this.fetched_flag,"true"),e?.resolve()):(m.default.error("Error while fetching bookmarks"),t&&m.default.error(t),e?.reject(Error("Could not fetch bookmarks")))}}async getUnopenedBookmarks(){await c.default.waitUntil("bookmarksInitialized"),await c.default.waitUntil("chatBoxesFetched");let{chatboxes:e}=d.default.state;return this.filter(t=>!e.get(t.get("jid")))}}let y=v},"./src/headless/plugins/bookmarks/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{Bookmark:()=>r.default,Bookmarks:()=>i.default});var r=s("./src/headless/plugins/bookmarks/model.js"),i=s("./src/headless/plugins/bookmarks/collection.js");s("./src/headless/plugins/bookmarks/plugin.js")},"./src/headless/plugins/bookmarks/model.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js");let{Strophe:i}=s("./src/headless/shared/api/public.js").default.env;class o extends r.Model{get idAttribute(){return"jid"}getDisplayName(){return i.xmlunescape(this.get("name"))||this.get("jid")}}let a=o},"./src/headless/plugins/bookmarks/parsers.js":function(e,t,s){"use strict";s.r(t),s.d(t,{parseStanzaForBookmarks:()=>d});var r=s("./src/headless/shared/api/public.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js");let{Strophe:a,sizzle:l}=r.default.env;async function d(e){let t,s,r=i.default.session.get("bare_jid");return await o.default.disco.supports(`${a.NS.BOOKMARKS2}#compat`,r)?(t=a.NS.BOOKMARKS2,s=`items[node="${t}"] item conference`):(t=a.NS.BOOKMARKS,s=`items[node="${t}"] item storage[xmlns="${t}"] conference`),l(s,e).map(e=>{let s=t===a.NS.BOOKMARKS2?e.parentElement.getAttribute("id"):e.getAttribute("jid");return{jid:s,name:e.getAttribute("name")||s,autojoin:["1","true"].includes(e.getAttribute("autojoin")),nick:e.querySelector("nick")?.textContent??"",password:e.querySelector("password")?.textContent??"",extensions:Array.from(e.querySelector("extensions")?.children??[]).map(e=>e.outerHTML)}})}},"./src/headless/plugins/bookmarks/plugin.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/plugins/bookmarks/model.js"),i=s("./src/headless/plugins/bookmarks/collection.js"),o=s("./src/headless/shared/_converse.js"),a=s("./src/headless/shared/api/index.js"),l=s("./src/headless/shared/api/public.js"),d=s("./src/headless/plugins/bookmarks/utils.js");s("./src/headless/plugins/muc/index.js");var c=s("./src/log/index.js"),u=s("./src/headless/plugins/bookmarks/api.js");let{Strophe:h}=l.default.env;h.addNamespace("BOOKMARKS","storage:bookmarks"),h.addNamespace("BOOKMARKS2","urn:xmpp:bookmarks:1"),l.default.plugins.add("converse-bookmarks",{dependencies:["converse-chatboxes","converse-muc"],initialize(){a.default.settings.extend({allow_bookmarks:!0,allow_public_bookmarks:!1,muc_respect_autojoin:!0}),a.default.promises.add("bookmarksInitialized"),Object.assign(a.default,u.default);let e={Bookmark:r.default,Bookmarks:i.default};Object.assign(o.default,e),Object.assign(o.default.exports,e),a.default.listen.on("getNicknameForMUC",(e,t)=>t||(0,d.getNicknameFromBookmark)(e.get("jid"))),a.default.listen.on("parseMUCPresence",(e,t)=>(t.is_self&&t.codes.includes("303")&&a.default.bookmarks.get(t.muc_jid).then(e=>{e||c.default.warn("parseMUCPresence: no bookmark returned");let{nick:s,muc_jid:r}=t;a.default.bookmarks.set({jid:r,nick:s,autojoin:e?.get("autojoin")??!0,password:e?.get("password")??"",name:e?.get("name")??"",extensions:e?.get("extensions")??[]})}),t)),a.default.listen.on("enteredNewRoom",async({attributes:e})=>{let{jid:t,nick:s,password:r,name:i}=e;await a.default.bookmarks.set({jid:t,autojoin:!0,nick:s,...r?{password:r}:{},...i?{name:i}:{}})}),a.default.listen.on("leaveRoom",async({attributes:e})=>{let{jid:t}=e;await a.default.bookmarks.set({jid:t,autojoin:!1},!1,{silent:!0})}),a.default.listen.on("addClientFeatures",()=>{a.default.settings.get("allow_bookmarks")&&a.default.disco.own.features.add(h.NS.BOOKMARKS+"+notify")}),a.default.listen.on("clearSession",()=>{let{state:e}=o.default;e.bookmarks&&(e.bookmarks.clearStore({silent:!0}),window.sessionStorage.removeItem(e.bookmarks.fetched_flag),delete e.bookmarks)}),a.default.listen.on("connected",async()=>{let e=o.default.session.get("bare_jid"),t=a.default.connection.get();t.addHandler(d.handleBookmarksPush,h.NS.BOOKMARKS,"message","headline",null,e),t.addHandler(d.handleBookmarksPush,h.NS.BOOKMARKS2,"message","headline",null,e),await Promise.all([a.default.waitUntil("chatBoxesFetched")]),(0,d.initBookmarks)()})}})},"./src/headless/plugins/bookmarks/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{getNicknameFromBookmark:()=>d,handleBookmarksPush:()=>c,initBookmarks:()=>l});var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),o=s("./src/log/index.js"),a=s("./src/headless/plugins/bookmarks/collection.js");async function l(){i.default.settings.get("allow_bookmarks")&&await a.default.checkBookmarksSupport()&&(r.default.state.bookmarks=new r.default.exports.Bookmarks,Object.assign(r.default,{bookmarks:r.default.state.bookmarks}))}function d(e){return i.default.settings.get("allow_bookmarks")?r.default.state.bookmarks?.get(e)?.get("nick"):null}function c(e){return i.default.waitUntil("bookmarksInitialized").then(()=>r.default.state.bookmarks.setBookmarksFromStanza(e)).catch(e=>o.default.fatal(e)),!0}},"./src/headless/plugins/bosh/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/headless/shared/api/index.js");let i={tokens:{get(e){let t=r.default.connection.get();return t?"rid"===e.toLowerCase()?t.rid||t._proto.rid:"sid"===e.toLowerCase()?t.sid||t._proto.sid:void 0:null}}}},"./src/headless/plugins/bosh/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/plugins/bosh/api.js"),d=s("./src/headless/plugins/bosh/utils.js");a.default.plugins.add("converse-bosh",{enabled:()=>!i.default.api.settings.get("blacklisted_plugins").includes("converse-bosh"),initialize(){o.default.settings.extend({bosh_service_url:void 0,prebind_url:null}),Object.assign(o.default,l.default),o.default.listen.on("clearSession",d.clearSession),o.default.listen.on("setUserJID",d.saveJIDToSession),o.default.listen.on("login",d.attemptPrebind),o.default.listen.on("addClientFeatures",()=>o.default.disco.own.features.add(r.Strophe.NS.BOSH))}})},"./src/headless/plugins/bosh/utils.js":function(e,t,s){"use strict";let r;s.r(t),s.d(t,{attemptPrebind:()=>_,clearSession:()=>y,restoreBOSHSession:()=>b,saveJIDToSession:()=>v,startNewPreboundBOSHSession:()=>g});var i=s("./src/log/index.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/_converse.js"),l=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),d=s("./node_modules/@converse/skeletor/dist/skeletor.js"),c=s("./src/headless/utils/storage.js"),u=s("./src/headless/utils/session.js"),h=s("./src/headless/utils/init.js"),m=s("./src/headless/shared/constants.js");let f="converse.bosh-session";async function p(){r||((r=new d.Model({id:f})).browserStorage=(0,c.createStore)(f,"session"),await new Promise(e=>r.fetch({success:e,error:e})));let e=a.default.session.get("jid");if(e)r.get("jid")!==e&&(e=await (0,h.setUserJID)(e),r.clear({silent:!0}),r.save({jid:e}));else{let e=r.get("jid");e&&await (0,h.setUserJID)(e)}return r}function g(){if(!o.default.settings.get("prebind_url"))throw Error("startNewPreboundBOSHSession: If you use prebind then you MUST supply a prebind_url");let e=o.default.connection.get(),t=new XMLHttpRequest;t.open("GET",o.default.settings.get("prebind_url"),!0),t.setRequestHeader("Accept","application/json, text/javascript"),t.onload=async function(s){if(t.status>=200&&t.status<400){let s=JSON.parse(t.responseText),r=await (0,h.setUserJID)(s.jid);e.attach(r,s.sid,s.rid,e.onConnectStatusChanged,m.BOSH_WAIT)}else t.onerror(s)},t.onerror=function(){o.default.connection.destroy(),o.default.trigger("noResumeableBOSHSession",a.default)},t.send()}async function _(e,t){if(t.success)return t;let{automatic:s}=t;return await b()?{...t,success:!0}:o.default.settings.get("authentication")===m.PREBIND&&(!s||o.default.settings.get("auto_login"))?(g(),{...t,success:!0}):t}function v(){void 0!==r&&r.save({jid:a.default.session.get("jid")})}function y(){void 0===r?(sessionStorage.removeItem(f),sessionStorage.removeItem(`${f}-${f}`)):(r.destroy(),r=void 0)}async function b(){let e=(await p()).get("jid"),t=o.default.connection.get();if(e&&t._proto instanceof l.Strophe.Bosh)try{return t.restore(e,t.onConnectStatusChanged),!0}catch(t){(0,u.isTestEnv)()||i.default.warn("Could not restore session for jid: "+e+" Error message: "+t.message)}return!1}},"./src/headless/plugins/caps/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),o=s("./src/headless/plugins/caps/utils.js");let{Strophe:a}=i.default.env;a.addNamespace("CAPS","http://jabber.org/protocol/caps"),i.default.plugins.add("converse-caps",{dependencies:["converse-status"],initialize(){r.default.listen.on("constructedPresence",(e,t)=>(0,o.addCapsNode)(t)),r.default.listen.on("constructedMUCPresence",(e,t)=>(0,o.addCapsNode)(t))}})},"./src/headless/plugins/caps/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{addCapsNode:()=>u});var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/public.js"),o=s("./src/headless/utils/arraybuffer.js");let{Strophe:a,stx:l}=i.default.env;function d(e,t){return e.sort((e,s)=>e[t]>s[t]?-1:1)}async function c(){let e=r.default.api.disco.own.identities.get(),t=r.default.api.disco.own.features.get();e.length>1&&(d(e,"category"),d(e,"type"),d(e,"lang"));let s=e.reduce((e,t)=>`${e}${t.category}/${t.type}/${t?.lang??""}/${t.name}<`,"");t.sort(),s=t.reduce((e,t)=>`${e}${t}<`,s);let i=await crypto.subtle.digest("SHA-1",(0,o.stringToArrayBuffer)(s));return(0,o.arrayBufferToBase64)(i)}async function u(e){let t=l`<c
        xmlns="${a.NS.CAPS}"
        hash="sha-1"
        node="https://conversejs.org"
        ver="${await c()}"></c>`;return e.root().cnode(t).up(),e}},"./src/headless/plugins/chat/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),o=s("./src/log/index.js"),a=s("./src/headless/shared/constants.js");let l={chats:{async create(e,t){if("string"==typeof e){if(t&&!t?.fullname){let s=await i.default.contacts.get(e);t.fullname=s?.attributes?.fullname}let s=i.default.chats.get(e,t,!0);return s||void o.default.error("Could not open chatbox for JID: "+e)}return Array.isArray(e)?Promise.all(e.map(async s=>{let r=await i.default.contacts.get(e);return t.fullname=r?.attributes?.fullname,i.default.chats.get(s,t,!0).maybeShow()})):(o.default.error("chats.create: You need to provide at least one JID"),null)},async open(e,t,s){if("string"==typeof e){let r=await i.default.chats.get(e,t,!0);return r?r.maybeShow(s):r}if(Array.isArray(e))return Promise.all(e.map(e=>i.default.chats.get(e,t,!0).then(e=>e&&e.maybeShow(s))).filter(e=>e));let r="chats.open: You need to provide at least one JID";throw o.default.error(r),Error(r)},async get(e,t={},s=!1){async function o(e){let o=await i.default.chatboxes.get(e);return!o&&s?o=await i.default.chatboxes.create(e,t,r.default.exports.ChatBox):(o=o&&o.get("type")===a.PRIVATE_CHAT_TYPE?o:null)&&Object.keys(t).length&&o.save(t),o}return(await i.default.waitUntil("chatBoxesFetched"),void 0===e)?(await i.default.chatboxes.get()).filter(e=>e.get("type")===a.PRIVATE_CHAT_TYPE):"string"==typeof e?o(e):Promise.all(e.map(e=>o(e)))}}}},"./src/headless/plugins/chat/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{ChatBox:()=>r.default,Message:()=>i.default,Messages:()=>o.default});var r=s("./src/headless/plugins/chat/model.js"),i=s("./src/headless/plugins/chat/message.js"),o=s("./src/headless/plugins/chat/messages.js");s("./src/headless/plugins/chat/plugin.js")},"./src/headless/plugins/chat/message.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),i=s("./node_modules/@converse/openpromise/dist/openpromise.js");s("./src/headless/shared/_converse.js");var o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/message.js");class l extends a.default{async initialize(){super.initialize(),this.initialized=(0,i.getOpenPromise)(),this.on("change:type",()=>this.setContact()),await this.setContact(),await o.default.trigger("messageInitialized",this,{synchronous:!0}),this.initialized.resolve()}setContact(){if(["chat","normal"].includes(this.get("type")))return this.setModelContact(r.Strophe.getBareJidFromJid(this.get("from")))}getDisplayName(){return this.contact?this.contact.getDisplayName():this.vcard?this.vcard.getDisplayName():this.get("from")}}let d=l},"./src/headless/plugins/chat/messages.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/plugins/chat/message.js"),i=s("./node_modules/@converse/skeletor/dist/skeletor.js");class o extends i.Collection{constructor(){super(),this.comparator="time",this.model=r.default,this.fetched=null,this.chatbox=null}}let a=o},"./src/headless/plugins/chat/model.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>b});var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),i=s("./src/headless/shared/constants.js"),o=s("./src/headless/shared/_converse.js"),a=s("./src/headless/shared/api/index.js"),l=s("./src/headless/shared/api/public.js"),d=s("./src/log/index.js"),c=s("./src/headless/utils/session.js"),u=s("./src/headless/shared/actions.js"),h=s("./src/headless/shared/model-with-messages.js"),m=s("./src/headless/shared/model-with-vcard.js"),f=s("./src/headless/shared/model-with-contact.js"),p=s("./src/headless/shared/color.js"),g=s("./src/headless/shared/chatbox.js");let{Strophe:_,u:v}=l.default.env;class y extends(0,m.default)((0,h.default)((0,f.default)((0,p.default)(g.default)))){defaults(){return{bookmarked:!1,hidden:(0,c.isUniView)()&&!a.default.settings.get("singleton"),message_type:"chat",num_unread:0,time_opened:this.get("time_opened")||new Date().getTime(),time_sent:new Date(0).toISOString(),type:i.PRIVATE_CHAT_TYPE}}constructor(e,t){super(e,t),this.disable_mam=!1}async initialize(){super.initialize(),this.initialized=(0,r.getOpenPromise)();let e=this.get("jid");this.setPresence(e),await this.setModelContact(e),this.on("change:chat_state",()=>(0,u.sendChatState)(this.get("jid"),this.get("chat_state"))),this.on("change:hidden",()=>this.get("hidden")&&this.setChatState(i.INACTIVE)),await this.fetchMessages(),await a.default.trigger("chatBoxInitialized",this,{synchronous:!0}),this.initialized.resolve()}async setPresence(e){await a.default.waitUntil("presencesInitialized");let{presences:t}=o.default.state;this.presence=t.get(e)||t.create({jid:e}),this.presence.on("change:show",e=>this.onPresenceChanged(e))}async onMessage(e){if(v.isErrorObject(e)){let{stanza:t,message:s}=e;return t&&d.default.error(t),d.default.error(s)}let t=this.getDuplicateMessage(e);if(t)this.updateMessage(t,e);else if(!this.handleReceipt(e)&&!this.handleChatMarker(e)&&!await this.handleRetraction(e)&&(this.setEditable(e,e.time),e.chat_state&&"them"===e.sender&&this.notifications.set("chat_state",e.chat_state),v.shouldCreateMessage(e))){let t=await this.handleCorrection(e)||await this.createMessage(e);this.notifications.set({chat_state:null}),this.handleUnreadMessage(t)}}onPresenceChanged(e){let t,{__:s}=o.default,r=e.get("show"),i=this.getDisplayName();"offline"===r?t=s("%1$s has gone offline",i):"away"===r?t=s("%1$s has gone away",i):"dnd"===r?t=s("%1$s is busy",i):"online"===r&&(t=s("%1$s is online",i)),t&&this.createMessage({message:t,type:"info",is_ephemeral:!0})}async close(){a.default.connection.connected()&&(this.setChatState(i.INACTIVE),(0,u.sendChatState)(this.get("jid"),this.get("chat_state"))),await super.close()}getDisplayName(){if(this.contact){let e=this.contact.getDisplayName({no_jid:!0});if(e)return e}return this.vcard?this.vcard.getDisplayName():this.get("jid")}isSameUser(e,t){return v.isSameBareJID(e,t)}handleChatMarker(e){if(_.getBareJidFromJid(e.to)!==o.default.session.get("bare_jid"))return!1;if(e.is_markable)return!this.contact||["none","to",void 0].includes(this.contact.get("subscription"))||e.is_archived||e.is_carbon||(0,u.sendMarker)(e.from,e.msgid,"received"),!1;if(e.marker_id){let t=this.messages.findWhere({msgid:e.marker_id}),s=`marker_${e.marker}`;return t&&!t.get(s)&&t.save({field_name:new Date().toISOString()}),!0}}async getOutgoingMessageAttributes(e){let t=!!this.get("composing_spoiler"),s=v.getUniqueId(),r=e?.body,i=r?v.shortnamesToUnicode(r):void 0;return e=Object.assign({},e,{body:i,from:o.default.session.get("jid"),fullname:o.default.state.profile.get("fullname"),id:s,is_spoiler:t,jid:this.get("jid"),message:i,msgid:s,nick:this.get("nickname"),origin_id:s,sender:"me",time:new Date().toISOString(),type:this.get("message_type")},await v.getMediaURLsMetadata(r)),e=await a.default.hook("getOutgoingMessageAttributes",this,e)}canPostMessages(){return!0}isChatMessage(e){let t=e.get("type");return t===this.get("message_type")||"normal"===t}}let b=y},"./src/headless/plugins/chat/parsers.js":function(e,t,s){"use strict";s.r(t),s.d(t,{parseMessage:()=>g});var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/api/public.js"),a=s("./node_modules/dayjs/dayjs.min.js"),l=s.n(a),d=s("./src/log/index.js"),c=s("./src/headless/utils/index.js"),u=s("./src/headless/shared/actions.js"),h=s("./src/headless/shared/errors.js"),m=s("./src/headless/shared/parsers.js");let{Strophe:f,sizzle:p}=o.default.env;async function g(e){let t,s;(0,m.throwErrorIfInvalidForward)(e);let o=e.getAttribute("to"),a=f.getResourceFromJid(o),g=r.default.session.get("resource");if(i.default.settings.get("filter_by_resource")&&a&&a!==g)return new h.StanzaParseError(e,`Ignoring incoming message intended for a different resource: ${o}`);let _=r.default.session.get("bare_jid"),v=e,y=e.getAttribute("from")||_;if((0,m.isCarbon)(e))if(y!==_)return(0,u.rejectMessage)(e,"Rejecting carbon from invalid JID"),new h.StanzaParseError(e,`Rejecting carbon from invalid JID ${o}`);else o=(e=p(`[xmlns="${f.NS.CARBONS}"] > forwarded[xmlns="${f.NS.FORWARD}"] > message`,e).pop()).getAttribute("to"),y=e.getAttribute("from");let b=(0,m.isArchived)(e);if(b)if(y!==_)return new h.StanzaParseError(e,`Invalid Stanza: alleged MAM message from ${e.getAttribute("from")}`);else o=(e=p(`[xmlns="${f.NS.MAM}"] > forwarded[xmlns="${f.NS.FORWARD}"] > message`,e).pop()).getAttribute("to"),y=e.getAttribute("from");let j=f.getBareJidFromJid(y),w=j===_;if(w&&null===o)return new h.StanzaParseError(e,`Don't know how to handle message stanza without 'to' attribute. ${e.outerHTML}`);let S=(0,m.isHeadline)(e),x=(0,m.isServerMessage)(e);if(!S&&!x&&(s=w?f.getBareJidFromJid(o):j,void 0===(t=await i.default.contacts.get(s))&&!i.default.settings.get("allow_non_roster_messaging")))return d.default.error(e),new h.StanzaParseError(e,"Blocking messaging with a JID not in our roster because allow_non_roster_messaging is false.");let E=p(`delay[xmlns="${f.NS.DELAY}"]`,v).pop(),A=(0,m.getChatMarker)(e),C=new Date().toISOString(),k=Object.assign({contact_jid:s,is_archived:b,is_headline:S,is_server_message:x,body:e.querySelector("body")?.textContent?.trim(),chat_state:(0,m.getChatState)(e),from:e.getAttribute("from"),is_carbon:(0,m.isCarbon)(v),is_delayed:!!E,is_markable:!!p(`markable[xmlns="${f.NS.MARKERS}"]`,e).length,is_marker:!!A,is_unstyled:!!p(`unstyled[xmlns="${f.NS.STYLING}"]`,e).length,marker_id:A&&A.getAttribute("id"),nick:t?.attributes?.nickname,receipt_id:(0,m.getReceiptId)(e),received:new Date().toISOString(),references:(0,m.getReferences)(e),sender:w?"me":"them",subject:e.querySelector("subject")?.textContent,thread:e.querySelector("thread")?.textContent,time:E?l()(E.getAttribute("stamp")).toISOString():C,to:e.getAttribute("to"),type:e.getAttribute("type")||"normal"},(0,m.getErrorAttributes)(e),(0,m.getOutOfBandAttributes)(e),(0,m.getSpoilerAttributes)(e),(0,m.getCorrectionAttributes)(e,v),(0,m.getStanzaIDs)(e,v),(0,m.getRetractionAttributes)(e,v),(0,m.getEncryptionAttributes)(e));if(k.is_archived){let t=v.getAttribute("from");if(t&&t!==_)return new h.StanzaParseError(e,`Invalid Stanza: Forged MAM message from ${t}`)}(k=Object.assign({message:k.body||k.error,is_valid_receipt_request:(0,m.isValidReceiptRequest)(e,k)},k)).id=k.origin_id||k[`stanza_id ${k.from}`]||c.default.getUniqueId(),k=await i.default.hook("parseMessage",e,k);let $=await c.default.getMediaURLsMetadata(k.is_encrypted?k.plaintext:k.body);return Object.assign(k,$)}},"./src/headless/plugins/chat/plugin.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/plugins/chat/model.js"),i=s("./src/headless/plugins/chat/message.js"),o=s("./src/headless/plugins/chat/messages.js"),a=s("./src/headless/shared/_converse.js"),l=s("./src/headless/shared/api/index.js"),d=s("./src/headless/shared/api/public.js"),c=s("./src/headless/plugins/chatboxes/api.js"),u=s("./src/headless/plugins/chat/api.js"),h=s("./src/headless/shared/constants.js"),m=s("./src/headless/plugins/chat/utils.js");d.default.plugins.add("converse-chat",{dependencies:["converse-chatboxes","converse-disco"],initialize(){l.default.settings.extend({allow_message_corrections:"all",allow_message_retraction:"all",allow_message_styling:!0,auto_join_private_chats:[],clear_messages_on_reconnection:!1,filter_by_resource:!1,prune_messages_above:void 0,pruning_behavior:"unscrolled",send_chat_markers:["received","displayed","acknowledged"],send_chat_state_notifications:!0});let e={ChatBox:r.default,Message:i.default,Messages:o.default,handleMessageStanza:m.handleMessageStanza};Object.assign(a.default,e),Object.assign(a.default.exports,e),Object.assign(l.default,u.default),c.default.registry.add(h.PRIVATE_CHAT_TYPE,r.default),(0,m.routeToChat)(),addEventListener("hashchange",m.routeToChat),l.default.listen.on("chatBoxesFetched",m.autoJoinChats),l.default.listen.on("presencesInitialized",m.registerMessageHandlers),l.default.listen.on("connected",()=>(0,m.enableCarbons)()),l.default.listen.on("reconnected",()=>(0,m.enableCarbons)())}})},"./src/headless/plugins/chat/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{autoJoinChats:()=>y,enableCarbons:()=>w,handleMessageStanza:()=>j,isNewMessage:()=>_,registerMessageHandlers:()=>b,routeToChat:()=>g});var r=s("./node_modules/sizzle/dist/sizzle.js"),i=s.n(r),o=s("./node_modules/@converse/skeletor/dist/skeletor.js"),a=s("./src/headless/shared/_converse.js"),l=s("./src/headless/shared/api/index.js"),d=s("./src/headless/shared/api/public.js"),c=s("./src/log/index.js"),u=s("./src/headless/shared/parsers.js"),h=s("./src/headless/plugins/chat/parsers.js"),m=s("./src/headless/shared/constants.js");let{Strophe:f,u:p}=d.default.env;function g(e){if(!location.hash.startsWith("#converse/chat?jid="))return;e?.preventDefault();let t=location.hash.split("=").pop();if(!p.isValidJID(t))return c.default.warn(`Invalid JID "${t}" provided in URL fragment`);l.default.chats.open(t)}function _(e){return e instanceof Element?!(i()(`result[xmlns="${f.NS.MAM}"]`,e).length&&i()(`delay[xmlns="${f.NS.DELAY}"]`,e).length):(e instanceof o.Model&&(e=e.attributes),!(e.is_delayed&&e.is_archived))}async function v(e){let t=f.getBareJidFromJid(e.getAttribute("from")),s=a.default.session.get("bare_jid");if(p.isSameBareJID(t,s))return;let r=await l.default.chatboxes.get(t);r?.get("type")===m.PRIVATE_CHAT_TYPE&&r?.handleErrorMessageStanza(e)}function y(){l.default.settings.get("auto_join_private_chats").forEach(e=>{a.default.state.chatboxes.where({jid:e}).length||("string"==typeof e?l.default.chats.open(e):c.default.error('Invalid jid criteria specified for "auto_join_private_chats"'))}),l.default.trigger("privateChatsAutoJoined")}function b(){l.default.connection.get().addHandler(e=>!!(["groupchat","error"].includes(e.getAttribute("type"))||(0,u.isHeadline)(e)||(0,u.isServerMessage)(e)||(0,u.isArchived)(e))||a.default.exports.handleMessageStanza(e)||!0,null,"message"),l.default.connection.get().addHandler(e=>(v(e),!0),null,"message","error")}async function j(e){let t;if(e=e instanceof Element?e:e.tree(),(0,u.isServerMessage)(e)){let t=e.getAttribute("from");return c.default.info(`handleMessageStanza: Ignoring incoming server message from JID: ${t}`)}if(await (0,u.isMUCPrivateMessage)(e))return!0;try{t=await (0,h.parseMessage)(e)}catch(e){return c.default.error(e)}if(p.isErrorObject(t)){let{stanza:e,message:s}=t;return e&&c.default.error(e),c.default.error(s)}let{body:s,plaintext:r,contact_jid:i,nick:o}=t,a=await l.default.chats.get(i,{nickname:o},!!(s||r));await a?.queueMessage(t);let d={stanza:e,attrs:t,chatbox:a};l.default.trigger("message",d)}async function w(){let e=a.default.session.get("bare_jid"),t=f.getDomainFromJid(e);if(!await l.default.disco.supports(f.NS.CARBONS,t))return void c.default.warn("Not enabling carbons because it's not supported!");let s=new f.Builder("iq",{from:l.default.connection.get().jid,type:"set"}).c("enable",{xmlns:f.NS.CARBONS}),r=await l.default.sendIQ(s,null,!1);null===r?c.default.warn("A timeout occurred while trying to enable carbons"):p.isErrorStanza(r)?(c.default.warn("An error occurred while trying to enable message carbons."),c.default.error(r)):c.default.debug("Message carbons have been enabled.")}},"./src/headless/plugins/chatboxes/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/promise.js"),o=s("./src/headless/plugins/chatboxes/utils.js");let{waitUntil:a}=i.default,l={},d={create:async(e=[],t={},s)=>(await a("chatBoxesFetched"),"string"==typeof e)?(0,o.createChatBox)(e,t,s):Promise.all(e.map(e=>(0,o.createChatBox)(e,t,s))),async get(e){await a("chatBoxesFetched");let{chatboxes:t}=r.default.state;return void 0===e?t.models:"string"==typeof e?t.get(e.toLowerCase()):(e=e.map(e=>e.toLowerCase()),t.models.filter(t=>e.includes(t.get("jid"))))},registry:{add(e,t){l[e]=t},get:e=>l[e]}}},"./src/headless/plugins/chatboxes/chatboxes.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),o=s("./node_modules/@converse/skeletor/dist/skeletor.js"),a=s("./src/headless/utils/storage.js");class l extends o.Collection{constructor(e,t){super(e,Object.assign({comparator:"time_opened"},t))}onChatBoxesFetched(e){e.filter(e=>!e.isValid()).forEach(e=>e.destroy()),i.default.trigger("chatBoxesFetched")}onConnected(e){if(e)return;let t=r.default.session.get("bare_jid");(0,a.initStorage)(this,`converse.chatboxes-${t}`),this.fetch({add:!0,success:e=>this.onChatBoxesFetched(e)})}createModel(e,t){if(!e.type)throw Error("You need to specify a type of chatbox to be created");return new(i.default.chatboxes.registry.get(e.type))(e,t)}}let d=l},"./src/headless/plugins/chatboxes/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/plugins/chatboxes/chatboxes.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/utils/session.js"),d=s("./src/headless/plugins/chatboxes/api.js"),c=s("./src/headless/plugins/chatboxes/utils.js");s("./src/headless/plugins/emoji/index.js");let{Strophe:u}=a.default.env;a.default.plugins.add("converse-chatboxes",{dependencies:["converse-emoji","converse-roster","converse-vcard"],initialize(){let e;o.default.promises.add(["chatBoxesFetched","chatBoxesInitialized","privateChatsAutoJoined"]),Object.assign(o.default,{chatboxes:d.default}),Object.assign(i.default,{ChatBoxes:r.default}),Object.assign(i.default.exports,{ChatBoxes:r.default}),o.default.listen.on("addClientFeatures",()=>{o.default.disco.own.features.add(u.NS.MESSAGE_CORRECT),o.default.disco.own.features.add(u.NS.HTTPUPLOAD),o.default.disco.own.features.add(u.NS.OUTOFBAND)}),o.default.listen.on("pluginsInitialized",()=>{e=new i.default.exports.ChatBoxes,Object.assign(i.default,{chatboxes:e}),Object.assign(i.default.state,{chatboxes:e}),o.default.trigger("chatBoxesInitialized")}),o.default.listen.on("presencesInitialized",t=>e.onConnected(t)),o.default.listen.on("reconnected",()=>e.forEach(e=>e.onReconnection())),o.default.listen.on("clearSession",c.onClearSession),o.default.listen.on("chatBoxClosed",()=>{(0,l.isUniView)()&&i.default.state.chatboxes.find(e=>e.get("jid"))?.maybeShow()})}})},"./src/headless/plugins/chatboxes/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{createChatBox:()=>c,onClearSession:()=>d});var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),i=s("./src/log/index.js"),o=s("./src/headless/shared/_converse.js"),a=s("./src/headless/utils/session.js"),l=s("./src/headless/shared/constants.js");async function d(){if((0,a.shouldClearCache)(o.default)){let{chatboxes:e}=o.default.state;await Promise.all(e.map(e=>e.messages?.clearStore({silent:!0}))),e.clearStore({silent:!0},e=>e.get("type")!==l.CONTROLBOX_TYPE)}}async function c(e,t,s){let a;Object.assign(t,{jid:e=r.Strophe.getBareJidFromJid(e.toLowerCase()),id:e});try{a=new s(t,{collection:o.default.state.chatboxes})}catch(e){return i.default.error(e),null}return(await a.initialized,a.isValid())?(o.default.state.chatboxes.add(a),a):(a.destroy(),null)}},"./src/headless/plugins/disco/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/log/index.js");let{Strophe:d,$iq:c}=a.default.env,u={disco:{stream:{async getFeature(e,t){await o.default.waitUntil("streamFeaturesAdded");let s=i.default.state.stream_features;if(!e||!t)throw Error("name and xmlns need to be provided when calling disco.stream.getFeature");if(void 0===s&&!o.default.connection.connected()){let s=`Tried to get feature ${e} ${t} but stream_features has been torn down`;l.default.warn(s);return}return s.findWhere({name:e,xmlns:t})}},own:{identities:{add(e,t,s,r){let o=i.default.state.disco;for(var a=0;a<o._identities.length;a++)if(o._identities[a].category==e&&o._identities[a].type==t&&o._identities[a].name==s&&o._identities[a].lang==r)return!1;o._identities.push({category:e,type:t,name:s,lang:r})},clear(){i.default.state.disco._identities=[]},get:()=>i.default.state.disco._identities},features:{add(e){let t=i.default.state.disco;for(let s=0;s<t._features.length;s++)if(t._features[s]==e)return!1;t._features.push(e)},clear(){i.default.state.disco._features=[]},get:()=>i.default.state.disco._features}},info(e,t){let s={xmlns:d.NS.DISCO_INFO};t&&(s.node=t);let r=c({from:o.default.connection.get().jid,to:e,type:"get"}).c("query",s);return o.default.sendIQ(r)},items(e,t){let s={xmlns:d.NS.DISCO_ITEMS};return t&&(s.node=t),o.default.sendIQ(c({from:o.default.connection.get().jid,to:e,type:"get"}).c("query",s))},entities:{async get(e,t=!1){await o.default.waitUntil("discoInitialized");let s=i.default.state.disco_entities;if(!e)return s;if(void 0===s)return void l.default.warn(`Tried to look up entity ${e} but disco_entities has been torn down`);let r=s.get(e);return r||!t?r:o.default.disco.entities.create({jid:e})},async items(e){let t=await o.default.disco.entities.get(e);return await t.waitUntilItemsFetched,i.default.state.disco_entities.filter(t=>t.get("parent_jids")?.includes(e))},create:(e,t)=>i.default.state.disco_entities.create(e,t)},features:{async get(e,t){if(!t)throw TypeError("api.disco.features.get: You need to provide an entity JID");let s=await o.default.disco.entities.get(t,!0);if(void 0===i.default.state.disco_entities&&!o.default.connection.connected())return l.default.warn(`Tried to get feature ${e} for ${t} but _converse.disco_entities has been torn down`),[];let r=await o.default.disco.entities.items(t),a=[s.getFeature(e),...r.map(t=>t.getFeature(e))];return(await Promise.all(a)).filter(e=>e instanceof Object)},async has(e,t){if(!t)throw TypeError("api.disco.feature.has: You need to provide an entity JID");let s=await o.default.disco.entities.get(t,!0);if(!s)return l.default.warn(`api.disco.has: could not get entity for ${t}`),!1;if(void 0===i.default.state.disco_entities&&!o.default.connection.connected())return l.default.warn(`Tried to check if ${t} supports feature ${e}`),!1;if(await s.getFeature(e))return!0;let r=await o.default.disco.entities.items(t);return(await Promise.all(r.map(t=>t.getFeature(e)))).map(e=>e instanceof Object).includes(!0)}},supports(e,t){try{return o.default.disco.features.has(e,t)}catch(e){return l.default.error(e),!1}},async refresh(e){if(!e)throw TypeError("api.disco.refresh: You need to provide an entity JID");await o.default.waitUntil("discoInitialized");let t=await o.default.disco.entities.get(e);return t?(t.features.reset(),t.fields.reset(),t.identities.reset(),t.waitUntilFeaturesDiscovered.isPending||(t.waitUntilFeaturesDiscovered=(0,r.getOpenPromise)()),t.waitUntilItemsFetched.isPending||(t.waitUntilItemsFetched=(0,r.getOpenPromise)()),t.queryInfo()):t=await o.default.disco.entities.create({jid:e},{ignore_cache:!0}),t.waitUntilItemsFetched},async getFeatures(e){if(!e)throw TypeError("api.disco.getFeatures: You need to provide an entity JID");await o.default.waitUntil("discoInitialized");let t=await o.default.disco.entities.get(e,!0);return(t=await t.waitUntilFeaturesDiscovered).features},async getFields(e){if(!e)throw TypeError("api.disco.getFields: You need to provide an entity JID");await o.default.waitUntil("discoInitialized");let t=await o.default.disco.entities.get(e,!0);return(t=await t.waitUntilFeaturesDiscovered).fields},async getIdentity(e,t,s){let r=await o.default.disco.entities.get(s,!0);if(void 0===r&&!o.default.connection.connected()){let t=`Tried to look up category ${e} for ${s} but _converse.disco_entities has been torn down`;l.default.warn(t);return}return r.getIdentity(e,t)}}}},"./src/headless/plugins/disco/entities.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/plugins/disco/entity.js"),i=s("./src/log/index.js"),o=s("./node_modules/@converse/skeletor/dist/skeletor.js");class a extends o.Collection{constructor(){super(),this.model=r.default}fetchEntities(){return new Promise((e,t)=>{this.fetch({add:!0,success:e,error(e,s){i.default.error(s),t(Error("Could not fetch disco entities"))}})})}}let l=a},"./src/headless/plugins/disco/entity.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>_});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./node_modules/@converse/openpromise/dist/openpromise.js"),o=s("./src/headless/shared/_converse.js"),a=s("./src/headless/shared/api/index.js"),l=s("./src/headless/shared/api/public.js"),d=s("./src/headless/shared/parsers.js"),c=s("./src/log/index.js"),u=s("./node_modules/sizzle/dist/sizzle.js"),h=s.n(u),m=s("./src/headless/utils/storage.js");let{Strophe:f,u:p}=l.default.env;class g extends r.Model{get idAttribute(){return"jid"}initialize(e,t){super.initialize(),this.waitUntilFeaturesDiscovered=(0,i.getOpenPromise)(),this.waitUntilItemsFetched=(0,i.getOpenPromise)(),this.dataforms=new r.Collection;let s=`converse.dataforms-${this.get("jid")}`;this.dataforms.browserStorage=(0,m.createStore)(s,"session"),this.features=new r.Collection,s=`converse.features-${this.get("jid")}`,this.features.browserStorage=(0,m.createStore)(s,"session"),this.listenTo(this.features,"add",this.onFeatureAdded),this.fields=new r.Collection,s=`converse.fields-${this.get("jid")}`,this.fields.browserStorage=(0,m.createStore)(s,"session"),this.listenTo(this.fields,"add",this.onFieldAdded),this.items=new r.Collection,s=`converse.items-${this.get("jid")}`,this.items.browserStorage=(0,m.createStore)(s,"session"),this.identities=new r.Collection,s=`converse.identities-${this.get("jid")}`,this.identities.browserStorage=(0,m.createStore)(s,"session"),this.fetchFeatures(t)}async getIdentity(e,t){return await this.waitUntilItemsFetched,this.identities.findWhere({category:e,type:t})}async getFeature(e){if(await this.waitUntilFeaturesDiscovered,this.features.findWhere({var:e}))return this}onFeatureAdded(e){e.entity=this,a.default.trigger("serviceDiscovered",e)}onFieldAdded(e){e.entity=this,a.default.trigger("discoExtensionFieldDiscovered",e)}async fetchFeatures(e){if(e.ignore_cache)await this.queryInfo();else{let e=this.features.browserStorage.name,t=await this.features.browserStorage.store.getItem(e);if(t&&0===t.length||null===t)await this.queryInfo();else{await new Promise(e=>this.fetch({success:e,error:e})),await new Promise(e=>this.features.fetch({add:!0,success:()=>{this.waitUntilFeaturesDiscovered.resolve(this),this.trigger("featuresDiscovered"),e()},error:e})),await new Promise(e=>this.identities.fetch({add:!0,success:e,error:e}));let e=this.get("items");Array.isArray(e)?await Promise.all(e.map(async e=>await a.default.disco.entities.get(e,!0))):await this.queryForItems(),this.waitUntilItemsFetched.resolve()}}}async queryInfo(){let e;try{e=await a.default.disco.info(this.get("jid"),null)}catch(e){if(p.isElement(e)){let t=await (0,d.parseErrorStanza)(e);"item-not-found"!==t.message&&c.default.error(`Error querying disco#info for ${this.get("jid")}: ${t.message}`),this.save({error:t.message}),this.waitUntilFeaturesDiscovered.resolve(t),this.waitUntilItemsFetched.resolve(t)}else null===e?c.default.error(`Timeout for disco#info query for ${this.get("jid")}`):c.default.error(`Error querying disco#info for ${this.get("jid")}: ${e}`),this.waitUntilFeaturesDiscovered.resolve(e),this.waitUntilItemsFetched.resolve(e);return}this.onInfo(e)}onDiscoItems(e){let t=h()(`query[xmlns="${f.NS.DISCO_ITEMS}"] item`,e),s=[];t.forEach(e=>{if(e.getAttribute("node"))return;let t=e.getAttribute("jid"),r=o.default.state.disco_entities.get(t);if(r){let e=r.get("parent_jids");r.set({parent_jids:[...e,this.get("jid")]})}else r=a.default.disco.entities.create({jid:t,parent_jids:[this.get("jid")],name:e.getAttribute("name")});s.push(r.get("jid"))}),this.save({items:s})}async queryForItems(){if(0===this.identities.where({category:"server"}).length)return;let e=await a.default.disco.items(this.get("jid"));this.onDiscoItems(e)}async onInfo(e){Array.from(e.querySelectorAll("identity")).forEach(e=>{this.identities.create({category:e.getAttribute("category"),type:e.getAttribute("type"),name:e.getAttribute("name")})}),h()(`x[type="result"][xmlns="${f.NS.XFORM}"]`,e).forEach(e=>{let t={};h()("field",e).forEach(e=>{t[e.getAttribute("var")]={value:e.querySelector("value")?.textContent,type:e.getAttribute("type")}}),this.dataforms.create(t)}),e.querySelector(`feature[var="${f.NS.DISCO_ITEMS}"]`)&&await this.queryForItems(),this.waitUntilItemsFetched.resolve(),Array.from(e.querySelectorAll("feature")).forEach(t=>{this.features.create({var:t.getAttribute("var"),from:e.getAttribute("from")})}),h()('x[type="result"][xmlns="jabber:x:data"] field',e).forEach(t=>{this.fields.create({var:t.getAttribute("var"),value:t.querySelector("value")?.textContent,from:e.getAttribute("from")})}),this.waitUntilFeaturesDiscovered.resolve(this),this.trigger("featuresDiscovered")}}let _=g},"./src/headless/plugins/disco/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/plugins/disco/entities.js"),i=s("./src/headless/plugins/disco/entity.js"),o=s("./src/headless/shared/_converse.js"),a=s("./src/headless/shared/api/index.js"),l=s("./src/headless/shared/api/public.js"),d=s("./src/headless/plugins/disco/api.js"),c=s("./src/headless/plugins/disco/utils.js");let{Strophe:u}=l.default.env;l.default.plugins.add("converse-disco",{initialize(){Object.assign(a.default,d.default),a.default.promises.add("discoInitialized"),a.default.promises.add("streamFeaturesAdded");let e={DiscoEntity:i.default,DiscoEntities:r.default};Object.assign(o.default,e),Object.assign(o.default.exports,e);let t={_identities:[],_features:[]};Object.assign(o.default,{disco:t}),Object.assign(o.default.state,{disco:t}),a.default.listen.on("userSessionInitialized",async()=>{(0,c.initStreamFeatures)(),o.default.state.connfeedback.get("connection_status")===u.Status.ATTACHED&&(await new Promise((e,t)=>o.default.state.stream_features.fetch({success:e,error:t})),(0,c.notifyStreamFeaturesAdded)())}),a.default.listen.on("beforeResourceBinding",c.populateStreamFeatures),a.default.listen.on("reconnected",c.initializeDisco),a.default.listen.on("connected",c.initializeDisco),a.default.listen.on("beforeTearDown",async()=>{a.default.promises.add("streamFeaturesAdded"),a.default.promises.add("discoInitialized");let{stream_features:e}=o.default.state;e&&(await e.clearStore(),delete o.default.state.stream_features,Object.assign(o.default,{stream_features:void 0}))}),a.default.listen.on("will-reconnect",c.clearSession),a.default.listen.on("clearSession",c.clearSession)}})},"./src/headless/plugins/disco/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{clearSession:()=>p,initStreamFeatures:()=>h,initializeDisco:()=>u,notifyStreamFeaturesAdded:()=>m,populateStreamFeatures:()=>f});var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/api/public.js"),a=s("./node_modules/@converse/skeletor/dist/skeletor.js"),l=s("./src/headless/utils/storage.js");let{Strophe:d,$iq:c}=o.default.env;async function u(){i.default.disco.own.identities.add("client","web","Converse"),i.default.disco.own.features.add(d.NS.CHATSTATES),i.default.disco.own.features.add(d.NS.DISCO_INFO),i.default.disco.own.features.add(d.NS.ROSTERX),i.default.disco.own.features.add(d.NS.CARBONS),i.default.trigger("addClientFeatures"),i.default.connection.get().addHandler(e=>(function(e){let t=e.getElementsByTagName("query")[0].getAttribute("node"),s={xmlns:d.NS.DISCO_INFO};t&&(s.node=t);let o=c({type:"result",id:e.getAttribute("id")}),a=e.getAttribute("from");return null!==a&&o.attrs({to:a}),o.c("query",s),r.default.state.disco._identities.forEach(e=>{let t={category:e.category,type:e.type};e.name&&(t.name=e.name),e.lang&&(t["xml:lang"]=e.lang),o.c("identity",t).up()}),r.default.state.disco._features.forEach(e=>o.c("feature",{var:e}).up()),i.default.send(o.tree()),!0})(e),d.NS.DISCO_INFO,"iq","get",null,null);let e=new r.default.exports.DiscoEntities;Object.assign(r.default,{disco_entities:e}),Object.assign(r.default.state,{disco_entities:e});let t=r.default.session.get("bare_jid"),s=`converse.disco-entities-${t}`;e.browserStorage=(0,l.createStore)(s,"session");let o=await e.fetchEntities(),a=r.default.session.get("domain");0!==o.length&&o.get(a)||i.default.disco.entities.create({jid:a},{ignore_cache:!0}),i.default.trigger("discoInitialized")}function h(){if(!r.default.state.stream_features){let e=r.default.session.get("bare_jid"),t=`converse.stream-features-${e}`;i.default.promises.add("streamFeaturesAdded");let s=new a.Collection;s.browserStorage=(0,l.createStore)(t,"session"),Object.assign(r.default,{stream_features:s}),Object.assign(r.default.state,{stream_features:s})}}function m(){i.default.trigger("streamFeaturesAdded")}function f(){h(),Array.from(i.default.connection.get().features.childNodes).forEach(e=>{r.default.state.stream_features.create({name:e.nodeName,xmlns:e.getAttribute("xmlns")})}),m()}function p(){let{disco_entities:e}=r.default.state;e?.forEach(e=>e.features.clearStore()),e?.forEach(e=>e.identities.clearStore()),e?.forEach(e=>e.dataforms.clearStore()),e?.forEach(e=>e.fields.clearStore()),e?.clearStore(),delete r.default.state.disco_entities,Object.assign(r.default,{disco_entities:void 0})}},"./src/headless/plugins/emoji/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js");let o={emojis:{async initialize(){if(!i.default.emojis.initialized){i.default.emojis.initialized=!0;let e=await s.e("emojis").then(s.t.bind(s,"./src/headless/plugins/emoji/emoji.json",19)),t=await r.default.hook("loadEmojis",{},e.default);i.default.emojis.json=t,i.default.emojis.by_sn=Object.keys(t).reduce((e,s)=>Object.assign(e,t[s]),{}),i.default.emojis.list=Object.values(i.default.emojis.by_sn),i.default.emojis.list.sort((e,t)=>e.sn<t.sn?-1:+(e.sn>t.sn)),i.default.emojis.shortnames=i.default.emojis.list.map(e=>e.sn),i.default.emojis.shortnames_regex=RegExp(i.default.emojis.shortnames.map(e=>e.replace(/[+]/g,"\\$&")).join("|"),"gi"),i.default.emojis.initialized_promise.resolve()}return i.default.emojis.initialized_promise}}}},"./src/headless/plugins/emoji/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{EmojiPicker:()=>r.default});var r=s("./src/headless/plugins/emoji/picker.js");s("./src/headless/plugins/emoji/plugin.js")},"./src/headless/plugins/emoji/picker.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js");class i extends r.Model{defaults(){return{current_category:"smileys",current_skintone:"",scroll_position:0}}}let o=i},"./src/headless/plugins/emoji/plugin.js":function(e,t,s){"use strict";s.r(t);var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/plugins/emoji/picker.js"),d=s("./src/headless/plugins/emoji/api.js"),c=s("./src/headless/plugins/emoji/utils.js");a.default.emojis={initialized:!1,initialized_promise:(0,r.getOpenPromise)()},a.default.plugins.add("converse-emoji",{initialize(){let{___:e}=i.default;o.default.settings.extend({emoji_image_path:"https://twemoji.maxcdn.com/v/12.1.6/",emoji_categories:{smileys:":grinning:",people:":thumbsup:",activity:":soccer:",travel:":motorcycle:",objects:":bomb:",nature:":rainbow:",food:":hotdog:",symbols:":musical_note:",flags:":flag_ac:",custom:null},emoji_category_labels:{smileys:e("Smileys and emotions"),people:e("People"),activity:e("Activities"),travel:e("Travel"),objects:e("Objects"),nature:e("Animals and nature"),food:e("Food and drink"),symbols:e("Symbols"),flags:e("Flags"),custom:e("Stickers")}});let t={EmojiPicker:l.default};async function s(e,t){return await o.default.emojis.initialize(),{...t,is_only_emojis:!!t.body&&(0,c.isOnlyEmojis)(t.body)}}Object.assign(i.default,t),Object.assign(i.default.exports,t),Object.assign(o.default,d.default),o.default.listen.on("getOutgoingMessageAttributes",async(e,t)=>{await o.default.emojis.initialize();let{original_text:s}=t;return{...t,is_only_emojis:!!s&&(0,c.isOnlyEmojis)(s)}}),o.default.listen.on("parseMUCMessage",s),o.default.listen.on("parseMessage",s)}})},"./src/headless/plugins/emoji/regexes.js":function(e,t,s){"use strict";s.r(t),s.d(t,{ASCII_REPLACE_REGEX:()=>r,CODEPOINTS_REGEX:()=>i});let r=RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|((\\s|^)(\\*\\\\0\\/\\*|\\*\\\\O\\/\\*|\\-___\\-|\\:'\\-\\)|'\\:\\-\\)|'\\:\\-D|\\>\\:\\-\\)|>\\:\\-\\)|'\\:\\-\\(|\\>\\:\\-\\(|>\\:\\-\\(|\\:'\\-\\(|O\\:\\-\\)|0\\:\\-3|0\\:\\-\\)|0;\\^\\)|O;\\-\\)|0;\\-\\)|O\\:\\-3|\\-__\\-|\\:\\-\xde|\\:\\-\xde|\\<\\/3|<\\/3|\\:'\\)|\\:\\-D|'\\:\\)|'\\=\\)|'\\:D|'\\=D|\\>\\:\\)|>\\:\\)|\\>;\\)|>;\\)|\\>\\=\\)|>\\=\\)|;\\-\\)|\\*\\-\\)|;\\-\\]|;\\^\\)|'\\:\\(|'\\=\\(|\\:\\-\\*|\\:\\^\\*|\\>\\:P|>\\:P|X\\-P|\\>\\:\\[|>\\:\\[|\\:\\-\\(|\\:\\-\\[|\\>\\:\\(|>\\:\\(|\\:'\\(|;\\-\\(|\\>\\.\\<|>\\.<|#\\-\\)|%\\-\\)|X\\-\\)|\\\\0\\/|\\\\O\\/|0\\:3|0\\:\\)|O\\:\\)|O\\=\\)|O\\:3|B\\-\\)|8\\-\\)|B\\-D|8\\-D|\\-_\\-|\\>\\:\\\\|>\\:\\\\|\\>\\:\\/|>\\:\\/|\\:\\-\\/|\\:\\-\\.|\\:\\-P|\\:\xde|\\:\xde|\\:\\-b|\\:\\-O|O_O|\\>\\:O|>\\:O|\\:\\-X|\\:\\-#|\\:\\-\\)|\\(y\\)|\\<3|<3|\\:D|\\=D|;\\)|\\*\\)|;\\]|;D|\\:\\*|\\=\\*|\\:\\(|\\:\\[|\\=\\(|\\:@|;\\(|D\\:|\\:\\$|\\=\\$|#\\)|%\\)|X\\)|B\\)|8\\)|\\:\\/|\\:\\\\|\\=\\/|\\=\\\\|\\:L|\\=L|\\:P|\\=P|\\:b|\\:O|\\:X|\\:#|\\=X|\\=#|\\:\\)|\\=\\]|\\=\\)|\\:\\])(?=\\s|$|[!,.?]))","gi"),i=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g},"./src/headless/plugins/emoji/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{convertASCII2Emoji:()=>c,getCodePointReferences:()=>h,getShortnameReferences:()=>u,isOnlyEmojis:()=>m});var r=s("./src/headless/plugins/emoji/regexes.js"),i=s("./src/headless/shared/api/public.js");let{u:o}=i.default.env,a={},l={"*\\0/*":"1f646","*\\O/*":"1f646","-___-":"1f611",":'-)":"1f602","':-)":"1f605","':-D":"1f605",">:-)":"1f606","':-(":"1f613",">:-(":"1f620",":'-(":"1f622","O:-)":"1f607","0:-3":"1f607","0:-)":"1f607","0;^)":"1f607","O;-)":"1f607","0;-)":"1f607","O:-3":"1f607","-__-":"1f611",":-\xde":"1f61b","</3":"1f494",":')":"1f602",":-D":"1f603","':)":"1f605","'=)":"1f605","':D":"1f605","'=D":"1f605",">:)":"1f606",">;)":"1f606",">=)":"1f606",";-)":"1f609","*-)":"1f609",";-]":"1f609",";^)":"1f609","':(":"1f613","'=(":"1f613",":-*":"1f618",":^*":"1f618",">:P":"1f61c","X-P":"1f61c",">:[":"1f61e",":-(":"1f61e",":-[":"1f61e",">:(":"1f620",":'(":"1f622",";-(":"1f622",">.<":"1f623","#-)":"1f635","%-)":"1f635","X-)":"1f635","\\0/":"1f646","\\O/":"1f646","0:3":"1f607","0:)":"1f607","O:)":"1f607","O=)":"1f607","O:3":"1f607","B-)":"1f60e","8-)":"1f60e","B-D":"1f60e","8-D":"1f60e","-_-":"1f611",">:\\":"1f615",">:/":"1f615",":-/":"1f615",":-.":"1f615",":-P":"1f61b",":\xde":"1f61b",":-b":"1f61b",":-O":"1f62e",O_O:"1f62e",">:O":"1f62e",":-X":"1f636",":-#":"1f636",":-)":"1f642","(y)":"1f44d","<3":"2764",":D":"1f603","=D":"1f603",";)":"1f609","*)":"1f609",";]":"1f609",";D":"1f609",":*":"1f618","=*":"1f618",":(":"1f61e",":[":"1f61e","=(":"1f61e",":@":"1f620",";(":"1f622","D:":"1f628",":$":"1f633","=$":"1f633","#)":"1f635","%)":"1f635","X)":"1f635","B)":"1f60e","8)":"1f60e",":/":"1f615",":\\":"1f615","=/":"1f615","=\\":"1f615",":L":"1f615","=L":"1f615",":P":"1f61b","=P":"1f61b",":b":"1f61b",":O":"1f62e",":X":"1f636",":#":"1f636","=X":"1f636","=#":"1f636",":)":"1f642","=]":"1f642","=)":"1f642",":]":"1f642"};function d(e){let t;if(e.indexOf("-")>-1){let t=[],s=e.split("-");for(let e=0;e<s.length;e++){let r=parseInt(s[e],16);if(r>=65536&&r<=1114111){let e=Math.floor((r-65536)/1024)+55296,s=(r-65536)%1024+56320;t.push(String.fromCharCode(e)+String.fromCharCode(s))}else t.push(String.fromCharCode(r))}return t.join("")}return(t="string"==typeof e?parseInt(e,16):e)<65536?String.fromCharCode(t):String.fromCharCode(55296+((t-=65536)>>10),56320+(1023&t))}function c(e){return e.replace(r.ASCII_REPLACE_REGEX,(e,t,s,r)=>void 0!==r&&""!==r&&o.unescapeHTML(r)in l?s+d(l[r=o.unescapeHTML(r)].toUpperCase()):e)}function u(e){if(!i.default.emojis.initialized)throw Error("getShortnameReferences called before emojis are initialized. To avoid this problem, first await the converse.emojis.initialized_promise");return[...e.matchAll(i.default.emojis.shortnames_regex)].filter(e=>e[0].length>0).map(e=>{let t=i.default.emojis.by_sn[e[0].toLowerCase()]?.cp;return{cp:t,begin:e.index,end:e.index+e[0].length,shortname:e[0],emoji:t?d(t):null}})}function h(e){let t=[];return!function(e,t){let s=/\uFE0F/g,i=String.fromCharCode(8205);String(e).replace(r.CODEPOINTS_REGEX,(e,r,o)=>{let a=function(e){let t=[],s=0,r=0;for(;r<e.length;){let i=e.charCodeAt(r++);s?(t.push((65536+(s-55296<<10)+(i-56320)).toString(16)),s=0):55296<=i&&i<=56319?s=i:t.push(i.toString(16))}return t.join("-")}(0>e.indexOf(i)?e.replace(s,""):e);return a&&t(a,e,o),e})}(e,(e,s,r)=>{t.push({begin:r,cp:e,emoji:s,end:r+s.length,shortname:f("cp")[e]?.sn||""})}),t}function m(e){let t=e.trim().split(/\s+/);return 0!==t.length&&!(t.length>3)&&t.filter(e=>{let t=h(o.shortnamesToUnicode(e));return 1===t.length&&(e.toLowerCase()===t[0].shortname||e===t[0].emoji)}).length===t.length}function f(e){if(a[e])return a[e];if("category"===e)return i.default.emojis.json;let t=i.default.emojis.list.map(t=>t[e]).filter((e,t,s)=>s.indexOf(e)==t);return a[e]={},t.forEach(t=>a[e][t]=i.default.emojis.list.find(s=>s[e]===t)),a[e]}Object.assign(o,{getCodePointReferences:h,getShortnameReferences:u,convertASCII2Emoji:c,getEmojisByAttribute:f,isOnlyEmojis:m,shortnamesToUnicode:function(e){var t;let s;return(s=[t=c(e)],[...u(t),...h(t)].sort((e,t)=>t.begin-e.begin).forEach(e=>{let t=s.shift(),r=e.emoji||e.shortname;s=[t.slice(0,e.begin)+r+t.slice(e.end),...s]}),s).pop()}})},"./src/headless/plugins/headlines/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/constants.js");let a={headlines:{async get(e,t={},s=!1){async function a(e){let a=await i.default.chatboxes.get(e);if(!a&&s){let{HeadlinesFeed:s}=r.default.exports;a=await i.default.chatboxes.create(e,t,s)}else(a=a&&a.get("type")===o.HEADLINES_TYPE?a:null)&&Object.keys(t).length&&a.save(t);return a}return void 0===e?(await i.default.chatboxes.get()).filter(e=>e.get("type")===o.HEADLINES_TYPE):"string"==typeof e?a(e):Promise.all(e.map(e=>a(e)))}}}},"./src/headless/plugins/headlines/feed.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/shared/api/index.js"),i=s("./src/headless/utils/session.js"),o=s("./src/headless/shared/constants.js"),a=s("./src/headless/shared/chatbox.js");class l extends a.default{defaults(){return{bookmarked:!1,hidden:(0,i.isUniView)()&&!r.default.settings.get("singleton"),message_type:"headline",num_unread:0,time_opened:this.get("time_opened")||new Date().getTime(),time_sent:void 0,type:o.HEADLINES_TYPE}}constructor(e,t){super(e,t),this.disable_mam=!0}async initialize(){await super.initialize(),await this.fetchMessages(),r.default.trigger("headlinesFeedInitialized",this)}canPostMessages(){return!1}isChatMessage(e){let t=e.get("type");return t===this.get("message_type")||"normal"===t}}},"./src/headless/plugins/headlines/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/plugins/headlines/feed.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/plugins/headlines/api.js"),d=s("./src/headless/plugins/headlines/utils.js"),c=s("./src/headless/shared/constants.js");a.default.plugins.add("converse-headlines",{dependencies:["converse-chat"],initialize(){let e={HeadlinesFeed:r.default};function t(){o.default.connection.get()?.addHandler(e=>((0,d.onHeadlineMessage)(e),!0),null,"message")}Object.assign(i.default,e),Object.assign(i.default.exports,e),o.default.listen.on("connected",t),o.default.listen.on("reconnected",t),Object.assign(o.default,l.default),o.default.chatboxes.registry.add(c.HEADLINES_TYPE,r.default)}})},"./src/headless/plugins/headlines/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{onHeadlineMessage:()=>c});var r=s("./src/headless/plugins/headlines/feed.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/constants.js"),l=s("./src/headless/shared/parsers.js"),d=s("./src/headless/plugins/chat/parsers.js");async function c(e){if((0,l.isHeadline)(e)||(0,l.isServerMessage)(e)){let t=e.getAttribute("from");if(await o.default.waitUntil("rosterInitialized"),t.includes("@")&&!i.default.state.roster.get(t)&&!o.default.settings.get("allow_non_roster_messaging")||null===e.querySelector("body"))return;let s=await o.default.chatboxes.create(t,{id:t,jid:t,type:a.HEADLINES_TYPE,from:t},r.default),l=await (0,d.parseMessage)(e);await s.createMessage(l),o.default.trigger("message",{chatbox:s,stanza:e,attrs:l})}}},"./src/headless/plugins/mam/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/api/public.js"),a=s("./node_modules/dayjs/dayjs.min.js"),l=s.n(a),d=s("./src/log/index.js"),c=s("./node_modules/sizzle/dist/sizzle.js"),u=s.n(c),h=s("./src/headless/shared/rsm.js"),m=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),f=s("./src/headless/shared/errors.js");let{NS:p}=m.Strophe,{stx:g,u:_}=o.default.env,v={archive:{async query(e={}){let t,s,o;if(!i.default.connection.connected())throw Error("Can't call `api.archive.query` before having established an XMPP session");if(e&&e.is_groupchat){if(!e.mam?.with)throw Error('You need to specify a "with" value containing the groupchat JID, when querying groupchat messages.');t=e.mam.with}let a=!e.is_groupchat&&e.mam?.with||null,c=r.default.session.get("bare_jid"),v=t||c;if(!await i.default.disco.supports(p.MAM,v))return d.default.warn(`Did not fetch MAM archive for ${v} because it doesn't support ${p.MAM}`),{messages:[]};let{start:y,end:b}=["start","end"].reduce((t,s)=>{if(e.mam?.[s]){let r=l()(e.mam[s]);if(r.isValid())t[s]=r.toISOString();else throw TypeError(`archive.query: invalid date provided for: ${s}`)}return t},{start:null,end:null}),j=i.default.connection.get(),w=e.rsm?new h.RSM(e.rsm):{},S=_.getUniqueId(),x=g`
                <iq id="${_.getUniqueId()}"
                        ${t?m.Stanza.unsafeXML(`to="${m.Strophe.xmlescape(t)}"`):""}
                        type="set"
                        xmlns="jabber:client">
                    <query queryid="${S}" xmlns="${p.MAM}">
                        ${a||y||b?g`
                            <x type="submit" xmlns="${p.XFORM}">
                                <field type="hidden" var="FORM_TYPE"><value>${p.MAM}</value></field>
                                ${a?g`<field var="with"><value>${a}</value></field>`:""}
                                ${y?g`<field var="start"><value>${y}</value></field>`:""}
                                ${b?g`<field var="end"><value>${b}</value></field>`:""}
                            </x>`:""}
                        ${Object.keys(w.query??{}).length?m.Stanza.fromString(w.toString()):""}
                    </query>
                </iq>`,E=[],A=j.addHandler(t=>{let s=u()(`message > result[xmlns="${p.MAM}"]`,t).pop();if(void 0===s||s.getAttribute("queryid")!==S)return!0;let r=t.getAttribute("from")||c;if(e.is_groupchat){if(r!==e.mam?.with)return d.default.warn(`Ignoring alleged groupchat MAM message from ${t.getAttribute("from")}`),!0}else if(r!==c)return d.default.warn(`Ignoring alleged MAM message from ${t.getAttribute("from")}`),!0;return E.push(t),!0},p.MAM),C=i.default.settings.get("message_archiving_timeout"),k=await i.default.sendIQ(x,C,!1);if(null===k){let{__:e}=r.default,t=e("Timeout while trying to fetch archived messages.");return d.default.error(t),{messages:E,error:new f.TimeoutError(t)}}if(_.isErrorStanza(k)){let{__:e}=r.default,t=e("An error occurred while querying for archived messages.");return d.default.error(t),d.default.error(k),{messages:E,error:Error(t)}}j.deleteHandler(A);let $=k&&u()(`fin[xmlns="${p.MAM}"]`,k).pop(),T=$?.getAttribute("complete")==="true",M=u()(`set[xmlns="${p.RSM}"]`,$).pop();return M&&(o=new h.RSM({...e.rsm,xml:M})),{messages:E,rsm:o,complete:T}}}}},"./src/headless/plugins/mam/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{MAMPlaceholderMessage:()=>i.default});var r=s("./src/headless/utils/index.js"),i=s("./src/headless/plugins/mam/placeholder.js"),o=s("./src/headless/plugins/mam/utils.js");s("./src/headless/plugins/mam/plugin.js"),Object.assign(r.default,{mam:{fetchArchivedMessages:o.fetchArchivedMessages}})},"./src/headless/plugins/mam/placeholder.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/utils/index.js");class o extends r.Model{defaults(){return{msgid:(0,i.getUniqueId)(),is_ephemeral:!1}}async fetchMissingMessages(){this.set("fetching",!0);let e={rsm:{before:this.get("before")??""},mam:{start:this.get("start")}};await i.default.mam.fetchArchivedMessages(this.collection.chatbox,e),this.destroy()}}},"./src/headless/plugins/mam/plugin.js":function(e,t,s){"use strict";s.r(t);var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/shared/constants.js");s("./src/headless/plugins/disco/index.js");var d=s("./src/headless/plugins/mam/api.js"),c=s("./src/headless/plugins/mam/placeholder.js"),u=s("./src/headless/plugins/mam/utils.js");let{NS:h}=r.Strophe;a.default.plugins.add("converse-mam",{dependencies:["converse-disco","converse-muc"],initialize(){o.default.settings.extend({archived_messages_page_size:"50",mam_request_all_pages:!1,message_archiving:void 0,message_archiving_timeout:6e4}),Object.assign(o.default,d.default);let e={onMAMError:u.onMAMError,onMAMPreferences:u.onMAMPreferences,handleMAMResult:u.handleMAMResult,MAMPlaceholderMessage:c.default};Object.assign(i.default,e),Object.assign(i.default.exports,e),o.default.listen.on("addClientFeatures",()=>o.default.disco.own.features.add(h.MAM)),o.default.listen.on("serviceDiscovered",u.getMAMPrefsFromFeature),o.default.listen.on("chatRoomViewInitialized",({model:e})=>{o.default.settings.get("muc_show_logs_before_join")&&((0,u.preMUCJoinMAMFetch)(e),e.features.on("change:mam_enabled",()=>(0,u.preMUCJoinMAMFetch)(e)))}),o.default.listen.on("enteredNewRoom",e=>e.features.get("mam_enabled")&&(0,u.fetchNewestMessages)(e)),o.default.listen.on("chatReconnected",e=>{[l.CHATROOMS_TYPE,l.PRIVATE_CHAT_TYPE].includes(e.get("type"))&&(0,u.fetchNewestMessages)(e)}),o.default.listen.on("afterMessagesFetched",e=>{e.get("type")===l.PRIVATE_CHAT_TYPE&&(0,u.fetchNewestMessages)(e),(0,u.createScrollupPlaceholder)(e)})}})},"./src/headless/plugins/mam/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{createScrollupPlaceholder:()=>C,fetchArchivedMessages:()=>E,fetchNewestMessages:()=>k,getMAMPrefsFromFeature:()=>j,handleMAMResult:()=>x,onMAMError:()=>y,onMAMPreferences:()=>b,preMUCJoinMAMFetch:()=>w});var r=s("./node_modules/sizzle/dist/sizzle.js"),i=s.n(r),o=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),a=s("./src/headless/shared/_converse.js"),l=s("./src/headless/shared/api/index.js"),d=s("./src/headless/shared/api/public.js"),c=s("./src/log/index.js"),u=s("./src/headless/plugins/muc/parsers.js"),h=s("./src/headless/plugins/chat/parsers.js"),m=s("./src/headless/shared/constants.js"),f=s("./src/headless/shared/errors.js"),p=s("./src/headless/plugins/mam/placeholder.js"),g=s("./src/headless/shared/parsers.js");let{NS:_}=o.Strophe,v=d.default.env.utils;async function y(e,t){if(v.isElement(e)){let s=await (0,g.parseErrorStanza)(e);if(s?.name==="feature-not-implemented")return void c.default.warn(`Message Archive Management (XEP-0313) not supported by ${t.getAttribute("to")}`)}c.default.error(`Error while trying to set archiving preferences for ${t.getAttribute("to")}.`),c.default.error(t)}function b(e,t){let s=i()(`prefs[xmlns="${_.MAM}"]`,e).pop();if(s.getAttribute("default")!==l.default.settings.get("message_archiving")){let e=(0,o.$iq)({type:"set"}).c("prefs",{xmlns:_.MAM,default:l.default.settings.get("message_archiving")});Array.from(s.children).forEach(t=>e.cnode(t).up()),l.default.sendIQ(e).then(()=>t.save({preferences:{default:l.default.settings.get("message_archiving")}})).catch(t=>a.default.exports.onMAMError(t,e.tree()))}else t.save({preferences:{default:l.default.settings.get("message_archiving")}})}function j(e){let t=e.get("preferences")||{};if(e.get("var")===_.MAM&&void 0!==l.default.settings.get("message_archiving")&&t.default!==l.default.settings.get("message_archiving")){let t=(0,o.$iq)({type:"get"}).c("prefs",{xmlns:_.MAM});l.default.sendIQ(t).then(t=>a.default.exports.onMAMPreferences(t,e)).catch(e=>a.default.exports.onMAMError(e,t.tree()))}}function w(e){!l.default.settings.get("muc_show_logs_before_join")||!e.features.get("mam_enabled")||e.get("prejoin_mam_fetched")||(k(e),e.save({prejoin_mam_fetched:!0}))}async function S(e,t){t instanceof f.TimeoutError&&((await e.createMessage({type:"error",message:t.message,retry_event_id:t.retry_event_id,is_ephemeral:2e4})).error=t)}async function x(e,t,s,r,i=!1){let o=e.get("type")===m.CHATROOMS_TYPE,a=await Promise.all(t.messages.map(t=>o?(0,u.parseMUCMessage)(t,e):(0,h.parseMessage)(t)));if(t.messages=a,await l.default.trigger("MAMResult",{query:s,chatbox:e,messages:a},{synchronous:!0}),a.forEach(t=>e.queueMessage(t)),t.error){let s=t.error.retry_event_id=v.getUniqueId();l.default.listen.once(s,()=>E(e,r,i)),S(e,t.error)}}async function E(e,t={},s=!1){if(e.disable_mam)return;let r=e.get("type")===m.CHATROOMS_TYPE,i=a.default.session.get("bare_jid"),o=r?e.get("jid"):i;if(!await l.default.disco.supports(_.MAM,o))return;let d=l.default.settings.get("archived_messages_page_size"),c={is_groupchat:r,rsm:{max:d,...t.rsm},mam:{with:e.get("jid"),...t.mam}},u=await l.default.archive.query(c);if(await x(e,u,c,t,s),u.rsm&&!u.complete)if(s)return"forwards"===s?t=u.rsm.next(d,t.rsm.before).query:"backwards"===s&&(t=u.rsm.previous(d,t.rsm.after).query),E(e,t,s);else A(e,t,u)}async function A(e,t,s){let r=await Promise.all(s.messages),i=e.get("type")===m.CHATROOMS_TYPE?e.get("jid"):a.default.session.get("bare_jid"),{rsm:o}=s,l=`stanza_id ${i}`,d=new Date(r.find(e=>e[l]===o.result.first).time),u={before:o.result.first,start:t.mam?.start,template_hook:"getMessageTemplate",time:new Date(d.getTime()-1).toISOString()};if(e.messages.findWhere(u))return void c.default.debug("Gap placeholder already exists, not recreating.");e.messages.add(new p.default(u))}function C(e){if(e.messages.length){let t=e.get("type")===m.CHATROOMS_TYPE?e.get("jid"):a.default.session.get("bare_jid"),s=`stanza_id ${t}`,r=e.getOldestMessage();if(!r)return;let i={before:r.get(s),template_hook:"getMessageTemplate",time:new Date(new Date(r.get("time")).getTime()-1).toISOString()};if(e.messages.findWhere(i))return void c.default.debug("Gap placeholder already exists, not recreating.");e.messages.add(new p.default(i))}}function k(e){if(e.disable_mam)return;let t=e.getMostRecentMessage(),s=!!l.default.settings.get("mam_request_all_pages")&&"backwards";return t?E(e,{mam:{start:t.get("time")},rsm:{before:""}},s):E(e,{rsm:{before:""}},s)}},"./src/headless/plugins/muc/affiliations/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/headless/plugins/muc/affiliations/utils.js");let i={affiliations:{set:(e,t)=>(t=Array.isArray(t)?t:[t],e=Array.isArray(e)?e:[e],(0,r.setAffiliations)(e,t)),get:(e,t)=>(0,r.getAffiliationList)(e,t)}}},"./src/headless/plugins/muc/affiliations/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{computeAffiliationsDelta:()=>p,getAffiliationList:()=>h,setAffiliation:()=>f,setAffiliations:()=>m}),s("./src/headless/shared/_converse.js");var r=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),o=s("./src/log/index.js"),a=s("./src/headless/plugins/muc/parsers.js");let{Strophe:l,$iq:d,u:c,stx:u}=i.default.env;async function h(e,t){let s=u`
        <iq xmlns="jabber:client" to="${t}" type="get">
            <query xmlns="${l.NS.MUC_ADMIN}">
                <item affiliation="${e}"/>
            </query>
        </iq>`,i=await r.default.sendIQ(s,null,!1);if(null===i){let s=`Error: timeout while fetching ${e} list for MUC ${t}`,r=Error(s);return o.default.warn(s),r}if(c.isErrorStanza(i)){let s=`Error: not allowed to fetch ${e} list for MUC ${t}`,r=Error(s);return o.default.warn(s),o.default.warn(i),r}return(0,a.parseMemberListIQ)(i).filter(e=>e).sort((e,t)=>e.nick<t.nick?-1:+(e.nick>t.nick))}function m(e,t){return Promise.all([...new Set(t.map(e=>e.affiliation))].map(s=>f(s,e,t)))}function f(e,t,s){return Array.isArray(t)||(t=[t]),s=s.filter(t=>[void 0,e].includes(t.affiliation)),Promise.all(t.reduce((t,i)=>[...t,...s.map(t=>(function(e,t,s){e=s.affiliation||e;let i=d({to:t,type:"set"}).c("query",{xmlns:l.NS.MUC_ADMIN}).c("item",{affiliation:e,..."outcast"===e?{}:{nick:s.nick},jid:s.jid});return void 0!==s.reason&&i.c("reason",s.reason),r.default.sendIQ(i)})(e,i,t))],[]))}function p(e,t,s,r){let i=s.map(e=>e.jid),o=r.map(e=>e.jid),a=i.filter(e=>!o.includes(e)).map(e=>s[i.indexOf(e)]);return e||(a=a.concat(s.filter(e=>{let t=o.indexOf(e.jid);return t>=0&&e.affiliation!==r[t].affiliation}))),t&&(a=a.concat(o.filter(e=>!i.includes(e)).map(e=>({jid:e,affiliation:"none"})))),a}},"./src/headless/plugins/muc/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>f});var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/plugins/chatboxes/api.js"),o=s("./src/log/index.js"),a=s("./src/headless/shared/api/promise.js"),l=s("./src/headless/shared/constants.js"),d=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),c=s("./src/headless/utils/jid.js"),u=s("./src/headless/shared/settings/api.js");let{waitUntil:h}=a.default,m={create(e,t={}){if(!(t="string"==typeof t?{nick:t}:t||{}).nick&&u.settings_api.get("muc_nickname_from_jid")){let e=r.default.session.get("bare_jid");t.nick=d.Strophe.getNodeFromJid(e)}if(void 0===e)throw TypeError("rooms.create: You need to provide at least one JID");return"string"==typeof e?m.get((0,c.getJIDFromURI)(e),t,!0):Promise.all(e.map(e=>m.get((0,c.getJIDFromURI)(e),t,!0)))},async open(e,t={},s=!1){if(await h("chatBoxesFetched"),void 0===e){let e="rooms.open: You need to provide at least one JID";throw o.default.error(e),TypeError(e)}if("string"==typeof e){let r=await m.get(e,t,!0);return t.hidden||r?.maybeShow(s),r}{let r=await Promise.all(e.map(e=>r.get(e,t,!0)));return r.forEach(e=>!t.hidden&&e.maybeShow(s)),r}},async get(e,t={},s=!1){async function o(e){e=(0,c.getJIDFromURI)(e);let o=await i.default.get(e);return!o&&s?o=await i.default.create(e,t,r.default.exports.MUC):(o=o&&o.get("type")===l.CHATROOMS_TYPE?o:null)&&Object.keys(t).length&&o.save(t),o}return(await h("chatBoxesFetched"),void 0===e)?(await i.default.get()).filter(e=>e.get("type")===l.CHATROOMS_TYPE):"string"==typeof e?o(e):Promise.all(e.map(e=>o(e)))}},f={rooms:m}},"./src/headless/plugins/muc/constants.js":function(e,t,s){"use strict";s.r(t),s.d(t,{ACTION_INFO_CODES:()=>r,ADMIN_COMMANDS:()=>o,AFFILIATIONS:()=>a,AFFILIATION_CHANGES:()=>p,AFFILIATION_CHANGES_LIST:()=>g,DISCONNECT_CODES:()=>l,INFO_CODES:()=>j,MODERATOR_COMMANDS:()=>d,MUC_NICK_CHANGED_CODE:()=>x,MUC_ROLE_CHANGES:()=>y,MUC_ROLE_CHANGES_LIST:()=>b,MUC_ROLE_WEIGHTS:()=>f,MUC_TRAFFIC_STATES:()=>_,MUC_TRAFFIC_STATES_LIST:()=>v,NEW_NICK_CODES:()=>i,OWNER_COMMANDS:()=>c,ROLES:()=>u,ROOMSTATUS:()=>w,ROOM_FEATURES:()=>S,STATUS_CODE_STANZAS:()=>m,VISITOR_COMMANDS:()=>h});let r=["301","333","307","321","322"],i=["210","303"],o=["admin","ban","deop","destroy","member","op","revoke"],a=["owner","admin","member","outcast","none"],l=["301","333","307","321","322","332"],d=["kick","mute","voice","modtools"],c=["owner"],u=["moderator","participant","visitor"],h=["nick"],m={100:["message","presence"],101:["message"],102:["message"],103:["message"],104:["message"],110:["presence"],170:["message","presence"],171:["message"],172:["message"],173:["message"],174:["message"],201:["presence"],210:["presence"],301:["presence"],303:["presence"],307:["presence"],321:["presence"],322:["presence"],332:["presence"],333:["presence"]},f={moderator:1,participant:2,visitor:3,none:2},p={OWNER:"owner",ADMIN:"admin",MEMBER:"member",EXADMIN:"exadmin",EXOWNER:"exowner",EXOUTCAST:"exoutcast",EXMEMBER:"exmember"},g=Object.values(p),_={ENTERED:"entered",EXITED:"exited"},v=Object.values(_),y={OP:"op",DEOP:"deop",VOICE:"voice",MUTE:"mute"},b=Object.values(y),j={visibility_changes:["100","102","103","172","173","174"],self:["110"],non_privacy_changes:["104","201"],muc_logging_changes:["170","171"],nickname_changes:["210","303"],disconnected:["301","307","321","322","332","333"],affiliation_changes:[...g],join_leave_events:[...v],role_changes:[...b]},w={CONNECTED:0,CONNECTING:1,NICKNAME_REQUIRED:2,PASSWORD_REQUIRED:3,DISCONNECTED:4,ENTERED:5,DESTROYED:6,BANNED:7,CLOSING:8},S=["passwordprotected","unsecured","hidden","publicroom","membersonly","open","persistent","temporary","nonanonymous","semianonymous","moderated","unmoderated","mam_enabled","vcard-temp"],x="303"},"./src/headless/plugins/muc/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{MUC:()=>a.default,MUCMessage:()=>i.default,MUCMessages:()=>o.default,MUCOccupant:()=>l.default,MUCOccupants:()=>d.default});var r=s("./src/headless/utils/index.js"),i=s("./src/headless/plugins/muc/message.js"),o=s("./src/headless/plugins/muc/messages.js"),a=s("./src/headless/plugins/muc/muc.js"),l=s("./src/headless/plugins/muc/occupant.js"),d=s("./src/headless/plugins/muc/occupants.js");s("./src/headless/plugins/muc/plugin.js");var c=s("./src/headless/plugins/muc/utils.js"),u=s("./src/headless/plugins/muc/affiliations/utils.js");Object.assign(r.default,{muc:{isChatRoom:c.isChatRoom,setAffiliation:u.setAffiliation,getDefaultMUCService:c.getDefaultMUCService}})},"./src/headless/plugins/muc/message.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js");s("./src/headless/shared/_converse.js");var i=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/message.js");class a extends o.default{initialize(){super.initialize(),this.on("change:type",()=>this.setOccupant()),this.setOccupant(),i.default.trigger("chatRoomMessageInitialized",this)}get occupants(){return"chat"===this.get("type")?this.chatbox.collection:this.chatbox.occupants}getDisplayName(){return this.occupant?.getDisplayName()||this.get("nick")}async mayBeModerated(){if(void 0!==this.get("from_muc"))return["all","moderator"].includes(i.default.settings.get("allow_message_retraction"))&&this.get(`stanza_id ${this.get("from_muc")}`)&&await this.chatbox.canModerateMessages()}checkValidity(){let e=super.checkValidity();return e||this.chatbox.debouncedRejoin(),e}onOccupantRemoved(){this.stopListening(this.occupant),delete this.occupant,this.listenTo(this.occupants,"add",this.onOccupantAdded)}onOccupantAdded(e){if(this.get("occupant_id")){if(e.get("occupant_id")!==this.get("occupant_id"))return}else if(e.get("nick")!==r.Strophe.getResourceFromJid(this.get("from")))return;this.setOccupant(e)}getOccupant(){return this.occupant||this.setOccupant()}setOccupant(e){if(!(!["groupchat","chat"].includes(this.get("type"))||this.isEphemeral())){if(e)this.occupant=e;else if("chat"===this.get("type")&&"them"===this.get("sender"))this.occupant=this.chatbox;else{if(this.occupant)return;let e=r.Strophe.getResourceFromJid(this.get("from")),t=this.get("occupant_id");if(this.occupant=e||t?this.occupants.findOccupant({nick:e,occupant_id:t}):null,!this.occupant){let s=this.get("from_real_jid");if(!e&&!t&&!s)return;if(this.occupant=this.occupants.create({nick:e,occupant_id:t,jid:s}),i.default.settings.get("muc_send_probes")){let t=`${this.chatbox.get("jid")}/${e}`;i.default.user.presence.send({to:t,type:"probe"})}}}return this.get("from_real_jid")!==this.occupant.get("jid")&&this.save("from_real_jid",this.occupant.get("jid")),this.trigger("occupant:add"),this.listenTo(this.occupant,"change",e=>this.trigger("occupant:change",e)),this.listenTo(this.occupant,"vcard:add",e=>this.trigger("occupant:change",e)),this.listenTo(this.occupant,"vcard:change",e=>this.trigger("occupant:change",e)),this.listenTo(this.occupant,"destroy",this.onOccupantRemoved),this.stopListening(this.occupants,"add",this.onOccupantAdded),this.occupant}}}let l=a},"./src/headless/plugins/muc/messages.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/plugins/muc/message.js"),i=s("./node_modules/@converse/skeletor/dist/skeletor.js");class o extends i.Collection{constructor(e,t={}){super(e,Object.assign({comparator:"time"},t)),this.model=r.default,this.fetched=null}}let a=o},"./src/headless/plugins/muc/muc.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>D});var r=s("./node_modules/lodash-es/debounce.js"),i=s("./node_modules/lodash-es/pick.js"),o=s("./node_modules/sizzle/dist/sizzle.js"),a=s.n(o),l=s("./node_modules/@converse/openpromise/dist/openpromise.js"),d=s("./node_modules/@converse/skeletor/dist/skeletor.js"),c=s("./src/log/index.js"),u=s("./src/headless/utils/parse-helpers.js"),h=s("./src/headless/shared/_converse.js"),m=s("./src/headless/shared/api/index.js"),f=s("./src/headless/shared/api/public.js"),p=s("./src/headless/plugins/muc/constants.js"),g=s("./src/headless/shared/constants.js"),_=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),v=s("./src/headless/shared/errors.js"),y=s("./src/headless/plugins/muc/affiliations/utils.js"),b=s("./src/headless/utils/storage.js"),j=s("./src/headless/shared/parsers.js"),w=s("./src/headless/utils/index.js"),S=s("./src/headless/utils/init.js"),x=s("./src/headless/utils/session.js"),E=s("./src/headless/plugins/muc/parsers.js"),A=s("./src/headless/shared/actions.js"),C=s("./src/headless/shared/chatbox.js"),k=s("./src/headless/shared/color.js"),$=s("./src/headless/shared/model-with-messages.js"),T=s("./src/headless/shared/model-with-vcard.js"),M=s("./src/headless/plugins/muc/utils.js"),O=s("./src/headless/plugins/muc/session.js");let{u:I,stx:N}=f.default.env;class R extends(0,T.default)((0,$.default)((0,k.default)(C.default))){defaults(){return{bookmarked:!1,chat_state:void 0,closed:!1,has_activity:!1,hidden:(0,x.isUniView)()&&!m.default.settings.get("singleton"),hidden_occupants:!!m.default.settings.get("hide_muc_participants"),message_type:"groupchat",name:"",num_unread_general:0,num_unread:0,roomconfig:{},time_opened:this.get("time_opened")||new Date().getTime(),time_sent:new Date(0).toISOString(),type:g.CHATROOMS_TYPE}}async initialize(){super.initialize(),this.on("change:closed",()=>{this.get("closed")||this.initialize()}),this.get("closed")||(this.initialized=(0,l.getOpenPromise)(),this.debouncedRejoin=(0,r.default)(this.rejoin,250),this.initOccupants(),this.initDiscoModels(),this.registerHandlers(),this.on("change:chat_state",this.sendChatState,this),this.on("change:hidden",this.onHiddenChange,this),this.on("destroy",this.removeHandlers,this),await this.restoreSession(),this.session.on("change:connection_status",this.onConnectionStatusChanged,this),this.listenTo(this.occupants,"add",this.onOccupantAdded),this.listenTo(this.occupants,"remove",this.onOccupantRemoved),this.listenTo(this.occupants,"change:presence",this.onOccupantPresenceChanged),this.listenTo(this.occupants,"change:affiliation",this.createAffiliationChangeMessage),this.listenTo(this.occupants,"change:role",this.createRoleChangeMessage),await this.restoreFromCache()||await this.join(),await m.default.trigger("chatRoomInitialized",this,{synchronous:!0}),this.initialized.resolve())}isEntered(){return this.session?.get("connection_status")===p.ROOMSTATUS.ENTERED}isRAICandidate(){return this.get("hidden")&&m.default.settings.get("muc_subscribe_to_rai")&&"none"!==this.getOwnAffiliation()}async restoreFromCache(){if(this.isEntered()){if(await this.fetchOccupants().catch(e=>c.default.error(e)),this.isRAICandidate())return this.session.save("connection_status",p.ROOMSTATUS.DISCONNECTED),this.enableRAI(),!0;if(await this.isJoined())return await new Promise(e=>this.config.fetch({success:e,error:e})),await new Promise(e=>this.features.fetch({success:e,error:e})),await this.fetchMessages().catch(e=>c.default.error(e)),!0}return this.session.save("connection_status",p.ROOMSTATUS.DISCONNECTED),this.clearOccupantsCache(),!1}async join(e,t){if(this.isEntered())return;this.session.save("connection_status",p.ROOMSTATUS.CONNECTING);let s=await this.refreshDiscoInfo() instanceof v.ItemNotFoundError;if(!(e=await this.getAndPersistNickname(e))){(0,S.safeSave)(this.session,{connection_status:p.ROOMSTATUS.NICKNAME_REQUIRED}),!s&&m.default.settings.get("muc_show_logs_before_join")&&await this.fetchMessages();return}m.default.send(await this.constructJoinPresence(t,s)),s&&await this.refreshDiscoInfo()}rejoin(){return this.session.save("connection_status",p.ROOMSTATUS.DISCONNECTED),this.registerHandlers(),this.clearOccupantsCache(),this.join()}async constructJoinPresence(e,t){let s=t||this.features.get("mam_enabled")?0:m.default.settings.get("muc_history_max_stanzas");e=e||this.get("password");let{profile:r}=h.default.state,i=r.get("show"),o=r.get("status_message"),a=N`
            <presence xmlns="jabber:client"
                      id="${(0,w.getUniqueId)()}"
                      from="${m.default.connection.get().jid}"
                      to="${this.getRoomJIDAndNick()}">
                <x xmlns="${_.Strophe.NS.MUC}">
                    <history maxstanzas="${s}"/>
                    ${e?N`<password>${e}</password>`:""}
                </x>
                ${g.PRES_SHOW_VALUES.includes(i)?N`<show>${i}</show>`:""}
                ${o?N`<status>${o}</status>`:""}
            </presence>`;return await m.default.hook("constructedMUCPresence",this,a)}clearOccupantsCache(){this.occupants.length?this.occupants.filter(e=>!e.isMember()).forEach(e=>e.destroy()):this.occupants.clearStore()}sendMarkerForMessage(e,t="displayed",s=!1){if(e&&m.default.settings.get("send_chat_markers").includes(t)&&e?.get("type")==="groupchat"){if(e?.get("is_markable")||s){let s=`stanza_id ${this.get("jid")}`,r=e.get(s);if(!r)return c.default.error(`Can't send marker for message without stanza ID: ${s}`),Promise.resolve();let i=_.Strophe.getBareJidFromJid(e.get("from"));(0,A.sendMarker)(i,r,t,e.get("type"))}return Promise.resolve()}}sendMarkerForLastMessage(e="displayed",t=!1){let s=Array.from(this.messages.models);s.reverse();let r=s.find(e=>"them"===e.get("sender")&&(t||e.get("is_markable")));r&&this.sendMarkerForMessage(r,e,t)}enableRAI(){if(m.default.settings.get("muc_subscribe_to_rai")){let e=_.Strophe.getDomainFromJid(this.get("jid"));m.default.user.presence.send({to:e},(0,_.$build)("rai",{xmlns:_.Strophe.NS.RAI}))}}async onHiddenChange(){let e=p.ROOMSTATUS,t=this.session.get("connection_status");this.get("hidden")?t===e.ENTERED&&(this.setChatState(g.INACTIVE),this.isRAICandidate()&&(this.sendMarkerForLastMessage("received",!0),await this.leave(),this.enableRAI())):(await this.initialized,t===e.DISCONNECTED&&this.rejoin(),this.clearUnreadMsgCounter())}onOccupantAdded(e){(0,M.isInfoVisible)(f.default.MUC_TRAFFIC_STATES.ENTERED)&&this.session.get("connection_status")===p.ROOMSTATUS.ENTERED&&"online"===e.get("presence")&&this.updateNotifications(e.get("nick"),f.default.MUC_TRAFFIC_STATES.ENTERED)}onOccupantRemoved(e){(0,M.isInfoVisible)(f.default.MUC_TRAFFIC_STATES.EXITED)&&this.isEntered()&&"online"===e.get("presence")&&this.updateNotifications(e.get("nick"),f.default.MUC_TRAFFIC_STATES.EXITED)}onOccupantPresenceChanged(e){!e.get("states").includes("303")&&("offline"===e.get("presence")&&(0,M.isInfoVisible)(f.default.MUC_TRAFFIC_STATES.EXITED)?this.updateNotifications(e.get("nick"),f.default.MUC_TRAFFIC_STATES.EXITED):"online"===e.get("presence")&&(0,M.isInfoVisible)(f.default.MUC_TRAFFIC_STATES.ENTERED)&&this.updateNotifications(e.get("nick"),f.default.MUC_TRAFFIC_STATES.ENTERED))}async onRoomEntered(){await this.occupants.fetchMembers(),m.default.settings.get("clear_messages_on_reconnection")?await this.clearMessages():await this.fetchMessages(),m.default.trigger("enteredNewRoom",this),m.default.settings.get("auto_register_muc_nickname")&&await m.default.disco.supports(_.Strophe.NS.MUC_REGISTER,this.get("jid"))&&this.registerNickname()}async onConnectionStatusChanged(){if(this.isEntered())if(this.isRAICandidate()){try{await this.leave()}catch(e){c.default.error(e)}this.enableRAI()}else await this.onRoomEntered()}async onReconnection(){await this.rejoin(),this.announceReconnection()}getMessagesCollection(){return new h.default.exports.MUCMessages}restoreSession(){let e=h.default.session.get("bare_jid"),t=`muc.session-${e}-${this.get("jid")}`;return this.session=new O.default({id:t}),(0,b.initStorage)(this.session,t,"session"),new Promise(e=>this.session.fetch({success:e,error:e}))}initDiscoModels(){let e=h.default.session.get("bare_jid"),t=`converse.muc-features-${e}-${this.get("jid")}`;this.features=new d.Model(Object.assign({id:t},f.default.ROOM_FEATURES.reduce((e,t)=>(e[t]=!1,e),{}))),this.features.browserStorage=(0,b.createStore)(t,"session"),this.features.listenTo(h.default,"beforeLogout",()=>this.features.browserStorage.flush()),t=`converse.muc-config-${e}-${this.get("jid")}`,this.config=new d.Model({id:t}),this.config.browserStorage=(0,b.createStore)(t,"session"),this.config.listenTo(h.default,"beforeLogout",()=>this.config.browserStorage.flush())}initOccupants(){this.occupants=new h.default.exports.MUCOccupants;let e=h.default.session.get("bare_jid"),t=`converse.occupants-${e}${this.get("jid")}`;this.occupants.browserStorage=(0,b.createStore)(t,"session"),this.occupants.chatroom=this,this.occupants.listenTo(h.default,"beforeLogout",()=>this.occupants.browserStorage.flush())}fetchOccupants(){return this.occupants.fetched=new Promise(e=>{this.occupants.fetch({add:!0,silent:!0,success:e,error:e})}),this.occupants.fetched}handleAffiliationChangedMessage(e){if(e.querySelector("body"))return;let t=a()(`x[xmlns="${_.Strophe.NS.MUC_USER}"] item`,e).pop();if(t){let s=e.getAttribute("from"),r=t.getAttribute("jid"),i={from:s,states:[],jid:_.Strophe.getBareJidFromJid(r),resource:_.Strophe.getResourceFromJid(r)},o=t.getAttribute("affiliation");o&&(i.affiliation=o);let a=t.getAttribute("role");a&&(i.role=a);let l=this.occupants.findOccupant({jid:i.jid});l?l.save(i):this.occupants.create(i)}}async handleErrorMessageStanza(e){let{__:t}=h.default,s=await (0,E.parseMUCMessage)(e,this);if(I.isErrorObject(s)){let{stanza:e,message:t}=s;return e&&c.default.error(e),c.default.error(t)}if(!await this.shouldShowErrorMessage(s))return;let r=_.Strophe.getResourceFromJid(s.from),i=(r?this.getOccupant(r):null)||this,o=i.getMessageReferencedByError(s);if(o){let e={error:s.error,error_condition:s.error_condition,error_text:s.error_text,error_type:s.error_type,editable:!1};s.msgid===o.get("retraction_id")?(e.retracted=void 0,e.retraction_id=void 0,e.retracted_id=void 0,s.error||("forbidden"===s.error_condition?e.error=t("You're not allowed to retract your message."):"not-acceptable"===s.error_condition?e.error=t("Your retraction was not delivered because you're not present in the groupchat."):e.error=t("Sorry, an error occurred while trying to retract your message."))):s.error||("forbidden"===s.error_condition?e.error=t("Your message was not delivered because you weren't allowed to send it."):"not-acceptable"===s.error_condition?e.error=t("Your message was not delivered because you're not present in the groupchat."):e.error=t("Sorry, an error occurred while trying to send your message.")),o.save(e)}else i.createMessage(s)}handleMessageFromMUCHost(e){if(this.isEntered())return;let t=a()(`rai[xmlns="${_.Strophe.NS.RAI}"]`,e).pop();Array.from(t?.querySelectorAll("activity")||[]).map(e=>e.textContent).includes(this.get("jid"))&&this.save({has_activity:!0,num_unread_general:0})}handleForwardedMentions(e){if(this.isEntered())return;let t=a()(`mentions[xmlns="${_.Strophe.NS.MENTIONS}"] forwarded[xmlns="${_.Strophe.NS.FORWARD}"] message[type="groupchat"]`,e),s=this.get("jid"),r=t.filter(e=>_.Strophe.getBareJidFromJid(e.getAttribute("from"))===s);r.length&&(this.save({has_activity:!0,num_unread:this.get("num_unread")+r.length}),r.forEach(async e=>{let t=await (0,E.parseMUCMessage)(e,this);m.default.trigger("message",{stanza:e,attrs:t,chatbox:this})}))}async handleMessageStanza(e){let t,s=(e=e.tree?.()??e).getAttribute("type");if("error"===s)return this.handleErrorMessageStanza(e);if("groupchat"===s){if((0,j.isArchived)(e))return c.default.warn('Received a MAM message with type "groupchat"')}else if(!s)return this.handleForwardedMentions(e);try{t=await (0,E.parseMUCMessage)(e,this)}catch(e){return c.default.error(e)}if(I.isErrorObject(t)){let{stanza:e,message:s}=t;return e&&c.default.error(e),c.default.error(s)}let r=t;"groupchat"===r.type&&(r.codes.forEach(e=>this.createInfoMessage(e)),this.fetchFeaturesIfConfigurationChanged(r));let i={stanza:e,attrs:r,chatbox:this};return m.default.trigger("message",i),r&&this.queueMessage(r)}registerHandlers(){let e=this.get("jid"),t=_.Strophe.getDomainFromJid(e);this.removeHandlers();let s=m.default.connection.get();this.presence_handler=s.addHandler(e=>(this.onPresence(e),!0),null,"presence",null,null,e,{ignoreNamespaceFragment:!0,matchBareFromJid:!0}),this.domain_presence_handler=s.addHandler(e=>(this.onPresenceFromMUCHost(e),!0),null,"presence",null,null,t),this.message_handler=s.addHandler(e=>(this.handleMessageStanza(e),!0),null,"message",null,null,e,{matchBareFromJid:!0}),this.domain_message_handler=s.addHandler(e=>(this.handleMessageFromMUCHost(e),!0),null,"message",null,null,t),this.affiliation_message_handler=s.addHandler(e=>(this.handleAffiliationChangedMessage(e),!0),_.Strophe.NS.MUC_USER,"message",null,null,e)}removeHandlers(){let e=m.default.connection.get();return this.message_handler&&(e?.deleteHandler(this.message_handler),delete this.message_handler),this.domain_message_handler&&(e?.deleteHandler(this.domain_message_handler),delete this.domain_message_handler),this.presence_handler&&(e?.deleteHandler(this.presence_handler),delete this.presence_handler),this.domain_presence_handler&&(e?.deleteHandler(this.domain_presence_handler),delete this.domain_presence_handler),this.affiliation_message_handler&&(e?.deleteHandler(this.affiliation_message_handler),delete this.affiliation_message_handler),this}invitesAllowed(){return m.default.settings.get("allow_muc_invitations")&&(this.features.get("open")||"owner"===this.getOwnAffiliation())}getDisplayName(){let e=this.get("name");return e?e.trim():"hidden"===m.default.settings.get("locked_muc_domain")?_.Strophe.getNodeFromJid(this.get("jid")):this.get("jid")}sendTimedMessage(e){let t=e instanceof Element?e:e.tree(),s=t.getAttribute("id");s||(s=(0,w.getUniqueId)("sendIQ"),t.setAttribute("id",s));let r=(0,l.getOpenPromise)(),i=m.default.settings.get("stanza_timeout"),o=m.default.connection.get(),a=o.addTimedHandler(i,()=>{o.deleteHandler(d);let e=new v.TimeoutError("Timeout Error: No response from server");return r.resolve(e),!1}),d=o.addHandler(e=>{a&&o.deleteTimedHandler(a),r.resolve(e)},null,"message",["error","groupchat"],s);return m.default.send(t),r}async retractOwnMessage(e){let t=h.default.__,s=e.get("editable"),r=(0,w.getUniqueId)(),i=e.get("id"),o=N`
            <message id="${r}"
                     to="${this.get("jid")}"
                     type="groupchat"
                     xmlns="jabber:client">
                <retract id="${i}" xmlns="${_.Strophe.NS.RETRACT}"/>
                <body>/me retracted a message</body>
                <store xmlns="${_.Strophe.NS.HINTS}"/>
                <fallback xmlns="${_.Strophe.NS.FALLBACK}" for="${_.Strophe.NS.RETRACT}" />
            </message>`;e.set({retracted:new Date().toISOString(),retracted_id:i,retraction_id:r,editable:!1});let a=await this.sendTimedMessage(o);I.isErrorStanza(a)?c.default.error(a):a instanceof v.TimeoutError&&(c.default.error(a),e.save({editable:s,error_type:"timeout",error:t("A timeout happened while trying to retract your message."),retracted:void 0,retracted_id:void 0,retraction_id:void 0}))}async retractOtherMessage(e,t){let s=e.get("editable"),r=h.default.session.get("bare_jid");e.save({moderated:"retracted",moderated_by:r,moderated_id:e.get("msgid"),moderation_reason:t,editable:!1});let i=await this.sendRetractionIQ(e,t);return(null===i||I.isErrorStanza(i))&&e.save({editable:s,moderated:void 0,moderated_by:void 0,moderated_id:void 0,moderation_reason:void 0}),i}sendRetractionIQ(e,t){let s=N`
            <iq to="${this.get("jid")}" type="set" xmlns="jabber:client">
                <moderate id="${e.get(`stanza_id ${this.get("jid")}`)}" xmlns="${_.Strophe.NS.MODERATE}">
                    <retract xmlns="${_.Strophe.NS.RETRACT}"/>
                    ${t?N`<reason>${t}</reason>`:""}
                </moderate>
            </iq>`;return m.default.sendIQ(s,null,!1)}sendDestroyIQ(e,t){let s=N`
            <iq to="${this.get("jid")}" type="set" xmlns="jabber:client">
                <query xmlns="${_.Strophe.NS.MUC_OWNER}">
                    <destroy ${t?_.Stanza.unsafeXML(`jid="${_.Strophe.xmlescape(t)}"`):""}>
                        ${e?N`<reason>${e}</reason>`:""}
                    </destroy>
                </query>
            </iq>`;return m.default.sendIQ(s)}async leave(e){m.default.user.presence.send({type:"unavailable",to:this.getRoomJIDAndNick(),status:e}),(0,S.safeSave)(this.session,{connection_status:p.ROOMSTATUS.DISCONNECTED}),this.features&&await new Promise(e=>this.features.destroy({success:e,error:(t,s)=>{c.default.error(s),e()}}));let t=h.default.state.disco_entities?.get(this.get("jid"));t&&await new Promise(e=>t.destroy({success:e,error:(t,s)=>{c.default.error(s),e()}}))}async close(e){let{ENTERED:t,CLOSING:s}=p.ROOMSTATUS,r=this.session.get("connection_status")===t;return(0,S.safeSave)(this.session,{connection_status:s}),r&&this.sendMarkerForLastMessage("received",!0),await this.leave(),this.occupants.clearStore(),e?.name!=="closeAllChatBoxes"&&(await this.unregisterNickname(),m.default.settings.get("muc_clear_messages_on_leave")&&this.clearMessages(),m.default.trigger("leaveRoom",this)),await new Promise(e=>this.session.destroy({success:e,error:(t,s)=>{c.default.error(s),e()}})),super.close()}canModerateMessages(){let e=this.getOwnOccupant();return e&&e.isModerator()&&m.default.disco.supports(_.Strophe.NS.MODERATE,this.get("jid"))}canPostMessages(){return this.isEntered()&&!(this.features.get("moderated")&&"visitor"===this.getOwnRole())}isChatMessage(e){return e.get("type")===this.get("message_type")}getAllKnownNicknames(){return[...new Set([...this.occupants.map(e=>e.get("nick")),...this.messages.map(e=>e.get("nick"))])].filter(e=>e)}getAllKnownNicknamesRegex(){let e=this.getAllKnownNicknames().map(e=>u.default.escapeRegexString(e)).join("|");return RegExp(`(?:\\p{P}|\\p{Z}|^)@(${e})(?![\\w@-])`,"uig")}getOccupantByJID(e){return this.occupants.findOccupant({jid:e})}getOccupantByNickname(e){return this.occupants.findOccupant({nick:e})}getReferenceURIFromNickname(e){let t=this.get("jid"),s=this.getOccupant(e),r=this.features.get("nonanonymous")&&s?.get("jid")||`${t}/${e}`;return encodeURI(`xmpp:${r}`)}parseTextForReferences(e){if(!e||!/(\p{P}|\p{Z}|^)([@][\w_-]+(?:\.\w+)*)/giu.test(e))return[e,[]];let t=u.default.findFirstMatchInArray(this.getAllKnownNicknames()),s=this.getAllKnownNicknamesRegex(),r=[...e.matchAll(s)].filter(e=>!e[0].startsWith("/")).map(e=>{let s=e[0].indexOf("@");"@"===e[0][s+1]&&(s+=1);let r=e.index+s,i=r+e[0].length-s,o=t(e[1]),a=this.getReferenceURIFromNickname(o);return{begin:r,end:i,value:o,type:"mention",uri:a}}),[i,o]=u.default.reduceTextFromReferences(e,r);return[i,o]}async getOutgoingMessageAttributes(e){let t=this.get("composing_spoiler"),s="",r;e?.body&&([s,r]=this.parseTextForReferences(e.body));let i=(0,w.getUniqueId)(),o=s?I.shortnamesToUnicode(s):void 0;return e=Object.assign({},e,{body:o,is_spoiler:t,origin_id:i,references:r,id:i,msgid:i,from:`${this.get("jid")}/${this.get("nick")}`,fullname:this.get("nick"),message:o,nick:this.get("nick"),sender:"me",type:"groupchat",original_text:s},await I.getMediaURLsMetadata(s)),e=await m.default.hook("getOutgoingMessageAttributes",this,e)}getRoomJIDAndNick(){let e=this.get("nick");return _.Strophe.getBareJidFromJid(this.get("jid"))+(null!==e?`/${e}`:"")}sendChatState(){if(!m.default.settings.get("send_chat_state_notifications")||!this.get("chat_state")||!this.isEntered()||this.features.get("moderated")&&"visitor"===this.getOwnRole())return;let e=m.default.settings.get("send_chat_state_notifications");if(Array.isArray(e)&&!e.includes(this.get("chat_state")))return;let t=this.get("chat_state");t!==g.GONE&&m.default.send(N`
            <message to="${this.get("jid")}" type="groupchat" xmlns="jabber:client">
                ${t===g.INACTIVE?N`<inactive xmlns="${_.Strophe.NS.CHATSTATES}"/>`:""}
                ${t===g.ACTIVE?N`<active xmlns="${_.Strophe.NS.CHATSTATES}"/>`:""}
                ${t===g.COMPOSING?N`<composing xmlns="${_.Strophe.NS.CHATSTATES}"/>`:""}
                ${t===g.PAUSED?N`<paused xmlns="${_.Strophe.NS.CHATSTATES}"/>`:""}
                <no-store xmlns="${_.Strophe.NS.HINTS}"/>
                <no-permanent-store xmlns="${_.Strophe.NS.HINTS}"/>
            </message>`)}directInvite(e,t){this.features.get("membersonly")&&this.updateMemberLists([{jid:e,affiliation:"member",reason:t}]);let s=N`
            <message xmlns="jabber:client" to="${e}" id="${(0,w.getUniqueId)()}">
                <x xmlns="jabber:x:conference"
                    jid="${this.get("jid")}"
                    ${this.get("password")?_.Stanza.unsafeXML(`password="${_.Strophe.xmlescape(this.get("password"))}"`):""}
                    ${t?_.Stanza.unsafeXML(`reason="${_.Strophe.xmlescape(t)}"`):""} />
            </message>`;m.default.send(s),m.default.trigger("roomInviteSent",{room:this,recipient:e,reason:t})}async refreshDiscoInfo(){let e=await m.default.disco.refresh(this.get("jid"));return e instanceof v.StanzaError?e:this.getDiscoInfo().catch(e=>c.default.error(e))}async getDiscoInfo(){let e=await m.default.disco.getIdentity("conference","text",this.get("jid"));e?.get("name")?this.save({name:e.get("name")}):c.default.error(`No identity or name found for ${this.get("jid")}`),await this.getDiscoInfoFields(),await this.getDiscoInfoFeatures()}async getDiscoInfoFields(){let e=(await m.default.disco.getFields(this.get("jid"))).reduce((e,t)=>{let s=t.get("var");return"muc#roomconfig_roomname"===s&&(e.roomname=t.get("value")),s?.startsWith("muc#roominfo_")&&(e[s.replace("muc#roominfo_","")]=t.get("value")),e},{});this.config.save(e),e.roomname&&this.save({name:e.roomname})}async getDiscoInfoFeatures(){let e=await m.default.disco.getFeatures(this.get("jid")),t=f.default.ROOM_FEATURES.reduce((e,t)=>(e[t]=!1,e),{fetched:new Date().toISOString()});e.each(e=>{let s=e.get("var");if(!s.startsWith("muc_"))return void(s===_.Strophe.NS.MAM?t.mam_enabled=!0:t[s]=!0);t[s.replace("muc_","")]=!0}),this.features.save(t)}addFieldValue(e){let t=e.getAttribute("type");if("fixed"===t)return e;let s=e.getAttribute("var").replace("muc#roomconfig_",""),r=this.get("roomconfig");if(s in r){let i;switch(t){case"boolean":i=[+!!r[s]];break;case"list-multi":i=r[s];break;default:i=[r[s]]}e.innerHTML=i.map(e=>(0,_.$build)("value").t(e)).join("")}return e}async autoConfigureChatRoom(){let e=await this.fetchRoomConfiguration(),t=a()("field",e).map(e=>this.addFieldValue(e));if(t.length)return this.sendConfiguration(t)}fetchRoomConfiguration(){return m.default.sendIQ(N`
            <iq to="${this.get("jid")}" type="get" xmlns="jabber:client">
                <query xmlns="${_.Strophe.NS.MUC_OWNER}"/>
            </iq>`)}sendConfiguration(e=[]){let t=N`
            <iq to="${this.get("jid")}" type="set" xmlns="jabber:client">
                <query xmlns="${_.Strophe.NS.MUC_OWNER}">
                    <x xmlns="${_.Strophe.NS.XFORM}" type="submit">
                        ${e.map(e=>_.Strophe.Builder.fromString(e.outerHTML))}
                    </x>
                </query>
            </iq>`;return m.default.sendIQ(t)}onCommandError(e){let{__:t}=h.default;c.default.fatal(e);let s=t("Sorry, an error happened while running the command.")+" "+t("Check your browser's developer console for details.");this.createMessage({message:s,type:"error"})}getNickOrJIDFromCommandArgs(e){let{__:t}=h.default;if(I.isValidJID(e.trim()))return e.trim();e.startsWith("@")||(e="@"+e);let s=this.parseTextForReferences(e)[1];if(!s.length){let e=t("Error: couldn't find a groupchat participant based on your arguments");this.createMessage({message:e,type:"error"});return}if(s.length>1){let e=t("Error: found multiple groupchat participant based on your arguments");this.createMessage({message:e,type:"error"});return}let r=s.pop().value,i=e.split(r,2)[1];if(i&&!i.startsWith(" ")){let e=t("Error: couldn't find a groupchat participant based on your arguments");this.createMessage({message:e,type:"error"});return}return r}validateRoleOrAffiliationChangeArgs(e,t){let{__:s}=h.default;if(!t){let t=s('Error: the "%1$s" command takes two arguments, the user\'s nickname and optionally a reason.',e);return this.createMessage({message:t,type:"error"}),!1}return!0}getAllowedCommands(){let e=["clear","help","me","nick","register"];(this.config.get("changesubject")||["owner","admin"].includes(this.getOwnAffiliation()))&&(e=[...e,"subject","topic"]);let t=h.default.session.get("bare_jid"),s=this.occupants.findWhere({jid:t});return(this.verifyAffiliations(["owner"],s,!1)?e=e.concat(p.OWNER_COMMANDS).concat(p.ADMIN_COMMANDS):this.verifyAffiliations(["admin"],s,!1)&&(e=e.concat(p.ADMIN_COMMANDS)),this.verifyRoles(["moderator"],s,!1)?e=e.concat(p.MODERATOR_COMMANDS).concat(p.VISITOR_COMMANDS):this.verifyRoles(["visitor","participant","moderator"],s,!1)||(e=e.concat(p.VISITOR_COMMANDS)),e.sort(),Array.isArray(m.default.settings.get("muc_disable_slash_commands")))?e.filter(e=>!m.default.settings.get("muc_disable_slash_commands").includes(e)):e}verifyAffiliations(e,t,s=!0){let{__:r}=h.default;if(!Array.isArray(e))throw TypeError("affiliations must be an Array");if(!e.length)return!0;let i=h.default.session.get("bare_jid");if(t=t||this.occupants.findWhere({jid:i})){let s=t.get("affiliation");if(e.includes(s))return!0}if(s){let e=r("Forbidden: you do not have the necessary affiliation in order to do that.");this.createMessage({message:e,type:"error"})}return!1}verifyRoles(e,t,s=!0){let{__:r}=h.default;if(!Array.isArray(e))throw TypeError("roles must be an Array");if(!e.length)return!0;let i=h.default.session.get("bare_jid");if(t=t||this.occupants.findWhere({jid:i})){let s=t.get("role");if(e.includes(s))return!0}if(s){let e=r("Forbidden: you do not have the necessary role in order to do that.");this.createMessage({message:e,type:"error",is_ephemeral:2e4})}return!1}getOwnRole(){return this.getOwnOccupant()?.get("role")}getOwnAffiliation(){return this.getOwnOccupant()?.get("affiliation")||"none"}getOwnOccupant(){return this.occupants.getOwnOccupant()}async setNickname(e){let t=_.Strophe.getBareJidFromJid(this.get("jid"));m.default.send(N`<presence xmlns="jabber:client"
                    id="${(0,w.getUniqueId)()}"
                    from="${m.default.connection.get().jid}"
                    to="${t}/${e}"></presence>`)}setRole(e,t,s,r,i){let o=N`
            <iq to="${this.get("jid")}" type="set" xmlns="jabber:client">
                <query xmlns="${_.Strophe.NS.MUC_ADMIN}">
                    <item nick="${e.get("nick")}" role="${t}">
                        ${null!==s?N`<reason>${s}</reason>`:""}
                    </item>
                </query>
            </iq>`;return m.default.sendIQ(o).then(r).catch(i)}getOccupant(e){return I.isValidJID(e)?this.getOccupantByJID(e):this.getOccupantByNickname(e)}getOccupantsWithRole(e){return this.getOccupantsSortedBy("nick").filter(t=>t.get("role")===e).map(e=>({jid:e.get("jid"),nick:e.get("nick"),role:e.get("role")}))}getOccupantsWithAffiliation(e){return this.getOccupantsSortedBy("nick").filter(t=>t.get("affiliation")===e).map(e=>({jid:e.get("jid"),nick:e.get("nick"),affiliation:e.get("affiliation")}))}getOccupantsSortedBy(e){return Array.from(this.occupants.models).sort((t,s)=>t.get(e)<s.get(e)?-1:+(t.get(e)>s.get(e)))}async updateMemberLists(e){let t=this.get("jid"),s=(await Promise.all(["member","admin","owner"].map(e=>(0,y.getAffiliationList)(e,t)))).reduce((e,t)=>t instanceof Error?(c.default.error(t),e):[...t,...e],[]);await (0,y.setAffiliations)(t,(0,y.computeAffiliationsDelta)(!0,!1,e,s)),await this.occupants.fetchMembers()}async getNicknameFromHook(){return await m.default.hook("getNicknameForMUC",this,null)}async getAndPersistNickname(e){return(e=e||this.get("nick")||await this.getReservedNick()||await this.getNicknameFromHook()||h.default.exports.getDefaultMUCNickname())&&(0,S.safeSave)(this,{nick:e},{silent:!0}),e}async getReservedNick(){let e=N`
            <iq to="${this.get("jid")}" type="get" xmlns="jabber:client">
                <query xmlns="${_.Strophe.NS.DISCO_INFO}" node="x-roomuser-item"/>
            </iq>`,t=await m.default.sendIQ(e,null,!1);if(I.isErrorObject(t))throw t;let s=t?.querySelector('query[node="x-roomuser-item"] identity');return s?s.getAttribute("name"):null}async registerNickname(){let e,t,{__:s}=h.default,r=this.get("nick"),i=this.get("jid");try{e=await m.default.sendIQ(N`<iq to="${i}" type="get" xmlns="jabber:client">
                    <query xmlns="${_.Strophe.NS.MUC_REGISTER}"/>
                </iq>`)}catch(e){return a()(`not-allowed[xmlns="${_.Strophe.NS.STANZAS}"]`,e).length?t=s("You're not allowed to register yourself in this groupchat."):a()(`registration-required[xmlns="${_.Strophe.NS.STANZAS}"]`,e).length&&(t=s("You're not allowed to register in this groupchat because it's members-only.")),c.default.error(e),t}let o=a()("field required",e).map(e=>e.parentElement);if(o.length>1&&"muc#register_roomnick"!==o[0].getAttribute("var"))return c.default.error(`Can't register the user register in the groupchat ${i} due to the required fields`);try{await m.default.sendIQ(N`<iq to="${i}" type="set" xmlns="jabber:client">
                    <query xmlns="${_.Strophe.NS.MUC_REGISTER}">
                        <x xmlns="${_.Strophe.NS.XFORM}" type="submit">
                            <field var="FORM_TYPE">
                                <value>http://jabber.org/protocol/muc#register</value>
                            </field>
                            <field var="muc#register_roomnick">
                                <value>${r}</value>
                            </field>
                        </x>
                    </query>
                </iq>`)}catch(t){let e=await (0,j.parseErrorStanza)(t);throw e?.name==="service-unavailable"?c.default.error("Can't register your nickname in this groupchat, it doesn't support registration."):e?.name==="bad-request"?c.default.error("Can't register your nickname in this groupchat, invalid data form supplied."):c.default.error(t),e}}async unregisterNickname(){if("unregister"===m.default.settings.get("auto_register_muc_nickname"))try{await m.default.disco.supports(_.Strophe.NS.MUC_REGISTER,this.get("jid"))&&await this.sendUnregistrationIQ()}catch(e){c.default.error(e)}}sendUnregistrationIQ(){let e=N`
            <iq to="${this.get("jid")}" type="set" xmlns="jabber:client">
                <query xmlns="${_.Strophe.NS.MUC_REGISTER}">
                    <remove/>
                </query>
            </iq>`;return m.default.sendIQ(e).catch(e=>c.default.error(e))}updateOccupantsOnPresence(e){if("error"===e.type||!e.jid&&!e.nick&&!e.occupant_id)return!0;let t=this.occupants.findOccupant(e);if("unavailable"===e.type&&t&&!e.codes.includes(f.default.MUC_NICK_CHANGED_CODE)&&!["admin","owner","member"].includes(e.affiliation)){t.set({...e,presence:"offline"}),t.destroy();return}let s="unavailable"!==e.type?"online":"offline",r=e.jid||"",i={...e,presence:s,jid:_.Strophe.getBareJidFromJid(r)||t?.attributes?.jid,resource:_.Strophe.getResourceFromJid(r)||t?.attributes?.resource};if(e.is_self){let t=!1;e.codes.includes(f.default.MUC_NICK_CHANGED_CODE)&&(t=!0,this.set("nick",e.nick)),this.features.get(_.Strophe.NS.OCCUPANTID)&&this.get("occupant-id")!==e.occupant_id&&(t=!0,this.set("occupant_id",e.occupant_id)),t&&this.save()}t?t.save(i):this.occupants.create(i)}fetchFeaturesIfConfigurationChanged(e){let t=["104","170","171","172","173","174"];e.codes.filter(e=>t.includes(e)).length&&this.refreshDiscoInfo()}isSameUser(e,t){let s=_.Strophe.getBareJidFromJid(e),r=_.Strophe.getBareJidFromJid(t),i=_.Strophe.getResourceFromJid(e),o=_.Strophe.getResourceFromJid(t);if(I.isSameBareJID(e,t))if(s===this.get("jid"))return i===o;else return!0;return(s===this.get("jid")?this.occupants.findOccupant({nick:i}):this.occupants.findOccupant({jid:s}))===(r===this.get("jid")?this.occupants.findOccupant({nick:o}):this.occupants.findOccupant({jid:r}))}async isSubjectHidden(){return(await m.default.user.settings.get("mucs_with_hidden_subject",[])).includes(this.get("jid"))}async toggleSubjectHiddenState(){let e=this.get("jid"),t=await m.default.user.settings.get("mucs_with_hidden_subject",[]);t.includes(this.get("jid"))?m.default.user.settings.set("mucs_with_hidden_subject",t.filter(t=>t!==e)):m.default.user.settings.set("mucs_with_hidden_subject",[...t,e])}async handleSubjectChange(e){let t=h.default.__;if("string"==typeof e.subject&&!e.thread&&!e.message){let s=e.subject,r=e.nick;if((0,S.safeSave)(this,{subject:{author:r,text:e.subject||""}}),!e.is_delayed&&r){let i=t(s?"Topic set by %1$s":"Topic cleared by %1$s",r),o=this.messages.last();(o?.get("nick")!==e.nick||o?.get("type")!=="info"||o?.get("message")!==i)&&this.createMessage({message:i,nick:e.nick,type:"info",is_ephemeral:!0}),await this.isSubjectHidden()&&this.toggleSubjectHiddenState()}return!0}return!1}setSubject(e=""){m.default.send(N`
            <message to="${this.get("jid")}" type="groupchat" xmlns="jabber:client">
                <subject>${e}</subject>
            </message>`)}ignorableCSN(e){return e.chat_state&&!e.body&&(e.is_delayed||this.isOwnMessage(e))}isOwnMessage(e){let t;return t=e instanceof Element?e.getAttribute("from"):e instanceof h.default.exports.MUCMessage?e.get("from"):e.from,_.Strophe.getResourceFromJid(t)==this.get("nick")}getUpdatedMessageAttributes(e,t){let s={...super.getUpdatedMessageAttributes(e,t),...(0,i.default)(t,["from_muc","occupant_id"])};if(this.isOwnMessage(t)){let r=Object.keys(t).filter(e=>e.startsWith("stanza_id"));Object.assign(s,{...(0,i.default)(t,r)},{body:t.body}),e.get("received")||(s.received=new Date().toISOString())}return s}async isJoined(){return this.isEntered()?(m.default.connection.connected()||await new Promise(e=>m.default.listen.once("reconnected",e)),m.default.ping(`${this.get("jid")}/${this.get("nick")}`)):(c.default.info(`isJoined: not pinging MUC ${this.get("jid")} since we're not entered`),!1)}async sendStatusPresence(e,t){if(this.session.get("connection_status")===p.ROOMSTATUS.ENTERED){let s=await h.default.state.profile.constructPresence({...e,to:`${this.get("jid")}/${this.get("nick")}`},t?.map(e=>e?.tree()??e));m.default.send(s)}}async rejoinIfNecessary(){return this.isRAICandidate()?(c.default.debug(`rejoinIfNecessary: not rejoining hidden MUC "${this.get("jid")}" since we're using RAI`),!0):await this.isJoined()?void 0:(this.rejoin(),!0)}async shouldShowErrorMessage(e){if("Decryption"===e.error_type){if("Message key not found. The counter was repeated or the key was not filled."===e.error_message)return!1;else if("not-encrypted-for-this-device"===e.error_condition)return!1}else if("not-acceptable"===e.error_condition&&await this.rejoinIfNecessary())return!1;return super.shouldShowErrorMessage(e)}findDanglingModeration(e){if(!this.messages.length)return null;if(this.messages.last().get("time")>e.time){let t=Array.from(this.messages.models),s=e[`stanza_id ${this.get("jid")}`];return s?(t.reverse(),t.find(({attributes:e})=>"retracted"===e.moderated&&e.moderated_id===s&&e.moderated_by)):null}}async handleModeration(e){let t=["editable","moderated","moderated_by","moderated_by_id","moderated_id","moderation_reason"];if("retracted"===e.moderated){let s={};s[`stanza_id ${this.get("jid")}`]=e.moderated_id;let r=this.messages.findWhere(s);return r?r.save((0,i.default)(e,t)):(e.dangling_moderation=!0,await this.createMessage(e)),!0}{let s=this.findDanglingModeration(e);if(s){let r=Object.assign({dangling_moderation:!1},e,(0,i.default)(s.attributes,t));return delete r.id,s.save(r),!0}}return!1}getNotificationsText(){let{__:e}=h.default,t=this.notifications.toJSON(),s=m.default.settings.get("muc_show_info_messages").filter(e=>f.default.MUC_ROLE_CHANGES_LIST.includes(e)),r=m.default.settings.get("muc_show_info_messages").filter(e=>f.default.MUC_TRAFFIC_STATES_LIST.includes(e));return[...f.default.CHAT_STATES,...r,...s].reduce((s,r)=>{let i=t[r];if(!i?.length)return s;let o=i.map(e=>this.getOccupant(e)?.getDisplayName()||e);if(1===o.length){if("composing"===r)return`${s}${e("%1$s is typing",o[0])}
`;else if("paused"===r)return`${s}${e("%1$s has stopped typing",o[0])}
`;else if(r===g.GONE)return`${s}${e("%1$s has gone away",o[0])}
`;else if("entered"===r)return`${s}${e("%1$s has entered the groupchat",o[0])}
`;else if("exited"===r)return`${s}${e("%1$s has left the groupchat",o[0])}
`;else if("op"===r)return`${s}${e("%1$s is now a moderator",o[0])}
`;else if("deop"===r)return`${s}${e("%1$s is no longer a moderator",o[0])}
`;else if("voice"===r)return`${s}${e("%1$s has been given a voice",o[0])}
`;else if("mute"===r)return`${s}${e("%1$s has been muted",o[0])}
`}else if(o.length>1){let t;if(o.length>3)t=`${Array.from(o).slice(0,2).join(", ")} and others`;else{let s=o.pop();t=e("%1$s and %2$s",o.join(", "),s)}if("composing"===r)return`${s}${e("%1$s are typing",t)}
`;if("paused"===r)return`${s}${e("%1$s have stopped typing",t)}
`;if(r===g.GONE)return`${s}${e("%1$s have gone away",t)}
`;else if("entered"===r)return`${s}${e("%1$s have entered the groupchat",t)}
`;else if("exited"===r)return`${s}${e("%1$s have left the groupchat",t)}
`;else if("op"===r)return`${s}${e("%1$s are now moderators",o[0])}
`;else if("deop"===r)return`${s}${e("%1$s are no longer moderators",o[0])}
`;else if("voice"===r)return`${s}${e("%1$s have been given voices",o[0])}
`;else if("mute"===r)return`${s}${e("%1$s have been muted",o[0])}
`}return s},"")}removeNotification(e,t){let s=this.notifications.toJSON();(t=Array.isArray(t)?t:[t]).forEach(t=>{let r=Array.from(s[t]||[]);if(r.includes(e)){let s=r.indexOf(e);r.splice(s,1),this.notifications.set(t,Array.from(r))}})}updateNotifications(e,t){let s=this.notifications.toJSON(),r=s[t]||[];if(r.includes(e))return;let i=(i,o)=>(o===t?i[o]=[...r,e]:i[o]=(s[o]||[]).filter(t=>t!==e),i),o=f.default.CHAT_STATES.reduce(i,{}),a=f.default.MUC_TRAFFIC_STATES_LIST.reduce(i,{}),l=f.default.MUC_ROLE_CHANGES_LIST.reduce(i,{});this.notifications.set(Object.assign(o,a,l)),setTimeout(()=>this.removeNotification(e,t),1e4)}handleMUCPrivateMessage(e){if("chat"===e.type||null===e.type){let t=this.occupants.findOccupant(e);if(t)return t.queueMessage(e)}return!1}handleMetadataFastening(e){if(e.ogp_for_id){if(e.from!==this.get("jid"))return!1;let t=this.messages.findWhere({origin_id:e.ogp_for_id});if(t){let s=t.get("ogp_metadata")||[];if(s.filter(t=>t["og:url"]===e["og:url"]).length)return!1;let r=[...s,(0,i.default)(e,g.METADATA_ATTRIBUTES)];return t.save("ogp_metadata",r),!0}}return!1}handleMEPNotification(e){return e.from===this.get("jid")&&!!e.activities&&(e.activities?.forEach(t=>{let s=Object.assign(e,t);this.createMessage(s),m.default.trigger("message",{attrs:s,chatbox:this})}),!!e.activities.length)}getDuplicateMessage(e){return e.activities?.length?this.messages.findWhere({type:"mep",msgid:e.msgid}):super.getDuplicateMessage(e)}async onMessage(e){if(I.isErrorObject(e))return c.default.error(e.message);if("error"===e.type&&!await this.shouldShowErrorMessage(e))return;let t=this.getDuplicateMessage(e);if(t){"groupchat"===t.get("type")&&this.updateMessage(t,e);return}if(!(e.receipt_id||e.is_marker||this.ignorableCSN(e))){if(this.handleMUCPrivateMessage(e)||this.handleMetadataFastening(e)||this.handleMEPNotification(e)||await this.handleModeration(e)||await this.handleRetraction(e)||await this.handleSubjectChange(e)){e.nick&&this.removeNotification(e.nick,["composing","paused"]);return}if(this.setEditable(e,e.time),e.chat_state&&this.updateNotifications(e.nick,e.chat_state),(0,M.shouldCreateGroupchatMessage)(e)){let t=await this.handleCorrection(e)||await this.createMessage(e);this.removeNotification(e.nick,["composing","paused"]),this.handleUnreadMessage(t)}}}handleModifyError(e){let t=e.querySelector("error text")?.textContent;t&&(this.session.get("connection_status")===p.ROOMSTATUS.CONNECTING?this.setDisconnectionState(t):this.createMessage({type:"error",message:t,is_ephemeral:!0}))}handleDisconnection(e){let{is_self:t,reason:s,actor:r}=e,i=e.codes.filter(e=>p.DISCONNECT_CODES.includes(e));if(!(t&&i.length>0))return;let{STATUS_CODE_MESSAGES:o}=h.default.labels.muc,a=o[i[0]],l=i.includes("301")?p.ROOMSTATUS.BANNED:p.ROOMSTATUS.DISCONNECTED;this.setDisconnectionState(a,s,r?.nick,l)}getActionInfoMessage(e,t){let{nick:s,actor:r}=t,i=h.default.__;if("301"===e)return r?.nick?i("%1$s has been banned by %2$s",s,r.nick):i("%1$s has been banned",s);if("303"===e)return i("%1$s's nickname has changed",s);if("307"===e)return r?.nick?i("%1$s has been kicked out by %2$s",s,r.nick):i("%1$s has been kicked out",s);if("321"===e)return i("%1$s has been removed because of an affiliation change",s);if("322"===e)return i("%1$s has been removed for not being a member",s)}createAffiliationChangeMessage(e){let t=h.default.__,s=e._previousAttributes.affiliation;if(!s)return;let r=e.get("affiliation");"admin"===s&&(0,M.isInfoVisible)(f.default.AFFILIATION_CHANGES.EXADMIN)?this.createMessage({type:"info",message:t("%1$s is no longer an admin of this groupchat",e.get("nick"))}):"owner"===s&&(0,M.isInfoVisible)(f.default.AFFILIATION_CHANGES.EXOWNER)?this.createMessage({type:"info",message:t("%1$s is no longer an owner of this groupchat",e.get("nick"))}):"outcast"===s&&(0,M.isInfoVisible)(f.default.AFFILIATION_CHANGES.EXOUTCAST)&&this.createMessage({type:"info",message:t("%1$s is no longer banned from this groupchat",e.get("nick"))}),"none"===r&&"member"===s&&(0,M.isInfoVisible)(f.default.AFFILIATION_CHANGES.EXMEMBER)&&this.createMessage({type:"info",message:t("%1$s is no longer a member of this groupchat",e.get("nick"))}),"member"===r&&(0,M.isInfoVisible)(f.default.AFFILIATION_CHANGES.MEMBER)?this.createMessage({type:"info",message:t("%1$s is now a member of this groupchat",e.get("nick"))}):("admin"===r&&(0,M.isInfoVisible)(f.default.AFFILIATION_CHANGES.ADMIN)||"owner"==r&&(0,M.isInfoVisible)(f.default.AFFILIATION_CHANGES.OWNER))&&this.createMessage({type:"info",message:t("%1$s is now an %2$s of this groupchat",e.get("nick"),r)})}createRoleChangeMessage(e,t){if("none"===t||e.changed.affiliation)return;let s=e._previousAttributes.role;"moderator"===s&&(0,M.isInfoVisible)(f.default.MUC_ROLE_CHANGES.DEOP)?this.updateNotifications(e.get("nick"),f.default.MUC_ROLE_CHANGES.DEOP):"visitor"===s&&(0,M.isInfoVisible)(f.default.MUC_ROLE_CHANGES.VOICE)&&this.updateNotifications(e.get("nick"),f.default.MUC_ROLE_CHANGES.VOICE),"visitor"===e.get("role")&&(0,M.isInfoVisible)(f.default.MUC_ROLE_CHANGES.MUTE)?this.updateNotifications(e.get("nick"),f.default.MUC_ROLE_CHANGES.MUTE):"moderator"===e.get("role")&&!["owner","admin"].includes(e.get("affiliation"))&&(0,M.isInfoVisible)(f.default.MUC_ROLE_CHANGES.OP)&&this.updateNotifications(e.get("nick"),f.default.MUC_ROLE_CHANGES.OP)}createInfoMessageFromPresence(e,t){let s=h.default.__,r=t.is_self??!1;if(!M.isInfoVisible||"110"===e||"100"===e&&!r)return;let{STATUS_CODE_MESSAGES:i}=h.default.labels.muc,o=i[e],a={type:"info",is_ephemeral:!0,message:o,code:e};if(!r&&p.ACTION_INFO_CODES.includes(e)?(a.message=this.getActionInfoMessage(e,t),a.reason=t.reason):r&&p.NEW_NICK_CODES.includes(e)&&(a.message=t.nick?s(o,t.nick):void 0),a.message){if("201"===e&&this.messages.findWhere(a))return;this.createMessage(a)}}createInfoMessage(e){if(!(0,M.isInfoVisible)(e)||"110"===e)return;let{STATUS_CODE_MESSAGES:t}=h.default.labels.muc,s=t[e];s&&this.createMessage({type:"info",is_ephemeral:!0,message:s,code:e})}setDisconnectionState(e,t,s,r=p.ROOMSTATUS.DISCONNECTED){this.session.save({connection_status:r,disconnection_actor:s,disconnection_message:e,disconnection_reason:t})}onNicknameClash(e){let t=h.default.__;if(m.default.settings.get("muc_nickname_from_jid")){let t=e.getAttribute("from").split("/")[1];if(t===h.default.exports.getDefaultMUCNickname())this.join(t+"-2");else{let e=t.lastIndexOf("-"),s=t.substring(e+1,t.length);this.join(t.substring(0,e+1)+String(Number(s)+1))}}else this.save({nickname_validation_message:t("The nickname you chose is reserved or currently in use, please choose a different one.")}),this.session.save({connection_status:p.ROOMSTATUS.NICKNAME_REQUIRED})}onErrorPresence(e){let t=h.default.__,s=e.querySelector("error"),r=s.getAttribute("type"),i=a()(`text[xmlns="${_.Strophe.NS.STANZAS}"]`,s).pop()?.textContent;if("modify"===r)this.handleModifyError(e);else if("auth"===r){if(a()(`not-authorized[xmlns="${_.Strophe.NS.STANZAS}"]`,s).length&&(this.save({password_validation_message:i||t("Password incorrect")}),this.session.save({connection_status:p.ROOMSTATUS.PASSWORD_REQUIRED})),s.querySelector("registration-required")){let e=t("You are not on the member list of this groupchat.");this.setDisconnectionState(e,i)}else if(s.querySelector("forbidden")){let{STATUS_CODE_MESSAGES:e}=h.default.labels.muc;this.setDisconnectionState(e[301],i,null,p.ROOMSTATUS.BANNED)}}else if("cancel"===r)if(s.querySelector("not-allowed")){let e=t("You are not allowed to create new groupchats.");this.setDisconnectionState(e,i)}else if(s.querySelector("not-acceptable")){let e=t("Your nickname doesn't conform to this groupchat's policies.");this.setDisconnectionState(e,i)}else if(a()(`gone[xmlns="${_.Strophe.NS.STANZAS}"]`,s).length){let e=a()(`gone[xmlns="${_.Strophe.NS.STANZAS}"]`,s).pop()?.textContent.replace(/^xmpp:/,"").replace(/\?join$/,"");this.save({moved_jid:e,destroyed_reason:i}),this.session.save({connection_status:p.ROOMSTATUS.DESTROYED})}else if(s.querySelector("conflict"))this.onNicknameClash(e);else if(s.querySelector("item-not-found")){let e=t("This groupchat does not (yet) exist.");this.setDisconnectionState(e,i)}else if(s.querySelector("service-unavailable")){let e=t("This groupchat has reached its maximum number of participants.");this.setDisconnectionState(e,i)}else if(s.querySelector("remote-server-not-found")){let e=t("Remote server not found");this.setDisconnectionState(e,i)}else if(s.querySelector("forbidden")){let e=t("You're not allowed to enter this groupchat");this.setDisconnectionState(e,i)}else{let e=t("An error happened while trying to enter this groupchat");this.setDisconnectionState(e,i)}}onPresenceFromMUCHost(e){if("error"===e.getAttribute("type")){let t=e.querySelector("error");t?.getAttribute("type")==="wait"&&t?.querySelector("resource-constraint")&&this.session.get("connection_status")===p.ROOMSTATUS.DISCONNECTED&&this.rejoin()}}async onPresence(e){if("error"===e.getAttribute("type"))return this.onErrorPresence(e);let t=await (0,E.parseMUCPresence)(e,this);t.codes.forEach(async e=>{if(this.createInfoMessageFromPresence(e,t),t.is_self&&p.NEW_NICK_CODES.includes(e)&&(this.save("nick",t.nick),"303"===e&&m.default.settings.get("auto_register_muc_nickname")&&await m.default.disco.supports(_.Strophe.NS.MUC_REGISTER,this.get("jid"))))try{await this.registerNickname()}catch(e){c.default.error(e),c.default.error("Error: could not register new nickname")}}),t.is_self?(this.onOwnPresence(t),"none"!==this.getOwnRole()&&this.session.get("connection_status")===p.ROOMSTATUS.CONNECTING&&this.session.save("connection_status",p.ROOMSTATUS.CONNECTED)):this.updateOccupantsOnPresence(t)}async onOwnPresence(e){if(await this.occupants.fetched,"unavailable"===e.type)return void this.handleDisconnection(e);let t=this.session.get("connection_status");t!==p.ROOMSTATUS.ENTERED&&t!==p.ROOMSTATUS.CLOSING?(this.session.save("connection_status",p.ROOMSTATUS.ENTERED,{silent:!0}),this.updateOccupantsOnPresence(e),this.session.trigger("change:connection_status",this.session,t)):this.updateOccupantsOnPresence(e),e.codes.includes("201")&&(this.get("auto_configure")?await this.autoConfigureChatRoom().then(()=>this.refreshDiscoInfo()):m.default.settings.get("muc_instant_rooms")?await this.sendConfiguration().then(()=>this.refreshDiscoInfo()):m.default.modal.show("converse-muc-config-modal",{model:this}))}isUserMentioned(e){let t=this.get("nick");return e.get("references").length?e.get("references").filter(e=>"mention"===e.type).map(e=>e.value).includes(t):RegExp(`\\b${t}\\b`).test(e.get("body"))}incrementUnreadMsgsCounter(e){let t={num_unread_general:this.get("num_unread_general")+1};0===this.get("num_unread_general")&&(t.first_unread_id=e.get("id")),this.isUserMentioned(e)&&(t.num_unread=this.get("num_unread")+1),this.save(t)}async clearUnreadMsgCounter(){(this.get("num_unread_general")>0||this.get("num_unread")>0||this.get("has_activity"))&&await this.sendMarkerForMessage(this.messages.last()),(0,S.safeSave)(this,{has_activity:!1,num_unread:0,num_unread_general:0})}}let D=R},"./src/headless/plugins/muc/occupant.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>b});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/log/index.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/_converse.js"),l=s("./src/headless/shared/api/public.js"),d=s("./src/headless/shared/color.js"),c=s("./src/headless/shared/model-with-messages.js"),u=s("./src/headless/shared/model-with-vcard.js"),h=s("./src/headless/plugins/muc/constants.js"),m=s("./src/headless/plugins/muc/messages.js"),f=s("./src/headless/utils/index.js"),p=s("./src/headless/plugins/muc/utils.js"),g=s("./src/headless/shared/actions.js");let{Strophe:_,stx:v}=l.default.env;class y extends(0,u.default)((0,c.default)((0,d.default)(r.Model))){async initialize(){this.lazy_load_vcard=!0,super.initialize(),await this.fetchMessages(),this.on("change:nick",()=>this.setColor()),this.on("change:jid",()=>this.setColor()),this.on("change:chat_state",()=>(0,g.sendChatState)(this.get("jid"),this.get("chat_state")))}defaults(){return{hats:[],presence:"offline",show:void 0,states:[],hidden:!0,num_unread:0,message_type:"chat"}}save(e,t,s){let r;return null==e?super.save(e,t,s):("object"==typeof e?(r=e,s=t):(r={})[e]=t,r.occupant_id&&(r.id=r.occupant_id),super.save(r,s))}getMessagesCacheKey(){let e=this.get("occupant_id")||this.get("jid")||this.get("nick");return`converse.muc-private-msgs-${e}-${a.default.session.get("bare_jid")}`}getMessagesCollection(){return new m.default}async onMessage(e){if(f.default.isErrorObject(e)){let{stanza:t,message:s}=e;return t&&i.default.error(t),i.default.error(s)}if("error"===e.type&&!await this.shouldShowErrorMessage(e))return;let t=this.getDuplicateMessage(e);if(t)return void this.updateMessage(t,e);if(!await this.handleRetraction(e)&&(this.setEditable(e,e.time),(0,p.shouldCreateGroupchatMessage)(e))){let t=await this.handleCorrection(e)||await this.createMessage(e);this.handleUnreadMessage(t)}}getDisplayName(){return this.get("nick")||this.get("jid")||""}getAssignableRoles(){let e=o.default.settings.get("modtools_disable_assign");return(Array.isArray(e)||(e=e?h.ROLES:[]),"moderator"===this.get("role"))?h.ROLES.filter(t=>!e.includes(t)):[]}getAssignableAffiliations(){let e=o.default.settings.get("modtools_disable_assign");return(Array.isArray(e)||(e=e?h.AFFILIATIONS:[]),"owner"===this.get("affiliation"))?h.AFFILIATIONS.filter(t=>!e.includes(t)):"admin"===this.get("affiliation")?h.AFFILIATIONS.filter(t=>!["owner","admin",...e].includes(t)):[]}isMember(){return["admin","owner","member"].includes(this.get("affiliation"))}isModerator(){return["admin","owner"].includes(this.get("affiliation"))||"moderator"===this.get("role")}isSelf(){return this.get("states").includes("110")}async getOutgoingMessageAttributes(e){let t=f.default.getUniqueId(),s=e?.body,r=s?f.default.shortnamesToUnicode(s):void 0,i=this.collection.chatroom,l=i.getOwnOccupant();return e=Object.assign({},e,{body:r,from:l.get("from"),fullname:a.default.state.profile.get("fullname"),id:t,jid:this.get("jid"),message:r,msgid:t,nick:l.get("nickname"),origin_id:t,sender:"me",time:new Date().toISOString(),to:this.get("from")??`${i.get("jid")}/${this.get("nick")}`,type:"chat"},await f.default.getMediaURLsMetadata(s)),e=await o.default.hook("getOutgoingMessageAttributes",this,e)}async createMessageStanza(e){let t=await super.createMessageStanza(e);return t.cnode(v`<x xmlns="${_.NS.MUC}#user"/>`).root(),t}isChatMessage(e){return e.get("type")===this.get("message_type")}}let b=y},"./src/headless/plugins/muc/occupants.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>p});var r=s("./src/headless/plugins/muc/occupant.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./node_modules/@converse/skeletor/dist/skeletor.js"),d=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),c=s("./src/headless/plugins/muc/affiliations/utils.js"),u=s("./src/headless/plugins/muc/utils.js"),h=s("./src/headless/utils/index.js");let{u:m}=a.default.env;class f extends l.Collection{constructor(e,t){super(e,Object.assign({comparator:u.occupantsComparator},t)),this.chatroom=null}get model(){return r.default}initialize(){this.on("change:nick",()=>this.sort()),this.on("change:role",()=>this.sort())}static getAutoFetchedAffiliationLists(){let e=o.default.settings.get("muc_fetch_members");return Array.isArray(e)?e:e?["member","admin","owner"]:[]}create(e,t){return e.id||e instanceof l.Model||(e.id=e.occupant_id||(0,h.getUniqueId)()),super.create(e,t)}async fetchMembers(){if(!["member","admin","owner"].includes(this.getOwnOccupant()?.get("affiliation")))return;let e=f.getAutoFetchedAffiliationLists();if(0===e.length)return;let t=this.chatroom.get("jid"),s=await Promise.all(e.map(e=>(0,c.getAffiliationList)(e,t))),r=s.reduce((e,t)=>t instanceof Error?e:[...t,...e],[]),a=e.filter(t=>!m.isErrorObject(s[e.indexOf(t)])),l=r.map(e=>e.jid).filter(e=>void 0!==e),d=r.map(e=>!e.jid&&e.nick||void 0).filter(e=>void 0!==e),u=this.filter(e=>a.includes(e.get("affiliation"))&&!d.includes(e.get("nick"))&&!l.includes(e.get("jid"))),h=i.default.session.get("bare_jid");u.forEach(e=>{e.get("jid")!==h&&("offline"===e.get("show")?e.destroy():e.save("affiliation",null))}),r.forEach(e=>{let t=this.findOccupant(e);t?t.save(e):this.create(e)}),o.default.trigger("membersFetched")}findOccupant(e){if(e.occupant_id)return this.get(e.occupant_id);let t=e.jid&&d.Strophe.getBareJidFromJid(e.jid);return t&&this.findWhere({jid:t})||e.nick&&this.findWhere({nick:e.nick})}getOwnOccupant(){return this.findOccupant({jid:i.default.session.get("bare_jid"),occupant_id:this.chatroom.get("occupant_id")})}}let p=f},"./src/headless/plugins/muc/parsers.js":function(e,t,s){"use strict";s.r(t),s.d(t,{getMEPActivities:()=>g,parseMUCMessage:()=>y,parseMUCPresence:()=>j,parseMemberListIQ:()=>b});var r=s("./node_modules/dayjs/dayjs.min.js"),i=s.n(r),o=s("./src/headless/shared/_converse.js"),a=s("./src/headless/shared/api/index.js"),l=s("./src/headless/shared/api/public.js"),d=s("./src/headless/shared/errors.js"),c=s("./src/headless/shared/parsers.js"),u=s("./src/headless/plugins/muc/constants.js");let{Strophe:h,sizzle:m,u:f}=l.default.env,{NS:p}=h;function g(e){let t=m(`items[node="${h.NS.CONFINFO}"]`,e).pop();if(!t)return null;let s=e.getAttribute("from"),r=e.getAttribute("id");return m(`item conference-info[xmlns="${h.NS.CONFINFO}"] activity[xmlns="${h.NS.ACTIVITY}"]`,t).map(t=>{let i=t.querySelector("text")?.textContent;if(i){let o=(0,c.getReferences)(e);return{from:s,msgid:r,message:i,reason:t.querySelector("reason")?.textContent,references:o,type:"mep"}}return{}})}function _(e,t){let s=m(`${t} > x[xmlns="${h.NS.MUC_USER}"] status`,e).map(e=>e.getAttribute("code")).filter(e=>u.STATUS_CODE_STANZAS[e]?.includes(t));return"presence"===t&&s.includes("333")&&s.includes("307")&&s.splice(s.indexOf("307"),1),{codes:s,is_self:s.includes("110")}}function v(e,t){if(t.features.get(h.NS.OCCUPANTID))return m(`occupant-id[xmlns="${h.NS.OCCUPANTID}"]`,e).pop()?.getAttribute("id")}async function y(e,t){let s,r;(0,c.throwErrorIfInvalidForward)(e);let l=m(`result[xmlns="${p.MAM}"] > forwarded[xmlns="${p.FORWARD}"] > message`,e).pop(),u=l||e;if(m(`message > forwarded[xmlns="${h.NS.FORWARD}"]`,u).length)return new d.StanzaParseError(u,`Invalid Stanza: Forged MAM groupchat message from ${u.getAttribute("from")}`);if(l){if(m(`message > forwarded[xmlns="${h.NS.FORWARD}"]`,l).length)return new d.StanzaParseError(e,`Invalid Stanza: Forged MAM groupchat message from ${e.getAttribute("from")}`);s=m(`delay[xmlns="${h.NS.DELAY}"]`,l.parentElement).pop(),r=l.querySelector(":scope > body")?.textContent?.trim()}else s=m(`message > delay[xmlns="${h.NS.DELAY}"]`,e).pop(),r=e.querySelector(":scope > body")?.textContent?.trim();let y=u.getAttribute("from"),b=(0,c.getChatMarker)(u),j=Object.assign({from:y,body:r,activities:g(u),chat_state:(0,c.getChatState)(u),from_muc:h.getBareJidFromJid(y),is_archived:(0,c.isArchived)(e),is_carbon:(0,c.isCarbon)(e),is_delayed:!!s,is_forwarded:!!m(`message > forwarded[xmlns="${h.NS.FORWARD}"]`,u).length,is_headline:(0,c.isHeadline)(u),is_markable:!!m(`message > markable[xmlns="${h.NS.MARKERS}"]`,u).length,is_marker:!!b,is_unstyled:!!m(`message > unstyled[xmlns="${h.NS.STYLING}"]`,u).length,marker_id:b&&b.getAttribute("id"),nick:h.unescapeNode(h.getResourceFromJid(y)),occupant_id:v(u,t),receipt_id:(0,c.getReceiptId)(u),received:new Date().toISOString(),references:(0,c.getReferences)(u),subject:u.querySelector(":scope > subject")?.textContent,thread:u.querySelector(":scope > thread")?.textContent,time:s?i()(s.getAttribute("stamp")).toISOString():new Date().toISOString(),to:u.getAttribute("to"),type:u.getAttribute("type")},(0,c.getErrorAttributes)(u),(0,c.getOutOfBandAttributes)(u),(0,c.getSpoilerAttributes)(u),(0,c.getCorrectionAttributes)(u,e),(0,c.getStanzaIDs)(u,e),(0,c.getOpenGraphMetadata)(u),(0,c.getRetractionAttributes)(u,e),function(e){let t=m(`> retract[xmlns="${h.NS.RETRACT}"]`,e).pop();if(t){let e=m(`moderated[xmlns="${h.NS.MODERATE}"]`,t).pop();if(e)return{editable:!1,moderated:"retracted",moderated_by:e.getAttribute("by"),moderated_by_id:e.querySelector("occupant-id")?.getAttribute("id"),moderated_id:t.getAttribute("id"),moderation_reason:t.querySelector("reason")?.textContent}}else{let t=m(`retracted[xmlns="${h.NS.RETRACT}"]`,e).pop();if(t)return{editable:!1,is_tombstone:!0,moderated_by:t.getAttribute("by"),moderated_by_id:t.querySelector("occupant-id")?.getAttribute("id"),retracted:t.getAttribute("stamp"),moderation_reason:t.querySelector("reason")?.textContent}}let s=m(`apply-to[xmlns="${h.NS.FASTEN}"]`,e).pop();if(s){let e=s.getAttribute("id"),t=m(`moderated[xmlns="${h.NS.MODERATE0}"]`,s).pop();if(t&&m(`retract[xmlns="${h.NS.RETRACT0}"]`,t).pop())return{editable:!1,moderated:"retracted",moderated_by:t.getAttribute("by"),moderated_id:e,moderation_reason:t.querySelector("reason")?.textContent}}else{let t=m(`> moderated[xmlns="${h.NS.MODERATE0}"]`,e).pop();if(t&&m(`retracted[xmlns="${h.NS.RETRACT0}"]`,t).pop())return{editable:!1,is_tombstone:!0,moderated_by:t.getAttribute("by"),retracted:t.getAttribute("stamp"),moderation_reason:t.querySelector("reason")?.textContent}}return{}}(u),(0,c.getEncryptionAttributes)(u),_(u,"message"));if(j.from_real_jid=j.is_archived&&function(e){let t=m(`message > x[xmlns="${h.NS.MUC_USER}"] item`,e).pop();return t?.getAttribute("jid")}(u)||t.occupants.findOccupant(j)?.get("jid"),(j=Object.assign({is_valid_receipt_request:(0,c.isValidReceiptRequest)(u,j),message:j.body||j.error,sender:function(e,t){let s,r=t.get("occupant_id");if(r)s=e.occupant_id===r;else if(e.from_real_jid){let t=o.default.session.get("bare_jid");s=h.getBareJidFromJid(e.from_real_jid)===t}else s=e.nick===t.get("nick");return s?"me":"them"}(j,t)},j)).is_archived&&e.getAttribute("from")!==j.from_muc)return new d.StanzaParseError(e,`Invalid Stanza: Forged MAM message from ${e.getAttribute("from")}`);if(j.is_archived&&e.getAttribute("from")!==t.get("jid"))return new d.StanzaParseError(e,`Invalid Stanza: Forged MAM groupchat message from ${u.getAttribute("from")}`);if(j.is_carbon)return new d.StanzaParseError(e,"Invalid Stanza: MUC messages SHOULD NOT be XEP-0280 carbon copied");j.id=j.origin_id||j[`stanza_id ${j.from_muc||j.from}`]||f.getUniqueId(),j=await a.default.hook("parseMUCMessage",e,j);let w=await f.getMediaURLsMetadata(j.is_encrypted?j.plaintext:j.body);return Object.assign(j,w)}function b(e){return m(`query[xmlns="${h.NS.MUC_ADMIN}"] item`,e).map(e=>{let t={affiliation:e.getAttribute("affiliation")},s=e.getAttribute("jid");f.isValidJID(s)?t.jid=s:t.nick=s;let r=e.getAttribute("nick");return r&&(t.nick=r),e.getAttribute("role")&&(t.role=r),t})}async function j(e,t){await t.initialized;let s=e.getAttribute("from"),r=e.getAttribute("type"),i=h.getResourceFromJid(s),o={from:s,nick:i,type:r,muc_jid:h.getBareJidFromJid(s),occupant_id:v(e,t),status:e.querySelector(":scope > status")?.textContent??void 0,show:e.querySelector(":scope > show")?.textContent??void 0,image_hash:m(`presence > x[xmlns="${h.NS.VCARDUPDATE}"] photo`,e).pop()?.textContent,hats:m(`presence > hats[xmlns="${h.NS.MUC_HATS}"] hat`,e).map(e=>({title:e.getAttribute("title"),uri:e.getAttribute("uri")})),..._(e,"presence"),...function(e,t){let s=m(`presence > x[xmlns="${h.NS.MUC_USER}"] item`,e).pop();if(s){let e=s.querySelector("actor");return{affiliation:s.getAttribute("affiliation"),role:s.getAttribute("role"),jid:s.getAttribute("jid"),nick:s.getAttribute("nick")||t,...e?{actor:{nick:e?.getAttribute("nick")??null,jid:e?.getAttribute("jid")??null}}:{},reason:s.querySelector("reason")?.textContent??null}}}(e,i)};return await a.default.hook("parseMUCPresence",e,o)}},"./src/headless/plugins/muc/plugin.js":function(e,t,s){"use strict";s.r(t),s("./src/headless/plugins/chat/index.js"),s("./src/headless/plugins/disco/index.js"),s("./src/headless/plugins/emoji/index.js");var r=s("./src/headless/plugins/muc/message.js"),i=s("./src/headless/plugins/muc/messages.js"),o=s("./src/headless/plugins/muc/muc.js"),a=s("./src/headless/plugins/muc/occupant.js"),l=s("./src/headless/plugins/muc/occupants.js"),d=s("./src/headless/plugins/muc/affiliations/api.js"),c=s("./src/headless/plugins/muc/api.js"),u=s("./src/headless/shared/_converse.js"),h=s("./src/headless/shared/api/index.js"),m=s("./src/headless/shared/api/public.js"),f=s("./src/headless/shared/constants.js"),p=s("./src/headless/plugins/muc/utils.js"),g=s("./src/headless/plugins/muc/affiliations/utils.js"),_=s("./src/headless/plugins/muc/constants.js");m.default.AFFILIATION_CHANGES=_.AFFILIATION_CHANGES,m.default.AFFILIATION_CHANGES_LIST=_.AFFILIATION_CHANGES_LIST,m.default.MUC_TRAFFIC_STATES=_.MUC_TRAFFIC_STATES,m.default.MUC_TRAFFIC_STATES_LIST=_.MUC_TRAFFIC_STATES_LIST,m.default.MUC_ROLE_CHANGES=_.MUC_ROLE_CHANGES,m.default.MUC_ROLE_CHANGES_LIST=_.MUC_ROLE_CHANGES_LIST,m.default.MUC={INFO_CODES:_.INFO_CODES},m.default.MUC_NICK_CHANGED_CODE=_.MUC_NICK_CHANGED_CODE,m.default.ROOM_FEATURES=_.ROOM_FEATURES,m.default.ROOMSTATUS=_.ROOMSTATUS;let{Strophe:v}=m.default.env;v.addNamespace("MUC_ADMIN",v.NS.MUC+"#admin"),v.addNamespace("MUC_OWNER",v.NS.MUC+"#owner"),v.addNamespace("MUC_REGISTER","jabber:iq:register"),v.addNamespace("MUC_ROOMCONF",v.NS.MUC+"#roomconfig"),v.addNamespace("MUC_USER",v.NS.MUC+"#user"),v.addNamespace("MUC_HATS","urn:xmpp:hats:0"),v.addNamespace("CONFINFO","urn:ietf:params:xml:ns:conference-info"),m.default.plugins.add("converse-muc",{dependencies:["converse-chatboxes","converse-chat","converse-disco"],initialize(){let{__:e,___:t}=u.default;if(h.default.settings.extend({allow_muc_invitations:!0,auto_join_on_invite:!1,auto_join_rooms:[],auto_register_muc_nickname:!0,colorize_username:!1,hide_muc_participants:!1,locked_muc_domain:!1,modtools_disable_assign:!1,muc_clear_messages_on_leave:!0,muc_domain:void 0,muc_fetch_members:!0,muc_history_max_stanzas:void 0,muc_instant_rooms:!0,muc_nickname_from_jid:!1,muc_send_probes:!1,muc_show_info_messages:[...m.default.MUC.INFO_CODES.visibility_changes,...m.default.MUC.INFO_CODES.self,...m.default.MUC.INFO_CODES.non_privacy_changes,...m.default.MUC.INFO_CODES.muc_logging_changes,...m.default.MUC.INFO_CODES.nickname_changes,...m.default.MUC.INFO_CODES.disconnected,...m.default.MUC.INFO_CODES.affiliation_changes,...m.default.MUC.INFO_CODES.join_leave_events,...m.default.MUC.INFO_CODES.role_changes],muc_show_logs_before_join:!1,muc_subscribe_to_rai:!1}),h.default.promises.add(["roomsAutoJoined"]),h.default.settings.get("locked_muc_domain")&&"string"!=typeof h.default.settings.get("muc_domain"))throw Error("Config Error: it makes no sense to set locked_muc_domain to true when muc_domain is not set");m.default.env.muc_utils={computeAffiliationsDelta:g.computeAffiliationsDelta},Object.assign(h.default,c.default),Object.assign(h.default.rooms,d.default);let s={muc:{STATUS_CODE_MESSAGES:{100:e("This groupchat is not anonymous"),102:e("This groupchat now shows unavailable members"),103:e("This groupchat does not show unavailable members"),104:e("The groupchat configuration has changed"),170:e("Groupchat logging is now enabled"),171:e("Groupchat logging is now disabled"),172:e("This groupchat is now no longer anonymous"),173:e("This groupchat is now semi-anonymous"),174:e("This groupchat is now fully-anonymous"),201:e("A new groupchat has been created"),210:t("Your nickname has been automatically set to %1$s"),301:e("You have been banned from this groupchat"),303:t("Your nickname has been changed to %1$s"),307:e("You have been kicked from this groupchat"),321:e("You have been removed from this groupchat because of an affiliation change"),322:e("You have been removed from this groupchat because it has changed to members-only and you're not a member"),332:e("You have been removed from this groupchat because the service hosting it is being shut down"),333:e("You have exited this groupchat due to a technical problem")}}};Object.assign(u.default.labels,s),Object.assign(u.default,s),(0,p.routeToRoom)(),addEventListener("hashchange",p.routeToRoom);let _={ChatRoom:o.default,ChatRoomMessage:r.default,ChatRoomMessages:i.default,ChatRoomOccupant:a.default,ChatRoomOccupants:l.default};Object.assign(u.default,_);let y={MUC:o.default,MUCMessage:r.default,MUCMessages:i.default,MUCOccupant:a.default,MUCOccupants:l.default,getDefaultMUCNickname:p.getDefaultMUCNickname,isInfoVisible:p.isInfoVisible,onDirectMUCInvitation:p.onDirectMUCInvitation};Object.assign(u.default.exports,y),Object.assign(u.default,y),h.default.chatboxes.registry.add(f.CHATROOMS_TYPE,o.default),h.default.settings.get("allow_muc_invitations")&&(h.default.listen.on("connected",p.registerDirectInvitationHandler),h.default.listen.on("reconnected",p.registerDirectInvitationHandler)),h.default.listen.on("addClientFeatures",()=>h.default.disco.own.features.add(`${v.NS.CONFINFO}+notify`)),h.default.listen.on("addClientFeatures",p.onAddClientFeatures),h.default.listen.on("beforeResourceBinding",p.onBeforeResourceBinding),h.default.listen.on("beforeTearDown",p.onBeforeTearDown),h.default.listen.on("chatBoxesFetched",p.autoJoinRooms),h.default.listen.on("disconnected",p.disconnectChatRooms),h.default.listen.on("statusInitialized",p.onStatusInitialized),document.addEventListener("visibilitychange",p.onWindowStateChanged)}})},"./src/headless/plugins/muc/session.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/plugins/muc/constants.js");class o extends r.Model{defaults(){return{connection_status:i.ROOMSTATUS.DISCONNECTED}}}let a=o},"./src/headless/plugins/muc/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{autoJoinRooms:()=>C,disconnectChatRooms:()=>b,getDefaultMUCNickname:()=>E,getDefaultMUCService:()=>p,isChatRoom:()=>g,isInfoVisible:()=>A,occupantsComparator:()=>v,onAddClientFeatures:()=>k,onBeforeResourceBinding:()=>M,onBeforeTearDown:()=>$,onDirectMUCInvitation:()=>x,onStatusInitialized:()=>T,onWindowStateChanged:()=>j,openChatRoom:()=>S,registerDirectInvitationHandler:()=>y,routeToRoom:()=>w,shouldCreateGroupchatMessage:()=>_});var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/api/public.js"),a=s("./src/log/index.js"),l=s("./src/headless/plugins/muc/constants.js"),d=s("./src/headless/utils/init.js"),c=s("./src/headless/shared/constants.js"),u=s("./src/headless/utils/session.js");let{Strophe:h,sizzle:m,u:f}=o.default.env;async function p(){let e=i.default.settings.get("muc_domain")||r.default.session.get("default_muc_service");if(!e){let t=r.default.session.get("domain");for(let s of(await i.default.disco.entities.items(t)))if(await i.default.disco.features.has(h.NS.MUC,s.get("jid"))){e=s.get("jid"),r.default.session.save({default_muc_service:e});break}}return e}function g(e){return e?.get("type")==="chatroom"}function _(e){return e.nick&&(f.shouldCreateMessage(e)||e.is_tombstone)}function v(e,t){let s=e.get("role")||"none",r=t.get("role")||"none";if(l.MUC_ROLE_WEIGHTS[s]!==l.MUC_ROLE_WEIGHTS[r])return l.MUC_ROLE_WEIGHTS[s]<l.MUC_ROLE_WEIGHTS[r]?-1:1;{let s=e.getDisplayName().toLowerCase(),r=t.getDisplayName().toLowerCase();return s<r?-1:+(s>r)}}function y(){i.default.connection.get().addHandler(e=>(r.default.exports.onDirectMUCInvitation(e),!0),"jabber:x:conference","message")}function b(){return r.default.state.chatboxes.filter(e=>e.get("type")===c.CHATROOMS_TYPE).forEach(e=>e.session.save({connection_status:o.default.ROOMSTATUS.DISCONNECTED}))}async function j(){!document.hidden&&i.default.connection.connected()&&(await i.default.rooms.get()).forEach(e=>e.rejoinIfNecessary())}async function w(e){if(!location.hash.startsWith("#converse/room?jid="))return;e?.preventDefault();let t=location.hash.split("=").pop();if(!f.isValidMUCJID(t))return a.default.warn(`invalid jid "${t}" provided in url fragment`);await i.default.waitUntil("roomsAutoJoined"),i.default.settings.get("allow_bookmarks")&&await i.default.waitUntil("bookmarksInitialized"),i.default.rooms.open(t,{},!0)}async function S(e,t){t.type=c.CHATROOMS_TYPE,t.id=e;let s=await i.default.rooms.get(e,t,!0);return s.maybeShow(!0),s}async function x(e){let t,s=m('x[xmlns="jabber:x:conference"]',e).pop(),a=h.getBareJidFromJid(e.getAttribute("from")),l=s.getAttribute("jid"),d=s.getAttribute("reason");if(i.default.settings.get("auto_join_on_invite"))t=!0;else{let e=r.default.state.roster.get(a)?.getDisplayName()??a;t=await i.default.hook("confirmDirectMUCInvitation",{contact:e,reason:d,jid:l},!1)}t&&(await S(l,{password:s.getAttribute("password")})).session.get("connection_status")===o.default.ROOMSTATUS.DISCONNECTED&&r.default.state.chatboxes.get(l).rejoin()}function E(){let{profile:e}=r.default.state;if(!e)return a.default.error("Called getDefaultMUCNickname before statusInitialized has been fired."),"";let t=e.getNickname();if(t)return t;if(i.default.settings.get("muc_nickname_from_jid")){let e=r.default.session.get("bare_jid");return h.unescapeNode(h.getNodeFromJid(e))}}function A(e){return!!i.default.settings.get("muc_show_info_messages").includes(e)}async function C(){await Promise.all(i.default.settings.get("auto_join_rooms").map(e=>"string"==typeof e?r.default.state.chatboxes.where({jid:e}).length?Promise.resolve():i.default.rooms.open(e):e instanceof Object?i.default.rooms.open(e.jid,{...e}):(a.default.error('Invalid muc criteria specified for "auto_join_rooms"'),Promise.resolve()))),i.default.trigger("roomsAutoJoined")}function k(){i.default.disco.own.features.add(h.NS.MUC),i.default.settings.get("allow_muc_invitations")&&i.default.disco.own.features.add("jabber:x:conference")}function $(){r.default.state.chatboxes.where({type:c.CHATROOMS_TYPE}).forEach(e=>(0,d.safeSave)(e.session,{connection_status:o.default.ROOMSTATUS.DISCONNECTED}))}function T(){window.addEventListener((0,u.getUnloadEvent)(),()=>{!i.default.connection.isType("websocket")||i.default.settings.get("enable_smacks")&&r.default.session.get("smacks_stream_id")||b()})}function M(){i.default.connection.get().addHandler(e=>{let t=h.getBareJidFromJid(e.getAttribute("from"));return r.default.state.chatboxes.get(t)||i.default.waitUntil("chatBoxesFetched").then(async()=>{let s=r.default.state.chatboxes.get(t);s&&(await s.initialized,s.message_handler.run(e))}),!0},null,"message","groupchat")}},"./src/headless/plugins/ping/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/api/public.js"),a=s("./src/log/index.js"),l=s("./src/headless/plugins/ping/utils.js");let{Strophe:d,$iq:c,u}=o.default.env,h={async ping(e,t){if(!i.default.connection.authenticated())return a.default.debug("Not pinging when we know we're not authenticated"),null;(0,l.setLastStanzaDate)(new Date);let s=r.default.session.get("bare_jid"),o=c({type:"get",to:e=e||d.getDomainFromJid(s),id:u.getUniqueId("ping")}).c("ping",{xmlns:d.NS.PING}),h=await i.default.sendIQ(o,t||1e4,!1);return null===h?(a.default.warn(`Timeout while pinging ${e}`),e===d.getDomainFromJid(s)&&i.default.connection.reconnect(),!1):!u.isErrorStanza(h)||(a.default.error(`Error while pinging ${e}`),a.default.error(h),!1)}}},"./src/headless/plugins/ping/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),o=s("./src/headless/plugins/ping/api.js"),a=s("./src/headless/plugins/ping/utils.js");let{Strophe:l}=i.default.env;l.addNamespace("PING","urn:xmpp:ping"),i.default.plugins.add("converse-ping",{initialize(){r.default.settings.extend({ping_interval:60}),Object.assign(r.default,o.default),r.default.listen.on("connected",a.registerHandlers),r.default.listen.on("reconnected",a.registerHandlers),r.default.listen.on("disconnected",a.unregisterIntervalHandler),document.addEventListener("visibilitychange",a.onWindowStateChanged)}})},"./src/headless/plugins/ping/utils.js":function(e,t,s){"use strict";let r,i;s.r(t),s.d(t,{onEverySecond:()=>v,onWindowStateChanged:()=>u,registerHandlers:()=>g,registerPingHandler:()=>p,registerPongHandler:()=>f,setLastStanzaDate:()=>h,unregisterIntervalHandler:()=>_});var o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/utils/session.js");let{Strophe:d,$iq:c}=a.default.env;function u(){document.hidden||o.default.ping(null,5e3)}function h(e){r=e}function m(e){r=new Date;let t=c({type:"result",to:e.getAttribute("from"),id:e.getAttribute("id")});return o.default.sendIQ(t),!0}function f(){let e=o.default.connection.get();return e.disco&&o.default.disco.own.features.add(d.NS.PING),e.addHandler(m,d.NS.PING,"iq","get")}function p(){o.default.connection.get()?.addHandler(()=>{if(o.default.settings.get("ping_interval")>0)return r=new Date,!0})}function g(){f(),p(),clearInterval(i),i=setInterval(v,1e3)}function _(){clearInterval(i)}function v(){if((0,l.isTestEnv)()||!o.default.connection.authenticated())return;let e=o.default.settings.get("ping_interval");if(e>0){let t=new Date;r=r??t,(t.valueOf()-r.valueOf())/1e3>e&&o.default.ping()}}},"./src/headless/plugins/pubsub/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./src/headless/shared/api/public.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/log/index.js"),l=s("./src/headless/shared/parsers.js"),d=s("./src/headless/plugins/pubsub/parsers.js");let{Strophe:c,stx:u}=r.default.env,h={pubsub:{config:{async get(e,t){let s;if(!t)throw Error("api.pubsub.config.get: Node value required");let r=i.default.session.get("bare_jid"),a=i.default.session.get("jid"),h=u`
                    <iq xmlns="jabber:client"
                        from="${a}"
                        type="get"
                        to="${e||r}">
                    <pubsub xmlns="${c.NS.PUBSUB}"><configure node="${t}"/></pubsub>
                    </iq>`;try{s=await o.default.sendIQ(h)}catch(e){throw await (0,l.parseErrorStanza)(e)}return(0,d.parseStanzaForPubSubConfig)(s)},async set(e,t,s){if(!t)throw Error("api.pubsub.config.set: Node value required");let r=i.default.session.get("bare_jid"),a=e||r,d={...await o.default.pubsub.config.get(a,t),...s},h=u`
                    <iq xmlns="jabber:client"
                        from="${r}"
                        type="set"
                        to="${a}">
                    <pubsub xmlns="${c.NS.PUBSUB}#owner">
                        <configure node="${t}">
                            <x xmlns="${c.NS.XFORM}" type="submit">
                                <field var="FORM_TYPE" type="hidden">
                                    <value>${c.NS.PUBSUB}#nodeconfig</value>
                                </field>
                                ${Object.entries(d).map(([e,t])=>u`<field var="${e}"><value>${t}</value></field>`)}
                            </x>
                        </configure>
                    </pubsub>
                    </iq>`;try{await o.default.sendIQ(h)}catch(e){throw await (0,l.parseErrorStanza)(e)}return d}},async publish(e,t,s,r,d=!0){if(!t)throw Error("api.pubsub.publish: node value required");if(!s)throw Error("api.pubsub.publish: item value required");let h=i.default.session.get("bare_jid"),m=e||h,f=u`
                <iq xmlns="jabber:client"
                    from="${h}"
                    type="set"
                    to="${m}">
                <pubsub xmlns="${c.NS.PUBSUB}">
                    <publish node="${t}">${s}</publish>
                    ${r?u`<publish-options>
                    <x xmlns="${c.NS.XFORM}" type="submit">
                        <field var="FORM_TYPE" type="hidden">
                            <value>${c.NS.PUBSUB}#publish-options</value>
                        </field>
                        ${Object.entries(r).map(([e,t])=>u`<field var="pubsub#${e}"><value>${t}</value></field>`)}
                    </x></publish-options>`:""}
                </pubsub>
                </iq>`;if(m===h&&!(await o.default.disco.getIdentity("pubsub","pep",h)||await o.default.disco.getIdentity("pubsub","pep",c.getDomainFromJid(h)))){a.default.warn("api.pubsub.publish: Not publishing via PEP because it's not supported!"),a.default.warn(f);return}if(!(await o.default.disco.supports(c.NS.PUBSUB+"#publish-options",m)||m===h&&await o.default.disco.supports(c.NS.PUBSUB+"#publish-options",c.getDomainFromJid(m)))&&d){a.default.warn("api.pubsub.publish: #publish-options not supported, refusing to publish item."),a.default.warn(f);return}try{await o.default.sendIQ(f)}catch(s){let e=await (0,l.parseErrorStanza)(s);if("conflict"===e.name&&"precondition-not-met"===e.extra[c.NS.PUBSUB_ERROR]){await o.default.pubsub.config.set(m,t,r);try{await o.default.sendIQ(f)}catch(e){if(a.default.error(e),!d){let e=f.tree();e.querySelector("publish-options").outerHTML="",a.default.warn("api.pubsub.publish: #publish-options precondition-not-met, publishing anyway."),await o.default.sendIQ(e)}}}else throw s}}}}},"./src/headless/plugins/pubsub/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/public.js"),o=s("./src/headless/plugins/pubsub/api.js");s("./src/headless/plugins/disco/index.js");let{Strophe:a,sizzle:l}=i.default.env;a.addNamespace("PUBSUB_ERROR",a.NS.PUBSUB+"#errors"),i.default.plugins.add("converse-pubsub",{dependencies:["converse-disco"],initialize(){let{api:e}=r.default;Object.assign(r.default.api,o.default),e.listen.on("parseErrorStanza",(e,t)=>{let s=l(`error [xmlns="${a.NS.PUBSUB_ERROR}"]`,e).pop();return s?{...t,[a.NS.PUBSUB_ERROR]:s.nodeName}:t})}})},"./src/headless/plugins/pubsub/parsers.js":function(e,t,s){"use strict";s.r(t),s.d(t,{parseStanzaForPubSubConfig:()=>i});var r=s("./src/headless/shared/parsers.js");function i(e){return(0,r.parseXForm)(e).fields.reduce((e,t)=>{if(t.var.startsWith("pubsub#")){let s=t.var.replace(/^pubsub#/,""),r="boolean"===t.type?t.checked:t.value??null;e[s]=r}return e},{})}},"./src/headless/plugins/roster/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/utils/jid.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js");let{Strophe:a}=s("./src/headless/shared/api/public.js").default.env,l={contacts:{async get(e){await o.default.waitUntil("rosterContactsFetched");let{roster:t}=i.default.state,s=e=>t.get(a.getBareJidFromJid(e));if(void 0===e)e=t.pluck("jid");else if("string"==typeof e)return s(e);return e.map(s)},async remove(e,t){await o.default.waitUntil("rosterContactsFetched"),(await o.default.contacts.get(e)).remove(t)},async add(e,t=!0,s=!0,o=""){if(!(0,r.isValidJID)(e?.jid))throw Error("api.contacts.add: Valid JID required");let{roster:a}=i.default.state;return a.addContact(e,t,s,o)}}}},"./src/headless/plugins/roster/contact.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>g});var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),i=s("./node_modules/@converse/skeletor/dist/skeletor.js");s("./src/headless/plugins/status/api.js");var o=s("./src/headless/shared/_converse.js"),a=s("./src/headless/shared/api/index.js"),l=s("./src/headless/shared/api/public.js"),d=s("./src/headless/shared/color.js"),c=s("./src/headless/shared/model-with-vcard.js"),u=s("./src/headless/plugins/roster/utils.js");let{Strophe:h,$pres:m,stx:f}=l.default.env;class p extends(0,c.default)((0,d.default)(i.Model)){get idAttribute(){return"jid"}defaults(){return{groups:[],num_unread:0}}async initialize(e){this.lazy_load_vcard=!0,super.initialize(),this.initialized=(0,r.getOpenPromise)(),await this.setPresence();let{jid:t}=e;this.set({...e,...{jid:h.getBareJidFromJid(t).toLowerCase(),user_id:h.getNodeFromJid(t)}}),this.listenTo(this.presence,"change:show",()=>a.default.trigger("contactPresenceChanged",this)),this.listenTo(this.presence,"change:show",()=>this.trigger("presence:change")),this.listenTo(this.presence,"change:presence",()=>a.default.trigger("contactPresenceChanged",this)),this.listenTo(this.presence,"change:presence",()=>this.trigger("presence:change")),await a.default.trigger("rosterContactInitialized",this,{synchronous:!0}),this.initialized.resolve()}async setPresence(){let e=this.get("jid");await a.default.waitUntil("presencesInitialized");let{presences:t}=o.default.state;this.presence=t.get(e)||t.create({jid:e})}getStatus(){return this.presence?.getStatus()||"offline"}openChat(){a.default.chats.open(this.get("jid"),{},!0)}getDisplayName(e){return this.get("nickname")||this.vcard?.getDisplayName()||(e?.no_jid?null:this.get("jid"))}subscribe(e){return a.default.user.presence.send({type:"subscribe",to:this.get("jid"),status:e}),this.save("ask","subscribe"),this}ackSubscribe(){a.default.send(m({type:"subscribe",to:this.get("jid")}))}ackUnsubscribe(){a.default.send(m({type:"unsubscribe",to:this.get("jid")})),this.sendRosterRemoveStanza(),this.destroy()}unauthorize(e){return(0,u.rejectPresenceSubscription)(this.get("jid"),e),this.save({requesting:!1}),this}authorize(e){return a.default.send(f`
            <presence
                to="${this.get("jid")}"
                type="subscribed"
                xmlns="jabber:client">
                    ${e&&""!==e?f`<status>${e}</status>`:""}
            </presence>`),this.save({requesting:!1,subscription:"from"}),this}remove(e){let t=this.get("subscription");if("none"===t&&"subscribe"!==this.get("ask"))return void this.destroy();("subscribe"===this.get("ask")||"to"===t)&&a.default.send(m({type:"unsubscribe",to:this.get("jid")})),e&&["from","both"].includes(t)&&this.unauthorize();let s=this.sendRosterRemoveStanza();return this.collection&&this.destroy(),s}async update(e){return this.save(e),await a.default.sendIQ(f`<iq xmlns="jabber:client" type="set">
                <query xmlns="${h.NS.ROSTER}">
                    <item jid="${this.get("jid")}" name="${this.get("nickname")}">
                        ${this.get("groups")?.map(e=>f`<group>${e}</group>`)}
                    </item>
                </query>
            </iq>`)}async sendRosterRemoveStanza(){let e=f`<iq type="set" xmlns="jabber:client">
            <query xmlns="${h.NS.ROSTER}">
                <item jid="${this.get("jid")}" subscription="remove"/>
            </query>
        </iq>`;return await a.default.sendIQ(e)}isUnsaved(){return void 0===this.get("subscription")}}let g=p},"./src/headless/plugins/roster/contacts.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/plugins/roster/contact.js"),o=s("./src/headless/shared/_converse.js"),a=s("./src/headless/shared/api/index.js"),l=s("./src/headless/shared/api/public.js"),d=s("./src/log/index.js"),c=s("./src/headless/utils/storage.js"),u=s("./src/headless/plugins/roster/utils.js");let{Strophe:h,sizzle:m,stx:f,u:p,Stanza:g}=l.default.env;class _ extends r.Collection{constructor(){super(),this.model=i.default,this.data=null}initialize(){let e=o.default.session.get("bare_jid"),t=`roster.state-${e}-${this.get("jid")}`;this.state=new r.Model({id:t,collapsed_groups:[]}),(0,c.initStorage)(this.state,t),this.state.fetch(),a.default.listen.on("chatBoxClosed",e=>this.removeUnsavedContact(e))}removeUnsavedContact(e){let t=this.get(e.get("jid"));t&&void 0===t.get("subscription")&&t.destroy()}onConnected(){this.registerRosterHandler(),this.registerRosterXHandler()}registerRosterHandler(){a.default.connection.get().addHandler(e=>(o.default.state.roster.onRosterPush(e),!0),h.NS.ROSTER,"iq","set")}registerRosterXHandler(){let e=0;a.default.connection.get().addHandler(t=>(setTimeout(()=>{let{roster:e}=o.default.state;a.default.connection.get().flush(),e.subscribeToSuggestedItems(t)},e),e+=250*t.querySelectorAll("item").length,!0),h.NS.ROSTERX,"message",null)}async fetchRosterContacts(){let e=await new Promise((e,t)=>{this.fetch({add:!0,silent:!0,success:e,error:(e,s)=>t(s)})});if(p.isErrorObject(e)&&(d.default.error(e),o.default.session.save("roster_cached",!1),this.data.save("version",void 0)),!o.default.session.get("roster_cached"))return a.default.connection.get().send_initial_presence=!0,o.default.state.roster.fetchFromServer();a.default.trigger("cachedRoster",e)}subscribeToSuggestedItems(e){return Array.from(e.querySelectorAll("item")).forEach(e=>{"add"===e.getAttribute("action")&&this.addContact({jid:e.getAttribute("jid"),name:e.getAttribute("name"),subscription:"to"})}),!0}isSelf(e){return p.isSameBareJID(e,a.default.connection.get().jid)}sendContactAddIQ(e){let{jid:t,groups:s}=e,r=e.name?e.name:null,i=f`
            <iq type="set" xmlns="jabber:client">
                <query xmlns="${h.NS.ROSTER}">
                    <item jid="${t}" ${r?g.unsafeXML(`name="${h.xmlescape(r)}"`):""}>
                        ${s?.map(e=>f`<group>${e}</group>`)}
                    </item>
                </query>
            </iq>`;return a.default.sendIQ(i)}async addContact(e,t=!0,s=!0,r=""){let{jid:i,name:l}=e??{};if(!i||!p.isValidJID(i))throw Error("Invalid JID provided to addContact");if(await a.default.waitUntil("rosterContactsFetched"),t)try{await this.sendContactAddIQ(e)}catch(t){d.default.error(t);let{__:e}=o.default;throw alert(e("Sorry, an error occurred while trying to add %1$s as a contact.",l||i)),t}let c=await this.create({ask:void 0,nickname:l,groups:[],requesting:!1,subscription:t?"none":void 0,...e},{sort:!1});return s&&c.subscribe(r),c}async subscribeBack(e,t,s="",r=""){let i=this.get(e),{RosterContact:a}=o.default.exports;if(i instanceof a)i.authorize().subscribe();else{let i=m(`nick[xmlns="${h.NS.NICK}"]`,t).pop()?.textContent||void 0,o=await this.addContact({jid:e,name:i,groups:[],subscription:"from"});o instanceof a&&o.authorize(s).subscribe(r)}}onRosterPush(e){let t=e.getAttribute("id"),s=e.getAttribute("from"),r=o.default.session.get("bare_jid");if(s&&s!==r)return void d.default.warn(`Ignoring roster illegitimate roster push message from ${e.getAttribute("from")}`);a.default.send(f`<iq type="result" id="${t}" from="${a.default.connection.get().jid}" xmlns="jabber:client" />`);let i=m(`query[xmlns="${h.NS.ROSTER}"]`,e).pop();this.data.save("version",i.getAttribute("ver"));let l=m("item",i);if(l.length>1)throw d.default.error(e),Error('Roster push query may not contain more than one "item" element.');if(0===l.length){d.default.warn(e),d.default.warn('Received a roster push stanza without an "item" element.');return}this.updateContact(l.pop()),a.default.trigger("rosterPush",e)}shouldUseRosterVersioning(){return a.default.settings.get("enable_roster_versioning")&&this.data.get("version")&&a.default.disco.stream.getFeature("ver","urn:xmpp:features:rosterver")}async fetchFromServer(){let e=f`
            <iq type="get" id="${p.getUniqueId("roster")}" xmlns="jabber:client">
                <query xmlns="${h.NS.ROSTER}"
                    ${this.shouldUseRosterVersioning()?g.unsafeXML(`ver="${this.data.get("version")}"`):""}>
                </query>
            </iq>`,t=await a.default.sendIQ(e,null,!1);if("result"===t.getAttribute("type")){let e=m(`query[xmlns="${h.NS.ROSTER}"]`,t).pop();if(e){let t=m("item",e);if(!this.data.get("version")&&this.models.length){let e=t.map(e=>e.getAttribute("jid"));this.forEach(t=>!t.get("requesting")&&!e.includes(t.get("jid"))&&t.destroy())}t.forEach(e=>this.updateContact(e)),this.data.save("version",e.getAttribute("ver"))}}else if(!p.isServiceUnavailableError(t)){d.default.error(t),d.default.error("Error while trying to fetch roster from the server");return}o.default.session.save("roster_cached",!0),a.default.trigger("roster",t)}updateContact(e){let t=e.getAttribute("jid"),s=this.get(t),r=e.getAttribute("subscription");if("remove"===r)return s?.destroy();let i=e.getAttribute("ask"),o=e.getAttribute("name"),a=[...new Set(m("group",e).map(e=>e.textContent))];s?s.save({subscription:r,ask:i,nickname:o,groups:a,requesting:null}):this.create({nickname:o,ask:i,groups:a,jid:t,subscription:r},{sort:!1})}createRequestingContact(e){let t=h.getBareJidFromJid(e.getAttribute("from")),s=m(`nick[xmlns="${h.NS.NICK}"]`,e).pop()?.textContent||null;a.default.trigger("contactRequest",this.create({jid:t,subscription:"none",ask:null,requesting:!0,nickname:s}))}handleIncomingSubscription(e){let t=e.getAttribute("from"),s=h.getBareJidFromJid(t),r=this.get(s);if(!a.default.settings.get("allow_contact_requests")){let{__:e}=o.default;(0,u.rejectPresenceSubscription)(t,e("This client does not allow presence subscriptions"))}a.default.settings.get("auto_subscribe")?r&&"to"===r.get("subscription")?r.authorize():this.subscribeBack(s,e):r?"none"!==r.get("subscription")?r.authorize():"subscribe"===r.get("ask")&&r.authorize():this.createRequestingContact(e)}handleOwnPresence(e){let t=e.getAttribute("from"),s=h.getResourceFromJid(t),r=e.getAttribute("type"),{profile:i}=o.default.state;if(a.default.connection.get().jid!==t&&"unavailable"!==r&&(!0===a.default.settings.get("synchronize_availability")||a.default.settings.get("synchronize_availability")===s)){let t=e.querySelector("show")?.textContent;i.save({show:t,presence:"online"},{silent:!0});let s=e.querySelector("status")?.textContent;s&&i.save({status_message:s})}o.default.session.get("jid")===t&&"unavailable"===r&&a.default.user.presence.send()}presenceHandler(e){let t=e.getAttribute("type");if("error"===t)return!0;let s=e.getAttribute("from"),r=h.getBareJidFromJid(s);if(this.isSelf(r))return this.handleOwnPresence(e);if(m(`query[xmlns="${h.NS.MUC}"]`,e).length)return;let i=this.get(r);if(i){let t=e.querySelector("status")?.textContent;i.get("status")!==t&&i.save({status:t})}if("subscribed"===t&&i)i.ackSubscribe();else if("unsubscribed"===t&&i)i.ackUnsubscribe();else if("unsubscribe"===t)return;else if("subscribe"===t)this.handleIncomingSubscription(e);else if("unavailable"===t&&i){let e=h.getResourceFromJid(s);i.presence.removeResource(e)}else i&&i.presence.addResource(e)}}let v=_},"./src/headless/plugins/roster/filter.js":function(e,t,s){"use strict";s.r(t),s.d(t,{RosterFilter:()=>i});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js");class i extends r.Model{initialize(){super.initialize(),this.set({text:"",type:"items",state:"online"})}}},"./src/headless/plugins/roster/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{Presence:()=>o.default,Presences:()=>a.default,RosterContact:()=>r.default,RosterContacts:()=>i.default,RosterFilter:()=>l.RosterFilter});var r=s("./src/headless/plugins/roster/contact.js"),i=s("./src/headless/plugins/roster/contacts.js"),o=s("./src/headless/plugins/roster/presence.js"),a=s("./src/headless/plugins/roster/presences.js"),l=s("./src/headless/plugins/roster/filter.js");s("./src/headless/plugins/roster/plugin.js")},"./src/headless/plugins/roster/parsers.js":function(e,t,s){"use strict";s.r(t),s.d(t,{parsePresence:()=>a});let{Strophe:r,sizzle:i,dayjs:o}=s("./src/headless/shared/api/public.js").default.env;function a(e){let t=e.getAttribute("from"),s=e.getAttribute("type"),a=r.getResourceFromJid(t),l=i(`delay[xmlns="${r.NS.DELAY}"]`,e).pop(),d=e.querySelector("priority")?.textContent;return{resource:a,show:e.querySelector("show")?.textContent,timestamp:l?o(l.getAttribute("stamp")).toISOString():new Date().toISOString(),type:s,priority:Number.isNaN(parseInt(d,10))?0:parseInt(d,10)}}},"./src/headless/plugins/roster/plugin.js":function(e,t,s){"use strict";s.r(t),s("./src/headless/plugins/status/index.js");var r=s("./src/headless/utils/index.js"),i=s("./src/headless/plugins/roster/contact.js"),o=s("./src/headless/plugins/roster/contacts.js"),a=s("./src/headless/shared/_converse.js"),l=s("./src/headless/shared/api/index.js"),d=s("./src/headless/shared/api/public.js"),c=s("./src/headless/plugins/roster/api.js"),u=s("./src/headless/plugins/roster/presence.js"),h=s("./src/headless/plugins/roster/presences.js"),m=s("./src/headless/plugins/roster/utils.js");d.default.plugins.add("converse-roster",{dependencies:["converse-status"],initialize(){l.default.settings.extend({allow_contact_requests:!0,auto_subscribe:!1,enable_roster_versioning:!0,show_self_in_roster:!0,synchronize_availability:!0}),l.default.promises.add(["cachedRoster","roster","rosterContactsFetched","rosterInitialized","presencesInitialized"]),Object.assign(a.default.api,c.default),Object.assign(r.default,{roster:{isUnsavedContact:m.isUnsavedContact}});let{__:e}=a.default,t={HEADER_UNSAVED_CONTACTS:e("Unsaved contacts"),HEADER_CURRENT_CONTACTS:e("My contacts"),HEADER_PENDING_CONTACTS:e("Pending contacts"),HEADER_REQUESTING_CONTACTS:e("Contact requests"),HEADER_UNGROUPED:e("Ungrouped"),HEADER_UNREAD:e("New messages")};Object.assign(a.default,t),Object.assign(a.default.labels,t);let s={Presence:u.default,Presences:h.default,RosterContact:i.default,RosterContacts:o.default};Object.assign(a.default,s),Object.assign(a.default.exports,s),l.default.listen.on("beforeTearDown",()=>(0,m.unregisterPresenceHandler)()),l.default.listen.on("chatBoxesInitialized",m.onChatBoxesInitialized),l.default.listen.on("clearSession",m.onClearSession),l.default.listen.on("presencesInitialized",m.onPresencesInitialized),l.default.listen.on("statusInitialized",m.onStatusInitialized),l.default.listen.on("streamResumptionFailed",()=>a.default.session.set("roster_cached",!1)),l.default.waitUntil("rosterContactsFetched").then(m.onRosterContactsFetched)}})},"./src/headless/plugins/roster/presence.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/plugins/roster/resources.js"),i=s("./node_modules/@converse/skeletor/dist/skeletor.js"),o=s("./src/headless/utils/storage.js"),a=s("./src/headless/plugins/roster/parsers.js");class l extends i.Model{get idAttribute(){return"jid"}defaults(){return{presence:"offline",show:null}}initialize(){super.initialize(),this.resources=new r.default;let e=`converse.identities-${this.get("jid")}`;(0,o.initStorage)(this.resources,e,"session"),this.listenTo(this.resources,"update",this.onResourcesChanged),this.listenTo(this.resources,"change",this.onResourcesChanged)}onResourcesChanged(){let e=this.getHighestPriorityResource(),{presence:t,show:s}=e?.attributes??{};this.save({presence:t,show:s})}getStatus(){let e=this.get("presence");return"offline"===e?"offline":this.get("show")||e||"offline"}getHighestPriorityResource(){return this.resources.sortBy(e=>`${e.get("priority")}-${e.get("timestamp")}`).reverse()[0]}addResource(e){let t=(0,a.parsePresence)(e),s={name:t.resource,presence:"unavailable"===t.type?"offline":"online",priority:t.priority,show:t.show,timestamp:t.timestamp},r=this.resources.get(s.name);r?r.save(s):this.resources.create(s)}removeResource(e){let t=this.resources.get(e);t?.destroy()}}let d=l},"./src/headless/plugins/roster/presences.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/plugins/roster/presence.js");class o extends r.Collection{constructor(){super(),this.model=i.default}}let a=o},"./src/headless/plugins/roster/resource.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js");class i extends r.Model{get idAttribute(){return"name"}}let o=i},"./src/headless/plugins/roster/resources.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/plugins/roster/resource.js");class o extends r.Collection{constructor(){super(),this.model=i.default}}let a=o},"./src/headless/plugins/roster/utils.js":function(e,t,s){"use strict";let r;s.r(t),s.d(t,{isUnsavedContact:()=>E,onChatBoxesInitialized:()=>w,onClearSession:()=>y,onPresencesInitialized:()=>b,onRosterContactsFetched:()=>S,onStatusInitialized:()=>j,rejectPresenceSubscription:()=>x,unregisterPresenceHandler:()=>_});var i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/log/index.js"),d=s("./node_modules/@converse/skeletor/dist/skeletor.js"),c=s("./src/headless/plugins/roster/filter.js"),u=s("./src/headless/shared/constants.js"),h=s("./src/headless/utils/storage.js"),m=s("./src/headless/utils/session.js");let{$pres:f}=a.default.env;async function p(e=!1){let t=o.default.connection.get();e&&(t.send_initial_presence=!0);let s=i.default.state.roster;try{await s.fetchRosterContacts(),o.default.trigger("rosterContactsFetched",s)}catch(e){l.default.error(e)}finally{t.send_initial_presence&&(o.default.user.presence.send(),i.default.state.profile.save({presence:"online"}))}}function g(e){let t=i.default.state.roster,s=t?.get(e.get("jid"));s?.save({num_unread:e.get("num_unread")})}function _(){r&&(o.default.connection.get().deleteHandler(r),r=null)}async function v(){await i.default.state.presences?.clearStore()}async function y(){if(await v(),(0,m.shouldClearCache)(i.default)){let e=i.default.state.roster;e&&(e.data?.destroy(),await e.clearStore(),delete i.default.state.roster,Object.assign(i.default,{roster:void 0}))}}function b(e){if(e)o.default.trigger("rosterReadyAfterReconnection");else{let e=new i.default.exports.RosterContacts;Object.assign(i.default,{roster:e}),Object.assign(i.default.state,{roster:e});let t=i.default.session.get("bare_jid"),s=`converse.contacts-${t}`;(0,h.initStorage)(e,s);let r=new c.RosterFilter;Object.assign(i.default,{roster_filter:r}),Object.assign(i.default.state,{roster_filter:r}),r.id=`_converse.rosterfilter-${t}`,(0,h.initStorage)(r,r.id),r.fetch(),s=`converse-roster-model-${t}`,e.data=new d.Model,e.data.id=s,(0,h.initStorage)(e.data,s),e.data.fetch(),o.default.trigger("rosterInitialized",e)}i.default.state.roster.onConnected(),_(),r=o.default.connection.get().addHandler(e=>(i.default.state.roster.presenceHandler(e),!0),null,"presence",null),p(!o.default.connection.get().restored)}async function j(e){if(e)o.default.connection.get().hasResumed()||await v();else{let e=new i.default.exports.Presences;Object.assign(i.default,{presences:e}),Object.assign(i.default.state,{presences:e});let t=i.default.session.get("bare_jid"),s=`converse.presences-${t}`;(0,h.initStorage)(e,s,"session"),await new Promise(t=>e.fetch({success:t,error:t}))}o.default.trigger("presencesInitialized",e)}function w(){let{chatboxes:e}=i.default.state;e.on("change:num_unread",g),e.on("add",e=>{e.get("type")===u.PRIVATE_CHAT_TYPE&&e.setModelContact(e.get("jid"))})}function S(){i.default.state.roster.on("add",e=>{let t=i.default.state.chatboxes.findWhere({jid:e.get("jid")});t?.setModelContact(e.get("jid"))})}function x(e,t){let s=f({to:e,type:"unsubscribed"});t&&""!==t&&s.c("status").t(t),o.default.send(s)}function E(e){return i.default.session.get("bare_jid")!==e.get("jid")&&!e.get("subscription")}},"./src/headless/plugins/smacks/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),o=s("./src/headless/plugins/smacks/utils.js");let{Strophe:a}=i.default.env;a.addNamespace("SM","urn:xmpp:sm:3"),i.default.plugins.add("converse-smacks",{initialize(){r.default.settings.extend({enable_smacks:!0,smacks_max_unacked_stanzas:5}),r.default.listen.on("afterResourceBinding",o.sendEnableStanza),r.default.listen.on("beforeResourceBinding",o.enableStreamManagement),r.default.listen.on("send",o.onStanzaSent),r.default.listen.on("userSessionInitialized",o.initSessionData)}})},"./src/headless/plugins/smacks/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{enableStreamManagement:()=>x,initSessionData:()=>_,onStanzaSent:()=>E,sendEnableStanza:()=>w});var r=s("./src/log/index.js"),i=s("./node_modules/@converse/openpromise/dist/openpromise.js"),o=s("./src/headless/shared/_converse.js"),a=s("./src/headless/shared/api/index.js"),l=s("./src/headless/shared/api/public.js"),d=s("./src/headless/utils/session.js");let{Strophe:c,u,stx:h}=l.default.env;function m(){return(!a.default.connection.isType("bosh")||!!(0,d.isTestEnv)())&&a.default.disco.stream.getFeature("sm",c.NS.SM)}function f(e){if(!o.default.session.get("smacks_enabled"))return!0;let t=parseInt(e.getAttribute("h"),10),s=o.default.session.get("num_stanzas_handled_by_server"),i=t-s;if(i<0){let e=`New reported stanza count lower than previous. New: ${t} - Previous: ${s}`;r.default.error(e)}let a=o.default.session.get("unacked_stanzas");if(i>a.length){let e=`Higher reported acknowledge count than unacknowledged stanzas. Reported Acknowledged Count: ${i} -Unacknowledged Stanza Count: ${a.length} -New: ${t} - Previous: ${s}`;r.default.error(e)}return o.default.session.save({num_stanzas_handled_by_server:t,num_stanzas_since_last_ack:0,unacked_stanzas:a.slice(i)}),!0}function p(){if(o.default.session.get("smacks_enabled")){let e=o.default.session.get("num_stanzas_handled"),t=h`<a xmlns="${c.NS.SM}" h="${e}"/>`;a.default.send(t)}return!0}function g(e){if(o.default.session.get("smacks_enabled")&&(u.isTagEqual(e,"iq")||u.isTagEqual(e,"presence")||u.isTagEqual(e,"message"))){let e=o.default.session.get("num_stanzas_handled");o.default.session.save("num_stanzas_handled",e+1)}return!0}function _(){let{session:e}=o.default;e.save({smacks_enabled:o.default.session.get("smacks_enabled")||!1,num_stanzas_handled:o.default.session.get("num_stanzas_handled")||0,num_stanzas_handled_by_server:o.default.session.get("num_stanzas_handled_by_server")||0,num_stanzas_since_last_ack:o.default.session.get("num_stanzas_since_last_ack")||0,unacked_stanzas:o.default.session.get("unacked_stanzas")||[]})}function v(){let{session:e}=o.default;u.safeSave(e,{smacks_enabled:!1,num_stanzas_handled:0,num_stanzas_handled_by_server:0,num_stanzas_since_last_ack:0,unacked_stanzas:[]})}function y(e){let t={smacks_enabled:!0};return["1","true"].includes(e.getAttribute("resume"))&&(t.smacks_stream_id=e.getAttribute("id")),o.default.session.save(t),!0}function b(e){return v(),a.default.trigger("streamResumptionFailed"),e.querySelector("item-not-found")?r.default.warn("Could not resume previous SMACKS session, session id not found. A new session will be established."):(r.default.error("Failed to enable stream management"),r.default.error(e.outerHTML),a.default.connection.get()._changeConnectStatus(c.Status.DISCONNECTED,null)),!0}async function j(){let e=(0,i.getOpenPromise)(),t=a.default.connection.get();t._addSysHandler(t=>e.resolve(function(e){y(e),f(e);let t=o.default.session.get("unacked_stanzas");o.default.session.save("unacked_stanzas",[]),t.forEach(e=>a.default.send(u.toStanza(e)));let s=a.default.connection.get();s.do_bind=!1,s.authenticated=!0,s.restored=!0,s._changeConnectStatus(c.Status.CONNECTED,null)}(t)),c.NS.SM,"resumed"),t._addSysHandler(t=>e.resolve(b(t)),c.NS.SM,"failed");let s=o.default.session.get("smacks_stream_id"),r=o.default.session.get("num_stanzas_handled"),l=h`<resume xmlns="${c.NS.SM}" h="${r}" previd="${s}"/>`;a.default.send(l),t.flush(),await e}async function w(){if(!(!a.default.settings.get("enable_smacks")||o.default.session.get("smacks_enabled"))&&await m()){let e=(0,i.getOpenPromise)(),t=a.default.connection.get();t._addSysHandler(t=>e.resolve(y(t)),c.NS.SM,"enabled"),t._addSysHandler(t=>e.resolve(b(t)),c.NS.SM,"failed");let s=a.default.connection.isType("websocket")||(0,d.isTestEnv)(),r=h`<enable xmlns="${c.NS.SM}" resume="${s}"/>`;a.default.send(r),t.flush(),await e}}let S=[];async function x(){if(!a.default.settings.get("enable_smacks")||!await m())return;let e=a.default.connection.get();for(;S.length;)e.deleteHandler(S.pop());S.push(e.addHandler(g)),S.push(e.addHandler(p,c.NS.SM,"r")),S.push(e.addHandler(f,c.NS.SM,"a"));let{session:t}=o.default;t?.get("smacks_stream_id")?await j():v()}function E(e){if(!o.default.session)return void r.default.warn("No _converse.session!");if(o.default.session.get("smacks_enabled")&&(u.isTagEqual(e,"iq")||u.isTagEqual(e,"presence")||u.isTagEqual(e,"message"))){let t=c.serialize(e);o.default.session.save("unacked_stanzas",(o.default.session.get("unacked_stanzas")||[]).concat([t]));let s=a.default.settings.get("smacks_max_unacked_stanzas");if(s>0){let e=o.default.session.get("num_stanzas_since_last_ack")+1;e%s==0&&a.default.send(h`<r xmlns="${c.NS.SM}"/>`),o.default.session.save({num_stanzas_since_last_ack:e})}}}},"./src/headless/plugins/status/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/constants.js");let a={status:{async get(){await r.default.waitUntil("statusInitialized");let e=i.default.state.profile.get("show");if(e)return e;let t=i.default.state.profile.get("status");return t||"online"},async set(e,t){if(!Object.keys(o.STATUS_WEIGHTS).includes(e))throw Error("Invalid availability value. See https://xmpp.org/rfcs/rfc3921.html#rfc.section.2.2.2.1");let s=o.PRES_SHOW_VALUES.includes(e)?e:void 0;"away"===e&&(s="dnd");let a={show:s,type:o.PRES_TYPE_VALUES.includes(e)?e:void 0};"string"==typeof t&&(a.status_message=t),await r.default.waitUntil("statusInitialized"),i.default.state.profile.save(a)},message:{get:async()=>(await r.default.waitUntil("statusInitialized"),i.default.state.profile.get("status_message")),async set(e){await r.default.waitUntil("statusInitialized"),i.default.state.profile.save({status_message:e})}}}}},"./src/headless/plugins/status/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{Profile:()=>r.default});var r=s("./src/headless/plugins/status/profile.js");s("./src/headless/plugins/status/plugin.js")},"./src/headless/plugins/status/plugin.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/plugins/status/profile.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/plugins/status/api.js"),d=s("./src/headless/utils/session.js"),c=s("./src/headless/plugins/status/utils.js");let{Strophe:u}=a.default.env;u.addNamespace("IDLE","urn:xmpp:idle:1"),a.default.plugins.add("converse-status",{initialize(){o.default.settings.extend({auto_away:0,auto_xa:0,csi_waiting_time:0,idle_presence_timeout:300,priority:0}),o.default.promises.add(["statusInitialized"]);let e={XMPPStatus:r.default,Profile:r.default,onUserActivity:c.onUserActivity,onEverySecond:c.onEverySecond,sendCSI:c.sendCSI,registerIntervalHandler:c.registerIntervalHandler};Object.assign(i.default,e),Object.assign(i.default.exports,e),Object.assign(i.default.api.user,l.default),o.default.settings.get("idle_presence_timeout")>0&&o.default.listen.on("addClientFeatures",()=>o.default.disco.own.features.add(u.NS.IDLE)),o.default.listen.on("presencesInitialized",e=>!e&&(0,c.registerIntervalHandler)()),o.default.listen.on("beforeTearDown",c.tearDown),o.default.listen.on("clearSession",()=>{(0,d.shouldClearCache)(i.default)&&i.default.state.profile&&(i.default.state.profile.destroy(),delete i.default.state.profile,Object.assign(i.default,{profile:void 0}),o.default.promises.add(["statusInitialized"]))}),o.default.listen.on("connected",()=>(0,c.initStatus)(!1)),o.default.listen.on("reconnected",()=>(0,c.initStatus)(!0))}})},"./src/headless/plugins/status/profile.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>f});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/shared/model-with-vcard.js"),d=s("./src/headless/shared/color.js"),c=s("./src/headless/plugins/status/utils.js");let{Stanza:u,Strophe:h,stx:m}=a.default.env;class f extends(0,l.default)((0,d.default)(r.Model)){defaults(){return{presence:"online",status:null,show:null,groups:[]}}getStatus(){let e=this.get("presence");return"offline"===e||"unavailable"===e?"offline":this.get("show")||e||"offline"}get(e){return"jid"===e?i.default.session.get("bare_jid"):"nickname"===e?o.default.settings.get("nickname"):super.get(e)}set(e,t,s){if("jid"===e||"nickname"===e)throw Error("Readonly property");return super.set(e,t,s)}initialize(){super.initialize(),this.on("change",e=>{(e.changed?.status||e.changed?.status_message||e.changed?.show)&&o.default.user.presence.send({show:this.get("show"),status:this.get("status_message")})})}getDisplayName(e){let{__:t}=i.default,s=this.vcard?.get("fullname")||this.getNickname()||this.get("jid");return e?.context==="roster"?`${s} (${t("me")})`:s}getNickname(){return this.vcard?.get("nickname")||o.default.settings.get("nickname")}async constructPresence(e={}){let t,{type:s,to:r}=e,{profile:a}=i.default.state,l="string"==typeof e.status?e.status:this.get("status_message"),d=e.show||this.get("status"),f="subscribe"===s?a.getNickname():null,p=o.default.settings.get("priority");(0,c.isIdle)()&&(t=new Date).setSeconds(t.getSeconds()-(0,c.getIdleSeconds)());let g=m`
            <presence ${r?u.unsafeXML(`to="${h.xmlescape(r)}"`):""}
                    ${s?u.unsafeXML(`type="${h.xmlescape(s)}"`):""}
                    xmlns="jabber:client">
                ${f?m`<nick xmlns="${h.NS.NICK}">${f}</nick>`:""}
                ${d?m`<show>${d}</show>`:""}
                ${l?m`<status>${l}</status>`:""}
                <priority>${Number.isNaN(Number(p))?0:p}</priority>
                ${t?m`<idle xmlns="${h.NS.IDLE}" since="${t.toISOString()}"></idle>`:""}
            </presence>`;return await o.default.hook("constructedPresence",null,g)}}},"./src/headless/plugins/status/utils.js":function(e,t,s){"use strict";let r;s.r(t),s.d(t,{getIdleSeconds:()=>b,initStatus:()=>f,isIdle:()=>y,onEverySecond:()=>w,onUserActivity:()=>j,registerIntervalHandler:()=>x,sendCSI:()=>S,tearDown:()=>E});var i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/utils/storage.js"),d=s("./src/headless/utils/session.js"),c=s("./src/headless/shared/constants.js");let{Strophe:u,$build:h}=a.default.env;function m(e){o.default.trigger("statusInitialized",e)}function f(e){if(e=void 0!==i.default.state.profile&&e)m(e);else{let t=`converse.xmppstatus-${i.default.session.get("bare_jid")}`;i.default.state.profile=new i.default.exports.Profile({id:t}),i.default.state.xmppstatus=i.default.state.profile,Object.assign(i.default,{xmppstatus:i.default.state.profile}),(0,l.initStorage)(i.default.state.profile,t,"session"),i.default.state.profile.fetch({success:()=>m(e),error:()=>m(e),silent:!0})}}let p=0,g=!1,_=!1,v=!1;function y(){return g}function b(){return p}function j(){p>0&&(p=0),o.default.connection.get()?.authenticated&&(v&&S(c.ACTIVE),g&&(g=!1,o.default.user.presence.send()),!0===_&&(_=!1,i.default.state.profile.set("show",void 0)))}function w(){if(!o.default.connection.get()?.authenticated)return;let{profile:e}=i.default.state,t=e.get("show");p++,o.default.settings.get("csi_waiting_time")>0&&p>o.default.settings.get("csi_waiting_time")&&!v&&S(c.INACTIVE),o.default.settings.get("idle_presence_timeout")>0&&p>o.default.settings.get("idle_presence_timeout")&&!g&&(g=!0,o.default.user.presence.send()),o.default.settings.get("auto_away")>0&&p>o.default.settings.get("auto_away")&&"away"!==t&&"xa"!==t&&"dnd"!==t?(_=!0,e.set("show","away")):o.default.settings.get("auto_xa")>0&&p>o.default.settings.get("auto_xa")&&"xa"!==t&&"dnd"!==t&&(_=!0,e.set("show","xa"))}function S(e){o.default.send(h(e,{xmlns:u.NS.CSI})),v=e===c.INACTIVE}function x(){if(1>o.default.settings.get("auto_away")&&1>o.default.settings.get("auto_xa")&&1>o.default.settings.get("csi_waiting_time")&&1>o.default.settings.get("idle_presence_timeout"))return;p=0,_=!1;let{onUserActivity:e,onEverySecond:t}=i.default.exports;window.addEventListener("click",e),window.addEventListener("focus",e),window.addEventListener("keypress",e),window.addEventListener("mousemove",e),window.addEventListener((0,d.getUnloadEvent)(),e,{once:!0,passive:!0}),r=setInterval(t,1e3)}function E(){let{onUserActivity:e}=i.default.exports;window.removeEventListener("click",e),window.removeEventListener("focus",e),window.removeEventListener("keypress",e),window.removeEventListener("mousemove",e),window.removeEventListener((0,d.getUnloadEvent)(),e),r&&(clearInterval(r),r=null)}},"./src/headless/plugins/vcard/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./src/log/index.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/plugins/vcard/utils.js");let{Strophe:d,dayjs:c,u,stx:h}=a.default.env,m={vcard:{async set(e,t){let s;if(!e)throw Error("No jid provided for the VCard data");o.default.waitUntil("VCardsInitialized");let r=i.default.state.vcards.get(e),a=r?.attributes??null;if(r&&a.image!==t.image){let e=u.base64ToArrayBuffer(t.image),s=await crypto.subtle.digest("SHA-1",e);r.save({image:t.image,image_type:t.image_type,image_hash:u.arrayBufferToHex(s)})}let c=h`
                <vCard xmlns="vcard-temp">
                    <FN>${t.fn??""}</FN>
                    <NICKNAME>${t.nickname??""}</NICKNAME>
                    <URL>${t.url??""}</URL>
                    <ROLE>${t.role??""}</ROLE>
                    <EMAIL><INTERNET/><PREF/><USERID>${t.email??""}</USERID></EMAIL>
                    <PHOTO>
                        <TYPE>${t.image_type??""}</TYPE>
                        <BINVAL>${t.image??""}</BINVAL>
                    </PHOTO>
                </vCard>`;try{s=await o.default.sendIQ((0,l.createStanza)("set",e,c))}catch(e){throw a&&r.save(a),e}if(r=await o.default.vcard.update(e,!0),u.isOwnJID(e)){let e=h`<x xmlns="${d.NS.VCARD_UPDATE}">
                    <photo>${r.get("image_hash")??""}</photo>
                </x>`;o.default.user.presence.send({},e)}return s},async get(e,t){if(o.default.waitUntil("VCardsInitialized"),"string"==typeof e)return(0,l.fetchVCard)(e);let s=e.get("vcard_error");if(s){let{random:e,round:r}=Math,i=r(e()),o=c().subtract(21,"days").subtract(r(24*e())*i,"hours").add(r(24*e())*!i,"hours"),a=c(s).isAfter(o);if(!t&&a)return null}let i=e.get("vcard_updated");if(i){let{random:e,round:s}=Math,r=s(e()),o=c().subtract(7,"days").subtract(s(24*e())*r,"hours").add(s(24*e())*!r,"hours"),a=c(i).isAfter(o);if(!t&&a)return null}let a=e.get("jid");return a?(0,l.fetchVCard)(a):(r.default.error("No JID to get vcard for"),null)},async update(e,t){o.default.waitUntil("VCardsInitialized");let s=await this.get(e,t);return null===s?void r.default.debug("api.vcard.update: null data returned, not updating the vcard"):(e="string"==typeof e?i.default.state.vcards.get(e):e)?(Object.keys(s).length&&(delete s.stanza,u.safeSave(e,s)),e):void r.default.error(`Could not find a VCard model for ${e}`)}}}},"./src/headless/plugins/vcard/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{VCard:()=>r.default,VCards:()=>i.default});var r=s("./src/headless/plugins/vcard/vcard.js"),i=s("./src/headless/plugins/vcard/vcards.js");s("./src/headless/plugins/vcard/plugin.js")},"./src/headless/plugins/vcard/parsers.js":function(e,t,s){"use strict";s.r(t),s.d(t,{parseVCardResultStanza:()=>i});let{u:r}=s("./src/headless/shared/api/public.js").default.env;async function i(e){let t={email:e.querySelector(":scope > vCard EMAIL USERID")?.textContent,fullname:e.querySelector(":scope > vCard FN")?.textContent,image:e.querySelector(":scope > vCard PHOTO BINVAL")?.textContent,image_type:e.querySelector(":scope > vCard PHOTO TYPE")?.textContent,nickname:e.querySelector(":scope > vCard NICKNAME")?.textContent,role:e.querySelector(":scope > vCard ROLE")?.textContent,stanza:e,url:e.querySelector(":scope > vCard URL")?.textContent,vcard_updated:new Date().toISOString(),error:void 0,vcard_error:void 0,image_hash:void 0};if(t.image){let e=r.base64ToArrayBuffer(t.image),s=await crypto.subtle.digest("SHA-1",e);t.image_hash=r.arrayBufferToHex(s)}return t}},"./src/headless/plugins/vcard/plugin.js":function(e,t,s){"use strict";s.r(t),s("./src/headless/plugins/status/index.js");var r=s("./src/headless/plugins/vcard/vcard.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/plugins/vcard/api.js"),d=s("./src/headless/plugins/vcard/vcards.js"),c=s("./src/headless/plugins/vcard/utils.js");let{Strophe:u}=a.default.env;a.default.plugins.add("converse-vcard",{dependencies:["converse-status","converse-roster"],enabled:()=>!o.default.settings.get("blacklisted_plugins")?.includes("converse-vcard"),initialize(){o.default.settings.extend({lazy_load_vcards:!0}),o.default.promises.add("VCardsInitialized"),Object.assign(i.default.api,l.default);let e={VCard:r.default,VCards:d.default};Object.assign(i.default,e),Object.assign(i.default.exports,e),o.default.listen.on("chatRoomInitialized",e=>{e.listenTo(e.occupants,"change:image_hash",e=>(0,c.onOccupantAvatarChanged)(e))}),o.default.listen.on("addClientFeatures",()=>{o.default.disco.own.features.add(u.NS.VCARD),o.default.disco.own.features.add(u.NS.VCARD_UPDATE)}),o.default.listen.on("clearSession",()=>(0,c.clearVCardsSession)()),o.default.listen.on("visibilityChanged",({el:e})=>{let{model:t}=e;t?.vcard&&t.vcard.trigger("visibilityChanged")}),o.default.listen.on("connected",()=>{let e=new i.default.exports.VCards;i.default.state.vcards=e,Object.assign(i.default,{vcards:e})}),o.default.listen.on("presencesInitialized",()=>(0,c.registerPresenceHandler)()),o.default.listen.on("beforeTearDown",()=>(0,c.unregisterPresenceHandler)()),o.default.listen.on("constructedPresence",(e,t)=>(0,c.updatePresence)(t))}})},"./src/headless/plugins/vcard/utils.js":function(e,t,s){"use strict";let r;s.r(t),s.d(t,{clearVCardsSession:()=>w,createStanza:()=>_,fetchVCard:()=>S,getVCardForModel:()=>y,getVCardForOccupant:()=>b,onOccupantAvatarChanged:()=>v,registerPresenceHandler:()=>A,unregisterPresenceHandler:()=>E,updatePresence:()=>C});var i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/log/index.js"),d=s("./src/headless/utils/session.js"),c=s("./src/headless/utils/html.js"),u=s("./src/headless/shared/parsers.js"),h=s("./src/headless/plugins/vcard/parsers.js");let{Strophe:m,$iq:f,sizzle:p,stx:g}=a.default.env;function _(e,t,s){let r=f(t?{type:e,to:t}:{type:e});return s?r.cnode(s):r.c("vCard",{xmlns:m.NS.VCARD}),r}function v(e){let t=e.get("image_hash"),s=[];e.get("jid")&&s.push(i.default.state.vcards.get(e.get("jid"))),s.push(i.default.state.vcards.get(e.get("from"))),s.forEach(e=>t&&e&&e?.get("image_hash")!==t&&o.default.vcard.update(e,!0))}async function y(e,t=!1){let s;if(await o.default.waitUntil("VCardsInitialized"),e instanceof i.default.exports.MUCOccupant)s=await b(e,t);else if(e instanceof i.default.exports.MUCMessage)s=await j(e,t);else{let r;if(e instanceof i.default.exports.Message){if(["error","info"].includes(e.get("type")))return;r=m.getBareJidFromJid(e.get("from"))}else r=e.get("jid");if(!r)return l.default.warn("Could not set VCard on model because no JID found!"),null;let{vcards:o}=i.default.state;s=o.get(r)||o.create({jid:r},{lazy_load:t})}return s&&s.on("change",()=>e.trigger("vcard:change")),s}async function b(e,t=!0){await o.default.waitUntil("VCardsInitialized");let{vcards:s,profile:r}=i.default.state,a=e?.collection?.chatroom,d=e.get("nick");if(d&&a?.get("nick")===d)return r.vcard;{let r=e.get("jid")||e.get("from");return r?s.get(r)||s.create({jid:r},{lazy_load:t}):(l.default.debug("Could not get VCard for occupant because no JID found!"),null)}}async function j(e,t=!0){if(["error","info"].includes(e.get("type")))return;await o.default.waitUntil("VCardsInitialized");let{vcards:s,profile:r}=i.default.state,a=e?.collection?.chatbox,d=m.getResourceFromJid(e.get("from"));if(d&&a?.get("nick")===d)return r.vcard;{let r=e.occupant?.get("jid")||e.get("from");return r?s.get(r)||s.create({jid:r},{lazy_load:t}):(l.default.warn(`Could not get VCard for message because no JID found! msgid: ${e.get("msgid")}`),null)}}function w(){(0,d.shouldClearCache)(i.default)&&(o.default.promises.add("VCardsInitialized"),i.default.state.vcards&&(i.default.state.vcards.clearStore(),Object.assign(i.default,{vcards:void 0}),delete i.default.state.vcards))}async function S(e){let t,s=i.default.session.get("bare_jid"),r=m.getBareJidFromJid(e)===s?null:e;try{t=await o.default.sendIQ(_("get",r))}catch(s){let{message:t}=((0,c.isElement)(s)?await (0,u.parseErrorStanza)(s):s)??{};return{jid:e,stanza:(0,c.isElement)(s)?s:null,error:t,vcard_error:new Date().toISOString()}}return(0,h.parseVCardResultStanza)(t)}async function x(e){await o.default.waitUntil("VCardsInitialized");let t=p(`x[xmlns="${m.NS.VCARD_UPDATE}"] photo`,e).pop();if(t){let s=t.textContent,r=m.getBareJidFromJid(e.getAttribute("from")),a=await i.default.state.vcards.get(r);a?.get("image_hash")!==s&&o.default.vcard.update(r,!0).catch(e=>l.default.error(e))}}function E(){r&&(o.default.connection.get().deleteHandler(r),r=null)}function A(){r=o.default.connection.get().addHandler(e=>{try{x(e)}catch(e){l.default.error(e)}return!0},null,"presence",null)}function C(e){if(0===p(`x[xmlns=${m.NS.VCARD_UPDATE}"]`,e.root()).length){let t=g`<x xmlns="${m.NS.VCARD_UPDATE}"></x>`;e.root().cnode(t).up()}return e}m.addNamespace("VCARD_UPDATE","vcard-temp:x:update")},"./src/headless/plugins/vcard/vcard.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js");s("./src/headless/shared/_converse.js");var i=s("./src/headless/shared/api/index.js");class o extends r.Model{constructor(e,t){super(e,t),this._vcard=null}initialize(e,t){this.lazy_load=i.default.settings.get("lazy_load_vcards")&&!!t?.lazy_load,this.lazy_load?this.once("visibilityChanged",()=>i.default.vcard.update(this)):i.default.vcard.update(this)}get idAttribute(){return"jid"}getDisplayName(){return this.get("nickname")||this.get("fullname")||this.get("jid")}}let a=o},"./src/headless/plugins/vcard/vcards.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./node_modules/@converse/openpromise/dist/openpromise.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/_converse.js"),l=s("./src/headless/utils/storage.js"),d=s("./src/headless/plugins/vcard/vcard.js");class c extends r.Collection{constructor(){super(),this.model=d.default}async initialize(){let{session:e}=a.default,t=e.get("bare_jid"),s=`${t}-converse.vcards`;(0,l.initStorage)(this,s),await this.fetchVCards(),o.default.trigger("VCardsInitialized")}fetchVCards(){let e=(0,i.getOpenPromise)();return this.fetch({success:()=>e.resolve(),error:()=>e.resolve()}),e}}let u=c},"./src/headless/shared/_converse.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>f});var r=s("./src/log/index.js"),i=s("./src/headless/shared/i18n.js"),o=s("./node_modules/pluggable.js/src/pluggable.js"),a=s("./node_modules/@converse/skeletor/dist/skeletor.js"),l=s("./node_modules/@converse/openpromise/dist/openpromise.js"),d=s("./src/headless/utils/session.js"),c=s("./src/headless/shared/constants.js");let u={chatboxes:null,bookmarks:null,ANONYMOUS:c.ANONYMOUS,CLOSED:c.CLOSED,EXTERNAL:c.EXTERNAL,LOGIN:c.LOGIN,LOGOUT:c.LOGOUT,OPENED:c.OPENED,PREBIND:c.PREBIND,SUCCESS:c.SUCCESS,FAILURE:c.FAILURE,INACTIVE:c.INACTIVE,ACTIVE:c.ACTIVE,COMPOSING:c.COMPOSING,PAUSED:c.PAUSED,GONE:c.GONE};class h extends(0,a.EventEmitter)(Object){constructor(){super();let e=new Proxy(this,{get:(e,t)=>(!(0,d.isTestEnv)()&&"string"==typeof t&&Object.keys(u).includes(t)&&r.default.warn(`Accessing ${t} on _converse is DEPRECATED`),Reflect.get(e,t))});return e.initialize(),e}initialize(){this.VERSION_NAME=c.VERSION_NAME,this.strict_plugin_dependencies=!1,this.pluggable=null,this.templates={},this.storage={},this.promises={initialized:(0,l.getOpenPromise)()},this.NUM_PREKEYS=100,this.TIMEOUTS={PAUSED:1e4,INACTIVE:9e4},Object.assign(this,u),this.api=null,this.labels={},this.exports={},this.constants={},this.env={},this.state={},this.initSession()}initSession(){this.session?.destroy(),this.session=new a.Model,Object.assign(this,{jid:void 0,bare_jid:void 0,domain:void 0,resource:void 0})}__(...e){return i.default.__(...e)}___(e){return e}}let m=new h;o.default.enable(m,"_converse","pluggable");let f=m},"./src/headless/shared/actions.js":function(e,t,s){"use strict";s.r(t),s.d(t,{rejectMessage:()=>h,sendChatState:()=>p,sendMarker:()=>m,sendReceiptStanza:()=>f,sendRetractionMessage:()=>g});var r=s("./src/log/index.js"),i=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),o=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/shared/constants.js");let{u:d,stx:c,Stanza:u}=a.default.env;function h(e,t){o.default.send(c`<message to="${e.getAttribute("from")}"
                    type="error"
                    id="${e.getAttribute("id")}"
                    xmlns="jabber:client">
                <error type="cancel">
                    <not-allowed xmlns="${i.Strophe.NS.STANZAS}"/>
                    <text xmlns="${i.Strophe.NS.STANZAS}">${t}</text>
                </error>
            </message>`),r.default.warn(`Rejecting message stanza with the following reason: ${t}`),r.default.warn(e)}function m(e,t,s,a){if(!l.MARKER_TYPES.includes(s))return void r.default.error(`Invalid marker type: ${s}`);let h=c`
        <message from="${o.default.connection.get().jid}"
                id="${d.getUniqueId()}"
                to="${e}"
                type="${a||"chat"}"
                xmlns="jabber:client">
            <${u.unsafeXML(s)} xmlns="${i.Strophe.NS.MARKERS}" id="${t}"/>
        </message>`;o.default.send(h)}function f(e,t){let s=c`
        <message from="${o.default.connection.get().jid}"
                id="${d.getUniqueId()}"
                to="${e}"
                type="chat"
                xmlns="jabber:client">
            <received xmlns="${i.Strophe.NS.RECEIPTS}" id="${t}"/>
            <store xmlns="${i.Strophe.NS.HINTS}"/>
        </message>`;o.default.send(s)}function p(e,t){if(!e)return void r.default.error("sendChatState called with no JID");if(!l.CHAT_STATES.includes(t))return void r.default.error(`Invalid chat state: ${t}`);if(o.default.settings.get("send_chat_state_notifications")&&t){let s=o.default.settings.get("send_chat_state_notifications");if(Array.isArray(s)&&!s.includes(t))return;o.default.send(c`<message id="${d.getUniqueId()}" to="${e}" type="chat" xmlns="jabber:client">
                <${u.unsafeXML(t)} xmlns="${i.Strophe.NS.CHATSTATES}"/>
                <no-store xmlns="${i.Strophe.NS.HINTS}"/>
                <no-permanent-store xmlns="${i.Strophe.NS.HINTS}"/>
            </message>`)}}function g(e,t,s){let r=t.get("origin_id");if(!r)throw Error("Can't retract message without a XEP-0359 Origin ID");let a=c`
        <message id="${s}"
                 to="${e}"
                 type="chat"
                 xmlns="jabber:client">
            <retract id="${r}" xmlns="${i.Strophe.NS.RETRACT}"/>
            <body>/me retracted a message</body>
            <store xmlns="${i.Strophe.NS.HINTS}"/>
            <fallback xmlns="${i.Strophe.NS.FALLBACK}" for="${i.Strophe.NS.RETRACT}" />
        </message>`;return o.default.connection.get().send(a)}},"./src/headless/shared/api/events.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/utils/object.js");let o={async trigger(e){if(!r.default._events)return;let t=Array.from(arguments),s=t.pop();if(s&&s.synchronous){let s=r.default._events[e]||[],i=t.splice(1);await Promise.all(s.map(e=>e.callback.apply(e.ctx,i)))}else r.default.trigger.apply(r.default,arguments);let i=r.default.promises[e];void 0!==i&&i.resolve(arguments[1])},hook(e,t,s){let i=r.default._events[e]||[];return i.length?i.reduce((e,s)=>e.then(e=>s.callback(t,e)),Promise.resolve(s)):s},listen:{once:r.default.once.bind(r.default),on:r.default.on.bind(r.default),not:r.default.off.bind(r.default),stanza(e,t,s){(0,i.isFunction)(t)?(s=t,t={}):t=t||{},r.default.api.connection.get().addHandler(s,t.ns,e,t.type,t.id,t.from,t)}}}},"./src/headless/shared/api/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/headless/shared/connection/api.js"),i=s("./src/headless/shared/api/events.js"),o=s("./src/headless/shared/api/promise.js"),a=s("./src/headless/shared/api/send.js"),l=s("./src/headless/shared/api/user.js"),d=s("./src/headless/shared/settings/api.js");let c={connection:r.default,settings:d.settings_api,...a.default,...l.default,...i.default,...o.default,disco:null,elements:null,contacts:null}},"./src/headless/shared/api/presence.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/promise.js"),o=s("./src/headless/shared/api/send.js"),a=s("./src/headless/plugins/muc/api.js");let{waitUntil:l}=i.default,{send:d}=o.default,{rooms:c}=a.default,u={presence:{async send(e,t){await l("statusInitialized");let s=[];t&&(s=Array.isArray(t)?t:[t]);let i=r.default.state.profile,o=await i.constructPresence(e);s.map(e=>e?.tree()??e).forEach(e=>o.cnode(e).up()),d(o);let{show:a,type:u}=e||{};(a||!u)&&(await c.get()).forEach(t=>t.sendStatusPresence(e,s))}}}},"./src/headless/shared/api/promise.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/shared/_converse.js"),i=s("./node_modules/@converse/openpromise/dist/openpromise.js"),o=s("./src/headless/utils/promise.js"),a=s("./src/headless/utils/object.js");let l={promises:{add(e,t=!0){(e=Array.isArray(e)?e:[e]).forEach(e=>{let s=(0,i.getOpenPromise)();s.replace=t,r.default.promises[e]=s})}},waitUntil(e){if((0,a.isFunction)(e))return(0,o.waitUntil)(e);{let t=r.default.promises[e];return void 0===t?null:t}}}},"./src/headless/shared/api/public.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>E});var r=s("./node_modules/sprintf-js/src/sprintf.js"),i=s("./node_modules/dayjs/dayjs.min.js"),o=s.n(i),a=s("./node_modules/sizzle/dist/sizzle.js"),l=s.n(a),d=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),c=s("./node_modules/@converse/skeletor/dist/skeletor.js"),u=s("./node_modules/filesize/dist/filesize.esm.js"),h=s("./node_modules/lit/index.js"),m=s("./src/headless/shared/api/index.js"),f=s("./src/headless/shared/_converse.js"),p=s("./src/headless/shared/i18n.js"),g=s("./src/log/index.js"),_=s("./src/headless/shared/connection/feedback.js"),v=s("./src/headless/utils/index.js"),y=s("./src/headless/shared/constants.js"),b=s("./src/headless/utils/session.js"),j=s("./src/headless/shared/errors.js"),w=s("./src/headless/shared/settings/utils.js"),S=s("./src/headless/utils/init.js");f.default.api=m.default;let x={$build:d.$build,$iq:d.$iq,$msg:d.$msg,$pres:d.$pres,Collection:c.Collection,Model:c.Model,Stanza:d.Stanza,Strophe:d.Strophe,TimeoutError:j.TimeoutError,VERSION_NAME:y.VERSION_NAME,css:h.css,dayjs:o(),errors:j,filesize:u.filesize,html:h.html,log:g.default,nothing:h.nothing,render:h.render,sizzle:l(),sprintf:r.sprintf,stx:d.stx,u:v.default,utils:v.default},E=Object.assign(window.converse||{},{CHAT_STATES:y.CHAT_STATES,keycodes:y.KEYCODES,async initialize(e){let{api:t}=f.default;if(await (0,S.cleanup)(f.default),(0,w.initAppSettings)(e),f.default.strict_plugin_dependencies=e.strict_plugin_dependencies,g.default.setLogLevel(t.settings.get("loglevel")),t.settings.get("authentication")===y.ANONYMOUS&&t.settings.get("auto_login")&&!t.settings.get("jid"))throw Error("Config Error: you need to provide the server's domain via the 'jid' option when using anonymous authentication with auto_login.");(0,v.setLogLevelFromRoute)(),addEventListener("hashchange",v.setLogLevelFromRoute);let s=new _.default;Object.assign(f.default,{connfeedback:s}),Object.assign(f.default.state,{connfeedback:s}),f.default.env=x,await (0,S.initSessionStorage)(f.default),await (0,S.initClientConfig)(f.default),await p.default.initialize(),(0,S.initPlugins)(f.default),t.elements?.register(),(0,S.registerGlobalEventHandlers)(f.default);let r=f.default.pluggable.plugins;if((t.settings.get("auto_login")||t.settings.get("keepalive")&&r["converse-bosh"]?.enabled())&&await t.user.login(null,null,!0),t.trigger("initialized"),(0,b.isTestEnv)())return f.default},plugins:{add(e,t){if(t.__name__=e,void 0!==f.default.pluggable.plugins[e])throw TypeError(`Error: plugin with name "${e}" has already been registered!`);f.default.pluggable.plugins[e]=t}},env:x})},"./src/headless/shared/api/send.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/shared/_converse.js"),i=s("./src/log/index.js"),o=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),a=s("./src/headless/shared/errors.js");let l={send(e){let{api:t}=r.default;if(!t.connection.connected()){i.default.warn("Not sending stanza because we're not connected!"),i.default.warn(o.Strophe.serialize(e));return}let s=e instanceof Element?e:e.tree();if("iq"===s.tagName)return t.sendIQ(s);t.connection.get().send(s),t.trigger("send",s)},sendIQ(e,t,s=!0){let i,{api:l}=r.default;if(!l.connection.connected())throw Error("Not sending IQ stanza because we're not connected!");let d=l.connection.get(),c=e instanceof Element?e:e.tree();return["get","set"].includes(c.getAttribute("type"))?(t=t||l.settings.get("stanza_timeout"),s?(i=new Promise((e,s)=>d.sendIQ(c,e,s,t))).catch(e=>{if(null===e)throw new a.TimeoutError(`Timeout error after ${t}ms for the following IQ stanza: ${o.Strophe.serialize(c)}`)}):i=new Promise(e=>d.sendIQ(c,e,e,t))):(d.sendIQ(c),i=Promise.resolve()),l.trigger("send",c),i}}},"./src/headless/shared/api/user.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/presence.js"),o=s("./src/headless/shared/connection/api.js"),a=s("./src/headless/utils/session.js"),l=s("./src/headless/utils/init.js"),d=s("./node_modules/@converse/openpromise/dist/openpromise.js"),c=s("./src/headless/shared/settings/user/api.js"),u=s("./src/headless/shared/constants.js");let h={user:{settings:c.user_settings_api,...i.default,jid:()=>o.default.get()?.jid,async login(e,t,s=!1){let{api:i}=r.default;e=e||i.settings.get("jid");let a=o.default.init(e);if(i.settings.get("connection_options")?.worker&&await a.restoreWorkerSession())return;e&&(e=await (0,l.setUserJID)(e));let{success:d}=await r.default.api.hook("login",this,{jid:e,password:t,automatic:s});if(d)return;t=t||i.settings.get("password");let c=e&&t?{jid:e,password:t}:null;await (0,l.attemptNonPreboundSession)(c,s)},async logout(){let{api:e}=r.default;await e.trigger("beforeLogout",{synchronous:!0});let t=(0,d.getOpenPromise)(),s=()=>{Object.keys(r.default.promises).forEach(e=>(0,a.replacePromise)(r.default,e)),localStorage.removeItem("conversejs-session-jid"),e.trigger("logout"),t.resolve()},i=o.default.get();return i?(i.setDisconnectionCause(u.LOGOUT,void 0,!0),e.listen.once("disconnected",()=>s()),i.disconnect()):s(),t}}}},"./src/headless/shared/chatbox.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/shared/api/index.js"),o=s("./src/headless/utils/session.js"),a=s("./src/headless/shared/_converse.js"),l=s("./src/headless/shared/api/public.js"),d=s("./src/log/index.js"),c=s("./src/headless/shared/model-with-messages.js");let{u}=l.default.env;class h extends(0,c.default)(r.Model){async initialize(){await super.initialize();let e=this.get("jid");e&&this.set({box_id:`box-${e}`})}validate(e){if(!e.jid)return"Ignored ChatBox without JID";let t=i.default.settings.get("auto_join_rooms").map(e=>e instanceof Object?e.jid:e),s=i.default.settings.get("auto_join_private_chats").concat(t);if(i.default.settings.get("singleton")&&!s.includes(e.jid)&&!i.default.settings.get("auto_join_on_invite")){let t=`${e.jid} is not allowed because singleton is true and it's not being auto_joined`;return d.default.warn(t),t}}maybeShow(e){if((0,o.isUniView)()){let t=a.default.state.chatboxes.filter(e=>!e.get("hidden")&&e.get("jid")!==this.get("jid")&&"controlbox"!==e.get("id"));return(e||0===t.length)&&(t.forEach(e=>u.safeSave(e,{hidden:!0})),u.safeSave(this,{hidden:!1,closed:!1}),this.trigger("show")),this}return u.safeSave(this,{hidden:!1,closed:!1}),this.trigger("show"),this}async shouldDestroyOnClose(){return await i.default.hook("shouldDestroyOnClose",this,!0)}async close(e){if(await this.shouldDestroyOnClose())try{await new Promise((e,t)=>this.destroy({success:e,error:(e,s)=>t(s)}))}catch(e){d.default.debug(e)}else u.safeSave(this,{closed:!0});i.default.settings.get("clear_messages_on_reconnection")&&await this.clearMessages(),i.default.trigger("chatBoxClosed",this)}announceReconnection(){i.default.trigger("chatReconnected",this)}async onReconnection(){i.default.settings.get("clear_messages_on_reconnection")&&await this.clearMessages(),this.announceReconnection()}}},"./src/headless/shared/color.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/utils/index.js"),i=s("./src/headless/shared/constants.js");let{safeSave:o,colorize:a}=r.default;function l(e){return class extends e{async setColor(){o(this,{color:await a(this.getIdentifier())})}getIdentifier(){return this.get("type")===i.CHATROOMS_TYPE?this.get("jid"):"groupchat"===this.get("type")?this.get("from_real_jid")||this.get("from"):this.get("occupant_id")||this.get("jid")||this.get("from")||this.get("nick")}async getColor(){return this.get("color")||await this.setColor(),this.get("color")}async getAvatarStyle(e=""){try{let t=await this.getColor();return`background-color: ${t} !important; ${e}`}catch{return`background-color: gray !important; ${e}`}}}}},"./src/headless/shared/connection/api.js":function(e,t,s){"use strict";let r;s.r(t),s.d(t,{default:()=>f});var i=s("./src/headless/shared/api/events.js"),o=s("./src/headless/shared/connection/index.js"),a=s("./src/headless/shared/constants.js"),l=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),d=s("./src/headless/shared/connection/utils.js"),c=s("./src/headless/utils/jid.js"),u=s("./src/headless/utils/session.js"),h=s("./src/headless/shared/settings/api.js");let m={explicitResourceBinding:!0},f={init(e){if(e&&r?.jid&&(0,c.isSameDomain)(r.jid,e))return r;if(!h.settings_api.get("bosh_service_url")&&h.settings_api.get("authentication")===a.PREBIND)throw Error("authentication is set to 'prebind' but we don't have a BOSH connection");return r=new((0,u.isTestEnv)()?o.MockConnection:o.Connection)((0,d.getConnectionServiceURL)(),Object.assign(m,h.settings_api.get("connection_options"),{keepalive:h.settings_api.get("keepalive")})),(0,d.setStropheLogLevel)(),i.default.trigger("connectionInitialized"),r},get:()=>r,destroy(){this.disconnect(),r?.disconnect(),r=void 0},authenticated:()=>r?.authenticated&&!0,connected:()=>r?.connected&&!0,disconnect(){r?.disconnect()},reconnect:()=>(r.setConnectionStatus(l.Strophe.Status.RECONNECTING,"The connection has dropped, attempting to reconnect."),r?.reconnecting)?r.debouncedReconnect():r.reconnect(),isType:e=>r.isType(e)}},"./src/headless/shared/connection/feedback.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/shared/_converse.js"),i=s("./node_modules/@converse/skeletor/dist/skeletor.js"),o=s("./node_modules/strophe.js/dist/strophe.browser.esm.js");class a extends i.Model{defaults(){return{connection_status:o.Strophe.Status.DISCONNECTED,message:""}}initialize(){super.initialize();let{api:e}=r.default;this.on("change",()=>e.trigger("connfeedback",r.default.state.connfeedback))}}let l=a},"./src/headless/shared/connection/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{Connection:()=>p,MockConnection:()=>g});var r=s("./node_modules/lodash-es/debounce.js"),i=s("./src/log/index.js"),o=s("./node_modules/sizzle/dist/sizzle.js"),a=s.n(o),l=s("./src/headless/shared/_converse.js"),d=s("./src/headless/shared/constants.js"),c=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),u=s("./src/headless/utils/session.js"),h=s("./node_modules/@converse/openpromise/dist/openpromise.js"),m=s("./src/headless/utils/init.js");let f=Object.keys(c.Strophe.Status).reduce((e,t)=>Math.max(e,c.Strophe.Status[t]),0);c.Strophe.Status.RECONNECTING=f+1;class p extends c.Strophe.Connection{constructor(e,t){super(e,t),this.send_initial_presence=!0,this.debouncedReconnect=(0,r.default)(this.reconnect,3e3)}xmlInput(e){i.default.debug(e.outerHTML,"color: darkgoldenrod")}xmlOutput(e){i.default.debug(e.outerHTML,"color: darkcyan")}async bind(){let{api:e}=l.default;await e.trigger("beforeResourceBinding",{synchronous:!0}),super.bind()}async onDomainDiscovered(e){let{api:t}=l.default,s=await e.text(),r=new DOMParser().parseFromString(s,"text/xml").firstElementChild;if("XRD"!=r.nodeName||"http://docs.oasis-open.org/ns/xri/xrd-1.0"!=r.namespaceURI)return i.default.info("Could not discover XEP-0156 connection methods");let o=a()('Link[rel="urn:xmpp:alt-connections:xbosh"]',r),d=a()('Link[rel="urn:xmpp:alt-connections:websocket"]',r),c=o.map(e=>e.getAttribute("href")).filter(e=>e.startsWith("https:")),u=d.map(e=>e.getAttribute("href")).filter(e=>e.startsWith("wss:"));0===c.length&&0===u.length?i.default.info("Neither BOSH nor WebSocket connection methods have been specified with XEP-0156."):(t.settings.set("websocket_url",u.pop()),t.settings.set("bosh_service_url",c.pop()),this.service=t.settings.get("websocket_url")||t.settings.get("bosh_service_url"),this.setProtocol())}async discoverConnectionMethods(e){let t,s=`https://${e}/.well-known/host-meta`;try{t=await fetch(s,{mode:"cors",headers:{Accept:"application/xrd+xml, text/xml"}})}catch(e){i.default.info(`Failed to discover alternative connection methods at ${s}`),i.default.error(e);return}t.status>=200&&t.status<400?await this.onDomainDiscovered(t):i.default.info("Could not discover XEP-0156 connection methods")}async connect(e,t,s){let{__:r,api:i}=l.default;if(i.settings.get("discover_connection_methods")){let t=c.Strophe.getDomainFromJid(e);await this.discoverConnectionMethods(t)}if(!i.settings.get("bosh_service_url")&&!i.settings.get("websocket_url")){i.settings.set("show_connection_url_input",!0),(s||this.onConnectStatusChanged.bind(this))(c.Strophe.Status.DISCONNECTED,r("Could not automatically determine a connection URL"));return}super.connect(e,t,s||this.onConnectStatusChanged,d.BOSH_WAIT)}disconnect(e){super.disconnect(e),this.send_initial_presence=!0}async switchTransport(){let{api:e}=l.default,t=l.default.session.get("bare_jid");e.connection.isType("websocket")&&e.settings.get("bosh_service_url")?(await (0,m.setUserJID)(t),this._proto._doDisconnect(),this._proto=new c.Strophe.Bosh(this),this.service=e.settings.get("bosh_service_url")):e.connection.isType("bosh")&&e.settings.get("websocket_url")&&(e.settings.get("authentication")===d.ANONYMOUS?await (0,m.setUserJID)(e.settings.get("jid")):await (0,m.setUserJID)(t),this._proto._doDisconnect(),this._proto=new c.Strophe.Websocket(this),this.service=e.settings.get("websocket_url"))}async reconnect(){let{api:e}=l.default;i.default.debug("RECONNECTING: the connection has dropped, attempting to reconnect."),this.reconnecting=!0,await (0,u.tearDown)(l.default);let t=l.default.state.connfeedback.get("connection_status");t===c.Strophe.Status.CONNFAIL?this.switchTransport():t===c.Strophe.Status.AUTHFAIL&&e.settings.get("authentication")===d.ANONYMOUS&&await (0,m.setUserJID)(e.settings.get("jid")),e.trigger("will-reconnect"),e.settings.get("authentication")===d.ANONYMOUS&&await (0,u.clearSession)(l.default);let s=l.default.session.get("jid");return e.user.login(s)}async onConnected(e){let{api:t}=l.default;if(delete this.reconnecting,this.flush(),await (0,m.setUserJID)(this.jid),l.default.state.config.get("trusted")){let e=l.default.session.get("bare_jid");localStorage.setItem("conversejs-session-jid",e)}await t.trigger("afterResourceBinding",e,{synchronous:!0}),e?t.trigger("reconnected"):t.trigger("connected")}setDisconnectionCause(e,t,s){void 0===e?(delete this.disconnection_cause,delete this.disconnection_reason):(void 0===this.disconnection_cause||s)&&(this.disconnection_cause=e,this.disconnection_reason=t)}setConnectionStatus(e,t){this.status=e,l.default.state.connfeedback.set({connection_status:e,message:t})}async finishDisconnection(){this.setConnectionStatus(c.Strophe.Status.DISCONNECTED,this.disconnection_reason);let{api:e}=l.default;i.default.debug("DISCONNECTED"),delete this.reconnecting,this.reset(),(0,u.tearDown)(l.default),await (0,u.clearSession)(l.default),e.connection.destroy(),e.trigger("disconnected")}onDisconnected(){let{api:e}=l.default;if(!e.settings.get("auto_reconnect"))return this.finishDisconnection();{let t=this.disconnection_reason;if(this.disconnection_cause===c.Strophe.Status.AUTHFAIL)if(e.settings.get("credentials_url")||e.settings.get("authentication")===d.ANONYMOUS)return e.connection.reconnect();else return this.finishDisconnection();if(this.status===c.Strophe.Status.CONNECTING){let{__:e}=l.default;return this.setConnectionStatus(c.Strophe.Status.CONNFAIL,e("An error occurred while connecting to the chat server.")),this.finishDisconnection()}if(this.disconnection_cause===d.LOGOUT||t===c.Strophe.ErrorCondition.NO_AUTH_MECH||"host-unknown"===t||"remote-connection-failed"===t)return this.finishDisconnection();e.connection.reconnect()}}onConnectStatusChanged(e,t){let{__:s}=l.default;if(i.default.debug(`Status changed to: ${d.CONNECTION_STATUS[e]}`),e===c.Strophe.Status.ATTACHFAIL)this.setConnectionStatus(e),this.worker_attach_promise?.resolve(!1);else if(e===c.Strophe.Status.CONNECTED||e===c.Strophe.Status.ATTACHED){if(this.worker_attach_promise?.isResolved&&this.status===c.Strophe.Status.ATTACHED)return;this.setConnectionStatus(e),this.worker_attach_promise?.resolve(!0),this.setDisconnectionCause(),this.reconnecting?(i.default.debug(e===c.Strophe.Status.CONNECTED?"Reconnected":"Reattached"),this.onConnected(!0)):(i.default.debug(e===c.Strophe.Status.CONNECTED?"Connected":"Attached"),this.restored&&(this.send_initial_presence=!1),this.onConnected())}else if(e===c.Strophe.Status.DISCONNECTED)this.setDisconnectionCause(e,t),this.onDisconnected();else if(e===c.Strophe.Status.BINDREQUIRED)this.bind();else if(e===c.Strophe.Status.ERROR)this.setConnectionStatus(e,s("An error occurred while connecting to the chat server."));else if(e===c.Strophe.Status.CONNECTING)this.setConnectionStatus(e);else if(e===c.Strophe.Status.AUTHENTICATING)this.setConnectionStatus(e);else if(e===c.Strophe.Status.AUTHFAIL)t||(t=s("Your XMPP address and/or password is incorrect. Please try again.")),this.setConnectionStatus(e,t),this.setDisconnectionCause(e,t,!0),this.onDisconnected();else if(e===c.Strophe.Status.CONNFAIL){let r=t;"host-unknown"===t||"remote-connection-failed"==t?r=s("We could not connect to %1$s, is your XMPP address correct?",c.Strophe.getDomainFromJid(this.jid)):"policy-violation"===t?r=s("The XMPP server rejected the connection because of a policy violation"):void 0!==t&&t===c.Strophe?.ErrorCondition?.NO_AUTH_MECH&&(r=s("The XMPP server did not offer a supported authentication mechanism")),this.setConnectionStatus(e,r),this.setDisconnectionCause(e,t)}else e===c.Strophe.Status.DISCONNECTING&&(this.setConnectionStatus(e),this.setDisconnectionCause(e,t))}isType(e){return"websocket"===e.toLowerCase()?this._proto instanceof c.Strophe.Websocket:"bosh"===e.toLowerCase()?c.Strophe.Bosh&&this._proto instanceof c.Strophe.Bosh:void 0}hasResumed(){let{api:e}=l.default;return e.settings.get("connection_options")?.worker||this.isType("bosh")?l.default.state.connfeedback.get("connection_status")===c.Strophe.Status.ATTACHED:!this.do_bind}restoreWorkerSession(){return this.attach(this.onConnectStatusChanged),this.worker_attach_promise=(0,h.getOpenPromise)(),this.worker_attach_promise}}class g extends p{constructor(e,t){super(e,t),this.sent_stanzas=[],this.IQ_stanzas=[],this.IQ_ids=[],this.features=c.Strophe.xmlHtmlNode('<stream:features xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client"><ver xmlns="urn:xmpp:features:rosterver"/><csi xmlns="urn:xmpp:csi:0"/><this xmlns="http://jabber.org/protocol/caps" ver="UwBpfJpEt3IoLYfWma/o/p3FFRo=" hash="sha-1" node="http://prosody.im"/><bind xmlns="urn:ietf:params:xml:ns:xmpp-bind"><required/></bind><sm xmlns=\'urn:xmpp:sm:3\'/><session xmlns="urn:ietf:params:xml:ns:xmpp-session"><optional/></session></stream:features>').firstElementChild,this._proto._processRequest=()=>{},this._proto._disconnect=()=>this._onDisconnectTimeout(),this._proto._onDisconnectTimeout=()=>{},this._proto._connect=()=>{this.connected=!0,this.mock=!0,this.jid="romeo@montague.lit/orchard",this._changeConnectStatus(c.Strophe.Status.BINDREQUIRED)}}get _sasl_mechanism(){return new c.Strophe.SASLSHA256}_processRequest(){}sendIQ(e,t,s){e=e.tree?.()??e,this.IQ_stanzas.push(e);let r=super.sendIQ(e,t,s);return this.IQ_ids.push(r),r}send(e){return e=e.tree?.()??e,this.sent_stanzas.push(e),super.send(e)}async bind(){let{api:e}=l.default;await e.trigger("beforeResourceBinding",{synchronous:!0}),this.authenticated=!0,this._changeConnectStatus(c.Strophe.Status.CONNECTED)}}},"./src/headless/shared/connection/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{generateResource:()=>a,getConnectionServiceURL:()=>d,setStropheLogLevel:()=>l});var r=s("./src/log/index.js"),i=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),o=s("./src/headless/shared/settings/api.js");function a(){return`/converse.js-${Math.floor(0x8546898*Math.random()).toString()}`}function l(){let e=o.settings_api.get("loglevel");i.Strophe.setLogLevel(i.Strophe.LogLevel[e.toUpperCase()]);let t={};t[i.Strophe.LogLevel.DEBUG]="debug",t[i.Strophe.LogLevel.INFO]="info",t[i.Strophe.LogLevel.WARN]="warn",t[i.Strophe.LogLevel.ERROR]="error",t[i.Strophe.LogLevel.FATAL]="fatal",i.Strophe.log=(e,s)=>r.default.log(s,t[e]),i.Strophe.error=e=>r.default.error(e)}function d(){return("WebSocket"in window||"MozWebSocket"in window)&&o.settings_api.get("websocket_url")?o.settings_api.get("websocket_url"):o.settings_api.get("bosh_service_url")?o.settings_api.get("bosh_service_url"):""}},"./src/headless/shared/constants.js":function(e,t,s){"use strict";s.r(t),s.d(t,{ACTIVE:()=>j,ANONYMOUS:()=>u,BOSH_WAIT:()=>i,CHATROOMS_TYPE:()=>A,CHAT_STATES:()=>M,CLOSED:()=>h,COMPOSING:()=>w,CONNECTION_STATUS:()=>$,CONTROLBOX_TYPE:()=>k,CORE_PLUGINS:()=>T,EXTERNAL:()=>m,FAILURE:()=>y,GONE:()=>x,HEADLINES_TYPE:()=>C,INACTIVE:()=>b,KEYCODES:()=>I,LOGIN:()=>f,LOGOUT:()=>p,MARKER_TYPES:()=>O,METADATA_ATTRIBUTES:()=>c,OPENED:()=>g,PAUSED:()=>S,PREBIND:()=>_,PRES_SHOW_VALUES:()=>a,PRES_TYPE_VALUES:()=>l,PRIVATE_CHAT_TYPE:()=>E,STATUS_WEIGHTS:()=>d,SUCCESS:()=>v,VERSION_NAME:()=>o,XFORM_TYPE_MAP:()=>N,XFORM_VALIDATE_TYPE_MAP:()=>R});var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js");let i=59,o="v11.0.1",a=["chat","dnd","away","xa"],l=["available","unavailable","error","probe","subscribe","subscribed","unsubscribe","unsubscribed"],d={offline:6,unavailable:5,xa:4,away:3,dnd:2,chat:1,online:1},c=["og:article:author","og:article:published_time","og:description","og:image","og:image:height","og:image:width","og:site_name","og:title","og:type","og:url","og:video:height","og:video:secure_url","og:video:tag","og:video:type","og:video:url","og:video:width"],u="anonymous",h="closed",m="external",f="login",p="logout",g="opened",_="prebind",v="success",y="failure",b="inactive",j="active",w="composing",S="paused",x="gone",E="chatbox",A="chatroom",C="headline",k="controlbox",$={};$[r.Strophe.Status.ATTACHED]="ATTACHED",$[r.Strophe.Status.AUTHENTICATING]="AUTHENTICATING",$[r.Strophe.Status.AUTHFAIL]="AUTHFAIL",$[r.Strophe.Status.CONNECTED]="CONNECTED",$[r.Strophe.Status.CONNECTING]="CONNECTING",$[r.Strophe.Status.CONNFAIL]="CONNFAIL",$[r.Strophe.Status.DISCONNECTED]="DISCONNECTED",$[r.Strophe.Status.DISCONNECTING]="DISCONNECTING",$[r.Strophe.Status.ERROR]="ERROR",$[r.Strophe.Status.RECONNECTING]="RECONNECTING",$[r.Strophe.Status.REDIRECT]="REDIRECT",r.Strophe.addNamespace("ACTIVITY","http://jabber.org/protocol/activity"),r.Strophe.addNamespace("CARBONS","urn:xmpp:carbons:2"),r.Strophe.addNamespace("CHATSTATES","http://jabber.org/protocol/chatstates"),r.Strophe.addNamespace("CSI","urn:xmpp:csi:0"),r.Strophe.addNamespace("DELAY","urn:xmpp:delay"),r.Strophe.addNamespace("EME","urn:xmpp:eme:0"),r.Strophe.addNamespace("FALLBACK","urn:xmpp:fallback:0"),r.Strophe.addNamespace("FASTEN","urn:xmpp:fasten:0"),r.Strophe.addNamespace("FORWARD","urn:xmpp:forward:0"),r.Strophe.addNamespace("HINTS","urn:xmpp:hints"),r.Strophe.addNamespace("HTTPUPLOAD","urn:xmpp:http:upload:0"),r.Strophe.addNamespace("MAM","urn:xmpp:mam:2"),r.Strophe.addNamespace("MARKERS","urn:xmpp:chat-markers:0"),r.Strophe.addNamespace("MENTIONS","urn:xmpp:mmn:0"),r.Strophe.addNamespace("MESSAGE_CORRECT","urn:xmpp:message-correct:0"),r.Strophe.addNamespace("MODERATE","urn:xmpp:message-moderate:1"),r.Strophe.addNamespace("MODERATE0","urn:xmpp:message-moderate:0"),r.Strophe.addNamespace("NICK","http://jabber.org/protocol/nick"),r.Strophe.addNamespace("OCCUPANTID","urn:xmpp:occupant-id:0"),r.Strophe.addNamespace("OMEMO","eu.siacs.conversations.axolotl"),r.Strophe.addNamespace("OUTOFBAND","jabber:x:oob"),r.Strophe.addNamespace("PUBSUB","http://jabber.org/protocol/pubsub"),r.Strophe.addNamespace("RAI","urn:xmpp:rai:0"),r.Strophe.addNamespace("RECEIPTS","urn:xmpp:receipts"),r.Strophe.addNamespace("REFERENCE","urn:xmpp:reference:0"),r.Strophe.addNamespace("REGISTER","jabber:iq:register"),r.Strophe.addNamespace("RETRACT","urn:xmpp:message-retract:1"),r.Strophe.addNamespace("RETRACT0","urn:xmpp:message-retract:0"),r.Strophe.addNamespace("ROSTERX","http://jabber.org/protocol/rosterx"),r.Strophe.addNamespace("RSM","http://jabber.org/protocol/rsm"),r.Strophe.addNamespace("SID","urn:xmpp:sid:0"),r.Strophe.addNamespace("SPOILER","urn:xmpp:spoiler:0"),r.Strophe.addNamespace("STANZAS","urn:ietf:params:xml:ns:xmpp-stanzas"),r.Strophe.addNamespace("STYLING","urn:xmpp:styling:0"),r.Strophe.addNamespace("VCARD","vcard-temp"),r.Strophe.addNamespace("VCARDUPDATE","vcard-temp:x:update"),r.Strophe.addNamespace("XFORM","jabber:x:data"),r.Strophe.addNamespace("XHTML","http://www.w3.org/1999/xhtml");let T=["converse-adhoc","converse-bookmarks","converse-blocklist","converse-bosh","converse-caps","converse-chat","converse-chatboxes","converse-disco","converse-emoji","converse-headlines","converse-mam","converse-muc","converse-ping","converse-pubsub","converse-roster","converse-smacks","converse-status","converse-vcard"],M=["active","composing","gone","inactive","paused"],O=["displayed","received","acknowledged"],I={TAB:"Tab",ENTER:"Enter",SHIFT:"Shift",CTRL:"Control",ALT:"Alt",ESCAPE:"Escape",LEFT_ARROW:"ArrowLeft",UP_ARROW:"ArrowUp",RIGHT_ARROW:"ArrowRight",DOWN_ARROW:"ArrowDown",FORWARD_SLASH:"Divide",AT:"Alt",META:"Meta"},N={"text-private":"password","text-single":"text",fixed:"label",boolean:"checkbox",hidden:"hidden","jid-multi":"textarea","list-single":"dropdown","list-multi":"dropdown"},R={"xs:anyURI":"url","xs:byte":"number","xs:date":"date","xs:dateTime":"datetime","xs:int":"number","xs:integer":"number","xs:time":"time"}},"./src/headless/shared/errors.js":function(e,t,s){"use strict";s.r(t),s.d(t,{BadRequestError:()=>l,ConflictError:()=>d,FeatureNotImplementedError:()=>c,ForbiddenError:()=>u,GoneError:()=>h,InternalServerError:()=>m,ItemNotFoundError:()=>f,JIDMalformedError:()=>p,MethodNotImplementedError:()=>r,NotAcceptableError:()=>g,NotAllowedError:()=>_,NotAuthorizedError:()=>v,PaymentRequiredError:()=>y,RecipientUnavailableError:()=>b,RedirectError:()=>j,RegistrationRequiredError:()=>w,RemoteServerNotFoundError:()=>S,RemoteServerTimeoutError:()=>x,ResourceConstraintError:()=>E,ServiceUnavailableError:()=>A,StanzaError:()=>o,StanzaParseError:()=>a,SubscriptionRequiredError:()=>C,TimeoutError:()=>i,UndefinedConditionError:()=>k,UnexpectedRequestError:()=>$});class r extends Error{}class i extends Error{constructor(e){super(e),this.retry_event_id=null}}class o extends Error{constructor(e,t,s){super(t.querySelector("text")?.textContent??""),this.name=e,this.message=e,this.type=t.getAttribute("type"),this.el=t,this.extra=s}}class a extends Error{constructor(e,t){super(t),this.name="StanzaParseError",this.stanza=e}}class l extends o{}class d extends o{}class c extends o{}class u extends o{}class h extends o{}class m extends o{}class f extends o{}class p extends o{}class g extends o{}class _ extends o{}class v extends o{}class y extends o{}class b extends o{}class j extends o{}class w extends o{}class S extends o{}class x extends o{}class E extends o{}class A extends o{}class C extends o{}class k extends o{}class $ extends o{}},"./src/headless/shared/i18n.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/sprintf-js/src/sprintf.js");let i={async initialize(){},__:(...e)=>(0,r.sprintf)(...e)}},"./src/headless/shared/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{_converse:()=>l.default,api:()=>a.default,constants:()=>i,errors:()=>o,i18n:()=>d.default,parsers:()=>r});var r=s("./src/headless/shared/parsers.js"),i=s("./src/headless/shared/constants.js"),o=s("./src/headless/shared/errors.js"),a=s("./src/headless/shared/api/index.js"),l=s("./src/headless/shared/_converse.js"),d=s("./src/headless/shared/i18n.js")},"./src/headless/shared/message.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>y});var r=s("./node_modules/dayjs/dayjs.min.js"),i=s.n(r),o=s("./node_modules/sizzle/dist/sizzle.js"),a=s.n(o),l=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),d=s("./node_modules/@converse/skeletor/dist/skeletor.js"),c=s("./src/log/index.js"),u=s("./src/headless/shared/_converse.js"),h=s("./src/headless/shared/api/index.js"),m=s("./src/headless/shared/constants.js"),f=s("./src/headless/shared/color.js"),p=s("./src/headless/shared/model-with-contact.js"),g=s("./src/headless/shared/model-with-vcard.js"),_=s("./src/headless/utils/index.js");class v extends(0,g.default)((0,p.default)((0,f.default)(d.Model))){defaults(){return{msgid:(0,_.getUniqueId)(),time:new Date().toISOString(),is_ephemeral:!1}}constructor(e,t){super(e,t),this.file=null,this.attributes}initialize(){this.lazy_load_vcard=!0,super.initialize(),this.chatbox=this.collection?.chatbox,this.checkValidity()&&(this.get("file")&&this.on("change:put",()=>this.uploadFile()),this.on("change:is_ephemeral",()=>this.setTimerForEphemeralMessage()),this.setTimerForEphemeralMessage())}checkValidity(){return 3!==Object.keys(this.attributes).length||(this.validationError="Empty message",this.safeDestroy(),!1)}safeDestroy(){try{this.destroy()}catch(e){c.default.warn(`safeDestroy: ${e}`)}}setTimerForEphemeralMessage(){this.ephemeral_timer&&clearTimeout(this.ephemeral_timer);let e=this.isEphemeral();e&&(this.ephemeral_timer=setTimeout(()=>this.safeDestroy(),"number"==typeof e?e:1e4))}isEphemeral(){return this.get("is_ephemeral")}isMeCommand(){let e=this.getMessageText();return!!e&&e.startsWith("/me ")}isRetracted(){return this.get("retracted")||"retracted"===this.get("moderated")}isFollowup(){let e=this.collection?.models;if(!e)return!1;let t=e.indexOf(this),s=t?e[t-1]:null;if(null===s)return!1;let r=i()(this.get("time"));return this.get("from")===s.get("from")&&!this.isRetracted()&&!s.isRetracted()&&!this.isMeCommand()&&!s.isMeCommand()&&!!this.get("is_encrypted")==!!s.get("is_encrypted")&&this.get("type")===s.get("type")&&"info"!==this.get("type")&&r.isBefore(i()(s.get("time")).add(10,"minutes"))&&("groupchat"!==this.get("type")||this.get("occupant_id")===s.get("occupant_id"))}mayBeRetracted(){let e="me"===this.get("sender"),t="cancel"!==this.get("error_type");return e&&t&&["all","own"].includes(h.default.settings.get("allow_message_retraction"))}getMessageText(){if(this.get("is_encrypted")){let{__:e}=u.default;return this.get("plaintext")||this.get("body")||e("Undecryptable OMEMO message")}return["groupchat","chat","normal"].includes(this.get("type"))?this.get("body"):this.get("message")}sendSlotRequestStanza(){if(!this.file)return Promise.reject(Error("file is undefined"));let e=(0,l.$iq)({from:u.default.session.get("jid"),to:this.get("slot_request_url"),type:"get"}).c("request",{xmlns:l.Strophe.NS.HTTPUPLOAD,filename:this.file.name,size:this.file.size,"content-type":this.file.type});return h.default.sendIQ(e)}getUploadRequestMetadata(e){return{headers:a()(`slot[xmlns="${l.Strophe.NS.HTTPUPLOAD}"] put header`,e).map(e=>({name:e.getAttribute("name"),value:e.textContent})).filter(e=>["Authorization","Expires"].includes(e.name))}}async getRequestSlotURL(){let e,{__:t}=u.default;try{e=await this.sendSlotRequestStanza()}catch(e){return c.default.error(e),this.save({is_ephemeral:!0,message:t("Sorry, could not determine upload URL."),type:"error"})}let s=a()(`slot[xmlns="${l.Strophe.NS.HTTPUPLOAD}"]`,e).pop();if(!s)return this.save({is_ephemeral:!0,message:t("Sorry, could not determine file upload URL."),type:"error"});this.upload_metadata=this.getUploadRequestMetadata(e),this.save({get:s.querySelector("get").getAttribute("url"),put:s.querySelector("put").getAttribute("url")})}uploadFile(){let e=new XMLHttpRequest;e.onreadystatechange=async t=>{if(e.readyState===XMLHttpRequest.DONE)if(c.default.info("Status: "+e.status),200===e.status||201===e.status){let e={body:this.get("get"),message:this.get("get"),oob_url:this.get("get"),upload:m.SUCCESS};e=await h.default.hook("afterFileUploaded",this,e),this.save(e)}else c.default.error(t),e.onerror(new ProgressEvent(`Response status: ${e.status}`))},e.upload.addEventListener("progress",e=>{e.lengthComputable&&this.set("progress",e.loaded/e.total)},!1),e.onerror=()=>{let t,{__:s}=u.default;t=e.responseText?s('Sorry, could not succesfully upload your file. Your servers response: "%1$s"',e.responseText):s("Sorry, could not succesfully upload your file."),this.save({is_ephemeral:!0,message:t,type:"error",upload:m.FAILURE})},e.open("PUT",this.get("put"),!0),e.setRequestHeader("Content-type",this.file.type),this.upload_metadata.headers?.forEach(t=>e.setRequestHeader(t.name,t.value)),e.send(this.file)}}let y=v},"./src/headless/shared/model-with-contact.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),i=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),o=s("./src/headless/shared/_converse.js"),a=s("./src/headless/shared/api/index.js");function l(e){return class extends e{initialize(){super.initialize(),this.rosterContactAdded=(0,r.getOpenPromise)(),this.onClosedChanged=()=>this.setModelContact(this.get("jid")),this.contact=null}async setModelContact(e){let t;if(this.contact?.get("jid")===e)return;if(this.get("closed")){this.off("change:closed",this.onClosedChanged),this.on("change:closed",this.onClosedChanged);return}let{session:s,state:r}=o.default;i.Strophe.getBareJidFromJid(e)===s.get("bare_jid")?t=r.profile:(t=await a.default.contacts.get(e))||(await a.default.blocklist.get()).get(e)||(t=await a.default.contacts.add({jid:e},!1,!1)),t&&(this.contact=t,this.set("nickname",t.get("nickname")),this.listenTo(this.contact,"vcard:add",e=>{this.trigger("contact:change",e)}),this.listenTo(this.contact,"vcard:change",e=>{this.trigger("contact:change",e)}),this.listenTo(this.contact,"change",e=>{e.nickname&&this.set("nickname",e.nickname),this.trigger("contact:change",e)}),this.listenTo(this.contact,"destroy",()=>{delete this.contact,this.trigger("contact:destroy")}),this.rosterContactAdded.resolve(),this.trigger("contact:add",this.contact))}}}},"./src/headless/shared/model-with-messages.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>w});var r=s("./node_modules/filesize/dist/filesize.esm.js"),i=s("./node_modules/lodash-es/pick.js"),o=s("./node_modules/lodash-es/debounce.js"),a=s("./node_modules/@converse/openpromise/dist/openpromise.js"),l=s("./node_modules/@converse/skeletor/dist/skeletor.js"),d=s("./src/log/index.js"),c=s("./src/headless/utils/storage.js"),u=s("./src/headless/shared/constants.js"),h=s("./src/headless/shared/api/public.js"),m=s("./src/headless/shared/api/index.js"),f=s("./src/headless/plugins/chat/utils.js"),p=s("./src/headless/shared/_converse.js"),g=s("./src/headless/shared/errors.js"),_=s("./src/headless/shared/actions.js"),v=s("./src/headless/plugins/chat/parsers.js");let{Strophe:y,stx:b,u:j}=h.default.env;function w(e){return class extends e{constructor(...e){super(e[0],e[1]),this.disable_mam=!1}async initialize(){super.initialize(),this.initUI(),this.initMessages(),this.initNotifications(),this.ui.on("change:scrolled",()=>this.onScrolledChanged())}initNotifications(){this.notifications=new l.Model}initUI(){this.ui=new l.Model}getDisplayName(){return this.get("jid")}canPostMessages(){return!0}async createMessage(e,t){return e.time=e.time||new Date().toISOString(),await this.messages.fetched,this.messages.create(e,t)}getMessagesCacheKey(){return`converse.messages-${this.get("jid")}-${p.default.session.get("bare_jid")}`}getMessagesCollection(){return new p.default.exports.Messages}getNotificationsText(){let{__:e}=p.default;return this.notifications?.get("chat_state")===u.COMPOSING?e("%1$s is typing",this.getDisplayName()):this.notifications?.get("chat_state")===u.PAUSED?e("%1$s has stopped typing",this.getDisplayName()):this.notifications?.get("chat_state")===u.GONE?e("%1$s has gone away",this.getDisplayName()):""}initMessages(){this.messages=this.getMessagesCollection(),this.messages.fetched=(0,a.getOpenPromise)(),this.messages.chatbox=this,(0,c.initStorage)(this.messages,this.getMessagesCacheKey()),this.listenTo(this.messages,"add",e=>this.onMessageAdded(e)),this.listenTo(this.messages,"change:upload",e=>this.onMessageUploadChanged(e)),this.listenTo(this.messages,"change:correcting",e=>this.onMessageCorrecting(e))}fetchMessages(){if(this.messages.fetched_flag)return void d.default.info(`Not re-fetching messages for ${this.get("jid")}`);this.messages.fetched_flag=!0;let e=this.messages.fetched.resolve;return this.messages.fetch({add:!0,success:()=>{this.afterMessagesFetched(),e()},error:()=>{this.afterMessagesFetched(),e()}}),this.messages.fetched}afterMessagesFetched(){this.pruneHistoryWhenScrolledDown(),m.default.trigger("afterMessagesFetched",this)}async onMessage(e){throw new g.MethodNotImplementedError("onMessage is not implemented")}getUpdatedMessageAttributes(e,t){return t.error_type||"Decryption"!==e.get("error_type")?{is_archived:t.is_archived,time:t.time?t.time:e.get("time")}:Object.assign({},t,{error_condition:void 0,error_message:void 0,error_text:void 0,error_type:void 0,is_archived:t.is_archived,is_ephemeral:!1,is_error:!1})}updateMessage(e,t){let s=this.getUpdatedMessageAttributes(e,t);s&&e.save(s)}async handleCorrection(e){let t;if(!e.replace_id||!e.from)return;if("groupchat"===e.type){let{occupant_id:s,replace_id:r}=e;t=s?({attributes:e})=>e.msgid===r&&e.occupant_id==s:({attributes:t})=>t.msgid===e.replace_id&&t.from===e.from&&null==t.occupant_id}else t=({attributes:t})=>t.msgid===e.replace_id&&t.from===e.from&&null==t.occupant_id;let s=this.messages.models.find(t);if(!s)return e.older_versions={},await this.createMessage(e);let r=s.get("older_versions")||{};return e.time<s.get("time")&&s.get("edited")?(r[e.time]=e.message,s.save({older_versions:r})):(Object.keys(r).length?r[s.get("edited")]=s.getMessageText():r[s.get("time")]=s.getMessageText(),e=Object.assign(e,{older_versions:r}),delete e.msgid,delete e.id,e.time=s.get("time"),s.save(e)),s}queueMessage(e){return this.msg_chain=(this.msg_chain||this.messages.fetched).then(()=>this.onMessage(e)).catch(e=>d.default.error(e)),this.msg_chain}async getOutgoingMessageAttributes(e){throw new g.MethodNotImplementedError("getOutgoingMessageAttributes is not implemented")}async sendMessage(e){if(await h.default.emojis?.initialized_promise,!this.canPostMessages())return void d.default.warn("sendMessage was called but canPostMessages is false");e=await this.getOutgoingMessageAttributes(e);let t=this.messages.findWhere("correcting");if(t){let s=t.get("older_versions")||{};s[t.get("edited")||t.get("time")]=t.getMessageText(),t.save({...["body","is_only_emojis","media_urls","references","is_encrypted"].reduce((t,s)=>(e.hasOwnProperty(s)&&(t[s]=e[s]),t),{}),...{correcting:!1,edited:new Date().toISOString(),message:e.body,ogp_metadata:[],older_versions:s,origin_id:j.getUniqueId(),plaintext:e.is_encrypted?e.message:void 0,received:void 0}})}else this.setEditable(e,new Date().toISOString()),t=await this.createMessage(e);try{let e=await this.createMessageStanza(t);m.default.send(e)}catch(e){t.destroy(),d.default.error(e);return}return m.default.trigger("sendMessage",{chatbox:this,message:t}),t}retractOwnMessage(e){let t=j.getUniqueId();(0,_.sendRetractionMessage)(this.get("jid"),e,t),e.save({retracted:new Date().toISOString(),retracted_id:e.get("origin_id"),retraction_id:t,is_ephemeral:!0,editable:!1})}async sendFiles(e){let{__:t,session:s}=p.default,i=(await m.default.disco.features.get(y.NS.HTTPUPLOAD,s.get("domain"))).pop();if(!i)return void this.createMessage({message:t("Sorry, looks like file upload is not supported by your server."),type:"error",is_ephemeral:!0});let o=i.dataforms.where({FORM_TYPE:{value:y.NS.HTTPUPLOAD,type:"hidden"}}).pop(),a=parseInt((o?.attributes||{})["max-file-size"]?.value,10),l=i?.id;if(!l)return void this.createMessage({message:t("Sorry, looks like file upload is not supported by your server."),type:"error",is_ephemeral:!0});Array.from(e).forEach(async e=>{if(e=await m.default.hook("beforeFileUpload",this,e),!isNaN(a)&&e.size>a){let s=(0,r.filesize)(a),i=Array.isArray(s)?t("The size of your file, %1$s, exceeds the maximum allowed by your server.",e.name):t("The size of your file, %1$s, exceeds the maximum allowed by your server, which is %2$s.",e.name,s);return this.createMessage({message:i,type:"error",is_ephemeral:!0})}{let t=Object.assign(await this.getOutgoingMessageAttributes(),{file:!0,progress:0,slot_request_url:l});this.setEditable(t,new Date().toISOString());let s=await this.createMessage(t,{silent:!0});s.file=e,this.messages.trigger("add",s),s.getRequestSlotURL()}})}setEditable(e,t){!(e.is_headline||j.isEmptyMessage(e))&&"me"===e.sender&&("all"===m.default.settings.get("allow_message_corrections")?e.editable=!(e.file||e.retracted||"oob_url"in e):"last"===m.default.settings.get("allow_message_corrections")&&t>this.get("time_sent")&&(this.set({time_sent:t}),this.messages.findWhere({editable:!0})?.save({editable:!1}),e.editable=!(e.file||e.retracted||"oob_url"in e)))}setChatState(e,t){return void 0!==this.chat_state_timeout&&(clearTimeout(this.chat_state_timeout),delete this.chat_state_timeout),e===u.COMPOSING?this.chat_state_timeout=setTimeout(this.setChatState.bind(this),p.default.TIMEOUTS.PAUSED,u.PAUSED):e===u.PAUSED&&(this.chat_state_timeout=setTimeout(this.setChatState.bind(this),p.default.TIMEOUTS.INACTIVE,u.INACTIVE)),this.set("chat_state",e,t),this}onMessageAdded(e){!m.default.settings.get("prune_messages_above")||"scrolled"!==m.default.settings.get("pruning_behavior")&&this.ui.get("scrolled")||j.isEmptyMessage(e)||this.debouncedPruneHistory()}async onMessageUploadChanged(e){if(e.get("upload")===u.SUCCESS){let t={body:e.get("body"),spoiler_hint:e.get("spoiler_hint"),oob_url:e.get("oob_url")};await this.sendMessage(t),e.destroy()}}onMessageCorrecting(e){e.get("correcting")?this.save({correcting:e.get("id"),draft:j.prefixMentions(e)}):this.save({correcting:void 0,draft:void 0})}onScrolledChanged(){this.ui.get("scrolled")||(this.clearUnreadMsgCounter(),this.pruneHistoryWhenScrolledDown())}pruneHistoryWhenScrolledDown(){m.default.settings.get("prune_messages_above")&&"unscrolled"===m.default.settings.get("pruning_behavior")&&!this.ui.get("scrolled")&&this.debouncedPruneHistory()}shouldShowErrorMessage(e){if(this.getMessageReferencedByError(e)||!e.chat_state)return Promise.resolve(!0)}async clearMessages(){try{await this.messages.clearStore()}catch(e){this.messages.trigger("reset"),d.default.error(e)}finally{this.messages.fetched.resolve()}}editEarlierMessage(){let e,t=this.messages.findLastIndex("correcting");if(t>=0)for(this.messages.at(t).save("correcting",!1);t>0;){t-=1;let s=this.messages.at(t);if(s.get("editable")){e=s;break}}e=e||this.messages.filter({sender:"me"}).reverse().find(e=>e.get("editable")),e?.save("correcting",!0)}editLaterMessage(){let e,t=this.messages.findLastIndex("correcting");if(t>=0)for(this.messages.at(t).save("correcting",!1);t<this.messages.length-1;){t+=1;let s=this.messages.at(t);if(s.get("editable")){(e=s).save("correcting",!0);break}}return e}isChatMessage(e){throw new g.MethodNotImplementedError}getOldestMessage(){for(let e=0;e<this.messages.length;e++){let t=this.messages.at(e);if(this.isChatMessage(t))return t}}getMostRecentMessage(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages.at(e);if(this.isChatMessage(t))return t}}getMessageReferencedByError(e){let t=e.msgid;return t&&this.messages.models.find(e=>[e.get("msgid"),e.get("retraction_id")].includes(t))}findDanglingRetraction(e){if(!e.origin_id||!this.messages.length)return null;if(this.messages.last().get("time")>e.time){let t=Array.from(this.messages.models);return t.reverse(),t.find(({attributes:t})=>t.retracted_id===e.origin_id&&t.from===e.from&&!t.moderated_by)}return null}getDuplicateMessage(e){let t=[...this.getStanzaIdQueryAttrs(e),this.getOriginIdQueryAttrs(e),this.getMessageBodyQueryAttrs(e)].filter(e=>e);return this.messages.models.find(e=>t.find(t=>Object.keys(t).every(s=>e.get(s)===t[s])))}getOriginIdQueryAttrs(e){return e.origin_id&&{origin_id:e.origin_id,from:e.from}}getStanzaIdQueryAttrs(e){return Object.keys(e).filter(e=>e.startsWith("stanza_id ")).map(t=>{let s=t.replace(/^stanza_id /,""),r={};return r[`stanza_id ${s}`]=e[t],r})}getMessageBodyQueryAttrs(e){if(e.msgid){let t={from:e.from,msgid:e.msgid};return!e.is_encrypted&&e.body&&(t.body=e.body),t}}async sendMarkerForMessage(e,t="displayed",s=!1){if(!e||e?.get("type")==="groupchat"||!m.default.settings.get("send_chat_markers").includes(t))return;let r=await m.default.contacts.get(this.get("jid")),i=r?.get("subscription");if(r&&"none"!==i&&"to"!==i&&(e?.get("is_markable")||s)){let s=y.getBareJidFromJid(e.get("from"));(0,_.sendMarker)(s,e.get("msgid"),t,e.get("type"))}}handleUnreadMessage(e){e?.get("body")&&(0,f.isNewMessage)(e)&&("me"===e.get("sender")?this.ui.set("scrolled",!1):this.isHidden()?this.incrementUnreadMsgsCounter(e):this.sendMarkerForMessage(e))}async getErrorAttributesForMessage(e,t){let{__:s}=p.default,r={editable:!1,error:t.error,error_condition:t.error_condition,error_text:t.error_text,error_type:t.error_type,is_error:!0};return t.msgid===e.get("retraction_id")?(r.retraction_id=void 0,t.error||("forbidden"===t.error_condition?r.error=s("You're not allowed to retract your message."):r.error=s("Sorry, an error occurred while trying to retract your message."))):t.error||("forbidden"===t.error_condition?r.error=s("You're not allowed to send a message."):r.error=s("Sorry, an error occurred while trying to send your message.")),await m.default.hook("getErrorAttributesForMessage",t,r)}async handleErrorMessageStanza(e){let t=await (0,v.parseMessage)(e);if(j.isErrorObject(t)){let{stanza:e,message:s}=t;return e&&d.default.error(e),d.default.error(s)}if(!await this.shouldShowErrorMessage(t))return;let s=this.getMessageReferencedByError(t);if(s){let e=await this.getErrorAttributesForMessage(s,t);s.save(e)}else this.createMessage(t)}incrementUnreadMsgsCounter(e){let t={num_unread:this.get("num_unread")+1};0===this.get("num_unread")&&(t.first_unread_id=e.get("id")),this.save(t)}clearUnreadMsgCounter(){this.get("num_unread")>0&&this.sendMarkerForMessage(this.messages.last()),j.safeSave(this,{num_unread:0})}async handleRetraction(e){let t=["retracted","retracted_id","editable"];if(e.retracted){if(e.is_tombstone)return!1;for(let s of this.messages.models)if(s.get("from")===e.from&&(s.get("origin_id")===e.retracted_id||s.get("msgid")===e.retracted_id))return s.save((0,i.default)(e,t)),!0;return e.dangling_retraction=!0,await this.createMessage(e),!0}{let s=this.findDanglingRetraction(e);if(s){let r=Object.assign({dangling_retraction:!1},e,(0,i.default)(s.attributes,t));return delete r.id,s.save(r),!0}}return!1}handleReceipt(e){if("them"===e.sender){if(e.is_valid_receipt_request)(0,_.sendReceiptStanza)(e.from,e.msgid);else if(e.receipt_id){let t=this.messages.findWhere({msgid:e.receipt_id});return t&&!t.get("received")&&t.save({received:new Date().toISOString()}),!0}}return!1}async createMessageStanza(e){let{body:t,edited:s,is_encrypted:r,is_spoiler:i,msgid:o,oob_url:a,origin_id:l,references:d,spoiler_hint:c,type:u}=e.attributes,h=b`
                <message xmlns="jabber:client"
                        from="${"groupchat"===e.get("type")?m.default.connection.get().jid:e.get("from")}"
                        to="${e.get("to")||this.get("jid")}"
                        type="${this.get("message_type")}"
                        id="${s&&j.getUniqueId()||o}">
                    ${t?b`<body>${t}</body>`:""}
                    <active xmlns="${y.NS.CHATSTATES}"/>
                    ${"chat"===u?b`<request xmlns="${y.NS.RECEIPTS}"></request>`:""}
                    ${!r&&a?b`<x xmlns="${y.NS.OUTOFBAND}"><url>${a}</url></x>`:""}
                    ${!r&&i?b`<spoiler xmlns="${y.NS.SPOILER}">${c??""}</spoiler>`:""}
                    ${!r?d?.map(e=>b`<reference xmlns="${y.NS.REFERENCE}"
                                                begin="${e.begin}"
                                                end="${e.end}"
                                                type="${e.type}"
                                                uri="${e.uri}"></reference>`):""}
                    ${s?b`<replace xmlns="${y.NS.MESSAGE_CORRECT}" id="${o}"></replace>`:""}
                    ${l?b`<origin-id xmlns="${y.NS.SID}" id="${l}"></origin-id>`:""}
                </message>`;return(await m.default.hook("createMessageStanza",this,{message:e,stanza:h})).stanza}pruneHistory(){let e=m.default.settings.get("prune_messages_above");if(e&&"number"==typeof e&&this.messages.length>e){let t=this.messages.filter(e=>!j.isEmptyMessage(e));if(t.length>e){for(;t.length>e;)t.shift().destroy();this.trigger("historyPruned")}}}debouncedPruneHistory=(0,o.default)(()=>this.pruneHistory(),500,{maxWait:2e3});isScrolledUp(){return this.ui.get("scrolled")}isHidden(){return this.get("hidden")||this.isScrolledUp()||document.hidden}}}},"./src/headless/shared/model-with-vcard.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/headless/plugins/vcard/utils.js"),i=s("./src/headless/shared/_converse.js");function o(e){return class extends e{constructor(...e){super(...e),this._vcard=null,this.lazy_load_vcard=!1}initialize(){super.initialize(),this.getVCard()}get vcard(){return this._vcard}async getVCard(){let{pluggable:e}=i.default;return e.plugins["converse-vcard"]?.enabled(i.default)?(this._vcard||(this._vcard=await (0,r.getVCardForModel)(this,this.lazy_load_vcard),this.trigger("vcard:add",{vcard:this._vcard})),this._vcard):null}}}},"./src/headless/shared/parsers.js":function(e,t,s){"use strict";s.r(t),s.d(t,{getChatMarker:()=>N,getChatState:()=>M,getCorrectionAttributes:()=>S,getDeprecatedRetractionAttributes:()=>j,getEncryptionAttributes:()=>b,getErrorAttributes:()=>C,getInputType:()=>U,getOpenGraphMetadata:()=>x,getOutOfBandAttributes:()=>A,getReceiptId:()=>$,getReferences:()=>k,getRetractionAttributes:()=>w,getSpoilerAttributes:()=>E,getStanzaIDs:()=>y,isArchived:()=>P,isCarbon:()=>T,isHeadline:()=>R,isMUCPrivateMessage:()=>D,isServerMessage:()=>L,isValidReceiptRequest:()=>O,parseErrorStanza:()=>v,parseXForm:()=>B,throwErrorIfInvalidForward:()=>I});var r=s("./node_modules/sizzle/dist/sizzle.js"),i=s.n(r),o=s("./src/headless/shared/_converse.js"),a=s("./src/headless/shared/api/index.js"),l=s("./node_modules/dayjs/dayjs.min.js"),d=s.n(l),c=s("./src/log/index.js"),u=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),h=s("./src/headless/utils/html.js"),m=s("./src/headless/utils/stanza.js"),f=s("./src/headless/shared/actions.js"),p=s("./src/headless/shared/constants.js"),g=s("./src/headless/shared/errors.js");let{NS:_}=u.Strophe;async function v(e){if(null===e)return null;if(e instanceof Error)return e;if("error"!==e.getAttribute("type"))return null;let t=e.querySelector("error");if(!t)return null;let s=i()(`[xmlns="${u.Strophe.NS.STANZAS}"]`,t),r=s.filter(e=>e.nodeName&&"text"!==e.nodeName).pop()?.nodeName,o=await a.default.hook("parseErrorStanza",e,{});if("bad-request"===r)return new g.BadRequestError(r,t,o);if("conflict"===r)return new g.ConflictError(r,t,o);if("feature-not-implemented"===r)return new g.FeatureNotImplementedError(r,t,o);if("forbidden"===r)return new g.ForbiddenError(r,t,o);if("gone"===r)return new g.GoneError(r,t,o);else if("internal-server-error"===r)return new g.InternalServerError(r,t,o);else if("item-not-found"===r)return new g.ItemNotFoundError(r,t,o);else if("jid-malformed"===r)return new g.JIDMalformedError(r,t,o);else if("not-acceptable"===r)return new g.NotAcceptableError(r,t,o);else if("not-allowed"===r)return new g.NotAllowedError(r,t,o);else if("not-authorized"===r)return new g.NotAuthorizedError(r,t,o);else if("payment-required"===r)return new g.PaymentRequiredError(r,t,o);else if("recipient-unavailable"===r)return new g.RecipientUnavailableError(r,t,o);else if("redirect"===r)return new g.RedirectError(r,t,o);else if("registration-required"===r)return new g.RegistrationRequiredError(r,t,o);else if("remote-server-not-found"===r)return new g.RemoteServerNotFoundError(r,t,o);else if("remote-server-timeout"===r)return new g.RemoteServerTimeoutError(r,t,o);else if("resource-constraint"===r)return new g.ResourceConstraintError(r,t,o);else if("service-unavailable"===r)return new g.ServiceUnavailableError(r,t,o);else if("subscription-required"===r)return new g.SubscriptionRequiredError(r,t,o);else if("undefined-condition"===r)return new g.UndefinedConditionError(r,t,o);else if("unexpected-request"===r)return new g.UnexpectedRequestError(r,t,o);return new g.StanzaError("unknown",t)}function y(e,t){let s=i()(`stanza-id[xmlns="${u.Strophe.NS.SID}"]`,e).reduce((e,t)=>(e[`stanza_id ${t.getAttribute("by")}`]=t.getAttribute("id"),e),{}),r={origin_id:i()(`origin-id[xmlns="${u.Strophe.NS.SID}"]`,e).pop()?.getAttribute("id"),msgid:e.getAttribute("id")||t.getAttribute("id"),...s},a=i()(`message > result[xmlns="${u.Strophe.NS.MAM}"]`,t).pop();if(a){let e=o.default.session.get("bare_jid"),s=t.getAttribute("from")||e;r[`stanza_id ${s}`]=a.getAttribute("id")}return r}function b(e){let t=i()(`encryption[xmlns="${u.Strophe.NS.EME}"]`,e).pop(),s=t?.getAttribute("namespace"),r={};return s?(r.is_encrypted=!0,r.encryption_namespace=s):i()(`encrypted[xmlns="${u.Strophe.NS.OMEMO}"]`,e).pop()&&(r.is_encrypted=!0,r.encryption_namespace=u.Strophe.NS.OMEMO),r}function j(e,t){let s=i()(`> apply-to[xmlns="${u.Strophe.NS.FASTEN}"]`,e).pop();if(s){let e=s.getAttribute("id");if(i()(`> retract[xmlns="${u.Strophe.NS.RETRACT0}"]`,s).pop()){let s=i()(`delay[xmlns="${u.Strophe.NS.DELAY}"]`,t).pop();return{editable:!1,retracted:s?d()(s.getAttribute("stamp")).toISOString():new Date().toISOString(),retracted_id:e}}}return{}}function w(e,t){let s=i()(`> retract[xmlns="${u.Strophe.NS.RETRACT}"]`,e).pop();if(s){let e=i()(`> delay[xmlns="${u.Strophe.NS.DELAY}"]`,t).pop();return{editable:!1,retracted:e?d()(e.getAttribute("stamp")).toISOString():new Date().toISOString(),retracted_id:s.getAttribute("id")}}{let t=i()(`> retracted[xmlns="${u.Strophe.NS.RETRACT}"]`,e).pop()||i()(`> retracted[xmlns="${u.Strophe.NS.RETRACT0}"]`,e).pop();if(t)return{editable:!1,is_tombstone:!0,retracted:t.getAttribute("stamp"),retraction_id:t.getAttribute("id")}}return j(e,t)}function S(e,t){let s=i()(`replace[xmlns="${u.Strophe.NS.MESSAGE_CORRECT}"]`,e).pop();if(s){let e=s.getAttribute("id");if(e){let s=i()(`delay[xmlns="${u.Strophe.NS.DELAY}"]`,t).pop();return{replace_id:e,edited:s?d()(s.getAttribute("stamp")).toISOString():new Date().toISOString()}}}return{}}function x(e){let t=i()(`> apply-to[xmlns="${u.Strophe.NS.FASTEN}"]`,e).pop();if(t){let e=t.getAttribute("id"),s=i()(`> meta[xmlns="${u.Strophe.NS.XHTML}"]`,t);if(s.length){let t=a.default.settings.get("message_limit"),r=s.reduce((e,s)=>{let r=s.getAttribute("property");if(r){let i=(0,h.decodeHTMLEntities)(s.getAttribute("content")||"");t&&"og:description"===r&&i.length>=t&&(i=`${i.slice(0,t)}${(0,h.decodeHTMLEntities)("&#8230;")}`),e[r]=i}return e},{ogp_for_id:e}),i=r["og:url"];if(i?.startsWith("/")&&r["og:site_name"]?.toLowerCase()==="github"&&(r["og:url"]=`https://github.com${i}`),"og:description"in r||"og:title"in r||"og:image"in r)return r}}return{}}function E(e){let t=i()(`spoiler[xmlns="${u.Strophe.NS.SPOILER}"]`,e).pop();return{is_spoiler:!!t,spoiler_hint:t?.textContent}}function A(e){let t=i()(`x[xmlns="${u.Strophe.NS.OUTOFBAND}"]`,e).pop();return t?{oob_url:t.querySelector("url")?.textContent,oob_desc:t.querySelector("desc")?.textContent}:{}}function C(e){if("error"===e.getAttribute("type")){let t=e.querySelector("error"),s=i()(`text[xmlns="${u.Strophe.NS.STANZAS}"]`,t).pop();return{is_error:!0,error_text:s?.textContent,error_type:t.getAttribute("type"),error_condition:t.firstElementChild.nodeName,errors:Array.from(t.children).map(e=>({name:e.nodeName,xmlns:e.getAttribute("xmlns")}))}}return{}}function k(e){return i()(`reference[xmlns="${u.Strophe.NS.REFERENCE}"]`,e).map(t=>{let s=t.getAttribute("anchor"),r=e.querySelector(s?`#${s}`:"body")?.textContent;if(!r)return c.default.warn(`Could not find referenced text for ${t}`),null;let i=Number(t.getAttribute("begin")),o=Number(t.getAttribute("end"));return{begin:i,end:o,type:t.getAttribute("type"),value:r.slice(i,o),uri:t.getAttribute("uri")}}).filter(e=>e)}function $(e){let t=i()(`received[xmlns="${u.Strophe.NS.RECEIPTS}"]`,e).pop();return t?.getAttribute("id")}function T(e){let t=u.Strophe.NS.CARBONS;return i()(`message > received[xmlns="${t}"]`,e).length>0||i()(`message > sent[xmlns="${t}"]`,e).length>0}function M(e){return i()(`
        composing[xmlns="${_.CHATSTATES}"],
        paused[xmlns="${_.CHATSTATES}"],
        inactive[xmlns="${_.CHATSTATES}"],
        active[xmlns="${_.CHATSTATES}"],
        gone[xmlns="${_.CHATSTATES}"]`,e).pop()?.nodeName}function O(e,t){return"me"!==t.sender&&!t.is_carbon&&!t.is_archived&&i()(`request[xmlns="${u.Strophe.NS.RECEIPTS}"]`,e).length}function I(e){if(i()(`message > forwarded[xmlns="${u.Strophe.NS.FORWARD}"]`,e).length){(0,f.rejectMessage)(e,"Forwarded messages not part of an encapsulating protocol are not supported");let t=e.getAttribute("from");throw new g.StanzaParseError(e,`Ignoring unencapsulated forwarded message from ${t}`)}}function N(e){return i()(`
        acknowledged[xmlns="${u.Strophe.NS.MARKERS}"],
        displayed[xmlns="${u.Strophe.NS.MARKERS}"],
        received[xmlns="${u.Strophe.NS.MARKERS}"]`,e).pop()}function R(e){return"headline"===e.getAttribute("type")}async function D(e){let t=u.Strophe.getBareJidFromJid(e.getAttribute("from"));return!!await a.default.rooms.get(t)}function L(e){if(i()(`mentions[xmlns="${u.Strophe.NS.MENTIONS}"]`,e).pop())return!1;let t=e.getAttribute("from");return!("error"===e.getAttribute("type")||!t||t.includes("@"))}function P(e){return!!i()(`message > result[xmlns="${u.Strophe.NS.MAM}"]`,e).pop()}function z(e,t,s){let r=e.getAttribute("var"),o=e.getAttribute("label")||"",a=e.getAttribute("type"),l={readonly:t,desc:e.querySelector("desc")?.textContent};if("list-single"===a||"list-multi"===a){let t=Array.from(e.querySelectorAll(":scope > value")).map(e=>e?.textContent);return{type:a,options:Array.from(e.querySelectorAll(":scope > option")).map(s=>{let r=s.querySelector("value")?.textContent;return{value:r,label:s.getAttribute("label"),selected:t.includes(r),required:!!e.querySelector("required"),...l}}),label:e.getAttribute("label"),var:r,required:!!e.querySelector("required"),...l}}if("fixed"===a)return{text:e.querySelector("value")?.textContent,label:o,type:a,var:r,...l};if("jid-multi"===a)return{type:a,var:r,label:o,value:e.querySelector("value")?.textContent,required:!!e.querySelector("required"),...l};if("boolean"===a){let t=e.querySelector("value")?.textContent;return{type:a,var:r,label:o,checked:"1"===t||"true"===t,...l}}{if("url"===r)return{var:r,label:o,value:e.querySelector("value")?.textContent,...l};if("username"===r)return{var:r,label:o,value:e.querySelector("value")?.textContent,required:!!e.querySelector("required"),type:U(e),...l};if("password"===r)return{var:r,label:o,value:e.querySelector("value")?.textContent,required:!!e.querySelector("required"),...l};if("ocr"!==r)return{label:o,var:r,required:!!e.querySelector("required"),value:e.querySelector("value")?.textContent,type:U(e),...l};let t=e.querySelector("uri"),a=i()('data[cid="'+t.textContent.replace(/^cid:/,"")+'"]',s)[0];return{label:e.getAttribute("label"),var:r,uri:{type:t.getAttribute("type"),data:a?.textContent},required:!!e.querySelector("required"),...l}}}function U(e){let t=p.XFORM_TYPE_MAP[e.getAttribute("type")];if("text"==t){let s=e.getElementsByTagNameNS("http://jabber.org/protocol/xdata-validate","validate");if(1===s.length){let e=s[0].getAttribute("datatype");return p.XFORM_VALIDATE_TYPE_MAP[e]||t}}return t}function B(e){let t=i()(`x[xmlns="${u.Strophe.NS.XFORM}"]`,e);if(t.length>1)throw c.default.error(e),Error("Invalid stanza");if(0===t.length)return null;let s=t[0],r=s.getAttribute("type"),o={type:r,title:s.querySelector("title")?.textContent};if("result"===r){let t=s.querySelector(":scope > reported");if(t){let e=t?Array.from(t.querySelectorAll(":scope > field")):[],r=Array.from(s.querySelectorAll(":scope > item"));return{...o,reported:e.map(m.getAttributes),items:r.map(e=>Array.from(e.querySelectorAll("field")).map(e=>({...(0,m.getAttributes)(e),value:e.querySelector("value")?.textContent??""})))}}return{...o,fields:Array.from(s.querySelectorAll("field")).map(t=>z(t,!0,e))}}if("form"===r)return{...o,instructions:s.querySelector("instructions")?.textContent,fields:Array.from(s.querySelectorAll("field")).map(t=>z(t,!1,e))};throw Error(`Invalid type in XForm response stanza: ${r}`)}},"./src/headless/shared/rsm.js":function(e,t,s){"use strict";s.r(t),s.d(t,{RSM:()=>h,RSM_ATTRIBUTES:()=>u,RSM_TYPES:()=>c});var r=s("./src/headless/utils/object.js");let{Strophe:i,$build:o}=s("./src/headless/shared/api/public.js").default.env;i.addNamespace("RSM","http://jabber.org/protocol/rsm");let a=["after","before","index","max"],l=e=>Number(e),d=e=>e.toString(),c={after:d,before:d,count:l,first:d,index:l,last:d,max:l},u=Object.keys(c);class h{static getQueryParameters(e={}){return a.reduce((t,s)=>(void 0!==e[s]&&(t[s]=e[s]),t),{})}static parseXMLResult(e){let t={};for(var s=0;s<u.length;s++){let o=u[s],a=e.getElementsByTagName(o)[0];(0,r.isUndefined)(a)||null===a||(t[o]=c[o](i.getText(a)),"first"==o&&(t.index=c.index(a.getAttribute("index"))))}return t}constructor(e={}){this.query=h.getQueryParameters(e),this.result=e.xml?h.parseXMLResult(e.xml):{}}toXML(){let e=o("set",{xmlns:i.NS.RSM});return a.reduce((e,t)=>(0,r.isUndefined)(this.query[t])?e:e.c(t).t((this.query[t]||"").toString()).up(),e).tree()}toString(){return i.serialize(this.toXML())}next(e,t){return new h(Object.assign({},this.query,{after:this.result.last,before:t,max:e}))}previous(e,t){return new h(Object.assign({},this.query,{after:t,before:this.result.first,max:e}))}}},"./src/headless/shared/settings/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{settings_api:()=>i});var r=s("./src/headless/shared/settings/utils.js");let i={extend:e=>(0,r.extendAppSettings)(e),get:e=>e?(0,r.getAppSetting)(e):(0,r.getAppSettings)(),set(e,t){(0,r.updateAppSettings)(e,t)},listen:{on(e,t,s){(0,r.registerListener)(e,t,s)},not(e,t){(0,r.unregisterListener)(e,t)}}}},"./src/headless/shared/settings/constants.js":function(e,t,s){"use strict";s.r(t),s.d(t,{DEFAULT_SETTINGS:()=>r});let r={allow_non_roster_messaging:!0,allow_url_history_change:!0,assets_path:"/dist",authentication:"login",auto_login:!1,auto_reconnect:!0,blacklisted_plugins:[],clear_cache_on_logout:!1,connection_options:{},credentials_url:null,disable_effects:!1,discover_connection_methods:!0,embed_3rd_party_media_players:!0,geouri_regex:/https\:\/\/www.openstreetmap.org\/.*#map=[0-9]+\/([\-0-9.]+)\/([\-0-9.]+)\S*/g,geouri_replacement:"https://www.openstreetmap.org/?mlat=$1&mlon=$2#map=18/$1/$2",i18n:void 0,jid:void 0,reuse_scram_keys:!0,keepalive:!0,loglevel:"info",locales:["af","ar","bg","ca","cs","da","de","el","en","eo","es","eu","fa","fi","fr","gl","he","hi","hu","id","it","ja","lt","mn","mr","nb","nl","oc","pl","pt","pt_BR","ro","ru","sv","ta","th","tr","ug","uk","vi","zh_CN","zh_TW"],nickname:void 0,password:void 0,persistent_store:"IndexedDB",rid:void 0,root:window.document,sid:void 0,singleton:!1,strict_plugin_dependencies:!1,stanza_timeout:6e4,view_mode:"fullscreen",websocket_url:void 0,whitelisted_plugins:[]}},"./src/headless/shared/settings/user/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{user_settings_api:()=>i});var r=s("./src/headless/shared/settings/user/utils.js");let i={getModel:()=>(0,r.getUserSettings)(),async get(e,t){let s=await (0,r.getUserSettings)();return void 0===s.get(e)?t:s.get(e)},set(e,t){if(e instanceof Object)return(0,r.updateUserSettings)(e,{promise:!0});{let s={};return s[e]=t,(0,r.updateUserSettings)(s,{promise:!0})}},clear:()=>(0,r.clearUserSettings)()}},"./src/headless/shared/settings/user/utils.js":function(e,t,s){"use strict";let r;s.r(t),s.d(t,{clearUserSettings:()=>h,getUserSettings:()=>c,updateUserSettings:()=>u});var i=s("./src/headless/shared/_converse.js"),o=s("./src/log/index.js"),a=s("./node_modules/@converse/skeletor/dist/skeletor.js"),l=s("./src/headless/utils/storage.js");function d(){let e=i.default.session.get("bare_jid");if(!e){let e="No JID to fetch user settings for";throw o.default.error(e),Error(e)}let t=`converse.user-settings.${e}`;if(r?.get("id")!==t)return r=new a.Model({id:t}),(0,l.initStorage)(r,t),r.fetch({promise:!0})}async function c(){return await d(),r}async function u(e,t){return await d(),r.save(e,t)}async function h(){if(i.default.session.get("bare_jid"))return await d(),r.clear();r=void 0}},"./src/headless/shared/settings/utils.js":function(e,t,s){"use strict";let r;s.r(t),s.d(t,{extendAppSettings:()=>g,getAppSetting:()=>p,getAppSettings:()=>h,getInitSettings:()=>f,initAppSettings:()=>m,registerListener:()=>_,unregisterListener:()=>v,updateAppSettings:()=>y});var i=s("./node_modules/lodash-es/isEqual.js"),o=s("./node_modules/lodash-es/pick.js"),a=s("./node_modules/@converse/skeletor/dist/skeletor.js"),l=s("./src/headless/shared/settings/constants.js"),d=s("./src/headless/utils/object.js");let c={};class u extends(0,a.EventEmitter)(Object){}function h(){return r}function m(e){c=e,r=new u;let t=(0,o.default)(e,Object.keys(l.DEFAULT_SETTINGS));Object.assign(r,l.DEFAULT_SETTINGS,t)}function f(){return c}function p(e){if(Object.keys(l.DEFAULT_SETTINGS).includes(e))return r[e]}function g(e){(0,d.merge)(l.DEFAULT_SETTINGS,e);let t=Object.keys(e).filter(e=>e in l.DEFAULT_SETTINGS),s=(0,o.default)(c,t),i=Object.assign((0,o.default)(e,t),s);(0,d.merge)(r,i)}function _(e,t,s){r.on(e,t,s)}function v(e,t){r.off(e,t)}function y(e,t){let s;if(null==e)return this;e instanceof Object?s=e:"string"==typeof e&&((s={})[e]=t);let o=Object.keys(s).filter(e=>e in l.DEFAULT_SETTINGS),a={};o.forEach(e=>{let t=s[e];(0,i.default)(r[e],t)||(a[e]=t,r[e]=t)}),Object.keys(a).forEach(e=>r.trigger("change:"+e,a[e])),r.trigger("change",a)}},"./src/headless/utils/array.js":function(e,t,s){"use strict";function r(e){return[...new Set(e)]}s.r(t),s.d(t,{unique:()=>r})},"./src/headless/utils/arraybuffer.js":function(e,t,s){"use strict";function r(e,t){let s=new Uint8Array(e.byteLength+t.byteLength);return s.set(new Uint8Array(e),0),s.set(new Uint8Array(t),e.byteLength),s.buffer}function i(e){return Array.prototype.map.call(new Uint8Array(e),e=>("00"+e.toString(16)).slice(-2)).join("")}function o(e){return new TextDecoder("utf-8").decode(e)}function a(e){return new TextEncoder().encode(e).buffer}function l(e){return btoa(new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),""))}function d(e){let t=atob(e),s=t.length,r=new Uint8Array(s);for(let e=0;e<s;e++)r[e]=t.charCodeAt(e);return r.buffer}function c(e){return new Uint8Array(e.match(/[\da-f]{2}/gi).map(e=>parseInt(e,16))).buffer}s.r(t),s.d(t,{appendArrayBuffer:()=>r,arrayBufferToBase64:()=>l,arrayBufferToHex:()=>i,arrayBufferToString:()=>o,base64ToArrayBuffer:()=>d,hexToArrayBuffer:()=>c,stringToArrayBuffer:()=>a})},"./src/headless/utils/color.js":function(e,t,s){"use strict";s.r(t),s.d(t,{colorize:()=>o});var r=s("./node_modules/hsluv/dist/hsluv.mjs");let i=new Map;async function o(e){let t=i.get(e);if(t)return t;let s=Array.from(new Uint8Array(await crypto.subtle.digest("SHA-1",new TextEncoder().encode(e)))),o=(s[0]+256*s[1])/65536*360,a=new r.Hsluv;return a.hsluv_h=o,a.hsluv_s=100,a.hsluv_l=50,a.hsluvToHex(),i.set(e,a.hex),a.hex}},"./src/headless/utils/form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{getCurrentWord:()=>d,getSelectValues:()=>a,isMentionBoundary:()=>c,placeCaretAtEnd:()=>h,replaceCurrentWord:()=>u,webForm2xForm:()=>l});var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js");let i=(e,t)=>`<field var="${e}">${t}</field>`,o=e=>`<value>${r.Strophe.xmlescape(e)}</value>`;function a(e){let t=[],s=e?.options;for(let e=0,r=s.length;e<r;e++){let r=s[e];r.selected&&t.push(r.value||r.text)}return t}function l(e){let t,s=e.getAttribute("name");return s?(t="checkbox"===e.getAttribute("type")?e.checked&&"1"||"0":"TEXTAREA"==e.tagName?e.value.split("\n").filter(e=>e.trim()):"SELECT"==e.tagName?a(e):e.value,(0,r.toStanza)(i(s,Array.isArray(t)?t.map(o):o(t)))):null}function d(e,t,s){t||(t=e.selectionEnd||void 0);let[r]=e.value.slice(0,t).split(/\s/).slice(-1);return s&&([r]=r.split(s).slice(-1)),r}function c(e){return"@"!==e&&RegExp("(\\p{Z}|\\p{P})","u").test(e)}function u(e,t){let s=e.selectionEnd||void 0,r=e.value.slice(0,s).split(/\s/).pop(),i=e.value,o=c(r[0])?r[0]:"";e.value=i.slice(0,s-r.length)+o+`${t} `+i.slice(s);let a=s-r.length+t.length+1;e.selectionEnd=o?a+1:a}function h(e){e!==document.activeElement&&e.focus();let t=2*e.value.length;setTimeout(()=>e.setSelectionRange(t,t),1),e.scrollTop=999999}},"./src/headless/utils/html.js":function(e,t,s){"use strict";s.r(t),s.d(t,{decodeHTMLEntities:()=>u,isElement:()=>o,isTagEqual:()=>function e(t,s){if(t instanceof i.Strophe.Builder)return e(t.tree(),s);if(t instanceof Element)return i.Strophe.isTagEqual(t,s);throw Error("isTagEqual called with value which isn't an element or Strophe.Builder instance")},queryChildren:()=>l,siblingIndex:()=>d,stringToElement:()=>a});var r=s("./node_modules/dompurify/dist/purify.es.mjs"),i=s("./node_modules/strophe.js/dist/strophe.browser.esm.js");function o(e){return e instanceof Element||e instanceof HTMLDocument}function a(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function l(e,t){return Array.from(e.childNodes).filter(e=>e instanceof Element&&e.matches(t))}function d(e){for(var t=0;e=e.previousElementSibling;t++);return t}let c=document.createElement("div");function u(e){return e&&"string"==typeof e&&(c.innerHTML=r.default.sanitize(e),e=c.textContent,c.textContent=""),e}},"./src/headless/utils/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>E,getRandomInt:()=>S,getUniqueId:()=>x,isEmptyMessage:()=>j,prefixMentions:()=>w,setLogLevelFromRoute:()=>b});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/log/index.js"),o=s("./src/headless/utils/array.js"),a=s("./src/headless/utils/arraybuffer.js"),l=s("./src/headless/utils/color.js"),d=s("./src/headless/utils/form.js"),c=s("./src/headless/utils/html.js"),u=s("./src/headless/utils/init.js"),h=s("./src/headless/utils/jid.js"),m=s("./src/headless/utils/object.js"),f=s("./src/headless/utils/promise.js"),p=s("./src/headless/utils/session.js"),g=s("./src/headless/utils/stanza.js"),_=s("./src/headless/utils/storage.js"),v=s("./src/headless/utils/text.js"),y=s("./src/headless/utils/url.js");function b(e){if(location.hash.startsWith("#converse?loglevel=")){e?.preventDefault();let t=location.hash.split("=").pop();Object.keys(i.LEVELS).includes(t)?i.default.setLogLevel(t):i.default.error(`Could not set loglevel of ${t}`)}}function j(e){return e instanceof r.Model&&(e=e.attributes),!e.oob_url&&!e.file&&!(e.is_encrypted&&e.plaintext)&&!e.message&&!e.body}function w(e){let t=e.getMessageText();return(e.get("references")||[]).sort((e,t)=>t.begin-e.begin).forEach(e=>{t=`${t.slice(0,e.begin)}@${t.slice(e.begin)}`}),t}function S(e){return Math.random()*e|0}function x(e){let t=crypto.randomUUID?.()??"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=S(16);return("x"===e?t:3&t|8).toString(16)});return"string"==typeof e||"number"==typeof e?t+":"+e:t}let E=Object.assign({...o,...a,...l,...d,...c,...u,...h,...m,...f,...p,...g,..._,...v,...y,getRandomInt:S,getUniqueId:x,isEmptyMessage:j,onMultipleEvents:function(e=[],t){let s=[];function r(r){s.push(r),e.length===s.length&&(t(s),s=[])}e.forEach(e=>e.object.on(e.event,r))},prefixMentions:w,shouldCreateMessage:function(e){return e.retracted||!j(e)},triggerEvent:function(e,t,s="Event",r=!0,i=!0){let o=document.createEvent(s);o.initEvent(t,r,i),e.dispatchEvent(o)}},{muc:null,mam:null,roster:null})},"./src/headless/utils/init.js":function(e,t,s){"use strict";s.r(t),s.d(t,{attemptNonPreboundSession:()=>T,cleanup:()=>A,initClientConfig:()=>y,initPersistentStorage:()=>j,initPlugins:()=>v,initSession:()=>x,initSessionStorage:()=>b,registerGlobalEventHandlers:()=>E,safeSave:()=>I,savedLoginInfo:()=>M,setUserJID:()=>S});var r=s("./node_modules/@converse/skeletor/src/storage.js"),i=s("./src/headless/shared/_converse.js"),o=s("./node_modules/lodash-es/debounce.js"),a=s("./node_modules/localforage-webextensionstorage-driver/local.js"),l=s("./src/log/index.js"),d=s("./node_modules/localforage-webextensionstorage-driver/sync.js"),c=s("./src/headless/shared/constants.js"),u=s("./node_modules/@converse/skeletor/dist/skeletor.js"),h=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),m=s("./src/headless/utils/storage.js"),f=s("./src/headless/shared/connection/utils.js"),p=s("./src/headless/utils/jid.js"),g=s("./src/headless/utils/session.js"),_=s("./src/headless/utils/object.js");function v(e){e.pluggable.initialized_plugins=[];let t=c.CORE_PLUGINS.concat(e.api.settings.get("whitelisted_plugins"));e.api.settings.get("singleton")&&["converse-bookmarks","converse-controlbox","converse-headline","converse-register"].forEach(t=>e.api.settings.get("blacklisted_plugins").push(t)),e.pluggable.initializePlugins({_converse:e},t,e.api.settings.get("blacklisted_plugins")),e.api.trigger("pluginsInitialized")}async function y(e){let t="converse.client-config",s=new u.Model({id:t,trusted:!0});s.browserStorage=(0,m.createStore)(t,"session"),Object.assign(e,{config:s}),Object.assign(e.state,{config:s}),await new Promise(e=>s.fetch({success:e,error:e})),e.api.trigger("clientConfigInitialized")}async function b(e){await r.default.sessionStorageInitialized,e.storage.session=r.default.localForage.createInstance({name:(0,g.isTestEnv)()?"converse-test-session":"converse-session",description:"sessionStorage instance",driver:["sessionStorageWrapper"]})}function j(e,t,s="persistent"){let{api:i}=e;if("sessionStorage"===i.settings.get("persistent_store")){e.storage[s]=e.storage.session;return}if("BrowserExtLocal"===i.settings.get("persistent_store")){r.default.localForage.defineDriver(a.default).then(()=>r.default.localForage.setDriver("webExtensionLocalStorage")),e.storage[s]=r.default.localForage;return}if("BrowserExtSync"===i.settings.get("persistent_store")){r.default.localForage.defineDriver(d.default).then(()=>r.default.localForage.setDriver("webExtensionSyncStorage")),e.storage[s]=r.default.localForage;return}let o={name:(0,g.isTestEnv)()?"converse-test-persistent":"converse-persistent",storeName:t};"localStorage"===i.settings.get("persistent_store")?(o.description="localStorage instance",o.driver=[r.default.localForage.LOCALSTORAGE]):"IndexedDB"===i.settings.get("persistent_store")&&(o.description="indexedDB instance",o.driver=[r.default.localForage.INDEXEDDB]),e.storage[s]=r.default.localForage.createInstance(o)}function w(e,t){let{api:s,session:r}=e;s.settings.get("authentication")===c.ANONYMOUS||h.Strophe.getResourceFromJid(t)||(t=t.toLowerCase()+(0,f.generateResource)());let i=h.Strophe.getBareJidFromJid(t),o=h.Strophe.getResourceFromJid(t),a=h.Strophe.getDomainFromJid(t);Object.assign(e,{jid:t,bare_jid:i,resource:o,domain:a}),r.save({jid:t,bare_jid:i,resource:o,domain:a,active:!0}),s.connection.get().jid=t}async function S(e){return await x(i.default,e),i.default.api.trigger("setUserJID"),e}async function x(e,t){let s=e.api.settings.get("connection_options").worker,r=h.Strophe.getBareJidFromJid(t).toLowerCase(),i=`converse.session-${r}`;e.session?.get("id")!==i?(j(e,r),e.session.set({id:i}),(0,m.initStorage)(e.session,i,s?"persistent":"session"),await new Promise(t=>e.session.fetch({success:t,error:t})),!s&&e.session.get("active")&&(e.session.clear(),e.session.save({id:i})),w(e,t),window.addEventListener((0,g.getUnloadEvent)(),()=>I(e.session,{active:!1})),e.api.trigger("userSessionInitialized")):w(e,t)}function E(e){e.api.trigger("registeredGlobalEventHandlers")}async function A(e){let{api:t}=e;await t.trigger("cleanup",{synchronous:!0}),e.api.trigger("unregisteredGlobalEventHandlers"),t.connection.get()?.reset(),e.stopListening(),e.off(),e.promises.initialized.isResolved&&t.promises.add("initialized")}async function C(){let e,t=0;for(;!e;){try{e=await function(e=0){return new Promise((0,o.default)(async(e,t)=>{let s=new XMLHttpRequest;s.open("GET",i.default.api.settings.get("credentials_url"),!0),s.setRequestHeader("Accept","application/json, text/javascript"),s.onload=()=>{if(s.status>=200&&s.status<400){let t=JSON.parse(s.responseText);S(t.jid).then(()=>{e({jid:t.jid,password:t.password})})}else t(Error(`${s.status}: ${s.responseText}`))},s.onerror=t,(s=await i.default.api.hook("beforeFetchLoginCredentials",this,s)).send()},e))}(t)}catch(e){l.default.error("Could not fetch login credentials"),l.default.error(e)}t=2e3}return e}async function k(){if(!localStorage.getItem("conversejs-session-jid"))return null;try{let e=await navigator.credentials.get({password:!0});if(e&&"password"==e.type&&(0,p.isValidJID)(e.id))return await S(e.id),{jid:e.id,password:e.password}}catch(e){return l.default.error(e),null}}async function $(){let e=localStorage.getItem("conversejs-session-jid");if(!e)return null;await S(e);let t=(await M(e)).get("scram_keys");return t?{jid:e,password:t}:null}async function T(e,t){let{api:s}=i.default,{credentials:r}=await s.hook("beforeAttemptNonPreboundSession",this,{credentials:e,automatic:t});if(r)return O(r);if(s.settings.get("authentication")===c.LOGIN){let t=i.default.session.get("jid");if(e)return O(e);if(s.settings.get("credentials_url"))return O(await C());if(t&&(s.settings.get("password")||s.connection.get().pass))return O();if(s.settings.get("reuse_scram_keys")){let e=await $();if(e)return O(e)}if(!(0,g.isTestEnv)()&&"credentials"in navigator){let e=await k();if(e)return O(e)}(0,g.isTestEnv)()||l.default.debug("attemptNonPreboundSession: Couldn't find credentials to log in with")}else[c.ANONYMOUS,c.EXTERNAL].includes(s.settings.get("authentication"))&&(!t||s.settings.get("auto_login"))&&O()}async function M(e){let t=`converse.scram-keys-${h.Strophe.getBareJidFromJid(e)}`;if(i.default.state.login_info?.get("id")===t)return i.default.state.login_info;let s=new u.Model({id:t});return i.default.state.login_info=s,(0,m.initStorage)(s,t,"persistent"),await new Promise(e=>s.fetch({success:e,error:e})),s}async function O(e){let{api:t}=i.default,s=i.default.session.get("jid"),r=t.connection.get();if([c.ANONYMOUS,c.EXTERNAL].includes(t.settings.get("authentication"))){if(!s)throw Error("Config Error: when using anonymous login you need to provide the server's domain via the 'jid' option. Either when calling converse.initialize, or when calling _converse.api.user.login.");r.reconnecting||r.reset(),r.connect(s.toLowerCase())}else if(t.settings.get("authentication")===c.LOGIN){let o,a=e?.password??(r?.pass||t.settings.get("password"));if(!a){if(t.settings.get("auto_login"))throw Error("autoLogin: If you use auto_login and authentication='login' then you also need to provide a password.");r.setDisconnectionCause(h.Strophe.Status.AUTHFAIL,void 0,!0),t.connection.disconnect();return}if(r.reconnecting||(r.reset(),r.service=(0,f.getConnectionServiceURL)()),i.default.state.config.get("trusted")&&s&&t.settings.get("reuse_scram_keys")&&!a?.ck){let e=await M(s);o=(t,s)=>{let{scram_keys:i}=r;i&&e.save({scram_keys:i}),r.onConnectStatusChanged(t,s)}}r.connect(s,a,o)}}function I(e,t,s){(0,_.isPersistableModel)(e)?e.save(t,s):e.set(t,s)}},"./src/headless/utils/jid.js":function(e,t,s){"use strict";s.r(t),s.d(t,{getJIDFromURI:()=>c,isOwnJID:()=>u,isSameBareJID:()=>l,isSameDomain:()=>d,isValidJID:()=>o,isValidMUCJID:()=>a});var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),i=s("./src/headless/shared/_converse.js");function o(e){return"string"==typeof e&&!(e.split("/").length-1>1)&&2===e.split("@").filter(e=>!!e).length&&!e.startsWith("@")&&!e.endsWith("@")}function a(e){return!e.startsWith("@")&&!e.endsWith("@")}function l(e,t){return"string"==typeof e&&"string"==typeof t&&r.Strophe.getBareJidFromJid(e).toLowerCase()===r.Strophe.getBareJidFromJid(t).toLowerCase()}function d(e,t){return"string"==typeof e&&"string"==typeof t&&r.Strophe.getDomainFromJid(e).toLowerCase()===r.Strophe.getDomainFromJid(t).toLowerCase()}function c(e){return e.startsWith("xmpp:")&&e.endsWith("?join")?e.replace(/^xmpp:/,"").replace(/\?join$/,""):e}function u(e,t=!1){return t?e===i.default.session.get("full_jid"):r.Strophe.getBareJidFromJid(e)===i.default.session.get("bare_jid")}},"./src/headless/utils/object.js":function(e,t,s){"use strict";function r(e){return"[object Error]"===Object.prototype.toString.call(e)}function i(e){return"function"==typeof e}function o(e){return void 0===e}function a(e){return e instanceof Error}function l(e){return e.browserStorage||e.collection?.browserStorage}s.r(t),s.d(t,{isError:()=>r,isErrorObject:()=>a,isFunction:()=>i,isPersistableModel:()=>l,isUndefined:()=>o,merge:()=>function e(t,s){for(let r in s)Object.prototype.hasOwnProperty.call(s,r)&&"__proto__"!==r&&"constructor"!==r&&(t[r]instanceof Object?e(t[r],s[r]):t[r]=s[r])}})},"./src/headless/utils/parse-helpers.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});let r={},i=(e,t)=>e.replace(RegExp("\\"+t,"ig"),"\\"+t);r.escapeCharacters=e=>t=>e.split("").reduce(i,t),r.escapeRegexString=r.escapeCharacters("[\\^$.?*+(){}|"),r.findFirstMatchInArray=e=>t=>{for(let s=0;s<e.length;s++)if(0===t.localeCompare(e[s],void 0,{sensitivity:"base"}))return e[s];return null};let o=([e,t],s,r)=>{let i=e,{begin:o,end:a}=s,{value:l}=s;return o-=r,a=a-r-1,[i=`${i.slice(0,o)}${l}${i.slice(a+1)}`,[...t,{...s,begin:o,end:a}]]};r.reduceTextFromReferences=(e,t)=>t.reduce(o,[e,[]]);let a=r},"./src/headless/utils/promise.js":function(e,t,s){"use strict";s.r(t),s.d(t,{debounce:()=>o,getOpenPromise:()=>i.getOpenPromise,waitUntil:()=>l});var r=s("./src/log/index.js"),i=s("./node_modules/@converse/openpromise/dist/openpromise.js");function o(e,t){let s;return function(...r){clearTimeout(s),s=setTimeout(()=>{e.apply(this,r)},t)}}function a(e,t){clearTimeout(e),clearInterval(t)}function l(e,t=300,s=3){try{let t=e();if(t)return Promise.resolve(t)}catch(e){return Promise.reject(e)}let o=(0,i.getOpenPromise)(),d=Error(),c=setInterval(function(){try{let t=e();t&&(a(u,c),o.resolve(t))}catch(e){a(u,c),o.reject(e)}},s),u=setTimeout(function(){a(u,c);let e=`Wait until promise timed out: 

${d.stack}`;console.trace(),r.default.error(e),o.reject(Error(e))},t);return o}},"./src/headless/utils/session.js":function(e,t,s){"use strict";s.r(t),s.d(t,{clearSession:()=>p,getUnloadEvent:()=>u,isTestEnv:()=>c,isUniView:()=>d,replacePromise:()=>h,shouldClearCache:()=>m,tearDown:()=>f});var r=s("./src/log/index.js"),i=s("./node_modules/@converse/openpromise/dist/openpromise.js"),o=s("./src/headless/shared/settings/api.js"),a=s("./src/headless/shared/settings/utils.js");let l=o.settings_api;function d(){return["fullscreen","embedded"].includes(l.get("view_mode"))}function c(){return"montague.lit/http-bind"===(0,a.getInitSettings)().bosh_service_url}function u(){return"onpagehide"in window?"pagehide":"onbeforeunload"in window?"beforeunload":"unload"}function h(e,t){let s=e.promises[t];if(!s)throw Error(`Tried to replace non-existing promise: ${t}`);if(s.replace){let r=(0,i.getOpenPromise)();r.replace=s.replace,e.promises[t]=r}else r.default.debug(`Not replacing promise "${t}"`)}function m(e){let{api:t}=e;return!e.state.config.get("trusted")||t.settings.get("clear_cache_on_logout")||c()}async function f(e){let{api:t}=e;return await t.trigger("beforeTearDown",{synchronous:!0}),t.trigger("afterTearDown"),e}function p(e){return m(e)&&(e.api.user.settings.clear(),e.state.login_info?.destroy()),e.initSession(),e.api.trigger("clearSession",{synchronous:!0})}},"./src/headless/utils/stanza.js":function(e,t,s){"use strict";s.r(t),s.d(t,{getAttributes:()=>u,isErrorStanza:()=>l,isForbiddenError:()=>d,isServiceUnavailableError:()=>c,toStanza:()=>o.toStanza});var r=s("./node_modules/sizzle/dist/sizzle.js"),i=s.n(r),o=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),a=s("./src/headless/utils/html.js");function l(e){return!!(0,a.isElement)(e)&&"error"===e.getAttribute("type")}function d(e){return!!(0,a.isElement)(e)&&i()(`error[type="auth"] forbidden[xmlns="${o.Strophe.NS.STANZAS}"]`,e).length>0}function c(e){return!!(0,a.isElement)(e)&&i()(`error[type="cancel"] service-unavailable[xmlns="${o.Strophe.NS.STANZAS}"]`,e).length>0}function u(e){return e.getAttributeNames().reduce((t,s)=>(t[s]=o.Strophe.xmlunescape(e.getAttribute(s)),t),{})}},"./src/headless/utils/storage.js":function(e,t,s){"use strict";s.r(t),s.d(t,{createStore:()=>u,getDefaultStore:()=>d,initStorage:()=>h});var r=s("./node_modules/@converse/skeletor/src/storage.js"),i=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/settings/api.js"),a=s("./src/headless/utils/session.js");let l=o.settings_api;function d(){return i.default.state.config.get("trusted")?"sessionStorage"===l.get("persistent_store")?"session":"persistent":"session"}function c(e){return"persistent"===e&&"IndexedDB"===l.get("persistent_store")}function u(e,t){let s=t||d(),o=i.default.storage[s];if(void 0===o)throw TypeError(`createStore: Could not find store for ${e}`);return new r.default(e,o,c(t))}function h(e,t,s){let r=s||d();if(e.browserStorage=u(t,r),c(r)){let t=()=>e.browserStorage.flush(),s=(0,a.getUnloadEvent)();window.addEventListener(s,t),e.on("destroy",()=>window.removeEventListener(s,t)),e.listenTo(i.default,"beforeLogout",t)}}},"./src/headless/utils/text.js":function(e,t,s){"use strict";function r(e){if(!e)return"";let t=e.codePointAt(0);return String.fromCodePoint(t).toLocaleUpperCase()+e.substring(t>65535?2:1)}function i(e,t){return t.reduce(function(t,s){return e.startsWith(s)&&s.length>t.length?s:t},"")}function o(e){return"string"==typeof e||e instanceof String}s.r(t),s.d(t,{firstCharToUpperCase:()=>r,getLongestSubstring:()=>i,isString:()=>o})},"./src/headless/utils/url.js":function(e,t,s){"use strict";s.r(t),s.d(t,{addMediaURLsOffset:()=>w,checkFileTypes:()=>c,getHeaders:()=>v,getMediaURLs:()=>j,getMediaURLsMetadata:()=>b,getMetadataForURL:()=>y,getURL:()=>d,isAudioURL:()=>m,isEncryptedFileURL:()=>g,isGIFURL:()=>h,isImageURL:()=>p,isURLWithImageExtension:()=>u,isValidURL:()=>l,isVideoURL:()=>f,withinString:()=>_});var r=s("./src/log/index.js"),i=s("./src/headless/shared/settings/api.js");let o=i.settings_api,a={start:/(\b|_)(?:([a-z][a-z0-9.+-]*:\/\/)|xmpp:|mailto:|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g};function l(e){try{if(e.startsWith("www."))return!!d(`http://${e}`);return!!d(e)}catch{return!1}}function d(e){return e instanceof URL?e:e.toLowerCase().startsWith("www.")?d(`http://${e}`):new URL(e)}function c(e,t){let s;try{s=d(t)}catch(e){throw Error(`checkFileTypes: could not parse url ${t}`)}let r=s.pathname.split("/").pop().toLowerCase();return!!e.filter(e=>r.endsWith(e)).length}function u(e){return c([".jpg",".jpeg",".png",".gif",".bmp",".tiff",".svg"],e)}function h(e){return c([".gif"],e)}function m(e,t){return!!t?.get("content-type")?.startsWith("audio")||c([".ogg",".mp3",".m4a"],e)}function f(e,t){return!!t?.get("content-type")?.startsWith("video")||c([".mp4",".webm"],e)}function p(e,t){if(t?.get("content-type")?.startsWith("video"))return!0;let s=o.get("image_urls_regex");return s?.test(e)||u(e)}function g(e){return d(e).href.startsWith("aesgcm://")}function _(e,t,s){let r=(s=s||{}).start||a.start,i=s.end||a.end,o=s.trim||a.trim,l=s.parens||a.parens,d=/[a-z0-9-]=["']?$/i;for(r.lastIndex=0;;){let a=r.exec(e);if(!a)break;let c=a.index;if(s.ignoreHtml){let t=e.slice(Math.max(c-3,0),c);if(t&&d.test(t))continue}let u=c+e.slice(c).search(i),h=e.slice(c,u),m=-1;for(;;){let e=l.exec(h);if(!e)break;m=Math.max(m,e.index+e[0].length)}if((h=m>-1?h.slice(0,m)+h.slice(m).replace(o,""):h.replace(o,"")).length<=a[0].length||s.ignore&&s.ignore.test(h))continue;u=c+h.length;let f=t(h,c,u);if(void 0===f){r.lastIndex=u;continue}e=e.slice(0,c)+String(f)+e.slice(u),r.lastIndex=c+String(f).length}return r.lastIndex=0,e}async function v(e){try{return(await fetch(e,{method:"HEAD"})).headers}catch(t){return console.debug(`Error calling HEAD on url ${e}: ${t}`),null}}async function y(e){let t=i.settings_api.get("fetch_url_headers")?await v(e.url):null;return{...e,is_gif:h(e.url),is_audio:m(e.url,t),is_image:p(e.url,t),is_video:f(e.url,t),is_encrypted:g(e.url)}}async function b(e,t=0){let s=[];if(!e)return{};try{_(e,(e,r,i)=>(e.startsWith("_")&&(e=e.slice(1),r+=1),e.endsWith("_")&&(e=e.slice(0,e.length-1),i-=1),l(e)&&s.push({url:e,start:r+t,end:i+t}),e))}catch(e){r.default.debug(e)}let i=await Promise.all(s.map(y));return i.length?{media_urls:i}:{}}function j(e,t){return e.map(e=>{if(e.start<0||e.start>=t.length)return null;let s=t.substring(e.start,e.end);return{...e,url:s}}).filter(e=>e)}function w(e,t,s=0){return e.map(e=>{let r=e.start-s,i=e.end-s;return r<0||r>=t.length?null:Object.assign({},e,{start:r,end:i,url:t.substring(e.start-s,e.end-s)})}).filter(e=>e)}},"./src/i18n/index.js":function(e,t,s){"use strict";let r;s.r(t),s.d(t,{__:()=>m,i18n:()=>f});var i=s("./node_modules/jed/jed.js"),o=s.n(i),a=s("./src/headless/index.js");let{dayjs:l}=a.converse.env,d="en";function c(e,t){let s;if("en"===e||t(e))return e;let{languages:r}=window.navigator;for(let e=0;e<r.length&&!s;e++)s=function(e,t){if(t(e))return e;{let s=e.split("_")[0];if(s!==e&&t(s))return s}}(r[e].replace("-","_"),t);return s||"en"}async function u(){var e;let t=function(e){let t=e.toLowerCase().replace("_","-");return"ug"===t?"ug-cn":t}(d);if(e=d,!a.api.settings.get("locales").includes(e)||"en"===d)return;let{default:r}=await s("./src/i18n/locales lazy recursive ^\\.\\/.*\\/LC_MESSAGES\\/converse\\.po$")(`./${d}/LC_MESSAGES/converse.po`);return await s("./node_modules/dayjs/locale lazy recursive ^\\.\\/.*\\.js$")(`./${t}.js`),l.locale(c(t,e=>l.locale(e))),new(o())(r)}async function h(){try{let e=a.api.settings.get("i18n"),t=a.api.settings.get("locales");d=c(e,e=>t.includes(e)),r=await u()}catch(e){a.log.fatal(e.message),d="en"}}function m(e,...t){return f.translate(e,t)}let f=Object.assign(a.i18n,{__:m,determineLocale:c,getLocale:function(){return d},initialize:h,translate:function(e,t){if(!r)return o().sprintf.apply(o(),arguments);let s=r.translate(e);return arguments.length>1?s.fetch.apply(s,t):s.fetch()}})},"./src/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d}),s("./src/shared/styles/index.scss");var r=s("./src/i18n/index.js");s("./src/shared/registry.js"),s("./src/shared/components/index.js");var i=s("./src/shared/components/element.js"),o=s("./src/shared/constants.js"),a=s("./src/headless/index.js");s("./src/utils/index.js"),s("./src/plugins/modal/index.js"),s("./src/plugins/adhoc-views/index.js"),s("./src/plugins/bookmark-views/index.js"),s("./src/plugins/chatview/index.js"),s("./src/plugins/controlbox/index.js"),s("./src/plugins/disco-views/index.js"),s("./src/plugins/headlines-view/index.js"),s("./src/plugins/mam-views/index.js"),s("./src/plugins/minimize/index.js"),s("./src/plugins/muc-views/index.js"),s("./src/plugins/notifications/index.js"),s("./src/plugins/profile/index.js"),s("./src/plugins/omemo/index.js"),s("./src/plugins/push/index.js"),s("./src/plugins/register/index.js"),s("./src/plugins/roomslist/index.js"),s("./src/plugins/rootview/index.js"),s("./src/plugins/rosterview/index.js"),s("./src/plugins/singleton/index.js"),s("./src/plugins/dragresize/index.js"),s("./src/plugins/fullscreen/index.js"),a._converse.__=r.i18n.__,Object.assign(a.converse.env,{i18n:r.i18n}),Object.assign(a._converse.env,{i18n:r.i18n}),a._converse.exports.CustomElement=i.CustomElement;let l=a.converse.initialize;a.converse.initialize=function(e,t){return Array.isArray(e.whitelisted_plugins)?e.whitelisted_plugins=e.whitelisted_plugins.concat(o.VIEW_PLUGINS):e.whitelisted_plugins=o.VIEW_PLUGINS,l(e,t)};let d=a.converse},"./src/log/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{LEVELS:()=>r,default:()=>a,isElement:()=>o});let r={debug:0,info:1,warn:2,error:3,fatal:4},i=Object.assign({debug:console?.log?console.log.bind(console):function(){},error:console?.log?console.log.bind(console):function(){},info:console?.log?console.log.bind(console):function(){},warn:console?.log?console.log.bind(console):function(){}},console);function o(e){return e instanceof Element||e instanceof Document}let a={loglevel:"info",setLogLevel(e){if(!["debug","info","warn","error","fatal"].includes(e))throw Error(`Invalid loglevel: ${e}`);this.loglevel=e},log(e,t,s=""){if(r[t]<r[this.loglevel])return;"error"===t||"fatal"===t?s=s||"color: maroon":"debug"===t&&(s=s||"color: green"),e instanceof Error?e=e.stack:o(e)&&(e=e.outerHTML);let a=s?"%c":"";"error"===t?i.error(`${a} ERROR: ${e}`,s):"warn"===t?i.warn(`${a} ${new Date().toISOString()} WARNING: ${e}`,s):"fatal"===t?i.error(`${a} FATAL: ${e}`,s):"debug"===t?i.debug(`${a} ${new Date().toISOString()} DEBUG: ${e}`,s):i.info(`${a} ${new Date().toISOString()} INFO: ${e}`,s)},debug(e,t){this.log(e,"debug",t)},error(e,t){this.log(e,"error",t)},info(e,t){this.log(e,"info",t)},warn(e,t){this.log(e,"warn",t)},fatal(e,t){this.log(e,"fatal",t)}}},"./src/plugins/adhoc-views/adhoc-commands.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./src/headless/index.js");s("./src/shared/autocomplete/index.js");var i=s("./src/plugins/adhoc-views/templates/ad-hoc.js"),o=s("./src/shared/components/element.js"),a=s("./src/i18n/index.js"),l=s("./src/utils/html.js");let{Strophe:d,sizzle:c}=r.converse.env;class u extends o.CustomElement{static get properties(){return{alert:{type:String},alert_type:{type:String},commands:{type:Array},fetching:{type:Boolean},showform:{type:String},view:{type:String}}}constructor(){super(),this.view="choose-service",this.fetching=!1,this.showform="",this.commands=[]}render(){return(0,i.default)(this)}async fetchCommands(e){let t;if(e.preventDefault(),!(e.target instanceof HTMLFormElement)){this.alert_type="danger",this.alert="Form could not be submitted";return}this.fetching=!0,delete this.alert_type,delete this.alert;let s=new FormData(e.target).get("jid").trim();try{t=await r.api.disco.supports(d.NS.ADHOC,s)}catch(e){r.log.error(e)}finally{this.fetching=!1}if(t)try{this.commands=await r.api.adhoc.getCommands(s),this.view="list-commands"}catch(e){r.log.error(e),this.alert_type="danger",this.alert=(0,a.__)("Sorry, an error occurred while looking for commands on that entity."),this.commands=[],r.log.error(e);return}else this.commands=[],this.alert_type="danger",this.alert=(0,a.__)("The specified entity doesn't support ad-hoc commands")}async toggleCommandForm(e){e.preventDefault();let t=e.target.getAttribute("data-command-node"),s=this.commands.filter(e=>e.node===t)[0],{jid:i}=s;if(this.showform===t)this.showform="",this.requestUpdate();else{try{let e=await r.api.adhoc.fetchCommandForm(i,t);Object.assign(s,e)}catch(e){null===e?r.log.error(`Error: timeout while trying to execute command for ${i}`):(r.log.error(`Error while trying to execute command for ${i}`),r.log.error(e)),s.alert=(0,a.__)("An error occurred while trying to fetch the command form"),s.alert_type="danger"}this.showform=t}}executeAction(e){e.preventDefault();let t=e.target,s=t.getAttribute("data-action");["execute","next","prev","complete"].includes(s)?this.runCommand(t.form,s):r.log.error(`Unknown action: ${s}`)}clearCommand(e){delete e.alert,delete e.instructions,delete e.sessionid,delete e.alert_type,delete e.status,e.fields=[],e.actions=[],this.showform=""}async runCommand(e,t){let s=new FormData(e),i=s.get("command_jid").trim(),o=s.get("command_node").trim(),d=this.commands.filter(e=>e.node===o)[0];delete d.alert,this.requestUpdate();let u="prev"===t?[]:c(":input:not([type=button]):not([type=submit])",e).filter(e=>!["command_jid","command_node"].includes(e.getAttribute("name"))).map(l.getNameAndValue).filter(e=>e),{fields:h,status:m,note:f,instructions:p,actions:g}=await r.api.adhoc.runCommand(i,d.sessionid,d.node,t,u);if("error"===m)return d.status=m,d.alert_type="danger",d.alert=(0,a.__)("Sorry, an error occurred while trying to execute the command. See the developer console for details"),this.requestUpdate();"executing"===m?(Object.assign(d,{fields:h,instructions:p,actions:g,status:m}),d.alert=(0,a.__)("Executing"),d.alert_type="primary"):"completed"===m?(this.alert_type="primary",this.alert=(0,a.__)("Completed"),this.note=f,this.clearCommand(d)):(r.log.error(`Unexpected status for ad-hoc command: ${m}`),d.alert=(0,a.__)("Completed"),d.alert_type="primary"),this.requestUpdate()}async cancel(e){e.preventDefault(),this.showform="",this.requestUpdate();let t=new FormData(e.target.form),s=t.get("command_jid").trim(),i=t.get("command_node").trim(),o=this.commands.filter(e=>e.node===i)[0];delete o.alert,this.requestUpdate();let{status:l}=await r.api.adhoc.runCommand(s,o.sessionid,o.node,"cancel",[]);"error"===l?(o.alert_type="danger",o.alert=(0,a.__)("An error occurred while trying to cancel the command. See the developer console for details")):"canceled"===l?(this.alert_type="",this.alert="",this.clearCommand(o)):(r.log.error(`Unexpected status for ad-hoc command: ${l}`),o.alert=(0,a.__)("Error: unexpected result"),o.alert_type="danger"),this.requestUpdate()}}r.api.elements.define("converse-adhoc-commands",u)},"./src/plugins/adhoc-views/index.js":function(e,t,s){"use strict";s.r(t),s("./src/plugins/adhoc-views/adhoc-commands.js");var r=s("./src/headless/index.js");r.converse.plugins.add("converse-adhoc-views",{dependencies:["converse-controlbox","converse-muc"],initialize(){r.api.settings.extend({allow_adhoc_commands:!0})}})},"./src/plugins/adhoc-views/templates/ad-hoc-command-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js"),o=s("./src/utils/html.js");let a={execute:(0,i.__)("Execute"),prev:(0,i.__)("Previous"),next:(0,i.__)("Next"),complete:(0,i.__)("Complete")},l={info:"primary",warn:"secondary",error:"danger"},d=(e,t)=>{let s=(0,i.__)("Cancel");return(0,r.html)`<span><form class="converse-form">${t.alert?(0,r.html)`<div class="alert alert-${t.alert_type}" role="alert">${t.alert}</div>`:""} ${t.note?(0,r.html)`<div class="alert alert-${l[t.note.type||"info"]}" role="alert">${t.note.text}</div>`:""} ${"result"===t.type&&t.title?(0,r.html)`<div class="alert alert-info">${t.title}</div>`:""} ${"form"===t.type&&t.title?(0,r.html)`<h6>${t.title}</h6>`:""}<fieldset><input type="hidden" name="command_node" value="${t.node}"> <input type="hidden" name="command_jid" value="${t.jid}"> ${t.instructions?(0,r.html)`<p class="form-instructions">${t.instructions}</p>`:""} ${"result"===t.type?(0,r.html)`<table class="table"><thead class="thead-light">${t.reported?.map(e=>(0,r.html)`<th scope="col" data-var="${e.var}">${e.label}</th>`)}</thead><tbody>${t.items?.map(e=>(0,r.html)`<tr>${e.map(e=>(0,r.html)`<td data-var="${e.var}">${e.value}</td>`)}</tr>`)}</tbody></table>`:""} ${t.fields?.map(e=>(0,o.xFormField2TemplateResult)(e),{domain:t.jid})??""}</fieldset>${t.actions?.length?(0,r.html)`<fieldset>${t.actions?.map(t=>(0,r.html)`<input data-action="${t}" @click="${t=>e.executeAction(t)}" type="button" class="btn btn-primary" value="${a[t]}">`)} <input type="button" class="btn btn-secondary button-cancel" value="${s}" @click="${t=>e.cancel(t)}"></fieldset>`:""}</form></span>`}},"./src/plugins/adhoc-views/templates/ad-hoc-command.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/plugins/adhoc-views/templates/ad-hoc-command-form.js");let o=(e,t)=>(0,r.html)`<li class="room-item list-group-item"><div class="available-chatroom d-flex flex-row"><a class="open-room available-room w-100" @click="${t=>e.toggleCommandForm(t)}" data-command-node="${t.node}" data-command-jid="${t.jid}" data-command-name="${t.name}" title="${t.name}" href="#">${t.name||t.jid}</a></div>${t.node===e.showform?(0,i.default)(e,t):""}</li>`},"./src/plugins/adhoc-views/templates/ad-hoc.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/plugins/adhoc-views/templates/ad-hoc-command.js"),i=s("./src/i18n/index.js"),o=s("./src/plugins/muc-views/utils.js"),a=s("./node_modules/lit/index.js");let l=e=>{let t=(0,i.__)("On which entity do you want to run commands?"),s=(0,i.__)("Certain XMPP services and entities allow privileged users to execute ad-hoc commands on them."),l=(0,i.__)("Commands found"),d=(0,i.__)("List available commands"),c=(0,i.__)("XMPP Address"),u=(0,i.__)("No commands found");return(0,a.html)`${e.alert?(0,a.html)`<div class="alert alert-${e.alert_type}" role="alert">${e.alert}</div>`:""} ${e.note?(0,a.html)`<p class="form-help">${e.note}</p>`:""}<form class="converse-form" @submit="${e.fetchCommands}"><fieldset><label class="form-label">${t}<p class="form-help">${s}</p><converse-autocomplete .getAutoCompleteList="${o.getAutoCompleteList}" required placeholder="${c}" name="jid"></converse-autocomplete></label></fieldset><fieldset>${e.fetching?(0,a.html)`<converse-spinner></converse-spinner>`:(0,a.html)`<input type="submit" class="btn btn-primary" value="${d}">`}</fieldset>${"list-commands"===e.view?(0,a.html)`<fieldset><ul class="list-group"><li class="list-group-item active">${e.commands.length?l:u}:</li>${e.commands.map(t=>(0,r.default)(e,t))}</ul></fieldset>`:""}</form>`}},"./src/plugins/bookmark-views/components/bookmark-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/plugins/bookmark-views/components/templates/form.js"),i=s("./src/shared/components/element.js"),o=s("./src/headless/index.js");class a extends i.CustomElement{constructor(){super(),this.jid=null}static get properties(){return{jid:{type:String}}}willUpdate(e){let{chatboxes:t,bookmarks:s}=o._converse.state;e.has("jid")&&(this.model=t.get(this.jid),this.bookmark=s.get(this.jid))}render(){return(0,r.default)(this)}onBookmarkFormSubmitted(e){e.preventDefault();let{bookmarks:t}=o._converse.state,s=e.target;t.setBookmark({jid:this.jid,autojoin:s.querySelector('input[name="autojoin"]')?.checked||!1,name:s.querySelector("input[name=name]")?.value,nick:s.querySelector("input[name=nick]")?.value,password:s.querySelector("input[name=password]")?.value}),this.closeBookmarkForm(e)}removeBookmark(e){this.bookmark?.destroy(),this.closeBookmarkForm(e)}closeBookmarkForm(e){e.preventDefault(),this.dispatchEvent(new Event("hide.bs.modal",{bubbles:!0,cancelable:!0}))}}o.api.elements.define("converse-muc-bookmark-form",a);let l=a},"./src/plugins/bookmark-views/components/bookmarks-list.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lodash-es/debounce.js"),i=s("./node_modules/@converse/skeletor/dist/skeletor.js"),o=s("./src/headless/index.js"),a=s("./src/plugins/bookmark-views/components/templates/list.js"),l=s("./src/templates/spinner.js"),d=s("./src/shared/components/element.js");s("./src/plugins/bookmark-views/styles/bookmarks.scss");let{initStorage:c}=o.u;class u extends d.CustomElement{async initialize(){await o.api.waitUntil("bookmarksInitialized");let{bookmarks:e,chatboxes:t}=o._converse.state;this.liveFilter=(0,r.default)(e=>this.model.set({text:e.target.value}),100),this.listenTo(e,"add",()=>this.requestUpdate()),this.listenTo(e,"remove",()=>this.requestUpdate()),this.listenTo(t,"add",()=>this.requestUpdate()),this.listenTo(t,"remove",()=>this.requestUpdate());let s=o._converse.session.get("bare_jid"),a=`converse.bookmarks-list-model-${s}`;this.model=new i.Model({id:a}),c(this.model,a),this.listenTo(this.model,"change",()=>this.requestUpdate()),this.model.fetch({success:()=>this.requestUpdate(),error:()=>this.requestUpdate()})}render(){return o._converse.state.bookmarks&&this.model?(0,a.default)(this):(0,l.default)()}clearFilter(e){e?.stopPropagation?.(),this.model.set("text","")}}o.api.elements.define("converse-bookmarks",u)},"./src/plugins/bookmark-views/components/templates/form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");let o=e=>{let t=e.model.getDisplayName(),s=e.bookmark?.get("nick")??e.model.get("nick"),o=(0,i.__)('Bookmark for "%1$s"',t),a=(0,i.__)("Would you like this groupchat to be automatically joined upon startup?"),l=(0,i.__)("Remove"),d=(0,i.__)("Name"),c=(0,i.__)("What should your nickname for this groupchat be?"),u=(0,i.__)("Password (for a protected groupchat)"),h=(0,i.__)("If the groupchat requires a password to enter, you can save it here. Note this is not intended to be a secure storage."),m=e.bookmark?(0,i.__)("Update"):(0,i.__)("Save");return(0,r.html)`<form class="converse-form chatroom-form" @submit="${t=>e.onBookmarkFormSubmitted(t)}"><legend>${o}</legend><fieldset><label class="form-label" for="converse_muc_bookmark_name">${d}</label> <input class="form-control" type="text" value="${t}" name="name" required="required" id="converse_muc_bookmark_name"></fieldset><fieldset><label class="form-label" for="converse_muc_bookmark_nick">${c}</label> <input class="form-control" type="text" name="nick" value="${s||""}" id="converse_muc_bookmark_nick"></fieldset><fieldset><label for="muc-password" class="form-label">${u}</label><p class="form-help">${h}</p><input type="password" name="password" class="form-control" id="muc-password"></fieldset><fieldset class="form-group form-check"><input class="form-check-input" id="converse_muc_bookmark_autojoin" type="checkbox" ?checked="${e.bookmark?.get("autojoin")}" name="autojoin"> <label class="form-check-label" for="converse_muc_bookmark_autojoin">${a}</label></fieldset><fieldset><input class="btn btn-primary" type="submit" value="${m}"> ${e.bookmark?(0,r.html)`<input class="btn btn-secondary button-remove" type="button" value="${l}" @click="${t=>e.removeBookmark(t)}">`:""}</fieldset></form>`}},"./src/plugins/bookmark-views/components/templates/item.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/i18n/index.js"),i=s("./node_modules/lit/index.js"),o=s("./src/plugins/bookmark-views/utils.js");let a=e=>{let t=e.get("jid"),s=(0,r.__)("Unbookmark this groupchat"),a=(0,r.__)("Click to open this groupchat");return(0,i.html)`<div class="list-item room-item available-chatroom d-flex flex-row" data-room-jid="${t}"><a class="list-item-link open-room w-100" data-room-jid="${t}" title="${a}" @click="${o.openRoomViaEvent}">${e.getDisplayName()}</a> <a class="list-item-action remove-bookmark align-self-center ${e.get("bookmarked")?"button-on":""}" tabindex="0" data-room-jid="${t}" data-bookmark-name="${e.getDisplayName()}" title="${s}" @click="${o.removeBookmarkViaEvent}"><converse-icon class="fa fa-times" size="1em"></converse-icon></a></div>`}},"./src/plugins/bookmark-views/components/templates/list.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/plugins/bookmark-views/components/templates/item.js"),i=s("./src/i18n/index.js"),o=s("./src/headless/index.js"),a=s("./node_modules/lit/index.js");let l=(e,t)=>e.get("name")?.includes(t)||e.get("jid")?.includes(t),d=e=>{let t=(0,i.__)("Filter"),s=e.model.get("text"),{bookmarks:d}=o._converse.state,c=s?d.filter(e=>l(e,s)):d;return(0,a.html)`<form class="converse-form bookmarks-filter"><div class="btn-group w-100"><input .value="${s??""}" @keydown="${t=>e.liveFilter(t)}" class="form-control" placeholder="${t}"><converse-icon size="1em" class="fa fa-times clear-input ${!s?"hidden":""}" @click="${e.clearFilter}"></converse-icon></div></form><div class="list-container list-container--bookmarks"><div class="items-list bookmarks rooms-list">${c.map(e=>(0,r.default)(e))}</div></div>`}},"./src/plugins/bookmark-views/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js");s("./src/plugins/bookmark-views/modals/bookmark-list.js"),s("./src/plugins/bookmark-views/modals/bookmark-form.js");var i=s("./src/plugins/bookmark-views/components/bookmark-form.js"),o=s("./src/plugins/bookmark-views/components/bookmarks-list.js"),a=s("./src/plugins/bookmark-views/mixins.js"),l=s("./src/plugins/bookmark-views/utils.js");s("./src/plugins/bookmark-views/styles/bookmarks.scss"),r.converse.plugins.add("converse-bookmark-views",{dependencies:["converse-chatboxes","converse-muc","converse-muc-views"],initialize(){r.api.settings.extend({hide_open_bookmarks:!0});let e={removeBookmarkViaEvent:l.removeBookmarkViaEvent,MUCBookmarkForm:i.default,BookmarksView:o.default};Object.assign(r._converse,e),Object.assign(r._converse.exports,e),Object.assign(r._converse.exports.ChatRoomView.prototype,a.BookmarkableChatRoomView),r.api.listen.on("chatRoomViewInitialized",e=>e.setBookmarkState())}})},"./src/plugins/bookmark-views/mixins.js":function(e,t,s){"use strict";s.r(t),s.d(t,{BookmarkableChatRoomView:()=>o});var r=s("./src/headless/index.js");let{u:i}=r.converse.env,o={setBookmarkState(){let{bookmarks:e}=r._converse.state;e&&(e.where({jid:this.model.get("jid")}).length?this.model.save("bookmarked",!0):this.model.save("bookmarked",!1))},renderBookmarkForm(){this.bookmark_form||(this.bookmark_form=new r._converse.state.MUCBookmarkForm({model:this.model,chatroomview:this}),this.querySelector(".chatroom-body").insertAdjacentElement("beforeend",this.bookmark_form.el)),i.showElement(this.bookmark_form.el)},showBookmarkModal(e){e?.preventDefault();let t=this.model.get("jid");r.api.modal.show("converse-bookmark-form-modal",{jid:t},e)}}},"./src/plugins/bookmark-views/modals/bookmark-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js");s("./src/plugins/bookmark-views/components/bookmark-form.js");var o=s("./src/plugins/modal/modal.js"),a=s("./src/i18n/index.js");class l extends o.default{constructor(e){super(e),this.jid=null}renderModal(){return(0,r.html)`<converse-muc-bookmark-form class="muc-form-container" jid="${this.jid}"></converse-muc-bookmark-form>`}getModalTitle(){return(0,a.__)("Bookmark")}}i.api.elements.define("converse-bookmark-form-modal",l)},"./src/plugins/bookmark-views/modals/bookmark-list.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/plugins/modal/modal.js"),o=s("./node_modules/lit/index.js"),a=s("./src/i18n/index.js");s("./src/plugins/bookmark-views/components/bookmarks-list.js");class l extends i.default{renderModal(){return(0,o.html)`<converse-bookmarks></converse-bookmarks>`}getModalTitle(){return(0,a.__)("Bookmarks")}}r.api.elements.define("converse-bookmark-list-modal",l)},"./src/plugins/bookmark-views/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{openRoomViaEvent:()=>a,removeBookmarkViaEvent:()=>o});var r=s("./src/headless/index.js"),i=s("./src/i18n/index.js");async function o(e){e.preventDefault();let t=e.currentTarget,s=t.getAttribute("data-bookmark-name"),o=t.getAttribute("data-room-jid");await r.api.confirm((0,i.__)('Are you sure you want to remove the bookmark "%1$s"?',s))&&r._converse.state.bookmarks.where({jid:o}).forEach(e=>e.destroy())}function a(e){e.preventDefault();let{Strophe:t}=r.converse.env,s=e.currentTarget,i=s.textContent,o=s.getAttribute("data-room-jid"),a={name:i||t.unescapeNode(t.getNodeFromJid(o))||o};r.api.rooms.open(o,a,!0)}},"./src/plugins/chatboxviews/container.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=class{constructor(){this.views={},this.el=null}add(e,t){this.views[e]=t}get(e){return this.views[e]}xget(e){return this.keys().filter(t=>t!==e).reduce((e,t)=>(e[t]=this.views[t],e),{})}getAll(){return Object.values(this.views)}keys(){return Object.keys(this.views)}remove(e){delete this.views[e]}map(e){return Object.values(this.views).map(e)}forEach(e){return Object.values(this.views).forEach(e)}filter(e){return Object.values(this.views).filter(e)}closeAllChatBoxes(){return Promise.all(Object.values(this.views).map(e=>e.close({name:"closeAllChatBoxes"})))}}},"./src/plugins/chatboxviews/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js");s("./src/plugins/chatboxviews/view.js");var i=s("./src/plugins/chatboxviews/container.js"),o=s("./src/plugins/chatboxviews/utils.js");s("./src/plugins/chatboxviews/styles/chats.scss"),r.converse.plugins.add("converse-chatboxviews",{dependencies:["converse-chatboxes","converse-vcard"],initialize(){r.api.promises.add(["chatBoxViewsInitialized"]),r.api.settings.extend({animate:!0});let e=new i.default;Object.assign(r._converse,{chatboxviews:e}),Object.assign(r._converse.state,{chatboxviews:e}),r.api.listen.on("chatBoxesInitialized",()=>{r._converse.state.chatboxes.on("destroy",t=>e.remove(t.get("jid")))}),r.api.listen.on("cleanup",()=>Object.assign(r._converse,{chatboxviews:null})),r.api.listen.on("cleanup",()=>delete r._converse.state.chatboxviews),r.api.listen.on("clearSession",()=>e.closeAllChatBoxes()),r.api.listen.on("chatBoxViewsInitialized",o.calculateViewportHeightUnit),window.addEventListener("resize",o.calculateViewportHeightUnit),Object.assign(r.converse,{insertInto(t){let s=e.el;if(s&&!t.contains(s))t.insertAdjacentElement("afterbegin",s);else if(!s)throw Error("Cannot insert non-existing #conversejs element into the DOM")}})}})},"./src/plugins/chatboxviews/templates/chats.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/repeat.js"),o=s("./src/headless/index.js"),a=s("./src/shared/chat/utils.js");let{CONTROLBOX_TYPE:l,CHATROOMS_TYPE:d,HEADLINES_TYPE:c,CONNECTION_STATUS:u}=o.constants;function h(e){let t="overlayed"===o.api.settings.get("view_mode")&&e.get("hidden");return e.get("type")===l||!e.get("hidden")&&!e.get("closed")&&!t}let m=()=>{let{chatboxes:e,connfeedback:t}=o._converse.state,s="overlayed"===o.api.settings.get("view_mode"),m=(0,a.isMobileViewport)(),f=o.api.connection.get(),p=!f?.connected||!f?.authenticated||f?.disconnecting,g=["CONNECTED","CONNECTING","AUTHENTICATING","RECONNECTING"].includes(u[t.get("connection_status")]);return(0,r.html)`${!p&&s?(0,r.html)`<converse-minimized-chats class="col-auto"></converse-minimized-chats>`:""} ${(0,i.repeat)(e.filter(h),e=>e.get("jid"),e=>{let t=e.get("width"),i=!m&&s&&t?`width: ${t}px`:r.nothing;return e.get("type")===l?s&&e.get("closed")?(0,r.html)`<converse-controlbox-toggle class="col-auto"></converse-controlbox-toggle>`:(0,r.html)`<converse-controlbox id="controlbox" class="col-auto chatbox ${p&&!g?"logged-out":""}" style="${i}"></converse-controlbox>`:e.get("type")===d?(0,r.html)`<converse-muc jid="${e.get("jid")}" class="col-auto chatbox chatroom" style="${i}"></converse-muc>`:e.get("type")===c?(0,r.html)`<converse-headlines jid="${e.get("jid")}" class="col-auto chatbox headlines" style="${i}"></converse-headlines>`:(0,r.html)`<converse-chat jid="${e.get("jid")}" class="col-auto chatbox" style="${i}"></converse-chat>`})}`}},"./src/plugins/chatboxviews/utils.js":function(e,t,s){"use strict";function r(){let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}s.r(t),s.d(t,{calculateViewportHeightUnit:()=>r})},"./src/plugins/chatboxviews/view.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/plugins/chatboxviews/templates/chats.js");class a extends i.CustomElement{initialize(){this.model=r._converse.state.chatboxes,this.listenTo(this.model,"add",()=>this.requestUpdate()),this.listenTo(this.model,"change:closed",()=>this.requestUpdate()),this.listenTo(this.model,"change:hidden",()=>this.requestUpdate()),this.listenTo(this.model,"change:jid",()=>this.requestUpdate()),this.listenTo(this.model,"destroy",()=>this.requestUpdate()),this.listenTo(r._converse,"connected",()=>this.requestUpdate()),this.listenTo(r._converse,"reconnected",()=>this.requestUpdate()),this.listenTo(r._converse,"disconnected",()=>this.requestUpdate());let e=r.api.settings.get();this.listenTo(e,"change:view_mode",()=>this.requestUpdate()),this.listenTo(e,"change:singleton",()=>this.requestUpdate()),document.querySelector("body").classList.add(`converse-${r.api.settings.get("view_mode")}`),r.api.trigger("chatBoxViewsInitialized")}render(){return(0,o.default)()}}r.api.elements.define("converse-chats",a)},"./src/plugins/chatview/bottom-panel.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/plugins/chatview/templates/bottom-panel.js"),a=s("./src/plugins/chatview/utils.js");s("./src/plugins/chatview/message-form.js"),s("./src/plugins/chatview/styles/chat-bottom-panel.scss");class l extends i.CustomElement{constructor(){super(),this.model=null}static get properties(){return{model:{type:Object}}}async connectedCallback(){super.connectedCallback(),await this.initialize(),this.requestUpdate()}async initialize(){await this.model.initialized,this.listenTo(this.model,"change:num_unread",()=>this.requestUpdate()),this.listenTo(this.model,"emoji-picker-autocomplete",this.autocompleteInPicker),this.addEventListener("emojipickerblur",()=>this.querySelector(".chat-textarea").focus())}render(){return this.model?(0,o.default)({model:this.model,viewUnreadMessages:e=>this.viewUnreadMessages(e)}):""}viewUnreadMessages(e){e?.preventDefault?.(),this.model.ui.set({scrolled:!1})}onDragOver(e){e.preventDefault()}clearMessages(e){e?.preventDefault?.(),(0,a.clearMessages)(this.model)}async autocompleteInPicker(e){let{target:t,value:s}=e;await r.api.emojis.initialize();let i=this.querySelector("converse-emoji-picker");if(i){i.state.set({ac_position:t.selectionStart,autocompleting:s,query:s});let e=this.querySelector("converse-emoji-dropdown");e?.dropdown.show()}}}r.api.elements.define("converse-chat-bottom-panel",l)},"./src/plugins/chatview/chat.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/headless/index.js");s("./src/plugins/chatview/heading.js"),s("./src/plugins/chatview/bottom-panel.js");var i=s("./src/shared/chat/baseview.js"),o=s("./src/i18n/index.js"),a=s("./src/plugins/dragresize/mixin.js"),l=s("./src/plugins/chatview/templates/chat.js");let{ACTIVE:d}=r.constants;class c extends(0,a.default)(i.default){length=200;async initialize(){let{chatboxviews:e,chatboxes:t}=r._converse.state;e.add(this.jid,this),this.model=t.get(this.jid),this.listenTo(this.model,"change:requesting",()=>this.requestUpdate()),this.listenTo(this.model,"change:hidden",()=>!this.model.get("hidden")&&this.afterShown()),this.listenTo(this.model,"change:show_help_messages",()=>this.requestUpdate()),this.listenTo(this.model,"contact:add",()=>this.requestUpdate()),this.listenTo(this.model,"contact:change",()=>this.requestUpdate()),this.listenTo(this.model,"contact:destroy",()=>this.requestUpdate()),document.addEventListener("visibilitychange",()=>this.onWindowStateChanged()),await this.model.messages.fetched,this.model.get("hidden")||this.afterShown(),r.api.trigger("chatBoxViewInitialized",this)}render(){return(0,l.default)(this)}getHelpMessages(){return[`<strong>/clear</strong>: ${(0,o.__)("Remove messages")}`,`<strong>/close</strong>: ${(0,o.__)("Close this chat")}`,`<strong>/me</strong>: ${(0,o.__)("Write in the third person")}`,`<strong>/help</strong>: ${(0,o.__)("Show this menu")}`]}afterShown(){this.model.setChatState(d),this.model.clearUnreadMsgCounter(),this.maybeFocus()}}r.api.elements.define("converse-chat",c)},"./src/plugins/chatview/heading.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/i18n/index.js"),a=s("./src/plugins/chatview/templates/chat-head.js");s("./src/shared/modals/user-details.js"),s("./src/plugins/chatview/styles/chat-head.scss");let{Strophe:l}=r.converse.env;class d extends i.CustomElement{constructor(){super(),this.jid=null}static get properties(){return{jid:{type:String}}}initialize(){let{chatboxes:e}=r._converse.state;this.model=e.get(this.jid),this.listenTo(this.model,"change:status",()=>this.requestUpdate()),this.listenTo(this.model,"vcard:add",()=>this.requestUpdate()),this.listenTo(this.model,"vcard:change",()=>this.requestUpdate()),this.model.contact&&this.listenTo(this.model.contact,"destroy",()=>this.requestUpdate()),this.model.rosterContactAdded?.then(()=>{this.listenTo(this.model.contact,"change:nickname",()=>this.requestUpdate()),this.requestUpdate()}),this.requestUpdate()}render(){return(0,a.default)(this)}showUserDetailsModal(e){e.preventDefault(),this.model?.contact instanceof r._converse.exports.Profile?r.api.modal.show("converse-profile-modal",{model:this.model},e):r.api.modal.show("converse-user-details-modal",{model:this.model},e)}close(e){e.preventDefault(),this.model.close()}async getHeadingButtons(){let e=[{a_class:"show-user-details-modal",handler:e=>this.showUserDetailsModal(e),i18n_text:(0,o.__)("Details"),i18n_title:(0,o.__)("See more information about this person"),icon_class:"fa-id-card",name:"details",standalone:!1}],t=r._converse.session.get("domain");t&&await r.api.disco.supports(l.NS.BLOCKING,t)&&((await r.api.blocklist.get()).get(this.model.get("jid"))?e.push({a_class:"unblock-user",handler:async e=>{e.preventDefault(),await r.api.confirm((0,o.__)("Unblock user"),[(0,o.__)("Are you sure you want to unblock this user?")])&&r.api.blocklist.remove(this.model.get("jid"))},i18n_text:(0,o.__)("Unblock this user"),i18n_title:(0,o.__)("Allow this user to send you messages"),icon_class:"fa-check",name:"unblock",standalone:!1}):e.push({a_class:"block-user",handler:async e=>{if(e.preventDefault(),await r.api.confirm((0,o.__)("Block user"),[(0,o.__)("Are you sure you want to prevent %1$s from contacting you further?",this.model.getDisplayName())])){let e=this.model.get("jid");r.api.blocklist.add(e),r.api.contacts.remove(e,!0),this.model.close()}},i18n_text:(0,o.__)("Block this user"),i18n_title:(0,o.__)("Prevent this user from sending you any further messages"),icon_class:"fa-trash",name:"block",standalone:!1})),r.api.settings.get("singleton")||e.push({a_class:"close-chatbox-button",handler:e=>this.close(e),i18n_text:(0,o.__)("Close"),i18n_title:(0,o.__)("Close and end this conversation"),icon_class:"fa-times",name:"close",standalone:"overlayed"===r.api.settings.get("view_mode")});let{chatboxviews:s}=r._converse.state,i=s.get(this.getAttribute("jid"));return i?r._converse.api.hook("getHeadingButtons",i,e):e}}r.api.elements.define("converse-chat-heading",d)},"./src/plugins/chatview/index.js":function(e,t,s){"use strict";s.r(t),s("./src/plugins/chatboxviews/index.js"),s("./src/shared/chat/chat-content.js"),s("./src/shared/chat/help-messages.js"),s("./src/shared/chat/toolbar.js");var r=s("./src/plugins/chatview/chat.js"),i=s("./src/headless/index.js"),o=s("./src/plugins/chatview/utils.js");s("./src/plugins/chatview/styles/index.scss");let{Strophe:a}=i.converse.env;i.converse.plugins.add("converse-chatview",{dependencies:["converse-dragresize","converse-chatboxviews","converse-chat","converse-disco","converse-modal"],initialize(){i.api.settings.extend({fetch_url_headers:!1,allowed_audio_domains:null,allowed_image_domains:null,allowed_video_domains:null,auto_focus:!0,debounced_content_rendering:!0,filter_url_query_params:null,image_urls_regex:null,message_limit:0,muc_hats:["xep317"],render_media:!0,show_message_avatar:!0,show_retraction_warning:!0,show_send_button:!0,show_toolbar:!0,time_format:"HH:mm",use_system_emojis:!0,visible_toolbar_buttons:{call:!1,clear:!0,emoji:!0,spoiler:!1}});let e={ChatBoxView:r.default,ChatView:r.default};Object.assign(i._converse,e),Object.assign(i._converse.exports,e),i.api.listen.on("connected",()=>i.api.disco.own.features.add(a.NS.SPOILER)),i.api.listen.on("chatBoxClosed",e=>(0,o.clearHistory)(e.get("jid")))}})},"./src/plugins/chatview/message-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./src/headless/index.js"),i=s("./src/log/index.js"),o=s("./src/i18n/index.js"),a=s("./src/shared/components/element.js"),l=s("./src/plugins/chatview/templates/message-form.js"),d=s("./src/plugins/chatview/utils.js");let{ACTIVE:c,COMPOSING:u}=r.constants;class h extends a.CustomElement{static get properties(){return{model:{type:Object}}}constructor(){super(),this.model=null}async initialize(){await this.model.initialized,this.listenTo(this.model,"change:composing_spoiler",()=>this.requestUpdate()),this.listenTo(this.model,"change:draft",()=>this.requestUpdate()),this.listenTo(this.model,"change:hidden",()=>{if(this.model.get("hidden")){let e=this.querySelector(".spoiler-hint")?.value,t=this.querySelector(".chat-textarea")?.value;r.u.safeSave(this.model,{draft:t,draft_hint:e})}}),this.handleEmojiSelection=({detail:e})=>{this.model.get("jid")===e.jid&&this.insertIntoTextArea(e.value,e.autocompleting,e.ac_position)},document.addEventListener("emojiSelected",this.handleEmojiSelection),this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("emojiSelected",this.handleEmojiSelection)}render(){return(0,l.default)(this)}insertIntoTextArea(e,t=!1,s,i=" "){let o=this.querySelector(".chat-textarea");if(t)s&&"string"==typeof t?o.value=o.value.replace(RegExp(t,"g"),(r,o)=>o==s-t.length?e+i:r):o.value=e;else{let t=o.value;t&&t[t.length-1]!==i&&(t+=i),o.value=t+e+i}let a=new Event("change",{bubbles:!1,cancelable:!0});o.dispatchEvent(a),r.u.placeCaretAtEnd(o)}onEscapePressed(e){let t=this.model.messages.findLastIndex("correcting"),s=t>=0?this.model.messages.at(t):null;s&&(e.preventDefault(),s.save("correcting",!1))}onPaste(e){if(0!==e.clipboardData.files.length){e.stopPropagation(),e.preventDefault(),this.model.sendFiles(Array.from(e.clipboardData.files));return}let t=this.querySelector(".chat-textarea");if(!t)return void i.default.error("onPaste: could not find textarea to paste in to!");e.preventDefault(),e.stopPropagation();let s=t.value??"",r=e.clipboardData.getData("text/plain"),o=t.selectionStart,a=s.substring(0,o),l=s.substring(t.selectionEnd),d=a.endsWith(" ")||0===a.length?"":" ",c=l.startsWith(" ")||0===l.length?"":" ";this.model.save({draft:`${a}${d}${r}${c}${l}`});let u=a.length+d.length+r.length+c.length;setTimeout(()=>t.setSelectionRange(u,u),0)}onDrop(e){0!=e.dataTransfer.files.length&&(e.preventDefault(),this.model.sendFiles(e.dataTransfer.files))}onKeyUp(e){this.model.trigger("event:keyup",{ev:e})}onKeyDown(e){let{keycodes:t}=r.converse;if(!(e.ctrlKey||e.shiftKey&&e.key===t.ENTER||[t.SHIFT,t.META,t.ESCAPE,t.ALT].includes(e.key))){if(!e.shiftKey&&!e.altKey&&!e.metaKey){let t=e.target;if(e.key===r.converse.keycodes.TAB){let s=r.u.getCurrentWord(t,null,/(:.*?:)/g);s.startsWith(":")&&(e.preventDefault(),e.stopPropagation(),this.model.trigger("emoji-picker-autocomplete",{target:t,value:s}))}else if(e.key===r.converse.keycodes.FORWARD_SLASH)return;else if(e.key===r.converse.keycodes.ESCAPE)return this.onEscapePressed(e);else if(e.key===r.converse.keycodes.ENTER)return this.onFormSubmitted(e);else if(e.key!==r.converse.keycodes.UP_ARROW||t.selectionEnd){if(e.key===r.converse.keycodes.DOWN_ARROW&&t.selectionEnd===t.value.length&&this.model.get("correcting"))return this.model.editLaterMessage()}else if(!this.querySelector(".chat-textarea").value||this.model.get("correcting"))return this.model.editEarlierMessage()}this.model.get("chat_state")!==u&&this.model.setChatState(u)}}async onFormSubmitted(e){e?.preventDefault?.();let{chatboxviews:t}=r._converse.state,s=this.querySelector(".chat-textarea"),i=s.value.trim();if(r.api.settings.get("message_limit")&&i.length>r.api.settings.get("message_limit")||!i.replace(/\s/g,"").length)return;if(!r.api.connection.get().authenticated){let e=(0,o.__)("Sorry, the connection has been lost, and your message could not be sent");r.api.alert("error",(0,o.__)("Error"),e),r.api.connection.reconnect();return}let a,l={};this.model.get("composing_spoiler")&&(a=(l=this.querySelector("form.chat-message-form input.spoiler-hint")).value),r.u.addClass("disabled",s),s.setAttribute("disabled","disabled"),this.querySelector("converse-emoji-dropdown")?.dropdown.hide();let u=await (0,d.parseMessageForCommands)(this.model,i),h=u?null:await this.model.sendMessage({body:i,spoiler_hint:a});(u||h)&&(l.value="",s.value="",s.style.height="auto",this.model.save({draft:""})),"overlayed"===r.api.settings.get("view_mode")&&(t.get(this.model.get("jid")).querySelector(".chat-content__messages").parentElement.style.display="none"),s.removeAttribute("disabled"),r.u.removeClass("disabled",s),"overlayed"===r.api.settings.get("view_mode")&&(t.get(this.model.get("jid")).querySelector(".chat-content__messages").parentElement.style.display=""),this.model.setChatState(c,{silent:!0}),s.focus()}}r.api.elements.define("converse-message-form",h)},"./src/plugins/chatview/templates/bottom-panel.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/i18n/index.js"),i=s("./node_modules/lit/index.js");let o=e=>{let t=(0,r.__)("You have unread messages");return(0,i.html)`${e.model.ui.get("scrolled")&&e.model.get("num_unread")?(0,i.html)`<div class="new-msgs-indicator" @click="${t=>e.viewUnreadMessages(t)}"> ${t} </div>`:""}<converse-message-form .model="${e.model}"></converse-message-form>`}},"./src/plugins/chatview/templates/chat-head.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/until.js"),o=s("./src/headless/index.js"),a=s("./src/i18n/index.js"),l=s("./src/shared/chat/utils.js");let{HEADLINES_TYPE:d}=o.constants,c=e=>{let{jid:t,status:s,type:c}=e.model.attributes,u=e.getHeadingButtons(),h=t=>e.showUserDetailsModal(t),m=(0,a.__)("The User's Profile Image"),f=e.model.getDisplayName(),p=(0,r.html)`<span title="${m}"><converse-avatar .model="${e.model.contact||e.model}" class="avatar chat-msg__avatar" name="${f}" nonce="${e.model.contact?.vcard?.get("vcard_updated")}" height="40" width="40"></converse-avatar></span>`;return(0,r.html)`<div class="chatbox-title ${s?"":"chatbox-title--no-desc"}"><div class="chatbox-title--row">${!o._converse.api.settings.get("singleton")?(0,r.html)`<converse-controlbox-navback jid="${t}"></converse-controlbox-navback>`:""} ${c!==d?(0,r.html)`<a class="show-msg-author-modal" @click="${h}">${p}</a>`:""}<div class="chatbox-title__text" title="${t}" role="heading" aria-level="2">${c!==d?(0,r.html)`<a class="user show-msg-author-modal" @click="${h}">${f}</a>`:f}</div></div><div class="chatbox-title__buttons btn-toolbar g-0">${(0,i.until)((0,l.getStandaloneButtons)(u),"")} ${(0,i.until)((0,l.getDropdownButtons)(u),"")}</div></div>${s?(0,r.html)`<p class="chat-head__desc">${s}</p>`:""}`}},"./src/plugins/chatview/templates/chat.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js");s("./src/i18n/index.js");var o=s("./src/shared/chat/utils.js");let{CHATROOMS_TYPE:a}=i.constants,l=e=>{let t=e.getHelpMessages(),s=e.model.get("show_help_messages"),l="overlayed"===i.api.settings.get("view_mode"),d=(0,o.getChatStyle)(e.model);return(0,r.html)`<div class="flyout box-flyout" style="${d||r.nothing}">${l?(0,r.html)`<converse-dragresize></converse-dragresize>`:""} ${e.model?(0,r.html)`<converse-chat-heading jid="${e.model.get("jid")}" class="chat-head chat-head-chatbox row g-0"></converse-chat-heading><div class="chat-body">${e.model.contact?(0,r.html)`<converse-contact-approval-alert .contact="${e.model.contact}"></converse-contact-approval-alert>`:""}<div class="chat-content ${e.model.get("show_send_button")?"chat-content-sendbutton":""}" aria-live="polite"><converse-chat-content .model="${e.model}"></converse-chat-content>${s?(0,r.html)`<div class="chat-content__help"><converse-chat-help .model="${e.model}" .messages="${t}" ?hidden="${!s}" type="info" chat_type="${a}"></converse-chat-help></div>`:""}</div><converse-chat-bottom-panel .model="${e.model}" class="bottom-panel"></converse-chat-bottom-panel></div>`:""}</div>`}},"./src/plugins/chatview/templates/message-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/i18n/index.js"),i=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js"),a=s("./src/plugins/chatview/utils.js");let l=e=>{let t=e.model.get("composing_spoiler"),s=t?(0,r.__)("Hidden message"):(0,r.__)("Message"),l=(0,r.__)("Optional hint"),d=i.api.settings.get("message_limit"),c=i.api.settings.get("visible_toolbar_buttons").call,u=i.api.settings.get("visible_toolbar_buttons").emoji,h=i.api.settings.get("show_send_button"),m=i.api.settings.get("visible_toolbar_buttons").spoiler,f=i.api.settings.get("show_toolbar");return(0,o.html)`<form class="chat-message-form" @submit="${t=>e.onFormSubmitted(t)}">${f?(0,o.html)`<converse-chat-toolbar class="btn-toolbar chat-toolbar no-text-select" .model="${e.model}" ?composing_spoiler="${t}" ?show_call_button="${c}" ?show_emoji_button="${u}" ?show_send_button="${h}" ?show_spoiler_button="${m}" ?show_toolbar="${f}" message_limit="${d}"></converse-chat-toolbar>`:""} <input type="text" enterkeyhint="send" placeholder="${l||""}" .value="${e.model.get("draft_hint")??""}" @change="${t=>i.u.safeSave(e.model,{draft_hint:t.target.value})}" class="${t?"":"hidden"} spoiler-hint"> <textarea autofocus type="text" enterkeyhint="send" .value="${e.model.get("draft")??""}" @drop="${t=>e.onDrop(t)}" @input="${a.resetElementHeight}" @keydown="${t=>e.onKeyDown(t)}" @keyup="${t=>e.onKeyUp(t)}" @paste="${t=>e.onPaste(t)}" @change="${t=>i.u.safeSave(e.model,{draft:t.target.value})}" class="chat-textarea ${e.model.get("correcting")?"correcting":""} ${h?"chat-textarea-send-button":""} ${t?"spoiler":""}" placeholder="${s}"></textarea></form>`}},"./src/plugins/chatview/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{clearHistory:()=>o,clearMessages:()=>a,parseMessageForCommands:()=>l,resetElementHeight:()=>d});var r=s("./src/i18n/index.js"),i=s("./src/headless/index.js");function o(e){location.hash===`converse/chat?jid=${e}`&&history.pushState(null,"",window.location.pathname)}async function a(e){await i.api.confirm((0,r.__)("Confirm"),(0,r.__)("Are you sure you want to clear the messages from this conversation?"))&&await e.clearMessages()}async function l(e,t){let s=t.replace(/^\s*/,"").match(/^\/(.*)\s*$/);if(s){let r=!1;if(r=await i.api.hook("parseMessageForCommands",{model:e,text:t},r))return!0;if("clear"===s[1])return a(e),!0;if("close"===s[1]){let{chatboxviews:t}=i._converse.state;return t.get(e.get("jid"))?.close(),!0}if("help"===s[1])return e.set({show_help_messages:!1},{silent:!0}),e.set({show_help_messages:!0}),!0}return!1}function d(e){if(!window.CSS?.supports("field-sizing","content"))if(e.target.value){let t=e.target.scrollHeight+"px";e.target.style.height!=t&&(e.target.style.height="auto",e.target.style.height=t)}else e.target.style=""}},"./src/plugins/controlbox/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),i=s("./src/plugins/controlbox/model.js");let{u:o}=r.converse.env,a={controlbox:{async open(){await r.api.waitUntil("chatBoxesFetched");let e=await r.api.chatboxes.get("controlbox");return e||(e=await r.api.chatboxes.create("controlbox",{},i.default)),o.safeSave(e,{closed:!1}),e},get:()=>r._converse.state.chatboxviews.get("controlbox")}}},"./src/plugins/controlbox/buttons.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/plugins/controlbox/templates/buttons.js");s("./src/plugins/controlbox/styles/buttons.scss");class a extends i.CustomElement{initialize(){let{chatboxes:e}=r._converse.state;this.model=e.get("controlbox")}render(){return(0,o.default)(this)}showUserSettingsModal(e){e?.preventDefault(),r.api.modal.show("converse-user-settings-modal",{model:r._converse.state.xmppstatus,_converse:r._converse},e)}closeControlBox(e){e?.preventDefault();let t=r._converse.state.chatboxviews.get("controlbox");t?.close()}}r.api.elements.define("converse-controlbox-buttons",a);let l=a},"./src/plugins/controlbox/constants.js":function(e,t,s){"use strict";s.r(t),s.d(t,{CONNECTION_STATUS_CSS_CLASS:()=>o});var r=s("./src/headless/index.js");s("./src/i18n/index.js");let{Strophe:i}=r.converse.env,o=Object.fromEntries([[i.Status.ERROR,"danger"],[i.Status.CONNECTING,"info"],[i.Status.CONNFAIL,"danger"],[i.Status.AUTHENTICATING,"info"],[i.Status.AUTHFAIL,"danger"],[i.Status.CONNECTED,"info"],[i.Status.DISCONNECTED,"danger"],[i.Status.DISCONNECTING,"warning"],[i.Status.ATTACHED,"info"],[i.Status.REDIRECT,"info"],[i.Status.RECONNECTING,"warning"]])},"./src/plugins/controlbox/controlbox.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/shared/constants.js"),a=s("./src/plugins/dragresize/mixin.js"),l=s("./src/plugins/controlbox/templates/controlbox.js");s("./src/plugins/controlbox/navbar.js");let{LOGOUT:d}=r.constants;class c extends(0,a.default)(i.CustomElement){initialize(){this.setModel();let{chatboxviews:e}=r._converse.state;e.add("controlbox",this),this.model.get("connected")&&void 0===this.model.get("closed")&&this.model.set("closed",!r.api.settings.get("show_controlbox_by_default")),this.viewportMediaQuery=window.matchMedia(`(max-width: ${o.MOBILE_CUTOFF}px)`),this.renderOnViewportChange=()=>this.requestUpdate(),r.api.trigger("controlBoxInitialized",this)}connectedCallback(){super.connectedCallback(),this.viewportMediaQuery.addEventListener("change",this.renderOnViewportChange)}disconnectedCallback(){super.disconnectedCallback(),r._converse.state.chatboxviews.remove("controlbox",this),this.viewportMediaQuery.removeEventListener("change",this.renderOnViewportChange)}setModel(){this.model=r._converse.state.chatboxes.get("controlbox"),this.listenTo(r._converse.state.connfeedback,"change:connection_status",()=>this.requestUpdate()),this.listenTo(this.model,"change:active-form",()=>this.requestUpdate()),this.listenTo(this.model,"change:connected",()=>this.requestUpdate()),this.requestUpdate()}render(){return"overlayed"===r.api.settings.get("view_mode")?this.model&&!this.model.get("closed")?(0,l.default)(this):"":(0,l.default)(this)}close(e){e?.preventDefault?.();let t=r.api.connection.get();if(!(e?.name==="closeAllChatBoxes"&&(t.disconnection_cause!==d||r.api.settings.get("show_controlbox_by_default")))&&!r.api.settings.get("sticky_controlbox")&&"overlayed"===r.api.settings.get("view_mode"))return r.u.safeSave(this.model,{closed:!0}),r.api.trigger("controlBoxClosed",this),this}}r.api.elements.define("converse-controlbox",c);let u=c},"./src/plugins/controlbox/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js"),i=s("./src/plugins/controlbox/loginform.js"),o=s("./src/plugins/controlbox/model.js"),a=s("./src/plugins/controlbox/toggle.js"),l=s("./src/plugins/controlbox/controlbox.js"),d=s("./src/plugins/controlbox/api.js"),c=s("./src/plugins/controlbox/utils.js");s("./src/shared/components/brand-heading.js"),s("./src/plugins/chatview/index.js"),s("./src/plugins/controlbox/navback.js"),s("./src/plugins/controlbox/buttons.js"),s("./src/plugins/controlbox/styles/_controlbox.scss");let{CONTROLBOX_TYPE:u}=r.constants;r.converse.plugins.add("converse-controlbox",{dependencies:["converse-modal","converse-chatboxes","converse-chat","converse-rosterview","converse-chatview"],enabled:e=>!e.api.settings.get("singleton"),initialize(){r.api.settings.extend({allow_logout:!0,allow_user_trust_override:!0,default_domain:void 0,locked_domain:void 0,show_connection_url_input:!1,show_controlbox_by_default:!1,sticky_controlbox:!1}),r.api.promises.add("controlBoxInitialized",!1),Object.assign(r.api,d.default);let e={ControlBox:o.default,ControlBoxView:l.default,ControlBoxToggle:a.default,LoginForm:i.default};Object.assign(r._converse,e),Object.assign(r._converse.exports,e),r.api.chatboxes.registry.add(u,o.default),r.api.listen.on("chatBoxesFetched",c.onChatBoxesFetched),r.api.listen.on("clearSession",c.clearSession),r.api.listen.on("will-reconnect",c.disconnect),r.api.waitUntil("chatBoxViewsInitialized").then(c.addControlBox).catch(e=>r.log.fatal(e))}})},"./src/plugins/controlbox/loginform.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/plugins/controlbox/utils.js"),a=s("./src/plugins/controlbox/templates/loginform.js");s("./src/plugins/controlbox/styles/loginform.scss");let{Strophe:l}=r.converse.env,{ANONYMOUS:d}=r.constants;class c extends i.CustomElement{initialize(){let e=r.api.settings.get();this.listenTo(e,"change:show_connection_url_input",()=>this.requestUpdate()),this.listenTo(r._converse.state.connfeedback,"change",()=>this.requestUpdate()),this.handler=()=>this.requestUpdate()}connectedCallback(){super.connectedCallback(),r.api.settings.listen.on("change",this.handler)}disconnectedCallback(){super.disconnectedCallback(),r.api.settings.listen.not("change",this.handler)}render(){return(0,a.default)(this)}async onLoginFormSubmitted(e){if(e?.preventDefault(),r.api.settings.get("authentication")===d){let e=r._converse.session.get("jid");return this.connect(e)}let t=e.target;(0,o.validateJID)(t)&&((0,o.updateSettingsWithFormData)(t),r.api.settings.get("bosh_service_url")||r.api.settings.get("websocket_url")||await this.discoverConnectionMethods(t),r.api.settings.get("bosh_service_url")||r.api.settings.get("websocket_url")?this.connect():r.api.settings.set("show_connection_url_input",!0))}discoverConnectionMethods(e){if(!r.api.settings.get("discover_connection_methods"))return;let t=new FormData(e).get("jid");if(t instanceof File)throw Error('Found file instead of string for "jid" field in form');let s=l.getDomainFromJid(t);return r.api.connection.init(t),r.api.connection.get().discoverConnectionMethods(s)}connect(e){["converse/login","converse/register"].includes(location.hash)&&history.pushState(null,"",window.location.pathname),r.api.connection.get()?.reset(),r.api.user.login(e)}}r.api.elements.define("converse-login-form",c);let u=c},"./src/plugins/controlbox/modals/about.js":function(e,t,s){"use strict";s.r(t);var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),a=s("./src/plugins/modal/modal.js");class l extends a.default{getModalTitle(){return(0,o.__)("About Converse")}renderModal(){return(0,r.html)`<p>Converse is an open-source <a href="https://xmpp.org" target="_blank" rel="noopener">XMPP</a> chat app written in JavaScript.</p><p>Just like the XMPP protocol, Converse is built with extensibility in mind.</p><p>Because it is open source, integrators and developers can use it to add chat functionality to their websites.</p><p>Converse is also <a href="https://conversejs.org/docs/html/configuration.html" target="_blank" rel="noopener">configurable</a>, built with modern web technologies and <a href="https://conversejs.org/docs/html/plugin_development.html" target="_blank" rel="noopener">extensible with plugins</a>. It has different modes, which means it can be a full page app, an embedded chat widget, or an overlayed chat box. For a list of supported features and XMPP extensions, please see the <a href="https://github.com/conversejs/converse.js?tab=readme-ov-file#features" target="_blank" rel="noopener">README</a>.</p><p>Converse is translated into over 30 languages. You can <a target="_blank" rel="nofollow" href="https://hosted.weblate.org/projects/conversejs/#languages">translate</a> it into your own language.</p><p>Converse was created by <a target="_blank" rel="nofollow" href="https://opkode.com">JC Brand</a>. You can <a target="_blank" rel="nofollow" href="https://opkode.com/contact.html">hire me</a> for customizations, support or to build your next project.</p><p>If you're interested in sponsoring Converse, please visit: <a href="https://github.com/sponsors/jcbrand" target="_blank" rel="noopener">Github</a>, <a href="https://www.patreon.com/jcbrand" target="_blank" rel="noopener">Patreon</a>, <a href="https://liberapay.com/jcbrand" target="_blank" rel="noopener">Liberapay</a> or <a href="https://opkode.com/contact.html" target="_blank" rel="noopener">contact us</a>.</p>`}}i.api.elements.define("converse-about-modal",l)},"./src/plugins/controlbox/model.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/index.js");let{dayjs:o}=i.converse.env,{CONTROLBOX_TYPE:a}=i.constants;class l extends r.Model{defaults(){return{bookmarked:!1,box_id:"controlbox",chat_state:void 0,closed:!i.api.settings.get("show_controlbox_by_default"),num_unread:0,time_opened:o(0).valueOf(),type:a,url:""}}validate(e){return e.type===a?"embedded"===i.api.settings.get("view_mode")&&i.api.settings.get("singleton")?"Controlbox not relevant in embedded view mode":void 0:i._converse.state.ChatBox.prototype.validate.call(this,e)}maybeShow(e){return e||"controlbox"!==this.get("id")?i._converse.state.ChatBox.prototype.maybeShow.call(this,e):this}onReconnection(){this.save("connected",!0)}}let d=l},"./src/plugins/controlbox/navback.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/plugins/controlbox/templates/navback.js"),i=s("./src/shared/components/element.js"),o=s("./src/headless/index.js");class a extends i.CustomElement{constructor(){super(),this.jid=null}static get properties(){return{jid:{type:String}}}render(){return(0,r.default)(this.jid)}}o.api.elements.define("converse-controlbox-navback",a);let l=a},"./src/plugins/controlbox/navbar.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/plugins/controlbox/templates/navbar.js");s("./src/plugins/controlbox/modals/about.js");class a extends i.CustomElement{render(){return(0,o.default)(this)}openAboutDialog(e){e.preventDefault(),r.api.modal.show("converse-about-modal")}}r.api.elements.define("converse-controlbox-navbar",a);let l=a},"./src/plugins/controlbox/templates/buttons.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/i18n/index.js");let a=e=>{let t=e.model.get("connected"),s=i.api.settings.get("show_client_info")||i.api.settings.get("allow_adhoc_commands");return(0,r.html)`<div class="btn-toolbar g-0" role="toolbar"><div class="btn-group" role="group">${t&&s?function(e){let t=(0,o.__)("Show details about this chat client");return(0,r.html)`<a class="controlbox-heading__btn show-client-info align-self-center" title="${t}" @click="${e.showUserSettingsModal}"><converse-icon class="fa fa-cog" size="1em"></converse-icon></a>`}(e):""} ${i.api.settings.get("sticky_controlbox")?"":(0,r.html)`<a class="controlbox-heading__btn close align-self-center" @click="${t=>e.closeControlBox(t)}"><converse-icon class="fa fa-times" size="1em"></converse-icon></a>`}</div></div>`}},"./src/plugins/controlbox/templates/controlbox.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/shared/chat/utils.js");let{Strophe:a}=i.converse.env,{ANONYMOUS:l}=i.constants,d=e=>{let t=(0,o.getChatStyle)(e.model);return(0,r.html)`<div class="flyout box-flyout" style="${t||r.nothing}"><converse-dragresize></converse-dragresize>${e.model.get("connected")?(0,r.html)`<converse-user-profile></converse-user-profile><div class="controlbox-pane"><converse-headlines-feeds-list class="controlbox-section"></converse-headlines-feeds-list><div id="chatrooms" class="controlbox-section"><converse-rooms-list></converse-rooms-list></div>${i.api.settings.get("authentication")===l?"":(0,r.html)`<div id="converse-roster" class="controlbox-section"><converse-roster></div>`}</div>`:function(e){let t="fullscreen"===i.api.settings.get("view_mode"),s=i._converse.state.connfeedback.get("connection_status"),o=[a.Status.RECONNECTING,a.Status.CONNECTING].includes(s),l=i.api.settings.get("view_mode"),d=i.api.settings.get("show_background");return(0,r.html)`${d&&"fullscreen"===l?(0,r.html)`<converse-bg></converse-bg>`:""}<converse-controlbox-buttons class="controlbox-padded"></converse-controlbox-buttons><div class="controlbox-pane d-flex flex-column justify-content-between">${t?(0,r.html)`<converse-controlbox-navbar></converse-controlbox-navbar>`:""}<converse-brand-logo></converse-brand-logo>${o?(0,r.html)`<converse-spinner class="vertically-centered fade-in"></converse-spinner>`:"register"===e.model.get("active-form")?(0,r.html)`<converse-registration-form class="fade-in rounded"></converse-registration-form>`:(0,r.html)`<converse-login-form class="fade-in rounded"></converse-login-form>`} ${t?(0,r.html)`<converse-footer></converse-footer>`:""}</div>`}(e)}</div>`}},"./src/plugins/controlbox/templates/loginform.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>p,tplConnectionURLInput:()=>f});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/templates/spinner.js"),a=s("./src/plugins/controlbox/constants.js"),l=s("./src/i18n/index.js");s("./src/shared/components/brand-heading.js"),s("./src/shared/components/footer.js");let{ANONYMOUS:d,EXTERNAL:c,LOGIN:u,PREBIND:h,CONNECTION_STATUS:m}=i.constants;function f(){let e=(0,l.__)("Connection URL"),t=(0,l.__)("HTTP or websocket URL that is used to connect to your XMPP server"),s=(0,l.__)("e.g. wss://example.org/xmpp-websocket");return(0,r.html)`<div class="mb-3 fade-in"><label for="converse-conn-url" class="form-label">${e}</label><p class="form-help instructions">${t}</p><input required id="converse-conn-url" class="form-control" type="url" name="connection-url" placeholder="${s}"></div>`}let p=e=>{let{connfeedback:t}=i._converse.state,s=t.get("connection_status"),p=a.CONNECTION_STATUS_CSS_CLASS?.[s]??"none",g=t.get("message");return(0,r.html)`<form id="converse-login" class="converse-form" method="post" @submit="${e.onLoginFormSubmitted}"><div class="alert ${`alert-${p}`} conn-feedback mb-3 ${!g?"d-none":""}" role="alert"><span class="feedback-message">${g}</span></div>${["CONNECTED","CONNECTING","AUTHENTICATING","RECONNECTING"].includes(m[s])?(0,r.html)`<div class="text-center my-3">${(0,o.default)()}</div>`:function(){let e=i.api.settings.get("authentication"),t=(0,l.__)("Disconnected"),s=(0,l.__)("Click here to log in anonymously");return(0,r.html)`${e==u||e==c?function(){let e=i.api.settings.get("authentication"),t=(0,l.__)("Log in"),s=(0,l.__)("XMPP Address"),o=i.api.settings.get("locked_domain"),a=i.api.settings.get("default_domain"),d=(o||a)&&(0,l.__)("Username")||(0,l.__)("user@domain"),u=i.api.settings.get("allow_user_trust_override");return(0,r.html)`<div class="mb-3"><label for="converse-login-jid" class="form-label">${s}:</label><div class="${o?"input-group":""}"><input id="converse-login-jid" ?autofocus="${!!i.api.settings.get("auto_focus")}" value="${i.api.settings.get("jid")??""}" required class="form-control" type="text" name="jid" placeholder="${d}"> ${o?(0,r.html)`<span class="input-group-text addon" id="basic-addon2">@${o}</span>`:""}</div></div>${e!==c?function(){let e=(0,l.__)("Password");return(0,r.html)`<div class="mb-3"><label for="converse-login-password" class="form-label">${e}</label> <input id="converse-login-password" class="form-control" required="required" value="${i.api.settings.get("password")??""}" type="password" name="password" placeholder="${e}"></div>`}():""} ${i.api.settings.get("show_connection_url_input")?f():""} ${u?function(e){let t=(0,l.__)("To improve performance, we cache your data in this browser. Uncheck this box if this is a public computer or if you want your data to be deleted when you log out. It's important that you explicitly log out, otherwise not all cached data might be deleted. Please note, when using an untrusted device, OMEMO encryption is NOT available."),s=(0,l.__)("This is a trusted device");return(0,r.html)`<div class="form-check mb-2 login-trusted"><input id="converse-login-trusted" type="checkbox" class="form-check-input" name="trusted" ?checked="${e}"> <label for="converse-login-trusted" class="form-check-label login-trusted__desc">${s}</label><converse-popover title="${(0,l.__)("Info")}" text="${t}"></converse-popover></div>`}("off"!==u):""}<div class="text-center mb-3"><button class="btn btn-primary px-5 mx-auto" type="submit">${t}</button></div><converse-register-link></converse-register-link>`}():""} ${e==d?(0,r.html)`<div class="text-center mb-3"><button class="btn btn-primary login-anon px-5 mx-auto" type="submit">${s}</button></div>`:""} ${e==h?(0,r.html)`<p class="alert alert-warning">${t}</p>`:""}`}()}</form>`}},"./src/plugins/controlbox/templates/navback.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/plugins/controlbox/utils.js");let o=e=>(0,r.html)`<converse-icon size="1em" class="fa fa-arrow-left" @click="${()=>(0,i.navigateToControlBox)(e)}"></converse-icon>`},"./src/plugins/controlbox/templates/navbar.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");let i=e=>(0,r.html)`<nav class="navbar navbar-expand-lg"><div class="container-fluid"><div class="collapse navbar-collapse"><ul class="navbar-nav ms-auto mb-2 mb-lg-0"><li class="nav-item"><a class="nav-link" href="#" @click="${e.openAboutDialog}">About</a></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href="https://github.com/conversejs/converse.js">Github</a></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href="https://conversejs.org/docs/html">Documentation</a></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href="https://opkode.com/contact.html">Contact</a></li></ul></div></div></nav>`},"./src/plugins/controlbox/templates/toggle.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js"),o=s("./src/plugins/controlbox/utils.js");let a=e=>(0,r.html)`<button type="button" class="btn toggle-controlbox ${e.model?.get("closed")?"":"hidden"}" @click="${e=>(0,o.showControlBox)(e)}"><span class="toggle-feedback">${(0,i.__)("Chat")}</span></button>`},"./src/plugins/controlbox/toggle.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/plugins/controlbox/templates/toggle.js");class a extends i.CustomElement{async connectedCallback(){super.connectedCallback(),await r.api.waitUntil("initialized");let{chatboxes:e}=r._converse.state;this.model=e.get("controlbox"),this.listenTo(this.model,"change:closed",()=>this.requestUpdate()),this.requestUpdate()}render(){return(0,o.default)(this)}}r.api.elements.define("converse-controlbox-toggle",a);let l=a},"./src/plugins/controlbox/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{addControlBox:()=>l,clearSession:()=>h,disconnect:()=>u,navigateToControlBox:()=>c,onChatBoxesFetched:()=>m,showControlBox:()=>d,updateSettingsWithFormData:()=>f,validateJID:()=>p});var r=s("./src/headless/index.js"),i=s("./src/i18n/index.js");let{Strophe:o,u:a}=r.converse.env;function l(){let e=r._converse.state.chatboxes.add(new r._converse.exports.ControlBox({id:"controlbox"}));return r._converse.state.chatboxviews.get("controlbox")?.setModel(),e}function d(e){e?.preventDefault?.();let t=r._converse.state.chatboxes.get("controlbox")||l();a.safeSave(t,{closed:!1})}function c(e){d();let t=r._converse.state.chatboxes.get(e);a.safeSave(t,{hidden:!0})}function u(){let e=r._converse.state.chatboxes?.get("controlbox");e&&a.safeSave(e,{connected:!1})}function h(){let{chatboxviews:e}=r._converse.state,t=e?.get("controlbox");t&&(a.safeSave(t.model,{connected:!1}),t?.controlbox_pane&&(t.controlbox_pane.remove(),delete t.controlbox_pane))}function m(){(r._converse.state.chatboxes.get("controlbox")||l()).save({connected:!0})}function f(e,t={}){let s=new FormData(e),i=s.get("connection-url");i?.startsWith("ws")?t.websocket_url=i:i?.startsWith("http")&&(t.bosh_service_url=i);let a=s.get("jid");if(r.api.settings.get("locked_domain")){let e="@"+r.api.settings.get("locked_domain");a.endsWith(e)&&(a=a.substr(0,a.length-e.length)),a=o.escapeNode(a)+e}else r.api.settings.get("default_domain")&&!a.includes("@")&&(a=a+"@"+r.api.settings.get("default_domain"));t.jid=a,t.password=s.get("password"),r.api.settings.set(t),r._converse.state.config.save({trusted:s.get("trusted")&&!0||!1})}function p(e){let t=e.querySelector("input[name=jid]");return!t.value||r.api.settings.get("locked_domain")||r.api.settings.get("default_domain")||a.isValidJID(t.value)?(t.setCustomValidity(""),!0):(t.setCustomValidity((0,i.__)("Please enter a valid XMPP address")),!1)}},"./src/plugins/disco-views/disco-browser.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),a=s("./src/shared/components/element.js"),l=s("./src/plugins/disco-views/templates/disco-browser.js");s("./src/plugins/disco-views/styles/disco-browser.scss");class d extends a.CustomElement{static get properties(){return{_entity_jids:{type:Array,state:!0}}}constructor(){super(),this._entity_jids=[i._converse.session.get("domain")]}render(){return(0,l.default)(this)}handleBreadcrumbClick(e,t){e.preventDefault(),this._entity_jids=[...this._entity_jids.slice(0,t+1)]}queryEntity(e){e.preventDefault();let t=new FormData(e.target);this._entity_jids=[t.get("entity_jid").trim()]}renderItem(e){return(0,r.html)`${e.get("name")?`${e.get("name")} <${e.get("jid")}>`:`${e.get("jid")}`}`}addEntityJID(e,t){e.preventDefault(),this._entity_jids=[...this._entity_jids,t.get("jid")]}async getDiscoInfo(){let e=this._entity_jids[this._entity_jids.length-1],t=await i.api.disco.entities.get(e,!0);await t.waitUntilItemsFetched;let s=t.get("error");if(s)if(["item-not-found","remote-server-not-found"].includes(s))return{error:(0,o.__)("No service found with that XMPP address")};else return{error:(0,o.__)("Error: %1$s",s)};let r=t.features?.map(e=>e.get("var"))||[],a=t.identities||[],l=t.get("items")||[],d=await Promise.all(l.map(e=>i.api.disco.entities.get(e)));return{features:r.toSorted?.()||r,identities:a,items:d}}}i.api.elements.define("converse-disco-browser",d);let c=d},"./src/plugins/disco-views/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js");s("./src/plugins/disco-views/disco-browser.js"),r.converse.plugins.add("converse-disco-views",{dependencies:["converse-disco"],enabled:()=>!0,initialize(){}})},"./src/plugins/disco-views/templates/disco-browser.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/until.js");s("./src/headless/index.js");var o=s("./src/i18n/index.js"),a=s("./src/plugins/rosterview/utils.js");let l=e=>{let t=e.getDiscoInfo(),s=e._entity_jids[e._entity_jids.length-1];return(0,r.html)`<h4 class="mt-3 text-center">${(0,o.__)("Discover Services")}</h4><form class="mt-2 mb-3" @submit="${t=>e.queryEntity(t)}"><div class="d-flex w-100"><converse-autocomplete .getAutoCompleteList="${a.getJIDsAutoCompleteList}" class="w-100" min_chars="2" name="entity_jid" position="below" required value="${s}"></converse-autocomplete><button type="submit" class="btn btn-outline-secondary">${(0,o.__)("Inspect")}</button></div></form><nav aria-label="breadcrumb"><ol class="breadcrumb"><li>${(0,o.__)("Service")}:</li>${e._entity_jids.map((t,s)=>(0,r.html)`<li class="breadcrumb-item"><a href="#" @click="${t=>e.handleBreadcrumbClick(t,s)}">${t}</a></li>`)}</ol></nav>${(0,i.until)(t.then(()=>""),(0,r.html)`<converse-spinner></converse-spinner>`)} ${(0,i.until)(t.then(({error:e})=>e?(0,r.html)`<div class="alert alert-danger" role="alert">${e}</div>`:""),"")}<div class="container">${(0,i.until)(t.then(({identities:e})=>e?.length?(0,r.html)`<h5 class="mt-3">${(0,o.__)("Identities")}</h5><ul class="items-list identities">${e.map(e=>(0,r.html)`<li class="list-item"><ul class="list-unstyled">${e.get("name")?(0,r.html)`<li><strong>${(0,o.__)("Name")}:</strong> ${e.get("name")}</li>`:""} ${e.get("type")?(0,r.html)`<li><strong>${(0,o.__)("Type")}:</strong> ${e.get("type")}</li>`:""} ${e.get("category")?(0,r.html)`<li><strong>${(0,o.__)("Category")}:</strong> ${e.get("category")}</li>`:""}</ul></li>`)}</ul>`:""),"")} ${(0,i.until)(t.then(({items:t})=>t?.length?(0,r.html)`<h5 class="mt-3">${(0,o.__)("Items")}</h5><ul class="items-list disco-items">${t.map(t=>(0,r.html)`<li class="list-item"><a @click="${s=>e.addEntityJID(s,t)}">${e.renderItem(t)}</a></li>`)}</ul>`:""),"")} ${(0,i.until)(t.then(({features:e})=>e?.length?(0,r.html)`<h5 class="mt-3">${(0,o.__)("Features")}</h5><ul class="items-list features">${e.map(e=>(0,r.html)`<li class="list-item">${e}</li>`)}</ul>`:""),"")}</div>`}},"./src/plugins/dragresize/components/dragresize.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/plugins/dragresize/templates/dragresize.js");class a extends i.CustomElement{render(){return(0,o.default)()}}r.api.elements.define("converse-dragresize",a)},"./src/plugins/dragresize/index.js":function(e,t,s){"use strict";s.r(t),s("./src/plugins/dragresize/components/dragresize.js");var r=s("./src/plugins/dragresize/utils.js"),i=s("./src/headless/index.js");i.converse.plugins.add("converse-dragresize",{initialize(){i.api.settings.extend({allow_dragresize:!0,dragresize_top_margin:0}),i.api.listen.on("registeredGlobalEventHandlers",r.registerGlobalEventHandlers),i.api.listen.on("unregisteredGlobalEventHandlers",r.unregisterGlobalEventHandlers),i.api.listen.on("startDiagonalResize",r.dragresizeOverIframeHandler),i.api.listen.on("startHorizontalResize",r.dragresizeOverIframeHandler),i.api.listen.on("startVerticalResize",r.dragresizeOverIframeHandler),i.api.listen.on("shouldDestroyOnClose",r.shouldDestroyOnClose)}})},"./src/plugins/dragresize/mixin.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/log/index.js"),i=s("./src/headless/index.js"),o=s("./src/plugins/dragresize/utils.js");function a(e){return class extends e{constructor(...e){super(e),this.model=null,i.api.settings.listen.on("change:view_mode",()=>this.initDragResize())}updated(e){super.updated(e),e.has("model")&&this.model&&this.initDragResize()}initDragResize(){"overlayed"==i.api.settings.get("view_mode")&&this.setupDragResize()}setupDragResize(){let e=i.u.debounce(()=>this.setDimensions(),250);window.addEventListener("resize",e),this.listenTo(this.model,"destroy",()=>window.removeEventListener("resize",e));let t=this.querySelector(".box-flyout");this.model.set(this.getDefaultDimensions());let s=window.getComputedStyle(t),r=s["min-width"],o=s["min-height"];return this.model.set("min_width",r.endsWith("px")?Number(r.replace(/px$/,"")):0),this.model.set("min_height",o.endsWith("px")?Number(o.replace(/px$/,"")):0),this.prev_pageY=0,this.prev_pageX=0,this.height=this.model.get("height"),this.width=this.model.get("width"),this}getDefaultDimensions(){let e=this.querySelector(".box-flyout");if(this.model.get("height")||this.model.get("width")){let t=e.getAttribute("style");e.removeAttribute("style");let s={default_height:e.offsetHeight,default_width:e.offsetWidth};return e.setAttribute("style",t),s}{let t=window.getComputedStyle(e);return{default_height:parseInt(t.height.replace(/px$/,""),10),default_width:parseInt(t.width.replace(/px$/,""),10)}}}setDimensions(){"overlayed"===i.api.settings.get("view_mode")&&(this.setChatBoxWidth(this.model.get("width")),this.setChatBoxHeight(this.model.get("height")))}resizeChatBox(e){let t,s=(0,o.getResizingDirection)();if(0===s.indexOf("top")){let s=i.api.settings.get("dragresize_top_margin")??0,o=window.innerHeight-s;if(t=e.pageY-this.prev_pageY){let s=this.height-t;r.default.debug("------------"),r.default.debug(`window.innerHeight: ${window.innerHeight}`),r.default.debug(`max_height: ${o}`),r.default.debug(`new_height: ${s}`),r.default.debug(`diff: ${t}`),this.height=this.height-t>(this.model.get("min_height")||0)?s<=o?s:o:this.model.get("min_height"),this.prev_pageY=e.pageY,this.setChatBoxHeight(this.height)}}s.includes("left")&&(t=this.prev_pageX-e.pageX)&&(this.width=this.width+t>(this.model.get("min_width")||0)?this.width+t:this.model.get("min_width"),this.prev_pageX=e.pageX,this.setChatBoxWidth(this.width))}setChatBoxHeight(e){let t=this.querySelector(".box-flyout");null!==t&&(t.style.height=e?(0,o.applyDragResistance)(e,this.model.get("default_height"))+"px":"")}setChatBoxWidth(e){let t=e?(0,o.applyDragResistance)(e,this.model.get("default_width"))+"px":"";this.style.width=t;let s=this.querySelector(".box-flyout");null!==s&&(s.style.width=t)}}}},"./src/plugins/dragresize/templates/dragresize.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/plugins/dragresize/utils.js");let o=()=>(0,r.html)`<div class="dragresize dragresize-top" @mousedown="${i.onStartVerticalResize}"></div><div class="dragresize dragresize-topleft" @mousedown="${i.onStartDiagonalResize}"></div><div class="dragresize dragresize-left" @mousedown="${i.onStartHorizontalResize}"></div>`},"./src/plugins/dragresize/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{applyDragResistance:()=>f,dragresizeOverIframeHandler:()=>l,getResizingDirection:()=>c,onMouseMove:()=>p,onMouseUp:()=>g,onStartDiagonalResize:()=>m,onStartHorizontalResize:()=>h,onStartVerticalResize:()=>u,registerGlobalEventHandlers:()=>o,shouldDestroyOnClose:()=>_,unregisterGlobalEventHandlers:()=>a});var r=s("./src/headless/index.js");let{u:i}=r.converse.env;function o(){document.addEventListener("mousemove",p),document.addEventListener("mouseup",g)}function a(){document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",g)}function l(e){for(let t of Array.from(document.getElementsByTagName("iframe")))e.addEventListener("mousedown",()=>{t.style.pointerEvents="none"},{once:!0}),e.addEventListener("mouseup",()=>{t.style.pointerEvents="initial"},{once:!0})}let d={};function c(){return d.direction}function u(e,t=!0){if(!r.api.settings.get("allow_dragresize"))return!0;e.preventDefault();let s=i.ancestor(e.target,".box-flyout"),o=window.getComputedStyle(s),a=s.parentElement;a.height=parseInt(o.height.replace(/px$/,""),10),d.chatbox=a,d.direction="top",a.prev_pageY=e.pageY,t&&r.api.trigger("startVerticalResize",a)}function h(e,t=!0){if(!r.api.settings.get("allow_dragresize"))return!0;e.preventDefault();let s=i.ancestor(e.target,".box-flyout"),o=window.getComputedStyle(s),a=s.parentElement;a.width=parseInt(o.width.replace(/px$/,""),10),d.chatbox=a,d.direction="left",a.prev_pageX=e.pageX,t&&r.api.trigger("startHorizontalResize",a)}function m(e){h(e,!1),u(e,!1),d.direction="topleft",r.api.trigger("startDiagonalResize",this)}function f(e,t){return void 0===e?void 0:void 0===t?e:e!==t&&10>Math.abs(e-t)?t:e}function p(e){if(!d.chatbox||!r.api.settings.get("allow_dragresize"))return!0;e.preventDefault(),d.chatbox.resizeChatBox(e)}function g(e){if(!d.chatbox||!r.api.settings.get("allow_dragresize"))return!0;e.preventDefault();let t=d.chatbox.model.get("default_width"),s=d.chatbox.model.get("default_height"),o=f(d.chatbox.height,s),a=f(d.chatbox.width,t);o!==s||a!==t?i.safeSave(d.chatbox.model,{height:o,width:a}):i.safeSave(d.chatbox.model,{height:void 0,width:void 0}),delete d.chatbox,delete d.direction}function _(e,t){return!(e.get("height")||e.get("width"))&&t}},"./src/plugins/fullscreen/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js");s("./src/plugins/fullscreen/styles/fullscreen.scss");let{isUniView:i}=r.u;r.converse.plugins.add("converse-fullscreen",{enabled:()=>i(),initialize(){r.api.settings.extend({chatview_avatar_height:50,chatview_avatar_width:50,hide_open_bookmarks:!0,show_controlbox_by_default:!0,sticky_controlbox:!0})}})},"./src/plugins/headlines-view/feed-list.js":function(e,t,s){"use strict";s.r(t),s.d(t,{HeadlinesFeedsList:()=>l});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/plugins/headlines-view/templates/feeds-list.js");let{HEADLINES_TYPE:a}=r.constants;class l extends i.CustomElement{initialize(){this.model=r._converse.state.chatboxes,this.listenTo(this.model,"add",e=>this.renderIfHeadline(e)),this.listenTo(this.model,"remove",e=>this.renderIfHeadline(e)),this.listenTo(this.model,"destroy",e=>this.renderIfHeadline(e)),this.requestUpdate()}render(){return(0,o.default)(this)}renderIfHeadline(e){return e?.get("type")===a&&this.requestUpdate()}async openHeadline(e){e.preventDefault();let t=e.target.getAttribute("data-headline-jid");(await r.api.headlines.get(t)).maybeShow(!0)}}r.api.elements.define("converse-headlines-feeds-list",l)},"./src/plugins/headlines-view/heading.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/i18n/index.js"),a=s("./src/plugins/headlines-view/templates/chat-head.js");class l extends i.CustomElement{constructor(){super(),this.jid=null}static get properties(){return{jid:{type:String}}}async initialize(){this.model=r._converse.state.chatboxes.get(this.jid),await this.model.initialized,this.requestUpdate()}render(){return(0,a.default)({...this.model.toJSON(),...{display_name:this.model.getDisplayName(),heading_buttons_promise:this.getHeadingButtons()}})}getHeadingButtons(){let e=[];return r.api.settings.get("singleton")||e.push({a_class:"close-chatbox-button",handler:e=>this.close(e),i18n_text:(0,o.__)("Close"),i18n_title:(0,o.__)("Close these announcements"),icon_class:"fa-times",name:"close",standalone:"overlayed"===r.api.settings.get("view_mode")}),r._converse.api.hook("getHeadingButtons",this,e)}close(e){e.preventDefault(),this.model.close()}}r.api.elements.define("converse-headlines-heading",l)},"./src/plugins/headlines-view/index.js":function(e,t,s){"use strict";s.r(t),s("./src/plugins/chatview/index.js");var r=s("./src/plugins/headlines-view/view.js"),i=s("./src/plugins/headlines-view/feed-list.js"),o=s("./src/headless/index.js");s("./src/plugins/headlines-view/styles/headlines.scss"),s("./src/plugins/headlines-view/styles/headlines-head.scss"),o.converse.plugins.add("converse-headlines-view",{dependencies:["converse-headlines","converse-dragresize","converse-chatview"],initialize(){let e={HeadlinesFeedView:r.default,HeadlinesFeedsList:i.HeadlinesFeedsList,HeadlinesPanel:i.HeadlinesFeedsList};Object.assign(o._converse,e),Object.assign(o._converse.exports,e)}})},"./src/plugins/headlines-view/templates/chat-head.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./node_modules/lit/index.js"),o=s("./node_modules/lit/directives/until.js"),a=s("./src/shared/chat/utils.js");let l=e=>(0,i.html)`<div class="chatbox-title ${e.status?"":"chatbox-title--no-desc"}"><div class="chatbox-title--row">${!r._converse.api.settings.get("singleton")?(0,i.html)`<converse-controlbox-navback jid="${e.jid}"></converse-controlbox-navback>`:""}<div class="chatbox-title__text" title="${e.jid}">${e.display_name}</div></div><div class="chatbox-title__buttons btn-toolbar g-0">${(0,o.until)((0,a.getDropdownButtons)(e.heading_buttons_promise),"")} ${(0,o.until)((0,a.getStandaloneButtons)(e.heading_buttons_promise),"")}</div></div>${e.status?(0,i.html)`<p class="chat-head__desc">${e.status}</p>`:""}`},"./src/plugins/headlines-view/templates/feeds-list.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/i18n/index.js"),i=s("./node_modules/lit/index.js");let{HEADLINES_TYPE:o}=s("./src/headless/index.js").constants,a=e=>{let t=e.model.filter(e=>e.get("type")===o),s=(0,r.__)("Announcements");return(0,i.html)`<div class="controlbox-section" id="headline"><div class="d-flex controlbox-padded ${t.length?"":"hidden"}"><span class="w-100 controlbox-heading controlbox-heading--headline" role="heading" aria-level="3">${s}</span></div></div><div class="list-container list-container--headline ${t.length?"":"hidden"}"><div class="items-list rooms-list headline-list">${t.map(t=>(function(e,t){let s=(0,r.__)("Click to open this server message");return(0,i.html)`<div class="list-item controlbox-padded d-flex flex-row" data-headline-jid="${t.get("jid")}"><a class="list-item-link open-headline available-room w-100" data-headline-jid="${t.get("jid")}" title="${s}" @click="${t=>e.openHeadline(t)}" href="#">${t.get("jid")}</a></div>`})(e,t))}</div></div>`}},"./src/plugins/headlines-view/templates/headlines.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/shared/chat/utils.js");s("./src/plugins/headlines-view/heading.js");let o=e=>{let t=(0,i.getChatStyle)(e.model);return(0,r.html)`<div class="flyout box-flyout" style="${t||r.nothing}"><converse-dragresize></converse-dragresize>${e.model?(0,r.html)`<converse-headlines-heading jid="${e.model.get("jid")}" class="chat-head chat-head-chatbox row g-0"></converse-headlines-heading><div class="chat-body"><div class="chat-content" aria-live="polite"><converse-chat-content .model="${e.model}"></converse-chat-content></div></div>`:""}</div>`}},"./src/plugins/headlines-view/view.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),i=s("./src/shared/chat/baseview.js"),o=s("./src/plugins/dragresize/mixin.js"),a=s("./src/plugins/headlines-view/templates/headlines.js");class l extends(0,o.default)(i.default){async initialize(){let{chatboxviews:e,chatboxes:t}=r._converse.state;e.add(this.jid,this),this.model=t.get(this.jid),this.listenTo(this.model,"change:hidden",()=>this.afterShown()),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model.messages,"add",()=>this.requestUpdate()),this.listenTo(this.model.messages,"remove",()=>this.requestUpdate()),this.listenTo(this.model.messages,"reset",()=>this.requestUpdate()),document.addEventListener("visibilitychange",()=>this.onWindowStateChanged()),await this.model.messages.fetched,this.model.maybeShow(),r.api.trigger("headlinesBoxViewInitialized",this)}render(){return(0,a.default)(this)}async close(e){return e?.preventDefault?.(),location.hash==="converse/chat?jid="+this.model.get("jid")&&history.pushState(null,"",window.location.pathname),await this.model.close(e),this}getNotifications(){return[]}afterShown(){this.model.clearUnreadMsgCounter()}}r.api.elements.define("converse-headlines",l);let d=l},"./src/plugins/mam-views/index.js":function(e,t,s){"use strict";s.r(t),s("./src/plugins/mam-views/placeholder.js");var r=s("./src/headless/index.js"),i=s("./src/plugins/mam-views/utils.js");r.converse.plugins.add("converse-mam-views",{dependencies:["converse-mam","converse-chatview","converse-muc-views"],initialize(){r.api.settings.extend({auto_fill_history_gaps:!0}),r.api.listen.on("getMessageTemplate",i.getPlaceholderTemplate)}})},"./src/plugins/mam-views/placeholder.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/shared/components/observable.js"),o=s("./src/plugins/mam-views/templates/placeholder.js");s("./src/plugins/mam-views/styles/placeholder.scss");class a extends i.ObservableElement{static get properties(){return{...super.properties,model:{type:Object}}}constructor(){super(),this.model=null,this.observable="once",this.intersectionRatio=.1}render(){return(0,o.default)(this)}fetchMissingMessages(e){e?.preventDefault?.(),this.model.fetchMissingMessages()}onVisibilityChanged(e){r.api.settings.get("auto_fill_history_gaps")&&this.isVisible&&!this.model.get("fetching")&&this.fetchMissingMessages()}}r.api.elements.define("converse-mam-placeholder",a);let l=a},"./src/plugins/mam-views/templates/placeholder.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/html.js"),i=s("./src/i18n/index.js"),o=s("./src/templates/spinner.js");let a=e=>e.model.get("fetching")?(0,o.default)({classes:"hor_centered"}):(0,r.html)`<a @click="${t=>e.fetchMissingMessages(t)}" title="${(0,i.__)("Click to load missing messages")}"><div class="message mam-placeholder"></div></a>`},"./src/plugins/mam-views/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{fetchMessagesOnScrollUp:()=>l,getPlaceholderTemplate:()=>a});var r=s("./node_modules/lit/html.js"),i=s("./src/headless/index.js");let{CHATROOMS_TYPE:o}=i.constants;function a(e,t){return e instanceof i.MAMPlaceholderMessage?(0,r.html)`<converse-mam-placeholder .model="${e}"></converse-mam-placeholder>`:t}async function l(e){if(!e.model.ui.get("chat-content-spinner-top")&&e.model.messages.length){let t=e.model.get("type")===o,s=e.model.getOldestMessage();if(s){let r=i._converse.session.get("bare_jid"),o=t?e.model.get("jid"):r,a=s.get(`stanza_id ${o}`);e.model.ui.set("chat-content-spinner-top",!0);try{a?await i.u.mam.fetchArchivedMessages(e.model,{before:a}):await i.u.mam.fetchArchivedMessages(e.model,{end:s.get("time")})}catch(t){i.log.error(t),e.model.ui.set("chat-content-spinner-top",!1);return}i.api.settings.get("allow_url_history_change")&&history.pushState(null,"",`#${s.get("msgid")}`),setTimeout(()=>e.model.ui.set("chat-content-spinner-top",!1),250)}}}},"./src/plugins/minimize/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./node_modules/lodash-es/debounce.js"),i=s("./src/headless/index.js"),o=s("./src/plugins/minimize/toggle.js"),a=s("./src/plugins/minimize/utils.js");s("./src/plugins/minimize/view.js"),s("./src/plugins/minimize/minimized-chat.js"),s("./src/plugins/minimize/styles/minimize.scss");let{CHATROOMS_TYPE:l}=i.constants;i.converse.plugins.add("converse-minimize",{dependencies:["converse-chatview","converse-controlbox","converse-muc-views","converse-headlines-view","converse-dragresize"],enabled:e=>"overlayed"===e.api.settings.get("view_mode"),initialize(){i.api.settings.extend({no_trimming:!1}),i.api.promises.add("minimizedChatsInitialized");let e={MinimizedChatsToggle:o.default};Object.assign(i._converse,e),Object.assign(i._converse.exports,e),Object.assign(i._converse,{minimize:{trimChats:a.trimChats,minimize:a.minimize,maximize:a.maximize}}),Object.assign(i._converse.exports,{minimize:{trimChats:a.trimChats,minimize:a.minimize,maximize:a.maximize}}),Object.assign(i.u,{trimChats:a.trimChats,minimize:a.minimize,maximize:a.maximize}),i.api.listen.on("chatBoxViewInitialized",e=>(0,a.trimChats)(e)),i.api.listen.on("chatRoomViewInitialized",e=>(0,a.trimChats)(e)),i.api.listen.on("controlBoxInitialized",e=>(0,a.trimChats)(e)),i.api.listen.on("chatBoxInitialized",a.initializeChat),i.api.listen.on("chatRoomInitialized",a.initializeChat),i.api.listen.on("getHeadingButtons",(e,t)=>e.model.get("type")===l?(0,a.addMinimizeButtonToMUC)(e,t):(0,a.addMinimizeButtonToChat)(e,t));let t=(0,r.default)(()=>(0,a.trimChats)(),250);i.api.listen.on("registeredGlobalEventHandlers",()=>window.addEventListener("resize",t)),i.api.listen.on("unregisteredGlobalEventHandlers",()=>window.removeEventListener("resize",t))}})},"./src/plugins/minimize/minimized-chat.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/plugins/minimize/templates/trimmed_chat.js"),o=s("./src/shared/components/element.js"),a=s("./src/plugins/minimize/utils.js");class l extends o.CustomElement{static get properties(){return{model:{type:Object},title:{type:String},type:{type:String},num_unread:{type:Number}}}constructor(){super(),this.model=null,this.num_unread=null,this.type=null,this.title=null}render(){return(0,i.default)(this)}close(e){e?.preventDefault(),this.model.close()}restore(e){e?.preventDefault(),(0,a.maximize)(this.model)}}r.api.elements.define("converse-minimized-chat",l)},"./src/plugins/minimize/templates/toggle.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");let o=e=>{let t=e.model.where({hidden:!0}),s=t.reduce((e,t)=>e+t.get("num_unread"),0),o=t.reduce((e,t)=>e+ +!!t.get("hidden"),0),a=e.minchats.get("collapsed");return(0,r.html)`<div id="minimized-chats" class="${t.length?"":"hidden"}"><button type="button" class="btn btn-primary" @click="${t=>e.toggle(t)}">${o} ${(0,i.__)("hidden")} <span class="badge bg-secondary unread-message-count ${!s?"hidden":""}">${s}</span></button><div class="flyout minimized-chats-flyout row g-0 ${a?"hidden":""}">${t.map(e=>(0,r.html)`<converse-minimized-chat .model="${e}" title="${e.getDisplayName()}" type="${e.get("type")}" num_unread="${e.get("num_unread")}"></converse-minimized-chat>`)}</div></div>`}},"./src/plugins/minimize/templates/trimmed_chat.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");let o=e=>{let t,s=(0,i.__)("Click to restore this chat");return t="chatroom"===e.type?"var(--muc-color)":"headline"===e.type?"var(--headlines-color)":"var(--chat-color)",(0,r.html)`<div class="chat-head-${e.type} chat-head row g-0"><a class="col-10 restore-chat align-self-center" title="${s}" @click="${t=>e.restore(t)}">${e.num_unread?(0,r.html)`<span class="message-count badge badge-light">${e.num_unread}</span>`:""} ${e.title} </a><a class="col-2 pl-1" @click="${t=>e.close(t)}"><converse-icon color="${t}" class="fas fa-times" @click="${t=>e.close(t)}" size="1em"></converse-icon></a></div>`}},"./src/plugins/minimize/toggle.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js");class i extends r.Model{defaults(){return{collapsed:!1}}}let o=i},"./src/plugins/minimize/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{addMinimizeButtonToChat:()=>c,addMinimizeButtonToMUC:()=>u,initializeChat:()=>a,maximize:()=>h,minimize:()=>m,onMinimizedChanged:()=>f,trimChats:()=>d});var r=s("./src/headless/index.js"),i=s("./src/i18n/index.js");let{ACTIVE:o}=r.constants;function a(e){e.on("change:hidden",()=>f(e)),"controlbox"!==e.get("id")&&e.save({hidden:!!e.get("hidden"),time_minimized:e.get("time_minimized")})}function l(e){if("controlbox"===e.model.get("id"))if(r.u.isVisible(e))return r.u.getOuterWidth(e,!0);else{let e=document.querySelector("converse-controlbox-toggle");return e?r.u.getOuterWidth(e,!0):0}return!e.model.get("hidden")&&r.u.isVisible(e)?r.u.getOuterWidth(e,!0):0}function d(e){if(r.api.settings.get("no_trimming")||"overlayed"!==r.api.settings.get("view_mode"))return;let t=r._converse.state.chatboxviews.filter(e=>!e.model.get("hidden")&&!e.model.get("closed")&&r.u.isVisible(e));if(t.length<=1)return;let s=r.u.getOuterWidth(document.querySelector("body"),!0);if(l(t[0])!==s&&document.querySelector("converse-minimized-chats"))for(;function(){let e=document.querySelector("converse-minimized-chats");return r._converse.state.chatboxes.pluck("hidden").includes(!0)?r.u.getOuterWidth(e,!0):0}()+function(e){let t=e?e.model.get("id"):null,s=e?r.u.getOuterWidth(e,!0):0;return Object.values(r._converse.state.chatboxviews.xget(t)).reduce((e,t)=>e+l(t),s)}(e)>s;){let t=function(e){e.push("controlbox");let t=0,s=r._converse.state.chatboxes.sort().at(t);for(;e.includes(s.get("id"))||!0===s.get("hidden");)if(t++,!(s=r._converse.state.chatboxes.at(t)))return null;return s}([e?e.model.get("id"):null]);if(t){let e=r._converse.state.chatboxes.get(t.get("id"));e?.save("hidden",!0),m(t)}else break}}function c(e,t){let s={a_class:"toggle-chatbox-button",handler:t=>m(t,e.model),i18n_text:(0,i.__)("Minimize"),i18n_title:(0,i.__)("Minimize this chat"),icon_class:"fa-minus",name:"minimize",standalone:"overlayed"===r._converse.api.settings.get("view_mode")},o=t.map(e=>e.name).indexOf("close");return o>-1?[...t.slice(0,o),s,...t.slice(o)]:[s,...t]}function u(e,t){let s={a_class:"toggle-chatbox-button",handler:t=>m(t,e.model),i18n_text:(0,i.__)("Minimize"),i18n_title:(0,i.__)("Minimize this groupchat"),icon_class:"fa-minus",name:"minimize",standalone:"overlayed"===r._converse.api.settings.get("view_mode")},o=t.map(e=>e.name).indexOf("signout");return o>-1?[...t.slice(0,o),s,...t.slice(o)]:[s,...t]}function h(e,t){e?.preventDefault?e.preventDefault():t=e,r.u.safeSave(t,{hidden:!1,time_opened:new Date().getTime()})}function m(e,t){e?.preventDefault?e.preventDefault():t=e,r.u.safeSave(t,{hidden:!0,time_minimized:new Date().toISOString()})}function f(e){e.get("hidden")?r.api.trigger("chatBoxMinimized",e):(e.isScrolledUp()||e.clearUnreadMsgCounter(),e.setChatState(o),r.api.trigger("chatBoxMaximized",e))}},"./src/plugins/minimize/view.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/plugins/minimize/toggle.js"),a=s("./src/plugins/minimize/templates/toggle.js");class l extends i.CustomElement{async initialize(){this.model=r._converse.state.chatboxes,await this.initToggle(),this.listenTo(this.minchats,"change:collapsed",()=>this.requestUpdate()),this.listenTo(this.model,"add",()=>this.requestUpdate()),this.listenTo(this.model,"change:fullname",()=>this.requestUpdate()),this.listenTo(this.model,"change:jid",()=>this.requestUpdate()),this.listenTo(this.model,"change:hidden",()=>this.requestUpdate()),this.listenTo(this.model,"change:name",()=>this.requestUpdate()),this.listenTo(this.model,"change:num_unread",()=>this.requestUpdate()),this.listenTo(this.model,"remove",()=>this.requestUpdate()),this.listenTo(r._converse,"connected",()=>this.requestUpdate()),this.listenTo(r._converse,"reconnected",()=>this.requestUpdate()),this.listenTo(r._converse,"disconnected",()=>this.requestUpdate())}render(){return(0,a.default)(this)}async initToggle(){let e=r._converse.session.get("bare_jid"),t=`converse.minchatstoggle-${e}`;this.minchats=new o.default({id:t}),r.u.initStorage(this.minchats,t,"session"),await new Promise(e=>this.minchats.fetch({success:e,error:e}))}toggle(e){e?.preventDefault(),this.minchats.save({collapsed:!this.minchats.get("collapsed")})}}r.api.elements.define("converse-minimized-chats",l)},"./src/plugins/modal/alert.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/plugins/modal/modal.js"),i=s("./src/plugins/modal/templates/alert.js"),o=s("./src/headless/index.js");class a extends r.default{initialize(){super.initialize(),this.addEventListener("hide.bs.modal",()=>this.remove(),!1)}renderModal(){return(0,i.default)(this.state.toJSON())}getModalTitle(){return this.state.get("title")}}o.api.elements.define("converse-alert-modal",a)},"./src/plugins/modal/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u}),s("./src/plugins/modal/alert.js");var r=s("./src/plugins/modal/confirm.js"),i=s("./node_modules/@converse/skeletor/dist/skeletor.js"),o=s("./src/headless/index.js");let a=[],l={},d={},c={modal:{show(e,t,s){let r;if("string"==typeof e)Object.assign(r=this.get(e)??this.create(e,t),t);else{let s=e.id??t.id;r=this.get(s)??this.create(e,t)}return r.show(s),r},get:e=>l[e]??a.filter(t=>t.id==e).pop(),create(e,t){let s=customElements.get(e);return l[e]=new s(t)},remove(e){let t;"string"==typeof e?(t=l[e],delete l[e]):(t=e,a=a.filter(e=>e!==t)),t?.remove()},removeAll(){a.forEach(e=>e.remove()),a=[],l={}}},async confirm(e,t=[],s=[]){let o;"string"==typeof t&&(t=[t]);let a=new i.Model({title:e,messages:t,fields:s,type:"confirm"}),l=new r.default({state:a});l.show();try{o=await l.confirmation}catch(e){o=!1}return l.remove(),o},async prompt(e,t=[],s=""){let o;"string"==typeof t&&(t=[t]);let a=new i.Model({title:e,messages:t,fields:[{name:"reason",placeholder:s}],type:"prompt"}),l=new r.default({state:a});l.show();try{o=(await l.confirmation).pop()?.value}catch(e){o=!1}return l.remove(),o},alert(e,t,s){let r;"string"==typeof s&&(s=[s]),"error"===e?r="alert-danger":"info"===e?r="alert-info":"warn"===e&&(r="alert-warning");let o=new i.Model({title:t,messages:s,level:r,type:"alert"});c.modal.show("converse-alert-modal",{state:o})},toast:{show(e,t){d[e]=t,o.api.trigger("showToast",t)},get:e=>e?d[e]:Object.keys(d).map(e=>({name:e,...d[e]})),remove(e){delete d[e],o.api.trigger("hideToast")}}},u=c},"./src/plugins/modal/confirm.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),i=s("./src/headless/index.js"),o=s("./src/plugins/modal/modal.js"),a=s("./src/plugins/modal/templates/prompt.js");class l extends o.default{constructor(e){super(e),this.confirmation=(0,r.getOpenPromise)()}initialize(){super.initialize(),this.listenTo(this.state,"change",()=>this.requestUpdate()),this.addEventListener("hide.bs.modal",()=>{this.confirmation.isResolved||this.confirmation.reject()},!1),this.onKeyDown=e=>{e.key===i.constants.KEYCODES.ENTER&&(e.preventDefault(),e.stopPropagation(),this.querySelector("form.confirm button[type=submit]").click())}}connectedCallback(){super.connectedCallback(),this.addEventListener("keydown",this.onKeyDown)}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown),super.disconnectedCallback()}renderModal(){return(0,a.default)(this)}getModalTitle(){return this.state.get("title")}renderModalFooter(){return""}onConfimation(e){e.preventDefault();let t=new FormData(e.target),s=(this.state.get("fields")||[]).map(e=>{let s=t.get(e.name);return e.value=s,e.challenge&&(e.challenge_failed=s!==e.challenge),e});if(s.filter(e=>e.challenge_failed).length){this.state.set("fields",s),this.state.trigger("change");return}this.confirmation.resolve(s),this.modal.hide()}}i.api.elements.define("converse-confirm-modal",l)},"./src/plugins/modal/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js"),i=s("./src/plugins/modal/api.js"),o=s("./src/plugins/modal/modal.js"),a=s("./src/plugins/modal/popover.js"),l=s("./src/plugins/modal/toast.js");s("./src/plugins/modal/modals.js"),s("./src/plugins/modal/toasts.js"),r.converse.plugins.add("converse-modal",{initialize(){r.api.listen.on("clearSession",()=>r.api.modal.removeAll()),Object.assign(r._converse.exports,{BaseModal:o.default,Popover:a.default,Toast:l.default}),Object.assign(r._converse.api,i.default)}})},"./src/plugins/modal/modal.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/bootstrap/js/src/modal.js"),o=s("./node_modules/@converse/openpromise/dist/openpromise.js"),a=s("./node_modules/@converse/skeletor/dist/skeletor.js"),l=s("./src/shared/components/element.js"),d=s("./src/headless/index.js"),c=s("./src/plugins/modal/templates/buttons.js"),u=s("./src/plugins/modal/templates/modal.js");s("./src/plugins/modal/styles/_modal.scss");class h extends l.CustomElement{static get properties(){return{model:{type:a.Model}}}#a;constructor(e){super(),this.model=null,this.state=new a.Model,this.listenTo(this.state,"change",()=>this.requestUpdate()),this.className=d.u.isTestEnv()?"modal":"modal fade",this.tabIndex=-1,this.ariaHidden="true",this.onKeyDown=e=>{"Escape"===e.key&&"false"===this.ariaHidden&&this.close()},this.initialized=(0,o.getOpenPromise)(),Object.assign(this,e),setTimeout(()=>this.insertIntoDOM()),this.addEventListener("shown.bs.modal",()=>{this.ariaHidden="false"}),this.addEventListener("hidden.bs.modal",()=>{this.ariaHidden="true",d.api.modal.remove(this.nodeName.toLowerCase())})}connectedCallback(){super.connectedCallback(),window.addEventListener("keydown",this.onKeyDown)}disconnectedCallback(){window.removeEventListener("resize",this.onKeyDown),super.disconnectedCallback()}get modal(){return this.#a||(this.#a=new i.default(this,{backdrop:!d.u.isTestEnv(),keyboard:!0})),this.#a}initialize(){this.requestUpdate(),this.initialized.resolve()}renderModal(){return""}renderModalFooter(){return(0,r.html)`<div class="modal-footer">${c.modal_close_button}</div>`}render(){return(0,u.default)(this)}getModalTitle(){return""}switchTab(e){e?.stopPropagation(),e?.preventDefault(),this.tab=e.target.getAttribute("data-name"),this.requestUpdate()}close(){this.modal.hide()}insertIntoDOM(){document.querySelector("#converse-modals").insertAdjacentElement("beforeend",this)}alert(e,t="primary",s=!0){this.state.set("alert",{message:e,type:t}),s&&(this.alertTimeout&&clearTimeout(this.alertTimeout),this.alertTimeout=setTimeout(()=>{this.state.set("alert",void 0)},5e3))}async show(){await this.initialized,this.modal.show(),this.requestUpdate()}}let m=h},"./src/plugins/modal/modals.js":function(e,t,s){"use strict";s.r(t),s.d(t,{ModalsContainer:()=>a,default:()=>l});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/shared/components/element.js");class a extends o.CustomElement{render(){return(0,r.html)`<converse-about-modal></converse-about-modal>`}}i.api.elements.define("converse-modals",a);let l=a},"./src/plugins/modal/popover.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/bootstrap/js/src/popover.js"),o=s("./src/headless/index.js"),a=s("./src/shared/components/element.js");s("./src/plugins/modal/styles/popover.scss");class l extends a.CustomElement{static get properties(){return{title:{type:String},text:{type:String}}}constructor(){super(),this.title=null,this.text=null}firstUpdated(e){super.firstUpdated(e),new i.default(this.firstElementChild,{container:"converse-root",trigger:"focus"})}render(){return(0,r.html)`<button type="button" class="btn p-0" data-toggle="popover" data-bs-title="${this.title}" data-bs-content="${this.text}"><converse-icon class="fa fa-info-circle" size="1.2em"></converse-icon></button>`}}o.api.elements.define("converse-popover",l);let d=l},"./src/plugins/modal/templates/alert.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");let i=e=>(0,r.html)`<div class="modal-body"><span class="modal-alert"></span> ${e.messages.map(e=>(0,r.html)`<p>${e}</p>`)}</div>`},"./src/plugins/modal/templates/buttons.js":function(e,t,s){"use strict";s.r(t),s.d(t,{modal_close_button:()=>o,modal_header_close_button:()=>a});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");let o=(0,r.html)`<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">${(0,i.__)("Close")}</button>`,a=(0,r.html)`<button type="button" class="btn d-flex align-items-center justify-content-center" data-bs-dismiss="modal" aria-label="${(0,i.__)("Close")}"><converse-icon size="1.25em" class="fa fa-times"></converse-icon></button>`},"./src/plugins/modal/templates/modal.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/plugins/modal/templates/buttons.js");let o=e=>{var t,s;let o=e.state?.get("alert"),a=e.state?.get("level")??"";return(0,r.html)`<div class="modal-dialog" role="document" role="dialog"><div class="modal-content"><div class="modal-header ${a}"><h5 class="modal-title">${e.getModalTitle()}</h5>${i.modal_header_close_button}</div><div class="modal-body">${o?(t=o.type,s=o.message,(0,r.html)`<div class="alert alert-${t}" role="alert">${s}</div>`):""} ${e.renderModal()}</div>${e.renderModalFooter()}</div></div>`}},"./src/plugins/modal/templates/prompt.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");let o=e=>{let t=e.state.get("messages")?.[0],s=e.state.get("messages")?.slice(1)||[];return(0,r.html)`<form class="converse-form converse-form--modal confirm" action="#" @submit="${t=>e.onConfimation(t)}"><div class="mb-3 lh-base"><strong>${t}</strong></div><div class="mb-3">${s?.map(e=>(0,r.html)`<p>${e}</p>`)}</div>${e.state.get("fields")?.map(e=>"checkbox"===e.type?(0,r.html)`<div class="form-check"><input name="${e.name}" class="form-check-input" type="checkbox" id="${e.name}"> <label class="form-check-label" for="${e.name}">${e.label}</label></div>`:(0,r.html)`<div class="mb-3"><label class="form-label" for="${e.name}">${e.label||""}</label> <input type="text" name="${e.name}" class="${e.challenge_failed?"is-invalid":""} form-control" ?required="${e.required}" placeholder="${e.placeholder}" id="${e.name}"> ${e.challenge_failed?(0,r.html)`<div class="invalid-feedback">Please provide a valid input.</div>`:""}</div>`)}<div class="d-flex justify-content-end"><button type="submit" class="btn btn-primary me-2">${(0,i.__)("Confirm")}</button> <input type="button" class="btn btn-secondary" data-bs-dismiss="modal" value="${(0,i.__)("Cancel")}"></div></form>`}},"./src/plugins/modal/toast.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),a=s("./src/shared/components/element.js");s("./src/plugins/modal/styles/toast.scss");class l extends a.CustomElement{static get properties(){return{type:{type:String},name:{type:String},title:{type:String},body:{type:String}}}constructor(){super(),this.name="",this.body="",this.header="",this.type="info"}updated(e){"danger"!==e.get("type")?this.timeoutId=setTimeout(()=>this.hide(),5e3):clearTimeout(this.timeoutId)}render(){return(0,r.html)`<div class="toast show text-bg-${this.type??"info"}" role="alert" aria-live="assertive" aria-atomic="true">${this.title?(0,r.html)`<div class="toast-header"><img src="/logo/conversejs-filled.svg" class="rounded me-2" alt="${(0,o.__)("Converse logo")}"> <strong class="me-auto">${this.title??""}</strong> <button @click="${this.hide}" type="button" class="btn-close" aria-label="${(0,o.__)("Close")}"></button></div>`:""} ${this.body?(0,r.html)`<div class="d-flex justify-content-between toast-body__container"><div class="toast-body w-100">${this.body??""}</div>${!this.title?(0,r.html)`<button @click="${this.hide}" type="button" class="btn centered" aria-label="${(0,o.__)("Close")}"><converse-icon size="1em" class="fa fa-times"></converse-icon></button>`:""}</div>`:""}</div>`}hide(e){e?.preventDefault(),i.api.toast.remove(this.name)}}i.api.elements.define("converse-toast",l)},"./src/plugins/modal/toasts.js":function(e,t,s){"use strict";s.r(t),s.d(t,{ToastsContainer:()=>a,default:()=>l});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/shared/components/element.js");class a extends o.CustomElement{initialize(){super.initialize(),i.api.listen.on("showToast",()=>this.requestUpdate()),i.api.listen.on("hideToast",()=>this.requestUpdate())}render(){let e=i.api.toast.get();return(0,r.html)`${e.map(e=>(0,r.html)`<converse-toast name="${e.name}" title="${e.title??""}" body="${e.body??""}" type="${e.type??""}"></converse-toast>`)}`}}i.api.elements.define("converse-toasts",a);let l=a},"./src/plugins/muc-views/affiliation-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./src/headless/index.js"),i=s("./src/i18n/index.js"),o=s("./src/shared/components/element.js"),a=s("./src/plugins/muc-views/templates/affiliation-form.js");s("./src/plugins/muc-views/styles/affiliation-form.scss");let{Strophe:l,sizzle:d}=r.converse.env;class c extends o.CustomElement{static get properties(){return{muc:{type:Object},jid:{type:String},affiliation:{type:String},alert_message:{type:String,attribute:!1},alert_type:{type:String,attribute:!1}}}constructor(){super(),this.jid=null,this.muc=null,this.affiliation=null}render(){return(0,a.default)(this)}alert(e,t){this.alert_message=e,this.alert_type=t}async assignAffiliation(e){e.stopPropagation(),e.preventDefault(),this.alert();let t=new FormData(e.target),s=t.get("affiliation"),o={jid:this.jid,reason:t.get("reason")},a=this.muc.get("jid");try{await r.u.muc.setAffiliation(s,a,[o])}catch(e){null===e?this.alert((0,i.__)("Timeout error while trying to set the affiliation"),"danger"):d(`not-allowed[xmlns="${l.NS.STANZAS}"]`,e).length?this.alert((0,i.__)("Sorry, you're not allowed to make that change"),"danger"):this.alert((0,i.__)("Sorry, something went wrong while trying to set the affiliation"),"danger"),r.log.error(e);return}await this.muc.occupants.fetchMembers();let c=new CustomEvent("affiliationChanged",{bubbles:!0});this.dispatchEvent(c)}}r.api.elements.define("converse-muc-affiliation-form",c);let u=c},"./src/plugins/muc-views/bottom-panel.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a}),s("./src/shared/autocomplete/index.js");var r=s("./src/plugins/chatview/bottom-panel.js"),i=s("./src/plugins/muc-views/templates/muc-bottom-panel.js"),o=s("./src/headless/index.js");s("./src/plugins/muc-views/styles/muc-bottom-panel.scss");class a extends r.default{async initialize(){await super.initialize(),this.listenTo(this.model,"change:hidden_occupants",()=>this.requestUpdate()),this.listenTo(this.model,"change:num_unread_general",()=>this.requestUpdate()),this.listenTo(this.model.features,"change:moderated",()=>this.requestUpdate()),this.listenTo(this.model.occupants,"add",this.renderIfOwnOccupant),this.listenTo(this.model.occupants,"change:role",this.renderIfOwnOccupant),this.listenTo(this.model.session,"change:connection_status",()=>this.requestUpdate())}render(){return this.model?(0,i.default)(this):""}renderIfOwnOccupant(e){let t=o._converse.session.get("bare_jid");e.get("jid")===t&&this.requestUpdate()}sendButtonClicked(e){if(e.delegateTarget?.dataset.action==="sendMessage"){let t=this.querySelector("converse-muc-message-form");t?.onFormSubmitted(e)}}}o.api.elements.define("converse-muc-bottom-panel",a)},"./src/plugins/muc-views/chatarea.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),i=s("./src/i18n/index.js"),o=s("./src/shared/components/element.js"),a=s("./src/shared/constants.js"),l=s("./src/plugins/muc-views/templates/muc-chatarea.js");class d extends o.CustomElement{static get properties(){return{jid:{type:String},show_help_messages:{type:Boolean},type:{type:String}}}constructor(){super(),this.jid=null,this.type=null,this.split=null,this.viewportMediaQuery=window.matchMedia(`(max-width: ${a.MOBILE_CUTOFF}px)`)}async initialize(){this.model=await r.api.rooms.get(this.jid),this.listenTo(this.model,"change:show_help_messages",()=>this.requestUpdate()),this.listenTo(this.model,"change:hidden_occupants",()=>this.requestUpdate()),this.listenTo(this.model.session,"change:connection_status",()=>this.requestUpdate()),this.#l(),this.requestUpdate()}render(){return this.model?(0,l.default)(this):""}updated(e){super.updated(e),e.has("jid")&&this.model&&this.jid!==this.model.get("jid")&&(this.stopListening(),this.initialize())}#l(e){!this.model?.get("hidden_occupants")&&(e?e.matches:this.viewportMediaQuery.matches)&&this.model?.save("hidden_occupants",!0)}connectedCallback(){super.connectedCallback(),this.hideSidebarIfSmallViewport=this.#l.bind(this),this.viewportMediaQuery.addEventListener("change",this.hideSidebarIfSmallViewport)}disconnectedCallback(){super.disconnectedCallback(),this.viewportMediaQuery?.removeEventListener("change",this.hideSidebarIfSmallViewport)}shouldShowSidebar(){return!this.model.get("hidden_occupants")&&this.model.session.get("connection_status")===r.converse.ROOMSTATUS.ENTERED}getHelpMessages(){let e=r.api.settings.get("muc_disable_slash_commands"),t=Array.isArray(e)?e:[];return[`<strong>/admin</strong>: ${(0,i.__)("Change user's affiliation to admin")}`,`<strong>/ban</strong>: ${(0,i.__)("Ban user by changing their affiliation to outcast")}`,`<strong>/clear</strong>: ${(0,i.__)("Clear the chat area")}`,`<strong>/close</strong>: ${(0,i.__)("Close this groupchat")}`,`<strong>/deop</strong>: ${(0,i.__)("Change user role to participant")}`,`<strong>/destroy</strong>: ${(0,i.__)("Remove this groupchat")}`,`<strong>/help</strong>: ${(0,i.__)("Show this menu")}`,`<strong>/kick</strong>: ${(0,i.__)("Kick user from groupchat")}`,`<strong>/me</strong>: ${(0,i.__)("Write in 3rd person")}`,`<strong>/member</strong>: ${(0,i.__)("Grant membership to a user")}`,`<strong>/modtools</strong>: ${(0,i.__)("Opens up the moderator tools GUI")}`,`<strong>/mute</strong>: ${(0,i.__)("Remove user's ability to post messages")}`,`<strong>/nick</strong>: ${(0,i.__)("Change your nickname")}`,`<strong>/op</strong>: ${(0,i.__)("Grant moderator role to user")}`,`<strong>/owner</strong>: ${(0,i.__)("Grant ownership of this groupchat")}`,`<strong>/register</strong>: ${(0,i.__)("Register your nickname")}`,`<strong>/revoke</strong>: ${(0,i.__)("Revoke the user's current affiliation")}`,`<strong>/subject</strong>: ${(0,i.__)("Set groupchat subject")}`,`<strong>/topic</strong>: ${(0,i.__)("Set groupchat subject (alias for /subject)")}`,`<strong>/voice</strong>: ${(0,i.__)("Allow muted user to post messages")}`].filter(e=>t.every(t=>!e.startsWith(t+"<",9))).filter(e=>this.model.getAllowedCommands().some(t=>e.startsWith(t+"<",9)))}}r.api.elements.define("converse-muc-chatarea",d)},"./src/plugins/muc-views/destroyed.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/plugins/muc-views/templates/muc-destroyed.js"),i=s("./src/shared/components/element.js"),o=s("./src/headless/index.js");class a extends i.CustomElement{constructor(){super(),this.jid=null}static get properties(){return{jid:{type:String}}}connectedCallback(){super.connectedCallback(),this.model=o._converse.state.chatboxes.get(this.jid)}render(){let e=this.model.get("destroyed_reason"),t=this.model.get("moved_jid");return(0,r.default)({moved_jid:t,reason:e,onSwitch:e=>this.onSwitch(e)})}async onSwitch(e){e.preventDefault();let t=this.model.get("moved_jid");(await o.api.rooms.get(t,{},!0)).maybeShow(!0),this.model.destroy()}}o.api.elements.define("converse-muc-destroyed",a)},"./src/plugins/muc-views/disconnected.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/plugins/muc-views/templates/muc-disconnect.js"),i=s("./src/shared/components/element.js"),o=s("./src/i18n/index.js"),a=s("./src/headless/index.js");class l extends i.CustomElement{constructor(){super(),this.jid=null}static get properties(){return{jid:{type:String}}}connectedCallback(){super.connectedCallback(),this.model=a._converse.state.chatboxes.get(this.jid)}render(){let e=this.model.session.get("disconnection_message");if(!e)return;let t=[e],s=this.model.session.get("disconnection_actor");s&&t.push((0,o.__)("This action was done by %1$s.",s));let i=this.model.session.get("disconnection_reason");return i&&t.push((0,o.__)('The reason given is: "%1$s".',i)),(0,r.default)(t)}}a.api.elements.define("converse-muc-disconnected",l)},"./src/plugins/muc-views/heading.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js");s("./src/plugins/muc-views/modals/config.js"),s("./src/plugins/muc-views/modals/muc-details.js"),s("./src/plugins/muc-views/modals/nickname.js");var i=s("./src/shared/components/element.js"),o=s("./src/i18n/index.js"),a=s("./src/plugins/muc-views/utils.js"),l=s("./src/plugins/muc-views/templates/muc-head.js");s("./src/plugins/muc-views/styles/muc-head.scss");class d extends i.CustomElement{async initialize(){let{chatboxes:e}=r._converse.state;this.model=e.get(this.getAttribute("jid")),this.listenTo(this.model,"change",()=>this.requestUpdate()),this.listenTo(this.model,"vcard:add",()=>this.requestUpdate()),this.listenTo(this.model,"vcard:change",()=>this.requestUpdate()),this.user_settings=await r._converse.api.user.settings.getModel(),this.listenTo(this.user_settings,"change:mucs_with_hidden_subject",()=>this.requestUpdate()),await this.model.initialized;let t=this.model.occupants.findOccupant({jid:r._converse.session.get("bare_jid")});t&&this.updateIfOwnOccupant(t),this.listenTo(this.model.occupants,"add",this.updateIfOwnOccupant),this.listenTo(this.model.occupants,"change:affiliation",this.updateIfOwnOccupant),this.listenTo(this.model.occupants,"change:role",this.updateIfOwnOccupant),this.listenTo(this.model.session,"change:connection_status",()=>this.requestUpdate()),this.requestUpdate()}render(){return this.model?(0,l.default)(this):""}updateIfOwnOccupant(e){let t=r._converse.session.get("bare_jid");e.get("jid")===t&&this.requestUpdate()}showRoomDetailsModal(e){e.preventDefault(),r.api.modal.show("converse-muc-details-modal",{model:this.model},e)}showNicknameModal(e){e.preventDefault(),r.api.modal.show("converse-muc-nickname-modal",{model:this.model},e)}toggleTopic(e){e?.preventDefault?.(),this.model.toggleSubjectHiddenState()}toggleOccupants(e){e?.preventDefault?.(),e?.stopPropagation?.(),this.model.save({hidden_occupants:!this.model.get("hidden_occupants")})}showConfigModal(e){e.preventDefault(),r.api.modal.show("converse-muc-config-modal",{model:this.model},e)}close(e){e.preventDefault(),this.model.close()}destroy(e){e.preventDefault(),(0,a.destroyMUC)(this.model)}getHeadingButtons(e){let t=[];t.push({i18n_text:(0,o.__)("Details"),i18n_title:(0,o.__)("Show more information about this groupchat"),handler:e=>this.showRoomDetailsModal(e),a_class:"show-muc-details-modal",icon_class:"fa-info-circle",name:"details"}),"owner"===this.model.getOwnAffiliation()&&t.push({i18n_text:(0,o.__)("Configure"),i18n_title:(0,o.__)("Configure this groupchat"),handler:e=>this.showConfigModal(e),a_class:"configure-chatroom-button",icon_class:"fa-wrench",name:"configure"}),t.push({i18n_text:(0,o.__)("Nickname"),i18n_title:(0,o.__)("Change the nickname you're using in this groupchat"),handler:e=>this.showNicknameModal(e),a_class:"open-nickname-modal",icon_class:"fa-smile",name:"nickname"});let s=this.model.get("subject");if(s&&s.text&&t.push({i18n_text:e?(0,o.__)("Show topic"):(0,o.__)("Hide topic"),i18n_title:e?(0,o.__)("Show the topic message in the heading"):(0,o.__)("Hide the topic in the heading"),handler:e=>this.toggleTopic(e),a_class:"hide-topic",icon_class:"fa-minus-square",name:"toggle-topic"}),t.push({i18n_text:this.model.get("hidden_occupants")?(0,o.__)("Show participants"):(0,o.__)("Hide participants"),i18n_title:this.model.get("hidden_occupants")?(0,o.__)("Show the groupchat participants"):(0,o.__)("Hide the groupchat participants"),handler:e=>this.toggleOccupants(e),icon_class:"fa-users"}),this.model.session.get("connection_status")===r.converse.ROOMSTATUS.ENTERED){let e=this.model.getAllowedCommands();e.includes("modtools")&&t.push({i18n_text:(0,o.__)("Moderate"),i18n_title:(0,o.__)("Moderate this groupchat"),handler:()=>(0,a.showModeratorToolsModal)(this.model),a_class:"moderate-chatroom-button",icon_class:"fa-user-cog",name:"moderate"}),e.includes("destroy")&&t.push({i18n_text:(0,o.__)("Destroy"),i18n_title:(0,o.__)("Remove this groupchat"),handler:e=>this.destroy(e),a_class:"destroy-chatroom-button",icon_class:"fa-trash",name:"destroy"})}r.api.settings.get("singleton")||t.push({i18n_text:(0,o.__)("Leave"),i18n_title:(0,o.__)("Leave and close this groupchat"),handler:async e=>{e.stopPropagation();let t=[(0,o.__)("Are you sure you want to leave this groupchat?")];await r.api.confirm((0,o.__)("Confirm"),t)&&this.close(e)},a_class:"close-chatbox-button",standalone:"overlayed"===r.api.settings.get("view_mode"),icon_class:"fa-sign-out-alt",name:"signout"});let{chatboxviews:i}=r._converse.state,l=i.get(this.getAttribute("jid"));return l?r._converse.api.hook("getHeadingButtons",l,t):Promise.resolve(t)}}r.api.elements.define("converse-muc-heading",d)},"./src/plugins/muc-views/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js");s("./src/plugins/chatboxviews/index.js"),s("./src/plugins/muc-views/affiliation-form.js"),s("./src/plugins/muc-views/role-form.js");var i=s("./src/plugins/muc-views/muc.js"),o=s("./src/plugins/muc-views/utils.js");s("./src/plugins/muc-views/styles/index.scss");let{Strophe:a}=r.converse.env,{CHATROOMS_TYPE:l}=r.constants;r.converse.MUC.VIEWS={CONFIG:"config-form"},r.converse.plugins.add("converse-muc-views",{dependencies:["converse-modal","converse-dragresize","converse-controlbox","converse-chatview"],initialize(){let{_converse:e}=this;r.api.settings.extend({auto_list_rooms:!1,cache_muc_messages:!0,locked_muc_nickname:!1,modtools_disable_query:[],muc_disable_slash_commands:!1,muc_mention_autocomplete_filter:"contains",muc_mention_autocomplete_min_chars:0,muc_mention_autocomplete_show_avatar:!0,muc_roomid_policy:null,muc_roomid_policy_hint:null,muc_search_service:"api@search.jabber.network",roomconfig_whitelist:[],show_retraction_warning:!0});let t={ChatRoomView:i.default,MUCView:i.default};Object.assign(e,t),Object.assign(e.exports,t),r.api.settings.get("muc_domain")||r.api.listen.on("serviceDiscovered",async e=>{e?.get("var")===a.NS.MUC&&!e.entity.get("jid").includes("@")&&await e.entity.getIdentity("conference","text")&&r.api.settings.set("muc_domain",a.getDomainFromJid(e.get("from")))}),r.api.listen.on("clearsession",()=>{let t=e.chatboxviews.get("controlbox");t&&t.roomspanel&&(t.roomspanel.model.destroy(),t.roomspanel.remove(),delete t.roomspanel)}),r.api.listen.on("chatBoxClosed",e=>{e.get("type")===l&&(0,o.clearHistory)(e.get("jid"))}),r.api.listen.on("parseMessageForCommands",o.parseMessageForMUCCommands),r.api.listen.on("confirmDirectMUCInvitation",o.confirmDirectMUCInvitation)}})},"./src/plugins/muc-views/message-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/shared/autocomplete/utils.js"),i=s("./src/headless/index.js"),o=s("./src/shared/autocomplete/autocomplete.js"),a=s("./src/plugins/chatview/message-form.js"),l=s("./src/plugins/muc-views/utils.js"),d=s("./src/plugins/muc-views/templates/message-form.js");class c extends a.default{async initialize(){super.initialize(),await this.model.initialized,this.initMentionAutoComplete()}render(){return(0,d.default)(this)}shouldAutoComplete(){let e=this.model instanceof i.MUCOccupant?this.model.collection.chatroom:this.model;return e?e.session.get("connection_status")===i.converse.ROOMSTATUS.ENTERED&&!(e.features.get("moderated")&&"visitor"===e.getOwnRole()):(i.log.debug("Could not determine MUC for MUCMessageForm element"),!1)}initMentionAutoComplete(){this.auto_complete=new o.default(this,{auto_first:!0,min_chars:i.api.settings.get("muc_mention_autocomplete_min_chars"),match_current_word:!0,list:()=>this.getAutoCompleteList(),filter:"contains"==i.api.settings.get("muc_mention_autocomplete_filter")?r.FILTER_CONTAINS:r.FILTER_STARTSWITH,ac_triggers:["Tab","@"],include_triggers:[],item:(e,t)=>(0,l.getAutoCompleteListItem)(this.model,e,t)}),this.auto_complete.on("suggestion-box-selectcomplete",()=>this.auto_completing=!1)}getAutoCompleteList(){return this.model.getAllKnownNicknames().map(e=>({label:e,value:`@${e}`}))}onKeyDown(e){this.shouldAutoComplete()&&this.auto_complete.onKeyDown(e)||super.onKeyDown(e)}onKeyUp(e){this.shouldAutoComplete()&&this.auto_complete.auto_completing&&this.auto_complete.evaluate(e),super.onKeyUp(e)}}i.api.elements.define("converse-muc-message-form",c)},"./src/plugins/muc-views/modals/add-muc.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/headless/index.js"),i=s("./src/plugins/modal/modal.js"),o=s("./src/plugins/muc-views/modals/templates/add-muc.js"),a=s("./src/i18n/index.js");s("./src/plugins/muc-views/styles/add-muc-modal.scss");let l=r.converse.env.utils,{Strophe:d}=r.converse.env;class c extends i.default{initialize(){super.initialize(),this.requestUpdate(),this.addEventListener("shown.bs.modal",()=>{this.querySelector('input[name="chatroom"]')?.focus()},!1)}renderModal(){return(0,o.default)(this)}getModalTitle(){return(0,a.__)("Enter a new Groupchat")}parseRoomDataFromEvent(e){let t,s=new FormData(e),i=s.get("chatroom")?.trim();if(r.api.settings.get("locked_muc_nickname")){if(!(t=r._converse.exports.getDefaultMUCNickname()))throw Error("Using locked_muc_nickname but no nickname found!")}else t=s.get("nickname").trim();return{jid:i,nick:t}}normalizeNode(e){return e.trim().replace(/\s+/g,"-").replace(/\u0142/g,"l").replace(/[^\x00-\x7F]/g,e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")).replace(/[^a-zA-Z0-9-]/g,"-").replace(/-+/g,"-").replace(/[^a-zA-Z0-9]$/g,"").toLowerCase()}async openChatRoom(e){let t;e.preventDefault();let s=this.querySelector("converse-autocomplete");if((await s.onChange()).error_message)return;let{escapeNode:i,getNodeFromJid:o,getDomainFromJid:a}=d,c=e.target,u=this.parseRoomDataFromEvent(c),h={nick:u.nick??void 0};if(r.api.settings.get("locked_muc_domain")||!l.isValidJID(u.jid)){let e=await l.muc.getDefaultMUCService();e&&(h.name=u.jid,h.auto_configure=!0,h.roomconfig={roomname:u.jid},t=`${this.normalizeNode(u.jid)}@${e}`.toLowerCase())}t||(t=`${i(o(u.jid))}@${a(u.jid)}`.toLowerCase()),r.api.rooms.open(t,{...h,jid:t},!0),c.reset(),this.modal.hide()}async validateMUCJID(e){if(0===e.length)return(0,a.__)("Invalid groupchat address, it cannot be empty.");if(e.split("/").length-1>0)return(0,a.__)("Invalid groupchat address, a forward slash is not allowed.");if(e.split("@").length-1>1)return(0,a.__)("Invalid groupchat address, more than one @ sign is not allowed.");if(e.startsWith("@")||e.endsWith("@"))return(0,a.__)("Invalid groupchat address, it cannot start or end with an @ sign.");if(!e.includes("@")&&!await l.muc.getDefaultMUCService())return(0,a.__)("No default groupchat service found. You'll need to specify the full address, for example room@conference.example.org");let t=r.api.settings.get("muc_roomid_policy");if(t&&r.api.settings.get("muc_domain")){(r.api.settings.get("locked_muc_domain")||!l.isValidJID(e))&&(e=`${d.escapeNode(e)}@${r.api.settings.get("muc_domain")}`);let s=d.getNodeFromJid(e),i=d.getDomainFromJid(e);if(r.api.settings.get("muc_domain")===i&&!t.test(s))return(0,a.__)("Groupchat id is invalid.")}return""}}r.api.elements.define("converse-add-muc-modal",c)},"./src/plugins/muc-views/modals/config.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./src/headless/index.js"),i=s("./src/plugins/muc-views/modals/templates/muc-config.js"),o=s("./src/plugins/modal/modal.js"),a=s("./src/i18n/index.js"),l=s("./src/utils/file.js");let{sizzle:d,u:c}=r.converse.env;class u extends o.default{constructor(e){super(e),this.id="converse-muc-config-modal"}initialize(){super.initialize(),this.addListeners()}addListeners(){this.listenTo(this.model,"change",()=>this.requestUpdate()),this.listenTo(this.model.features,"change:passwordprotected",()=>this.requestUpdate()),this.listenTo(this.model.session,"change:config_stanza",()=>this.requestUpdate())}renderModal(){return(0,i.default)(this)}shouldUpdate(e){return e.has("model")&&this.model&&(this.stopListening(),this.addListeners(),this.getConfig()),!0}getModalTitle(){return(0,a.__)("Configure %1$s",this.model.getDisplayName())}async getConfig(){let e=await this.model.fetchRoomConfiguration();this.model.session.set("config_stanza",e.outerHTML)}async setAvatar(e){if(!this.model.features.get("vcard-temp"))return;let t=new FormData(e.target).get("avatar_image");if(t?.size){let e=l.isImageWithAlphaChannel?t:await (0,l.compressImage)(t),s=new FileReader;s.onloadend=async()=>{let e={image:btoa(s.result),image_type:t.type};await r.api.vcard.set(this.model.get("jid"),e)},s.readAsBinaryString(e)}}async submitConfigForm(e){e.preventDefault();let t=d(':input:not([type=button]):not([type=submit]):not([name="avatar_image"][type="file"])',e.target).map(c.webForm2xForm).filter(e=>e);try{await this.model.sendConfiguration(t)}catch(t){r.log.error(t);let e=(0,a.__)("Sorry, an error occurred while trying to submit the config form.")+" "+(0,a.__)("Check your browser's developer console for details.");r.api.alert("error",(0,a.__)("Error"),e)}try{await this.setAvatar(e)}catch(e){r.log.fatal(e),this.alert([(0,a.__)("Sorry, an error happened while trying to save the groupchat avatar."),(0,a.__)("You can check your browser's developer console for any error output.")].join(" "));return}await this.model.refreshDiscoInfo(),this.modal.hide()}}r.api.elements.define("converse-muc-config-modal",u)},"./src/plugins/muc-views/modals/moderator-tools.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l}),s("./src/plugins/muc-views/modtools.js");var r=s("./src/plugins/modal/modal.js"),i=s("./src/i18n/index.js"),o=s("./src/headless/index.js"),a=s("./node_modules/lit/index.js");class l extends r.default{constructor(e){super(e),this.id="converse-modtools-modal",this.affiliation=e.affiliation,this.jid=e.jid}renderModal(){return(0,a.html)`<converse-modtools jid="${this.jid}" affiliation="${this.affiliation}"></converse-modtools>`}getModalTitle(){return(0,i.__)("Moderator Tools")}}o.api.elements.define("converse-modtools-modal",l)},"./src/plugins/muc-views/modals/muc-details.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/plugins/modal/modal.js"),i=s("./src/plugins/muc-views/modals/templates/muc-details.js"),o=s("./src/i18n/index.js"),a=s("./src/headless/index.js");s("./src/plugins/muc-views/styles/muc-details-modal.scss");class l extends r.default{initialize(){super.initialize(),this.listenTo(this.model,"change",()=>this.requestUpdate()),this.listenTo(this.model.features,"change",()=>this.requestUpdate()),this.listenTo(this.model.occupants,"add",()=>this.requestUpdate()),this.listenTo(this.model.occupants,"change",()=>this.requestUpdate())}renderModal(){return(0,i.default)(this.model)}getModalTitle(){return(0,o.__)("Groupchat info")}}a.api.elements.define("converse-muc-details-modal",l)},"./src/plugins/muc-views/modals/muc-invite.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),i=s("./src/plugins/modal/modal.js");s("./src/shared/autocomplete/index.js");var o=s("./src/plugins/muc-views/modals/templates/muc-invite.js"),a=s("./src/i18n/index.js");let l=r.converse.env.utils;class d extends i.default{constructor(e){super(e),this.id="converse-muc-invite-modal",this.muc=e.muc}renderModal(){return(0,o.default)(this)}getModalTitle(){return(0,a.__)("Invite someone to this groupchat")}getAutoCompleteList(){return r._converse.state.roster.map(e=>({label:e.getDisplayName(),value:e.get("jid")}))}submitInviteForm(e){e.preventDefault();let t=new FormData(e.target),s=t.get("invitee_jids")?.trim(),r=t.get("reason");l.isValidJID(s)?(this.muc.directInvite(s,r),this.modal.hide()):this.state.set({invalid_invite_jid:!0})}}r.api.elements.define("converse-muc-invite-modal",d)},"./src/plugins/muc-views/modals/muc-list.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>f});var r=s("./src/plugins/modal/modal.js"),i=s("./src/plugins/muc-views/templates/muc-description.js"),o=s("./src/plugins/muc-views/templates/muc-list.js"),a=s("./src/templates/spinner.js"),l=s("./src/i18n/index.js"),d=s("./src/headless/index.js");let{Strophe:c,$iq:u,sizzle:h}=d.converse.env,{getAttributes:m}=d.u;class f extends r.default{constructor(e){super(e),this.items=[],this.loading_items=!1}initialize(){super.initialize(),this.listenTo(this.model,"change:muc_domain",this.onDomainChange),this.listenTo(this.model,"change:feedback_text",()=>this.requestUpdate()),this.addEventListener("shown.bs.modal",()=>d.api.settings.get("locked_muc_domain")&&this.updateRoomsList()),this.model.save("feedback_text","")}renderModal(){return(0,o.default)(Object.assign(this.model.toJSON(),{show_form:!d.api.settings.get("locked_muc_domain"),server_placeholder:this.model.get("muc_domain")||(0,l.__)("conference.example.org"),items:this.items,loading_items:this.loading_items,openRoom:e=>this.openRoom(e),setDomainFromEvent:e=>this.setDomainFromEvent(e),submitForm:e=>this.showRooms(e),toggleRoomInfo:e=>this.toggleRoomInfo(e)}))}getModalTitle(){return(0,l.__)("Query for Groupchats")}openRoom(e){e.preventDefault();let t=e.target,s=t.getAttribute("data-room-jid"),r=t.getAttribute("data-room-name");this.modal.hide(),d.api.rooms.open(s,{name:r},!0)}toggleRoomInfo(e){e.preventDefault();let t=d.u.ancestor(e.target,".room-item"),s=t.querySelector("div.room-info");s?(d.u.slideIn(s).then(d.u.removeElement),t.querySelector("a.room-info").classList.remove("selected")):(t.insertAdjacentElement("beforeend",d.u.getElementFromTemplateResult((0,a.default)())),d.api.disco.info(e.target.getAttribute("data-room-jid"),null).then(e=>{t.querySelector("span.spinner").remove(),t.querySelector("a.room-info").classList.add("selected"),t.insertAdjacentHTML("beforeend",d.u.getElementFromTemplateResult((0,i.default)({jid:e.getAttribute("from"),desc:h('field[var="muc#roominfo_description"] value',e).shift()?.textContent,occ:h('field[var="muc#roominfo_occupants"] value',e).shift()?.textContent,hidden:h('feature[var="muc_hidden"]',e).length,membersonly:h('feature[var="muc_membersonly"]',e).length,moderated:h('feature[var="muc_moderated"]',e).length,nonanonymous:h('feature[var="muc_nonanonymous"]',e).length,open:h('feature[var="muc_open"]',e).length,passwordprotected:h('feature[var="muc_passwordprotected"]',e).length,persistent:h('feature[var="muc_persistent"]',e).length,publicroom:h('feature[var="muc_publicroom"]',e).length,semianonymous:h('feature[var="muc_semianonymous"]',e).length,temporary:h('feature[var="muc_temporary"]',e).length,unmoderated:h('feature[var="muc_unmoderated"]',e).length})))}).catch(e=>d.log.error(e)))}onDomainChange(){d.api.settings.get("auto_list_rooms")&&this.updateRoomsList()}onRoomsFound(e){this.loading_items=!1;let t=e?h("query item",e):[];return t.length?(this.model.set({feedback_text:(0,l.__)("Groupchats found")},{silent:!0}),this.items=t.map(m)):(this.items=[],this.model.set({feedback_text:(0,l.__)("No groupchats found")},{silent:!0})),this.requestUpdate(),!0}updateRoomsList(){let e=u({to:this.model.get("muc_domain"),from:d.api.connection.get().jid,type:"get"}).c("query",{xmlns:c.NS.DISCO_ITEMS});d.api.sendIQ(e).then(e=>this.onRoomsFound(e)).catch(()=>this.onRoomsFound())}showRooms(e){e.preventDefault(),this.loading_items=!0,this.requestUpdate();let t=new FormData(e.target);this.model.setDomain(t.get("server")),this.updateRoomsList()}setDomainFromEvent(e){this.model.setDomain(e.target.value)}setNick(e){this.model.save({nick:e.target.value})}}d.api.elements.define("converse-muc-list-modal",f)},"./src/plugins/muc-views/modals/nickname.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),a=s("./src/plugins/modal/modal.js");class l extends a.default{renderModal(){return(0,r.html)`<converse-muc-nickname-form jid="${this.model.get("jid")}"></converse-muc-nickname-form>`}getModalTitle(){return(0,o.__)("Change your nickname")}}i.api.elements.define("converse-muc-nickname-modal",l)},"./src/plugins/muc-views/modals/occupant.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),a=s("./src/plugins/modal/modal.js"),l=s("./src/plugins/muc-views/modals/templates/occupant.js");let{u:d}=i.converse.env;class c extends a.default{constructor(e){super(),this.message=e.message,this.addEventListener("affiliationChanged",()=>this.alert((0,o.__)("Affiliation changed"))),this.addEventListener("roleChanged",()=>this.alert((0,o.__)("role changed")))}initialize(){super.initialize();let e=this.model??this.message;this.listenTo(e,"change",()=>this.requestUpdate()),i.api.trigger("occupantModalInitialized",{model:this.model,message:this.message})}renderModal(){return(0,l.default)(this)}openChat(e){e.preventDefault(),i.api.chats.open(this.model.get("jid"),{},!0),this.close()}getVcard(){let e=this.model??this.message;if(e.vcard)return e.vcard;let t=e?.get("jid")||e?.get("from");return t?i._converse.state.vcards.get(t):null}getModalTitle(){let e=this.model??this.message;return e?.getDisplayName()}addToContacts(){let e=(this.model??this.message).get("jid");e&&i.api.modal.show("converse-add-contact-modal",{state:new r.Model({jid:e})})}toggleForm(e){"row-form"===d.ancestor(e.target,".toggle-form").getAttribute("data-form")?this.show_role_form=!this.show_role_form:this.show_affiliation_form=!this.show_affiliation_form,this.requestUpdate()}}i.api.elements.define("converse-muc-occupant-modal",c)},"./src/plugins/muc-views/modals/templates/add-muc.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/dompurify/dist/purify.es.mjs"),i=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js"),a=s("./node_modules/lit/directives/unsafe-html.js"),l=s("./src/plugins/muc-views/search.js"),d=s("./src/i18n/index.js");let c=()=>{let e=(0,d.__)("Nickname"),t=(0,d.__)("This field is required");return(0,o.html)`<div class="mb-3"><label for="nickname" class="form-label">${e}:</label> <input type="text" title="${t}" required name="nickname" value="${i._converse.exports.getDefaultMUCNickname()||""}" class="form-control"></div>`},u=e=>{let t,s=(0,d.__)("Join");t=i.api.settings.get("locked_muc_domain")?(0,d.__)("Groupchat name"):(0,d.__)("Groupchat name or address");let u=i.api.settings.get("muc_roomid_policy_hint"),h=i.api.settings.get("muc_search_service");return(0,o.html)`<form class="converse-form add-chatroom needs-validation" @submit="${t=>e.openChatRoom(t)}" novalidate><div class="mb-3"><label for="chatroom" class="form-label">${t}:</label><div class="input-group">${h?(0,o.html)`<converse-autocomplete .getAutoCompleteList="${l.getAutoCompleteList}" .validate="${t=>e.validateMUCJID(t)}" ?autofocus="${!0}" class="add-muc-autocomplete" min_chars="3" name="chatroom" position="below" required></converse-autocomplete>`:""}</div>${u?(0,o.html)`<div class="mb-3">${(0,a.unsafeHTML)(r.default.sanitize(u,{ALLOWED_TAGS:["b","br","em"]}))}</div>`:""}</div>${!i.api.settings.get("locked_muc_nickname")?c():""} <input type="submit" class="btn btn-primary mt-3" name="join" value="${s||""}"></form>`}},"./src/plugins/muc-views/modals/templates/muc-config.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),i=s("./node_modules/lit/index.js"),o=s("./src/templates/spinner.js"),a=s("./src/i18n/index.js");s("./src/shared/components/image-picker.js"),s("./src/plugins/muc-views/modals/styles/config.scss");let l=r.converse.env.utils,d=e=>{let t=r.api.settings.get("roomconfig_whitelist"),s=[],d="",c=(0,a.__)("Loading configuration form"),u=e.model.session.get("config_stanza");if(u){let i=l.toStanza(u),{fields:o}=r.parsers.parseXForm(i);t.length&&(o=o.filter(e=>t.includes(e.var)));let a={new_password:!e.model.features.get("passwordprotected"),fixed_username:e.model.get("jid")};s=o.map(e=>l.xFormField2TemplateResult(e,a)),d=i.querySelector("instructions")?.textContent,c=i.querySelector("title")?.textContent}let h=(0,a.__)("Save");return(0,i.html)`<form class="converse-form chatroom-form ${s.length?"":"converse-form--spinner"}" autocomplete="off" @submit="${t=>e.submitConfigForm(t)}"><fieldset><legend class="centered">${c}</legend>${c!==d?(0,i.html)`<p class="form-help">${d}</p>`:""} ${s.length&&e.model.features.get("vcard-temp")?(0,i.html)`<div class="row py-2"><converse-image-picker .model="${e.model}" width="96" height="96"></converse-image-picker></div>`:""} ${s.length?s:(0,o.default)({classes:"hor_centered"})}</fieldset>${s.length?(0,i.html)`<fieldset><input type="submit" class="btn btn-primary" value="${h}"></fieldset>`:""}</form>`}},"./src/plugins/muc-views/modals/templates/muc-details.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/i18n/index.js"),i=s("./node_modules/lit/index.js");let o=e=>{let t=e.get("subject"),s=(0,r.__)("Topic"),o=(0,r.__)("Topic author");return(0,i.html)`<p class="room-info"><strong>${s}:</strong><converse-texture text="${t.text}" render_styling></converse-texture></p><p class="room-info"><strong>${o}:</strong> ${t&&t.author}</p>`},a=e=>{let t=e.config.toJSON(),s=e.features.toJSON(),a=e.occupants.filter(e=>"offline"!==e.get("show")).length,l=(0,r.__)("XMPP address"),d=(0,r.__)("Message archiving"),c=(0,r.__)("Messages are archived on the server"),u=(0,r.__)("Description"),h=(0,r.__)("Features"),m=(0,r.__)("Hidden"),f=(0,r.__)("This groupchat is not publicly searchable"),p=(0,r.__)("This groupchat is restricted to members only"),g=(0,r.__)("Members only"),_=(0,r.__)("Moderated"),v=(0,r.__)("Participants entering this groupchat need to request permission to write"),y=(0,r.__)("Name"),b=(0,r.__)("This groupchat does not require a password upon entry"),j=(0,r.__)("No password required"),w=(0,r.__)("Not anonymous"),S=(0,r.__)("All other groupchat participants can see your XMPP address"),x=(0,r.__)("Not moderated"),E=(0,r.__)("Participants entering this groupchat can write right away"),A=(0,r.__)("Online users"),C=(0,r.__)("Open"),k=(0,r.__)("Anyone can join this groupchat"),$=(0,r.__)("This groupchat requires a password before entry"),T=(0,r.__)("Password protected"),M=(0,r.__)("Persistent"),O=(0,r.__)("This groupchat persists even if it's unoccupied"),I=(0,r.__)("Public"),N=(0,r.__)("This groupchat is publicly searchable"),R=(0,r.__)("Semi-anonymous"),D=(0,r.__)("Only moderators can see your XMPP address"),L=(0,r.__)("Temporary"),P=(0,r.__)("This groupchat will disappear once the last person leaves");return(0,i.html)`<div class="room-info"><converse-avatar .model="${e}" class="avatar align-self-center" name="${e.getDisplayName()}" nonce="${e.vcard?.get("vcard_updated")}" height="72" width="72"></converse-avatar><p class="room-info"><strong>${y}:</strong> ${e.get("name")}</p><p class="room-info"><strong>${l}:</strong><converse-texture text="xmpp:${e.get("jid")}?join"></converse-texture></p><br><p class="room-info"><strong>${u}:</strong><converse-texture text="${t.description}" render_styling></converse-texture></p>${e.get("subject")?o(e):""}<p class="room-info"><strong>${A}:</strong> ${a}</p><p class="room-info"><strong>${h}:</strong></p><div class="chatroom-features"><ul class="features-list">${s.passwordprotected?(0,i.html)`<li class="feature"><converse-icon size="1em" class="fa fa-lock"></converse-icon>${T} - <em>${$}</em></li>`:""} ${s.unsecured?(0,i.html)`<li class="feature"><converse-icon size="1em" class="fa fa-unlock"></converse-icon>${j} - <em>${b}</em></li>`:""} ${s.hidden?(0,i.html)`<li class="feature"><converse-icon size="1em" class="fa fa-eye-slash"></converse-icon>${m} - <em>${f}</em></li>`:""} ${s.public_room?(0,i.html)`<li class="feature"><converse-icon size="1em" class="fa fa-eye"></converse-icon>${I} - <em>${N}</em></li>`:""} ${s.membersonly?(0,i.html)`<li class="feature"><converse-icon size="1em" class="fa fa-address-book"></converse-icon>${g} - <em>${p}</em></li>`:""} ${s.open?(0,i.html)`<li class="feature"><converse-icon size="1em" class="fa fa-globe"></converse-icon>${C} - <em>${k}</em></li>`:""} ${s.persistent?(0,i.html)`<li class="feature"><converse-icon size="1em" class="fa fa-save"></converse-icon>${M} - <em>${O}</em></li>`:""} ${s.temporary?(0,i.html)`<li class="feature"><converse-icon size="1em" class="fa fa-snowflake"></converse-icon>${L} - <em>${P}</em></li>`:""} ${s.nonanonymous?(0,i.html)`<li class="feature"><converse-icon size="1em" class="fa fa-id-card"></converse-icon>${w} - <em>${S}</em></li>`:""} ${s.semianonymous?(0,i.html)`<li class="feature"><converse-icon size="1em" class="fa fa-user-secret"></converse-icon>${R} - <em>${D}</em></li>`:""} ${s.moderated?(0,i.html)`<li class="feature"><converse-icon size="1em" class="fa fa-gavel"></converse-icon>${_} - <em>${v}</em></li>`:""} ${s.unmoderated?(0,i.html)`<li class="feature"><converse-icon size="1em" class="fa fa-info-circle"></converse-icon>${x} - <em>${E}</em></li>`:""} ${s.mam_enabled?(0,i.html)`<li class="feature"><converse-icon size="1em" class="fa fa-database"></converse-icon>${d} - <em>${c}</em></li>`:""}</ul></div><p></p></div>`}},"./src/plugins/muc-views/modals/templates/muc-invite.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");let o=e=>{let t=(0,i.__)("Invite"),s=(0,i.__)("user@example.org"),o=(0,i.__)("Please enter a valid XMPP address"),a=(0,i.__)("XMPP Address"),l=(0,i.__)("Optional reason for the invitation");return(0,r.html)`<form class="converse-form" @submit="${t=>e.submitInviteForm(t)}"><fieldset><label class="form-label clearfix" for="invitee_jids">${a}:</label> ${e.state.get("invalid_invite_jid")?(0,r.html)`<div class="error error-feedback">${o}</div>`:""}<converse-autocomplete .getAutoCompleteList="${()=>e.getAutoCompleteList()}" ?autofocus="${!0}" min_chars="1" position="below" required="required" name="invitee_jids" id="invitee_jids" placeholder="${s}"></converse-autocomplete></fieldset><fieldset><label class="form-label">${l}:</label> <textarea class="form-control" name="reason"></textarea></fieldset><fieldset><input type="submit" class="btn btn-primary" value="${t}"></fieldset></form>`}},"./src/plugins/muc-views/modals/templates/occupant.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l}),s("./src/shared/avatar/avatar.js");var r=s("./src/i18n/index.js"),i=s("./node_modules/lit/index.js"),o=s("./node_modules/lit/directives/until.js"),a=s("./src/headless/index.js");s("./src/plugins/muc-views/modals/styles/occupant.scss");let l=e=>{let t=e.model??e.message,s=t?.get("jid"),l=e.getVcard(),d=t.get("nick"),c=t.get("occupant_id"),u=e.model?.get("role"),h=e.model?.get("affiliation"),m=e.model?.get("hats")?.length?e.model.get("hats"):null,f=e.model.collection.chatroom,p=(0,r.__)("Add to Contacts"),g=f.getAllowedCommands().includes("modtools"),_=f.features.get("nonanonymous")||"moderator"===f.getOwnRole(),v=s!=a._converse.session.get("bare_jid"),y=a.api.settings.get("singleton")?"":a.api.contacts.get(s).then(e=>!e&&v&&_).then(t=>t?(0,i.html)`<li><button class="btn btn-primary" type="button" @click="${()=>e.addToContacts()}">${p}</button></li>`:"");return(0,i.html)`<div class="row"><div class="col-auto"><converse-avatar .model="${e.model}" class="avatar modal-avatar" name="${e.model.getDisplayName()}" nonce="${l?.get("vcard_updated")}" height="120" width="120"></converse-avatar></div><div class="col"><ul class="occupant-details list-unstyled"><li class="row mb-2"><div class="col text-start"><strong>${(0,r.__)("Nickname")}:</strong></div><div class="col text-end">${d}</div></li><li class="row mb-2"><div class="col text-start"><strong>${(0,r.__)("XMPP Address")}:</strong></div><div class="col text-end">${s?(0,i.html)`<a href="#" @click="${e.openChat}">${s}</a>`:""}</div></li><li class="row mb-2"><div class="col text-start"><strong>${(0,r.__)("Affiliation")}:</strong></div><div class="col text-end">${h} ${g?(0,i.html)`<a href="#" data-form="affiliation-form" class="toggle-form" @click="${t=>e.toggleForm(t)}"><converse-icon class="fa fa-wrench" size="1em"></converse-icon></a>`:""}</div>${e.show_affiliation_form?(0,i.html)`<div class="row mt-2"><converse-muc-affiliation-form jid="${s}" .muc="${f}" affiliation="${h}"></converse-muc-affiliation-form></div>`:""}</li><li class="row mb-2"><div class="col text-start"><strong>${(0,r.__)("Role")}:</strong></div><div class="col text-end">${u} ${g&&u?(0,i.html)`<a href="#" data-form="row-form" class="toggle-form" @click="${t=>e.toggleForm(t)}"><converse-icon class="fa fa-wrench" size="1em"></converse-icon></a>`:""}</div>${e.show_role_form?(0,i.html)`<div class="row mt-2"><converse-muc-role-form jid="${s}" .muc="${f}" role="${u}"></converse-muc-role-form></div>`:""}</li><li class="row mb-2"><div class="col text-start"><strong>${(0,r.__)("Hats")}:</strong></div><div class="col text-end">${m}</div></li><li class="row mb-2"><div class="col text-start"><strong>${(0,r.__)("Occupant Id")}:</strong></div><div class="col text-end text-occupant-id">${c}</div></li>${(0,o.until)(y,"")}</ul></div></div>`}},"./src/plugins/muc-views/modtools.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),i=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),a=s("./src/shared/components/element.js"),l=s("./src/plugins/muc-views/templates/moderator-tools.js");s("./src/plugins/muc-views/styles/moderator-tools.scss");let{u:d}=i.converse.env,{AFFILIATIONS:c,ROLES:u}=i.constants;class h extends a.CustomElement{static get properties(){return{affiliation:{type:String},affiliations_filter:{type:String,attribute:!1},alert_message:{type:String,attribute:!1},alert_type:{type:String,attribute:!1},jid:{type:String},muc:{type:Object,attribute:!1},role:{type:String},roles_filter:{type:String,attribute:!1},tab:{type:String},users_with_affiliation:{type:Array,attribute:!1},users_with_role:{type:Array,attribute:!1}}}constructor(){super(),this.jid=null,this.tab="affiliations",this.affiliation=null,this.affiliations_filter="",this.role="",this.roles_filter="",this.addEventListener("affiliationChanged",()=>{this.alert((0,o.__)("Affiliation changed"),"primary"),this.onSearchAffiliationChange(),this.requestUpdate()}),this.addEventListener("roleChanged",()=>{this.alert((0,o.__)("Role changed"),"primary"),this.requestUpdate()})}updated(e){e.has("role")&&this.onSearchRoleChange(),e.has("affiliation")&&this.onSearchAffiliationChange(),e.has("jid")&&e.get("jid")&&this.initialize()}async initialize(){this.initialized=(0,r.getOpenPromise)();let e=await i.api.rooms.get(this.jid);await e.initialized,this.muc=e,this.initialized.resolve()}render(){if(!this.muc?.occupants)return"";{let e=this.muc.occupants.getOwnOccupant();return(0,l.default)(this,{affiliations_filter:this.affiliations_filter,alert_message:this.alert_message,alert_type:this.alert_type,assignable_affiliations:e.getAssignableAffiliations(),assignable_roles:e.getAssignableRoles(),filterAffiliationResults:e=>this.filterAffiliationResults(e),filterRoleResults:e=>this.filterRoleResults(e),loading_users_with_affiliation:this.loading_users_with_affiliation,queryAffiliation:e=>this.queryAffiliation(e),queryRole:e=>this.queryRole(e),queryable_affiliations:c.filter(e=>!i.api.settings.get("modtools_disable_query").includes(e)),queryable_roles:u.filter(e=>!i.api.settings.get("modtools_disable_query").includes(e)),roles_filter:this.roles_filter,switchTab:e=>this.switchTab(e),tab:this.tab,toggleForm:e=>this.toggleForm(e),users_with_affiliation:this.users_with_affiliation,users_with_role:this.users_with_role})}}switchTab(e){e.stopPropagation(),e.preventDefault(),this.tab=e.target.getAttribute("data-name"),this.requestUpdate()}async onSearchAffiliationChange(){if(this.affiliation){if(await this.initialized,this.clearAlert(),this.loading_users_with_affiliation=!0,this.users_with_affiliation=null,this.shouldFetchAffiliationsList()){let e=await i.api.rooms.affiliations.get(this.affiliation,this.jid);e instanceof Error?(this.alert(e.message,"danger"),this.users_with_affiliation=[]):this.users_with_affiliation=e}else this.users_with_affiliation=this.muc.getOccupantsWithAffiliation(this.affiliation);this.loading_users_with_affiliation=!1}}async onSearchRoleChange(){this.role&&(await this.initialized,this.clearAlert(),this.users_with_role=this.muc.getOccupantsWithRole(this.role))}shouldFetchAffiliationsList(){let e=this.affiliation;return"none"!==e&&!i.MUCOccupants.getAutoFetchedAffiliationLists().includes(e)}toggleForm(e){e.stopPropagation(),e.preventDefault();let t=d.ancestor(e.target,".toggle-form"),s=t.getAttribute("data-form"),r=d.ancestor(t,".list-group-item").querySelector(s);d.hasClass("hidden",r)?d.removeClass("hidden",r):d.addClass("hidden",r)}filterRoleResults(e){this.roles_filter=e.target.value,this.requestUpdate()}filterAffiliationResults(e){this.affiliations_filter=e.target.value}queryRole(e){e.stopPropagation(),e.preventDefault();let t=new FormData(e.target).get("role");this.role=null,this.role=t}queryAffiliation(e){e.stopPropagation(),e.preventDefault();let t=new FormData(e.target).get("affiliation");this.affiliation=null,this.affiliation=t}alert(e,t){this.alert_message=e,this.alert_type=t}clearAlert(){this.alert_message=void 0,this.alert_type=void 0}}i.api.elements.define("converse-modtools",h)},"./src/plugins/muc-views/muc-chat-content.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/headless/index.js"),i=s("./src/shared/chat/chat-content.js");s("./src/shared/chat/message-history.js"),s("./src/plugins/muc-views/styles/muc-chat-content.scss");class o extends i.default{async initialize(){await super.initialize(),this.listenTo(this.model,"change:hidden_occupants",()=>this.requestUpdate()),this.listenTo(this.model.occupants,"change",()=>this.requestUpdate())}}r.api.elements.define("converse-muc-chat-content",o)},"./src/plugins/muc-views/muc.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/shared/chat/baseview.js"),o=s("./src/plugins/dragresize/mixin.js"),a=s("./src/plugins/muc-views/templates/muc.js");class l extends(0,o.default)(i.default){length=300;is_chatroom=!0;async initialize(){this.model=await r.api.rooms.get(this.jid),r._converse.state.chatboxviews.add(this.jid,this),this.setAttribute("id",this.model.get("box_id")),this.listenTo(this.model.session,"change:connection_status",this.onConnectionStatusChanged),this.listenTo(this.model.session,"change:view",()=>this.requestUpdate()),document.addEventListener("visibilitychange",()=>this.onWindowStateChanged()),this.onConnectionStatusChanged(),this.model.maybeShow(),r.api.trigger("chatRoomViewInitialized",this)}render(){return(0,a.default)(this)}onConnectionStatusChanged(){this.model.session.get("connection_status")===r.converse.ROOMSTATUS.CONNECTING&&(this.model.session.save({disconnection_actor:void 0,disconnection_message:void 0,disconnection_reason:void 0}),this.model.save({moved_jid:void 0,password_validation_message:void 0,reason:void 0})),this.requestUpdate()}}r.api.elements.define("converse-muc",l)},"./src/plugins/muc-views/nickname-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/plugins/muc-views/templates/muc-nickname-form.js");s("./src/plugins/muc-views/styles/nickname-form.scss");class a extends i.CustomElement{constructor(){super(),this.jid=null,this.model=null}static get properties(){return{jid:{type:String}}}shouldUpdate(e){if(e.has("jid")&&this.jid){let{chatboxes:e}=r._converse.state;this.model=e.get(this.jid)}return!0}render(){return(0,o.default)(this)}submitNickname(e){e.preventDefault();let t=e.target.nick.value.trim();t&&(this.model.isEntered()?(this.model.setNickname(t),this.closeModal()):this.model.join(t))}closeModal(){document.querySelector("converse-muc-nickname-modal").close()}}r.api.elements.define("converse-muc-nickname-form",a);let l=a},"./src/plugins/muc-views/occupant-bottom-panel.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/i18n/index.js");s("./src/shared/autocomplete/index.js");var o=s("./src/plugins/chatview/bottom-panel.js"),a=s("./src/plugins/muc-views/templates/occupant-bottom-panel.js");s("./src/plugins/muc-views/styles/occupant-bottom-panel.scss");class l extends o.default{static get properties(){return{model:{type:Object,noAccessor:!0},muc:{type:Object}}}constructor(){super(),this.muc=null}async initialize(){await super.initialize(),this.listenTo(this.muc.session,"change:connection_status",()=>this.requestUpdate())}render(){return this.model?(0,a.default)(this):""}canPostMessages(){return this.muc.isEntered()&&"offline"!==this.model.get("show")}openChat(){let e=this.model.get("jid");return e?r.api.chats.open(e,{},!0):r.api.alert("error",(0,i.__)("Error"),"Could not find XMPP address")}invite(){let e=this.model.get("jid");return r.api.listen.once("roomInviteSent",()=>r.api.alert("info",(0,i.__)("Success"),(0,i.__)("The user has been invited to join this groupchat"))),e?this.muc.directInvite(e):r.api.alert("error",(0,i.__)("Error"),"Could not find XMPP address")}}r.api.elements.define("converse-occupant-bottom-panel",l)},"./src/plugins/muc-views/occupant.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/index.js"),o=s("./src/shared/components/element.js"),a=s("./src/plugins/muc-views/templates/muc-occupant.js");s("./src/plugins/muc-views/occupant-bottom-panel.js"),s("./src/plugins/muc-views/styles/muc-occupant.scss");let{u:l}=i.converse.env;class d extends o.CustomElement{constructor(){super(),this.muc_jid=null,this.occupant_id=null}static get properties(){return{muc_jid:{type:String},occupant_id:{type:String}}}async initialize(){super.initialize();let{chatboxes:e}=i._converse.state;this.muc=e.get(this.muc_jid),await this.muc.initialized,this.model=this.muc.occupants.get(this.occupant_id),this.requestUpdate()}render(){return this.muc?(0,a.default)(this):""}openChat(e){i.api.chats.open(e,{},!0)}closeSidebar(){l.safeSave(this.muc,{hidden_occupants:!0})}showOccupantModal(e){e?.preventDefault?.(),i.api.modal.show("converse-muc-occupant-modal",{model:this.model},e)}getVcard(){let e=this.model;if(e.vcard)return e.vcard;let t=e?.get("jid")||e?.get("from");return t?i._converse.state.vcards.get(t):null}addToContacts(){let e=this.model.get("jid");e&&i.api.modal.show("converse-add-contact-modal",{state:new r.Model({jid:e})})}toggleForm(e){"row-form"===l.ancestor(e.target,".toggle-form").getAttribute("data-form")?this.show_role_form=!this.show_role_form:this.show_affiliation_form=!this.show_affiliation_form,this.requestUpdate()}}i.api.elements.define("converse-muc-occupant",d)},"./src/plugins/muc-views/occupants.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lodash-es/debounce.js"),i=s("./src/headless/index.js"),o=s("./src/shared/components/element.js"),a=s("./src/plugins/muc-views/templates/muc-occupants.js");s("./src/shared/autocomplete/index.js"),s("./src/plugins/muc-views/modals/muc-invite.js"),s("./src/plugins/muc-views/occupant.js"),s("./src/shared/styles/status.scss"),s("./src/plugins/muc-views/styles/muc-occupants.scss");let{initStorage:l}=i.u;class d extends o.CustomElement{constructor(){super(),this.jid=null}static get properties(){return{jid:{type:String}}}initialize(){let e=`_converse.occupants-filter-${this.jid}`;this.filter=new i.RosterFilter,this.filter.id=e,l(this.filter,e),this.filter.fetch();let{chatboxes:t}=i._converse.state;this.model=t.get(this.jid);let s=(0,r.default)(()=>this.requestUpdate(),200,{maxWait:1e3});this.listenTo(this.model,"change",()=>this.requestUpdate()),this.listenTo(this.model.occupants,"add",s),this.listenTo(this.model.occupants,"change",s),this.listenTo(this.model.occupants,"remove",s),this.listenTo(this.model.occupants,"sort",s),this.listenTo(this.model.features,"change:open",()=>this.requestUpdate()),this.model.initialized.then(()=>this.requestUpdate())}render(){return(0,a.default)(this)}showInviteModal(e){e.preventDefault(),i.api.modal.show("converse-muc-invite-modal",{muc:this.model},e)}toggleFilter(e){e?.preventDefault?.(),i.u.safeSave(this.model,{filter_visible:!this.model.get("filter_visible")})}closeSidebar(e){e?.preventDefault?.(),i.u.safeSave(this.model,{hidden_occupants:!0})}}i.api.elements.define("converse-muc-occupants",d)},"./src/plugins/muc-views/password-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/plugins/muc-views/templates/muc-password-form.js"),i=s("./src/shared/components/element.js"),o=s("./src/headless/index.js");class a extends i.CustomElement{static get properties(){return{jid:{type:String}}}constructor(){super(),this.jid=null}connectedCallback(){super.connectedCallback();let{chatboxes:e}=o._converse.state;this.model=e.get(this.jid),this.listenTo(this.model,"change:password_validation_message",()=>this.requestUpdate()),this.requestUpdate()}render(){return(0,r.default)({jid:this.model.get("jid"),submitPassword:e=>this.submitPassword(e),validation_message:this.model.get("password_validation_message")})}submitPassword(e){e.preventDefault();let t=this.querySelector("input[type=password]").value;this.model.join(this.model.get("nick"),t),this.model.set("password_validation_message",null)}}o.api.elements.define("converse-muc-password-form",a);let l=a},"./src/plugins/muc-views/role-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./src/headless/index.js"),i=s("./src/i18n/index.js"),o=s("./src/shared/components/element.js"),a=s("./src/plugins/muc-views/templates/role-form.js");s("./src/plugins/muc-views/styles/role-form.scss");let{Strophe:l,sizzle:d}=r.converse.env;class c extends o.CustomElement{static get properties(){return{muc:{type:Object},jid:{type:String},role:{type:String},alert_message:{type:String,attribute:!1},alert_type:{type:String,attribute:!1}}}constructor(){super(),this.muc=null,this.nick=null,this.jid=null}render(){return(0,a.default)(this)}alert(e,t){this.alert_message=e,this.alert_type=t}assignRole(e){e.stopPropagation(),e.preventDefault(),this.alert();let t=new FormData(e.target),s=this.muc.getOccupant(t.get("jid")||t.get("nick")),o=t.get("role"),a=t.get("reason");this.muc.setRole(s,o,a,()=>{let e=new CustomEvent("roleChanged",{bubbles:!0});this.dispatchEvent(e)},e=>{d(`not-allowed[xmlns="${l.NS.STANZAS}"]`,e).length?this.alert((0,i.__)("You're not allowed to make that change"),"danger"):(this.alert((0,i.__)("Sorry, something went wrong while trying to set the role"),"danger"),r.u.isErrorObject(e)&&r.log.error(e))})}}r.api.elements.define("converse-muc-role-form",c);let u=c},"./src/plugins/muc-views/search.js":function(e,t,s){"use strict";s.r(t),s.d(t,{getAutoCompleteList:()=>c});var r=s("./src/headless/index.js");let{Strophe:i,$iq:o,sizzle:a}=r.converse.env;i.addNamespace("MUCSEARCH","https://xmlns.zombofant.net/muclumbus/search/1.0");let l={};async function d(e){let t,s=r.api.settings.get("muc_search_service"),l=o({type:"get",from:r._converse.session.get("bare_jid"),to:s}).c("search",{xmlns:i.NS.MUCSEARCH}).c("set",{xmlns:i.NS.RSM}).c("max").t(10).up().up().c("x",{xmlns:i.NS.XFORM,type:"submit"}).c("field",{var:"FORM_TYPE",type:"hidden"}).c("value").t("https://xmlns.zombofant.net/muclumbus/search/1.0#params").up().up().c("field",{var:"q",type:"text-single"}).c("value").t(e).up().up().c("field",{var:"sinname",type:"boolean"}).c("value").t("true").up().up().c("field",{var:"sindescription",type:"boolean"}).c("value").t("false").up().up().c("field",{var:"sinaddr",type:"boolean"}).c("value").t("true").up().up().c("field",{var:"min_users",type:"text-single"}).c("value").t("1").up().up().c("field",{var:"key",type:"list-single"}).c("value").t("address").up().c("option").c("value").t("nusers").up().up().c("option").c("value").t("address");try{t=await r.api.sendIQ(l)}catch(e){return r.log.error(e),[]}return a(`result[xmlns="${i.NS.MUCSEARCH}"] item`,t).map(e=>{let t=e.getAttribute("address");return{label:`${e.querySelector("name")?.textContent} (${t})`,value:t}})}function c(e){return l[e]||(l[e]=d(e)),l[e]}},"./src/plugins/muc-views/sidebar-occupant.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/index.js"),o=s("./src/shared/components/observable.js"),a=s("./src/plugins/muc-views/templates/occupant.js");s("./src/plugins/muc-views/occupant-bottom-panel.js");class l extends o.ObservableElement{constructor(){super(),this.muc=null,this.observable="once"}static get properties(){return{...super.properties,model:{type:r.Model},muc:{type:i.MUC}}}async initialize(){super.initialize(),await this.muc.initialized,this.listenTo(this.model,"change",()=>this.requestUpdate()),this.listenTo(this.model,"vcard:add",()=>this.requestUpdate()),this.listenTo(this.model,"vcard:change",()=>this.requestUpdate()),this.requestUpdate()}render(){return this.muc?(0,a.default)(this):""}onOccupantClicked(e,t){e.preventDefault(),this.muc.getOwnOccupant()===t?i.api.modal.show("converse-profile-modal",{model:i._converse.state.xmppstatus},e):this.muc.save({sidebar_view:`occupant:${t.id}`})}}i.api.elements.define("converse-muc-occupant-list-item",l)},"./src/plugins/muc-views/sidebar.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/plugins/muc-views/templates/muc-sidebar.js");s("./src/plugins/muc-views/modals/muc-invite.js"),s("./src/plugins/muc-views/occupants.js"),s("./src/shared/autocomplete/index.js"),s("./src/shared/styles/status.scss"),s("./src/plugins/muc-views/styles/muc-sidebar.scss");class a extends i.CustomElement{constructor(){super(),this.jid=null}static get properties(){return{jid:{type:String}}}initialize(){let{chatboxes:e}=r._converse.state;this.model=e.get(this.jid),this.listenTo(this.model,"change",()=>this.requestUpdate()),this.listenTo(this.model.features,"change:open",()=>this.requestUpdate()),this.model.initialized.then(()=>this.requestUpdate())}render(){return(0,o.default)(this)}closeSidebar(e){e?.preventDefault?.(),r.u.safeSave(this.model,{hidden_occupants:!0})}}r.api.elements.define("converse-muc-sidebar",a)},"./src/plugins/muc-views/templates/affiliation-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");let o=e=>{let t=(0,i.__)("Change affiliation"),s=(0,i.__)("New affiliation"),o=(0,i.__)("Reason"),a=e.muc.getOwnOccupant().getAssignableAffiliations();return(0,r.html)`<form class="affiliation-form" @submit="${t=>e.assignAffiliation(t)}">${e.alert_message?(0,r.html)`<div class="alert alert-${e.alert_type}" role="alert">${e.alert_message}</div>`:""}<div class="mb-3"><div class="row"><div class="col-md-6"><label class="form-label"><strong>${s}:</strong></label> <select class="form-select select-affiliation" name="affiliation">${a.map(t=>(0,r.html)`<option value="${t}" ?selected="${t===e.affiliation}">${t}</option>`)}</select></div><div class="col-md-6"><label class="form-label"><strong>${o}:</strong></label> <input class="form-control" type="text" name="reason" placeholder="${o}"></div></div></div><div class="text-end"><button type="submit" class="btn btn-primary" name="change">${t}</button></div></form>`}},"./src/plugins/muc-views/templates/mep-message.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),i=s("./node_modules/lit/index.js");let{dayjs:o}=r.converse.env,a=e=>{let t=o(e.model.get("time")).toISOString();return(0,i.html)`<div class="message chat-info message--mep ${e.getExtraMessageClasses()}" data-isodate="${t}" data-type="${e.data_name}" data-value="${e.data_value}"><div class="chat-msg__content"><div class="chat-msg__body chat-msg__body--${e.model.get("type")} ${e.model.get("is_delayed")?"chat-msg__body--delayed":""}"><div class="chat-info__message">${e.model.isRetracted()?e.renderRetraction():(0,i.html)`<converse-texture .mentions="${e.model.get("references")}" render_styling text="${e.model.getMessageText()}"></converse-texture>${e.model.get("reason")?(0,i.html)`<q class="reason"><converse-texture text="${e.model.get("reason")}"></converse-texture></q>`:""}`}</div><converse-message-actions ?is_retracted="${e.model.isRetracted()}" .model="${e.model}"></converse-message-actions></div></div></div>`}},"./src/plugins/muc-views/templates/message-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/i18n/index.js"),i=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js"),a=s("./src/plugins/chatview/utils.js");let l=e=>{let t=e.model.get("composing_spoiler"),s=t?(0,r.__)("Hidden message"):(0,r.__)("Message"),l=(0,r.__)("Optional hint"),d=i.api.settings.get("message_limit"),c=i.api.settings.get("visible_toolbar_buttons").call,u=i.api.settings.get("visible_toolbar_buttons").emoji,h=i.api.settings.get("show_send_button"),m=i.api.settings.get("visible_toolbar_buttons").spoiler,f=i.api.settings.get("show_toolbar");return(0,o.html)`<form class="setNicknameButtonForm hidden"><input type="submit" class="btn btn-primary" name="join" value="Join"></form><form class="chat-message-form" @submit="${t=>e.onFormSubmitted(t)}">${f?(0,o.html)`<converse-chat-toolbar class="btn-toolbar chat-toolbar no-text-select" .model="${e.model}" ?hidden_occupants="${e.model.get("hidden_occupants")}" ?is_groupchat="${"groupchat"===e.model.get("message_type")}" ?show_call_button="${c}" ?show_emoji_button="${u}" ?show_send_button="${h}" ?show_spoiler_button="${m}" ?show_toolbar="${f}" message_limit="${d}"></converse-chat-toolbar>`:""} <input type="text" placeholder="${l||""}" .value="${e.model.get("draft_hint")??""}" @change="${t=>i.u.safeSave(e.model,{draft_hint:t.target.value})}" class="${t?"":"hidden"} spoiler-hint"><div class="suggestion-box"><ul class="suggestion-box__results suggestion-box__results--above" hidden=""></ul><textarea autofocus type="text" .value="${e.model.get("draft")??""}" @drop="${t=>e.onDrop(t)}" @input="${a.resetElementHeight}" @keydown="${t=>e.onKeyDown(t)}" @keyup="${t=>e.onKeyUp(t)}" @paste="${t=>e.onPaste(t)}" @change="${t=>i.u.safeSave(e.model,{draft:t.target.value})}" class="chat-textarea suggestion-box__input ${e.model.get("correcting")?"correcting":""} ${h?"chat-textarea-send-button":""} ${t?"spoiler":""}" placeholder="${s}"></textarea> <span class="suggestion-box__additions visually-hidden" role="status" aria-live="assertive" aria-relevant="additions"></span></div></form>`}},"./src/plugins/muc-views/templates/moderator-tools.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>g});var r=s("./src/templates/spinner.js"),i=s("./src/i18n/index.js"),o=s("./node_modules/lit/index.js");function a(e){return"moderator"===e?(0,i.__)("Moderators are privileged users who can change the roles of other users (except those with admin or owner affiliations."):"participant"===e?(0,i.__)("The default role, implies that you can read and write messages."):"visitor"==e?(0,i.__)("Visitors aren't allowed to write messages in a moderated multi-user chat."):void 0}function l(e){return"owner"===e?(0,i.__)("Owner is the highest affiliation. Owners can modify roles and affiliations of all other users."):"admin"===e?(0,i.__)("Admin is the 2nd highest affiliation. Admins can modify roles and affiliations of all other users except owners."):"outcast"===e?(0,i.__)('To ban a user, you give them the affiliation of "outcast".'):void 0}let d=e=>(0,o.html)`<option value="${e.item||""}" ?selected="${e.item===e.role}" title="${a(e.item)}">${e.item}</option>`,c=e=>(0,o.html)`<option value="${e.item||""}" ?selected="${e.item===e.affiliation}" title="${l(e.item)}">${e.item}</option>`,u=e=>(0,o.html)`<a href="#" data-form="converse-muc-role-form" class="toggle-form right" color="var(--secondary-color)" @click="${e.toggleForm}"><converse-icon class="fa fa-wrench" size="1em"></converse-icon></a>`,h=(e,t)=>(0,o.html)`<li class="list-group-item" data-nick="${t.item.nick}"><ul class="list-group"><li class="list-group-item active"><div><strong>JID:</strong> ${t.item.jid}</div></li><li class="list-group-item"><div><strong>Nickname:</strong> ${t.item.nick}</div></li><li class="list-group-item"><div><strong>Role:</strong> ${t.item.role} ${t.assignable_roles.length?u(t):""}</div>${t.assignable_roles.length?(0,o.html)`<converse-muc-role-form class="hidden" .muc="${e.muc}" jid="${t.item.jid}" role="${t.item.role}"></converse-muc-role-form>`:""}</li></ul></li>`,m=e=>(0,o.html)`<a href="#" data-form="converse-muc-affiliation-form" class="toggle-form right" color="var(--secondary-color)" @click="${e.toggleForm}"><converse-icon class="fa fa-wrench" size="1em"></converse-icon></a>`,f=(e,t)=>(0,o.html)`<li class="list-group-item" data-nick="${t.item.nick}"><ul class="list-group"><li class="list-group-item active"><div><strong>JID:</strong> ${t.item.jid}</div></li><li class="list-group-item"><div><strong>Nickname:</strong> ${t.item.nick}</div></li><li class="list-group-item"><div><strong>Affiliation:</strong> ${t.item.affiliation} ${t.assignable_affiliations.length?m(t):""}</div>${t.assignable_affiliations.length?(0,o.html)`<converse-muc-affiliation-form class="hidden" .muc="${e.muc}" jid="${t.item.jid}" affiliation="${t.item.affiliation}"></converse-muc-affiliation-form>`:""}</li></ul></li>`,p=e=>(0,o.html)`<ul class="nav nav-pills justify-content-center"><li role="presentation" class="nav-item"><a class="nav-link ${"affiliations"===e.tab?"active":""}" id="affiliations-tab" href="#affiliations-tabpanel" aria-controls="affiliations-tabpanel" role="tab" data-name="affiliations" @click="${e.switchTab}">Affiliations</a></li><li role="presentation" class="nav-item"><a class="nav-link ${"roles"===e.tab?"active":""}" id="roles-tab" href="#roles-tabpanel" aria-controls="roles-tabpanel" role="tab" data-name="roles" @click="${e.switchTab}">Roles</a></li></ul>`,g=(e,t)=>{let s=(0,i.__)("Affiliation"),u=(0,i.__)("No users with that affiliation found."),m=(0,i.__)("No users with that role found."),g=(0,i.__)("Type here to filter the search results"),_=(0,i.__)("Role"),v=(0,i.__)("Show users"),y=(0,i.__)("Roles are assigned to users to grant or deny them certain abilities in a multi-user chat. They're assigned either explicitly or implicitly as part of an affiliation. A role that's not due to an affiliation, is only valid for the duration of the user's session."),b=(0,i.__)("An affiliation is a long-lived entitlement which typically implies a certain role and which grants privileges and responsibilities. For example admins and owners automatically have the moderator role."),j=t.queryable_roles.length&&t.queryable_affiliations.length;return(0,o.html)`${t.alert_message?(0,o.html)`<div class="alert alert-${t.alert_type}" role="alert">${t.alert_message}</div>`:""} ${j?p(t):""}<div class="tab-content">${t.queryable_affiliations.length?(0,o.html)`<div class="tab-pane tab-pane--columns ${"affiliations"===t.tab?"active":""}" id="affiliations-tabpanel" role="tabpanel" aria-labelledby="affiliations-tab"><form class="converse-form query-affiliation" @submit="${t.queryAffiliation}"><p class="helptext pb-3">${b}</p><div><label class="form-label" for="affiliation"><strong>${s}:</strong></label><div class="row"><div class="col"><select class="form-select select-affiliation" name="affiliation">${t.queryable_affiliations.map(e=>c(Object.assign({item:e},t)))}</select></div><div class="col"><input type="submit" class="btn btn-primary" name="users_with_affiliation" value="${v}"></div></div><div class="row"><div class="col mt-3">${Array.isArray(t.users_with_affiliation)&&t.users_with_affiliation.length>5?(0,o.html)`<input class="form-control" .value="${t.affiliations_filter}" @keyup="${t.filterAffiliationResults}" type="text" name="filter" placeholder="${g}">`:""}</div></div>${l(t.affiliation)?(0,o.html)`<div class="row"><div class="col pt-2"><p class="helptext pb-3">${l(t.affiliation)}</p></div></div>`:""}</div></form><div class="scrollable-container"><ul class="list-group list-group--users">${t.loading_users_with_affiliation?(0,o.html)`<li class="list-group-item">${(0,r.default)()}</li>`:""} ${Array.isArray(t.users_with_affiliation)&&0===t.users_with_affiliation.length?(0,o.html)`<li class="list-group-item">${u}</li>`:""} ${t.users_with_affiliation instanceof Error?(0,o.html)`<li class="list-group-item">${t.users_with_affiliation.message}</li>`:(t.users_with_affiliation||[]).map(s=>(s.nick||s.jid).match(RegExp(t.affiliations_filter,"i"))?f(e,Object.assign({item:s},t)):"")}</ul></div></div>`:""} ${t.queryable_roles.length?(0,o.html)`<div class="tab-pane tab-pane--columns ${"roles"===t.tab?"active":""}" id="roles-tabpanel" role="tabpanel" aria-labelledby="roles-tab"><form class="converse-form query-role" @submit="${t.queryRole}"><p class="helptext pb-3">${y}</p><div><label class="form-label" for="role"><strong>${_}:</strong></label><div class="row"><div class="col"><select class="form-select select-role" name="role">${t.queryable_roles.map(e=>d(Object.assign({item:e},t)))}</select></div><div class="col"><input type="submit" class="btn btn-primary" name="users_with_role" value="${v}"></div></div><div class="row"><div class="col mt-3">${Array.isArray(t.users_with_role)&&t.users_with_role.length>5?(0,o.html)`<input class="form-control" .value="${t.roles_filter}" @keyup="${t.filterRoleResults}" type="text" name="filter" placeholder="${g}">`:""}</div></div>${a(t.role)?(0,o.html)`<div class="row"><div class="col pt-2"><p class="helptext pb-3">${a(t.role)}</p></div></div>`:""}</div></form><div class="scrollable-container"><ul class="list-group list-group--users">${t.loading_users_with_role?(0,o.html)`<li class="list-group-item">${(0,r.default)()}</li>`:""} ${t.users_with_role&&0===t.users_with_role.length?(0,o.html)`<li class="list-group-item">${m}</li>`:""} ${(t.users_with_role||[]).map(s=>s.nick.match(t.roles_filter)?h(e,Object.assign({item:s},t)):"")}</ul></div></div>`:""}</div>`}},"./src/plugins/muc-views/templates/muc-bottom-panel.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a}),s("./src/plugins/muc-views/message-form.js"),s("./src/plugins/muc-views/nickname-form.js"),s("./src/shared/chat/toolbar.js");var r=s("./src/i18n/index.js"),i=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js");let a=e=>{let t=(0,r.__)("You have unread messages"),s=e.model.session.get("connection_status"),a=(0,r.__)("You're not allowed to send messages in this room");return s===i.converse.ROOMSTATUS.ENTERED?(0,o.html)`${e.model.ui.get("scrolled")&&e.model.get("num_unread_general")?(0,o.html)`<div class="new-msgs-indicator" @click="${t=>e.viewUnreadMessages(t)}"> ${t} </div>`:""} ${e.model.canPostMessages()?(0,o.html)`<converse-muc-message-form .model="${e.model}"></converse-muc-message-form>`:(0,o.html)`<span class="muc-bottom-panel muc-bottom-panel--muted">${a}</span>`}`:s!=i.converse.ROOMSTATUS.NICKNAME_REQUIRED?"":i.api.settings.get("muc_show_logs_before_join")?(0,o.html)`<span class="muc-bottom-panel muc-bottom-panel--nickname"><converse-muc-nickname-form .model="${e.model}"></converse-muc-nickname-form></span>`:void 0}},"./src/plugins/muc-views/templates/muc-chatarea.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js");s("./src/shared/chat/help-messages.js"),s("./src/shared/components/split-resize.js"),s("./src/plugins/muc-views/bottom-panel.js"),s("./src/plugins/muc-views/sidebar.js"),s("./src/plugins/muc-views/muc-chat-content.js");let{CHATROOMS_TYPE:o}=i.constants,a=e=>{let t,s,a=i.api.settings.get("show_send_button"),l=i.api.settings.get("view_mode");return"overlayed"===l?(t="d-none d-md-flex col-s-10 col-md-8",s="col-xs-12 col-s-2 col-md-4"):"fullscreen"===l?(t="d-none d-md-flex col-md-8 col-xl-10",s="col-xs-12 col-md-4 col-xl-2"):"embedded"===l&&(t="d-flex col-8",s="col-4"),(0,r.html)`<div class="chat-area ${e.shouldShowSidebar()?t:"col-xs-12"}"><div class="chat-content ${a?"chat-content-sendbutton":""}" aria-live="polite"><converse-muc-chat-content .model="${e.model}"></converse-muc-chat-content>${e.model?.get("show_help_messages")?(0,r.html)`<div class="chat-content__help"><converse-chat-help .model="${e.model}" .messages="${e.getHelpMessages()}" type="info" chat_type="${o}"></converse-chat-help></div>`:""}</div><converse-muc-bottom-panel .model="${e.model}" class="bottom-panel"></converse-muc-bottom-panel></div>${e.model&&e.shouldShowSidebar()?(0,r.html)`<converse-split-resize></converse-split-resize><converse-muc-sidebar class="${s}" jid="${e.jid}"></converse-muc-sidebar>`:""}`}},"./src/plugins/muc-views/templates/muc-description.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");let o=e=>{let t=(0,i.__)("Description:"),s=(0,i.__)("Groupchat XMPP Address:"),o=(0,i.__)("Participants:"),a=(0,i.__)("Features:"),l=(0,i.__)("Requires authentication"),d=(0,i.__)("Hidden"),c=(0,i.__)("Requires an invitation"),u=(0,i.__)("Moderated"),h=(0,i.__)("Non-anonymous"),m=(0,i.__)("Open"),f=(0,i.__)("Permanent"),p=(0,i.__)("Public"),g=(0,i.__)("Semi-anonymous"),_=(0,i.__)("Temporary"),v=(0,i.__)("Unmoderated");return(0,r.html)`<div class="room-info"><p class="room-info"><strong>${s}</strong> ${e.jid}</p><p class="room-info"><strong>${t}</strong> ${e.desc}</p><p class="room-info"><strong>${o}</strong> ${e.occ}</p><p class="room-info"><strong>${a}</strong></p><ul>${e.passwordprotected?(0,r.html)`<li class="room-info locked">${l}</li>`:""} ${e.hidden?(0,r.html)`<li class="room-info">${d}</li>`:""} ${e.membersonly?(0,r.html)`<li class="room-info">${c}</li>`:""} ${e.moderated?(0,r.html)`<li class="room-info">${u}</li>`:""} ${e.nonanonymous?(0,r.html)`<li class="room-info">${h}</li>`:""} ${e.open?(0,r.html)`<li class="room-info">${m}</li>`:""} ${e.persistent?(0,r.html)`<li class="room-info">${f}</li>`:""} ${e.publicroom?(0,r.html)`<li class="room-info">${p}</li>`:""} ${e.semianonymous?(0,r.html)`<li class="room-info">${g}</li>`:""} ${e.temporary?(0,r.html)`<li class="room-info">${_}</li>`:""} ${e.unmoderated?(0,r.html)`<li class="room-info">${v}</li>`:""}</ul><p></p></div>`}},"./src/plugins/muc-views/templates/muc-destroyed.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/i18n/index.js"),i=s("./node_modules/lit/index.js");let o=e=>{let t=(0,r.__)("The conversation has moved to a new address. Click the link below to enter.");return(0,i.html)`<p class="moved-label">${t}</p><p class="moved-link"><a class="switch-chat" @click="${t=>e.onSwitch(t)}">${e.moved_jid}</a></p>`},a=e=>{let t=(0,r.__)("This groupchat no longer exists"),s=(0,r.__)('The following reason was given: "%1$s"',e.reason||"");return(0,i.html)`<div class="alert alert-danger"><h3 class="alert-heading disconnect-msg">${t}</h3></div>${e.reason?(0,i.html)`<p class="destroyed-reason">${s}</p>`:""} ${e.moved_jid?o(e):""}`}},"./src/plugins/muc-views/templates/muc-disconnect.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");let i=e=>(0,r.html)`<div class="alert alert-danger"><h3 class="alert-heading disconnect-msg">${e[0]}</h3>${e.slice(1).map(e=>(0,r.html)`<p class="disconnect-msg">${e}</p>`)}</div>`},"./src/plugins/muc-views/templates/muc-head.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/until.js"),o=s("./src/i18n/index.js"),a=s("./src/headless/index.js"),l=s("./src/shared/chat/utils.js");s("./src/shared/components/dropdown.js"),s("./src/shared/texture/components/texture.js");let d=e=>{let t=e.model.toJSON(),s=e.user_settings?.get("mucs_with_hidden_subject",[])?.includes(e.model.get("jid")),d=e.getHeadingButtons(s),c=(0,o.__)("Hide the groupchat topic"),u=t.subject?t.subject.text:"",h=u&&!s;return(0,r.html)`<div class="chatbox-title ${h?"":"chatbox-title--no-desc"}"><div class="chatbox-title--row">${!a._converse.api.settings.get("singleton")?(0,r.html)`<converse-controlbox-navback jid="${t.jid}"></converse-controlbox-navback>`:""} <a data-room-jid="${e.model.get("jid")}" title="${(0,o.__)("Show more information on this groupchat")}" @click="${t=>e.showRoomDetailsModal(t)}"><converse-avatar .model="${e.model}" class="avatar align-self-center" name="${e.model.getDisplayName()}" nonce="${e.model.vcard?.get("vcard_updated")}" height="40" width="40"></converse-avatar></a><div class="chatbox-title__text" role="heading" aria-level="2" title="${"hidden"!==a.api.settings.get("locked_muc_domain")?t.jid:""}">${e.model.getDisplayName()}</div></div><div class="chatbox-title__buttons btn-toolbar g-0">${(0,i.until)((0,l.getStandaloneButtons)(d),"")} ${(0,i.until)((0,l.getDropdownButtons)(d),"")}</div></div>${h?(0,r.html)`<p class="chat-head__desc" title="${c}"><converse-texture text="${u}" render_styling embed_audio></converse-texture></p>`:""}`}},"./src/plugins/muc-views/templates/muc-list.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/i18n/index.js"),i=s("./node_modules/lit/index.js"),o=s("./node_modules/lit/directives/repeat.js"),a=s("./src/templates/spinner.js");let l=e=>{let t=(0,r.__)("Show groupchats"),s=(0,r.__)("Server address");return(0,i.html)`<form class="converse-form list-chatrooms" @submit="${e.submitForm}"><div><label class="form-label" for="chatroom">${s}:</label> <input type="text" autofocus @change="${e.setDomainFromEvent}" value="${e.muc_domain||""}" required="required" name="server" class="form-control" placeholder="${e.server_placeholder}"></div><input type="submit" class="btn btn-primary" name="list" value="${t}"></form>`},d=(e,t)=>{let s=(0,r.__)("Show more information on this groupchat"),o=(0,r.__)("Click to open this groupchat");return(0,i.html)`<li class="room-item list-group-item"><div class="available-chatroom d-flex flex-row"><a class="open-room available-room w-100" @click="${e.openRoom}" data-room-jid="${t.jid}" data-room-name="${t.name}" title="${o}" href="#">${t.name||t.jid}</a> <a class="right room-info icon-room-info" @click="${e.toggleRoomInfo}" data-room-jid="${t.jid}" title="${s}" href="#"></a></div></li>`},c=e=>(0,i.html)`${e.show_form?l(e):""}<ul class="available-chatrooms list-group">${e.loading_items?(0,i.html)`<li class="list-group-item">${(0,a.default)()}</li>`:""} ${e.feedback_text?(0,i.html)`<li class="list-group-item active">${e.feedback_text}</li>`:""} ${(0,o.repeat)(e.items,e=>e.jid,t=>d(e,t))}</ul>`},"./src/plugins/muc-views/templates/muc-nickname-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/i18n/index.js"),i=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js");let a=e=>{let t=(0,r.__)("Nickname"),s=e.model?.isEntered()?(0,r.__)("Change nickname"):(0,r.__)("Enter groupchat"),a=i.api.settings.get("muc_show_logs_before_join")?(0,r.__)("Choose a nickname to enter"):(0,r.__)("Please choose your nickname"),l=e.model?.get("nickname_validation_message");return(0,o.html)`<div class="chatroom-form-container muc-nickname-form"><form class="converse-form chatroom-form converse-centered-form" @submit="${t=>e.submitNickname(t)}"><fieldset><label class="form-label">${a}</label><p class="validation-message">${l}</p><input type="text" required="required" name="nick" value="${e.model?.get("nick")||""}" class="form-control ${l?"error":""}" placeholder="${t}"></fieldset><fieldset><input type="submit" class="btn btn-primary" name="join" value="${s}"></fieldset></form></div>`}},"./src/plugins/muc-views/templates/muc-occupant.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/i18n/index.js");let a=e=>{let t=(0,o.__)("Hide"),s=(0,o.__)("No participant data found"),a=(0,o.__)("Participants"),l=(0,o.__)("Show details"),d=e.model?.get("jid"),c=e.model?.get("nick"),u=i.u.firstCharToUpperCase(e.model?.get("role")),h=i.u.firstCharToUpperCase(e.model?.get("affiliation")),m=e.model?.get("hats")?.length?e.model.get("hats").map(({title:e})=>e):[];return(0,r.html)`<span class="sidebar-occupant"><div class="sidebar-heading"><span><button type="button" class="btn btn--transparent back-button" @click="${()=>e.muc.save({sidebar_view:"occupants"})}"><converse-icon size="1em" class="fa fa-arrow-left"></converse-icon></button> <a @click="${t=>{t.preventDefault(),e.muc.save({sidebar_view:"occupants"})}}">${a}</a></span><converse-dropdown .items="${[(0,r.html)`<a class="dropdown-item show-occupant-modal" role="button" title="${l}" @click="${()=>e.showOccupantModal()}"><converse-icon class="fa fa-id-card" size="1em"></converse-icon>${l}</a>`,(0,r.html)`<a href="#" class="dropdown-item" role="button" @click="${()=>e.closeSidebar()}"><converse-icon size="1em" class="fa fa-times"></converse-icon>${t}</a>`]}"></converse-dropdown></div>${e.model?(0,r.html)`<div class="row"><div class="col"><a title="${l}" @click="${()=>e.showOccupantModal()}"><converse-avatar .model="${e.model}" class="avatar modal-avatar justify-content-center" name="${e.model.getDisplayName()}" nonce="${e.getVcard()?.get("vcard_updated")}" height="120" width="120"></converse-avatar></a></div></div>`:""}<ul class="occupant-details">${e.model?(0,r.html)`${c?(0,r.html)`<li class="occupant-details-nickname">${c}</li>`:""}<li class="occupant-details-jid">${d?(0,r.html)`<a @click="${()=>e.openChat(d)}">${d}</a>`:""}</li><li>${h&&"None"!==h?(0,r.html)`<span class="badge text-bg-primary">${h}</span>`:""} ${u?(0,r.html)`<span class="badge text-bg-secondary">${u}</span>`:""} ${m.length?(0,r.html)`${m.map(e=>(0,r.html)`<span class="badge text-bg-info">${e}</span>`)}`:""}</li>`:(0,r.html)`<li>${s}</li>`}</ul>${e.model?(0,r.html)`<div class="chat-body"><div class="chat-content chat-content-sendbutton" aria-live="polite"><converse-chat-content .model="${e.model}"></converse-chat-content></div><converse-occupant-bottom-panel .model="${e.model}" .muc="${e.muc}" class="bottom-panel"></converse-occupant-bottom-panel></div>`:""}</span>`}},"./src/plugins/muc-views/templates/muc-occupants.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/repeat.js"),o=s("./src/i18n/index.js");s("./src/shared/components/list-filter.js"),s("./src/plugins/muc-views/sidebar-occupant.js");var a=s("./src/plugins/muc-views/templates/occupants-filter.js");let l=e=>{let t=1===e.model.occupants?(0,o.__)("Participant"):(0,o.__)("Participants"),s=(0,o.__)("Hide"),l=(0,o.__)("Show filter"),d=(0,o.__)("Hide filter"),c=e.model.get("filter_visible"),u=(0,o.__)("Invite someone"),h=(0,o.__)("Invite someone to join this groupchat"),m=[];return e.model.invitesAllowed()&&m.push((0,r.html)`<a href="#" class="dropdown-item open-invite-modal" role="button" title="${h}" @click="${t=>e.showInviteModal(t)}"><converse-icon size="1em" class="fa fa-user-plus"></converse-icon>${u}</a>`),e.model.occupants.length>5&&m.push((0,r.html)`<a href="#" class="dropdown-item toggle-filter" role="button" @click="${t=>e.toggleFilter(t)}"><converse-icon size="1em" class="fa fa-filter"></converse-icon>${c?d:l}</a>`),m.length?m.push((0,r.html)`<a href="#" class="dropdown-item" role="button" @click="${t=>e.closeSidebar(t)}"><converse-icon size="1em" class="fa fa-times"></converse-icon>${s}</a>`):m.push((0,r.html)`<i class="hide-occupants" @click="${t=>e.closeSidebar(t)}"><converse-icon class="fa fa-times" size="1em"></converse-icon></i>`),(0,r.html)`<div class="occupants"><div class="occupants-header"><div class="occupants-header--title"><span class="occupants-heading sidebar-heading">${e.model.occupants.length} ${t}</span> ${1===m.length?m[0]:(0,r.html)`<converse-dropdown class="chatbox-btn btn-group dropstart" .items="${m}"></converse-dropdown>`}</div></div><ul class="items-list occupant-list">${c?(0,r.html)`<converse-list-filter @update="${()=>e.requestUpdate()}" .promise="${e.model.initialized}" .items="${e.model.occupants}" .template="${a.default}" .model="${e.filter}"></converse-list-filter>`:""} ${(0,i.repeat)(e.model.occupants.models,e=>e.get("jid"),t=>!function(e,t){if(!e.model.get("filter_visible"))return!1;let s=e.filter.get("type"),r="state"===s?e.filter.get("state").toLowerCase():e.filter.get("text").toLowerCase();if(!r)return!1;if("state"===s){let e=t.get("presence");return"online"===r?["offline","unavailable"].includes(e):"ofline"===r?"online"===e:!t.get("show")?.includes(r)}if("items"===s)return!t.getDisplayName().toLowerCase().includes(r)}(e,t)?(0,r.html)`<converse-muc-occupant-list-item .muc="${e.model}" .model="${t}">`:"")}</ul></div>`}},"./src/plugins/muc-views/templates/muc-password-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");let o=e=>{let t=(0,i.__)("This groupchat requires a password"),s=(0,i.__)("Password: "),o=(0,i.__)("Submit");return(0,r.html)`<form class="converse-form chatroom-form converse-centered-form" @submit="${e.submitPassword}"><fieldset><label class="form-label">${t}</label><p class="validation-message">${e.validation_message}</p><input class="hidden-username" aria-hidden="true" type="text" autocomplete="username" value="${e.jid}"><input type="password" name="password" required="required" class="form-control ${e.validation_message?"error":""}" placeholder="${s}"></fieldset><fieldset><input class="btn btn-primary" type="submit" value="${o}"></fieldset></form>`}},"./src/plugins/muc-views/templates/muc-sidebar.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");let i=e=>{let t=e.model.get("sidebar_view")||"",s=t.split("occupant:").pop();return(0,r.html)`${t?.startsWith("occupant:")?(0,r.html)`<converse-muc-occupant muc_jid="${e.jid}" occupant_id="${s}"></converse-muc-occupant>`:(0,r.html)`<converse-muc-occupants jid="${e.jid}"></converse-muc-occupants>`}`}},"./src/plugins/muc-views/templates/muc.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/shared/chat/utils.js"),a=s("./src/plugins/muc-views/utils.js");s("./src/plugins/muc-views/chatarea.js"),s("./src/plugins/muc-views/destroyed.js"),s("./src/plugins/muc-views/disconnected.js"),s("./src/plugins/muc-views/heading.js"),s("./src/plugins/muc-views/nickname-form.js"),s("./src/plugins/muc-views/password-form.js");let l=e=>{let t=e.model?(0,o.getChatStyle)(e.model):"";return(0,r.html)`<div class="flyout box-flyout" style="${t||r.nothing}">${"overlayed"===i.api.settings.get("view_mode")?(0,r.html)`<converse-dragresize></converse-dragresize>`:""} ${e.model?(0,r.html)`<converse-muc-heading jid="${e.model.get("jid")}" class="chat-head chat-head-chatroom row g-0"></converse-muc-heading><div class="chat-body chatroom-body row g-0">${(0,a.getChatRoomBodyTemplate)(e.model)}</div>`:""}</div>`}},"./src/plugins/muc-views/templates/occupant-bottom-panel.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a}),s("./src/plugins/muc-views/message-form.js"),s("./src/plugins/muc-views/nickname-form.js"),s("./src/shared/chat/toolbar.js");var r=s("./src/i18n/index.js"),i=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js");let a=e=>{let t=(0,r.__)("You have unread messages"),s=e.muc.session.get("connection_status"),a=(0,r.__)("This user is not currently in this groupchat and can't receive messages."),l=(0,r.__)("Invite this user to join this groupchat"),d=(0,r.__)("Open a one-on-one chat with this user"),c=(0,r.__)("Open Chat"),u=(0,r.__)("Invite");return s===i.converse.ROOMSTATUS.ENTERED?(0,o.html)`${e.muc.ui.get("scrolled")&&e.model.get("num_unread")?(0,o.html)`<div class="new-msgs-indicator" @click="${t=>e.viewUnreadMessages(t)}"> ${t} </div>`:""} ${e.canPostMessages()?(0,o.html)`<converse-muc-message-form .model="${e.model}"></converse-muc-message-form>`:(0,o.html)`<div class="bottom-panel bottom-panel--muted"><p class="bottom-panel--muted__msg">${a}</p>${e.model.get("jid")?(0,o.html)`<button @click="${e.openChat}" type="button" class="btn btn-primary" title="${d}">${c}</button> <button @click="${e.invite}" type="button" class="btn btn-secondary" title="${l}">${u}</button>`:""}</div>`}`:""}},"./src/plugins/muc-views/templates/occupant.js":function(e,t,s){"use strict";let r;s.r(t),s.d(t,{default:()=>p});var i=s("./src/headless/index.js"),o=s("./src/shared/constants.js"),a=s("./src/i18n/index.js"),l=s("./node_modules/lit/index.js"),d=s("./node_modules/lit/directives/until.js"),c=s("./src/utils/color.js"),u=s("./src/shared/chat/utils.js");let h=e=>(0,a.__)("Click to mention %1$s in your message.",e.get("nick"));function m(e){r||function(){let e;(r={}).owner={label:(0,a.__)("Owner"),classname:"badge-groupchat"},r.admin={label:(0,a.__)("Admin"),classname:"badge-info"},r.member={label:(0,a.__)("Member"),classname:"badge-info"},r.moderator={label:(0,a.__)("Moderator"),classname:"badge-info"},r.visitor={label:(0,a.__)("Visitor"),classname:"badge-secondary"};for(let t=1;t<5&&(!e||Object.values(e).find(e=>e>1));t++){let s={};for(let i of Object.values(r))(!e||(e[i.shortlabel]??0)>=2)&&(i.shortlabel=i.label.substr(0,t).toLocaleUpperCase(),s[i.shortlabel]??=0,s[i.shortlabel]++);e=s}}();let t=r[e];return t?(0,l.html)`<span title="${t.label}" aria-label="${t.label}" class="badge ${t.classname??"badge-info"}">${t.shortlabel}</span>`:""}async function f(e){let t=await i.api.hook("getOccupantActionButtons",e,[]);if(!t?.length)return"";let s=t.map(e=>(0,l.html)`<button class="dropdown-item ${e.button_class}" @click="${e.handler}" type="button"><converse-icon class="${e.icon_class}" color="var(--foreground-color)" size="1em" aria-hidden="true"></converse-icon>${e.i18n_text}</button>`);return(0,l.html)`<converse-dropdown class="occupant-actions chatbox-btn" .items="${s}"></converse-dropdown>`}let p=e=>{let t,s,r=e.model,{show:i,presence:p,affiliation:g}=e.model.attributes,_=o.PRETTY_CHAT_STATUS[i||p],v=r.get("role");"chat"!==i&&(i||"online"!==p)?"dnd"===i?[t,s]=["fa fa-minus-circle","chat-status-busy"]:"away"===i||"xa"===i?[t,s]=["fa fa-circle","chat-status-away"]:[t,s]=["fa fa-circle","chat-status-offline"]:[t,s]=["fa fa-circle","chat-status-online"];let y=(0,u.getUnreadMsgsDisplay)(r);return(0,l.html)`<li class="list-item occupant" id="${r.id}"><a @click="${t=>e.onOccupantClicked(t,r)}"><div class="row g-0"><div class="col-auto"><converse-avatar .model="${r}" class="avatar chat-msg__avatar" name="${r.getDisplayName()}" nonce="${r.vcard?.get("vcard_updated")}" height="30" width="30"></converse-avatar><converse-icon title="${_}" color="var(--${s})" size="0.82em" class="${t} chat-status chat-status--avatar"></converse-icon>${y?(0,l.html)`<span class="msgs-indicator badge">${y}</span>`:""}</div><div class="col occupant-nick-badge"><span class="occupant-nick" title="${function(e){let t=e.get("role"),s=h(e),r=(0,a.__)("This user is a moderator."),i=(0,a.__)("This user can send messages in this groupchat."),o=(0,a.__)("This user can NOT send messages in this groupchat."),l=e.get("jid")?`${e.get("jid")} `:"";return"moderator"===t?`${l}${r} ${s}`:"participant"===t?`${l}${i} ${s}`:"visitor"===t?`${l}${o} ${s}`:["visitor","participant","moderator"].includes(t)?void 0:`${l}${s}`}(r)}" style="${(0,c.getAuthorStyle)(r)}">${r.getDisplayName()}</span> <span class="occupant-badges">${"owner"===g?m("owner"):""} ${"admin"===g?m("admin"):""} ${"member"===g?m("member"):""} ${"moderator"===v?m("moderator"):""} ${"visitor"===v?m("visitor"):""} </span>${(0,d.until)(f(r))}</div></div></a></li>`}},"./src/plugins/muc-views/templates/occupants-filter.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js"),o=s("./src/headless/index.js");let a=e=>{let t=(0,i.__)("Filter"),s=(0,i.__)("Filter by name"),a=(0,i.__)("Filter by status"),l=(0,i.__)("Any"),d=(0,i.__)("Online"),c=(0,i.__)("Chatty"),u=(0,i.__)("Busy"),h=(0,i.__)("Away"),m=(0,i.__)("Extended Away"),f=(0,i.__)("Offline"),p=e.model.get("state"),g=e.model.get("text"),_=e.model.get("type"),v="overlayed"===o.api.settings.get("view_mode");return(0,r.html)`<form class="items-filter-form input-button-group ${!e.shouldBeVisible()?"hidden":"fade-in"}" @submit="${t=>e.submitFilter(t)}"><div class="${v?"":"flex-nowrap"}"><div class="filter-by d-flex flex-nowrap"><converse-icon size="1em" @click="${t=>e.changeTypeFilter(t)}" class="fa fa-user clickable ${"items"===_?"selected":""}" data-type="items" title="${s}"></converse-icon><converse-icon size="1em" @click="${t=>e.changeTypeFilter(t)}" class="fa fa-circle clickable ${"state"===_?"selected":""}" data-type="state" title="${a}"></converse-icon></div><div class="btn-group"><input .value="${g||""}" @keydown="${t=>e.liveFilter(t)}" class="items-filter form-control ${"state"===_?"hidden":""}" placeholder="${t}"><converse-icon size="1em" class="fa fa-times clear-input ${!g||"state"===_?"hidden":""}" @click="${t=>e.clearFilter(t)}"></converse-icon></div><select class="form-control state-type ${"state"!==_?"hidden":""}" @change="${t=>e.changeChatStateFilter(t)}"><option value="">${l}</option><option ?selected="${"online"===p}" value="online">${d}</option><option ?selected="${"chat"===p}" value="chat">${c}</option><option ?selected="${"dnd"===p}" value="dnd">${u}</option><option ?selected="${"away"===p}" value="away">${h}</option><option ?selected="${"xa"===p}" value="xa">${m}</option><option ?selected="${"offline"===p}" value="offline">${f}</option></select></div></form>`}},"./src/plugins/muc-views/templates/role-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");let o=e=>{let t=(0,i.__)("Change role"),s=(0,i.__)("New Role"),o=(0,i.__)("Reason"),a=e.muc.getOwnOccupant().getAssignableRoles();return(0,r.html)`<form class="role-form" @submit="${e.assignRole}"><input type="hidden" name="jid" value="${e.jid}"> <input type="hidden" name="nick" value="${e.nick}"><div class="mb-3"><div class="row"><div class="col-md-6"><label class="form-label"><strong>${s}:</strong></label> <select class="form-select select-role" name="role">${a.map(t=>(0,r.html)`<option value="${t}" ?selected="${t===e.role}">${t}</option>`)}</select></div><div class="col-md-6"><label class="form-label"><strong>${o}:</strong></label> <input class="form-control" type="text" name="reason" placeholder="${o}"></div></div></div><div class="text-end"><button type="submit" class="btn btn-primary">${t}</button></div></form>`}},"./src/plugins/muc-views/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{clearHistory:()=>f,confirmDirectMUCInvitation:()=>m,destroyMUC:()=>p,getAutoCompleteList:()=>y,getAutoCompleteListItem:()=>v,getChatRoomBodyTemplate:()=>_,getNicknameRequiredTemplate:()=>g,parseMessageForMUCCommands:()=>x,showModeratorToolsModal:()=>w,showOccupantModal:()=>S});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js");s("./src/plugins/muc-views/modals/occupant.js"),s("./src/plugins/muc-views/modals/moderator-tools.js");var o=s("./src/templates/spinner.js"),a=s("./src/i18n/index.js");let{Strophe:l,u:d}=i.converse.env,{CHATROOMS_TYPE:c}=i.constants,u={admin:"admin",ban:"outcast",member:"member",owner:"owner",revoke:"none"},h={deop:"participant",kick:"none",mute:"visitor",op:"moderator",voice:"participant"};function m({contact:e,jid:t,reason:s}){return s?i.api.confirm((0,a.__)("Invitation to a groupchat"),(0,a.__)('%1$s has invited you to join the groupchat "%2$s", and left the following reason: "%3$s"',e,t,s)):i.api.confirm((0,a.__)("Invitation to a groupchat"),(0,a.__)('%1$s has invited you to join the groupchat "%2$s"',e,t))}function f(e){location.hash===`converse/room?jid=${e}`&&history.pushState(null,"",window.location.pathname)}async function p(e){let t=[(0,a.__)("Are you sure you want to destroy this groupchat?")],s=[{name:"challenge",label:(0,a.__)("Please enter the XMPP address of this groupchat to confirm"),challenge:e.get("jid"),placeholder:(0,a.__)("name@example.org"),required:!0},{name:"reason",label:(0,a.__)("Optional reason for destroying this groupchat"),placeholder:(0,a.__)("Reason")},{name:"newjid",label:(0,a.__)("Optional XMPP address for a new groupchat that replaces this one"),placeholder:(0,a.__)("replacement@example.org")}];try{s=await i.api.confirm((0,a.__)("Confirm"),t,s);let r=s.filter(e=>"reason"===e.name).pop()?.value,o=s.filter(e=>"newjid"===e.name).pop()?.value;return e.sendDestroyIQ(r,o).then(()=>e.close())}catch(e){i.log.error(e)}}function g(e){let t=e.get("jid");return i.api.settings.get("muc_show_logs_before_join")?(0,r.html)`<converse-muc-chatarea class="row g-0" jid="${t}"></converse-muc-chatarea>`:(0,r.html)`<converse-muc-nickname-form jid="${t}"></converse-muc-nickname-form>`}function _(e){let t=e.session.get("view"),s=e.get("jid"),a=i.converse.ROOMSTATUS,l=e.session.get("connection_status");return t===i.converse.MUC.VIEWS.CONFIG?(0,r.html)`<converse-muc-config-form class="muc-form-container" jid="${s}"></converse-muc-config-form>`:(0,r.html)`${l==a.PASSWORD_REQUIRED?(0,r.html)`<converse-muc-password-form class="muc-form-container" jid="${s}"></converse-muc-password-form>`:""} ${l==a.ENTERED?(0,r.html)`<converse-muc-chatarea class="row g-0" jid="${s}"></converse-muc-chatarea>`:""} ${l==a.CONNECTING?(0,o.default)({class:"vertically-centered"}):""} ${l==a.NICKNAME_REQUIRED?g(e):""} ${l==a.DISCONNECTED?(0,r.html)`<converse-muc-disconnected jid="${s}"></converse-muc-disconnected>`:""} ${l==a.BANNED?(0,r.html)`<converse-muc-disconnected jid="${s}"></converse-muc-disconnected>`:""} ${l==a.DESTROYED?(0,r.html)`<converse-muc-destroyed jid="${s}"></converse-muc-destroyed>`:""}`}function v(e,t,s){let o;s=s.trim();let a=i.api.settings.get("muc_mention_autocomplete_show_avatar");if(a){let s=t.label.toLowerCase();o=e.occupants.findWhere(e=>{if(e.getDisplayName()?.toLowerCase()?.startsWith(s)||e.get("nickname")?.toLowerCase()?.startsWith(s)||e.get("jid")?.toLowerCase()?.startsWith(s))return e})}let l=RegExp("("+s+")","ig"),d=s?t.split(l):[t];return(0,r.html)`<li aria-selected="false">${a?(0,r.html)`<converse-avatar .model="${o}" name="${o.getDisplayName()}" height="22" width="22" class="avatar avatar-autocomplete"></converse-avatar>`:""} <span class="autocomplete-item">${d.map(e=>s&&e.match(l)?(0,r.html)`<mark>${e}</mark>`:e)}</span></li>`}async function y(){return[...new Set([...await i.api.rooms.get(),...await i.api.contacts.get()].map(e=>l.getDomainFromJid(e.get("jid"))))]}function b(e,t,s,r=[],i=[]){let o=h[t];if(!o)throw Error(`ChatRoomView#setRole called with invalid command: ${t}`);if(!e.verifyAffiliations(r)||!e.verifyRoles(i)||!e.validateRoleOrAffiliationChangeArgs(t,s))return!1;let a=e.getNickOrJIDFromCommandArgs(s);if(!a)return!1;let l=s.split(a,2)[1].trim(),d=e.getOccupant(a);return e.setRole(d,o,l,void 0,t=>e.onCommandError(t)),!0}function j(e,t,s,r){let o,l=u[t];if(!l)throw Error(`verifyAffiliations called with invalid command: ${t}`);if(!e.verifyAffiliations(r)||!e.validateRoleOrAffiliationChangeArgs(t,s))return!1;let c=e.getNickOrJIDFromCommandArgs(s);if(!c)return!1;let h=s.split(c,2)[1].trim(),m=e.getOccupant(c);if(m)o=m.get("jid");else if(d.isValidJID(c))o=c;else{let t=(0,a.__)("Couldn't find a participant with that nickname. They might have left the groupchat.");e.createMessage({message:t,type:"error"});return}let f={jid:o,reason:h};m&&i.api.settings.get("auto_register_muc_nickname")&&(f.nick=m.get("nick")),d.muc.setAffiliation(l,e.get("jid"),[f]).then(()=>e.occupants.fetchMembers()).catch(t=>e.onCommandError(t))}function w(e,t){if(!e.verifyRoles(["moderator"]))return;let s=i.api.modal.get("converse-modtools-modal");s?(s.affiliation=t,s.render()):s=i.api.modal.create("converse-modtools-modal",{affiliation:t,jid:e.get("jid")}),s.show()}function S(e,t){i.api.modal.show("converse-muc-occupant-modal",{model:t},e)}function x(e,t){let s=e.model;if(t||s.get("type")!==c||i.api.settings.get("muc_disable_slash_commands")&&!Array.isArray(i.api.settings.get("muc_disable_slash_commands")))return t;let r=e.text,o=((r=r.replace(/^\s*/,"")).match(/^\/([a-zA-Z]*) ?/)||[""]).pop().toLowerCase();if(!o)return!1;let l=r.slice(("/"+o).length+1).trim(),d=s.getAllowedCommands()??[];if("admin"===o&&d.includes(o))return j(s,o,l,["owner"]),!0;if("ban"===o&&d.includes(o))return j(s,o,l,["admin","owner"]),!0;if("modtools"===o&&d.includes(o))return w(s,l),!0;if("deop"===o&&d.includes(o))return b(s,o,l,["admin","owner"]),!0;if("destroy"===o&&d.includes(o))return!s.verifyAffiliations(["owner"])||(p(s).catch(e=>s.onCommandError(e)),!0);else if("help"===o&&d.includes(o))return s.set({show_help_messages:!1},{silent:!0}),s.set({show_help_messages:!0}),!0;else if("kick"===o&&d.includes(o))return b(s,o,l,[],["moderator"]),!0;else if("mute"===o&&d.includes(o))return b(s,o,l,[],["moderator"]),!0;else if("member"===o&&d.includes(o))return j(s,o,l,["admin","owner"]),!0;else if("nick"===o&&d.includes(o)){if(s.verifyRoles(["visitor","participant","moderator"]))if(0===l.length){let e=(0,a.__)('Your nickname is "%1$s"',s.get("nick"));s.createMessage({message:e,type:"error"})}else s.setNickname(l);return!0}else if("owner"===o&&d.includes(o))return j(s,o,l,["owner"]),!0;else if("op"===o&&d.includes(o))return b(s,o,l,["admin","owner"]),!0;else if("register"===o&&d.includes(o))return l.length>1?s.createMessage({message:(0,a.__)("Error: invalid number of arguments"),type:"error"}):s.registerNickname().then(e=>{e&&s.createMessage({message:e,type:"error"})}),!0;else if("revoke"===o&&d.includes(o))return j(s,o,l,["admin","owner"]),!0;else if("topic"===o&&d.includes(o)||"subject"===o&&d.includes(o))return s.setSubject(l),!0;else if("voice"===o&&d.includes(o))return b(s,o,l,[],["moderator"]),!0;else return!1}},"./src/plugins/notifications/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js"),i=s("./src/plugins/notifications/utils.js");r.converse.plugins.add("converse-notification",{dependencies:["converse-chatboxes"],initialize(){r.api.settings.extend({chatstate_notification_blacklist:[],notification_delay:5e3,notification_icon:"/images/logo/conversejs-filled.svg",notify_all_room_messages:!1,notify_nicknames_without_references:!1,play_sounds:!0,show_chat_state_notifications:!1,show_desktop_notifications:!0,show_tab_notifications:!0,sounds_path:r.api.settings.get("assets_path")+"/sounds/"}),r.api.listen.on("clearSession",i.clearFavicon),r.api.waitUntil("chatBoxesInitialized").then(()=>{let{chatboxes:e}=r._converse.state;e.on("change:num_unread",i.updateUnreadFavicon)}),r.api.listen.on("pluginsInitialized",function(){r.api.listen.on("contactRequest",i.handleContactRequestNotification),r.api.listen.on("contactPresenceChanged",i.handleChatStateNotification),r.api.listen.on("message",i.handleMessageNotification),r.api.listen.on("feedback",i.handleFeedback),r.api.listen.on("connected",i.requestPermission)})}})},"./src/plugins/notifications/utils.js":function(e,t,s){"use strict";let r;s.r(t),s.d(t,{areDesktopNotificationsEnabled:()=>p,clearFavicon:()=>g,handleChatStateNotification:()=>x,handleContactRequestNotification:()=>E,handleFeedback:()=>S,handleMessageNotification:()=>w,isMessageToHiddenChat:()=>f,requestPermission:()=>A,shouldNotifyOfGroupMessage:()=>y,showFeedbackNotification:()=>j,updateUnreadFavicon:()=>_});var i=s("./node_modules/favico.js-slevomat/favico.js"),o=s.n(i),a=s("./src/i18n/index.js"),l=s("./src/headless/index.js");let{Strophe:d,u:c}=l.converse.env,{isEmptyMessage:u,isTestEnv:h}=c,m="Notification"in window;function f(e){return h()||(l._converse.state.chatboxes.get(e)?.isHidden()??!1)||document.hidden}function p(){return h()||m&&l.api.settings.get("show_desktop_notifications")&&"granted"===Notification.permission}function g(){r?.badge(0),r=null,navigator.clearAppBadge?.().catch(e=>l.log.error("Could not clear unread count in app badge "+e))}function _(){if(l.api.settings.get("show_tab_notifications")){r=r??new l.converse.env.Favico({type:"circle",animation:"pop"});let e=l._converse.state.chatboxes.models.reduce((e,t)=>e+(t.get("num_unread")||0),0);r.badge(e),navigator.setAppBadge?.(e).catch(e=>l.log.error("Could set unread count in app badge - "+e))}}function v(e,t,s){let r=l._converse.session.get("bare_jid"),i=e=>[r,`${t}/${s}`].includes(e.uri.replace(/^xmpp:/,""));return e.reduce((e,t)=>e||t.uri&&i(t),!1)}async function y(e){if(!e?.body&&!e?.message)return!1;let t=e.from,s=e.from_muc,r=l.api.settings.get("notify_all_room_messages"),i=l._converse.state.chatboxes.get(s),o=d.getResourceFromJid(t),a=o&&d.unescapeNode(o)||"",c=!1,u=i.get("nick");l.api.settings.get("notify_nicknames_without_references")&&(c=RegExp(`\\b${u}\\b`).test(e.body));let h=a!==u,m=!0===r||Array.isArray(r)&&r.includes(s)||v(e.references,s,u)||c;return!!h&&!!m&&await l.api.hook("shouldNotifyOfGroupMessage",e,!0)}async function b(e){if(!e.from_muc)return!1;let t=await l.api.rooms.get(e.from_muc);if(!t)return!1;let s=t.get("nick"),r=e.from_muc,i=l.api.settings.get("notify_all_room_messages");return!0===i||Array.isArray(i)&&i.includes(r)||v(e.references,r,s)}function j(e){if("error"===e.klass||"warn"===e.klass){let t=new Notification(e.subject,{body:e.message,lang:a.i18n.getLocale(),icon:l.api.settings.get("notification_icon")});setTimeout(t.close.bind(t),5e3)}}async function w(e){if(!await function(e){let{attrs:t}=e;if(!t||t.is_forwarded)return!1;if("groupchat"===t.type)return y(t);if("info"===t.type)return b(t);if(t.is_headline)return f(t);let s=l._converse.session.get("bare_jid"),r=d.getBareJidFromJid(t.from)===s;return!u(t)&&!r&&("all"===l.api.settings.get("show_desktop_notifications")||f(t))}(e))return!1;l.api.trigger("messageNotification",e);try{!function(){if(l.api.settings.get("play_sounds")&&void 0!==window.Audio){let e=new Audio(l.api.settings.get("sounds_path")+"msg_received.ogg"),t=e.canPlayType("audio/ogg");if("probably"===t)return e.play();let s=new Audio(l.api.settings.get("sounds_path")+"msg_received.mp3"),r=s.canPlayType("audio/mp3");"probably"===r?s.play():"maybe"===t?e.play():"maybe"===r&&s.play()}}()}catch(e){l.log.error(e)}!function(e){let t,s,r,{attrs:i}=e;if(i.is_error||!p())return;let o=i.from,c=d.getBareJidFromJid(o);if("info"==i.type)t=i.message;else if("headline"===i.type)if(!(!c.includes("@")||l.api.settings.get("allow_non_roster_messaging")))return;else t=(0,a.__)("Notification from %1$s",c);else if(c.includes("@"))if("groupchat"===i.type)t=(0,a.__)("%1$s says",d.getResourceFromJid(o));else{if(void 0===l._converse.state.roster)return l.log.error("Could not send notification, because roster is undefined");if(void 0!==(s=l._converse.state.roster.get(c)))t=(0,a.__)("%1$s says",s.getDisplayName());else{if(!l.api.settings.get("allow_non_roster_messaging"))return;t=(0,a.__)("%1$s says",c)}}else t=(0,a.__)("Notification from %1$s",c);if("info"==i.type)r=i.reason;else if(!(r=i.is_encrypted?i.plaintext:i.body))return;let u=new Notification(t,{body:r,lang:a.i18n.getLocale(),icon:l.api.settings.get("notification_icon"),requireInteraction:!l.api.settings.get("notification_delay")});l.api.settings.get("notification_delay")&&setTimeout(()=>u.close(),l.api.settings.get("notification_delay")),u.onclick=function(e){e.preventDefault(),window.focus(),l._converse.state.chatboxes.get(c).maybeShow(!0)}}(e)}function S(e){p()&&j(e)}function x(e){p()&&l.api.settings.get("show_chat_state_notifications")&&function(e){if(l.api.settings.get("chatstate_notification_blacklist")?.includes(e.get("jid")))return;let t=e.presence.get("show"),s=null;if("offline"===t?s=(0,a.__)("has gone offline"):"away"===t?s=(0,a.__)("has gone away"):"dnd"===t?s=(0,a.__)("is busy"):"online"===t&&(s=(0,a.__)("has come online")),null===s)return;let r=new Notification(e.getDisplayName(),{body:s,lang:a.i18n.getLocale(),icon:l.api.settings.get("notification_icon")});setTimeout(()=>r.close(),5e3)}(e)}function E(e){p()&&function(e){let t=new Notification(e.getDisplayName(),{body:(0,a.__)("wants to be your contact"),lang:a.i18n.getLocale(),icon:l.api.settings.get("notification_icon")});setTimeout(()=>t.close(),5e3)}(e)}function A(){m&&!["denied","granted"].includes(Notification.permission)&&Notification.requestPermission()}l.converse.env.Favico=o()},"./src/plugins/omemo/api.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),i=s("./src/plugins/omemo/utils.js"),o=s("./src/plugins/omemo/store.js");let a={omemo:{getDeviceID:async()=>(await r.api.waitUntil("OMEMOInitialized"),r._converse.state.omemo_store.get("device_id")),session:{async restore(){let{state:e}=r._converse;if(void 0===e.omemo_store){let t=r._converse.session.get("bare_jid"),s=`converse.omemosession-${t}`;e.omemo_store=new o.default({id:s}),r.u.initStorage(e.omemo_store,s)}await e.omemo_store.fetchSession()}},devicelists:{async get(e,t=!1){let{devicelists:s}=r._converse.state,i=s.get(e)||(t?s.create({jid:e}):null);return await i?.initialized,i}},bundle:{async generate(){await r.api.waitUntil("OMEMOInitialized");let e=r._converse.session.get("bare_jid"),t=await r.api.omemo.devicelists.get(e),{omemo_store:s}=r._converse.state,o=s.get("device_id");if(o){let e=t.devices.get(o);s.unset(o),e&&await new Promise(t=>e.destroy({success:t,error:t})),t.devices.trigger("remove")}await s.generateBundle(),await t.publishDevices();let a=t.devices.get(s.get("device_id")),l=(0,i.generateFingerprint)(a);return await s.publishBundle(),l}}}}},"./src/plugins/omemo/consts.js":function(e,t,s){"use strict";s.r(t),s.d(t,{KEY_ALGO:()=>l,TAG_LENGTH:()=>a,TRUSTED:()=>i,UNDECIDED:()=>r,UNTRUSTED:()=>o});let r=0,i=1,o=-1,a=128,l={name:"AES-GCM",length:128}},"./src/plugins/omemo/device.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/index.js"),o=s("./src/shared/errors.js"),a=s("./src/plugins/omemo/consts.js"),l=s("./src/plugins/omemo/utils.js");let{Strophe:d,sizzle:c,stx:u}=i.converse.env;class h extends r.Model{defaults(){return{trusted:a.UNDECIDED,active:!0}}getRandomPreKey(){let e=this.get("bundle");return e.prekeys[i.u.getRandomInt(e.prekeys.length)]}async fetchBundleFromServer(){let e,t=i._converse.session.get("bare_jid"),s=u`
            <iq type="get" from="${t}" to="${this.get("jid")}" xmlns="jabber:client">
                <pubsub xmlns="${d.NS.PUBSUB}">
                    <items node="${d.NS.OMEMO_BUNDLES}:${this.get("id")}"/>
                </pubsub>
            </iq>`;try{e=await i.api.sendIQ(s)}catch(e){return i.log.error(`Could not fetch bundle for device ${this.get("id")} from ${this.get("jid")}`),i.log.error(e),null}if(e.querySelector("error"))throw new o.IQError("Could not fetch bundle",e);let r=c(`items[node="${d.NS.OMEMO_BUNDLES}:${this.get("id")}"]`,e).pop(),a=c(`bundle[xmlns="${d.NS.OMEMO}"]`,r).pop(),h=(0,l.parseBundle)(a);return this.save("bundle",h),h}getBundle(){return this.get("bundle")?Promise.resolve(this.get("bundle")):this.fetchBundleFromServer()}}let m=h},"./src/plugins/omemo/devicelist.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./node_modules/@converse/openpromise/dist/openpromise.js"),o=s("./src/headless/index.js");let{Strophe:a,stx:l,sizzle:d}=o.converse.env;class c extends r.Model{get idAttribute(){return"jid"}async initialize(){super.initialize(),this.initialized=(0,i.getOpenPromise)(),await this.initDevices(),this.initialized.resolve()}initDevices(){this.devices=new o._converse.exports.Devices;let e=o._converse.session.get("bare_jid"),t=`converse.devicelist-${e}-${this.get("jid")}`;return o.u.initStorage(this.devices,t),this.fetchDevices()}async onDevicesFound(e){if(0===e.length){let e=[];try{e=await this.fetchDevicesFromServer()}catch(e){null===e?(o.log.error(`Timeout error while fetching OMEMO devices for ${this.get("jid")}`),this.destroy()):o.u.isElement(e)&&await o.parsers.parseErrorStanza(e) instanceof o.errors.ItemNotFoundError?o.log.debug(`No OMEMO devices found for ${this.get("jid")}`):(o.log.error(`Could not fetch OMEMO devices for ${this.get("jid")}`),o.log.error(e),this.destroy())}let t=o._converse.session.get("bare_jid");this.get("jid")===t&&this.publishCurrentDevice(e)}}fetchDevices(){return void 0===this._devices_promise&&(this._devices_promise=new Promise(e=>{this.devices.fetch({success:t=>e(this.onDevicesFound(t)),error:(t,s)=>{o.log.error(s),e()}})})),this._devices_promise}async getOwnDeviceId(){let{omemo_store:e}=o._converse.state,t=e.get("device_id");return this.devices.get(t)||(await e.generateBundle(),t=e.get("device_id")),t}async publishCurrentDevice(e){let t=o._converse.session.get("bare_jid");if(this.get("jid")===t){if(await o.api.omemo.session.restore(),!o._converse.state.omemo_store)return void o.log.debug("publishCurrentDevice: omemo_store is not defined, likely a timing issue");if(!e.includes(await this.getOwnDeviceId()))return this.publishDevices()}}async fetchDevicesFromServer(){let e=o._converse.session.get("bare_jid"),t=l`
            <iq type='get' from='${e}' to='${this.get("jid")}' xmlns="jabber:client">
                <pubsub xmlns='${a.NS.PUBSUB}'>
                    <items node='${a.NS.OMEMO_DEVICELIST}'/>
                </pubsub>
            </iq>`,s=await o.api.sendIQ(t),r=d(`list[xmlns="${a.NS.OMEMO}"] device`,s).map(e=>e.getAttribute("id")),i=this.get("jid");return Promise.all(r.map(e=>this.devices.create({id:e,jid:i},{promise:!0})))}publishDevices(){let e=l`
            <item id='current'>
                <list xmlns='${a.NS.OMEMO}'>
                    ${this.devices.filter(e=>e.get("active")).map(e=>l`<device id='${e.get("id")}'/>`)}
                </list>
            </item>`;return o.api.pubsub.publish(null,a.NS.OMEMO_DEVICELIST,e,{access_model:"open"},!1)}async removeOwnDevices(e){let t=o._converse.session.get("bare_jid");if(this.get("jid")!==t)throw Error("Cannot remove devices from someone else's device list");return await Promise.all(e.map(e=>this.devices.get(e)).map(e=>new Promise(t=>e.destroy({success:t,error:(e,s)=>{o.log.error(s),t()}})))),this.publishDevices()}}let u=c},"./src/plugins/omemo/devicelists.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/plugins/omemo/devicelist.js"),i=s("./node_modules/@converse/skeletor/dist/skeletor.js");class o extends i.Collection{constructor(){super(),this.model=r.default}}let a=o},"./src/plugins/omemo/devices.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/plugins/omemo/device.js");class o extends r.Collection{constructor(){super(),this.model=i.default}}let a=o},"./src/plugins/omemo/fingerprints.js":function(e,t,s){"use strict";s.r(t),s.d(t,{Fingerprints:()=>a});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/plugins/omemo/templates/fingerprints.js");class a extends i.CustomElement{constructor(){super(),this.jid=null}static get properties(){return{jid:{type:String}}}async initialize(){this.devicelist=await r.api.omemo.devicelists.get(this.jid,!0),this.listenTo(this.devicelist.devices,"change:bundle",()=>this.requestUpdate()),this.listenTo(this.devicelist.devices,"change:trusted",()=>this.requestUpdate()),this.listenTo(this.devicelist.devices,"remove",()=>this.requestUpdate()),this.listenTo(this.devicelist.devices,"add",()=>this.requestUpdate()),this.listenTo(this.devicelist.devices,"reset",()=>this.requestUpdate()),this.requestUpdate()}render(){return this.devicelist?(0,o.default)(this):""}toggleDeviceTrust(e){let t=e.target;this.devicelist.devices.get(t.getAttribute("name")).save("trusted",parseInt(t.value,10))}}r.api.elements.define("converse-omemo-fingerprints",a)},"./src/plugins/omemo/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js");s("./src/plugins/omemo/fingerprints.js"),s("./src/plugins/omemo/profile.js"),s("./src/shared/modals/user-details.js");var i=s("./src/plugins/omemo/device.js"),o=s("./src/plugins/omemo/devicelist.js"),a=s("./src/plugins/omemo/devicelists.js"),l=s("./src/plugins/omemo/devices.js"),d=s("./src/plugins/omemo/store.js"),c=s("./src/plugins/omemo/api.js"),u=s("./src/plugins/omemo/utils.js");s("./src/plugins/omemo/styles/omemo.scss");let{Strophe:h}=r.converse.env,{shouldClearCache:m}=r.u;r.converse.env.omemo=u.omemo,h.addNamespace("OMEMO_DEVICELIST",h.NS.OMEMO+".devicelist"),h.addNamespace("OMEMO_VERIFICATION",h.NS.OMEMO+".verification"),h.addNamespace("OMEMO_WHITELISTED",h.NS.OMEMO+".whitelisted"),h.addNamespace("OMEMO_BUNDLES",h.NS.OMEMO+".bundles"),r.converse.plugins.add("converse-omemo",{enabled:e=>window.libsignal&&e.config.get("trusted")&&!r.api.settings.get("clear_cache_on_logout")&&!e.api.settings.get("blacklisted_plugins").includes("converse-omemo"),dependencies:["converse-chatview","converse-pubsub","converse-profile"],initialize(){r.api.settings.extend({omemo_default:!1}),r.api.promises.add(["OMEMOInitialized"]),Object.assign(r._converse.api,c.default);let e={OMEMOStore:d.default,Device:i.default,Devices:l.default,DeviceList:o.default,DeviceLists:a.default};Object.assign(r._converse,e),Object.assign(r._converse.exports,e),r.api.listen.on("chatRoomInitialized",u.onChatInitialized),r.api.listen.on("chatBoxInitialized",u.onChatInitialized),r.api.listen.on("getOutgoingMessageAttributes",u.getOutgoingMessageAttributes),r.api.listen.on("createMessageStanza",async(e,t)=>{try{t=await (0,u.createOMEMOMessageStanza)(e,t)}catch(t){(0,u.handleMessageSendError)(t,e)}return t}),r.api.listen.on("afterFileUploaded",(e,t)=>e.file.xep454_ivkey?(0,u.setEncryptedFileURL)(e,t):t),r.api.listen.on("beforeFileUpload",(e,t)=>e.get("omemo_active")?(0,u.encryptFile)(t):t),r.api.listen.on("parseMessage",u.parseEncryptedMessage),r.api.listen.on("parseMUCMessage",u.parseEncryptedMessage),r.api.listen.on("chatBoxViewInitialized",u.onChatComponentInitialized),r.api.listen.on("chatRoomViewInitialized",u.onChatComponentInitialized),r.api.listen.on("connected",u.registerPEPPushHandler),r.api.listen.on("getToolbarButtons",u.getOMEMOToolbarButton),r.api.listen.on("statusInitialized",u.initOMEMO),r.api.listen.on("addClientFeatures",()=>r.api.disco.own.features.add(`${h.NS.OMEMO_DEVICELIST}+notify`)),r.api.listen.on("afterMessageBodyTransformed",u.handleEncryptedFiles),r.api.listen.on("userDetailsModalInitialized",e=>{let t=e.get("jid");(0,u.generateFingerprints)(t).catch(e=>r.log.error(e))}),r.api.listen.on("profileModalInitialized",()=>{let e=r._converse.session.get("bare_jid");(0,u.generateFingerprints)(e).catch(e=>r.log.error(e))}),r.api.listen.on("clearSession",()=>{delete r._converse.state.omemo_store,m(r._converse)&&r._converse.state.devicelists&&(r._converse.state.devicelists.clearStore(),delete r._converse.state.devicelists)})}})},"./src/plugins/omemo/profile.js":function(e,t,s){"use strict";s.r(t),s.d(t,{Profile:()=>h});var r=s("./src/plugins/omemo/templates/profile.js"),i=s("./src/templates/spinner.js"),o=s("./src/shared/components/element.js"),a=s("./src/i18n/index.js"),l=s("./src/headless/index.js");let{Strophe:d,sizzle:c,u}=l.converse.env;class h extends o.CustomElement{async initialize(){let e=l._converse.session.get("bare_jid");this.devicelist=await l.api.omemo.devicelists.get(e,!0),await this.setAttributes(),this.listenTo(this.devicelist.devices,"change:bundle",()=>this.requestUpdate()),this.listenTo(this.devicelist.devices,"reset",()=>this.requestUpdate()),this.listenTo(this.devicelist.devices,"reset",()=>this.requestUpdate()),this.listenTo(this.devicelist.devices,"remove",()=>this.requestUpdate()),this.listenTo(this.devicelist.devices,"add",()=>this.requestUpdate()),this.requestUpdate()}async setAttributes(){this.device_id=await l.api.omemo.getDeviceID(),this.current_device=this.devicelist.devices.get(this.device_id),this.other_devices=this.devicelist.devices.filter(e=>e.get("id")!==this.device_id)}render(){return this.devicelist?(0,r.default)(this):(0,i.default)()}selectAll(e){let t=u.ancestor(e.target,"li");for(;t;)t.querySelector('input[type="checkbox"]').checked=e.target.checked,t=t.nextElementSibling}async removeSelectedFingerprints(e){e.preventDefault(),e.stopPropagation(),e.target.querySelector(".select-all").checked=!1;let t=c('.fingerprint-removal-item input[type="checkbox"]:checked',e.target).map(e=>e.value);try{await this.devicelist.removeOwnDevices(t)}catch(e){l.log.error(e),l._converse.api.alert(d.LogLevel.ERROR,(0,a.__)("Error"),[(0,a.__)("Sorry, an error occurred while trying to remove the devices.")])}await this.setAttributes(),this.requestUpdate()}async generateOMEMODeviceBundle(e){e.preventDefault(),await l.api.confirm((0,a.__)("Confirm"),(0,a.__)("Are you sure you want to generate new OMEMO keys? This will remove your old keys and all previously encrypted messages will no longer be decryptable on this device."))&&(await l.api.omemo.bundle.generate(),await this.setAttributes(),this.requestUpdate())}}l.api.elements.define("converse-omemo-profile",h)},"./src/plugins/omemo/store.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/plugins/omemo/utils.js"),o=s("./src/headless/index.js");let{Strophe:a,stx:l,u:d}=o.converse.env;class c extends r.Model{get Direction(){return{SENDING:1,RECEIVING:2}}getIdentityKeyPair(){let e=this.get("identity_keypair");return Promise.resolve({privKey:d.base64ToArrayBuffer(e.privKey),pubKey:d.base64ToArrayBuffer(e.pubKey)})}getLocalRegistrationId(){return Promise.resolve(parseInt(this.get("device_id"),10))}isTrustedIdentity(e,t,s){if(null==e)throw Error("Can't check identity key for invalid key");if(!(t instanceof ArrayBuffer))throw Error("Expected identity_key to be an ArrayBuffer");let r=this.get("identity_key"+e);return void 0===r?Promise.resolve(!0):Promise.resolve(d.arrayBufferToBase64(t)===r)}loadIdentityKey(e){if(null==e)throw Error("Can't load identity_key for invalid identifier");return Promise.resolve(d.base64ToArrayBuffer(this.get("identity_key"+e)))}saveIdentity(e,t){if(null==e)throw Error("Can't save identity_key for invalid identifier");let{libsignal:s}=window,r=new s.SignalProtocolAddress.fromString(e),i=this.get("identity_key"+r.getName()),o=d.arrayBufferToBase64(t);return(this.save("identity_key"+r.getName(),o),i&&o!==i)?Promise.resolve(!0):Promise.resolve(!1)}getPreKeys(){return this.get("prekeys")||{}}loadPreKey(e){let t=this.getPreKeys()[e];return t?Promise.resolve({privKey:d.base64ToArrayBuffer(t.privKey),pubKey:d.base64ToArrayBuffer(t.pubKey)}):Promise.resolve()}storePreKey(e,t){let s={};return s[e]={pubKey:d.arrayBufferToBase64(t.pubKey),privKey:d.arrayBufferToBase64(t.privKey)},this.save("prekeys",Object.assign(this.getPreKeys(),s)),Promise.resolve()}removePreKey(e){let t={...this.getPreKeys()};return delete t[e],this.save("prekeys",t),Promise.resolve()}loadSignedPreKey(e){let t=this.get("signed_prekey");return t?Promise.resolve({privKey:d.base64ToArrayBuffer(t.privKey),pubKey:d.base64ToArrayBuffer(t.pubKey)}):Promise.resolve()}storeSignedPreKey(e){if("object"!=typeof e)throw Error("storeSignedPreKey: expected an object");return this.save("signed_prekey",{id:e.keyId,privKey:d.arrayBufferToBase64(e.keyPair.privKey),pubKey:d.arrayBufferToBase64(e.keyPair.pubKey),signature:d.arrayBufferToBase64(e.signature)}),Promise.resolve()}removeSignedPreKey(e){return this.get("signed_prekey").id===e&&(this.unset("signed_prekey"),this.save()),Promise.resolve()}loadSession(e){return Promise.resolve(this.get("session"+e))}storeSession(e,t){return Promise.resolve(this.save("session"+e,t))}removeSession(e){return Promise.resolve(this.unset("session"+e))}removeAllSessions(e){let t=Object.keys(this.attributes).filter(t=>!!t.startsWith("session"+e)&&t),s={};return t.forEach(e=>{s[e]=void 0}),this.save(s),Promise.resolve()}publishBundle(){let e=this.get("signed_prekey"),t=`${a.NS.OMEMO_BUNDLES}:${this.get("device_id")}`,s=l`
            <item>
                <bundle xmlns="${a.NS.OMEMO}">
                    <signedPreKeyPublic signedPreKeyId="${e.id}">${e.pubKey}</signedPreKeyPublic>
                    <signedPreKeySignature>${e.signature}</signedPreKeySignature>
                    <identityKey>${this.get("identity_keypair").pubKey}</identityKey>
                    <prekeys>${Object.values(this.get("prekeys")).map((e,t)=>l`<preKeyPublic preKeyId="${t}">${e.pubKey}</preKeyPublic>`)}
                    </prekeys>
                </bundle>
            </item>`;return o.api.pubsub.publish(null,t,s,{access_model:"open"},!1)}async generateMissingPreKeys(){let{libsignal:e}=window,{KeyHelper:t}=e,s=Object.keys(this.getPreKeys()),r=Array.from({length:o._converse.NUM_PREKEYS},(e,t)=>t.toString()).filter(e=>!s.includes(e));if(r.length<1)return o.log.debug("No missing prekeys to generate for our own device"),Promise.resolve();(await Promise.all(r.map(e=>t.generatePreKey(parseInt(e,10))))).forEach(e=>this.storePreKey(e.keyId,e.keyPair));let i=this.getPreKeys(),a=Object.keys(i).map(e=>({id:e,key:i[e].pubKey})),l=o._converse.session.get("bare_jid"),d=(await o.api.omemo.devicelists.get(l)).devices.get(this.get("device_id")),c=await d.getBundle();d.save("bundle",Object.assign(c,{prekeys:a}))}async generatePreKeys(){let e=o._converse.NUM_PREKEYS,{libsignal:t}=window,{KeyHelper:s}=t,r=await Promise.all([...Array(e).keys()].map(e=>s.generatePreKey(e)));return r.forEach(e=>this.storePreKey(e.keyId,e.keyPair)),r.map(e=>({id:e.keyId,key:d.arrayBufferToBase64(e.keyPair.pubKey)}))}async generateBundle(){let{libsignal:e}=window,t=await e.KeyHelper.generateIdentityKeyPair(),s=d.arrayBufferToBase64(t.pubKey),r=await (0,i.generateDeviceID)();this.save({device_id:r,identity_key:s,identity_keypair:{privKey:d.arrayBufferToBase64(t.privKey),pubKey:s}});let a=await e.KeyHelper.generateSignedPreKey(t,0);this.storeSignedPreKey(a);let l={identity_key:s,device_id:r,prekeys:await this.generatePreKeys()};l.signed_prekey={id:a.keyId,public_key:d.arrayBufferToBase64(a.keyPair.pubKey),signature:d.arrayBufferToBase64(a.signature)};let c=o._converse.session.get("bare_jid"),u=await o.api.omemo.devicelists.get(c);(await u.devices.create({id:l.device_id,jid:c},{promise:!0})).save("bundle",l)}fetchSession(){return void 0===this._setup_promise&&(this._setup_promise=new Promise((e,t)=>{this.fetch({success:()=>{this.get("device_id")?e():this.generateBundle().then(e).catch(t)},error:(s,r)=>{o.log.warn(`Could restore OMEMO session, we'll generate a new one: ${r}`),this.generateBundle().then(e).catch(t)}})})),this._setup_promise}}let u=c},"./src/plugins/omemo/templates/fingerprints.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/i18n/index.js"),i=s("./node_modules/lit/index.js"),o=s("./src/plugins/omemo/utils.js");let{u:a}=s("./src/headless/index.js").converse.env,l=(e,t)=>{let s=(0,r.__)("Trusted"),l=(0,r.__)("Untrusted"),d=(0,r.__)("Choose which devices you trust for OMEMO encrypted communication"),c=a.getUniqueId(),u=a.getUniqueId(),h=-1!==t.get("trusted");return t.get("bundle")&&t.get("bundle").fingerprint?(0,i.html)`<li class="list-group-item"><form class="fingerprint-trust"><div class="btn-group btn-group-toggle" role="group" aria-label="${d}"><input type="radio" class="btn-check" name="${t.get("id")}" id="${c}" autocomplete="off" value="1" @click="${e.toggleDeviceTrust}" ?checked="${h}"> <label class="btn ${h?"btn-primary active":"btn-outline-secondary"}" for="${c}">${s}</label> <input type="radio" class="btn-check" name="${t.get("id")}" id="${u}" autocomplete="off" value="-1" @click="${e.toggleDeviceTrust}" ?checked="${!h}"> <label class="btn ${!h?"btn-primary active":"btn-outline-secondary"}" for="${u}">${l}</label></div><code class="fingerprint">${(0,o.formatFingerprint)(t.get("bundle").fingerprint)}</code></form></li>`:""},d=e=>{let t=(0,r.__)("OMEMO Fingerprints"),s=(0,r.__)("No OMEMO-enabled devices found"),o=e.devicelist.devices;return(0,i.html)`<ul class="list-group fingerprints"><li class="list-group-item active">${t}</li>${o.length?o.map(t=>l(e,t)):(0,i.html)`<li class="list-group-item">${s}</li>`}</ul>`}},"./src/plugins/omemo/templates/profile.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/templates/spinner.js"),i=s("./src/plugins/omemo/utils.js"),o=s("./node_modules/lit/index.js"),a=s("./src/i18n/index.js");s("./src/shared/qrcode/component.js");let l=e=>{let t=(0,a.__)("This device's OMEMO fingerprint"),s=(0,a.__)("Generate new keys and fingerprint"),l=e?.current_device?.get("bundle").fingerprint;return(0,o.html)`<form class="converse-form fingerprint-removal" @submit="${e.removeSelectedFingerprints}"><ul class="list-group fingerprints"><li class="list-group-item active">${t}</li><li class="list-group-item">${l?(0,o.html)`<span class="fingerprint">${(0,i.formatFingerprint)(e.current_device.get("bundle").fingerprint)}</span>`:(0,r.default)()}</li><li class="list-group-item p-4">${l?(0,o.html)`<converse-qr-code class="centered" text="${(0,i.formatFingerprintForQRCode)(l)}"></converse-qr-code>`:""}</li></ul><div class="pb-3"><button type="button" class="generate-bundle btn btn-danger" @click="${e.generateOMEMODeviceBundle}">${s}</button></div>${e.other_devices?.length?function(e){let t=(0,a.__)("Other OMEMO-enabled devices"),s=(0,a.__)("Checkbox to select fingerprints of all other OMEMO devices"),r=(0,a.__)("Remove checked devices and close"),l=(0,a.__)("Select all");return(0,o.html)`<ul class="list-group fingerprints"><li class="list-group-item active"><label class="form-label"><input type="checkbox" class="select-all" @change="${e.selectAll}" title="${l}" aria-label="${s}"> ${t}</label></li>${e.other_devices?.map(e=>(0,o.html)`${e.get("bundle")&&e.get("bundle").fingerprint?function(e){let t=(0,a.__)("Checkbox for selecting the following fingerprint");return(0,o.html)`<li class="fingerprint-removal-item list-group-item"><label class="form-label"><input type="checkbox" value="${e.get("id")}" aria-label="${t}"> <span class="fingerprint">${(0,i.formatFingerprint)(e.get("bundle").fingerprint)}</span></label></li>`}(e):function(e){let t=(0,a.__)("Device without a fingerprint"),s=(0,a.__)("Checkbox for selecting the following device");return(0,o.html)`<li class="fingerprint-removal-item list-group-item"><label class="form-label"><input type="checkbox" value="${e.get("id")}" aria-label="${s}"> <span>${t}</span></label></li>`}(e)}`)}</ul><div><button type="submit" class="save-form btn btn-primary">${r}</button></div>`}(e):""}</form>`}},"./src/plugins/omemo/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{contactHasOMEMOSupport:()=>L,createOMEMOMessageStanza:()=>eb,encryptFile:()=>z,formatFingerprint:()=>N,formatFingerprintForQRCode:()=>R,generateDeviceID:()=>ei,generateFingerprint:()=>es,generateFingerprints:()=>et,getDeviceForContact:()=>en,getDevicesForContact:()=>er,getOMEMOToolbarButton:()=>ev,getOutgoingMessageAttributes:()=>P,getSession:()=>ea,getSessionCipher:()=>K,handleEncryptedFiles:()=>H,handleMessageSendError:()=>D,initOMEMO:()=>ef,omemo:()=>ej,onChatComponentInitialized:()=>V,onChatInitialized:()=>W,parseBundle:()=>ee,parseEncryptedMessage:()=>G,registerPEPPushHandler:()=>eu,restoreOMEMOSession:()=>eh,setEncryptedFileURL:()=>U});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js"),o=s("./node_modules/lit/directives/until.js"),a=s("./src/headless/index.js"),l=s("./src/shared/texture/templates/audio.js"),d=s("./src/templates/file.js"),c=s("./src/shared/texture/templates/image.js"),u=s("./src/shared/texture/templates/video.js"),h=s("./src/plugins/omemo/consts.js"),m=s("./src/utils/file.js"),f=s("./src/shared/errors.js"),p=s("./src/plugins/omemo/devicelists.js"),g=s("./src/utils/html.js");let{Strophe:_,sizzle:v,stx:y}=a.converse.env,{CHATROOMS_TYPE:b,PRIVATE_CHAT_TYPE:j}=a.constants,{appendArrayBuffer:w,arrayBufferToBase64:S,arrayBufferToHex:x,arrayBufferToString:E,base64ToArrayBuffer:A,hexToArrayBuffer:C,initStorage:k,isAudioURL:$,isError:T,isImageURL:M,isVideoURL:O,stringToArrayBuffer:I}=a.u;function N(e){e=e.replace(/^05/,"");for(let t=1;t<8;t++){let s=8*t+t-1;e=e.slice(0,s)+" "+e.slice(s)}return e}function R(e){let t=a._converse.state.omemo_store.get("device_id"),s=a._converse.session.get("bare_jid");return e=e.replace(/^05/,""),`xmpp:${s}?omemo-sid-${t}=${e}`}function D(e,t){if(e instanceof f.IQError){t.save("omemo_supported",!1);let s=[];v(`presence-subscription-required[xmlns="${_.NS.PUBSUB_ERROR}"]`,e.iq).length?s.push((0,i.__)("Sorry, we're unable to send an encrypted message because %1$s requires you to be subscribed to their presence in order to see their OMEMO information",e.iq.getAttribute("from"))):v('remote-server-not-found[xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"]',e.iq).length?s.push((0,i.__)("Sorry, we're unable to send an encrypted message because the remote server for %1$s could not be found",e.iq.getAttribute("from"))):(s.push((0,i.__)("Unable to send an encrypted message due to an unexpected error.")),s.push(e.iq.outerHTML)),a.api.alert("error",(0,i.__)("Error"),s)}else e instanceof f.UserFacingError&&a.api.alert("error",(0,i.__)("Error"),[e.message]);throw e}async function L(e){return(await er(e)).length>0}function P(e,t){return e.get("omemo_active")&&t.body?{...t,is_encrypted:!0,plaintext:t.body,body:(0,i.__)("This is an OMEMO encrypted message which your client doesnt seem to support. Find more information on https://conversations.im/omemo")}:t}async function z(e){let t=crypto.getRandomValues(new Uint8Array(12)),s=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:t},s,await e.arrayBuffer()),i=await window.crypto.subtle.exportKey("raw",s),o=new File([r],e.name,{type:e.type,lastModified:e.lastModified});return Object.assign(o,{xep454_ivkey:x(t)+x(i)}),o}function U(e,t){let s=t.oob_url.replace(/^https?:/,"aesgcm:")+"#"+e.file.xep454_ivkey;return Object.assign(t,{oob_url:null,message:s,body:s})}async function B(e,t,s){let r=await crypto.subtle.importKey("raw",C(t),"AES-GCM",!1,["decrypt"]),i={name:"AES-GCM",iv:C(e)};return crypto.subtle.decrypt(i,r,s)}async function F(e){let t;try{t=await fetch(e)}catch(t){return a.log.error(`${t.name}: Failed to download encrypted media: ${e}`),a.log.error(t),null}if(t.status>=200&&t.status<400)return t.arrayBuffer()}async function q(e){let t,s=new URL(e),r="localhost"===window.location.hostname&&"localhost"===s.hostname?"http":"https",o=s.toString().replace(/^aesgcm/,r),l=await F(o);if(null===l)return a.log.error(`Could not decrypt a received encrypted file ${s.toString()} since it could not be downloaded`),Error((0,i.__)("Error: could not decrypt a received encrypted file, because it could not be downloaded"));let d=s.hash.slice(1),c=d.substring(d.length-64),u=d.replace(c,"");try{t=await B(u,c,l)}catch(e){return a.log.error(`Could not decrypt file ${s.toString()}`),a.log.error(e),null}let[h,f]=s.pathname.split("/").pop().split("."),p=m.MIMETYPES_MAP[f];try{let e=new File([t],h,{type:p});return URL.createObjectURL(e)}catch(e){return a.log.error(`Could not decrypt file ${s.toString()}`),a.log.error(e),null}}function H(e){a._converse.state.config.get("trusted")&&e.addAnnotations((t,s)=>(function(e,t,s){let i=[];try{a.u.withinString(e,(e,t,s)=>(i.push({url:e,start:t,end:s}),e),{start:/\b(aesgcm:\/\/)/gi})}catch(e){a.log.debug(e);return}i.forEach(e=>{let i=q(e.url).then(t=>{var i,o,a;return i=e.url,o=t,a=s,T(o)?(0,r.html)`<p class="error">${o.message}</p>`:M(i)?(0,c.default)({src:o,onClick:a.onImgClick,onLoad:a.onImgLoad}):$(i)?(0,l.default)(o):O(i)?(0,u.default)(o):(0,d.default)(o,(0,g.getFileName)(i))}),a=(0,r.html)`${(0,o.until)(i,"")}`;s.addTemplateResult(e.start+t,e.end+t,a)})})(t,s,e))}async function G(e,t){if(a.api.settings.get("clear_cache_on_logout")||!t.is_encrypted||t.encryption_namespace!==_.NS.OMEMO)return t;let s=v(`encrypted[xmlns="${_.NS.OMEMO}"]`,e).pop(),r=s.querySelector("header");t.encrypted={device_id:r.getAttribute("sid")};let i=await a.api.omemo?.getDeviceID(),o=i&&v(`key[rid="${i}"]`,s).pop();return o?(Object.assign(t.encrypted,{iv:r.querySelector("iv").textContent,key:o.textContent,payload:s.querySelector("payload")?.textContent||null,prekey:["true","1"].includes(o.getAttribute("prekey"))}),!0===t.encrypted.prekey)?X(t):Z(t):Object.assign(t,{error_condition:"not-encrypted-for-this-device",error_type:"Decryption",is_ephemeral:!0,is_error:!0,type:"error"})}function W(e){eg(e),e.get("type")===b&&(e.occupants.on("add",t=>ep(e,t)),e.features.on("change",()=>eg(e)))}function V(e){e.listenTo(e.model.messages,"add",t=>{t.get("is_encrypted")&&!t.get("is_error")&&e.model.save("omemo_supported",!0)}),e.listenTo(e.model,"change:omemo_supported",()=>{!e.model.get("omemo_supported")&&e.model.get("omemo_active")?e.model.set("omemo_active",!1):e.querySelector("converse-chat-toolbar")?.requestUpdate()}),e.listenTo(e.model,"change:omemo_active",()=>{e.querySelector("converse-chat-toolbar").requestUpdate()})}function K(e,t){let{libsignal:s}=window,r=new s.SignalProtocolAddress(e,t);return new s.SessionCipher(a._converse.state.omemo_store,r)}function J(e){let t;if(!(t="me"===e.sender?a._converse.session.get("bare_jid"):e.contact_jid?e.contact_jid:"from_real_jid"in e?e.from_real_jid:e.from))throw Object.assign(e,{error_text:(0,i.__)("Sorry, could not decrypt a received OMEMO message because we don't have the XMPP address for that user."),error_type:"Decryption",is_ephemeral:!0,is_error:!0,type:"error"}),Error("Could not find JID to decrypt OMEMO message for");return t}async function Q(e,t){let s=J(e),r=await a.api.omemo.devicelists.get(s,!0),i=e.encrypted,o=r.devices.get(i.device_id);if(o||(o=await r.devices.create({id:i.device_id,jid:s},{promise:!0})),i.payload){let e=t.slice(0,16),s=t.slice(16),r=await ej.decryptMessage(Object.assign(i,{key:e,tag:s}));return o.save("active",!0),r}}function Y(e){return{error_text:(0,i.__)("Sorry, could not decrypt a received OMEMO message due to an error.")+` ${e.name} ${e.message}`,error_condition:e.name,error_message:e.message,error_type:"Decryption",is_ephemeral:!0,is_error:!0,type:"error"}}async function X(e){let t,s=K(J(e),parseInt(e.encrypted.device_id,10)),r=A(e.encrypted.key);try{t=await s.decryptPreKeyWhisperMessage(r,"binary")}catch(t){return a.log.error(`${t.name} ${t.message}`),Object.assign(e,Y(t))}try{let s=await Q(e,t),{omemo_store:r}=a._converse.state;if(await r.generateMissingPreKeys(),await r.publishBundle(),s)return Object.assign(e,{plaintext:s});return Object.assign(e,{is_only_key:!0})}catch(t){return a.log.error(`${t.name} ${t.message}`),Object.assign(e,Y(t))}}async function Z(e){let t=K(J(e),parseInt(e.encrypted.device_id,10)),s=A(e.encrypted.key);try{let r=await t.decryptWhisperMessage(s,"binary"),i=await Q(e,r);return Object.assign(e,{plaintext:i})}catch(t){return a.log.error(`${t.name} ${t.message}`),Object.assign(e,Y(t))}}function ee(e){let t=e.querySelector("signedPreKeyPublic"),s=e.querySelector("signedPreKeySignature"),r=v("prekeys > preKeyPublic",e).map(e=>({id:parseInt(e.getAttribute("preKeyId"),10),key:e.textContent}));return{identity_key:e.querySelector("identityKey").textContent.trim(),signed_prekey:{id:parseInt(t.getAttribute("signedPreKeyId"),10),public_key:t.textContent,signature:s.textContent},prekeys:r}}async function et(e){return Promise.all((await er(e)).map(e=>es(e)))}async function es(e){if(e.get("bundle")?.fingerprint)return;let t=await e.getBundle();t.fingerprint=x(A(t.identity_key)),e.save("bundle",t),e.trigger("change:bundle")}async function er(e){await a.api.waitUntil("OMEMOInitialized");let t=await a.api.omemo.devicelists.get(e,!0);return await t.fetchDevices(),t.devices}async function en(e,t){return(await er(e)).get(t)}async function ei(){let{libsignal:e}=window,t=a._converse.session.get("bare_jid"),s=(await a.api.omemo.devicelists.get(t,!0)).devices.pluck("id"),r=e.KeyHelper.generateRegistrationId(),i=0;for(;s.includes(r);)if(r=e.KeyHelper.generateRegistrationId(),10==++i)throw Error("Unable to generate a unique device ID");return r.toString()}async function eo(e){let{libsignal:t}=window,s=new t.SignalProtocolAddress(e.get("jid"),e.get("id")),r=new t.SessionBuilder(a._converse.state.omemo_store,s),i=e.getRandomPreKey(),o=await e.getBundle();return r.processPreKey({registrationId:parseInt(e.get("id"),10),identityKey:A(o.identity_key),signedPreKey:{keyId:o.signed_prekey.id,publicKey:A(o.signed_prekey.public_key),signature:A(o.signed_prekey.signature)},preKey:{keyId:i.id,publicKey:A(i.key)}})}async function ea(e){if(!e.get("bundle"))return a.log.error(`Could not build an OMEMO session for device ${e.get("id")} because we don't have its bundle`),null;let{libsignal:t}=window,s=new t.SignalProtocolAddress(e.get("jid"),e.get("id")),r=await a._converse.state.omemo_store.loadSession(s.toString());if(r)return r;try{return await eo(e)}catch(t){return a.log.error(`Could not build an OMEMO session for device ${e.get("id")}`),a.log.error(t),null}}async function el(e){let t=v("items",e).pop();if(!t||!t.getAttribute("node").startsWith(_.NS.OMEMO_BUNDLES))return;let s=t.getAttribute("node").split(":")[1],r=e.getAttribute("from"),i=v("item > bundle",t).pop(),o=await a.api.omemo.devicelists.get(r,!0);(o.devices.get(s)||o.devices.create({id:s,jid:r})).save({bundle:ee(i)})}async function ed(e){let t=v(`items[node="${_.NS.OMEMO_DEVICELIST}"]`,e).pop();if(!t)return;let s=v(`item list[xmlns="${_.NS.OMEMO}"] device`,t).map(e=>e.getAttribute("id")),r=e.getAttribute("from"),i=await a.api.omemo.devicelists.get(r,!0),o=i.devices,l=o.pluck("id").filter(e=>!s.includes(e)),d=a._converse.session.get("bare_jid");l.forEach(e=>{(r!==d||e!==a._converse.state.omemo_store.get("device_id"))&&o.get(e).save("active",!1)}),s.forEach(e=>{let t=o.get(e);t?t.save("active",!0):o.create({id:e,jid:r})}),a.u.isSameBareJID(d,r)&&i.publishCurrentDevice(s)}async function ec(e){try{v(`event[xmlns="${_.NS.PUBSUB}#event"]`,e).length&&(await a.api.waitUntil("OMEMOInitialized"),await ed(e),await el(e))}catch(e){a.log.error(e)}}function eu(){a.api.connection.get().addHandler(e=>(ec(e),!0),null,"message","headline")}async function eh(){}async function em(){let e=a._converse.session.get("bare_jid");a._converse.state.devicelists=new p.default;let t=`converse.devicelists-${e}`;k(a._converse.state.devicelists,t),await new Promise(e=>{a._converse.state.devicelists.fetch({success:e,error:(t,s)=>{a.log.error(s),e()}})}),await a.api.omemo.devicelists.get(e,!0)}async function ef(e){if(!e){if(!a._converse.state.config.get("trusted")||a.api.settings.get("clear_cache_on_logout"))return void a.log.warn("Not initializing OMEMO, since this browser is not trusted or clear_cache_on_logout is set to true");try{await em(),await a.api.omemo.session.restore(),await a._converse.state.omemo_store.publishBundle()}catch(e){a.log.error("Could not initialize OMEMO support"),a.log.error(e);return}a.api.trigger("OMEMOInitialized")}}async function ep(e,t){!t.isSelf()&&e.features.get("nonanonymous")&&e.features.get("membersonly")&&e.get("omemo_active")&&(await L(t.get("jid"))||(e.createMessage({message:(0,i.__)("%1$s doesn't appear to have a client that supports OMEMO. Encrypted chat will no longer be possible in this grouchat.",t.get("nick")),type:"error"}),e.save({omemo_active:!1,omemo_supported:!1})))}async function eg(e){let t;e.get("type")===b?(await a.api.waitUntil("OMEMOInitialized"),t=e.features.get("nonanonymous")&&e.features.get("membersonly")):e.get("type")===j&&(t=await L(e.get("jid"))),e.set("omemo_supported",!!t),t&&a.api.settings.get("omemo_default")&&e.set("omemo_active",!0)}function e_(e){e.stopPropagation(),e.preventDefault();let t=a.u.ancestor(e.target,"converse-chat-toolbar");if(!t.model.get("omemo_supported")){let e;return e=t.model.get("type")===b?[(0,i.__)("Cannot use end-to-end encryption in this groupchat, either the groupchat has some anonymity or not all participants support OMEMO.")]:[(0,i.__)("Cannot use end-to-end encryption because %1$s uses a client that doesn't support OMEMO.",t.model.contact.getDisplayName())],a.api.alert("error",(0,i.__)("Error"),e)}t.model.save({omemo_active:!t.model.get("omemo_active")})}function ev(e,t){let s,o,l=e.model,d=l.get("type")===b;if(l.get("omemo_supported")){let e=(0,i.__)("Messages are being sent in plaintext"),t=(0,i.__)("Messages are sent encrypted");s=l.get("omemo_active")?t:e}else s=d?(0,i.__)("This groupchat needs to be members-only and non-anonymous in order to support OMEMO encrypted messages"):(0,i.__)("OMEMO encryption is not supported");return o=l.get("omemo_supported")?l.get("omemo_active")?d?"var(--muc-color)":"var(--chat-color)":"var(--error-color)":"var(--disabled-color)",t.push((0,r.html)`<button type="button" class="btn toggle-omemo" title="${s}" data-disabled="${!l.get("omemo_supported")}" @click="${e_}"><converse-icon class="fa ${l.get("omemo_active")?"fa-lock":"fa-unlock"}" path-prefix="${a.api.settings.get("assets_path")}" size="1em" color="${o}"></converse-icon></button>`),t}async function ey(e){let t,s=(0,i.__)("Sorry, no devices found to which we can send an OMEMO encrypted message.");if(e instanceof a.MUC)t=(await Promise.all(e.occupants.map(e=>er(e.get("jid"))))).reduce((e,t)=>e.concat(t.models),[]);else if(e.get("type")===j){let r=await er(e.get("jid"));if(0===r.length)throw new f.UserFacingError(s);let i=a._converse.session.get("bare_jid");t=[...(await a.api.omemo.devicelists.get(i)).devices.models,...r.models]}let r=a._converse.state.omemo_store.get("device_id");t=t.filter(e=>e.get("id")!==r),await Promise.all(t.map(e=>e.getBundle()));let o=t.filter(e=>e).map(e=>ea(e));if(await Promise.all(o),o.includes(null)&&0===(t=t.filter(e=>o[t.indexOf(e)])).length)throw new f.UserFacingError(s);return t}async function eb(e,t){let{stanza:s}=t,{message:r}=t;if(!r.get("is_encrypted"))return t;if(!r.get("body"))throw Error("No message body to encrypt!");let i=await ey(e),{key_and_tag:o,iv:l,payload:d}=await ej.encryptMessage(r.get("plaintext")),c=await Promise.all(i.filter(e=>e.get("trusted")!=h.UNTRUSTED&&e.get("active")).map(e=>K(e.get("jid"),e.get("id")).encrypt(o).then(t=>({payload:t,device:e}))));return s.cnode(y`
            <encrypted xmlns="${_.NS.OMEMO}">
                <header sid="${a._converse.state.omemo_store.get("device_id")}">
                    ${c.map(({payload:e,device:t})=>3==parseInt(e.type,10)?y`<key rid="${t.get("id")}" prekey="true">${btoa(e.body)}</key>`:y`<key rid="${t.get("id")}">${btoa(e.body)}</key>`)}
                    <iv>${l}</iv>
                </header>
                <payload>${d}</payload>
            </encrypted>`).root(),s.cnode(y`<store xmlns="${_.NS.HINTS}"/>`).root(),s.cnode(y`<encryption xmlns="${_.NS.EME}" namespace="${_.NS.OMEMO}"/>`).root(),{message:r,stanza:s}}let ej={decryptMessage:async function e(e){let t=await crypto.subtle.importKey("raw",e.key,h.KEY_ALGO,!0,["encrypt","decrypt"]),s=w(A(e.payload),e.tag),r={name:"AES-GCM",iv:A(e.iv),tagLength:h.TAG_LENGTH};return E(await crypto.subtle.decrypt(r,t,s))},encryptMessage:async function e(e){let t=crypto.getRandomValues(new window.Uint8Array(12)),s=await crypto.subtle.generateKey(h.KEY_ALGO,!0,["encrypt","decrypt"]),r={iv:t,name:"AES-GCM",tagLength:h.TAG_LENGTH},i=await crypto.subtle.encrypt(r,s,I(e)),o=i.byteLength-16,a=i.slice(0,o),l=i.slice(o),d=await crypto.subtle.exportKey("raw",s);return{tag:l,key:d,key_and_tag:w(d,l),payload:S(a),iv:S(t)}},formatFingerprint:N}},"./src/plugins/profile/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js");s("./src/plugins/modal/index.js"),s("./src/plugins/profile/modals/profile.js"),s("./src/plugins/profile/modals/user-settings.js"),s("./src/plugins/profile/statusview.js"),r.converse.plugins.add("converse-profile",{dependencies:["converse-status","converse-modal","converse-vcard","converse-chatboxviews","converse-adhoc-views"],initialize(){r.api.settings.extend({show_client_info:!0})}})},"./src/plugins/profile/modals/profile.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/@converse/skeletor/dist/skeletor.js"),o=s("./src/headless/index.js"),a=s("./src/i18n/index.js"),l=s("./src/plugins/modal/modal.js"),d=s("./src/utils/file.js");s("./src/plugins/profile/password-reset.js");var c=s("./src/plugins/modal/templates/buttons.js"),u=s("./src/plugins/profile/templates/logout_button.js"),h=s("./src/plugins/profile/templates/profile_modal.js");s("./src/plugins/profile/modals/styles/profile.scss");class m extends l.default{static properties={_submitting:{state:!0},_show_clear_button:{type:Boolean,state:!0},model:{type:i.Model},tab:{type:String}};constructor(e){super(e),this.tab="status",this._show_clear_button=!1}initialize(){super.initialize(),this.listenTo(this.model,"change",this.render),this.addEventListener("shown.bs.modal",()=>{this.querySelector('input[name="status_message"]')?.focus()},!1),o.api.trigger("profileModalInitialized",this.model)}willUpdate(e){e.has("model")&&(this._show_clear_button=!!this.model.get("status_message"))}getModalTitle(){return(0,a.__)("Your Profile")}renderModal(){return(0,h.default)(this)}renderModalFooter(){return o.api.settings.get("allow_logout")?(0,r.html)`<div class="modal-footer d-flex justify-content-between">${c.modal_close_button} ${(0,u.default)(this)}</div>`:""}async setVCard(e){let t=o._converse.session.get("bare_jid");try{await o.api.vcard.set(t,e)}catch(e){return o.log.fatal(e),this.alert([(0,a.__)("Sorry, an error happened while trying to save your profile data."),(0,a.__)("You can check your browser's developer console for any error output.")].join(" ")),!1}return!0}async onProfileFormSubmitted(e){e.preventDefault(),this._submitting=!0;let t=new FormData(e.target),s=t.get("avatar_image"),r={fn:t.get("fn"),nickname:t.get("nickname"),role:t.get("role"),email:t.get("email"),url:t.get("url")};if(s?.size){let e=await (0,d.compressImage)(s),t=new FileReader;t.onloadend=async()=>{Object.assign(r,{image:btoa(t.result),image_type:s.type}),await this.setVCard(r)&&(this._submitting=!1,this.modal.hide())},t.readAsBinaryString(e)}else Object.assign(r,{image:this.model.vcard.get("image"),image_type:this.model.vcard.get("image_type")}),await this.setVCard(r)&&(this.modal.hide(),o.api.toast.show("vcard-updated",{type:"success",body:(0,a.__)("Profile updated successfully")})),this._submitting=!1}onStatusFormSubmitted(e){let t,s;e.preventDefault();let r=new FormData(e.target),i=r.get("chat_status");"online"===i?s="online":t=i,this.model.save({status_message:r.get("status_message"),presence:s,show:t}),this.alert((0,a.__)("Status updated"),"info")}clearStatusMessage(e){e&&e.preventDefault&&e.preventDefault(),this._show_clear_button=!1,this.querySelector('input[name="status_message"]').value=""}async logOut(e){e?.preventDefault(),this.close(),await o.api.confirm((0,a.__)("Confirm"),(0,a.__)("Are you sure you want to log out?"))&&o.api.user.logout()}}o.api.elements.define("converse-profile-modal",m)},"./src/plugins/profile/modals/templates/user-settings.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/dompurify/dist/purify.es.mjs"),i=s("./node_modules/lit/index.js"),o=s("./src/headless/index.js"),a=s("./src/i18n/index.js"),l=s("./node_modules/lit/directives/unsafe-html.js");let d=e=>{let t=(0,a.__)("About"),s=(0,a.__)("Commands"),r=(0,a.__)("Services"),l=o.api.settings.get("show_client_info"),d=o.api.settings.get("allow_adhoc_commands"),c=o._converse.pluggable.plugins["converse-disco-views"]?.enabled(o._converse),u=+!!l+ +!!d+ +!!c>=2;return(0,i.html)`${u?(0,i.html)`<ul class="nav nav-pills justify-content-center">${l?(0,i.html)`<li role="presentation" class="nav-item"><a class="nav-link ${"about"===e.tab?"active":""}" id="about-tab" href="#about-tabpanel" aria-controls="about-tabpanel" role="tab" data-toggle="tab" data-name="about" @click="${t=>e.switchTab(t)}">${t}</a></li>`:""} ${d?(0,i.html)`<li role="presentation" class="nav-item"><a class="nav-link ${"commands"===e.tab?"active":""}" id="commands-tab" href="#commands-tabpanel" aria-controls="commands-tabpanel" role="tab" data-toggle="tab" data-name="commands" @click="${t=>e.switchTab(t)}">${s}</a></li>`:""} ${c?(0,i.html)`<li role="presentation" class="nav-item"><a class="nav-link ${"disco"===e.tab?"active":""}" id="server-tab" href="#server-tabpanel" aria-controls="server-tabpanel" role="tab" data-toggle="tab" data-name="disco" @click="${t=>e.switchTab(t)}">${r}</a></li>`:""}</ul>`:""}`},c=e=>{let t=(0,a.__)("%1$s Open Source %2$s XMPP chat client brought to you by %3$s Opkode %2$s",'<a target="_blank" rel="nofollow" href="https://conversejs.org">',"</a>",'<a target="_blank" rel="nofollow" href="https://opkode.com">'),s=(0,a.__)("%1$s Translate %2$s it into your own language",'<a target="_blank" rel="nofollow" href="https://hosted.weblate.org/projects/conversejs/#languages">',"</a>"),c=o.api.settings.get("show_client_info"),u=o.api.settings.get("allow_adhoc_commands");return(0,i.html)`${c&&u?d(e):""}<div class="tab-content">${c?(0,i.html)`<div class="tab-pane tab-pane--columns ${"about"===e.tab?"active":""}" id="about-tabpanel" role="tabpanel" aria-labelledby="about-tab"><div class="container"><converse-brand-logo class="d-flex justify-content-center mt-3" hide_byline></converse-brand-logo><p class="text-center brand-subtitle">${o._converse.VERSION_NAME}</p><p class="text-center brand-subtitle">${(0,l.unsafeHTML)(r.default.sanitize(t))}</p><p class="text-center brand-subtitle">${(0,l.unsafeHTML)(r.default.sanitize(s))}</p></div></div>`:""} ${u?(0,i.html)`<div class="tab-pane tab-pane--columns ${"commands"===e.tab?"active":""}" id="commands-tabpanel" role="tabpanel" aria-labelledby="commands-tab"><converse-adhoc-commands></div>`:""} ${o._converse.pluggable.plugins["converse-disco-views"]?.enabled(o._converse)?(0,i.html)`<div class="tab-pane tab-pane--columns ${"disco"===e.tab?"active":""}" id="server-tabpanel" role="tabpanel" aria-labelledby="server-tab">${"disco"===e.tab?(0,i.html)`<converse-disco-browser></converse-disco-browser>`:""}</div>`:""}</div>`}},"./src/plugins/profile/modals/user-settings.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/i18n/index.js"),o=s("./src/plugins/modal/modal.js"),a=s("./src/plugins/profile/modals/templates/user-settings.js");s("./src/plugins/profile/modals/styles/user-settings.scss");class l extends o.default{constructor(e){super(e);let t=r.api.settings.get("show_client_info"),s=r.api.settings.get("allow_adhoc_commands");t&&s||t?this.tab="about":s&&(this.tab="commands")}renderModal(){return(0,a.default)(this)}getModalTitle(){return(0,i.__)("Settings")}}r.api.elements.define("converse-user-settings-modal",l)},"./src/plugins/profile/password-reset.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/plugins/profile/templates/password-reset.js"),i=s("./src/shared/components/element.js"),o=s("./src/i18n/index.js"),a=s("./src/headless/index.js");let{Strophe:l,$iq:d,sizzle:c,u}=a.converse.env;class h extends i.CustomElement{static get properties(){return{passwords_mismatched:{type:Boolean},alert_message:{type:String}}}initialize(){this.passwords_mismatched=!1,this.alert_message=""}render(){return(0,r.default)(this)}checkPasswordsMatch(e){let t=new FormData(e.target.form??e.target),s=t.get("password"),r=t.get("password_check");return this.passwords_mismatched=s&&s!==r,this.passwords_mismatched}async onSubmit(e){if(e.preventDefault(),this.checkPasswordsMatch(e))return;let t=a._converse.session.get("domain"),s=d({type:"get",to:t}).c("query",{xmlns:l.NS.REGISTER}),r=await a.api.sendIQ(s);if(null===r){this.alert_message=(0,o.__)("Timeout error");return}if(c(`error service-unavailable[xmlns="${l.NS.STANZAS}"]`,r).length){this.alert_message=(0,o.__)("Your server does not support password reset");return}if(u.isErrorStanza(r)){this.alert_message=(0,o.__)("Your server responded with an unknown error, check the console for details"),a.log.error("Could not set password"),a.log.error(r);return}let i=r.querySelector("username").textContent,h=new FormData(e.target).get("password"),m=d({type:"set",to:t}).c("query",{xmlns:l.NS.REGISTER}).c("username",{},i).c("password",{},h),f=await a.api.sendIQ(m);null===f?this.alert_message=(0,o.__)("Timeout error while trying to set your password"):c(`error not-allowed[xmlns="${l.NS.STANZAS}"]`,f).length?this.alert_message=(0,o.__)("Your server does not allow password reset"):c(`error forbidden[xmlns="${l.NS.STANZAS}"]`,f).length||u.isErrorStanza(f)?this.alert_message=(0,o.__)("You are not allowed to change your password"):a.api.alert("info",(0,o.__)("Success"),[(0,o.__)("Your new password has been set")])}}a.api.elements.define("converse-change-password-form",h)},"./src/plugins/profile/statusview.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/plugins/profile/templates/profile.js");s("./src/plugins/profile/styles/profile.scss");class a extends i.CustomElement{initialize(){this.model=r._converse.state.profile,this.listenTo(this.model,"change",()=>this.requestUpdate()),this.listenTo(this.model,"vcard:add",()=>this.requestUpdate()),this.listenTo(this.model,"vcard:change",()=>this.requestUpdate())}render(){return(0,o.default)(this)}showProfileModal(e,t="status"){e?.preventDefault(),r.api.modal.show("converse-profile-modal",{model:this.model,tab:t},e)}}r.api.elements.define("converse-user-profile",a);let l=a},"./src/plugins/profile/templates/chat-status-form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");let o=e=>{let t=(0,i.__)("Away"),s=(0,i.__)("Busy"),o=(0,i.__)("Online"),a=(0,i.__)("Set status"),l=(0,i.__)("Away for long"),d=(0,i.__)("Personal status message"),c=e.model.get("show")||e.model.get("presence"),u=e.model.get("status_message");return(0,r.html)`<form class="converse-form set-xmpp-status" id="set-xmpp-status" @submit="${t=>e.onStatusFormSubmitted(t)}"><div class="mb-3"><div class="form-check"><input ?checked="${"online"===c}" type="radio" id="radio-online" value="online" name="chat_status" class="form-check-input"> <label class="form-check-label" for="radio-online"><converse-icon size="1em" class="fa fa-circle chat-status chat-status--online"></converse-icon>${o}</label></div><div class="form-check"><input ?checked="${"busy"===c}" type="radio" id="radio-busy" value="dnd" name="chat_status" class="form-check-input"> <label class="form-check-label" for="radio-busy"><converse-icon size="1em" class="fa fa-minus-circle chat-status chat-status--busy"></converse-icon>${s}</label></div><div class="form-check"><input ?checked="${"away"===c}" type="radio" id="radio-away" value="away" name="chat_status" class="form-check-input"> <label class="form-check-label" for="radio-away"><converse-icon size="1em" class="fa fa-circle chat-status chat-status--away"></converse-icon>${t}</label></div><div class="form-check"><input ?checked="${"xa"===c}" type="radio" id="radio-xa" value="xa" name="chat_status" class="form-check-input"> <label class="form-check-label" for="radio-xa"><converse-icon size="1em" class="far fa-circle chat-status chat-status--xa"></converse-icon>${l}</label></div></div><div class="mb-3"><div class="${e._show_clear_button?"input-group":""}"><input name="status_message" type="text" class="form-control" autofocus value="${u||""}" placeholder="${d}" @input="${t=>e._show_clear_button=!!t.target.value}"> <button type="button" class="btn btn-outline-secondary" @click="${t=>e.clearStatusMessage(t)}" title="${(0,i.__)("Clear status message")}" ?hidden="${!e._show_clear_button}"><converse-icon size="1em" class="fa fa-times"></converse-icon></button></div></div><button type="submit" class="btn btn-primary">${a}</button></form>`}},"./src/plugins/profile/templates/logout_button.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/i18n/index.js");let a=e=>{let t=(0,o.__)("Log out");return(0,r.html)`<button type="button" @click="${t=>e.logOut(t)}" class="btn btn-danger">${i.api.settings.get("allow_logout")?(0,r.html)`<converse-icon class="fas fa-sign-out-alt" color="var(--background-color)" size="1em"></converse-icon>${t}`:""}</button>`}},"./src/plugins/profile/templates/password-reset.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/i18n/index.js"),i=s("./node_modules/lit/index.js");let o=e=>{let t=(0,r.__)("Submit"),s=(0,r.__)("The new passwords must match"),o=(0,r.__)("New password"),a=(0,r.__)("Confirm new password");return(0,i.html)`<form class="converse-form passwordreset-form" method="POST" @submit="${t=>e.onSubmit(t)}">${e.alert_message?(0,i.html)`<div class="alert alert-danger" role="alert">${e.alert_message}</div>`:""}<div class="py-2"><label for="converse_password_reset_new" class="form-label">${o}</label> <input class="form-control ${e.passwords_mismatched?"error":""}" type="password" name="password" required="required" id="converse_password_reset_new" autocomplete="new-password" minlength="8" ?disabled="${e.alert_message}"></div><div class="py-2"><label for="converse_password_reset_check" class="form-label">${a}</label> <input class="form-control ${e.passwords_mismatched?"error":""}" type="password" name="password_check" required="required" id="converse_password_reset_check" autocomplete="new-password" minlength="8" ?disabled="${e.alert_message}" @input="${t=>e.checkPasswordsMatch(t)}"> ${e.passwords_mismatched?(0,i.html)`<span class="error">${s}</span>`:""}</div><input class="save-form btn btn-primary" type="submit" value="${t}" ?disabled="${e.alert_message}"></form>`}},"./src/plugins/profile/templates/profile.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js");s("./src/shared/avatar/avatar.js");var i=s("./src/i18n/index.js"),o=s("./src/plugins/profile/utils.js");let a=e=>{let t,s,a=e.model.get("show"),l=e.model.get("presence")||"online",d=a||l,c=e.model.get("status_message")||(0,i.__)("I am %1$s",(0,o.getPrettyStatus)(d)),u=(0,i.__)("Update your profile"),h=(0,i.__)("Click to change your chat status");return"chat"!==a&&(a||"online"!==l)?"dnd"===a?[t,s]=["fa fa-minus-circle chat-status","chat-status-busy"]:"away"===a||"xa"===a?[t,s]=["fa fa-circle chat-status","chat-status-away"]:[t,s]=["fa fa-circle chat-status","comment"]:[t,s]=["fa fa-circle chat-status","chat-status-online"],(0,r.html)`<div class="userinfo"><div class="controlbox-section profile d-flex justify-content-between"><a class="show-profile" href="#" @click="${t=>e.showProfileModal(t,"profile")}" title="${u}"><converse-avatar class="avatar align-self-center" .model="${e.model}" name="${e.model.getDisplayName()}" nonce="${e.model.vcard?.get("vcard_updated")}" height="40" width="40"></converse-avatar><span class="username align-self-center w-100" role="heading" aria-level="2">${e.model.getDisplayName()}</span></a><converse-controlbox-buttons></converse-controlbox-buttons></div><div class="d-flex xmpp-status"><a class="change-status" title="${h}" data-toggle="modal" data-target="#changeStatusModal" @click="${t=>e.showProfileModal(t)}"><span class="${d} w-100" data-value="${d}"><converse-icon color="var(--${s})" css="margin-top: -0.1em" size="0.82em" class="${t}"></converse-icon><span class="xmpp-status__msg">${c}</span></span></a></div></div>`}},"./src/plugins/profile/templates/profile_modal.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/i18n/index.js");s("./src/shared/components/image-picker.js");var a=s("./src/plugins/profile/utils.js"),l=s("./src/plugins/profile/templates/chat-status-form.js");let d=e=>{let t={...e.model.toJSON(),...e.model.vcard?.toJSON()},s=(0,o.__)("Email"),d=(0,o.__)("Full Name"),c=(0,o.__)("XMPP Address"),u=(0,o.__)("Nickname"),h=(0,o.__)("Role"),m=(0,o.__)("Save and close"),f=(0,o.__)("Use commas to separate multiple roles. Your roles are shown next to your name on your chat messages."),p=(0,o.__)("URL"),g=(0,o.__)("Status"),_=(0,o.__)("OMEMO"),v=(0,o.__)("Profile"),y=(0,o.__)("Reset Password"),b=new Map;return b.set("status",(0,r.html)`<li role="presentation" class="nav-item"><a class="nav-link ${"status"===e.tab?"active":""}" id="status-tab" href="#status-tabpanel" aria-controls="status-tabpanel" role="tab" @click="${t=>e.switchTab(t)}" data-name="status" data-toggle="tab">${g}</a></li>`),b.set("profile",(0,r.html)`<li role="presentation" class="nav-item"><a class="nav-link ${"profile"===e.tab?"active":""}" id="profile-tab" href="#profile-tabpanel" aria-controls="profile-tabpanel" role="tab" @click="${t=>e.switchTab(t)}" data-name="profile" data-toggle="tab">${v}</a></li>`),(0,a.shouldShowPasswordResetForm)()&&b.set("passwordreset",(0,r.html)`<li role="presentation" class="nav-item"><a class="nav-link ${"passwordreset"===e.tab?"active":""}" id="passwordreset-tab" href="#passwordreset-tabpanel" aria-controls="passwordreset-tabpanel" role="tab" @click="${t=>e.switchTab(t)}" data-name="passwordreset" data-toggle="tab">${y}</a></li>`),i._converse.pluggable.plugins["converse-omemo"]?.enabled(i._converse)&&b.set("omemo",(0,r.html)`<li role="presentation" class="nav-item"><a class="nav-link ${"omemo"===e.tab?"active":""}" id="omemo-tab" href="#omemo-tabpanel" aria-controls="omemo-tabpanel" role="tab" @click="${t=>e.switchTab(t)}" data-name="omemo" data-toggle="tab">${_}</a></li>`),(0,r.html)`${b.size?(0,r.html)`<ul class="nav nav-pills justify-content-center">${Array.from(b.values())}</ul>`:""}<div class="tab-content">${b.get("passwordreset")?(0,r.html)`<div class="tab-pane ${"status"===e.tab?"active":""}" id="status-tabpanel" role="tabpanel" aria-labelledby="status-tab">${"status"===e.tab?(0,l.default)(e):""}</div>`:""}<div class="tab-pane ${"profile"===e.tab?"active":""}" id="profile-tabpanel" role="tabpanel" aria-labelledby="profile-tab"><form class="converse-form converse-form--modal" action="#" @submit="${t=>e.onProfileFormSubmitted(t)}"><div class="row py-2"><div class="col-auto"><converse-image-picker .model="${e.model}" width="128" height="128"></converse-image-picker></div><div class="col"><div class="px-3"><label class="col-form-label">${c}:</label><div>${t.jid}</div></div></div></div><div><label for="vcard-fullname" class="col-form-label">${d}:</label> <input id="vcard-fullname" type="text" class="form-control" name="fn" value="${t.fullname||""}"></div><div><label for="vcard-nickname" class="col-form-label">${u}:</label> <input id="vcard-nickname" type="text" class="form-control" name="nickname" value="${t.nickname||""}"></div><div><label for="vcard-url" class="col-form-label">${p}:</label> <input id="vcard-url" type="url" class="form-control" name="url" value="${t.url||""}"></div><div><label for="vcard-email" class="col-form-label">${s}:</label> <input id="vcard-email" type="email" class="form-control" name="email" value="${t.email||""}"></div><div><label for="vcard-role" class="col-form-label pb-0">${h}:</label> <small id="vcard-role-help" class="d-block pb-1 form-text text-muted">${f}</small> <input id="vcard-role" type="text" class="form-control" name="role" value="${t.role||""}" aria-describedby="vcard-role-help"></div><div class="mt-3">${e._submitting?(0,r.html)`<converse-spinner></converse-spinner>`:(0,r.html)`<button type="submit" class="save-form btn btn-primary">${m}</button>`}</div></form></div>${b.get("passwordreset")?(0,r.html)`<div class="tab-pane ${"passwordreset"===e.tab?"active":""}" id="passwordreset-tabpanel" role="tabpanel" aria-labelledby="passwordreset-tab">${"passwordreset"===e.tab?(0,r.html)`<converse-change-password-form></converse-change-password-form>`:""}</div>`:""} ${b.get("omemo")?(0,r.html)`<div class="tab-pane ${"omemo"===e.tab?"active":""}" id="omemo-tabpanel" role="tabpanel" aria-labelledby="omemo-tab">${"omemo"===e.tab?(0,r.html)`<converse-omemo-profile></converse-omemo-profile>`:""}</div>`:""}</div>`}},"./src/plugins/profile/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{getPrettyStatus:()=>o,shouldShowPasswordResetForm:()=>a});var r=s("./src/i18n/index.js"),i=s("./src/headless/index.js");function o(e){if("chat"===e)return(0,r.__)("online");if("dnd"===e)return(0,r.__)("busy");if("xa"===e)return(0,r.__)("away for long");if("away"===e)return(0,r.__)("away");if("offline"===e)return(0,r.__)("offline");else return(0,r.__)(e)||(0,r.__)("online")}function a(){let e=i._converse.api.connection.get()._sasl_mechanism;return"EXTERNAL"!==e.mechname&&"ANONYMOUS"!==e.mechname&&"X-OAUTH2"!==e.mechname&&"OAUTHBEARER"!==e.mechname}},"./src/plugins/push/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js"),i=s("./src/plugins/push/utils.js");let{Strophe:o}=r.converse.env;o.addNamespace("PUSH","urn:xmpp:push:0"),r.converse.plugins.add("converse-push",{initialize(){r.api.settings.extend({push_app_servers:[],enable_muc_push:!1}),r.api.listen.on("statusInitialized",()=>(0,i.enablePush)()),r.api.settings.get("enable_muc_push")&&r.api.listen.on("chatBoxesInitialized",()=>r._converse.state.chatboxes.on("add",i.onChatBoxAdded))}})},"./src/plugins/push/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{enablePush:()=>c,onChatBoxAdded:()=>u});var r=s("./src/headless/index.js");let{Strophe:i,$iq:o}=r.converse.env,{CHATROOMS_TYPE:a}=r.constants;async function l(e,t){if(!t.jid)return;let s=r._converse.session.get("bare_jid");if(!await r.api.disco.supports(i.NS.PUSH,e||s))return void r.log.warn(`Not disabling push app server "${t.jid}", no disco support from your server.`);let a=o({type:"set"});e!==s&&a.attrs({to:e}),a.c("disable",{xmlns:i.NS.PUSH,jid:t.jid}),t.node&&a.attrs({node:t.node}),r.api.sendIQ(a).catch(e=>{r.log.error(`Could not disable push app server for ${t.jid}`),r.log.error(e)})}async function d(e,t){if(!t.jid||!t.node)return;if(!await r.api.disco.getIdentity("pubsub","push",t.jid))return r.log.warn(`Not enabling push the service "${t.jid}", it doesn't have the right disco identtiy.`);let s=await Promise.all([r.api.disco.supports(i.NS.PUSH,t.jid),r.api.disco.supports(i.NS.PUSH,e)]);if(!s[0]&&!s[1])return void r.log.warn(`Not enabling push app server "${t.jid}", no disco support from your server.`);let a=o({type:"set"});return e!==r._converse.session.get("bare_jid")&&a.attrs({to:e}),a.c("enable",{xmlns:i.NS.PUSH,jid:t.jid,node:t.node}),t.secret&&a.c("x",{xmlns:i.NS.XFORM,type:"submit"}).c("field",{var:"FORM_TYPE"}).c("value").t(`${i.NS.PUBSUB}#publish-options`).up().up().c("field",{var:"secret"}).c("value").t(t.secret),r.api.sendIQ(a)}async function c(e){e||(e=r._converse.session.get("bare_jid"));let t=r._converse.session.get("push_enabled")||[];if(t.includes(e))return;let s=r.api.settings.get("push_app_servers").filter(e=>!e.disable),i=r.api.settings.get("push_app_servers").filter(e=>e.disable),o=s.map(t=>d(e,t)),a=i.map(t=>l(e,t));try{await Promise.all(o.concat(a))}catch(e){r.log.error("Could not enable or disable push App Server"),e&&r.log.error(e)}finally{t.push(e)}r._converse.session.save("push_enabled",t)}function u(e){e.get("type")==a&&c(i.getDomainFromJid(e.get("jid")))}},"./src/plugins/register/form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>_});var r=s("./src/headless/index.js"),i=s("./src/templates/form_input.js"),o=s("./src/templates/form_url.js"),a=s("./src/templates/form_username.js"),l=s("./src/plugins/register/templates/choose_provider.js"),d=s("./src/shared/components/element.js"),c=s("./src/i18n/index.js"),u=s("./src/plugins/register/utils.js");s("./src/plugins/register/styles/register.scss");let{Strophe:h,sizzle:m,$iq:f}=r.converse.env,{CONNECTION_STATUS:p}=r.constants;class g extends d.CustomElement{static get properties(){return{status:{type:String},domain:{type:String},service_url:{type:String},alert_message:{type:String},alert_type:{type:String}}}constructor(){super(),this.urls=[],this.fields={},this.domain=null,this.alert_type="info",this.setErrorMessage=e=>this.setMessage(e,"danger"),this.setFeedbackMessage=e=>this.setMessage(e,"info")}initialize(){this.reset(),this.listenTo(r._converse,"connectionInitialized",()=>this.registerHooks());let e=r.api.settings.get();this.listenTo(e,"change:show_connection_url_input",()=>this.requestUpdate());let t=r.api.settings.get("registration_domain");t?this.fetchRegistrationForm(t):this.status=0}render(){return(0,l.default)(this)}setMessage(e,t){this.alert_type=t,this.alert_message=e}registerHooks(){let e=r.api.connection.get(),t=e._connect_cb.bind(e);e._connect_cb=(e,s,r)=>{this._registering?this.getRegistrationFields(e,s)&&(this._registering=!1):t(e,s,r)}}getRegistrationFields(e,t){let s=r.api.connection.get();s.connected=!0;let i="_reqToData"in s._proto?s._proto._reqToData(e):e;if(!i)return;if(s._proto._connect_cb(i)===h.Status.CONNFAIL)return this.status=0,this.setErrorMessage((0,c.__)("Sorry, we're unable to connect to your chosen provider.")),!1;let o=i.getElementsByTagName("register"),a=i.getElementsByTagName("mechanism");if(0===o.length&&0===a.length)return s._proto._no_auth_received(t),!1;if(0===o.length)return s._changeConnectStatus(h.Status.REGIFAIL),this.alert_type="danger",this.setErrorMessage((0,c.__)("Sorry, the given provider does not support in band account registration. Please try with a different provider.")),!0;s._addSysHandler(e=>this.onRegistrationFields(e),null,"iq",null,null);let l=f({type:"get"}).c("query",{xmlns:h.NS.REGISTER}).tree();return l.setAttribute("id",s.getUniqueId("sendIQ")),s.send(l),s.connected=!1,!0}onRegistrationFields(e){return"error"===e.getAttribute("type")?(this.reportErrors(e),r.api.settings.get("registration_domain")?this.status=3:this.status=0):(this.setFields(e),1===this.status&&this.renderRegistrationForm(e)),!1}reset(e){Object.assign(this,{fields:{},urls:[],title:"",instructions:"",registered:!1,_registering:!1,domain:null,form_type:null}),e&&Object.assign(this,e)}onFormSubmission(e){e?.preventDefault?.();let t=e.target;null===t.querySelector("input[name=domain]")?this.submitRegistrationForm(t):this.onProviderChosen(t)}onProviderChosen(e){let t=e.querySelector("input[name=domain]")?.value;if(t){let s=new FormData(e),i=null;if(r.api.settings.get("show_connection_url_input"))if((i=s.get("connection-url")).startsWith("wss:"))r.api.settings.set("websocket_url",i);else if(i.startsWith("https:"))r.api.settings.set("bosh_service_url",i);else{this.alert_message=(0,c.__)("Invalid connection URL, only HTTPS and WSS accepted"),this.alert_type="danger",this.status=0,this.requestUpdate();return}this.fetchRegistrationForm(t.trim(),i?.trim())}else this.status=0}fetchRegistrationForm(e,t){return this.status=1,this.reset({_registering:!0,domain:h.getDomainFromJid(e),service_url:t}),r.api.connection.init(),r.api.connection.get()?.connect(this.domain,"",(e,t)=>this.onConnectStatusChanged(e,t)),!1}onConnectStatusChanged(e,t){if(r.log.debug("converse-register: onConnectStatusChanged"),[h.Status.DISCONNECTED,h.Status.CONNFAIL,h.Status.REGIFAIL,h.Status.NOTACCEPTABLE,h.Status.CONFLICT].includes(e))r.log.warn(`Problem during registration: Strophe.Status is ${p[e]}`),this.abortRegistration(t);else if(e===h.Status.REGISTERED){if(r.log.debug("Registered successfully."),r.api.connection.get().reset(),["converse/login","converse/register"].includes(window.location.hash)&&history.pushState(null,"",window.location.pathname),(0,u.setActiveForm)("login"),this.fields.password&&this.fields.username){let e=r.api.connection.get();e.connect(this.fields.username.toLowerCase()+"@"+this.domain.toLowerCase(),this.fields.password,e.onConnectStatusChanged),this.setFeedbackMessage((0,c.__)("Now logging you in"))}else this.setFeedbackMessage((0,c.__)("Registered successfully"));this.reset()}}getLegacyFormFields(){return[...Object.keys(this.fields).map(e=>"username"===e?(0,a.default)({domain:` @${this.domain}`,name:e,type:"text",label:e,value:"",required:!0}):(0,i.default)({label:e,name:e,placeholder:e,required:!0,type:"password"===e||"email"===e?e:"text",value:""})),...this.urls.map(e=>(0,o.default)({label:"",value:e}))]}getFormFields(e){if("xform"!==this.form_type)return this.getLegacyFormFields();{let{fields:t}=r.parsers.parseXForm(e);return t?.map(e=>r.u.xFormField2TemplateResult(e,{domain:this.domain}))??[]}}renderRegistrationForm(e){this.form_fields=this.getFormFields(e),this.status=2}async reportErrors(e){if(await r.parsers.parseErrorStanza(e) instanceof r.errors.ConflictError)return void this.setErrorMessage(`${(0,c.__)("Registration failed.")} ${(0,c.__)("Please try a different username.")}`);let t=Array.from(e.querySelectorAll("error"));t.length?this.setErrorMessage(`${(0,c.__)("Registration failed.")}${t.reduce((e,t)=>`${e}
${t.textContent}`,"")}`):this.setErrorMessage((0,c.__)("The provider rejected your registration attempt. Please check the values you entered for correctness."))}renderProviderChoiceForm(e){e?.preventDefault?.();let t=r.api.connection.get();t._proto._abortAllRequests(),t.reset(),this.status=0}abortRegistration(e){let t=r.api.connection.get();if(t._proto._abortAllRequests(),t.reset(),[1,2].includes(this.status)&&r.api.settings.get("registration_domain"))return void this.fetchRegistrationForm(r.api.settings.get("registration_domain"));this.alert_message=e,this.alert_type="danger",this.status=0,this.requestUpdate()}submitRegistrationForm(e){let t=m(":input:not([type=button]):not([type=submit])",e),s=f({type:"set",id:r.u.getUniqueId()}).c("query",{xmlns:h.NS.REGISTER});"xform"===this.form_type?(s.c("x",{xmlns:h.NS.XFORM,type:"submit"}),t.map(e=>r.u.webForm2xForm(e)).filter(e=>e).forEach(e=>s.cnode(e).up())):t.forEach(e=>s.c(e.getAttribute("name"),{},e.value));let i=r.api.connection.get();i._addSysHandler(e=>this.#d(e),null,"iq",null,null),i.send(s),this.setFields(s.tree())}setFields(e){let t=e.querySelector("query"),s=m(`x[xmlns="${h.NS.XFORM}"]`,t);s.length>0?this.setFieldsFromXForm(s.pop()):this.setFieldsFromLegacy(t)}setFieldsFromLegacy(e){[].forEach.call(e.children,e=>{if("instructions"===e.tagName.toLowerCase()){this.instructions=h.getText(e);return}if("x"===e.tagName.toLowerCase()){"jabber:x:oob"===e.getAttribute("xmlns")&&this.urls.concat(m("url",e).map(e=>e.textContent));return}this.fields[e.tagName.toLowerCase()]=h.getText(e)}),this.form_type="legacy"}setFieldsFromXForm(e){this.title=e.querySelector("title")?.textContent??"",this.instructions=e.querySelector("instructions")?.textContent??"",e.querySelectorAll("field").forEach(e=>{let t=e.getAttribute("var");t?this.fields[t.toLowerCase()]=e.querySelector("value")?.textContent??"":r.log.warn("Found field we couldn't parse")}),this.form_type="xform"}#d(e){let t=r.api.connection.get();if("error"===e.getAttribute("type")){r.log.info("Registration failed."),this.reportErrors(e);let s=e.getElementsByTagName("error");if(1!==s.length)return t._changeConnectStatus(h.Status.REGIFAIL,"unknown"),!1;let i=s[0].firstElementChild.tagName.toLowerCase();"conflict"===i?t._changeConnectStatus(h.Status.CONFLICT,i):"not-acceptable"===i?t._changeConnectStatus(h.Status.NOTACCEPTABLE,i):t._changeConnectStatus(h.Status.REGIFAIL,i)}else t._changeConnectStatus(h.Status.REGISTERED,null);return!1}}r.api.elements.define("converse-registration-form",g);let _=g},"./src/plugins/register/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js"),i=s("./src/i18n/index.js"),o=s("./src/plugins/register/utils.js"),a=s("./src/plugins/register/form.js"),l=s("./src/plugins/register/register_link.js");let{Strophe:d}=r.converse.env,{CONNECTION_STATUS:c}=r.constants;d.addNamespace("REGISTER","jabber:iq:register");let u=Object.keys(d.Status).reduce((e,t)=>Math.max(e,d.Status[t]),0);d.Status.REGIFAIL=u+1,d.Status.REGISTERED=u+2,d.Status.CONFLICT=u+3,d.Status.NOTACCEPTABLE=u+5,r.converse.plugins.add("converse-register",{dependencies:["converse-controlbox"],enabled:()=>!0,initialize(){c[d.Status.REGIFAIL]="REGIFAIL",c[d.Status.REGISTERED]="REGISTERED",c[d.Status.CONFLICT]="CONFLICT",c[d.Status.NOTACCEPTABLE]="NOTACCEPTABLE",r.api.settings.extend({allow_registration:!0,domain_placeholder:(0,i.__)(" e.g. conversejs.org"),providers_link:"https://compliance.conversations.im/",registration_domain:""});let e={RegisterLink:l.default,RegistrationForm:a.default};Object.assign(r._converse.exports,e),(0,o.routeToForm)(),addEventListener("hashchange",o.routeToForm)}})},"./src/plugins/register/register_link.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js"),o=s("./src/headless/index.js"),a=s("./src/shared/components/element.js");class l extends a.CustomElement{render(){let e=(0,i.__)("Create an account"),t=(0,i.__)("Don't have a chat account?");return this.shouldShow()?(0,r.html)`<div class="mt-3 text-center switch-form"><p class="mb-1">${t}</p><a class="register-account toggle-register-login" href="#converse/register">${e}</a></div>`:""}shouldShow(){return o.api.settings.get("allow_registration")&&!o.api.settings.get("auto_login")&&o._converse.pluggable.plugins["converse-register"].enabled(o._converse)}}o.api.elements.define("converse-register-link",l);let d=l},"./src/plugins/register/templates/choose_provider.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/templates/spinner.js"),a=s("./src/i18n/index.js"),l=s("./src/plugins/controlbox/templates/loginform.js"),d=s("./src/plugins/register/templates/switch_form.js"),c=s("./src/plugins/register/templates/registration_form.js");let u=e=>(0,r.html)`${e.alert_message?(0,r.html)`<div class="alert alert-${e.alert_type}" role="alert">${e.alert_message}</div>`:""} ${0===e.status?function(e){let t=i.api.settings.get("registration_domain"),s=(0,a.__)("Create your account"),o=(0,a.__)("Please enter the XMPP provider to register with:"),d=!t&&0===e.status;return(0,r.html)`<form id="converse-register" class="converse-form" @submit="${t=>e.onFormSubmission(t)}"><legend class="col-form-label">${s}</legend><div class="pt-3"><label class="form-label">${o}</label> ${t||function(e){let t=i.api.settings.get("domain_placeholder"),s=(0,a.__)("Tip: A list of public XMPP providers is available"),o=(0,a.__)("here"),d=i.api.settings.get("providers_link");return(0,r.html)`<input class="form-control" required="required" type="text" name="domain" placeholder="${t}" value="${e.domain}"><p class="form-text text-muted">${s} <a href="${d}" class="url" target="_blank" rel="noopener">${o}</a>.</p>${i.api.settings.get("show_connection_url_input")?(0,l.tplConnectionURLInput)():""}`}(e)}</div>${d?function(){let e=(0,a.__)("Fetch registration form"),t=(0,a.__)("Already have a chat account?"),s=(0,a.__)("Go back to login");return(0,r.html)`<fieldset class="form-group buttons"><input class="btn btn-primary" type="submit" value="${e}"></fieldset><div class="switch-form"><p class="mb-1">${t}</p><a class="login-here toggle-register-login" href="#converse/login">${s}</a></div>`}():""}</form>`}(e):""} ${1===e.status?function(e){let t=i.api.settings.get("registration_domain"),s=(0,a.__)("Cancel");return(0,r.html)`<form id="converse-register" class="converse-form no-scrolling" @submit="${t=>e.onFormSubmission(t)}">${(0,o.default)({classes:"hor_centered"})} ${t?"":(0,r.html)`<button class="btn btn-secondary button-cancel hor_centered" @click="${t=>e.renderProviderChoiceForm(t)}">${s}</button>`}</form>`}(e):""} ${2===e.status?(0,c.default)(e):""} ${3===e.status?(0,d.default)():""}`},"./src/plugins/register/templates/registration_form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),a=s("./src/plugins/register/templates/switch_form.js");let l=e=>{let t=(0,o.__)("Choose a different provider"),s=(0,o.__)("Account Registration:"),l=(0,o.__)("Register"),d=i.api.settings.get("registration_domain");return(0,r.html)`<form id="converse-register" class="converse-form rounded" @submit="${t=>e.onFormSubmission(t)}"><legend class="col-form-label">${s} ${e.domain}</legend><p class="title">${e.title}</p><p class="form-help instructions">${e.instructions}</p><div class="form-errors hidden"></div>${e.form_fields}<fieldset class="buttons form-group">${e.fields?(0,r.html)`<input type="submit" class="btn btn-primary" value="${l}">`:""} ${d?"":(0,r.html)`<input type="button" class="btn btn-secondary button-cancel" value="${t}" @click="${t=>e.renderProviderChoiceForm(t)}">`} ${(0,a.default)()}</fieldset></form>`}},"./src/plugins/register/templates/switch_form.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/i18n/index.js"),i=s("./node_modules/lit/index.js");let o=()=>{let e=(0,r.__)("Already have a chat account?"),t=(0,r.__)("Go back to login");return(0,i.html)`<div class="switch-form"><p class="mb-1">${e}</p><a class="login-here toggle-register-login" href="#converse/login">${t}</a></div>`}},"./src/plugins/register/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{routeToForm:()=>o,setActiveForm:()=>i});var r=s("./src/headless/index.js");async function i(e){await r.api.waitUntil("controlBoxInitialized");let{chatboxes:t}=r._converse.state;t.get("controlbox").set({"active-form":e})}function o(e){"#converse/login"===location.hash?(e?.preventDefault(),i("login")):"#converse/register"===location.hash&&(e?.preventDefault(),i("register"))}},"./src/plugins/roomslist/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js");s("./src/plugins/roomslist/view.js"),r.converse.plugins.add("converse-roomslist",{dependencies:["converse-singleton","converse-controlbox","converse-muc","converse-bookmarks"],initialize(){r.api.settings.extend({muc_grouped_by_domain:!1}),r.api.listen.on("clearSession",()=>{r.u.shouldClearCache(r._converse)&&r._converse.state.roomslist?.destroy()})}})},"./src/plugins/roomslist/model.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/index.js");let{Strophe:o}=i.converse.env,{OPENED:a}=i.constants;class l extends r.Model{defaults(){return{muc_domain:i.api.settings.get("muc_domain"),toggle_state:a,collapsed_domains:[]}}initialize(){super.initialize(),i.api.settings.listen.on("change:muc_domain",e=>this.setDomain(e))}setDomain(e){i.api.settings.get("locked_muc_domain")||this.save("muc_domain",o.getDomainFromJid(e))}}let d=l},"./src/plugins/roomslist/templates/roomslist.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js");s("./src/plugins/muc-views/modals/add-muc.js"),s("./src/plugins/muc-views/modals/muc-list.js");var o=s("./src/i18n/index.js"),a=s("./src/shared/chat/utils.js");s("./src/plugins/roomslist/styles/roomsgroups.scss");let{CLOSED:l}=i.constants,{isUniView:d}=i.u;function c(e){return d()&&!e.get("hidden")}function u(e,t){let s=(0,o.__)("Leave this groupchat"),i=t.get("num_unread_general")||t.get("has_activity");return(0,r.html)`<li class="list-item controlbox-padded available-chatroom d-flex flex-row ${c(t)?"open":""} ${i?"unread-msgs":""}" data-room-jid="${t.get("jid")}"><a class="list-item-link open-room available-room w-100" data-room-jid="${t.get("jid")}" data-room-name="${t.getDisplayName()}" title="${(0,o.__)("Click to open this groupchat")}" @click="${t=>e.openRoom(t)}"><converse-avatar .model="${t}" class="avatar avatar-muc" name="${t.getDisplayName()}" nonce="${t.vcard?.get("vcard_updated")}" height="30" width="30"></converse-avatar><span>${t.get("num_unread")?(0,r.html)`<span class="list-item-badge badge badge--muc msgs-indicator">${(0,a.getUnreadMsgsDisplay)(t)}</span>`:t.get("has_activity")?(0,r.html)`<span class="list-item-badge badge badge--muc msgs-indicator"></span>`:""} ${t.getDisplayName()}</span> </a><a class="list-item-action close-room" tabindex="0" data-room-jid="${t.get("jid")}" data-room-name="${t.getDisplayName()}" title="${s}" @click="${t=>e.closeRoom(t)}"><converse-icon class="fa fa-sign-out-alt" size="1.2em" color="${c(t)?"var(--foreground-color)":""}"></converse-icon></a></li>`}let h=e=>{let t=i.api.settings.get("muc_grouped_by_domain"),s=e.getRoomsToShow(),a=(0,o.__)("Click to toggle the list of open groupchats"),d=(0,o.__)("Groupchats"),c=(0,o.__)("Query server"),h=(0,o.__)("Add groupchat"),m=(0,o.__)("Bookmarks"),f=e.model.get("toggle_state")===l,p=[(0,r.html)`<a class="dropdown-item show-add-muc-modal" role="button" @click="${t=>i.api.modal.show("converse-add-muc-modal",{model:e.model},t)}" data-toggle="modal" data-target="#add-chatrooms-modal"><converse-icon class="fa fa-plus" size="1em"></converse-icon>${h}</a>`,(0,r.html)`<a class="dropdown-item show-list-muc-modal" role="button" @click="${t=>i.api.modal.show("converse-muc-list-modal",{model:e.model},t)}" data-toggle="modal" data-target="#muc-list-modal"><converse-icon class="fa fa-list-ul" size="1em"></converse-icon>${c}</a>`,(0,r.html)`<a class="dropdown-item show-bookmark-list-modal" role="button" @click="${t=>i.api.modal.show("converse-bookmark-list-modal",{model:e.model},t)}" data-toggle="modal"><converse-icon class="fa fa-bookmark" size="1em"></converse-icon>${m}</a>`];return(0,r.html)`<div class="d-flex controlbox-padded"><span class="w-100 controlbox-heading controlbox-heading--groupchats"><a class="list-toggle open-rooms-toggle" role="heading" aria-level="3" title="${a}" @click="${t=>e.toggleRoomsList(t)}">${d} ${s.length?(0,r.html)`<converse-icon class="fa ${f?"fa-caret-right":"fa-caret-down"}" size="1em" color="var(--muc-color)"></converse-icon>`:""}</a></span><converse-dropdown class="btn-group dropstart" .items="${p}"></converse-dropdown></div><div class="list-container list-container--openrooms ${s.length?"":"hidden"}"><ul class="items-list rooms-list open-rooms-list ${f?"collapsed":""}">${t?function(e,t){let s=new Map;for(let e of t){let t=e.get("jid").split("@").at(-1).toLowerCase();s.has(t)?s.get(t).push(e):s.set(t,[e])}let i=Array.from(s.keys());return i.sort(),i.map(t=>(function(e,t,s){let i=(0,o.__)("Click to hide these rooms"),a=e.model.get("collapsed_domains").includes(t);return(0,r.html)`<div class="muc-domain-group" data-domain="${t}"><a href="#" class="list-toggle muc-domain-group-toggle controlbox-padded" title="${i}" @click="${s=>e.toggleDomainList(s,t)}"><converse-icon class="fa ${a?"fa-caret-right":"fa-caret-down"}" size="1em" color="var(--muc-color)"></converse-icon>${t}</a><ul class="items-list muc-domain-group-rooms ${a?"collapsed":""}" data-domain="${t}">${s.map(t=>u(e,t))}</ul></div>`})(e,t,s.get(t)))}(e,s):s.map(t=>u(e,t))}</ul></div>`}},"./src/plugins/roomslist/view.js":function(e,t,s){"use strict";s.r(t),s.d(t,{RoomsList:()=>f});var r=s("./src/headless/index.js"),i=s("./src/i18n/index.js");s("./src/plugins/muc-views/modals/muc-details.js");var o=s("./src/shared/components/element.js"),a=s("./src/plugins/roomslist/model.js"),l=s("./src/plugins/roomslist/templates/roomslist.js");let{Strophe:d}=r.converse.env,{initStorage:c}=r.u,{CHATROOMS_TYPE:u,CLOSED:h,OPENED:m}=r.constants;class f extends o.CustomElement{initialize(){let e=r._converse.session.get("bare_jid"),t=`converse.roomspanel${e}`;this.model=new a.default({id:t}),r._converse.state.roomslist=this.model,c(this.model,t),this.model.fetch();let{chatboxes:s}=r._converse.state;this.listenTo(s,"add",this.renderIfChatRoom),this.listenTo(s,"remove",this.renderIfChatRoom),this.listenTo(s,"destroy",this.renderIfChatRoom),this.listenTo(s,"change",this.renderIfRelevantChange),this.listenTo(s,"vcard:add",()=>this.requestUpdate()),this.listenTo(s,"vcard:change",()=>this.requestUpdate()),this.listenTo(this.model,"change",()=>this.requestUpdate()),this.requestUpdate()}render(){return(0,l.default)(this)}renderIfChatRoom(e){r.u.muc.isChatRoom(e)&&this.requestUpdate()}renderIfRelevantChange(e){let t=["bookmarked","hidden","name","num_unread","num_unread_general","has_activity"],s=e.changed||{};r.u.muc.isChatRoom(e)&&Object.keys(s).filter(e=>t.includes(e)).length&&this.requestUpdate()}getRoomsToShow(){let{chatboxes:e}=r._converse.state,t=e.filter(e=>e.get("type")===u&&!e.get("closed"));return t.sort((e,t)=>e.getDisplayName().toLowerCase()<=t.getDisplayName().toLowerCase()?-1:1),t}async openRoom(e){e.preventDefault();let t=r.u.ancestor(e.target,".open-room"),s=t.getAttribute("data-room-name"),i=t.getAttribute("data-room-jid"),o={name:s||d.unescapeNode(d.getNodeFromJid(i))||i};await r.api.rooms.open(i,o,!0)}async closeRoom(e){e.preventDefault();let t=e.currentTarget,s=t.getAttribute("data-room-name"),o=t.getAttribute("data-room-jid");await r.api.confirm((0,i.__)("Confirm"),(0,i.__)("Are you sure you want to leave the groupchat %1$s?",s))&&(await r.api.rooms.get(o)).close()}toggleRoomsList(e){e?.preventDefault?.();let t=this.querySelector(".open-rooms-list");this.model.get("toggle_state")===h?r.u.slideOut(t).then(()=>this.model.save({toggle_state:m})):r.u.slideIn(t).then(()=>this.model.save({toggle_state:h}))}toggleDomainList(e,t){e?.preventDefault?.();let s=this.model.get("collapsed_domains");s.includes(t)?this.model.save({collapsed_domains:s.filter(e=>e!==t)}):this.model.save({collapsed_domains:[...s,t]})}}r.api.elements.define("converse-rooms-list",f)},"./src/plugins/rootview/background.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/plugins/rootview/templates/background_logo.js"),a=s("./src/plugins/rootview/utils.js");s("./src/plugins/rootview/styles/background.scss");class l extends i.CustomElement{static get properties(){return{logo:{type:Boolean}}}initialize(){this.setThemeAttributes();let e=r.api.settings.get();this.listenTo(e,"change:view_mode",()=>this.setThemeAttributes()),this.listenTo(e,"change:singleton",()=>this.setThemeAttributes()),window.matchMedia("(prefers-color-scheme: dark)").addListener(()=>this.setThemeAttributes()),window.matchMedia("(prefers-color-scheme: light)").addListener(()=>this.setThemeAttributes())}render(){return(0,o.default)(this)}setThemeAttributes(){let e=(0,a.getTheme)();this.classList.add(`theme-${e}`),this.setAttribute("data-converse-theme",e),this.setAttribute("data-bs-theme",e),this.requestUpdate()}}r.api.elements.define("converse-bg",l);let d=l},"./src/plugins/rootview/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js"),i=s("./src/plugins/rootview/root.js"),o=s("./src/plugins/rootview/utils.js");s("./src/plugins/rootview/background.js"),r.converse.plugins.add("converse-rootview",{initialize(){r.api.settings.extend({auto_insert:!0,dark_theme:"dracula",rtl_langs:["ar","fa","he","ug"],show_background:!1,theme:"classic"}),r.api.listen.on("chatBoxesInitialized",o.ensureElement),r.api.elements.define("converse-root",i.default)}})},"./src/plugins/rootview/root.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/i18n/index.js"),i=s("./src/headless/index.js"),o=s("./src/plugins/rootview/templates/root.js"),a=s("./src/shared/components/element.js"),l=s("./src/plugins/rootview/utils.js");s("./src/plugins/rootview/styles/root.scss");class d extends a.CustomElement{render(){return(0,o.default)()}initialize(){this.setAttribute("id","conversejs"),this.setThemeAttributes();let e=i.api.settings.get();this.listenTo(e,"change:view_mode",()=>this.setThemeAttributes()),this.listenTo(e,"change:singleton",()=>this.setThemeAttributes()),window.matchMedia("(prefers-color-scheme: dark)").addListener(()=>this.setThemeAttributes()),window.matchMedia("(prefers-color-scheme: light)").addListener(()=>this.setThemeAttributes())}setThemeAttributes(){let e=(0,l.getTheme)();this.className="",this.classList.add("container-fluid"),this.classList.add("g-0"),this.classList.add("conversejs"),this.classList.add(`converse-${i.api.settings.get("view_mode")}`),this.classList.add(`theme-${e}`),this.setAttribute("data-bs-theme",e),this.setAttribute("data-converse-theme",e);let t=r.i18n.getLocale();this.setAttribute("lang",t),i.api.settings.get("rtl_langs").includes(t)?this.setAttribute("dir","rtl"):this.setAttribute("dir","ltr"),this.requestUpdate()}}},"./src/plugins/rootview/templates/background_logo.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js");let o=e=>(0,r.html)`${"cyberpunk"===i.api.settings.get("theme")?(0,r.html)`<section class="moving-grid"><div class="container"><div class="static-lines">${[...Array(20).keys()].map(()=>(0,r.html)`<div class="vert"></div>`)}</div><div class="moving-lines">${[...Array(60).keys()].map(()=>(0,r.html)`<div class="horz"></div>`)}</div></div></section>`:""} ${e.hasAttribute("logo")?(0,r.html)`<div class="inner-content converse-brand row"><div class="converse-brand__heading"><converse-logo></converse-logo><span class="converse-brand__text"><span>converse<span class="subdued">.js</span></span><p class="byline">messaging freedom</p></span></div>${"overlayed"===i.api.settings.get("view_mode")?(0,r.html)`<div class="converse-brand__padding"></div>`:""}</div>`:""}`},"./src/plugins/rootview/templates/root.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js");s("./src/shared/components/font-awesome.js");let o=()=>{let e=i.api.settings.get("singleton")?["converse-singleton"]:[];return e.push(`converse-${i.api.settings.get("view_mode")}`),(0,r.html)`${i.api.settings.get("show_background")?(0,r.html)`<converse-bg logo></converse-bg>`:""}<converse-chats class="converse-chatboxes row justify-content-start g-0 ${e.join(" ")}"></converse-chats><converse-modals id="converse-modals" class="modals"></converse-modals><converse-toasts></converse-toasts><converse-fontawesome></converse-fontawesome>`}},"./src/plugins/rootview/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{ensureElement:()=>o,getTheme:()=>i});var r=s("./src/headless/index.js");function i(){return window.matchMedia("(prefers-color-scheme: dark)").matches?r.api.settings.get("dark_theme"):r.api.settings.get("theme")}function o(){if(!r.api.settings.get("auto_insert"))return;let e=r.api.settings.get("root");if(!e.querySelector("converse-root")&&!e.matches?.("converse-root")){let t=document.createElement("converse-root"),s=e.querySelector("body");s?s.appendChild(t):e.appendChild(t)}}},"./src/plugins/rosterview/approval-alert.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/plugins/rosterview/utils.js"),a=s("./src/plugins/rosterview/templates/approval-alert.js"),l=s("./src/plugins/rosterview/templates/unsaved-alert.js");s("./src/plugins/rosterview/styles/approval-alert.scss");let{u:d}=r.converse.env;class c extends i.CustomElement{static properties={contact:{type:r.RosterContact}};constructor(){super(),this.contact=null}initialize(){super.initialize(),this.listenTo(this.contact,"change",()=>this.requestUpdate())}render(){return this.contact.get("requesting")?(0,a.default)(this):d.roster.isUnsavedContact(this.contact)?this.contact.get("hide_contact_add_alert")?"":(0,l.default)(this):""}async acceptRequest(e){e.preventDefault(),r.api.modal.show("converse-accept-contact-request-modal",{contact:this.contact},e)}async declineRequest(e){e.preventDefault(),(0,o.declineContactRequest)(this.contact)}showAddContactModal(e){e.preventDefault(),r.api.modal.show("converse-add-contact-modal",{contact:this.contact},e)}async close(e){e.preventDefault(),this.contact.save({hide_contact_add_alert:!0})}}r.api.elements.define("converse-contact-approval-alert",c)},"./src/plugins/rosterview/constants.js":function(e,t,s){"use strict";s.r(t),s.d(t,{STATUSES:()=>i});var r=s("./src/i18n/index.js");let i={dnd:(0,r.__)("This contact is busy"),online:(0,r.__)("This contact is online"),offline:(0,r.__)("This contact is offline"),unavailable:(0,r.__)("This contact is unavailable"),xa:(0,r.__)("This contact is away for an extended period"),away:(0,r.__)("This contact is away")}},"./src/plugins/rosterview/contactview.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/headless/index.js"),i=s("./src/shared/components/observable.js"),o=s("./src/plugins/rosterview/templates/requesting_contact.js"),a=s("./src/plugins/rosterview/templates/roster_item.js"),l=s("./src/plugins/rosterview/templates/unsaved_contact.js");s("./src/i18n/index.js");var d=s("./src/plugins/rosterview/utils.js");class c extends i.ObservableElement{constructor(){super(),this.model=null,this.observable="once"}static get properties(){return{...super.properties,model:{type:Object}}}initialize(){this.listenTo(this.model,"change",()=>this.requestUpdate()),this.listenTo(this.model,"highlight",()=>this.requestUpdate()),this.listenTo(this.model,"vcard:add",()=>this.requestUpdate()),this.listenTo(this.model,"vcard:change",()=>this.requestUpdate()),this.listenTo(this.model,"presence:change",()=>this.requestUpdate())}render(){if(this.model instanceof r._converse.exports.RosterContact){if(!0===this.model.get("requesting"))return(0,o.default)(this);else if(!this.model.get("subscription"))return(0,l.default)(this)}return(0,a.default)(this)}openChat(e){e?.preventDefault?.(),r.api.chats.open(this.model.get("jid"),{},!0)}addContact(e){e?.preventDefault?.(),r.api.modal.show("converse-add-contact-modal",{contact:this.model},e)}async removeContact(e){e?.preventDefault?.(),await (0,d.removeContact)(this.model,!0)}async showUserDetailsModal(e){e?.preventDefault?.(),e.preventDefault(),this.model instanceof r._converse.exports.Profile?r.api.modal.show("converse-profile-modal",{model:this.model},e):r.api.modal.show("converse-user-details-modal",{model:this.model},e)}async blockContact(e){e?.preventDefault?.(),await (0,d.blockContact)(this.model)}async acceptRequest(e){e?.preventDefault?.(),r.api.modal.show("converse-accept-contact-request-modal",{contact:this.model},e)}async declineRequest(e){e?.preventDefault?.(),(0,d.declineContactRequest)(this.model)}}r.api.elements.define("converse-roster-contact",c)},"./src/plugins/rosterview/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js"),i=s("./src/plugins/rosterview/contactview.js"),o=s("./src/plugins/rosterview/utils.js");s("./src/plugins/modal/index.js");var a=s("./src/plugins/rosterview/modals/add-contact.js"),l=s("./src/plugins/rosterview/modals/accept-contact-request.js"),d=s("./src/plugins/rosterview/modals/new-chat.js"),c=s("./src/plugins/rosterview/modals/blocklist.js"),u=s("./src/plugins/rosterview/rosterview.js");s("./src/plugins/rosterview/approval-alert.js"),s("./src/shared/styles/status.scss"),s("./src/plugins/rosterview/styles/roster.scss"),r.converse.plugins.add("converse-rosterview",{dependencies:["converse-roster","converse-modal","converse-chatboxviews","converse-blocklist"],initialize(){r.api.settings.extend({allow_contact_removal:!0,hide_offline_users:!1,roster_groups:!0,xhr_user_search_url:null}),r.api.promises.add("rosterViewInitialized");let e={AcceptContactRequestModal:l.default,AddContactModal:a.default,BlockListModal:c.default,NewChatModal:d.default,RosterContactView:i.default,RosterFilter:r.RosterFilter,RosterView:u.default};Object.assign(r._converse,e),Object.assign(r._converse.exports,e),r.api.listen.on("chatBoxesInitialized",()=>{r._converse.state.chatboxes.on("destroy",e=>(0,o.highlightRosterItem)(e.get("jid"))),r._converse.state.chatboxes.on("change:hidden",e=>(0,o.highlightRosterItem)(e.get("jid")))})}})},"./src/plugins/rosterview/modals/accept-contact-request.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js");s("./src/shared/autocomplete/index.js");var i=s("./src/plugins/modal/modal.js"),o=s("./src/plugins/rosterview/modals/templates/accept-contact-request.js"),a=s("./src/i18n/index.js");class l extends i.default{constructor(e){super(e),this.contact=null}initialize(){super.initialize(),this.listenTo(this.contact,"change",()=>this.requestUpdate()),this.requestUpdate(),this.addEventListener("shown.bs.modal",()=>this.querySelector('input[name="name"]')?.focus(),!1)}renderModal(){return(0,o.default)(this)}getModalTitle(){return(0,a.__)("Contact Request")}async acceptContactRequest(e){e.preventDefault();let t=new FormData(e.target),s=(t.get("name")||"").trim(),i=t.get("groups")?.split(",").map(e=>e.trim()).filter(e=>e)||[];try{await r._converse.state.roster.sendContactAddIQ({jid:this.contact.get("jid"),name:s,groups:i}),this.contact.authorize().subscribe()}catch(e){r.log.error(e),r.api.toast.show("accept-request-error",{type:"danger",body:(0,a.__)("Sorry, something went wrong while accepting the contact request")});return}this.contact.save({nickname:s,groups:i}),r.api.toast.show("accept-request-success",{type:"success",body:(0,a.__)("Successfully accepted the contact request")}),this.modal.hide()}}r.api.elements.define("converse-accept-contact-request-modal",l)},"./src/plugins/rosterview/modals/add-contact.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),i=s("./src/headless/index.js"),o=s("./src/plugins/modal/modal.js"),a=s("./src/plugins/rosterview/modals/templates/add-contact.js"),l=s("./src/i18n/index.js");s("./src/plugins/rosterview/modals/styles/add-contact.scss");class d extends o.default{constructor(){super(),this.contact=null}initialize(){super.initialize(),this.listenTo(this.contact,"change",()=>this.requestUpdate()),this.requestUpdate(),this.addEventListener("shown.bs.modal",()=>this.querySelector('input[name="jid"]')?.focus(),!1)}renderModal(){return(0,a.default)(this)}getModalTitle(){return(0,l.__)("Add a Contact")}validateSubmission(e){return!e||e.split("@").filter(e=>!!e).length<2?(this.alert((0,l.__)("Please enter a valid XMPP address"),"danger",!1),!1):!this.contact&&i._converse.state.roster.get(r.Strophe.getBareJidFromJid(e))?(this.alert((0,l.__)("This contact has already been added"),"danger",!1),!1):(this.alert(null),!0)}async afterSubmission(e,t,s){i.api.contacts.add({jid:e,name:t,groups:s}).catch(e=>{i.log.error(e),i.api.toast.show("contact-add-error",{type:"danger",body:(0,l.__)("Sorry, something went wrong while adding the contact")})}),i.api.chats.open(e,{},!0),this.alert(null),i.api.toast.show("contact-added",{type:"success",body:(0,l.__)("Contact added successfully")}),this.modal.hide()}async addContactFromForm(e){let t;e.preventDefault();let s=e.target,r=new FormData(s),o=(r.get("jid")||"").trim();if(i.api.settings.get("xhr_user_search_url")){let e=o.match(/^(.*) <(.*)>$/);if(!e)return void this.alert((0,l.__)('Invalid value for the name and XMPP address. Please use the format "Name <username@example.org>".'),"danger",!1);t=e[1].trim(),o=e[2].trim()}else t=(r.get("name")||"").trim();if(this.validateSubmission(o)){let e=r.get("groups")?.split(",").map(e=>e.trim()).filter(e=>e)||[];this.afterSubmission(o,t,e),s.reset()}}}i.api.elements.define("converse-add-contact-modal",d)},"./src/plugins/rosterview/modals/blocklist.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/plugins/modal/modal.js"),a=s("./src/plugins/rosterview/modals/templates/blocklist.js"),l=s("./src/i18n/index.js");class d extends o.default{static get properties(){return{...super.properties,filter_text:{type:String}}}constructor(){super(),this.filter_text=""}async initialize(){super.initialize(),this.blocklist=await i.api.blocklist.get(),this.listenTo(this.blocklist,"add",()=>this.requestUpdate()),this.listenTo(this.blocklist,"remove",()=>this.requestUpdate()),this.listenTo(this.blocklist,"change",()=>this.requestUpdate()),this.addEventListener("shown.bs.modal",()=>{this.querySelector('input[name="blocklist_filter"]')?.focus()},!1),this.requestUpdate()}renderModal(){return this.blocklist?(0,a.default)(this):(0,r.html)`<converse-spinner></converse-spinner>`}getModalTitle(){return(0,l.__)("Blocklist")}async unblockUsers(e){e.preventDefault();let t=[...new FormData(e.target).entries()].filter(e=>"on"===e[1]).map(e=>e[0]);await i.api.blocklist.remove(t);let s=t.length>1?(0,l.__)("Successfully unblocked %1$s XMPP addresses",t.length):(0,l.__)("Successfully unblocked one XMPP address");i.api.toast.show("blocked",{type:"success",body:s})}toggleSelectAll(e){let t=e.target.checked;this.querySelectorAll('input[type="checkbox"]').forEach(e=>e.checked=t)}}i.api.elements.define("converse-blocklist-modal",d)},"./src/plugins/rosterview/modals/new-chat.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/plugins/modal/modal.js"),o=s("./src/plugins/rosterview/modals/templates/new-chat.js"),a=s("./src/i18n/index.js");class l extends i.default{initialize(){super.initialize(),this.listenTo(this.model,"change",()=>this.requestUpdate()),this.requestUpdate(),this.addEventListener("shown.bs.modal",()=>this.querySelector('input[name="jid"]')?.focus(),!1)}renderModal(){return(0,o.default)(this)}getModalTitle(){return(0,a.__)("Start a new chat")}validateSubmission(e){return!e||e.split("@").filter(e=>!!e).length<2?(this.model.set("error",(0,a.__)("Please enter a valid XMPP address")),!1):(this.model.set("error",null),!0)}async afterSubmission(e,t){try{await r.api.chats.open(t,{},!0)}catch(e){r.log.error(e),this.model.set("error",(0,a.__)("Sorry, something went wrong"));return}this.model.clear(),this.modal.hide()}async startChatFromForm(e){e.preventDefault();let t=e.target,s=(new FormData(t).get("jid")||"").trim();this.validateSubmission(s)&&this.afterSubmission(t,s)}}r.api.elements.define("converse-new-chat-modal",l)},"./src/plugins/rosterview/modals/templates/accept-contact-request.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/i18n/index.js"),i=s("./src/plugins/rosterview/utils.js"),o=s("./node_modules/lit/index.js");let a=e=>{let t=(0,r.__)("Accept"),s=(0,r.__)("Groups"),a=(0,r.__)("Use commas to separate multiple values"),l=(0,r.__)("Name"),d=(0,r.__)("XMPP Address");return(0,o.html)`<div class="modal-body"><form class="converse-form" @submit="${t=>e.acceptContactRequest(t)}"><div class="mb-3"><label class="form-label clearfix" for="name">${l}:</label> <input type="text" name="name" value="${e.contact.vcard?.get("fullname")||""}" class="form-control"></div><div class="mb-3"><label class="form-label clearfix" for="name">${s}:</label><div class="mb-1"><small class="form-text text-muted">${a}</small></div><converse-autocomplete .list="${(0,i.getGroupsAutoCompleteList)()}" name="groups"></converse-autocomplete></div><div class="mb-3 d-flex justify-content-between"><label class="form-label clearfix w-100" for="jid-display">${d}:</label><p class="form-control-plaintext text-end" id="jid-display">${e.contact.get("jid")}</p></div><button type="submit" class="btn btn-primary">${t}</button></form></div>`}},"./src/plugins/rosterview/modals/templates/add-contact.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),a=s("./src/plugins/rosterview/utils.js");s("./src/shared/autocomplete/index.js");let l=e=>{let t=(0,o.__)("Add"),s=(0,o.__)("name@example.org"),l=(0,o.__)("Groups"),d=(0,o.__)("Use commas to separate multiple values"),c=(0,o.__)("Name"),u=i.api.settings.get("xhr_user_search_url"),h=(0,o.__)("XMPP Address"),m=u?(0,o.__)("Search name or XMPP address"):h;return(0,r.html)`<div class="modal-body"><form class="converse-form add-xmpp-contact" @submit="${t=>e.addContactFromForm(t)}">${e.contact?(0,r.html)`<input type="hidden" name="jid" value="${e.contact.get("jid")}">`:(0,r.html)`<div class="mb-3"><label class="form-label clearfix" for="jid">${m}:</label> ${u?(0,r.html)`<converse-autocomplete .getAutoCompleteList="${a.getNamesAutoCompleteList}" position="below" min_chars="2" filter="contains" ?required="${!0}" value="${e.state.get("jid")||""}" placeholder="${s}" name="jid"></converse-autocomplete>`:(0,r.html)`<converse-autocomplete .list="${(0,a.getJIDsAutoCompleteList)()}" .data="${(e,t)=>`${t.slice(0,t.indexOf("@"))}@${e}`}" position="below" min_chars="2" filter="startswith" ?required="${!i.api.settings.get("xhr_user_search_url")}" value="${e.state.get("jid")||""}" placeholder="${s}" name="jid"></converse-autocomplete>`}</div>`} ${!u?(0,r.html)`<div class="mb-3"><label class="form-label clearfix" for="name">${c}:</label> <input type="text" name="name" value="${e.state.get("nickname")||""}" class="form-control"></div>`:""}<div class="mb-3"><label class="form-label clearfix" for="name">${l}:</label><div class="mb-1"><small class="form-text text-muted">${d}</small></div><converse-autocomplete .list="${(0,a.getGroupsAutoCompleteList)()}" name="groups"></converse-autocomplete></div>${e.contact?(0,r.html)`<div class="mb-3 d-flex justify-content-between"><label class="form-label clearfix w-100" for="jid-display">${h}:</label><p class="form-control-plaintext text-end" id="jid-display">${e.contact.get("jid")}</p></div>`:""} <button type="submit" class="btn btn-primary">${t}</button></form></div>`}},"./src/plugins/rosterview/modals/templates/blocklist.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/i18n/index.js"),i=s("./node_modules/lit/index.js"),o=s("./node_modules/lit/directives/repeat.js");let a=e=>{if(!e.blocklist.length)return(0,i.html)`<p>${(0,r.__)("No blocked XMPP addresses")}</p>`;{let t=e.filter_text?e.blocklist.filter(t=>t.get("jid").toLowerCase().includes(e.filter_text.toLowerCase())):e.blocklist;return(0,i.html)`<form @submit="${t=>e.unblockUsers(t)}"><div class="d-flex justify-content-between">${e.blocklist.length>5?(0,i.html)`<p style="line-height:3em">${(0,r.__)("%1$s blocked users shown",t.length)}</p>`:""} ${t.length?(0,i.html)`<div class="text-end"><button type="submit" class="btn btn-danger mt-2 mb-2">${(0,r.__)("Unblock selected users")}</button></div>`:""}</div>${e.blocklist.length>5?(0,i.html)`<div class="mb-3 ${e.filter_text?"input-group":""}"><input autofocus name="blocklist_filter" type="text" class="form-control" value="${e.filter_text}" placeholder="${(0,r.__)("Filter blocked users")}" @input="${t=>e.filter_text=t.target.value}"> <button type="button" class="btn btn-outline-secondary ${!e.filter_text?"hidden":""}" @click="${()=>{e.filter_text="",e.querySelector('input[name="blocklist_filter"]').value=""}}"><converse-icon size="1em" class="fa fa-times"></converse-icon>${(0,r.__)("clear")}</button></div><div class="form-check mb-1"><input class="form-check-input" type="checkbox" id="select-all" @change="${t=>e.toggleSelectAll(t)}"> <label class="form-check-label" for="select-all"><strong>${(0,r.__)("Select All")}</strong></label></div>`:""}<ul class="items-list">${(0,o.repeat)(t,e=>e.get("jid"),e=>(0,i.html)`<li class="list-item" @click="${t=>{if("checkbox"===t.target.type)return;t.preventDefault();let s=document.getElementById(`blocklist-${e.get("jid")}`);s.checked=!s.checked}}"><div class="form-check"><input class="form-check-input" type="checkbox" id="blocklist-${e.get("jid")}" name="${e.get("jid")}"> <label class="form-check-label w-100" for="blocklist-${e.get("jid")}">${e.get("jid")}</label></div></li>`)}</ul></form>`}}},"./src/plugins/rosterview/modals/templates/new-chat.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/i18n/index.js"),i=s("./node_modules/lit/index.js");let o=e=>{let t=(0,r.__)("Start Chat"),s=(0,r.__)("XMPP Address"),o=e.model.get("error");return(0,i.html)`<div class="modal-body">${o?(0,i.html)`<div class="alert alert-danger" role="alert">${o}</div>`:""}<form @submit="${t=>e.startChatFromForm(t)}"><div class="mb-3"><label class="form-label" for="jid">${s}</label> <input type="text" name="jid" class="form-control" required></div><button type="submit" class="btn btn-primary">${t}</button></form></div>`}},"./src/plugins/rosterview/rosterview.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/index.js"),o=s("./src/shared/components/element.js"),a=s("./src/utils/html.js"),l=s("./src/plugins/rosterview/templates/roster.js");let{initStorage:d}=i.u,{CLOSED:c,OPENED:u}=i.constants;class h extends o.CustomElement{async initialize(){let e=i._converse.session.get("bare_jid"),t=`converse.contacts-panel${e}`;this.model=new r.Model({id:t}),d(this.model,t),this.model.fetch(),await i.api.waitUntil("rosterInitialized");let{chatboxes:s,presences:o,roster:a}=i._converse.state;this.listenTo(i._converse,"rosterContactsFetched",()=>this.requestUpdate()),this.listenTo(o,"change:show",()=>this.requestUpdate()),this.listenTo(s,"change:hidden",()=>this.requestUpdate()),this.listenTo(a,"add",()=>this.requestUpdate()),this.listenTo(a,"destroy",()=>this.requestUpdate()),this.listenTo(a,"remove",()=>this.requestUpdate()),this.listenTo(a,"change",()=>this.requestUpdate()),this.listenTo(a,"presence:change",()=>this.requestUpdate()),this.listenTo(a.state,"change",()=>this.requestUpdate()),this.listenTo(this.model,"change",()=>this.requestUpdate()),i.api.trigger("rosterViewInitialized")}render(){return(0,l.default)(this)}showAddContactModal(e){i.api.modal.show("converse-add-contact-modal",{model:new r.Model},e)}showNewChatModal(e){i.api.modal.show("converse-new-chat-modal",{model:new r.Model},e)}showBlocklistModal(e){i.api.modal.show("converse-blocklist-modal",{},e)}async syncContacts(e){e?.preventDefault();let{roster:t}=i._converse.state;this.syncing_contacts=!0,this.requestUpdate(),t.data.save("version",null),await t.fetchFromServer(),i.api.user.presence.send(),this.syncing_contacts=!1,this.requestUpdate()}toggleRoster(e){e?.preventDefault?.();let t=this.querySelector(".list-container.roster-contacts");this.model.get("toggle_state")===c?(0,a.slideOut)(t).then(()=>this.model.save({toggle_state:u})):(0,a.slideIn)(t).then(()=>this.model.save({toggle_state:c}))}toggleFilter(e){e?.preventDefault?.(),this.model.save({filter_visible:!this.model.get("filter_visible")})}}i.api.elements.define("converse-roster",h)},"./src/plugins/rosterview/templates/approval-alert.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");let o=e=>e.contact?(0,r.html)`<div class="alert alert-info d-flex flex-column align-items-center mb-0 p-3 text-center"><p class="mb-2">${(0,i.__)("%1$s would like to be your contact",e.contact.getDisplayName())}</p><div class="btn-group"><button type="button" class="btn btn-sm btn-success" @click="${t=>e.acceptRequest(t)}">${(0,i.__)("Approve")}</button> <button type="button" class="btn btn-sm btn-danger" @click="${t=>e.declineRequest(t)}">${(0,i.__)("Deny")}</button></div></div>`:""},"./src/plugins/rosterview/templates/group.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/repeat.js"),o=s("./src/headless/index.js");s("./src/shared/components/icons.js");var a=s("./src/i18n/index.js"),l=s("./src/plugins/rosterview/utils.js");let{isUniView:d}=o.u;function c(e){let t=e.get("jid"),s=[];if(d()){let e=o._converse.state.chatboxes.get(t);e&&!e.get("hidden")&&s.push("open")}let i=e.get("ask"),a=e.get("requesting"),l=e.get("subscription");return"subscribe"===i||"from"===l?s.push("pending-xmpp-contact"):!0===a?s.push("requesting-xmpp-contact"):("both"===l||"to"===l||o.u.isSameBareJID(t,o.api.connection.get().jid))&&(s.push("current-xmpp-contact"),s.push(l),s.push(e.getStatus())),(0,r.html)`<li class="list-item d-flex controlbox-padded ${s.join(" ")}" data-status="${e.getStatus()}"><converse-roster-contact .model="${e}"></converse-roster-contact></li>`}let u=e=>{let t=(0,a.__)("Click to hide these contacts"),s=o._converse.state.roster.state.get("collapsed_groups");return(0,r.html)`<div class="roster-group" data-group="${e.name}"><a href="#" class="list-toggle group-toggle controlbox-padded" title="${t}" @click="${t=>(0,l.toggleGroup)(t,e.name)}"><converse-icon color="var(--chat-color)" size="1em" class="fa ${s.includes(e.name)?"fa-caret-right":"fa-caret-down"}"></converse-icon>${e.name} ${e.contacts[0].get("requesting")?(0,r.html)`<converse-icon color="var(--chat-color)" size="1.2em" class="fa fa-bell-alt"></converse-icon>`:""}</a><ul class="items-list roster-group-contacts ${s.includes(e.name)?"collapsed":""}" data-group="${e.name}">${(0,i.repeat)(e.contacts,e=>e.get("jid"),c)}</ul></div>`}},"./src/plugins/rosterview/templates/requesting_contact.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js"),o=s("./src/shared/chat/utils.js"),a=s("./src/plugins/rosterview/templates/roster_item.js");let l=e=>{let t=(0,o.getUnreadMsgsDisplay)(e.model),s=e.model.get("jid"),l=e.model.getDisplayName(),d=(0,i.__)("Click to accept the contact request from %1$s (XMPP address: %2$s)",l,s),c=(0,i.__)("Click to decline the contact request from %1$s (XMPP address: %2$s)",l,s),u=(0,i.__)("Click to chat with %1$s (XMPP address: %2$s)",l,s),h=[(0,r.html)`<a class="dropdown-item accept-xmpp-request" role="button" @click="${t=>e.acceptRequest(t)}" aria-label="${d}" title="${d}" href="#"><converse-icon class="fa fa-check" size="1em"></converse-icon>${(0,i.__)("Accept as contact")}</a>`,(0,a.tplDetailsButton)(e),(0,r.html)`<a class="dropdown-item decline-xmpp-request" role="button" @click="${t=>e.declineRequest(t)}" aria-label="${c}" title="${c}"><converse-icon class="fa fa-times" size="1em"></converse-icon>${(0,i.__)("Remove")}</a>`];return(0,r.html)`<a class="list-item-link cbox-list-item open-chat ${t?"unread-msgs":""}" title="${u}" href="#" data-jid="${s}" @click="${e.openChat}"><span><converse-avatar .model="${e.model}" class="avatar" name="${e.model.getDisplayName()}" nonce="${e.model.vcard?.get("vcard_updated")}" height="30" width="30"></converse-avatar></span>${t?(0,r.html)`<span class="msgs-indicator badge">${t}</span>`:""} <span class="contact-name ${t?"unread-msgs":""}">${l}</span> </a><span class="contact-actions"><converse-dropdown class="btn-group dropstart list-item-action" .items="${h}"></converse-dropdown></span>`}},"./src/plugins/rosterview/templates/roster.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/repeat.js"),o=s("./src/headless/index.js"),a=s("./src/plugins/rosterview/templates/group.js"),l=s("./src/plugins/rosterview/templates/roster_filter.js"),d=s("./src/i18n/index.js"),c=s("./src/plugins/rosterview/utils.js");let{CLOSED:u}=o.constants,h=e=>{let t=(0,d.__)("Contacts"),s=(0,d.__)("Click to toggle contacts"),h=(0,d.__)("Add a contact"),m=(0,d.__)("Start a new chat"),f=(0,d.__)("Show block list"),{state:p}=o._converse,g=[...p.roster||[],...o.api.settings.get("show_self_in_roster")?[p.xmppstatus]:[]],_=g.reduce((e,t)=>(0,c.populateContactsMap)(e,t),{}),v=Object.keys(_).filter(t=>(0,c.shouldShowGroup)(t,e.model)),y=e.model.get("toggle_state")===u;v.sort(c.groupsComparator);let b=(0,d.__)("Show filter"),j=(0,d.__)("Hide filter"),w=e.model.get("filter_visible"),S=[];if(o.api.settings.get("allow_contact_requests")&&S.push((0,r.html)`<a href="#" class="dropdown-item add-contact" role="button" @click="${t=>e.showAddContactModal(t)}" title="${h}" data-toggle="modal" data-target="#add-contact-modal"><converse-icon class="fa fa-user-plus" size="1em"></converse-icon>${h}</a>`),o.api.settings.get("allow_non_roster_messaging")&&S.push((0,r.html)`<a href="#" class="dropdown-item new-chat" role="button" @click="${t=>e.showNewChatModal(t)}" title="${m}" data-toggle="modal" data-target="#new-chat-modal"><converse-icon class="fa fa-user-plus" size="1em"></converse-icon>${m}</a>`),S.push((0,r.html)`<a href="#" class="dropdown-item" role="button" @click="${t=>e.showBlocklistModal(t)}" title="${f}"><converse-icon class="fa fa-list-ul" size="1em"></converse-icon>${f}</a>`),g.length>5&&S.push((0,r.html)`<a href="#" class="dropdown-item toggle-filter" role="button" @click="${t=>e.toggleFilter(t)}"><converse-icon size="1em" class="fa fa-filter"></converse-icon>${w?j:b}</a>`),"debug"===o.api.settings.get("loglevel")){let t=(0,d.__)("Re-sync contacts");S.push((0,r.html)`<a href="#" class="dropdown-item" role="button" @click="${t=>e.syncContacts(t)}" title="${t}"><converse-icon class="fa fa-sync sync-contacts" size="1em"></converse-icon>${t}</a>`)}return(0,r.html)`<div class="d-flex controlbox-padded"><span class="w-100 controlbox-heading controlbox-heading--contacts"><a class="list-toggle open-contacts-toggle" title="${s}" role="heading" aria-level="3" @click="${e.toggleRoster}">${t} ${g.length?(0,r.html)`<converse-icon class="fa ${y?"fa-caret-right":"fa-caret-down"}" size="1em" color="var(--chat-color)"></converse-icon>`:""}</a></span><converse-dropdown class="chatbox-btn btn-group dropstart dropdown--contacts" .items="${S}"></converse-dropdown></div><div class="list-container roster-contacts ${y?"hidden":""}">${w?(0,r.html)`<converse-list-filter @update="${()=>e.requestUpdate()}" .promise="${o.api.waitUntil("rosterInitialized")}" .items="${o._converse.state.roster}" .template="${l.default}" .model="${o._converse.state.roster_filter}"></converse-list-filter>`:""} ${(0,i.repeat)(v,e=>e,t=>{let s=_[t].filter(s=>(0,c.shouldShowContact)(s,t,e.model));return s.sort(c.contactsComparator),s.length?(0,a.default)({contacts:s,name:t}):""})}</div>`}},"./src/plugins/rosterview/templates/roster_filter.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js"),o=s("./src/shared/constants.js");let a=e=>{let t=(0,i.__)("Filter"),s=(0,i.__)("Filter by contact name"),a=(0,i.__)("Filter by group name"),l=(0,i.__)("Filter by status"),d=(0,i.__)("Any"),c=(0,i.__)("Unread"),{offline:u,xa:h,away:m,dnd:f,chat:p,online:g}=o.PRETTY_CHAT_STATUS,_=e.model.get("state"),v=e.model.get("text"),y=e.model.get("type");return(0,r.html)`<form class="controlbox-padded items-filter-form input-button-group ${!e.shouldBeVisible()?"hidden":"fade-in"}" @submit="${t=>e.submitFilter(t)}"><div class="flex-nowrap"><div class="filter-by d-flex flex-nowrap"><converse-icon size="1em" @click="${t=>e.changeTypeFilter(t)}" class="fa fa-user clickable ${"items"===y?"selected":""}" data-type="items" title="${s}"></converse-icon><converse-icon size="1em" @click="${t=>e.changeTypeFilter(t)}" class="fa fa-users clickable ${"groups"===y?"selected":""}" data-type="groups" title="${a}"></converse-icon><converse-icon size="1em" @click="${t=>e.changeTypeFilter(t)}" class="fa fa-circle clickable ${"state"===y?"selected":""}" data-type="state" title="${l}"></converse-icon></div><div class="btn-group"><input .value="${v||""}" @keydown="${t=>e.liveFilter(t)}" class="items-filter form-control ${"state"===y?"hidden":""}" placeholder="${t}"><converse-icon size="1em" class="fa fa-times clear-input ${!v||"state"===y?"hidden":""}" @click="${t=>e.clearFilter(t)}"></converse-icon></div><select class="form-control state-type ${"state"!==y?"hidden":""}" @change="${t=>e.changeChatStateFilter(t)}"><option value="">${d}</option><option ?selected="${"unread_messages"===_}" value="unread_messages">${c}</option><option ?selected="${"online"===_}" value="online">${g}</option><option ?selected="${"chat"===_}" value="chat">${p}</option><option ?selected="${"dnd"===_}" value="dnd">${f}</option><option ?selected="${"away"===_}" value="away">${m}</option><option ?selected="${"xa"===_}" value="xa">${h}</option><option ?selected="${"offline"===_}" value="offline">${u}</option></select></div></form>`}},"./src/plugins/rosterview/templates/roster_item.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u,tplDetailsButton:()=>c,tplRemoveButton:()=>d});var r=s("./src/i18n/index.js"),i=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js"),a=s("./src/shared/chat/utils.js"),l=s("./src/plugins/rosterview/constants.js");function d(e){let t=e.model.getDisplayName(),s=(0,r.__)("Click to remove %1$s as a contact",t);return(0,o.html)`<a class="dropdown-item remove-xmpp-contact" role="button" @click="${t=>e.removeContact(t)}" title="${s}" data-toggle="modal"><converse-icon class="fa fa-trash-alt" size="1em"></converse-icon>${(0,r.__)("Remove")}</a>`}function c(e){let t=e.model.getDisplayName(),s=(0,r.__)("Click to show more details about %1$s",t);return(0,o.html)`<a class="dropdown-item" role="button" @click="${t=>e.showUserDetailsModal(t)}" title="${s}" data-toggle="modal"><converse-icon class="fa fa-id-card" size="1em"></converse-icon>${(0,r.__)("Details")}</a>`}let u=e=>{let t,s,u=i._converse.session.get("bare_jid"),h=e.model.getStatus()||"offline";"online"===h?[t,s]=["fa fa-circle","chat-status-online"]:"dnd"===h?[t,s]=["fa fa-minus-circle","chat-status-busy"]:"away"===h?[t,s]=["fa fa-circle","chat-status-away"]:[t,s]=["fa fa-circle","chat-status-offline"];let m=u===e.model.get("jid"),f=l.STATUSES[h],p=(0,a.getUnreadMsgsDisplay)(e.model),g=e.model.getDisplayName({context:"roster"}),_=e.model.get("jid"),v=m?(0,r.__)("Click to chat with yourself"):(0,r.__)("Click to chat with %1$s (XMPP address: %2$s)",g,_),y=[c(e),...i.api.settings.get("allow_contact_removal")&&!m?[d(e)]:[]];return(0,o.html)`<a class="list-item-link cbox-list-item open-chat ${p?"unread-msgs":""}" title="${v}" href="#" data-jid="${_}" @click="${e.openChat}"><span><converse-avatar .model="${e.model}" class="avatar" name="${e.model.getDisplayName()}" nonce="${e.model.vcard?.get("vcard_updated")}" height="30" width="30"></converse-avatar>${["both","to"].includes(e.model.get("subscription"))?(0,o.html)`<converse-icon title="${f}" color="var(--${s})" size="1em" class="${t} chat-status chat-status--avatar"></converse-icon>`:""} </span>${p?(0,o.html)`<span class="msgs-indicator badge">${p}</span>`:""} <span class="contact-name contact-name--${h} ${p?"unread-msgs":""}">${g}</span> </a><span class="contact-actions"><converse-dropdown class="btn-group dropstart list-item-action" .items="${y}"></converse-dropdown></span>`}},"./src/plugins/rosterview/templates/unsaved-alert.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");let o=e=>e.contact?(0,r.html)`<div class="alert alert-info d-flex flex-column align-items-center mb-0 p-3 text-center"><p class="mb-2">${(0,i.__)("Would you like to add %1$s as a contact?",e.contact.getDisplayName())}</p><div class="btn-group"><button type="button" class="btn btn-sm btn-success" @click="${t=>e.showAddContactModal(t)}">${(0,i.__)("Add")}</button> <button type="button" class="btn btn-sm btn-danger" @click="${t=>e.close(t)}">${(0,i.__)("Dismiss")}</button></div></div>`:""},"./src/plugins/rosterview/templates/unsaved_contact.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/i18n/index.js"),i=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js"),a=s("./src/shared/chat/utils.js"),l=s("./src/plugins/rosterview/templates/roster_item.js");let d=e=>{let t=(0,a.getUnreadMsgsDisplay)(e.model),s=e.model.getDisplayName(),d=e.model.get("jid"),c=(0,r.__)("Click to chat with %1$s (XMPP address: %2$s)",s,d),u=[(0,l.tplDetailsButton)(e),function(e){let t=e.model.getDisplayName(),s=(0,r.__)("Click to add %1$s as a contact",t);return(0,o.html)`<a class="dropdown-item add-contact" role="button" @click="${t=>e.addContact(t)}" title="${s}" data-toggle="modal"><converse-icon class="fa fa-user-plus" size="1.5em"></converse-icon>${(0,r.__)("Save as contact")}</a>`}(e),...i.api.settings.get("allow_contact_removal")?[(0,l.tplRemoveButton)(e)]:[]];return(0,o.html)`<a class="list-item-link cbox-list-item open-chat ${t?"unread-msgs":""}" title="${c}" href="#" data-jid="${d}" @click="${e.openChat}"><span><converse-avatar .model="${e.model}" class="avatar" name="${e.model.getDisplayName()}" nonce="${e.model.vcard?.get("vcard_updated")}" height="30" width="30"></converse-avatar></span>${t?(0,o.html)`<span class="msgs-indicator badge">${t}</span>`:""} <span class="contact-name ${t?"unread-msgs":""}">${s}</span> </a><span class="contact-actions"><converse-dropdown class="btn-group dropstart list-item-action" .items="${u}"></converse-dropdown></span>`}},"./src/plugins/rosterview/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{blockContact:()=>c,contactsComparator:()=>y,declineContactRequest:()=>d,getGroupsAutoCompleteList:()=>j,getJIDsAutoCompleteList:()=>w,getNamesAutoCompleteList:()=>S,groupsComparator:()=>b,highlightRosterItem:()=>h,isContactFiltered:()=>p,populateContactsMap:()=>v,removeContact:()=>l,shouldShowContact:()=>g,shouldShowGroup:()=>_,toggleGroup:()=>m,unblockContact:()=>u});var r=s("./src/i18n/index.js"),i=s("./src/headless/index.js");let{Strophe:o}=i.converse.env,{STATUS_WEIGHTS:a}=i.constants;async function l(e,t=!1){if(!i.api.settings.get("allow_contact_removal"))return;if(!await i.api.confirm((0,r.__)("Confirm"),(0,r.__)("Are you sure you want to remove this contact?")))return!1;let s=await i.api.chats.get(e.get("jid"));s?.close();try{await e.remove(t)}catch(t){i.log.error(t),i.api.alert("error",(0,r.__)("Error"),[(0,r.__)("Sorry, an error occurred while trying to remove %1$s as a contact",e.getDisplayName())])}return!0}async function d(e){let t=i._converse.session.get("domain"),s=await i.api.disco.supports(o.NS.BLOCKING,t),a=await i.api.confirm((0,r.__)("Remove and decline contact request"),[(0,r.__)("Are you sure you want to decline the contact request from %1$s?",e.getDisplayName())],s?[{label:(0,r.__)("Also block this user from sending you further messages"),name:"block",type:"checkbox"}]:[]);if(a){let t=await i.api.chats.get(e.get("jid"));e.unauthorize(),s&&Array.isArray(a)&&a.find(e=>"block"===e.name)?.value==="on"?(i.api.blocklist.add(e.get("jid")),i.api.toast.show("declined-and-blocked",{type:"success",body:(0,r.__)("Contact request declined and user blocked")}),t?.close()):i.api.toast.show("request-declined",{type:"success",body:(0,r.__)("Contact request declined")}),t||e.destroy()}return this}async function c(e){let t=i._converse.session.get("domain");if(!await i.api.disco.supports(o.NS.BLOCKING,t))return!1;let s=(0,r.__)("Do you want to block this contact, so they cannot send you messages?");if(!await i.api.confirm((0,r.__)("Confirm"),s))return!1;(await i.api.chats.get(e.get("jid")))?.close();try{await Promise.all([i.api.blocklist.add(e.get("jid")),e.remove(!0)])}catch(t){i.log.error(t),i.api.alert("error",(0,r.__)("Error"),[(0,r.__)("Sorry, an error occurred while trying to block %1$s",e.getDisplayName())])}}async function u(e){let t=i._converse.session.get("domain");if(!await i.api.disco.supports(o.NS.BLOCKING,t))return!1;let s=(0,r.__)("Do you want to unblock this contact, so they can send you messages?");if(!await i.api.confirm(s))return!1;try{await i.api.blocklist.remove(e.get("jid"))}catch(t){i.log.error(t),i.api.alert("error",(0,r.__)("Error"),[(0,r.__)("Sorry, an error occurred while trying to unblock %1$s",e.getDisplayName())])}}function h(e){i._converse.state.roster?.get(e)?.trigger("highlight")}function m(e,t){e?.preventDefault?.();let{roster:s}=i._converse.state,r=s.state.get("collapsed_groups");r.includes(t)?s.state.save("collapsed_groups",r.filter(e=>e!==t)):s.state.save("collapsed_groups",[...r,t])}function f(e){let t=e instanceof i.Profile?e.getNickname():e.get("nickname"),s=e.get("jid"),r=e.getDisplayName({context:"roster"});return(r=(r=r.includes(s)?r:r.concat(`   ${s}`)).includes(t)?r:r.concat(`   ${t}`)).toLowerCase()}function p(e,t){let s=i._converse.state.roster_filter,r=s.get("type"),o="state"===r?s.get("state").toLowerCase():s.get("text").toLowerCase();if(!o)return!1;if("state"===r)return![i._converse.labels.HEADER_REQUESTING_CONTACTS,i._converse.labels.HEADER_UNREAD].includes(t)&&("unread_messages"===o?0===e.get("num_unread"):"online"===o?["offline","unavailable","dnd","away","xa"].includes(e.getStatus()):!e.getStatus().includes(o));if("items"===r)return!f(e).includes(o)}function g(e,t,s){if(!s.get("filter_visible"))return!0;let r=e.getStatus();return i.api.settings.get("hide_offline_users")&&"offline"===r?("subscribe"===e.get("ask")||"from"===e.get("subscription")||!0===e.get("requesting"))&&!p(e,t):!p(e,t)}function _(e,t){if(!t.get("filter_visible"))return!0;let s=i._converse.state.roster_filter;if("groups"===s.get("type")){let t=s.get("text")?.toLowerCase();if(!t)return!0;if(!e.toLowerCase().includes(t))return!1}return!0}function v(e,t){let{labels:s}=i._converse,r=i.u.unique(t.get("groups")??[]);for(let o of(i.u.isOwnJID(t.get("jid"))&&!r.length?r.push(s.HEADER_UNGROUPED):t.get("requesting")?r.push(s.HEADER_REQUESTING_CONTACTS):"subscribe"===t.get("ask")?r.push(s.HEADER_PENDING_CONTACTS):void 0===t.get("subscription")?r.push(s.HEADER_UNSAVED_CONTACTS):i.api.settings.get("roster_groups")?r.length||r.push(s.HEADER_UNGROUPED):r.push(s.HEADER_CURRENT_CONTACTS),r))e[o]?.includes(t)||(e[o]?e[o].push(t):e[o]=[t]);if(t.get("num_unread")){let r=s.HEADER_UNREAD;e[r]?e[r].push(t):e[r]=[t]}return e}function y(e,t){let s=e.getStatus(),r=t.getStatus();if(a[s]!==a[r])return a[s]<a[r]?-1:1;{let s=e.getDisplayName().toLowerCase(),r=t.getDisplayName().toLowerCase();return s<r?-1:+(s>r)}}function b(e,t){let s={},{HEADER_CURRENT_CONTACTS:r,HEADER_REQUESTING_CONTACTS:o,HEADER_UNGROUPED:a,HEADER_UNREAD:l,HEADER_PENDING_CONTACTS:d,HEADER_UNSAVED_CONTACTS:c}=i._converse.labels;s[l]=0,s[c]=1,s[o]=2,s[r]=3,s[a]=4,s[d]=5;let u=Object.keys(s),h=u.includes(e),m=u.includes(t);return h||m?h&&m?s[e]<s[t]?-1:+(s[e]>s[t]):!h&&m?s[r]<s[t]?-1:+(s[r]>s[t]):h&&!m?s[e]<s[r]?-1:+(s[e]>s[r]):void 0:e.toLowerCase()<t.toLowerCase()?-1:+(e.toLowerCase()>t.toLowerCase())}function j(){return[...new Set(i._converse.state.roster.reduce((e,t)=>e.concat(t.get("groups")),[]).filter(e=>e))]}function w(){return[...new Set([...i._converse.state.roster.map(e=>o.getDomainFromJid(e.get("jid"))),i._converse.session.get("domain")])]}async function S(e){let t,s=`${i.api.settings.get("xhr_user_search_url")}q=${encodeURIComponent(e)}`;try{t=await fetch(s,{mode:"cors",headers:{Accept:"text/json"}})}catch(t){return i.log.error(`Failed to fetch names for query "${e}"`),i.log.error(t),[]}let r=await t.json();return Array.isArray(r)?r.map(e=>({label:`${e.fullname} <${e.jid}>`,value:`${e.fullname} <${e.jid}>`,...e})):(i.log.error('Invalid JSON returned"'),[])}Object.assign(i.u,{rosterview:{removeContact:l,declineContactRequest:d,blockContact:c,unblockContact:u,highlightRosterItem:h,toggleGroup:m,getFilterCriteria:f,isContactFiltered:p,shouldShowContact:g,shouldShowGroup:_,populateContactsMap:v,contactsComparator:y,groupsComparator:b,getGroupsAutoCompleteList:j,getJIDsAutoCompleteList:w,getNamesAutoCompleteList:S}})},"./src/plugins/singleton/index.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js");s("./src/plugins/singleton/singleton.scss"),r.converse.plugins.add("converse-singleton",{enabled:e=>e.api.settings.get("singleton"),initialize(){r.api.settings.extend({allow_logout:!1,allow_muc_invitations:!1,hide_muc_server:!0});let e=r.api.settings.get("auto_join_rooms"),t=r.api.settings.get("auto_join_private_chats");if(!Array.isArray(e)&&!Array.isArray(t))throw Error("converse-singleton: auto_join_rooms must be an Array");if(0===e.length&&0===t.length)throw Error("If you set singleton set to true, you need to specify auto_join_rooms or auto_join_private_chats");if(e.length>0&&t.length>0)throw Error("It doesn't make sense to have singleton set to true and auto_join_rooms or auto_join_private_chats set to more then one, since only one chat room may be open at any time.")}})},"./src/shared/autocomplete/autocomplete.js":function(e,t,s){"use strict";s.r(t),s.d(t,{AutoComplete:()=>c,default:()=>u});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/@converse/skeletor/dist/skeletor.js"),o=s("./src/headless/index.js"),a=s("./src/shared/autocomplete/suggestion.js"),l=s("./src/shared/autocomplete/utils.js");let{siblingIndex:d}=o.u;class c extends(0,i.EventEmitter)(Object){constructor(e,t={}){super(),this.suggestions=[],this.is_opened=!1,this.match_current_word=!1,this.sort=!1===t.sort?null:l.SORT_BY_QUERY_POSITION,this.filter=l.FILTER_CONTAINS,this.ac_triggers=[],this.include_triggers=[],this.min_chars=2,this.max_items=10,this.auto_first=!1,this.data=(e,t)=>e,this.item=l.getAutoCompleteItem,o.u.hasClass("suggestion-box",e)?this.container=e:this.container=e.querySelector(".suggestion-box"),this.input=this.container.querySelector(".suggestion-box__input"),this.input.setAttribute("aria-autocomplete","list"),this.ul=this.container.querySelector(".suggestion-box__results"),this.status=this.container.querySelector(".suggestion-box__additions"),Object.assign(this,t),this.index=-1,this.bindEvents(),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||t.list||[]}bindEvents(){this._events={input:{blur:()=>this.close({reason:"blur"})},form:{submit:()=>this.close({reason:"submit"})},ul:{mousedown:e=>this.onMouseDown(e),mouseover:e=>this.onMouseOver(e)}},l.helpers.bind(this.input,this._events.input),l.helpers.bind(this.input.form,this._events.form),l.helpers.bind(this.ul,this._events.ul)}set list(e){if(Array.isArray(e)||"function"==typeof e)this._list=e;else if("string"==typeof e&&e.includes(","))this._list=e.split(/\s*,\s*/);else{let t=l.helpers.getElement(e)?.children||[];this._list=Array.from(t).filter(e=>!e.disabled).map(e=>{let t=e.textContent.trim(),s=e.value||t,r=e.label||t;return""!==s?{label:r,value:s}:null}).filter(e=>e)}document.activeElement===this.input&&this.evaluate()}get list(){return this._list}get selected(){return this.index>-1}get opened(){return this.is_opened}close(e){this.opened&&(this.ul.setAttribute("hidden",""),this.is_opened=!1,this.index=-1,this.trigger("suggestion-box-close",e||{}))}insertValue(e){this.match_current_word?o.u.replaceCurrentWord(this.input,e.value):this.input.value=e.value}open(){this.ul.removeAttribute("hidden"),this.is_opened=!0,this.auto_first&&-1===this.index&&this.goto(0),this.trigger("suggestion-box-open")}destroy(){l.helpers.unbind(this.input,this._events.input),l.helpers.unbind(this.input.form,this._events.form),this.input.removeAttribute("aria-autocomplete")}next(){let e=this.ul.children.length;this.goto(this.index<e-1?this.index+1:e?0:-1)}previous(){let e=this.ul.children.length,t=this.index-1;this.goto(this.selected&&-1!==t?t:e-1)}goto(e,t=!0){let s=Array.from(this.ul.children).filter(e=>e instanceof HTMLElement);this.selected&&s[this.index].setAttribute("aria-selected","false"),this.index=e,e>-1&&s.length>0&&(s[e].setAttribute("aria-selected","true"),s[e].focus(),this.status.textContent=s[e].textContent,t&&(this.ul.scrollTop=s[e].offsetTop-this.ul.clientHeight+s[e].clientHeight),this.trigger("suggestion-box-highlight",{text:this.suggestions[this.index]}))}select(e){if(e?this.index=d(e):e=this.ul.children[this.index],e){let e=this.suggestions[this.index];this.insertValue(e),this.close({reason:"select"}),this.auto_completing=!1,this.trigger("suggestion-box-selectcomplete",{text:e,suggestion:e})}}onMouseOver(e){let t=o.u.ancestor(e.target,"li");if(t){let e=Array.prototype.slice.call(this.ul.children).indexOf(t);this.goto(e,!1)}}onMouseDown(e){if(0!==e.button)return;let t=o.u.ancestor(e.target,"li");t&&(e.preventDefault(),this.select(t))}onKeyDown(e){if(this.opened){if([o.converse.keycodes.ENTER,o.converse.keycodes.TAB].includes(e.key)&&this.selected)return e.preventDefault(),e.stopPropagation(),this.select(),!0;else if(e.key===o.converse.keycodes.ESCAPE)return this.close({reason:"esc"}),!0;else if([o.converse.keycodes.UP_ARROW,o.converse.keycodes.DOWN_ARROW].includes(e.key))return e.preventDefault(),e.stopPropagation(),this[e.key===o.converse.keycodes.UP_ARROW?"previous":"next"](),!0}if(![o.converse.keycodes.SHIFT,o.converse.keycodes.META,o.converse.keycodes.ESCAPE,o.converse.keycodes.ALT].includes(e.key)){if(this.ac_triggers.includes(e.key)){if("Tab"===e.key){if(e.shiftKey||this.min_chars>0&&""===this.input.value)return;e.preventDefault()}this.auto_completing=!0}else if("Backspace"===e.key){let t=e.target,s=o.u.getCurrentWord(t,t.selectionEnd-1);l.helpers.isMention(s,this.ac_triggers)&&(this.auto_completing=!0)}}}async evaluate(e){if(this.selected&&e&&(e.key===o.converse.keycodes.UP_ARROW||e.key===o.converse.keycodes.DOWN_ARROW))return;let t=this.match_current_word?o.u.getCurrentWord(this.input):this.input.value,s=l.helpers.isMention(t,this.ac_triggers);s&&!this.include_triggers.includes(e.key)&&(t=o.u.isMentionBoundary(t[0])?t.slice(2):t.slice(1));let i=t.length&&t.length>=this.min_chars;if(s||i){this.auto_completing=!0;let e="function"==typeof this._list?await this._list(t):this._list;if(0===e.length||!this.auto_completing)return void this.close({reason:"nomatches"});this.index=-1,this.suggestions=e.map(e=>new a.default(this.data(e,t),t)).filter(({value:e})=>this.filter(e,t)),this.sort&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.max_items),(0,r.render)((0,r.html)`${this.suggestions.map(e=>this.item(e,t))}`,this.ul),0===this.suggestions.length?this.close({reason:"nomatches"}):this.open()}else this.close({reason:"nomatches"}),s||(this.auto_completing=!1)}}let u=c},"./src/shared/autocomplete/component.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/shared/autocomplete/autocomplete.js"),i=s("./src/shared/components/element.js"),o=s("./src/shared/autocomplete/utils.js"),a=s("./src/headless/index.js"),l=s("./node_modules/lit/index.js");class d extends i.CustomElement{static get properties(){return{auto_evaluate:{type:Boolean},auto_first:{type:Boolean},autofocus:{type:Boolean},data:{type:Function},error_message:{type:String},filter:{type:String},getAutoCompleteList:{type:Function},include_triggers:{type:String},list:{type:Array},min_chars:{type:Number},name:{type:String},placeholder:{type:String},position:{type:String},renderItem:{type:Function},required:{type:Boolean},triggers:{type:String},validate:{type:Function},value:{type:String}}}constructor(){super(),this.auto_evaluate=!0,this.auto_first=!1,this.data=e=>e,this.error_message="",this.filter="contains",this.getAutoCompleteList=null,this.include_triggers="",this.list=null,this.match_current_word=!1,this.max_items=10,this.min_chars=1,this.name="",this.placeholder="",this.position="above",this.renderItem=o.getAutoCompleteItem,this.required=!1,this.triggers="",this.validate=null,this.value="",this.evaluate=a.u.debounce(e=>{this.auto_evaluate&&this.auto_complete.evaluate(e)},250)}render(){let e=`suggestion-box__results--${this.position}`;return(0,l.html)`<div class="suggestion-box suggestion-box__name"><ul class="suggestion-box__results ${e}" hidden=""></ul><input .validate="${this.validate}" ?autofocus="${this.autofocus}" ?required="${this.required}" @change="${this.onChange}" @keydown="${this.onKeyDown}" @input="${this.evaluate}" autocomplete="off" class="form-control suggestion-box__input ${this.error_message?"is-invalid error":""}" name="${this.name}" placeholder="${this.placeholder}" type="text" value="${this.value}"> <span class="suggestion-box__additions visually-hidden" role="status" aria-live="assertive" aria-relevant="additions"></span></div>${this.error_message?(0,l.html)`<div class="invalid-feedback">${this.error_message}</div>`:""}`}firstUpdated(){this.auto_complete=new r.default(this.firstElementChild,{ac_triggers:this.triggers.split(" "),auto_first:this.auto_first,filter:"contains"==this.filter?o.FILTER_CONTAINS:o.FILTER_STARTSWITH,include_triggers:[],list:this.list??(e=>this.getAutoCompleteList(e)),data:this.data,match_current_word:!0,max_items:this.max_items,min_chars:this.min_chars,item:this.renderItem}),this.auto_complete.on("suggestion-box-selectcomplete",({suggestion:e})=>{this.auto_completing=!1,this.dispatchEvent(new CustomEvent("autocomplete-select",{detail:{suggestion:e},bubbles:!0,composed:!0}))})}onKeyDown(e){this.auto_complete.onKeyDown(e)}async onChange(){let e=this.querySelector("input");return this.error_message=await this.validate?.(e.value),this.error_message&&this.requestUpdate(),this}}a.api.elements.define("converse-autocomplete",d)},"./src/shared/autocomplete/index.js":function(e,t,s){"use strict";s.r(t),s("./src/shared/autocomplete/component.js");var r=s("./src/shared/autocomplete/autocomplete.js"),i=s("./src/headless/index.js");s("./src/shared/autocomplete/styles/_autocomplete.scss");let o={AutoComplete:r.default};Object.assign(i._converse,o),Object.assign(i._converse.exports,o)},"./src/shared/autocomplete/suggestion.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=class extends String{constructor(e,t){super();let s=Array.isArray(e)?{label:e[0],value:e[1]}:"object"==typeof e&&"label"in e&&"value"in e?e:{label:e,value:e};this.label=s.label||s.value,this.value=s.value,this.query=t,this.data=e}get lenth(){return this.label.length}toString(){return`${this.label}`}valueOf(){return this.toString()}}},"./src/shared/autocomplete/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{FILTER_CONTAINS:()=>l,FILTER_STARTSWITH:()=>d,SORT_BY_LENGTH:()=>c,SORT_BY_QUERY_POSITION:()=>u,getAutoCompleteItem:()=>h,helpers:()=>o,regExpEscape:()=>a});var r=s("./node_modules/lit/index.js");let i=s("./src/headless/index.js").converse.env.utils,o={getElement:(e,t)=>"string"==typeof e?(t||document).querySelector(e):e||null,bind(e,t){if(e)for(var s in t){if(!Object.prototype.hasOwnProperty.call(t,s))continue;let r=t[s];s.split(/\s+/).forEach(t=>e.addEventListener(t,r))}},unbind(e,t){if(e)for(var s in t){if(!Object.prototype.hasOwnProperty.call(t,s))continue;let r=t[s];s.split(/\s+/).forEach(t=>e.removeEventListener(t,r))}},isMention:(e,t)=>t.includes(e[0])||i.isMentionBoundary(e[0])&&t.includes(e[1])};function a(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")}function l(e,t){return RegExp(a(t.trim()),"i").test(e)}function d(e,t){return RegExp("^"+a(t.trim()),"i").test(e)}function c(e,t){return e.length!==t.length?e.length-t.length:e<t?-1:1}let u=function(e,t){let s=e.query.toLowerCase(),r=e.label.toLowerCase().indexOf(s),i=t.label.toLowerCase().indexOf(s);return r===i?c(e,t):(-1===r?1/0:r)<(-1===i?1/0:i)?-1:1};function h(e,t){let s=RegExp("("+a(t=t.trim())+")","ig"),i=t?e.split(s):[e];return(0,r.html)`<li aria-selected="false">${i.map(e=>t&&e.match(s)?(0,r.html)`<mark>${e}</mark>`:e)}</li>`}Object.assign(i,{autocomplete:{regExpEscape:a,getAutoCompleteItem:h}})},"./src/shared/avatar/avatar.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/until.js"),o=s("./src/headless/index.js"),a=s("./src/i18n/index.js"),l=s("./src/shared/components/element.js"),d=s("./src/shared/avatar/templates/avatar.js");s("./src/shared/avatar/avatar.scss");class c extends l.CustomElement{static get properties(){return{model:{type:Object},pickerdata:{type:Object},name:{type:String},width:{type:String},height:{type:String},nonce:{type:String}}}constructor(){super(),this.model=null,this.pickerdata=null,this.width=36,this.height=36,this.name=""}render(){let e,t,s;if(this.pickerdata?(e=this.pickerdata.image_type,s=this.pickerdata.data_uri):(e=this.model?.vcard?.get("image_type"),t=this.model?.vcard?.get("image")),e&&(t||s))return(0,d.default)({classes:this.getAttribute("class"),height:this.height,width:this.width,image:s||`data:${e};base64,${t}`,image_type:e,alt_text:(0,a.__)("The profile picture of %1$s",this.name)});let o=`
            width: ${this.width}px;
            height: ${this.height}px;
            font: ${this.width/2}px Arial;
            line-height: ${this.height}px;`,l=this.model.getAvatarStyle(o);return(0,r.html)`<div class="avatar-initials" style="${(0,i.until)(l,"background-color: gray;"+o)}" aria-label="${this.name}">${this.getInitials(this.name)}</div>`}getInitials(e){let t=e?.split(" ");return t?.length>1?t[0].charAt(0).toUpperCase()+t[t.length-1].charAt(0).toUpperCase():t?.length===1?t[0].charAt(0).toUpperCase():""}}o.api.elements.define("converse-avatar",c)},"./src/shared/avatar/templates/avatar.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js");let i=(e,t)=>e.startsWith("data:")?e:`data:${t};base64,${e}`,o=e=>e.image?(0,r.html)`<svg xmlns="http://www.w3.org/2000/svg" class="avatar ${e.classes}" width="${e.width}" height="${e.height}" aria-label="${e.alt_text}" role="${e.alt_text?r.nothing:"presentation"}"><image width="${e.width}" height="${e.height}" preserveAspectRatio="xMidYMid meet" href="${i(e.image,e.image_type)}"/></svg>`:""},"./src/shared/chat/baseview.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/shared/constants.js"),a=s("./src/shared/chat/utils.js");let{CHATROOMS_TYPE:l,INACTIVE:d}=r.constants;class c extends i.CustomElement{static get properties(){return{jid:{type:String},model:{state:!0}}}constructor(){super(),this.jid=null,this.model=null,this.viewportMediaQuery=window.matchMedia(`(max-width: ${o.MOBILE_CUTOFF}px)`),this.renderOnViewportChange=()=>this.requestUpdate()}connectedCallback(){super.connectedCallback(),this.viewportMediaQuery.addEventListener("change",this.renderOnViewportChange)}disconnectedCallback(){super.disconnectedCallback(),r._converse.state.chatboxviews.remove(this.jid,this),this.viewportMediaQuery.removeEventListener("change",this.renderOnViewportChange)}updated(e){super.updated(e),e.has("jid")&&this.model&&this.jid!==this.model.get("jid")&&(this.stopListening(),r._converse.state.chatboxviews.remove(this.model.get("jid"),this),this.initialize())}close(e){return e?.preventDefault?.(),this.model?.close(e)}maybeFocus(){r.api.settings.get("auto_focus")&&this.focus()}focus(){let e=this.getElementsByClassName("chat-textarea")[0];return e&&document.activeElement!==e&&e.focus(),this}getBottomPanel(){return this.model.get("type")===l?this.querySelector("converse-muc-bottom-panel"):this.querySelector("converse-chat-bottom-panel")}getMessageForm(){return this.model.get("type")===l?this.querySelector("converse-muc-message-form"):this.querySelector("converse-message-form")}scrollDown(e){e?.preventDefault?.(),e?.stopPropagation?.(),this.model.ui.get("scrolled")&&this.model.ui.set({scrolled:!1}),(0,a.onScrolledDown)(this.model)}onWindowStateChanged(){document.hidden?this.model.setChatState(d,{silent:!0}):this.model.isHidden()||this.model.clearUnreadMsgCounter()}}},"./src/shared/chat/chat-content.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/templates/spinner.js"),a=s("./src/shared/components/element.js"),l=s("./src/shared/chat/utils.js");s("./src/shared/chat/message-history.js"),s("./src/shared/chat/styles/chat-content.scss");class d extends a.CustomElement{constructor(){super(),this.model=null,this.scrollTop=0,this.scroll_debounce=null,this.window_top=0,this.window_bottom=0,this.scrollHandler=e=>{this.mark_scrolled_debounce&&clearTimeout(this.scroll_debounce),this.mark_scrolled_debounce=setTimeout(()=>{this.#c(e)},250),requestAnimationFrame(()=>this.#u())}}static get properties(){return{model:{type:Object},window_top:{state:!0},window_bottom:{state:!0}}}async initialize(){await this.model.initialized,this.listenTo(this.model.messages,"add",()=>this.#h()),this.listenTo(this.model.messages,"remove",()=>this.#h()),this.listenTo(this.model.messages,"reset",()=>this.#h()),this.listenTo(this.model.messages,"change",()=>this.requestUpdate()),this.listenTo(this.model.messages,"rendered",()=>this.requestUpdate()),this.listenTo(this.model,"historyPruned",()=>this.#u()),this.listenTo(this.model.notifications,"change",()=>this.requestUpdate()),this.listenTo(this.model.ui,"change",()=>this.requestUpdate()),this.listenTo(this.model.ui,"change:scrolled",()=>this.scrollDown()),this.window_bottom=this.model.messages.length-1,this.window_top=Math.max(0,this.window_bottom-100),this.requestUpdate()}render(){return this.model?(0,r.html)`<div class="chat-content__messages" @scroll="${e=>this.scrollHandler(e)}"><div class="chat-content__notifications">${this.model.getNotificationsText()}</div><converse-message-history .model="${this.model}" .messages="${this.model.messages.slice(this.window_top,this.window_bottom+1)}"></converse-message-history></div>${this.model.ui?.get("chat-content-spinner-top")?(0,o.default)():""}`:""}#h(){this.#u(),this.requestUpdate()}#c(e){let t=!0,s=e.target,r=0===Math.floor(s.scrollTop),o=Math.ceil(s.clientHeight-s.scrollTop)>=s.scrollHeight-Math.ceil(s.scrollHeight/20);r?(t=!1,(0,l.onScrolledDown)(this.model)):o&&i.api.trigger("chatBoxScrolledUp",s),this.model.get("scolled")!==t&&this.model.ui.set({scrolled:t})}#u(){let e=this.model.messages.length,t=this.querySelector(".chat-content__messages"),s=Math.ceil(t.scrollHeight/5);if(Math.ceil(t.clientHeight-t.scrollTop)>=t.scrollHeight-s){this.window_top=Math.max(0,this.window_top-5),this.window_bottom=this.window_top+100;return}if(0===Math.floor(t.scrollTop)){this.window_bottom=e-1,this.window_top=Math.max(0,this.window_bottom-100);return}if(Math.floor(Math.abs(t.scrollTop))<s){this.window_bottom=Math.min(e-1,this.window_bottom+5),this.window_top=Math.max(0,this.window_bottom-100);return}}scrollDown(){if(!this.model.ui.get("scrolled")){if(this.scrollTo){let e=this.scrollTop?"smooth":"auto";this.scrollTo({top:0,behavior:e})}else this.scrollTop=0;i.api.trigger("chatBoxScrolledDown",{chatbox:this.model})}}}i.api.elements.define("converse-chat-content",d)},"./src/shared/chat/emoji-dropdown.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),a=s("./src/shared/components/dropdown.js"),l=s("./node_modules/lit/directives/until.js");let{CHATROOMS_TYPE:d}=i.constants,{initStorage:c}=i.u;class u extends a.default{static get properties(){return{icon_classes:{type:String},items:{type:Array},model:{type:Object}}}constructor(){super(),this.id=i.u.getUniqueId(),this.render_emojis=!1,this.state=null,this.model=null,this.addEventListener("shown.bs.dropdown",()=>this.onShown())}initModel(){return this.init_promise||(this.init_promise=(async()=>{await i.api.emojis.initialize();let e=i._converse.session.get("bare_jid"),t=`converse.emoji-${e}-${this.model.get("jid")}`;this.state=new i.EmojiPicker({id:t}),c(this.state,t),await new Promise(e=>this.state.fetch({success:e,error:e})),this.state.set({autocompleting:null,ac_position:null})})()),this.init_promise}render(){let e=this.model.get("type")===d;return(0,r.html)`<button class="btn dropdown-toggle dropdown-toggle--no-caret toggle-emojis" type="button" id="${this.id}" title="${(0,o.__)("Insert emojis")}" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><converse-icon color="var(${e?"--muc-color":"--chat-color"})" class="fa fa-smile" path-prefix="${i.api.settings.get("assets_path")}" size="1em"></converse-icon></button><ul class="dropdown-menu" aria-labelledby="${this.id}"><li>${(0,l.until)(this.initModel().then(()=>(0,r.html)`<converse-emoji-picker .state="${this.state}" .model="${this.model}" @emojiSelected="${()=>this.dropdown.hide()}" ?render_emojis="${this.render_emojis}" current_category="${this.state.get("current_category")||""}" current_skintone="${this.state.get("current_skintone")||""}" query="${this.state.get("query")||""}"></converse-emoji-picker>`),"")}</li></ul>`}connectedCallback(){super.connectedCallback(),this.render_emojis=!1}async onShown(){await this.initModel(),this.render_emojis||(this.render_emojis=!0,this.requestUpdate(),await this.updateComplete),setTimeout(()=>this.querySelector(".emoji-search")?.focus())}}i.api.elements.define("converse-emoji-dropdown",u)},"./src/shared/chat/emoji-picker-content.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/shared/components/element.js"),a=s("./src/shared/chat/templates/emoji-picker.js"),l=s("./src/shared/chat/utils.js"),d=s("./src/shared/autocomplete/utils.js");let{sizzle:c}=i.converse.env;class u extends o.CustomElement{static get properties(){return{search_results:{type:Array},current_skintone:{type:String},model:{type:Object},query:{type:String}}}constructor(){super(),this.model=null,this.current_skintone=null,this.query=null,this.search_results=null}render(){let e={current_skintone:this.current_skintone,insertEmoji:e=>this.insertEmoji(e),query:this.query,search_results:this.search_results,shouldBeHidden:e=>this.shouldBeHidden(e)};return(0,r.html)`<div class="emoji-picker__lists">${(0,a.tplSearchResults)(e)} ${(0,a.tplAllEmojis)(e)}</div>`}firstUpdated(){this.initIntersectionObserver()}initIntersectionObserver(){if(window.IntersectionObserver){if(this.observer)this.observer.disconnect();else{let e={root:this.querySelector(".emoji-picker__lists"),threshold:[.1]};this.observer=new IntersectionObserver(e=>this.setCategoryOnVisibilityChange(e),e)}c(".emoji-picker",this).forEach(e=>this.observer.observe(e))}}setCategoryOnVisibilityChange(e){let t,s=this.parentElement.navigator.selected,r=e.filter(e=>e.target.contains(s)).pop();if((t=r||e.reduce((e,t)=>t.intersectionRatio>=(e?.intersectionRatio||0)?t:e,null))&&t.isIntersecting){let e=t.target.getAttribute("data-category");e!==this.model.get("current_category")&&(this.parentElement.preserve_scroll=!0,i.u.safeSave(this.model,{current_category:e}))}}insertEmoji(e){e.preventDefault(),e.stopPropagation();let t=e.target,s="IMG"===t.nodeName?t.parentElement:t;this.parentElement.selectEmoji(s.getAttribute("data-emoji"))}shouldBeHidden(e){if(e.includes("_tone")){if(!this.current_skintone||!e.includes(this.current_skintone))return!0}else if(this.current_skintone&&(0,l.getTonedEmojis)().includes(e))return!0;return!(!this.query||(0,d.FILTER_CONTAINS)(e,this.query))}}i.api.elements.define("converse-emoji-picker-content",u)},"./src/shared/chat/emoji-picker.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/lodash-es/debounce.js"),i=s("./src/headless/index.js"),o=s("./src/shared/dom-navigator/index.js"),a=s("./src/shared/components/element.js"),l=s("./src/shared/autocomplete/utils.js"),d=s("./src/shared/chat/utils.js"),c=s("./src/shared/chat/templates/emoji-picker.js");s("./src/shared/chat/emoji-picker-content.js"),s("./src/shared/chat/emoji-dropdown.js"),s("./src/shared/chat/styles/emoji.scss");let{KEYCODES:u}=i.constants;class h extends a.CustomElement{static get properties(){return{current_category:{type:String,reflect:!0},current_skintone:{type:String,reflect:!0},model:{type:Object},query:{type:String,reflect:!0},state:{type:Object},render_emojis:{type:Boolean}}}constructor(){super(),this.state=null,this.model=null,this.query="",this.render_emojis=null,this._search_results=[],this.debouncedFilter=(0,r.default)(e=>this.state.set({query:e.value}),250)}initialize(){super.initialize(),this.dropdown=this.closest("converse-emoji-dropdown")}firstUpdated(e){super.firstUpdated(e),this.listenTo(this.state,"change",e=>this.onModelChanged(e.changed)),this.initArrowNavigation()}get search_results(){return this._search_results}set search_results(e){this._search_results=e,this.requestUpdate()}render(){return(0,c.tplEmojiPicker)(this,{current_category:this.current_category,current_skintone:this.current_skintone,onCategoryPicked:e=>this.chooseCategory(e),onSearchInputFocus:()=>this.disableArrowNavigation(),onSearchInputKeyDown:e=>this.onSearchInputKeyDown(e),onSkintonePicked:e=>this.chooseSkinTone(e),query:this.query,search_results:this.search_results,render_emojis:this.render_emojis,sn2Emoji:e=>i.u.shortnamesToEmojis(this.getTonedShortname(e))})}updated(e){e.has("query")&&this.updateSearchResults(e),e.has("current_category")&&this.setScrollPosition()}onModelChanged(e){"current_category"in e&&(this.current_category=e.current_category),"current_skintone"in e&&(this.current_skintone=e.current_skintone),"query"in e&&(this.query=e.query)}setScrollPosition(){if(this.preserve_scroll){this.preserve_scroll=!1;return}let e=this.querySelector(".emoji-lists__container--browse"),t=this.querySelector(`#emoji-picker-${this.current_category}`);t instanceof HTMLElement&&(e.scrollTop=t.offsetTop-3*t.offsetHeight+4)}updateSearchResults(e){let t=e.get("query"),s=l.FILTER_CONTAINS;if(this.query)if(this.query===t)return this.search_results;else t&&this.query.includes(t)?this.search_results=this.search_results.filter(e=>s(e.sn,this.query)):this.search_results=i.converse.emojis.list.filter(e=>s(e.sn,this.query));else this.search_results.length&&(this.search_results=[])}registerEvents(){this.onKeyDown=e=>this.#m(e),this.dropdown.addEventListener("hide.bs.dropdown",()=>this.onDropdownHide()),this.addEventListener("keydown",this.onKeyDown)}connectedCallback(){super.connectedCallback(),this.registerEvents()}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown),this.disableArrowNavigation(),super.disconnectedCallback()}#m(e){this.navigator&&i.u.isVisible(this)&&(e.key===u.ENTER?this.onEnterPressed(e):e.key!==u.DOWN_ARROW||this.navigator.enabled||this.enableArrowNavigation(e))}onDropdownHide(){this.disableArrowNavigation(),this.dispatchEvent(new CustomEvent("emojipickerblur",{bubbles:!0}))}setCategoryForElement(e){let t=this.current_category,s=e?.getAttribute("data-category")||t;t!==s&&this.state.save({current_category:s})}selectEmoji(e){let t=this.state.get("autocompleting"),s=this.state.get("ac_position");this.state.set({autocompleting:null,query:"",ac_position:null}),this.disableArrowNavigation();let r=this.model.get("jid");this.dispatchEvent(new CustomEvent("emojiSelected",{bubbles:!0,detail:{value:e,autocompleting:t,ac_position:s,jid:r}}))}chooseSkinTone(e){e.preventDefault(),e.stopPropagation();let t=e.target,s=("IMG"===t.nodeName?t.parentElement:t).getAttribute("data-skintone").trim();this.current_skintone===s?this.state.save({current_skintone:""}):this.state.save({current_skintone:s})}chooseCategory(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation();let t=e.target??e.relatedTarget,s=t.matches("li")?t:i.u.ancestor(t,"li");this.setCategoryForElement(s),this.navigator.select(s),this.navigator.enabled||this.navigator.enable()}onSearchInputKeyDown(e){let t=e.target;if(e.key===u.TAB)if(t.value){e.preventDefault();let s=i.converse.emojis.shortnames.find(e=>(0,l.FILTER_CONTAINS)(e,t.value));s&&this.state.set({query:s})}else this.navigator.enabled||this.enableArrowNavigation(e);else e.key!==u.DOWN_ARROW||this.navigator.enabled?e.key!==u.ENTER&&e.key!==u.DOWN_ARROW&&this.debouncedFilter(t):this.enableArrowNavigation(e)}onEnterPressed(e){e.preventDefault(),e.stopPropagation();let t=e.target;i.converse.emojis.shortnames.includes(t.value)?this.selectEmoji(t.value):1===this.search_results.length?this.selectEmoji(this.search_results[0].sn):this.navigator.selected&&this.navigator.selected.matches(".insert-emoji")?this.selectEmoji(this.navigator.selected.getAttribute("data-emoji")):this.navigator.selected&&this.navigator.selected.matches(".emoji-category")&&this.chooseCategory(new MouseEvent("click",{relatedTarget:this.navigator.selected}))}getTonedShortname(e){return(0,d.getTonedEmojis)().includes(e)&&this.current_skintone?`${e.slice(0,e.length-1)}_${this.current_skintone}:`:e}initArrowNavigation(){if(!this.navigator){let e="li:not(.hidden):not(.emoji-skintone), .emoji-search",t={jump_to_picked:".emoji-category",jump_to_picked_selector:".emoji-category.picked",jump_to_picked_direction:o.DOMNavigator.DIRECTION.down,picked_selector:".picked",scroll_container:this.querySelector(".emoji-picker__lists"),getSelector:t=>{if(t!==o.DOMNavigator.DIRECTION.down)return e;{let t=this.navigator.selected&&this.navigator.selected.getAttribute("data-category");return t?`ul[data-category="${t}"] li:not(.hidden):not(.emoji-skintone), .emoji-search`:e}},onSelected:e=>{e.matches(".insert-emoji")&&this.setCategoryForElement(e.parentElement),e.matches(".insert-emoji, .emoji-category")&&e.firstElementChild.focus(),e.matches(".emoji-search")&&e.focus()}};this.navigator=new o.DOMNavigator(this,t)}}disableArrowNavigation(){this.navigator?.disable()}enableArrowNavigation(e){e?.preventDefault?.(),e?.stopPropagation?.(),this.disableArrowNavigation(),this.navigator.enable(),this.navigator.handleKeydown(e)}}i.api.elements.define("converse-emoji-picker",h)},"./src/shared/chat/help-messages.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d}),s("./src/shared/components/icons.js");var r=s("./node_modules/dompurify/dist/purify.es.mjs"),i=s("./src/shared/components/element.js"),o=s("./src/headless/index.js"),a=s("./node_modules/lit/index.js"),l=s("./node_modules/lit/directives/unsafe-html.js");class d extends i.CustomElement{constructor(){super(),this.messages=[],this.model=null,this.type=null}static get properties(){return{chat_type:{type:String},messages:{type:Array},model:{type:Object},type:{type:String}}}render(){let e=new Date().toISOString();return[(0,a.html)`<converse-icon class="fas fa-times close-chat-help" @click="${this.close}" path-prefix="${o.api.settings.get("assets_path")}" size="1em"></converse-icon>`,...this.messages.map(t=>this.renderHelpMessage({isodate:e,markup:r.default.sanitize(t,{ALLOWED_TAGS:["strong"]})}))]}close(){this.model.set({show_help_messages:!1})}renderHelpMessage(e){return(0,a.html)`<div class="message chat-${this.type}" data-isodate="${e.isodate}">${(0,l.unsafeHTML)(e.markup)}</div>`}}o.api.elements.define("converse-chat-help",d)},"./src/shared/chat/message-actions.js":function(e,t,s){"use strict";s.r(t);var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/until.js"),o=s("./src/headless/index.js"),a=s("./src/shared/components/element.js"),l=s("./src/i18n/index.js"),d=s("./src/utils/url.js");s("./src/shared/chat/styles/message-actions.scss");let{getMediaURLs:c}=o.u,{CHATROOMS_TYPE:u}=o.constants;class h extends a.CustomElement{static get properties(){return{is_retracted:{type:Boolean},model:{type:Object}}}constructor(){super(),this.model=null,this.is_retracted=null}initialize(){let e=o.api.settings.get();this.listenTo(e,"change:allowed_audio_domains",()=>this.requestUpdate()),this.listenTo(e,"change:allowed_image_domains",()=>this.requestUpdate()),this.listenTo(e,"change:allowed_video_domains",()=>this.requestUpdate()),this.listenTo(e,"change:render_media",()=>this.requestUpdate()),this.listenTo(this.model,"change",()=>this.requestUpdate()),this.listenTo(this.model.chatbox.features,"change:moderated",()=>this.requestUpdate()),this.listenTo(this.model.chatbox.occupants,"add",this.updateIfOwnOccupant),this.listenTo(this.model.chatbox.occupants,"change:role",this.updateIfOwnOccupant),this.listenTo(this.model.chatbox.session,"change:connection_status",()=>this.requestUpdate())}updateIfOwnOccupant(e){let t=o._converse.session.get("bare_jid");e.get("jid")===t&&this.requestUpdate()}render(){return(0,r.html)`${(0,i.until)(this.renderActions(),"")}`}async renderActions(){if(!this.model.collection)return"";let e=(await this.getActionButtons()).map(e=>h.getActionsDropdownItem(e));return e.length?(0,r.html)`<converse-dropdown class="chat-msg__actions btn-group dropstart" .items="${e}"></converse-dropdown>`:""}static getActionsDropdownItem(e){return(0,r.html)`<button type="button" class="dropdown-item chat-msg__action ${e.button_class}" @click="${e.handler}"><converse-icon class="${e.icon_class}" color="var(--foreground-color)" size="1em"></converse-icon>${e.i18n_text}</button>`}async onMessageEditButtonClicked(e){e.preventDefault();let t=this.model.collection.findWhere("correcting"),s=o.u.ancestor(this,".chatbox")?.querySelector(".chat-textarea")?.value;(!s||t&&t.getMessageText()===s||await o.api.confirm((0,l.__)("Confirm"),(0,l.__)("You have an unsent message which will be lost if you continue. Are you sure?")))&&(t!==this.model?(t?.save("correcting",!1),this.model.save("correcting",!0)):this.model.save("correcting",!1))}async onDirectMessageRetractButtonClicked(){if("me"!==this.model.get("sender"))return o.log.error("onMessageRetractButtonClicked called for someone else's message!");let e=(0,l.__)("Be aware that other XMPP/Jabber clients (and servers) may not yet support retractions and that this message may not be removed everywhere."),t=[(0,l.__)("Are you sure you want to retract this message?")];o.api.settings.get("show_retraction_warning")&&(t[1]=e),await o.api.confirm((0,l.__)("Confirm"),t)&&this.model.collection.chatbox.retractOwnMessage(this.model)}async retractOtherMessage(e){let t=this.model.collection.chatbox,s=await t.retractOtherMessage(this.model,e);if(null===s){let e=(0,l.__)("A timeout occurred while trying to retract the message");o.api.alert("error",(0,l.__)("Error"),e),o.log.warn(e)}else if(o.u.isErrorStanza(s)){let e=(0,l.__)("Sorry, you're not allowed to retract this message.");o.api.alert("error",(0,l.__)("Error"),e),o.log.warn(e),o.log.error(s)}}async onMUCMessageRetractButtonClicked(){let e=(0,l.__)("Be aware that other XMPP/Jabber clients (and servers) may not yet support retractions and that this message may not be removed everywhere.");if(this.model.mayBeRetracted()){let t=[(0,l.__)("Are you sure you want to retract this message?")];o.api.settings.get("show_retraction_warning")&&(t[1]=e),await o.api.confirm((0,l.__)("Confirm"),t)&&this.model.collection.chatbox.retractOwnMessage(this.model)}else if(await this.model.mayBeModerated())if("me"===this.model.get("sender")){let t=[(0,l.__)("Are you sure you want to retract this message?")];o.api.settings.get("show_retraction_warning")&&(t=[t[0],e,t[1]]),await o.api.confirm((0,l.__)("Confirm"),t)&&this.retractOtherMessage()}else{let t=[(0,l.__)("You are about to retract this message."),(0,l.__)("You may optionally include a message, explaining the reason for the retraction.")];o.api.settings.get("show_retraction_warning")&&(t=[t[0],e,t[1]]);let s=await o.api.prompt((0,l.__)("Message Retraction"),t,(0,l.__)("Optional reason"));!1!==s&&this.retractOtherMessage(s)}else{let e=(0,l.__)("Sorry, you're not allowed to retract this message");o.api.alert("error",(0,l.__)("Error"),e)}}onMessageRetractButtonClicked(e){e?.preventDefault?.(),this.model.collection.chatbox.get("type")===u?this.onMUCMessageRetractButtonClicked():this.onDirectMessageRetractButtonClicked()}onMediaToggleClicked(e){e?.preventDefault?.(),this.hasHiddenMedia(this.getMediaURLs())?this.model.save({hide_url_previews:!1,url_preview_transition:"fade-in"}):(this.model.get("ogp_metadata")||[]).length?this.model.set("url_preview_transition","fade-out"):this.model.save({hide_url_previews:!0,url_preview_transition:"fade-in"})}hasHiddenMedia(e){if("boolean"==typeof this.model.get("hide_url_previews"))return this.model.get("hide_url_previews");let t=o.api.settings.get("render_media");return Array.isArray(t)?e.reduce((e,s)=>e||!(0,d.isDomainWhitelisted)(t,s),!1):!t}getMediaURLs(){let e=(this.model.get("ogp_metadata")||[]).map(e=>({url:e["og:image"],is_image:!0})).filter(e=>(0,d.isMediaURLDomainAllowed)(e));return[...new Set([...c(this.model.get("media_urls")||[],this.model.get("body")).filter(e=>(0,d.isMediaURLDomainAllowed)(e)).map(e=>e.url),...e.map(e=>e.url)])]}addMediaRenderingToggle(e){let t=this.getMediaURLs();if(t.length){let s=this.hasHiddenMedia(t);e.push({i18n_text:s?(0,l.__)("Show media"):(0,l.__)("Hide media"),handler:e=>this.onMediaToggleClicked(e),button_class:"chat-msg__action-hide-previews",icon_class:s?"fas fa-eye":"fas fa-eye-slash",name:"hide"})}}async onMessageCopyButtonClicked(e){e?.preventDefault?.(),await navigator.clipboard.writeText(this.model.getMessageText())}onMessageQuoteButtonClicked(e){e?.preventDefault?.();let t=this.model.collection.chatbox,s=o.u.ancestor(this,".chatbox")?.querySelector(".chat-textarea")?.selectionEnd,r=this.model.getMessageText().replaceAll(/^/gm,"> "),i=t.get("draft")??"";s?i=`${i.slice(0,s)}
${r}
${i.slice(s)}`:i+=r,t.save({draft:i})}async getActionButtons(){let e=[];this.model.get("editable")&&e.push({i18n_text:this.model.get("correcting")?(0,l.__)("Cancel Editing"):(0,l.__)("Edit"),handler:e=>this.onMessageEditButtonClicked(e),button_class:"chat-msg__action-edit",icon_class:"fa fa-pencil-alt",name:"edit"});let t=["groupchat","mep"].includes(this.model.get("type"))&&await this.model.mayBeModerated();return(!this.is_retracted&&(this.model.mayBeRetracted()||t)&&e.push({i18n_text:(0,l.__)("Retract"),handler:e=>this.onMessageRetractButtonClicked(e),button_class:"chat-msg__action-retract",icon_class:"fas fa-trash-alt",name:"retract"}),this.model.collection)?(this.addMediaRenderingToggle(e),e.push({i18n_text:(0,l.__)("Copy"),handler:e=>this.onMessageCopyButtonClicked(e),button_class:"chat-msg__action-copy",icon_class:"fas fa-copy",name:"copy"}),this.model.collection.chatbox.canPostMessages()&&e.push({i18n_text:(0,l.__)("Quote"),handler:e=>this.onMessageQuoteButtonClicked(e),button_class:"chat-msg__action-quote",icon_class:"fas fa-quote-right",name:"quote"}),o.api.hook("getMessageActionButtons",this,e)):[]}}o.api.elements.define("converse-message-actions",h)},"./src/shared/chat/message-body.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js");s("./src/shared/registry.js"),s("./src/shared/modals/image.js");var i=s("./src/shared/components/element.js"),o=s("./src/shared/texture/directives/texture.js");s("./src/shared/chat/styles/message-body.scss");class a extends i.CustomElement{static get properties(){return{hide_url_previews:{type:String},is_me_message:{type:Boolean},model:{type:Object},text:{type:String}}}constructor(){super(),this.text=null,this.model=null,this.hide_url_previews=null}initialize(){let e=r.api.settings.get();this.listenTo(e,"change:allowed_audio_domains",()=>this.requestUpdate()),this.listenTo(e,"change:allowed_image_domains",()=>this.requestUpdate()),this.listenTo(e,"change:allowed_video_domains",()=>this.requestUpdate()),this.listenTo(e,"change:render_media",()=>this.requestUpdate())}onImgClick(e){e.preventDefault(),r.api.modal.show("converse-image-modal",{src:e.target.src},e)}onImgLoad(){this.dispatchEvent(new CustomEvent("imageLoaded",{detail:this,bubbles:!0}))}render(){let e={media_urls:this.model.get("media_urls"),mentions:this.model.get("references"),nick:this.model.chatbox.get("nick"),onImgClick:e=>this.onImgClick(e),onImgLoad:()=>this.onImgLoad(),render_styling:!this.model.get("is_unstyled")&&r.api.settings.get("allow_message_styling"),show_me_message:!0};return"false"===this.hide_url_previews?(e.embed_audio=!0,e.embed_videos=!0,e.show_images=!0):"true"===this.hide_url_previews&&(e.embed_audio=!1,e.embed_videos=!1,e.show_images=!1),(0,o.default)(this.text,0,e,()=>this.model.collection?.trigger("rendered",this.model))}}r.api.elements.define("converse-chat-message-body",a)},"./src/shared/chat/message-history.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/repeat.js"),o=s("./node_modules/lit/directives/until.js"),a=s("./src/headless/index.js"),l=s("./src/shared/components/element.js"),d=s("./src/shared/chat/utils.js");s("./src/shared/chat/message.js");class c extends l.CustomElement{constructor(){super(),this.model=null,this.messages=[]}static get properties(){return{model:{type:Object},messages:{type:Array}}}render(){let e=this.messages;return e.length?(0,i.repeat)(e,e=>e.get("id"),e=>(0,r.html)`${this.renderMessage(e)}`):""}renderMessage(e){if(e.get("dangling_retraction")||e.get("dangling_moderation")||e.get("is_only_key"))return"";let t=e.get("template_hook");if("string"==typeof t){let s=a.api.hook(t,e,"");return(0,o.until)(s,"")}{let t=(0,r.html)`<converse-chat-message .model_with_messages="${this.model}" .model="${e}"></converse-chat-message>`,s=(0,d.getDayIndicator)(e);return s?[s,t]:t}}}a.api.elements.define("converse-message-history",c)},"./src/shared/chat/message-limit.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/shared/chat/templates/message-limit.js"),i=s("./src/shared/components/element.js"),o=s("./src/headless/index.js");class a extends i.CustomElement{static get properties(){return{model:{type:Object},_draft_length:{state:!0}}}constructor(){super(),this.model=null,this._draft_length=0}connectedCallback(){super.connectedCallback(),this._draft_length=this.model.get("draft")?.length??0,this.listenTo(this.model,"change:draft",()=>{this._draft_length=this.model.get("draft")?.length??0}),this.listenTo(this.model,"event:keyup",({ev:e})=>{let t=e.target;this._draft_length=t.value.length})}render(){let e=o.api.settings.get("message_limit");return e?(0,r.default)(e-this._draft_length):""}}o.api.elements.define("converse-message-limit-indicator",a)},"./src/shared/chat/message.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>g});var r=s("./src/headless/index.js");s("./src/shared/chat/message-actions.js"),s("./src/shared/chat/message-body.js"),s("./src/shared/components/dropdown.js"),s("./src/shared/modals/message-versions.js"),s("./src/shared/modals/user-details.js"),s("./src/shared/registry.js"),s("./src/plugins/muc-views/modals/occupant.js");var i=s("./src/shared/chat/templates/file-progress.js"),o=s("./src/shared/chat/templates/info-message.js"),a=s("./src/plugins/muc-views/templates/mep-message.js"),l=s("./src/shared/chat/templates/message.js"),d=s("./src/shared/chat/templates/message-text.js"),c=s("./src/shared/chat/templates/retraction.js"),u=s("./src/templates/spinner.js"),h=s("./src/shared/components/observable.js"),m=s("./src/i18n/index.js");let{Strophe:f}=r.converse.env,{SUCCESS:p}=r.constants;class g extends h.ObservableElement{constructor(){super(),this.model_with_messages=null,this.model=null,this.observable="once"}static get properties(){return{...super.properties,model_with_messages:{type:Object},model:{type:Object}}}async initialize(){super.initialize(),await this.model_with_messages.initialized,await this.model_with_messages.messages.fetched;let e=r.api.settings.get();this.listenTo(e,"change:render_media",()=>{this.model.save("hide_url_previews",void 0),this.requestUpdate()}),this.listenTo(this.model_with_messages,"change:first_unread_id",()=>this.requestUpdate()),this.listenTo(this.model,"change",()=>this.requestUpdate()),this.listenTo(this.model,"contact:change",()=>this.requestUpdate()),this.listenTo(this.model,"occupant:add",()=>this.requestUpdate()),this.listenTo(this.model,"occupant:change",()=>this.requestUpdate()),this.listenTo(this.model,"vcard:add",()=>this.requestUpdate()),this.listenTo(this.model,"vcard:change",()=>this.requestUpdate()),this.requestUpdate()}render(){if(!this.model)return"";if(this.show_spinner)return(0,u.default)();if(this.model.get("file")&&this.model.get("upload")!==p)return this.renderFileProgress();if(["mep"].includes(this.model.get("type")))return this.renderMEPMessage();if(["error","info"].includes(this.model.get("type")))return this.renderInfoMessage();else return this.renderChatMessage()}renderRetraction(){return(0,c.default)(this)}renderMessageText(){return(0,d.default)(this)}renderMEPMessage(){return(0,a.default)(this)}renderInfoMessage(){return(0,o.default)(this)}renderFileProgress(){return this.model.file?(0,i.default)(this):""}renderChatMessage(){return(0,l.default)(this)}shouldShowAvatar(){return r.api.settings.get("show_message_avatar")&&!this.model.isMeCommand()&&["chat","groupchat","normal"].includes(this.model.get("type"))}onImgClick(e){e.preventDefault(),r.api.modal.show("converse-image-modal",{src:e.target.src},e)}onUnfurlAnimationEnd(){"fade-out"===this.model.get("url_preview_transition")&&this.model.save({hide_url_previews:!0,url_preview_transition:"fade-in"})}async onRetryClicked(){this.show_spinner=!0,this.requestUpdate(),await r.api.trigger(this.model.get("retry_event_id"),{synchronous:!0}),this.model.destroy(),this.parentElement.removeChild(this)}hasMentions(){return"groupchat"===this.model.get("type")&&"them"===this.model.get("sender")&&this.model_with_messages.isUserMentioned(this.model)}getOccupantAffiliation(){return this.model.occupant?.get("affiliation")}getOccupantRole(){return this.model.occupant?.get("role")}getExtraMessageClasses(){let e=this.model.isMeCommand()||this.model.isRetracted(),t=[this.model.isFollowup()?"chat-msg--followup":null,this.model.get("is_delayed")?"delayed":null,e?"chat-msg--action":null,this.model.isRetracted()?"chat-msg--retracted":null,this.model.get("type"),this.shouldShowAvatar()?"chat-msg--with-avatar":null].map(e=>e);return"groupchat"===this.model.get("type")&&(t.push(this.getOccupantRole()??""),t.push(this.getOccupantAffiliation()??""),"them"===this.model.get("sender")&&this.hasMentions()&&t.push("mentioned")),this.model.get("correcting")&&t.push("correcting"),t.filter(e=>e).join(" ")}getRetractionText(){if(!(["groupchat","mep"].includes(this.model.get("type"))&&this.model.get("moderated_by")))return"me"===this.model.get("sender")?(0,m.__)("You have removed a message"):(0,m.__)("%1$s has removed a message",this.model.getDisplayName());{let e=this.model.get("moderated_by");if(!this.model.mod){let{occupants:t}=this.model_with_messages;this.model.mod=t.findOccupant({jid:e})||t.findOccupant({nick:f.getResourceFromJid(e)})}let t=this.model.mod?this.model.mod.getDisplayName():(0,m.__)("A moderator");return(0,m.__)("%1$s has removed a message",t)}}showUserModal(e){"me"===this.model.get("sender")?r.api.modal.show("converse-profile-modal",{model:r._converse.state.xmppstatus},e):"groupchat"===this.model.get("type")?(e.preventDefault(),r.api.modal.show("converse-muc-occupant-modal",{model:this.model.getOccupant(),message:this.model},e)):(e.preventDefault(),r.api.modal.show("converse-user-details-modal",{model:this.model_with_messages},e))}showMessageVersionsModal(e){e.preventDefault(),r.api.modal.show("converse-message-versions-modal",{model:this.model},e)}toggleSpoilerMessage(e){e?.preventDefault(),this.model.save({is_spoiler_visible:!this.model.get("is_spoiler_visible")})}}r.api.elements.define("converse-chat-message",g)},"./src/shared/chat/templates/emoji-picker.js":function(e,t,s){"use strict";s.r(t),s.d(t,{tplAllEmojis:()=>h,tplEmojiPicker:()=>m,tplSearchResults:()=>u});var r=s("./src/i18n/index.js"),i=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js");let a=i.converse.env.utils,l=e=>(0,o.html)`<li data-category="${e.category}" class="emoji-category ${e.category} ${e.current_category===e.category?"picked":""}" title="${(0,r.__)(i.api.settings.get("emoji_category_labels")[e.category])}"><a class="btn pick-category" @click="${e.onCategoryPicked}" href="#emoji-picker-${e.category}" data-category="${e.category}">${e.emoji}</a></li>`,d=e=>{let t=i.api.settings.get("emoji_categories");return(0,o.html)`<ul>${Object.keys(t).map(s=>t[s]?l(Object.assign({category:s,emoji:e.sn2Emoji(t[s])},e)):"")}</ul>`},c=e=>(0,o.html)`<li class="emoji insert-emoji ${e.shouldBeHidden(e.emoji.sn)?"hidden":""}" data-emoji="${e.emoji.sn}" title="${e.emoji.sn}"><a href="#" @click="${e.insertEmoji}" data-emoji="${e.emoji.sn}">${a.shortnamesToEmojis(e.emoji.sn)}</a></li>`;function u(e){let t=(0,r.__)("Search results");return(0,o.html)`<span ?hidden="${!e.query}" class="emoji-lists__container emojis-lists__container--search"><a id="emoji-picker-search-results" class="emoji-category__heading">${t}</a><ul class="emoji-picker">${e.search_results.map(t=>c(Object.assign({emoji:t},e)))}</ul></span>`}function h(e){let t=i.api.settings.get("emoji_categories");return(0,o.html)`<span ?hidden="${e.query}" class="emoji-lists__container emoji-lists__container--browse">${Object.keys(t).map(s=>{var a;return t[s]?(a=Object.assign({category:s},e),(0,o.html)`<a id="emoji-picker-${a.category}" class="emoji-category__heading" data-category="${a.category}">${(0,r.__)(i.api.settings.get("emoji_category_labels")[a.category])}</a><ul class="emoji-picker" data-category="${a.category}">${Object.values(i.converse.emojis.json[a.category]).map(e=>c(Object.assign({emoji:e},a)))}</ul>`):""})}</span>`}function m(e,t){let s=(0,r.__)("Search"),i={tone1:":raised_hand_tone1:",tone2:":raised_hand_tone2:",tone3:":raised_hand_tone3:",tone4:":raised_hand_tone4:",tone5:":raised_hand_tone5:"};return(0,o.html)`<div class="emoji-picker__header"><input class="form-control emoji-search" name="emoji-search" placeholder="${s}" .value="${t.query||""}" @keydown="${t.onSearchInputKeyDown}" @blur="${t.onSearchInputBlurred}" @focus="${t.onSearchInputFocus}"> ${t.query?"":d(t)}</div>${t.render_emojis?(0,o.html)`<converse-emoji-picker-content .model="${e.state}" .search_results="${t.search_results}" current_skintone="${t.current_skintone}" query="${t.query}"></converse-emoji-picker-content>`:""}<div class="emoji-skintone-picker">Skin tone:<ul>${Object.keys(i).map(e=>{var s;return s=i[e],(0,o.html)`<li data-skintone="${s}" class="emoji-skintone ${t.current_skintone===e?"picked":""}"><a class="pick-skintone" href="#" data-skintone="${e}" @click="${t.onSkintonePicked}">${a.shortnamesToEmojis(s)}</a></li>`})}</ul></div>`}},"./src/shared/chat/templates/file-progress.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l}),s("./src/shared/avatar/avatar.js");var r=s("./src/i18n/index.js"),i=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js");let{filesize:a}=i.converse.env,l=e=>{let t=(0,r.__)("Uploading file:"),s=e.model.file.name,i=a(e.model.file.size),l=e.model.occupant||e.model.contact;return(0,o.html)`<div class="message chat-msg">${e.shouldShowAvatar()?(0,o.html)`<a class="show-msg-author-modal" @click="${e.showUserModal}"><converse-avatar .model="${l||e.model}" class="avatar align-self-center" name="${e.model.getDisplayName()}" nonce="${e.model.vcard?.get("vcard_updated")}" height="40" width="40"></converse-avatar></a>`:""}<div class="chat-msg__content"><span class="chat-msg__text">${t} <strong>${s}</strong>, ${i}</span><progress value="${e.model.get("progress")}"></div></div>`}},"./src/shared/chat/templates/info-message.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/i18n/index.js"),i=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js");let{dayjs:a}=i.converse.env,l=e=>{let t=a(e.model.get("time")).toISOString(),s=(0,r.__)("Retry");return(0,o.html)`<div class="message chat-info chat-${e.model.get("type")}" data-isodate="${t}" data-type="${e.data_name}" data-value="${e.data_value}"><div class="chat-info__message"><converse-texture .mentions="${e.model.get("references")}" render_styling text="${e.model.getMessageText()}"></converse-texture></div>${e.model.get("reason")?(0,o.html)`<q class="reason">${e.model.get("reason")}</q>`:""} ${e.model.get("error_text")?(0,o.html)`<q class="reason">${e.model.get("error_text")}</q>`:""} ${e.model.get("retry_event_id")?(0,o.html)`<a class="retry" @click="${e.onRetryClicked}">${s}</a>`:""}</div>`}},"./src/shared/chat/templates/message-limit.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/i18n/index.js"),i=s("./node_modules/lit/index.js");let o=e=>{let t=(0,r.__)("Message characters remaining");return(0,i.html)`<span class="message-limit ${e<1?"error":""}" title="${t}">${e}</span>`}},"./src/shared/chat/templates/message-text.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),i=s("./src/i18n/index.js"),o=s("./node_modules/lit/index.js");let a=e=>{let t=(0,i.__)("Show more"),s="groupchat"===e.model.get("type"),a=(0,i.__)("Show less"),l=e.model.get("error_text")||e.model.get("error"),d=`${(0,i.__)("Message delivery failed.")}
${l}`,c=(0,o.html)`<div class="chat-msg__spoiler-hint"><span class="spoiler-hint">${e.model.get("spoiler_hint")}</span> <a class="badge badge-info spoiler-toggle" href="#" @click="${e.toggleSpoilerMessage}"><converse-icon size="1em" color="var(--background-color)" class="fa ${e.model.get("is_spoiler_visible")?"fa-eye-slash":"fa-eye"}"></converse-icon>${e.model.get("is_spoiler_visible")?a:t}</a></div>`,u=e.model.get("is_spoiler")?`spoiler ${e.model.get("is_spoiler_visible")?"":"hidden"}`:"",h=e.model.getMessageText(),m=e.model.get("oob_url")&&h!==e.model.get("oob_url"),f=r.api.settings.get("render_media");return(0,o.html)`${e.model.get("is_spoiler")?c:""} ${e.model.get("subject")?(0,o.html)`<div class="chat-msg__subject">${e.model.get("subject")}</div>`:""} <span class="chat-msg__body--wrapper ${l?"error":""}"><converse-chat-message-body class="chat-msg__text ${e.model.get("is_only_emojis")?"chat-msg__text--larger":""} ${u}" .model="${e.model}" hide_url_previews="${e.model.get("hide_url_previews")}" ?is_me_message="${e.model.isMeCommand()}" text="${h}"></converse-chat-message-body>${e.model.get("received")&&!e.model.isMeCommand()&&!s?(0,o.html)`<converse-icon size="0.75em" color="var(--chat-color)" class="fa fa-check chat-msg__receipt"></converse-icon>`:""} ${e.model.get("edited")?function(e){let t=(0,i.__)("This message has been edited");return(0,o.html)`<converse-icon title="${t}" class="fa fa-edit chat-msg__edit-modal" @click="${e.showMessageVersionsModal}" size="1em"></converse-icon>`}(e):""} </span>${m?(0,o.html)`<div class="chat-msg__media"><converse-texture text="${e.model.get("oob_url")}" .onImgClick="${t=>e.onImgClick(t)}" ?embed_audio="${f}" ?embed_videos="${f}" ?show_images="${f}"></div>`:""} ${l?(0,o.html)`<div class="chat-msg__error">${d}</div>`:""}`}},"./src/shared/chat/templates/message.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/utils/url.js"),a=s("./src/utils/color.js"),l=s("./src/shared/chat/utils.js"),d=s("./src/i18n/index.js");s("./src/shared/avatar/avatar.js"),s("./src/shared/chat/unfurl.js");let{dayjs:c}=i.converse.env,u=e=>{let t=(0,d.__)("New messages"),s=e.model.get("edited"),u=e.model_with_messages.get("first_unread_id")===e.model.get("id"),h=e.model.isFollowup(),m=e.model.isMeCommand(),f=e.model.isRetracted(),p=e.model.get("msgid"),g=e.model.get("sender"),_=e.model.get("time"),v=e.model.occupant||e.model.contact,y=(0,a.getAuthorStyle)(v),b=i.api.settings.get("time_format"),j=c(s||_).format(b),w=(0,l.getHats)(e.model),S=e.model.getDisplayName(),x=m||f,E=!x&&!h,A=e.shouldShowAvatar()&&E,C=v?.vcard?v:e.model;return(0,r.html)`${u?(0,r.html)`<div class="message separator"><hr class="separator"><span class="separator-text">${t}</span></div>`:""}<div class="message chat-msg ${e.getExtraMessageClasses()}" data-isodate="${_}" data-msgid="${p}" data-from="${e.model.get("from")}" data-encrypted="${e.model.get("is_encrypted")}"><a id="${p}"></a> ${A?(0,r.html)`<a class="show-msg-author-modal" @click="${e.showUserModal}"><converse-avatar .model="${C}" class="avatar align-self-center" name="${e.model.getDisplayName()}" nonce="${C.vcard?.get("vcard_updated")}" height="40" width="40"></converse-avatar></a>`:""}<div class="chat-msg__content chat-msg__content--${g} ${x?"chat-msg__content--action":""}">${E?(0,r.html)`<span class="chat-msg__heading"><span class="chat-msg__author"><a class="show-msg-author-modal" @click="${e.showUserModal}" style="${y}">${S}</a> </span>${w.map(e=>(0,r.html)`<span class="badge badge-secondary">${e.title}</span>`)} <time timestamp="${s||_}" class="chat-msg__time">${j}</time> ${e.model.get("is_encrypted")?(0,r.html)`<converse-icon class="fa fa-lock" size="1.1em"></converse-icon>`:""}</span>`:""}<div class="chat-msg__body chat-msg__body--${e.model.get("message_type")} ${e.model.get("received")?"chat-msg__body--received":""} ${e.model.get("is_delayed")?"chat-msg__body--delayed":""}"><div class="chat-msg__message">${x?(0,r.html)`<time timestamp="${s||_}" class="chat-msg__time">${j}</time> ${m?(0,r.html)`<span class="chat-msg__author" style="${y}">${m?"**":""}${S}</span>`:""}`:""} ${f?e.renderRetraction():e.renderMessageText()}</div><converse-message-actions .model="${e.model}" ?is_retracted="${f}"></converse-message-actions></div>${e.model.get("ogp_metadata")?.map(t=>!0===e.model.get("hide_url_previews")?"":(0,r.html)`<converse-message-unfurl @animationend="${e.onUnfurlAnimationEnd}" class="${e.model.get("url_preview_transition")}" jid="${e.model_with_messages?.get("jid")}" description="${t["og:description"]||""}" title="${t["og:title"]||""}" image="${t["og:image"]&&(0,o.shouldRenderMediaFromURL)(t["og:image"],"image")?t["og:image"]:r.nothing}" site_name="${t["og:site_name"]||""}" url="${t["og:url"]||""}"></converse-message-unfurl>`)}</div></div>`}},"./src/shared/chat/templates/new-day.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");let i=e=>(0,r.html)`<div class="message date-separator" data-isodate="${e.time}"><hr class="separator"><time class="separator-text" datetime="${e.time}"><span>${e.datestring}</span></time></div>`},"./src/shared/chat/templates/retraction.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");s("./src/shared/chat/styles/retraction.scss");let i=e=>{let t=e.model.isRetracted()?e.getRetractionText():null;return(0,r.html)`<span class="retraction"><span>${t}</span> ${e.model.get("moderation_reason")?(0,r.html)`<q class="chat-msg--retracted__reason">${e.model.get("moderation_reason")}</q>`:""}</span>`}},"./src/shared/chat/templates/toolbar.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/until.js"),o=s("./src/i18n/index.js"),a=s("./src/headless/index.js");let l=e=>{let t=a.api.settings.get("message_limit");return(0,r.html)`<span class="btn-group toolbar-buttons">${(0,i.until)(e.getButtons(),"")}</span> <span>${t?(0,r.html)`<converse-message-limit-indicator .model="${e.model}">`:""} ${e.show_send_button?function(){let e=(0,o.__)("Send the message");return(0,r.html)`<button type="submit" class="btn send-button" data-action="sendMessage" title="${e}"><converse-icon color="var(--background-color)" class="fa fa-paper-plane" size="1em"></converse-icon></button>`}():""}</span>`}},"./src/shared/chat/templates/unfurl.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/utils/url.js");s("./src/shared/texture/components/image.js");let a=e=>{let t=e.description||"",s=e.image||"",a=e.title||"",l=e.url||"",d=s&&(0,o.isDomainAllowed)(s,"allowed_image_domains")&&i.u.isValidURL(s),c=a||t||l;return d||c?(0,r.html)`<div class="card card--unfurl">${d?function(e){let t=e.image||"",s=e.url||"";return(0,r.html)`<converse-image class="card-img-top hor_centered" href="${s}" src="${t}" .onImgLoad="${()=>e.onImageLoad()}"></converse-image>`}(e):""} ${c?(0,r.html)`<div class="card-body">${a?function(e,t){let s=e.image||"",o=e.url||"",a=e.title||"";return o&&i.u.isValidURL(o)&&!i.u.isGIFURL(s)?(0,r.html)`<a href="${o}" target="_blank" rel="noopener">${t(a)}</a>`:t(a??"")}(e,e=>(0,r.html)`<h5 class="card-title">${e}</h5>`):""} ${t?(0,r.html)`<p class="card-text"><converse-texture text="${t}"></converse-texture></p>`:""} ${l&&i.u.isValidURL(l)?(0,r.html)`<p class="card-text"><a href="${l}" target="_blank" rel="noopener">${new URL(l).hostname}</a></p>`:""}</div>`:""}</div>`:""}},"./src/shared/chat/toolbar.js":function(e,t,s){"use strict";s.r(t),s.d(t,{ChatToolbar:()=>u});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/until.js"),o=s("./src/headless/index.js");s("./src/shared/chat/emoji-picker.js"),s("./src/shared/chat/message-limit.js");var a=s("./src/shared/chat/templates/toolbar.js"),l=s("./src/shared/components/element.js"),d=s("./src/i18n/index.js");s("./src/shared/chat/styles/toolbar.scss");let c=o.converse.env.Strophe;class u extends l.CustomElement{static get properties(){return{hidden_occupants:{type:Boolean},is_groupchat:{type:Boolean},message_limit:{type:Number},model:{type:Object},show_call_button:{type:Boolean},show_emoji_button:{type:Boolean},show_send_button:{type:Boolean},show_spoiler_button:{type:Boolean}}}constructor(){super(),this.model=null,this.is_groupchat=null,this.hidden_occupants=!1,this.show_send_button=!1,this.show_spoiler_button=!1,this.show_call_button=!1,this.show_emoji_button=!1}connectedCallback(){super.connectedCallback(),this.listenTo(this.model,"change:composing_spoiler",()=>this.requestUpdate())}render(){return(0,a.default)(this)}firstUpdated(){o.api.trigger("renderToolbar",this)}getButtons(){let e=[];if(this.show_emoji_button&&e.push((0,r.html)`<converse-emoji-dropdown .model="${this.model}"></converse-emoji-dropdown>`),this.show_call_button){let t=this.is_groupchat?"--muc-color":"--chat-color",s=(0,d.__)("Start a call");e.push((0,r.html)`<button type="button" class="btn toggle-call" @click="${this.toggleCall}" title="${s}"><converse-icon color="var(${t})" class="fa fa-phone" size="1em"></converse-icon></button>`)}this.show_spoiler_button&&e.push(this.getSpoilerButton());let t=o._converse.session.get("domain"),s=o.api.disco.supports(c.NS.HTTPUPLOAD,t);return e.push((0,r.html)`${(0,i.until)(s.then(e=>this.getHTTPUploadButton(!!e)),"")}`),o._converse.api.hook("getToolbarButtons",this,e)}getHTTPUploadButton(e){if(!e)return"";{let e=(0,d.__)("Choose a file to send");return(0,r.html)`<button type="button" class="btn" title="${e}" @click="${this.toggleFileUpload}"><converse-icon class="fa fa-paperclip" size="1em"></converse-icon></button> <input type="file" @change="${this.onFileSelection}" class="fileupload" multiple="" style="display:none">`}}getSpoilerButton(){let e,t=this.model;if(!this.is_groupchat&&!t.presence?.resources.length)return;e=t.get("composing_spoiler")?(0,d.__)("Click to write as a normal (non-spoiler) message"):(0,d.__)("Click to write your message as a spoiler");let s=this.is_groupchat?"--muc-color":"--chat-color",a=(0,r.html)`<button type="button" class="btn toggle-compose-spoiler" title="${e}" @click="${this.toggleComposeSpoilerMessage}"><converse-icon color="var(${s})" class="fa ${t.get("composing_spoiler")?"fa-eye-slash":"fa-eye"}" size="1em"></converse-icon></button>`;if(this.is_groupchat)return a;{let e=t.get("jid"),s=Promise.all(t.presence.resources.map(t=>o.api.disco.supports(c.NS.SPOILER,`${e}/${t.get("name")}`))).then(e=>e.reduce((e,t)=>e&&t,!0));return(0,r.html)`${(0,i.until)(s.then(()=>a),"")}`}}toggleFileUpload(e){e?.preventDefault?.(),e?.stopPropagation?.(),this.querySelector(".fileupload").click()}onFileSelection(e){this.model.sendFiles(e.target.files)}toggleComposeSpoilerMessage(e){e?.preventDefault?.(),e?.stopPropagation?.(),this.model.set("composing_spoiler",!this.model.get("composing_spoiler"))}toggleCall(e){e?.preventDefault?.(),e?.stopPropagation?.(),o.api.trigger("callButtonClicked",{connection:o.api.connection.get(),model:this.model})}}o.api.elements.define("converse-chat-toolbar",u)},"./src/shared/chat/unfurl.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/shared/chat/templates/unfurl.js");s("./src/shared/chat/styles/unfurl.scss");class a extends i.CustomElement{static get properties(){return{description:{type:String},image:{type:String},jid:{type:String},title:{type:String},url:{type:String},site_name:{type:String}}}constructor(){super(),this.jid=null,this.url=null,this.title=null,this.image=null,this.description=null,this.site_name=null}initialize(){let e=r.api.settings.get();this.listenTo(e,"change:allowed_image_domains",()=>this.requestUpdate()),this.listenTo(e,"change:render_media",()=>this.requestUpdate())}render(){return(0,o.default)(this)}onImageLoad(){this.dispatchEvent(new CustomEvent("imageLoaded",{detail:this,bubbles:!0}))}}r.api.elements.define("converse-message-unfurl",a)},"./src/shared/chat/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{addEmojisMarkup:()=>A,getChatStyle:()=>p,getDayIndicator:()=>w,getDropdownButtons:()=>b,getEmojiMarkup:()=>E,getHats:()=>S,getHeadingDropdownItem:()=>_,getHeadingStandaloneButton:()=>v,getStandaloneButtons:()=>y,getTonedEmojis:()=>x,getUnreadMsgsDisplay:()=>g,isMobileViewport:()=>f,onScrolledDown:()=>j,shortnamesToEmojis:()=>C});var r=s("./src/headless/index.js"),i=s("./node_modules/lit/index.js"),o=s("./node_modules/lit/directives/until.js"),a=s("./src/shared/constants.js"),l=s("./src/shared/chat/templates/new-day.js");let{dayjs:d,u:c}=r.converse.env,{convertASCII2Emoji:u,getShortnameReferences:h,getCodePointReferences:m}=c;function f(){return window.innerWidth<=a.MOBILE_CUTOFF}function p(e){if(f())return"";let{height:t,width:s}=e.toJSON();return"overlayed"===r.api.settings.get("view_mode")?`${s?`width: ${s}px;`:""}${t?`height: ${t}px;`:""}`:""}function g(e){let t=e.get("num_unread")||0;return t<100?t:"99+"}async function _(e){let t=await e;return t?(0,i.html)`<a href="#" role="button" class="dropdown-item ${t.a_class}" @click="${t.handler}" title="${t.i18n_title}"><converse-icon size="1em" class="fa ${t.icon_class}"></converse-icon>${t.i18n_text}</a>`:""}async function v(e){let t=await e;return(0,i.html)`<button type="button" class="btn chatbox-btn ${t.a_class}" @click="${t.handler}" title="${t.i18n_title}"><converse-icon size="1em" class="fa ${t.icon_class}"></converse-icon></button>`}async function y(e){return(await e).filter(e=>e.standalone).map(e=>v(e)).reverse().map(e=>(0,o.until)(e,""))}async function b(e){let t=(await e).filter(e=>!e.standalone).map(e=>_(e));return t.length?(0,i.html)`<converse-dropdown class="chatbox-btn btn-group dropstart" .items="${t}"></converse-dropdown>`:""}function j(e){if(!e.isHidden()&&r.api.settings.get("allow_url_history_change")){let t=window.location.hash;t&&e.messages.get(t.slice(1))&&history.pushState(null,"",window.location.pathname)}}function w(e){let t=e.collection?.models;if(!t)return;let s=t.indexOf(e),r=t[s-1];if(!r||d(e.get("time")).isAfter(d(r.get("time")),"day")){let t=d(e.get("time")).startOf("day");return(0,l.default)({type:"date",time:t.toISOString(),datestring:t.format("dddd MMM Do YYYY")})}}function S(e){if("groupchat"===e.get("type")){let t=r.api.settings.get("muc_hats").filter(e=>e).map(e=>e.toLowerCase()),s=[];t.includes("vcard_roles")&&(s=(s=e.vcard?e.vcard.get("role"):null)?s.split(",").filter(e=>e).map(e=>({title:e})):[]);let i=[...e.occupant?[e.occupant.get("role")]:[],...e.occupant?[e.occupant.get("affiliation")]:[]].filter(e=>e).filter(e=>t.includes(e.toLowerCase())).map(e=>({title:e}));return[...t.includes("xep317")&&e.occupant?.get("hats")||[],...s,...i]}return[]}function x(){return r.converse.emojis.toned||(r.converse.emojis.toned=c.unique(Object.values(r.converse.emojis.json.people).filter(e=>e.sn.includes("_tone")).map(e=>e.sn.replace(/_tone[1-5]/,"")))),r.converse.emojis.toned}function E(e,t={unicode_only:!1,add_title_wrapper:!1}){let s=e.emoji,o=e.shortname;if(s)if(t.unicode_only)return s;else if(r.api.settings.get("use_system_emojis"))if(t.add_title_wrapper)return o?(0,i.html)`<span title="${o}">${s}</span>`:s;else return s;else{let t=r.api.settings.get("emoji_image_path");return(0,i.html)`<img class="emoji" loading="lazy" draggable="false" title="${o}" alt="${s}" src="${t}/72x72/${e.cp}.png">`}{if(t.unicode_only)return o;let{url:e}=r.converse.emojis.by_sn[o];return(0,i.html)`<img class="emoji" loading="lazy" draggable="false" title="${o}" alt="${o}" src="${e.startsWith(".")?`${r.api.settings.get("assets_path")}/${e}`:e}">`}}function A(e,t){let s=[e];return[...h(e),...m(e)].sort((e,t)=>t.begin-e.begin).forEach(e=>{let r=s.shift(),i=E(e,t);s="string"==typeof i?[r.slice(0,e.begin)+i+r.slice(e.end),...s]:[r.slice(0,e.begin),i,r.slice(e.end),...s]}),s}function C(e,t={unicode_only:!1,add_title_wrapper:!1}){return A(e=u(e),t)}Object.assign(c,{shortnamesToEmojis:C})},"./src/shared/components/brand-heading.js":function(e,t,s){"use strict";s.r(t),s.d(t,{ConverseBrandHeading:()=>a});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/shared/components/element.js");s("./src/shared/components/brand-logo.js");class a extends o.CustomElement{render(){return(0,r.html)`<converse-brand-logo></converse-brand-logo>`}}i.api.elements.define("converse-brand-heading",a)},"./src/shared/components/brand-logo.js":function(e,t,s){"use strict";s.r(t),s.d(t,{ConverseBrandLogo:()=>a});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./node_modules/lit/index.js");s("./src/shared/components/logo.js");class a extends i.CustomElement{static get properties(){return{hide_byline:{type:Boolean}}}constructor(){super(),this.hide_byline=!1}render(){let e="fullscreen"===r.api.settings.get("view_mode");return(0,o.html)`<a class="brand-heading" href="https://conversejs.org" target="_blank" rel="noopener"><span class="brand-name-wrapper ${e?"brand-name-wrapper--fullscreen":""}"><converse-logo class="converse-svg-logo"></converse-logo><span class="brand-name"><span class="brand-name__text">converse<span class="subdued">.js</span></span> ${e&&!this.hide_byline?(0,o.html)`<p class="byline">messaging freedom</p>`:""}</span></span></a>`}}r.api.elements.define("converse-brand-logo",a)},"./src/shared/components/dropdown.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/until.js"),o=s("./src/headless/index.js"),a=s("./src/shared/dom-navigator/index.js"),l=s("./src/shared/components/dropdownbase.js");s("./src/shared/components/icons.js");var d=s("./src/i18n/index.js");s("./src/shared/components/styles/dropdown.scss");let{KEYCODES:c}=o.constants;class u extends l.default{static get properties(){return{icon_classes:{type:String},items:{type:Array}}}constructor(){super(),this.icon_classes="fa fa-bars",this.items=[],this.id=o.u.getUniqueId()}render(){return(0,r.html)`<button class="btn btn--transparent btn--standalone dropdown-toggle dropdown-toggle--no-caret" id="${this.id}" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="${(0,d.__)("Menu")}"><converse-icon aria-hidden="true" size="1em" class="${this.icon_classes}"></converse-icon></button><ul class="dropdown-menu" aria-labelledby="${this.id}">${this.items.map(e=>(0,r.html)`<li>${(0,i.until)(e,"")}</li>`)}</ul>`}firstUpdated(){super.firstUpdated(),this.initArrowNavigation()}connectedCallback(){super.connectedCallback(),this.registerEvents()}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown),this.disableArrowNavigation(),super.disconnectedCallback()}registerEvents(){this.onKeyDown=e=>this.#m(e),this.addEventListener("hide.bs.dropdown",()=>this.onDropdownHide()),this.addEventListener("keydown",this.onKeyDown)}onDropdownHide(){this.disableArrowNavigation()}initArrowNavigation(){this.navigator||(this.navigator=new a.DOMNavigator(this.menu,{selector:".dropdown-menu li",onSelected:e=>e.focus()}))}disableArrowNavigation(){this.navigator?.disable()}enableArrowNavigation(e){e?.preventDefault(),e?.stopPropagation(),this.disableArrowNavigation(),this.navigator.enable(),this.navigator.select(this.menu.firstElementChild)}onEnterPressed(e){e.preventDefault(),e.stopPropagation(),this.navigator.selected?.querySelector("a")?.click(),this.dropdown.hide()}#m(e){this.navigator&&o.u.isVisible(this)&&(e.key===c.ENTER?this.onEnterPressed(e):e.key!==c.DOWN_ARROW||this.navigator.enabled?e.key===c.ESCAPE&&this.dropdown.hide():this.enableArrowNavigation(e))}}o.api.elements.define("converse-dropdown",u)},"./src/shared/components/dropdownbase.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/bootstrap/js/src/dropdown.js"),i=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),o=s("./src/shared/components/element.js");class a extends o.CustomElement{firstUpdated(e){super.firstUpdated(e),this.menu=this.querySelector(".dropdown-menu"),this.button=this.querySelector("button"),this.dropdown=new r.default(this.button)}}let l="keydown.bs.dropdown.data-api";i.default.off(document,l)},"./src/shared/components/element.js":function(e,t,s){"use strict";s.r(t),s.d(t,{CustomElement:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/@converse/skeletor/dist/skeletor.js");class o extends(0,i.EventEmitter)(r.LitElement){constructor(){super()}createRenderRoot(){return this}initialize(){return null}connectedCallback(){return super.connectedCallback(),this.initialize()}disconnectedCallback(){super.disconnectedCallback(),this.stopListening()}}},"./src/shared/components/font-awesome.js":function(e,t,s){"use strict";s.r(t),s.d(t,{FontAwesome:()=>a});var r=s("./src/shared/components/templates/icons.js"),i=s("./src/shared/components/element.js"),o=s("./src/headless/index.js");class a extends i.CustomElement{render(){return(0,r.default)()}}o.api.elements.define("converse-fontawesome",a)},"./src/shared/components/footer.js":function(e,t,s){"use strict";s.r(t),s.d(t,{ConverseFooter:()=>l});var r=s("./src/headless/index.js"),i=s("./node_modules/lit/index.js"),o=s("./src/shared/components/element.js"),a=s("./src/i18n/index.js");class l extends o.CustomElement{render(){let e="fullscreen"===r.api.settings.get("view_mode"),t=["dracula","cyberpunk"].includes(r.api.settings.get("theme")),s=(0,a.__)("A big thank you to our sponsors \uD83D\uDE4F");return(0,i.html)`${e?(0,i.html)`<footer class="footer mt-auto py-3 pb-3"><div class="container"><div class="row"><div class="col-12 text-center"><p class="brand-subtitle mb-2 subdued">Version: ${r._converse.VERSION_NAME}</p><p class="brand-subtitle mb-4"><a target="_blank" rel="nofollow" href="https://github.com/conversejs/converse.js">Open Source</a> XMPP chat client brought to you by <a target="_blank" rel="nofollow" href="https://opkode.com/about">Opkode</a>.</p><div class="sponsors text-center"><p class="byline mb-1">${s}</p><div class="fs-6 d-flex flex-wrap justify-content-center align-items-center gap-4 mb-2"><div><a href="https://bairesdev.com/sponsoring-open-source-projects/?utm_source=conversejs" target="_blank" rel="noopener"><img style="width:13em" src="https://conversejs.org/media/logos/bairesdev-primary.png" alt="BairesDev"></a></div><div><a href="https://blokt.com?utm_source=conversejs" target="_blank" rel="noopener"><img style="width:12em" src="${t?"https://conversejs.org/media/logos/blokt-invert.png":"https://conversejs.org/media/logos/blokt.png"}" alt="Blokt Crypto & Privacy"></a></div><div><a href="https://www.keycdn.com?utm_source=conversejs" target="_blank" rel="noopener"><img style="height:3em" src="https://conversejs.org/logo/keycdn.png" alt="KeyCDN"></a></div></div></div><p class="brand-subtitle mb-3">If you'd like to sponsor this project, please visit: <a href="https://github.com/sponsors/jcbrand" target="_blank" rel="noopener">Github</a>, <a href="https://www.patreon.com/jcbrand" target="_blank" rel="noopener">Patreon</a>, <a href="https://liberapay.com/jcbrand" target="_blank" rel="noopener">Liberapay</a> or <a href="https://opkode.com/contact.html" target="_blank" rel="noopener">contact us</a>.</p></div></div></div></footer>`:""}`}}r.api.elements.define("converse-footer",l)},"./src/shared/components/icons.js":function(e,t,s){"use strict";s.r(t);var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/shared/components/element.js");s("./src/shared/components/styles/icon.scss");class a extends o.CustomElement{static get properties(){return{color:{type:String},class_name:{attribute:"class"},css:{type:String},size:{type:String}}}constructor(){super(),this.class_name="",this.css="",this.size="",this.color=""}getSource(){return`#icon-${this.class_name.trim().split(" ")[1].replace("fa-","")}`}getStyles(){let e=this.color.match(/var\((--.*)\)/)?.[1],t=e?getComputedStyle(this).getPropertyValue(e):this.color;return`
            ${this.size?`width: ${this.size};`:""}
            ${this.size?`height: ${this.size};`:""}
            ${t?`fill: ${t};`:""}
            ${this.css}
        `}render(){return(0,r.html)`<svg .style="${this.getStyles()}"><use href="${this.getSource()}"></use></svg>`}}i.api.elements.define("converse-icon",a)},"./src/shared/components/image-picker.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/shared/components/element.js"),a=s("./src/i18n/index.js");s("./src/shared/components/styles/image-picker.scss");let l=(0,a.__)("Click to set a new picture"),d=(0,a.__)("Clear picture");class c extends o.CustomElement{constructor(){super(),this.model=null,this.width=null,this.height=null,this.nonce=null}static get properties(){return{height:{type:Number},model:{type:Object},width:{type:Number}}}render(){return(0,r.html)`<div class="image-picker"><a class="change-avatar" @click="${this.openFileSelection}" title="${l}"><converse-avatar .model="${this.model}" .pickerdata="${this.data}" class="avatar" name="${this.model.getDisplayName()}" height="${this.height}" nonce="${this.nonce||this.model.vcard?.get("vcard_updated")}" width="${this.width}"></converse-avatar></a>${this.data?.data_uri||this.model?.vcard?.get("image")?(0,r.html)`<button class="clear-image" @click="${this.clearImage}" title="${d}"><converse-icon class="fa fa-trash-alt" size="1.5em"></converse-icon></button>`:""} <input @change="${this.updateFilePreview}" class="hidden" name="avatar_image" type="file"></div>`}clearImage(e){e.preventDefault(),this.querySelector('input[name="avatar_image').value="",this.model.vcard.set({image:null,image_type:null}),this.data={data_uri:null,image_type:null},this.nonce=new Date().toISOString(),this.requestUpdate()}openFileSelection(e){e.preventDefault(),this.querySelector('input[type="file"]').click()}updateFilePreview(e){let t=e.target.files[0],s=new FileReader;s.onloadend=()=>{this.data={data_uri:s.result,image_type:t.type},this.nonce=new Date().toISOString(),this.requestUpdate()},s.readAsDataURL(t)}}i.api.elements.define("converse-image-picker",c)},"./src/shared/components/index.js":function(e,t,s){"use strict";s.r(t),s("./src/shared/components/brand-heading.js"),s("./src/shared/components/brand-logo.js"),s("./src/shared/components/dropdown.js"),s("./src/shared/components/font-awesome.js"),s("./src/shared/components/icons.js"),s("./src/shared/components/image-picker.js"),s("./src/shared/components/list-filter.js"),s("./src/shared/components/message-versions.js"),s("./src/shared/components/observable.js"),s("./src/shared/components/spinner.js"),s("./src/shared/components/split-resize.js")},"./src/shared/components/list-filter.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/debounce.js"),i=s("./src/shared/components/element.js"),o=s("./src/headless/index.js");s("./src/shared/components/styles/list-filter.scss");class a extends i.CustomElement{constructor(){super(),this.items=null,this.model=null,this.template=null,this.promise=Promise.resolve()}static get properties(){return{items:{type:Array},model:{type:Object},promise:{type:Promise},template:{type:Object}}}initialize(){this.liveFilter=(0,r.default)(e=>this.model.save({text:e.target.value}),250),this.listenTo(this.items,"add",()=>this.requestUpdate()),this.listenTo(this.items,"destroy",()=>this.requestUpdate()),this.listenTo(this.items,"remove",()=>this.requestUpdate()),this.listenTo(this.model,"change",()=>{this.dispatchUpdateEvent(),this.requestUpdate()}),this.promise.then(()=>this.requestUpdate()),this.requestUpdate()}render(){return this.shouldBeVisible()?this.template(this):""}dispatchUpdateEvent(){this.dispatchEvent(new CustomEvent("update",{detail:this.model.changed}))}changeChatStateFilter(e){e&&e.preventDefault();let t=this.querySelector(".state-type").value;this.model.save({state:t})}changeTypeFilter(e){e&&e.preventDefault();let t=e.target,s=t.closest("converse-icon")?.dataset.type||"items";if("state"===s){let e=this.querySelector(".state-type").value;this.model.save({type:s,state:e})}else{let e=this.querySelector(".items-filter").value;this.model.save({type:s,text:e})}}submitFilter(e){e?.preventDefault(),this.liveFilter()}isActive(){return"state"===this.model.get("type")||this.model.get("text")}shouldBeVisible(){return this.items?.length>=5||this.isActive()}clearFilter(e){e&&e.preventDefault(),this.model.save({text:""})}}o.api.elements.define("converse-list-filter",a)},"./src/shared/components/logo.js":function(e,t,s){"use strict";s.r(t);var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/shared/components/element.js");class a extends o.CustomElement{render(){return"overlayed"===i.api.settings.get("view_mode")?(0,r.html)`<svg class="converse-svg-logo" version="1.1" viewBox="0 0 364 364" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><title>Converse Logo</title><g class="cls-1" id="g904"><g data-name="Layer 2"><g data-name="Layer 7"><path class="cls-3" d="M221.46,103.71c0,18.83-29.36,18.83-29.12,0C192.1,84.88,221.46,84.88,221.46,103.71Z"/><path class="cls-4" d="M179.9,4.15A175.48,175.48,0,1,0,355.38,179.63,175.48,175.48,0,0,0,179.9,4.15Zm-40.79,264.5c-.23-17.82,27.58-17.82,27.58,0S138.88,286.48,139.11,268.65ZM218.6,168.24A79.65,79.65,0,0,1,205.15,174a12.76,12.76,0,0,0-6.29,4.65L167.54,222a1.36,1.36,0,0,1-2.46-.8v-35.8a2.58,2.58,0,0,0-3.06-2.53c-15.43,3-30.23,7.7-42.73,19.94-38.8,38-29.42,105.69,16.09,133.16a162.25,162.25,0,0,1-91.47-67.27C-3.86,182.26,34.5,47.25,138.37,25.66c46.89-9.75,118.25,5.16,123.73,62.83C265.15,120.64,246.56,152.89,218.6,168.24Z"/></g></g></g></svg>`:(0,r.html)`<svg class="converse-svg-logo" version="1.1" viewBox="0 0 364 364" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><title>Converse Logo</title><defs><linearGradient id="gradient" x1="92.14" y1="27.64" x2="267.65" y2="331.62" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#fff1d1"/><stop offset="0.05" stop-color="#fae8c1"/><stop offset="0.15" stop-color="#f0d5a1"/><stop offset="0.27" stop-color="#e7c687"/><stop offset="0.4" stop-color="#e1bb72"/><stop offset="0.54" stop-color="#dcb264"/><stop offset="0.71" stop-color="#daad5c"/><stop offset="1" stop-color="#d9ac59"/></linearGradient><filter id="shadow"><feGaussianBlur in="SourceAlpha" stdDeviation="2.3" result="blur1"/><feOffset in="blur1" dx="3" dy="3" result="blur2"/><feColorMatrix in="blur2" type="matrix" result="blur3" values="1 0 0 0 0.1                            0 1 0 0 0.1                            0 0 1 0 0.1                            0 0 0 1 0"/><feMerge><feMergeNode in="blur3"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g filter="url(#shadow)"><path d="M221.46,103.71c0,18.83-29.36,18.83-29.12,0C192.1,84.88,221.46,84.88,221.46,103.71Z" fill="#d9ac59"/><path d="M179.9,4.15A175.48,175.48,0,1,0,355.38,179.63,175.48,175.48,0,0,0,179.9,4.15Zm-40.79,264.5c-.23-17.82,27.58-17.82,27.58,0S138.88,286.48,139.11,268.65ZM218.6,168.24A79.65,79.65,0,0,1,205.15,174a12.76,12.76,0,0,0-6.29,4.65L167.54,222a1.36,1.36,0,0,1-2.46-.8v-35.8a2.58,2.58,0,0,0-3.06-2.53c-15.43,3-30.23,7.7-42.73,19.94-38.8,38-29.42,105.69,16.09,133.16a162.25,162.25,0,0,1-91.47-67.27C-3.86,182.26,34.5,47.25,138.37,25.66c46.89-9.75,118.25,5.16,123.73,62.83C265.15,120.64,246.56,152.89,218.6,168.24Z" fill="url(#gradient)"/></g></svg>`}}i.api.elements.define("converse-logo",a)},"./src/shared/components/message-versions.js":function(e,t,s){"use strict";s.r(t),s.d(t,{MessageVersions:()=>c});var r=s("./src/shared/components/element.js"),i=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js"),a=s("./src/i18n/index.js");s("./src/shared/components/styles/message-versions.scss");let{dayjs:l}=i.converse.env,d=(e,t)=>(0,o.html)`<p class="older-msg"><time>${l(e).format("MMM D, YYYY, HH:mm:ss")}</time>: ${t[e]}</p>`;class c extends r.CustomElement{static get properties(){return{model:{type:Object}}}constructor(){super(),this.model=null}render(){let e=this.model.get("older_versions"),t=Object.keys(e);return(0,o.html)`${t.length?(0,o.html)`<h4>${(0,a.__)("Older versions")}</h4>${t.map(t=>d(t,e))}`:(0,o.html)`<h4>${(0,a.__)("No older versions found")}</h4>`}<hr><h4>${(0,a.__)("Current version")}</h4><p><time>${l(this.model.get("time")).format("MMM D, YYYY, HH:mm:ss")}</time>: ${this.model.getMessageText()}</p>`}}i.api.elements.define("converse-message-versions",c)},"./src/shared/components/observable.js":function(e,t,s){"use strict";s.r(t),s.d(t,{ObservableElement:()=>o});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js");class o extends i.CustomElement{static get properties(){return{...super.properties,observable:{type:String},intersectionRatio:{type:Number}}}constructor(){super(),this.model=null,this.observable=null,this.isVisible=!1,this.observableThresholds=[0,.25,.5,.75,1],this.observableMargin="0px",this.intersectionRatio=.5,this.observableDelay=100}firstUpdated(e){super.firstUpdated(e),this.initIntersectionObserver()}disconnectedCallback(){super.disconnectedCallback(),this.intersectionObserver?.disconnect()}initIntersectionObserver(){this.observable&&!this.isVisible&&(this.intersectionObserver=new IntersectionObserver(e=>this.handleIntersectionCallback(e),{rootMargin:this.observableMargin,threshold:this.observableThresholds,delay:this.observableDelay}),this.intersectionObserver.observe(this))}alreadyHandled(){return"once"===this.observable&&this.isVisible}handleIntersectionCallback(e){if(!this.alreadyHandled())for(let t of e)Number(t.intersectionRatio.toFixed(2))>=this.intersectionRatio&&!this.alreadyHandled()&&("once"===this.observable&&this.intersectionObserver.disconnect(),this.isVisible=!0,r.api.trigger("visibilityChanged",{el:this,entry:t}),this.onVisibilityChanged(t))}onVisibilityChanged(e){}}},"./src/shared/components/spinner.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),i=s("./src/templates/spinner.js"),o=s("./src/shared/components/element.js");class a extends o.CustomElement{render(){return(0,i.default)()}}r.api.elements.define("converse-spinner",a)},"./src/shared/components/split-resize.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/shared/components/element.js");s("./src/shared/components/styles/split-resize.scss");let a="horizontal",l=()=>!1,d="undefined"!=typeof window?window:null;class c extends o.CustomElement{initialize(){super.initialize()}constructor(){super(),this.pair=null}render(){return(0,r.html)`<div class="gutter gutter-horizontal"></div>`}disconnectedCallback(){super.disconnectedCallback(),this.pair.gutter.removeEventListener("mousedown",this.pair._a),this.pair.gutter.removeEventListener("touchstart",this.pair._a)}updated(e){super.updated(e),this.pair||this.setupSplit([this.previousElementSibling,this.nextElementSibling])}getOption(e,t,s){let r=e[t];return void 0!==r?r:s}getElementStyle(e,t,s){let r={};return i.u.isString(t)?r[e]=t:r[e]=`calc(${t}% - ${s}px)`,r}defaultGutterStyleFn(e,t){return{[e]:`${t}px`}}getGutterSize(e,t,s,r){if(t){if("end"===r)return 0;if("center"===r)return e/2}else if(s){if("start"===r)return 0;if("center"===r)return e/2}return e}setElementSize(e,t,s){let r=this.getElementStyle(this.dimension,t,s);Object.keys(r).forEach(t=>{e.style[t]=r[t]})}getSizes(){return this.elements.map(e=>e.size)}getMousePosition(e){return"touches"in e?e.touches[0][this.clientAxis]:e[this.clientAxis]}adjust(e){let t=this.elements[this.pair.a],s=this.elements[this.pair.b],r=t.size+s.size;t.size=e/this.pair.size*r,s.size=r-e/this.pair.size*r,this.setElementSize(t.element,t.size,this.pair._b),this.setElementSize(s.element,s.size,this.pair._c)}drag(e,t){let s,r=this.elements[this.pair.a],i=this.elements[this.pair.b];this.pair.dragging&&(s=this.getMousePosition(e)-this.pair.start+(this.pair._b-this.pair.dragOffset),this.dragInterval>1&&(s=Math.round(s/this.dragInterval)*this.dragInterval),s<=r.minSize+r.snapOffset+this.pair._b?s=r.minSize+this.pair._b:s>=this.pair.size-(i.minSize+i.snapOffset+this.pair._c)&&(s=this.pair.size-(i.minSize+this.pair._c)),s>=r.maxSize-r.snapOffset+this.pair._b?s=r.maxSize+this.pair._b:s<=this.pair.size-(i.maxSize-i.snapOffset+this.pair._c)&&(s=this.pair.size-(i.maxSize+this.pair._c)),this.adjust(s),this.getOption(t,"onDrag",l)(this.getSizes()))}calculateSizes(e){let t=this.elements[e.a].element,s=this.elements[e.b].element,r=t.getBoundingClientRect(),i=s.getBoundingClientRect();e.size=r[this.dimension]+i[this.dimension]+e._b+e._c,e.start=r[this.position],e.end=r[this.positionEnd]}innerSize(e){if(!getComputedStyle)return null;let t=getComputedStyle(e);if(!t)return null;let s=e[this.clientSize];return 0===s?null:(this.direction===a?s-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight):s-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),s)}trimToMin(e){let t=this.innerSize(this.parent);if(null===t||this.minSizes.reduce((e,t)=>e+t,0)>t)return e;let s=0,r=[],i=e.map((i,o)=>{let a=t*i/100,l=this.getGutterSize(this.gutterSize,0===o,o===e.length-1,this.gutterAlign),d=this.minSizes[o]+l;return a<d?(s+=d-a,r.push(0),d):(r.push(a-d),a)});return 0===s?e:i.map((e,i)=>{let o=e;if(s>0&&r[i]-s>0){let t=Math.min(s,r[i]-s);s-=t,o=e-t}return o/t*100})}stopDragging(e){let t=this.elements[this.pair.a].element,s=this.elements[this.pair.b].element;this.pair.dragging&&this.getOption(e,"onDragEnd",l)(this.getSizes()),this.pair.dragging=!1,d.removeEventListener("mouseup",this.pair.stop),d.removeEventListener("touchend",this.pair.stop),d.removeEventListener("touchcancel",this.pair.stop),d.removeEventListener("mousemove",this.pair.move),d.removeEventListener("touchmove",this.pair.move),this.pair.stop=null,this.pair.move=null,t.removeEventListener("selectstart",l),t.removeEventListener("dragstart",l),s.removeEventListener("selectstart",l),s.removeEventListener("dragstart",l),t.style.userSelect="",t.style.pointerEvents="",s.style.userSelect="",s.style.pointerEvents="",this.pair.gutter.style.cursor="",this.pair.parent.style.cursor="",document.body.style.cursor=""}startDragging(e,t){if("button"in e&&0!==e.button)return;let s=this.elements[this.pair.a].element,r=this.elements[this.pair.b].element;this.pair.dragging||this.getOption(t,"onDragStart",l)(this.getSizes()),e.preventDefault(),this.pair.dragging=!0,this.pair.stop=()=>this.stopDragging(t),this.pair.move=e=>this.drag(e,t),d.addEventListener("mouseup",this.pair.stop),d.addEventListener("touchend",this.pair.stop),d.addEventListener("touchcancel",this.pair.stop),d.addEventListener("mousemove",this.pair.move),d.addEventListener("touchmove",this.pair.move),s.addEventListener("selectstart",l),s.addEventListener("dragstart",l),r.addEventListener("selectstart",l),r.addEventListener("dragstart",l),s.style.userSelect="none",s.style.pointerEvents="none",r.style.userSelect="none",r.style.pointerEvents="none",this.pair.gutter.style.cursor=this.cursor,this.pair.parent.style.cursor=this.cursor,document.body.style.cursor=this.cursor,this.calculateSizes(this.pair),this.pair.dragOffset=this.getMousePosition(e)-this.pair.end}adjustToMin(e){this.calculateSizes(this.pair),this.adjust(this.pair.size-e.minSize-this.pair._c)}setSizes(e){let t=this.trimToMin(e);t.forEach((e,s)=>{if(s>0){let r=this.elements[this.pair.a],i=this.elements[this.pair.b];r.size=t[s-1],i.size=e,this.setElementSize(r.element,r.size,this.pair._b),this.setElementSize(i.element,i.size,this.pair._c)}})}setupSplit(e,t={}){let s=(e=Array.from(e))[0];this.parent=s.parentElement;let r=this.getOption(t,"minSize",100);this.minSizes=Array.isArray(r)?r:e.map(()=>r);let i=this.getOption(t,"expandToMin",!1);this.gutterSize=this.getOption(t,"gutterSize",5),this.gutterAlign=this.getOption(t,"gutterAlign","center"),this.dragInterval=this.getOption(t,"dragInterval",1),this.direction=this.getOption(t,"direction",a),this.cursor=this.getOption(t,"cursor",this.direction===a?"col-resize":"row-resize"),this.direction===a?(this.dimension="width",this.clientAxis="clientX",this.position="left",this.positionEnd="right",this.clientSize="clientWidth"):"vertical"===this.direction&&(this.dimension="height",this.clientAxis="clientY",this.position="top",this.positionEnd="bottom",this.clientSize="clientHeight"),this.elements=e.map((s,r)=>this.createElement(e,s,r,t)),this.elements.forEach(e=>{let t=e.element.getBoundingClientRect()[this.dimension];t<e.minSize&&(i?this.adjustToMin(e):e.minSize=t)}),this.createPair(t)}createElement(e,t,s,r){let i=this.getOption(r,"sizes")||e.map(()=>100/e.length);i=this.trimToMin(i);let o=this.getOption(r,"maxSize",1/0),a=Array.isArray(o)?o:e.map(()=>o),l=this.getOption(r,"snapOffset",30),d=Array.isArray(l)?l:e.map(()=>l);return{element:t,size:i[s],minSize:this.minSizes[s],maxSize:a[s],snapOffset:d[s],i:s}}createPair(e){let t=getComputedStyle?getComputedStyle(this.parent):null,s=t?t.flexDirection:null;if(this.pair={a:0,b:1,dragging:!1,direction:this.direction,parent:this.parent},this.pair._b=this.getGutterSize(this.gutterSize,!0,!1,this.gutterAlign),this.pair._c=this.getGutterSize(this.gutterSize,!1,!0,this.gutterAlign),"row-reverse"===s||"column-reverse"===s){let e=this.pair.a;this.pair.a=this.pair.b,this.pair.b=e}let r=this.firstElementChild;this.pair._a=t=>this.startDragging(t,e),this.addEventListener("mousedown",this.pair._a),this.addEventListener("touchstart",this.pair._a),this.pair.gutter=r}}i.api.elements.define("converse-split-resize",c)},"./src/shared/components/templates/icons.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");let i=()=>(0,r.html)`<?xml version="1.0" encoding="UTF-8"?> <svg xmlns="http://www.w3.org/2000/svg" style="display:none"><symbol id="icon-filter" viewBox="0 0 512 512"><path d="M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"/></symbol><symbol id="icon-address-book" viewBox="0 0 448 512"><path d="M436 160c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h320c26.5 0 48-21.5 48-48v-48h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20zm-228-32c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zm112 236.8c0 10.6-10 19.2-22.4 19.2H118.4C106 384 96 375.4 96 364.8v-19.2c0-31.8 30.1-57.6 67.2-57.6h5c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h5c37.1 0 67.2 25.8 67.2 57.6v19.2z"></path></symbol><symbol id="icon-angle-double-down" viewBox="0 0 320 512"><path d="M143 256.3L7 120.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0L313 86.3c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.4 9.5-24.6 9.5-34 .1zm34 192l136-136c9.4-9.4 9.4-24.6 0-33.9l-22.6-22.6c-9.4-9.4-24.6-9.4-33.9 0L160 352.1l-96.4-96.4c-9.4-9.4-24.6-9.4-33.9 0L7 278.3c-9.4 9.4-9.4 24.6 0 33.9l136 136c9.4 9.5 24.6 9.5 34 .1z"></path></symbol><symbol id="icon-angle-double-left" viewBox="0 0 448 512"><path d="M223.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L319.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L393.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34zm-192 34l136 136c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9L127.9 256l96.4-96.4c9.4-9.4 9.4-24.6 0-33.9L201.7 103c-9.4-9.4-24.6-9.4-33.9 0l-136 136c-9.5 9.4-9.5 24.6-.1 34z"></path></symbol><symbol id="icon-angle-double-right" viewBox="0 0 448 512"><path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34zm192-34l-136-136c-9.4-9.4-24.6-9.4-33.9 0l-22.6 22.6c-9.4 9.4-9.4 24.6 0 33.9l96.4 96.4-96.4 96.4c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l136-136c9.4-9.2 9.4-24.4 0-33.8z"></path></symbol><symbol id="icon-angle-double-up" viewBox="0 0 320 512"><path d="M177 255.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 351.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 425.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1zm-34-192L7 199.7c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l96.4-96.4 96.4 96.4c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9l-136-136c-9.2-9.4-24.4-9.4-33.8 0z"></path></symbol><symbol id="icon-angle-down" viewBox="0 0 320 512"><path d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"></path></symbol><symbol id="icon-angle-left" viewBox="0 0 256 512"><path d="M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"></path></symbol><symbol id="icon-angle-right" viewBox="0 0 256 512"><path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"></path></symbol><symbol id="icon-angle-up" viewBox="0 0 320 512"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"></path></symbol><symbol id="icon-arrow-alt-circle-down" viewBox="0 0 512 512"><path d="M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zM212 140v116h-70.9c-10.7 0-16.1 13-8.5 20.5l114.9 114.3c4.7 4.7 12.2 4.7 16.9 0l114.9-114.3c7.6-7.6 2.2-20.5-8.5-20.5H300V140c0-6.6-5.4-12-12-12h-64c-6.6 0-12 5.4-12 12z"></path></symbol><symbol id="icon-arrow-alt-circle-left" viewBox="0 0 512 512"><path d="M256 504C119 504 8 393 8 256S119 8 256 8s248 111 248 248-111 248-248 248zm116-292H256v-70.9c0-10.7-13-16.1-20.5-8.5L121.2 247.5c-4.7 4.7-4.7 12.2 0 16.9l114.3 114.9c7.6 7.6 20.5 2.2 20.5-8.5V300h116c6.6 0 12-5.4 12-12v-64c0-6.6-5.4-12-12-12z"></path></symbol><symbol id="icon-arrow-alt-circle-right" viewBox="0 0 512 512"><path d="M256 8c137 0 248 111 248 248S393 504 256 504 8 393 8 256 119 8 256 8zM140 300h116v70.9c0 10.7 13 16.1 20.5 8.5l114.3-114.9c4.7-4.7 4.7-12.2 0-16.9l-114.3-115c-7.6-7.6-20.5-2.2-20.5 8.5V212H140c-6.6 0-12 5.4-12 12v64c0 6.6 5.4 12 12 12z"></path></symbol><symbol id="icon-arrow-alt-circle-up" viewBox="0 0 512 512"><path d="M8 256C8 119 119 8 256 8s248 111 248 248-111 248-248 248S8 393 8 256zm292 116V256h70.9c10.7 0 16.1-13 8.5-20.5L264.5 121.2c-4.7-4.7-12.2-4.7-16.9 0l-115 114.3c-7.6 7.6-2.2 20.5 8.5 20.5H212v116c0 6.6 5.4 12 12 12h64c6.6 0 12-5.4 12-12z"></path></symbol><symbol id="icon-arrow-circle-down" viewBox="0 0 512 512"><path d="M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-143.6-28.9L288 302.6V120c0-13.3-10.7-24-24-24h-16c-13.3 0-24 10.7-24 24v182.6l-72.4-75.5c-9.3-9.7-24.8-9.9-34.3-.4l-10.9 11c-9.4 9.4-9.4 24.6 0 33.9L239 404.3c9.4 9.4 24.6 9.4 33.9 0l132.7-132.7c9.4-9.4 9.4-24.6 0-33.9l-10.9-11c-9.5-9.5-25-9.3-34.3.4z"></path></symbol><symbol id="icon-arrow-circle-left" viewBox="0 0 512 512"><path d="M256 504C119 504 8 393 8 256S119 8 256 8s248 111 248 248-111 248-248 248zm28.9-143.6L209.4 288H392c13.3 0 24-10.7 24-24v-16c0-13.3-10.7-24-24-24H209.4l75.5-72.4c9.7-9.3 9.9-24.8.4-34.3l-11-10.9c-9.4-9.4-24.6-9.4-33.9 0L107.7 239c-9.4 9.4-9.4 24.6 0 33.9l132.7 132.7c9.4 9.4 24.6 9.4 33.9 0l11-10.9c9.5-9.5 9.3-25-.4-34.3z"></path></symbol><symbol id="icon-arrow-circle-right" viewBox="0 0 512 512"><path d="M256 8c137 0 248 111 248 248S393 504 256 504 8 393 8 256 119 8 256 8zm-28.9 143.6l75.5 72.4H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h182.6l-75.5 72.4c-9.7 9.3-9.9 24.8-.4 34.3l11 10.9c9.4 9.4 24.6 9.4 33.9 0L404.3 273c9.4-9.4 9.4-24.6 0-33.9L271.6 106.3c-9.4-9.4-24.6-9.4-33.9 0l-11 10.9c-9.5 9.6-9.3 25.1.4 34.4z"></path></symbol><symbol id="icon-arrow-circle-up" viewBox="0 0 512 512"><path d="M8 256C8 119 119 8 256 8s248 111 248 248-111 248-248 248S8 393 8 256zm143.6 28.9l72.4-75.5V392c0 13.3 10.7 24 24 24h16c13.3 0 24-10.7 24-24V209.4l72.4 75.5c9.3 9.7 24.8 9.9 34.3.4l10.9-11c9.4-9.4 9.4-24.6 0-33.9L273 107.7c-9.4-9.4-24.6-9.4-33.9 0L106.3 240.4c-9.4 9.4-9.4 24.6 0 33.9l10.9 11c9.6 9.5 25.1 9.3 34.4-.4z"></path></symbol><symbol id="icon-arrow-down" viewBox="0 0 448 512"><path d="M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"></path></symbol><symbol id="icon-arrow-left" viewBox="0 0 448 512"><path d="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"></path></symbol><symbol id="icon-arrow-right" viewBox="0 0 448 512"><path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"></path></symbol><symbol id="icon-arrow-up" viewBox="0 0 448 512"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"></path></symbol><symbol id="icon-arrows-alt" viewBox="0 0 512 512"><path d="M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z"></path></symbol><symbol id="icon-arrows-alt-h" viewBox="0 0 512 512"><path d="M377.941 169.941V216H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.568 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296h243.882v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.568 0-33.941l-86.059-86.059c-15.119-15.12-40.971-4.412-40.971 16.97z"></path></symbol><symbol id="icon-arrows-alt-v" viewBox="0 0 256 512"><path d="M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"></path></symbol><symbol id="icon-bars" viewBox="0 0 448 512"><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"></path></symbol><symbol id="icon-bookmark" viewBox="0 0 384 512"><path d="M0 512V48C0 21.49 21.49 0 48 0h288c26.51 0 48 21.49 48 48v464L192 400 0 512z"></path></symbol><symbol id="icon-bookmark-empty" viewBox="0 0 384 512"><path d="M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z"/></symbol><symbol id="icon-caret-down" viewBox="0 0 320 512"><path d="M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"></path></symbol><symbol id="icon-caret-right" viewBox="0 0 192 512"><path d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"></path></symbol><symbol id="icon-check" viewBox="0 0 512 512"><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"></path></symbol><symbol id="icon-circle" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></symbol><symbol id="icon-cog" viewBox="0 0 512 512"><path d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"></path></symbol><symbol id="icon-database" viewBox="0 0 448 512"><path d="M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"></path></symbol><symbol id="icon-edit" viewBox="0 0 576 512"><path d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"></path></symbol><symbol id="icon-eye" viewBox="0 0 576 512"><path d="M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"></path></symbol><symbol id="icon-eye-slash" viewBox="0 0 640 512"><path d="M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"></path></symbol><symbol id="icon-gavel" viewBox="0 0 512 512"><path d="M504.971 199.362l-22.627-22.627c-9.373-9.373-24.569-9.373-33.941 0l-5.657 5.657L329.608 69.255l5.657-5.657c9.373-9.373 9.373-24.569 0-33.941L312.638 7.029c-9.373-9.373-24.569-9.373-33.941 0L154.246 131.48c-9.373 9.373-9.373 24.569 0 33.941l22.627 22.627c9.373 9.373 24.569 9.373 33.941 0l5.657-5.657 39.598 39.598-81.04 81.04-5.657-5.657c-12.497-12.497-32.758-12.497-45.255 0L9.373 412.118c-12.497 12.497-12.497 32.758 0 45.255l45.255 45.255c12.497 12.497 32.758 12.497 45.255 0l114.745-114.745c12.497-12.497 12.497-32.758 0-45.255l-5.657-5.657 81.04-81.04 39.598 39.598-5.657 5.657c-9.373 9.373-9.373 24.569 0 33.941l22.627 22.627c9.373 9.373 24.569 9.373 33.941 0l124.451-124.451c9.372-9.372 9.372-24.568 0-33.941z"></path></symbol><symbol id="icon-globe" viewBox="0 0 496 512"><path d="M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"></path></symbol><symbol id="icon-id-card" viewBox="0 0 576 512"><path d="M528 32H48C21.5 32 0 53.5 0 80v16h576V80c0-26.5-21.5-48-48-48zM0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V128H0v304zm352-232c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zM176 192c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zM67.1 396.2C75.5 370.5 99.6 352 128 352h8.2c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h8.2c28.4 0 52.5 18.5 60.9 44.2 3.2 9.9-5.2 19.8-15.6 19.8H82.7c-10.4 0-18.8-10-15.6-19.8z"></path></symbol><symbol id="icon-id-card-alt" viewBox="0 0 576 512"><path d="M528 64H384v96H192V64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM288 224c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zm93.3 224H194.7c-10.4 0-18.8-10-15.6-19.8 8.3-25.6 32.4-44.2 60.9-44.2h8.2c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h8.2c28.4 0 52.5 18.5 60.9 44.2 3.2 9.8-5.2 19.8-15.6 19.8zM352 32c0-17.7-14.3-32-32-32h-64c-17.7 0-32 14.3-32 32v96h128V32z"></path></symbol><symbol id="icon-info" viewBox="0 0 192 512"><path d="M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"></path></symbol><symbol id="icon-info-circle" viewBox="0 0 512 512"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"></path></symbol><symbol id="icon-list-ul" viewBox="0 0 512 512"><path d="M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"></path></symbol><symbol id="icon-lock" viewBox="0 0 448 512"><path d="M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"></path></symbol><symbol id="icon-lock-open" viewBox="0 0 576 512"><path d="M423.5 0C339.5.3 272 69.5 272 153.5V224H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48h-48v-71.1c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v80c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-80C576 68 507.5-.3 423.5 0z"></path></symbol><symbol id="icon-minus" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></symbol><symbol id="icon-minus-circle" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"></path></symbol><symbol id="icon-minus-square" viewBox="0 0 448 512"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"></path></symbol><symbol id="icon-paper-plane" viewBox="0 0 512 512"><path d="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"></path></symbol><symbol id="icon-paperclip" viewBox="0 0 448 512"><path d="M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z"></path></symbol><symbol id="icon-pencil-alt" viewBox="0 0 512 512"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"></path></symbol><symbol id="icon-phone" viewBox="0 0 512 512"><path d="M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"></path></symbol><symbol id="icon-plus" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></symbol><symbol id="icon-plus-circle" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"></path></symbol><symbol id="icon-plus-square" viewBox="0 0 448 512"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"></path></symbol><symbol id="icon-save" viewBox="0 0 448 512"><path d="M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"></path></symbol><symbol id="icon-sign-out-alt" viewBox="0 0 512 512"><path d="M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"></path></symbol><symbol id="icon-smile" viewBox="0 0 496 512"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm80 168c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32zm-160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32zm194.8 170.2C334.3 380.4 292.5 400 248 400s-86.3-19.6-114.8-53.8c-13.6-16.3 11-36.7 24.6-20.5 22.4 26.9 55.2 42.2 90.2 42.2s67.8-15.4 90.2-42.2c13.4-16.2 38.1 4.2 24.6 20.5z"></path></symbol><symbol id="icon-snowflake" viewBox="0 0 448 512"><path d="M440.3 345.2l-33.8-19.5 26-7c8.2-2.2 13.1-10.7 10.9-18.9l-4-14.9c-2.2-8.2-10.7-13.1-18.9-10.9l-70.8 19-63.9-37 63.8-36.9 70.8 19c8.2 2.2 16.7-2.7 18.9-10.9l4-14.9c2.2-8.2-2.7-16.7-10.9-18.9l-26-7 33.8-19.5c7.4-4.3 9.9-13.7 5.7-21.1L430.4 119c-4.3-7.4-13.7-9.9-21.1-5.7l-33.8 19.5 7-26c2.2-8.2-2.7-16.7-10.9-18.9l-14.9-4c-8.2-2.2-16.7 2.7-18.9 10.9l-19 70.8-62.8 36.2v-77.5l53.7-53.7c6.2-6.2 6.2-16.4 0-22.6l-11.3-11.3c-6.2-6.2-16.4-6.2-22.6 0L256 56.4V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v40.4l-19.7-19.7c-6.2-6.2-16.4-6.2-22.6 0L138.3 48c-6.3 6.2-6.3 16.4 0 22.6l53.7 53.7v77.5l-62.8-36.2-19-70.8c-2.2-8.2-10.7-13.1-18.9-10.9l-14.9 4c-8.2 2.2-13.1 10.7-10.9 18.9l7 26-33.8-19.5c-7.4-4.3-16.8-1.7-21.1 5.7L2.1 145.7c-4.3 7.4-1.7 16.8 5.7 21.1l33.8 19.5-26 7c-8.3 2.2-13.2 10.7-11 19l4 14.9c2.2 8.2 10.7 13.1 18.9 10.9l70.8-19 63.8 36.9-63.8 36.9-70.8-19c-8.2-2.2-16.7 2.7-18.9 10.9l-4 14.9c-2.2 8.2 2.7 16.7 10.9 18.9l26 7-33.8 19.6c-7.4 4.3-9.9 13.7-5.7 21.1l15.5 26.8c4.3 7.4 13.7 9.9 21.1 5.7l33.8-19.5-7 26c-2.2 8.2 2.7 16.7 10.9 18.9l14.9 4c8.2 2.2 16.7-2.7 18.9-10.9l19-70.8 62.8-36.2v77.5l-53.7 53.7c-6.3 6.2-6.3 16.4 0 22.6l11.3 11.3c6.2 6.2 16.4 6.2 22.6 0l19.7-19.7V496c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-40.4l19.7 19.7c6.2 6.2 16.4 6.2 22.6 0l11.3-11.3c6.2-6.2 6.2-16.4 0-22.6L256 387.7v-77.5l62.8 36.2 19 70.8c2.2 8.2 10.7 13.1 18.9 10.9l14.9-4c8.2-2.2 13.1-10.7 10.9-18.9l-7-26 33.8 19.5c7.4 4.3 16.8 1.7 21.1-5.7l15.5-26.8c4.3-7.3 1.8-16.8-5.6-21z"></path></symbol><symbol id="icon-spinner" viewBox="0 0 512 512"><path d="M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"></path></symbol><symbol id="icon-sync" viewBox="0 0 512 512"><path d="M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"></path></symbol><symbol id="icon-times" viewBox="0 0 352 512"><path d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"></path></symbol><symbol id="icon-times-circle" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"></path></symbol><symbol id="icon-trash" viewBox="0 0 448 512"><path d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"></path></symbol><symbol id="icon-trash-alt" viewBox="0 0 448 512"><path d="M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"></path></symbol><symbol id="icon-unlock" viewBox="0 0 448 512"><path d="M400 256H152V152.9c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v16c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-16C376 68 307.5-.3 223.5 0 139.5.3 72 69.5 72 153.5V256H48c-26.5 0-48 21.5-48 48v160c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"></path></symbol><symbol id="icon-user" viewBox="0 0 448 512"><path d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"></path></symbol><symbol id="icon-user-cog" viewBox="0 0 640 512"><path d="M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"></path></symbol><symbol id="icon-user-plus" viewBox="0 0 640 512"><path d="M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"></path></symbol><symbol id="icon-user-secret" viewBox="0 0 448 512"><path d="M383.9 308.3l23.9-62.6c4-10.5-3.7-21.7-15-21.7h-58.5c11-18.9 17.8-40.6 17.8-64v-.3c39.2-7.8 64-19.1 64-31.7 0-13.3-27.3-25.1-70.1-33-9.2-32.8-27-65.8-40.6-82.8-9.5-11.9-25.9-15.6-39.5-8.8l-27.6 13.8c-9 4.5-19.6 4.5-28.6 0L182.1 3.4c-13.6-6.8-30-3.1-39.5 8.8-13.5 17-31.4 50-40.6 82.8-42.7 7.9-70 19.7-70 33 0 12.6 24.8 23.9 64 31.7v.3c0 23.4 6.8 45.1 17.8 64H56.3c-11.5 0-19.2 11.7-14.7 22.3l25.8 60.2C27.3 329.8 0 372.7 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-48.4-25.8-90.4-64.1-114.1zM176 480l-41.6-192 49.6 32 24 40-32 120zm96 0l-32-120 24-40 49.6-32L272 480zm41.7-298.5c-3.9 11.9-7 24.6-16.5 33.4-10.1 9.3-48 22.4-64-25-2.8-8.4-15.4-8.4-18.3 0-17 50.2-56 32.4-64 25-9.5-8.8-12.7-21.5-16.5-33.4-.8-2.5-6.3-5.7-6.3-5.8v-10.8c28.3 3.6 61 5.8 96 5.8s67.7-2.1 96-5.8v10.8c-.1.1-5.6 3.2-6.4 5.8z"></path></symbol><symbol id="icon-users" viewBox="0 0 640 512"><path d="M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"></path></symbol><symbol id="icon-wrench" viewBox="0 0 512 512"><path d="M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"></path></symbol><symbol id="icon-refresh" viewBox="0 0 512 512"><path d="M464 16c-17.67 0-32 14.31-32 32v74.09C392.1 66.52 327.4 32 256 32C161.5 32 78.59 92.34 49.58 182.2c-5.438 16.81 3.797 34.88 20.61 40.28c16.89 5.5 34.88-3.812 40.3-20.59C130.9 138.5 189.4 96 256 96c50.5 0 96.26 24.55 124.4 64H336c-17.67 0-32 14.31-32 32s14.33 32 32 32h128c17.67 0 32-14.31 32-32V48C496 30.31 481.7 16 464 16zM441.8 289.6c-16.92-5.438-34.88 3.812-40.3 20.59C381.1 373.5 322.6 416 256 416c-50.5 0-96.25-24.55-124.4-64H176c17.67 0 32-14.31 32-32s-14.33-32-32-32h-128c-17.67 0-32 14.31-32 32v144c0 17.69 14.33 32 32 32s32-14.31 32-32v-74.09C119.9 445.5 184.6 480 255.1 480c94.45 0 177.4-60.34 206.4-150.2C467.9 313 458.6 294.1 441.8 289.6z"></path></symbol><symbol id="icon-copy" viewBox="0 0 448 512"><path d="M320 448v40c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V120c0-13.3 10.7-24 24-24h72v296c0 30.9 25.1 56 56 56h168zm0-344V0H152c-13.3 0-24 10.7-24 24v368c0 13.3 10.7 24 24 24h272c13.3 0 24-10.7 24-24V128H344c-13.2 0-24-10.8-24-24zm121-31L375 7A24 24 0 0 0 358.1 0H352v96h96v-6.1a24 24 0 0 0 -7-17z"></path></symbol><symbol id="icon-quote-right" viewBox="0 0 512 512"><path d="M464 32H336c-26.5 0-48 21.5-48 48v128c0 26.5 21.5 48 48 48h80v64c0 35.3-28.7 64-64 64h-8c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h8c88.4 0 160-71.6 160-160V80c0-26.5-21.5-48-48-48zm-288 0H48C21.5 32 0 53.5 0 80v128c0 26.5 21.5 48 48 48h80v64c0 35.3-28.7 64-64 64h-8c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h8c88.4 0 160-71.6 160-160V80c0-26.5-21.5-48-48-48z"></path></symbol><symbol id="icon-bell" viewBox="0 0 512 512"><path d="M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"></path></symbol><symbol id="icon-bell-alt" viewBox="0 0 512 512"><path d="M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 25.4c0 45.4-15.5 89.5-43.8 124.9L5.3 377c-5.8 7.2-6.9 17.1-2.9 25.4S14.8 416 24 416l400 0c9.2 0 17.6-5.3 21.6-13.6s2.9-18.2-2.9-25.4l-14.9-18.6C399.5 322.9 384 278.8 384 233.4l0-25.4c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm0 96c61.9 0 112 50.1 112 112l0 25.4c0 47.9 13.9 94.6 39.7 134.6L72.3 368C98.1 328 112 281.3 112 233.4l0-25.4c0-61.9 50.1-112 112-112zm64 352l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7s18.7-28.3 18.7-45.3z"></path></symbol></svg>`},"./src/shared/constants.js":function(e,t,s){"use strict";s.r(t),s.d(t,{MOBILE_CUTOFF:()=>a,PRETTY_CHAT_STATUS:()=>o,VIEW_PLUGINS:()=>i});var r=s("./src/i18n/index.js");let i=["converse-adhoc-views","converse-bookmark-views","converse-chatboxviews","converse-chatview","converse-controlbox","converse-disco-views","converse-dragresize","converse-fullscreen","converse-headlines-view","converse-mam-views","converse-minimize","converse-modal","converse-muc-views","converse-notification","converse-omemo","converse-profile","converse-push","converse-register","converse-roomslist","converse-rootview","converse-rosterview","converse-singleton"],o={offline:(0,r.__)("Offline"),unavailable:(0,r.__)("Unavailable"),xa:(0,r.__)("Extended Away"),away:(0,r.__)("Away"),dnd:(0,r.__)("Do not disturb"),chat:(0,r.__)("Chatty"),online:(0,r.__)("Online")},a=768},"./src/shared/dom-navigator/dom-navigator.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/utils/html.js"),i=s("./src/headless/index.js"),o=s("./src/shared/dom-navigator/utils.js");let{keycodes:a}=i.converse;class l{static get DIRECTION(){return{down:"down",end:"end",home:"home",left:"left",right:"right",up:"up"}}static get DEFAULTS(){return{home:[`${a.SHIFT}${a.UP_ARROW}`],end:[`${a.SHIFT}${a.DOWN_ARROW}`],up:[a.UP_ARROW],down:[a.DOWN_ARROW],left:[a.LEFT_ARROW,`${a.SHIFT}${a.TAB}`],right:[a.RIGHT_ARROW,a.TAB],getSelector:null,jump_to_picked:null,jump_to_picked_direction:null,jump_to_picked_selector:"picked",onSelected:null,selected:"selected",selector:"li"}}static getClosestElement(e,t){return e.reduce((e,s)=>{let r=t(s);return r<e.distance?{distance:r,element:s}:e},{distance:1/0,element:null}).element}constructor(e,t){this.container=e,this.scroll_container=t.scroll_container||e,this.options=Object.assign({},l.DEFAULTS,t),this.init()}init(){this.selected=null,this.keydownHandler=null,this.elements={},this.keys={},this.options.down.forEach(e=>this.keys[e]=l.DIRECTION.down),this.options.end.forEach(e=>this.keys[e]=l.DIRECTION.end),this.options.home.forEach(e=>this.keys[e]=l.DIRECTION.home),this.options.left.forEach(e=>this.keys[e]=l.DIRECTION.left),this.options.right.forEach(e=>this.keys[e]=l.DIRECTION.right),this.options.up.forEach(e=>this.keys[e]=l.DIRECTION.up)}enable(){this.getElements(),this.keydownHandler=e=>this.handleKeydown(e),r.default.getRootElement().addEventListener("keydown",this.keydownHandler),this.enabled=!0}disable(){this.keydownHandler&&r.default.getRootElement().removeEventListener("keydown",this.keydownHandler),this.unselect(),this.elements={},this.enabled=!1}destroy(){this.disable()}getNextElement(e){let t;if(e===l.DIRECTION.home)t=this.getElements(e)[0];else if(e===l.DIRECTION.end)t=Array.from(this.getElements(e)).pop();else if(this.selected)if(e===l.DIRECTION.right){let s=this.getElements(e);t=s.slice(s.indexOf(this.selected))[1]}else if(e==l.DIRECTION.left){let s=this.getElements(e);t=s.slice(0,s.indexOf(this.selected)).pop()||this.selected}else if(e==l.DIRECTION.down){let e=this.selected.offsetLeft,s=this.selected.offsetTop+this.selected.offsetHeight,r=this.elementsAfter(0,s);t=l.getClosestElement(r,t=>Math.abs(t.offsetLeft-e)+Math.abs(t.offsetTop-s))}else if(e==l.DIRECTION.up){let e=this.selected.offsetLeft,s=this.selected.offsetTop-1,r=this.elementsBefore(1/0,s);t=l.getClosestElement(r,t=>Math.abs(e-t.offsetLeft)+Math.abs(s-t.offsetTop))}else throw Error("getNextElement: invalid direction value");else t=e===l.DIRECTION.right||e===l.DIRECTION.down?this.getElements(e)[1]:this.getElements(e)[0];return this.options.jump_to_picked&&t&&t.matches(this.options.jump_to_picked)&&e===this.options.jump_to_picked_direction&&(t=this.container.querySelector(this.options.jump_to_picked_selector)||t),t}select(e,t){e&&e!==this.selected&&(this.unselect(),t&&this.scrollTo(e,t),e.matches("input")?e.focus():r.default.addClass(this.options.selected,e),this.selected=e,this.options.onSelected&&this.options.onSelected(e))}unselect(){this.selected&&(r.default.removeClass(this.options.selected,this.selected),delete this.selected)}scrollTo(e,t){if(this.inScrollContainerViewport(e)){if(!(0,o.inViewport)(e))switch(t){case l.DIRECTION.left:document.body.scrollLeft=(0,o.absoluteOffsetLeft)(e)-document.body.offsetLeft;break;case l.DIRECTION.up:document.body.scrollTop=(0,o.absoluteOffsetTop)(e)-document.body.offsetTop;break;case l.DIRECTION.right:document.body.scrollLeft=(0,o.absoluteOffsetLeft)(e)-document.body.offsetLeft-(document.documentElement.clientWidth-e.offsetWidth);break;case l.DIRECTION.down:document.body.scrollTop=(0,o.absoluteOffsetTop)(e)-document.body.offsetTop-(document.documentElement.clientHeight-e.offsetHeight)}}else{let s=this.scroll_container;if(s.contains(e))switch(t){case l.DIRECTION.left:s.scrollLeft=e.offsetLeft-s.offsetLeft,s.scrollTop=e.offsetTop-s.offsetTop;break;case l.DIRECTION.up:s.scrollTop=e.offsetTop-s.offsetTop;break;case l.DIRECTION.right:s.scrollLeft=e.offsetLeft-s.offsetLeft-(s.offsetWidth-e.offsetWidth),s.scrollTop=e.offsetTop-s.offsetTop-(s.offsetHeight-e.offsetHeight);break;case l.DIRECTION.down:s.scrollTop=e.offsetTop-s.offsetTop-(s.offsetHeight-e.offsetHeight)}}}inScrollContainerViewport(e){let t=this.scroll_container;return!(e.offsetLeft-t.scrollLeft<t.offsetLeft)&&!(e.offsetTop-t.scrollTop<t.offsetTop)&&!(e.offsetLeft+e.offsetWidth-t.scrollLeft>t.offsetLeft+t.offsetWidth)&&!(e.offsetTop+e.offsetHeight-t.scrollTop>t.offsetTop+t.offsetHeight)}getElements(e){let t=this.options.getSelector?this.options.getSelector(e):this.options.selector;return this.elements[t]||(this.elements[t]=Array.from(this.container.querySelectorAll(t))),this.elements[t]}elementsAfter(e,t){return this.getElements(l.DIRECTION.down).filter(s=>s.offsetLeft>=e&&s.offsetTop>=t)}elementsBefore(e,t){return this.getElements(l.DIRECTION.up).filter(s=>s.offsetLeft<=e&&s.offsetTop<=t)}handleKeydown(e){let t=e.shiftKey?this.keys[`${a.SHIFT}${e.key}`]:this.keys[e.key];if(t){e.preventDefault(),e.stopPropagation();let s=this.getNextElement(t);this.select(s,t)}}}let d=l},"./src/shared/dom-navigator/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{DOMNavigator:()=>r.default});var r=s("./src/shared/dom-navigator/dom-navigator.js")},"./src/shared/dom-navigator/utils.js":function(e,t,s){"use strict";function r(e){let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=window.innerHeight&&t.right<=window.innerWidth}function i(e){let t=0;do isNaN(e.offsetTop)||(t+=e.offsetTop);while(e=e.offsetParent);return t}function o(e){let t=0;do isNaN(e.offsetLeft)||(t+=e.offsetLeft);while(e=e.offsetParent);return t}s.r(t),s.d(t,{absoluteOffsetLeft:()=>o,absoluteOffsetTop:()=>i,inViewport:()=>r})},"./src/shared/errors.js":function(e,t,s){"use strict";s.r(t),s.d(t,{IQError:()=>r,UserFacingError:()=>i});class r extends Error{constructor(e,t){super(e),this.name="IQError",this.iq=t}}class i extends Error{constructor(e){super(e),this.name="UserFacingError",this.user_facing=!0}}},"./src/shared/gif/component.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/shared/gif/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/headless/index.js"),a=s("./src/utils/html.js"),l=s("./node_modules/lit/index.js");s("./src/shared/gif/styles.scss");class d extends i.CustomElement{static get properties(){return{autoplay:{type:Boolean},noloop:{type:Boolean},progress_color:{type:String},fallback:{type:String},src:{type:String}}}constructor(){super(),this.src=null,this.autoplay=!1,this.noloop=!1,this.fallback="url",this.progress_color=null}initGIF(){let e={autoplay:this.autoplay,loop:!this.noloop};this.progress_color&&(e.progress_color=this.progress_color),this.supergif=new r.default(this,e)}updated(e){if(!this.supergif||e.has("src"))return void this.initGIF();e.has("autoplay")&&(this.supergif.options.autoplay=this.autoplay),e.has("noloop")&&(this.supergif.options.loop=!this.noloop),e.has("progress_color")&&(this.supergif.options.progress_color=this.progress_color)}render(){return this.supergif?.load_error&&["url","empty"].includes(this.fallback)?this.renderErrorFallback():(0,l.html)`<canvas class="gif-canvas" @mouseover="${()=>this.setHover()}" @mouseleave="${()=>this.unsetHover()}" @click="${e=>this.onControlsClicked(e)}"><img class="gif" src="${this.src}"></canvas>`}renderErrorFallback(){return"url"===this.fallback?(0,a.getHyperlinkTemplate)(this.src):"empty"===this.fallback?"":void 0}setHover(){this.supergif&&(this.supergif.hovering=!0,this.hover_timeout&&clearTimeout(this.hover_timeout),this.hover_timeout=setTimeout(()=>this.unsetHover(),2e3))}unsetHover(){this.supergif&&(this.supergif.hovering=!1)}onControlsClicked(e){e.preventDefault(),this.supergif.playing?this.supergif.pause():this.supergif.frames.length>0&&(this.supergif.options.loop=!0,this.supergif.play())}}o.api.elements.define("converse-gif",d)},"./src/shared/gif/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/log/index.js"),i=s("./node_modules/@converse/openpromise/dist/openpromise.js"),o=s("./node_modules/gifuct-js/lib/index.js");class a{constructor(e,t){this.options=Object.assign({width:null,height:null,autoplay:!0,loop:!0,show_progress_bar:!0,progress_bg_color:"rgba(0,0,0,0.4)",progress_color:"rgba(255,0,22,.8)",progress_bar_height:5},t),this.el=e,this.gif_el=e.querySelector("img"),this.canvas=e.querySelector("canvas"),this.ctx=this.canvas.getContext("2d"),this.offscreenCanvas=document.createElement("canvas"),this.patchCanvas=document.createElement("canvas"),this.ctx_scaled=!1,this.frames=[],this.load_error=null,this.playing=this.options.autoplay,this.frame_idx=0,this.iteration_count=0,this.start=null,this.hovering=null,this.frameImageData=null,this.disposal_restore_from_idx=null,this.initialize()}async initialize(){this.options.width&&this.options.height&&this.setSizes(this.options.width,this.options.height);let e=await this.fetchGIF(this.gif_el.src);requestAnimationFrame(()=>this.handleGIFResponse(e))}initPlayer(){!this.load_error&&(this.options.width&&this.options.height||this.ctx.scale(this.getCanvasScale(),this.getCanvasScale()),this.frame_idx=0,this.renderImage(),this.options.autoplay&&setTimeout(()=>this.play(),this.frames[this.frame_idx]?.delay??0))}getNextFrameNo(){return 0===this.frames.length?0:(this.frame_idx+1+this.frames.length)%this.frames.length}onIterationEnd(){return this.iteration_count++,this.options.onIterationEnd?.(this.el),!this.options.loop&&(this.pause(),!0)}onAnimationFrame(e,t,s){if(!this.playing)return;if(e-t<s){this.hovering?this.drawPauseIcon():this.renderImage(),requestAnimationFrame(e=>this.onAnimationFrame(e,t,s));return}let r=this.getNextFrameNo();if(0===r&&this.onIterationEnd())return;this.frame_idx=r,this.renderImage();let i=this.frames[this.frame_idx]?.delay||8;requestAnimationFrame(t=>this.onAnimationFrame(t,e,i))}setSizes(e,t){this.canvas.width=e*this.getCanvasScale(),this.canvas.height=t*this.getCanvasScale(),this.offscreenCanvas.width=e,this.offscreenCanvas.height=t,this.offscreenCanvas.style.width=e+"px",this.offscreenCanvas.style.height=t+"px",this.offscreenCanvas.getContext("2d").setTransform(1,0,0,1,0,0)}doShowProgress(e,t,s){if(s&&this.options.show_progress_bar){let s=this.options.progress_bar_height,r=(this.canvas.height-s)/(this.ctx_scaled?this.getCanvasScale():1),i=e/t*this.canvas.width/(this.ctx_scaled?this.getCanvasScale():1),o=this.canvas.width/(this.ctx_scaled?this.getCanvasScale():1);s/=this.ctx_scaled?this.getCanvasScale():1,this.ctx.fillStyle=this.options.progress_bg_color,this.ctx.fillRect(i,r,o-i,s),this.ctx.fillStyle=this.options.progress_color,this.ctx.fillRect(0,r,i,s)}}handleGIFResponse(e){try{let t=(0,o.parseGIF)(e);this.hdr=t.header,this.lsd=t.lsd,this.setSizes(this.options.width??this.lsd.width,this.options.height??this.lsd.height),this.frames=(0,o.decompressFrames)(t,!0)}catch(e){this.showError()}this.initPlayer(),this.options.autoplay||this.drawPlayIcon()}drawError(){this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.options.width,this.options.height),this.ctx.strokeStyle="red",this.ctx.lineWidth=3,this.ctx.moveTo(0,0),this.ctx.lineTo(this.options.width,this.options.height),this.ctx.moveTo(0,this.options.height),this.ctx.lineTo(this.options.width,0),this.ctx.stroke()}showError(){this.load_error=!0,this.hdr={width:this.gif_el.width,height:this.gif_el.height},this.frames=[],this.drawError(),this.el.requestUpdate()}manageDisposal(e){if(e<=0)return;let t=this.offscreenCanvas.getContext("2d"),s=this.frames[e-1].disposalType;e>1&&(3===s?null!=this.disposal_restore_from_idx&&t.putImageData(this.frames[this.disposal_restore_from_idx].data,0,0):this.disposal_restore_from_idx=e-1),2===s&&t.clearRect(this.last_frame.dims.left,this.last_frame.dims.top,this.last_frame.dims.width,this.last_frame.dims.height)}renderImage(e=!0){if(!this.frames.length)return;let t=this.frame_idx;((t=parseInt(t.toString(),10))>this.frames.length-1||t<0)&&(t=0),this.manageDisposal(t);let s=this.frames[t],r=this.patchCanvas.getContext("2d"),i=this.offscreenCanvas.getContext("2d"),o=s.dims;this.frameImageData&&o.width==this.frameImageData.width&&o.height==this.frameImageData.height||(this.patchCanvas.width=o.width,this.patchCanvas.height=o.height,this.frameImageData=r.createImageData(o.width,o.height)),this.frameImageData.data.set(s.patch),r.putImageData(this.frameImageData,0,0),i.drawImage(this.patchCanvas,o.left,o.top);let a=i.getImageData(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height);this.ctx.putImageData(a,0,0),this.ctx.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height),e&&this.hovering&&this.drawPauseIcon(),this.last_frame=s}play(){this.playing=!0,requestAnimationFrame(e=>this.onAnimationFrame(e,0,0))}pause(){this.playing=!1,requestAnimationFrame(()=>this.drawPlayIcon())}drawPauseIcon(){if(!this.playing)return;this.renderImage(!1),this.ctx.fillStyle="rgb(0, 0, 0, 0.25)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);let e=.1*this.canvas.height;this.ctx.lineWidth=.04*this.canvas.height,this.ctx.beginPath(),this.ctx.moveTo(this.canvas.width/2-e/2,this.canvas.height/2-e),this.ctx.lineTo(this.canvas.width/2-e/2,this.canvas.height/2+e),this.ctx.fillStyle="rgb(200, 200, 200, 0.75)",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.canvas.width/2+e/2,this.canvas.height/2-e),this.ctx.lineTo(this.canvas.width/2+e/2,this.canvas.height/2+e),this.ctx.fillStyle="rgb(200, 200, 200, 0.75)",this.ctx.stroke(),this.ctx.lineWidth=.02*this.canvas.height,this.ctx.strokeStyle="rgb(200, 200, 200, 0.75)",this.ctx.beginPath(),this.ctx.arc(this.canvas.width/2,this.canvas.height/2,1.5*e,0,2*Math.PI),this.ctx.stroke()}drawPlayIcon(){if(this.playing)return;this.renderImage(!1),this.ctx.fillStyle="rgb(0, 0, 0, 0.25)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);let e=.1*this.canvas.height,t=new Path2D;t.moveTo(this.canvas.width/2+e,this.canvas.height/2),t.lineTo(this.canvas.width/2-e/2,this.canvas.height/2+e),t.lineTo(this.canvas.width/2-e/2,this.canvas.height/2-e),t.closePath(),this.ctx.fillStyle="rgb(200, 200, 200, 0.75)",this.ctx.fill(t),this.ctx.lineWidth=.02*this.canvas.height,this.ctx.strokeStyle="rgb(200, 200, 200, 0.75)",this.ctx.beginPath(),this.ctx.arc(this.canvas.width/2,this.canvas.height/2,1.5*e,0,2*Math.PI),this.ctx.stroke()}getCanvasScale(){let e;return this.options.max_width&&this.hdr&&this.lsd.width>this.options.max_width?this.options.max_width/this.lsd.width:1}fetchGIF(e){let t=(0,i.getOpenPromise)(),s=new XMLHttpRequest;return s.open("GET",e,!0),s.responseType="arraybuffer",s?.overrideMimeType("text/plain; charset=x-user-defined"),s.onload=()=>{if(200!=s.status)return this.showError(),t.reject();t.resolve(s.response)},s.onprogress=e=>e.lengthComputable&&this.doShowProgress(e.loaded,e.total,!0),s.onerror=e=>{r.default.error(e),this.showError()},s.send(),t}}},"./src/shared/modals/image.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/plugins/modal/modal.js"),i=s("./src/shared/modals/templates/image.js"),o=s("./src/i18n/index.js"),a=s("./src/headless/index.js"),l=s("./src/utils/html.js"),d=s("./node_modules/lit/index.js");s("./src/shared/modals/styles/image.scss");class c extends r.default{constructor(e){super(e),this.src=e.src}renderModal(){return(0,i.default)({src:this.src})}getModalTitle(){return(0,d.html)`${(0,o.__)("Image: ")}<a target="_blank" rel="noopener" href="${this.src}">${(0,l.getFileName)(this.src)}</a>`}}a.api.elements.define("converse-image-modal",c)},"./src/shared/modals/message-versions.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l}),s("./src/shared/components/message-versions.js");var r=s("./src/plugins/modal/modal.js"),i=s("./src/i18n/index.js"),o=s("./node_modules/lit/index.js"),a=s("./src/headless/index.js");class l extends r.default{renderModal(){return(0,o.html)`<converse-message-versions .model="${this.model}"></converse-message-versions>`}getModalTitle(){return(0,i.__)("Message versions")}}a.api.elements.define("converse-message-versions-modal",l)},"./src/shared/modals/templates/image.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");let i=e=>(0,r.html)`<img class="chat-image chat-image--modal" src="${e.src}">`},"./src/shared/modals/templates/user-details.js":function(e,t,s){"use strict";s.r(t),s.d(t,{tplUserDetailsModal:()=>u});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/until.js"),o=s("./src/headless/index.js"),a=s("./src/plugins/rosterview/utils.js"),l=s("./src/i18n/index.js");let{Strophe:d}=o.converse.env;function c(e){let t=(0,l.__)("Add to blocklist");return(0,r.html)`<button type="button" @click="${t=>e.blockContact(t)}" class="btn btn-danger"><converse-icon class="fas fa-list-ul" color="var(--background-color)" size="1em"></converse-icon>${t}</button>`}function u(e){let t=e.model?.vcard,s=t?t.toJSON():{},u={...e.model.toJSON(),...s},h=e.getContact(),m=h&&!h.isUnsaved(),f=o.api.settings.get("allow_contact_removal"),p=o._converse.session.get("domain"),g=o.api.disco.supports(d.NS.BLOCKING,p).then(async t=>{let s=await o.api.blocklist.get();t&&(s.get(e.model.get("jid"))?function(e){let t=(0,l.__)("Remove from blocklist");(0,r.html)`<button type="button" @click="${t=>e.unblockContact(t)}" class="btn btn-danger"><converse-icon class="fas fa-times" color="var(--background-color)" size="1em"></converse-icon>${t}</button>`}(e):c(e))}),_=(0,l.__)("XMPP Address"),v=(0,l.__)("Email"),y=(0,l.__)("Full Name"),b=(0,l.__)("Nickname"),j=(0,l.__)("Role"),w=(0,l.__)("URL"),S=(0,l.__)("Groups"),x=(0,l.__)("Use commas to separate multiple values"),E=(0,l.__)("OMEMO"),A=(0,l.__)("Profile"),C=(0,l.__)("Edit"),k=[(0,r.html)`<li role="presentation" class="nav-item"><a class="nav-link ${"profile"===e.tab?"active":""}" id="profile-tab" href="#profile-tabpanel" aria-controls="profile-tabpanel" role="tab" @click="${t=>e.switchTab(t)}" data-name="profile" data-toggle="tab">${A}</a></li>`];m&&k.push((0,r.html)`<li role="presentation" class="nav-item"><a class="nav-link ${"edit"===e.tab?"active":""}" id="edit-tab" href="#edit-tabpanel" aria-controls="edit-tabpanel" role="tab" @click="${t=>e.switchTab(t)}" data-name="edit" data-toggle="tab">${C}</a></li>`),o._converse.pluggable.plugins["converse-omemo"]?.enabled(o._converse)&&k.push((0,r.html)`<li role="presentation" class="nav-item"><a class="nav-link ${"omemo"===e.tab?"active":""}" id="omemo-tab" href="#omemo-tabpanel" aria-controls="omemo-tabpanel" role="tab" @click="${t=>e.switchTab(t)}" data-name="omemo" data-toggle="tab">${E}</a></li>`);let $=h?.get("nickname")||h?.vcard?.get("fullname"),T=h?.get("groups")||[];return(0,r.html)`<ul class="nav nav-pills justify-content-center">${k}</ul><div class="tab-content"><div class="tab-pane ${"profile"===e.tab?"active":""}" id="profile-tabpanel" role="tabpanel" aria-labelledby="profile-tab"><div class="mb-4 centered"><converse-avatar .model="${e.model}" name="${e.model.getDisplayName()}" height="140" width="140"></converse-avatar></div>${u.fullname?(0,r.html)`<div class="row mb-2"><div class="col-sm-4"><label>${y}:</label></div><div class="col-sm-8">${u.fullname}</div></div>`:""}<div class="row mb-2"><div class="col-sm-4"><label>${_}:</label></div><div class="col-sm-8"><a href="xmpp:${u.jid}">${u.jid}</a></div></div>${h?(0,r.html)`<div class="row mb-2"><div class="col-sm-4"><label>${(0,l.__)("Presence")}:</label></div><div class="col-sm-8">${function(e){let t=e?.get("subscription");return"none"===t?(0,l.__)("Neither of you receive presence updates"):"to"===t?(0,l.__)("Only you receive presence updates"):"from"===t?(0,l.__)("Only they receive presence updates"):"both"===t?(0,l.__)("Both of you receive presence updates"):""}(h)}</div></div>`:""} ${u.nickname?(0,r.html)`<div class="row mb-2"><div class="col-sm-4"><label>${b}:</label></div><div class="col-sm-8">${u.nickname}</div></div>`:""} ${u.url?(0,r.html)`<div class="row mb-2"><div class="col-sm-4"><label>${w}:</label></div><div class="col-sm-8"><a target="_blank" rel="noopener" href="${u.url}">${u.url}</a></div></div>`:""} ${u.email?(0,r.html)`<div class="row mb-2"><div class="col-sm-4"><label>${v}:</label></div><div class="col-sm-8"><a href="mailto:${u.email}">${u.email}</a></div></div>`:""} ${u.role?(0,r.html)`<div class="row mb-2"><div class="col-sm-4"><label>${j}:</label></div><div class="col-sm-8">${u.role}</div></div>`:""} ${T.length?(0,r.html)`<div class="row mb-2"><div class="col-sm-4"><label>${S}:</label></div><div class="col-sm-8">${T.map(e=>(0,r.html)`<span class="badge badge-roster-group me-1">${e}</span>`)}</div></div>`:""} ${h?.get("requesting")||!m||!h?(0,r.html)`<hr>`:""} ${h?.get("requesting")?(0,r.html)`<div class="row mb-2"><div class="col-sm-4"><label>${(0,l.__)("Contact Request")}:</label></div><div class="col-sm-8">${function(e){let t=(0,l.__)("Accept");return(0,r.html)`<button type="button" @click="${t=>e.acceptContactRequest(t)}" class="btn btn-success accept-contact-request"><converse-icon class="fas fa-user-plus" color="var(--background-color)" size="1em"></converse-icon>${t}</button>`}(e)} ${function(e){let t=(0,l.__)("Decline");return(0,r.html)`<button type="button" @click="${t=>e.declineContactRequest(t)}" class="btn btn-danger decline-contact-request"><converse-icon class="fas fa-user-plus" color="var(--background-color)" size="1em"></converse-icon>${t}</button>`}(e)}</div></div>`:""} ${!m?function(e){let t=(0,l.__)("Add as contact");return(0,r.html)`<button type="button" @click="${t=>e.addContact(t)}" class="btn btn-success add-contact"><converse-icon class="fas fa-user-plus" color="var(--background-color)" size="1em"></converse-icon>${t}</button>`}(e):""} ${!h?(0,i.until)(g.then(()=>c(e)),""):""}</div>${m?(0,r.html)`<div class="tab-pane ${"edit"===e.tab?"active":""}" id="edit-tabpanel" role="tabpanel" aria-labelledby="edit-tab">${"edit"===e.tab?(0,r.html)`<form class="converse-form" @submit="${t=>e.updateContact(t)}"><div class="mb-3"><label class="form-label clearfix" for="name">${(0,l.__)("Name")}:</label> <input type="text" name="name" value="${$}" class="form-control"></div><div class="mb-3"><label class="form-label clearfix" for="name">${S}:</label><div class="mb-1"><small class="form-text text-muted">${x}</small></div><converse-autocomplete .list="${(0,a.getGroupsAutoCompleteList)()}" name="groups" value="${T}"></converse-autocomplete></div><button type="submit" class="btn btn-primary">${(0,l.__)("Update")}</button></form><hr>${f&&m?function(e){let t=(0,l.__)("Remove as contact");return(0,r.html)`<button type="button" @click="${t=>e.removeContact(t)}" class="btn btn-danger remove-contact"><converse-icon class="fas fa-trash-alt" color="var(--background-color)" size="1em"></converse-icon>${t}</button>`}(e):""} ${(0,i.until)(g.then(()=>c(e)),"")}`:""}</div>`:""} ${o._converse.pluggable.plugins["converse-omemo"]?.enabled(o._converse)?(0,r.html)`<div class="tab-pane ${"omemo"===e.tab?"active":""}" id="omemo-tabpanel" role="tabpanel" aria-labelledby="omemo-tab">${"omemo"===e.tab?(0,r.html)`<converse-omemo-fingerprints jid="${u.jid}"></converse-omemo-fingerprints>`:""}</div>`:""}</div>`}},"./src/shared/modals/user-details.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),i=s("./src/plugins/rosterview/utils.js"),o=s("./src/plugins/modal/modal.js");s("./src/i18n/index.js");var a=s("./src/shared/modals/templates/user-details.js");s("./src/shared/modals/styles/user-details.scss");class l extends o.default{constructor(e){super(e),this.tab="profile"}initialize(){super.initialize(),this.addListeners(),r.api.trigger("userDetailsModalInitialized",this.model)}addListeners(){this.listenTo(this.model,"change",()=>this.requestUpdate()),this.model instanceof r._converse.exports.ChatBox?(this.model.rosterContactAdded.then(()=>this.registerContactEventHandlers(this.model.contact)),this.registerContactEventHandlers(this.model.contact)):this.registerContactEventHandlers(this.model)}getContact(){return this.model instanceof r._converse.exports.ChatBox?this.model.contact:this.model}shouldUpdate(e){return e.has("model")&&this.model&&(this.stopListening(),this.addListeners(),this.tab="profile",this.requestUpdate()),!0}renderModal(){return(0,a.tplUserDetailsModal)(this)}getModalTitle(){return this.model.getDisplayName()}registerContactEventHandlers(e){e&&(this.listenTo(e,"change",()=>this.requestUpdate()),this.listenTo(e,"destroy",()=>this.close()),this.listenTo(e.vcard,"change",()=>this.requestUpdate()),e.vcard&&r.api.vcard.update(e.vcard,!0))}async addContact(e){e?.preventDefault?.(),this.modal.hide(),r.api.modal.show("converse-add-contact-modal",{contact:this.model},e)}async updateContact(e){e?.preventDefault?.();let t=new FormData(e.target),s=(t.get("name")||"").trim(),r=t.get("groups")?.split(",").map(e=>e.trim())||[];this.getContact().update({nickname:s,groups:r}),this.modal.hide()}async removeContact(e){e?.preventDefault?.(),setTimeout(()=>(0,i.removeContact)(this.getContact()),1),this.modal.hide()}async blockContact(e){e?.preventDefault?.(),setTimeout(()=>(0,i.blockContact)(this.getContact()),1),this.modal.hide()}async unblockContact(e){e?.preventDefault?.(),setTimeout(()=>(0,i.unblockContact)(this.getContact()),1),this.modal.hide()}async acceptContactRequest(e){e?.preventDefault?.(),setTimeout(()=>{r.api.modal.show("converse-accept-contact-request-modal",{contact:this.getContact()},e)}),this.modal.hide()}async declineContactRequest(e){e?.preventDefault?.(),setTimeout(()=>(0,i.declineContactRequest)(this.getContact())),this.modal.hide()}}r.api.elements.define("converse-user-details-modal",l)},"./src/shared/qrcode/component.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/shared/components/element.js"),a=s("./src/shared/qrcode/generator.js"),l=s("./src/shared/qrcode/constants.js");s("./src/shared/qrcode/qrcode.scss");class d extends o.CustomElement{static get properties(){return{text:{type:String},width:{type:String},height:{type:String}}}#f;constructor(){super(),this.#f=null,this.text=null,this.width="200px",this.height="200px",this.colorDark="#000000",this.colorLight="#ffffff",this.correctLevel=l.QRErrorCorrectLevelMap.H}render(){let e=this.#f.getModuleCount(),t=[];for(let s=0;s<e;s++)for(let i=0;i<e;i++)this.#f.isDark(s,i)&&t.push((0,r.svg)`<use x="${s}" y="${i}" href="#template"></use>`);return(0,r.svg)`<svg viewBox="0 0 ${e} ${e}" width="${this.width}" height="${this.height}" fill="${this.colorLight}"><rect fill="${this.colorLight}" width="100%" height="100%"></rect><rect fill="${this.colorDark}" width="1" height="1" id="template"></rect>${t}</svg>`}shouldUpdate(e){return!this.#f||e.has("text")||e.has("correctLevel")?(this.title=this.text,this.#f=new a.QRCodeModel(this.text,this.correctLevel),this.#f.make(),super.shouldUpdate(e)||!0):super.shouldUpdate(e)}}i.api.elements.define("converse-qr-code",d);let c=d},"./src/shared/qrcode/constants.js":function(e,t,s){"use strict";s.r(t),s.d(t,{PATTERN_POSITION_TABLE:()=>l,QRCodeLimitLength:()=>a,QRErrorCorrectLevelMap:()=>r,QRMaskPattern:()=>o,QRMode:()=>i,RS_BLOCK_TABLE:()=>d});let r={L:1,M:0,Q:3,H:2},i={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],l=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],d=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]]},"./src/shared/qrcode/generator.js":function(e,t,s){"use strict";s.r(t),s.d(t,{QRCodeModel:()=>a});var r=s("./src/shared/qrcode/constants.js"),i=s("./src/shared/qrcode/polynomial.js"),o=s("./src/shared/qrcode/utils.js");class a{constructor(e,t){this.text=e,this.errorCorrectLevel=t,this.typeNumber=(0,o.getTypeNumber)(this.text,this.errorCorrectLevel),this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[new l(this.text)]}static get PAD0(){return 236}static get PAD1(){return 17}isDark(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw Error(e+","+t);return this.modules[e][t]}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(let e=0;e<this.moduleCount;e++){this.modules[e]=Array(this.moduleCount);for(let t=0;t<this.moduleCount;t++)this.modules[e][t]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=a.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)}setupPositionProbePattern(e,t){for(let s=-1;s<=7;s++)if(!(e+s<=-1)&&!(this.moduleCount<=e+s))for(let r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(0<=s&&s<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==s||6==s)||2<=s&&s<=4&&2<=r&&r<=4?this.modules[e+s][t+r]=!0:this.modules[e+s][t+r]=!1)}getBestMaskPattern(){let e=0,t=0;for(let s=0;s<8;s++){this.makeImpl(!0,s);let r=o.QRUtil.getLostPoint(this);(0==s||e>r)&&(e=r,t=s)}return t}setupTimingPattern(){for(let e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(let e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)}setupPositionAdjustPattern(){let e=o.QRUtil.getPatternPosition(this.typeNumber);for(let t=0;t<e.length;t++)for(let s=0;s<e.length;s++){let r=e[t],i=e[s];if(null==this.modules[r][i])for(let e=-2;e<=2;e++)for(let t=-2;t<=2;t++)-2==e||2==e||-2==t||2==t||0==e&&0==t?this.modules[r+e][i+t]=!0:this.modules[r+e][i+t]=!1}}setupTypeNumber(e){let t=o.QRUtil.getBCHTypeNumber(this.typeNumber);for(let s=0;s<18;s++){let r=!e&&(t>>s&1)==1;this.modules[Math.floor(s/3)][s%3+this.moduleCount-8-3]=r}for(let s=0;s<18;s++){let r=!e&&(t>>s&1)==1;this.modules[s%3+this.moduleCount-8-3][Math.floor(s/3)]=r}}setupTypeInfo(e,t){let s=this.errorCorrectLevel<<3|t,r=o.QRUtil.getBCHTypeInfo(s);for(let t=0;t<15;t++){let s=!e&&(r>>t&1)==1;t<6?this.modules[t][8]=s:t<8?this.modules[t+1][8]=s:this.modules[this.moduleCount-15+t][8]=s}for(let t=0;t<15;t++){let s=!e&&(r>>t&1)==1;t<8?this.modules[8][this.moduleCount-t-1]=s:t<9?this.modules[8][15-t-1+1]=s:this.modules[8][15-t-1]=s}this.modules[this.moduleCount-8][8]=!e}mapData(e,t){let s=-1,r=this.moduleCount-1,i=7,a=0;for(let l=this.moduleCount-1;l>0;l-=2)for(6==l&&l--;;){for(let s=0;s<2;s++)if(null==this.modules[r][l-s]){let d=!1;a<e.length&&(d=(e[a]>>>i&1)==1),o.QRUtil.getMask(t,r,l-s)&&(d=!d),this.modules[r][l-s]=d,-1==--i&&(a++,i=7)}if((r+=s)<0||this.moduleCount<=r){r-=s,s=-s;break}}}static createData(e,t,s){let r=d.getRSBlocks(e,t),i=new c;for(let t=0;t<s.length;t++){let r=s[t];i.put(r.mode,4),i.put(r.getLength(),o.QRUtil.getLengthInBits(r.mode,e)),r.write(i)}let l=0;for(let e=0;e<r.length;e++)l+=r[e].dataCount;if(i.getLengthInBits()>8*l)throw Error("code length overflow. ("+i.getLengthInBits()+">"+8*l+")");for(i.getLengthInBits()+4<=8*l&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*l)&&(i.put(a.PAD0,8),!(i.getLengthInBits()>=8*l));){;i.put(a.PAD1,8)}return a.createBytes(i,r)}static createBytes(e,t){let s=0,r=0,a=0,l=Array(t.length),d=Array(t.length);for(let c=0;c<t.length;c++){let u=t[c].dataCount,h=t[c].totalCount-u;r=Math.max(r,u),a=Math.max(a,h),l[c]=Array(u);for(let t=0;t<l[c].length;t++)l[c][t]=255&e.buffer[t+s];s+=u;let m=o.QRUtil.getErrorCorrectPolynomial(h),f=new i.default(l[c],m.getLength()-1).mod(m);d[c]=Array(m.getLength()-1);for(let e=0;e<d[c].length;e++){let t=e+f.getLength()-d[c].length;d[c][e]=t>=0?f.get(t):0}}let c=0;for(let e=0;e<t.length;e++)c+=t[e].totalCount;let u=Array(c),h=0;for(let e=0;e<r;e++)for(let s=0;s<t.length;s++)e<l[s].length&&(u[h++]=l[s][e]);for(let e=0;e<a;e++)for(let s=0;s<t.length;s++)e<d[s].length&&(u[h++]=d[s][e]);return u}}class l{constructor(e){this.mode=r.QRMode.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(let e=0,t=this.data.length;e<t;e++){let t=[],s=this.data.charCodeAt(e);s>65536?(t[0]=240|(1835008&s)>>>18,t[1]=128|(258048&s)>>>12,t[2]=128|(4032&s)>>>6,t[3]=128|63&s):s>2048?(t[0]=224|(61440&s)>>>12,t[1]=128|(4032&s)>>>6,t[2]=128|63&s):s>128?(t[0]=192|(1984&s)>>>6,t[1]=128|63&s):t[0]=s,this.parsedData.push(t)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}getLength(){return this.parsedData.length}write(e){for(let t=0,s=this.parsedData.length;t<s;t++)e.put(this.parsedData[t],8)}}class d{constructor(e,t){this.totalCount=e,this.dataCount=t}static getRSBlocks(e,t){let s=d.getRsBlockTable(e,t);if(void 0==s)throw Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);let r=s.length/3,i=[];for(let e=0;e<r;e++){let t=s[3*e+0],r=s[3*e+1],o=s[3*e+2];for(let e=0;e<t;e++)i.push(new d(r,o))}return i}static getRsBlockTable(e,t){switch(t){case r.QRErrorCorrectLevelMap.L:return r.RS_BLOCK_TABLE[(e-1)*4+0];case r.QRErrorCorrectLevelMap.M:return r.RS_BLOCK_TABLE[(e-1)*4+1];case r.QRErrorCorrectLevelMap.Q:return r.RS_BLOCK_TABLE[(e-1)*4+2];case r.QRErrorCorrectLevelMap.H:return r.RS_BLOCK_TABLE[(e-1)*4+3];default:return}}}class c{constructor(){this.buffer=[],this.length=0}get(e){let t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1}put(e,t){for(let s=0;s<t;s++)this.putBit((e>>>t-s-1&1)==1)}getLengthInBits(){return this.length}putBit(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}}},"./src/shared/qrcode/polynomial.js":function(e,t,s){"use strict";s.r(t),s.d(t,{QRMath:()=>o,default:()=>i});class r{constructor(e,t){if(void 0==e.length)throw Error(e.length+"/"+t);let s=0;for(;s<e.length&&0==e[s];)s++;this.num=Array(e.length-s+t);for(let t=0;t<e.length-s;t++)this.num[t]=e[t+s]}get(e){return this.num[e]}getLength(){return this.num.length}multiply(e){let t=Array(this.getLength()+e.getLength()-1);for(let s=0;s<this.getLength();s++)for(let r=0;r<e.getLength();r++)t[s+r]^=o.gexp(o.glog(this.get(s))+o.glog(e.get(r)));return new r(t,0)}mod(e){if(this.getLength()-e.getLength()<0)return this;let t=o.glog(this.get(0))-o.glog(e.get(0)),s=Array(this.getLength());for(let e=0;e<this.getLength();e++)s[e]=this.get(e);for(let r=0;r<e.getLength();r++)s[r]^=o.gexp(o.glog(e.get(r))+t);return new r(s,0).mod(e)}}let i=r,o={glog:function(e){if(e<1)throw Error("glog("+e+")");return o.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return o.EXP_TABLE[e]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)};for(let e=0;e<8;e++)o.EXP_TABLE[e]=1<<e;for(let e=8;e<256;e++)o.EXP_TABLE[e]=o.EXP_TABLE[e-4]^o.EXP_TABLE[e-5]^o.EXP_TABLE[e-6]^o.EXP_TABLE[e-8];for(let e=0;e<255;e++)o.LOG_TABLE[o.EXP_TABLE[e]]=e},"./src/shared/qrcode/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{QRUtil:()=>a,getTypeNumber:()=>o});var r=s("./src/shared/qrcode/constants.js"),i=s("./src/shared/qrcode/polynomial.js");function o(e,t){var s;let i,o=1,a=(i=encodeURI(s=e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a")).length+3*(i.length!=s);for(let e=0,s=r.QRCodeLimitLength.length;e<=s;e++){let s=0;switch(t){case r.QRErrorCorrectLevelMap.L:s=r.QRCodeLimitLength[e][0];break;case r.QRErrorCorrectLevelMap.M:s=r.QRCodeLimitLength[e][1];break;case r.QRErrorCorrectLevelMap.Q:s=r.QRCodeLimitLength[e][2];break;case r.QRErrorCorrectLevelMap.H:s=r.QRCodeLimitLength[e][3]}if(a<=s)break;o++}if(o>r.QRCodeLimitLength.length)throw Error("Too long data");return o}let a={G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo(e){let t=e<<10;for(;a.getBCHDigit(t)-a.getBCHDigit(a.G15)>=0;)t^=a.G15<<a.getBCHDigit(t)-a.getBCHDigit(a.G15);return(e<<10|t)^a.G15_MASK},getBCHTypeNumber(e){let t=e<<12;for(;a.getBCHDigit(t)-a.getBCHDigit(a.G18)>=0;)t^=a.G18<<a.getBCHDigit(t)-a.getBCHDigit(a.G18);return e<<12|t},getBCHDigit(e){let t=0;for(;0!=e;)t++,e>>>=1;return t},getPatternPosition:e=>r.PATTERN_POSITION_TABLE[e-1],getMask(e,t,s){switch(e){case r.QRMaskPattern.PATTERN000:return(t+s)%2==0;case r.QRMaskPattern.PATTERN001:return t%2==0;case r.QRMaskPattern.PATTERN010:return s%3==0;case r.QRMaskPattern.PATTERN011:return(t+s)%3==0;case r.QRMaskPattern.PATTERN100:return(Math.floor(t/2)+Math.floor(s/3))%2==0;case r.QRMaskPattern.PATTERN101:return t*s%2+t*s%3==0;case r.QRMaskPattern.PATTERN110:return(t*s%2+t*s%3)%2==0;case r.QRMaskPattern.PATTERN111:return(t*s%3+(t+s)%2)%2==0;default:throw Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial(e){let t=new i.default([1],0);for(let s=0;s<e;s++)t=t.multiply(new i.default([1,i.QRMath.gexp(s)],0));return t},getLengthInBits(e,t){if(1<=t&&t<10)switch(e){case r.QRMode.MODE_NUMBER:return 10;case r.QRMode.MODE_ALPHA_NUM:return 9;case r.QRMode.MODE_8BIT_BYTE:case r.QRMode.MODE_KANJI:return 8;default:throw Error("mode:"+e)}if(t<27)switch(e){case r.QRMode.MODE_NUMBER:return 12;case r.QRMode.MODE_ALPHA_NUM:return 11;case r.QRMode.MODE_8BIT_BYTE:return 16;case r.QRMode.MODE_KANJI:return 10;default:throw Error("mode:"+e)}if(t<41)switch(e){case r.QRMode.MODE_NUMBER:return 14;case r.QRMode.MODE_ALPHA_NUM:return 13;case r.QRMode.MODE_8BIT_BYTE:return 16;case r.QRMode.MODE_KANJI:return 12;default:throw Error("mode:"+e)}throw Error("type:"+t)},getLostPoint(e){let t=e.getModuleCount(),s=0;for(let r=0;r<t;r++)for(let i=0;i<t;i++){let o=0,a=e.isDark(r,i);for(let s=-1;s<=1;s++)if(!(r+s<0)&&!(t<=r+s))for(let l=-1;l<=1;l++)!(i+l<0)&&!(t<=i+l)&&(0!=s||0!=l)&&a==e.isDark(r+s,i+l)&&o++;o>5&&(s+=3+o-5)}for(let r=0;r<t-1;r++)for(let i=0;i<t-1;i++){let t=0;e.isDark(r,i)&&t++,e.isDark(r+1,i)&&t++,e.isDark(r,i+1)&&t++,e.isDark(r+1,i+1)&&t++,(0==t||4==t)&&(s+=3)}for(let r=0;r<t;r++)for(let i=0;i<t-6;i++)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(s+=40);for(let r=0;r<t;r++)for(let i=0;i<t-6;i++)e.isDark(i,r)&&!e.isDark(i+1,r)&&e.isDark(i+2,r)&&e.isDark(i+3,r)&&e.isDark(i+4,r)&&!e.isDark(i+5,r)&&e.isDark(i+6,r)&&(s+=40);let r=0;for(let s=0;s<t;s++)for(let i=0;i<t;i++)e.isDark(i,s)&&r++;return s+10*(Math.abs(100*r/t/t-50)/5)}}},"./src/shared/registry.js":function(e,t,s){"use strict";s.r(t);var r=s("./src/headless/index.js");let i={};Object.assign(r.api,{elements:{registry:i,define(e,t){this.registry[e]=t},register(){Object.keys(i).forEach(e=>{customElements.get(e)||customElements.define(e,i[e])})}}})},"./src/shared/texture/components/image.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),o=s("./src/shared/texture/templates/gif.js"),a=s("./src/utils/url.js"),l=s("./src/shared/texture/templates/image.js");let{isGIFURL:d}=r.u;class c extends i.CustomElement{static get properties(){return{src:{type:String},onImgLoad:{type:Function},href:{type:String}}}constructor(){super(),this.src=null,this.href=null,this.onImgClick=null,this.onImgLoad=null}render(){return d(this.src)&&(0,a.shouldRenderMediaFromURL)(this.src,"image")?(0,o.default)((0,a.filterQueryParamsFromURL)(this.src),!0):(0,l.default)({src:(0,a.filterQueryParamsFromURL)(this.src),href:this.href,onClick:this.onImgClick,onLoad:this.onImgLoad})}}r.api.elements.define("converse-image",c)},"./src/shared/texture/components/texture.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/shared/texture/directives/texture.js");s("./src/shared/texture/styles/texture.scss");class o extends r.LitElement{static get properties(){return{embed_audio:{type:Boolean},embed_videos:{type:Boolean},mentions:{type:Array},nick:{type:String},offset:{type:Number},onImgClick:{type:Function},onImgLoad:{type:Function},render_styling:{type:Boolean},show_images:{type:Boolean},hide_media_urls:{type:Boolean},show_me_message:{type:Boolean},text:{type:String}}}createRenderRoot(){return this}constructor(){super(),this.nick=null,this.onImgClick=null,this.onImgLoad=null,this.text=null,this.embed_audio=!1,this.embed_videos=!1,this.hide_media_urls=!1,this.mentions=[],this.offset=0,this.render_styling=!1,this.show_image_urls=!0,this.show_images=!1,this.show_me_message=!1}render(){let e={embed_audio:this.embed_audio,embed_videos:this.embed_videos,hide_media_urls:this.hide_media_urls,mentions:this.mentions,nick:this.nick,onImgClick:this.onImgClick,onImgLoad:this.onImgLoad,render_styling:this.render_styling,show_images:this.show_images,show_me_message:this.show_me_message};return(0,i.default)(this.text,this.offset,e)}}customElements.define("converse-texture",o)},"./src/shared/texture/constants.js":function(e,t,s){"use strict";s.r(t),s.d(t,{bracketing_directives:()=>r,dont_escape:()=>a,styling_directives:()=>i,styling_map:()=>o});let r=["*","_","~","`"],i=[...r,"```",">"],o={"*":{name:"strong",type:"span"},_:{name:"emphasis",type:"span"},"~":{name:"strike",type:"span"},"`":{name:"preformatted",type:"span"},"```":{name:"preformatted_block",type:"block"},">":{name:"quote",type:"block"}},a=["_",">","`","~"]},"./src/shared/texture/directives/image.js":function(e,t,s){"use strict";s.r(t),s.d(t,{renderImage:()=>u});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/async-directive.js"),o=s("./node_modules/lit/directive.js"),a=s("./src/headless/index.js"),l=s("./src/utils/html.js");let{isURLWithImageExtension:d}=a.u;class c extends i.AsyncDirective{render(e,t,s,i){return t?(0,r.html)`<a href="${t}" class="chat-image__link" target="_blank" rel="noopener">${this.renderImage(e,t,s,i)}</a>`:this.renderImage(e,t,s,i)}renderImage(e,t,s,i){return(0,r.html)`<img class="chat-image img-thumbnail" loading="lazy" src="${e}" @click="${i}" @error="${()=>this.onError(e,t,s,i)}" @load="${s}">`}onError(e,t,s,i){if(!this.isConnected)return t?(0,l.getHyperlinkTemplate)(t):(0,r.html)`<span>Image failed to load</span>`;if(d(e))t&&this.setValue((0,l.getHyperlinkTemplate)(t));else try{let r=new URL(e),o=r.pathname.split("/").pop();if(o){let e=`${o}.png`;r.pathname=r.pathname.replace(o,e),this.setValue(u(r.toString(),t,s,i))}}catch(s){return console.error("Invalid URL:",e),t?(0,l.getHyperlinkTemplate)(t):(0,r.html)`<span>Image failed to load</span>`}}}let u=(0,o.directive)(c)},"./src/shared/texture/directives/texture.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/until.js"),o=s("./node_modules/lit/directive.js"),a=s("./src/shared/texture/texture.js");class l{constructor(e,t,s={}){this.offset=t,this.options=s,this.text=e}async transform(){let e=new a.Texture(this.text,this.offset,this.options);try{await e.addTemplates()}catch(e){console.error(e)}return e.payload}render(){return(0,r.html)`${(0,i.until)(this.transform(),(0,r.html)`${this.text}`)}`}}class d extends o.Directive{render(e,t,s,r){let i=new l(e,t,s).render();return r?.(),i}}let c=(0,o.directive)(d)},"./src/shared/texture/templates/audio.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js");s("./src/shared/texture/styles/audio.scss");let o=(e,t,s)=>{let{hostname:o}=i.u.getURL(e);return(0,r.html)`<figure class="audio-element">${s||!t?(0,r.html)`<figcaption>${s?(0,r.html)`${s}<br>`:""} ${t?"":(0,r.html)`<a target="_blank" rel="noopener" title="${e}" href="${e}">${o}</a>`}</figcaption>`:""}<audio controls src="${e}"></audio></figure>`}},"./src/shared/texture/templates/gif.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");s("./src/shared/gif/component.js");let i=(e,t)=>(0,r.html)`<converse-gif autoplay noloop fallback="empty" src="${e}"></converse-gif>${t?"":(0,r.html)`<a target="_blank" rel="noopener" href="${e}">${e}</a>`}`},"./src/shared/texture/templates/image.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/shared/texture/directives/image.js");let o=e=>(0,r.html)`${(0,i.renderImage)(e.src||e.url,e.href,e.onLoad,e.onClick)}`},"./src/shared/texture/templates/spotify.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js");let o=(e,t,s)=>{let{hostname:o}=i.u.getURL(t);return(0,r.html)`<figure><iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/${e}" width="100%" height="352" frameborder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>${s?"":(0,r.html)`<a target="_blank" rel="noopener" title="${t}" href="${t}">${o}</a>`}</figure>`}},"./src/shared/texture/templates/video.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js");let o=(e,t)=>{let{hostname:s}=i.u.getURL(e);return(0,r.html)`<figure><video controls preload="metadata" src="${e}"></video>${t||!s?"":(0,r.html)`<a target="_blank" rel="noopener" title="${e}" href="${e}">${s}</a>`}</figure>`}},"./src/shared/texture/texture.js":function(e,t,s){"use strict";s.r(t),s.d(t,{Texture:()=>S,getDirectiveTemplate:()=>C});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/until.js"),o=s("./node_modules/lit/directive.js"),a=s("./src/headless/index.js"),l=s("./src/shared/texture/templates/audio.js"),d=s("./src/shared/texture/templates/gif.js"),c=s("./src/shared/texture/templates/image.js"),u=s("./src/shared/texture/templates/video.js"),h=s("./src/shared/texture/templates/spotify.js"),m=s("./src/shared/chat/utils.js"),f=s("./src/utils/html.js"),p=s("./src/utils/url.js"),g=s("./src/shared/texture/utils.js"),_=s("./src/shared/texture/constants.js");let{addMediaURLsOffset:v,convertASCII2Emoji:y,getCodePointReferences:b,getMediaURLsMetadata:j,getShortnameReferences:w}=a.u;class S extends String{constructor(e,t=0,s={}){super(e),this.embed_audio=s?.embed_audio,this.embed_videos=s?.embed_videos,this.mentions=s?.mentions||[],this.media_urls=s?.media_urls,this.nick=s?.nick,this.offset=t,this.onImgClick=s?.onImgClick,this.onImgLoad=s?.onImgLoad,this.options=s,this.payload=[],this.references=[],this.render_styling=s?.render_styling,this.show_images=s?.show_images,this.hide_media_urls=s?.hide_media_urls}shouldRenderMedia(e,t){let s;return("image"===t?s=this.show_images:"audio"===t?s=this.embed_audio:"video"===t&&(s=this.embed_videos),"boolean"==typeof s)?s:(0,p.shouldRenderMediaFromURL)(e,t)}async addHyperlinkTemplate(e){let t,{url:s}=e,r=(0,p.filterQueryParamsFromURL)(s);if(e.is_gif&&this.shouldRenderMedia(s,"image"))t=(0,d.default)(r,this.hide_media_urls);else if(e.is_image&&this.shouldRenderMedia(s,"image"))t=(0,c.default)({src:r,href:this.hide_media_urls?null:r,onClick:this.onImgClick,onLoad:this.onImgLoad});else if(e.is_video&&this.shouldRenderMedia(s,"video"))t=(0,u.default)(r,this.hide_media_urls);else if(e.is_audio&&this.shouldRenderMedia(s,"audio"))t=(0,l.default)(r,this.hide_media_urls);else if(a.api.settings.get("embed_3rd_party_media_players")&&(0,g.isSpotifyTrack)(s)){let e=s.split("/track/")[1];t=(0,h.default)(e,s,this.hide_media_urls)}return t||(0,f.getHyperlinkTemplate)(r)}async addHyperlinks(e,t){let s=t+this.offset,r=v(this.media_urls||(await j(e,t)).media_urls||[],e,s);await Promise.all(r.filter(e=>!e.is_encrypted).map(async e=>{let s=await this.addHyperlinkTemplate(e);this.addTemplateResult(e.start+t,e.end+t,s)}))}addMapURLs(e,t){let s=/geo:([\-0-9.]+),([\-0-9.]+)(?:,([\-0-9.]+))?(?:\?(.*))?/g;for(let r of e.matchAll(s))this.addTemplateResult(r.index+t,r.index+r[0].length+t,(0,f.getHyperlinkTemplate)(r[0].replace(s,a.api.settings.get("geouri_replacement"))))}addEmojis(e,t){[...w(e.toString()),...b(e.toString())].forEach(e=>{this.addTemplateResult(e.begin+t,e.end+t,(0,m.getEmojiMarkup)(e,{add_title_wrapper:!0}))})}addMentions(e,t){let s=t+this.offset;this.mentions?.forEach(r=>{let i=Number(r.begin)-s;if(i<0||i>=s+e.length)return;let o=Number(r.end)-s,a=e.slice(i,o);a===this.nick?this.addTemplateResult(i+t,o+t,(0,g.tplMentionWithNick)({...r,mention:a})):this.addTemplateResult(i+t,o+t,(0,g.tplMention)({...r,mention:a}))})}addStyling(){if(!(0,g.containsDirectives)(this))return;let e=[],t=this.mentions.map(e=>Array.from({length:Number(e.end)},(t,s)=>Number(e.begin)+s)),s=0;for(;s<this.length;){if(t.filter(e=>e.includes(s)).length){s++;continue}let{d:r,length:i}=(0,g.getDirectiveAndLength)(this,s);if(r&&i){let t=(0,g.isQuoteDirective)(r),o=s+i,a=t?o:o-r.length,l="```"===r?s+r.length+1:s+r.length;t&&" "===this[l]&&(l+=1);let d=l,c=this.slice(l,a);e.push({begin:s,template:C(r,c,d,this.options),end:o}),s=o}s++}e.forEach(e=>this.addTemplateResult(e.begin,e.end,e.template))}trimMeMessage(){0===this.offset&&this.isMeCommand()&&(this.payload[0]=this.payload[0].substring(4))}async addAnnotations(e){let t=this.marshall(),s=0;for(let r of t)if(!r)continue;else(0,g.isString)(r)?(await e.call(this,r,s),s+=r.length):s=r.end}async addTemplates(){await a.api.trigger("beforeMessageBodyTransformed",this,{synchronous:!0}),this.render_styling&&this.addStyling(),await this.addAnnotations(this.addMentions),await this.addAnnotations(this.addHyperlinks),await this.addAnnotations(this.addMapURLs),await a.api.emojis.initialize(),await this.addAnnotations(this.addEmojis),await a.api.trigger("afterMessageBodyTransformed",this,{synchronous:!0}),this.payload=this.marshall(),this.options.show_me_message&&this.trimMeMessage(),this.payload=this.payload.map(e=>(0,g.isString)(e)?e:e.template)}addTemplateResult(e,t,s){this.references.push({begin:e,end:t,template:s})}isMeCommand(){let e=this.toString();return!!e&&e.startsWith("/me ")}marshall(){let e=[this.toString()];return this.references.sort((e,t)=>t.begin-e.begin).forEach(t=>{let s=e.shift();e=[s.slice(0,t.begin),t,s.slice(t.end),...e]}),e.reduce((e,t)=>(0,g.isString)(t)?[...e,y((0,g.collapseLineBreaks)(t))]:[...e,t],[])}}class x extends o.Directive{static async transform(e){try{await e.addTemplates()}catch(e){console.error(e)}return e.payload}render(e,t,s){let o=new S(e,t,Object.assign(s,{show_images:!1,embed_videos:!1,embed_audio:!1}));return(0,r.html)`${(0,i.until)(x.transform(o),(0,r.html)`${o}`)}`}}let E=(0,o.directive)(x),A={emphasis:(e,t,s)=>(0,r.html)`<span class="styling-directive">_</span><i>${E(e,t,s)}</i><span class="styling-directive">_</span>`,preformatted:e=>(0,r.html)`<span class="styling-directive">\`</span><code>${e}</code><span class="styling-directive">\`</span>`,preformatted_block:e=>(0,r.html)`<div class="styling-directive">\`\`\`</div><pre><code class="block">${e}</code></pre><div class="styling-directive">\`\`\`</div>`,quote:(e,t,s)=>(0,r.html)`<blockquote>${E(e,t,s)}</blockquote>`,strike:(e,t,s)=>(0,r.html)`<span class="styling-directive">~</span><del>${E(e,t,s)}</del><span class="styling-directive">~</span>`,strong:(e,t,s)=>(0,r.html)`<span class="styling-directive">*</span><b>${E(e,t,s)}</b><span class="styling-directive">*</span>`};function C(e,t,s,r){let i=A[_.styling_map[e].name];return i((0,g.isQuoteDirective)(e)?t.replace(/\n\u200B*>[ \f\r\t\v\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]?/g,e=>`
${"".repeat(e.length-1)}`).replace(/\n$/,""):t,s,r)}},"./src/shared/texture/utils.js":function(e,t,s){"use strict";s.r(t),s.d(t,{collapseLineBreaks:()=>c,containsDirectives:()=>g,getDirectiveAndLength:()=>f,getHeaders:()=>d,isQuoteDirective:()=>p,isSpotifyTrack:()=>l,isString:()=>a,tplMention:()=>h,tplMentionWithNick:()=>u});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js"),o=s("./src/shared/texture/constants.js");function a(e){return"string"==typeof e}function l(e){try{let{hostname:t,pathname:s}=i.u.getURL(e);return"open.spotify.com"===t&&s.startsWith("/track/")}catch(t){return console.debug(`Could not create URL object from ${e}`),!1}}async function d(e){try{return(await fetch(e,{method:"HEAD"})).headers}catch(t){return console.debug(`Error calling HEAD on url ${e}: ${t}`),null}}function c(e){return e.replace(/\n(\u200B*\n)+/g,e=>e.length>2?`
${"".repeat(e.length-2)}
`:2===e.length?"\n":1===e.length?"":void 0)}let u=e=>(0,r.html)`<span class="mention mention--self badge badge-info" data-uri="${e.uri}">${e.mention}</span>`;function h(e){return(0,r.html)`<span class="mention" data-uri="${e.uri}">${e.mention}</span>`}function m(e,t,s=!0){let r;if(/(^```[\s,\u200B]*\n)|(^```[\s,\u200B]*$)/.test(e.slice(t))&&(0===t||">"===e[t-1]||/\n\u200B{0,2}$/.test(e.slice(0,t))))r=e.slice(t,t+3);else if(!o.styling_directives.includes(e.slice(t,t+1)))return null;else if(!function(e,t,s,r){if(r){let r=RegExp(o.dont_escape.includes(e)?`^(\\p{L}|\\p{N})${e}`:`^(\\p{L}|\\p{N})\\${e}`,"u");if(s>1&&r.test(t.slice(s-1))||p(e)&&s>0&&"\n"!==t[s-1]||o.bracketing_directives.includes(e)&&t[s+1]===e)return!1}else{let r=RegExp(o.dont_escape.includes(e)?`^${e}(\\p{L}|\\p{N})`:`^\\${e}(\\p{L}|\\p{N})`,"u");if(s<t.length-1&&r.test(t.slice(s))||o.bracketing_directives.includes(e)&&t[s-1]===e)return!1}return!0}(r=e.slice(t,t+1),e,t,s))return null;return r}function f(e,t){let s=m(e,t),r=s?function(e,t,s){if(!e)return 0;let r=s;if(s+=e.length,p(e))return(s+=t.slice(s).split(/\n\u200B*[^>\u200B]/).shift().length)-r;if("span"===o.styling_map[e].type){let r=t.slice(s).split("\n").shift(),i=0,o=r.indexOf(e);for(;-1!==o;){if(m(t,s+o,!1)===e)return o+2*e.length;o=r.indexOf(e,i++)}return 0}{let r=t.slice(s+1),i=0,o=r.indexOf(e);for(;-1!==o;){if(m(t,s+1+o,!1)===e)return o+1+2*e.length;o=r.indexOf(e,i++)}return 0}}(s,e,t):0;return r>0?{d:s,length:r}:{}}function p(e){return[">","&gt;"].includes(e)}function g(e){for(let t=0;t<o.styling_directives.length;t++)if(e.includes(o.styling_directives[t]))return!0;return!1}},"./src/templates/file.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/i18n/index.js"),i=s("./node_modules/lit/index.js");let o=(e,t)=>{let s=(0,r.__)('Download file "%1$s"',t);return(0,i.html)`<a target="_blank" rel="noopener" href="${e}">${s}</a>`}},"./src/templates/form_captcha.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");let i=e=>(0,r.html)`<fieldset class="mb-3">${e.label?(0,r.html)`<label class="form-label">${e.label}</label>`:""} <img src="data:${e.type};base64,${e.data}"> <input name="${e.name}" type="text" ?required="${e.required}"></fieldset>`},"./src/templates/form_checkbox.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");let i=e=>(0,r.html)`<fieldset class="mb-3 form-check"><input id="${e.id}" name="${e.name}" type="checkbox" class="form-check-input" ?readonly="${e.readonly}" ?checked="${e.checked}" ?required="${e.required}"> <label class="form-check-label" for="${e.id}">${e.label} ${e.desc?(0,r.html)`<small class="form-text text-muted">${e.desc}</small>`:""}</label></fieldset>`},"./src/templates/form_date.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");let i=e=>(0,r.html)`<div class="mb-3"><label for="${e.id}" class="form-label">${e.label} ${e.desc?(0,r.html)`<small class="form-text text-muted">${e.desc}</small>`:""}</label> <input class="form-control" id="${e.id}" name="${e.name}" type="datetime-local" value="${e.value||""}" ?readonly="${e.readonly}" ?required="${e.required}"></div>`},"./src/templates/form_fixed.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");let i=e=>(0,r.html)`<p>${e.text}</p>`},"./src/templates/form_input.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");let i=e=>(0,r.html)`<div class="mb-3">${"hidden"!==e.type?(0,r.html)`<label for="${e.id}" class="form-label">${e.label} ${e.desc?(0,r.html)`<small class="form-text text-muted">${e.desc}</small>`:""}</label>`:""} ${"password"===e.type&&e.fixed_username?(0,r.html)`<input class="hidden-username" aria-hidden="true" type="text" autocomplete="username" value="${e.fixed_username}">`:""} <input autocomplete="${e.autocomplete||""}" class="form-control" id="${e.id}" name="${e.name}" placeholder="${e.placeholder||""}" type="${e.type}" value="${e.value||""}" ?readonly="${e.readonly}" ?required="${e.required}"></div>`},"./src/templates/form_select.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js");let i=e=>(0,r.html)`<option value="${e.value}" ?selected="${e.selected}">${e.label}</option>`,o=e=>(0,r.html)`<div class="mb-3"><label for="${e.id}" class="form-label">${e.label}</label> <select class="form-control" id="${e.id}" name="${e.name}" ?multiple="${e.multiple}">${e.options?.map(e=>i(e))}</select></div>`},"./src/templates/form_textarea.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js");let o=e=>{let t=i.u.getUniqueId();return(0,r.html)`<div class="mb-3"><label class="form-label label-ta" for="${e.id}">${e.label} ${e.desc?(0,r.html)`<small class="form-text text-muted">${e.desc}</small>`:""}</label> <textarea name="${e.name}" id="${t}" ?readonly="${e.readonly}" ?required="${e.required}" class="form-control">${e.value}</textarea></div>`}},"./src/templates/form_url.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");let i=e=>(0,r.html)`<div class="mb-3"><label for="${e.id}" class="form-label">${e.label} ${e.desc?(0,r.html)`<small id="o.id" class="form-text text-muted">${e.desc}</small>`:""}</label><div><a class="form-url" target="_blank" rel="noopener" id="${e.id}" href="${e.value}">${e.value}</a></div></div>`},"./src/templates/form_username.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");let i=e=>(0,r.html)`<div class="mb-3">${"hidden"!==e.type?(0,r.html)`<label for="${e.id}" class="form-label">${e.label} ${e.desc?(0,r.html)`<small class="form-text text-muted">${e.desc}</small>`:""}</label>`:""}<div class="input-group"><input name="${e.name}" class="form-control" id="${e.id}" type="${e.type}" value="${e.value||""}" ?readonly="${e.readonly}" ?required="${e.required}"> ${e.domain?(0,r.html)`<div class="input-group-append"><div class="input-group-text" title="${e.domain}">${e.domain}</div></div>`:""}</div></div>`},"./src/templates/hyperlink.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),i=s("./node_modules/lit/index.js");function o(e){e.preventDefault(),r.api.rooms.open(e.target.href)}let a=(e,t)=>"xmpp:"===e.protocol&&null!=e.searchParams.get("join")?(0,i.html)`<a target="_blank" rel="noopener" @click="${o}" href="${e.href}">${t}</a>`:(0,i.html)`<a target="_blank" rel="noopener" href="${e.href}">${t}</a>`},"./src/templates/spinner.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js");s("./src/templates/styles/spinner.scss");let i=(e={})=>(0,r.html)`<div class="d-flex justify-content-center ${e.class}"><div class="spinner-grow" role="status"><span class="visually-hidden">Loading...</span></div></div>`},"./src/utils/color.js":function(e,t,s){"use strict";s.r(t),s.d(t,{getAuthorStyle:()=>l});var r=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/until.js"),o=s("./src/headless/index.js");function a(e,t=""){return`color: ${e}!important;${t}`}function l(e){if(o.api.settings.get("colorize_username")){let t=e?.get("color");return t?a(t):e?(0,r.html)`${(0,i.until)(e?.getColor().then(a),"")}`:""}}},"./src/utils/file.js":function(e,t,s){"use strict";s.r(t),s.d(t,{MIMETYPES_MAP:()=>o,compressImage:()=>l,isImageWithAlphaChannel:()=>a});var r=s("./node_modules/client-compress/dist/index.js"),i=s.n(r);let o={aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",cda:"application/x-cdf",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",gz:"application/gzip",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",m4a:"audio/mp4",mid:"audio/midi",midi:"audio/midi",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"text/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"};async function a(e){if(e.type===o.png){let t=new FileReader;return await new Promise(s=>{t.onloadend=e=>{let t=new DataView(e.target.result);if(0x89504e47===t.getUint32(0)&&0xd0a1a0a===t.getUint32(4)){let e=t.getUint8(25);s(4===e||6===e)}s(!1)},t.readAsArrayBuffer(e)})}return!1}async function l(e,t={targetSize:.1,quality:.75,maxWidth:256,maxHeight:256,maxUncompressedSize:100}){if(t.maxUncompressedSize&&e.size>1024*t.maxUncompressedSize){delete t.maxUncompressedSize;let s=new(i())(t),{photo:r}=(await s.compress([e]))[0];return r.data}return e}},"./src/utils/html.js":function(e,t,s){"use strict";let r;s.r(t),s.d(t,{addClass:()=>T,ancestor:()=>I,default:()=>U,getFileName:()=>C,getHyperlinkTemplate:()=>N,getNameAndValue:()=>A,getOuterWidth:()=>P,getRootElement:()=>z,hasClass:()=>$,removeClass:()=>M,removeElement:()=>O,slideIn:()=>D,slideOut:()=>R,xFormField2TemplateResult:()=>L});var i=s("./node_modules/lit/index.js"),o=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),a=s("./src/headless/index.js"),l=s("./src/templates/form_date.js"),d=s("./src/templates/form_captcha.js"),c=s("./src/templates/form_checkbox.js"),u=s("./src/templates/form_fixed.js"),h=s("./src/templates/form_input.js"),m=s("./src/templates/form_select.js"),f=s("./src/templates/form_textarea.js"),p=s("./src/templates/form_url.js"),g=s("./src/templates/form_username.js"),_=s("./src/templates/hyperlink.js");let{sizzle:v,Strophe:y,dayjs:b}=a.converse.env,{isValidURL:j}=a.u,w=["http:","https:","xmpp:","mailto:"],S=/\s*\n\s*/;function x(e){let t;(e instanceof o.Builder||e instanceof o.Stanza)&&(e=e.tree());let s=[],r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,e=>"body"===e.parentElement.nodeName.toLowerCase()?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT);for(;t=r.nextNode();)s.push(t);return s.forEach(e=>S.test(e.data)&&e.parentElement.removeChild(e)),e}function E(e,t){return({"muc#roomconfig_lang":"language","muc#roomconfig_roomsecret":t?.new_password?"new-password":"current-password"})[e]}function A(e){let t,s=e.getAttribute("name");return s?{name:s,value:"checkbox"===e.getAttribute("type")?e.checked&&1||0:"TEXTAREA"==e.tagName?e.value.split("\n").filter(e=>e.trim()):"SELECT"==e.tagName?a.u.getSelectValues(e):e.value}:null}function C(e){try{let t=a.u.getURL(e);return decodeURI(t.pathname.split("/").pop())}catch(t){return a.log.debug(t),e}}function k(e){return Array.from(e.children).reduce((e,t)=>t instanceof HTMLElement?e+t.offsetHeight:e,0)}function $(e,t){return t instanceof Element&&t.classList.contains(e)}function T(e,t){return t instanceof Element&&t.classList.add(e),t}function M(e,t){return t instanceof Element&&t.classList.remove(e),t}function O(e){return e instanceof Element&&e.parentNode&&e.parentNode.removeChild(e),e}function I(e,t){let s=e;for(;null!==s&&!v.matchesSelector(s,t);)s=s.parentElement;return s}function N(e){let t=RegExp("^w{3}.","ig").test(e)?`http://${e}`:e;try{let s=a.u.getURL(t);if(function(e,t=w){return!!t.includes(e)}(s.protocol))return(0,_.default)(s,e);return e}catch(e){a.log.debug(e)}}function R(e,t=200){return new Promise((s,r)=>{if(!e){let e="An element needs to be passed in to slideOut";a.log.warn(e),r(Error(e));return}let i=e.getAttribute("data-slider-marker");i&&!Number.isNaN(Number(i))&&(e.removeAttribute("data-slider-marker"),cancelAnimationFrame(Number(i)));let o=k(e);if(a.api.settings.get("disable_effects")){e.style.height=o+"px",e.removeAttribute("data-slider-marker"),e.classList.remove("collapsed"),e.style.overflow="",e.style.height="",s();return}if(!$("collapsed",e)&&!$("hidden",e))return void s();let l=t/17,d=0;e.style.height="0",e.style.overflow="hidden",e.classList.remove("hidden"),e.classList.remove("collapsed"),e.setAttribute("data-slider-marker",requestAnimationFrame(function t(){(d+=o/l)<o?(e.style.height=d+"px",e.setAttribute("data-slider-marker",requestAnimationFrame(t).toString())):(e.removeAttribute("data-slider-marker"),e.style.height=k(e)+"px",e.style.overflow="",e.style.height="",s())}).toString())})}function D(e,t=200){return new Promise((s,r)=>{if(e){if($("collapsed",e))return s(e);else if(a.api.settings.get("disable_effects"))return e.classList.add("collapsed"),e.style.height="",s(e)}else{let e="An element needs to be passed in to slideIn";return a.log.warn(e),r(Error(e))}let i=e.getAttribute("data-slider-marker");i&&!Number.isNaN(Number(i))&&(e.removeAttribute("data-slider-marker"),cancelAnimationFrame(Number(i)));let o=e.offsetHeight,l=t/17,d=o;e.style.overflow="hidden",e.setAttribute("data-slider-marker",requestAnimationFrame(function t(){(d-=o/l)>0?(e.style.height=d+"px",e.setAttribute("data-slider-marker",requestAnimationFrame(t).toString())):(e.removeAttribute("data-slider-marker"),e.classList.add("collapsed"),e.style.height="",s(e))}).toString())})}function L(e,t={}){let s={id:a.u.getUniqueId(),name:e.var};if("list-single"===e.type||"list-multi"===e.type)return(0,m.default)({...s,...e,multiple:"list-multi"===e.type});if("fixed"===e.type)return(0,u.default)(e);if("jid-multi"===e.type)return(0,f.default)({...s,...e});{if("boolean"===e.type)return(0,c.default)({...s,...e});if("username"===e.var)return(0,g.default)({...s,domain:t.domain?" @"+t.domain:"",...e});if("password"===e.var)return(0,h.default)({...s,...e,autocomplete:E(e.var,t),fixed_username:t?.fixed_username,type:"password"});if("ocr"===e.var)return(0,d.default)({...s,...e,data:e.uri.data,type:e.uri.type});if("hidden"!==e.type&&("url"===e.var||"uri"===e.var||j(e.value)))return(0,p.default)(e);if("datetime"!==e.type&&"date"!==e.type)return(0,h.default)({...s,...e,autocomplete:E(e.var,t),placeholder:null});let r=e.value?b(e.value):null,i=r?.isValid()?"datetime"===e.type?r.format("YYYY-MM-DDTHH:mm:ss"):r.format("YYYY-MM-DD"):null;return(0,l.default)({...s,...e,value:i})}}function P(e,t=!1){let s=e.offsetWidth;if(!t)return s;let r=window.getComputedStyle(e);return s+(parseInt(r.marginLeft?r.marginLeft:"0",10)+parseInt(r.marginRight?r.marginRight:"0",10))}function z(){return r||(r=document.querySelector("converse-root")||document.createElement("converse-root")),r}Object.assign(a.u,{addClass:T,ancestor:I,calculateElementHeight:k,escapeHTML:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},getElementFromTemplateResult:function(e){let t=document.createElement("div");return(0,i.render)(e,t),t.firstElementChild},getNextElement:function(e,t="*"){let s=e.nextElementSibling;for(;null!==s&&!v.matchesSelector(s,t);)s=s.nextElementSibling;return s},getOuterWidth:P,getRootElement:z,hasClass:$,hideElement:function(e){return e instanceof Element&&e.classList.add("hidden"),e},isEqualNode:function(e,t){if(!a.u.isElement(e))throw Error("Element being compared must be an Element!");e=x(e),t=x(t);let s=e.isEqualNode(t);if(!s){let{xmlHtmlNode:r}=y,i=y.serialize(e),o=y.serialize(t);s=i===o||r(i).isEqualNode(r(o))}return s},isInDOM:function(e){return document.querySelector("body").contains(e)},isVisible:function(e){return!(null===e||$("hidden",e))&&(e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0)},nextUntil:function(e,t){let s=[],r=e.nextElementSibling;for(;null!==r&&!r.matches(t);)s.push(r),r=r.nextElementSibling;return s},removeClass:M,removeElement:O,showElement:function(e){M("collapsed",e),M("hidden",e)},slideIn:D,slideOut:R,unescapeHTML:function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText},xFormField2TemplateResult:L});let U=a.u},"./src/utils/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),i=s("./src/utils/color.js"),o=s("./src/utils/file.js"),a=s("./src/utils/html.js"),l=s("./src/utils/url.js");let d=Object.assign(r.u,{...i,...o,...a,...l})},"./src/utils/url.js":function(e,t,s){"use strict";s.r(t),s.d(t,{filterQueryParamsFromURL:()=>d,isDomainAllowed:()=>o,isDomainWhitelisted:()=>i,isMediaURLDomainAllowed:()=>a,shouldRenderMediaFromURL:()=>l});var r=s("./src/headless/index.js");function i(e,t){let s=r.u.getURL(t).hostname.split("."),i=s.slice(-2).join("."),o=s.slice(0,-2).join("."),a=`${o?`${o}.`:""}${i}`;return e.includes(i)||e.includes(a)}function o(e,t){let s=r.api.settings.get(t);if(!Array.isArray(s))return!0;try{return i(s,e)}catch(e){return r.log.debug(e),!1}}function a(e){return e.is_audio&&o(e.url,"allowed_audio_domains")||e.is_video&&o(e.url,"allowed_video_domains")||e.is_image&&o(e.url,"allowed_image_domains")}function l(e,t){if(!function(e){let{protocol:t}=window.location;if(["chrome-extension:","file:"].includes(t))return!0;let s=r.u.getURL(e);return"http:"===t||"https:"===t&&["https:","aesgcm:"].includes(s.protocol.toLowerCase())}(e))return!1;let s=r.api.settings.get("render_media"),a=o(e,`allowed_${t}_domains`);return Array.isArray(s)?a&&i(s,e):a&&s}function d(e){let t=r.api.settings.get("filter_url_query_params");if(!t)return e;let s=Array.isArray(t)?t:[t],i=r.u.getURL(e);return s.forEach(e=>i.searchParams.delete(e)),i.toString()}},"./src/plugins/bookmark-views/styles/bookmarks.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/bookmark-views/styles/bookmarks.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/chatboxviews/styles/chats.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/chatboxviews/styles/chats.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/chatview/styles/chat-bottom-panel.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/chatview/styles/chat-bottom-panel.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/chatview/styles/chat-head.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/chatview/styles/chat-head.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/chatview/styles/index.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/chatview/styles/index.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/controlbox/styles/_controlbox.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/controlbox/styles/_controlbox.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/controlbox/styles/buttons.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/controlbox/styles/buttons.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/controlbox/styles/loginform.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/controlbox/styles/loginform.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/disco-views/styles/disco-browser.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/disco-views/styles/disco-browser.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/fullscreen/styles/fullscreen.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/fullscreen/styles/fullscreen.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/headlines-view/styles/headlines-head.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/headlines-view/styles/headlines-head.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/headlines-view/styles/headlines.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/headlines-view/styles/headlines.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/mam-views/styles/placeholder.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/mam-views/styles/placeholder.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/minimize/styles/minimize.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/minimize/styles/minimize.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/modal/styles/_modal.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/modal/styles/_modal.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/modal/styles/popover.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/modal/styles/popover.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/modal/styles/toast.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/modal/styles/toast.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/modals/styles/config.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/modals/styles/config.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/modals/styles/occupant.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/modals/styles/occupant.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/styles/add-muc-modal.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/add-muc-modal.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/styles/affiliation-form.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/affiliation-form.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/styles/index.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/index.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/styles/moderator-tools.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/moderator-tools.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/styles/muc-bottom-panel.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/muc-bottom-panel.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/styles/muc-chat-content.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/muc-chat-content.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/styles/muc-details-modal.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/muc-details-modal.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/styles/muc-head.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/muc-head.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/styles/muc-occupant.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/muc-occupant.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/styles/muc-occupants.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/muc-occupants.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/styles/muc-sidebar.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/muc-sidebar.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/styles/nickname-form.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/nickname-form.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/styles/occupant-bottom-panel.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/occupant-bottom-panel.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/muc-views/styles/role-form.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/muc-views/styles/role-form.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/omemo/styles/omemo.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/omemo/styles/omemo.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/profile/modals/styles/profile.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/profile/modals/styles/profile.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/profile/modals/styles/user-settings.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/profile/modals/styles/user-settings.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/profile/styles/profile.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/profile/styles/profile.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/register/styles/register.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/register/styles/register.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/roomslist/styles/roomsgroups.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/roomslist/styles/roomsgroups.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/rootview/styles/background.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/rootview/styles/background.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/rootview/styles/root.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/rootview/styles/root.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/rosterview/modals/styles/add-contact.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/rosterview/modals/styles/add-contact.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/rosterview/styles/approval-alert.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/rosterview/styles/approval-alert.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/rosterview/styles/roster.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/rosterview/styles/roster.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/plugins/singleton/singleton.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/plugins/singleton/singleton.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/autocomplete/styles/_autocomplete.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/autocomplete/styles/_autocomplete.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/avatar/avatar.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/avatar/avatar.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/chat/styles/chat-content.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/chat/styles/chat-content.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/chat/styles/emoji.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/chat/styles/emoji.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/chat/styles/message-actions.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/chat/styles/message-actions.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/chat/styles/message-body.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/chat/styles/message-body.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/chat/styles/retraction.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/chat/styles/retraction.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/chat/styles/toolbar.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/chat/styles/toolbar.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/chat/styles/unfurl.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/chat/styles/unfurl.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/components/styles/dropdown.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/components/styles/dropdown.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/components/styles/icon.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/components/styles/icon.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/components/styles/image-picker.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/components/styles/image-picker.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/components/styles/list-filter.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/components/styles/list-filter.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/components/styles/message-versions.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/components/styles/message-versions.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/components/styles/split-resize.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/components/styles/split-resize.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/gif/styles.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/gif/styles.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/modals/styles/image.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/modals/styles/image.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/modals/styles/user-details.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/modals/styles/user-details.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/qrcode/qrcode.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/qrcode/qrcode.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/styles/index.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/styles/index.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/styles/status.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/styles/status.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/texture/styles/audio.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/texture/styles/audio.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/shared/texture/styles/texture.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/shared/texture/styles/texture.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./src/templates/styles/spinner.scss":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=s.n(o),l=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),d=s.n(l),c=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=s.n(c),h=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=s.n(h),f=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),p=s.n(f),g=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/@rspack/core/dist/cssExtractLoader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[4].use[3]!./src/templates/styles/spinner.scss"),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=d().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=m(),i()(g.default,_);let v=g.default&&g.default.locals?g.default.locals:void 0},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":function(e){"use strict";var t=[];function s(e){for(var s=-1,r=0;r<t.length;r++)if(t[r].identifier===e){s=r;break}return s}function r(e,r){for(var i={},o=[],a=0;a<e.length;a++){var l=e[a],d=r.base?l[0]+r.base:l[0],c=i[d]||0,u="".concat(d," ").concat(c);i[d]=c+1;var h=s(u),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(m);else{var f=function(e,t){var s=t.domAPI(t);return s.update(e),function(t){t?(t.css!==e.css||t.media!==e.media||t.sourceMap!==e.sourceMap||t.supports!==e.supports||t.layer!==e.layer)&&s.update(e=t):s.remove()}}(m,r);r.byIndex=a,t.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var l=s(o[a]);t[l].references--}for(var d=r(e,i),c=0;c<o.length;c++){var u=s(o[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=d}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":function(e){"use strict";var t={};e.exports=function(e,s){var r=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!r)throw Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(s)}},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":function(e){"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":function(e,t,s){"use strict";e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":function(e){"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){var r,i,o;r="",s.supports&&(r+="@supports (".concat(s.supports,") {")),s.media&&(r+="@media ".concat(s.media," {")),(i=void 0!==s.layer)&&(r+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),r+=s.css,i&&(r+="}"),s.media&&(r+="}"),s.supports&&(r+="}"),(o=s.sourceMap)&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)},remove:function(){!function(e){if(null!==e.parentNode)e.parentNode.removeChild(e)}(t)}}}},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":function(e){"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},"./src/i18n/locales lazy recursive ^\\.\\/.*\\/LC_MESSAGES\\/converse\\.po$":function(e,t,s){var r={"./fa/LC_MESSAGES/converse.po":["./src/i18n/locales/fa/LC_MESSAGES/converse.po","locales/fa-LC_MESSAGES-converse-po"],"./ko/LC_MESSAGES/converse.po":["./src/i18n/locales/ko/LC_MESSAGES/converse.po","locales/ko-LC_MESSAGES-converse-po"],"./es/LC_MESSAGES/converse.po":["./src/i18n/locales/es/LC_MESSAGES/converse.po","locales/es-LC_MESSAGES-converse-po"],"./pt_BR/LC_MESSAGES/converse.po":["./src/i18n/locales/pt_BR/LC_MESSAGES/converse.po","locales/pt_BR-LC_MESSAGES-converse-po"],"./ca/LC_MESSAGES/converse.po":["./src/i18n/locales/ca/LC_MESSAGES/converse.po","locales/ca-LC_MESSAGES-converse-po"],"./uk/LC_MESSAGES/converse.po":["./src/i18n/locales/uk/LC_MESSAGES/converse.po","locales/uk-LC_MESSAGES-converse-po"],"./af/LC_MESSAGES/converse.po":["./src/i18n/locales/af/LC_MESSAGES/converse.po","locales/af-LC_MESSAGES-converse-po"],"./mr/LC_MESSAGES/converse.po":["./src/i18n/locales/mr/LC_MESSAGES/converse.po","locales/mr-LC_MESSAGES-converse-po"],"./sq/LC_MESSAGES/converse.po":["./src/i18n/locales/sq/LC_MESSAGES/converse.po","locales/sq-LC_MESSAGES-converse-po"],"./he/LC_MESSAGES/converse.po":["./src/i18n/locales/he/LC_MESSAGES/converse.po","locales/he-LC_MESSAGES-converse-po"],"./da/LC_MESSAGES/converse.po":["./src/i18n/locales/da/LC_MESSAGES/converse.po","locales/da-LC_MESSAGES-converse-po"],"./pl/LC_MESSAGES/converse.po":["./src/i18n/locales/pl/LC_MESSAGES/converse.po","locales/pl-LC_MESSAGES-converse-po"],"./ta/LC_MESSAGES/converse.po":["./src/i18n/locales/ta/LC_MESSAGES/converse.po","locales/ta-LC_MESSAGES-converse-po"],"./zh_CN/LC_MESSAGES/converse.po":["./src/i18n/locales/zh_CN/LC_MESSAGES/converse.po","locales/zh_CN-LC_MESSAGES-converse-po"],"./fr/LC_MESSAGES/converse.po":["./src/i18n/locales/fr/LC_MESSAGES/converse.po","locales/fr-LC_MESSAGES-converse-po"],"./de/LC_MESSAGES/converse.po":["./src/i18n/locales/de/LC_MESSAGES/converse.po","locales/de-LC_MESSAGES-converse-po"],"./bg/LC_MESSAGES/converse.po":["./src/i18n/locales/bg/LC_MESSAGES/converse.po","locales/bg-LC_MESSAGES-converse-po"],"./hi/LC_MESSAGES/converse.po":["./src/i18n/locales/hi/LC_MESSAGES/converse.po","locales/hi-LC_MESSAGES-converse-po"],"./nl_BE/LC_MESSAGES/converse.po":["./src/i18n/locales/nl_BE/LC_MESSAGES/converse.po","locales/nl_BE-LC_MESSAGES-converse-po"],"./zh_TW/LC_MESSAGES/converse.po":["./src/i18n/locales/zh_TW/LC_MESSAGES/converse.po","locales/zh_TW-LC_MESSAGES-converse-po"],"./be/LC_MESSAGES/converse.po":["./src/i18n/locales/be/LC_MESSAGES/converse.po","locales/be-LC_MESSAGES-converse-po"],"./gl/LC_MESSAGES/converse.po":["./src/i18n/locales/gl/LC_MESSAGES/converse.po","locales/gl-LC_MESSAGES-converse-po"],"./eu/LC_MESSAGES/converse.po":["./src/i18n/locales/eu/LC_MESSAGES/converse.po","locales/eu-LC_MESSAGES-converse-po"],"./ug/LC_MESSAGES/converse.po":["./src/i18n/locales/ug/LC_MESSAGES/converse.po","locales/ug-LC_MESSAGES-converse-po"],"./it/LC_MESSAGES/converse.po":["./src/i18n/locales/it/LC_MESSAGES/converse.po","locales/it-LC_MESSAGES-converse-po"],"./lt/LC_MESSAGES/converse.po":["./src/i18n/locales/lt/LC_MESSAGES/converse.po","locales/lt-LC_MESSAGES-converse-po"],"./ru/LC_MESSAGES/converse.po":["./src/i18n/locales/ru/LC_MESSAGES/converse.po","locales/ru-LC_MESSAGES-converse-po"],"./cs/LC_MESSAGES/converse.po":["./src/i18n/locales/cs/LC_MESSAGES/converse.po","locales/cs-LC_MESSAGES-converse-po"],"./ja/LC_MESSAGES/converse.po":["./src/i18n/locales/ja/LC_MESSAGES/converse.po","locales/ja-LC_MESSAGES-converse-po"],"./sv/LC_MESSAGES/converse.po":["./src/i18n/locales/sv/LC_MESSAGES/converse.po","locales/sv-LC_MESSAGES-converse-po"],"./eo/LC_MESSAGES/converse.po":["./src/i18n/locales/eo/LC_MESSAGES/converse.po","locales/eo-LC_MESSAGES-converse-po"],"./tr/LC_MESSAGES/converse.po":["./src/i18n/locales/tr/LC_MESSAGES/converse.po","locales/tr-LC_MESSAGES-converse-po"],"./ro/LC_MESSAGES/converse.po":["./src/i18n/locales/ro/LC_MESSAGES/converse.po","locales/ro-LC_MESSAGES-converse-po"],"./th/LC_MESSAGES/converse.po":["./src/i18n/locales/th/LC_MESSAGES/converse.po","locales/th-LC_MESSAGES-converse-po"],"./mn/LC_MESSAGES/converse.po":["./src/i18n/locales/mn/LC_MESSAGES/converse.po","locales/mn-LC_MESSAGES-converse-po"],"./oc/LC_MESSAGES/converse.po":["./src/i18n/locales/oc/LC_MESSAGES/converse.po","locales/oc-LC_MESSAGES-converse-po"],"./hu/LC_MESSAGES/converse.po":["./src/i18n/locales/hu/LC_MESSAGES/converse.po","locales/hu-LC_MESSAGES-converse-po"],"./pt/LC_MESSAGES/converse.po":["./src/i18n/locales/pt/LC_MESSAGES/converse.po","locales/pt-LC_MESSAGES-converse-po"],"./vi/LC_MESSAGES/converse.po":["./src/i18n/locales/vi/LC_MESSAGES/converse.po","locales/vi-LC_MESSAGES-converse-po"],"./nb/LC_MESSAGES/converse.po":["./src/i18n/locales/nb/LC_MESSAGES/converse.po","locales/nb-LC_MESSAGES-converse-po"],"./si/LC_MESSAGES/converse.po":["./src/i18n/locales/si/LC_MESSAGES/converse.po","locales/si-LC_MESSAGES-converse-po"],"./ar/LC_MESSAGES/converse.po":["./src/i18n/locales/ar/LC_MESSAGES/converse.po","locales/ar-LC_MESSAGES-converse-po"],"./fi/LC_MESSAGES/converse.po":["./src/i18n/locales/fi/LC_MESSAGES/converse.po","locales/fi-LC_MESSAGES-converse-po"],"./nl/LC_MESSAGES/converse.po":["./src/i18n/locales/nl/LC_MESSAGES/converse.po","locales/nl-LC_MESSAGES-converse-po"],"./id/LC_MESSAGES/converse.po":["./src/i18n/locales/id/LC_MESSAGES/converse.po","locales/id-LC_MESSAGES-converse-po"],"./el/LC_MESSAGES/converse.po":["./src/i18n/locales/el/LC_MESSAGES/converse.po","locales/el-LC_MESSAGES-converse-po"]};function i(e){if(!s.o(r,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return s.e(t[1]).then(function(){return s.t(i,19)})}i.keys=()=>Object.keys(r),i.id="./src/i18n/locales lazy recursive ^\\.\\/.*\\/LC_MESSAGES\\/converse\\.po$",e.exports=i},"./node_modules/@babel/runtime/helpers/OverloadYield.js":function(e){e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/asyncToGenerator.js":function(e){function t(e,t,s,r,i,o,a){try{var l=e[o](a),d=l.value}catch(e){return void s(e)}l.done?t(d):Promise.resolve(d).then(r,i)}e.exports=function(e){return function(){var s=this,r=arguments;return new Promise(function(i,o){var a=e.apply(s,r);function l(e){t(a,i,o,l,d,"next",e)}function d(e){t(a,i,o,l,d,"throw",e)}l(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":function(e,t,s){var r=s("./node_modules/@babel/runtime/helpers/toPropertyKey.js");e.exports=function(e,t,s){return(t=r(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regenerator.js":function(e,t,s){var r=s("./node_modules/@babel/runtime/helpers/regeneratorDefine.js");function i(){var t,s,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.toStringTag||"@@toStringTag";function d(e,i,o,a){var l=Object.create((i&&i.prototype instanceof u?i:u).prototype);return r(l,"_invoke",function(e,r,i){var o,a,l,d=0,u=i||[],h=!1,m={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,s){return o=e,a=0,l=t,m.n=s,c}};function f(e,r){for(a=e,l=r,s=0;!h&&d&&!i&&s<u.length;s++){var i,o=u[s],f=m.p,p=o[2];e>3?(i=p===r)&&(l=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=t):o[0]<=f&&((i=e<2&&f<o[1])?(a=0,m.v=r,m.n=o[1]):f<p&&(i=e<3||o[0]>r||r>p)&&(o[4]=e,o[5]=r,m.n=p,a=0))}if(i||e>1)return c;throw h=!0,r}return function(i,u,p){if(d>1)throw TypeError("Generator is already running");for(h&&1===u&&f(u,p),a=u,l=p;(s=a<2?t:l)||!h;){o||(a?a<3?(a>1&&(m.n=-1),f(a,l)):m.n=l:m.v=l);try{if(d=2,o){if(a||(i="next"),s=o[i]){if(!(s=s.call(o,l)))throw TypeError("iterator result is not an object");if(!s.done)return s;l=s.value,a<2&&(a=0)}else 1===a&&(s=o.return)&&s.call(o),a<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=t}else if((s=(h=m.n<0)?l:e.call(r,m))!==c)break}catch(e){o=t,a=1,l=e}finally{d=1}}return{value:s,done:h}}}(e,o,a),!0),l}var c={};function u(){}function h(){}function m(){}s=Object.getPrototypeOf;var f=m.prototype=u.prototype=Object.create([][a]?s(s([][a]())):(r(s={},a,function(){return this}),s));function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,r(e,l,"GeneratorFunction")),e.prototype=Object.create(f),e}return h.prototype=m,r(f,"constructor",m),r(m,"constructor",h),h.displayName="GeneratorFunction",r(m,l,"GeneratorFunction"),r(f),r(f,l,"Generator"),r(f,a,function(){return this}),r(f,"toString",function(){return"[object Generator]"}),(e.exports=i=function(){return{w:d,m:p}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regeneratorAsync.js":function(e,t,s){var r=s("./node_modules/@babel/runtime/helpers/regeneratorAsyncGen.js");e.exports=function(e,t,s,i,o){var a=r(e,t,s,i,o);return a.next().then(function(e){return e.done?e.value:a.next()})},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regeneratorAsyncGen.js":function(e,t,s){var r=s("./node_modules/@babel/runtime/helpers/regenerator.js"),i=s("./node_modules/@babel/runtime/helpers/regeneratorAsyncIterator.js");e.exports=function(e,t,s,o,a){return new i(r().w(e,t,s,o),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regeneratorAsyncIterator.js":function(e,t,s){var r=s("./node_modules/@babel/runtime/helpers/OverloadYield.js"),i=s("./node_modules/@babel/runtime/helpers/regeneratorDefine.js");e.exports=function e(t,s){var o;this.next||(i(e.prototype),i(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),i(this,"_invoke",function(e,i,a){function l(){return new s(function(i,o){!function e(i,o,a,l){try{var d=t[i](o),c=d.value;return c instanceof r?s.resolve(c.v).then(function(t){e("next",t,a,l)},function(t){e("throw",t,a,l)}):s.resolve(c).then(function(e){d.value=e,a(d)},function(t){return e("throw",t,a,l)})}catch(e){l(e)}}(e,a,i,o)})}return o=o?o.then(l,l):l()},!0)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regeneratorDefine.js":function(e){function t(s,r,i,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}e.exports=t=function(e,s,r,i){if(s)a?a(e,s,{value:r,enumerable:!i,configurable:!i,writable:!i}):e[s]=r;else{var o=function(s,r){t(e,s,function(e){return this._invoke(s,r,e)})};o("next",0),o("throw",1),o("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(s,r,i,o)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regeneratorKeys.js":function(e){e.exports=function(e){var t=Object(e),s=[];for(var r in t)s.unshift(r);return function e(){for(;s.length;)if((r=s.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regeneratorRuntime.js":function(e,t,s){var r=s("./node_modules/@babel/runtime/helpers/OverloadYield.js"),i=s("./node_modules/@babel/runtime/helpers/regenerator.js"),o=s("./node_modules/@babel/runtime/helpers/regeneratorAsync.js"),a=s("./node_modules/@babel/runtime/helpers/regeneratorAsyncGen.js"),l=s("./node_modules/@babel/runtime/helpers/regeneratorAsyncIterator.js"),d=s("./node_modules/@babel/runtime/helpers/regeneratorKeys.js"),c=s("./node_modules/@babel/runtime/helpers/regeneratorValues.js");function u(){"use strict";var t=i(),s=t.m(u),h=(Object.getPrototypeOf?Object.getPrototypeOf(s):s.__proto__).constructor;function m(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))}var f={throw:1,return:2,break:3,continue:3};function p(e){var t,s;return function(r){t||(t={stop:function(){return s(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return s(r.a,f[e],t)},delegateYield:function(e,i,o){return t.resultName=i,s(r.d,c(e),o)},finish:function(e){return s(r.f,e)}},s=function(e,s,i){r.p=t.prev,r.n=t.next;try{return e(s,i)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}return(e.exports=u=function(){return{wrap:function(e,s,r,i){return t.w(p(e),s,r,i&&i.reverse())},isGeneratorFunction:m,mark:t.m,awrap:function(e,t){return new r(e,t)},AsyncIterator:l,async:function(e,t,s,r,i){return(m(t)?a:o)(p(e),t,s,r,i)},keys:d,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regeneratorValues.js":function(e,t,s){var r=s("./node_modules/@babel/runtime/helpers/typeof.js").default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],s=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}}}throw TypeError(r(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":function(e,t,s){var r=s("./node_modules/@babel/runtime/helpers/typeof.js").default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,t||"default");if("object"!=r(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":function(e,t,s){var r=s("./node_modules/@babel/runtime/helpers/typeof.js").default,i=s("./node_modules/@babel/runtime/helpers/toPrimitive.js");e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(e){function t(s){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/regenerator/index.js":function(e,t,s){var r=s("./node_modules/@babel/runtime/helpers/regeneratorRuntime.js")();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},"./node_modules/dompurify/dist/purify.es.mjs":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>er});let{entries:r,setPrototypeOf:i,isFrozen:o,getPrototypeOf:a,getOwnPropertyDescriptor:l}=Object,{freeze:d,seal:c,create:u}=Object,{apply:h,construct:m}="undefined"!=typeof Reflect&&Reflect;d||(d=function(e){return e}),c||(c=function(e){return e}),h||(h=function(e,t,s){return e.apply(t,s)}),m||(m=function(e,t){return new e(...t)});let f=k(Array.prototype.forEach),p=k(Array.prototype.lastIndexOf),g=k(Array.prototype.pop),_=k(Array.prototype.push),v=k(Array.prototype.splice),y=k(String.prototype.toLowerCase),b=k(String.prototype.toString),j=k(String.prototype.match),w=k(String.prototype.replace),S=k(String.prototype.indexOf),x=k(String.prototype.trim),E=k(Object.prototype.hasOwnProperty),A=k(RegExp.prototype.test),C=(X=TypeError,function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return m(X,t)});function k(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var s=arguments.length,r=Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];return h(e,t,r)}}function $(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;i&&i(e,null);let r=t.length;for(;r--;){let i=t[r];if("string"==typeof i){let e=s(i);e!==i&&(o(t)||(t[r]=e),i=e)}e[i]=!0}return e}function T(e){let t=u(null);for(let[s,i]of r(e))E(e,s)&&(Array.isArray(i)?t[s]=function(e){for(let t=0;t<e.length;t++)E(e,t)||(e[t]=null);return e}(i):i&&"object"==typeof i&&i.constructor===Object?t[s]=T(i):t[s]=i);return t}function M(e,t){for(;null!==e;){let s=l(e,t);if(s){if(s.get)return k(s.get);if("function"==typeof s.value)return k(s.value)}e=a(e)}return function(){return null}}let O=d(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),I=d(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),N=d(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),R=d(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),D=d(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),L=d(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),P=d(["#text"]),z=d(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),U=d(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),B=d(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),F=d(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),q=c(/\{\{[\w\W]*|[\w\W]*\}\}/gm),H=c(/<%[\w\W]*|[\w\W]*%>/gm),G=c(/\$\{[\w\W]*/gm),W=c(/^data-[\-\w.\u00B7-\uFFFF]+$/),V=c(/^aria-[\-\w]+$/),K=c(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),J=c(/^(?:\w+script|data):/i),Q=c(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Y=c(/^html$/i);var X,Z=Object.freeze({__proto__:null,ARIA_ATTR:V,ATTR_WHITESPACE:Q,CUSTOM_ELEMENT:c(/^[a-z][.\w]*(-[.\w]+)+$/i),DATA_ATTR:W,DOCTYPE_NAME:Y,ERB_EXPR:H,IS_ALLOWED_URI:K,IS_SCRIPT_OR_DATA:J,MUSTACHE_EXPR:q,TMPLIT_EXPR:G});let ee={element:1,text:3,progressingInstruction:7,comment:8,document:9},et=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let s=null,r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(s=t.getAttribute(r));let i="dompurify"+(s?"#"+s:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}},es=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};var er=function e(){let t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,i=t=>e(t);if(i.version="3.2.6",i.removed=[],!s||!s.document||s.document.nodeType!==ee.document||!s.Element)return i.isSupported=!1,i;let{document:o}=s,a=o,l=a.currentScript,{DocumentFragment:c,HTMLTemplateElement:h,Node:m,Element:k,NodeFilter:q,NamedNodeMap:H=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:G,DOMParser:W,trustedTypes:V}=s,J=k.prototype,Q=M(J,"cloneNode"),X=M(J,"remove"),er=M(J,"nextSibling"),en=M(J,"childNodes"),ei=M(J,"parentNode");if("function"==typeof h){let e=o.createElement("template");e.content&&e.content.ownerDocument&&(o=e.content.ownerDocument)}let eo="",{implementation:ea,createNodeIterator:el,createDocumentFragment:ed,getElementsByTagName:ec}=o,{importNode:eu}=a,eh=es();i.isSupported="function"==typeof r&&"function"==typeof ei&&ea&&void 0!==ea.createHTMLDocument;let{MUSTACHE_EXPR:em,ERB_EXPR:ef,TMPLIT_EXPR:ep,DATA_ATTR:eg,ARIA_ATTR:e_,IS_SCRIPT_OR_DATA:ev,ATTR_WHITESPACE:ey,CUSTOM_ELEMENT:eb}=Z,{IS_ALLOWED_URI:ej}=Z,ew=null,eS=$({},[...O,...I,...N,...D,...P]),ex=null,eE=$({},[...z,...U,...B,...F]),eA=Object.seal(u(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),eC=null,ek=null,e$=!0,eT=!0,eM=!1,eO=!0,eI=!1,eN=!0,eR=!1,eD=!1,eL=!1,eP=!1,ez=!1,eU=!1,eB=!0,eF=!1,eq=!0,eH=!1,eG={},eW=null,eV=$({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),eK=null,eJ=$({},["audio","video","img","source","image","track"]),eQ=null,eY=$({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),eX="http://www.w3.org/1998/Math/MathML",eZ="http://www.w3.org/2000/svg",e0="http://www.w3.org/1999/xhtml",e1=e0,e2=!1,e4=null,e3=$({},[eX,eZ,e0],b),e6=$({},["mi","mo","mn","ms","mtext"]),e8=$({},["annotation-xml"]),e5=$({},["title","style","font","a","script"]),e9=null,e7=["application/xhtml+xml","text/html"],te=null,tt=null,ts=o.createElement("form"),tr=function(e){return e instanceof RegExp||e instanceof Function},tn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!tt||tt!==e){if(e&&"object"==typeof e||(e={}),e=T(e),te="application/xhtml+xml"===(e9=-1===e7.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE)?b:y,ew=E(e,"ALLOWED_TAGS")?$({},e.ALLOWED_TAGS,te):eS,ex=E(e,"ALLOWED_ATTR")?$({},e.ALLOWED_ATTR,te):eE,e4=E(e,"ALLOWED_NAMESPACES")?$({},e.ALLOWED_NAMESPACES,b):e3,eQ=E(e,"ADD_URI_SAFE_ATTR")?$(T(eY),e.ADD_URI_SAFE_ATTR,te):eY,eK=E(e,"ADD_DATA_URI_TAGS")?$(T(eJ),e.ADD_DATA_URI_TAGS,te):eJ,eW=E(e,"FORBID_CONTENTS")?$({},e.FORBID_CONTENTS,te):eV,eC=E(e,"FORBID_TAGS")?$({},e.FORBID_TAGS,te):T({}),ek=E(e,"FORBID_ATTR")?$({},e.FORBID_ATTR,te):T({}),eG=!!E(e,"USE_PROFILES")&&e.USE_PROFILES,e$=!1!==e.ALLOW_ARIA_ATTR,eT=!1!==e.ALLOW_DATA_ATTR,eM=e.ALLOW_UNKNOWN_PROTOCOLS||!1,eO=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,eI=e.SAFE_FOR_TEMPLATES||!1,eN=!1!==e.SAFE_FOR_XML,eR=e.WHOLE_DOCUMENT||!1,eP=e.RETURN_DOM||!1,ez=e.RETURN_DOM_FRAGMENT||!1,eU=e.RETURN_TRUSTED_TYPE||!1,eL=e.FORCE_BODY||!1,eB=!1!==e.SANITIZE_DOM,eF=e.SANITIZE_NAMED_PROPS||!1,eq=!1!==e.KEEP_CONTENT,eH=e.IN_PLACE||!1,ej=e.ALLOWED_URI_REGEXP||K,e1=e.NAMESPACE||e0,e6=e.MATHML_TEXT_INTEGRATION_POINTS||e6,e8=e.HTML_INTEGRATION_POINTS||e8,eA=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&tr(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(eA.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&tr(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(eA.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(eA.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),eI&&(eT=!1),ez&&(eP=!0),eG&&(ew=$({},P),ex=[],!0===eG.html&&($(ew,O),$(ex,z)),!0===eG.svg&&($(ew,I),$(ex,U),$(ex,F)),!0===eG.svgFilters&&($(ew,N),$(ex,U),$(ex,F)),!0===eG.mathMl&&($(ew,D),$(ex,B),$(ex,F))),e.ADD_TAGS&&(ew===eS&&(ew=T(ew)),$(ew,e.ADD_TAGS,te)),e.ADD_ATTR&&(ex===eE&&(ex=T(ex)),$(ex,e.ADD_ATTR,te)),e.ADD_URI_SAFE_ATTR&&$(eQ,e.ADD_URI_SAFE_ATTR,te),e.FORBID_CONTENTS&&(eW===eV&&(eW=T(eW)),$(eW,e.FORBID_CONTENTS,te)),eq&&(ew["#text"]=!0),eR&&$(ew,["html","head","body"]),ew.table&&($(ew,["tbody"]),delete eC.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw C('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw C('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');eo=(t=e.TRUSTED_TYPES_POLICY).createHTML("")}else void 0===t&&(t=et(V,l)),null!==t&&"string"==typeof eo&&(eo=t.createHTML(""));d&&d(e),tt=e}},ti=$({},[...I,...N,...R]),to=$({},[...D,...L]),ta=function(e){let t=ei(e);t&&t.tagName||(t={namespaceURI:e1,tagName:"template"});let s=y(e.tagName),r=y(t.tagName);return!!e4[e.namespaceURI]&&(e.namespaceURI===eZ?t.namespaceURI===e0?"svg"===s:t.namespaceURI===eX?"svg"===s&&("annotation-xml"===r||e6[r]):!!ti[s]:e.namespaceURI===eX?t.namespaceURI===e0?"math"===s:t.namespaceURI===eZ?"math"===s&&e8[r]:!!to[s]:e.namespaceURI===e0?(t.namespaceURI!==eZ||!!e8[r])&&(t.namespaceURI!==eX||!!e6[r])&&!to[s]&&(e5[s]||!ti[s]):"application/xhtml+xml"===e9&&!!e4[e.namespaceURI])},tl=function(e){_(i.removed,{element:e});try{ei(e).removeChild(e)}catch(t){X(e)}},td=function(e,t){try{_(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){_(i.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(eP||ez)try{tl(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},tc=function(e){let s=null,r=null;if(eL)e="<remove></remove>"+e;else{let t=j(e,/^[\r\n\t ]+/);r=t&&t[0]}"application/xhtml+xml"===e9&&e1===e0&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");let i=t?t.createHTML(e):e;if(e1===e0)try{s=new W().parseFromString(i,e9)}catch(e){}if(!s||!s.documentElement){s=ea.createDocument(e1,"template",null);try{s.documentElement.innerHTML=e2?eo:i}catch(e){}}let a=s.body||s.documentElement;return(e&&r&&a.insertBefore(o.createTextNode(r),a.childNodes[0]||null),e1===e0)?ec.call(s,eR?"html":"body")[0]:eR?s.documentElement:a},tu=function(e){return el.call(e.ownerDocument||e,e,q.SHOW_ELEMENT|q.SHOW_COMMENT|q.SHOW_TEXT|q.SHOW_PROCESSING_INSTRUCTION|q.SHOW_CDATA_SECTION,null)},th=function(e){return e instanceof G&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof H)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},tm=function(e){return"function"==typeof m&&e instanceof m};function tf(e,t,s){f(e,e=>{e.call(i,t,s,tt)})}let tp=function(e){let t=null;if(tf(eh.beforeSanitizeElements,e,null),th(e))return tl(e),!0;let s=te(e.nodeName);if(tf(eh.uponSanitizeElement,e,{tagName:s,allowedTags:ew}),eN&&e.hasChildNodes()&&!tm(e.firstElementChild)&&A(/<[/\w!]/g,e.innerHTML)&&A(/<[/\w!]/g,e.textContent)||e.nodeType===ee.progressingInstruction||eN&&e.nodeType===ee.comment&&A(/<[/\w]/g,e.data))return tl(e),!0;if(!ew[s]||eC[s]){if(!eC[s]&&t_(s)&&(eA.tagNameCheck instanceof RegExp&&A(eA.tagNameCheck,s)||eA.tagNameCheck instanceof Function&&eA.tagNameCheck(s)))return!1;if(eq&&!eW[s]){let t=ei(e)||e.parentNode,s=en(e)||e.childNodes;if(s&&t){let r=s.length;for(let i=r-1;i>=0;--i){let r=Q(s[i],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,er(e))}}}return tl(e),!0}return e instanceof k&&!ta(e)||("noscript"===s||"noembed"===s||"noframes"===s)&&A(/<\/no(script|embed|frames)/i,e.innerHTML)?(tl(e),!0):(eI&&e.nodeType===ee.text&&(t=e.textContent,f([em,ef,ep],e=>{t=w(t,e," ")}),e.textContent!==t&&(_(i.removed,{element:e.cloneNode()}),e.textContent=t)),tf(eh.afterSanitizeElements,e,null),!1)},tg=function(e,t,s){if(eB&&("id"===t||"name"===t)&&(s in o||s in ts))return!1;if(eT&&!ek[t]&&A(eg,t));else if(e$&&A(e_,t));else if(!ex[t]||ek[t]){if(!(t_(e)&&(eA.tagNameCheck instanceof RegExp&&A(eA.tagNameCheck,e)||eA.tagNameCheck instanceof Function&&eA.tagNameCheck(e))&&(eA.attributeNameCheck instanceof RegExp&&A(eA.attributeNameCheck,t)||eA.attributeNameCheck instanceof Function&&eA.attributeNameCheck(t))||"is"===t&&eA.allowCustomizedBuiltInElements&&(eA.tagNameCheck instanceof RegExp&&A(eA.tagNameCheck,s)||eA.tagNameCheck instanceof Function&&eA.tagNameCheck(s))))return!1}else if(eQ[t]);else if(A(ej,w(s,ey,"")));else if(("src"===t||"xlink:href"===t||"href"===t)&&"script"!==e&&0===S(s,"data:")&&eK[e]);else if(eM&&!A(ev,w(s,ey,"")));else if(s)return!1;return!0},t_=function(e){return"annotation-xml"!==e&&j(e,eb)},tv=function(e){tf(eh.beforeSanitizeAttributes,e,null);let{attributes:s}=e;if(!s||th(e))return;let r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ex,forceKeepAttr:void 0},o=s.length;for(;o--;){let{name:a,namespaceURI:l,value:d}=s[o],c=te(a),u="value"===a?d:x(d);if(r.attrName=c,r.attrValue=u,r.keepAttr=!0,r.forceKeepAttr=void 0,tf(eh.uponSanitizeAttribute,e,r),u=r.attrValue,eF&&("id"===c||"name"===c)&&(td(a,e),u="user-content-"+u),eN&&A(/((--!?|])>)|<\/(style|title)/i,u)){td(a,e);continue}if(r.forceKeepAttr)continue;if(!r.keepAttr||!eO&&A(/\/>/i,u)){td(a,e);continue}eI&&f([em,ef,ep],e=>{u=w(u,e," ")});let h=te(e.nodeName);if(!tg(h,c,u)){td(a,e);continue}if(t&&"object"==typeof V&&"function"==typeof V.getAttributeType)if(l);else switch(V.getAttributeType(h,c)){case"TrustedHTML":u=t.createHTML(u);break;case"TrustedScriptURL":u=t.createScriptURL(u)}if(u!==d)try{l?e.setAttributeNS(l,a,u):e.setAttribute(a,u),th(e)?tl(e):g(i.removed)}catch(t){td(a,e)}}tf(eh.afterSanitizeAttributes,e,null)},ty=function e(t){let s=null,r=tu(t);for(tf(eh.beforeSanitizeShadowDOM,t,null);s=r.nextNode();)tf(eh.uponSanitizeShadowNode,s,null),tp(s),tv(s),s.content instanceof c&&e(s.content);tf(eh.afterSanitizeShadowDOM,t,null)};return i.sanitize=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,o=null,l=null,d=null;if((e2=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!tm(e))if("function"==typeof e.toString){if("string"!=typeof(e=e.toString()))throw C("dirty is not a string, aborting")}else throw C("toString is not a function");if(!i.isSupported)return e;if(eD||tn(s),i.removed=[],"string"==typeof e&&(eH=!1),eH){if(e.nodeName){let t=te(e.nodeName);if(!ew[t]||eC[t])throw C("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof m)(o=(r=tc("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType===ee.element&&"BODY"===o.nodeName||"HTML"===o.nodeName?r=o:r.appendChild(o);else{if(!eP&&!eI&&!eR&&-1===e.indexOf("<"))return t&&eU?t.createHTML(e):e;if(!(r=tc(e)))return eP?null:eU?eo:""}r&&eL&&tl(r.firstChild);let u=tu(eH?e:r);for(;l=u.nextNode();)tp(l),tv(l),l.content instanceof c&&ty(l.content);if(eH)return e;if(eP){if(ez)for(d=ed.call(r.ownerDocument);r.firstChild;)d.appendChild(r.firstChild);else d=r;return(ex.shadowroot||ex.shadowrootmode)&&(d=eu.call(a,d,!0)),d}let h=eR?r.outerHTML:r.innerHTML;return eR&&ew["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&A(Y,r.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+h),eI&&f([em,ef,ep],e=>{h=w(h,e," ")}),t&&eU?t.createHTML(h):h},i.setConfig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};tn(e),eD=!0},i.clearConfig=function(){tt=null,eD=!1},i.isValidAttribute=function(e,t,s){return tt||tn({}),tg(te(e),te(t),s)},i.addHook=function(e,t){"function"==typeof t&&_(eh[e],t)},i.removeHook=function(e,t){if(void 0!==t){let s=p(eh[e],t);return -1===s?void 0:v(eh[e],s,1)[0]}return g(eh[e])},i.removeHooks=function(e){eh[e]=[]},i.removeAllHooks=function(){eh=es()},i}()},"./node_modules/hsluv/dist/hsluv.mjs":function(e,t,s){"use strict";s.r(t),s.d(t,{Hsluv:()=>r});class r{constructor(){this.hex="#000000",this.rgb_r=0,this.rgb_g=0,this.rgb_b=0,this.xyz_x=0,this.xyz_y=0,this.xyz_z=0,this.luv_l=0,this.luv_u=0,this.luv_v=0,this.lch_l=0,this.lch_c=0,this.lch_h=0,this.hsluv_h=0,this.hsluv_s=0,this.hsluv_l=0,this.hpluv_h=0,this.hpluv_p=0,this.hpluv_l=0,this.r0s=0,this.r0i=0,this.r1s=0,this.r1i=0,this.g0s=0,this.g0i=0,this.g1s=0,this.g1i=0,this.b0s=0,this.b0i=0,this.b1s=0,this.b1i=0}static fromLinear(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055}static toLinear(e){return e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92}static yToL(e){return e<=r.epsilon?e/r.refY*r.kappa:116*Math.pow(e/r.refY,1/3)-16}static lToY(e){return e<=8?r.refY*e/r.kappa:r.refY*Math.pow((e+16)/116,3)}static rgbChannelToHex(e){let t=Math.round(255*e),s=t%16;return r.hexChars.charAt((t-s)/16|0)+r.hexChars.charAt(s)}static hexToRgbChannel(e,t){let s=r.hexChars.indexOf(e.charAt(t));return(16*s+r.hexChars.indexOf(e.charAt(t+1)))/255}static distanceFromOriginAngle(e,t,s){let r=t/(Math.sin(s)-e*Math.cos(s));return r<0?1/0:r}static distanceFromOrigin(e,t){return Math.abs(t)/Math.sqrt(Math.pow(e,2)+1)}static min6(e,t,s,r,i,o){return Math.min(e,Math.min(t,Math.min(s,Math.min(r,Math.min(i,o)))))}rgbToHex(){this.hex="#",this.hex+=r.rgbChannelToHex(this.rgb_r),this.hex+=r.rgbChannelToHex(this.rgb_g),this.hex+=r.rgbChannelToHex(this.rgb_b)}hexToRgb(){this.hex=this.hex.toLowerCase(),this.rgb_r=r.hexToRgbChannel(this.hex,1),this.rgb_g=r.hexToRgbChannel(this.hex,3),this.rgb_b=r.hexToRgbChannel(this.hex,5)}xyzToRgb(){this.rgb_r=r.fromLinear(r.m_r0*this.xyz_x+r.m_r1*this.xyz_y+r.m_r2*this.xyz_z),this.rgb_g=r.fromLinear(r.m_g0*this.xyz_x+r.m_g1*this.xyz_y+r.m_g2*this.xyz_z),this.rgb_b=r.fromLinear(r.m_b0*this.xyz_x+r.m_b1*this.xyz_y+r.m_b2*this.xyz_z)}rgbToXyz(){let e=r.toLinear(this.rgb_r),t=r.toLinear(this.rgb_g),s=r.toLinear(this.rgb_b);this.xyz_x=.41239079926595*e+.35758433938387*t+.18048078840183*s,this.xyz_y=.21263900587151*e+.71516867876775*t+.072192315360733*s,this.xyz_z=.019330818715591*e+.11919477979462*t+.95053215224966*s}xyzToLuv(){let e=this.xyz_x+15*this.xyz_y+3*this.xyz_z,t=4*this.xyz_x,s=9*this.xyz_y;0!==e?(t/=e,s/=e):(t=NaN,s=NaN),this.luv_l=r.yToL(this.xyz_y),0===this.luv_l?(this.luv_u=0,this.luv_v=0):(this.luv_u=13*this.luv_l*(t-r.refU),this.luv_v=13*this.luv_l*(s-r.refV))}luvToXyz(){if(0===this.luv_l){this.xyz_x=0,this.xyz_y=0,this.xyz_z=0;return}let e=this.luv_u/(13*this.luv_l)+r.refU,t=this.luv_v/(13*this.luv_l)+r.refV;this.xyz_y=r.lToY(this.luv_l),this.xyz_x=0-9*this.xyz_y*e/((e-4)*t-e*t),this.xyz_z=(9*this.xyz_y-15*t*this.xyz_y-t*this.xyz_x)/(3*t)}luvToLch(){if(this.lch_l=this.luv_l,this.lch_c=Math.sqrt(this.luv_u*this.luv_u+this.luv_v*this.luv_v),this.lch_c<1e-8)this.lch_h=0;else{let e=Math.atan2(this.luv_v,this.luv_u);this.lch_h=180*e/Math.PI,this.lch_h<0&&(this.lch_h=360+this.lch_h)}}lchToLuv(){let e=this.lch_h/180*Math.PI;this.luv_l=this.lch_l,this.luv_u=Math.cos(e)*this.lch_c,this.luv_v=Math.sin(e)*this.lch_c}calculateBoundingLines(e){let t=Math.pow(e+16,3)/1560896,s=t>r.epsilon?t:e/r.kappa,i=s*(284517*r.m_r0-94839*r.m_r2),o=s*(838422*r.m_r2+769860*r.m_r1+731718*r.m_r0),a=s*(632260*r.m_r2-126452*r.m_r1),l=s*(284517*r.m_g0-94839*r.m_g2),d=s*(838422*r.m_g2+769860*r.m_g1+731718*r.m_g0),c=s*(632260*r.m_g2-126452*r.m_g1),u=s*(284517*r.m_b0-94839*r.m_b2),h=s*(838422*r.m_b2+769860*r.m_b1+731718*r.m_b0),m=s*(632260*r.m_b2-126452*r.m_b1);this.r0s=i/a,this.r0i=o*e/a,this.r1s=i/(a+126452),this.r1i=(o-769860)*e/(a+126452),this.g0s=l/c,this.g0i=d*e/c,this.g1s=l/(c+126452),this.g1i=(d-769860)*e/(c+126452),this.b0s=u/m,this.b0i=h*e/m,this.b1s=u/(m+126452),this.b1i=(h-769860)*e/(m+126452)}calcMaxChromaHpluv(){let e=r.distanceFromOrigin(this.r0s,this.r0i),t=r.distanceFromOrigin(this.r1s,this.r1i),s=r.distanceFromOrigin(this.g0s,this.g0i),i=r.distanceFromOrigin(this.g1s,this.g1i),o=r.distanceFromOrigin(this.b0s,this.b0i),a=r.distanceFromOrigin(this.b1s,this.b1i);return r.min6(e,t,s,i,o,a)}calcMaxChromaHsluv(e){let t=e/360*Math.PI*2,s=r.distanceFromOriginAngle(this.r0s,this.r0i,t),i=r.distanceFromOriginAngle(this.r1s,this.r1i,t),o=r.distanceFromOriginAngle(this.g0s,this.g0i,t),a=r.distanceFromOriginAngle(this.g1s,this.g1i,t),l=r.distanceFromOriginAngle(this.b0s,this.b0i,t),d=r.distanceFromOriginAngle(this.b1s,this.b1i,t);return r.min6(s,i,o,a,l,d)}hsluvToLch(){if(this.hsluv_l>99.9999999)this.lch_l=100,this.lch_c=0;else if(this.hsluv_l<1e-8)this.lch_l=0,this.lch_c=0;else{this.lch_l=this.hsluv_l,this.calculateBoundingLines(this.hsluv_l);let e=this.calcMaxChromaHsluv(this.hsluv_h);this.lch_c=e/100*this.hsluv_s}this.lch_h=this.hsluv_h}lchToHsluv(){if(this.lch_l>99.9999999)this.hsluv_s=0,this.hsluv_l=100;else if(this.lch_l<1e-8)this.hsluv_s=0,this.hsluv_l=0;else{this.calculateBoundingLines(this.lch_l);let e=this.calcMaxChromaHsluv(this.lch_h);this.hsluv_s=this.lch_c/e*100,this.hsluv_l=this.lch_l}this.hsluv_h=this.lch_h}hpluvToLch(){if(this.hpluv_l>99.9999999)this.lch_l=100,this.lch_c=0;else if(this.hpluv_l<1e-8)this.lch_l=0,this.lch_c=0;else{this.lch_l=this.hpluv_l,this.calculateBoundingLines(this.hpluv_l);let e=this.calcMaxChromaHpluv();this.lch_c=e/100*this.hpluv_p}this.lch_h=this.hpluv_h}lchToHpluv(){if(this.lch_l>99.9999999)this.hpluv_p=0,this.hpluv_l=100;else if(this.lch_l<1e-8)this.hpluv_p=0,this.hpluv_l=0;else{this.calculateBoundingLines(this.lch_l);let e=this.calcMaxChromaHpluv();this.hpluv_p=this.lch_c/e*100,this.hpluv_l=this.lch_l}this.hpluv_h=this.lch_h}hsluvToRgb(){this.hsluvToLch(),this.lchToLuv(),this.luvToXyz(),this.xyzToRgb()}hpluvToRgb(){this.hpluvToLch(),this.lchToLuv(),this.luvToXyz(),this.xyzToRgb()}hsluvToHex(){this.hsluvToRgb(),this.rgbToHex()}hpluvToHex(){this.hpluvToRgb(),this.rgbToHex()}rgbToHsluv(){this.rgbToXyz(),this.xyzToLuv(),this.luvToLch(),this.lchToHpluv(),this.lchToHsluv()}rgbToHpluv(){this.rgbToXyz(),this.xyzToLuv(),this.luvToLch(),this.lchToHpluv(),this.lchToHpluv()}hexToHsluv(){this.hexToRgb(),this.rgbToHsluv()}hexToHpluv(){this.hexToRgb(),this.rgbToHpluv()}}r.hexChars="0123456789abcdef",r.refY=1,r.refU=.19783000664283,r.refV=.46831999493879,r.kappa=903.2962962,r.epsilon=.0088564516,r.m_r0=3.240969941904521,r.m_r1=-1.537383177570093,r.m_r2=-.498610760293,r.m_g0=-.96924363628087,r.m_g1=1.87596750150772,r.m_g2=.041555057407175,r.m_b0=.055630079696993,r.m_b1=-.20397695888897,r.m_b2=1.056971514242878},"./node_modules/@lit/reactive-element/development/css-tag.js":function(e,t,s){"use strict";s.r(t),s.d(t,{CSSResult:()=>l,adoptStyles:()=>h,css:()=>u,getCompatibleStyle:()=>f,supportsAdoptingStyleSheets:()=>i,unsafeCSS:()=>c});let r=globalThis,i=r.ShadowRoot&&(void 0===r.ShadyCSS||r.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o=Symbol(),a=new WeakMap;class l{constructor(e,t,s){if(this._$cssResult$=!0,s!==o)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this._strings=t}get styleSheet(){let e=this._styleSheet,t=this._strings;if(i&&void 0===e){let s=void 0!==t&&1===t.length;s&&(e=a.get(t)),void 0===e&&((this._styleSheet=e=new CSSStyleSheet).replaceSync(this.cssText),s&&a.set(t,e))}return e}toString(){return this.cssText}}let d=e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.`)},c=e=>new l("string"==typeof e?e:String(e),void 0,o),u=(e,...t)=>new l(1===e.length?e[0]:t.reduce((t,s,r)=>t+d(s)+e[r+1],e[0]),e,o),h=(e,t)=>{if(i)e.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(let s of t){let t=document.createElement("style"),i=r.litNonce;void 0!==i&&t.setAttribute("nonce",i),t.textContent=s.cssText,e.appendChild(t)}},m=e=>{let t="";for(let s of e.cssRules)t+=s.cssText;return c(t)},f=i?e=>e:e=>e instanceof CSSStyleSheet?m(e):e},"./node_modules/@lit/reactive-element/development/reactive-element.js":function(e,t,s){"use strict";let r;s.r(t),s.d(t,{CSSResult:()=>i.CSSResult,ReactiveElement:()=>j,adoptStyles:()=>i.adoptStyles,css:()=>i.css,defaultConverter:()=>v,getCompatibleStyle:()=>i.getCompatibleStyle,notEqual:()=>y,supportsAdoptingStyleSheets:()=>i.supportsAdoptingStyleSheets,unsafeCSS:()=>i.unsafeCSS});var i=s("./node_modules/@lit/reactive-element/development/css-tag.js");let{is:o,defineProperty:a,getOwnPropertyDescriptor:l,getOwnPropertyNames:d,getOwnPropertySymbols:c,getPrototypeOf:u}=Object,h=globalThis,m=h.trustedTypes,f=m?m.emptyScript:"",p=h.reactiveElementPolyfillSupportDevMode;h.litIssuedWarnings??=new Set,r=(e,t)=>{t+=` See https://lit.dev/msg/${e} for more information.`,h.litIssuedWarnings.has(t)||h.litIssuedWarnings.has(e)||(console.warn(t),h.litIssuedWarnings.add(t))},queueMicrotask(()=>{r("dev-mode","Lit is in dev mode. Not recommended for production!"),h.ShadyDOM?.inUse&&void 0===p&&r("polyfill-support-missing","Shadow DOM is being polyfilled via `ShadyDOM` but the `polyfill-support` module has not been loaded.")});let g=e=>{h.emitLitDebugLogEvents&&h.dispatchEvent(new CustomEvent("lit-debug",{detail:e}))},_=(e,t)=>e,v={toAttribute(e,t){switch(t){case Boolean:e=e?f:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let s=e;switch(t){case Boolean:s=null!==e;break;case Number:s=null===e?null:Number(e);break;case Object:case Array:try{s=JSON.parse(e)}catch(e){s=null}}return s}},y=(e,t)=>!o(e,t),b={attribute:!0,type:String,converter:v,reflect:!1,useDefault:!1,hasChanged:y};Symbol.metadata??=Symbol("metadata"),h.litPropertyMetadata??=new WeakMap;class j extends HTMLElement{static addInitializer(e){this.__prepare(),(this._initializers??=[]).push(e)}static get observedAttributes(){return this.finalize(),this.__attributeToPropertyMap&&[...this.__attributeToPropertyMap.keys()]}static createProperty(e,t=b){if(t.state&&(t.attribute=!1),this.__prepare(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){let s=Symbol.for(`${String(e)} (@property() cache)`),r=this.getPropertyDescriptor(e,s,t);void 0!==r&&a(this.prototype,e,r)}}static getPropertyDescriptor(e,t,s){let{get:i,set:o}=l(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};if(null==i){if("value"in(l(this.prototype,e)??{}))throw Error(`Field ${JSON.stringify(String(e))} on ${this.name} was declared as a reactive property but it's actually declared as a value on the prototype. Usually this is due to using @property or @state on a method.`);r("reactive-property-without-getter",`Field ${JSON.stringify(String(e))} on ${this.name} was declared as a reactive property but it does not have a getter. This will be an error in a future version of Lit.`)}return{get:i,set(t){let r=i?.call(this);o?.call(this,t),this.requestUpdate(e,r,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??b}static __prepare(){if(this.hasOwnProperty(_("elementProperties",this)))return;let e=u(this);e.finalize(),void 0!==e._initializers&&(this._initializers=[...e._initializers]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(_("finalized",this)))return;if(this.finalized=!0,this.__prepare(),this.hasOwnProperty(_("properties",this))){let e=this.properties;for(let t of[...d(e),...c(e)])this.createProperty(t,e[t])}let e=this[Symbol.metadata];if(null!==e){let t=litPropertyMetadata.get(e);if(void 0!==t)for(let[e,s]of t)this.elementProperties.set(e,s)}for(let[e,t]of(this.__attributeToPropertyMap=new Map,this.elementProperties)){let s=this.__attributeNameForProperty(e,t);void 0!==s&&this.__attributeToPropertyMap.set(s,e)}this.elementStyles=this.finalizeStyles(this.styles),this.hasOwnProperty("createProperty")&&r("no-override-create-property","Overriding ReactiveElement.createProperty() is deprecated. The override will not be called with standard decorators"),this.hasOwnProperty("getPropertyDescriptor")&&r("no-override-get-property-descriptor","Overriding ReactiveElement.getPropertyDescriptor() is deprecated. The override will not be called with standard decorators")}static finalizeStyles(e){let t=[];if(Array.isArray(e))for(let s of new Set(e.flat(1/0).reverse()))t.unshift((0,i.getCompatibleStyle)(s));else void 0!==e&&t.push((0,i.getCompatibleStyle)(e));return t}static __attributeNameForProperty(e,t){let s=t.attribute;return!1===s?void 0:"string"==typeof s?s:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this.__instanceProperties=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this.__reflectingProperty=null,this.__initialize()}__initialize(){this.__updatePromise=new Promise(e=>this.enableUpdating=e),this._$changedProperties=new Map,this.__saveInstanceProperties(),this.requestUpdate(),this.constructor._initializers?.forEach(e=>e(this))}addController(e){(this.__controllers??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this.__controllers?.delete(e)}__saveInstanceProperties(){let e=new Map;for(let t of this.constructor.elementProperties.keys())this.hasOwnProperty(t)&&(e.set(t,this[t]),delete this[t]);e.size>0&&(this.__instanceProperties=e)}createRenderRoot(){let e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return(0,i.adoptStyles)(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this.__controllers?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this.__controllers?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,s){this._$attributeToProperty(e,s)}__propertyToAttribute(e,t){let s=this.constructor.elementProperties.get(e),i=this.constructor.__attributeNameForProperty(e,s);if(void 0!==i&&!0===s.reflect){let o=(s.converter?.toAttribute!==void 0?s.converter:v).toAttribute(t,s.type);this.constructor.enabledWarnings.includes("migration")&&void 0===o&&r("undefined-attribute-value",`The attribute value for the ${e} property is undefined on element ${this.localName}. The attribute will be removed, but in the previous version of \`ReactiveElement\`, the attribute would not have changed.`),this.__reflectingProperty=e,null==o?this.removeAttribute(i):this.setAttribute(i,o),this.__reflectingProperty=null}}_$attributeToProperty(e,t){let s=this.constructor,r=s.__attributeToPropertyMap.get(e);if(void 0!==r&&this.__reflectingProperty!==r){let e=s.getPropertyOptions(r),i="function"==typeof e.converter?{fromAttribute:e.converter}:e.converter?.fromAttribute!==void 0?e.converter:v;this.__reflectingProperty=r,this[r]=i.fromAttribute(t,e.type)??this.__defaultValues?.get(r)??null,this.__reflectingProperty=null}}requestUpdate(e,t,s){if(void 0!==e){e instanceof Event&&r("","The requestUpdate() method was called with an Event as the property name. This is probably a mistake caused by binding this.requestUpdate as an event listener. Instead bind a function that will call it with no arguments: () => this.requestUpdate()");let i=this.constructor,o=this[e];if(!(((s??=i.getPropertyOptions(e)).hasChanged??y)(o,t)||s.useDefault&&s.reflect&&o===this.__defaultValues?.get(e)&&!this.hasAttribute(i.__attributeNameForProperty(e,s))))return;this._$changeProperty(e,t,s)}!1===this.isUpdatePending&&(this.__updatePromise=this.__enqueueUpdate())}_$changeProperty(e,t,{useDefault:s,reflect:r,wrapped:i},o){(!s||(this.__defaultValues??=new Map).has(e)||(this.__defaultValues.set(e,o??t??this[e]),!0===i&&void 0===o))&&(this._$changedProperties.has(e)||(this.hasUpdated||s||(t=void 0),this._$changedProperties.set(e,t)),!0===r&&this.__reflectingProperty!==e&&(this.__reflectingProperties??=new Set).add(e))}async __enqueueUpdate(){this.isUpdatePending=!0;try{await this.__updatePromise}catch(e){Promise.reject(e)}let e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){let e=this.performUpdate();return this.constructor.enabledWarnings.includes("async-perform-update")&&"function"==typeof e?.then&&r("async-perform-update",`Element ${this.localName} returned a Promise from performUpdate(). This behavior is deprecated and will be removed in a future version of ReactiveElement.`),e}performUpdate(){if(!this.isUpdatePending)return;if(g?.({kind:"update"}),!this.hasUpdated){this.renderRoot??=this.createRenderRoot();{let e=[...this.constructor.elementProperties.keys()].filter(e=>this.hasOwnProperty(e)&&e in u(this));if(e.length)throw Error(`The following properties on element ${this.localName} will not trigger updates as expected because they are set using class fields: ${e.join(", ")}. Native class fields and some compiled output will overwrite accessors used for detecting changes. See https://lit.dev/msg/class-field-shadowing for more information.`)}if(this.__instanceProperties){for(let[e,t]of this.__instanceProperties)this[e]=t;this.__instanceProperties=void 0}let e=this.constructor.elementProperties;if(e.size>0)for(let[t,s]of e){let{wrapped:e}=s,r=this[t];!0!==e||this._$changedProperties.has(t)||void 0===r||this._$changeProperty(t,void 0,s,r)}}let e=!1,t=this._$changedProperties;try{(e=this.shouldUpdate(t))?(this.willUpdate(t),this.__controllers?.forEach(e=>e.hostUpdate?.()),this.update(t)):this.__markUpdated()}catch(t){throw e=!1,this.__markUpdated(),t}e&&this._$didUpdate(t)}willUpdate(e){}_$didUpdate(e){this.__controllers?.forEach(e=>e.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e),this.isUpdatePending&&this.constructor.enabledWarnings.includes("change-in-update")&&r("change-in-update",`Element ${this.localName} scheduled an update (generally because a property was set) after an update completed, causing a new update to be scheduled. This is inefficient and should be avoided unless the next update can only be scheduled as a side effect of the previous update.`)}__markUpdated(){this._$changedProperties=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this.__updatePromise}shouldUpdate(e){return!0}update(e){this.__reflectingProperties&&=this.__reflectingProperties.forEach(e=>this.__propertyToAttribute(e,this[e])),this.__markUpdated()}updated(e){}firstUpdated(e){}}j.elementStyles=[],j.shadowRootOptions={mode:"open"},j[_("elementProperties",j)]=new Map,j[_("finalized",j)]=new Map,p?.({ReactiveElement:j});{j.enabledWarnings=["change-in-update","async-perform-update"];let e=function(e){e.hasOwnProperty(_("enabledWarnings",e))||(e.enabledWarnings=e.enabledWarnings.slice())};j.enableWarning=function(t){e(this),this.enabledWarnings.includes(t)||this.enabledWarnings.push(t)},j.disableWarning=function(t){e(this);let s=this.enabledWarnings.indexOf(t);s>=0&&this.enabledWarnings.splice(s,1)}}(h.reactiveElementVersions??=[]).push("2.1.0"),h.reactiveElementVersions.length>1&&queueMicrotask(()=>{r("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.")})},"./node_modules/filesize/dist/filesize.esm.js":function(e,t,s){"use strict";s.r(t),s.d(t,{filesize:()=>c,partial:()=>u});let r="bits",i="bytes",o="jedec",a="round",l="string",d={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function c(e,{bits:t=!1,pad:s=!1,base:u=-1,round:h=2,locale:m="",localeOptions:f={},separator:p="",spacer:g=" ",symbols:_={},standard:v="",output:y=l,fullform:b=!1,fullforms:j=[],exponent:w=-1,roundingMethod:S=a,precision:x=0}={}){let E=w,A=Number(e),C=[],k=0,$="";"si"===v?(u=10,v=o):"iec"===v||v===o?u=2:2===u?v="iec":(u=10,v=o);let T=10===u?1e3:1024,M=A<0,O=Math[S];if("bigint"!=typeof e&&isNaN(e))throw TypeError("Invalid number");if("function"!=typeof O)throw TypeError("Invalid rounding method");if(M&&(A=-A),(-1===E||isNaN(E))&&(E=Math.floor(Math.log(A)/Math.log(T)))<0&&(E=0),E>8&&(x>0&&(x+=8-E),E=8),"exponent"===y)return E;if(0===A)C[0]=0,$=C[1]=d.symbol[v][t?r:i][E];else{k=A/(2===u?Math.pow(2,10*E):Math.pow(1e3,E)),t&&(k*=8)>=T&&E<8&&(k/=T,E++);let e=Math.pow(10,E>0?h:0);C[0]=O(k*e)/e,C[0]===T&&E<8&&-1===w&&(C[0]=1,E++),$=C[1]=10===u&&1===E?t?"kbit":"kB":d.symbol[v][t?r:i][E]}if(M&&(C[0]=-C[0]),x>0&&(C[0]=C[0].toPrecision(x)),C[1]=_[C[1]]||C[1],!0===m?C[0]=C[0].toLocaleString():m.length>0?C[0]=C[0].toLocaleString(m,f):p.length>0&&(C[0]=C[0].toString().replace(".",p)),s&&h>0){let e=C[0].toString(),t=p||(e.match(/(\D)/g)||[]).pop()||".",s=e.toString().split(t),r=s[1]||"",i=r.length;C[0]=`${s[0]}${t}${r.padEnd(i+(h-i),"0")}`}return!0===b&&(C[1]=j[E]?j[E]:d.fullform[v][E]+(t?"bit":"byte")+(1===C[0]?"":"s")),"array"===y?C:"object"===y?{value:C[0],symbol:C[1],exponent:E,unit:$}:C.join(g)}function u({bits:e=!1,pad:t=!1,base:s=-1,round:r=2,locale:i="",localeOptions:o={},separator:d="",spacer:h=" ",symbols:m={},standard:f="",output:p=l,fullform:g=!1,fullforms:_=[],exponent:v=-1,roundingMethod:y=a,precision:b=0}={}){return a=>c(a,{bits:e,pad:t,base:s,round:r,locale:i,localeOptions:o,separator:d,spacer:h,symbols:m,standard:f,output:p,fullform:g,fullforms:_,exponent:v,roundingMethod:y,precision:b})}},"./node_modules/lit-element/development/lit-element.js":function(e,t,s){"use strict";let r;s.r(t),s.d(t,{CSSResult:()=>i.CSSResult,LitElement:()=>l,ReactiveElement:()=>i.ReactiveElement,_$LE:()=>c,_$LH:()=>o._$LH,adoptStyles:()=>i.adoptStyles,css:()=>i.css,defaultConverter:()=>i.defaultConverter,getCompatibleStyle:()=>i.getCompatibleStyle,html:()=>o.html,mathml:()=>o.mathml,noChange:()=>o.noChange,notEqual:()=>i.notEqual,nothing:()=>o.nothing,render:()=>o.render,supportsAdoptingStyleSheets:()=>i.supportsAdoptingStyleSheets,svg:()=>o.svg,unsafeCSS:()=>i.unsafeCSS});var i=s("./node_modules/@lit/reactive-element/development/reactive-element.js"),o=s("./node_modules/lit-html/development/lit-html.js");let a=globalThis;a.litIssuedWarnings??=new Set,r=(e,t)=>{t+=` See https://lit.dev/msg/${e} for more information.`,a.litIssuedWarnings.has(t)||a.litIssuedWarnings.has(e)||(console.warn(t),a.litIssuedWarnings.add(t))};class l extends i.ReactiveElement{constructor(){super(...arguments),this.renderOptions={host:this},this.__childPart=void 0}createRenderRoot(){let e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){let t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this.__childPart=(0,o.render)(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this.__childPart?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this.__childPart?.setConnected(!1)}render(){return o.noChange}}l._$litElement$=!0,l.finalized=!0,a.litElementHydrateSupport?.({LitElement:l});let d=a.litElementPolyfillSupportDevMode;d?.({LitElement:l});let c={_$attributeToProperty:(e,t,s)=>{e._$attributeToProperty(t,s)},_$changedProperties:e=>e._$changedProperties};(a.litElementVersions??=[]).push("4.2.0"),a.litElementVersions.length>1&&queueMicrotask(()=>{r("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.")})},"./node_modules/lit-html/development/async-directive.js":function(e,t,s){"use strict";s.r(t),s.d(t,{AsyncDirective:()=>h,Directive:()=>i.Directive,PartType:()=>i.PartType,directive:()=>i.directive});var r=s("./node_modules/lit-html/development/directive-helpers.js"),i=s("./node_modules/lit-html/development/directive.js");let o=(e,t)=>{let s=e._$disconnectableChildren;if(void 0===s)return!1;for(let e of s)e._$notifyDirectiveConnectionChanged?.(t,!1),o(e,t);return!0},a=e=>{let t,s;do{if(void 0===(t=e._$parent))break;(s=t._$disconnectableChildren).delete(e),e=t}while(s?.size===0)},l=e=>{for(let t;t=e._$parent;e=t){let s=t._$disconnectableChildren;if(void 0===s)t._$disconnectableChildren=s=new Set;else if(s.has(e))break;s.add(e),u(t)}};function d(e){void 0!==this._$disconnectableChildren?(a(this),this._$parent=e,l(this)):this._$parent=e}function c(e,t=!1,s=0){let r=this._$committedValue,i=this._$disconnectableChildren;if(void 0!==i&&0!==i.size)if(t)if(Array.isArray(r))for(let e=s;e<r.length;e++)o(r[e],!1),a(r[e]);else null!=r&&(o(r,!1),a(r));else o(this,e)}let u=e=>{e.type==i.PartType.CHILD&&(e._$notifyConnectionChanged??=c,e._$reparentDisconnectables??=d)};class h extends i.Directive{constructor(){super(...arguments),this._$disconnectableChildren=void 0}_$initialize(e,t,s){super._$initialize(e,t,s),l(this),this.isConnected=e._$isConnected}_$notifyDirectiveConnectionChanged(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(o(this,e),a(this))}setValue(e){if((0,r.isSingleExpression)(this.__part))this.__part._$setValue(e,this);else{if(void 0===this.__attributeIndex)throw Error("Expected this.__attributeIndex to be a number");let t=[...this.__part._$committedValue];t[this.__attributeIndex]=e,this.__part._$setValue(t,this,0)}}disconnected(){}reconnected(){}}},"./node_modules/lit-html/development/directive-helpers.js":function(e,t,s){"use strict";s.r(t),s.d(t,{TemplateResultType:()=>a,clearPart:()=>b,getCommittedValue:()=>v,getDirectiveClass:()=>u,insertPart:()=>f,isCompiledTemplateResult:()=>d,isDirectiveResult:()=>c,isPrimitive:()=>o,isSingleExpression:()=>h,isTemplateResult:()=>l,removePart:()=>y,setChildPartValue:()=>p,setCommittedValue:()=>_});let{_ChildPart:r}=s("./node_modules/lit-html/development/lit-html.js")._$LH,i=window.ShadyDOM?.inUse&&window.ShadyDOM?.noPatch===!0?window.ShadyDOM.wrap:e=>e,o=e=>null===e||"object"!=typeof e&&"function"!=typeof e,a={HTML:1,SVG:2,MATHML:3},l=(e,t)=>void 0===t?e?._$litType$!==void 0:e?._$litType$===t,d=e=>e?._$litType$?.h!=null,c=e=>e?._$litDirective$!==void 0,u=e=>e?._$litDirective$,h=e=>void 0===e.strings,m=()=>document.createComment(""),f=(e,t,s)=>{let o=i(e._$startNode).parentNode,a=void 0===t?e._$endNode:t._$startNode;if(void 0===s)s=new r(i(o).insertBefore(m(),a),i(o).insertBefore(m(),a),e,e.options);else{let t=i(s._$endNode).nextSibling,r=s._$parent,l=r!==e;if(l){let t;s._$reparentDisconnectables?.(e),s._$parent=e,void 0!==s._$notifyConnectionChanged&&(t=e._$isConnected)!==r._$isConnected&&s._$notifyConnectionChanged(t)}if(t!==a||l){let e=s._$startNode;for(;e!==t;){let t=i(e).nextSibling;i(o).insertBefore(e,a),e=t}}}return s},p=(e,t,s=e)=>(e._$setValue(t,s),e),g={},_=(e,t=g)=>e._$committedValue=t,v=e=>e._$committedValue,y=e=>{e._$notifyConnectionChanged?.(!1,!0);let t=e._$startNode,s=i(e._$endNode).nextSibling;for(;t!==s;){let e=i(t).nextSibling;i(t).remove(),t=e}},b=e=>{e._$clear()}},"./node_modules/lit-html/development/directive.js":function(e,t,s){"use strict";s.r(t),s.d(t,{Directive:()=>o,PartType:()=>r,directive:()=>i});let r={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},i=e=>(...t)=>({_$litDirective$:e,values:t});class o{constructor(e){}get _$isConnected(){return this._$parent._$isConnected}_$initialize(e,t,s){this.__part=e,this._$parent=t,this.__attributeIndex=s}_$resolve(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}},"./node_modules/lit-html/development/directives/private-async-helpers.js":function(e,t,s){"use strict";s.r(t),s.d(t,{Pauser:()=>o,PseudoWeakRef:()=>i,forAwaitOf:()=>r});let r=async(e,t)=>{for await(let s of e)if(await t(s)===!1)return};class i{constructor(e){this._ref=e}disconnect(){this._ref=void 0}reconnect(e){this._ref=e}deref(){return this._ref}}class o{constructor(){this._promise=void 0,this._resolve=void 0}get(){return this._promise}pause(){this._promise??=new Promise(e=>this._resolve=e)}resume(){this._resolve?.(),this._promise=this._resolve=void 0}}},"./node_modules/lit-html/development/directives/repeat.js":function(e,t,s){"use strict";s.r(t),s.d(t,{repeat:()=>d});var r=s("./node_modules/lit-html/development/lit-html.js"),i=s("./node_modules/lit-html/development/directive.js"),o=s("./node_modules/lit-html/development/directive-helpers.js");let a=(e,t,s)=>{let r=new Map;for(let i=t;i<=s;i++)r.set(e[i],i);return r};class l extends i.Directive{constructor(e){if(super(e),e.type!==i.PartType.CHILD)throw Error("repeat() can only be used in text expressions")}_getValuesAndKeys(e,t,s){let r;void 0===s?s=t:void 0!==t&&(r=t);let i=[],o=[],a=0;for(let t of e)i[a]=r?r(t,a):a,o[a]=s(t,a),a++;return{values:o,keys:i}}render(e,t,s){return this._getValuesAndKeys(e,t,s).values}update(e,[t,s,i]){let l,d,c=(0,o.getCommittedValue)(e),{values:u,keys:h}=this._getValuesAndKeys(t,s,i);if(!Array.isArray(c))return this._itemKeys=h,u;let m=this._itemKeys??=[],f=[],p=0,g=c.length-1,_=0,v=u.length-1;for(;p<=g&&_<=v;)if(null===c[p])p++;else if(null===c[g])g--;else if(m[p]===h[_])f[_]=(0,o.setChildPartValue)(c[p],u[_]),p++,_++;else if(m[g]===h[v])f[v]=(0,o.setChildPartValue)(c[g],u[v]),g--,v--;else if(m[p]===h[v])f[v]=(0,o.setChildPartValue)(c[p],u[v]),(0,o.insertPart)(e,f[v+1],c[p]),p++,v--;else if(m[g]===h[_])f[_]=(0,o.setChildPartValue)(c[g],u[_]),(0,o.insertPart)(e,c[p],c[g]),g--,_++;else if(void 0===l&&(l=a(h,_,v),d=a(m,p,g)),l.has(m[p]))if(l.has(m[g])){let t=d.get(h[_]),s=void 0!==t?c[t]:null;if(null===s){let t=(0,o.insertPart)(e,c[p]);(0,o.setChildPartValue)(t,u[_]),f[_]=t}else f[_]=(0,o.setChildPartValue)(s,u[_]),(0,o.insertPart)(e,c[p],s),c[t]=null;_++}else(0,o.removePart)(c[g]),g--;else(0,o.removePart)(c[p]),p++;for(;_<=v;){let t=(0,o.insertPart)(e,f[v+1]);(0,o.setChildPartValue)(t,u[_]),f[_++]=t}for(;p<=g;){let e=c[p++];null!==e&&(0,o.removePart)(e)}return this._itemKeys=h,(0,o.setCommittedValue)(e,f),r.noChange}}let d=(0,i.directive)(l)},"./node_modules/lit-html/development/directives/unsafe-html.js":function(e,t,s){"use strict";s.r(t),s.d(t,{UnsafeHTMLDirective:()=>o,unsafeHTML:()=>a});var r=s("./node_modules/lit-html/development/lit-html.js"),i=s("./node_modules/lit-html/development/directive.js");class o extends i.Directive{constructor(e){if(super(e),this._value=r.nothing,e.type!==i.PartType.CHILD)throw Error(`${this.constructor.directiveName}() can only be used in child bindings`)}render(e){if(e===r.nothing||null==e)return this._templateResult=void 0,this._value=e;if(e===r.noChange)return e;if("string"!=typeof e)throw Error(`${this.constructor.directiveName}() called with a non-string value`);if(e===this._value)return this._templateResult;this._value=e;let t=[e];return t.raw=t,this._templateResult={_$litType$:this.constructor.resultType,strings:t,values:[]}}}o.directiveName="unsafeHTML",o.resultType=1;let a=(0,i.directive)(o)},"./node_modules/lit-html/development/directives/until.js":function(e,t,s){"use strict";s.r(t),s.d(t,{UntilDirective:()=>d,until:()=>c});var r=s("./node_modules/lit-html/development/lit-html.js"),i=s("./node_modules/lit-html/development/directive-helpers.js"),o=s("./node_modules/lit-html/development/async-directive.js"),a=s("./node_modules/lit-html/development/directives/private-async-helpers.js");let l=e=>!(0,i.isPrimitive)(e)&&"function"==typeof e.then;class d extends o.AsyncDirective{constructor(){super(...arguments),this.__lastRenderedIndex=0x3fffffff,this.__values=[],this.__weakThis=new a.PseudoWeakRef(this),this.__pauser=new a.Pauser}render(...e){return e.find(e=>!l(e))??r.noChange}update(e,t){let s=this.__values,i=s.length;this.__values=t;let o=this.__weakThis,a=this.__pauser;this.isConnected||this.disconnected();for(let e=0;e<t.length&&!(e>this.__lastRenderedIndex);e++){let r=t[e];if(!l(r))return this.__lastRenderedIndex=e,r;e<i&&r===s[e]||(this.__lastRenderedIndex=0x3fffffff,i=0,Promise.resolve(r).then(async e=>{for(;a.get();)await a.get();let t=o.deref();if(void 0!==t){let s=t.__values.indexOf(r);s>-1&&s<t.__lastRenderedIndex&&(t.__lastRenderedIndex=s,t.setValue(e))}}))}return r.noChange}disconnected(){this.__weakThis.disconnect(),this.__pauser.pause()}reconnected(){this.__weakThis.reconnect(this),this.__pauser.resume()}}let c=(0,o.directive)(d)},"./node_modules/lit-html/development/is-server.js":function(e,t,s){"use strict";s.r(t),s.d(t,{isServer:()=>r});let r=!1},"./node_modules/lit-html/development/lit-html.js":function(e,t,s){"use strict";let r;s.r(t),s.d(t,{_$LH:()=>Y,html:()=>O,mathml:()=>N,noChange:()=>R,nothing:()=>D,render:()=>Z,svg:()=>I});let i=globalThis,o=e=>{i.emitLitDebugLogEvents&&i.dispatchEvent(new CustomEvent("lit-debug",{detail:e}))},a=0;i.litIssuedWarnings??=new Set,r=(e,t)=>{t+=e?` See https://lit.dev/msg/${e} for more information.`:"",i.litIssuedWarnings.has(t)||i.litIssuedWarnings.has(e)||(console.warn(t),i.litIssuedWarnings.add(t))},queueMicrotask(()=>{r("dev-mode","Lit is in dev mode. Not recommended for production!")});let l=i.ShadyDOM?.inUse&&i.ShadyDOM?.noPatch===!0?i.ShadyDOM.wrap:e=>e,d=i.trustedTypes,c=d?d.createPolicy("lit-html",{createHTML:e=>e}):void 0,u=e=>e,h=(e,t,s)=>u,m=(e,t,s)=>z(e,t,s),f="$lit$",p=`lit$${Math.random().toFixed(9).slice(2)}$`,g="?"+p,_=`<${g}>`,v=document,y=()=>v.createComment(""),b=e=>null===e||"object"!=typeof e&&"function"!=typeof e,j=Array.isArray,w=e=>j(e)||"function"==typeof e?.[Symbol.iterator],S=`[ 	
\f\r]`,x=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,E=/-->/g,A=/>/g,C=RegExp(`>|${S}(?:([^\\s"'>=/]+)(${S}*=${S}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),k=/'/g,$=/"/g,T=/^(?:script|style|textarea|title)$/i,M=e=>(t,...s)=>(t.some(e=>void 0===e)&&console.warn("Some template strings are undefined.\nThis is probably caused by illegal octal escape sequences."),s.some(e=>e?._$litStatic$)&&r("",`Static values 'literal' or 'unsafeStatic' cannot be used as values to non-static templates.
Please use the static 'html' tag function. See https://lit.dev/docs/templates/expressions/#static-expressions`),{_$litType$:e,strings:t,values:s}),O=M(1),I=M(2),N=M(3),R=Symbol.for("lit-noChange"),D=Symbol.for("lit-nothing"),L=new WeakMap,P=v.createTreeWalker(v,129),z=h;function U(e,t){if(!j(e)||!e.hasOwnProperty("raw")){let e="invalid template strings array";throw Error(e=`
          Internal Error: expected template strings to be an array
          with a 'raw' field. Faking a template strings array by
          calling html or svg like an ordinary function is effectively
          the same as calling unsafeHtml and can lead to major security
          issues, e.g. opening your code up to XSS attacks.
          If you're using the html or svg tagged template functions normally
          and still seeing this error, please file a bug at
          https://github.com/lit/lit/issues/new?template=bug_report.md
          and include information about your build tooling, if any.
        `.trim().replace(/\n */g,"\n"))}return void 0!==c?c.createHTML(t):t}let B=(e,t)=>{let s,r=e.length-1,i=[],o=2===t?"<svg>":3===t?"<math>":"",a=x;for(let t=0;t<r;t++){let r,l,d=e[t],c=-1,u=0;for(;u<d.length&&(a.lastIndex=u,null!==(l=a.exec(d)));)if(u=a.lastIndex,a===x){if("!--"===l[1])a=E;else if(void 0!==l[1])a=A;else if(void 0!==l[2])T.test(l[2])&&(s=RegExp(`</${l[2]}`,"g")),a=C;else if(void 0!==l[3])throw Error("Bindings in tag names are not supported. Please use static templates instead. See https://lit.dev/docs/templates/expressions/#static-expressions")}else a===C?">"===l[0]?(a=s??x,c=-1):void 0===l[1]?c=-2:(c=a.lastIndex-l[2].length,r=l[1],a=void 0===l[3]?C:'"'===l[3]?$:k):a===$||a===k?a=C:a===E||a===A?a=x:(a=C,s=void 0);console.assert(-1===c||a===C||a===k||a===$,"unexpected parse state B");let h=a===C&&e[t+1].startsWith("/>")?" ":"";o+=a===x?d+_:c>=0?(i.push(r),d.slice(0,c)+f+d.slice(c)+p+h):d+p+(-2===c?t:h)}let l=o+(e[r]||"<?>")+(2===t?"</svg>":3===t?"</math>":"");return[U(e,l),i]};class F{constructor({strings:e,_$litType$:t},s){let i;this.parts=[];let a=0,l=0,c=e.length-1,u=this.parts,[h,m]=B(e,t);if(this.el=F.createElement(h,s),P.currentNode=this.el.content,2===t||3===t){let e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(i=P.nextNode())&&u.length<c;){if(1===i.nodeType){{let e=i.localName;if(/^(?:textarea|template)$/i.test(e)&&i.innerHTML.includes(p)){let t=`Expressions are not supported inside \`${e}\` elements. See https://lit.dev/msg/expression-in-${e} for more information.`;if("template"===e)throw Error(t);r("",t)}}if(i.hasAttributes())for(let e of i.getAttributeNames())if(e.endsWith(f)){let t=m[l++],s=i.getAttribute(e).split(p),r=/([.?@])?(.*)/.exec(t);u.push({type:1,index:a,name:r[2],strings:s,ctor:"."===r[1]?V:"?"===r[1]?K:"@"===r[1]?J:W}),i.removeAttribute(e)}else e.startsWith(p)&&(u.push({type:6,index:a}),i.removeAttribute(e));if(T.test(i.tagName)){let e=i.textContent.split(p),t=e.length-1;if(t>0){i.textContent=d?d.emptyScript:"";for(let s=0;s<t;s++)i.append(e[s],y()),P.nextNode(),u.push({type:2,index:++a});i.append(e[t],y())}}}else if(8===i.nodeType)if(i.data===g)u.push({type:2,index:a});else{let e=-1;for(;-1!==(e=i.data.indexOf(p,e+1));)u.push({type:7,index:a}),e+=p.length-1}a++}if(m.length!==l)throw Error('Detected duplicate attribute bindings. This occurs if your template has duplicate attributes on an element tag. For example "<input ?disabled=${true} ?disabled=${false}>" contains a duplicate "disabled" attribute. The error was detected in the following template: \n`'+e.join("${...}")+"`");o&&o({kind:"template prep",template:this,clonableTemplate:this.el,parts:this.parts,strings:e})}static createElement(e,t){let s=v.createElement("template");return s.innerHTML=e,s}}function q(e,t,s=e,r){if(t===R)return t;let i=void 0!==r?s.__directives?.[r]:s.__directive,o=b(t)?void 0:t._$litDirective$;return i?.constructor!==o&&(i?._$notifyDirectiveConnectionChanged?.(!1),void 0===o?i=void 0:(i=new o(e))._$initialize(e,s,r),void 0!==r?(s.__directives??=[])[r]=i:s.__directive=i),void 0!==i&&(t=q(e,i._$resolve(e,t.values),i,r)),t}class H{constructor(e,t){this._$parts=[],this._$disconnectableChildren=void 0,this._$template=e,this._$parent=t}get parentNode(){return this._$parent.parentNode}get _$isConnected(){return this._$parent._$isConnected}_clone(e){let{el:{content:t},parts:s}=this._$template,r=(e?.creationScope??v).importNode(t,!0);P.currentNode=r;let i=P.nextNode(),o=0,a=0,l=s[0];for(;void 0!==l;){if(o===l.index){let t;2===l.type?t=new G(i,i.nextSibling,this,e):1===l.type?t=new l.ctor(i,l.name,l.strings,this,e):6===l.type&&(t=new Q(i,this,e)),this._$parts.push(t),l=s[++a]}o!==l?.index&&(i=P.nextNode(),o++)}return P.currentNode=v,r}_update(e){let t=0;for(let s of this._$parts)void 0!==s&&(o&&o({kind:"set part",part:s,value:e[t],valueIndex:t,values:e,templateInstance:this}),void 0!==s.strings?(s._$setValue(e,s,t),t+=s.strings.length-2):s._$setValue(e[t])),t++}}class G{get _$isConnected(){return this._$parent?._$isConnected??this.__isConnected}constructor(e,t,s,r){this.type=2,this._$committedValue=D,this._$disconnectableChildren=void 0,this._$startNode=e,this._$endNode=t,this._$parent=s,this.options=r,this.__isConnected=r?.isConnected??!0,this._textSanitizer=void 0}get parentNode(){let e=l(this._$startNode).parentNode,t=this._$parent;return void 0!==t&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$startNode}get endNode(){return this._$endNode}_$setValue(e,t=this){if(null===this.parentNode)throw Error("This `ChildPart` has no `parentNode` and therefore cannot accept a value. This likely means the element containing the part was manipulated in an unsupported way outside of Lit's control such that the part's marker nodes were ejected from DOM. For example, setting the element's `innerHTML` or `textContent` can do this.");if(b(e=q(this,e,t)))e===D||null==e||""===e?(this._$committedValue!==D&&(o&&o({kind:"commit nothing to child",start:this._$startNode,end:this._$endNode,parent:this._$parent,options:this.options}),this._$clear()),this._$committedValue=D):e!==this._$committedValue&&e!==R&&this._commitText(e);else if(void 0!==e._$litType$)this._commitTemplateResult(e);else if(void 0!==e.nodeType){if(this.options?.host===e){this._commitText("[probable mistake: rendered a template's host in itself (commonly caused by writing ${this} in a template]"),console.warn("Attempted to render the template host",e,"inside itself. This is almost always a mistake, and in dev mode ","we render some warning text. In production however, we'll ","render it, which will usually result in an error, and sometimes ","in the element disappearing from the DOM.");return}this._commitNode(e)}else w(e)?this._commitIterable(e):this._commitText(e)}_insert(e){return l(l(this._$startNode).parentNode).insertBefore(e,this._$endNode)}_commitNode(e){if(this._$committedValue!==e){if(this._$clear(),z!==h){let e=this._$startNode.parentNode?.nodeName;if("STYLE"===e||"SCRIPT"===e){let t="Forbidden";throw Error(t="STYLE"===e?"Lit does not support binding inside style nodes. This is a security risk, as style injection attacks can exfiltrate data and spoof UIs. Consider instead using css`...` literals to compose styles, and do dynamic styling with css custom properties, ::parts, <slot>s, and by mutating the DOM rather than stylesheets.":"Lit does not support binding inside script nodes. This is a security risk, as it could allow arbitrary code execution.")}}o&&o({kind:"commit node",start:this._$startNode,parent:this._$parent,value:e,options:this.options}),this._$committedValue=this._insert(e)}}_commitText(e){if(this._$committedValue!==D&&b(this._$committedValue)){let t=l(this._$startNode).nextSibling;void 0===this._textSanitizer&&(this._textSanitizer=m(t,"data","property")),e=this._textSanitizer(e),o&&o({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}else if(0)this._commitNode(v.createTextNode(e)),o&&o({kind:"commit text",node:l(this._$startNode).nextSibling,value:e,options:this.options});else{let t=v.createTextNode("");this._commitNode(t),void 0===this._textSanitizer&&(this._textSanitizer=m(t,"data","property")),e=this._textSanitizer(e),o&&o({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}this._$committedValue=e}_commitTemplateResult(e){let{values:t,_$litType$:s}=e,r="number"==typeof s?this._$getTemplate(e):(void 0===s.el&&(s.el=F.createElement(U(s.h,s.h[0]),this.options)),s);if(this._$committedValue?._$template===r)o&&o({kind:"template updating",template:r,instance:this._$committedValue,parts:this._$committedValue._$parts,options:this.options,values:t}),this._$committedValue._update(t);else{let e=new H(r,this),s=e._clone(this.options);o&&o({kind:"template instantiated",template:r,instance:e,parts:e._$parts,options:this.options,fragment:s,values:t}),e._update(t),o&&o({kind:"template instantiated and updated",template:r,instance:e,parts:e._$parts,options:this.options,fragment:s,values:t}),this._commitNode(s),this._$committedValue=e}}_$getTemplate(e){let t=L.get(e.strings);return void 0===t&&L.set(e.strings,t=new F(e)),t}_commitIterable(e){let t;j(this._$committedValue)||(this._$committedValue=[],this._$clear());let s=this._$committedValue,r=0;for(let i of e)r===s.length?s.push(t=new G(this._insert(y()),this._insert(y()),this,this.options)):t=s[r],t._$setValue(i),r++;r<s.length&&(this._$clear(t&&l(t._$endNode).nextSibling,r),s.length=r)}_$clear(e=l(this._$startNode).nextSibling,t){for(this._$notifyConnectionChanged?.(!1,!0,t);e&&e!==this._$endNode;){let t=l(e).nextSibling;l(e).remove(),e=t}}setConnected(e){if(void 0===this._$parent)this.__isConnected=e,this._$notifyConnectionChanged?.(e);else if(1)throw Error("part.setConnected() may only be called on a RootPart returned from render().")}}class W{get tagName(){return this.element.tagName}get _$isConnected(){return this._$parent._$isConnected}constructor(e,t,s,r,i){this.type=1,this._$committedValue=D,this._$disconnectableChildren=void 0,this.element=e,this.name=t,this._$parent=r,this.options=i,s.length>2||""!==s[0]||""!==s[1]?(this._$committedValue=Array(s.length-1).fill(new String),this.strings=s):this._$committedValue=D,this._sanitizer=void 0}_$setValue(e,t=this,s,r){let i=this.strings,o=!1;if(void 0===i)(o=!b(e=q(this,e,t,0))||e!==this._$committedValue&&e!==R)&&(this._$committedValue=e);else{let r,a,l=e;for(r=0,e=i[0];r<i.length-1;r++)(a=q(this,l[s+r],t,r))===R&&(a=this._$committedValue[r]),o||=!b(a)||a!==this._$committedValue[r],a===D?e=D:e!==D&&(e+=(a??"")+i[r+1]),this._$committedValue[r]=a}o&&!r&&this._commitValue(e)}_commitValue(e){e===D?l(this.element).removeAttribute(this.name):(void 0===this._sanitizer&&(this._sanitizer=z(this.element,this.name,"attribute")),e=this._sanitizer(e??""),o&&o({kind:"commit attribute",element:this.element,name:this.name,value:e,options:this.options}),l(this.element).setAttribute(this.name,e??""))}}class V extends W{constructor(){super(...arguments),this.type=3}_commitValue(e){void 0===this._sanitizer&&(this._sanitizer=z(this.element,this.name,"property")),e=this._sanitizer(e),o&&o({kind:"commit property",element:this.element,name:this.name,value:e,options:this.options}),this.element[this.name]=e===D?void 0:e}}class K extends W{constructor(){super(...arguments),this.type=4}_commitValue(e){o&&o({kind:"commit boolean attribute",element:this.element,name:this.name,value:!!(e&&e!==D),options:this.options}),l(this.element).toggleAttribute(this.name,!!e&&e!==D)}}class J extends W{constructor(e,t,s,r,i){if(super(e,t,s,r,i),this.type=5,void 0!==this.strings)throw Error(`A \`<${e.localName}>\` has a \`@${t}=...\` listener with invalid content. Event listeners in templates must have exactly one expression and no surrounding text.`)}_$setValue(e,t=this){if((e=q(this,e,t,0)??D)===R)return;let s=this._$committedValue,r=e===D&&s!==D||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,i=e!==D&&(s===D||r);o&&o({kind:"commit event listener",element:this.element,name:this.name,value:e,options:this.options,removeListener:r,addListener:i,oldListener:s}),r&&this.element.removeEventListener(this.name,this,s),i&&this.element.addEventListener(this.name,this,e),this._$committedValue=e}handleEvent(e){"function"==typeof this._$committedValue?this._$committedValue.call(this.options?.host??this.element,e):this._$committedValue.handleEvent(e)}}class Q{constructor(e,t,s){this.element=e,this.type=6,this._$disconnectableChildren=void 0,this._$parent=t,this.options=s}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e){o&&o({kind:"commit to element binding",element:this.element,value:e,options:this.options}),q(this,e)}}let Y={_boundAttributeSuffix:f,_marker:p,_markerMatch:g,_HTML_RESULT:1,_getTemplateHtml:B,_TemplateInstance:H,_isIterable:w,_resolveDirective:q,_ChildPart:G,_AttributePart:W,_BooleanAttributePart:K,_EventPart:J,_PropertyPart:V,_ElementPart:Q},X=i.litHtmlPolyfillSupportDevMode;X?.(F,G),(i.litHtmlVersions??=[]).push("3.3.0"),i.litHtmlVersions.length>1&&queueMicrotask(()=>{r("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.")});let Z=(e,t,s)=>{if(null==t)throw TypeError(`The container to render into may not be ${t}`);let r=a++,i=s?.renderBefore??t,l=i._$litPart$;if(o&&o({kind:"begin render",id:r,value:e,container:t,options:s,part:l}),void 0===l){let e=s?.renderBefore??null;i._$litPart$=l=new G(t.insertBefore(y(),e),e,void 0,s??{})}return l._$setValue(e),o&&o({kind:"end render",id:r,value:e,container:t,options:s,part:l}),l};Z.setSanitizer=e=>{if(z!==h)throw Error("Attempted to overwrite existing lit-html security policy. setSanitizeDOMValueFactory should be called at most once.");z=e},Z.createSanitizer=m,Z._testOnlyClearSanitizerFactoryDoNotCallOrElse=()=>{z=h}},"./node_modules/lit/async-directive.js":function(e,t,s){"use strict";s.r(t),s.d(t,{AsyncDirective:()=>r.AsyncDirective,Directive:()=>r.Directive,PartType:()=>r.PartType,directive:()=>r.directive});var r=s("./node_modules/lit-html/development/async-directive.js")},"./node_modules/lit/directive.js":function(e,t,s){"use strict";s.r(t),s.d(t,{Directive:()=>r.Directive,PartType:()=>r.PartType,directive:()=>r.directive});var r=s("./node_modules/lit-html/development/directive.js")},"./node_modules/lit/directives/repeat.js":function(e,t,s){"use strict";s.r(t),s.d(t,{repeat:()=>r.repeat});var r=s("./node_modules/lit-html/development/directives/repeat.js")},"./node_modules/lit/directives/unsafe-html.js":function(e,t,s){"use strict";s.r(t),s.d(t,{UnsafeHTMLDirective:()=>r.UnsafeHTMLDirective,unsafeHTML:()=>r.unsafeHTML});var r=s("./node_modules/lit-html/development/directives/unsafe-html.js")},"./node_modules/lit/directives/until.js":function(e,t,s){"use strict";s.r(t),s.d(t,{UntilDirective:()=>r.UntilDirective,until:()=>r.until});var r=s("./node_modules/lit-html/development/directives/until.js")},"./node_modules/lit/html.js":function(e,t,s){"use strict";s.r(t),s.d(t,{_$LH:()=>r._$LH,html:()=>r.html,mathml:()=>r.mathml,noChange:()=>r.noChange,nothing:()=>r.nothing,render:()=>r.render,svg:()=>r.svg});var r=s("./node_modules/lit-html/development/lit-html.js")},"./node_modules/lit/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,{CSSResult:()=>r.CSSResult,LitElement:()=>r.LitElement,ReactiveElement:()=>r.ReactiveElement,_$LE:()=>r._$LE,_$LH:()=>r._$LH,adoptStyles:()=>r.adoptStyles,css:()=>r.css,defaultConverter:()=>r.defaultConverter,getCompatibleStyle:()=>r.getCompatibleStyle,html:()=>r.html,isServer:()=>i.isServer,mathml:()=>r.mathml,noChange:()=>r.noChange,notEqual:()=>r.notEqual,nothing:()=>r.nothing,render:()=>r.render,supportsAdoptingStyleSheets:()=>r.supportsAdoptingStyleSheets,svg:()=>r.svg,unsafeCSS:()=>r.unsafeCSS}),s("./node_modules/@lit/reactive-element/development/reactive-element.js"),s("./node_modules/lit-html/development/lit-html.js");var r=s("./node_modules/lit-element/development/lit-element.js"),i=s("./node_modules/lit-html/development/is-server.js")},"./node_modules/lodash-es/_DataView.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getNative.js"),i=s("./node_modules/lodash-es/_root.js");let o=(0,r.default)(i.default,"DataView")},"./node_modules/lodash-es/_Hash.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lodash-es/_hashClear.js"),i=s("./node_modules/lodash-es/_hashDelete.js"),o=s("./node_modules/lodash-es/_hashGet.js"),a=s("./node_modules/lodash-es/_hashHas.js"),l=s("./node_modules/lodash-es/_hashSet.js");function d(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}d.prototype.clear=r.default,d.prototype.delete=i.default,d.prototype.get=o.default,d.prototype.has=a.default,d.prototype.set=l.default;let c=d},"./node_modules/lodash-es/_ListCache.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lodash-es/_listCacheClear.js"),i=s("./node_modules/lodash-es/_listCacheDelete.js"),o=s("./node_modules/lodash-es/_listCacheGet.js"),a=s("./node_modules/lodash-es/_listCacheHas.js"),l=s("./node_modules/lodash-es/_listCacheSet.js");function d(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}d.prototype.clear=r.default,d.prototype.delete=i.default,d.prototype.get=o.default,d.prototype.has=a.default,d.prototype.set=l.default;let c=d},"./node_modules/lodash-es/_Map.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getNative.js"),i=s("./node_modules/lodash-es/_root.js");let o=(0,r.default)(i.default,"Map")},"./node_modules/lodash-es/_MapCache.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lodash-es/_mapCacheClear.js"),i=s("./node_modules/lodash-es/_mapCacheDelete.js"),o=s("./node_modules/lodash-es/_mapCacheGet.js"),a=s("./node_modules/lodash-es/_mapCacheHas.js"),l=s("./node_modules/lodash-es/_mapCacheSet.js");function d(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}d.prototype.clear=r.default,d.prototype.delete=i.default,d.prototype.get=o.default,d.prototype.has=a.default,d.prototype.set=l.default;let c=d},"./node_modules/lodash-es/_Promise.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getNative.js"),i=s("./node_modules/lodash-es/_root.js");let o=(0,r.default)(i.default,"Promise")},"./node_modules/lodash-es/_Set.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getNative.js"),i=s("./node_modules/lodash-es/_root.js");let o=(0,r.default)(i.default,"Set")},"./node_modules/lodash-es/_SetCache.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_MapCache.js"),i=s("./node_modules/lodash-es/_setCacheAdd.js"),o=s("./node_modules/lodash-es/_setCacheHas.js");function a(e){var t=-1,s=null==e?0:e.length;for(this.__data__=new r.default;++t<s;)this.add(e[t])}a.prototype.add=a.prototype.push=i.default,a.prototype.has=o.default;let l=a},"./node_modules/lodash-es/_Stack.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lodash-es/_ListCache.js"),i=s("./node_modules/lodash-es/_stackClear.js"),o=s("./node_modules/lodash-es/_stackDelete.js"),a=s("./node_modules/lodash-es/_stackGet.js"),l=s("./node_modules/lodash-es/_stackHas.js"),d=s("./node_modules/lodash-es/_stackSet.js");function c(e){var t=this.__data__=new r.default(e);this.size=t.size}c.prototype.clear=i.default,c.prototype.delete=o.default,c.prototype.get=a.default,c.prototype.has=l.default,c.prototype.set=d.default;let u=c},"./node_modules/lodash-es/_Symbol.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=s("./node_modules/lodash-es/_root.js").default.Symbol},"./node_modules/lodash-es/_Uint8Array.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=s("./node_modules/lodash-es/_root.js").default.Uint8Array},"./node_modules/lodash-es/_WeakMap.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getNative.js"),i=s("./node_modules/lodash-es/_root.js");let o=(0,r.default)(i.default,"WeakMap")},"./node_modules/lodash-es/_apply.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t,s){switch(s.length){case 0:return e.call(t);case 1:return e.call(t,s[0]);case 2:return e.call(t,s[0],s[1]);case 3:return e.call(t,s[0],s[1],s[2])}return e.apply(t,s)}},"./node_modules/lodash-es/_arrayEach.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t){for(var s=-1,r=null==e?0:e.length;++s<r&&!1!==t(e[s],s,e););return e}},"./node_modules/lodash-es/_arrayFilter.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t){for(var s=-1,r=null==e?0:e.length,i=0,o=[];++s<r;){var a=e[s];t(a,s,e)&&(o[i++]=a)}return o}},"./node_modules/lodash-es/_arrayLikeKeys.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lodash-es/_baseTimes.js"),i=s("./node_modules/lodash-es/isArguments.js"),o=s("./node_modules/lodash-es/isArray.js"),a=s("./node_modules/lodash-es/isBuffer.js"),l=s("./node_modules/lodash-es/_isIndex.js"),d=s("./node_modules/lodash-es/isTypedArray.js"),c=Object.prototype.hasOwnProperty;let u=function(e,t){var s=(0,o.default)(e),u=!s&&(0,i.default)(e),h=!s&&!u&&(0,a.default)(e),m=!s&&!u&&!h&&(0,d.default)(e),f=s||u||h||m,p=f?(0,r.default)(e.length,String):[],g=p.length;for(var _ in e)(t||c.call(e,_))&&!(f&&("length"==_||h&&("offset"==_||"parent"==_)||m&&("buffer"==_||"byteLength"==_||"byteOffset"==_)||(0,l.default)(_,g)))&&p.push(_);return p}},"./node_modules/lodash-es/_arrayMap.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t){for(var s=-1,r=null==e?0:e.length,i=Array(r);++s<r;)i[s]=t(e[s],s,e);return i}},"./node_modules/lodash-es/_arrayPush.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t){for(var s=-1,r=t.length,i=e.length;++s<r;)e[i+s]=t[s];return e}},"./node_modules/lodash-es/_arraySome.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t){for(var s=-1,r=null==e?0:e.length;++s<r;)if(t(e[s],s,e))return!0;return!1}},"./node_modules/lodash-es/_assignMergeValue.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseAssignValue.js"),i=s("./node_modules/lodash-es/eq.js");let o=function(e,t,s){(void 0===s||(0,i.default)(e[t],s))&&(void 0!==s||t in e)||(0,r.default)(e,t,s)}},"./node_modules/lodash-es/_assignValue.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_baseAssignValue.js"),i=s("./node_modules/lodash-es/eq.js"),o=Object.prototype.hasOwnProperty;let a=function(e,t,s){var a=e[t];o.call(e,t)&&(0,i.default)(a,s)&&(void 0!==s||t in e)||(0,r.default)(e,t,s)}},"./node_modules/lodash-es/_assocIndexOf.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/eq.js");let i=function(e,t){for(var s=e.length;s--;)if((0,r.default)(e[s][0],t))return s;return -1}},"./node_modules/lodash-es/_baseAssign.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_copyObject.js"),i=s("./node_modules/lodash-es/keys.js");let o=function(e,t){return e&&(0,r.default)(t,(0,i.default)(t),e)}},"./node_modules/lodash-es/_baseAssignIn.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_copyObject.js"),i=s("./node_modules/lodash-es/keysIn.js");let o=function(e,t){return e&&(0,r.default)(t,(0,i.default)(t),e)}},"./node_modules/lodash-es/_baseAssignValue.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_defineProperty.js");let i=function(e,t,s){"__proto__"==t&&r.default?(0,r.default)(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}},"./node_modules/lodash-es/_baseClone.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>T});var r=s("./node_modules/lodash-es/_Stack.js"),i=s("./node_modules/lodash-es/_arrayEach.js"),o=s("./node_modules/lodash-es/_assignValue.js"),a=s("./node_modules/lodash-es/_baseAssign.js"),l=s("./node_modules/lodash-es/_baseAssignIn.js"),d=s("./node_modules/lodash-es/_cloneBuffer.js"),c=s("./node_modules/lodash-es/_copyArray.js"),u=s("./node_modules/lodash-es/_copySymbols.js"),h=s("./node_modules/lodash-es/_copySymbolsIn.js"),m=s("./node_modules/lodash-es/_getAllKeys.js"),f=s("./node_modules/lodash-es/_getAllKeysIn.js"),p=s("./node_modules/lodash-es/_getTag.js"),g=s("./node_modules/lodash-es/_initCloneArray.js"),_=s("./node_modules/lodash-es/_initCloneByTag.js"),v=s("./node_modules/lodash-es/_initCloneObject.js"),y=s("./node_modules/lodash-es/isArray.js"),b=s("./node_modules/lodash-es/isBuffer.js"),j=s("./node_modules/lodash-es/isMap.js"),w=s("./node_modules/lodash-es/isObject.js"),S=s("./node_modules/lodash-es/isSet.js"),x=s("./node_modules/lodash-es/keys.js"),E=s("./node_modules/lodash-es/keysIn.js"),A="[object Arguments]",C="[object Function]",k="[object Object]",$={};$[A]=$["[object Array]"]=$["[object ArrayBuffer]"]=$["[object DataView]"]=$["[object Boolean]"]=$["[object Date]"]=$["[object Float32Array]"]=$["[object Float64Array]"]=$["[object Int8Array]"]=$["[object Int16Array]"]=$["[object Int32Array]"]=$["[object Map]"]=$["[object Number]"]=$[k]=$["[object RegExp]"]=$["[object Set]"]=$["[object String]"]=$["[object Symbol]"]=$["[object Uint8Array]"]=$["[object Uint8ClampedArray]"]=$["[object Uint16Array]"]=$["[object Uint32Array]"]=!0,$["[object Error]"]=$[C]=$["[object WeakMap]"]=!1;let T=function e(t,s,T,M,O,I){var N,R=1&s,D=2&s,L=4&s;if(T&&(N=O?T(t,M,O,I):T(t)),void 0!==N)return N;if(!(0,w.default)(t))return t;var P=(0,y.default)(t);if(P){if(N=(0,g.default)(t),!R)return(0,c.default)(t,N)}else{var z=(0,p.default)(t),U=z==C||"[object GeneratorFunction]"==z;if((0,b.default)(t))return(0,d.default)(t,R);if(z==k||z==A||U&&!O){if(N=D||U?{}:(0,v.default)(t),!R)return D?(0,h.default)(t,(0,l.default)(N,t)):(0,u.default)(t,(0,a.default)(N,t))}else{if(!$[z])return O?t:{};N=(0,_.default)(t,z,R)}}I||(I=new r.default);var B=I.get(t);if(B)return B;I.set(t,N),(0,S.default)(t)?t.forEach(function(r){N.add(e(r,s,T,r,t,I))}):(0,j.default)(t)&&t.forEach(function(r,i){N.set(i,e(r,s,T,i,t,I))});var F=L?D?f.default:m.default:D?E.default:x.default,q=P?void 0:F(t);return(0,i.default)(q||t,function(r,i){q&&(r=t[i=r]),(0,o.default)(N,i,e(r,s,T,i,t,I))}),N}},"./node_modules/lodash-es/_baseCreate.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/isObject.js"),i=Object.create;let o=function(){function e(){}return function(t){if(!(0,r.default)(t))return{};if(i)return i(t);e.prototype=t;var s=new e;return e.prototype=void 0,s}}()},"./node_modules/lodash-es/_baseFlatten.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_arrayPush.js"),i=s("./node_modules/lodash-es/_isFlattenable.js");let o=function e(t,s,o,a,l){var d=-1,c=t.length;for(o||(o=i.default),l||(l=[]);++d<c;){var u=t[d];s>0&&o(u)?s>1?e(u,s-1,o,a,l):(0,r.default)(l,u):a||(l[l.length]=u)}return l}},"./node_modules/lodash-es/_baseFor.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s("./node_modules/lodash-es/_createBaseFor.js").default)()},"./node_modules/lodash-es/_baseGet.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_castPath.js"),i=s("./node_modules/lodash-es/_toKey.js");let o=function(e,t){t=(0,r.default)(t,e);for(var s=0,o=t.length;null!=e&&s<o;)e=e[(0,i.default)(t[s++])];return s&&s==o?e:void 0}},"./node_modules/lodash-es/_baseGetAllKeys.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_arrayPush.js"),i=s("./node_modules/lodash-es/isArray.js");let o=function(e,t,s){var o=t(e);return(0,i.default)(e)?o:(0,r.default)(o,s(e))}},"./node_modules/lodash-es/_baseGetTag.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_Symbol.js"),i=s("./node_modules/lodash-es/_getRawTag.js"),o=s("./node_modules/lodash-es/_objectToString.js"),a=r.default?r.default.toStringTag:void 0;let l=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?(0,i.default)(e):(0,o.default)(e)}},"./node_modules/lodash-es/_baseHas.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=Object.prototype.hasOwnProperty;let i=function(e,t){return null!=e&&r.call(e,t)}},"./node_modules/lodash-es/_baseHasIn.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t){return null!=e&&t in Object(e)}},"./node_modules/lodash-es/_baseIsArguments.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseGetTag.js"),i=s("./node_modules/lodash-es/isObjectLike.js");let o=function(e){return(0,i.default)(e)&&"[object Arguments]"==(0,r.default)(e)}},"./node_modules/lodash-es/_baseIsEqual.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseIsEqualDeep.js"),i=s("./node_modules/lodash-es/isObjectLike.js");let o=function e(t,s,o,a,l){return t===s||(null!=t&&null!=s&&((0,i.default)(t)||(0,i.default)(s))?(0,r.default)(t,s,o,a,e,l):t!=t&&s!=s)}},"./node_modules/lodash-es/_baseIsEqualDeep.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>g});var r=s("./node_modules/lodash-es/_Stack.js"),i=s("./node_modules/lodash-es/_equalArrays.js"),o=s("./node_modules/lodash-es/_equalByTag.js"),a=s("./node_modules/lodash-es/_equalObjects.js"),l=s("./node_modules/lodash-es/_getTag.js"),d=s("./node_modules/lodash-es/isArray.js"),c=s("./node_modules/lodash-es/isBuffer.js"),u=s("./node_modules/lodash-es/isTypedArray.js"),h="[object Arguments]",m="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;let g=function(e,t,s,g,_,v){var y=(0,d.default)(e),b=(0,d.default)(t),j=y?m:(0,l.default)(e),w=b?m:(0,l.default)(t);j=j==h?f:j,w=w==h?f:w;var S=j==f,x=w==f,E=j==w;if(E&&(0,c.default)(e)){if(!(0,c.default)(t))return!1;y=!0,S=!1}if(E&&!S)return v||(v=new r.default),y||(0,u.default)(e)?(0,i.default)(e,t,s,g,_,v):(0,o.default)(e,t,j,s,g,_,v);if(!(1&s)){var A=S&&p.call(e,"__wrapped__"),C=x&&p.call(t,"__wrapped__");if(A||C){var k=A?e.value():e,$=C?t.value():t;return v||(v=new r.default),_(k,$,s,g,v)}}return!!E&&(v||(v=new r.default),(0,a.default)(e,t,s,g,_,v))}},"./node_modules/lodash-es/_baseIsMap.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getTag.js"),i=s("./node_modules/lodash-es/isObjectLike.js");let o=function(e){return(0,i.default)(e)&&"[object Map]"==(0,r.default)(e)}},"./node_modules/lodash-es/_baseIsNative.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/lodash-es/isFunction.js"),i=s("./node_modules/lodash-es/_isMasked.js"),o=s("./node_modules/lodash-es/isObject.js"),a=s("./node_modules/lodash-es/_toSource.js"),l=/^\[object .+?Constructor\]$/,d=Object.prototype,c=Function.prototype.toString,u=d.hasOwnProperty,h=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let m=function(e){return!(!(0,o.default)(e)||(0,i.default)(e))&&((0,r.default)(e)?h:l).test((0,a.default)(e))}},"./node_modules/lodash-es/_baseIsSet.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getTag.js"),i=s("./node_modules/lodash-es/isObjectLike.js");let o=function(e){return(0,i.default)(e)&&"[object Set]"==(0,r.default)(e)}},"./node_modules/lodash-es/_baseIsTypedArray.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_baseGetTag.js"),i=s("./node_modules/lodash-es/isLength.js"),o=s("./node_modules/lodash-es/isObjectLike.js"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;let l=function(e){return(0,o.default)(e)&&(0,i.default)(e.length)&&!!a[(0,r.default)(e)]}},"./node_modules/lodash-es/_baseKeys.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_isPrototype.js"),i=s("./node_modules/lodash-es/_nativeKeys.js"),o=Object.prototype.hasOwnProperty;let a=function(e){if(!(0,r.default)(e))return(0,i.default)(e);var t=[];for(var s in Object(e))o.call(e,s)&&"constructor"!=s&&t.push(s);return t}},"./node_modules/lodash-es/_baseKeysIn.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/isObject.js"),i=s("./node_modules/lodash-es/_isPrototype.js"),o=s("./node_modules/lodash-es/_nativeKeysIn.js"),a=Object.prototype.hasOwnProperty;let l=function(e){if(!(0,r.default)(e))return(0,o.default)(e);var t=(0,i.default)(e),s=[];for(var l in e)"constructor"==l&&(t||!a.call(e,l))||s.push(l);return s}},"./node_modules/lodash-es/_baseMerge.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lodash-es/_Stack.js"),i=s("./node_modules/lodash-es/_assignMergeValue.js"),o=s("./node_modules/lodash-es/_baseFor.js"),a=s("./node_modules/lodash-es/_baseMergeDeep.js"),l=s("./node_modules/lodash-es/isObject.js"),d=s("./node_modules/lodash-es/keysIn.js"),c=s("./node_modules/lodash-es/_safeGet.js");let u=function e(t,s,u,h,m){t!==s&&(0,o.default)(s,function(o,d){if(m||(m=new r.default),(0,l.default)(o))(0,a.default)(t,s,d,u,e,h,m);else{var f=h?h((0,c.default)(t,d),o,d+"",t,s,m):void 0;void 0===f&&(f=o),(0,i.default)(t,d,f)}},d.default)}},"./node_modules/lodash-es/_baseMergeDeep.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>y});var r=s("./node_modules/lodash-es/_assignMergeValue.js"),i=s("./node_modules/lodash-es/_cloneBuffer.js"),o=s("./node_modules/lodash-es/_cloneTypedArray.js"),a=s("./node_modules/lodash-es/_copyArray.js"),l=s("./node_modules/lodash-es/_initCloneObject.js"),d=s("./node_modules/lodash-es/isArguments.js"),c=s("./node_modules/lodash-es/isArray.js"),u=s("./node_modules/lodash-es/isArrayLikeObject.js"),h=s("./node_modules/lodash-es/isBuffer.js"),m=s("./node_modules/lodash-es/isFunction.js"),f=s("./node_modules/lodash-es/isObject.js"),p=s("./node_modules/lodash-es/isPlainObject.js"),g=s("./node_modules/lodash-es/isTypedArray.js"),_=s("./node_modules/lodash-es/_safeGet.js"),v=s("./node_modules/lodash-es/toPlainObject.js");let y=function(e,t,s,y,b,j,w){var S=(0,_.default)(e,s),x=(0,_.default)(t,s),E=w.get(x);if(E)return void(0,r.default)(e,s,E);var A=j?j(S,x,s+"",e,t,w):void 0,C=void 0===A;if(C){var k=(0,c.default)(x),$=!k&&(0,h.default)(x),T=!k&&!$&&(0,g.default)(x);A=x,k||$||T?(0,c.default)(S)?A=S:(0,u.default)(S)?A=(0,a.default)(S):$?(C=!1,A=(0,i.default)(x,!0)):T?(C=!1,A=(0,o.default)(x,!0)):A=[]:(0,p.default)(x)||(0,d.default)(x)?(A=S,(0,d.default)(S)?A=(0,v.default)(S):(!(0,f.default)(S)||(0,m.default)(S))&&(A=(0,l.default)(x))):C=!1}C&&(w.set(x,A),b(A,x,y,j,w),w.delete(x)),(0,r.default)(e,s,A)}},"./node_modules/lodash-es/_basePick.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_basePickBy.js"),i=s("./node_modules/lodash-es/hasIn.js");let o=function(e,t){return(0,r.default)(e,t,function(t,s){return(0,i.default)(e,s)})}},"./node_modules/lodash-es/_basePickBy.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_baseGet.js"),i=s("./node_modules/lodash-es/_baseSet.js"),o=s("./node_modules/lodash-es/_castPath.js");let a=function(e,t,s){for(var a=-1,l=t.length,d={};++a<l;){var c=t[a],u=(0,r.default)(e,c);s(u,c)&&(0,i.default)(d,(0,o.default)(c,e),u)}return d}},"./node_modules/lodash-es/_baseRest.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/identity.js"),i=s("./node_modules/lodash-es/_overRest.js"),o=s("./node_modules/lodash-es/_setToString.js");let a=function(e,t){return(0,o.default)((0,i.default)(e,t,r.default),e+"")}},"./node_modules/lodash-es/_baseSet.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lodash-es/_assignValue.js"),i=s("./node_modules/lodash-es/_castPath.js"),o=s("./node_modules/lodash-es/_isIndex.js"),a=s("./node_modules/lodash-es/isObject.js"),l=s("./node_modules/lodash-es/_toKey.js");let d=function(e,t,s,d){if(!(0,a.default)(e))return e;t=(0,i.default)(t,e);for(var c=-1,u=t.length,h=u-1,m=e;null!=m&&++c<u;){var f=(0,l.default)(t[c]),p=s;if("__proto__"===f||"constructor"===f||"prototype"===f)break;if(c!=h){var g=m[f];void 0===(p=d?d(g,f,m):void 0)&&(p=(0,a.default)(g)?g:(0,o.default)(t[c+1])?[]:{})}(0,r.default)(m,f,p),m=m[f]}return e}},"./node_modules/lodash-es/_baseSetToString.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/constant.js"),i=s("./node_modules/lodash-es/_defineProperty.js"),o=s("./node_modules/lodash-es/identity.js");let a=i.default?function(e,t){return(0,i.default)(e,"toString",{configurable:!0,enumerable:!1,value:(0,r.default)(t),writable:!0})}:o.default},"./node_modules/lodash-es/_baseTimes.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t){for(var s=-1,r=Array(e);++s<e;)r[s]=t(s);return r}},"./node_modules/lodash-es/_baseToString.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lodash-es/_Symbol.js"),i=s("./node_modules/lodash-es/_arrayMap.js"),o=s("./node_modules/lodash-es/isArray.js"),a=s("./node_modules/lodash-es/isSymbol.js"),l=1/0,d=r.default?r.default.prototype:void 0,c=d?d.toString:void 0;let u=function e(t){if("string"==typeof t)return t;if((0,o.default)(t))return(0,i.default)(t,e)+"";if((0,a.default)(t))return c?c.call(t):"";var s=t+"";return"0"==s&&1/t==-l?"-0":s}},"./node_modules/lodash-es/_baseTrim.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_trimmedEndIndex.js"),i=/^\s+/;let o=function(e){return e?e.slice(0,(0,r.default)(e)+1).replace(i,""):e}},"./node_modules/lodash-es/_baseUnary.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){return function(t){return e(t)}}},"./node_modules/lodash-es/_cacheHas.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t){return e.has(t)}},"./node_modules/lodash-es/_castPath.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/isArray.js"),i=s("./node_modules/lodash-es/_isKey.js"),o=s("./node_modules/lodash-es/_stringToPath.js"),a=s("./node_modules/lodash-es/toString.js");let l=function(e,t){return(0,r.default)(e)?e:(0,i.default)(e,t)?[e]:(0,o.default)((0,a.default)(e))}},"./node_modules/lodash-es/_cloneArrayBuffer.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_Uint8Array.js");let i=function(e){var t=new e.constructor(e.byteLength);return new r.default(t).set(new r.default(e)),t}},"./node_modules/lodash-es/_cloneBuffer.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lodash-es/_root.js"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof module&&module&&!module.nodeType&&module,a=o&&o.exports===i?r.default.Buffer:void 0,l=a?a.allocUnsafe:void 0;let d=function(e,t){if(t)return e.slice();var s=e.length,r=l?l(s):new e.constructor(s);return e.copy(r),r}},"./node_modules/lodash-es/_cloneDataView.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_cloneArrayBuffer.js");let i=function(e,t){var s=t?(0,r.default)(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}},"./node_modules/lodash-es/_cloneRegExp.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=/\w*$/;let i=function(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}},"./node_modules/lodash-es/_cloneSymbol.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_Symbol.js"),i=r.default?r.default.prototype:void 0,o=i?i.valueOf:void 0;let a=function(e){return o?Object(o.call(e)):{}}},"./node_modules/lodash-es/_cloneTypedArray.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_cloneArrayBuffer.js");let i=function(e,t){var s=t?(0,r.default)(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}},"./node_modules/lodash-es/_copyArray.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t){var s=-1,r=e.length;for(t||(t=Array(r));++s<r;)t[s]=e[s];return t}},"./node_modules/lodash-es/_copyObject.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_assignValue.js"),i=s("./node_modules/lodash-es/_baseAssignValue.js");let o=function(e,t,s,o){var a=!s;s||(s={});for(var l=-1,d=t.length;++l<d;){var c=t[l],u=o?o(s[c],e[c],c,s,e):void 0;void 0===u&&(u=e[c]),a?(0,i.default)(s,c,u):(0,r.default)(s,c,u)}return s}},"./node_modules/lodash-es/_copySymbols.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_copyObject.js"),i=s("./node_modules/lodash-es/_getSymbols.js");let o=function(e,t){return(0,r.default)(e,(0,i.default)(e),t)}},"./node_modules/lodash-es/_copySymbolsIn.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_copyObject.js"),i=s("./node_modules/lodash-es/_getSymbolsIn.js");let o=function(e,t){return(0,r.default)(e,(0,i.default)(e),t)}},"./node_modules/lodash-es/_coreJsData.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=s("./node_modules/lodash-es/_root.js").default["__core-js_shared__"]},"./node_modules/lodash-es/_createAssigner.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseRest.js"),i=s("./node_modules/lodash-es/_isIterateeCall.js");let o=function(e){return(0,r.default)(function(t,s){var r=-1,o=s.length,a=o>1?s[o-1]:void 0,l=o>2?s[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,l&&(0,i.default)(s[0],s[1],l)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var d=s[r];d&&e(t,d,r,a)}return t})}},"./node_modules/lodash-es/_createBaseFor.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){return function(t,s,r){for(var i=-1,o=Object(t),a=r(t),l=a.length;l--;){var d=a[e?l:++i];if(!1===s(o[d],d,o))break}return t}}},"./node_modules/lodash-es/_defineProperty.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_getNative.js");let i=function(){try{var e=(0,r.default)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},"./node_modules/lodash-es/_equalArrays.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_SetCache.js"),i=s("./node_modules/lodash-es/_arraySome.js"),o=s("./node_modules/lodash-es/_cacheHas.js");let a=function(e,t,s,a,l,d){var c=1&s,u=e.length,h=t.length;if(u!=h&&!(c&&h>u))return!1;var m=d.get(e),f=d.get(t);if(m&&f)return m==t&&f==e;var p=-1,g=!0,_=2&s?new r.default:void 0;for(d.set(e,t),d.set(t,e);++p<u;){var v=e[p],y=t[p];if(a)var b=c?a(y,v,p,t,e,d):a(v,y,p,e,t,d);if(void 0!==b){if(b)continue;g=!1;break}if(_){if(!(0,i.default)(t,function(e,t){if(!(0,o.default)(_,t)&&(v===e||l(v,e,s,a,d)))return _.push(t)})){g=!1;break}}else if(!(v===y||l(v,y,s,a,d))){g=!1;break}}return d.delete(e),d.delete(t),g}},"./node_modules/lodash-es/_equalByTag.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/lodash-es/_Symbol.js"),i=s("./node_modules/lodash-es/_Uint8Array.js"),o=s("./node_modules/lodash-es/eq.js"),a=s("./node_modules/lodash-es/_equalArrays.js"),l=s("./node_modules/lodash-es/_mapToArray.js"),d=s("./node_modules/lodash-es/_setToArray.js"),c=r.default?r.default.prototype:void 0,u=c?c.valueOf:void 0;let h=function(e,t,s,r,c,h,m){switch(s){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!h(new i.default(e),new i.default(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,o.default)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=l.default;case"[object Set]":var p=1&r;if(f||(f=d.default),e.size!=t.size&&!p)break;var g=m.get(e);if(g)return g==t;r|=2,m.set(e,t);var _=(0,a.default)(f(e),f(t),r,c,h,m);return m.delete(e),_;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},"./node_modules/lodash-es/_equalObjects.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getAllKeys.js"),i=Object.prototype.hasOwnProperty;let o=function(e,t,s,o,a,l){var d=1&s,c=(0,r.default)(e),u=c.length;if(u!=(0,r.default)(t).length&&!d)return!1;for(var h=u;h--;){var m=c[h];if(!(d?m in t:i.call(t,m)))return!1}var f=l.get(e),p=l.get(t);if(f&&p)return f==t&&p==e;var g=!0;l.set(e,t),l.set(t,e);for(var _=d;++h<u;){var v=e[m=c[h]],y=t[m];if(o)var b=d?o(y,v,m,t,e,l):o(v,y,m,e,t,l);if(!(void 0===b?v===y||a(v,y,s,o,l):b)){g=!1;break}_||(_="constructor"==m)}if(g&&!_){var j=e.constructor,w=t.constructor;j!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof j&&j instanceof j&&"function"==typeof w&&w instanceof w)&&(g=!1)}return l.delete(e),l.delete(t),g}},"./node_modules/lodash-es/_flatRest.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/flatten.js"),i=s("./node_modules/lodash-es/_overRest.js"),o=s("./node_modules/lodash-es/_setToString.js");let a=function(e){return(0,o.default)((0,i.default)(e,void 0,r.default),e+"")}},"./node_modules/lodash-es/_freeGlobal.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r="object"==typeof global&&global&&global.Object===Object&&global},"./node_modules/lodash-es/_getAllKeys.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_baseGetAllKeys.js"),i=s("./node_modules/lodash-es/_getSymbols.js"),o=s("./node_modules/lodash-es/keys.js");let a=function(e){return(0,r.default)(e,o.default,i.default)}},"./node_modules/lodash-es/_getAllKeysIn.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_baseGetAllKeys.js"),i=s("./node_modules/lodash-es/_getSymbolsIn.js"),o=s("./node_modules/lodash-es/keysIn.js");let a=function(e){return(0,r.default)(e,o.default,i.default)}},"./node_modules/lodash-es/_getMapData.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_isKeyable.js");let i=function(e,t){var s=e.__data__;return(0,r.default)(t)?s["string"==typeof t?"string":"hash"]:s.map}},"./node_modules/lodash-es/_getNative.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseIsNative.js"),i=s("./node_modules/lodash-es/_getValue.js");let o=function(e,t){var s=(0,i.default)(e,t);return(0,r.default)(s)?s:void 0}},"./node_modules/lodash-es/_getPrototype.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s("./node_modules/lodash-es/_overArg.js").default)(Object.getPrototypeOf,Object)},"./node_modules/lodash-es/_getRawTag.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lodash-es/_Symbol.js"),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,l=r.default?r.default.toStringTag:void 0;let d=function(e){var t=o.call(e,l),s=e[l];try{e[l]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[l]=s:delete e[l]),i}},"./node_modules/lodash-es/_getSymbols.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_arrayFilter.js"),i=s("./node_modules/lodash-es/stubArray.js"),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols;let l=a?function(e){return null==e?[]:(e=Object(e),(0,r.default)(a(e),function(t){return o.call(e,t)}))}:i.default},"./node_modules/lodash-es/_getSymbolsIn.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_arrayPush.js"),i=s("./node_modules/lodash-es/_getPrototype.js"),o=s("./node_modules/lodash-es/_getSymbols.js"),a=s("./node_modules/lodash-es/stubArray.js");let l=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)(0,r.default)(t,(0,o.default)(e)),e=(0,i.default)(e);return t}:a.default},"./node_modules/lodash-es/_getTag.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>w});var r=s("./node_modules/lodash-es/_DataView.js"),i=s("./node_modules/lodash-es/_Map.js"),o=s("./node_modules/lodash-es/_Promise.js"),a=s("./node_modules/lodash-es/_Set.js"),l=s("./node_modules/lodash-es/_WeakMap.js"),d=s("./node_modules/lodash-es/_baseGetTag.js"),c=s("./node_modules/lodash-es/_toSource.js"),u="[object Map]",h="[object Promise]",m="[object Set]",f="[object WeakMap]",p="[object DataView]",g=(0,c.default)(r.default),_=(0,c.default)(i.default),v=(0,c.default)(o.default),y=(0,c.default)(a.default),b=(0,c.default)(l.default),j=d.default;(r.default&&j(new r.default(new ArrayBuffer(1)))!=p||i.default&&j(new i.default)!=u||o.default&&j(o.default.resolve())!=h||a.default&&j(new a.default)!=m||l.default&&j(new l.default)!=f)&&(j=function(e){var t=(0,d.default)(e),s="[object Object]"==t?e.constructor:void 0,r=s?(0,c.default)(s):"";if(r)switch(r){case g:return p;case _:return u;case v:return h;case y:return m;case b:return f}return t});let w=j},"./node_modules/lodash-es/_getValue.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t){return null==e?void 0:e[t]}},"./node_modules/lodash-es/_hasPath.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lodash-es/_castPath.js"),i=s("./node_modules/lodash-es/isArguments.js"),o=s("./node_modules/lodash-es/isArray.js"),a=s("./node_modules/lodash-es/_isIndex.js"),l=s("./node_modules/lodash-es/isLength.js"),d=s("./node_modules/lodash-es/_toKey.js");let c=function(e,t,s){t=(0,r.default)(t,e);for(var c=-1,u=t.length,h=!1;++c<u;){var m=(0,d.default)(t[c]);if(!(h=null!=e&&s(e,m)))break;e=e[m]}return h||++c!=u?h:!!(u=null==e?0:e.length)&&(0,l.default)(u)&&(0,a.default)(m,u)&&((0,o.default)(e)||(0,i.default)(e))}},"./node_modules/lodash-es/_hashClear.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_nativeCreate.js");let i=function(){this.__data__=r.default?(0,r.default)(null):{},this.size=0}},"./node_modules/lodash-es/_hashDelete.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t}},"./node_modules/lodash-es/_hashGet.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_nativeCreate.js"),i=Object.prototype.hasOwnProperty;let o=function(e){var t=this.__data__;if(r.default){var s=t[e];return"__lodash_hash_undefined__"===s?void 0:s}return i.call(t,e)?t[e]:void 0}},"./node_modules/lodash-es/_hashHas.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_nativeCreate.js"),i=Object.prototype.hasOwnProperty;let o=function(e){var t=this.__data__;return r.default?void 0!==t[e]:i.call(t,e)}},"./node_modules/lodash-es/_hashSet.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_nativeCreate.js");let i=function(e,t){var s=this.__data__;return this.size+=+!this.has(e),s[e]=r.default&&void 0===t?"__lodash_hash_undefined__":t,this}},"./node_modules/lodash-es/_initCloneArray.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=Object.prototype.hasOwnProperty;let i=function(e){var t=e.length,s=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(s.index=e.index,s.input=e.input),s}},"./node_modules/lodash-es/_initCloneByTag.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lodash-es/_cloneArrayBuffer.js"),i=s("./node_modules/lodash-es/_cloneDataView.js"),o=s("./node_modules/lodash-es/_cloneRegExp.js"),a=s("./node_modules/lodash-es/_cloneSymbol.js"),l=s("./node_modules/lodash-es/_cloneTypedArray.js");let d=function(e,t,s){var d=e.constructor;switch(t){case"[object ArrayBuffer]":return(0,r.default)(e);case"[object Boolean]":case"[object Date]":return new d(+e);case"[object DataView]":return(0,i.default)(e,s);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return(0,l.default)(e,s);case"[object Map]":case"[object Set]":return new d;case"[object Number]":case"[object String]":return new d(e);case"[object RegExp]":return(0,o.default)(e);case"[object Symbol]":return(0,a.default)(e)}}},"./node_modules/lodash-es/_initCloneObject.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_baseCreate.js"),i=s("./node_modules/lodash-es/_getPrototype.js"),o=s("./node_modules/lodash-es/_isPrototype.js");let a=function(e){return"function"!=typeof e.constructor||(0,o.default)(e)?{}:(0,r.default)((0,i.default)(e))}},"./node_modules/lodash-es/_isFlattenable.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_Symbol.js"),i=s("./node_modules/lodash-es/isArguments.js"),o=s("./node_modules/lodash-es/isArray.js"),a=r.default?r.default.isConcatSpreadable:void 0;let l=function(e){return(0,o.default)(e)||(0,i.default)(e)||!!(a&&e&&e[a])}},"./node_modules/lodash-es/_isIndex.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=/^(?:0|[1-9]\d*)$/;let i=function(e,t){var s=typeof e;return!!(t=null==t?0x1fffffffffffff:t)&&("number"==s||"symbol"!=s&&r.test(e))&&e>-1&&e%1==0&&e<t}},"./node_modules/lodash-es/_isIterateeCall.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/eq.js"),i=s("./node_modules/lodash-es/isArrayLike.js"),o=s("./node_modules/lodash-es/_isIndex.js"),a=s("./node_modules/lodash-es/isObject.js");let l=function(e,t,s){if(!(0,a.default)(s))return!1;var l=typeof t;return("number"==l?!!((0,i.default)(s)&&(0,o.default)(t,s.length)):"string"==l&&t in s)&&(0,r.default)(s[t],e)}},"./node_modules/lodash-es/_isKey.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/isArray.js"),i=s("./node_modules/lodash-es/isSymbol.js"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;let l=function(e,t){if((0,r.default)(e))return!1;var s=typeof e;return!!("number"==s||"symbol"==s||"boolean"==s||null==e||(0,i.default)(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},"./node_modules/lodash-es/_isKeyable.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},"./node_modules/lodash-es/_isMasked.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r,i=s("./node_modules/lodash-es/_coreJsData.js"),o=(r=/[^.]+$/.exec(i.default&&i.default.keys&&i.default.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";let a=function(e){return!!o&&o in e}},"./node_modules/lodash-es/_isPrototype.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=Object.prototype;let i=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},"./node_modules/lodash-es/_listCacheClear.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(){this.__data__=[],this.size=0}},"./node_modules/lodash-es/_listCacheDelete.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_assocIndexOf.js"),i=Array.prototype.splice;let o=function(e){var t=this.__data__,s=(0,r.default)(t,e);return!(s<0)&&(s==t.length-1?t.pop():i.call(t,s,1),--this.size,!0)}},"./node_modules/lodash-es/_listCacheGet.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_assocIndexOf.js");let i=function(e){var t=this.__data__,s=(0,r.default)(t,e);return s<0?void 0:t[s][1]}},"./node_modules/lodash-es/_listCacheHas.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_assocIndexOf.js");let i=function(e){return(0,r.default)(this.__data__,e)>-1}},"./node_modules/lodash-es/_listCacheSet.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_assocIndexOf.js");let i=function(e,t){var s=this.__data__,i=(0,r.default)(s,e);return i<0?(++this.size,s.push([e,t])):s[i][1]=t,this}},"./node_modules/lodash-es/_mapCacheClear.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_Hash.js"),i=s("./node_modules/lodash-es/_ListCache.js"),o=s("./node_modules/lodash-es/_Map.js");let a=function(){this.size=0,this.__data__={hash:new r.default,map:new(o.default||i.default),string:new r.default}}},"./node_modules/lodash-es/_mapCacheDelete.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_getMapData.js");let i=function(e){var t=(0,r.default)(this,e).delete(e);return this.size-=!!t,t}},"./node_modules/lodash-es/_mapCacheGet.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_getMapData.js");let i=function(e){return(0,r.default)(this,e).get(e)}},"./node_modules/lodash-es/_mapCacheHas.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_getMapData.js");let i=function(e){return(0,r.default)(this,e).has(e)}},"./node_modules/lodash-es/_mapCacheSet.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_getMapData.js");let i=function(e,t){var s=(0,r.default)(this,e),i=s.size;return s.set(e,t),this.size+=+(s.size!=i),this}},"./node_modules/lodash-es/_mapToArray.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){var t=-1,s=Array(e.size);return e.forEach(function(e,r){s[++t]=[r,e]}),s}},"./node_modules/lodash-es/_memoizeCapped.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/memoize.js");let i=function(e){var t=(0,r.default)(e,function(e){return 500===s.size&&s.clear(),e}),s=t.cache;return t}},"./node_modules/lodash-es/_nativeCreate.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s("./node_modules/lodash-es/_getNative.js").default)(Object,"create")},"./node_modules/lodash-es/_nativeKeys.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s("./node_modules/lodash-es/_overArg.js").default)(Object.keys,Object)},"./node_modules/lodash-es/_nativeKeysIn.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){var t=[];if(null!=e)for(var s in Object(e))t.push(s);return t}},"./node_modules/lodash-es/_nodeUtil.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_freeGlobal.js"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof module&&module&&!module.nodeType&&module,a=o&&o.exports===i&&r.default.process;let l=function(){try{var e=o&&o.require&&o.require("util").types;if(e)return e;return a&&a.binding&&a.binding("util")}catch(e){}}()},"./node_modules/lodash-es/_objectToString.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=Object.prototype.toString;let i=function(e){return r.call(e)}},"./node_modules/lodash-es/_overArg.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t){return function(s){return e(t(s))}}},"./node_modules/lodash-es/_overRest.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_apply.js"),i=Math.max;let o=function(e,t,s){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,l=i(o.length-t,0),d=Array(l);++a<l;)d[a]=o[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=o[a];return c[t]=s(d),(0,r.default)(e,this,c)}}},"./node_modules/lodash-es/_root.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_freeGlobal.js"),i="object"==typeof self&&self&&self.Object===Object&&self;let o=r.default||i||Function("return this")()},"./node_modules/lodash-es/_safeGet.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},"./node_modules/lodash-es/_setCacheAdd.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},"./node_modules/lodash-es/_setCacheHas.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){return this.__data__.has(e)}},"./node_modules/lodash-es/_setToArray.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){var t=-1,s=Array(e.size);return e.forEach(function(e){s[++t]=e}),s}},"./node_modules/lodash-es/_setToString.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_baseSetToString.js");let i=(0,s("./node_modules/lodash-es/_shortOut.js").default)(r.default)},"./node_modules/lodash-es/_shortOut.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=Date.now;let i=function(e){var t=0,s=0;return function(){var i=r(),o=16-(i-s);if(s=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},"./node_modules/lodash-es/_stackClear.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_ListCache.js");let i=function(){this.__data__=new r.default,this.size=0}},"./node_modules/lodash-es/_stackDelete.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}},"./node_modules/lodash-es/_stackGet.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){return this.__data__.get(e)}},"./node_modules/lodash-es/_stackHas.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){return this.__data__.has(e)}},"./node_modules/lodash-es/_stackSet.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_ListCache.js"),i=s("./node_modules/lodash-es/_Map.js"),o=s("./node_modules/lodash-es/_MapCache.js");let a=function(e,t){var s=this.__data__;if(s instanceof r.default){var a=s.__data__;if(!i.default||a.length<199)return a.push([e,t]),this.size=++s.size,this;s=this.__data__=new o.default(a)}return s.set(e,t),this.size=s.size,this}},"./node_modules/lodash-es/_stringToPath.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_memoizeCapped.js"),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g;let a=(0,r.default)(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,s,r,i){t.push(r?i.replace(o,"$1"):s||e)}),t})},"./node_modules/lodash-es/_toKey.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/isSymbol.js"),i=1/0;let o=function(e){if("string"==typeof e||(0,r.default)(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},"./node_modules/lodash-es/_toSource.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=Function.prototype.toString;let i=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},"./node_modules/lodash-es/_trimmedEndIndex.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=/\s/;let i=function(e){for(var t=e.length;t--&&r.test(e.charAt(t)););return t}},"./node_modules/lodash-es/assignIn.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_copyObject.js"),i=s("./node_modules/lodash-es/_createAssigner.js"),o=s("./node_modules/lodash-es/keysIn.js");let a=(0,i.default)(function(e,t){(0,r.default)(t,(0,o.default)(t),e)})},"./node_modules/lodash-es/cloneDeep.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_baseClone.js");let i=function(e){return(0,r.default)(e,5)}},"./node_modules/lodash-es/constant.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){return function(){return e}}},"./node_modules/lodash-es/create.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseAssign.js"),i=s("./node_modules/lodash-es/_baseCreate.js");let o=function(e,t){var s=(0,i.default)(e);return null==t?s:(0,r.default)(s,t)}},"./node_modules/lodash-es/debounce.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lodash-es/isObject.js"),i=s("./node_modules/lodash-es/now.js"),o=s("./node_modules/lodash-es/toNumber.js"),a=Math.max,l=Math.min;let d=function(e,t,s){var d,c,u,h,m,f,p=0,g=!1,_=!1,v=!0;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){var s=d,r=c;return d=c=void 0,p=t,h=e.apply(r,s)}function b(e){var s=e-f,r=e-p;return void 0===f||s>=t||s<0||_&&r>=u}function j(){var e,s,r,o=(0,i.default)();if(b(o))return w(o);m=setTimeout(j,(e=o-f,s=o-p,r=t-e,_?l(r,u-s):r))}function w(e){return(m=void 0,v&&d)?y(e):(d=c=void 0,h)}function S(){var e,s=(0,i.default)(),r=b(s);if(d=arguments,c=this,f=s,r){if(void 0===m)return p=e=f,m=setTimeout(j,t),g?y(e):h;if(_)return clearTimeout(m),m=setTimeout(j,t),y(f)}return void 0===m&&(m=setTimeout(j,t)),h}return t=(0,o.default)(t)||0,(0,r.default)(s)&&(g=!!s.leading,u=(_="maxWait"in s)?a((0,o.default)(s.maxWait)||0,t):u,v="trailing"in s?!!s.trailing:v),S.cancel=function(){void 0!==m&&clearTimeout(m),p=0,d=f=c=m=void 0},S.flush=function(){return void 0===m?h:w((0,i.default)())},S}},"./node_modules/lodash-es/eq.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e,t){return e===t||e!=e&&t!=t}},"./node_modules/lodash-es/flatten.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_baseFlatten.js");let i=function(e){return(null==e?0:e.length)?(0,r.default)(e,1):[]}},"./node_modules/lodash-es/has.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseHas.js"),i=s("./node_modules/lodash-es/_hasPath.js");let o=function(e,t){return null!=e&&(0,i.default)(e,t,r.default)}},"./node_modules/lodash-es/hasIn.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseHasIn.js"),i=s("./node_modules/lodash-es/_hasPath.js");let o=function(e,t){return null!=e&&(0,i.default)(e,t,r.default)}},"./node_modules/lodash-es/identity.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){return e}},"./node_modules/lodash-es/isArguments.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lodash-es/_baseIsArguments.js"),i=s("./node_modules/lodash-es/isObjectLike.js"),o=Object.prototype,a=o.hasOwnProperty,l=o.propertyIsEnumerable;let d=(0,r.default)(function(){return arguments}())?r.default:function(e){return(0,i.default)(e)&&a.call(e,"callee")&&!l.call(e,"callee")}},"./node_modules/lodash-es/isArray.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=Array.isArray},"./node_modules/lodash-es/isArrayLike.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/isFunction.js"),i=s("./node_modules/lodash-es/isLength.js");let o=function(e){return null!=e&&(0,i.default)(e.length)&&!(0,r.default)(e)}},"./node_modules/lodash-es/isArrayLikeObject.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/isArrayLike.js"),i=s("./node_modules/lodash-es/isObjectLike.js");let o=function(e){return(0,i.default)(e)&&(0,r.default)(e)}},"./node_modules/lodash-es/isBuffer.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lodash-es/_root.js"),i=s("./node_modules/lodash-es/stubFalse.js"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&"object"==typeof module&&module&&!module.nodeType&&module,l=a&&a.exports===o?r.default.Buffer:void 0;let d=(l?l.isBuffer:void 0)||i.default},"./node_modules/lodash-es/isEqual.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_baseIsEqual.js");let i=function(e,t){return(0,r.default)(e,t)}},"./node_modules/lodash-es/isFunction.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseGetTag.js"),i=s("./node_modules/lodash-es/isObject.js");let o=function(e){if(!(0,i.default)(e))return!1;var t=(0,r.default)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},"./node_modules/lodash-es/isLength.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}},"./node_modules/lodash-es/isMap.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_baseIsMap.js"),i=s("./node_modules/lodash-es/_baseUnary.js"),o=s("./node_modules/lodash-es/_nodeUtil.js"),a=o.default&&o.default.isMap;let l=a?(0,i.default)(a):r.default},"./node_modules/lodash-es/isObject.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},"./node_modules/lodash-es/isObjectLike.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(e){return null!=e&&"object"==typeof e}},"./node_modules/lodash-es/isPlainObject.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lodash-es/_baseGetTag.js"),i=s("./node_modules/lodash-es/_getPrototype.js"),o=s("./node_modules/lodash-es/isObjectLike.js"),a=Object.prototype,l=Function.prototype.toString,d=a.hasOwnProperty,c=l.call(Object);let u=function(e){if(!(0,o.default)(e)||"[object Object]"!=(0,r.default)(e))return!1;var t=(0,i.default)(e);if(null===t)return!0;var s=d.call(t,"constructor")&&t.constructor;return"function"==typeof s&&s instanceof s&&l.call(s)==c}},"./node_modules/lodash-es/isSet.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_baseIsSet.js"),i=s("./node_modules/lodash-es/_baseUnary.js"),o=s("./node_modules/lodash-es/_nodeUtil.js"),a=o.default&&o.default.isSet;let l=a?(0,i.default)(a):r.default},"./node_modules/lodash-es/isString.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_baseGetTag.js"),i=s("./node_modules/lodash-es/isArray.js"),o=s("./node_modules/lodash-es/isObjectLike.js");let a=function(e){return"string"==typeof e||!(0,i.default)(e)&&(0,o.default)(e)&&"[object String]"==(0,r.default)(e)}},"./node_modules/lodash-es/isSymbol.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseGetTag.js"),i=s("./node_modules/lodash-es/isObjectLike.js");let o=function(e){return"symbol"==typeof e||(0,i.default)(e)&&"[object Symbol]"==(0,r.default)(e)}},"./node_modules/lodash-es/isTypedArray.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_baseIsTypedArray.js"),i=s("./node_modules/lodash-es/_baseUnary.js"),o=s("./node_modules/lodash-es/_nodeUtil.js"),a=o.default&&o.default.isTypedArray;let l=a?(0,i.default)(a):r.default},"./node_modules/lodash-es/keys.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_arrayLikeKeys.js"),i=s("./node_modules/lodash-es/_baseKeys.js"),o=s("./node_modules/lodash-es/isArrayLike.js");let a=function(e){return(0,o.default)(e)?(0,r.default)(e):(0,i.default)(e)}},"./node_modules/lodash-es/keysIn.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_arrayLikeKeys.js"),i=s("./node_modules/lodash-es/_baseKeysIn.js"),o=s("./node_modules/lodash-es/isArrayLike.js");let a=function(e){return(0,o.default)(e)?(0,r.default)(e,!0):(0,i.default)(e)}},"./node_modules/lodash-es/memoize.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_MapCache.js");function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var s=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=s.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return s.cache=o.set(i,a)||o,a};return s.cache=new(i.Cache||r.default),s}i.Cache=r.default;let o=i},"./node_modules/lodash-es/merge.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_baseMerge.js");let i=(0,s("./node_modules/lodash-es/_createAssigner.js").default)(function(e,t,s){(0,r.default)(e,t,s)})},"./node_modules/lodash-es/mergeWith.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_baseMerge.js");let i=(0,s("./node_modules/lodash-es/_createAssigner.js").default)(function(e,t,s,i){(0,r.default)(e,t,s,i)})},"./node_modules/lodash-es/now.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_root.js");let i=function(){return r.default.Date.now()}},"./node_modules/lodash-es/pick.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_basePick.js");let i=(0,s("./node_modules/lodash-es/_flatRest.js").default)(function(e,t){return null==e?{}:(0,r.default)(e,t)})},"./node_modules/lodash-es/result.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_castPath.js"),i=s("./node_modules/lodash-es/isFunction.js"),o=s("./node_modules/lodash-es/_toKey.js");let a=function(e,t,s){t=(0,r.default)(t,e);var a=-1,l=t.length;for(l||(l=1,e=void 0);++a<l;){var d=null==e?void 0:e[(0,o.default)(t[a])];void 0===d&&(a=l,d=s),e=(0,i.default)(d)?d.call(e):d}return e}},"./node_modules/lodash-es/stubArray.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(){return[]}},"./node_modules/lodash-es/stubFalse.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>r});let r=function(){return!1}},"./node_modules/lodash-es/toNumber.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/lodash-es/_baseTrim.js"),i=s("./node_modules/lodash-es/isObject.js"),o=s("./node_modules/lodash-es/isSymbol.js"),a=0/0,l=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;let h=function(e){if("number"==typeof e)return e;if((0,o.default)(e))return a;if((0,i.default)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,i.default)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=(0,r.default)(e);var s=d.test(e);return s||c.test(e)?u(e.slice(2),s?2:8):l.test(e)?a:+e}},"./node_modules/lodash-es/toPlainObject.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_copyObject.js"),i=s("./node_modules/lodash-es/keysIn.js");let o=function(e){return(0,r.default)(e,(0,i.default)(e))}},"./node_modules/lodash-es/toString.js":function(e,t,s){"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_baseToString.js");let i=function(e){return null==e?"":(0,r.default)(e)}}},t={};function s(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=e,s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;s.t=function(r,i){if(1&i&&(r=this(r)),8&i||"object"==typeof r&&r&&(4&i&&r.__esModule||16&i&&"function"==typeof r.then))return r;var o=Object.create(null);s.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var l=2&i&&r;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(e=>{a[e]=()=>r[e]});return a.default=()=>r,s.d(o,a),o}})(),s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce((t,r)=>(s.f[r](e,t),t),[])),s.u=e=>""+e+".js",s.miniCssF=e=>""+e+".css",s.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="converse.js:";s.l=function(r,i,o,a){if(e[r])return void e[r].push(i);if(void 0!==o)for(var l,d,c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){l=h;break}}l||(d=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.setAttribute("data-webpack",t+o),l.src=r),e[r]=[i];var m=function(t,s){l.onerror=l.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),i&&i.forEach(function(e){return e(s)}),t)return t(s)},f=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload),d&&document.head.appendChild(l)}})(),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.nc=void 0,s.p="/dist/",s.rv=()=>"1.3.15",(()=>{var e={"converse.min":0};s.f.j=function(t,r){var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((s,r)=>i=e[t]=[s,r]);r.push(i[2]=o);var a=s.p+s.u(t),l=Error();s.l(a,function(r){if(s.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",l.name="ChunkLoadError",l.type=o,l.request=a,i[1](l)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,o,[a,l,d]=r,c=0;if(a.some(t=>0!==e[t])){for(i in l)s.o(l,i)&&(s.m[i]=l[i]);d&&d(s)}for(t&&t(r);c<a.length;c++)o=a[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkconverse_js=self.webpackChunkconverse_js||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),s.ruid="bundler=rspack@1.3.15";var r={};(()=>{"use strict";s.r(r),s.d(r,{default:()=>o});let e={},t={plugins:{add(t,s){if(void 0!==e[t])throw TypeError(`Error: plugin with name "${t}" has already been registered!`);e[t]=s}},initialize:(e={})=>t.load(e).initialize(e),load:(r={})=>(r.assets_path&&(s.p=r.assets_path),s("./src/index.js"),Object.keys(e).forEach(s=>t.plugins.add(s,e[s])),t)};window.converse=t;let i=new CustomEvent("converse-loaded",{detail:{converse:t}});window.dispatchEvent(i);let o=t})()})();
//# sourceMappingURL=converse.min.js.map