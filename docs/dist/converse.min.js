/*! For license information please see converse.min.js.LICENSE.txt */
(()=>{var e,t,s,r,n={"./node_modules/@babel/runtime/helpers/OverloadYield.js":e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/asyncToGenerator.js":e=>{function t(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}e.exports=function(e){return function(){var s=this,r=arguments;return new Promise((function(n,o){var i=e.apply(s,r);function a(e){t(i,n,o,a,l,"next",e)}function l(e){t(i,n,o,a,l,"throw",e)}a(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/helpers/toPropertyKey.js");e.exports=function(e,t,s){return(t=r(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regenerator.js":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/helpers/regeneratorDefine.js");function n(){var t,s,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function l(e,n,o,i){var a=n&&n.prototype instanceof c?n:c,l=Object.create(a.prototype);return r(l,"_invoke",function(e,r,n){var o,i,a,l=0,c=n||[],u=!1,h={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,s){return o=e,i=0,a=t,h.n=s,d}};function m(e,r){for(i=e,a=r,s=0;!u&&l&&!n&&s<c.length;s++){var n,o=c[s],m=h.p,f=o[2];e>3?(n=f===r)&&(a=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=m&&((n=e<2&&m<o[1])?(i=0,h.v=r,h.n=o[1]):m<f&&(n=e<3||o[0]>r||r>f)&&(o[4]=e,o[5]=r,h.n=f,i=0))}if(n||e>1)return d;throw u=!0,r}return function(n,c,f){if(l>1)throw TypeError("Generator is already running");for(u&&1===c&&m(c,f),i=c,a=f;(s=i<2?t:a)||!u;){o||(i?i<3?(i>1&&(h.n=-1),m(i,a)):h.n=a:h.v=a);try{if(l=2,o){if(i||(n="next"),s=o[n]){if(!(s=s.call(o,a)))throw TypeError("iterator result is not an object");if(!s.done)return s;a=s.value,i<2&&(i=0)}else 1===i&&(s=o.return)&&s.call(o),i<2&&(a=TypeError("The iterator does not provide a '"+n+"' method"),i=1);o=t}else if((s=(u=h.n<0)?a:e.call(r,h))!==d)break}catch(e){o=t,i=1,a=e}finally{l=1}}return{value:s,done:u}}}(e,o,i),!0),l}var d={};function c(){}function u(){}function h(){}s=Object.getPrototypeOf;var m=[][i]?s(s([][i]())):(r(s={},i,(function(){return this})),s),f=h.prototype=c.prototype=Object.create(m);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,r(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=h,r(f,"constructor",h),r(h,"constructor",u),u.displayName="GeneratorFunction",r(h,a,"GeneratorFunction"),r(f),r(f,a,"Generator"),r(f,i,(function(){return this})),r(f,"toString",(function(){return"[object Generator]"})),(e.exports=n=function(){return{w:l,m:p}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regeneratorAsync.js":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/helpers/regeneratorAsyncGen.js");e.exports=function(e,t,s,n,o){var i=r(e,t,s,n,o);return i.next().then((function(e){return e.done?e.value:i.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regeneratorAsyncGen.js":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/helpers/regenerator.js"),n=s("./node_modules/@babel/runtime/helpers/regeneratorAsyncIterator.js");e.exports=function(e,t,s,o,i){return new n(r().w(e,t,s,o),i||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regeneratorAsyncIterator.js":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/helpers/OverloadYield.js"),n=s("./node_modules/@babel/runtime/helpers/regeneratorDefine.js");e.exports=function e(t,s){function o(e,n,i,a){try{var l=t[e](n),d=l.value;return d instanceof r?s.resolve(d.v).then((function(e){o("next",e,i,a)}),(function(e){o("throw",e,i,a)})):s.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,a)}))}catch(e){a(e)}}var i;this.next||(n(e.prototype),n(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),n(this,"_invoke",(function(e,t,r){function n(){return new s((function(t,s){o(e,r,t,s)}))}return i=i?i.then(n,n):n()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regeneratorDefine.js":e=>{function t(s,r,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(s){i=0}e.exports=t=function(e,s,r,n){if(s)i?i(e,s,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[s]=r;else{var o=function(s,r){t(e,s,(function(e){return this._invoke(s,r,e)}))};o("next",0),o("throw",1),o("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(s,r,n,o)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regeneratorKeys.js":e=>{e.exports=function(e){var t=Object(e),s=[];for(var r in t)s.unshift(r);return function e(){for(;s.length;)if((r=s.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regeneratorRuntime.js":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/helpers/OverloadYield.js"),n=s("./node_modules/@babel/runtime/helpers/regenerator.js"),o=s("./node_modules/@babel/runtime/helpers/regeneratorAsync.js"),i=s("./node_modules/@babel/runtime/helpers/regeneratorAsyncGen.js"),a=s("./node_modules/@babel/runtime/helpers/regeneratorAsyncIterator.js"),l=s("./node_modules/@babel/runtime/helpers/regeneratorKeys.js"),d=s("./node_modules/@babel/runtime/helpers/regeneratorValues.js");function c(){"use strict";var t=n(),s=t.m(c),u=(Object.getPrototypeOf?Object.getPrototypeOf(s):s.__proto__).constructor;function h(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))}var m={throw:1,return:2,break:3,continue:3};function f(e){var t,s;return function(r){t||(t={stop:function(){return s(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return s(r.a,m[e],t)},delegateYield:function(e,n,o){return t.resultName=n,s(r.d,d(e),o)},finish:function(e){return s(r.f,e)}},s=function(e,s,n){r.p=t.prev,r.n=t.next;try{return e(s,n)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}return(e.exports=c=function(){return{wrap:function(e,s,r,n){return t.w(f(e),s,r,n&&n.reverse())},isGeneratorFunction:h,mark:t.m,awrap:function(e,t){return new r(e,t)},AsyncIterator:a,async:function(e,t,s,r,n){return(h(t)?i:o)(f(e),t,s,r,n)},keys:l,values:d}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/regeneratorValues.js":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/helpers/typeof.js").default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],s=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}}}throw new TypeError(r(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/helpers/typeof.js").default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/helpers/typeof.js").default,n=s("./node_modules/@babel/runtime/helpers/toPrimitive.js");e.exports=function(e){var t=n(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/typeof.js":e=>{function t(s){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/regenerator/index.js":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/helpers/regeneratorRuntime.js")();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},"./node_modules/@converse/localforage-getitems/dist/localforage-getitems.es6.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{extendPrototype:()=>m,extendPrototypeResult:()=>f,getItemsGeneric:()=>a,localforageGetItems:()=>h});var r=s("./node_modules/localforage/dist/localforage.js");function n(e){return n.result?n.result:e&&"function"==typeof e.getSerializer?(n.result=e.getSerializer(),n.result):Promise.reject(new Error("localforage.getSerializer() was not available! localforage v1.4+ is required!"))}function o(e,t){return t&&e.then((function(e){t(null,e)}),(function(e){t(e)})),e}function i(e,t){var s=this.getItem(e).then((function(t){return{key:e,value:t}}));return o(s,t),s}function a(e){var t=this;return new Promise((function(s,r){for(var n=[],o=0,a=e.length;o<a;o++)n.push(i.call(t,e[o]));Promise.all(n).then((function(e){for(var t={},r=0,n=e.length;r<n;r++){var o=e[r];t[o.key]=o.value}s(t)})).catch(r)}))}function l(){var e={};return this.iterate((function(t,s){e[s]=t})).then((function(){return e}))}var d="undefined"!=typeof IDBKeyRange?IDBKeyRange:"undefined"!=typeof webkitIDBKeyRange?webkitIDBKeyRange:"undefined"!=typeof mozIDBKeyRange?mozIDBKeyRange:void 0;function c(e){e=e.slice();var t=this;function s(e,t){return e<t?-1:e>t?1:0}return new Promise((function(r,n){t.ready().then((function(){var o,i=t._dbInfo,a=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),l=e.sort(s),c=d.bound(e[0],e[e.length-1],!1,!1);if("getAll"in a)(o=a.getAll(c)).onsuccess=function(){var e=o.result;void 0===e&&(e=null),r(e)};else{o=a.openCursor(c);var u={},h=0;o.onsuccess=function(){var e=o.result;if(e){for(var t=e.key;t>l[h];)if(++h===l.length)return void r(u);if(t===l[h]){var s=e.value;void 0===s&&(s=null),u[t]=s,e.continue()}else e.continue(l[h])}else r(u)}}o.onerror=function(){n(o.error)}})).catch(n)}))}function u(e){var t=this;return new Promise((function(s,r){t.ready().then((function(){return n(t)})).then((function(n){var o=t._dbInfo;o.db.transaction((function(t){for(var i=new Array(e.length),a=0,l=e.length;a<l;a++)i[a]="?";t.executeSql("SELECT * FROM "+o.storeName+" WHERE (key IN ("+i.join(",")+"))",e,(function(e,t){for(var r={},o=t.rows,i=0,a=o.length;i<a;i++){var l=o.item(i),d=l.value;d&&(d=n.deserialize(d)),r[l.key]=d}s(r)}),(function(e,t){r(t)}))}))})).catch(r)}))}function h(e,t){var s,r=this;if(arguments.length&&null!==e){var n=r.driver();s=n===r.INDEXEDDB?c.apply(r,arguments):n===r.WEBSQL?u.apply(r,arguments):a.apply(r,arguments)}else s=l.apply(r);return o(s,t),s}function m(e){var t=Object.getPrototypeOf(e);t&&(t.getItems=h,t.getItems.indexedDB=function(){return c.apply(this,arguments)},t.getItems.websql=function(){return u.apply(this,arguments)},t.getItems.generic=function(){return a.apply(this,arguments)})}var f=m(s.n(r)())},"./node_modules/@converse/openpromise/dist/openpromise.js":(e,t,s)=>{"use strict";function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function n(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}function o(){let e,t=()=>{},s=()=>{};if("function"==typeof Promise.withResolvers){const{promise:r,resolve:n,reject:o}=Promise.withResolvers();e=r,t=n,s=o}else e=new Promise(((e,r)=>{t=e,s=r}));return Object.assign(e,n(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),n.forEach((function(t){r(e,t,s[t])}))}return e}({},{isResolved:!1,isPending:!0,isRejected:!1}),{resolve:t,reject:s})),e.then((t=>(e.isResolved=!0,e.isPending=!1,e.isRejected=!1,t)),(t=>{throw e.isResolved=!1,e.isPending=!1,e.isRejected=!0,t})),e}s.r(t),s.d(t,{getOpenPromise:()=>o})},"./node_modules/@converse/skeletor/dist/skeletor.js":function(e,t,s){function r(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function n(e){return function(){var t=this,s=arguments;return new Promise((function(n,o){var i=e.apply(t,s);function a(e){r(i,n,o,a,l,"next",e)}function l(e){r(i,n,o,a,l,"throw",e)}a(void 0)}))}}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){o(e,t,s[t])}))}return e}function a(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}e=s.nmd(e),function(t){"use strict";var r,o="object"==typeof s.g&&s.g&&s.g.Object===Object&&s.g,l="object"==typeof self&&self&&self.Object===Object&&self,d=o||l||Function("return this")(),c=d.Symbol;function u(e,t){for(var s=-1,r=null==e?0:e.length,n=Array(r);++s<r;)n[s]=t(e[s],s,e);return n}var h=Array.isArray,m=Object.prototype,f=m.hasOwnProperty,p=m.toString,g=c?c.toStringTag:void 0;function v(e){var t=f.call(e,g),s=e[g];try{e[g]=void 0;var r=!0}catch(e){}var n=p.call(e);return r&&(t?e[g]=s:delete e[g]),n}var _=Object.prototype.toString;function y(e){return _.call(e)}var b="[object Null]",j="[object Undefined]",w=c?c.toStringTag:void 0;function S(e){return null==e?void 0===e?j:b:w&&w in Object(e)?v(e):y(e)}function x(e){return null!=e&&"object"==typeof e}var E="[object Symbol]";function A(e){return"symbol"==typeof e||x(e)&&S(e)==E}var O=c?c.prototype:void 0,C=O?O.toString:void 0;function T(e){if("string"==typeof e)return e;if(h(e))return u(e,T)+"";if(A(e))return C?C.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function $(e){return null==e?"":T(e)}var k=0;function M(e){var t=++k;return $(e)+t}const I=globalThis,P=I.trustedTypes,N=P?P.createPolicy("lit-html",{createHTML:e=>e}):void 0,D="$lit$",R=`lit$${Math.random().toFixed(9).slice(2)}$`,z="?"+R,L=`<${z}>`,U=document,B=()=>U.createComment(""),F=e=>null===e||"object"!=typeof e&&"function"!=typeof e,q=Array.isArray,H=e=>q(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]),G="[ \t\n\f\r]",W=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,V=/-->/g,K=/>/g,J=RegExp(`>|${G}(?:([^\\s"'>=/]+)(${G}*=${G}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),Y=/'/g,Q=/"/g,X=/^(?:script|style|textarea|title)$/i,Z=Symbol.for("lit-noChange"),ee=Symbol.for("lit-nothing"),te=new WeakMap,se=U.createTreeWalker(U,129);function re(e,t){if(!q(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==N?N.createHTML(t):t}const ne=(e,t)=>{const s=e.length-1,r=[];let n,o=2===t?"<svg>":3===t?"<math>":"",i=W;for(let t=0;t<s;t++){const s=e[t];let l,d,c=-1,u=0;for(;u<s.length&&(i.lastIndex=u,d=i.exec(s),null!==d);){var a;u=i.lastIndex,i===W?"!--"===d[1]?i=V:void 0!==d[1]?i=K:void 0!==d[2]?(X.test(d[2])&&(n=RegExp("</"+d[2],"g")),i=J):void 0!==d[3]&&(i=J):i===J?">"===d[0]?(i=null!==(a=n)&&void 0!==a?a:W,c=-1):void 0===d[1]?c=-2:(c=i.lastIndex-d[2].length,l=d[1],i=void 0===d[3]?J:'"'===d[3]?Q:Y):i===Q||i===Y?i=J:i===V||i===K?i=W:(i=J,n=void 0)}const h=i===J&&e[t+1].startsWith("/>")?" ":"";o+=i===W?s+L:c>=0?(r.push(l),s.slice(0,c)+D+s.slice(c)+R+h):s+R+(-2===c?t:h)}return[re(e,o+(e[s]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),r]};class oe{static createElement(e,t){const s=U.createElement("template");return s.innerHTML=e,s}constructor({strings:e,_$litType$:t},s){let r;this.parts=[];let n=0,o=0;const i=e.length-1,a=this.parts,[l,d]=ne(e,t);if(this.el=oe.createElement(l,s),se.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(r=se.nextNode())&&a.length<i;){if(1===r.nodeType){if(r.hasAttributes())for(const e of r.getAttributeNames())if(e.endsWith(D)){const t=d[o++],s=r.getAttribute(e).split(R),i=/([.?@])?(.*)/.exec(t);a.push({type:1,index:n,name:i[2],strings:s,ctor:"."===i[1]?ce:"?"===i[1]?ue:"@"===i[1]?he:de}),r.removeAttribute(e)}else e.startsWith(R)&&(a.push({type:6,index:n}),r.removeAttribute(e));if(X.test(r.tagName)){const e=r.textContent.split(R),t=e.length-1;if(t>0){r.textContent=P?P.emptyScript:"";for(let s=0;s<t;s++)r.append(e[s],B()),se.nextNode(),a.push({type:2,index:++n});r.append(e[t],B())}}}else if(8===r.nodeType)if(r.data===z)a.push({type:2,index:n});else{let e=-1;for(;-1!==(e=r.data.indexOf(R,e+1));)a.push({type:7,index:n}),e+=R.length-1}n++}}}function ie(e,t,s=e,r){var n,o,i,a,l;if(t===Z)return t;let d=void 0!==r?null===(o=s._$Co)||void 0===o?void 0:o[r]:s._$Cl;const c=F(t)?void 0:t._$litDirective$;var u;return(null===(i=d)||void 0===i?void 0:i.constructor)!==c&&(null!==(a=d)&&void 0!==a&&null!==(l=a._$AO)&&void 0!==l&&l.call(a,!1),void 0===c?d=void 0:(d=new c(e),d._$AT(e,s,r)),void 0!==r?(null!==(u=(n=s)._$Co)&&void 0!==u?u:n._$Co=[])[r]=d:s._$Cl=d),void 0!==d&&(t=ie(e,d._$AS(e,t.values),d,r)),t}class ae{get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:s},parts:r}=this._$AD,n=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:U).importNode(s,!0);se.currentNode=n;let o=se.nextNode(),i=0,a=0,l=r[0];for(;void 0!==l;){var d;if(i===l.index){let t;2===l.type?t=new le(o,o.nextSibling,this,e):1===l.type?t=new l.ctor(o,l.name,l.strings,this,e):6===l.type&&(t=new me(o,this,e)),this._$AV.push(t),l=r[++a]}i!==(null===(d=l)||void 0===d?void 0:d.index)&&(o=se.nextNode(),i++)}return se.currentNode=U,n}p(e){let t=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(e,s,t),t+=s.strings.length-2):s._$AI(e[t])),t++}constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}}class le{get _$AU(){var e,t;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cv}get parentNode(){var e;let t=this._$AA.parentNode;const s=this._$AM;return void 0!==s&&11===(null===(e=t)||void 0===e?void 0:e.nodeType)&&(t=s.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=ie(this,e,t),F(e)?e===ee||null==e||""===e?(this._$AH!==ee&&this._$AR(),this._$AH=ee):e!==this._$AH&&e!==Z&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):H(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==ee&&F(this._$AH)?this._$AA.nextSibling.data=e:this.T(U.createTextNode(e)),this._$AH=e}$(e){var t;const{values:s,_$litType$:r}=e,n="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=oe.createElement(re(r.h,r.h[0]),this.options)),r);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===n)this._$AH.p(s);else{const e=new ae(n,this),t=e.u(this.options);e.p(s),this.T(t),this._$AH=e}}_$AC(e){let t=te.get(e.strings);return void 0===t&&te.set(e.strings,t=new oe(e)),t}k(e){q(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let s,r=0;for(const n of e)r===t.length?t.push(s=new le(this.O(B()),this.O(B()),this,this.options)):s=t[r],s._$AI(n),r++;r<t.length&&(this._$AR(s&&s._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,t);e&&e!==this._$AB;){var s;const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cv=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}constructor(e,t,s,r){var n;this.type=2,this._$AH=ee,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=s,this.options=r,this._$Cv=null===(n=null==r?void 0:r.isConnected)||void 0===n||n}}class de{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,s,r){const n=this.strings;let o=!1;if(void 0===n)e=ie(this,e,t,0),o=!F(e)||e!==this._$AH&&e!==Z,o&&(this._$AH=e);else{const r=e;let a,l;for(e=n[0],a=0;a<n.length-1;a++){var i;l=ie(this,r[s+a],t,a),l===Z&&(l=this._$AH[a]),o||(o=!F(l)||l!==this._$AH[a]),l===ee?e=ee:e!==ee&&(e+=(null!==(i=l)&&void 0!==i?i:"")+n[a+1]),this._$AH[a]=l}}o&&!r&&this.j(e)}j(e){e===ee?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}constructor(e,t,s,r,n){this.type=1,this._$AH=ee,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=n,s.length>2||""!==s[0]||""!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=ee}}class ce extends de{j(e){this.element[this.name]=e===ee?void 0:e}constructor(){super(...arguments),this.type=3}}class ue extends de{j(e){this.element.toggleAttribute(this.name,!!e&&e!==ee)}constructor(){super(...arguments),this.type=4}}class he extends de{_$AI(e,t=this){var s;if((e=null!==(s=ie(this,e,t,0))&&void 0!==s?s:ee)===Z)return;const r=this._$AH,n=e===ee&&r!==ee||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,o=e!==ee&&(r===ee||n);n&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,s;"function"==typeof this._$AH?this._$AH.call(null!==(t=null===(s=this.options)||void 0===s?void 0:s.host)&&void 0!==t?t:this.element,e):this._$AH.handleEvent(e)}constructor(e,t,s,r,n){super(e,t,s,r,n),this.type=5}}class me{get _$AU(){return this._$AM._$AU}_$AI(e){ie(this,e)}constructor(e,t,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=s}}const fe=I.litHtmlPolyfillSupport;var pe;null!=fe&&fe(oe,le),(null!==(pe=(r=I).litHtmlVersions)&&void 0!==pe?pe:r.litHtmlVersions=[]).push("3.2.1");const ge=(e,t,s)=>{var r;const n=null!==(r=void 0)&&void 0!==r?r:t;let o=n._$litPart$;if(void 0===o){var i;const e=null!==(i=void 0)&&void 0!==i?i:null;n._$litPart$=o=new le(t.insertBefore(B(),e),e,void 0,{})}return o._$AI(e),o};var ve=Object.prototype;function _e(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ve)}function ye(e,t){return function(s){return e(t(s))}}var be=ye(Object.keys,Object),je=Object.prototype.hasOwnProperty;function we(e){if(!_e(e))return be(e);var t=[];for(var s in Object(e))je.call(e,s)&&"constructor"!=s&&t.push(s);return t}function Se(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var xe="[object AsyncFunction]",Ee="[object Function]",Ae="[object GeneratorFunction]",Oe="[object Proxy]";function Ce(e){if(!Se(e))return!1;var t=S(e);return t==Ee||t==Ae||t==xe||t==Oe}var Te,$e=d["__core-js_shared__"],ke=(Te=/[^.]+$/.exec($e&&$e.keys&&$e.keys.IE_PROTO||""))?"Symbol(src)_1."+Te:"";function Me(e){return!!ke&&ke in e}var Ie=Function.prototype.toString;function Pe(e){if(null!=e){try{return Ie.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Ne=/[\\^$.*+?()[\]{}|]/g,De=/^\[object .+?Constructor\]$/,Re=Function.prototype,ze=Object.prototype,Le=Re.toString,Ue=ze.hasOwnProperty,Be=RegExp("^"+Le.call(Ue).replace(Ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Fe(e){return!(!Se(e)||Me(e))&&(Ce(e)?Be:De).test(Pe(e))}function qe(e,t){return null==e?void 0:e[t]}function He(e,t){var s=qe(e,t);return Fe(s)?s:void 0}var Ge=He(d,"DataView"),We=He(d,"Map"),Ve=He(d,"Promise"),Ke=He(d,"Set"),Je=He(d,"WeakMap"),Ye="[object Map]",Qe="[object Object]",Xe="[object Promise]",Ze="[object Set]",et="[object WeakMap]",tt="[object DataView]",st=Pe(Ge),rt=Pe(We),nt=Pe(Ve),ot=Pe(Ke),it=Pe(Je),at=S;(Ge&&at(new Ge(new ArrayBuffer(1)))!=tt||We&&at(new We)!=Ye||Ve&&at(Ve.resolve())!=Xe||Ke&&at(new Ke)!=Ze||Je&&at(new Je)!=et)&&(at=function(e){var t=S(e),s=t==Qe?e.constructor:void 0,r=s?Pe(s):"";if(r)switch(r){case st:return tt;case rt:return Ye;case nt:return Xe;case ot:return Ze;case it:return et}return t});var lt="[object Arguments]";function dt(e){return x(e)&&S(e)==lt}var ct=Object.prototype,ut=ct.hasOwnProperty,ht=ct.propertyIsEnumerable,mt=dt(function(){return arguments}())?dt:function(e){return x(e)&&ut.call(e,"callee")&&!ht.call(e,"callee")},ft=9007199254740991;function pt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ft}function gt(e){return null!=e&&pt(e.length)&&!Ce(e)}function vt(){return!1}var _t="object"==typeof t&&t&&!t.nodeType&&t,yt=_t&&e&&!e.nodeType&&e,bt=yt&&yt.exports===_t?d.Buffer:void 0,jt=(bt?bt.isBuffer:void 0)||vt,wt="[object Arguments]",St="[object Array]",xt="[object Boolean]",Et="[object Date]",At="[object Error]",Ot="[object Function]",Ct="[object Map]",Tt="[object Number]",$t="[object Object]",kt="[object RegExp]",Mt="[object Set]",It="[object String]",Pt="[object WeakMap]",Nt="[object ArrayBuffer]",Dt="[object DataView]",Rt="[object Float64Array]",zt="[object Int8Array]",Lt="[object Int16Array]",Ut="[object Int32Array]",Bt="[object Uint8Array]",Ft="[object Uint8ClampedArray]",qt="[object Uint16Array]",Ht="[object Uint32Array]",Gt={};function Wt(e){return x(e)&&pt(e.length)&&!!Gt[S(e)]}function Vt(e){return function(t){return e(t)}}Gt["[object Float32Array]"]=Gt[Rt]=Gt[zt]=Gt[Lt]=Gt[Ut]=Gt[Bt]=Gt[Ft]=Gt[qt]=Gt[Ht]=!0,Gt[wt]=Gt[St]=Gt[Nt]=Gt[xt]=Gt[Dt]=Gt[Et]=Gt[At]=Gt[Ot]=Gt[Ct]=Gt[Tt]=Gt[$t]=Gt[kt]=Gt[Mt]=Gt[It]=Gt[Pt]=!1;var Kt="object"==typeof t&&t&&!t.nodeType&&t,Jt=Kt&&e&&!e.nodeType&&e,Yt=Jt&&Jt.exports===Kt&&o.process,Qt=function(){try{var e=Jt&&Jt.require&&Jt.require("util").types;return e||Yt&&Yt.binding&&Yt.binding("util")}catch(e){}}(),Xt=Qt&&Qt.isTypedArray,Zt=Xt?Vt(Xt):Wt,es="[object Map]",ts="[object Set]",ss=Object.prototype.hasOwnProperty;function rs(e){if(null==e)return!0;if(gt(e)&&(h(e)||"string"==typeof e||"function"==typeof e.splice||jt(e)||Zt(e)||mt(e)))return!e.length;var t=at(e);if(t==es||t==ts)return!e.size;if(_e(e))return!we(e).length;for(var s in e)if(ss.call(e,s))return!1;return!0}function ns(e,t){for(var s=-1,r=Array(e);++s<e;)r[s]=t(s);return r}var os=9007199254740991,is=/^(?:0|[1-9]\d*)$/;function as(e,t){var s=typeof e;return!!(t=null==t?os:t)&&("number"==s||"symbol"!=s&&is.test(e))&&e>-1&&e%1==0&&e<t}var ls=Object.prototype.hasOwnProperty;function ds(e,t){var s=h(e),r=!s&&mt(e),n=!s&&!r&&jt(e),o=!s&&!r&&!n&&Zt(e),i=s||r||n||o,a=i?ns(e.length,String):[],l=a.length;for(var d in e)!t&&!ls.call(e,d)||i&&("length"==d||n&&("offset"==d||"parent"==d)||o&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||as(d,l))||a.push(d);return a}function cs(e){return gt(e)?ds(e):we(e)}var us=/\s/;function hs(e){for(var t=e.length;t--&&us.test(e.charAt(t)););return t}var ms=/^\s+/;function fs(e){return e?e.slice(0,hs(e)+1).replace(ms,""):e}var ps=NaN,gs=/^[-+]0x[0-9a-f]+$/i,vs=/^0b[01]+$/i,_s=/^0o[0-7]+$/i,ys=parseInt;function bs(e){if("number"==typeof e)return e;if(A(e))return ps;if(Se(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Se(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=fs(e);var s=vs.test(e);return s||_s.test(e)?ys(e.slice(2),s?2:8):gs.test(e)?ps:+e}var js=1/0,ws=17976931348623157e292;function Ss(e){return e?(e=bs(e))===js||e===-1/0?(e<0?-1:1)*ws:e==e?e:0:0===e?e:0}function xs(e){var t=Ss(e),s=t%1;return t==t?s?t-s:t:0}var Es="Expected a function";function As(e,t){var s;if("function"!=typeof t)throw new TypeError(Es);return e=xs(e),function(){return--e>0&&(s=t.apply(this,arguments)),e<=1&&(t=void 0),s}}function Os(e){return As(2,e)}const Cs=/\s+/;function Ts(e,t,s,r,n){let o,i=0;if(s&&"object"==typeof s){void 0!==r&&"context"in n&&void 0===n.context&&(n.context=r);for(o=cs(s);i<o.length;i++)t=Ts(e,t,o[i],s[o[i]],n)}else if(s&&Cs.test(s))for(o=s.split(Cs);i<o.length;i++)t=e(t,o[i],r,n);else t=e(t,s,r,n);return t}function $s(e,t,s,r){if(s){const n=e[t]||(e[t]=[]),o=r.context,i=r.ctx,a=r.listening;a&&a.count++,n.push({callback:s,context:o,ctx:o||i,listening:a})}return e}function ks(e,t,s,r){try{e.on(t,s,r)}catch(e){return e}}function Ms(e,t,s,r){if(!e)return;const n=r.context,o=r.listeners;let i,a=0;if(t||n||s){for(i=t?[t]:cs(e);a<i.length;a++){const r=e[t=i[a]];if(!r)break;const o=[];for(let e=0;e<r.length;e++){const i=r[e];if(s&&s!==i.callback&&s!==i.callback._callback||n&&n!==i.context)o.push(i);else{const e=i.listening;e&&e.stop(t,s)}}o.length?e[t]=o:delete e[t]}return e}for(i=cs(o);a<i.length;a++)o[i[a]].cleanup()}function Is(e,t,s,r){if(s){const n=e[t]=Os((function(){r(t,n),s.apply(this,arguments)}));n._callback=s}return e}function Ps(e,t,s,r){if(e){const s=e[t];let n=e.all;s&&n&&(n=n.slice()),s&&Ns(s,r),n&&Ns(n,[t].concat(r))}return e}function Ns(e,t){let s,r=-1;const n=e.length,o=t[0],i=t[1],a=t[2];switch(t.length){case 0:for(;++r<n;)(s=e[r]).callback.call(s.ctx);return;case 1:for(;++r<n;)(s=e[r]).callback.call(s.ctx,o);return;case 2:for(;++r<n;)(s=e[r]).callback.call(s.ctx,o,i);return;case 3:for(;++r<n;)(s=e[r]).callback.call(s.ctx,o,i,a);return;default:for(;++r<n;)(s=e[r]).callback.apply(s.ctx,t);return}}class Ds{start(e,t,s,r){return this._events=Ts($s,this._events||{},e,t,{context:this.obj,ctx:s,listening:r}),r&&((this.obj._listeners||(this.obj._listeners={}))[this.id]=this,this.interop=!1),this}stop(e,t){let s;this.interop?(this._events=Ts(Ms,this._events,e,t,{context:void 0,listeners:void 0}),s=!this._events):(this.count--,s=0===this.count),s&&this.cleanup()}cleanup(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]}constructor(e,t){this.id=e._listenId,this.listener=e,this.obj=t,this.interop=!0,this.count=0,this._events=void 0}}let Rs;function zs(e){return class extends e{on(e,t,s){return this._events=Ts($s,this._events||{},e,t,{context:s,ctx:this,listening:Rs}),Rs&&((this._listeners||(this._listeners={}))[Rs.id]=Rs,Rs.interop=!1),this}listenTo(e,t,s){if(!e)return this;const r=e._listenId||(e._listenId=M("l")),n=this._listeningTo||(this._listeningTo={});let o=Rs=n[r];o||(this._listenId||(this._listenId=M("l")),o=Rs=n[r]=new Ds(this,e));const i=ks(e,t,s,this);if(Rs=void 0,i)throw i;return o.interop&&o.start(t,s,this,Rs),this}off(e,t,s){return this._events?(this._events=Ts(Ms,this._events,e,t,{context:s,listeners:this._listeners}),this):this}stopListening(e,t,s){const r=this._listeningTo;if(!r)return this;const n=e?[e._listenId]:cs(r);for(let e=0;e<n.length;e++){const o=r[n[e]];if(!o)break;o.obj.off(t,s,this),o.interop&&o.stop(t,s)}return rs(r)&&(this._listeningTo=void 0),this}once(e,t,s){const r=Ts(Is,{},e,t,this.off.bind(this));return"string"==typeof e&&null==s&&(t=void 0),this.on(r,t,s)}listenToOnce(e,t,s){const r=Ts(Is,{},t,s,this.stopListening.bind(this,e));return this.listenTo(e,r)}trigger(e,...t){return this._events?(Ts(Ps,this._events,e,void 0,t),this):this}}}const Ls=/^(\S+)\s*(.*)$/;class Us extends(zs(HTMLElement)){set events(e){this._declarativeEvents=e}get events(){return this._declarativeEvents}createRenderRoot(){return this}connectedCallback(){this._initialized||(this.preinitialize.apply(this,arguments),this.initialize.apply(this,arguments),this._initialized=!0),this.delegateEvents()}disconnectedCallback(){var e;this.undelegateEvents(),null===(e=this.stopListening)||void 0===e||e.call(this)}preinitialize(){}initialize(){}beforeRender(){}afterRender(){}render(){return this.beforeRender(),ge(this.toHTML(),this),this.afterRender(),this}toHTML(){return""}delegateEvents(){if(!this.events)return this;this.undelegateEvents();for(const e in this.events){let t=this.events[e];if("function"!=typeof t&&(t=this[t]),!t)continue;const s=e.match(Ls);this.delegate(s[1],s[2],t.bind(this))}return this}delegate(e,t,s){const r=this;if(!r)return this;if("function"==typeof t&&(s=t,t=null),-1!==["focus","blur"].indexOf(e)){const r=this.querySelectorAll(t);for(let t=0,n=r.length;t<n;t++){const n=r[t];n.addEventListener(e,s,!1),this._domEvents.push({el:n,eventName:e,handler:s})}return s}const n=t?function(e){let n=e.target||e.srcElement;for(;n&&n!=r;n=n.parentNode)n.matches(t)&&(e.delegateTarget=n,s(e))}:s;return this.addEventListener(e,n,!1),this._domEvents.push({el:this,eventName:e,handler:n,listener:s,selector:t}),this}undelegateEvents(){if(this){for(let e=0,t=this._domEvents.length;e<t;e++){const t=this._domEvents[e];t.el.removeEventListener(t.eventName,t.handler,!1)}this._domEvents.length=0}return this}undelegate(e,t,s){if("function"==typeof t&&(s=t,t=null),this){const r=this._domEvents.slice();let n=r.length;for(;n--;){const o=r[n];!(o.eventName!==e||s&&o.listener!==s||t&&o.selector!==t)&&(o.el.removeEventListener(o.eventName,o.handler,!1),this._domEvents.splice(n,1))}}return this}constructor(e={}){super(),this.stopListening=null,this.cid=M("view"),this._declarativeEvents={},this._domEvents=[];const{model:t,collection:s,events:r}=e;Object.assign(this,{model:t,collection:s,events:r})}}function Bs(e){var t="function"==typeof Symbol&&Symbol.iterator,s=t&&e[t],r=0;if(s)return s.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fs(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var s=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)s.append(e[r]);return s.getBlob(t.type)}}var qs=/^~~local_forage_type~([^~]+)~/,Hs=9,Gs=Hs+4,Ws=Object.prototype.toString;function Vs(e){var t=.75*e.length,s=e.length;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);for(var r=new ArrayBuffer(t),n=new Uint8Array(r),o=0,i=0;o<s;o+=4){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o]),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o+1]),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o+2]),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o+3]);n[i++]=a<<2|l>>4,n[i++]=(15&l)<<4|d>>2,n[i++]=(3&d)<<6|63&c}return r}function Ks(e){for(var t=new Uint8Array(e),s="",r=0;r<t.length;r+=3)s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t[r]>>2],s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&t[r])<<4|t[r+1]>>4],s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&t[r+1])<<2|t[r+2]>>6],s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&t[r+2]];return t.length%3==2?s=s.substring(0,s.length-1)+"=":t.length%3==1&&(s=s.substring(0,s.length-2)+"=="),s}function Js(e,t){var s="";if(e&&(s=Ws.call(e)),e&&("[object ArrayBuffer]"===s||e.buffer&&"[object ArrayBuffer]"===Ws.call(e.buffer))){var r=void 0,n="__lfsc__:";e instanceof ArrayBuffer?(r=e,n+="arbf"):(r=e.buffer,"[object Int8Array]"===s?n+="si08":"[object Uint8Array]"===s?n+="ui08":"[object Uint8ClampedArray]"===s?n+="uic8":"[object Int16Array]"===s?n+="si16":"[object Uint16Array]"===s?n+="ur16":"[object Int32Array]"===s?n+="si32":"[object Uint32Array]"===s?n+="ui32":"[object Float32Array]"===s?n+="fl32":"[object Float64Array]"===s?n+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(n+Ks(r))}else if("[object Blob]"===s){var o=new FileReader;o.onload=function(){var s="~~local_forage_type~"+e.type+"~"+Ks(this.result);t("__lfsc__:blob"+s)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),t(null,s)}}function Ys(e){if("__lfsc__:"!==e.substring(0,Hs))return JSON.parse(e);var t,s=e.substring(Gs),r=e.substring(Hs,Gs);if("blob"===r&&qs.test(s)){var n=s.match(qs);t=n[1],s=s.substring(n[0].length)}var o=Vs(s);switch(r){case"arbf":return o;case"blob":return Fs([o],{type:t});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw new Error("Unkown type: "+r)}}function Qs(e){var t,s;if(null===e||"object"!=typeof e||"isActiveClone"in e)return e;var r=e instanceof Date?new Date(e):e.constructor();try{for(var n=Bs(Object.keys(e)),o=n.next();!o.done;o=n.next()){var i=o.value;Object.prototype.hasOwnProperty.call(e,i)&&(e.isActiveClone=null,r[i]=Qs(e[i]),delete e.isActiveClone)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(s=n.return)&&s.call(n)}finally{if(t)throw t.error}}return r}function Xs(e,t){return(e.name||t.name)+"/"+(e.storeName||t.storeName)+"/"}function Zs(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function er(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function tr(e,t){var s=this;if(t=er.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}return{promise:e.name?new Promise((function(t){e.storeName?t(Xs(e,s._defaultConfig)):t(e.name+"/")})):Promise.reject("Invalid arguments"),callback:t}}function sr(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}var rr={bufferToString:Ks,deserialize:Ys,serialize:Js,stringToBuffer:Vs},nr="localforage-driver-memory",or={},ir=function(){function e(e){this.kp=e,this.data={}}return e.resolve=function(t){return or[t]||(or[t]=new e(t)),or[t]},e.prototype.clear=function(){this.data={}},e.prototype.drop=function(){this.clear(),delete or[this.kp]},e.prototype.get=function(e){return this.data[e]},e.prototype.key=function(e){return this.keys()[e]},e.prototype.keys=function(){return Object.keys(this.data)},e.prototype.rm=function(e){delete this.data[e]},e.prototype.set=function(e,t){this.data[e]=t},e}();function ar(e){var t=e?Qs(e):{},s=Xs(t,this._defaultConfig),r=ir.resolve(s);return this._dbInfo=t,this._dbInfo.serializer=rr,this._dbInfo.keyPrefix=s,this._dbInfo.mStore=r,Promise.resolve()}function lr(e){var t=this,s=this.ready().then((function(){t._dbInfo.mStore.clear()}));return Zs(s,e),s}function dr(e,t){var s=tr.apply(this,arguments),r=s.promise,n=s.callback;return Zs(r.then((function(e){ir.resolve(e).drop()})),n),r}function cr(e,t){var s=this;e=sr(e);var r=this.ready().then((function(){var t=s._dbInfo.mStore.get(e);return null==t?null:s._dbInfo.serializer.deserialize(t)}));return Zs(r,t),r}function ur(e,t){var s=this,r=this.ready().then((function(){for(var t=s._dbInfo.mStore,r=t.keys(),n=0;n<r.length;n++){var o=t.get(r[n]);if(o&&(o=s._dbInfo.serializer.deserialize(o)),void 0!==(o=e(o,r[n],n+1)))return o}}));return Zs(r,t),r}function hr(e,t){var s=this,r=this.ready().then((function(){var t;try{void 0===(t=s._dbInfo.mStore.key(e))&&(t=null)}catch(e){t=null}return t}));return Zs(r,t),r}function mr(e){var t=this,s=this.ready().then((function(){return t._dbInfo.mStore.keys()}));return Zs(s,e),s}function fr(e){var t=this.keys().then((function(e){return e.length}));return Zs(t,e),t}function pr(e,t){var s=this;e=sr(e);var r=this.ready().then((function(){s._dbInfo.mStore.rm(e)}));return Zs(r,t),r}function gr(e,t,s){var r=this;e=sr(e);var n=this.ready().then((function(){void 0===t&&(t=null);var s=t;return new Promise((function(n,o){r._dbInfo.serializer.serialize(t,(function(t,i){if(i)o(i);else try{r._dbInfo.mStore.set(e,t),n(s)}catch(e){o(e)}}))}))}));return Zs(n,s),n}var vr=!0,_r=Object.freeze({__proto__:null,_driver:nr,_initStorage:ar,_support:vr,clear:lr,dropInstance:dr,getItem:cr,iterate:ur,key:hr,keys:mr,length:fr,removeItem:pr,setItem:gr});function yr(){this.__data__=[],this.size=0}function br(e,t){return e===t||e!=e&&t!=t}function jr(e,t){for(var s=e.length;s--;)if(br(e[s][0],t))return s;return-1}var wr=Array.prototype.splice;function Sr(e){var t=this.__data__,s=jr(t,e);return!(s<0||(s==t.length-1?t.pop():wr.call(t,s,1),--this.size,0))}function xr(e){var t=this.__data__,s=jr(t,e);return s<0?void 0:t[s][1]}function Er(e){return jr(this.__data__,e)>-1}function Ar(e,t){var s=this.__data__,r=jr(s,e);return r<0?(++this.size,s.push([e,t])):s[r][1]=t,this}function Or(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}function Cr(){this.__data__=new Or,this.size=0}function Tr(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}function $r(e){return this.__data__.get(e)}function kr(e){return this.__data__.has(e)}Or.prototype.clear=yr,Or.prototype.delete=Sr,Or.prototype.get=xr,Or.prototype.has=Er,Or.prototype.set=Ar;var Mr=He(Object,"create");function Ir(){this.__data__=Mr?Mr(null):{},this.size=0}function Pr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Nr="__lodash_hash_undefined__",Dr=Object.prototype.hasOwnProperty;function Rr(e){var t=this.__data__;if(Mr){var s=t[e];return s===Nr?void 0:s}return Dr.call(t,e)?t[e]:void 0}var zr=Object.prototype.hasOwnProperty;function Lr(e){var t=this.__data__;return Mr?void 0!==t[e]:zr.call(t,e)}var Ur="__lodash_hash_undefined__";function Br(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=Mr&&void 0===t?Ur:t,this}function Fr(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}function qr(){this.size=0,this.__data__={hash:new Fr,map:new(We||Or),string:new Fr}}function Hr(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Gr(e,t){var s=e.__data__;return Hr(t)?s["string"==typeof t?"string":"hash"]:s.map}function Wr(e){var t=Gr(this,e).delete(e);return this.size-=t?1:0,t}function Vr(e){return Gr(this,e).get(e)}function Kr(e){return Gr(this,e).has(e)}function Jr(e,t){var s=Gr(this,e),r=s.size;return s.set(e,t),this.size+=s.size==r?0:1,this}function Yr(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}Fr.prototype.clear=Ir,Fr.prototype.delete=Pr,Fr.prototype.get=Rr,Fr.prototype.has=Lr,Fr.prototype.set=Br,Yr.prototype.clear=qr,Yr.prototype.delete=Wr,Yr.prototype.get=Vr,Yr.prototype.has=Kr,Yr.prototype.set=Jr;var Qr=200;function Xr(e,t){var s=this.__data__;if(s instanceof Or){var r=s.__data__;if(!We||r.length<Qr-1)return r.push([e,t]),this.size=++s.size,this;s=this.__data__=new Yr(r)}return s.set(e,t),this.size=s.size,this}function Zr(e){var t=this.__data__=new Or(e);this.size=t.size}function en(e,t){for(var s=-1,r=null==e?0:e.length;++s<r&&!1!==t(e[s],s,e););return e}Zr.prototype.clear=Cr,Zr.prototype.delete=Tr,Zr.prototype.get=$r,Zr.prototype.has=kr,Zr.prototype.set=Xr;var tn=function(){try{var e=He(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();function sn(e,t,s){"__proto__"==t&&tn?tn(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}var rn=Object.prototype.hasOwnProperty;function nn(e,t,s){var r=e[t];rn.call(e,t)&&br(r,s)&&(void 0!==s||t in e)||sn(e,t,s)}function on(e,t,s,r){var n=!s;s||(s={});for(var o=-1,i=t.length;++o<i;){var a=t[o],l=void 0;void 0===l&&(l=e[a]),n?sn(s,a,l):nn(s,a,l)}return s}function an(e,t){return e&&on(t,cs(t),e)}function ln(e){var t=[];if(null!=e)for(var s in Object(e))t.push(s);return t}var dn=Object.prototype.hasOwnProperty;function cn(e){if(!Se(e))return ln(e);var t=_e(e),s=[];for(var r in e)("constructor"!=r||!t&&dn.call(e,r))&&s.push(r);return s}function un(e){return gt(e)?ds(e,!0):cn(e)}function hn(e,t){return e&&on(t,un(t),e)}var mn="object"==typeof t&&t&&!t.nodeType&&t,fn=mn&&e&&!e.nodeType&&e,pn=fn&&fn.exports===mn?d.Buffer:void 0,gn=pn?pn.allocUnsafe:void 0;function vn(e,t){if(t)return e.slice();var s=e.length,r=gn?gn(s):new e.constructor(s);return e.copy(r),r}function _n(e,t){var s=-1,r=e.length;for(t||(t=Array(r));++s<r;)t[s]=e[s];return t}function yn(e,t){for(var s=-1,r=null==e?0:e.length,n=0,o=[];++s<r;){var i=e[s];t(i,s,e)&&(o[n++]=i)}return o}function bn(){return[]}var jn=Object.prototype.propertyIsEnumerable,wn=Object.getOwnPropertySymbols,Sn=wn?function(e){return null==e?[]:(e=Object(e),yn(wn(e),(function(t){return jn.call(e,t)})))}:bn;function xn(e,t){return on(e,Sn(e),t)}function En(e,t){for(var s=-1,r=t.length,n=e.length;++s<r;)e[n+s]=t[s];return e}var An=ye(Object.getPrototypeOf,Object),On=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)En(t,Sn(e)),e=An(e);return t}:bn;function Cn(e,t){return on(e,On(e),t)}function Tn(e,t,s){var r=t(e);return h(e)?r:En(r,s(e))}function $n(e){return Tn(e,cs,Sn)}function kn(e){return Tn(e,un,On)}var Mn=Object.prototype.hasOwnProperty;function In(e){var t=e.length,s=new e.constructor(t);return t&&"string"==typeof e[0]&&Mn.call(e,"index")&&(s.index=e.index,s.input=e.input),s}var Pn=d.Uint8Array;function Nn(e){var t=new e.constructor(e.byteLength);return new Pn(t).set(new Pn(e)),t}function Dn(e,t){var s=t?Nn(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}var Rn=/\w*$/;function zn(e){var t=new e.constructor(e.source,Rn.exec(e));return t.lastIndex=e.lastIndex,t}var Ln=c?c.prototype:void 0,Un=Ln?Ln.valueOf:void 0;function Bn(e){return Un?Object(Un.call(e)):{}}function Fn(e,t){var s=t?Nn(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}var qn="[object Boolean]",Hn="[object Date]",Gn="[object Map]",Wn="[object Number]",Vn="[object RegExp]",Kn="[object Set]",Jn="[object String]",Yn="[object Symbol]",Qn="[object ArrayBuffer]",Xn="[object DataView]",Zn="[object Float32Array]",eo="[object Float64Array]",to="[object Int8Array]",so="[object Int16Array]",ro="[object Int32Array]",no="[object Uint8Array]",oo="[object Uint8ClampedArray]",io="[object Uint16Array]",ao="[object Uint32Array]";function lo(e,t,s){var r=e.constructor;switch(t){case Qn:return Nn(e);case qn:case Hn:return new r(+e);case Xn:return Dn(e,s);case Zn:case eo:case to:case so:case ro:case no:case oo:case io:case ao:return Fn(e,s);case Gn:return new r;case Wn:case Jn:return new r(e);case Vn:return zn(e);case Kn:return new r;case Yn:return Bn(e)}}var co=Object.create,uo=function(){function e(){}return function(t){if(!Se(t))return{};if(co)return co(t);e.prototype=t;var s=new e;return e.prototype=void 0,s}}();function ho(e){return"function"!=typeof e.constructor||_e(e)?{}:uo(An(e))}var mo="[object Map]";function fo(e){return x(e)&&at(e)==mo}var po=Qt&&Qt.isMap,go=po?Vt(po):fo,vo="[object Set]";function _o(e){return x(e)&&at(e)==vo}var yo=Qt&&Qt.isSet,bo=yo?Vt(yo):_o,jo=1,wo=2,So=4,xo="[object Arguments]",Eo="[object Array]",Ao="[object Boolean]",Oo="[object Date]",Co="[object Error]",To="[object Function]",$o="[object GeneratorFunction]",ko="[object Map]",Mo="[object Number]",Io="[object Object]",Po="[object RegExp]",No="[object Set]",Do="[object String]",Ro="[object Symbol]",zo="[object WeakMap]",Lo="[object ArrayBuffer]",Uo="[object DataView]",Bo="[object Float32Array]",Fo="[object Float64Array]",qo="[object Int8Array]",Ho="[object Int16Array]",Go="[object Int32Array]",Wo="[object Uint8Array]",Vo="[object Uint8ClampedArray]",Ko="[object Uint16Array]",Jo="[object Uint32Array]",Yo={};function Qo(e,t,s,r,n,o){var i,a=t&jo,l=t&wo,d=t&So;if(s&&(i=n?s(e,r,n,o):s(e)),void 0!==i)return i;if(!Se(e))return e;var c=h(e);if(c){if(i=In(e),!a)return _n(e,i)}else{var u=at(e),m=u==To||u==$o;if(jt(e))return vn(e,a);if(u==Io||u==xo||m&&!n){if(i=l||m?{}:ho(e),!a)return l?Cn(e,hn(i,e)):xn(e,an(i,e))}else{if(!Yo[u])return n?e:{};i=lo(e,u,a)}}o||(o=new Zr);var f=o.get(e);if(f)return f;o.set(e,i),bo(e)?e.forEach((function(r){i.add(Qo(r,t,s,r,e,o))})):go(e)&&e.forEach((function(r,n){i.set(n,Qo(r,t,s,n,e,o))}));var p=c?void 0:(d?l?kn:$n:l?un:cs)(e);return en(p||e,(function(r,n){p&&(r=e[n=r]),nn(i,n,Qo(r,t,s,n,e,o))})),i}Yo[xo]=Yo[Eo]=Yo[Lo]=Yo[Uo]=Yo[Ao]=Yo[Oo]=Yo[Bo]=Yo[Fo]=Yo[qo]=Yo[Ho]=Yo[Go]=Yo[ko]=Yo[Mo]=Yo[Io]=Yo[Po]=Yo[No]=Yo[Do]=Yo[Ro]=Yo[Wo]=Yo[Vo]=Yo[Ko]=Yo[Jo]=!0,Yo[Co]=Yo[To]=Yo[zo]=!1;var Xo=1,Zo=4;function ei(e){return Qo(e,Xo|Zo)}var ti="[object String]";function si(e){return"string"==typeof e||!h(e)&&x(e)&&S(e)==ti}var ri="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==s.g?s.g:"undefined"!=typeof self?self:{};function ni(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function oi(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ii,ai={exports:{}};function li(){return ii||(ii=1,e=ai,function(t){e.exports=t()}((function(){return function e(t,s,r){function n(i,a){if(!s[i]){if(!t[i]){var l="function"==typeof oi&&oi;if(!a&&l)return l(i,!0);if(o)return o(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var c=s[i]={exports:{}};t[i][0].call(c.exports,(function(e){var s=t[i][1][e];return n(s||e)}),c,c.exports,e,t,s,r)}return s[i].exports}for(var o="function"==typeof oi&&oi,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(e,t,s){(function(e){var s,r,n=e.MutationObserver||e.WebKitMutationObserver;if(n){var o=0,i=new n(c),a=e.document.createTextNode("");i.observe(a,{characterData:!0}),s=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)s="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var l=new e.MessageChannel;l.port1.onmessage=c,s=function(){l.port2.postMessage(0)}}var d=[];function c(){var e,t;r=!0;for(var s=d.length;s;){for(t=d,d=[],e=-1;++e<s;)t[e]();s=d.length}r=!1}function u(e){1!==d.push(e)||r||s()}t.exports=u}).call(this,void 0!==ri?ri:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,s){var r=e(1);function n(){}var o={},i=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function d(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==n&&m(this,e)}function c(e,t,s){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof s&&(this.onRejected=s,this.callRejected=this.otherCallRejected)}function u(e,t,s){r((function(){var r;try{r=t(s)}catch(t){return o.reject(e,t)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function m(e,t){var s=!1;function r(t){s||(s=!0,o.reject(e,t))}function n(t){s||(s=!0,o.resolve(e,t))}function i(){t(n,r)}var a=f(i);"error"===a.status&&r(a.value)}function f(e,t){var s={};try{s.value=e(t),s.status="success"}catch(e){s.status="error",s.value=e}return s}function p(e){return e instanceof this?e:o.resolve(new this(n),e)}function g(e){var t=new this(n);return o.reject(t,e)}function v(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var s=e.length,r=!1;if(!s)return this.resolve([]);for(var i=new Array(s),a=0,l=-1,d=new this(n);++l<s;)c(e[l],l);return d;function c(e,n){function l(e){i[n]=e,++a!==s||r||(r=!0,o.resolve(d,i))}t.resolve(e).then(l,(function(e){r||(r=!0,o.reject(d,e))}))}}function _(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var s=e.length,r=!1;if(!s)return this.resolve([]);for(var i=-1,a=new this(n);++i<s;)l(e[i]);return a;function l(e){t.resolve(e).then((function(e){r||(r=!0,o.resolve(a,e))}),(function(e){r||(r=!0,o.reject(a,e))}))}}t.exports=d,d.prototype.catch=function(e){return this.then(null,e)},d.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===i)return this;var s=new this.constructor(n);return this.state!==l?u(s,this.state===a?e:t,this.outcome):this.queue.push(new c(s,e,t)),s},c.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){o.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},o.resolve=function(e,t){var s=f(h,t);if("error"===s.status)return o.reject(e,s.value);var r=s.value;if(r)m(e,r);else{e.state=a,e.outcome=t;for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callFulfilled(t)}return e},o.reject=function(e,t){e.state=i,e.outcome=t;for(var s=-1,r=e.queue.length;++s<r;)e.queue[s].callRejected(t);return e},d.resolve=p,d.reject=g,d.all=v,d.race=_},{1:1}],3:[function(e,t,s){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==ri?ri:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,s){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var i=o();function a(){try{if(!i||!i.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function l(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var s=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)s.append(e[r]);return s.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var d=Promise;function c(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function u(e,t,s){"function"==typeof t&&e.then(t),"function"==typeof s&&e.catch(s)}function h(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function m(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",p=void 0,g={},v=Object.prototype.toString,_="readonly",y="readwrite";function b(e){for(var t=e.length,s=new ArrayBuffer(t),r=new Uint8Array(s),n=0;n<t;n++)r[n]=e.charCodeAt(n);return s}function j(e){return new d((function(t){var s=e.transaction(f,y),r=l([""]);s.objectStore(f).put(r,"key"),s.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},s.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),s=navigator.userAgent.match(/Edge\//);t(s||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function w(e){return"boolean"==typeof p?d.resolve(p):j(e).then((function(e){return p=e}))}function S(e){var t=g[e.name],s={};s.promise=new d((function(e,t){s.resolve=e,s.reject=t})),t.deferredOperations.push(s),t.dbReady?t.dbReady=t.dbReady.then((function(){return s.promise})):t.dbReady=s.promise}function x(e){var t=g[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function E(e,t){var s=g[e.name].deferredOperations.pop();if(s)return s.reject(t),s.promise}function A(e,t){return new d((function(s,r){if(g[e.name]=g[e.name]||D(),e.db){if(!t)return s(e.db);S(e),e.db.close()}var n=[e.name];t&&n.push(e.version);var o=i.open.apply(i,n);t&&(o.onupgradeneeded=function(t){var s=o.result;try{s.createObjectStore(e.storeName),t.oldVersion<=1&&s.createObjectStore(f)}catch(s){if("ConstraintError"!==s.name)throw s;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),r(o.error)},o.onsuccess=function(){var t=o.result;t.onversionchange=function(e){e.target.close()},s(t),x(e)}}))}function O(e){return A(e,!1)}function C(e){return A(e,!0)}function T(e,t){if(!e.db)return!0;var s=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,n=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),n||s){if(s){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function $(e){return new d((function(t,s){var r=new FileReader;r.onerror=s,r.onloadend=function(s){var r=btoa(s.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function k(e){return l([b(atob(e.data))],{type:e.type})}function M(e){return e&&e.__local_forage_encoded_blob}function I(e){var t=this,s=t._initReady().then((function(){var e=g[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return u(s,e,e),s}function P(e){S(e);for(var t=g[e.name],s=t.forages,r=0;r<s.length;r++){var n=s[r];n._dbInfo.db&&(n._dbInfo.db.close(),n._dbInfo.db=null)}return e.db=null,O(e).then((function(t){return e.db=t,T(e)?C(e):t})).then((function(r){e.db=t.db=r;for(var n=0;n<s.length;n++)s[n]._dbInfo.db=r})).catch((function(t){throw E(e,t),t}))}function N(e,t,s,r){void 0===r&&(r=1);try{var n=e.db.transaction(e.storeName,t);s(null,n)}catch(n){if(r>0&&(!e.db||"InvalidStateError"===n.name||"NotFoundError"===n.name))return d.resolve().then((function(){if(!e.db||"NotFoundError"===n.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),C(e)})).then((function(){return P(e).then((function(){N(e,t,s,r-1)}))})).catch(s);s(n)}}function D(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function R(e){var t=this,s={db:null};if(e)for(var r in e)s[r]=e[r];var n=g[s.name];n||(n=D(),g[s.name]=n),n.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=I);var o=[];function i(){return d.resolve()}for(var a=0;a<n.forages.length;a++){var l=n.forages[a];l!==t&&o.push(l._initReady().catch(i))}var c=n.forages.slice(0);return d.all(o).then((function(){return s.db=n.db,O(s)})).then((function(e){return s.db=e,T(s,t._defaultConfig.version)?C(s):e})).then((function(e){s.db=n.db=e,t._dbInfo=s;for(var r=0;r<c.length;r++){var o=c[r];o!==t&&(o._dbInfo.db=s.db,o._dbInfo.version=s.version)}}))}function z(e,t){var s=this;e=h(e);var r=new d((function(t,r){s.ready().then((function(){N(s._dbInfo,_,(function(n,o){if(n)return r(n);try{var i=o.objectStore(s._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),M(e)&&(e=k(e)),t(e)},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function L(e,t){var s=this,r=new d((function(t,r){s.ready().then((function(){N(s._dbInfo,_,(function(n,o){if(n)return r(n);try{var i=o.objectStore(s._dbInfo.storeName).openCursor(),a=1;i.onsuccess=function(){var s=i.result;if(s){var r=s.value;M(r)&&(r=k(r));var n=e(r,s.key,a++);void 0!==n?t(n):s.continue()}else t()},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function U(e,t,s){var r=this;e=h(e);var n=new d((function(s,n){var o;r.ready().then((function(){return o=r._dbInfo,"[object Blob]"===v.call(t)?w(o.db).then((function(e){return e?t:$(t)})):t})).then((function(t){N(r._dbInfo,y,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var l=a.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),s(t)},i.onabort=i.onerror=function(){var e=l.error?l.error:l.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return c(n,s),n}function B(e,t){var s=this;e=h(e);var r=new d((function(t,r){s.ready().then((function(){N(s._dbInfo,y,(function(n,o){if(n)return r(n);try{var i=o.objectStore(s._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(i.error)},o.onabort=function(){var e=i.error?i.error:i.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function F(e){var t=this,s=new d((function(e,s){t.ready().then((function(){N(t._dbInfo,y,(function(r,n){if(r)return s(r);try{var o=n.objectStore(t._dbInfo.storeName).clear();n.oncomplete=function(){e()},n.onabort=n.onerror=function(){var e=o.error?o.error:o.transaction.error;s(e)}}catch(e){s(e)}}))})).catch(s)}));return c(s,e),s}function q(e){var t=this,s=new d((function(e,s){t.ready().then((function(){N(t._dbInfo,_,(function(r,n){if(r)return s(r);try{var o=n.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){s(o.error)}}catch(e){s(e)}}))})).catch(s)}));return c(s,e),s}function H(e,t){var s=this,r=new d((function(t,r){e<0?t(null):s.ready().then((function(){N(s._dbInfo,_,(function(n,o){if(n)return r(n);try{var i=o.objectStore(s._dbInfo.storeName),a=!1,l=i.openKeyCursor();l.onsuccess=function(){var s=l.result;s?0===e||a?t(s.key):(a=!0,s.advance(e)):t(null)},l.onerror=function(){r(l.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function G(e){var t=this,s=new d((function(e,s){t.ready().then((function(){N(t._dbInfo,_,(function(r,n){if(r)return s(r);try{var o=n.objectStore(t._dbInfo.storeName).openKeyCursor(),i=[];o.onsuccess=function(){var t=o.result;t?(i.push(t.key),t.continue()):e(i)},o.onerror=function(){s(o.error)}}catch(e){s(e)}}))})).catch(s)}));return c(s,e),s}function W(e,t){t=m.apply(this,arguments);var s=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||s.name,e.storeName=e.storeName||s.storeName);var r,n=this;if(e.name){var o=e.name===s.name&&n._dbInfo.db?d.resolve(n._dbInfo.db):O(e).then((function(t){var s=g[e.name],r=s.forages;s.db=t;for(var n=0;n<r.length;n++)r[n]._dbInfo.db=t;return t}));r=e.storeName?o.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var s=t.version+1;S(e);var r=g[e.name],n=r.forages;t.close();for(var o=0;o<n.length;o++){var a=n[o];a._dbInfo.db=null,a._dbInfo.version=s}var l=new d((function(t,r){var n=i.open(e.name,s);n.onerror=function(e){n.result.close(),r(e)},n.onupgradeneeded=function(){n.result.deleteObjectStore(e.storeName)},n.onsuccess=function(){var e=n.result;e.close(),t(e)}}));return l.then((function(e){r.db=e;for(var t=0;t<n.length;t++){var s=n[t];s._dbInfo.db=e,x(s._dbInfo)}})).catch((function(t){throw(E(e,t)||d.resolve()).catch((function(){})),t}))}})):o.then((function(t){S(e);var s=g[e.name],r=s.forages;t.close();for(var n=0;n<r.length;n++)r[n]._dbInfo.db=null;var o=new d((function(t,s){var r=i.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),s(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return o.then((function(e){s.db=e;for(var t=0;t<r.length;t++)x(r[t]._dbInfo)})).catch((function(t){throw(E(e,t)||d.resolve()).catch((function(){})),t}))}))}else r=d.reject("Invalid arguments");return c(r,t),r}var V={_driver:"asyncStorage",_initStorage:R,_support:a(),iterate:L,getItem:z,setItem:U,removeItem:B,clear:F,length:q,key:H,keys:G,dropInstance:W};function K(){return"function"==typeof openDatabase}var J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y="~~local_forage_type~",Q=/^~~local_forage_type~([^~]+)~/,X="__lfsc__:",Z=X.length,ee="arbf",te="blob",se="si08",re="ui08",ne="uic8",oe="si16",ie="si32",ae="ur16",le="ui32",de="fl32",ce="fl64",ue=Z+ee.length,he=Object.prototype.toString;function me(e){var t,s,r,n,o,i=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var d=new ArrayBuffer(i),c=new Uint8Array(d);for(t=0;t<a;t+=4)s=J.indexOf(e[t]),r=J.indexOf(e[t+1]),n=J.indexOf(e[t+2]),o=J.indexOf(e[t+3]),c[l++]=s<<2|r>>4,c[l++]=(15&r)<<4|n>>2,c[l++]=(3&n)<<6|63&o;return d}function fe(e){var t,s=new Uint8Array(e),r="";for(t=0;t<s.length;t+=3)r+=J[s[t]>>2],r+=J[(3&s[t])<<4|s[t+1]>>4],r+=J[(15&s[t+1])<<2|s[t+2]>>6],r+=J[63&s[t+2]];return s.length%3==2?r=r.substring(0,r.length-1)+"=":s.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function pe(e,t){var s="";if(e&&(s=he.call(e)),e&&("[object ArrayBuffer]"===s||e.buffer&&"[object ArrayBuffer]"===he.call(e.buffer))){var r,n=X;e instanceof ArrayBuffer?(r=e,n+=ee):(r=e.buffer,"[object Int8Array]"===s?n+=se:"[object Uint8Array]"===s?n+=re:"[object Uint8ClampedArray]"===s?n+=ne:"[object Int16Array]"===s?n+=oe:"[object Uint16Array]"===s?n+=ae:"[object Int32Array]"===s?n+=ie:"[object Uint32Array]"===s?n+=le:"[object Float32Array]"===s?n+=de:"[object Float64Array]"===s?n+=ce:t(new Error("Failed to get type for BinaryArray"))),t(n+fe(r))}else if("[object Blob]"===s){var o=new FileReader;o.onload=function(){var s=Y+e.type+"~"+fe(this.result);t(X+te+s)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),t(null,s)}}function ge(e){if(e.substring(0,Z)!==X)return JSON.parse(e);var t,s=e.substring(ue),r=e.substring(Z,ue);if(r===te&&Q.test(s)){var n=s.match(Q);t=n[1],s=s.substring(n[0].length)}var o=me(s);switch(r){case ee:return o;case te:return l([o],{type:t});case se:return new Int8Array(o);case re:return new Uint8Array(o);case ne:return new Uint8ClampedArray(o);case oe:return new Int16Array(o);case ae:return new Uint16Array(o);case ie:return new Int32Array(o);case le:return new Uint32Array(o);case de:return new Float32Array(o);case ce:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}}var ve={serialize:pe,deserialize:ge,stringToBuffer:me,bufferToString:fe};function _e(e,t,s,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],s,r)}function ye(e){var t=this,s={db:null};if(e)for(var r in e)s[r]="string"!=typeof e[r]?e[r].toString():e[r];var n=new d((function(e,r){try{s.db=openDatabase(s.name,String(s.version),s.description,s.size)}catch(e){return r(e)}s.db.transaction((function(n){_e(n,s,(function(){t._dbInfo=s,e()}),(function(e,t){r(t)}))}),r)}));return s.serializer=ve,n}function be(e,t,s,r,n,o){e.executeSql(s,r,n,(function(e,i){i.code===i.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?o(e,i):_e(e,t,(function(){e.executeSql(s,r,n,o)}),o)}),o):o(e,i)}),o)}function je(e,t){var s=this;e=h(e);var r=new d((function(t,r){s.ready().then((function(){var n=s._dbInfo;n.db.transaction((function(s){be(s,n,"SELECT * FROM "+n.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,s){var r=s.rows.length?s.rows.item(0).value:null;r&&(r=n.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function we(e,t){var s=this,r=new d((function(t,r){s.ready().then((function(){var n=s._dbInfo;n.db.transaction((function(s){be(s,n,"SELECT * FROM "+n.storeName,[],(function(s,r){for(var o=r.rows,i=o.length,a=0;a<i;a++){var l=o.item(a),d=l.value;if(d&&(d=n.serializer.deserialize(d)),void 0!==(d=e(d,l.key,a+1)))return void t(d)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Se(e,t,s,r){var n=this;e=h(e);var o=new d((function(o,i){n.ready().then((function(){void 0===t&&(t=null);var a=t,l=n._dbInfo;l.serializer.serialize(t,(function(t,d){d?i(d):l.db.transaction((function(s){be(s,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(a)}),(function(e,t){i(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(Se.apply(n,[e,a,s,r-1]));i(t)}}))}))})).catch(i)}));return c(o,s),o}function xe(e,t,s){return Se.apply(this,[e,t,s,1])}function Ee(e,t){var s=this;e=h(e);var r=new d((function(t,r){s.ready().then((function(){var n=s._dbInfo;n.db.transaction((function(s){be(s,n,"DELETE FROM "+n.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Ae(e){var t=this,s=new d((function(e,s){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){s(t)}))}))})).catch(s)}));return c(s,e),s}function Oe(e){var t=this,s=new d((function(e,s){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,s){var r=s.rows.item(0).c;e(r)}),(function(e,t){s(t)}))}))})).catch(s)}));return c(s,e),s}function Ce(e,t){var s=this,r=new d((function(t,r){s.ready().then((function(){var n=s._dbInfo;n.db.transaction((function(s){be(s,n,"SELECT key FROM "+n.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,s){var r=s.rows.length?s.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Te(e){var t=this,s=new d((function(e,s){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT key FROM "+r.storeName,[],(function(t,s){for(var r=[],n=0;n<s.rows.length;n++)r.push(s.rows.item(n).key);e(r)}),(function(e,t){s(t)}))}))})).catch(s)}));return c(s,e),s}function $e(e){return new d((function(t,s){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(s,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).name);t({db:e,storeNames:n})}),(function(e,t){s(t)}))}),(function(e){s(e)}))}))}function ke(e,t){t=m.apply(this,arguments);var s=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||s.name,e.storeName=e.storeName||s.storeName);var r,n=this;return r=e.name?new d((function(t){var r;r=e.name===s.name?n._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t($e(r))})).then((function(e){return new d((function(t,s){e.db.transaction((function(r){function n(e){return new d((function(t,s){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){s(t)}))}))}for(var o=[],i=0,a=e.storeNames.length;i<a;i++)o.push(n(e.storeNames[i]));d.all(o).then((function(){t()})).catch((function(e){s(e)}))}),(function(e){s(e)}))}))})):d.reject("Invalid arguments"),c(r,t),r}var Me={_driver:"webSQLStorage",_initStorage:ye,_support:K(),iterate:we,getItem:je,setItem:xe,removeItem:Ee,clear:Ae,length:Oe,key:Ce,keys:Te,dropInstance:ke};function Ie(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Pe(e,t){var s=e.name+"/";return e.storeName!==t.storeName&&(s+=e.storeName+"/"),s}function Ne(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function De(){return!Ne()||localStorage.length>0}function Re(e){var t=this,s={};if(e)for(var r in e)s[r]=e[r];return s.keyPrefix=Pe(e,t._defaultConfig),De()?(t._dbInfo=s,s.serializer=ve,d.resolve()):d.reject()}function ze(e){var t=this,s=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,s=localStorage.length-1;s>=0;s--){var r=localStorage.key(s);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return c(s,e),s}function Le(e,t){var s=this;e=h(e);var r=s.ready().then((function(){var t=s._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return c(r,t),r}function Ue(e,t){var s=this,r=s.ready().then((function(){for(var t=s._dbInfo,r=t.keyPrefix,n=r.length,o=localStorage.length,i=1,a=0;a<o;a++){var l=localStorage.key(a);if(0===l.indexOf(r)){var d=localStorage.getItem(l);if(d&&(d=t.serializer.deserialize(d)),void 0!==(d=e(d,l.substring(n),i++)))return d}}}));return c(r,t),r}function Be(e,t){var s=this,r=s.ready().then((function(){var t,r=s._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return c(r,t),r}function Fe(e){var t=this,s=t.ready().then((function(){for(var e=t._dbInfo,s=localStorage.length,r=[],n=0;n<s;n++){var o=localStorage.key(n);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r}));return c(s,e),s}function qe(e){var t=this.keys().then((function(e){return e.length}));return c(t,e),t}function He(e,t){var s=this;e=h(e);var r=s.ready().then((function(){var t=s._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return c(r,t),r}function Ge(e,t,s){var r=this;e=h(e);var n=r.ready().then((function(){void 0===t&&(t=null);var s=t;return new d((function(n,o){var i=r._dbInfo;i.serializer.serialize(t,(function(t,r){if(r)o(r);else try{localStorage.setItem(i.keyPrefix+e,t),n(s)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return c(n,s),n}function We(e,t){if(t=m.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var s=this.config();e.name=e.name||s.name,e.storeName=e.storeName||s.storeName}var r,n=this;return r=e.name?new d((function(t){e.storeName?t(Pe(e,n._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var s=localStorage.key(t);0===s.indexOf(e)&&localStorage.removeItem(s)}})):d.reject("Invalid arguments"),c(r,t),r}var Ve={_driver:"localStorageWrapper",_initStorage:Re,_support:Ie(),iterate:Ue,getItem:Le,setItem:Ge,removeItem:He,clear:ze,length:qe,key:Be,keys:Fe,dropInstance:We},Ke=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Je=function(e,t){for(var s=e.length,r=0;r<s;){if(Ke(e[r],t))return!0;r++}return!1},Ye=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Qe={},Xe={},Ze={INDEXEDDB:V,WEBSQL:Me,LOCALSTORAGE:Ve},et=[Ze.INDEXEDDB._driver,Ze.WEBSQL._driver,Ze.LOCALSTORAGE._driver],tt=["dropInstance"],st=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function nt(e,t){e[t]=function(){var s=arguments;return e.ready().then((function(){return e[t].apply(e,s)}))}}function ot(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var s in t)t.hasOwnProperty(s)&&(Ye(t[s])?arguments[0][s]=t[s].slice():arguments[0][s]=t[s])}return arguments[0]}var it=function(){function e(t){for(var s in n(this,e),Ze)if(Ze.hasOwnProperty(s)){var r=Ze[s],o=r._driver;this[s]=o,Qe[o]||this.defineDriver(r)}this._defaultConfig=ot({},rt),this._config=ot({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,s){var r=new d((function(t,s){try{var r=e._driver,n=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void s(n);for(var o=st.concat("_initStorage"),i=0,a=o.length;i<a;i++){var l=o[i];if((!Je(tt,l)||e[l])&&"function"!=typeof e[l])return void s(n)}var u=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),s=d.reject(t);return c(s,arguments[arguments.length-1]),s}},s=0,r=tt.length;s<r;s++){var n=tt[s];e[n]||(e[n]=t(n))}};u();var h=function(s){Qe[r]&&console.info("Redefining LocalForage driver: "+r),Qe[r]=e,Xe[r]=s,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(h,s):h(!!e._support):h(!0)}catch(e){s(e)}}));return u(r,t,s),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,s){var r=Qe[e]?d.resolve(Qe[e]):d.reject(new Error("Driver not found."));return u(r,t,s),r},e.prototype.getSerializer=function(e){var t=d.resolve(ve);return u(t,e),t},e.prototype.ready=function(e){var t=this,s=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return u(s,e,e),s},e.prototype.setDriver=function(e,t,s){var r=this;Ye(e)||(e=[e]);var n=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function i(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}function a(e){return function(){var t=0;function s(){for(;t<e.length;){var n=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(n).then(i).catch(s)}o();var a=new Error("No available storage method found.");return r._driverSet=d.reject(a),r._driverSet}return s()}}var l=null!==this._driverSet?this._driverSet.catch((function(){return d.resolve()})):d.resolve();return this._driverSet=l.then((function(){var e=n[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=a(n)}))})).catch((function(){o();var e=new Error("No available storage method found.");return r._driverSet=d.reject(e),r._driverSet})),u(this._driverSet,t,s),this._driverSet},e.prototype.supports=function(e){return!!Xe[e]},e.prototype._extend=function(e){ot(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],s=0,r=e.length;s<r;s++){var n=e[s];this.supports(n)&&t.push(n)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=st.length;e<t;e++)nt(this,st[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),at=new it;t.exports=at},{3:3}]},{},[4])(4)}))),ai.exports;var e}var di=ni(li());function ci(e,t,s){(void 0!==s&&!br(e[t],s)||void 0===s&&!(t in e))&&sn(e,t,s)}function ui(e){return function(e,t,s){for(var r=-1,n=Object(e),o=s(e),i=o.length;i--;){var a=o[++r];if(!1===t(n[a],a,n))break}return e}}var hi=ui();function mi(e){return x(e)&&gt(e)}var fi="[object Object]",pi=Function.prototype,gi=Object.prototype,vi=pi.toString,_i=gi.hasOwnProperty,yi=vi.call(Object);function bi(e){if(!x(e)||S(e)!=fi)return!1;var t=An(e);if(null===t)return!0;var s=_i.call(t,"constructor")&&t.constructor;return"function"==typeof s&&s instanceof s&&vi.call(s)==yi}function ji(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function wi(e){return on(e,un(e))}function Si(e,t,s,r,n,o,i){var a=ji(e,s),l=ji(t,s),d=i.get(l);if(d)ci(e,s,d);else{var c=o?o(a,l,s+"",e,t,i):void 0,u=void 0===c;if(u){var m=h(l),f=!m&&jt(l),p=!m&&!f&&Zt(l);c=l,m||f||p?h(a)?c=a:mi(a)?c=_n(a):f?(u=!1,c=vn(l,!0)):p?(u=!1,c=Fn(l,!0)):c=[]:bi(l)||mt(l)?(c=a,mt(a)?c=wi(a):Se(a)&&!Ce(a)||(c=ho(l))):u=!1}u&&(i.set(l,c),n(c,l,r,o,i),i.delete(l)),ci(e,s,c)}}function xi(e,t,s,r,n){e!==t&&hi(t,(function(o,i){if(n||(n=new Zr),Se(o))Si(e,t,i,s,xi,r,n);else{var a=r?r(ji(e,i),o,i+"",e,t,n):void 0;void 0===a&&(a=o),ci(e,i,a)}}),un)}function Ei(e){return e}function Ai(e,t,s){switch(s.length){case 0:return e.call(t);case 1:return e.call(t,s[0]);case 2:return e.call(t,s[0],s[1]);case 3:return e.call(t,s[0],s[1],s[2])}return e.apply(t,s)}var Oi=Math.max;function Ci(e,t,s){return t=Oi(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,o=Oi(r.length-t,0),i=Array(o);++n<o;)i[n]=r[t+n];n=-1;for(var a=Array(t+1);++n<t;)a[n]=r[n];return a[t]=s(i),Ai(e,this,a)}}function Ti(e){return function(){return e}}var $i=tn?function(e,t){return tn(e,"toString",{configurable:!0,enumerable:!1,value:Ti(t),writable:!0})}:Ei,ki=800,Mi=16,Ii=Date.now;function Pi(e){var t=0,s=0;return function(){var r=Ii(),n=Mi-(r-s);if(s=r,n>0){if(++t>=ki)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Ni=Pi($i);function Di(e,t){return Ni(Ci(e,t,Ei),e+"")}function Ri(e,t,s){if(!Se(s))return!1;var r=typeof t;return!!("number"==r?gt(s)&&as(t,s.length):"string"==r&&t in s)&&br(s[t],e)}function zi(e){return Di((function(t,s){var r=-1,n=s.length,o=n>1?s[n-1]:void 0,i=n>2?s[2]:void 0;for(o=e.length>3&&"function"==typeof o?(n--,o):void 0,i&&Ri(s[0],s[1],i)&&(o=n<3?void 0:o,n=1),t=Object(t);++r<n;){var a=s[r];a&&e(t,a,r,o)}return t}))}var Li=zi((function(e,t,s){xi(e,t,s)})),Ui=zi((function(e,t,s,r){xi(e,t,s,r)}));function Bi(){const e={isResolved:!1,isPending:!0,isRejected:!1};let t,s=()=>{},r=()=>{};if("function"==typeof Promise.withResolvers){const{promise:e,resolve:n,reject:o}=Promise.withResolvers();t=e,s=n,r=o}else t=new Promise(((e,t)=>{s=e,r=t}));return Object.assign(t,a(i({},e),{resolve:s,reject:r})),t.then((e=>(t.isResolved=!0,t.isPending=!1,t.isRejected=!1,e)),(e=>{throw t.isResolved=!1,t.isPending=!1,t.isRejected=!0,e})),t}const Fi="Expected a function",qi=Math.max,Hi=Math.min;function Gi(e){if("number"==typeof e)return e;if("string"==typeof e){const t=parseFloat(e);return isNaN(t)?0:t}return 0}function Wi(e){const t=typeof e;return null!=e&&("object"===t||"function"===t)}function Vi(e,t,s={}){let r,n,o,i,a,l,d=0,c=!1,u=s.promise?Bi():null;if("function"!=typeof e)throw new TypeError(Fi);function h(t){const o=r,a=n,l=u;return r=n=void 0,d=t,i=e.apply(a,o),s.promise&&(l.resolve(i),u=Bi()),s.promise?l:i}function m(e){return d=e,a=setTimeout(g,t),s.promise?u:i}function f(e){const s=t-(e-l);return c?Hi(s,o-(e-d)):s}function p(e){const s=e-l;return void 0===l||s>=t||s<0||c&&e-d>=o}function g(){const e=Date.now();if(p(e))return v(e);a=setTimeout(g,f(e))}function v(e){return a=void 0,r?h(e):(r=n=void 0,s.promise?u:i)}function _(){void 0!==a&&clearTimeout(a),d=0,r=l=n=a=void 0}function y(){return void 0===a?i:v(Date.now())}function b(e,t){if(Array.isArray(e)&&Array.isArray(t))return null!=s&&s.dedupeArrays?e.concat(t.filter((t=>-1===e.indexOf(t)))):e.concat(t)}function j(e){var t;return null!==(t=r)&&void 0!==t&&t.length?e.length?null!=s&&s.concatArrays||null!=s&&s.dedupeArrays?Ui(r,e,b):Li(r,e):r:e||[]}function w(){const e=Date.now(),o=p(e);if(r=j(Array.from(arguments)),n=this,l=e,o){if(void 0===a)return m(l);if(c)return clearTimeout(a),a=setTimeout(g,t),h(l)}return void 0===a&&(a=setTimeout(g,t)),s.promise?u:i}return t=Gi(t)||0,Wi(s)&&(c="maxWait"in s,o=c?qi(Gi(s.maxWait)||0,t):o),w.cancel=_,w.flush=y,w}function Ki(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function Ji(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function Yi(e){return"string"!=typeof e&&(console.warn(`${e} used as a key, but it is not a string.`),e=String(e)),e}function Qi(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var s=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)s.append(e[r]);return s.getBlob(t.type)}}var Xi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zi="~~local_forage_type~",ea=/^~~local_forage_type~([^~]+)~/,ta="__lfsc__:",sa=ta.length,ra="arbf",na="blob",oa="si08",ia="ui08",aa="uic8",la="si16",da="si32",ca="ur16",ua="ui32",ha="fl32",ma="fl64",fa=sa+ra.length,pa=Object.prototype.toString;function ga(e){var t,s,r,n,o,i=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var d=new ArrayBuffer(i),c=new Uint8Array(d);for(t=0;t<a;t+=4)s=Xi.indexOf(e[t]),r=Xi.indexOf(e[t+1]),n=Xi.indexOf(e[t+2]),o=Xi.indexOf(e[t+3]),c[l++]=s<<2|r>>4,c[l++]=(15&r)<<4|n>>2,c[l++]=(3&n)<<6|63&o;return d}function va(e){var t,s=new Uint8Array(e),r="";for(t=0;t<s.length;t+=3)r+=Xi[s[t]>>2],r+=Xi[(3&s[t])<<4|s[t+1]>>4],r+=Xi[(15&s[t+1])<<2|s[t+2]>>6],r+=Xi[63&s[t+2]];return s.length%3==2?r=r.substring(0,r.length-1)+"=":s.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function _a(e,t){var s="";if(e&&(s=pa.call(e)),e&&("[object ArrayBuffer]"===s||e.buffer&&"[object ArrayBuffer]"===pa.call(e.buffer))){var r,n=ta;e instanceof ArrayBuffer?(r=e,n+=ra):(r=e.buffer,"[object Int8Array]"===s?n+=oa:"[object Uint8Array]"===s?n+=ia:"[object Uint8ClampedArray]"===s?n+=aa:"[object Int16Array]"===s?n+=la:"[object Uint16Array]"===s?n+=ca:"[object Int32Array]"===s?n+=da:"[object Uint32Array]"===s?n+=ua:"[object Float32Array]"===s?n+=ha:"[object Float64Array]"===s?n+=ma:t(new Error("Failed to get type for BinaryArray"))),t(n+va(r))}else if("[object Blob]"===s){var o=new FileReader;o.onload=function(){var s=Zi+e.type+"~"+va(this.result);t(ta+na+s)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),t(null,s)}}function ya(e){if(e.substring(0,sa)!==ta)return JSON.parse(e);var t,s=e.substring(fa),r=e.substring(sa,fa);if(r===na&&ea.test(s)){var n=s.match(ea);t=n[1],s=s.substring(n[0].length)}var o=ga(s);switch(r){case ra:return o;case na:return Qi([o],{type:t});case oa:return new Int8Array(o);case ia:return new Uint8Array(o);case aa:return new Uint8ClampedArray(o);case la:return new Int16Array(o);case ca:return new Uint16Array(o);case da:return new Int32Array(o);case ua:return new Uint32Array(o);case ha:return new Float32Array(o);case ma:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}}var ba={serialize:_a,deserialize:ya};const ja=ba.serialize,wa=ba.deserialize;function Sa(){try{if(sessionStorage&&"setItem"in sessionStorage)return!0}catch(e){console.log(e)}return!1}function xa(e,t){let s=e.name+"/";return e.storeName!==t.storeName&&(s+=e.storeName+"/"),s}const Ea={serializer:{serialize:ja,deserialize:wa}};function Aa(e){if(Ea.keyPrefix=xa(e,this._defaultConfig),e)for(const t in e)Ea[t]=e[t]}function Oa(e){const t=this.ready().then((function(){const e=Ea.keyPrefix;for(let t=sessionStorage.length-1;t>=0;t--){const s=sessionStorage.key(t);0===s.indexOf(e)&&sessionStorage.removeItem(s)}}));return Ki(t,e),t}function Ca(e,t){e=Yi(e);const s=this.ready().then((function(){let t=sessionStorage.getItem(Ea.keyPrefix+e);return t&&(t=Ea.serializer.deserialize(t)),t}));return Ki(s,t),s}function Ta(e,t){const s=this.ready().then((function(){const t=Ea.keyPrefix,s=t.length,r=sessionStorage.length;let n=1;for(let o=0;o<r;o++){const r=sessionStorage.key(o);if(0!==r.indexOf(t))continue;let i=sessionStorage.getItem(r);if(i&&(i=Ea.serializer.deserialize(i)),i=e(i,r.substring(s),n++),void 0!==i)return i}}));return Ki(s,t),s}function $a(e,t){const s=this.ready().then((function(){let t;try{t=sessionStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(Ea.keyPrefix.length)),t}));return Ki(s,t),s}function ka(e){const t=this.ready().then((function(){const e=sessionStorage.length,t=[];for(let s=0;s<e;s++){const e=sessionStorage.key(s);0===e.indexOf(Ea.keyPrefix)&&t.push(e.substring(Ea.keyPrefix.length))}return t}));return Ki(t,e),t}function Ma(e){const t=this.keys().then((function(e){return e.length}));return Ki(t,e),t}function Ia(e,t){e=Yi(e);const s=this.ready().then((function(){sessionStorage.removeItem(Ea.keyPrefix+e)}));return Ki(s,t),s}function Pa(e,t,s){return n((function*(){var r;e=Yi(e),yield this.ready();const n=t=null!==(r=t)&&void 0!==r?r:null;return Ea.serializer.serialize(t,((t,r)=>{if(r)throw r;try{sessionStorage.setItem(Ea.keyPrefix+e,t),Ki(Promise.resolve(n),s)}catch(e){if("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)throw console.error("Your sesionStorage capacity is used up."),e;throw e}})),t})).call(this)}function Na(e,t){if(t=Ji.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){const t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}const s=this;let r;return r=e.name?new Promise((function(t){e.storeName?t(xa(e,s._defaultConfig)):t(`${e.name}/`)})).then((function(e){for(let t=sessionStorage.length-1;t>=0;t--){const s=sessionStorage.key(t);0===s.indexOf(e)&&sessionStorage.removeItem(s)}})):Promise.reject(new Error("Invalid arguments")),Ki(r,t),r}const Da={_driver:"sessionStorageWrapper",_initStorage:Aa,_support:Sa(),iterate:Ta,getItem:Ca,setItem:Pa,removeItem:Ia,clear:Oa,length:Ma,key:$a,keys:ka,dropInstance:Na};var Ra,za={exports:{}};function La(){return Ra||(Ra=1,function(e,t){!function(e,s){s(t,li())}(0,(function(e,t){function s(e){return s.result?s.result:e&&"function"==typeof e.getSerializer?(s.result=e.getSerializer(),s.result):Promise.reject(new Error("localforage.getSerializer() was not available! localforage v1.4+ is required!"))}function r(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function n(e,t,s,r){function n(e,t){var s=e||t;return e&&"function"==typeof e||"string"!=typeof s||(e=function(e){return e[s]}),e}var o=[];if("[object Array]"===Object.prototype.toString.call(e)){t=n(t,"key"),s=n(s,"value");for(var i=0,a=e.length;i<a;i++){var l=e[i];o.push(r(t(l),s(l)))}}else for(var d in e)e.hasOwnProperty(d)&&o.push(r(d,e[d]));return o}function o(e,t,s,o){var i=this,a=i.ready().then((function(){return new Promise((function(r,o){var a,l=i._dbInfo,d=l.db.transaction(l.storeName,"readwrite"),c=d.objectStore(l.storeName);function u(e){var t=e.target||this;a=t.error||t.transaction.error,o(a)}d.oncomplete=function(){r(e)},d.onabort=d.onerror=function(e){o(a||e.target)},n(e,t,s,(function(e,t){null===t&&(t=void 0),c.put(t,e).onerror=u}))}))}));return r(a,o),a}function i(e,t,o,i){var a=this,l=new Promise((function(r,i){a.ready().then((function(){return s(a)})).then((function(s){var l=a._dbInfo;l.db.transaction((function(a){var d="INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",c=n(e,t,o,(function(e,t){return new Promise((function(r,n){s.serialize(t,(function(t,s){s?n(s):a.executeSql(d,[e,t],(function(){r()}),(function(e,t){n(t)}))}))}))}));Promise.all(c).then((function(){r(e)}),i)}),(function(e){i(e)}))})).catch(i)}));return r(l,i),l}function a(e,t,s,o){var i=this,a=n(e,t,s,(function(e,t){return i.setItem(e,t)})),l=Promise.all(a);return r(l,o),l}function l(e,t,s,r){var n=this,l=n.driver();return l===n.INDEXEDDB?o.call(n,e,t,s,r):l===n.WEBSQL?i.call(n,e,t,s,r):a.call(n,e,t,s,r)}function d(e){var t=Object.getPrototypeOf(e);t&&(t.setItems=l,t.setItems.indexedDB=function(){return o.apply(this,arguments)},t.setItems.websql=function(){return i.apply(this,arguments)},t.setItems.generic=function(){return a.apply(this,arguments)})}var c=d(t="default"in t?t.default:t);e.setItemsGeneric=a,e.localforageSetItems=l,e.extendPrototype=d,e.extendPrototypeResult=c,Object.defineProperty(e,"__esModule",{value:!0})}))}(0,za.exports)),za.exports}za.exports;var Ua=La();function Ba(e){return Ba.result?Ba.result:e&&"function"==typeof e.getSerializer?(Ba.result=e.getSerializer(),Ba.result):Promise.reject(new Error("localforage.getSerializer() was not available! localforage v1.4+ is required!"))}function Fa(e,t){return t&&e.then((function(e){t(null,e)}),(function(e){t(e)})),e}function qa(e,t){var s=this.getItem(e).then((function(t){return{key:e,value:t}}));return Fa(s,t),s}function Ha(e){var t=this,s=new Promise((function(s,r){for(var n=[],o=0,i=e.length;o<i;o++)n.push(qa.call(t,e[o]));Promise.all(n).then((function(e){for(var t={},r=0,n=e.length;r<n;r++){var o=e[r];t[o.key]=o.value}s(t)})).catch(r)}));return s}function Ga(){var e={};return this.iterate((function(t,s){e[s]=t})).then((function(){return e}))}function Wa(){return"undefined"!=typeof IDBKeyRange?IDBKeyRange:"undefined"!=typeof webkitIDBKeyRange?webkitIDBKeyRange:"undefined"!=typeof mozIDBKeyRange?mozIDBKeyRange:void 0}var Va=Wa();function Ka(e){e=e.slice();var t=this;function s(e,t){return e<t?-1:e>t?1:0}var r=new Promise((function(r,n){t.ready().then((function(){var o,i=t._dbInfo,a=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),l=e.sort(s),d=Va.bound(e[0],e[e.length-1],!1,!1);if("getAll"in a)(o=a.getAll(d)).onsuccess=function(){var e=o.result;void 0===e&&(e=null),r(e)};else{o=a.openCursor(d);var c={},u=0;o.onsuccess=function(){var e=o.result;if(e){for(var t=e.key;t>l[u];)if(++u===l.length)return void r(c);if(t===l[u]){var s=e.value;void 0===s&&(s=null),c[t]=s,e.continue()}else e.continue(l[u])}else r(c)}}o.onerror=function(){n(o.error)}})).catch(n)}));return r}function Ja(e){var t=this,s=new Promise((function(s,r){t.ready().then((function(){return Ba(t)})).then((function(n){var o=t._dbInfo;o.db.transaction((function(t){for(var i=new Array(e.length),a=0,l=e.length;a<l;a++)i[a]="?";t.executeSql("SELECT * FROM "+o.storeName+" WHERE (key IN ("+i.join(",")+"))",e,(function(e,t){for(var r={},o=t.rows,i=0,a=o.length;i<a;i++){var l=o.item(i),d=l.value;d&&(d=n.deserialize(d)),r[l.key]=d}s(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return s}function Ya(e,t){var s,r=this;if(arguments.length&&null!==e){var n=r.driver();s=n===r.INDEXEDDB?Ka.apply(r,arguments):n===r.WEBSQL?Ja.apply(r,arguments):Ha.apply(r,arguments)}else s=Ga.apply(r);return Fa(s,t),s}function Qa(e){var t=Object.getPrototypeOf(e);t&&(t.getItems=Ya,t.getItems.indexedDB=function(){return Ka.apply(this,arguments)},t.getItems.websql=function(){return Ja.apply(this,arguments)},t.getItems.generic=function(){return Ha.apply(this,arguments)})}Qa(di);var Xa=Object.prototype.hasOwnProperty;function Za(e,t){return null!=e&&Xa.call(e,t)}var el=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tl=/^\w*$/;function sl(e,t){if(h(e))return!1;var s=typeof e;return!("number"!=s&&"symbol"!=s&&"boolean"!=s&&null!=e&&!A(e))||tl.test(e)||!el.test(e)||null!=t&&e in Object(t)}var rl="Expected a function";function nl(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(rl);var s=function(){var r=arguments,n=t?t.apply(this,r):r[0],o=s.cache;if(o.has(n))return o.get(n);var i=e.apply(this,r);return s.cache=o.set(n,i)||o,i};return s.cache=new(nl.Cache||Yr),s}nl.Cache=Yr;var ol=500;function il(e){var t=nl(e,(function(e){return s.size===ol&&s.clear(),e})),s=t.cache;return t}var al=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ll=/\\(\\)?/g,dl=il((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(al,(function(e,s,r,n){t.push(r?n.replace(ll,"$1"):s||e)})),t}));function cl(e,t){return h(e)?e:sl(e,t)?[e]:dl($(e))}function ul(e){if("string"==typeof e||A(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function hl(e,t,s){for(var r=-1,n=(t=cl(t,e)).length,o=!1;++r<n;){var i=ul(t[r]);if(!(o=null!=e&&s(e,i)))break;e=e[i]}return o||++r!=n?o:!!(n=null==e?0:e.length)&&pt(n)&&as(i,n)&&(h(e)||mt(e))}function ml(e,t){return null!=e&&hl(e,t,Za)}function fl(e,t,s){var r=-1,n=(t=cl(t,e)).length;for(n||(n=1,e=void 0);++r<n;){var o=null==e?void 0:e[ul(t[r])];void 0===o&&(r=n,o=s),e=Ce(o)?o.call(e):o}return e}function pl(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function gl(){return pl()+pl()+"-"+pl()+"-"+pl()+"-"+pl()+"-"+pl()+pl()+pl()}function vl(){const e={isResolved:!1,isPending:!0,isRejected:!1,resolve:null,reject:null},t=new Promise(((t,s)=>{e.resolve=t,e.reject=s}));return Object.assign(t,e),t.then((function(e){return t.isResolved=!0,t.isPending=!1,t.isRejected=!1,e}),(function(e){throw t.isResolved=!1,t.isPending=!1,t.isRejected=!0,e})),t}function _l(){throw new Error('A "url" property or function must be specified')}function yl(e,t){const s=t.error;t.error=function(r){s&&s.call(t.context,e,r,t),e.trigger("error",e,r,t)}}const bl={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};function jl(e){const t=fl(e,"browserStorage")||fl(e.collection,"browserStorage");return t?t.sync():wl}function wl(e,t,s={}){let r=s.data;null!=r||!t||"create"!==e&&"update"!==e&&"patch"!==e||(r=s.attrs||t.toJSON());const n={method:bl[e],body:r?JSON.stringify(r):"",success:s.success,error:s.error},o=s.url||fl(t,"url")||_l(),l=s.xhr=fetch(o,n);return t.trigger("request",t,l,a(i({},n),{xhr:l})),l}const Sl=nr;di.defineDriver(_r),Ua.extendPrototype(di),Qa(di);class xl{initStore(e,t){return n((function*(){if("session"===e)yield di.setDriver(Da._driver);else if("local"===e)yield di.config({driver:di.LOCALSTORAGE});else if("in_memory"===e)yield di.config({driver:Sl});else if("indexed"!==e)throw new Error("Skeletor.storage: No storage type was specified");this.store=di,t&&(this.store.debouncedSetItems=Vi((e=>this.store.setItems(e)),50,{promise:!0}))})).call(this)}flush(){var e;return null===(e=this.store.debouncedSetItems)||void 0===e?void 0:e.flush()}clear(){return n((function*(){yield this.store.removeItem(this.name).catch((e=>console.error(e)));const e=new RegExp(`^${this.name}-`),t=(yield this.store.keys()).filter((t=>e.test(t)));yield Promise.all(t.map((e=>this.store.removeItem(e).catch((e=>console.error(e))))))})).call(this)}sync(){const e=this;function t(t,s,r){return n((function*(){let n,o,i,a;const l=s.collection;["patch","update"].includes(t)&&(a=ei(s.attributes)),yield e.storeInitialized;try{const o=s.attributes;switch(t){case"read":n=void 0!==s.id?yield e.find(s):yield e.findAll();break;case"create":n=yield e.create(s,r);break;case"patch":case"update":r.wait&&(s.attributes=a),i=e.update(s),r.wait&&(s.attributes=o),n=yield i;break;case"delete":n=yield e.destroy(s,l)}}catch(t){o=22===t.code&&0===e.getStorageSize()?"Private browsing is unsupported":t.message}if(n){if(r&&r.success){const e="read"===t?n:null;r.success(e,r)}}else o=o||"Record Not Found",r&&r.error&&r.error(o)}))()}return t.__name__="localSync",t}removeCollectionReference(e,t){if(!t)return;const s=t.filter((t=>t.id!==e.id)).map((e=>this.getItemName(e.id)));return this.store.setItem(this.name,s)}addCollectionReference(e,t){if(!t)return;const s=t.map((e=>this.getItemName(e.id))),r=this.getItemName(e.id);return s.includes(r)||s.push(r),this.store.setItem(this.name,s)}getCollectionReferenceData(e){if(!e.collection)return{};const t=e.collection.map((e=>this.getItemName(e.id))),s=this.getItemName(e.id);t.includes(s)||t.push(s);const r={};return r[this.name]=t,r}save(e){return n((function*(){if(this.store.setItems){const t={};return t[this.getItemName(e.id)]=e.toJSON(),Object.assign(t,this.getCollectionReferenceData(e)),this.store.debouncedSetItems?this.store.debouncedSetItems(t):this.store.setItems(t)}{const t=this.getItemName(e.id),s=yield this.store.setItem(t,e.toJSON());return yield this.addCollectionReference(e,e.collection),s}})).call(this)}create(e,t){return e.id||(e.id=gl(),e.set(e.idAttribute,e.id,t)),this.save(e)}update(e){return this.save(e)}find(e){return this.store.getItem(this.getItemName(e.id))}findAll(){return n((function*(){const e=yield this.store.getItem(this.name);if(null!=e&&e.length){const t=yield this.store.getItems(e);return Object.values(t)}return[]})).call(this)}destroy(e,t){return n((function*(){return yield this.flush(),yield this.store.removeItem(this.getItemName(e.id)),yield this.removeCollectionReference(e,t),e})).call(this)}getStorageSize(){return this.store.length}getItemName(e){return this.name+"-"+e}constructor(e,t,s=!1){if("local"===t&&!window.localStorage)throw new Error("Skeletor.storage: Environment does not support localStorage.");if("session"===t&&!window.sessionStorage)throw new Error("Skeletor.storage: Environment does not support sessionStorage.");si(t)?this.storeInitialized=this.initStore(t,s):(this.store=t,s&&(this.store.debouncedSetItems=Vi((e=>this.store.setItems(e)),50,{promise:!0})),this.storeInitialized=Promise.resolve()),this.name=e}}xl.sessionStorageInitialized=di.defineDriver(Da),xl.localForage=di;var El=4;function Al(e){return Qo(e,El)}var Ol=Object.prototype,Cl=Ol.hasOwnProperty,Tl=Di((function(e,t){e=Object(e);var s=-1,r=t.length,n=r>2?t[2]:void 0;for(n&&Ri(t[0],t[1],n)&&(r=1);++s<r;)for(var o=t[s],i=un(o),a=-1,l=i.length;++a<l;){var d=i[a],c=e[d];(void 0===c||br(c,Ol[d])&&!Cl.call(e,d))&&(e[d]=o[d])}return e})),$l="Expected a function";function kl(e,t,s){if("function"!=typeof e)throw new TypeError($l);return setTimeout((function(){e.apply(void 0,s)}),t)}var Ml=Di((function(e,t){return kl(e,1,t)}));function Il(e,t){return e&&hi(e,t,cs)}function Pl(e,t,s,r){return Il(e,(function(e,n,o){t(r,s(e),n,o)})),r}function Nl(e,t){return function(s,r){return Pl(s,e,t(r),{})}}var Dl=Object.prototype.toString,Rl=Nl((function(e,t,s){null!=t&&"function"!=typeof t.toString&&(t=Dl.call(t)),e[t]=s}),Ti(Ei)),zl="__lodash_hash_undefined__";function Ll(e){return this.__data__.set(e,zl),this}function Ul(e){return this.__data__.has(e)}function Bl(e){var t=-1,s=null==e?0:e.length;for(this.__data__=new Yr;++t<s;)this.add(e[t])}function Fl(e,t){for(var s=-1,r=null==e?0:e.length;++s<r;)if(t(e[s],s,e))return!0;return!1}function ql(e,t){return e.has(t)}Bl.prototype.add=Bl.prototype.push=Ll,Bl.prototype.has=Ul;var Hl=1,Gl=2;function Wl(e,t,s,r,n,o){var i=s&Hl,a=e.length,l=t.length;if(a!=l&&!(i&&l>a))return!1;var d=o.get(e),c=o.get(t);if(d&&c)return d==t&&c==e;var u=-1,h=!0,m=s&Gl?new Bl:void 0;for(o.set(e,t),o.set(t,e);++u<a;){var f=e[u],p=t[u];if(r)var g=i?r(p,f,u,t,e,o):r(f,p,u,e,t,o);if(void 0!==g){if(g)continue;h=!1;break}if(m){if(!Fl(t,(function(e,t){if(!ql(m,t)&&(f===e||n(f,e,s,r,o)))return m.push(t)}))){h=!1;break}}else if(f!==p&&!n(f,p,s,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Vl(e){var t=-1,s=Array(e.size);return e.forEach((function(e,r){s[++t]=[r,e]})),s}function Kl(e){var t=-1,s=Array(e.size);return e.forEach((function(e){s[++t]=e})),s}var Jl=1,Yl=2,Ql="[object Boolean]",Xl="[object Date]",Zl="[object Error]",ed="[object Map]",td="[object Number]",sd="[object RegExp]",rd="[object Set]",nd="[object String]",od="[object Symbol]",id="[object ArrayBuffer]",ad="[object DataView]",ld=c?c.prototype:void 0,dd=ld?ld.valueOf:void 0;function cd(e,t,s,r,n,o,i){switch(s){case ad:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case id:return!(e.byteLength!=t.byteLength||!o(new Pn(e),new Pn(t)));case Ql:case Xl:case td:return br(+e,+t);case Zl:return e.name==t.name&&e.message==t.message;case sd:case nd:return e==t+"";case ed:var a=Vl;case rd:var l=r&Jl;if(a||(a=Kl),e.size!=t.size&&!l)return!1;var d=i.get(e);if(d)return d==t;r|=Yl,i.set(e,t);var c=Wl(a(e),a(t),r,n,o,i);return i.delete(e),c;case od:if(dd)return dd.call(e)==dd.call(t)}return!1}var ud=1,hd=Object.prototype.hasOwnProperty;function md(e,t,s,r,n,o){var i=s&ud,a=$n(e),l=a.length;if(l!=$n(t).length&&!i)return!1;for(var d=l;d--;){var c=a[d];if(!(i?c in t:hd.call(t,c)))return!1}var u=o.get(e),h=o.get(t);if(u&&h)return u==t&&h==e;var m=!0;o.set(e,t),o.set(t,e);for(var f=i;++d<l;){var p=e[c=a[d]],g=t[c];if(r)var v=i?r(g,p,c,t,e,o):r(p,g,c,e,t,o);if(!(void 0===v?p===g||n(p,g,s,r,o):v)){m=!1;break}f||(f="constructor"==c)}if(m&&!f){var _=e.constructor,y=t.constructor;_==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y||(m=!1)}return o.delete(e),o.delete(t),m}var fd=1,pd="[object Arguments]",gd="[object Array]",vd="[object Object]",_d=Object.prototype.hasOwnProperty;function yd(e,t,s,r,n,o){var i=h(e),a=h(t),l=i?gd:at(e),d=a?gd:at(t),c=(l=l==pd?vd:l)==vd,u=(d=d==pd?vd:d)==vd,m=l==d;if(m&&jt(e)){if(!jt(t))return!1;i=!0,c=!1}if(m&&!c)return o||(o=new Zr),i||Zt(e)?Wl(e,t,s,r,n,o):cd(e,t,l,s,r,n,o);if(!(s&fd)){var f=c&&_d.call(e,"__wrapped__"),p=u&&_d.call(t,"__wrapped__");if(f||p){var g=f?e.value():e,v=p?t.value():t;return o||(o=new Zr),n(g,v,s,r,o)}}return!!m&&(o||(o=new Zr),md(e,t,s,r,n,o))}function bd(e,t,s,r,n){return e===t||(null==e||null==t||!x(e)&&!x(t)?e!=e&&t!=t:yd(e,t,s,r,bd,n))}function jd(e,t){return bd(e,t)}var wd=1,Sd=2;function xd(e,t,s,r){var n=s.length,o=n;if(null==e)return!o;for(e=Object(e);n--;){var i=s[n];if(i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++n<o;){var a=(i=s[n])[0],l=e[a],d=i[1];if(i[2]){if(void 0===l&&!(a in e))return!1}else{var c,u=new Zr;if(!(void 0===c?bd(d,l,wd|Sd,r,u):c))return!1}}return!0}function Ed(e){return e==e&&!Se(e)}function Ad(e){for(var t=cs(e),s=t.length;s--;){var r=t[s],n=e[r];t[s]=[r,n,Ed(n)]}return t}function Od(e,t){return function(s){return null!=s&&s[e]===t&&(void 0!==t||e in Object(s))}}function Cd(e){var t=Ad(e);return 1==t.length&&t[0][2]?Od(t[0][0],t[0][1]):function(s){return s===e||xd(s,e,t)}}function Td(e,t){for(var s=0,r=(t=cl(t,e)).length;null!=e&&s<r;)e=e[ul(t[s++])];return s&&s==r?e:void 0}function $d(e,t,s){var r=null==e?void 0:Td(e,t);return void 0===r?s:r}function kd(e,t){return null!=e&&t in Object(e)}function Md(e,t){return null!=e&&hl(e,t,kd)}var Id=1,Pd=2;function Nd(e,t){return sl(e)&&Ed(t)?Od(ul(e),t):function(s){var r=$d(s,e);return void 0===r&&r===t?Md(s,e):bd(t,r,Id|Pd)}}function Dd(e){return function(t){return null==t?void 0:t[e]}}function Rd(e){return function(t){return Td(t,e)}}function zd(e){return sl(e)?Dd(ul(e)):Rd(e)}function Ld(e){return"function"==typeof e?e:null==e?Ei:"object"==typeof e?h(e)?Nd(e[0],e[1]):Cd(e):zd(e)}var Ud=1;function Bd(e){return Ld("function"==typeof e?e:Qo(e,Ud))}function Fd(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function qd(e,t,s){var r=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(s=s>n?n:s)<0&&(s+=n),n=t>s?0:s-t>>>0,t>>>=0;for(var o=Array(n);++r<n;)o[r]=e[r+t];return o}function Hd(e,t){return t.length<2?e:Td(e,qd(t,0,-1))}function Gd(e,t){return null==(e=Hd(e,t=cl(t,e)))||delete e[ul(Fd(t))]}function Wd(e){return bi(e)?void 0:e}var Vd=c?c.isConcatSpreadable:void 0;function Kd(e){return h(e)||mt(e)||!!(Vd&&e&&e[Vd])}function Jd(e,t,s,r,n){var o=-1,i=e.length;for(s||(s=Kd),n||(n=[]);++o<i;){var a=e[o];s(a)?En(n,a):n[n.length]=a}return n}function Yd(e){return null!=e&&e.length?Jd(e):[]}function Qd(e){return Ni(Ci(e,void 0,Yd),e+"")}var Xd=1,Zd=2,ec=4,tc=Qd((function(e,t){var s={};if(null==e)return s;var r=!1;t=u(t,(function(t){return t=cl(t,e),r||(r=t.length>1),t})),on(e,kn(e),s),r&&(s=Qo(s,Xd|Zd|ec,Wd));for(var n=t.length;n--;)Gd(s,t[n]);return s}));function sc(e,t,s,r){if(!Se(e))return e;for(var n=-1,o=(t=cl(t,e)).length,i=o-1,a=e;null!=a&&++n<o;){var l=ul(t[n]),d=s;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(n!=i){var c=a[l];void 0===(d=void 0)&&(d=Se(c)?c:as(t[n+1])?[]:{})}nn(a,l,d),a=a[l]}return e}function rc(e,t,s){for(var r=-1,n=t.length,o={};++r<n;){var i=t[r],a=Td(e,i);s(a,i)&&sc(o,cl(i,e),a)}return o}function nc(e,t){return rc(e,t,(function(t,s){return Md(e,s)}))}var oc=Qd((function(e,t){return null==e?{}:nc(e,t)}));class ic extends(zs(Object)){set browserStorage(e){this._browserStorage=e}get browserStorage(){return this._browserStorage}get idAttribute(){return"id"}get cidPrefix(){return"c"}preinitialize(){}initialize(e,t){}validate(e,t){return""}toJSON(){return Al(this.attributes)}sync(e,t,s){return jl(t)(e,t,s)}get(e){return this.attributes[e]}keys(){return Object.keys(this.attributes)}values(){return Object.values(this.attributes)}pairs(){return this.entries()}entries(){return Object.entries(this.attributes)}invert(){return Rl(this.attributes)}pick(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),oc(this.attributes,e)}omit(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),tc(this.attributes,e)}isEmpty(){return rs(this.attributes)}has(e){return null!=this.get(e)}matches(e){return!!Bd(e)(this.attributes)}set(e,t,s){if(null==e)return this;let r;if("object"==typeof e?(r=e,s=t):(r={})[e]=t,s||(s={}),!this._validate(r,s))return!1;const n=s.unset,o=s.silent,i=[],a=this._changing;this._changing=!0,a||(this._previousAttributes=Al(this.attributes),this.changed={});const l=this.attributes,d=this.changed,c=this._previousAttributes;for(const e in r)t=r[e],jd(l[e],t)||i.push(e),jd(c[e],t)?delete d[e]:d[e]=t,n?delete l[e]:l[e]=t;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!o){i.length&&(this._pending=s);for(let e=0;e<i.length;e++)this.trigger("change:"+i[e],this,l[i[e]],s)}if(a)return this;if(!o)for(;this._pending;)s=this._pending,this._pending=!1,this.trigger("change",this,s);return this._pending=!1,this._changing=!1,this}unset(e,t){return this.set(e,void 0,Object.assign({},t,{unset:!0}))}clear(e){const t={};for(const e in this.attributes)t[e]=void 0;return this.set(t,Object.assign({},e,{unset:!0}))}hasChanged(e){return null==e?!rs(this.changed):ml(this.changed,e)}changedAttributes(e){if(!e)return!!this.hasChanged()&&Al(this.changed);const t=this._changing?this._previousAttributes:this.attributes,s={};let r;for(const n in e){const o=e[n];jd(t[n],o)||(s[n]=o,r=!0)}return!!r&&s}previous(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null}previousAttributes(){return Al(this._previousAttributes)}fetch(e={}){const t=(e=Object.assign({parse:!0},e)).success;return e.success=s=>{const r=e.parse?this.parse(s,e):s;if(!this.set(r,e))return!1;t&&t.call(e.context,this,s,e),this.trigger("sync",this,s,e)},yl(this,e),this.sync("read",this,e)}save(e,t,s){let r;null==e||"object"==typeof e?(r=e,s=t):(r={})[e]=t;const n=(s=Object.assign({validate:!0,parse:!0},s)).wait,o=s.promise,i=o&&vl();if(r&&!n){if(!this.set(r,s))return!1}else if(!this._validate(r,s))return!1;const a=s.success,l=s.error,d=this.attributes;s.success=e=>{this.attributes=d;let t=s.parse?this.parse(e,s):e;if(n&&(t=Object.assign({},r,t)),t&&!this.set(t,s))return!1;a&&a.call(s.context,this,e,s),this.trigger("sync",this,e,s),o&&i.resolve()},s.error=(e,t,s)=>{l&&l.call(s.context,e,t,s),o&&i.reject(t)},yl(this,s),r&&n&&(this.attributes=Object.assign({},d,r));const c=this.isNew()?"create":s.patch?"patch":"update";"patch"!==c||s.attrs||(s.attrs=r);const u=this.sync(c,this,s);return this.attributes=d,o?i:u}destroy(e){const t=(e=e?Al(e):{}).success,s=e.wait,r=()=>{this.stopListening(),this.trigger("destroy",this,this.collection,e)};e.success=n=>{s&&r(),t&&t.call(e.context,this,n,e),this.isNew()||this.trigger("sync",this,n,e)};let n=!1;return this.isNew()?Ml(e.success):(yl(this,e),n=this.sync("delete",this,e)),s||r(),n}url(){const e=fl(this,"urlRoot")||fl(this.collection,"url")||_l();if(this.isNew())return e;const t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)}parse(e,t){return e}isNew(){return!this.has(this.idAttribute)}isValid(e){return this._validate({},Object.assign({},e,{validate:!0}))}_validate(e,t){if(!t.validate||!this.validate)return!0;e=Object.assign({},this.attributes,e);const s=this.validationError=this.validate(e,t)||null;return!s||(this.trigger("invalid",this,s,Object.assign(t,{validationError:s})),!1)}constructor(e,t){super();let s=e||{};t||(t={}),this.preinitialize.apply(this,arguments),this.cid=M(this.cidPrefix),this.attributes={},this.validationError=null,t.collection&&(this.collection=t.collection),t.parse&&(s=this.parse(s,t)||{});const r=fl(this,"defaults");s=Tl(Object.assign({},r,s),r),this.set(s,t),this.initialize.apply(this,arguments),this.changed={}}}function ac(e,t,s,r){for(var n=-1,o=null==e?0:e.length;++n<o;){var i=e[n];t(r,i,s(i),e)}return r}function lc(e,t){return function(t,s){if(null==t)return t;if(!gt(t))return e(t,s);for(var r=t.length,n=-1,o=Object(t);++n<r&&!1!==s(o[n],n,o););return t}}var dc=lc(Il);function cc(e,t,s,r){return dc(e,(function(e,n,o){t(r,e,s(e),o)})),r}function uc(e,t){return function(t,s){var r={};return(h(t)?ac:cc)(t,e,Ld(s),r)}}var hc=Object.prototype.hasOwnProperty,mc=uc((function(e,t,s){hc.call(e,s)?++e[s]:sn(e,s,1)})),fc=Object.prototype.hasOwnProperty,pc=uc((function(e,t,s){fc.call(e,s)?e[s].push(t):sn(e,s,[t])})),gc=uc((function(e,t,s){sn(e,s,t)}));function vc(e,t){var s=-1,r=gt(e)?Array(e.length):[];return dc(e,(function(e,n,o){r[++s]=t(e,n,o)})),r}function _c(e,t){var s=e.length;for(e.sort(t);s--;)e[s]=e[s].value;return e}function yc(e,t){if(e!==t){var s=void 0!==e,r=null===e,n=e==e,o=A(e),i=void 0!==t,a=null===t,l=t==t,d=A(t);if(!a&&!d&&!o&&e>t||o&&i&&l&&!a&&!d||r&&i&&l||!s&&l||!n)return 1;if(!r&&!o&&!d&&e<t||d&&s&&n&&!r&&!o||a&&s&&n||!i&&n||!l)return-1}return 0}function bc(e,t,s){for(var r=-1,n=e.criteria,o=t.criteria,i=n.length,a=s.length;++r<i;){var l=yc(n[r],o[r]);if(l)return r>=a?l:l*("desc"==s[r]?-1:1)}return e.index-t.index}function jc(e,t,s){t=t.length?u(t,(function(e){return h(e)?function(t){return Td(t,1===e.length?e[0]:e)}:e})):[Ei];var r=-1;t=u(t,Vt(Ld));var n=vc(e,(function(e,s,n){var o=u(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return _c(n,(function(e,t){return bc(e,t,s)}))}var wc=Di((function(e,t){if(null==e)return[];var s=t.length;return s>1&&Ri(e,t[0],t[1])?t=[]:s>2&&Ri(t[0],t[1],t[2])&&(t=[t[0]]),jc(e,Jd(t),[])}));const Sc=Array.prototype.slice,xc={add:!0,remove:!0,merge:!0},Ec={add:!0,remove:!1};class Ac extends(zs(Object)){set browserStorage(e){this._browserStorage=e}get browserStorage(){return this._browserStorage}get model(){var e;return null!==(e=this._model)&&void 0!==e?e:ic}set model(e){this._model=e}get length(){return this.models.length}preinitialize(){}initialize(){}toJSON(e){return this.map((function(t){return t.toJSON(e)}))}sync(e,t,s){return jl(this)(e,t,s)}add(e,t){return this.set(e,Object.assign({merge:!1},t,Ec))}remove(e,t){t=Object.assign({},t);const s=!Array.isArray(e),r=s?[e]:e.slice(),n=this._removeModels(r,t);return!t.silent&&n.length&&(t.changes={added:[],merged:[],removed:n},this.trigger("update",this,t)),s?n[0]:n}set(e,t){if(null==e)return;(t=Object.assign({},xc,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);const s=!Array.isArray(e);e=s?[e]:e.slice();let r=t.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);const n=[],o=[],i=[],a=[],l={},d=t.add,c=t.merge,u=t.remove;let h=!1;const m=this.comparator&&null==r&&!1!==t.sort,f=si(this.comparator)?this.comparator:null;let p,g;for(g=0;g<e.length;g++){p=e[g];const s=this.get(p);if(s){if(c&&p!==s){let e=this._isModel(p)?p.attributes:p;t.parse&&(e=s.parse(e,t)),s.set(e,t),i.push(s),m&&!h&&(h=s.hasChanged(f))}l[s.cid]||(l[s.cid]=!0,n.push(s)),e[g]=s}else d&&(p=e[g]=this._prepareModel(p,t),p&&(o.push(p),this._addReference(p,t),l[p.cid]=!0,n.push(p)))}if(u){for(g=0;g<this.length;g++)p=this.models[g],l[p.cid]||a.push(p);a.length&&this._removeModels(a,t)}let v=!1;const _=!m&&d&&u;if(n.length&&_)v=this.length!==n.length||this.models.some(((e,t)=>e!==n[t])),this.models.length=0,this.models.splice(0,0,...n);else if(o.length){m&&(h=!0);let e=null==r?this.length:r;e=Math.min(Math.max(e,0),this.models.length),this.models.splice(e,0,...o)}if(h&&this.sort({silent:!0}),!t.silent){for(g=0;g<o.length;g++)null!=r&&(t.index=r+g),p=o[g],p.trigger("add",p,this,t);(h||v)&&this.trigger("sort",this,t),(o.length||a.length||i.length)&&(t.changes={added:o,removed:a,merged:i},this.trigger("update",this,t))}return s?e[0]:e}clearStore(){return n((function*(e={},t=e=>e){yield Promise.all(this.models.filter(t).map((t=>new Promise((s=>{t.destroy(Object.assign(e,{success:s,error:(e,t)=>{console.error(t),s()}}))}))))),yield this.browserStorage.clear(),this.reset()})).apply(this,arguments)}reset(e,t){t=t?Al(t):{};for(let e=0;e<this.models.length;e++)this._removeReference(this.models[e],t);return t.previousModels=this.models,this._reset(),e=this.add(e,Object.assign({silent:!0},t)),t.silent||this.trigger("reset",this,t),e}push(e,t){return this.add(e,Object.assign({at:this.length},t))}pop(e){const t=this.at(this.length-1);return this.remove(t,e)}unshift(e,t){return this.add(e,Object.assign({at:0},t))}shift(e){const t=this.at(0);return this.remove(t,e)}slice(){return Sc.apply(this.models,arguments)}filter(e,t){return this.models.filter(Ce(e)?e:t=>t.matches(e),t)}every(e){return Ce(e)?this.models.map((e=>e.attributes)).every(e):this.models.every((t=>t.matches(e)))}difference(e){return this.models.filter((t=>!e.includes(t)))}max(){return Math.max.apply(Math,this.models)}min(){return Math.min.apply(Math,this.models)}drop(e=1){return this.models.slice(e)}some(e){return Ce(e)?this.models.map((e=>e.attributes)).some(e):this.models.some((t=>t.matches(e)))}sortBy(e){return wc(this.models,Ce(e)?e:t=>si(e)?t.get(e):t.matches(e))}isEmpty(){return!this.models.length}keyBy(e){return gc(this.models,e)}each(e,t){return this.forEach(e,t)}forEach(e,t){return this.models.forEach(e,t)}includes(e){return this.models.includes(e)}size(){return this.models.length}countBy(e){return mc(this.models,Ce(e)?e:t=>si(e)?t.get(e):t.matches(e))}groupBy(e){return pc(this.models,Ce(e)?e:t=>si(e)?t.get(e):t.matches(e))}indexOf(e){return this.models.indexOf(e)}findLastIndex(e,t){return this.models.findLastIndex(Ce(e)?e:t=>si(e)?t.get(e):t.matches(e),t)}lastIndexOf(e){return this.models.lastIndexOf(e)}findIndex(e){return this.models.findIndex(Ce(e)?e:t=>si(e)?t.get(e):t.matches(e))}last(){const e=null==this.models?0:this.models.length;return e?this.models[e-1]:void 0}head(){return this.models[0]}first(){return this.head()}map(e,t){return this.models.map(Ce(e)?e:t=>si(e)?t.get(e):t.matches(e),t)}reduce(e,t){return this.models.reduce(e,t||this.models[0])}reduceRight(e,t){return this.models.reduceRight(e,t||this.models[0])}toArray(){return Array.from(this.models)}get(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(this._isModel(e)?e.attributes:e)]||e.cid&&this._byId[e.cid]}has(e){return null!=this.get(e)}at(e){return e<0&&(e+=this.length),this.models[e]}where(e,t){return this[t?"find":"filter"](e)}findWhere(e){return this.where(e,!0)}find(e,t){const s=Ce(e)?e:t=>t.matches(e);return this.models.find(s,t)}sort(e){let t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});const s=t.length;return Ce(t)&&(t=t.bind(this)),1===s||si(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this}pluck(e){return this.map(e+"")}fetch(e){const t=(e=Object.assign({parse:!0},e)).success,s=this,r=e.promise&&vl();return e.success=function(n){const o=e.reset?"reset":"set";s[o](n,e),t&&t.call(e.context,s,n,e),r&&r.resolve(),s.trigger("sync",s,n,e)},yl(this,e),r||this.sync("read",this,e)}create(e,t){const s=(t=t?Al(t):{}).wait,r=t.promise,n=r&&vl();if(!(e=this._prepareModel(e,t)))return!1;s||this.add(e,t);const o=this,i=t.success,a=t.error;return t.success=function(e,t,a){s&&o.add(e,a),i&&i.call(a.context,e,t,a),r&&n.resolve(e)},t.error=function(e,t,s){a&&a.call(s.context,e,t,s),r&&n.reject(t)},e.save(null,Object.assign(t,{promise:!1})),r?n:e}parse(e,t){return e}modelId(e){var t;return e[(null===(t=this.model.prototype)||void 0===t?void 0:t.idAttribute)||"id"]}values(){return new $c(this,Oc)}keys(){return new $c(this,Cc)}entries(){return new $c(this,Tc)}_reset(){this.models=[],this._byId={}}createModel(e,t){return new(0,this.model)(e,t)}_prepareModel(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?Al(t):{}).collection=this;const s=this.createModel(e,t);return s.validationError?(this.trigger("invalid",this,s.validationError,t),null):s}_removeModels(e,t){const s=[];for(let r=0;r<e.length;r++){const n=this.get(e[r]);if(!n)continue;const o=this.indexOf(n);this.models.splice(o,1),delete this._byId[n.cid];const i=this.modelId(n.attributes);null!=i&&delete this._byId[i],t.silent||(t.index=o,n.trigger("remove",n,this,t)),s.push(n),this._removeReference(n,t)}return s}_isModel(e){return e instanceof ic}_addReference(e,t){this._byId[e.cid]=e;const s=this.modelId(e.attributes);null!=s&&(this._byId[s]=e),e.on("all",this._onModelEvent,this)}_removeReference(e,t){delete this._byId[e.cid];const s=this.modelId(e.attributes);null!=s&&delete this._byId[s],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)}_onModelEvent(e,t,s,r){if(t){if(("add"===e||"remove"===e)&&s!==this)return;if("destroy"===e&&this.remove(t,r),"change"===e){const e=this.modelId(t.previousAttributes()),s=this.modelId(t.attributes);e!==s&&(null!=e&&delete this._byId[e],null!=s&&(this._byId[s]=t))}}this.trigger.apply(this,arguments)}constructor(e,t){super(),t||(t={}),this.preinitialize.apply(this,arguments),t.model&&(this._model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,Object.assign({silent:!0},t)),this[Symbol.iterator]=this.values}}const Oc=1,Cc=2,Tc=3;class $c{next(){if(this._collection){if(this._index<this._collection.length){const e=this._collection.at(this._index);let t;if(this._index++,this._kind===Oc)t=e;else{const s=this._collection.modelId(e.attributes);t=this._kind===Cc?s:[s,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}}[Symbol.iterator](){return this}constructor(e,t){this._collection=e,this._kind=t,this._index=0}}const kc={Collection:Ac,ElementView:Us,EventEmitter:zs,Model:ic,sync:wl},Mc="object"==typeof self&&self.self===self&&self||"object"==typeof s.g&&s.g.global===s.g&&s.g;kc.VERSION="0.0.1";const Ic=Mc.Skeletor;kc.noConflict=function(){return Mc.Skeletor=Ic,this},Mc.Skeletor=kc,t.Collection=Ac,t.ElementView=Us,t.EventEmitter=zs,t.Model=ic,t.Storage=xl,t.default=kc,t.sync=wl,Object.defineProperty(t,"__esModule",{value:!0})}(t)},"./node_modules/@converse/skeletor/src/drivers/sessionStorage.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/localforage/src/utils/executeCallback.js"),n=s("./node_modules/localforage/src/utils/getCallback.js"),o=s("./node_modules/localforage/src/utils/normalizeKey.js"),i=s("./node_modules/localforage/src/utils/serializer.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e,t){let s=e.name+"/";return e.storeName!==t.storeName&&(s+=e.storeName+"/"),s}const d={serializer:{serialize:i.default.serialize,deserialize:i.default.deserialize}};const c={_driver:"sessionStorageWrapper",_initStorage:function(e){if(d.keyPrefix=l(e,this._defaultConfig),e)for(const t in e)d[t]=e[t]},_support:function(){try{if(sessionStorage&&"setItem"in sessionStorage)return!0}catch(e){console.log(e)}return!1}(),iterate:function(e,t){const s=this.ready().then((function(){const t=d.keyPrefix,s=t.length,r=sessionStorage.length;let n=1;for(let o=0;o<r;o++){const r=sessionStorage.key(o);if(0!==r.indexOf(t))continue;let i=sessionStorage.getItem(r);if(i&&(i=d.serializer.deserialize(i)),i=e(i,r.substring(s),n++),void 0!==i)return i}}));return(0,r.default)(s,t),s},getItem:function(e,t){e=(0,o.default)(e);const s=this.ready().then((function(){let t=sessionStorage.getItem(d.keyPrefix+e);return t&&(t=d.serializer.deserialize(t)),t}));return(0,r.default)(s,t),s},setItem:function(e,t,s){return(n=function*(){e=(0,o.default)(e),yield this.ready();const n=t=null!=t?t:null;return d.serializer.serialize(t,((t,o)=>{if(o)throw o;try{sessionStorage.setItem(d.keyPrefix+e,t),(0,r.default)(Promise.resolve(n),s)}catch(e){if("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)throw console.error("Your sesionStorage capacity is used up."),e;throw e}})),t},function(){var e=this,t=arguments;return new Promise((function(s,r){var o=n.apply(e,t);function i(e){a(o,s,r,i,l,"next",e)}function l(e){a(o,s,r,i,l,"throw",e)}i(void 0)}))}).call(this);var n},removeItem:function(e,t){e=(0,o.default)(e);const s=this.ready().then((function(){sessionStorage.removeItem(d.keyPrefix+e)}));return(0,r.default)(s,t),s},clear:function(e){const t=this.ready().then((function(){const e=d.keyPrefix;for(let t=sessionStorage.length-1;t>=0;t--){const s=sessionStorage.key(t);0===s.indexOf(e)&&sessionStorage.removeItem(s)}}));return(0,r.default)(t,e),t},length:function(e){const t=this.keys().then((function(e){return e.length}));return(0,r.default)(t,e),t},key:function(e,t){const s=this.ready().then((function(){let t;try{t=sessionStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(d.keyPrefix.length)),t}));return(0,r.default)(s,t),s},keys:function(e){const t=this.ready().then((function(){const e=sessionStorage.length,t=[];for(let s=0;s<e;s++){const e=sessionStorage.key(s);0===e.indexOf(d.keyPrefix)&&t.push(e.substring(d.keyPrefix.length))}return t}));return(0,r.default)(t,e),t},dropInstance:function(e,t){if(t=n.default.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){const t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}const s=this;let o;return o=e.name?new Promise((function(t){e.storeName?t(l(e,s._defaultConfig)):t(`${e.name}/`)})).then((function(e){for(let t=sessionStorage.length-1;t>=0;t--){const s=sessionStorage.key(t);0===s.indexOf(e)&&sessionStorage.removeItem(s)}})):Promise.reject(new Error("Invalid arguments")),(0,r.default)(o,t),o}},u=c},"./node_modules/@converse/skeletor/src/helpers.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{NotImplementedError:()=>d,getResolveablePromise:()=>m,getSyncMethod:()=>v,guid:()=>u,inherits:()=>h,sync:()=>_,urlError:()=>f,wrapError:()=>p});var r=s("./node_modules/lodash-es/create.js"),n=s("./node_modules/lodash-es/assignIn.js"),o=s("./node_modules/lodash-es/has.js"),i=s("./node_modules/lodash-es/result.js");function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}class d extends Error{}function c(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function u(){return c()+c()+"-"+c()+"-"+c()+"-"+c()+"-"+c()+c()+c()}function h(e,t){const s=this;let i;return i=e&&(0,o.default)(e,"constructor")?e.constructor:function(){return s.apply(this,arguments)},(0,n.default)(i,s,t),i.prototype=(0,r.default)(s.prototype,e),i.prototype.constructor=i,i.__super__=s.prototype,i}function m(){const e={isResolved:!1,isPending:!0,isRejected:!1,resolve:null,reject:null},t=new Promise(((t,s)=>{e.resolve=t,e.reject=s}));return Object.assign(t,e),t.then((function(e){return t.isResolved=!0,t.isPending=!1,t.isRejected=!1,e}),(function(e){throw t.isResolved=!1,t.isPending=!1,t.isRejected=!0,e})),t}function f(){throw new Error('A "url" property or function must be specified')}function p(e,t){const s=t.error;t.error=function(r){s&&s.call(t.context,e,r,t),e.trigger("error",e,r,t)}}const g={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};function v(e){const t=(0,i.default)(e,"browserStorage")||(0,i.default)(e.collection,"browserStorage");return t?t.sync():_}function _(e,t,s={}){let r=s.data;null!=r||!t||"create"!==e&&"update"!==e&&"patch"!==e||(r=s.attrs||t.toJSON());const n={method:g[e],body:r?JSON.stringify(r):"",success:s.success,error:s.error},o=s.url||(0,i.default)(t,"url")||f(),d=s.xhr=fetch(o,n);return t.trigger("request",t,d,l(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){a(e,t,s[t])}))}return e}({},n),{xhr:d})),d}},"./node_modules/@converse/skeletor/src/storage.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/localforage-driver-memory/_bundle/umd.js"),n=s("./node_modules/lodash-es/cloneDeep.js"),o=s("./node_modules/lodash-es/isString.js"),i=s("./node_modules/localforage/dist/localforage.js"),a=s.n(i),l=s("./node_modules/mergebounce/mergebounce.js"),d=s("./node_modules/@converse/skeletor/src/drivers/sessionStorage.js"),c=s("./node_modules/localforage-setitems/dist/localforage-setitems.js"),u=s("./node_modules/@converse/localforage-getitems/dist/localforage-getitems.es6.js"),h=s("./node_modules/@converse/skeletor/src/helpers.js");function m(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function f(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){m(o,r,n,i,a,"next",e)}function a(e){m(o,r,n,i,a,"throw",e)}i(void 0)}))}}const p=r._driver;a().defineDriver(r),(0,c.extendPrototype)(a()),(0,u.extendPrototype)(a());class g{initStore(e,t){return f((function*(){if("session"===e)yield a().setDriver(d.default._driver);else if("local"===e)yield a().config({driver:a().LOCALSTORAGE});else if("in_memory"===e)yield a().config({driver:p});else if("indexed"!==e)throw new Error("Skeletor.storage: No storage type was specified");this.store=a(),t&&(this.store.debouncedSetItems=(0,l.default)((e=>this.store.setItems(e)),50,{promise:!0}))})).call(this)}flush(){var e;return null===(e=this.store.debouncedSetItems)||void 0===e?void 0:e.flush()}clear(){return f((function*(){yield this.store.removeItem(this.name).catch((e=>console.error(e)));const e=new RegExp(`^${this.name}-`),t=(yield this.store.keys()).filter((t=>e.test(t)));yield Promise.all(t.map((e=>this.store.removeItem(e).catch((e=>console.error(e))))))})).call(this)}sync(){const e=this;function t(t,s,r){return f((function*(){let o,i,a,l;const d=s.collection;["patch","update"].includes(t)&&(l=(0,n.default)(s.attributes)),yield e.storeInitialized;try{const n=s.attributes;switch(t){case"read":o=void 0!==s.id?yield e.find(s):yield e.findAll();break;case"create":o=yield e.create(s,r);break;case"patch":case"update":r.wait&&(s.attributes=l),a=e.update(s),r.wait&&(s.attributes=n),o=yield a;break;case"delete":o=yield e.destroy(s,d)}}catch(t){i=22===t.code&&0===e.getStorageSize()?"Private browsing is unsupported":t.message}if(o){if(r&&r.success){const e="read"===t?o:null;r.success(e,r)}}else i=i||"Record Not Found",r&&r.error&&r.error(i)}))()}return t.__name__="localSync",t}removeCollectionReference(e,t){if(!t)return;const s=t.filter((t=>t.id!==e.id)).map((e=>this.getItemName(e.id)));return this.store.setItem(this.name,s)}addCollectionReference(e,t){if(!t)return;const s=t.map((e=>this.getItemName(e.id))),r=this.getItemName(e.id);return s.includes(r)||s.push(r),this.store.setItem(this.name,s)}getCollectionReferenceData(e){if(!e.collection)return{};const t=e.collection.map((e=>this.getItemName(e.id))),s=this.getItemName(e.id);t.includes(s)||t.push(s);const r={};return r[this.name]=t,r}save(e){return f((function*(){if(this.store.setItems){const t={};return t[this.getItemName(e.id)]=e.toJSON(),Object.assign(t,this.getCollectionReferenceData(e)),this.store.debouncedSetItems?this.store.debouncedSetItems(t):this.store.setItems(t)}{const t=this.getItemName(e.id),s=yield this.store.setItem(t,e.toJSON());return yield this.addCollectionReference(e,e.collection),s}})).call(this)}create(e,t){return e.id||(e.id=(0,h.guid)(),e.set(e.idAttribute,e.id,t)),this.save(e)}update(e){return this.save(e)}find(e){return this.store.getItem(this.getItemName(e.id))}findAll(){return f((function*(){const e=yield this.store.getItem(this.name);if(null==e?void 0:e.length){const t=yield this.store.getItems(e);return Object.values(t)}return[]})).call(this)}destroy(e,t){return f((function*(){return yield this.flush(),yield this.store.removeItem(this.getItemName(e.id)),yield this.removeCollectionReference(e,t),e})).call(this)}getStorageSize(){return this.store.length}getItemName(e){return this.name+"-"+e}constructor(e,t,s=!1){if("local"===t&&!window.localStorage)throw new Error("Skeletor.storage: Environment does not support localStorage.");if("session"===t&&!window.sessionStorage)throw new Error("Skeletor.storage: Environment does not support sessionStorage.");(0,o.default)(t)?this.storeInitialized=this.initStore(t,s):(this.store=t,s&&(this.store.debouncedSetItems=(0,l.default)((e=>this.store.setItems(e)),50,{promise:!0})),this.storeInitialized=Promise.resolve()),this.name=e}}g.sessionStorageInitialized=a().defineDriver(d.default),g.localForage=a();const v=g},"./node_modules/@lit/reactive-element/development/css-tag.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{CSSResult:()=>a,adoptStyles:()=>c,css:()=>d,getCompatibleStyle:()=>u,supportsAdoptingStyleSheets:()=>n,unsafeCSS:()=>l});const r=globalThis,n=r.ShadowRoot&&(void 0===r.ShadyCSS||r.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o=Symbol(),i=new WeakMap;class a{constructor(e,t,s){if(this._$cssResult$=!0,s!==o)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this._strings=t}get styleSheet(){let e=this._styleSheet;const t=this._strings;if(n&&void 0===e){const s=void 0!==t&&1===t.length;s&&(e=i.get(t)),void 0===e&&((this._styleSheet=e=new CSSStyleSheet).replaceSync(this.cssText),s&&i.set(t,e))}return e}toString(){return this.cssText}}const l=e=>new a("string"==typeof e?e:String(e),void 0,o),d=(e,...t)=>{const s=1===e.length?e[0]:t.reduce(((t,s,r)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.`)})(s)+e[r+1]),e[0]);return new a(s,e,o)},c=(e,t)=>{if(n)e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const s of t){const t=document.createElement("style"),n=r.litNonce;void 0!==n&&t.setAttribute("nonce",n),t.textContent=s.cssText,e.appendChild(t)}},u=n?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const s of e.cssRules)t+=s.cssText;return l(t)})(e):e},"./node_modules/@lit/reactive-element/development/reactive-element.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{CSSResult:()=>r.CSSResult,ReactiveElement:()=>b,adoptStyles:()=>r.adoptStyles,css:()=>r.css,defaultConverter:()=>v,getCompatibleStyle:()=>r.getCompatibleStyle,notEqual:()=>_,supportsAdoptingStyleSheets:()=>r.supportsAdoptingStyleSheets,unsafeCSS:()=>r.unsafeCSS});var r=s("./node_modules/@lit/reactive-element/development/css-tag.js");const{is:n,defineProperty:o,getOwnPropertyDescriptor:i,getOwnPropertyNames:a,getOwnPropertySymbols:l,getPrototypeOf:d}=Object,c=globalThis;let u;const h=c.trustedTypes,m=h?h.emptyScript:"",f=c.reactiveElementPolyfillSupportDevMode;c.litIssuedWarnings??=new Set,u=(e,t)=>{t+=` See https://lit.dev/msg/${e} for more information.`,c.litIssuedWarnings.has(t)||c.litIssuedWarnings.has(e)||(console.warn(t),c.litIssuedWarnings.add(t))},queueMicrotask((()=>{u("dev-mode","Lit is in dev mode. Not recommended for production!"),c.ShadyDOM?.inUse&&void 0===f&&u("polyfill-support-missing","Shadow DOM is being polyfilled via `ShadyDOM` but the `polyfill-support` module has not been loaded.")}));const p=e=>{c.emitLitDebugLogEvents&&c.dispatchEvent(new CustomEvent("lit-debug",{detail:e}))},g=(e,t)=>e,v={toAttribute(e,t){switch(t){case Boolean:e=e?m:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let s=e;switch(t){case Boolean:s=null!==e;break;case Number:s=null===e?null:Number(e);break;case Object:case Array:try{s=JSON.parse(e)}catch(e){s=null}}return s}},_=(e,t)=>!n(e,t),y={attribute:!0,type:String,converter:v,reflect:!1,useDefault:!1,hasChanged:_};Symbol.metadata??=Symbol("metadata"),c.litPropertyMetadata??=new WeakMap;class b extends HTMLElement{static addInitializer(e){this.__prepare(),(this._initializers??=[]).push(e)}static get observedAttributes(){return this.finalize(),this.__attributeToPropertyMap&&[...this.__attributeToPropertyMap.keys()]}static createProperty(e,t=y){if(t.state&&(t.attribute=!1),this.__prepare(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const s=Symbol.for(`${String(e)} (@property() cache)`),r=this.getPropertyDescriptor(e,s,t);void 0!==r&&o(this.prototype,e,r)}}static getPropertyDescriptor(e,t,s){const{get:r,set:n}=i(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};if(null==r){if("value"in(i(this.prototype,e)??{}))throw new Error(`Field ${JSON.stringify(String(e))} on ${this.name} was declared as a reactive property but it's actually declared as a value on the prototype. Usually this is due to using @property or @state on a method.`);u("reactive-property-without-getter",`Field ${JSON.stringify(String(e))} on ${this.name} was declared as a reactive property but it does not have a getter. This will be an error in a future version of Lit.`)}return{get:r,set(t){const o=r?.call(this);n?.call(this,t),this.requestUpdate(e,o,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??y}static __prepare(){if(this.hasOwnProperty(g("elementProperties")))return;const e=d(this);e.finalize(),void 0!==e._initializers&&(this._initializers=[...e._initializers]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(g("finalized")))return;if(this.finalized=!0,this.__prepare(),this.hasOwnProperty(g("properties"))){const e=this.properties,t=[...a(e),...l(e)];for(const s of t)this.createProperty(s,e[s])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,s]of t)this.elementProperties.set(e,s)}this.__attributeToPropertyMap=new Map;for(const[e,t]of this.elementProperties){const s=this.__attributeNameForProperty(e,t);void 0!==s&&this.__attributeToPropertyMap.set(s,e)}this.elementStyles=this.finalizeStyles(this.styles),this.hasOwnProperty("createProperty")&&u("no-override-create-property","Overriding ReactiveElement.createProperty() is deprecated. The override will not be called with standard decorators"),this.hasOwnProperty("getPropertyDescriptor")&&u("no-override-get-property-descriptor","Overriding ReactiveElement.getPropertyDescriptor() is deprecated. The override will not be called with standard decorators")}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const s=new Set(e.flat(1/0).reverse());for(const e of s)t.unshift((0,r.getCompatibleStyle)(e))}else void 0!==e&&t.push((0,r.getCompatibleStyle)(e));return t}static __attributeNameForProperty(e,t){const s=t.attribute;return!1===s?void 0:"string"==typeof s?s:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this.__instanceProperties=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this.__reflectingProperty=null,this.__initialize()}__initialize(){this.__updatePromise=new Promise((e=>this.enableUpdating=e)),this._$changedProperties=new Map,this.__saveInstanceProperties(),this.requestUpdate(),this.constructor._initializers?.forEach((e=>e(this)))}addController(e){(this.__controllers??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this.__controllers?.delete(e)}__saveInstanceProperties(){const e=new Map,t=this.constructor.elementProperties;for(const s of t.keys())this.hasOwnProperty(s)&&(e.set(s,this[s]),delete this[s]);e.size>0&&(this.__instanceProperties=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return(0,r.adoptStyles)(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this.__controllers?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this.__controllers?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,s){this._$attributeToProperty(e,s)}__propertyToAttribute(e,t){const s=this.constructor.elementProperties.get(e),r=this.constructor.__attributeNameForProperty(e,s);if(void 0!==r&&!0===s.reflect){const n=(void 0!==s.converter?.toAttribute?s.converter:v).toAttribute(t,s.type);this.constructor.enabledWarnings.includes("migration")&&void 0===n&&u("undefined-attribute-value",`The attribute value for the ${e} property is undefined on element ${this.localName}. The attribute will be removed, but in the previous version of \`ReactiveElement\`, the attribute would not have changed.`),this.__reflectingProperty=e,null==n?this.removeAttribute(r):this.setAttribute(r,n),this.__reflectingProperty=null}}_$attributeToProperty(e,t){const s=this.constructor,r=s.__attributeToPropertyMap.get(e);if(void 0!==r&&this.__reflectingProperty!==r){const e=s.getPropertyOptions(r),n="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:v;this.__reflectingProperty=r,this[r]=n.fromAttribute(t,e.type)??this.__defaultValues?.get(r)??null,this.__reflectingProperty=null}}requestUpdate(e,t,s){if(void 0!==e){e instanceof Event&&u("","The requestUpdate() method was called with an Event as the property name. This is probably a mistake caused by binding this.requestUpdate as an event listener. Instead bind a function that will call it with no arguments: () => this.requestUpdate()");const r=this.constructor,n=this[e];s??=r.getPropertyOptions(e);if(!((s.hasChanged??_)(n,t)||s.useDefault&&s.reflect&&n===this.__defaultValues?.get(e)&&!this.hasAttribute(r.__attributeNameForProperty(e,s))))return;this._$changeProperty(e,t,s)}!1===this.isUpdatePending&&(this.__updatePromise=this.__enqueueUpdate())}_$changeProperty(e,t,{useDefault:s,reflect:r,wrapped:n},o){s&&!(this.__defaultValues??=new Map).has(e)&&(this.__defaultValues.set(e,o??t??this[e]),!0!==n||void 0!==o)||(this._$changedProperties.has(e)||(this.hasUpdated||s||(t=void 0),this._$changedProperties.set(e,t)),!0===r&&this.__reflectingProperty!==e&&(this.__reflectingProperties??=new Set).add(e))}async __enqueueUpdate(){this.isUpdatePending=!0;try{await this.__updatePromise}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){const e=this.performUpdate();return this.constructor.enabledWarnings.includes("async-perform-update")&&"function"==typeof e?.then&&u("async-perform-update",`Element ${this.localName} returned a Promise from performUpdate(). This behavior is deprecated and will be removed in a future version of ReactiveElement.`),e}performUpdate(){if(!this.isUpdatePending)return;if(p?.({kind:"update"}),!this.hasUpdated){this.renderRoot??=this.createRenderRoot();{const e=[...this.constructor.elementProperties.keys()].filter((e=>this.hasOwnProperty(e)&&e in d(this)));if(e.length)throw new Error(`The following properties on element ${this.localName} will not trigger updates as expected because they are set using class fields: ${e.join(", ")}. Native class fields and some compiled output will overwrite accessors used for detecting changes. See https://lit.dev/msg/class-field-shadowing for more information.`)}if(this.__instanceProperties){for(const[e,t]of this.__instanceProperties)this[e]=t;this.__instanceProperties=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,s]of e){const{wrapped:e}=s,r=this[t];!0!==e||this._$changedProperties.has(t)||void 0===r||this._$changeProperty(t,void 0,s,r)}}let e=!1;const t=this._$changedProperties;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this.__controllers?.forEach((e=>e.hostUpdate?.())),this.update(t)):this.__markUpdated()}catch(t){throw e=!1,this.__markUpdated(),t}e&&this._$didUpdate(t)}willUpdate(e){}_$didUpdate(e){this.__controllers?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e),this.isUpdatePending&&this.constructor.enabledWarnings.includes("change-in-update")&&u("change-in-update",`Element ${this.localName} scheduled an update (generally because a property was set) after an update completed, causing a new update to be scheduled. This is inefficient and should be avoided unless the next update can only be scheduled as a side effect of the previous update.`)}__markUpdated(){this._$changedProperties=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this.__updatePromise}shouldUpdate(e){return!0}update(e){this.__reflectingProperties&&=this.__reflectingProperties.forEach((e=>this.__propertyToAttribute(e,this[e]))),this.__markUpdated()}updated(e){}firstUpdated(e){}}b.elementStyles=[],b.shadowRootOptions={mode:"open"},b[g("elementProperties")]=new Map,b[g("finalized")]=new Map,f?.({ReactiveElement:b});{b.enabledWarnings=["change-in-update","async-perform-update"];const e=function(e){e.hasOwnProperty(g("enabledWarnings"))||(e.enabledWarnings=e.enabledWarnings.slice())};b.enableWarning=function(t){e(this),this.enabledWarnings.includes(t)||this.enabledWarnings.push(t)},b.disableWarning=function(t){e(this);const s=this.enabledWarnings.indexOf(t);s>=0&&this.enabledWarnings.splice(s,1)}}(c.reactiveElementVersions??=[]).push("2.1.0"),c.reactiveElementVersions.length>1&&queueMicrotask((()=>{u("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.")}))},"./node_modules/@popperjs/core/lib/createPopper.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{createPopper:()=>p,detectOverflow:()=>c.default,popperGenerator:()=>f});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js"),n=s("./node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js"),a=s("./node_modules/@popperjs/core/lib/utils/orderModifiers.js"),l=s("./node_modules/@popperjs/core/lib/utils/debounce.js"),d=s("./node_modules/@popperjs/core/lib/utils/mergeByName.js"),c=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),u=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),h={placement:"bottom",modifiers:[],strategy:"absolute"};function m(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function f(e){void 0===e&&(e={});var t=e,s=t.defaultModifiers,c=void 0===s?[]:s,f=t.defaultOptions,p=void 0===f?h:f;return function(e,t,s){void 0===s&&(s=p);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},h,p),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},g=[],v=!1,_={state:f,setOptions:function(s){var r="function"==typeof s?s(f.options):s;y(),f.options=Object.assign({},p,f.options,r),f.scrollParents={reference:(0,u.isElement)(e)?(0,o.default)(e):e.contextElement?(0,o.default)(e.contextElement):[],popper:(0,o.default)(t)};var n=(0,a.default)((0,d.default)([].concat(c,f.options.modifiers)));return f.orderedModifiers=n.filter((function(e){return e.enabled})),f.orderedModifiers.forEach((function(e){var t=e.name,s=e.options,r=void 0===s?{}:s,n=e.effect;if("function"==typeof n){var o=n({state:f,name:t,instance:_,options:r}),i=function(){};g.push(o||i)}})),_.update()},forceUpdate:function(){if(!v){var e=f.elements,t=e.reference,s=e.popper;if(m(t,s)){f.rects={reference:(0,r.default)(t,(0,i.default)(s),"fixed"===f.options.strategy),popper:(0,n.default)(s)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach((function(e){return f.modifiersData[e.name]=Object.assign({},e.data)}));for(var o=0;o<f.orderedModifiers.length;o++)if(!0!==f.reset){var a=f.orderedModifiers[o],l=a.fn,d=a.options,c=void 0===d?{}:d,u=a.name;"function"==typeof l&&(f=l({state:f,options:c,name:u,instance:_})||f)}else f.reset=!1,o=-1}}},update:(0,l.default)((function(){return new Promise((function(e){_.forceUpdate(),e(f)}))})),destroy:function(){y(),v=!0}};if(!m(e,t))return _;function y(){g.forEach((function(e){return e()})),g=[]}return _.setOptions(s).then((function(e){!v&&s.onFirstUpdate&&s.onFirstUpdate(e)})),_}}var p=f()},"./node_modules/@popperjs/core/lib/dom-utils/contains.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js");function n(e,t){var s=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(s&&(0,r.isShadowRoot)(s)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}},"./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),n=s("./node_modules/@popperjs/core/lib/utils/math.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js");function a(e,t,s){void 0===t&&(t=!1),void 0===s&&(s=!1);var a=e.getBoundingClientRect(),l=1,d=1;t&&(0,r.isHTMLElement)(e)&&(l=e.offsetWidth>0&&(0,n.round)(a.width)/e.offsetWidth||1,d=e.offsetHeight>0&&(0,n.round)(a.height)/e.offsetHeight||1);var c=((0,r.isElement)(e)?(0,o.default)(e):window).visualViewport,u=!(0,i.default)()&&s,h=(a.left+(u&&c?c.offsetLeft:0))/l,m=(a.top+(u&&c?c.offsetTop:0))/d,f=a.width/l,p=a.height/d;return{width:f,height:p,top:m,right:h+f,bottom:m+p,left:h,x:h,y:m}}},"./node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var r=s("./node_modules/@popperjs/core/lib/enums.js"),n=s("./node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js"),l=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),d=s("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js"),c=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),u=s("./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js"),h=s("./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js"),m=s("./node_modules/@popperjs/core/lib/dom-utils/contains.js"),f=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),p=s("./node_modules/@popperjs/core/lib/utils/rectToClientRect.js"),g=s("./node_modules/@popperjs/core/lib/utils/math.js");function v(e,t,s){return t===r.viewport?(0,p.default)((0,n.default)(e,s)):(0,c.isElement)(t)?function(e,t){var s=(0,u.default)(e,!1,"fixed"===t);return s.top=s.top+e.clientTop,s.left=s.left+e.clientLeft,s.bottom=s.top+e.clientHeight,s.right=s.left+e.clientWidth,s.width=e.clientWidth,s.height=e.clientHeight,s.x=s.left,s.y=s.top,s}(t,s):(0,p.default)((0,o.default)((0,l.default)(e)))}function _(e,t,s,r){var n="clippingParents"===t?function(e){var t=(0,i.default)((0,h.default)(e)),s=["absolute","fixed"].indexOf((0,d.default)(e).position)>=0&&(0,c.isHTMLElement)(e)?(0,a.default)(e):e;return(0,c.isElement)(s)?t.filter((function(e){return(0,c.isElement)(e)&&(0,m.default)(e,s)&&"body"!==(0,f.default)(e)})):[]}(e):[].concat(t),o=[].concat(n,[s]),l=o[0],u=o.reduce((function(t,s){var n=v(e,s,r);return t.top=(0,g.max)(n.top,t.top),t.right=(0,g.min)(n.right,t.right),t.bottom=(0,g.min)(n.bottom,t.bottom),t.left=(0,g.max)(n.left,t.left),t}),v(e,l,r));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}},"./node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js"),n=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js"),l=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),d=s("./node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js"),c=s("./node_modules/@popperjs/core/lib/utils/math.js");function u(e,t,s){void 0===s&&(s=!1);var u=(0,i.isHTMLElement)(t),h=(0,i.isHTMLElement)(t)&&function(e){var t=e.getBoundingClientRect(),s=(0,c.round)(t.width)/e.offsetWidth||1,r=(0,c.round)(t.height)/e.offsetHeight||1;return 1!==s||1!==r}(t),m=(0,l.default)(t),f=(0,r.default)(e,h,s),p={scrollLeft:0,scrollTop:0},g={x:0,y:0};return(u||!u&&!s)&&(("body"!==(0,o.default)(t)||(0,d.default)(m))&&(p=(0,n.default)(t)),(0,i.isHTMLElement)(t)?((g=(0,r.default)(t,!0)).x+=t.clientLeft,g.y+=t.clientTop):m&&(g.x=(0,a.default)(m))),{x:f.left+p.scrollLeft-g.x,y:f.top+p.scrollTop-g.y,width:f.width,height:f.height}}},"./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js");function n(e){return(0,r.default)(e).getComputedStyle(e)}},"./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js");function n(e){return(((0,r.isElement)(e)?e.ownerDocument:e.document)||window.document).documentElement}},"./node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),n=s("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js"),a=s("./node_modules/@popperjs/core/lib/utils/math.js");function l(e){var t,s=(0,r.default)(e),l=(0,i.default)(e),d=null==(t=e.ownerDocument)?void 0:t.body,c=(0,a.max)(s.scrollWidth,s.clientWidth,d?d.scrollWidth:0,d?d.clientWidth:0),u=(0,a.max)(s.scrollHeight,s.clientHeight,d?d.scrollHeight:0,d?d.clientHeight:0),h=-l.scrollLeft+(0,o.default)(e),m=-l.scrollTop;return"rtl"===(0,n.default)(d||s).direction&&(h+=(0,a.max)(s.clientWidth,d?d.clientWidth:0)-c),{width:c,height:u,x:h,y:m}}},"./node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js":(e,t,s)=>{"use strict";function r(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js");function n(e){var t=(0,r.default)(e),s=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-s)<=1&&(s=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:s,height:n}}},"./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js":(e,t,s)=>{"use strict";function r(e){return e?(e.nodeName||"").toLowerCase():null}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js"),n=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js");function a(e){return e!==(0,n.default)(e)&&(0,o.isHTMLElement)(e)?(0,i.default)(e):(0,r.default)(e)}},"./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),n=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/isTableElement.js"),l=s("./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js"),d=s("./node_modules/@popperjs/core/lib/utils/userAgent.js");function c(e){return(0,i.isHTMLElement)(e)&&"fixed"!==(0,o.default)(e).position?e.offsetParent:null}function u(e){for(var t=(0,r.default)(e),s=c(e);s&&(0,a.default)(s)&&"static"===(0,o.default)(s).position;)s=c(s);return s&&("html"===(0,n.default)(s)||"body"===(0,n.default)(s)&&"static"===(0,o.default)(s).position)?t:s||function(e){var t=/firefox/i.test((0,d.default)());if(/Trident/i.test((0,d.default)())&&(0,i.isHTMLElement)(e)&&"fixed"===(0,o.default)(e).position)return null;var s=(0,l.default)(e);for((0,i.isShadowRoot)(s)&&(s=s.host);(0,i.isHTMLElement)(s)&&["html","body"].indexOf((0,n.default)(s))<0;){var r=(0,o.default)(s);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return s;s=s.parentNode}return null}(e)||t}},"./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),n=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js");function i(e){return"html"===(0,r.default)(e)?e:e.assignedSlot||e.parentNode||((0,o.isShadowRoot)(e)?e.host:null)||(0,n.default)(e)}},"./node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js"),n=s("./node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js");function a(e){return["html","body","#document"].indexOf((0,o.default)(e))>=0?e.ownerDocument.body:(0,i.isHTMLElement)(e)&&(0,n.default)(e)?e:a((0,r.default)(e))}},"./node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),n=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js");function a(e,t){var s=(0,r.default)(e),a=(0,n.default)(e),l=s.visualViewport,d=a.clientWidth,c=a.clientHeight,u=0,h=0;if(l){d=l.width,c=l.height;var m=(0,i.default)();(m||!m&&"fixed"===t)&&(u=l.offsetLeft,h=l.offsetTop)}return{width:d,height:c,x:u+(0,o.default)(e),y:h}}},"./node_modules/@popperjs/core/lib/dom-utils/getWindow.js":(e,t,s)=>{"use strict";function r(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js");function n(e){var t=(0,r.default)(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}},"./node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js"),n=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js");function i(e){return(0,r.default)((0,n.default)(e)).left+(0,o.default)(e).scrollLeft}},"./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{isElement:()=>n,isHTMLElement:()=>o,isShadowRoot:()=>i});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js");function n(e){return e instanceof(0,r.default)(e).Element||e instanceof Element}function o(e){return e instanceof(0,r.default)(e).HTMLElement||e instanceof HTMLElement}function i(e){return"undefined"!=typeof ShadowRoot&&(e instanceof(0,r.default)(e).ShadowRoot||e instanceof ShadowRoot)}},"./node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/@popperjs/core/lib/utils/userAgent.js");function n(){return!/^((?!chrome|android).)*safari/i.test((0,r.default)())}},"./node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js");function n(e){var t=(0,r.default)(e),s=t.overflow,n=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(s+o+n)}},"./node_modules/@popperjs/core/lib/dom-utils/isTableElement.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js");function n(e){return["table","td","th"].indexOf((0,r.default)(e))>=0}},"./node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js"),n=s("./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js");function a(e,t){var s;void 0===t&&(t=[]);var l=(0,r.default)(e),d=l===(null==(s=e.ownerDocument)?void 0:s.body),c=(0,o.default)(l),u=d?[c].concat(c.visualViewport||[],(0,i.default)(l)?l:[]):l,h=t.concat(u);return d?h:h.concat(a((0,n.default)(u)))}},"./node_modules/@popperjs/core/lib/enums.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{afterMain:()=>w,afterRead:()=>y,afterWrite:()=>E,auto:()=>a,basePlacements:()=>l,beforeMain:()=>b,beforeRead:()=>v,beforeWrite:()=>S,bottom:()=>n,clippingParents:()=>u,end:()=>c,left:()=>i,main:()=>j,modifierPhases:()=>A,placements:()=>g,popper:()=>m,read:()=>_,reference:()=>f,right:()=>o,start:()=>d,top:()=>r,variationPlacements:()=>p,viewport:()=>h,write:()=>x});var r="top",n="bottom",o="right",i="left",a="auto",l=[r,n,o,i],d="start",c="end",u="clippingParents",h="viewport",m="popper",f="reference",p=l.reduce((function(e,t){return e.concat([t+"-"+d,t+"-"+c])}),[]),g=[].concat(l,[a]).reduce((function(e,t){return e.concat([t,t+"-"+d,t+"-"+c])}),[]),v="beforeRead",_="read",y="afterRead",b="beforeMain",j="main",w="afterMain",S="beforeWrite",x="write",E="afterWrite",A=[v,_,y,b,j,w,S,x,E]},"./node_modules/@popperjs/core/lib/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{afterMain:()=>r.afterMain,afterRead:()=>r.afterRead,afterWrite:()=>r.afterWrite,applyStyles:()=>n.applyStyles,arrow:()=>n.arrow,auto:()=>r.auto,basePlacements:()=>r.basePlacements,beforeMain:()=>r.beforeMain,beforeRead:()=>r.beforeRead,beforeWrite:()=>r.beforeWrite,bottom:()=>r.bottom,clippingParents:()=>r.clippingParents,computeStyles:()=>n.computeStyles,createPopper:()=>a.createPopper,createPopperBase:()=>o.createPopper,createPopperLite:()=>l.createPopper,detectOverflow:()=>i.default,end:()=>r.end,eventListeners:()=>n.eventListeners,flip:()=>n.flip,hide:()=>n.hide,left:()=>r.left,main:()=>r.main,modifierPhases:()=>r.modifierPhases,offset:()=>n.offset,placements:()=>r.placements,popper:()=>r.popper,popperGenerator:()=>o.popperGenerator,popperOffsets:()=>n.popperOffsets,preventOverflow:()=>n.preventOverflow,read:()=>r.read,reference:()=>r.reference,right:()=>r.right,start:()=>r.start,top:()=>r.top,variationPlacements:()=>r.variationPlacements,viewport:()=>r.viewport,write:()=>r.write});var r=s("./node_modules/@popperjs/core/lib/enums.js"),n=s("./node_modules/@popperjs/core/lib/modifiers/index.js"),o=s("./node_modules/@popperjs/core/lib/createPopper.js"),i=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),a=s("./node_modules/@popperjs/core/lib/popper.js"),l=s("./node_modules/@popperjs/core/lib/popper-lite.js")},"./node_modules/@popperjs/core/lib/modifiers/applyStyles.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),n=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js");const o={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var s=t.styles[e]||{},o=t.attributes[e]||{},i=t.elements[e];(0,n.isHTMLElement)(i)&&(0,r.default)(i)&&(Object.assign(i.style,s),Object.keys(o).forEach((function(e){var t=o[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,s={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,s.popper),t.styles=s,t.elements.arrow&&Object.assign(t.elements.arrow.style,s.arrow),function(){Object.keys(t.elements).forEach((function(e){var o=t.elements[e],i=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:s[e]).reduce((function(e,t){return e[t]="",e}),{});(0,n.isHTMLElement)(o)&&(0,r.default)(o)&&(Object.assign(o.style,a),Object.keys(i).forEach((function(e){o.removeAttribute(e)})))}))}},requires:["computeStyles"]}},"./node_modules/@popperjs/core/lib/modifiers/arrow.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),n=s("./node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/contains.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js"),a=s("./node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js"),l=s("./node_modules/@popperjs/core/lib/utils/within.js"),d=s("./node_modules/@popperjs/core/lib/utils/mergePaddingObject.js"),c=s("./node_modules/@popperjs/core/lib/utils/expandToHashMap.js"),u=s("./node_modules/@popperjs/core/lib/enums.js");const h={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,s=e.state,o=e.name,h=e.options,m=s.elements.arrow,f=s.modifiersData.popperOffsets,p=(0,r.default)(s.placement),g=(0,a.default)(p),v=[u.left,u.right].indexOf(p)>=0?"height":"width";if(m&&f){var _=function(e,t){return e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e,(0,d.default)("number"!=typeof e?e:(0,c.default)(e,u.basePlacements))}(h.padding,s),y=(0,n.default)(m),b="y"===g?u.top:u.left,j="y"===g?u.bottom:u.right,w=s.rects.reference[v]+s.rects.reference[g]-f[g]-s.rects.popper[v],S=f[g]-s.rects.reference[g],x=(0,i.default)(m),E=x?"y"===g?x.clientHeight||0:x.clientWidth||0:0,A=w/2-S/2,O=_[b],C=E-y[v]-_[j],T=E/2-y[v]/2+A,$=(0,l.within)(O,T,C),k=g;s.modifiersData[o]=((t={})[k]=$,t.centerOffset=$-T,t)}},effect:function(e){var t=e.state,s=e.options.element,r=void 0===s?"[data-popper-arrow]":s;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&(0,o.default)(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]}},"./node_modules/@popperjs/core/lib/modifiers/computeStyles.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m,mapToStyles:()=>h});var r=s("./node_modules/@popperjs/core/lib/enums.js"),n=s("./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),i=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),a=s("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js"),l=s("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),d=s("./node_modules/@popperjs/core/lib/utils/getVariation.js"),c=s("./node_modules/@popperjs/core/lib/utils/math.js"),u={top:"auto",right:"auto",bottom:"auto",left:"auto"};function h(e){var t,s=e.popper,l=e.popperRect,d=e.placement,h=e.variation,m=e.offsets,f=e.position,p=e.gpuAcceleration,g=e.adaptive,v=e.roundOffsets,_=e.isFixed,y=m.x,b=void 0===y?0:y,j=m.y,w=void 0===j?0:j,S="function"==typeof v?v({x:b,y:w}):{x:b,y:w};b=S.x,w=S.y;var x=m.hasOwnProperty("x"),E=m.hasOwnProperty("y"),A=r.left,O=r.top,C=window;if(g){var T=(0,n.default)(s),$="clientHeight",k="clientWidth";if(T===(0,o.default)(s)&&(T=(0,i.default)(s),"static"!==(0,a.default)(T).position&&"absolute"===f&&($="scrollHeight",k="scrollWidth")),d===r.top||(d===r.left||d===r.right)&&h===r.end)O=r.bottom,w-=(_&&T===C&&C.visualViewport?C.visualViewport.height:T[$])-l.height,w*=p?1:-1;if(d===r.left||(d===r.top||d===r.bottom)&&h===r.end)A=r.right,b-=(_&&T===C&&C.visualViewport?C.visualViewport.width:T[k])-l.width,b*=p?1:-1}var M,I=Object.assign({position:f},g&&u),P=!0===v?function(e,t){var s=e.x,r=e.y,n=t.devicePixelRatio||1;return{x:(0,c.round)(s*n)/n||0,y:(0,c.round)(r*n)/n||0}}({x:b,y:w},(0,o.default)(s)):{x:b,y:w};return b=P.x,w=P.y,p?Object.assign({},I,((M={})[O]=E?"0":"",M[A]=x?"0":"",M.transform=(C.devicePixelRatio||1)<=1?"translate("+b+"px, "+w+"px)":"translate3d("+b+"px, "+w+"px, 0)",M)):Object.assign({},I,((t={})[O]=E?w+"px":"",t[A]=x?b+"px":"",t.transform="",t))}const m={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,s=e.options,r=s.gpuAcceleration,n=void 0===r||r,o=s.adaptive,i=void 0===o||o,a=s.roundOffsets,c=void 0===a||a,u={placement:(0,l.default)(t.placement),variation:(0,d.default)(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,h(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,h(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}}},"./node_modules/@popperjs/core/lib/modifiers/eventListeners.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),n={passive:!0};const o={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,s=e.instance,o=e.options,i=o.scroll,a=void 0===i||i,l=o.resize,d=void 0===l||l,c=(0,r.default)(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&u.forEach((function(e){e.addEventListener("scroll",s.update,n)})),d&&c.addEventListener("resize",s.update,n),function(){a&&u.forEach((function(e){e.removeEventListener("scroll",s.update,n)})),d&&c.removeEventListener("resize",s.update,n)}},data:{}}},"./node_modules/@popperjs/core/lib/modifiers/flip.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/@popperjs/core/lib/utils/getOppositePlacement.js"),n=s("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),o=s("./node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js"),i=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),a=s("./node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js"),l=s("./node_modules/@popperjs/core/lib/enums.js"),d=s("./node_modules/@popperjs/core/lib/utils/getVariation.js");const c={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,s=e.options,c=e.name;if(!t.modifiersData[c]._skip){for(var u=s.mainAxis,h=void 0===u||u,m=s.altAxis,f=void 0===m||m,p=s.fallbackPlacements,g=s.padding,v=s.boundary,_=s.rootBoundary,y=s.altBoundary,b=s.flipVariations,j=void 0===b||b,w=s.allowedAutoPlacements,S=t.options.placement,x=(0,n.default)(S),E=p||(x===S||!j?[(0,r.default)(S)]:function(e){if((0,n.default)(e)===l.auto)return[];var t=(0,r.default)(e);return[(0,o.default)(e),t,(0,o.default)(t)]}(S)),A=[S].concat(E).reduce((function(e,s){return e.concat((0,n.default)(s)===l.auto?(0,a.default)(t,{placement:s,boundary:v,rootBoundary:_,padding:g,flipVariations:j,allowedAutoPlacements:w}):s)}),[]),O=t.rects.reference,C=t.rects.popper,T=new Map,$=!0,k=A[0],M=0;M<A.length;M++){var I=A[M],P=(0,n.default)(I),N=(0,d.default)(I)===l.start,D=[l.top,l.bottom].indexOf(P)>=0,R=D?"width":"height",z=(0,i.default)(t,{placement:I,boundary:v,rootBoundary:_,altBoundary:y,padding:g}),L=D?N?l.right:l.left:N?l.bottom:l.top;O[R]>C[R]&&(L=(0,r.default)(L));var U=(0,r.default)(L),B=[];if(h&&B.push(z[P]<=0),f&&B.push(z[L]<=0,z[U]<=0),B.every((function(e){return e}))){k=I,$=!1;break}T.set(I,B)}if($)for(var F=function(e){var t=A.find((function(t){var s=T.get(t);if(s)return s.slice(0,e).every((function(e){return e}))}));if(t)return k=t,"break"},q=j?3:1;q>0;q--){if("break"===F(q))break}t.placement!==k&&(t.modifiersData[c]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}}},"./node_modules/@popperjs/core/lib/modifiers/hide.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@popperjs/core/lib/enums.js"),n=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js");function o(e,t,s){return void 0===s&&(s={x:0,y:0}),{top:e.top-t.height-s.y,right:e.right-t.width+s.x,bottom:e.bottom-t.height+s.y,left:e.left-t.width-s.x}}function i(e){return[r.top,r.right,r.bottom,r.left].some((function(t){return e[t]>=0}))}const a={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,s=e.name,r=t.rects.reference,a=t.rects.popper,l=t.modifiersData.preventOverflow,d=(0,n.default)(t,{elementContext:"reference"}),c=(0,n.default)(t,{altBoundary:!0}),u=o(d,r),h=o(c,a,l),m=i(u),f=i(h);t.modifiersData[s]={referenceClippingOffsets:u,popperEscapeOffsets:h,isReferenceHidden:m,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":f})}}},"./node_modules/@popperjs/core/lib/modifiers/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{applyStyles:()=>r.default,arrow:()=>n.default,computeStyles:()=>o.default,eventListeners:()=>i.default,flip:()=>a.default,hide:()=>l.default,offset:()=>d.default,popperOffsets:()=>c.default,preventOverflow:()=>u.default});var r=s("./node_modules/@popperjs/core/lib/modifiers/applyStyles.js"),n=s("./node_modules/@popperjs/core/lib/modifiers/arrow.js"),o=s("./node_modules/@popperjs/core/lib/modifiers/computeStyles.js"),i=s("./node_modules/@popperjs/core/lib/modifiers/eventListeners.js"),a=s("./node_modules/@popperjs/core/lib/modifiers/flip.js"),l=s("./node_modules/@popperjs/core/lib/modifiers/hide.js"),d=s("./node_modules/@popperjs/core/lib/modifiers/offset.js"),c=s("./node_modules/@popperjs/core/lib/modifiers/popperOffsets.js"),u=s("./node_modules/@popperjs/core/lib/modifiers/preventOverflow.js")},"./node_modules/@popperjs/core/lib/modifiers/offset.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,distanceAndSkiddingToXY:()=>o});var r=s("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),n=s("./node_modules/@popperjs/core/lib/enums.js");function o(e,t,s){var o=(0,r.default)(e),i=[n.left,n.top].indexOf(o)>=0?-1:1,a="function"==typeof s?s(Object.assign({},t,{placement:e})):s,l=a[0],d=a[1];return l=l||0,d=(d||0)*i,[n.left,n.right].indexOf(o)>=0?{x:d,y:l}:{x:l,y:d}}const i={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,s=e.options,r=e.name,i=s.offset,a=void 0===i?[0,0]:i,l=n.placements.reduce((function(e,s){return e[s]=o(s,t.rects,a),e}),{}),d=l[t.placement],c=d.x,u=d.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=l}}},"./node_modules/@popperjs/core/lib/modifiers/popperOffsets.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/@popperjs/core/lib/utils/computeOffsets.js");const n={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,s=e.name;t.modifiersData[s]=(0,r.default)({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}}},"./node_modules/@popperjs/core/lib/modifiers/preventOverflow.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s("./node_modules/@popperjs/core/lib/enums.js"),n=s("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),o=s("./node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js"),i=s("./node_modules/@popperjs/core/lib/utils/getAltAxis.js"),a=s("./node_modules/@popperjs/core/lib/utils/within.js"),l=s("./node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js"),d=s("./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js"),c=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),u=s("./node_modules/@popperjs/core/lib/utils/getVariation.js"),h=s("./node_modules/@popperjs/core/lib/utils/getFreshSideObject.js"),m=s("./node_modules/@popperjs/core/lib/utils/math.js");const f={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,s=e.options,f=e.name,p=s.mainAxis,g=void 0===p||p,v=s.altAxis,_=void 0!==v&&v,y=s.boundary,b=s.rootBoundary,j=s.altBoundary,w=s.padding,S=s.tether,x=void 0===S||S,E=s.tetherOffset,A=void 0===E?0:E,O=(0,c.default)(t,{boundary:y,rootBoundary:b,padding:w,altBoundary:j}),C=(0,n.default)(t.placement),T=(0,u.default)(t.placement),$=!T,k=(0,o.default)(C),M=(0,i.default)(k),I=t.modifiersData.popperOffsets,P=t.rects.reference,N=t.rects.popper,D="function"==typeof A?A(Object.assign({},t.rects,{placement:t.placement})):A,R="number"==typeof D?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),z=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,L={x:0,y:0};if(I){if(g){var U,B="y"===k?r.top:r.left,F="y"===k?r.bottom:r.right,q="y"===k?"height":"width",H=I[k],G=H+O[B],W=H-O[F],V=x?-N[q]/2:0,K=T===r.start?P[q]:N[q],J=T===r.start?-N[q]:-P[q],Y=t.elements.arrow,Q=x&&Y?(0,l.default)(Y):{width:0,height:0},X=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:(0,h.default)(),Z=X[B],ee=X[F],te=(0,a.within)(0,P[q],Q[q]),se=$?P[q]/2-V-te-Z-R.mainAxis:K-te-Z-R.mainAxis,re=$?-P[q]/2+V+te+ee+R.mainAxis:J+te+ee+R.mainAxis,ne=t.elements.arrow&&(0,d.default)(t.elements.arrow),oe=ne?"y"===k?ne.clientTop||0:ne.clientLeft||0:0,ie=null!=(U=null==z?void 0:z[k])?U:0,ae=H+se-ie-oe,le=H+re-ie,de=(0,a.within)(x?(0,m.min)(G,ae):G,H,x?(0,m.max)(W,le):W);I[k]=de,L[k]=de-H}if(_){var ce,ue="x"===k?r.top:r.left,he="x"===k?r.bottom:r.right,me=I[M],fe="y"===M?"height":"width",pe=me+O[ue],ge=me-O[he],ve=-1!==[r.top,r.left].indexOf(C),_e=null!=(ce=null==z?void 0:z[M])?ce:0,ye=ve?pe:me-P[fe]-N[fe]-_e+R.altAxis,be=ve?me+P[fe]+N[fe]-_e-R.altAxis:ge,je=x&&ve?(0,a.withinMaxClamp)(ye,me,be):(0,a.within)(x?ye:pe,me,x?be:ge);I[M]=je,L[M]=je-me}t.modifiersData[f]=L}},requiresIfExists:["offset"]}},"./node_modules/@popperjs/core/lib/popper-lite.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{createPopper:()=>c,defaultModifiers:()=>d,detectOverflow:()=>n.default,popperGenerator:()=>r.popperGenerator});var r=s("./node_modules/@popperjs/core/lib/createPopper.js"),n=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),o=s("./node_modules/@popperjs/core/lib/modifiers/eventListeners.js"),i=s("./node_modules/@popperjs/core/lib/modifiers/popperOffsets.js"),a=s("./node_modules/@popperjs/core/lib/modifiers/computeStyles.js"),l=s("./node_modules/@popperjs/core/lib/modifiers/applyStyles.js"),d=[o.default,i.default,a.default,l.default],c=(0,r.popperGenerator)({defaultModifiers:d})},"./node_modules/@popperjs/core/lib/popper.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{applyStyles:()=>p.applyStyles,arrow:()=>p.arrow,computeStyles:()=>p.computeStyles,createPopper:()=>v,createPopperLite:()=>f.createPopper,defaultModifiers:()=>g,detectOverflow:()=>n.default,eventListeners:()=>p.eventListeners,flip:()=>p.flip,hide:()=>p.hide,offset:()=>p.offset,popperGenerator:()=>r.popperGenerator,popperOffsets:()=>p.popperOffsets,preventOverflow:()=>p.preventOverflow});var r=s("./node_modules/@popperjs/core/lib/createPopper.js"),n=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),o=s("./node_modules/@popperjs/core/lib/modifiers/eventListeners.js"),i=s("./node_modules/@popperjs/core/lib/modifiers/popperOffsets.js"),a=s("./node_modules/@popperjs/core/lib/modifiers/computeStyles.js"),l=s("./node_modules/@popperjs/core/lib/modifiers/applyStyles.js"),d=s("./node_modules/@popperjs/core/lib/modifiers/offset.js"),c=s("./node_modules/@popperjs/core/lib/modifiers/flip.js"),u=s("./node_modules/@popperjs/core/lib/modifiers/preventOverflow.js"),h=s("./node_modules/@popperjs/core/lib/modifiers/arrow.js"),m=s("./node_modules/@popperjs/core/lib/modifiers/hide.js"),f=s("./node_modules/@popperjs/core/lib/popper-lite.js"),p=s("./node_modules/@popperjs/core/lib/modifiers/index.js"),g=[o.default,i.default,a.default,l.default,d.default,c.default,u.default,h.default,m.default],v=(0,r.popperGenerator)({defaultModifiers:g})},"./node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@popperjs/core/lib/utils/getVariation.js"),n=s("./node_modules/@popperjs/core/lib/enums.js"),o=s("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),i=s("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js");function a(e,t){void 0===t&&(t={});var s=t,a=s.placement,l=s.boundary,d=s.rootBoundary,c=s.padding,u=s.flipVariations,h=s.allowedAutoPlacements,m=void 0===h?n.placements:h,f=(0,r.default)(a),p=f?u?n.variationPlacements:n.variationPlacements.filter((function(e){return(0,r.default)(e)===f})):n.basePlacements,g=p.filter((function(e){return m.indexOf(e)>=0}));0===g.length&&(g=p);var v=g.reduce((function(t,s){return t[s]=(0,o.default)(e,{placement:s,boundary:l,rootBoundary:d,padding:c})[(0,i.default)(s)],t}),{});return Object.keys(v).sort((function(e,t){return v[e]-v[t]}))}},"./node_modules/@popperjs/core/lib/utils/computeOffsets.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),n=s("./node_modules/@popperjs/core/lib/utils/getVariation.js"),o=s("./node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js"),i=s("./node_modules/@popperjs/core/lib/enums.js");function a(e){var t,s=e.reference,a=e.element,l=e.placement,d=l?(0,r.default)(l):null,c=l?(0,n.default)(l):null,u=s.x+s.width/2-a.width/2,h=s.y+s.height/2-a.height/2;switch(d){case i.top:t={x:u,y:s.y-a.height};break;case i.bottom:t={x:u,y:s.y+s.height};break;case i.right:t={x:s.x+s.width,y:h};break;case i.left:t={x:s.x-a.width,y:h};break;default:t={x:s.x,y:s.y}}var m=d?(0,o.default)(d):null;if(null!=m){var f="y"===m?"height":"width";switch(c){case i.start:t[m]=t[m]-(s[f]/2-a[f]/2);break;case i.end:t[m]=t[m]+(s[f]/2-a[f]/2)}}return t}},"./node_modules/@popperjs/core/lib/utils/debounce.js":(e,t,s)=>{"use strict";function r(e){var t;return function(){return t||(t=new Promise((function(s){Promise.resolve().then((function(){t=void 0,s(e())}))}))),t}}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/detectOverflow.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js"),n=s("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),o=s("./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js"),i=s("./node_modules/@popperjs/core/lib/utils/computeOffsets.js"),a=s("./node_modules/@popperjs/core/lib/utils/rectToClientRect.js"),l=s("./node_modules/@popperjs/core/lib/enums.js"),d=s("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),c=s("./node_modules/@popperjs/core/lib/utils/mergePaddingObject.js"),u=s("./node_modules/@popperjs/core/lib/utils/expandToHashMap.js");function h(e,t){void 0===t&&(t={});var s=t,h=s.placement,m=void 0===h?e.placement:h,f=s.strategy,p=void 0===f?e.strategy:f,g=s.boundary,v=void 0===g?l.clippingParents:g,_=s.rootBoundary,y=void 0===_?l.viewport:_,b=s.elementContext,j=void 0===b?l.popper:b,w=s.altBoundary,S=void 0!==w&&w,x=s.padding,E=void 0===x?0:x,A=(0,c.default)("number"!=typeof E?E:(0,u.default)(E,l.basePlacements)),O=j===l.popper?l.reference:l.popper,C=e.rects.popper,T=e.elements[S?O:j],$=(0,r.default)((0,d.isElement)(T)?T:T.contextElement||(0,n.default)(e.elements.popper),v,y,p),k=(0,o.default)(e.elements.reference),M=(0,i.default)({reference:k,element:C,strategy:"absolute",placement:m}),I=(0,a.default)(Object.assign({},C,M)),P=j===l.popper?I:k,N={top:$.top-P.top+A.top,bottom:P.bottom-$.bottom+A.bottom,left:$.left-P.left+A.left,right:P.right-$.right+A.right},D=e.modifiersData.offset;if(j===l.popper&&D){var R=D[m];Object.keys(N).forEach((function(e){var t=[l.right,l.bottom].indexOf(e)>=0?1:-1,s=[l.top,l.bottom].indexOf(e)>=0?"y":"x";N[e]+=R[s]*t}))}return N}},"./node_modules/@popperjs/core/lib/utils/expandToHashMap.js":(e,t,s)=>{"use strict";function r(e,t){return t.reduce((function(t,s){return t[s]=e,t}),{})}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/getAltAxis.js":(e,t,s)=>{"use strict";function r(e){return"x"===e?"y":"x"}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/getBasePlacement.js":(e,t,s)=>{"use strict";function r(e){return e.split("-")[0]}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/getFreshSideObject.js":(e,t,s)=>{"use strict";function r(){return{top:0,right:0,bottom:0,left:0}}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js":(e,t,s)=>{"use strict";function r(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/getOppositePlacement.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r={left:"right",right:"left",bottom:"top",top:"bottom"};function n(e){return e.replace(/left|right|bottom|top/g,(function(e){return r[e]}))}},"./node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r={start:"end",end:"start"};function n(e){return e.replace(/start|end/g,(function(e){return r[e]}))}},"./node_modules/@popperjs/core/lib/utils/getVariation.js":(e,t,s)=>{"use strict";function r(e){return e.split("-")[1]}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/math.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{max:()=>r,min:()=>n,round:()=>o});var r=Math.max,n=Math.min,o=Math.round},"./node_modules/@popperjs/core/lib/utils/mergeByName.js":(e,t,s)=>{"use strict";function r(e){var t=e.reduce((function(e,t){var s=e[t.name];return e[t.name]=s?Object.assign({},s,t,{options:Object.assign({},s.options,t.options),data:Object.assign({},s.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/mergePaddingObject.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/@popperjs/core/lib/utils/getFreshSideObject.js");function n(e){return Object.assign({},(0,r.default)(),e)}},"./node_modules/@popperjs/core/lib/utils/orderModifiers.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/@popperjs/core/lib/enums.js");function n(e){var t=new Map,s=new Set,r=[];function n(e){s.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!s.has(e)){var r=t.get(e);r&&n(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){s.has(e.name)||n(e)})),r}function o(e){var t=n(e);return r.modifierPhases.reduce((function(e,s){return e.concat(t.filter((function(e){return e.phase===s})))}),[])}},"./node_modules/@popperjs/core/lib/utils/rectToClientRect.js":(e,t,s)=>{"use strict";function r(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/userAgent.js":(e,t,s)=>{"use strict";function r(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}s.r(t),s.d(t,{default:()=>r})},"./node_modules/@popperjs/core/lib/utils/within.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{within:()=>n,withinMaxClamp:()=>o});var r=s("./node_modules/@popperjs/core/lib/utils/math.js");function n(e,t,s){return(0,r.max)(e,(0,r.min)(t,s))}function o(e,t,s){var r=n(e,t,s);return r>s?s:r}},"./node_modules/bootstrap/js/src/base-component.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/bootstrap/js/src/dom/data.js"),n=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),o=s("./node_modules/bootstrap/js/src/util/config.js"),i=s("./node_modules/bootstrap/js/src/util/index.js");class a extends o.default{dispose(){r.default.remove(this._element,this.constructor.DATA_KEY),n.default.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,s=!0){(0,i.executeAfterTransition)(e,t,s)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return r.default.get((0,i.getElement)(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.6"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}constructor(e,t){super(),(e=(0,i.getElement)(e))&&(this._element=e,this._config=this._getConfig(t),r.default.set(this._element,this.constructor.DATA_KEY,this))}}const l=a},"./node_modules/bootstrap/js/src/dom/data.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const r=new Map,n={set(e,t,s){r.has(e)||r.set(e,new Map);const n=r.get(e);n.has(t)||0===n.size?n.set(t,s):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`)},get:(e,t)=>r.has(e)&&r.get(e).get(t)||null,remove(e,t){if(!r.has(e))return;const s=r.get(e);s.delete(t),0===s.size&&r.delete(e)}}},"./node_modules/bootstrap/js/src/dom/event-handler.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s("./node_modules/bootstrap/js/src/util/index.js");const n=/[^.]*(?=\..*)\.|.*/,o=/\..*/,i=/::\d+$/,a={};let l=1;const d={mouseenter:"mouseover",mouseleave:"mouseout"},c=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function u(e,t){return t&&`${t}::${l++}`||e.uidEvent||l++}function h(e){const t=u(e);return e.uidEvent=t,a[t]=a[t]||{},a[t]}function m(e,t,s=null){return Object.values(e).find((e=>e.callable===t&&e.delegationSelector===s))}function f(e,t,s){const r="string"==typeof t,n=r?s:t||s;let o=_(e);return c.has(o)||(o=e),[r,n,o]}function p(e,t,s,r,o){if("string"!=typeof t||!e)return;let[i,a,l]=f(t,s,r);if(t in d){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};a=e(a)}const c=h(e),p=c[l]||(c[l]={}),g=m(p,a,i?s:null);if(g)return void(g.oneOff=g.oneOff&&o);const v=u(a,t.replace(n,"")),_=i?function(e,t,s){return function r(n){const o=e.querySelectorAll(t);for(let{target:i}=n;i&&i!==this;i=i.parentNode)for(const a of o)if(a===i)return b(n,{delegateTarget:i}),r.oneOff&&y.off(e,n.type,t,s),s.apply(i,[n])}}(e,s,a):function(e,t){return function s(r){return b(r,{delegateTarget:e}),s.oneOff&&y.off(e,r.type,t),t.apply(e,[r])}}(e,a);_.delegationSelector=i?s:null,_.callable=a,_.oneOff=o,_.uidEvent=v,p[v]=_,e.addEventListener(l,_,i)}function g(e,t,s,r,n){const o=m(t[s],r,n);o&&(e.removeEventListener(s,o,Boolean(n)),delete t[s][o.uidEvent])}function v(e,t,s,r){const n=t[s]||{};for(const[o,i]of Object.entries(n))o.includes(r)&&g(e,t,s,i.callable,i.delegationSelector)}function _(e){return e=e.replace(o,""),d[e]||e}const y={on(e,t,s,r){p(e,t,s,r,!1)},one(e,t,s,r){p(e,t,s,r,!0)},off(e,t,s,r){if("string"!=typeof t||!e)return;const[n,o,a]=f(t,s,r),l=a!==t,d=h(e),c=d[a]||{},u=t.startsWith(".");if(void 0===o){if(u)for(const s of Object.keys(d))v(e,d,s,t.slice(1));for(const[s,r]of Object.entries(c)){const n=s.replace(i,"");l&&!t.includes(n)||g(e,d,a,r.callable,r.delegationSelector)}}else{if(!Object.keys(c).length)return;g(e,d,a,o,n?s:null)}},trigger(e,t,s){if("string"!=typeof t||!e)return null;const n=(0,r.getjQuery)();let o=null,i=!0,a=!0,l=!1;t!==_(t)&&n&&(o=n.Event(t,s),n(e).trigger(o),i=!o.isPropagationStopped(),a=!o.isImmediatePropagationStopped(),l=o.isDefaultPrevented());const d=b(new Event(t,{bubbles:i,cancelable:!0}),s);return l&&d.preventDefault(),a&&e.dispatchEvent(d),d.defaultPrevented&&o&&o.preventDefault(),d}};function b(e,t={}){for(const[s,r]of Object.entries(t))try{e[s]=r}catch(t){Object.defineProperty(e,s,{configurable:!0,get:()=>r})}return e}const j=y},"./node_modules/bootstrap/js/src/dom/manipulator.js":(e,t,s)=>{"use strict";function r(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function n(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}s.r(t),s.d(t,{default:()=>o});const o={setDataAttribute(e,t,s){e.setAttribute(`data-bs-${n(t)}`,s)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${n(t)}`)},getDataAttributes(e){if(!e)return{};const t={},s=Object.keys(e.dataset).filter((e=>e.startsWith("bs")&&!e.startsWith("bsConfig")));for(const n of s){let s=n.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1),t[s]=r(e.dataset[n])}return t},getDataAttribute:(e,t)=>r(e.getAttribute(`data-bs-${n(t)}`))}},"./node_modules/bootstrap/js/src/dom/selector-engine.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/bootstrap/js/src/util/index.js");const n=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let s=e.getAttribute("href");if(!s||!s.includes("#")&&!s.startsWith("."))return null;s.includes("#")&&!s.startsWith("#")&&(s=`#${s.split("#")[1]}`),t=s&&"#"!==s?s.trim():null}return t?t.split(",").map((e=>(0,r.parseSelector)(e))).join(","):null},o={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const s=[];let r=e.parentNode.closest(t);for(;r;)s.push(r),r=r.parentNode.closest(t);return s},prev(e,t){let s=e.previousElementSibling;for(;s;){if(s.matches(t))return[s];s=s.previousElementSibling}return[]},next(e,t){let s=e.nextElementSibling;for(;s;){if(s.matches(t))return[s];s=s.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((e=>`${e}:not([tabindex^="-"])`)).join(",");return this.find(t,e).filter((e=>!(0,r.isDisabled)(e)&&(0,r.isVisible)(e)))},getSelectorFromElement(e){const t=n(e);return t&&o.findOne(t)?t:null},getElementFromSelector(e){const t=n(e);return t?o.findOne(t):null},getMultipleElementsFromSelector(e){const t=n(e);return t?o.find(t):[]}},i=o},"./node_modules/bootstrap/js/src/dropdown.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var r=s("./node_modules/@popperjs/core/lib/index.js"),n=s("./node_modules/@popperjs/core/lib/popper.js"),o=s("./node_modules/bootstrap/js/src/base-component.js"),i=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),a=s("./node_modules/bootstrap/js/src/dom/manipulator.js"),l=s("./node_modules/bootstrap/js/src/dom/selector-engine.js"),d=s("./node_modules/bootstrap/js/src/util/index.js");function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u="dropdown",h=".bs.dropdown",m=".data-api",f="ArrowUp",p="ArrowDown",g=`hide${h}`,v=`hidden${h}`,_=`show${h}`,y=`shown${h}`,b=`click${h}${m}`,j=`keydown${h}${m}`,w=`keyup${h}${m}`,S="show",x='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',E=`${x}.${S}`,A=".dropdown-menu",O=(0,d.isRTL)()?"top-end":"top-start",C=(0,d.isRTL)()?"top-start":"top-end",T=(0,d.isRTL)()?"bottom-end":"bottom-start",$=(0,d.isRTL)()?"bottom-start":"bottom-end",k=(0,d.isRTL)()?"left-start":"right-start",M=(0,d.isRTL)()?"right-start":"left-start",I={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},P={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class N extends o.default{static get Default(){return I}static get DefaultType(){return P}static get NAME(){return u}toggle(){return this._isShown()?this.hide():this.show()}show(){if((0,d.isDisabled)(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!i.default.trigger(this._element,_,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))i.default.on(e,"mouseover",d.noop);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(S),this._element.classList.add(S),i.default.trigger(this._element,y,e)}}hide(){if((0,d.isDisabled)(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!i.default.trigger(this._element,g,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))i.default.off(e,"mouseover",d.noop);this._popper&&this._popper.destroy(),this._menu.classList.remove(S),this._element.classList.remove(S),this._element.setAttribute("aria-expanded","false"),a.default.removeDataAttribute(this._menu,"popper"),i.default.trigger(this._element,v,e),this._element.focus()}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!(0,d.isElement)(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${u.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(void 0===r)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;"parent"===this._config.reference?e=this._parent:(0,d.isElement)(this._config.reference)?e=(0,d.getElement)(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=n.createPopper(e,this._menu,t)}_isShown(){return this._menu.classList.contains(S)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return k;if(e.classList.contains("dropstart"))return M;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?C:O:t?$:T}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(a.default.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){c(e,t,s[t])}))}return e}({},e,(0,d.execute)(this._config.popperConfig,[void 0,e]))}_selectMenuItem({key:e,target:t}){const s=l.default.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((e=>(0,d.isVisible)(e)));s.length&&(0,d.getNextActiveElement)(s,t,e===p,!s.includes(t)).focus()}static jQueryInterface(e){return this.each((function(){const t=N.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=l.default.find(E);for(const s of t){const t=N.getInstance(s);if(!t||!1===t._config.autoClose)continue;const r=e.composedPath(),n=r.includes(t._menu);if(r.includes(t._element)||"inside"===t._config.autoClose&&!n||"outside"===t._config.autoClose&&n)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const o={relatedTarget:t._element};"click"===e.type&&(o.clickEvent=e),t._completeHide(o)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),s="Escape"===e.key,r=[f,p].includes(e.key);if(!r&&!s)return;if(t&&!s)return;e.preventDefault();const n=this.matches(x)?this:l.default.prev(this,x)[0]||l.default.next(this,x)[0]||l.default.findOne(x,e.delegateTarget.parentNode),o=N.getOrCreateInstance(n);if(r)return e.stopPropagation(),o.show(),void o._selectMenuItem(e);o._isShown()&&(e.stopPropagation(),o.hide(),n.focus())}constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=l.default.next(this._element,A)[0]||l.default.prev(this._element,A)[0]||l.default.findOne(A,this._parent),this._inNavbar=this._detectNavbar()}}i.default.on(document,j,x,N.dataApiKeydownHandler),i.default.on(document,j,A,N.dataApiKeydownHandler),i.default.on(document,b,N.clearMenus),i.default.on(document,w,N.clearMenus),i.default.on(document,b,x,(function(e){e.preventDefault(),N.getOrCreateInstance(this).toggle()})),(0,d.defineJQueryPlugin)(N);const D=N},"./node_modules/bootstrap/js/src/modal.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var r=s("./node_modules/bootstrap/js/src/base-component.js"),n=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),o=s("./node_modules/bootstrap/js/src/dom/selector-engine.js"),i=s("./node_modules/bootstrap/js/src/util/backdrop.js"),a=s("./node_modules/bootstrap/js/src/util/component-functions.js"),l=s("./node_modules/bootstrap/js/src/util/focustrap.js"),d=s("./node_modules/bootstrap/js/src/util/index.js"),c=s("./node_modules/bootstrap/js/src/util/scrollbar.js");const u=".bs.modal",h=`hide${u}`,m=`hidePrevented${u}`,f=`hidden${u}`,p=`show${u}`,g=`shown${u}`,v=`resize${u}`,_=`click.dismiss${u}`,y=`mousedown.dismiss${u}`,b=`keydown.dismiss${u}`,j=`click${u}.data-api`,w="modal-open",S="show",x="modal-static",E={backdrop:!0,focus:!0,keyboard:!0},A={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class O extends r.default{static get Default(){return E}static get DefaultType(){return A}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||this._isTransitioning)return;n.default.trigger(this._element,p,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(w),this._adjustDialog(),this._backdrop.show((()=>this._showElement(e))))}hide(){if(!this._isShown||this._isTransitioning)return;n.default.trigger(this._element,h).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(S),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){n.default.off(window,u),n.default.off(this._dialog,u),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new i.default({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new l.default({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=o.default.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),(0,d.reflow)(this._element),this._element.classList.add(S);this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,n.default.trigger(this._element,g,{relatedTarget:e})}),this._dialog,this._isAnimated())}_addEventListeners(){n.default.on(this._element,b,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),n.default.on(window,v,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),n.default.on(this._element,y,(e=>{n.default.one(this._element,_,(t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(w),this._resetAdjustments(),this._scrollBar.reset(),n.default.trigger(this._element,f)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(n.default.trigger(this._element,m).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(x)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(x),this._queueCallback((()=>{this._element.classList.remove(x),this._queueCallback((()=>{this._element.style.overflowY=t}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),s=t>0;if(s&&!e){const e=(0,d.isRTL)()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!s&&e){const e=(0,d.isRTL)()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const s=O.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===s[e])throw new TypeError(`No method named "${e}"`);s[e](t)}}))}constructor(e,t){super(e,t),this._dialog=o.default.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new c.default,this._addEventListeners()}}n.default.on(document,j,'[data-bs-toggle="modal"]',(function(e){const t=o.default.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),n.default.one(t,p,(e=>{e.defaultPrevented||n.default.one(t,f,(()=>{(0,d.isVisible)(this)&&this.focus()}))}));const s=o.default.findOne(".modal.show");s&&O.getInstance(s).hide();O.getOrCreateInstance(t).toggle(this)})),(0,a.enableDismissTrigger)(O),(0,d.defineJQueryPlugin)(O);const C=O},"./node_modules/bootstrap/js/src/popover.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/bootstrap/js/src/tooltip.js"),n=s("./node_modules/bootstrap/js/src/util/index.js");function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){o(e,t,s[t])}))}return e}function a(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const l=".popover-header",d=".popover-body",c=a(i({},r.default.Default),{content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"}),u=a(i({},r.default.DefaultType),{content:"(null|string|element|function)"});class h extends r.default{static get Default(){return c}static get DefaultType(){return u}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[l]:this._getTitle(),[d]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each((function(){const t=h.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}(0,n.defineJQueryPlugin)(h);const m=h},"./node_modules/bootstrap/js/src/tooltip.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>A});var r=s("./node_modules/@popperjs/core/lib/popper.js"),n=s("./node_modules/@popperjs/core/lib/index.js"),o=s("./node_modules/bootstrap/js/src/base-component.js"),i=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),a=s("./node_modules/bootstrap/js/src/dom/manipulator.js"),l=s("./node_modules/bootstrap/js/src/util/index.js"),d=s("./node_modules/bootstrap/js/src/util/sanitizer.js"),c=s("./node_modules/bootstrap/js/src/util/template-factory.js");function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){u(e,t,s[t])}))}return e}function m(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const f=new Set(["sanitize","allowList","sanitizeFn"]),p="fade",g="show",v=".tooltip-inner",_=".modal",y="hide.bs.modal",b="hover",j="focus",w={AUTO:"auto",TOP:"top",RIGHT:(0,l.isRTL)()?"left":"right",BOTTOM:"bottom",LEFT:(0,l.isRTL)()?"right":"left"},S={allowList:d.DefaultAllowlist,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},x={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class E extends o.default{static get Default(){return S}static get DefaultType(){return x}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),i.default.off(this._element.closest(_),y,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=i.default.trigger(this._element,this.constructor.eventName("show")),t=((0,l.findShadowRoot)(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(s),i.default.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(s),s.classList.add(g),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))i.default.on(e,"mouseover",l.noop);this._queueCallback((()=>{i.default.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(!this._isShown())return;if(i.default.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented)return;if(this._getTipElement().classList.remove(g),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))i.default.off(e,"mouseover",l.noop);this._activeTrigger.click=!1,this._activeTrigger[j]=!1,this._activeTrigger[b]=!1,this._isHovered=null;this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),i.default.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(p,g),t.classList.add(`bs-${this.constructor.NAME}-auto`);const s=(0,l.getUID)(this.constructor.NAME).toString();return t.setAttribute("id",s),this._isAnimated()&&t.classList.add(p),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new c.default(m(h({},this._config),{content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)})),this._templateFactory}_getContentForTemplate(){return{[v]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(p)}_isShown(){return this.tip&&this.tip.classList.contains(g)}_createPopper(e){const t=(0,l.execute)(this._config.placement,[this,e,this._element]),s=w[t.toUpperCase()];return r.createPopper(this._element,e,this._getPopperConfig(s))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return(0,l.execute)(e,[this._element,this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return h({},t,(0,l.execute)(this._config.popperConfig,[void 0,t]))}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)i.default.on(this._element,this.constructor.eventName("click"),this._config.selector,(e=>{this._initializeOnDelegatedTarget(e).toggle()}));else if("manual"!==t){const e=t===b?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),s=t===b?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");i.default.on(this._element,e,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?j:b]=!0,t._enter()})),i.default.on(this._element,s,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?j:b]=t._element.contains(e.relatedTarget),t._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},i.default.on(this._element.closest(_),y,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=a.default.getDataAttributes(this._element);for(const e of Object.keys(t))f.has(e)&&delete t[e];return e=h({},t,"object"==typeof e&&e?e:{}),e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:(0,l.getElement)(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,s]of Object.entries(this._config))this.constructor.Default[t]!==s&&(e[t]=s);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each((function(){const t=E.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}constructor(e,t){if(void 0===n)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}}(0,l.defineJQueryPlugin)(E);const A=E},"./node_modules/bootstrap/js/src/util/backdrop.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),n=s("./node_modules/bootstrap/js/src/util/config.js"),o=s("./node_modules/bootstrap/js/src/util/index.js");const i="backdrop",a="show",l=`mousedown.bs.${i}`,d={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},c={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class u extends n.default{static get Default(){return d}static get DefaultType(){return c}static get NAME(){return i}show(e){if(!this._config.isVisible)return void(0,o.execute)(e);this._append();const t=this._getElement();this._config.isAnimated&&(0,o.reflow)(t),t.classList.add(a),this._emulateAnimation((()=>{(0,o.execute)(e)}))}hide(e){this._config.isVisible?(this._getElement().classList.remove(a),this._emulateAnimation((()=>{this.dispose(),(0,o.execute)(e)}))):(0,o.execute)(e)}dispose(){this._isAppended&&(r.default.off(this._element,l),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=(0,o.getElement)(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),r.default.on(e,l,(()=>{(0,o.execute)(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(e){(0,o.executeAfterTransition)(e,this._getElement(),this._config.isAnimated)}constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}}const h=u},"./node_modules/bootstrap/js/src/util/component-functions.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{enableDismissTrigger:()=>i});var r=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),n=s("./node_modules/bootstrap/js/src/dom/selector-engine.js"),o=s("./node_modules/bootstrap/js/src/util/index.js");const i=(e,t="hide")=>{const s=`click.dismiss${e.EVENT_KEY}`,i=e.NAME;r.default.on(document,s,`[data-bs-dismiss="${i}"]`,(function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),(0,o.isDisabled)(this))return;const r=n.default.getElementFromSelector(this)||this.closest(`.${i}`);e.getOrCreateInstance(r)[t]()}))}},"./node_modules/bootstrap/js/src/util/config.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/bootstrap/js/src/dom/manipulator.js"),n=s("./node_modules/bootstrap/js/src/util/index.js");function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const i=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const s=(0,n.isElement)(t)?r.default.getDataAttribute(t,"config"):{};return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){o(e,t,s[t])}))}return e}({},this.constructor.Default,"object"==typeof s?s:{},(0,n.isElement)(t)?r.default.getDataAttributes(t):{},"object"==typeof e?e:{})}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[s,r]of Object.entries(t)){const t=e[s],o=(0,n.isElement)(t)?"element":(0,n.toType)(t);if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${r}".`)}}}},"./node_modules/bootstrap/js/src/util/focustrap.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),n=s("./node_modules/bootstrap/js/src/dom/selector-engine.js"),o=s("./node_modules/bootstrap/js/src/util/config.js");const i=".bs.focustrap",a=`focusin${i}`,l=`keydown.tab${i}`,d="backward",c={autofocus:!0,trapElement:null},u={autofocus:"boolean",trapElement:"element"};class h extends o.default{static get Default(){return c}static get DefaultType(){return u}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),r.default.off(document,i),r.default.on(document,a,(e=>this._handleFocusin(e))),r.default.on(document,l,(e=>this._handleKeydown(e))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,r.default.off(document,i))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const s=n.default.focusableChildren(t);0===s.length?t.focus():this._lastTabNavDirection===d?s[s.length-1].focus():s[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?d:"forward")}constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}}const m=h},"./node_modules/bootstrap/js/src/util/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{defineJQueryPlugin:()=>b,execute:()=>j,executeAfterTransition:()=>w,findShadowRoot:()=>m,getElement:()=>c,getNextActiveElement:()=>S,getTransitionDurationFromElement:()=>a,getUID:()=>i,getjQuery:()=>g,isDisabled:()=>h,isElement:()=>d,isRTL:()=>y,isVisible:()=>u,noop:()=>f,onDOMContentLoaded:()=>_,parseSelector:()=>n,reflow:()=>p,toType:()=>o,triggerTransitionEnd:()=>l});const r="transitionend",n=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,((e,t)=>`#${CSS.escape(t)}`))),e),o=e=>null==e?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),i=e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e},a=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:s}=window.getComputedStyle(e);const r=Number.parseFloat(t),n=Number.parseFloat(s);return r||n?(t=t.split(",")[0],s=s.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(s))):0},l=e=>{e.dispatchEvent(new Event(r))},d=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),c=e=>d(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(n(e)):null,u=e=>{if(!d(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),s=e.closest("details:not([open])");if(!s)return t;if(s!==e){const t=e.closest("summary");if(t&&t.parentNode!==s)return!1;if(null===t)return!1}return t},h=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),m=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?m(e.parentNode):null},f=()=>{},p=e=>{e.offsetHeight},g=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,v=[],_=e=>{"loading"===document.readyState?(v.length||document.addEventListener("DOMContentLoaded",(()=>{for(const e of v)e()})),v.push(e)):e()},y=()=>"rtl"===document.documentElement.dir,b=e=>{_((()=>{const t=g();if(t){const s=e.NAME,r=t.fn[s];t.fn[s]=e.jQueryInterface,t.fn[s].Constructor=e,t.fn[s].noConflict=()=>(t.fn[s]=r,e.jQueryInterface)}}))},j=(e,t=[],s=e)=>"function"==typeof e?e.call(...t):s,w=(e,t,s=!0)=>{if(!s)return void j(e);const n=a(t)+5;let o=!1;const i=({target:s})=>{s===t&&(o=!0,t.removeEventListener(r,i),j(e))};t.addEventListener(r,i),setTimeout((()=>{o||l(t)}),n)},S=(e,t,s,r)=>{const n=e.length;let o=e.indexOf(t);return-1===o?!s&&r?e[n-1]:e[0]:(o+=s?1:-1,r&&(o=(o+n)%n),e[Math.max(0,Math.min(o,n-1))])}},"./node_modules/bootstrap/js/src/util/sanitizer.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{DefaultAllowlist:()=>r,sanitizeHtml:()=>a});const r={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},n=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),o=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,i=(e,t)=>{const s=e.nodeName.toLowerCase();return t.includes(s)?!n.has(s)||Boolean(o.test(e.nodeValue)):t.filter((e=>e instanceof RegExp)).some((e=>e.test(s)))};function a(e,t,s){if(!e.length)return e;if(s&&"function"==typeof s)return s(e);const r=(new window.DOMParser).parseFromString(e,"text/html"),n=[].concat(...r.body.querySelectorAll("*"));for(const e of n){const s=e.nodeName.toLowerCase();if(!Object.keys(t).includes(s)){e.remove();continue}const r=[].concat(...e.attributes),n=[].concat(t["*"]||[],t[s]||[]);for(const t of r)i(t,n)||e.removeAttribute(t.nodeName)}return r.body.innerHTML}},"./node_modules/bootstrap/js/src/util/scrollbar.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/bootstrap/js/src/dom/manipulator.js"),n=s("./node_modules/bootstrap/js/src/dom/selector-engine.js"),o=s("./node_modules/bootstrap/js/src/util/index.js");const i=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",a=".sticky-top",l="padding-right",d="margin-right";const c=class{getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,l,(t=>t+e)),this._setElementAttributes(i,l,(t=>t+e)),this._setElementAttributes(a,d,(t=>t-e))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,l),this._resetElementAttributes(i,l),this._resetElementAttributes(a,d)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,s){const r=this.getWidth();this._applyManipulationCallback(e,(e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+r)return;this._saveInitialAttribute(e,t);const n=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${s(Number.parseFloat(n))}px`)}))}_saveInitialAttribute(e,t){const s=e.style.getPropertyValue(t);s&&r.default.setDataAttribute(e,t,s)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,(e=>{const s=r.default.getDataAttribute(e,t);null!==s?(r.default.removeDataAttribute(e,t),e.style.setProperty(t,s)):e.style.removeProperty(t)}))}_applyManipulationCallback(e,t){if((0,o.isElement)(e))t(e);else for(const s of n.default.find(e,this._element))t(s)}constructor(){this._element=document.body}}},"./node_modules/bootstrap/js/src/util/template-factory.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/bootstrap/js/src/dom/selector-engine.js"),n=s("./node_modules/bootstrap/js/src/util/config.js"),o=s("./node_modules/bootstrap/js/src/util/sanitizer.js"),i=s("./node_modules/bootstrap/js/src/util/index.js");function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const l={allowList:o.DefaultAllowlist,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},d={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},c={entry:"(string|element|function|null)",selector:"(string|element)"};class u extends n.default{static get Default(){return l}static get DefaultType(){return d}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((e=>this._resolvePossibleFunction(e))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){a(e,t,s[t])}))}return e}({},this._config.content,e),this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[t,s]of Object.entries(this._config.content))this._setContent(e,s,t);const t=e.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&t.classList.add(...s.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,s]of Object.entries(e))super._typeCheckConfig({selector:t,entry:s},c)}_setContent(e,t,s){const n=r.default.findOne(s,e);n&&((t=this._resolvePossibleFunction(t))?(0,i.isElement)(t)?this._putElementInTemplate((0,i.getElement)(t),n):this._config.html?n.innerHTML=this._maybeSanitize(t):n.textContent=t:n.remove())}_maybeSanitize(e){return this._config.sanitize?(0,o.sanitizeHtml)(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return(0,i.execute)(e,[void 0,this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}constructor(e){super(),this._config=this._getConfig(e)}}const h=u},"./node_modules/client-compress/dist/index.js":e=>{window,e.exports=function(e){var t={};function s(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=7)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadImageElement=function(e,t){return new Promise((function(s,r){e.addEventListener("load",(function(){s(e)}),!1),e.addEventListener("error",(function(e){r(e)}),!1),e.src=t}))},t.resize=function(e,t,s,r){if(!s&&!r)return{currentWidth:e,currentHeight:t};var n=e/t,o=void 0,i=void 0;return n>s/r?i=(o=Math.min(e,s))/n:o=(i=Math.min(t,r))*n,{width:o,height:i}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base64ToFile=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg",s=window.atob(e),r=[],n=0;n<s.length;n++)r[n]=s.charCodeAt(n);return new window.Blob([new Uint8Array(r)],{type:t})},t.imageToCanvas=function(e,t,s,r){var n=document.createElement("canvas"),o=n.getContext("2d");if(n.width=t,n.height=s,!r||r>8)return o.drawImage(e,0,0,n.width,n.height),n;switch(r>4&&(n.width=s,n.height=t),r){case 2:o.translate(t,0),o.scale(-1,1);break;case 3:o.translate(t,s),o.rotate(Math.PI);break;case 4:o.translate(0,s),o.scale(1,-1);break;case 5:o.rotate(.5*Math.PI),o.scale(1,-1);break;case 6:o.rotate(.5*Math.PI),o.translate(0,-s);break;case 7:o.rotate(.5*Math.PI),o.translate(t,-s),o.scale(-1,1);break;case 8:o.rotate(-.5*Math.PI),o.translate(-t,0)}return r>4?o.drawImage(e,0,0,n.height,n.width):o.drawImage(e,0,0,n.width,n.height),n},t.canvasToBlob=function(e,t){return new Promise((function(s,r){e.toBlob((function(e){s(e)}),"image/jpeg",t)}))},t.size=function(e){return{kB:.001*e,MB:1e-6*e}},t.blobToBase64=function(e){return new Promise((function(t,s){var r=new window.FileReader;r.addEventListener("load",(function(e){t(e.target.result)}),!1),r.addEventListener("error",(function(e){s(e)}),!1),r.readAsDataURL(e)}))}},function(e,t,s){e.exports=s(6)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractOrientation=function(e){return new Promise((function(t,s){var r=new window.FileReader;r.onload=function(e){var s=new DataView(e.target.result);65496!==s.getUint16(0,!1)&&t(-2);for(var r=s.byteLength,n=2;n<r;){var o=s.getUint16(n,!1);if(n+=2,65505===o){1165519206!==s.getUint32(n+=2,!1)&&t(-1);var i=18761===s.getUint16(n+=6,!1);n+=s.getUint32(n+4,i);var a=s.getUint16(n,i);n+=2;for(var l=0;l<a;l++)274===s.getUint16(n+12*l,i)&&t(s.getUint16(n+12*l+8,i))}else{if(65280&~o)break;n+=s.getUint16(n,!1)}}t(-1)},r.readAsArrayBuffer(e.slice(0,65536))}))}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=s(2))&&r.__esModule?r:{default:r},o=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),i=s(3),a=s(0),l=s(1);function d(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,s){return function r(n,o){try{var i=t[n](o),a=i.value}catch(e){return void s(e)}if(!i.done)return Promise.resolve(a).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(a)}("next")}))}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.name=t.name,this.type=t.type,this.size=t.size}return o(e,[{key:"setData",value:function(e){this.data=e,this.size=e.size,this.type=e.type}},{key:"_calculateOrientation",value:function(){var e=d(n.default.mark((function e(){var t;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.extractOrientation)(this.data);case 2:t=e.sent,this.orientation=t;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=d(n.default.mark((function e(){var t,s;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._calculateOrientation();case 2:return t=URL.createObjectURL(this.data),s=new window.Image,e.next=6,(0,a.loadImageElement)(s,t);case 6:URL.revokeObjectURL(t),this._img=s,this.width=s.naturalWidth,this.height=s.naturalHeight;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCanvas",value:function(e,t,s){return void 0!==s?(0,l.imageToCanvas)(this._img,e,t,s):(0,l.imageToCanvas)(this._img,e,t,this.orientation)}}]),e}();t.default=c,e.exports=t.default},function(e,t){!function(t){"use strict";var s,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",d="object"==typeof e,c=t.regeneratorRuntime;if(c)d&&(e.exports=c);else{(c=t.regeneratorRuntime=d?e.exports:{}).wrap=b;var u="suspendedStart",h="suspendedYield",m="executing",f="completed",p={},g={};g[i]=function(){return this};var v=Object.getPrototypeOf,_=v&&v(v(k([])));_&&_!==r&&n.call(_,i)&&(g=_);var y=x.prototype=w.prototype=Object.create(g);S.prototype=y.constructor=x,x.constructor=S,x[l]=S.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(y),e},c.awrap=function(e){return{__await:e}},E(A.prototype),A.prototype[a]=function(){return this},c.AsyncIterator=A,c.async=function(e,t,s,r){var n=new A(b(e,t,s,r));return c.isGeneratorFunction(t)?n:n.next().then((function(e){return e.done?e.value:n.next()}))},E(y),y[l]="Generator",y[i]=function(){return this},y.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var s in e)t.push(s);return t.reverse(),function s(){for(;t.length;){var r=t.pop();if(r in e)return s.value=r,s.done=!1,s}return s.done=!0,s}},c.values=k,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=s)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=s),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),d=n.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var s=this.tryEntries.length-1;s>=0;--s){var r=this.tryEntries[s];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var s=this.tryEntries[t];if(s.finallyLoc===e)return this.complete(s.completion,s.afterLoc),T(s),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var s=this.tryEntries[t];if(s.tryLoc===e){var r=s.completion;if("throw"===r.type){var n=r.arg;T(s)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=s),p}}}function b(e,t,s,r){var n=t&&t.prototype instanceof w?t:w,o=Object.create(n.prototype),i=new $(r||[]);return o._invoke=function(e,t,s){var r=u;return function(n,o){if(r===m)throw new Error("Generator is already running");if(r===f){if("throw"===n)throw o;return M()}for(s.method=n,s.arg=o;;){var i=s.delegate;if(i){var a=O(i,s);if(a){if(a===p)continue;return a}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(r===u)throw r=f,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);r=m;var l=j(e,t,s);if("normal"===l.type){if(r=s.done?f:h,l.arg===p)continue;return{value:l.arg,done:s.done}}"throw"===l.type&&(r=f,s.method="throw",s.arg=l.arg)}}}(e,s,i),o}function j(e,t,s){try{return{type:"normal",arg:e.call(t,s)}}catch(e){return{type:"throw",arg:e}}}function w(){}function S(){}function x(){}function E(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function A(e){var t;this._invoke=function(s,r){function o(){return new Promise((function(t,o){!function t(s,r,o,i){var a=j(e[s],e,r);if("throw"!==a.type){var l=a.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?Promise.resolve(d.__await).then((function(e){t("next",e,o,i)}),(function(e){t("throw",e,o,i)})):Promise.resolve(d).then((function(e){l.value=e,o(l)}),i)}i(a.arg)}(s,r,t,o)}))}return t=t?t.then(o,o):o()}}function O(e,t){var r=e.iterator[t.method];if(r===s){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=s,O(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=j(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=s),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=s,t.done=!0,t};return o.next=o}}return{next:M}}function M(){return{value:s,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,s){var r=function(){return this}()||Function("return this")(),n=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=n&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=s(5),n)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(s(2)),n=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}(s(1)),i=s(0),a=l(s(4));function l(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,s){return function r(n,o){try{var i=t[n](o),a=i.value}catch(e){return void s(e)}if(!i.done)return Promise.resolve(a).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(a)}("next")}))}}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setOptions(t)}return n(e,[{key:"setOptions",value:function(e){var t={targetSize:1/0,quality:.75,minQuality:.5,qualityStepSize:.1,maxWidth:1920,maxHeight:1920,resize:!0,throwIfSizeNotReached:!1,autoRotate:!0},s=new Proxy(e,{get:function(e,s){return s in e?e[s]:t[s]}});this.options=s}},{key:"_compressFile",value:function(){var e=d(r.default.mark((function e(t){var s,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new a.default(t),(n={}).start=window.performance.now(),n.quality=this.options.quality,n.startType=s.type,e.next=7,s.load();case 7:return e.next=9,this._compressImage(s,n);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_compressImage",value:function(){var e=d(r.default.mark((function e(t,s){var n,a,l,d,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.startWidth=t.width,s.startHeight=t.height,n=void 0,a=void 0,this.options.resize?(l=(0,i.resize)(t.width,t.height,this.options.maxWidth,this.options.maxHeight),n=l.width,a=l.height):(n=t.width,a=t.height),s.endWidth=n,s.endHeight=a,d=this.doAutoRotation?void 0:1,c=t.getCanvas(n,a,d),s.iterations=0,s.startSizeMB=o.size(t.size).MB,e.next=12,this._loopCompression(c,t,s);case 12:return s.endSizeMB=o.size(t.size).MB,s.sizeReducedInPercent=(s.startSizeMB-s.endSizeMB)/s.startSizeMB*100,s.end=window.performance.now(),s.elapsedTimeInSeconds=(s.end-s.start)/1e3,s.endType=t.type,e.abrupt("return",{photo:t,info:s});case 18:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"_loopCompression",value:function(){var e=d(r.default.mark((function e(t,s,n){var i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.iterations++,e.t0=s,e.next=4,o.canvasToBlob(t,n.quality);case 4:if(e.t1=e.sent,e.t0.setData.call(e.t0,e.t1),1==n.iterations&&(s.width=n.endWidth,s.height=n.endHeight),!(o.size(s.size).MB>this.options.targetSize)){e.next=24;break}if(!(n.quality.toFixed(10)-.1<this.options.minQuality)){e.next=18;break}if(i="Couldn't compress image to target size while maintaining quality.\n        Target size: "+this.options.targetSize+"\n        Actual size: "+o.size(s.size).MB,this.options.throwIfSizeNotReached){e.next=14;break}console.error(i),e.next=15;break;case 14:throw new Error(i);case 15:case 24:return e.abrupt("return");case 18:return n.quality-=this.options.qualityStepSize,e.next=21,this._loopCompression(t,s,n);case 21:return e.abrupt("return",e.sent);case 22:e.next=25;break;case 25:case"end":return e.stop()}}),e,this)})));return function(t,s,r){return e.apply(this,arguments)}}()},{key:"setAutoRotate",value:function(){var t=d(r.default.mark((function t(){var s;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.automaticRotationFeatureTest();case 2:s=t.sent,this.doAutoRotation=this.options.autoRotate&&!s;case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"compress",value:function(){var e=d(r.default.mark((function e(t){var s=this;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setAutoRotate();case 2:return e.abrupt("return",Promise.all(t.map((function(e){return s._compressFile(e)}))));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"blobToBase64",value:function(){var e=d(r.default.mark((function e(){var t=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.blobToBase64.apply(o,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadImageElement",value:function(){var e=d(r.default.mark((function e(){var t=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.loadImageElement.apply(void 0,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"automaticRotationFeatureTest",value:function(){return new Promise((function(e){var t=new Image;t.onload=function(){var s=1===t.width&&2===t.height;e(s)},t.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="}))}}]),e}();t.default=c,e.exports=t.default}])},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/bookmark-views/styles/bookmarks.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/chatboxviews/styles/chats.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/chatview/styles/chat-bottom-panel.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/chatview/styles/chat-head.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/chatview/styles/index.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/controlbox/styles/_controlbox.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/controlbox/styles/buttons.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/controlbox/styles/loginform.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/disco-views/styles/disco-browser.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/fullscreen/styles/fullscreen.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/headlines-view/styles/headlines-head.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/headlines-view/styles/headlines.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/mam-views/styles/placeholder.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/minimize/styles/minimize.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/modal/styles/_modal.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/modal/styles/popover.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/modal/styles/toast.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/modals/styles/config.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/modals/styles/occupant.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/add-muc-modal.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/affiliation-form.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/index.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/moderator-tools.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/muc-bottom-panel.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/muc-chat-content.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/muc-details-modal.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/muc-head.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/muc-occupant.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/muc-occupants.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/muc-sidebar.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/nickname-form.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/occupant-bottom-panel.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/role-form.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/omemo/styles/omemo.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/profile/modals/styles/profile.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/profile/modals/styles/user-settings.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/profile/styles/profile.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/register/styles/register.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/roomslist/styles/roomsgroups.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/rootview/styles/background.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/rootview/styles/root.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/rosterview/modals/styles/add-contact.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/rosterview/styles/approval-alert.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/rosterview/styles/roster.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/singleton/singleton.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/autocomplete/styles/_autocomplete.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/avatar/avatar.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/chat/styles/chat-content.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/chat/styles/emoji.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/chat/styles/message-actions.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/chat/styles/message-body.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/chat/styles/retraction.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/chat/styles/toolbar.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/chat/styles/unfurl.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/components/styles/dropdown.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/components/styles/icon.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/components/styles/image-picker.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/components/styles/list-filter.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/components/styles/message-versions.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/components/styles/split-resize.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/gif/styles.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/modals/styles/image.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/modals/styles/user-details.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/qrcode/qrcode.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/styles/index.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/styles/status.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/texture/styles/audio.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/texture/styles/texture.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/templates/styles/spinner.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/css-loader/dist/runtime/sourceMaps.js"),n=s.n(r),o=s("./node_modules/css-loader/dist/runtime/api.js"),i=s.n(o)()(n());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const a=i},"./node_modules/css-loader/dist/runtime/api.js":e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",r=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),r&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),r&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,r,n,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(i[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);r&&i[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),s&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=s):c[2]=s),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},"./node_modules/css-loader/dist/runtime/sourceMaps.js":e=>{"use strict";e.exports=function(e){var t=e[1],s=e[3];if(!s)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(n," */");return[t].concat([o]).join("\n")}return[t].join("\n")}},"./node_modules/dayjs/dayjs.min.js":function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,s=36e5,r="millisecond",n="second",o="minute",i="hour",a="day",l="week",d="month",c="quarter",u="year",h="date",m="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],s=e%100;return"["+e+(t[(s-20)%10]||t[s]||t[0])+"]"}},v=function(e,t,s){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(s)+e},_={s:v,z:function(e){var t=-e.utcOffset(),s=Math.abs(t),r=Math.floor(s/60),n=s%60;return(t<=0?"+":"-")+v(r,2,"0")+":"+v(n,2,"0")},m:function e(t,s){if(t.date()<s.date())return-e(s,t);var r=12*(s.year()-t.year())+(s.month()-t.month()),n=t.clone().add(r,d),o=s-n<0,i=t.clone().add(r+(o?-1:1),d);return+(-(r+(s-n)/(o?n-i:i-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:d,y:u,w:l,d:a,D:h,h:i,m:o,s:n,ms:r,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",b={};b[y]=g;var j="$isDayjsObject",w=function(e){return e instanceof A||!(!e||!e[j])},S=function e(t,s,r){var n;if(!t)return y;if("string"==typeof t){var o=t.toLowerCase();b[o]&&(n=o),s&&(b[o]=s,n=o);var i=t.split("-");if(!n&&i.length>1)return e(i[0])}else{var a=t.name;b[a]=t,n=a}return!r&&n&&(y=n),n||!r&&y},x=function(e,t){if(w(e))return e.clone();var s="object"==typeof t?t:{};return s.date=e,s.args=arguments,new A(s)},E=_;E.l=S,E.i=w,E.w=function(e,t){return x(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var A=function(){function g(e){this.$L=S(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[j]=!0}var v=g.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,s=e.utc;if(null===t)return new Date(NaN);if(E.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(f);if(r){var n=r[2]-1||0,o=(r[7]||"0").substring(0,3);return s?new Date(Date.UTC(r[1],n,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],n,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return E},v.isValid=function(){return!(this.$d.toString()===m)},v.isSame=function(e,t){var s=x(e);return this.startOf(t)<=s&&s<=this.endOf(t)},v.isAfter=function(e,t){return x(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<x(e)},v.$g=function(e,t,s){return E.u(e)?this[t]:this.set(s,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var s=this,r=!!E.u(t)||t,c=E.p(e),m=function(e,t){var n=E.w(s.$u?Date.UTC(s.$y,t,e):new Date(s.$y,t,e),s);return r?n:n.endOf(a)},f=function(e,t){return E.w(s.toDate()[e].apply(s.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),s)},p=this.$W,g=this.$M,v=this.$D,_="set"+(this.$u?"UTC":"");switch(c){case u:return r?m(1,0):m(31,11);case d:return r?m(1,g):m(0,g+1);case l:var y=this.$locale().weekStart||0,b=(p<y?p+7:p)-y;return m(r?v-b:v+(6-b),g);case a:case h:return f(_+"Hours",0);case i:return f(_+"Minutes",1);case o:return f(_+"Seconds",2);case n:return f(_+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var s,l=E.p(e),c="set"+(this.$u?"UTC":""),m=(s={},s[a]=c+"Date",s[h]=c+"Date",s[d]=c+"Month",s[u]=c+"FullYear",s[i]=c+"Hours",s[o]=c+"Minutes",s[n]=c+"Seconds",s[r]=c+"Milliseconds",s)[l],f=l===a?this.$D+(t-this.$W):t;if(l===d||l===u){var p=this.clone().set(h,1);p.$d[m](f),p.init(),this.$d=p.set(h,Math.min(this.$D,p.daysInMonth())).$d}else m&&this.$d[m](f);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[E.p(e)]()},v.add=function(r,c){var h,m=this;r=Number(r);var f=E.p(c),p=function(e){var t=x(m);return E.w(t.date(t.date()+Math.round(e*r)),m)};if(f===d)return this.set(d,this.$M+r);if(f===u)return this.set(u,this.$y+r);if(f===a)return p(1);if(f===l)return p(7);var g=(h={},h[o]=t,h[i]=s,h[n]=e,h)[f]||1,v=this.$d.getTime()+r*g;return E.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,s=this.$locale();if(!this.isValid())return s.invalidDate||m;var r=e||"YYYY-MM-DDTHH:mm:ssZ",n=E.z(this),o=this.$H,i=this.$m,a=this.$M,l=s.weekdays,d=s.months,c=s.meridiem,u=function(e,s,n,o){return e&&(e[s]||e(t,r))||n[s].slice(0,o)},h=function(e){return E.s(o%12||12,e,"0")},f=c||function(e,t,s){var r=e<12?"AM":"PM";return s?r.toLowerCase():r};return r.replace(p,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return E.s(t.$y,4,"0");case"M":return a+1;case"MM":return E.s(a+1,2,"0");case"MMM":return u(s.monthsShort,a,d,3);case"MMMM":return u(d,a);case"D":return t.$D;case"DD":return E.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(s.weekdaysMin,t.$W,l,2);case"ddd":return u(s.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(o);case"HH":return E.s(o,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return f(o,i,!0);case"A":return f(o,i,!1);case"m":return String(i);case"mm":return E.s(i,2,"0");case"s":return String(t.$s);case"ss":return E.s(t.$s,2,"0");case"SSS":return E.s(t.$ms,3,"0");case"Z":return n}return null}(e)||n.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,h,m){var f,p=this,g=E.p(h),v=x(r),_=(v.utcOffset()-this.utcOffset())*t,y=this-v,b=function(){return E.m(p,v)};switch(g){case u:f=b()/12;break;case d:f=b();break;case c:f=b()/3;break;case l:f=(y-_)/6048e5;break;case a:f=(y-_)/864e5;break;case i:f=y/s;break;case o:f=y/t;break;case n:f=y/e;break;default:f=y}return m?f:E.a(f)},v.daysInMonth=function(){return this.endOf(d).$D},v.$locale=function(){return b[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var s=this.clone(),r=S(e,t,!0);return r&&(s.$L=r),s},v.clone=function(){return E.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},g}(),O=A.prototype;return x.prototype=O,[["$ms",r],["$s",n],["$m",o],["$H",i],["$W",a],["$M",d],["$y",u],["$D",h]].forEach((function(e){O[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),x.extend=function(e,t){return e.$i||(e(t,A,x),e.$i=!0),x},x.locale=S,x.isDayjs=w,x.unix=function(e){return x(1e3*e)},x.en=b[y],x.Ls=b,x.p={},x}()},"./node_modules/dayjs/locale lazy recursive ^\\.\\/.*\\.js$":(e,t,s)=>{var r={"./af.js":["./node_modules/dayjs/locale/af.js","locales/dayjs/af-js"],"./am.js":["./node_modules/dayjs/locale/am.js","locales/dayjs/am-js"],"./ar-dz.js":["./node_modules/dayjs/locale/ar-dz.js","locales/dayjs/ar-dz-js"],"./ar-iq.js":["./node_modules/dayjs/locale/ar-iq.js","locales/dayjs/ar-iq-js"],"./ar-kw.js":["./node_modules/dayjs/locale/ar-kw.js","locales/dayjs/ar-kw-js"],"./ar-ly.js":["./node_modules/dayjs/locale/ar-ly.js","locales/dayjs/ar-ly-js"],"./ar-ma.js":["./node_modules/dayjs/locale/ar-ma.js","locales/dayjs/ar-ma-js"],"./ar-sa.js":["./node_modules/dayjs/locale/ar-sa.js","locales/dayjs/ar-sa-js"],"./ar-tn.js":["./node_modules/dayjs/locale/ar-tn.js","locales/dayjs/ar-tn-js"],"./ar.js":["./node_modules/dayjs/locale/ar.js","locales/dayjs/ar-js"],"./az.js":["./node_modules/dayjs/locale/az.js","locales/dayjs/az-js"],"./be.js":["./node_modules/dayjs/locale/be.js","locales/dayjs/be-js"],"./bg.js":["./node_modules/dayjs/locale/bg.js","locales/dayjs/bg-js"],"./bi.js":["./node_modules/dayjs/locale/bi.js","locales/dayjs/bi-js"],"./bm.js":["./node_modules/dayjs/locale/bm.js","locales/dayjs/bm-js"],"./bn-bd.js":["./node_modules/dayjs/locale/bn-bd.js","locales/dayjs/bn-bd-js"],"./bn.js":["./node_modules/dayjs/locale/bn.js","locales/dayjs/bn-js"],"./bo.js":["./node_modules/dayjs/locale/bo.js","locales/dayjs/bo-js"],"./br.js":["./node_modules/dayjs/locale/br.js","locales/dayjs/br-js"],"./bs.js":["./node_modules/dayjs/locale/bs.js","locales/dayjs/bs-js"],"./ca.js":["./node_modules/dayjs/locale/ca.js","locales/dayjs/ca-js"],"./cs.js":["./node_modules/dayjs/locale/cs.js","locales/dayjs/cs-js"],"./cv.js":["./node_modules/dayjs/locale/cv.js","locales/dayjs/cv-js"],"./cy.js":["./node_modules/dayjs/locale/cy.js","locales/dayjs/cy-js"],"./da.js":["./node_modules/dayjs/locale/da.js","locales/dayjs/da-js"],"./de-at.js":["./node_modules/dayjs/locale/de-at.js","locales/dayjs/de-at-js"],"./de-ch.js":["./node_modules/dayjs/locale/de-ch.js","locales/dayjs/de-ch-js"],"./de.js":["./node_modules/dayjs/locale/de.js","locales/dayjs/de-js"],"./dv.js":["./node_modules/dayjs/locale/dv.js","locales/dayjs/dv-js"],"./el.js":["./node_modules/dayjs/locale/el.js","locales/dayjs/el-js"],"./en-au.js":["./node_modules/dayjs/locale/en-au.js","locales/dayjs/en-au-js"],"./en-ca.js":["./node_modules/dayjs/locale/en-ca.js","locales/dayjs/en-ca-js"],"./en-gb.js":["./node_modules/dayjs/locale/en-gb.js","locales/dayjs/en-gb-js"],"./en-ie.js":["./node_modules/dayjs/locale/en-ie.js","locales/dayjs/en-ie-js"],"./en-il.js":["./node_modules/dayjs/locale/en-il.js","locales/dayjs/en-il-js"],"./en-in.js":["./node_modules/dayjs/locale/en-in.js","locales/dayjs/en-in-js"],"./en-nz.js":["./node_modules/dayjs/locale/en-nz.js","locales/dayjs/en-nz-js"],"./en-sg.js":["./node_modules/dayjs/locale/en-sg.js","locales/dayjs/en-sg-js"],"./en-tt.js":["./node_modules/dayjs/locale/en-tt.js","locales/dayjs/en-tt-js"],"./en.js":["./node_modules/dayjs/locale/en.js","locales/dayjs/en-js"],"./eo.js":["./node_modules/dayjs/locale/eo.js","locales/dayjs/eo-js"],"./es-do.js":["./node_modules/dayjs/locale/es-do.js","locales/dayjs/es-do-js"],"./es-mx.js":["./node_modules/dayjs/locale/es-mx.js","locales/dayjs/es-mx-js"],"./es-pr.js":["./node_modules/dayjs/locale/es-pr.js","locales/dayjs/es-pr-js"],"./es-us.js":["./node_modules/dayjs/locale/es-us.js","locales/dayjs/es-us-js"],"./es.js":["./node_modules/dayjs/locale/es.js","locales/dayjs/es-js"],"./et.js":["./node_modules/dayjs/locale/et.js","locales/dayjs/et-js"],"./eu.js":["./node_modules/dayjs/locale/eu.js","locales/dayjs/eu-js"],"./fa.js":["./node_modules/dayjs/locale/fa.js","locales/dayjs/fa-js"],"./fi.js":["./node_modules/dayjs/locale/fi.js","locales/dayjs/fi-js"],"./fo.js":["./node_modules/dayjs/locale/fo.js","locales/dayjs/fo-js"],"./fr-ca.js":["./node_modules/dayjs/locale/fr-ca.js","locales/dayjs/fr-ca-js"],"./fr-ch.js":["./node_modules/dayjs/locale/fr-ch.js","locales/dayjs/fr-ch-js"],"./fr.js":["./node_modules/dayjs/locale/fr.js","locales/dayjs/fr-js"],"./fy.js":["./node_modules/dayjs/locale/fy.js","locales/dayjs/fy-js"],"./ga.js":["./node_modules/dayjs/locale/ga.js","locales/dayjs/ga-js"],"./gd.js":["./node_modules/dayjs/locale/gd.js","locales/dayjs/gd-js"],"./gl.js":["./node_modules/dayjs/locale/gl.js","locales/dayjs/gl-js"],"./gom-latn.js":["./node_modules/dayjs/locale/gom-latn.js","locales/dayjs/gom-latn-js"],"./gu.js":["./node_modules/dayjs/locale/gu.js","locales/dayjs/gu-js"],"./he.js":["./node_modules/dayjs/locale/he.js","locales/dayjs/he-js"],"./hi.js":["./node_modules/dayjs/locale/hi.js","locales/dayjs/hi-js"],"./hr.js":["./node_modules/dayjs/locale/hr.js","locales/dayjs/hr-js"],"./ht.js":["./node_modules/dayjs/locale/ht.js","locales/dayjs/ht-js"],"./hu.js":["./node_modules/dayjs/locale/hu.js","locales/dayjs/hu-js"],"./hy-am.js":["./node_modules/dayjs/locale/hy-am.js","locales/dayjs/hy-am-js"],"./id.js":["./node_modules/dayjs/locale/id.js","locales/dayjs/id-js"],"./is.js":["./node_modules/dayjs/locale/is.js","locales/dayjs/is-js"],"./it-ch.js":["./node_modules/dayjs/locale/it-ch.js","locales/dayjs/it-ch-js"],"./it.js":["./node_modules/dayjs/locale/it.js","locales/dayjs/it-js"],"./ja.js":["./node_modules/dayjs/locale/ja.js","locales/dayjs/ja-js"],"./jv.js":["./node_modules/dayjs/locale/jv.js","locales/dayjs/jv-js"],"./ka.js":["./node_modules/dayjs/locale/ka.js","locales/dayjs/ka-js"],"./kk.js":["./node_modules/dayjs/locale/kk.js","locales/dayjs/kk-js"],"./km.js":["./node_modules/dayjs/locale/km.js","locales/dayjs/km-js"],"./kn.js":["./node_modules/dayjs/locale/kn.js","locales/dayjs/kn-js"],"./ko.js":["./node_modules/dayjs/locale/ko.js","locales/dayjs/ko-js"],"./ku.js":["./node_modules/dayjs/locale/ku.js","locales/dayjs/ku-js"],"./ky.js":["./node_modules/dayjs/locale/ky.js","locales/dayjs/ky-js"],"./lb.js":["./node_modules/dayjs/locale/lb.js","locales/dayjs/lb-js"],"./lo.js":["./node_modules/dayjs/locale/lo.js","locales/dayjs/lo-js"],"./lt.js":["./node_modules/dayjs/locale/lt.js","locales/dayjs/lt-js"],"./lv.js":["./node_modules/dayjs/locale/lv.js","locales/dayjs/lv-js"],"./me.js":["./node_modules/dayjs/locale/me.js","locales/dayjs/me-js"],"./mi.js":["./node_modules/dayjs/locale/mi.js","locales/dayjs/mi-js"],"./mk.js":["./node_modules/dayjs/locale/mk.js","locales/dayjs/mk-js"],"./ml.js":["./node_modules/dayjs/locale/ml.js","locales/dayjs/ml-js"],"./mn.js":["./node_modules/dayjs/locale/mn.js","locales/dayjs/mn-js"],"./mr.js":["./node_modules/dayjs/locale/mr.js","locales/dayjs/mr-js"],"./ms-my.js":["./node_modules/dayjs/locale/ms-my.js","locales/dayjs/ms-my-js"],"./ms.js":["./node_modules/dayjs/locale/ms.js","locales/dayjs/ms-js"],"./mt.js":["./node_modules/dayjs/locale/mt.js","locales/dayjs/mt-js"],"./my.js":["./node_modules/dayjs/locale/my.js","locales/dayjs/my-js"],"./nb.js":["./node_modules/dayjs/locale/nb.js","locales/dayjs/nb-js"],"./ne.js":["./node_modules/dayjs/locale/ne.js","locales/dayjs/ne-js"],"./nl-be.js":["./node_modules/dayjs/locale/nl-be.js","locales/dayjs/nl-be-js"],"./nl.js":["./node_modules/dayjs/locale/nl.js","locales/dayjs/nl-js"],"./nn.js":["./node_modules/dayjs/locale/nn.js","locales/dayjs/nn-js"],"./oc-lnc.js":["./node_modules/dayjs/locale/oc-lnc.js","locales/dayjs/oc-lnc-js"],"./pa-in.js":["./node_modules/dayjs/locale/pa-in.js","locales/dayjs/pa-in-js"],"./pl.js":["./node_modules/dayjs/locale/pl.js","locales/dayjs/pl-js"],"./pt-br.js":["./node_modules/dayjs/locale/pt-br.js","locales/dayjs/pt-br-js"],"./pt.js":["./node_modules/dayjs/locale/pt.js","locales/dayjs/pt-js"],"./rn.js":["./node_modules/dayjs/locale/rn.js","locales/dayjs/rn-js"],"./ro.js":["./node_modules/dayjs/locale/ro.js","locales/dayjs/ro-js"],"./ru.js":["./node_modules/dayjs/locale/ru.js","locales/dayjs/ru-js"],"./rw.js":["./node_modules/dayjs/locale/rw.js","locales/dayjs/rw-js"],"./sd.js":["./node_modules/dayjs/locale/sd.js","locales/dayjs/sd-js"],"./se.js":["./node_modules/dayjs/locale/se.js","locales/dayjs/se-js"],"./si.js":["./node_modules/dayjs/locale/si.js","locales/dayjs/si-js"],"./sk.js":["./node_modules/dayjs/locale/sk.js","locales/dayjs/sk-js"],"./sl.js":["./node_modules/dayjs/locale/sl.js","locales/dayjs/sl-js"],"./sq.js":["./node_modules/dayjs/locale/sq.js","locales/dayjs/sq-js"],"./sr-cyrl.js":["./node_modules/dayjs/locale/sr-cyrl.js","locales/dayjs/sr-cyrl-js"],"./sr.js":["./node_modules/dayjs/locale/sr.js","locales/dayjs/sr-js"],"./ss.js":["./node_modules/dayjs/locale/ss.js","locales/dayjs/ss-js"],"./sv-fi.js":["./node_modules/dayjs/locale/sv-fi.js","locales/dayjs/sv-fi-js"],"./sv.js":["./node_modules/dayjs/locale/sv.js","locales/dayjs/sv-js"],"./sw.js":["./node_modules/dayjs/locale/sw.js","locales/dayjs/sw-js"],"./ta.js":["./node_modules/dayjs/locale/ta.js","locales/dayjs/ta-js"],"./te.js":["./node_modules/dayjs/locale/te.js","locales/dayjs/te-js"],"./tet.js":["./node_modules/dayjs/locale/tet.js","locales/dayjs/tet-js"],"./tg.js":["./node_modules/dayjs/locale/tg.js","locales/dayjs/tg-js"],"./th.js":["./node_modules/dayjs/locale/th.js","locales/dayjs/th-js"],"./tk.js":["./node_modules/dayjs/locale/tk.js","locales/dayjs/tk-js"],"./tl-ph.js":["./node_modules/dayjs/locale/tl-ph.js","locales/dayjs/tl-ph-js"],"./tlh.js":["./node_modules/dayjs/locale/tlh.js","locales/dayjs/tlh-js"],"./tr.js":["./node_modules/dayjs/locale/tr.js","locales/dayjs/tr-js"],"./tzl.js":["./node_modules/dayjs/locale/tzl.js","locales/dayjs/tzl-js"],"./tzm-latn.js":["./node_modules/dayjs/locale/tzm-latn.js","locales/dayjs/tzm-latn-js"],"./tzm.js":["./node_modules/dayjs/locale/tzm.js","locales/dayjs/tzm-js"],"./ug-cn.js":["./node_modules/dayjs/locale/ug-cn.js","locales/dayjs/ug-cn-js"],"./uk.js":["./node_modules/dayjs/locale/uk.js","locales/dayjs/uk-js"],"./ur.js":["./node_modules/dayjs/locale/ur.js","locales/dayjs/ur-js"],"./uz-latn.js":["./node_modules/dayjs/locale/uz-latn.js","locales/dayjs/uz-latn-js"],"./uz.js":["./node_modules/dayjs/locale/uz.js","locales/dayjs/uz-js"],"./vi.js":["./node_modules/dayjs/locale/vi.js","locales/dayjs/vi-js"],"./x-pseudo.js":["./node_modules/dayjs/locale/x-pseudo.js","locales/dayjs/x-pseudo-js"],"./yo.js":["./node_modules/dayjs/locale/yo.js","locales/dayjs/yo-js"],"./zh-cn.js":["./node_modules/dayjs/locale/zh-cn.js","locales/dayjs/zh-cn-js"],"./zh-hk.js":["./node_modules/dayjs/locale/zh-hk.js","locales/dayjs/zh-hk-js"],"./zh-tw.js":["./node_modules/dayjs/locale/zh-tw.js","locales/dayjs/zh-tw-js"],"./zh.js":["./node_modules/dayjs/locale/zh.js","locales/dayjs/zh-js"]};function n(e){if(!s.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],n=t[0];return s.e(t[1]).then((()=>s.t(n,23)))}n.keys=()=>Object.keys(r),n.id="./node_modules/dayjs/locale lazy recursive ^\\.\\/.*\\.js$",e.exports=n},"./node_modules/dayjs/plugin/advancedFormat.js":function(e){e.exports=function(){"use strict";return function(e,t){var s=t.prototype,r=s.format;s.format=function(e){var t=this,s=this.$locale();if(!this.isValid())return r.bind(this)(e);var n=this.$utils(),o=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return s.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return s.ordinal(t.week(),"W");case"w":case"ww":return n.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return n.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return n.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}}));return r.bind(this)(o)}}}()},"./node_modules/dompurify/dist/purify.es.mjs":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ae});const{entries:r,setPrototypeOf:n,isFrozen:o,getPrototypeOf:i,getOwnPropertyDescriptor:a}=Object;let{freeze:l,seal:d,create:c}=Object,{apply:u,construct:h}="undefined"!=typeof Reflect&&Reflect;l||(l=function(e){return e}),d||(d=function(e){return e}),u||(u=function(e,t,s){return e.apply(t,s)}),h||(h=function(e,t){return new e(...t)});const m=C(Array.prototype.forEach),f=C(Array.prototype.lastIndexOf),p=C(Array.prototype.pop),g=C(Array.prototype.push),v=C(Array.prototype.splice),_=C(String.prototype.toLowerCase),y=C(String.prototype.toString),b=C(String.prototype.match),j=C(String.prototype.replace),w=C(String.prototype.indexOf),S=C(String.prototype.trim),x=C(Object.prototype.hasOwnProperty),E=C(RegExp.prototype.test),A=(O=TypeError,function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return h(O,t)});var O;function C(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var s=arguments.length,r=new Array(s>1?s-1:0),n=1;n<s;n++)r[n-1]=arguments[n];return u(e,t,r)}}function T(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;n&&n(e,null);let r=t.length;for(;r--;){let n=t[r];if("string"==typeof n){const e=s(n);e!==n&&(o(t)||(t[r]=e),n=e)}e[n]=!0}return e}function $(e){for(let t=0;t<e.length;t++){x(e,t)||(e[t]=null)}return e}function k(e){const t=c(null);for(const[s,n]of r(e)){x(e,s)&&(Array.isArray(n)?t[s]=$(n):n&&"object"==typeof n&&n.constructor===Object?t[s]=k(n):t[s]=n)}return t}function M(e,t){for(;null!==e;){const s=a(e,t);if(s){if(s.get)return C(s.get);if("function"==typeof s.value)return C(s.value)}e=i(e)}return function(){return null}}const I=l(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),P=l(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),N=l(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),D=l(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),R=l(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),z=l(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),L=l(["#text"]),U=l(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),B=l(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),F=l(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),q=l(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),H=d(/\{\{[\w\W]*|[\w\W]*\}\}/gm),G=d(/<%[\w\W]*|[\w\W]*%>/gm),W=d(/\$\{[\w\W]*/gm),V=d(/^data-[\-\w.\u00B7-\uFFFF]+$/),K=d(/^aria-[\-\w]+$/),J=d(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Y=d(/^(?:\w+script|data):/i),Q=d(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),X=d(/^html$/i),Z=d(/^[a-z][.\w]*(-[.\w]+)+$/i);var ee=Object.freeze({__proto__:null,ARIA_ATTR:K,ATTR_WHITESPACE:Q,CUSTOM_ELEMENT:Z,DATA_ATTR:V,DOCTYPE_NAME:X,ERB_EXPR:G,IS_ALLOWED_URI:J,IS_SCRIPT_OR_DATA:Y,MUSTACHE_EXPR:H,TMPLIT_EXPR:W});const te=1,se=3,re=7,ne=8,oe=9,ie=function(){return"undefined"==typeof window?null:window};var ae=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie();const s=t=>e(t);if(s.version="3.2.6",s.removed=[],!t||!t.document||t.document.nodeType!==oe||!t.Element)return s.isSupported=!1,s;let{document:n}=t;const o=n,i=o.currentScript,{DocumentFragment:a,HTMLTemplateElement:d,Node:u,Element:h,NodeFilter:O,NamedNodeMap:C=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:$,DOMParser:H,trustedTypes:G}=t,W=h.prototype,V=M(W,"cloneNode"),K=M(W,"remove"),Y=M(W,"nextSibling"),Q=M(W,"childNodes"),Z=M(W,"parentNode");if("function"==typeof d){const e=n.createElement("template");e.content&&e.content.ownerDocument&&(n=e.content.ownerDocument)}let ae,le="";const{implementation:de,createNodeIterator:ce,createDocumentFragment:ue,getElementsByTagName:he}=n,{importNode:me}=o;let fe={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};s.isSupported="function"==typeof r&&"function"==typeof Z&&de&&void 0!==de.createHTMLDocument;const{MUSTACHE_EXPR:pe,ERB_EXPR:ge,TMPLIT_EXPR:ve,DATA_ATTR:_e,ARIA_ATTR:ye,IS_SCRIPT_OR_DATA:be,ATTR_WHITESPACE:je,CUSTOM_ELEMENT:we}=ee;let{IS_ALLOWED_URI:Se}=ee,xe=null;const Ee=T({},[...I,...P,...N,...R,...L]);let Ae=null;const Oe=T({},[...U,...B,...F,...q]);let Ce=Object.seal(c(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Te=null,$e=null,ke=!0,Me=!0,Ie=!1,Pe=!0,Ne=!1,De=!0,Re=!1,ze=!1,Le=!1,Ue=!1,Be=!1,Fe=!1,qe=!0,He=!1,Ge=!0,We=!1,Ve={},Ke=null;const Je=T({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ye=null;const Qe=T({},["audio","video","img","source","image","track"]);let Xe=null;const Ze=T({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),et="http://www.w3.org/1998/Math/MathML",tt="http://www.w3.org/2000/svg",st="http://www.w3.org/1999/xhtml";let rt=st,nt=!1,ot=null;const it=T({},[et,tt,st],y);let at=T({},["mi","mo","mn","ms","mtext"]),lt=T({},["annotation-xml"]);const dt=T({},["title","style","font","a","script"]);let ct=null;const ut=["application/xhtml+xml","text/html"];let ht=null,mt=null;const ft=n.createElement("form"),pt=function(e){return e instanceof RegExp||e instanceof Function},gt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!mt||mt!==e){if(e&&"object"==typeof e||(e={}),e=k(e),ct=-1===ut.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,ht="application/xhtml+xml"===ct?y:_,xe=x(e,"ALLOWED_TAGS")?T({},e.ALLOWED_TAGS,ht):Ee,Ae=x(e,"ALLOWED_ATTR")?T({},e.ALLOWED_ATTR,ht):Oe,ot=x(e,"ALLOWED_NAMESPACES")?T({},e.ALLOWED_NAMESPACES,y):it,Xe=x(e,"ADD_URI_SAFE_ATTR")?T(k(Ze),e.ADD_URI_SAFE_ATTR,ht):Ze,Ye=x(e,"ADD_DATA_URI_TAGS")?T(k(Qe),e.ADD_DATA_URI_TAGS,ht):Qe,Ke=x(e,"FORBID_CONTENTS")?T({},e.FORBID_CONTENTS,ht):Je,Te=x(e,"FORBID_TAGS")?T({},e.FORBID_TAGS,ht):k({}),$e=x(e,"FORBID_ATTR")?T({},e.FORBID_ATTR,ht):k({}),Ve=!!x(e,"USE_PROFILES")&&e.USE_PROFILES,ke=!1!==e.ALLOW_ARIA_ATTR,Me=!1!==e.ALLOW_DATA_ATTR,Ie=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Pe=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Ne=e.SAFE_FOR_TEMPLATES||!1,De=!1!==e.SAFE_FOR_XML,Re=e.WHOLE_DOCUMENT||!1,Ue=e.RETURN_DOM||!1,Be=e.RETURN_DOM_FRAGMENT||!1,Fe=e.RETURN_TRUSTED_TYPE||!1,Le=e.FORCE_BODY||!1,qe=!1!==e.SANITIZE_DOM,He=e.SANITIZE_NAMED_PROPS||!1,Ge=!1!==e.KEEP_CONTENT,We=e.IN_PLACE||!1,Se=e.ALLOWED_URI_REGEXP||J,rt=e.NAMESPACE||st,at=e.MATHML_TEXT_INTEGRATION_POINTS||at,lt=e.HTML_INTEGRATION_POINTS||lt,Ce=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&pt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ce.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&pt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ce.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Ce.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ne&&(Me=!1),Be&&(Ue=!0),Ve&&(xe=T({},L),Ae=[],!0===Ve.html&&(T(xe,I),T(Ae,U)),!0===Ve.svg&&(T(xe,P),T(Ae,B),T(Ae,q)),!0===Ve.svgFilters&&(T(xe,N),T(Ae,B),T(Ae,q)),!0===Ve.mathMl&&(T(xe,R),T(Ae,F),T(Ae,q))),e.ADD_TAGS&&(xe===Ee&&(xe=k(xe)),T(xe,e.ADD_TAGS,ht)),e.ADD_ATTR&&(Ae===Oe&&(Ae=k(Ae)),T(Ae,e.ADD_ATTR,ht)),e.ADD_URI_SAFE_ATTR&&T(Xe,e.ADD_URI_SAFE_ATTR,ht),e.FORBID_CONTENTS&&(Ke===Je&&(Ke=k(Ke)),T(Ke,e.FORBID_CONTENTS,ht)),Ge&&(xe["#text"]=!0),Re&&T(xe,["html","head","body"]),xe.table&&(T(xe,["tbody"]),delete Te.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw A('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw A('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ae=e.TRUSTED_TYPES_POLICY,le=ae.createHTML("")}else void 0===ae&&(ae=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let s=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(s=t.getAttribute(r));const n="dompurify"+(s?"#"+s:"");try{return e.createPolicy(n,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+n+" could not be created."),null}}(G,i)),null!==ae&&"string"==typeof le&&(le=ae.createHTML(""));l&&l(e),mt=e}},vt=T({},[...P,...N,...D]),_t=T({},[...R,...z]),yt=function(e){g(s.removed,{element:e});try{Z(e).removeChild(e)}catch(t){K(e)}},bt=function(e,t){try{g(s.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){g(s.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(Ue||Be)try{yt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},jt=function(e){let t=null,s=null;if(Le)e="<remove></remove>"+e;else{const t=b(e,/^[\r\n\t ]+/);s=t&&t[0]}"application/xhtml+xml"===ct&&rt===st&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=ae?ae.createHTML(e):e;if(rt===st)try{t=(new H).parseFromString(r,ct)}catch(e){}if(!t||!t.documentElement){t=de.createDocument(rt,"template",null);try{t.documentElement.innerHTML=nt?le:r}catch(e){}}const o=t.body||t.documentElement;return e&&s&&o.insertBefore(n.createTextNode(s),o.childNodes[0]||null),rt===st?he.call(t,Re?"html":"body")[0]:Re?t.documentElement:o},wt=function(e){return ce.call(e.ownerDocument||e,e,O.SHOW_ELEMENT|O.SHOW_COMMENT|O.SHOW_TEXT|O.SHOW_PROCESSING_INSTRUCTION|O.SHOW_CDATA_SECTION,null)},St=function(e){return e instanceof $&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof C)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},xt=function(e){return"function"==typeof u&&e instanceof u};function Et(e,t,r){m(e,(e=>{e.call(s,t,r,mt)}))}const At=function(e){let t=null;if(Et(fe.beforeSanitizeElements,e,null),St(e))return yt(e),!0;const r=ht(e.nodeName);if(Et(fe.uponSanitizeElement,e,{tagName:r,allowedTags:xe}),De&&e.hasChildNodes()&&!xt(e.firstElementChild)&&E(/<[/\w!]/g,e.innerHTML)&&E(/<[/\w!]/g,e.textContent))return yt(e),!0;if(e.nodeType===re)return yt(e),!0;if(De&&e.nodeType===ne&&E(/<[/\w]/g,e.data))return yt(e),!0;if(!xe[r]||Te[r]){if(!Te[r]&&Ct(r)){if(Ce.tagNameCheck instanceof RegExp&&E(Ce.tagNameCheck,r))return!1;if(Ce.tagNameCheck instanceof Function&&Ce.tagNameCheck(r))return!1}if(Ge&&!Ke[r]){const t=Z(e)||e.parentNode,s=Q(e)||e.childNodes;if(s&&t){for(let r=s.length-1;r>=0;--r){const n=V(s[r],!0);n.__removalCount=(e.__removalCount||0)+1,t.insertBefore(n,Y(e))}}}return yt(e),!0}return e instanceof h&&!function(e){let t=Z(e);t&&t.tagName||(t={namespaceURI:rt,tagName:"template"});const s=_(e.tagName),r=_(t.tagName);return!!ot[e.namespaceURI]&&(e.namespaceURI===tt?t.namespaceURI===st?"svg"===s:t.namespaceURI===et?"svg"===s&&("annotation-xml"===r||at[r]):Boolean(vt[s]):e.namespaceURI===et?t.namespaceURI===st?"math"===s:t.namespaceURI===tt?"math"===s&&lt[r]:Boolean(_t[s]):e.namespaceURI===st?!(t.namespaceURI===tt&&!lt[r])&&!(t.namespaceURI===et&&!at[r])&&!_t[s]&&(dt[s]||!vt[s]):!("application/xhtml+xml"!==ct||!ot[e.namespaceURI]))}(e)?(yt(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!E(/<\/no(script|embed|frames)/i,e.innerHTML)?(Ne&&e.nodeType===se&&(t=e.textContent,m([pe,ge,ve],(e=>{t=j(t,e," ")})),e.textContent!==t&&(g(s.removed,{element:e.cloneNode()}),e.textContent=t)),Et(fe.afterSanitizeElements,e,null),!1):(yt(e),!0)},Ot=function(e,t,s){if(qe&&("id"===t||"name"===t)&&(s in n||s in ft))return!1;if(Me&&!$e[t]&&E(_e,t));else if(ke&&E(ye,t));else if(!Ae[t]||$e[t]){if(!(Ct(e)&&(Ce.tagNameCheck instanceof RegExp&&E(Ce.tagNameCheck,e)||Ce.tagNameCheck instanceof Function&&Ce.tagNameCheck(e))&&(Ce.attributeNameCheck instanceof RegExp&&E(Ce.attributeNameCheck,t)||Ce.attributeNameCheck instanceof Function&&Ce.attributeNameCheck(t))||"is"===t&&Ce.allowCustomizedBuiltInElements&&(Ce.tagNameCheck instanceof RegExp&&E(Ce.tagNameCheck,s)||Ce.tagNameCheck instanceof Function&&Ce.tagNameCheck(s))))return!1}else if(Xe[t]);else if(E(Se,j(s,je,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==w(s,"data:")||!Ye[e]){if(Ie&&!E(be,j(s,je,"")));else if(s)return!1}else;return!0},Ct=function(e){return"annotation-xml"!==e&&b(e,we)},Tt=function(e){Et(fe.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||St(e))return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ae,forceKeepAttr:void 0};let n=t.length;for(;n--;){const o=t[n],{name:i,namespaceURI:a,value:l}=o,d=ht(i),c=l;let u="value"===i?c:S(c);if(r.attrName=d,r.attrValue=u,r.keepAttr=!0,r.forceKeepAttr=void 0,Et(fe.uponSanitizeAttribute,e,r),u=r.attrValue,!He||"id"!==d&&"name"!==d||(bt(i,e),u="user-content-"+u),De&&E(/((--!?|])>)|<\/(style|title)/i,u)){bt(i,e);continue}if(r.forceKeepAttr)continue;if(!r.keepAttr){bt(i,e);continue}if(!Pe&&E(/\/>/i,u)){bt(i,e);continue}Ne&&m([pe,ge,ve],(e=>{u=j(u,e," ")}));const h=ht(e.nodeName);if(Ot(h,d,u)){if(ae&&"object"==typeof G&&"function"==typeof G.getAttributeType)if(a);else switch(G.getAttributeType(h,d)){case"TrustedHTML":u=ae.createHTML(u);break;case"TrustedScriptURL":u=ae.createScriptURL(u)}if(u!==c)try{a?e.setAttributeNS(a,i,u):e.setAttribute(i,u),St(e)?yt(e):p(s.removed)}catch(t){bt(i,e)}}else bt(i,e)}Et(fe.afterSanitizeAttributes,e,null)},$t=function e(t){let s=null;const r=wt(t);for(Et(fe.beforeSanitizeShadowDOM,t,null);s=r.nextNode();)Et(fe.uponSanitizeShadowNode,s,null),At(s),Tt(s),s.content instanceof a&&e(s.content);Et(fe.afterSanitizeShadowDOM,t,null)};return s.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,n=null,i=null,l=null;if(nt=!e,nt&&(e="\x3c!--\x3e"),"string"!=typeof e&&!xt(e)){if("function"!=typeof e.toString)throw A("toString is not a function");if("string"!=typeof(e=e.toString()))throw A("dirty is not a string, aborting")}if(!s.isSupported)return e;if(ze||gt(t),s.removed=[],"string"==typeof e&&(We=!1),We){if(e.nodeName){const t=ht(e.nodeName);if(!xe[t]||Te[t])throw A("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof u)r=jt("\x3c!----\x3e"),n=r.ownerDocument.importNode(e,!0),n.nodeType===te&&"BODY"===n.nodeName||"HTML"===n.nodeName?r=n:r.appendChild(n);else{if(!Ue&&!Ne&&!Re&&-1===e.indexOf("<"))return ae&&Fe?ae.createHTML(e):e;if(r=jt(e),!r)return Ue?null:Fe?le:""}r&&Le&&yt(r.firstChild);const d=wt(We?e:r);for(;i=d.nextNode();)At(i),Tt(i),i.content instanceof a&&$t(i.content);if(We)return e;if(Ue){if(Be)for(l=ue.call(r.ownerDocument);r.firstChild;)l.appendChild(r.firstChild);else l=r;return(Ae.shadowroot||Ae.shadowrootmode)&&(l=me.call(o,l,!0)),l}let c=Re?r.outerHTML:r.innerHTML;return Re&&xe["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&E(X,r.ownerDocument.doctype.name)&&(c="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+c),Ne&&m([pe,ge,ve],(e=>{c=j(c,e," ")})),ae&&Fe?ae.createHTML(c):c},s.setConfig=function(){gt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),ze=!0},s.clearConfig=function(){mt=null,ze=!1},s.isValidAttribute=function(e,t,s){mt||gt({});const r=ht(e),n=ht(t);return Ot(r,n,s)},s.addHook=function(e,t){"function"==typeof t&&g(fe[e],t)},s.removeHook=function(e,t){if(void 0!==t){const s=f(fe[e],t);return-1===s?void 0:v(fe[e],s,1)[0]}return p(fe[e])},s.removeHooks=function(e){fe[e]=[]},s.removeAllHooks=function(){fe={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},s}()},"./node_modules/favico.js-slevomat/favico.js":(e,t)=>{var s,r;r=function(e){"use strict";e=e||{};var t,s,r,n,o,i,a,l,d,c,u,h,m,f,p={bgColor:"#d00",textColor:"#fff",fontFamily:"sans-serif",fontStyle:"bold",type:"circle",position:"down",animation:"slide",elementId:!1,element:null,dataUrl:!1,win:window};(h={}).ff="undefined"!=typeof InstallTrigger,h.chrome=!!window.chrome,h.opera=!!window.opera||navigator.userAgent.indexOf("Opera")>=0,h.ie=!1,h.safari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,h.supported=h.chrome||h.ff||h.opera;var g=[];u=function(){},l=!1;var v={ready:function(){l=!0,v.reset(),u()},reset:function(){l&&(g=[],d=!1,c=!1,i.clearRect(0,0,n,r),i.drawImage(a,0,0,n,r),b.setIcon(o),window.clearTimeout(m),window.clearTimeout(void 0))},start:function(){if(l&&!c&&g.length>0){c=!0;var e=function(){["type","animation","bgColor","textColor","fontFamily","fontStyle"].forEach((function(e){e in g[0].options&&(t[e]=g[0].options[e])})),S.run(g[0].options,(function(){d=g[0],c=!1,g.length>0&&(g.shift(),v.start())}),!1)};d?S.run(d.options,(function(){e()}),!0):e()}}},_={},y=function(e){return e.n="number"==typeof e.n?Math.abs(0|e.n):e.n,e.x=n*e.x,e.y=r*e.y,e.w=n*e.w,e.h=r*e.h,e.len=(""+e.n).length,e};_.circle=function(e){var s=!1;2===(e=y(e)).len?(e.x=e.x-.4*e.w,e.w=1.4*e.w,s=!0):e.len>=3&&(e.x=e.x-.65*e.w,e.w=1.65*e.w,s=!0),i.clearRect(0,0,n,r),i.drawImage(a,0,0,n,r),i.beginPath(),i.font=t.fontStyle+" "+Math.floor(e.h*(e.n>99?.85:1))+"px "+t.fontFamily,i.textAlign="center",s?(i.moveTo(e.x+e.w/2,e.y),i.lineTo(e.x+e.w-e.h/2,e.y),i.quadraticCurveTo(e.x+e.w,e.y,e.x+e.w,e.y+e.h/2),i.lineTo(e.x+e.w,e.y+e.h-e.h/2),i.quadraticCurveTo(e.x+e.w,e.y+e.h,e.x+e.w-e.h/2,e.y+e.h),i.lineTo(e.x+e.h/2,e.y+e.h),i.quadraticCurveTo(e.x,e.y+e.h,e.x,e.y+e.h-e.h/2),i.lineTo(e.x,e.y+e.h/2),i.quadraticCurveTo(e.x,e.y,e.x+e.h/2,e.y)):i.arc(e.x+e.w/2,e.y+e.h/2,e.h/2,0,2*Math.PI),i.fillStyle="rgba("+t.bgColor.r+","+t.bgColor.g+","+t.bgColor.b+","+e.o+")",i.fill(),i.closePath(),i.beginPath(),i.stroke(),i.fillStyle="rgba("+t.textColor.r+","+t.textColor.g+","+t.textColor.b+","+e.o+")","number"==typeof e.n&&e.n>999?i.fillText((e.n>9999?9:Math.floor(e.n/1e3))+"k+",Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.2*e.h)):i.fillText(e.n,Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.15*e.h)),i.closePath()},_.rectangle=function(e){2===(e=y(e)).len?(e.x=e.x-.4*e.w,e.w=1.4*e.w):e.len>=3&&(e.x=e.x-.65*e.w,e.w=1.65*e.w),i.clearRect(0,0,n,r),i.drawImage(a,0,0,n,r),i.beginPath(),i.font=t.fontStyle+" "+Math.floor(e.h*(e.n>99?.9:1))+"px "+t.fontFamily,i.textAlign="center",i.fillStyle="rgba("+t.bgColor.r+","+t.bgColor.g+","+t.bgColor.b+","+e.o+")",i.fillRect(e.x,e.y,e.w,e.h),i.fillStyle="rgba("+t.textColor.r+","+t.textColor.g+","+t.textColor.b+","+e.o+")","number"==typeof e.n&&e.n>999?i.fillText((e.n>9999?9:Math.floor(e.n/1e3))+"k+",Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.2*e.h)):i.fillText(e.n,Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.15*e.h)),i.closePath()};var b={};function j(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,s,r){return t+t+s+s+r+r}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return!!t&&{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}}function w(e,t){var s,r={};for(s in e)r[s]=e[s];for(s in t)r[s]=t[s];return r}b.getIcons=function(){var e=[];return t.element?e=[t.element]:t.elementId?(e=[f.getElementById(t.elementId)])[0].setAttribute("href",e[0].getAttribute("src")):0===(e=function(){for(var e=[],t=f.getElementsByTagName("head")[0].getElementsByTagName("link"),s=0;s<t.length;s++)/(^|\s)icon(\s|$)/i.test(t[s].getAttribute("rel"))&&e.push(t[s]);return e}()).length&&((e=[f.createElement("link")])[0].setAttribute("rel","icon"),f.getElementsByTagName("head")[0].appendChild(e[0])),e.forEach((function(e){e.setAttribute("type","image/png")})),e},b.setIcon=function(e){var t=e.toDataURL("image/png");b.setIconSrc(t)},b.setIconSrc=function(e){if(t.dataUrl&&t.dataUrl(e),t.element)t.element.setAttribute("href",e),t.element.setAttribute("src",e);else if(t.elementId){var r=f.getElementById(t.elementId);r.setAttribute("href",e),r.setAttribute("src",e)}else if(h.ff||h.opera){var n=s[s.length-1],o=f.createElement("link");s=[o],h.opera&&o.setAttribute("rel","icon"),o.setAttribute("rel","icon"),o.setAttribute("type","image/png"),f.getElementsByTagName("head")[0].appendChild(o),o.setAttribute("href",e),n.parentNode&&n.parentNode.removeChild(n)}else s.forEach((function(t){t.setAttribute("href",e)}))};var S={duration:40,types:{}};return S.types.fade=[{x:.4,y:.4,w:.6,h:.6,o:0},{x:.4,y:.4,w:.6,h:.6,o:.1},{x:.4,y:.4,w:.6,h:.6,o:.2},{x:.4,y:.4,w:.6,h:.6,o:.3},{x:.4,y:.4,w:.6,h:.6,o:.4},{x:.4,y:.4,w:.6,h:.6,o:.5},{x:.4,y:.4,w:.6,h:.6,o:.6},{x:.4,y:.4,w:.6,h:.6,o:.7},{x:.4,y:.4,w:.6,h:.6,o:.8},{x:.4,y:.4,w:.6,h:.6,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],S.types.none=[{x:.4,y:.4,w:.6,h:.6,o:1}],S.types.pop=[{x:1,y:1,w:0,h:0,o:1},{x:.9,y:.9,w:.1,h:.1,o:1},{x:.8,y:.8,w:.2,h:.2,o:1},{x:.7,y:.7,w:.3,h:.3,o:1},{x:.6,y:.6,w:.4,h:.4,o:1},{x:.5,y:.5,w:.5,h:.5,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],S.types.popFade=[{x:.75,y:.75,w:0,h:0,o:0},{x:.65,y:.65,w:.1,h:.1,o:.2},{x:.6,y:.6,w:.2,h:.2,o:.4},{x:.55,y:.55,w:.3,h:.3,o:.6},{x:.5,y:.5,w:.4,h:.4,o:.8},{x:.45,y:.45,w:.5,h:.5,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],S.types.slide=[{x:.4,y:1,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.8,w:.6,h:.6,o:1},{x:.4,y:.7,w:.6,h:.6,o:1},{x:.4,y:.6,w:.6,h:.6,o:1},{x:.4,y:.5,w:.6,h:.6,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],S.run=function(e,s,r,n){var i=S.types[f.hidden||f.msHidden||f.webkitHidden||f.mozHidden?"none":t.animation];n=!0===r?void 0!==n?n:i.length-1:void 0!==n?n:0,s=s||function(){},n<i.length&&n>=0?(_[t.type](w(e,i[n])),m=setTimeout((function(){r?n-=1:n+=1,S.run(e,s,r,n)}),S.duration),b.setIcon(o)):s()},function(){(t=w(p,e)).bgColor=j(t.bgColor),t.textColor=j(t.textColor),t.position=t.position.toLowerCase(),t.animation=S.types[""+t.animation]?t.animation:p.animation,f=t.win.document;var l=t.position.indexOf("up")>-1,d=t.position.indexOf("left")>-1;if(l||d)for(var c in S.types)for(var u=0;u<S.types[c].length;u++){var h=S.types[c][u];l&&(h.y<.6?h.y=h.y-.4:h.y=h.y-2*h.y+(1-h.w)),d&&(h.x<.6?h.x=h.x-.4:h.x=h.x-2*h.x+(1-h.h)),S.types[c][u]=h}t.type=_[""+t.type]?t.type:p.type,s=b.getIcons(),o=document.createElement("canvas"),a=document.createElement("img");var m=s[s.length-1];m.hasAttribute("href")?(a.setAttribute("crossOrigin","anonymous"),a.onload=function(){r=a.height>0?a.height:32,n=a.width>0?a.width:32,o.height=r,o.width=n,i=o.getContext("2d"),v.ready()},a.setAttribute("src",m.getAttribute("href"))):(r=32,n=32,a.height=r,a.width=n,o.height=r,o.width=n,i=o.getContext("2d"),v.ready())}(),{badge:function(e,t){t=("string"==typeof t?{animation:t}:t)||{},u=function(){try{if("number"==typeof e?e>0:""!==e){var s={type:"badge",options:{n:e}};if("animation"in t&&S.types[""+t.animation]&&(s.options.animation=""+t.animation),"type"in t&&_[""+t.type]&&(s.options.type=""+t.type),["bgColor","textColor"].forEach((function(e){e in t&&(s.options[e]=j(t[e]))})),["fontStyle","fontFamily"].forEach((function(e){e in t&&(s.options[e]=t[e])})),g.push(s),g.length>100)throw new Error("Too many badges requests in queue.");v.start()}else v.reset()}catch(e){throw new Error("Error setting badge. Message: "+e.message)}},l&&u()},setOpt:function(e,s){var r=e;null==s&&"[object Object]"==Object.prototype.toString.call(e)||((r={})[e]=s);for(var n=Object.keys(r),o=0;o<n.length;o++)"bgColor"==n[o]||"textColor"==n[o]?t[n[o]]=j(r[n[o]]):t[n[o]]=r[n[o]];g.push(d),v.start()},reset:v.reset,browser:{supported:h.supported}}},void 0===(s=function(){return r}.apply(t,[]))||(e.exports=s)},"./node_modules/filesize/dist/filesize.esm.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{filesize:()=>A,partial:()=>O});const r="array",n="bit",o="bits",i="byte",a="bytes",l="",d="exponent",c="function",u="iec",h="Invalid number",m="Invalid rounding method",f="jedec",p="object",g=".",v="round",_="s",y="si",b="kbit",j="kB",w=" ",S="string",x="0",E={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function A(e,{bits:t=!1,pad:s=!1,base:A=-1,round:O=2,locale:C=l,localeOptions:T={},separator:$=l,spacer:k=w,symbols:M={},standard:I=l,output:P=S,fullform:N=!1,fullforms:D=[],exponent:R=-1,roundingMethod:z=v,precision:L=0}={}){let U=R,B=Number(e),F=[],q=0,H=l;I===y?(A=10,I=f):I===u||I===f?A=2:2===A?I=u:(A=10,I=f);const G=10===A?1e3:1024,W=!0===N,V=B<0,K=Math[z];if("bigint"!=typeof e&&isNaN(e))throw new TypeError(h);if(typeof K!==c)throw new TypeError(m);if(V&&(B=-B),(-1===U||isNaN(U))&&(U=Math.floor(Math.log(B)/Math.log(G)),U<0&&(U=0)),U>8&&(L>0&&(L+=8-U),U=8),P===d)return U;if(0===B)F[0]=0,H=F[1]=E.symbol[I][t?o:a][U];else{q=B/(2===A?Math.pow(2,10*U):Math.pow(1e3,U)),t&&(q*=8,q>=G&&U<8&&(q/=G,U++));const e=Math.pow(10,U>0?O:0);F[0]=K(q*e)/e,F[0]===G&&U<8&&-1===R&&(F[0]=1,U++),H=F[1]=10===A&&1===U?t?b:j:E.symbol[I][t?o:a][U]}if(V&&(F[0]=-F[0]),L>0&&(F[0]=F[0].toPrecision(L)),F[1]=M[F[1]]||F[1],!0===C?F[0]=F[0].toLocaleString():C.length>0?F[0]=F[0].toLocaleString(C,T):$.length>0&&(F[0]=F[0].toString().replace(g,$)),s&&O>0){const e=F[0].toString(),t=$||(e.match(/(\D)/g)||[]).pop()||g,s=e.toString().split(t),r=s[1]||l,n=r.length,o=O-n;F[0]=`${s[0]}${t}${r.padEnd(n+o,x)}`}return W&&(F[1]=D[U]?D[U]:E.fullform[I][U]+(t?n:i)+(1===F[0]?l:_)),P===r?F:P===p?{value:F[0],symbol:F[1],exponent:U,unit:H}:F.join(k)}function O({bits:e=!1,pad:t=!1,base:s=-1,round:r=2,locale:n=l,localeOptions:o={},separator:i=l,spacer:a=w,symbols:d={},standard:c=l,output:u=S,fullform:h=!1,fullforms:m=[],exponent:f=-1,roundingMethod:p=v,precision:g=0}={}){return l=>A(l,{bits:e,pad:t,base:s,round:r,locale:n,localeOptions:o,separator:i,spacer:a,symbols:d,standard:c,output:u,fullform:h,fullforms:m,exponent:f,roundingMethod:p,precision:g})}},"./node_modules/gifuct-js/lib/deinterlace.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deinterlace=void 0;t.deinterlace=function(e,t){for(var s=new Array(e.length),r=e.length/t,n=function(r,n){var o=e.slice(n*t,(n+1)*t);s.splice.apply(s,[r*t,t].concat(o))},o=[0,4,2,1],i=[8,8,4,2],a=0,l=0;l<4;l++)for(var d=o[l];d<r;d+=i[l])n(d,a),a++;return s}},"./node_modules/gifuct-js/lib/index.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decompressFrames=t.decompressFrame=t.parseGIF=void 0;var r,n=(r=s("./node_modules/js-binary-schema-parser/lib/schemas/gif.js"))&&r.__esModule?r:{default:r},o=s("./node_modules/js-binary-schema-parser/lib/index.js"),i=s("./node_modules/js-binary-schema-parser/lib/parsers/uint8.js"),a=s("./node_modules/gifuct-js/lib/deinterlace.js"),l=s("./node_modules/gifuct-js/lib/lzw.js");t.parseGIF=function(e){var t=new Uint8Array(e);return(0,o.parse)((0,i.buildStream)(t),n.default)};var d=function(e,t,s){if(e.image){var r=e.image,n=r.descriptor.width*r.descriptor.height,o=(0,l.lzw)(r.data.minCodeSize,r.data.blocks,n);r.descriptor.lct.interlaced&&(o=(0,a.deinterlace)(o,r.descriptor.width));var i={pixels:o,dims:{top:e.image.descriptor.top,left:e.image.descriptor.left,width:e.image.descriptor.width,height:e.image.descriptor.height}};return r.descriptor.lct&&r.descriptor.lct.exists?i.colorTable=r.lct:i.colorTable=t,e.gce&&(i.delay=10*(e.gce.delay||10),i.disposalType=e.gce.extras.disposal,e.gce.extras.transparentColorGiven&&(i.transparentIndex=e.gce.transparentColorIndex)),s&&(i.patch=function(e){for(var t=e.pixels.length,s=new Uint8ClampedArray(4*t),r=0;r<t;r++){var n=4*r,o=e.pixels[r],i=e.colorTable[o]||[0,0,0];s[n]=i[0],s[n+1]=i[1],s[n+2]=i[2],s[n+3]=o!==e.transparentIndex?255:0}return s}(i)),i}console.warn("gif frame does not have associated image.")};t.decompressFrame=d;t.decompressFrames=function(e,t){return e.frames.filter((function(e){return e.image})).map((function(s){return d(s,e.gct,t)}))}},"./node_modules/gifuct-js/lib/lzw.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lzw=void 0;t.lzw=function(e,t,s){var r,n,o,i,a,l,d,c,u,h,m,f,p,g,v,_,y=4096,b=s,j=new Array(s),w=new Array(y),S=new Array(y),x=new Array(4097);for(a=(n=1<<(h=e))+1,r=n+2,d=-1,o=(1<<(i=h+1))-1,c=0;c<n;c++)w[c]=0,S[c]=c;for(m=f=p=g=v=_=0,u=0;u<b;){if(0===g){if(f<i){m+=t[_]<<f,f+=8,_++;continue}if(c=m&o,m>>=i,f-=i,c>r||c==a)break;if(c==n){o=(1<<(i=h+1))-1,r=n+2,d=-1;continue}if(-1==d){x[g++]=S[c],d=c,p=c;continue}for(l=c,c==r&&(x[g++]=p,c=d);c>n;)x[g++]=S[c],c=w[c];p=255&S[c],x[g++]=p,r<y&&(w[r]=d,S[r]=p,0===(++r&o)&&r<y&&(i++,o+=r)),d=l}g--,j[v++]=x[g],u++}for(u=v;u<b;u++)j[u]=0;return j}},"./node_modules/hsluv/dist/hsluv.mjs":(e,t,s)=>{"use strict";s.r(t),s.d(t,{Hsluv:()=>r});class r{constructor(){this.hex="#000000",this.rgb_r=0,this.rgb_g=0,this.rgb_b=0,this.xyz_x=0,this.xyz_y=0,this.xyz_z=0,this.luv_l=0,this.luv_u=0,this.luv_v=0,this.lch_l=0,this.lch_c=0,this.lch_h=0,this.hsluv_h=0,this.hsluv_s=0,this.hsluv_l=0,this.hpluv_h=0,this.hpluv_p=0,this.hpluv_l=0,this.r0s=0,this.r0i=0,this.r1s=0,this.r1i=0,this.g0s=0,this.g0i=0,this.g1s=0,this.g1i=0,this.b0s=0,this.b0i=0,this.b1s=0,this.b1i=0}static fromLinear(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055}static toLinear(e){return e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92}static yToL(e){return e<=r.epsilon?e/r.refY*r.kappa:116*Math.pow(e/r.refY,1/3)-16}static lToY(e){return e<=8?r.refY*e/r.kappa:r.refY*Math.pow((e+16)/116,3)}static rgbChannelToHex(e){const t=Math.round(255*e),s=t%16,n=(t-s)/16|0;return r.hexChars.charAt(n)+r.hexChars.charAt(s)}static hexToRgbChannel(e,t){return(16*r.hexChars.indexOf(e.charAt(t))+r.hexChars.indexOf(e.charAt(t+1)))/255}static distanceFromOriginAngle(e,t,s){const r=t/(Math.sin(s)-e*Math.cos(s));return r<0?1/0:r}static distanceFromOrigin(e,t){return Math.abs(t)/Math.sqrt(Math.pow(e,2)+1)}static min6(e,t,s,r,n,o){return Math.min(e,Math.min(t,Math.min(s,Math.min(r,Math.min(n,o)))))}rgbToHex(){this.hex="#",this.hex+=r.rgbChannelToHex(this.rgb_r),this.hex+=r.rgbChannelToHex(this.rgb_g),this.hex+=r.rgbChannelToHex(this.rgb_b)}hexToRgb(){this.hex=this.hex.toLowerCase(),this.rgb_r=r.hexToRgbChannel(this.hex,1),this.rgb_g=r.hexToRgbChannel(this.hex,3),this.rgb_b=r.hexToRgbChannel(this.hex,5)}xyzToRgb(){this.rgb_r=r.fromLinear(r.m_r0*this.xyz_x+r.m_r1*this.xyz_y+r.m_r2*this.xyz_z),this.rgb_g=r.fromLinear(r.m_g0*this.xyz_x+r.m_g1*this.xyz_y+r.m_g2*this.xyz_z),this.rgb_b=r.fromLinear(r.m_b0*this.xyz_x+r.m_b1*this.xyz_y+r.m_b2*this.xyz_z)}rgbToXyz(){const e=r.toLinear(this.rgb_r),t=r.toLinear(this.rgb_g),s=r.toLinear(this.rgb_b);this.xyz_x=.41239079926595*e+.35758433938387*t+.18048078840183*s,this.xyz_y=.21263900587151*e+.71516867876775*t+.072192315360733*s,this.xyz_z=.019330818715591*e+.11919477979462*t+.95053215224966*s}xyzToLuv(){const e=this.xyz_x+15*this.xyz_y+3*this.xyz_z;let t=4*this.xyz_x,s=9*this.xyz_y;0!==e?(t/=e,s/=e):(t=NaN,s=NaN),this.luv_l=r.yToL(this.xyz_y),0===this.luv_l?(this.luv_u=0,this.luv_v=0):(this.luv_u=13*this.luv_l*(t-r.refU),this.luv_v=13*this.luv_l*(s-r.refV))}luvToXyz(){if(0===this.luv_l)return this.xyz_x=0,this.xyz_y=0,void(this.xyz_z=0);const e=this.luv_u/(13*this.luv_l)+r.refU,t=this.luv_v/(13*this.luv_l)+r.refV;this.xyz_y=r.lToY(this.luv_l),this.xyz_x=0-9*this.xyz_y*e/((e-4)*t-e*t),this.xyz_z=(9*this.xyz_y-15*t*this.xyz_y-t*this.xyz_x)/(3*t)}luvToLch(){if(this.lch_l=this.luv_l,this.lch_c=Math.sqrt(this.luv_u*this.luv_u+this.luv_v*this.luv_v),this.lch_c<1e-8)this.lch_h=0;else{const e=Math.atan2(this.luv_v,this.luv_u);this.lch_h=180*e/Math.PI,this.lch_h<0&&(this.lch_h=360+this.lch_h)}}lchToLuv(){const e=this.lch_h/180*Math.PI;this.luv_l=this.lch_l,this.luv_u=Math.cos(e)*this.lch_c,this.luv_v=Math.sin(e)*this.lch_c}calculateBoundingLines(e){const t=Math.pow(e+16,3)/1560896,s=t>r.epsilon?t:e/r.kappa,n=s*(284517*r.m_r0-94839*r.m_r2),o=s*(838422*r.m_r2+769860*r.m_r1+731718*r.m_r0),i=s*(632260*r.m_r2-126452*r.m_r1),a=s*(284517*r.m_g0-94839*r.m_g2),l=s*(838422*r.m_g2+769860*r.m_g1+731718*r.m_g0),d=s*(632260*r.m_g2-126452*r.m_g1),c=s*(284517*r.m_b0-94839*r.m_b2),u=s*(838422*r.m_b2+769860*r.m_b1+731718*r.m_b0),h=s*(632260*r.m_b2-126452*r.m_b1);this.r0s=n/i,this.r0i=o*e/i,this.r1s=n/(i+126452),this.r1i=(o-769860)*e/(i+126452),this.g0s=a/d,this.g0i=l*e/d,this.g1s=a/(d+126452),this.g1i=(l-769860)*e/(d+126452),this.b0s=c/h,this.b0i=u*e/h,this.b1s=c/(h+126452),this.b1i=(u-769860)*e/(h+126452)}calcMaxChromaHpluv(){const e=r.distanceFromOrigin(this.r0s,this.r0i),t=r.distanceFromOrigin(this.r1s,this.r1i),s=r.distanceFromOrigin(this.g0s,this.g0i),n=r.distanceFromOrigin(this.g1s,this.g1i),o=r.distanceFromOrigin(this.b0s,this.b0i),i=r.distanceFromOrigin(this.b1s,this.b1i);return r.min6(e,t,s,n,o,i)}calcMaxChromaHsluv(e){const t=e/360*Math.PI*2,s=r.distanceFromOriginAngle(this.r0s,this.r0i,t),n=r.distanceFromOriginAngle(this.r1s,this.r1i,t),o=r.distanceFromOriginAngle(this.g0s,this.g0i,t),i=r.distanceFromOriginAngle(this.g1s,this.g1i,t),a=r.distanceFromOriginAngle(this.b0s,this.b0i,t),l=r.distanceFromOriginAngle(this.b1s,this.b1i,t);return r.min6(s,n,o,i,a,l)}hsluvToLch(){if(this.hsluv_l>99.9999999)this.lch_l=100,this.lch_c=0;else if(this.hsluv_l<1e-8)this.lch_l=0,this.lch_c=0;else{this.lch_l=this.hsluv_l,this.calculateBoundingLines(this.hsluv_l);const e=this.calcMaxChromaHsluv(this.hsluv_h);this.lch_c=e/100*this.hsluv_s}this.lch_h=this.hsluv_h}lchToHsluv(){if(this.lch_l>99.9999999)this.hsluv_s=0,this.hsluv_l=100;else if(this.lch_l<1e-8)this.hsluv_s=0,this.hsluv_l=0;else{this.calculateBoundingLines(this.lch_l);const e=this.calcMaxChromaHsluv(this.lch_h);this.hsluv_s=this.lch_c/e*100,this.hsluv_l=this.lch_l}this.hsluv_h=this.lch_h}hpluvToLch(){if(this.hpluv_l>99.9999999)this.lch_l=100,this.lch_c=0;else if(this.hpluv_l<1e-8)this.lch_l=0,this.lch_c=0;else{this.lch_l=this.hpluv_l,this.calculateBoundingLines(this.hpluv_l);const e=this.calcMaxChromaHpluv();this.lch_c=e/100*this.hpluv_p}this.lch_h=this.hpluv_h}lchToHpluv(){if(this.lch_l>99.9999999)this.hpluv_p=0,this.hpluv_l=100;else if(this.lch_l<1e-8)this.hpluv_p=0,this.hpluv_l=0;else{this.calculateBoundingLines(this.lch_l);const e=this.calcMaxChromaHpluv();this.hpluv_p=this.lch_c/e*100,this.hpluv_l=this.lch_l}this.hpluv_h=this.lch_h}hsluvToRgb(){this.hsluvToLch(),this.lchToLuv(),this.luvToXyz(),this.xyzToRgb()}hpluvToRgb(){this.hpluvToLch(),this.lchToLuv(),this.luvToXyz(),this.xyzToRgb()}hsluvToHex(){this.hsluvToRgb(),this.rgbToHex()}hpluvToHex(){this.hpluvToRgb(),this.rgbToHex()}rgbToHsluv(){this.rgbToXyz(),this.xyzToLuv(),this.luvToLch(),this.lchToHpluv(),this.lchToHsluv()}rgbToHpluv(){this.rgbToXyz(),this.xyzToLuv(),this.luvToLch(),this.lchToHpluv(),this.lchToHpluv()}hexToHsluv(){this.hexToRgb(),this.rgbToHsluv()}hexToHpluv(){this.hexToRgb(),this.rgbToHpluv()}}r.hexChars="0123456789abcdef",r.refY=1,r.refU=.19783000664283,r.refV=.46831999493879,r.kappa=903.2962962,r.epsilon=.0088564516,r.m_r0=3.240969941904521,r.m_r1=-1.537383177570093,r.m_r2=-.498610760293,r.m_g0=-.96924363628087,r.m_g1=1.87596750150772,r.m_g2=.041555057407175,r.m_b0=.055630079696993,r.m_b1=-.20397695888897,r.m_b2=1.056971514242878},"./node_modules/jed/jed.js":function(e,t){!function(s,r){var n=Array.prototype,o=Object.prototype,i=n.slice,a=o.hasOwnProperty,l=n.forEach,d={},c={forEach:function(e,t,s){var r,n,o;if(null!==e)if(l&&e.forEach===l)e.forEach(t,s);else if(e.length===+e.length){for(r=0,n=e.length;r<n;r++)if(r in e&&t.call(s,e[r],r,e)===d)return}else for(o in e)if(a.call(e,o)&&t.call(s,e[o],o,e)===d)return},extend:function(e){return this.forEach(i.call(arguments,1),(function(t){for(var s in t)e[s]=t[s]})),e}},u=function(e){if(this.defaults={locale_data:{messages:{"":{domain:"messages",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}}},domain:"messages",debug:!1},this.options=c.extend({},this.defaults,e),this.textdomain(this.options.domain),e.domain&&!this.options.locale_data[this.options.domain])throw new Error("Text domain set to non-existent domain: `"+e.domain+"`")};function h(e){return u.PF.compile(e||"nplurals=2; plural=(n != 1);")}function m(e,t){this._key=e,this._i18n=t}u.context_delimiter=String.fromCharCode(4),c.extend(m.prototype,{onDomain:function(e){return this._domain=e,this},withContext:function(e){return this._context=e,this},ifPlural:function(e,t){return this._val=e,this._pkey=t,this},fetch:function(e){return"[object Array]"!={}.toString.call(e)&&(e=[].slice.call(arguments,0)),(e&&e.length?u.sprintf:function(e){return e})(this._i18n.dcnpgettext(this._domain,this._context,this._key,this._pkey,this._val),e)}}),c.extend(u.prototype,{translate:function(e){return new m(e,this)},textdomain:function(e){if(!e)return this._textdomain;this._textdomain=e},gettext:function(e){return this.dcnpgettext.call(this,r,r,e)},dgettext:function(e,t){return this.dcnpgettext.call(this,e,r,t)},dcgettext:function(e,t){return this.dcnpgettext.call(this,e,r,t)},ngettext:function(e,t,s){return this.dcnpgettext.call(this,r,r,e,t,s)},dngettext:function(e,t,s,n){return this.dcnpgettext.call(this,e,r,t,s,n)},dcngettext:function(e,t,s,n){return this.dcnpgettext.call(this,e,r,t,s,n)},pgettext:function(e,t){return this.dcnpgettext.call(this,r,e,t)},dpgettext:function(e,t,s){return this.dcnpgettext.call(this,e,t,s)},dcpgettext:function(e,t,s){return this.dcnpgettext.call(this,e,t,s)},npgettext:function(e,t,s,n){return this.dcnpgettext.call(this,r,e,t,s,n)},dnpgettext:function(e,t,s,r,n){return this.dcnpgettext.call(this,e,t,s,r,n)},dcnpgettext:function(e,t,s,r,n){var o;if(r=r||s,e=e||this._textdomain,!this.options)return(o=new u).dcnpgettext.call(o,void 0,void 0,s,r,n);if(!this.options.locale_data)throw new Error("No locale data provided.");if(!this.options.locale_data[e])throw new Error("Domain `"+e+"` was not found.");if(!this.options.locale_data[e][""])throw new Error("No locale meta information provided.");if(!s)throw new Error("No translation key found.");var i,a,l,d=t?t+u.context_delimiter+s:s,c=this.options.locale_data,m=c[e],f=(c.messages||this.defaults.locale_data.messages)[""],p=m[""].plural_forms||m[""]["Plural-Forms"]||m[""]["plural-forms"]||f.plural_forms||f["Plural-Forms"]||f["plural-forms"];if(void 0===n)l=0;else{if("number"!=typeof n&&(n=parseInt(n,10),isNaN(n)))throw new Error("The number that was passed in is not a number.");l=h(p)(n)}if(!m)throw new Error("No domain named `"+e+"` could be found.");return!(i=m[d])||l>i.length?(this.options.missing_key_callback&&this.options.missing_key_callback(d,e),a=[s,r],!0===this.options.debug&&console.log(a[h(p)(n)]),a[h()(n)]):(a=i[l])||(a=[s,r])[h()(n)]}});var f,p,g=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function t(e,t){for(var s=[];t>0;s[--t]=e);return s.join("")}var s=function(){return s.cache.hasOwnProperty(arguments[0])||(s.cache[arguments[0]]=s.parse(arguments[0])),s.format.call(null,s.cache[arguments[0]],arguments)};return s.format=function(s,r){var n,o,i,a,l,d,c,u=1,h=s.length,m="",f=[];for(o=0;o<h;o++)if("string"===(m=e(s[o])))f.push(s[o]);else if("array"===m){if((a=s[o])[2])for(n=r[u],i=0;i<a[2].length;i++){if(!n.hasOwnProperty(a[2][i]))throw g('[sprintf] property "%s" does not exist',a[2][i]);n=n[a[2][i]]}else n=a[1]?r[a[1]]:r[u++];if(/[^s]/.test(a[8])&&"number"!=e(n))throw g("[sprintf] expecting number but found %s",e(n));switch(null==n&&(n=""),a[8]){case"b":n=n.toString(2);break;case"c":n=String.fromCharCode(n);break;case"d":n=parseInt(n,10);break;case"e":n=a[7]?n.toExponential(a[7]):n.toExponential();break;case"f":n=a[7]?parseFloat(n).toFixed(a[7]):parseFloat(n);break;case"o":n=n.toString(8);break;case"s":n=(n=String(n))&&a[7]?n.substring(0,a[7]):n;break;case"u":n=Math.abs(n);break;case"x":n=n.toString(16);break;case"X":n=n.toString(16).toUpperCase()}n=/[def]/.test(a[8])&&a[3]&&n>=0?"+"+n:n,d=a[4]?"0"==a[4]?"0":a[4].charAt(1):" ",c=a[6]-String(n).length,l=a[6]?t(d,c):"",f.push(a[5]?n+l:l+n)}return f.join("")},s.cache={},s.parse=function(e){for(var t=e,s=[],r=[],n=0;t;){if(null!==(s=/^[^\x25]+/.exec(t)))r.push(s[0]);else if(null!==(s=/^\x25{2}/.exec(t)))r.push("%");else{if(null===(s=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw"[sprintf] huh?";if(s[2]){n|=1;var o=[],i=s[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(i)))throw"[sprintf] huh?";for(o.push(a[1]);""!==(i=i.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(i)))o.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(i)))throw"[sprintf] huh?";o.push(a[1])}s[2]=o}else n|=2;if(3===n)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(s)}t=t.substring(s[0].length)}return r},s}();u.parse_plural=function(e,t){return e=e.replace(/n/g,t),u.parse_expression(e)},u.sprintf=function(e,t){return"[object Array]"=={}.toString.call(t)?function(e,t){return t.unshift(e),g.apply(null,t)}(e,[].slice.call(t)):g.apply(this,[].slice.call(arguments))},u.prototype.sprintf=function(){return u.sprintf.apply(this,arguments)},(u.PF={}).parse=function(e){var t=u.PF.extractPluralExpr(e);return u.PF.parser.parse.call(u.PF.parser,t)},u.PF.compile=function(e){var t=u.PF.parse(e);return function(e){return!0===(s=u.PF.interpreter(t)(e))?1:s||0;var s}},u.PF.interpreter=function(e){return function(t){switch(e.type){case"GROUP":return u.PF.interpreter(e.expr)(t);case"TERNARY":return u.PF.interpreter(e.expr)(t)?u.PF.interpreter(e.truthy)(t):u.PF.interpreter(e.falsey)(t);case"OR":return u.PF.interpreter(e.left)(t)||u.PF.interpreter(e.right)(t);case"AND":return u.PF.interpreter(e.left)(t)&&u.PF.interpreter(e.right)(t);case"LT":return u.PF.interpreter(e.left)(t)<u.PF.interpreter(e.right)(t);case"GT":return u.PF.interpreter(e.left)(t)>u.PF.interpreter(e.right)(t);case"LTE":return u.PF.interpreter(e.left)(t)<=u.PF.interpreter(e.right)(t);case"GTE":return u.PF.interpreter(e.left)(t)>=u.PF.interpreter(e.right)(t);case"EQ":return u.PF.interpreter(e.left)(t)==u.PF.interpreter(e.right)(t);case"NEQ":return u.PF.interpreter(e.left)(t)!=u.PF.interpreter(e.right)(t);case"MOD":return u.PF.interpreter(e.left)(t)%u.PF.interpreter(e.right)(t);case"VAR":return t;case"NUM":return e.val;default:throw new Error("Invalid Token found.")}}},u.PF.extractPluralExpr=function(e){e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),/;\s*$/.test(e)||(e=e.concat(";"));var t,s=/nplurals\=(\d+);/,r=e.match(s);if(!(r.length>1))throw new Error("nplurals not found in plural_forms string: "+e);if(r[1],!((t=(e=e.replace(s,"")).match(/plural\=(.*);/))&&t.length>1))throw new Error("`plural` expression not found: "+e);return t[1]},u.PF.parser=(f={trace:function(){},yy:{},symbols_:{error:2,expressions:3,e:4,EOF:5,"?":6,":":7,"||":8,"&&":9,"<":10,"<=":11,">":12,">=":13,"!=":14,"==":15,"%":16,"(":17,")":18,n:19,NUMBER:20,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",6:"?",7:":",8:"||",9:"&&",10:"<",11:"<=",12:">",13:">=",14:"!=",15:"==",16:"%",17:"(",18:")",19:"n",20:"NUMBER"},productions_:[0,[3,2],[4,5],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,1],[4,1]],performAction:function(e,t,s,r,n,o,i){var a=o.length-1;switch(n){case 1:return{type:"GROUP",expr:o[a-1]};case 2:this.$={type:"TERNARY",expr:o[a-4],truthy:o[a-2],falsey:o[a]};break;case 3:this.$={type:"OR",left:o[a-2],right:o[a]};break;case 4:this.$={type:"AND",left:o[a-2],right:o[a]};break;case 5:this.$={type:"LT",left:o[a-2],right:o[a]};break;case 6:this.$={type:"LTE",left:o[a-2],right:o[a]};break;case 7:this.$={type:"GT",left:o[a-2],right:o[a]};break;case 8:this.$={type:"GTE",left:o[a-2],right:o[a]};break;case 9:this.$={type:"NEQ",left:o[a-2],right:o[a]};break;case 10:this.$={type:"EQ",left:o[a-2],right:o[a]};break;case 11:this.$={type:"MOD",left:o[a-2],right:o[a]};break;case 12:this.$={type:"GROUP",expr:o[a-1]};break;case 13:this.$={type:"VAR"};break;case 14:this.$={type:"NUM",val:Number(e)}}},table:[{3:1,4:2,17:[1,3],19:[1,4],20:[1,5]},{1:[3]},{5:[1,6],6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{4:17,17:[1,3],19:[1,4],20:[1,5]},{5:[2,13],6:[2,13],7:[2,13],8:[2,13],9:[2,13],10:[2,13],11:[2,13],12:[2,13],13:[2,13],14:[2,13],15:[2,13],16:[2,13],18:[2,13]},{5:[2,14],6:[2,14],7:[2,14],8:[2,14],9:[2,14],10:[2,14],11:[2,14],12:[2,14],13:[2,14],14:[2,14],15:[2,14],16:[2,14],18:[2,14]},{1:[2,1]},{4:18,17:[1,3],19:[1,4],20:[1,5]},{4:19,17:[1,3],19:[1,4],20:[1,5]},{4:20,17:[1,3],19:[1,4],20:[1,5]},{4:21,17:[1,3],19:[1,4],20:[1,5]},{4:22,17:[1,3],19:[1,4],20:[1,5]},{4:23,17:[1,3],19:[1,4],20:[1,5]},{4:24,17:[1,3],19:[1,4],20:[1,5]},{4:25,17:[1,3],19:[1,4],20:[1,5]},{4:26,17:[1,3],19:[1,4],20:[1,5]},{4:27,17:[1,3],19:[1,4],20:[1,5]},{6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[1,28]},{6:[1,7],7:[1,29],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{5:[2,3],6:[2,3],7:[2,3],8:[2,3],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,3]},{5:[2,4],6:[2,4],7:[2,4],8:[2,4],9:[2,4],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,4]},{5:[2,5],6:[2,5],7:[2,5],8:[2,5],9:[2,5],10:[2,5],11:[2,5],12:[2,5],13:[2,5],14:[2,5],15:[2,5],16:[1,16],18:[2,5]},{5:[2,6],6:[2,6],7:[2,6],8:[2,6],9:[2,6],10:[2,6],11:[2,6],12:[2,6],13:[2,6],14:[2,6],15:[2,6],16:[1,16],18:[2,6]},{5:[2,7],6:[2,7],7:[2,7],8:[2,7],9:[2,7],10:[2,7],11:[2,7],12:[2,7],13:[2,7],14:[2,7],15:[2,7],16:[1,16],18:[2,7]},{5:[2,8],6:[2,8],7:[2,8],8:[2,8],9:[2,8],10:[2,8],11:[2,8],12:[2,8],13:[2,8],14:[2,8],15:[2,8],16:[1,16],18:[2,8]},{5:[2,9],6:[2,9],7:[2,9],8:[2,9],9:[2,9],10:[2,9],11:[2,9],12:[2,9],13:[2,9],14:[2,9],15:[2,9],16:[1,16],18:[2,9]},{5:[2,10],6:[2,10],7:[2,10],8:[2,10],9:[2,10],10:[2,10],11:[2,10],12:[2,10],13:[2,10],14:[2,10],15:[2,10],16:[1,16],18:[2,10]},{5:[2,11],6:[2,11],7:[2,11],8:[2,11],9:[2,11],10:[2,11],11:[2,11],12:[2,11],13:[2,11],14:[2,11],15:[2,11],16:[2,11],18:[2,11]},{5:[2,12],6:[2,12],7:[2,12],8:[2,12],9:[2,12],10:[2,12],11:[2,12],12:[2,12],13:[2,12],14:[2,12],15:[2,12],16:[2,12],18:[2,12]},{4:30,17:[1,3],19:[1,4],20:[1,5]},{5:[2,2],6:[1,7],7:[2,2],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,2]}],defaultActions:{6:[2,1]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,s=[0],r=[null],n=[],o=this.table,i="",a=0,l=0,d=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;function u(){var e;return"number"!=typeof(e=t.lexer.lex()||1)&&(e=t.symbols_[e]||e),e}n.push(c),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var h,m,f,p,g,v,_,y,b,j,w={};;){if(f=s[s.length-1],this.defaultActions[f]?p=this.defaultActions[f]:(null==h&&(h=u()),p=o[f]&&o[f][h]),void 0===p||!p.length||!p[0]){if(!d){for(v in b=[],o[f])this.terminals_[v]&&v>2&&b.push("'"+this.terminals_[v]+"'");var S="";S=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+this.terminals_[h]+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[h]||h,line:this.lexer.yylineno,loc:c,expected:b})}if(3==d){if(1==h)throw new Error(S||"Parsing halted.");l=this.lexer.yyleng,i=this.lexer.yytext,a=this.lexer.yylineno,c=this.lexer.yylloc,h=u()}for(;!(2..toString()in o[f]);){if(0==f)throw new Error(S||"Parsing halted.");j=1,s.length=s.length-2*j,r.length=r.length-j,n.length=n.length-j,f=s[s.length-1]}m=h,h=2,p=o[f=s[s.length-1]]&&o[f][2],d=3}if(p[0]instanceof Array&&p.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+h);switch(p[0]){case 1:s.push(h),r.push(this.lexer.yytext),n.push(this.lexer.yylloc),s.push(p[1]),h=null,m?(h=m,m=null):(l=this.lexer.yyleng,i=this.lexer.yytext,a=this.lexer.yylineno,c=this.lexer.yylloc,d>0&&d--);break;case 2:if(_=this.productions_[p[1]][1],w.$=r[r.length-_],w._$={first_line:n[n.length-(_||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(_||1)].first_column,last_column:n[n.length-1].last_column},void 0!==(g=this.performAction.call(w,i,l,a,this.yy,p[1],r,n)))return g;_&&(s=s.slice(0,-1*_*2),r=r.slice(0,-1*_),n=n.slice(0,-1*_)),s.push(this.productions_[p[1]][0]),r.push(w.$),n.push(w._$),y=o[s[s.length-2]][s[s.length-1]],s.push(y);break;case 3:return!0}}return!0}},p=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parseError)throw new Error(e);this.yy.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.match+=e,this.matched+=e,e.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),e},unput:function(e){return this._input=e+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),r=0;r<s.length;r++)if(e=this._input.match(this.rules[s[r]]))return(t=e[0].match(/\n.*/g))&&(this.yylineno+=t.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:t?t[t.length-1].length-1:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],this.performAction.call(this,this.yy,this,s[r],this.conditionStack[this.conditionStack.length-1])||void 0;if(""===this._input)return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},performAction:function(e,t,s,r){switch(s){case 0:break;case 1:return 20;case 2:return 19;case 3:return 8;case 4:return 9;case 5:return 6;case 6:return 7;case 7:return 11;case 8:return 13;case 9:return 10;case 10:return 12;case 11:return 14;case 12:return 15;case 13:return 16;case 14:return 17;case 15:return 18;case 16:return 5;case 17:return"INVALID"}},rules:[/^\s+/,/^[0-9]+(\.[0-9]+)?\b/,/^n\b/,/^\|\|/,/^&&/,/^\?/,/^:/,/^<=/,/^>=/,/^</,/^>/,/^!=/,/^==/,/^%/,/^\(/,/^\)/,/^$/,/^./],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],inclusive:!0}}};return e}(),f.lexer=p,f),e.exports&&(t=e.exports=u),t.Jed=u}()},"./node_modules/js-binary-schema-parser/lib/index.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loop=t.conditional=t.parse=void 0;t.parse=function e(t,s){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;if(Array.isArray(s))s.forEach((function(s){return e(t,s,r,n)}));else if("function"==typeof s)s(t,r,n,e);else{var o=Object.keys(s)[0];Array.isArray(s[o])?(n[o]={},e(t,s[o],r,n[o])):n[o]=s[o](t,r,n,e)}return r};t.conditional=function(e,t){return function(s,r,n,o){t(s,r,n)&&o(s,e,r,n)}};t.loop=function(e,t){return function(s,r,n,o){for(var i=[],a=s.pos;t(s,r,n);){var l={};if(o(s,e,r,l),s.pos===a)break;a=s.pos,i.push(l)}return i}}},"./node_modules/js-binary-schema-parser/lib/parsers/uint8.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readBits=t.readArray=t.readUnsigned=t.readString=t.peekBytes=t.readBytes=t.peekByte=t.readByte=t.buildStream=void 0;t.buildStream=function(e){return{data:e,pos:0}};var s=function(){return function(e){return e.data[e.pos++]}};t.readByte=s;t.peekByte=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){return t.data[t.pos+e]}};var r=function(e){return function(t){return t.data.subarray(t.pos,t.pos+=e)}};t.readBytes=r;t.peekBytes=function(e){return function(t){return t.data.subarray(t.pos,t.pos+e)}};t.readString=function(e){return function(t){return Array.from(r(e)(t)).map((function(e){return String.fromCharCode(e)})).join("")}};t.readUnsigned=function(e){return function(t){var s=r(2)(t);return e?(s[1]<<8)+s[0]:(s[0]<<8)+s[1]}};t.readArray=function(e,t){return function(s,n,o){for(var i="function"==typeof t?t(s,n,o):t,a=r(e),l=new Array(i),d=0;d<i;d++)l[d]=a(s);return l}};t.readBits=function(e){return function(t){for(var s=function(e){return e.data[e.pos++]}(t),r=new Array(8),n=0;n<8;n++)r[7-n]=!!(s&1<<n);return Object.keys(e).reduce((function(t,s){var n=e[s];return n.length?t[s]=function(e,t,s){for(var r=0,n=0;n<s;n++)r+=e[t+n]&&Math.pow(2,s-n-1);return r}(r,n.index,n.length):t[s]=r[n.index],t}),{})}}},"./node_modules/js-binary-schema-parser/lib/schemas/gif.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s("./node_modules/js-binary-schema-parser/lib/index.js"),n=s("./node_modules/js-binary-schema-parser/lib/parsers/uint8.js"),o={blocks:function(e){for(var t=[],s=e.data.length,r=0,o=(0,n.readByte)()(e);0!==o&&o;o=(0,n.readByte)()(e)){if(e.pos+o>=s){var i=s-e.pos;t.push((0,n.readBytes)(i)(e)),r+=i;break}t.push((0,n.readBytes)(o)(e)),r+=o}for(var a=new Uint8Array(r),l=0,d=0;d<t.length;d++)a.set(t[d],l),l+=t[d].length;return a}},i=(0,r.conditional)({gce:[{codes:(0,n.readBytes)(2)},{byteSize:(0,n.readByte)()},{extras:(0,n.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,n.readUnsigned)(!0)},{transparentColorIndex:(0,n.readByte)()},{terminator:(0,n.readByte)()}]},(function(e){var t=(0,n.peekBytes)(2)(e);return 33===t[0]&&249===t[1]})),a=(0,r.conditional)({image:[{code:(0,n.readByte)()},{descriptor:[{left:(0,n.readUnsigned)(!0)},{top:(0,n.readUnsigned)(!0)},{width:(0,n.readUnsigned)(!0)},{height:(0,n.readUnsigned)(!0)},{lct:(0,n.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,r.conditional)({lct:(0,n.readArray)(3,(function(e,t,s){return Math.pow(2,s.descriptor.lct.size+1)}))},(function(e,t,s){return s.descriptor.lct.exists})),{data:[{minCodeSize:(0,n.readByte)()},o]}]},(function(e){return 44===(0,n.peekByte)()(e)})),l=(0,r.conditional)({text:[{codes:(0,n.readBytes)(2)},{blockSize:(0,n.readByte)()},{preData:function(e,t,s){return(0,n.readBytes)(s.text.blockSize)(e)}},o]},(function(e){var t=(0,n.peekBytes)(2)(e);return 33===t[0]&&1===t[1]})),d=(0,r.conditional)({application:[{codes:(0,n.readBytes)(2)},{blockSize:(0,n.readByte)()},{id:function(e,t,s){return(0,n.readString)(s.blockSize)(e)}},o]},(function(e){var t=(0,n.peekBytes)(2)(e);return 33===t[0]&&255===t[1]})),c=(0,r.conditional)({comment:[{codes:(0,n.readBytes)(2)},o]},(function(e){var t=(0,n.peekBytes)(2)(e);return 33===t[0]&&254===t[1]})),u=[{header:[{signature:(0,n.readString)(3)},{version:(0,n.readString)(3)}]},{lsd:[{width:(0,n.readUnsigned)(!0)},{height:(0,n.readUnsigned)(!0)},{gct:(0,n.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,n.readByte)()},{pixelAspectRatio:(0,n.readByte)()}]},(0,r.conditional)({gct:(0,n.readArray)(3,(function(e,t){return Math.pow(2,t.lsd.gct.size+1)}))},(function(e,t){return t.lsd.gct.exists})),{frames:(0,r.loop)([i,d,c,a,l],(function(e){var t=(0,n.peekByte)()(e);return 33===t||44===t}))}];t.default=u},"./node_modules/lit-element/development/lit-element.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{CSSResult:()=>r.CSSResult,LitElement:()=>a,ReactiveElement:()=>r.ReactiveElement,_$LE:()=>c,_$LH:()=>n._$LH,adoptStyles:()=>r.adoptStyles,css:()=>r.css,defaultConverter:()=>r.defaultConverter,getCompatibleStyle:()=>r.getCompatibleStyle,html:()=>n.html,mathml:()=>n.mathml,noChange:()=>n.noChange,notEqual:()=>r.notEqual,nothing:()=>n.nothing,render:()=>n.render,supportsAdoptingStyleSheets:()=>r.supportsAdoptingStyleSheets,svg:()=>n.svg,unsafeCSS:()=>r.unsafeCSS});var r=s("./node_modules/@lit/reactive-element/development/reactive-element.js"),n=s("./node_modules/lit-html/development/lit-html.js");const o=globalThis;let i;o.litIssuedWarnings??=new Set,i=(e,t)=>{t+=` See https://lit.dev/msg/${e} for more information.`,o.litIssuedWarnings.has(t)||o.litIssuedWarnings.has(e)||(console.warn(t),o.litIssuedWarnings.add(t))};class a extends r.ReactiveElement{constructor(){super(...arguments),this.renderOptions={host:this},this.__childPart=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this.__childPart=(0,n.render)(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this.__childPart?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this.__childPart?.setConnected(!1)}render(){return n.noChange}}var l;a._$litElement$=!0,a[(l="finalized",l)]=!0,o.litElementHydrateSupport?.({LitElement:a});const d=o.litElementPolyfillSupportDevMode;d?.({LitElement:a});const c={_$attributeToProperty:(e,t,s)=>{e._$attributeToProperty(t,s)},_$changedProperties:e=>e._$changedProperties};(o.litElementVersions??=[]).push("4.2.0"),o.litElementVersions.length>1&&queueMicrotask((()=>{i("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.")}))},"./node_modules/lit-html/development/async-directive.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{AsyncDirective:()=>u,Directive:()=>n.Directive,PartType:()=>n.PartType,directive:()=>n.directive});var r=s("./node_modules/lit-html/development/directive-helpers.js"),n=s("./node_modules/lit-html/development/directive.js");const o=(e,t)=>{const s=e._$disconnectableChildren;if(void 0===s)return!1;for(const e of s){var r;null===(r=e._$notifyDirectiveConnectionChanged)||void 0===r||r.call(e,t,!1),o(e,t)}return!0},i=e=>{let t,s;do{if(void 0===(t=e._$parent))break;s=t._$disconnectableChildren,s.delete(e),e=t}while(0===(null==s?void 0:s.size))},a=e=>{for(let t;t=e._$parent;e=t){let s=t._$disconnectableChildren;if(void 0===s)t._$disconnectableChildren=s=new Set;else if(s.has(e))break;s.add(e),c(t)}};function l(e){void 0!==this._$disconnectableChildren?(i(this),this._$parent=e,a(this)):this._$parent=e}function d(e,t=!1,s=0){const r=this._$committedValue,n=this._$disconnectableChildren;if(void 0!==n&&0!==n.size)if(t)if(Array.isArray(r))for(let e=s;e<r.length;e++)o(r[e],!1),i(r[e]);else null!=r&&(o(r,!1),i(r));else o(this,e)}const c=e=>{var t,s,r,o;e.type==n.PartType.CHILD&&(null!==(r=(t=e)._$notifyConnectionChanged)&&void 0!==r||(t._$notifyConnectionChanged=d),null!==(o=(s=e)._$reparentDisconnectables)&&void 0!==o||(s._$reparentDisconnectables=l))};class u extends n.Directive{_$initialize(e,t,s){super._$initialize(e,t,s),a(this),this.isConnected=e._$isConnected}_$notifyDirectiveConnectionChanged(e,t=!0){var s,r;e!==this.isConnected&&(this.isConnected=e,e?null===(s=this.reconnected)||void 0===s||s.call(this):null===(r=this.disconnected)||void 0===r||r.call(this));t&&(o(this,e),i(this))}setValue(e){if((0,r.isSingleExpression)(this.__part))this.__part._$setValue(e,this);else{if(void 0===this.__attributeIndex)throw new Error("Expected this.__attributeIndex to be a number");const t=[...this.__part._$committedValue];t[this.__attributeIndex]=e,this.__part._$setValue(t,this,0)}}disconnected(){}reconnected(){}constructor(){super(...arguments),this._$disconnectableChildren=void 0}}},"./node_modules/lit-html/development/directive-helpers.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{TemplateResultType:()=>d,clearPart:()=>w,getCommittedValue:()=>b,getDirectiveClass:()=>m,insertPart:()=>g,isCompiledTemplateResult:()=>u,isDirectiveResult:()=>h,isPrimitive:()=>l,isSingleExpression:()=>f,isTemplateResult:()=>c,removePart:()=>j,setChildPartValue:()=>v,setCommittedValue:()=>y});var r,n,o=s("./node_modules/lit-html/development/lit-html.js");const{_ChildPart:i}=o._$LH,a=(null===(r=window.ShadyDOM)||void 0===r?void 0:r.inUse)&&!0===(null===(n=window.ShadyDOM)||void 0===n?void 0:n.noPatch)?window.ShadyDOM.wrap:e=>e,l=e=>null===e||"object"!=typeof e&&"function"!=typeof e,d={HTML:1,SVG:2,MATHML:3},c=(e,t)=>void 0===t?void 0!==(null==e?void 0:e._$litType$):(null==e?void 0:e._$litType$)===t,u=e=>{var t;return null!=(null==e||null===(t=e._$litType$)||void 0===t?void 0:t.h)},h=e=>void 0!==(null==e?void 0:e._$litDirective$),m=e=>null==e?void 0:e._$litDirective$,f=e=>void 0===e.strings,p=()=>document.createComment(""),g=(e,t,s)=>{const r=a(e._$startNode).parentNode,n=void 0===t?e._$endNode:t._$startNode;if(void 0===s){const t=a(r).insertBefore(p(),n),o=a(r).insertBefore(p(),n);s=new i(t,o,e,e.options)}else{const t=a(s._$endNode).nextSibling,i=s._$parent,l=i!==e;if(l){var o;let t;null===(o=s._$reparentDisconnectables)||void 0===o||o.call(s,e),s._$parent=e,void 0!==s._$notifyConnectionChanged&&(t=e._$isConnected)!==i._$isConnected&&s._$notifyConnectionChanged(t)}if(t!==n||l){let e=s._$startNode;for(;e!==t;){const t=a(e).nextSibling;a(r).insertBefore(e,n),e=t}}}return s},v=(e,t,s=e)=>(e._$setValue(t,s),e),_={},y=(e,t=_)=>e._$committedValue=t,b=e=>e._$committedValue,j=e=>{var t;null===(t=e._$notifyConnectionChanged)||void 0===t||t.call(e,!1,!0);let s=e._$startNode;const r=a(e._$endNode).nextSibling;for(;s!==r;){const e=a(s).nextSibling;a(s).remove(),s=e}},w=e=>{e._$clear()}},"./node_modules/lit-html/development/directive.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{Directive:()=>o,PartType:()=>r,directive:()=>n});const r={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},n=e=>(...t)=>({_$litDirective$:e,values:t});class o{get _$isConnected(){return this._$parent._$isConnected}_$initialize(e,t,s){this.__part=e,this._$parent=t,this.__attributeIndex=s}_$resolve(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}constructor(e){}}},"./node_modules/lit-html/development/directives/private-async-helpers.js":(e,t,s)=>{"use strict";function r(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return r=function(e){this.s=e,this.n=e.next},r.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var s=this.s.return;return void 0===s?Promise.resolve({value:e,done:!0}):t(s.apply(this.s,arguments))},throw:function(e){var s=this.s.return;return void 0===s?Promise.reject(e):t(s.apply(this.s,arguments))}},new r(e)}function n(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}s.r(t),s.d(t,{Pauser:()=>a,PseudoWeakRef:()=>i,forAwaitOf:()=>o});const o=(e,t)=>{return(s=function*(){var s,n=!1,o=!1;try{for(var i,a=function(e){var t,s,n,o=2;for("undefined"!=typeof Symbol&&(s=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(s&&null!=(t=e[s]))return t.call(e);if(n&&null!=(t=e[n]))return new r(t.call(e));s="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}(e);n=!(i=yield a.next()).done;n=!1){const e=i.value;if(!1===(yield t(e)))return}}catch(e){o=!0,s=e}finally{try{n&&null!=a.return&&(yield a.return())}finally{if(o)throw s}}},function(){var e=this,t=arguments;return new Promise((function(r,o){var i=s.apply(e,t);function a(e){n(i,r,o,a,l,"next",e)}function l(e){n(i,r,o,a,l,"throw",e)}a(void 0)}))})();var s};class i{disconnect(){this._ref=void 0}reconnect(e){this._ref=e}deref(){return this._ref}constructor(e){this._ref=e}}class a{get(){return this._promise}pause(){var e;null!==(e=this._promise)&&void 0!==e||(this._promise=new Promise((e=>this._resolve=e)))}resume(){var e;null===(e=this._resolve)||void 0===e||e.call(this),this._promise=this._resolve=void 0}constructor(){this._promise=void 0,this._resolve=void 0}}},"./node_modules/lit-html/development/directives/repeat.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{repeat:()=>l});var r=s("./node_modules/lit-html/development/lit-html.js"),n=s("./node_modules/lit-html/development/directive.js"),o=s("./node_modules/lit-html/development/directive-helpers.js");const i=(e,t,s)=>{const r=new Map;for(let n=t;n<=s;n++)r.set(e[n],n);return r};class a extends n.Directive{_getValuesAndKeys(e,t,s){let r;void 0===s?s=t:void 0!==t&&(r=t);const n=[],o=[];let i=0;for(const t of e)n[i]=r?r(t,i):i,o[i]=s(t,i),i++;return{values:o,keys:n}}render(e,t,s){return this._getValuesAndKeys(e,t,s).values}update(e,[t,s,n]){const a=(0,o.getCommittedValue)(e),{values:l,keys:d}=this._getValuesAndKeys(t,s,n);if(!Array.isArray(a))return this._itemKeys=d,l;var c;const u=null!==(c=this._itemKeys)&&void 0!==c?c:this._itemKeys=[],h=[];let m,f,p=0,g=a.length-1,v=0,_=l.length-1;for(;p<=g&&v<=_;)if(null===a[p])p++;else if(null===a[g])g--;else if(u[p]===d[v])h[v]=(0,o.setChildPartValue)(a[p],l[v]),p++,v++;else if(u[g]===d[_])h[_]=(0,o.setChildPartValue)(a[g],l[_]),g--,_--;else if(u[p]===d[_])h[_]=(0,o.setChildPartValue)(a[p],l[_]),(0,o.insertPart)(e,h[_+1],a[p]),p++,_--;else if(u[g]===d[v])h[v]=(0,o.setChildPartValue)(a[g],l[v]),(0,o.insertPart)(e,a[p],a[g]),g--,v++;else if(void 0===m&&(m=i(d,v,_),f=i(u,p,g)),m.has(u[p]))if(m.has(u[g])){const t=f.get(d[v]),s=void 0!==t?a[t]:null;if(null===s){const t=(0,o.insertPart)(e,a[p]);(0,o.setChildPartValue)(t,l[v]),h[v]=t}else h[v]=(0,o.setChildPartValue)(s,l[v]),(0,o.insertPart)(e,a[p],s),a[t]=null;v++}else(0,o.removePart)(a[g]),g--;else(0,o.removePart)(a[p]),p++;for(;v<=_;){const t=(0,o.insertPart)(e,h[_+1]);(0,o.setChildPartValue)(t,l[v]),h[v++]=t}for(;p<=g;){const e=a[p++];null!==e&&(0,o.removePart)(e)}return this._itemKeys=d,(0,o.setCommittedValue)(e,h),r.noChange}constructor(e){if(super(e),e.type!==n.PartType.CHILD)throw new Error("repeat() can only be used in text expressions")}}const l=(0,n.directive)(a)},"./node_modules/lit-html/development/directives/unsafe-html.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{UnsafeHTMLDirective:()=>o,unsafeHTML:()=>i});var r=s("./node_modules/lit-html/development/lit-html.js"),n=s("./node_modules/lit-html/development/directive.js");class o extends n.Directive{render(e){if(e===r.nothing||null==e)return this._templateResult=void 0,this._value=e;if(e===r.noChange)return e;if("string"!=typeof e)throw new Error(`${this.constructor.directiveName}() called with a non-string value`);if(e===this._value)return this._templateResult;this._value=e;const t=[e];return t.raw=t,this._templateResult={_$litType$:this.constructor.resultType,strings:t,values:[]}}constructor(e){if(super(e),this._value=r.nothing,e.type!==n.PartType.CHILD)throw new Error(`${this.constructor.directiveName}() can only be used in child bindings`)}}o.directiveName="unsafeHTML",o.resultType=1;const i=(0,n.directive)(o)},"./node_modules/lit-html/development/directives/until.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{UntilDirective:()=>c,until:()=>u});var r=s("./node_modules/lit-html/development/lit-html.js"),n=s("./node_modules/lit-html/development/directive-helpers.js"),o=s("./node_modules/lit-html/development/async-directive.js"),i=s("./node_modules/lit-html/development/directives/private-async-helpers.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const l=e=>!(0,n.isPrimitive)(e)&&"function"==typeof e.then,d=1073741823;class c extends o.AsyncDirective{render(...e){var t;return null!==(t=e.find((e=>!l(e))))&&void 0!==t?t:r.noChange}update(e,t){const s=this.__values;let n=s.length;this.__values=t;const o=this.__weakThis,i=this.__pauser;this.isConnected||this.disconnected();for(let e=0;e<t.length&&!(e>this.__lastRenderedIndex);e++){const r=t[e];if(!l(r))return this.__lastRenderedIndex=e,r;e<n&&r===s[e]||(this.__lastRenderedIndex=d,n=0,Promise.resolve(r).then((e=>{return(t=function*(){for(;i.get();)yield i.get();const t=o.deref();if(void 0!==t){const s=t.__values.indexOf(r);s>-1&&s<t.__lastRenderedIndex&&(t.__lastRenderedIndex=s,t.setValue(e))}},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))})();var t})))}return r.noChange}disconnected(){this.__weakThis.disconnect(),this.__pauser.pause()}reconnected(){this.__weakThis.reconnect(this),this.__pauser.resume()}constructor(){super(...arguments),this.__lastRenderedIndex=d,this.__values=[],this.__weakThis=new i.PseudoWeakRef(this),this.__pauser=new i.Pauser}}const u=(0,o.directive)(c)},"./node_modules/lit-html/development/is-server.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{isServer:()=>r});const r=!1},"./node_modules/lit-html/development/lit-html.js":(e,t,s)=>{"use strict";var r,n,o;s.r(t),s.d(t,{_$LH:()=>re,html:()=>z,mathml:()=>U,noChange:()=>B,nothing:()=>F,render:()=>ie,svg:()=>L});const i=globalThis,a=e=>{i.emitLitDebugLogEvents&&i.dispatchEvent(new CustomEvent("lit-debug",{detail:e}))};let l,d=0;var c,u;null!==(u=(c=i).litIssuedWarnings)&&void 0!==u||(c.litIssuedWarnings=new Set),l=(e,t)=>{t+=e?` See https://lit.dev/msg/${e} for more information.`:"",i.litIssuedWarnings.has(t)||i.litIssuedWarnings.has(e)||(console.warn(t),i.litIssuedWarnings.add(t))},queueMicrotask((()=>{l("dev-mode","Lit is in dev mode. Not recommended for production!")}));const h=(null===(r=i.ShadyDOM)||void 0===r?void 0:r.inUse)&&!0===(null===(n=i.ShadyDOM)||void 0===n?void 0:n.noPatch)?i.ShadyDOM.wrap:e=>e,m=i.trustedTypes,f=m?m.createPolicy("lit-html",{createHTML:e=>e}):void 0,p=e=>e,g=(e,t,s)=>p,v=e=>{if(G!==g)throw new Error("Attempted to overwrite existing lit-html security policy. setSanitizeDOMValueFactory should be called at most once.");G=e},_=()=>{G=g},y=(e,t,s)=>G(e,t,s),b="$lit$",j=`lit$${Math.random().toFixed(9).slice(2)}$`,w="?"+j,S=`<${w}>`,x=document,E=()=>x.createComment(""),A=e=>null===e||"object"!=typeof e&&"function"!=typeof e,O=Array.isArray,C=e=>O(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]),T="[ \t\n\f\r]",$=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,k=/-->/g,M=/>/g,I=new RegExp(`>|${T}(?:([^\\s"'>=/]+)(${T}*=${T}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),P=/'/g,N=/"/g,D=/^(?:script|style|textarea|title)$/i,R=e=>(t,...s)=>(t.some((e=>void 0===e))&&console.warn("Some template strings are undefined.\nThis is probably caused by illegal octal escape sequences."),s.some((e=>null==e?void 0:e._$litStatic$))&&l("","Static values 'literal' or 'unsafeStatic' cannot be used as values to non-static templates.\nPlease use the static 'html' tag function. See https://lit.dev/docs/templates/expressions/#static-expressions"),{_$litType$:e,strings:t,values:s}),z=R(1),L=R(2),U=R(3),B=Symbol.for("lit-noChange"),F=Symbol.for("lit-nothing"),q=new WeakMap,H=x.createTreeWalker(x,129);let G=g;function W(e,t){if(!O(e)||!e.hasOwnProperty("raw")){let e="invalid template strings array";throw e="\n          Internal Error: expected template strings to be an array\n          with a 'raw' field. Faking a template strings array by\n          calling html or svg like an ordinary function is effectively\n          the same as calling unsafeHtml and can lead to major security\n          issues, e.g. opening your code up to XSS attacks.\n          If you're using the html or svg tagged template functions normally\n          and still seeing this error, please file a bug at\n          https://github.com/lit/lit/issues/new?template=bug_report.md\n          and include information about your build tooling, if any.\n        ".trim().replace(/\n */g,"\n"),new Error(e)}return void 0!==f?f.createHTML(t):t}const V=(e,t)=>{const s=e.length-1,r=[];let n,o=2===t?"<svg>":3===t?"<math>":"",i=$;for(let t=0;t<s;t++){const s=e[t];let a,l,d=-1,c=0;for(;c<s.length&&(i.lastIndex=c,l=i.exec(s),null!==l);)if(c=i.lastIndex,i===$){if("!--"===l[1])i=k;else if(void 0!==l[1])i=M;else if(void 0!==l[2])D.test(l[2])&&(n=new RegExp(`</${l[2]}`,"g")),i=I;else if(void 0!==l[3])throw new Error("Bindings in tag names are not supported. Please use static templates instead. See https://lit.dev/docs/templates/expressions/#static-expressions")}else i===I?">"===l[0]?(i=null!=n?n:$,d=-1):void 0===l[1]?d=-2:(d=i.lastIndex-l[2].length,a=l[1],i=void 0===l[3]?I:'"'===l[3]?N:P):i===N||i===P?i=I:i===k||i===M?i=$:(i=I,n=void 0);console.assert(-1===d||i===I||i===P||i===N,"unexpected parse state B");const u=i===I&&e[t+1].startsWith("/>")?" ":"";o+=i===$?s+S:d>=0?(r.push(a),s.slice(0,d)+b+s.slice(d)+j+u):s+j+(-2===d?t:u)}return[W(e,o+(e[s]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),r]};class K{static createElement(e,t){const s=x.createElement("template");return s.innerHTML=e,s}constructor({strings:e,_$litType$:t},s){let r;this.parts=[];let n=0,o=0;const i=e.length-1,d=this.parts,[c,u]=V(e,t);if(this.el=K.createElement(c,s),H.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(r=H.nextNode())&&d.length<i;){if(1===r.nodeType){{const e=r.localName;if(/^(?:textarea|template)$/i.test(e)&&r.innerHTML.includes(j)){const t=`Expressions are not supported inside \`${e}\` elements. See https://lit.dev/msg/expression-in-${e} for more information.`;if("template"===e)throw new Error(t);l("",t)}}if(r.hasAttributes())for(const e of r.getAttributeNames())if(e.endsWith(b)){const t=u[o++],s=r.getAttribute(e).split(j),i=/([.?@])?(.*)/.exec(t);d.push({type:1,index:n,name:i[2],strings:s,ctor:"."===i[1]?Z:"?"===i[1]?ee:"@"===i[1]?te:X}),r.removeAttribute(e)}else e.startsWith(j)&&(d.push({type:6,index:n}),r.removeAttribute(e));if(D.test(r.tagName)){const e=r.textContent.split(j),t=e.length-1;if(t>0){r.textContent=m?m.emptyScript:"";for(let s=0;s<t;s++)r.append(e[s],E()),H.nextNode(),d.push({type:2,index:++n});r.append(e[t],E())}}}else if(8===r.nodeType){if(r.data===w)d.push({type:2,index:n});else{let e=-1;for(;-1!==(e=r.data.indexOf(j,e+1));)d.push({type:7,index:n}),e+=j.length-1}}n++}if(u.length!==o)throw new Error('Detected duplicate attribute bindings. This occurs if your template has duplicate attributes on an element tag. For example "<input ?disabled=${true} ?disabled=${false}>" contains a duplicate "disabled" attribute. The error was detected in the following template: \n`'+e.join("${...}")+"`");a&&a({kind:"template prep",template:this,clonableTemplate:this.el,parts:this.parts,strings:e})}}function J(e,t,s=e,r){var n;if(t===B)return t;let o=void 0!==r?null===(n=s.__directives)||void 0===n?void 0:n[r]:s.__directive;const i=A(t)?void 0:t._$litDirective$;var a,l,d;(null==o?void 0:o.constructor)!==i&&(null==o||null===(a=o._$notifyDirectiveConnectionChanged)||void 0===a||a.call(o,!1),void 0===i?o=void 0:(o=new i(e),o._$initialize(e,s,r)),void 0!==r?(null!==(d=(l=s).__directives)&&void 0!==d?d:l.__directives=[])[r]=o:s.__directive=o);return void 0!==o&&(t=J(e,o._$resolve(e,t.values),o,r)),t}class Y{get parentNode(){return this._$parent.parentNode}get _$isConnected(){return this._$parent._$isConnected}_clone(e){const{el:{content:t},parts:s}=this._$template;var r;const n=(null!==(r=null==e?void 0:e.creationScope)&&void 0!==r?r:x).importNode(t,!0);H.currentNode=n;let o=H.nextNode(),i=0,a=0,l=s[0];for(;void 0!==l;){if(i===l.index){let t;2===l.type?t=new Q(o,o.nextSibling,this,e):1===l.type?t=new l.ctor(o,l.name,l.strings,this,e):6===l.type&&(t=new se(o,this,e)),this._$parts.push(t),l=s[++a]}i!==(null==l?void 0:l.index)&&(o=H.nextNode(),i++)}return H.currentNode=x,n}_update(e){let t=0;for(const s of this._$parts)void 0!==s&&(a&&a({kind:"set part",part:s,value:e[t],valueIndex:t,values:e,templateInstance:this}),void 0!==s.strings?(s._$setValue(e,s,t),t+=s.strings.length-2):s._$setValue(e[t])),t++}constructor(e,t){this._$parts=[],this._$disconnectableChildren=void 0,this._$template=e,this._$parent=t}}class Q{get _$isConnected(){var e,t;return null!==(t=null===(e=this._$parent)||void 0===e?void 0:e._$isConnected)&&void 0!==t?t:this.__isConnected}get parentNode(){let e=h(this._$startNode).parentNode;const t=this._$parent;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$startNode}get endNode(){return this._$endNode}_$setValue(e,t=this){if(null===this.parentNode)throw new Error("This `ChildPart` has no `parentNode` and therefore cannot accept a value. This likely means the element containing the part was manipulated in an unsupported way outside of Lit's control such that the part's marker nodes were ejected from DOM. For example, setting the element's `innerHTML` or `textContent` can do this.");if(e=J(this,e,t),A(e))e===F||null==e||""===e?(this._$committedValue!==F&&(a&&a({kind:"commit nothing to child",start:this._$startNode,end:this._$endNode,parent:this._$parent,options:this.options}),this._$clear()),this._$committedValue=F):e!==this._$committedValue&&e!==B&&this._commitText(e);else if(void 0!==e._$litType$)this._commitTemplateResult(e);else if(void 0!==e.nodeType){var s;if((null===(s=this.options)||void 0===s?void 0:s.host)===e)return this._commitText("[probable mistake: rendered a template's host in itself (commonly caused by writing ${this} in a template]"),void console.warn("Attempted to render the template host",e,"inside itself. This is almost always a mistake, and in dev mode ","we render some warning text. In production however, we'll ","render it, which will usually result in an error, and sometimes ","in the element disappearing from the DOM.");this._commitNode(e)}else C(e)?this._commitIterable(e):this._commitText(e)}_insert(e){return h(h(this._$startNode).parentNode).insertBefore(e,this._$endNode)}_commitNode(e){if(this._$committedValue!==e){if(this._$clear(),G!==g){var t;const e=null===(t=this._$startNode.parentNode)||void 0===t?void 0:t.nodeName;if("STYLE"===e||"SCRIPT"===e){let t="Forbidden";throw t="STYLE"===e?"Lit does not support binding inside style nodes. This is a security risk, as style injection attacks can exfiltrate data and spoof UIs. Consider instead using css`...` literals to compose styles, and do dynamic styling with css custom properties, ::parts, <slot>s, and by mutating the DOM rather than stylesheets.":"Lit does not support binding inside script nodes. This is a security risk, as it could allow arbitrary code execution.",new Error(t)}}a&&a({kind:"commit node",start:this._$startNode,parent:this._$parent,value:e,options:this.options}),this._$committedValue=this._insert(e)}}_commitText(e){if(this._$committedValue!==F&&A(this._$committedValue)){const t=h(this._$startNode).nextSibling;void 0===this._textSanitizer&&(this._textSanitizer=y(t,"data","property")),e=this._textSanitizer(e),a&&a({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}else{const t=x.createTextNode("");this._commitNode(t),void 0===this._textSanitizer&&(this._textSanitizer=y(t,"data","property")),e=this._textSanitizer(e),a&&a({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}this._$committedValue=e}_commitTemplateResult(e){var t;const{values:s,_$litType$:r}=e,n="number"==typeof r?this._$getTemplate(e):(void 0===r.el&&(r.el=K.createElement(W(r.h,r.h[0]),this.options)),r);if((null===(t=this._$committedValue)||void 0===t?void 0:t._$template)===n)a&&a({kind:"template updating",template:n,instance:this._$committedValue,parts:this._$committedValue._$parts,options:this.options,values:s}),this._$committedValue._update(s);else{const e=new Y(n,this),t=e._clone(this.options);a&&a({kind:"template instantiated",template:n,instance:e,parts:e._$parts,options:this.options,fragment:t,values:s}),e._update(s),a&&a({kind:"template instantiated and updated",template:n,instance:e,parts:e._$parts,options:this.options,fragment:t,values:s}),this._commitNode(t),this._$committedValue=e}}_$getTemplate(e){let t=q.get(e.strings);return void 0===t&&q.set(e.strings,t=new K(e)),t}_commitIterable(e){O(this._$committedValue)||(this._$committedValue=[],this._$clear());const t=this._$committedValue;let s,r=0;for(const n of e)r===t.length?t.push(s=new Q(this._insert(E()),this._insert(E()),this,this.options)):s=t[r],s._$setValue(n),r++;r<t.length&&(this._$clear(s&&h(s._$endNode).nextSibling,r),t.length=r)}_$clear(e=h(this._$startNode).nextSibling,t){var s;for(null===(s=this._$notifyConnectionChanged)||void 0===s||s.call(this,!1,!0,t);e&&e!==this._$endNode;){const t=h(e).nextSibling;h(e).remove(),e=t}}setConnected(e){if(void 0!==this._$parent)throw new Error("part.setConnected() may only be called on a RootPart returned from render().");var t;this.__isConnected=e,null===(t=this._$notifyConnectionChanged)||void 0===t||t.call(this,e)}constructor(e,t,s,r){var n;this.type=2,this._$committedValue=F,this._$disconnectableChildren=void 0,this._$startNode=e,this._$endNode=t,this._$parent=s,this.options=r,this.__isConnected=null===(n=null==r?void 0:r.isConnected)||void 0===n||n,this._textSanitizer=void 0}}class X{get tagName(){return this.element.tagName}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e,t=this,s,r){const n=this.strings;let o=!1;if(void 0===n)e=J(this,e,t,0),o=!A(e)||e!==this._$committedValue&&e!==B,o&&(this._$committedValue=e);else{const r=e;let i,a;for(e=n[0],i=0;i<n.length-1;i++)a=J(this,r[s+i],t,i),a===B&&(a=this._$committedValue[i]),o||(o=!A(a)||a!==this._$committedValue[i]),a===F?e=F:e!==F&&(e+=(null!=a?a:"")+n[i+1]),this._$committedValue[i]=a}o&&!r&&this._commitValue(e)}_commitValue(e){e===F?h(this.element).removeAttribute(this.name):(void 0===this._sanitizer&&(this._sanitizer=G(this.element,this.name,"attribute")),e=this._sanitizer(null!=e?e:""),a&&a({kind:"commit attribute",element:this.element,name:this.name,value:e,options:this.options}),h(this.element).setAttribute(this.name,null!=e?e:""))}constructor(e,t,s,r,n){this.type=1,this._$committedValue=F,this._$disconnectableChildren=void 0,this.element=e,this.name=t,this._$parent=r,this.options=n,s.length>2||""!==s[0]||""!==s[1]?(this._$committedValue=new Array(s.length-1).fill(new String),this.strings=s):this._$committedValue=F,this._sanitizer=void 0}}class Z extends X{_commitValue(e){void 0===this._sanitizer&&(this._sanitizer=G(this.element,this.name,"property")),e=this._sanitizer(e),a&&a({kind:"commit property",element:this.element,name:this.name,value:e,options:this.options}),this.element[this.name]=e===F?void 0:e}constructor(){super(...arguments),this.type=3}}class ee extends X{_commitValue(e){a&&a({kind:"commit boolean attribute",element:this.element,name:this.name,value:!(!e||e===F),options:this.options}),h(this.element).toggleAttribute(this.name,!!e&&e!==F)}constructor(){super(...arguments),this.type=4}}class te extends X{_$setValue(e,t=this){var s;if((e=null!==(s=J(this,e,t,0))&&void 0!==s?s:F)===B)return;const r=this._$committedValue,n=e===F&&r!==F||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,o=e!==F&&(r===F||n);a&&a({kind:"commit event listener",element:this.element,name:this.name,value:e,options:this.options,removeListener:n,addListener:o,oldListener:r}),n&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,e),this._$committedValue=e}handleEvent(e){var t,s;"function"==typeof this._$committedValue?this._$committedValue.call(null!==(s=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==s?s:this.element,e):this._$committedValue.handleEvent(e)}constructor(e,t,s,r,n){if(super(e,t,s,r,n),this.type=5,void 0!==this.strings)throw new Error(`A \`<${e.localName}>\` has a \`@${t}=...\` listener with invalid content. Event listeners in templates must have exactly one expression and no surrounding text.`)}}class se{get _$isConnected(){return this._$parent._$isConnected}_$setValue(e){a&&a({kind:"commit to element binding",element:this.element,value:e,options:this.options}),J(this,e)}constructor(e,t,s){this.element=e,this.type=6,this._$disconnectableChildren=void 0,this._$parent=t,this.options=s}}const re={_boundAttributeSuffix:b,_marker:j,_markerMatch:w,_HTML_RESULT:1,_getTemplateHtml:V,_TemplateInstance:Y,_isIterable:C,_resolveDirective:J,_ChildPart:Q,_AttributePart:X,_BooleanAttributePart:ee,_EventPart:te,_PropertyPart:Z,_ElementPart:se},ne=i.litHtmlPolyfillSupportDevMode;var oe;null==ne||ne(K,Q),(null!==(oe=(o=i).litHtmlVersions)&&void 0!==oe?oe:o.litHtmlVersions=[]).push("3.3.0"),i.litHtmlVersions.length>1&&queueMicrotask((()=>{l("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.")}));const ie=(e,t,s)=>{if(null==t)throw new TypeError(`The container to render into may not be ${t}`);const r=d++;var n;const o=null!==(n=null==s?void 0:s.renderBefore)&&void 0!==n?n:t;let i=o._$litPart$;if(a&&a({kind:"begin render",id:r,value:e,container:t,options:s,part:i}),void 0===i){var l;const e=null!==(l=null==s?void 0:s.renderBefore)&&void 0!==l?l:null;o._$litPart$=i=new Q(t.insertBefore(E(),e),e,void 0,null!=s?s:{})}return i._$setValue(e),a&&a({kind:"end render",id:r,value:e,container:t,options:s,part:i}),i};ie.setSanitizer=v,ie.createSanitizer=y,ie._testOnlyClearSanitizerFactoryDoNotCallOrElse=_},"./node_modules/lit/async-directive.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{AsyncDirective:()=>r.AsyncDirective,Directive:()=>r.Directive,PartType:()=>r.PartType,directive:()=>r.directive});var r=s("./node_modules/lit-html/development/async-directive.js")},"./node_modules/lit/directive.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{Directive:()=>r.Directive,PartType:()=>r.PartType,directive:()=>r.directive});var r=s("./node_modules/lit-html/development/directive.js")},"./node_modules/lit/directives/repeat.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{repeat:()=>r.repeat});var r=s("./node_modules/lit-html/development/directives/repeat.js")},"./node_modules/lit/directives/unsafe-html.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{UnsafeHTMLDirective:()=>r.UnsafeHTMLDirective,unsafeHTML:()=>r.unsafeHTML});var r=s("./node_modules/lit-html/development/directives/unsafe-html.js")},"./node_modules/lit/directives/until.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{UntilDirective:()=>r.UntilDirective,until:()=>r.until});var r=s("./node_modules/lit-html/development/directives/until.js")},"./node_modules/lit/html.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{_$LH:()=>r._$LH,html:()=>r.html,mathml:()=>r.mathml,noChange:()=>r.noChange,nothing:()=>r.nothing,render:()=>r.render,svg:()=>r.svg});var r=s("./node_modules/lit-html/development/lit-html.js")},"./node_modules/lit/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{CSSResult:()=>r.CSSResult,LitElement:()=>r.LitElement,ReactiveElement:()=>r.ReactiveElement,_$LE:()=>r._$LE,_$LH:()=>r._$LH,adoptStyles:()=>r.adoptStyles,css:()=>r.css,defaultConverter:()=>r.defaultConverter,getCompatibleStyle:()=>r.getCompatibleStyle,html:()=>r.html,isServer:()=>n.isServer,mathml:()=>r.mathml,noChange:()=>r.noChange,notEqual:()=>r.notEqual,nothing:()=>r.nothing,render:()=>r.render,supportsAdoptingStyleSheets:()=>r.supportsAdoptingStyleSheets,svg:()=>r.svg,unsafeCSS:()=>r.unsafeCSS});s("./node_modules/@lit/reactive-element/development/reactive-element.js"),s("./node_modules/lit-html/development/lit-html.js");var r=s("./node_modules/lit-element/development/lit-element.js"),n=s("./node_modules/lit-html/development/is-server.js")},"./node_modules/localforage-driver-memory/_bundle/umd.js":function(e,t){"undefined"!=typeof self&&self,function(e){"use strict";var t="localforage-driver-memory";function s(e){var t="function"==typeof Symbol&&e[Symbol.iterator],s=0;return t?t.call(e):{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}}}function r(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var s=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)s.append(e[r]);return s.getBlob(t.type)}}var n=/^~~local_forage_type~([^~]+)~/,o=9,i=o+4,a=Object.prototype.toString;function l(e){var t=.75*e.length,s=e.length;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);for(var r=new ArrayBuffer(t),n=new Uint8Array(r),o=0,i=0;o<s;o+=4){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o]),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o+1]),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o+2]),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[o+3]);n[i++]=a<<2|l>>4,n[i++]=(15&l)<<4|d>>2,n[i++]=(3&d)<<6|63&c}return r}function d(e){for(var t=new Uint8Array(e),s="",r=0;r<t.length;r+=3)s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t[r]>>2],s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&t[r])<<4|t[r+1]>>4],s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&t[r+1])<<2|t[r+2]>>6],s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&t[r+2]];return t.length%3==2?s=s.substring(0,s.length-1)+"=":t.length%3==1&&(s=s.substring(0,s.length-2)+"=="),s}function c(e,t){var s="";if(e&&(s=a.call(e)),e&&("[object ArrayBuffer]"===s||e.buffer&&"[object ArrayBuffer]"===a.call(e.buffer))){var r=void 0,n="__lfsc__:";e instanceof ArrayBuffer?(r=e,n+="arbf"):(r=e.buffer,"[object Int8Array]"===s?n+="si08":"[object Uint8Array]"===s?n+="ui08":"[object Uint8ClampedArray]"===s?n+="uic8":"[object Int16Array]"===s?n+="si16":"[object Uint16Array]"===s?n+="ur16":"[object Int32Array]"===s?n+="si32":"[object Uint32Array]"===s?n+="ui32":"[object Float32Array]"===s?n+="fl32":"[object Float64Array]"===s?n+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(n+d(r))}else if("[object Blob]"===s){var o=new FileReader;o.onload=function(){var s="~~local_forage_type~"+e.type+"~"+d(this.result);t("__lfsc__:blob"+s)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),t(null,s)}}function u(e){if("__lfsc__:"!==e.substring(0,o))return JSON.parse(e);var t,s=e.substring(i),a=e.substring(o,i);if("blob"===a&&n.test(s)){var d=s.match(n);t=d[1],s=s.substring(d[0].length)}var c=l(s);switch(a){case"arbf":return c;case"blob":return r([c],{type:t});case"si08":return new Int8Array(c);case"ui08":return new Uint8Array(c);case"uic8":return new Uint8ClampedArray(c);case"si16":return new Int16Array(c);case"ur16":return new Uint16Array(c);case"si32":return new Int32Array(c);case"ui32":return new Uint32Array(c);case"fl32":return new Float32Array(c);case"fl64":return new Float64Array(c);default:throw new Error("Unkown type: "+a)}}function h(e){var t,r;if(null===e||"object"!=typeof e||"isActiveClone"in e)return e;var n=e instanceof Date?new Date(e):e.constructor();try{for(var o=s(Object.keys(e)),i=o.next();!i.done;i=o.next()){var a=i.value;Object.prototype.hasOwnProperty.call(e,a)&&(e.isActiveClone=null,n[a]=h(e[a]),delete e.isActiveClone)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n}function m(e,t){return(e.name||t.name)+"/"+(e.storeName||t.storeName)+"/"}function f(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function p(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function g(e,t){var s=this;if(t=p.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}return{promise:e.name?new Promise((function(t){e.storeName?t(m(e,s._defaultConfig)):t(e.name+"/")})):Promise.reject("Invalid arguments"),callback:t}}function v(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}var _={bufferToString:d,deserialize:u,serialize:c,stringToBuffer:l},y={},b=function(){function e(e){this.kp=e,this.data={}}return e.resolve=function(t){return y[t]||(y[t]=new e(t)),y[t]},e.prototype.clear=function(){this.data={}},e.prototype.drop=function(){this.clear(),delete y[this.kp]},e.prototype.get=function(e){return this.data[e]},e.prototype.key=function(e){return this.keys()[e]},e.prototype.keys=function(){return Object.keys(this.data)},e.prototype.rm=function(e){delete this.data[e]},e.prototype.set=function(e,t){this.data[e]=t},e}();function j(e){var t=e?h(e):{},s=m(t,this._defaultConfig),r=b.resolve(s);return this._dbInfo=t,this._dbInfo.serializer=_,this._dbInfo.keyPrefix=s,this._dbInfo.mStore=r,Promise.resolve()}function w(e){var t=this,s=this.ready().then((function(){t._dbInfo.mStore.clear()}));return f(s,e),s}function S(e,t){var s=g.apply(this,arguments),r=s.promise,n=s.callback;return f(r.then((function(e){b.resolve(e).drop()})),n),r}function x(e,t){var s=this;e=v(e);var r=this.ready().then((function(){var t=s._dbInfo.mStore.get(e);return null==t?null:s._dbInfo.serializer.deserialize(t)}));return f(r,t),r}function E(e,t){var s=this,r=this.ready().then((function(){for(var t=s._dbInfo.mStore,r=t.keys(),n=0;n<r.length;n++){var o=t.get(r[n]);if(o&&(o=s._dbInfo.serializer.deserialize(o)),void 0!==(o=e(o,r[n],n+1)))return o}}));return f(r,t),r}function A(e,t){var s=this,r=this.ready().then((function(){var t;try{void 0===(t=s._dbInfo.mStore.key(e))&&(t=null)}catch(e){t=null}return t}));return f(r,t),r}function O(e){var t=this,s=this.ready().then((function(){return t._dbInfo.mStore.keys()}));return f(s,e),s}function C(e){var t=this.keys().then((function(e){return e.length}));return f(t,e),t}function T(e,t){var s=this;e=v(e);var r=this.ready().then((function(){s._dbInfo.mStore.rm(e)}));return f(r,t),r}function $(e,t,s){var r=this;e=v(e);var n=this.ready().then((function(){void 0===t&&(t=null);var s=t;return new Promise((function(n,o){r._dbInfo.serializer.serialize(t,(function(t,i){if(i)o(i);else try{r._dbInfo.mStore.set(e,t),n(s)}catch(e){o(e)}}))}))}));return f(n,s),n}var k=!0;e._support=k,e._driver=t,e._initStorage=j,e.clear=w,e.dropInstance=S,e.getItem=x,e.iterate=E,e.key=A,e.keys=O,e.length=C,e.removeItem=T,e.setItem=$,Object.defineProperty(e,"__esModule",{value:!0})}(t)},"./node_modules/localforage-setitems/dist/localforage-setitems.js":function(e,t,s){!function(e,t){"use strict";function s(e){return s.result?s.result:e&&"function"==typeof e.getSerializer?(s.result=e.getSerializer(),s.result):Promise.reject(new Error("localforage.getSerializer() was not available! localforage v1.4+ is required!"))}function r(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function n(e,t,s,r){function n(e,t){var s=e||t;return e&&"function"==typeof e||"string"!=typeof s||(e=function(e){return e[s]}),e}var o=[];if("[object Array]"===Object.prototype.toString.call(e)){t=n(t,"key"),s=n(s,"value");for(var i=0,a=e.length;i<a;i++){var l=e[i];o.push(r(t(l),s(l)))}}else for(var d in e)e.hasOwnProperty(d)&&o.push(r(d,e[d]));return o}function o(e,t,s,o){var i=this,a=i.ready().then((function(){return new Promise((function(r,o){var a,l=i._dbInfo,d=l.db.transaction(l.storeName,"readwrite"),c=d.objectStore(l.storeName);function u(e){var t=e.target||this;a=t.error||t.transaction.error,o(a)}d.oncomplete=function(){r(e)},d.onabort=d.onerror=function(e){o(a||e.target)},n(e,t,s,(function(e,t){null===t&&(t=void 0),c.put(t,e).onerror=u}))}))}));return r(a,o),a}function i(e,t,o,i){var a=this,l=new Promise((function(r,i){a.ready().then((function(){return s(a)})).then((function(s){var l=a._dbInfo;l.db.transaction((function(a){var d="INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",c=n(e,t,o,(function(e,t){return new Promise((function(r,n){s.serialize(t,(function(t,s){s?n(s):a.executeSql(d,[e,t],(function(){r()}),(function(e,t){n(t)}))}))}))}));Promise.all(c).then((function(){r(e)}),i)}),(function(e){i(e)}))})).catch(i)}));return r(l,i),l}function a(e,t,s,o){var i=this,a=n(e,t,s,(function(e,t){return i.setItem(e,t)})),l=Promise.all(a);return r(l,o),l}function l(e,t,s,r){var n=this,l=n.driver();return l===n.INDEXEDDB?o.call(n,e,t,s,r):l===n.WEBSQL?i.call(n,e,t,s,r):a.call(n,e,t,s,r)}function d(e){var t=Object.getPrototypeOf(e);t&&(t.setItems=l,t.setItems.indexedDB=function(){return o.apply(this,arguments)},t.setItems.websql=function(){return i.apply(this,arguments)},t.setItems.generic=function(){return a.apply(this,arguments)})}var c=d(t="default"in t?t.default:t);e.setItemsGeneric=a,e.localforageSetItems=l,e.extendPrototype=d,e.extendPrototypeResult=c,Object.defineProperty(e,"__esModule",{value:!0})}(t,s("./node_modules/localforage/dist/localforage.js"))},"./node_modules/localforage-webextensionstorage-driver/driver.js":(e,t,s)=>{"use strict";var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var s=(0,a.getStorage)(),r=!(!s||!s[t]),l=r?s[t]:{clear:function(){},get:function(){},remove:function(){},set:function(){}},d=l.clear.bind(l),c=l.get.bind(l),u=l.remove.bind(l),h=l.set.bind(l);return{_driver:e,_support:r,_initStorage:function(){return Promise.resolve()},clear:function(e){return(0,i.default)(n.default.mark((function t(){return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d(),e&&e();case 2:case"end":return t.stop()}}),t)})))()},iterate:function(e,t){return(0,i.default)(n.default.mark((function s(){var r;return n.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,a.usePromise)(c,null);case 2:r=s.sent,Object.keys(r).forEach((function(t,s){return e(r[t],t,s)})),t&&t();case 6:case"end":return s.stop()}}),s)})))()},getItem:function(e,t){return(0,i.default)(n.default.mark((function s(){var r;return n.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,(0,a.usePromise)(c,e);case 3:return r=s.sent,r=void 0===(r="string"==typeof e?r[e]:r)?null:r,t&&t(null,r),s.abrupt("return",r);case 10:throw s.prev=10,s.t0=s.catch(0),t&&t(s.t0),s.t0;case 14:case"end":return s.stop()}}),s,null,[[0,10]])})))()},key:function(e,t){return(0,i.default)(n.default.mark((function s(){var r,o;return n.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,a.usePromise)(c,null);case 2:return r=s.sent,o=Object.keys(r)[e],t&&t(o),s.abrupt("return",o);case 6:case"end":return s.stop()}}),s)})))()},keys:function(e){return(0,i.default)(n.default.mark((function t(){var s,r;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,a.usePromise)(c,null);case 2:return s=t.sent,r=Object.keys(s),e&&e(r),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))()},length:function(e){return(0,i.default)(n.default.mark((function t(){var s,r,o;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,a.usePromise)(c,null);case 2:return s=t.sent,r=Object.keys(s),o=r.length,e&&e(o),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})))()},removeItem:function(e,t){return(0,i.default)(n.default.mark((function s(){return n.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,a.usePromise)(u,e);case 2:t&&t();case 3:case"end":return s.stop()}}),s)})))()},setItem:function(e,t,s){return(0,i.default)(n.default.mark((function r(){return n.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,a.usePromise)(h,(0,o.default)({},e,t));case 2:s&&s();case 3:case"end":return r.stop()}}),r)})))()}}};var n=r(s("./node_modules/@babel/runtime/regenerator/index.js")),o=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),i=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=s("./node_modules/localforage-webextensionstorage-driver/utils.js")},"./node_modules/localforage-webextensionstorage-driver/local.js":(e,t,s)=>{"use strict";var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r(s("./node_modules/localforage-webextensionstorage-driver/driver.js")).default)("webExtensionLocalStorage","local");t.default=n},"./node_modules/localforage-webextensionstorage-driver/sync.js":(e,t,s)=>{"use strict";var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r(s("./node_modules/localforage-webextensionstorage-driver/driver.js")).default)("webExtensionSyncStorage","sync");t.default=n},"./node_modules/localforage-webextensionstorage-driver/utils.js":(e,t)=>{"use strict";function s(){return"undefined"!=typeof browser&&browser.storage||"undefined"!=typeof chrome&&chrome.storage}Object.defineProperty(t,"__esModule",{value:!0}),t.getStorage=s,t.usePromise=function(e,t){if(function(){var e=s();try{return e&&e.local.get&&e.local.get()&&"function"==typeof e.local.get().then}catch(e){return!1}}())return e(t);return new Promise((function(s){e(t,(function(){s.apply(void 0,arguments)}))}))}},"./node_modules/localforage/dist/localforage.js":(e,t,s)=>{e.exports=function e(t,s,r){function n(i,a){if(!s[i]){if(!t[i]){if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var d=s[i]={exports:{}};t[i][0].call(d.exports,(function(e){var s=t[i][1][e];return n(s||e)}),d,d.exports,e,t,s,r)}return s[i].exports}for(var o=void 0,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(e,t,r){(function(e){"use strict";var s,r,n=e.MutationObserver||e.WebKitMutationObserver;if(n){var o=0,i=new n(c),a=e.document.createTextNode("");i.observe(a,{characterData:!0}),s=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)s="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var l=new e.MessageChannel;l.port1.onmessage=c,s=function(){l.port2.postMessage(0)}}var d=[];function c(){var e,t;r=!0;for(var s=d.length;s;){for(t=d,d=[],e=-1;++e<s;)t[e]();s=d.length}r=!1}function u(e){1!==d.push(e)||r||s()}t.exports=u}).call(this,void 0!==s.g?s.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,s){"use strict";var r=e(1);function n(){}var o={},i=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function d(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==n&&m(this,e)}function c(e,t,s){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof s&&(this.onRejected=s,this.callRejected=this.otherCallRejected)}function u(e,t,s){r((function(){var r;try{r=t(s)}catch(t){return o.reject(e,t)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function m(e,t){var s=!1;function r(t){s||(s=!0,o.reject(e,t))}function n(t){s||(s=!0,o.resolve(e,t))}function i(){t(n,r)}var a=f(i);"error"===a.status&&r(a.value)}function f(e,t){var s={};try{s.value=e(t),s.status="success"}catch(e){s.status="error",s.value=e}return s}function p(e){return e instanceof this?e:o.resolve(new this(n),e)}function g(e){var t=new this(n);return o.reject(t,e)}function v(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var s=e.length,r=!1;if(!s)return this.resolve([]);for(var i=new Array(s),a=0,l=-1,d=new this(n);++l<s;)c(e[l],l);return d;function c(e,n){function l(e){i[n]=e,++a!==s||r||(r=!0,o.resolve(d,i))}t.resolve(e).then(l,(function(e){r||(r=!0,o.reject(d,e))}))}}function _(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var s=e.length,r=!1;if(!s)return this.resolve([]);for(var i=-1,a=new this(n);++i<s;)l(e[i]);return a;function l(e){t.resolve(e).then((function(e){r||(r=!0,o.resolve(a,e))}),(function(e){r||(r=!0,o.reject(a,e))}))}}t.exports=d,d.prototype.catch=function(e){return this.then(null,e)},d.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===i)return this;var s=new this.constructor(n);return this.state!==l?u(s,this.state===a?e:t,this.outcome):this.queue.push(new c(s,e,t)),s},c.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){o.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},o.resolve=function(e,t){var s=f(h,t);if("error"===s.status)return o.reject(e,s.value);var r=s.value;if(r)m(e,r);else{e.state=a,e.outcome=t;for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callFulfilled(t)}return e},o.reject=function(e,t){e.state=i,e.outcome=t;for(var s=-1,r=e.queue.length;++s<r;)e.queue[s].callRejected(t);return e},d.resolve=p,d.reject=g,d.all=v,d.race=_},{1:1}],3:[function(e,t,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==s.g?s.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,s){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var i=o();function a(){try{if(!i||!i.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function l(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var s=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)s.append(e[r]);return s.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var d=Promise;function c(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function u(e,t,s){"function"==typeof t&&e.then(t),"function"==typeof s&&e.catch(s)}function h(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function m(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",p=void 0,g={},v=Object.prototype.toString,_="readonly",y="readwrite";function b(e){for(var t=e.length,s=new ArrayBuffer(t),r=new Uint8Array(s),n=0;n<t;n++)r[n]=e.charCodeAt(n);return s}function j(e){return new d((function(t){var s=e.transaction(f,y),r=l([""]);s.objectStore(f).put(r,"key"),s.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},s.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),s=navigator.userAgent.match(/Edge\//);t(s||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function w(e){return"boolean"==typeof p?d.resolve(p):j(e).then((function(e){return p=e}))}function S(e){var t=g[e.name],s={};s.promise=new d((function(e,t){s.resolve=e,s.reject=t})),t.deferredOperations.push(s),t.dbReady?t.dbReady=t.dbReady.then((function(){return s.promise})):t.dbReady=s.promise}function x(e){var t=g[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function E(e,t){var s=g[e.name].deferredOperations.pop();if(s)return s.reject(t),s.promise}function A(e,t){return new d((function(s,r){if(g[e.name]=g[e.name]||D(),e.db){if(!t)return s(e.db);S(e),e.db.close()}var n=[e.name];t&&n.push(e.version);var o=i.open.apply(i,n);t&&(o.onupgradeneeded=function(t){var s=o.result;try{s.createObjectStore(e.storeName),t.oldVersion<=1&&s.createObjectStore(f)}catch(s){if("ConstraintError"!==s.name)throw s;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),r(o.error)},o.onsuccess=function(){var t=o.result;t.onversionchange=function(e){e.target.close()},s(t),x(e)}}))}function O(e){return A(e,!1)}function C(e){return A(e,!0)}function T(e,t){if(!e.db)return!0;var s=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,n=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),n||s){if(s){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function $(e){return new d((function(t,s){var r=new FileReader;r.onerror=s,r.onloadend=function(s){var r=btoa(s.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function k(e){return l([b(atob(e.data))],{type:e.type})}function M(e){return e&&e.__local_forage_encoded_blob}function I(e){var t=this,s=t._initReady().then((function(){var e=g[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return u(s,e,e),s}function P(e){S(e);for(var t=g[e.name],s=t.forages,r=0;r<s.length;r++){var n=s[r];n._dbInfo.db&&(n._dbInfo.db.close(),n._dbInfo.db=null)}return e.db=null,O(e).then((function(t){return e.db=t,T(e)?C(e):t})).then((function(r){e.db=t.db=r;for(var n=0;n<s.length;n++)s[n]._dbInfo.db=r})).catch((function(t){throw E(e,t),t}))}function N(e,t,s,r){void 0===r&&(r=1);try{var n=e.db.transaction(e.storeName,t);s(null,n)}catch(n){if(r>0&&(!e.db||"InvalidStateError"===n.name||"NotFoundError"===n.name))return d.resolve().then((function(){if(!e.db||"NotFoundError"===n.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),C(e)})).then((function(){return P(e).then((function(){N(e,t,s,r-1)}))})).catch(s);s(n)}}function D(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function R(e){var t=this,s={db:null};if(e)for(var r in e)s[r]=e[r];var n=g[s.name];n||(n=D(),g[s.name]=n),n.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=I);var o=[];function i(){return d.resolve()}for(var a=0;a<n.forages.length;a++){var l=n.forages[a];l!==t&&o.push(l._initReady().catch(i))}var c=n.forages.slice(0);return d.all(o).then((function(){return s.db=n.db,O(s)})).then((function(e){return s.db=e,T(s,t._defaultConfig.version)?C(s):e})).then((function(e){s.db=n.db=e,t._dbInfo=s;for(var r=0;r<c.length;r++){var o=c[r];o!==t&&(o._dbInfo.db=s.db,o._dbInfo.version=s.version)}}))}function z(e,t){var s=this;e=h(e);var r=new d((function(t,r){s.ready().then((function(){N(s._dbInfo,_,(function(n,o){if(n)return r(n);try{var i=o.objectStore(s._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),M(e)&&(e=k(e)),t(e)},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function L(e,t){var s=this,r=new d((function(t,r){s.ready().then((function(){N(s._dbInfo,_,(function(n,o){if(n)return r(n);try{var i=o.objectStore(s._dbInfo.storeName).openCursor(),a=1;i.onsuccess=function(){var s=i.result;if(s){var r=s.value;M(r)&&(r=k(r));var n=e(r,s.key,a++);void 0!==n?t(n):s.continue()}else t()},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function U(e,t,s){var r=this;e=h(e);var n=new d((function(s,n){var o;r.ready().then((function(){return o=r._dbInfo,"[object Blob]"===v.call(t)?w(o.db).then((function(e){return e?t:$(t)})):t})).then((function(t){N(r._dbInfo,y,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var l=a.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),s(t)},i.onabort=i.onerror=function(){var e=l.error?l.error:l.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return c(n,s),n}function B(e,t){var s=this;e=h(e);var r=new d((function(t,r){s.ready().then((function(){N(s._dbInfo,y,(function(n,o){if(n)return r(n);try{var i=o.objectStore(s._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(i.error)},o.onabort=function(){var e=i.error?i.error:i.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function F(e){var t=this,s=new d((function(e,s){t.ready().then((function(){N(t._dbInfo,y,(function(r,n){if(r)return s(r);try{var o=n.objectStore(t._dbInfo.storeName).clear();n.oncomplete=function(){e()},n.onabort=n.onerror=function(){var e=o.error?o.error:o.transaction.error;s(e)}}catch(e){s(e)}}))})).catch(s)}));return c(s,e),s}function q(e){var t=this,s=new d((function(e,s){t.ready().then((function(){N(t._dbInfo,_,(function(r,n){if(r)return s(r);try{var o=n.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){s(o.error)}}catch(e){s(e)}}))})).catch(s)}));return c(s,e),s}function H(e,t){var s=this,r=new d((function(t,r){e<0?t(null):s.ready().then((function(){N(s._dbInfo,_,(function(n,o){if(n)return r(n);try{var i=o.objectStore(s._dbInfo.storeName),a=!1,l=i.openKeyCursor();l.onsuccess=function(){var s=l.result;s?0===e||a?t(s.key):(a=!0,s.advance(e)):t(null)},l.onerror=function(){r(l.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function G(e){var t=this,s=new d((function(e,s){t.ready().then((function(){N(t._dbInfo,_,(function(r,n){if(r)return s(r);try{var o=n.objectStore(t._dbInfo.storeName).openKeyCursor(),i=[];o.onsuccess=function(){var t=o.result;t?(i.push(t.key),t.continue()):e(i)},o.onerror=function(){s(o.error)}}catch(e){s(e)}}))})).catch(s)}));return c(s,e),s}function W(e,t){t=m.apply(this,arguments);var s=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||s.name,e.storeName=e.storeName||s.storeName);var r,n=this;if(e.name){var o=e.name===s.name&&n._dbInfo.db?d.resolve(n._dbInfo.db):O(e).then((function(t){var s=g[e.name],r=s.forages;s.db=t;for(var n=0;n<r.length;n++)r[n]._dbInfo.db=t;return t}));r=e.storeName?o.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var s=t.version+1;S(e);var r=g[e.name],n=r.forages;t.close();for(var o=0;o<n.length;o++){var a=n[o];a._dbInfo.db=null,a._dbInfo.version=s}var l=new d((function(t,r){var n=i.open(e.name,s);n.onerror=function(e){n.result.close(),r(e)},n.onupgradeneeded=function(){n.result.deleteObjectStore(e.storeName)},n.onsuccess=function(){var e=n.result;e.close(),t(e)}}));return l.then((function(e){r.db=e;for(var t=0;t<n.length;t++){var s=n[t];s._dbInfo.db=e,x(s._dbInfo)}})).catch((function(t){throw(E(e,t)||d.resolve()).catch((function(){})),t}))}})):o.then((function(t){S(e);var s=g[e.name],r=s.forages;t.close();for(var n=0;n<r.length;n++)r[n]._dbInfo.db=null;var o=new d((function(t,s){var r=i.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),s(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return o.then((function(e){s.db=e;for(var t=0;t<r.length;t++)x(r[t]._dbInfo)})).catch((function(t){throw(E(e,t)||d.resolve()).catch((function(){})),t}))}))}else r=d.reject("Invalid arguments");return c(r,t),r}var V={_driver:"asyncStorage",_initStorage:R,_support:a(),iterate:L,getItem:z,setItem:U,removeItem:B,clear:F,length:q,key:H,keys:G,dropInstance:W};function K(){return"function"==typeof openDatabase}var J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y="~~local_forage_type~",Q=/^~~local_forage_type~([^~]+)~/,X="__lfsc__:",Z=X.length,ee="arbf",te="blob",se="si08",re="ui08",ne="uic8",oe="si16",ie="si32",ae="ur16",le="ui32",de="fl32",ce="fl64",ue=Z+ee.length,he=Object.prototype.toString;function me(e){var t,s,r,n,o,i=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var d=new ArrayBuffer(i),c=new Uint8Array(d);for(t=0;t<a;t+=4)s=J.indexOf(e[t]),r=J.indexOf(e[t+1]),n=J.indexOf(e[t+2]),o=J.indexOf(e[t+3]),c[l++]=s<<2|r>>4,c[l++]=(15&r)<<4|n>>2,c[l++]=(3&n)<<6|63&o;return d}function fe(e){var t,s=new Uint8Array(e),r="";for(t=0;t<s.length;t+=3)r+=J[s[t]>>2],r+=J[(3&s[t])<<4|s[t+1]>>4],r+=J[(15&s[t+1])<<2|s[t+2]>>6],r+=J[63&s[t+2]];return s.length%3==2?r=r.substring(0,r.length-1)+"=":s.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function pe(e,t){var s="";if(e&&(s=he.call(e)),e&&("[object ArrayBuffer]"===s||e.buffer&&"[object ArrayBuffer]"===he.call(e.buffer))){var r,n=X;e instanceof ArrayBuffer?(r=e,n+=ee):(r=e.buffer,"[object Int8Array]"===s?n+=se:"[object Uint8Array]"===s?n+=re:"[object Uint8ClampedArray]"===s?n+=ne:"[object Int16Array]"===s?n+=oe:"[object Uint16Array]"===s?n+=ae:"[object Int32Array]"===s?n+=ie:"[object Uint32Array]"===s?n+=le:"[object Float32Array]"===s?n+=de:"[object Float64Array]"===s?n+=ce:t(new Error("Failed to get type for BinaryArray"))),t(n+fe(r))}else if("[object Blob]"===s){var o=new FileReader;o.onload=function(){var s=Y+e.type+"~"+fe(this.result);t(X+te+s)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),t(null,s)}}function ge(e){if(e.substring(0,Z)!==X)return JSON.parse(e);var t,s=e.substring(ue),r=e.substring(Z,ue);if(r===te&&Q.test(s)){var n=s.match(Q);t=n[1],s=s.substring(n[0].length)}var o=me(s);switch(r){case ee:return o;case te:return l([o],{type:t});case se:return new Int8Array(o);case re:return new Uint8Array(o);case ne:return new Uint8ClampedArray(o);case oe:return new Int16Array(o);case ae:return new Uint16Array(o);case ie:return new Int32Array(o);case le:return new Uint32Array(o);case de:return new Float32Array(o);case ce:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}}var ve={serialize:pe,deserialize:ge,stringToBuffer:me,bufferToString:fe};function _e(e,t,s,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],s,r)}function ye(e){var t=this,s={db:null};if(e)for(var r in e)s[r]="string"!=typeof e[r]?e[r].toString():e[r];var n=new d((function(e,r){try{s.db=openDatabase(s.name,String(s.version),s.description,s.size)}catch(e){return r(e)}s.db.transaction((function(n){_e(n,s,(function(){t._dbInfo=s,e()}),(function(e,t){r(t)}))}),r)}));return s.serializer=ve,n}function be(e,t,s,r,n,o){e.executeSql(s,r,n,(function(e,i){i.code===i.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?o(e,i):_e(e,t,(function(){e.executeSql(s,r,n,o)}),o)}),o):o(e,i)}),o)}function je(e,t){var s=this;e=h(e);var r=new d((function(t,r){s.ready().then((function(){var n=s._dbInfo;n.db.transaction((function(s){be(s,n,"SELECT * FROM "+n.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,s){var r=s.rows.length?s.rows.item(0).value:null;r&&(r=n.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function we(e,t){var s=this,r=new d((function(t,r){s.ready().then((function(){var n=s._dbInfo;n.db.transaction((function(s){be(s,n,"SELECT * FROM "+n.storeName,[],(function(s,r){for(var o=r.rows,i=o.length,a=0;a<i;a++){var l=o.item(a),d=l.value;if(d&&(d=n.serializer.deserialize(d)),void 0!==(d=e(d,l.key,a+1)))return void t(d)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Se(e,t,s,r){var n=this;e=h(e);var o=new d((function(o,i){n.ready().then((function(){void 0===t&&(t=null);var a=t,l=n._dbInfo;l.serializer.serialize(t,(function(t,d){d?i(d):l.db.transaction((function(s){be(s,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(a)}),(function(e,t){i(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(Se.apply(n,[e,a,s,r-1]));i(t)}}))}))})).catch(i)}));return c(o,s),o}function xe(e,t,s){return Se.apply(this,[e,t,s,1])}function Ee(e,t){var s=this;e=h(e);var r=new d((function(t,r){s.ready().then((function(){var n=s._dbInfo;n.db.transaction((function(s){be(s,n,"DELETE FROM "+n.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Ae(e){var t=this,s=new d((function(e,s){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){s(t)}))}))})).catch(s)}));return c(s,e),s}function Oe(e){var t=this,s=new d((function(e,s){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,s){var r=s.rows.item(0).c;e(r)}),(function(e,t){s(t)}))}))})).catch(s)}));return c(s,e),s}function Ce(e,t){var s=this,r=new d((function(t,r){s.ready().then((function(){var n=s._dbInfo;n.db.transaction((function(s){be(s,n,"SELECT key FROM "+n.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,s){var r=s.rows.length?s.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Te(e){var t=this,s=new d((function(e,s){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT key FROM "+r.storeName,[],(function(t,s){for(var r=[],n=0;n<s.rows.length;n++)r.push(s.rows.item(n).key);e(r)}),(function(e,t){s(t)}))}))})).catch(s)}));return c(s,e),s}function $e(e){return new d((function(t,s){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(s,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).name);t({db:e,storeNames:n})}),(function(e,t){s(t)}))}),(function(e){s(e)}))}))}function ke(e,t){t=m.apply(this,arguments);var s=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||s.name,e.storeName=e.storeName||s.storeName);var r,n=this;return c(r=e.name?new d((function(t){var r;r=e.name===s.name?n._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t($e(r))})).then((function(e){return new d((function(t,s){e.db.transaction((function(r){function n(e){return new d((function(t,s){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){s(t)}))}))}for(var o=[],i=0,a=e.storeNames.length;i<a;i++)o.push(n(e.storeNames[i]));d.all(o).then((function(){t()})).catch((function(e){s(e)}))}),(function(e){s(e)}))}))})):d.reject("Invalid arguments"),t),r}var Me={_driver:"webSQLStorage",_initStorage:ye,_support:K(),iterate:we,getItem:je,setItem:xe,removeItem:Ee,clear:Ae,length:Oe,key:Ce,keys:Te,dropInstance:ke};function Ie(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Pe(e,t){var s=e.name+"/";return e.storeName!==t.storeName&&(s+=e.storeName+"/"),s}function Ne(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function De(){return!Ne()||localStorage.length>0}function Re(e){var t=this,s={};if(e)for(var r in e)s[r]=e[r];return s.keyPrefix=Pe(e,t._defaultConfig),De()?(t._dbInfo=s,s.serializer=ve,d.resolve()):d.reject()}function ze(e){var t=this,s=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,s=localStorage.length-1;s>=0;s--){var r=localStorage.key(s);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return c(s,e),s}function Le(e,t){var s=this;e=h(e);var r=s.ready().then((function(){var t=s._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return c(r,t),r}function Ue(e,t){var s=this,r=s.ready().then((function(){for(var t=s._dbInfo,r=t.keyPrefix,n=r.length,o=localStorage.length,i=1,a=0;a<o;a++){var l=localStorage.key(a);if(0===l.indexOf(r)){var d=localStorage.getItem(l);if(d&&(d=t.serializer.deserialize(d)),void 0!==(d=e(d,l.substring(n),i++)))return d}}}));return c(r,t),r}function Be(e,t){var s=this,r=s.ready().then((function(){var t,r=s._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return c(r,t),r}function Fe(e){var t=this,s=t.ready().then((function(){for(var e=t._dbInfo,s=localStorage.length,r=[],n=0;n<s;n++){var o=localStorage.key(n);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r}));return c(s,e),s}function qe(e){var t=this.keys().then((function(e){return e.length}));return c(t,e),t}function He(e,t){var s=this;e=h(e);var r=s.ready().then((function(){var t=s._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return c(r,t),r}function Ge(e,t,s){var r=this;e=h(e);var n=r.ready().then((function(){void 0===t&&(t=null);var s=t;return new d((function(n,o){var i=r._dbInfo;i.serializer.serialize(t,(function(t,r){if(r)o(r);else try{localStorage.setItem(i.keyPrefix+e,t),n(s)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return c(n,s),n}function We(e,t){if(t=m.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var s=this.config();e.name=e.name||s.name,e.storeName=e.storeName||s.storeName}var r,n=this;return r=e.name?new d((function(t){e.storeName?t(Pe(e,n._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var s=localStorage.key(t);0===s.indexOf(e)&&localStorage.removeItem(s)}})):d.reject("Invalid arguments"),c(r,t),r}var Ve={_driver:"localStorageWrapper",_initStorage:Re,_support:Ie(),iterate:Ue,getItem:Le,setItem:Ge,removeItem:He,clear:ze,length:qe,key:Be,keys:Fe,dropInstance:We},Ke=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Je=function(e,t){for(var s=e.length,r=0;r<s;){if(Ke(e[r],t))return!0;r++}return!1},Ye=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Qe={},Xe={},Ze={INDEXEDDB:V,WEBSQL:Me,LOCALSTORAGE:Ve},et=[Ze.INDEXEDDB._driver,Ze.WEBSQL._driver,Ze.LOCALSTORAGE._driver],tt=["dropInstance"],st=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function nt(e,t){e[t]=function(){var s=arguments;return e.ready().then((function(){return e[t].apply(e,s)}))}}function ot(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var s in t)t.hasOwnProperty(s)&&(Ye(t[s])?arguments[0][s]=t[s].slice():arguments[0][s]=t[s])}return arguments[0]}var it=function(){function e(t){for(var s in n(this,e),Ze)if(Ze.hasOwnProperty(s)){var r=Ze[s],o=r._driver;this[s]=o,Qe[o]||this.defineDriver(r)}this._defaultConfig=ot({},rt),this._config=ot({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,s){var r=new d((function(t,s){try{var r=e._driver,n=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void s(n);for(var o=st.concat("_initStorage"),i=0,a=o.length;i<a;i++){var l=o[i];if((!Je(tt,l)||e[l])&&"function"!=typeof e[l])return void s(n)}var u=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),s=d.reject(t);return c(s,arguments[arguments.length-1]),s}},s=0,r=tt.length;s<r;s++){var n=tt[s];e[n]||(e[n]=t(n))}};u();var h=function(s){Qe[r]&&console.info("Redefining LocalForage driver: "+r),Qe[r]=e,Xe[r]=s,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(h,s):h(!!e._support):h(!0)}catch(e){s(e)}}));return u(r,t,s),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,s){var r=Qe[e]?d.resolve(Qe[e]):d.reject(new Error("Driver not found."));return u(r,t,s),r},e.prototype.getSerializer=function(e){var t=d.resolve(ve);return u(t,e),t},e.prototype.ready=function(e){var t=this,s=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return u(s,e,e),s},e.prototype.setDriver=function(e,t,s){var r=this;Ye(e)||(e=[e]);var n=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function i(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}function a(e){return function(){var t=0;function s(){for(;t<e.length;){var n=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(n).then(i).catch(s)}o();var a=new Error("No available storage method found.");return r._driverSet=d.reject(a),r._driverSet}return s()}}var l=null!==this._driverSet?this._driverSet.catch((function(){return d.resolve()})):d.resolve();return this._driverSet=l.then((function(){var e=n[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=a(n)}))})).catch((function(){o();var e=new Error("No available storage method found.");return r._driverSet=d.reject(e),r._driverSet})),u(this._driverSet,t,s),this._driverSet},e.prototype.supports=function(e){return!!Xe[e]},e.prototype._extend=function(e){ot(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],s=0,r=e.length;s<r;s++){var n=e[s];this.supports(n)&&t.push(n)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=st.length;e<t;e++)nt(this,st[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),at=new it;t.exports=at},{3:3}]},{},[4])(4)},"./node_modules/localforage/src/utils/createBlob.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var s=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)s.append(e[r]);return s.getBlob(t.type)}}},"./node_modules/localforage/src/utils/executeCallback.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}},"./node_modules/localforage/src/utils/getCallback.js":(e,t,s)=>{"use strict";function r(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}s.r(t),s.d(t,{default:()=>r})},"./node_modules/localforage/src/utils/normalizeKey.js":(e,t,s)=>{"use strict";function r(e){return"string"!=typeof e&&(console.warn(`${e} used as a key, but it is not a string.`),e=String(e)),e}s.r(t),s.d(t,{default:()=>r})},"./node_modules/localforage/src/utils/serializer.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s("./node_modules/localforage/src/utils/createBlob.js"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=/^~~local_forage_type~([^~]+)~/,i="__lfsc__:",a="arbf",l="blob",d="si08",c="ui08",u="uic8",h="si16",m="si32",f="ur16",p="ui32",g="fl32",v="fl64",_=Object.prototype.toString;function y(e){var t,s,r,o,i,a=.75*e.length,l=e.length,d=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),u=new Uint8Array(c);for(t=0;t<l;t+=4)s=n.indexOf(e[t]),r=n.indexOf(e[t+1]),o=n.indexOf(e[t+2]),i=n.indexOf(e[t+3]),u[d++]=s<<2|r>>4,u[d++]=(15&r)<<4|o>>2,u[d++]=(3&o)<<6|63&i;return c}function b(e){var t,s=new Uint8Array(e),r="";for(t=0;t<s.length;t+=3)r+=n[s[t]>>2],r+=n[(3&s[t])<<4|s[t+1]>>4],r+=n[(15&s[t+1])<<2|s[t+2]>>6],r+=n[63&s[t+2]];return s.length%3==2?r=r.substring(0,r.length-1)+"=":s.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}const j={serialize:function(e,t){var s="";if(e&&(s=_.call(e)),e&&("[object ArrayBuffer]"===s||e.buffer&&"[object ArrayBuffer]"===_.call(e.buffer))){var r,n=i;e instanceof ArrayBuffer?(r=e,n+=a):(r=e.buffer,"[object Int8Array]"===s?n+=d:"[object Uint8Array]"===s?n+=c:"[object Uint8ClampedArray]"===s?n+=u:"[object Int16Array]"===s?n+=h:"[object Uint16Array]"===s?n+=f:"[object Int32Array]"===s?n+=m:"[object Uint32Array]"===s?n+=p:"[object Float32Array]"===s?n+=g:"[object Float64Array]"===s?n+=v:t(new Error("Failed to get type for BinaryArray"))),t(n+b(r))}else if("[object Blob]"===s){var o=new FileReader;o.onload=function(){var s="~~local_forage_type~"+e.type+"~"+b(this.result);t(i+l+s)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),t(null,s)}},deserialize:function(e){if(e.substring(0,9)!==i)return JSON.parse(e);var t,s=e.substring(13),n=e.substring(9,13);if(n===l&&o.test(s)){var _=s.match(o);t=_[1],s=s.substring(_[0].length)}var b=y(s);switch(n){case a:return b;case l:return(0,r.default)([b],{type:t});case d:return new Int8Array(b);case c:return new Uint8Array(b);case u:return new Uint8ClampedArray(b);case h:return new Int16Array(b);case f:return new Uint16Array(b);case m:return new Int32Array(b);case p:return new Uint32Array(b);case g:return new Float32Array(b);case v:return new Float64Array(b);default:throw new Error("Unkown type: "+n)}},stringToBuffer:y,bufferToString:b}},"./node_modules/lodash-es/_DataView.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getNative.js"),n=s("./node_modules/lodash-es/_root.js");const o=(0,r.default)(n.default,"DataView")},"./node_modules/lodash-es/_Hash.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lodash-es/_hashClear.js"),n=s("./node_modules/lodash-es/_hashDelete.js"),o=s("./node_modules/lodash-es/_hashGet.js"),i=s("./node_modules/lodash-es/_hashHas.js"),a=s("./node_modules/lodash-es/_hashSet.js");function l(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r.default,l.prototype.delete=n.default,l.prototype.get=o.default,l.prototype.has=i.default,l.prototype.set=a.default;const d=l},"./node_modules/lodash-es/_ListCache.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lodash-es/_listCacheClear.js"),n=s("./node_modules/lodash-es/_listCacheDelete.js"),o=s("./node_modules/lodash-es/_listCacheGet.js"),i=s("./node_modules/lodash-es/_listCacheHas.js"),a=s("./node_modules/lodash-es/_listCacheSet.js");function l(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r.default,l.prototype.delete=n.default,l.prototype.get=o.default,l.prototype.has=i.default,l.prototype.set=a.default;const d=l},"./node_modules/lodash-es/_Map.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getNative.js"),n=s("./node_modules/lodash-es/_root.js");const o=(0,r.default)(n.default,"Map")},"./node_modules/lodash-es/_MapCache.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lodash-es/_mapCacheClear.js"),n=s("./node_modules/lodash-es/_mapCacheDelete.js"),o=s("./node_modules/lodash-es/_mapCacheGet.js"),i=s("./node_modules/lodash-es/_mapCacheHas.js"),a=s("./node_modules/lodash-es/_mapCacheSet.js");function l(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r.default,l.prototype.delete=n.default,l.prototype.get=o.default,l.prototype.has=i.default,l.prototype.set=a.default;const d=l},"./node_modules/lodash-es/_Promise.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getNative.js"),n=s("./node_modules/lodash-es/_root.js");const o=(0,r.default)(n.default,"Promise")},"./node_modules/lodash-es/_Set.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getNative.js"),n=s("./node_modules/lodash-es/_root.js");const o=(0,r.default)(n.default,"Set")},"./node_modules/lodash-es/_SetCache.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_MapCache.js"),n=s("./node_modules/lodash-es/_setCacheAdd.js"),o=s("./node_modules/lodash-es/_setCacheHas.js");function i(e){var t=-1,s=null==e?0:e.length;for(this.__data__=new r.default;++t<s;)this.add(e[t])}i.prototype.add=i.prototype.push=n.default,i.prototype.has=o.default;const a=i},"./node_modules/lodash-es/_Stack.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lodash-es/_ListCache.js"),n=s("./node_modules/lodash-es/_stackClear.js"),o=s("./node_modules/lodash-es/_stackDelete.js"),i=s("./node_modules/lodash-es/_stackGet.js"),a=s("./node_modules/lodash-es/_stackHas.js"),l=s("./node_modules/lodash-es/_stackSet.js");function d(e){var t=this.__data__=new r.default(e);this.size=t.size}d.prototype.clear=n.default,d.prototype.delete=o.default,d.prototype.get=i.default,d.prototype.has=a.default,d.prototype.set=l.default;const c=d},"./node_modules/lodash-es/_Symbol.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=s("./node_modules/lodash-es/_root.js").default.Symbol},"./node_modules/lodash-es/_Uint8Array.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=s("./node_modules/lodash-es/_root.js").default.Uint8Array},"./node_modules/lodash-es/_WeakMap.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getNative.js"),n=s("./node_modules/lodash-es/_root.js");const o=(0,r.default)(n.default,"WeakMap")},"./node_modules/lodash-es/_apply.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t,s){switch(s.length){case 0:return e.call(t);case 1:return e.call(t,s[0]);case 2:return e.call(t,s[0],s[1]);case 3:return e.call(t,s[0],s[1],s[2])}return e.apply(t,s)}},"./node_modules/lodash-es/_arrayEach.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t){for(var s=-1,r=null==e?0:e.length;++s<r&&!1!==t(e[s],s,e););return e}},"./node_modules/lodash-es/_arrayFilter.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t){for(var s=-1,r=null==e?0:e.length,n=0,o=[];++s<r;){var i=e[s];t(i,s,e)&&(o[n++]=i)}return o}},"./node_modules/lodash-es/_arrayLikeKeys.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lodash-es/_baseTimes.js"),n=s("./node_modules/lodash-es/isArguments.js"),o=s("./node_modules/lodash-es/isArray.js"),i=s("./node_modules/lodash-es/isBuffer.js"),a=s("./node_modules/lodash-es/_isIndex.js"),l=s("./node_modules/lodash-es/isTypedArray.js"),d=Object.prototype.hasOwnProperty;const c=function(e,t){var s=(0,o.default)(e),c=!s&&(0,n.default)(e),u=!s&&!c&&(0,i.default)(e),h=!s&&!c&&!u&&(0,l.default)(e),m=s||c||u||h,f=m?(0,r.default)(e.length,String):[],p=f.length;for(var g in e)!t&&!d.call(e,g)||m&&("length"==g||u&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||(0,a.default)(g,p))||f.push(g);return f}},"./node_modules/lodash-es/_arrayMap.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t){for(var s=-1,r=null==e?0:e.length,n=Array(r);++s<r;)n[s]=t(e[s],s,e);return n}},"./node_modules/lodash-es/_arrayPush.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t){for(var s=-1,r=t.length,n=e.length;++s<r;)e[n+s]=t[s];return e}},"./node_modules/lodash-es/_arraySome.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t){for(var s=-1,r=null==e?0:e.length;++s<r;)if(t(e[s],s,e))return!0;return!1}},"./node_modules/lodash-es/_assignMergeValue.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseAssignValue.js"),n=s("./node_modules/lodash-es/eq.js");const o=function(e,t,s){(void 0!==s&&!(0,n.default)(e[t],s)||void 0===s&&!(t in e))&&(0,r.default)(e,t,s)}},"./node_modules/lodash-es/_assignValue.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_baseAssignValue.js"),n=s("./node_modules/lodash-es/eq.js"),o=Object.prototype.hasOwnProperty;const i=function(e,t,s){var i=e[t];o.call(e,t)&&(0,n.default)(i,s)&&(void 0!==s||t in e)||(0,r.default)(e,t,s)}},"./node_modules/lodash-es/_assocIndexOf.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/eq.js");const n=function(e,t){for(var s=e.length;s--;)if((0,r.default)(e[s][0],t))return s;return-1}},"./node_modules/lodash-es/_baseAssign.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_copyObject.js"),n=s("./node_modules/lodash-es/keys.js");const o=function(e,t){return e&&(0,r.default)(t,(0,n.default)(t),e)}},"./node_modules/lodash-es/_baseAssignIn.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_copyObject.js"),n=s("./node_modules/lodash-es/keysIn.js");const o=function(e,t){return e&&(0,r.default)(t,(0,n.default)(t),e)}},"./node_modules/lodash-es/_baseAssignValue.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_defineProperty.js");const n=function(e,t,s){"__proto__"==t&&r.default?(0,r.default)(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}},"./node_modules/lodash-es/_baseClone.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T});var r=s("./node_modules/lodash-es/_Stack.js"),n=s("./node_modules/lodash-es/_arrayEach.js"),o=s("./node_modules/lodash-es/_assignValue.js"),i=s("./node_modules/lodash-es/_baseAssign.js"),a=s("./node_modules/lodash-es/_baseAssignIn.js"),l=s("./node_modules/lodash-es/_cloneBuffer.js"),d=s("./node_modules/lodash-es/_copyArray.js"),c=s("./node_modules/lodash-es/_copySymbols.js"),u=s("./node_modules/lodash-es/_copySymbolsIn.js"),h=s("./node_modules/lodash-es/_getAllKeys.js"),m=s("./node_modules/lodash-es/_getAllKeysIn.js"),f=s("./node_modules/lodash-es/_getTag.js"),p=s("./node_modules/lodash-es/_initCloneArray.js"),g=s("./node_modules/lodash-es/_initCloneByTag.js"),v=s("./node_modules/lodash-es/_initCloneObject.js"),_=s("./node_modules/lodash-es/isArray.js"),y=s("./node_modules/lodash-es/isBuffer.js"),b=s("./node_modules/lodash-es/isMap.js"),j=s("./node_modules/lodash-es/isObject.js"),w=s("./node_modules/lodash-es/isSet.js"),S=s("./node_modules/lodash-es/keys.js"),x=s("./node_modules/lodash-es/keysIn.js"),E="[object Arguments]",A="[object Function]",O="[object Object]",C={};C[E]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[O]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[A]=C["[object WeakMap]"]=!1;const T=function e(t,s,T,$,k,M){var I,P=1&s,N=2&s,D=4&s;if(T&&(I=k?T(t,$,k,M):T(t)),void 0!==I)return I;if(!(0,j.default)(t))return t;var R=(0,_.default)(t);if(R){if(I=(0,p.default)(t),!P)return(0,d.default)(t,I)}else{var z=(0,f.default)(t),L=z==A||"[object GeneratorFunction]"==z;if((0,y.default)(t))return(0,l.default)(t,P);if(z==O||z==E||L&&!k){if(I=N||L?{}:(0,v.default)(t),!P)return N?(0,u.default)(t,(0,a.default)(I,t)):(0,c.default)(t,(0,i.default)(I,t))}else{if(!C[z])return k?t:{};I=(0,g.default)(t,z,P)}}M||(M=new r.default);var U=M.get(t);if(U)return U;M.set(t,I),(0,w.default)(t)?t.forEach((function(r){I.add(e(r,s,T,r,t,M))})):(0,b.default)(t)&&t.forEach((function(r,n){I.set(n,e(r,s,T,n,t,M))}));var B=D?N?m.default:h.default:N?x.default:S.default,F=R?void 0:B(t);return(0,n.default)(F||t,(function(r,n){F&&(r=t[n=r]),(0,o.default)(I,n,e(r,s,T,n,t,M))})),I}},"./node_modules/lodash-es/_baseCreate.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/isObject.js"),n=Object.create;const o=function(){function e(){}return function(t){if(!(0,r.default)(t))return{};if(n)return n(t);e.prototype=t;var s=new e;return e.prototype=void 0,s}}()},"./node_modules/lodash-es/_baseFlatten.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_arrayPush.js"),n=s("./node_modules/lodash-es/_isFlattenable.js");const o=function e(t,s,o,i,a){var l=-1,d=t.length;for(o||(o=n.default),a||(a=[]);++l<d;){var c=t[l];s>0&&o(c)?s>1?e(c,s-1,o,i,a):(0,r.default)(a,c):i||(a[a.length]=c)}return a}},"./node_modules/lodash-es/_baseFor.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=(0,s("./node_modules/lodash-es/_createBaseFor.js").default)()},"./node_modules/lodash-es/_baseGet.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_castPath.js"),n=s("./node_modules/lodash-es/_toKey.js");const o=function(e,t){for(var s=0,o=(t=(0,r.default)(t,e)).length;null!=e&&s<o;)e=e[(0,n.default)(t[s++])];return s&&s==o?e:void 0}},"./node_modules/lodash-es/_baseGetAllKeys.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_arrayPush.js"),n=s("./node_modules/lodash-es/isArray.js");const o=function(e,t,s){var o=t(e);return(0,n.default)(e)?o:(0,r.default)(o,s(e))}},"./node_modules/lodash-es/_baseGetTag.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_Symbol.js"),n=s("./node_modules/lodash-es/_getRawTag.js"),o=s("./node_modules/lodash-es/_objectToString.js"),i=r.default?r.default.toStringTag:void 0;const a=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?(0,n.default)(e):(0,o.default)(e)}},"./node_modules/lodash-es/_baseHas.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=Object.prototype.hasOwnProperty;const n=function(e,t){return null!=e&&r.call(e,t)}},"./node_modules/lodash-es/_baseHasIn.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t){return null!=e&&t in Object(e)}},"./node_modules/lodash-es/_baseIsArguments.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseGetTag.js"),n=s("./node_modules/lodash-es/isObjectLike.js");const o=function(e){return(0,n.default)(e)&&"[object Arguments]"==(0,r.default)(e)}},"./node_modules/lodash-es/_baseIsEqual.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseIsEqualDeep.js"),n=s("./node_modules/lodash-es/isObjectLike.js");const o=function e(t,s,o,i,a){return t===s||(null==t||null==s||!(0,n.default)(t)&&!(0,n.default)(s)?t!=t&&s!=s:(0,r.default)(t,s,o,i,e,a))}},"./node_modules/lodash-es/_baseIsEqualDeep.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s("./node_modules/lodash-es/_Stack.js"),n=s("./node_modules/lodash-es/_equalArrays.js"),o=s("./node_modules/lodash-es/_equalByTag.js"),i=s("./node_modules/lodash-es/_equalObjects.js"),a=s("./node_modules/lodash-es/_getTag.js"),l=s("./node_modules/lodash-es/isArray.js"),d=s("./node_modules/lodash-es/isBuffer.js"),c=s("./node_modules/lodash-es/isTypedArray.js"),u="[object Arguments]",h="[object Array]",m="[object Object]",f=Object.prototype.hasOwnProperty;const p=function(e,t,s,p,g,v){var _=(0,l.default)(e),y=(0,l.default)(t),b=_?h:(0,a.default)(e),j=y?h:(0,a.default)(t),w=(b=b==u?m:b)==m,S=(j=j==u?m:j)==m,x=b==j;if(x&&(0,d.default)(e)){if(!(0,d.default)(t))return!1;_=!0,w=!1}if(x&&!w)return v||(v=new r.default),_||(0,c.default)(e)?(0,n.default)(e,t,s,p,g,v):(0,o.default)(e,t,b,s,p,g,v);if(!(1&s)){var E=w&&f.call(e,"__wrapped__"),A=S&&f.call(t,"__wrapped__");if(E||A){var O=E?e.value():e,C=A?t.value():t;return v||(v=new r.default),g(O,C,s,p,v)}}return!!x&&(v||(v=new r.default),(0,i.default)(e,t,s,p,g,v))}},"./node_modules/lodash-es/_baseIsMap.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getTag.js"),n=s("./node_modules/lodash-es/isObjectLike.js");const o=function(e){return(0,n.default)(e)&&"[object Map]"==(0,r.default)(e)}},"./node_modules/lodash-es/_baseIsNative.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/lodash-es/isFunction.js"),n=s("./node_modules/lodash-es/_isMasked.js"),o=s("./node_modules/lodash-es/isObject.js"),i=s("./node_modules/lodash-es/_toSource.js"),a=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,c=l.toString,u=d.hasOwnProperty,h=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const m=function(e){return!(!(0,o.default)(e)||(0,n.default)(e))&&((0,r.default)(e)?h:a).test((0,i.default)(e))}},"./node_modules/lodash-es/_baseIsSet.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getTag.js"),n=s("./node_modules/lodash-es/isObjectLike.js");const o=function(e){return(0,n.default)(e)&&"[object Set]"==(0,r.default)(e)}},"./node_modules/lodash-es/_baseIsTypedArray.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_baseGetTag.js"),n=s("./node_modules/lodash-es/isLength.js"),o=s("./node_modules/lodash-es/isObjectLike.js"),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1;const a=function(e){return(0,o.default)(e)&&(0,n.default)(e.length)&&!!i[(0,r.default)(e)]}},"./node_modules/lodash-es/_baseKeys.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_isPrototype.js"),n=s("./node_modules/lodash-es/_nativeKeys.js"),o=Object.prototype.hasOwnProperty;const i=function(e){if(!(0,r.default)(e))return(0,n.default)(e);var t=[];for(var s in Object(e))o.call(e,s)&&"constructor"!=s&&t.push(s);return t}},"./node_modules/lodash-es/_baseKeysIn.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/isObject.js"),n=s("./node_modules/lodash-es/_isPrototype.js"),o=s("./node_modules/lodash-es/_nativeKeysIn.js"),i=Object.prototype.hasOwnProperty;const a=function(e){if(!(0,r.default)(e))return(0,o.default)(e);var t=(0,n.default)(e),s=[];for(var a in e)("constructor"!=a||!t&&i.call(e,a))&&s.push(a);return s}},"./node_modules/lodash-es/_baseMerge.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lodash-es/_Stack.js"),n=s("./node_modules/lodash-es/_assignMergeValue.js"),o=s("./node_modules/lodash-es/_baseFor.js"),i=s("./node_modules/lodash-es/_baseMergeDeep.js"),a=s("./node_modules/lodash-es/isObject.js"),l=s("./node_modules/lodash-es/keysIn.js"),d=s("./node_modules/lodash-es/_safeGet.js");const c=function e(t,s,c,u,h){t!==s&&(0,o.default)(s,(function(o,l){if(h||(h=new r.default),(0,a.default)(o))(0,i.default)(t,s,l,c,e,u,h);else{var m=u?u((0,d.default)(t,l),o,l+"",t,s,h):void 0;void 0===m&&(m=o),(0,n.default)(t,l,m)}}),l.default)}},"./node_modules/lodash-es/_baseMergeDeep.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var r=s("./node_modules/lodash-es/_assignMergeValue.js"),n=s("./node_modules/lodash-es/_cloneBuffer.js"),o=s("./node_modules/lodash-es/_cloneTypedArray.js"),i=s("./node_modules/lodash-es/_copyArray.js"),a=s("./node_modules/lodash-es/_initCloneObject.js"),l=s("./node_modules/lodash-es/isArguments.js"),d=s("./node_modules/lodash-es/isArray.js"),c=s("./node_modules/lodash-es/isArrayLikeObject.js"),u=s("./node_modules/lodash-es/isBuffer.js"),h=s("./node_modules/lodash-es/isFunction.js"),m=s("./node_modules/lodash-es/isObject.js"),f=s("./node_modules/lodash-es/isPlainObject.js"),p=s("./node_modules/lodash-es/isTypedArray.js"),g=s("./node_modules/lodash-es/_safeGet.js"),v=s("./node_modules/lodash-es/toPlainObject.js");const _=function(e,t,s,_,y,b,j){var w=(0,g.default)(e,s),S=(0,g.default)(t,s),x=j.get(S);if(x)(0,r.default)(e,s,x);else{var E=b?b(w,S,s+"",e,t,j):void 0,A=void 0===E;if(A){var O=(0,d.default)(S),C=!O&&(0,u.default)(S),T=!O&&!C&&(0,p.default)(S);E=S,O||C||T?(0,d.default)(w)?E=w:(0,c.default)(w)?E=(0,i.default)(w):C?(A=!1,E=(0,n.default)(S,!0)):T?(A=!1,E=(0,o.default)(S,!0)):E=[]:(0,f.default)(S)||(0,l.default)(S)?(E=w,(0,l.default)(w)?E=(0,v.default)(w):(0,m.default)(w)&&!(0,h.default)(w)||(E=(0,a.default)(S))):A=!1}A&&(j.set(S,E),y(E,S,_,b,j),j.delete(S)),(0,r.default)(e,s,E)}}},"./node_modules/lodash-es/_basePick.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_basePickBy.js"),n=s("./node_modules/lodash-es/hasIn.js");const o=function(e,t){return(0,r.default)(e,t,(function(t,s){return(0,n.default)(e,s)}))}},"./node_modules/lodash-es/_basePickBy.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_baseGet.js"),n=s("./node_modules/lodash-es/_baseSet.js"),o=s("./node_modules/lodash-es/_castPath.js");const i=function(e,t,s){for(var i=-1,a=t.length,l={};++i<a;){var d=t[i],c=(0,r.default)(e,d);s(c,d)&&(0,n.default)(l,(0,o.default)(d,e),c)}return l}},"./node_modules/lodash-es/_baseRest.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/identity.js"),n=s("./node_modules/lodash-es/_overRest.js"),o=s("./node_modules/lodash-es/_setToString.js");const i=function(e,t){return(0,o.default)((0,n.default)(e,t,r.default),e+"")}},"./node_modules/lodash-es/_baseSet.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_assignValue.js"),n=s("./node_modules/lodash-es/_castPath.js"),o=s("./node_modules/lodash-es/_isIndex.js"),i=s("./node_modules/lodash-es/isObject.js"),a=s("./node_modules/lodash-es/_toKey.js");const l=function(e,t,s,l){if(!(0,i.default)(e))return e;for(var d=-1,c=(t=(0,n.default)(t,e)).length,u=c-1,h=e;null!=h&&++d<c;){var m=(0,a.default)(t[d]),f=s;if("__proto__"===m||"constructor"===m||"prototype"===m)return e;if(d!=u){var p=h[m];void 0===(f=l?l(p,m,h):void 0)&&(f=(0,i.default)(p)?p:(0,o.default)(t[d+1])?[]:{})}(0,r.default)(h,m,f),h=h[m]}return e}},"./node_modules/lodash-es/_baseSetToString.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/constant.js"),n=s("./node_modules/lodash-es/_defineProperty.js"),o=s("./node_modules/lodash-es/identity.js");const i=n.default?function(e,t){return(0,n.default)(e,"toString",{configurable:!0,enumerable:!1,value:(0,r.default)(t),writable:!0})}:o.default},"./node_modules/lodash-es/_baseTimes.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t){for(var s=-1,r=Array(e);++s<e;)r[s]=t(s);return r}},"./node_modules/lodash-es/_baseToString.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lodash-es/_Symbol.js"),n=s("./node_modules/lodash-es/_arrayMap.js"),o=s("./node_modules/lodash-es/isArray.js"),i=s("./node_modules/lodash-es/isSymbol.js"),a=r.default?r.default.prototype:void 0,l=a?a.toString:void 0;const d=function e(t){if("string"==typeof t)return t;if((0,o.default)(t))return(0,n.default)(t,e)+"";if((0,i.default)(t))return l?l.call(t):"";var s=t+"";return"0"==s&&1/t==-1/0?"-0":s}},"./node_modules/lodash-es/_baseTrim.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_trimmedEndIndex.js"),n=/^\s+/;const o=function(e){return e?e.slice(0,(0,r.default)(e)+1).replace(n,""):e}},"./node_modules/lodash-es/_baseUnary.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){return function(t){return e(t)}}},"./node_modules/lodash-es/_cacheHas.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t){return e.has(t)}},"./node_modules/lodash-es/_castPath.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/isArray.js"),n=s("./node_modules/lodash-es/_isKey.js"),o=s("./node_modules/lodash-es/_stringToPath.js"),i=s("./node_modules/lodash-es/toString.js");const a=function(e,t){return(0,r.default)(e)?e:(0,n.default)(e,t)?[e]:(0,o.default)((0,i.default)(e))}},"./node_modules/lodash-es/_cloneArrayBuffer.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_Uint8Array.js");const n=function(e){var t=new e.constructor(e.byteLength);return new r.default(t).set(new r.default(e)),t}},"./node_modules/lodash-es/_cloneBuffer.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_root.js"),n="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=n&&"object"==typeof module&&module&&!module.nodeType&&module,i=o&&o.exports===n?r.default.Buffer:void 0,a=i?i.allocUnsafe:void 0;const l=function(e,t){if(t)return e.slice();var s=e.length,r=a?a(s):new e.constructor(s);return e.copy(r),r}},"./node_modules/lodash-es/_cloneDataView.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_cloneArrayBuffer.js");const n=function(e,t){var s=t?(0,r.default)(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}},"./node_modules/lodash-es/_cloneRegExp.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=/\w*$/;const n=function(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}},"./node_modules/lodash-es/_cloneSymbol.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_Symbol.js"),n=r.default?r.default.prototype:void 0,o=n?n.valueOf:void 0;const i=function(e){return o?Object(o.call(e)):{}}},"./node_modules/lodash-es/_cloneTypedArray.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_cloneArrayBuffer.js");const n=function(e,t){var s=t?(0,r.default)(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}},"./node_modules/lodash-es/_copyArray.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t){var s=-1,r=e.length;for(t||(t=Array(r));++s<r;)t[s]=e[s];return t}},"./node_modules/lodash-es/_copyObject.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_assignValue.js"),n=s("./node_modules/lodash-es/_baseAssignValue.js");const o=function(e,t,s,o){var i=!s;s||(s={});for(var a=-1,l=t.length;++a<l;){var d=t[a],c=o?o(s[d],e[d],d,s,e):void 0;void 0===c&&(c=e[d]),i?(0,n.default)(s,d,c):(0,r.default)(s,d,c)}return s}},"./node_modules/lodash-es/_copySymbols.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_copyObject.js"),n=s("./node_modules/lodash-es/_getSymbols.js");const o=function(e,t){return(0,r.default)(e,(0,n.default)(e),t)}},"./node_modules/lodash-es/_copySymbolsIn.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_copyObject.js"),n=s("./node_modules/lodash-es/_getSymbolsIn.js");const o=function(e,t){return(0,r.default)(e,(0,n.default)(e),t)}},"./node_modules/lodash-es/_coreJsData.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=s("./node_modules/lodash-es/_root.js").default["__core-js_shared__"]},"./node_modules/lodash-es/_createAssigner.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseRest.js"),n=s("./node_modules/lodash-es/_isIterateeCall.js");const o=function(e){return(0,r.default)((function(t,s){var r=-1,o=s.length,i=o>1?s[o-1]:void 0,a=o>2?s[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&(0,n.default)(s[0],s[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var l=s[r];l&&e(t,l,r,i)}return t}))}},"./node_modules/lodash-es/_createBaseFor.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){return function(t,s,r){for(var n=-1,o=Object(t),i=r(t),a=i.length;a--;){var l=i[e?a:++n];if(!1===s(o[l],l,o))break}return t}}},"./node_modules/lodash-es/_defineProperty.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_getNative.js");const n=function(){try{var e=(0,r.default)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},"./node_modules/lodash-es/_equalArrays.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_SetCache.js"),n=s("./node_modules/lodash-es/_arraySome.js"),o=s("./node_modules/lodash-es/_cacheHas.js");const i=function(e,t,s,i,a,l){var d=1&s,c=e.length,u=t.length;if(c!=u&&!(d&&u>c))return!1;var h=l.get(e),m=l.get(t);if(h&&m)return h==t&&m==e;var f=-1,p=!0,g=2&s?new r.default:void 0;for(l.set(e,t),l.set(t,e);++f<c;){var v=e[f],_=t[f];if(i)var y=d?i(_,v,f,t,e,l):i(v,_,f,e,t,l);if(void 0!==y){if(y)continue;p=!1;break}if(g){if(!(0,n.default)(t,(function(e,t){if(!(0,o.default)(g,t)&&(v===e||a(v,e,s,i,l)))return g.push(t)}))){p=!1;break}}else if(v!==_&&!a(v,_,s,i,l)){p=!1;break}}return l.delete(e),l.delete(t),p}},"./node_modules/lodash-es/_equalByTag.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lodash-es/_Symbol.js"),n=s("./node_modules/lodash-es/_Uint8Array.js"),o=s("./node_modules/lodash-es/eq.js"),i=s("./node_modules/lodash-es/_equalArrays.js"),a=s("./node_modules/lodash-es/_mapToArray.js"),l=s("./node_modules/lodash-es/_setToArray.js"),d=r.default?r.default.prototype:void 0,c=d?d.valueOf:void 0;const u=function(e,t,s,r,d,u,h){switch(s){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new n.default(e),new n.default(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,o.default)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var m=a.default;case"[object Set]":var f=1&r;if(m||(m=l.default),e.size!=t.size&&!f)return!1;var p=h.get(e);if(p)return p==t;r|=2,h.set(e,t);var g=(0,i.default)(m(e),m(t),r,d,u,h);return h.delete(e),g;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},"./node_modules/lodash-es/_equalObjects.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_getAllKeys.js"),n=Object.prototype.hasOwnProperty;const o=function(e,t,s,o,i,a){var l=1&s,d=(0,r.default)(e),c=d.length;if(c!=(0,r.default)(t).length&&!l)return!1;for(var u=c;u--;){var h=d[u];if(!(l?h in t:n.call(t,h)))return!1}var m=a.get(e),f=a.get(t);if(m&&f)return m==t&&f==e;var p=!0;a.set(e,t),a.set(t,e);for(var g=l;++u<c;){var v=e[h=d[u]],_=t[h];if(o)var y=l?o(_,v,h,t,e,a):o(v,_,h,e,t,a);if(!(void 0===y?v===_||i(v,_,s,o,a):y)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var b=e.constructor,j=t.constructor;b==j||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof j&&j instanceof j||(p=!1)}return a.delete(e),a.delete(t),p}},"./node_modules/lodash-es/_flatRest.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/flatten.js"),n=s("./node_modules/lodash-es/_overRest.js"),o=s("./node_modules/lodash-es/_setToString.js");const i=function(e){return(0,o.default)((0,n.default)(e,void 0,r.default),e+"")}},"./node_modules/lodash-es/_freeGlobal.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r="object"==typeof global&&global&&global.Object===Object&&global},"./node_modules/lodash-es/_getAllKeys.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_baseGetAllKeys.js"),n=s("./node_modules/lodash-es/_getSymbols.js"),o=s("./node_modules/lodash-es/keys.js");const i=function(e){return(0,r.default)(e,o.default,n.default)}},"./node_modules/lodash-es/_getAllKeysIn.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_baseGetAllKeys.js"),n=s("./node_modules/lodash-es/_getSymbolsIn.js"),o=s("./node_modules/lodash-es/keysIn.js");const i=function(e){return(0,r.default)(e,o.default,n.default)}},"./node_modules/lodash-es/_getMapData.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_isKeyable.js");const n=function(e,t){var s=e.__data__;return(0,r.default)(t)?s["string"==typeof t?"string":"hash"]:s.map}},"./node_modules/lodash-es/_getNative.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseIsNative.js"),n=s("./node_modules/lodash-es/_getValue.js");const o=function(e,t){var s=(0,n.default)(e,t);return(0,r.default)(s)?s:void 0}},"./node_modules/lodash-es/_getPrototype.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=(0,s("./node_modules/lodash-es/_overArg.js").default)(Object.getPrototypeOf,Object)},"./node_modules/lodash-es/_getRawTag.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_Symbol.js"),n=Object.prototype,o=n.hasOwnProperty,i=n.toString,a=r.default?r.default.toStringTag:void 0;const l=function(e){var t=o.call(e,a),s=e[a];try{e[a]=void 0;var r=!0}catch(e){}var n=i.call(e);return r&&(t?e[a]=s:delete e[a]),n}},"./node_modules/lodash-es/_getSymbols.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_arrayFilter.js"),n=s("./node_modules/lodash-es/stubArray.js"),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols;const a=i?function(e){return null==e?[]:(e=Object(e),(0,r.default)(i(e),(function(t){return o.call(e,t)})))}:n.default},"./node_modules/lodash-es/_getSymbolsIn.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_arrayPush.js"),n=s("./node_modules/lodash-es/_getPrototype.js"),o=s("./node_modules/lodash-es/_getSymbols.js"),i=s("./node_modules/lodash-es/stubArray.js");const a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)(0,r.default)(t,(0,o.default)(e)),e=(0,n.default)(e);return t}:i.default},"./node_modules/lodash-es/_getTag.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s("./node_modules/lodash-es/_DataView.js"),n=s("./node_modules/lodash-es/_Map.js"),o=s("./node_modules/lodash-es/_Promise.js"),i=s("./node_modules/lodash-es/_Set.js"),a=s("./node_modules/lodash-es/_WeakMap.js"),l=s("./node_modules/lodash-es/_baseGetTag.js"),d=s("./node_modules/lodash-es/_toSource.js"),c="[object Map]",u="[object Promise]",h="[object Set]",m="[object WeakMap]",f="[object DataView]",p=(0,d.default)(r.default),g=(0,d.default)(n.default),v=(0,d.default)(o.default),_=(0,d.default)(i.default),y=(0,d.default)(a.default),b=l.default;(r.default&&b(new r.default(new ArrayBuffer(1)))!=f||n.default&&b(new n.default)!=c||o.default&&b(o.default.resolve())!=u||i.default&&b(new i.default)!=h||a.default&&b(new a.default)!=m)&&(b=function(e){var t=(0,l.default)(e),s="[object Object]"==t?e.constructor:void 0,r=s?(0,d.default)(s):"";if(r)switch(r){case p:return f;case g:return c;case v:return u;case _:return h;case y:return m}return t});const j=b},"./node_modules/lodash-es/_getValue.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t){return null==e?void 0:e[t]}},"./node_modules/lodash-es/_hasPath.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lodash-es/_castPath.js"),n=s("./node_modules/lodash-es/isArguments.js"),o=s("./node_modules/lodash-es/isArray.js"),i=s("./node_modules/lodash-es/_isIndex.js"),a=s("./node_modules/lodash-es/isLength.js"),l=s("./node_modules/lodash-es/_toKey.js");const d=function(e,t,s){for(var d=-1,c=(t=(0,r.default)(t,e)).length,u=!1;++d<c;){var h=(0,l.default)(t[d]);if(!(u=null!=e&&s(e,h)))break;e=e[h]}return u||++d!=c?u:!!(c=null==e?0:e.length)&&(0,a.default)(c)&&(0,i.default)(h,c)&&((0,o.default)(e)||(0,n.default)(e))}},"./node_modules/lodash-es/_hashClear.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_nativeCreate.js");const n=function(){this.__data__=r.default?(0,r.default)(null):{},this.size=0}},"./node_modules/lodash-es/_hashDelete.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},"./node_modules/lodash-es/_hashGet.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_nativeCreate.js"),n=Object.prototype.hasOwnProperty;const o=function(e){var t=this.__data__;if(r.default){var s=t[e];return"__lodash_hash_undefined__"===s?void 0:s}return n.call(t,e)?t[e]:void 0}},"./node_modules/lodash-es/_hashHas.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_nativeCreate.js"),n=Object.prototype.hasOwnProperty;const o=function(e){var t=this.__data__;return r.default?void 0!==t[e]:n.call(t,e)}},"./node_modules/lodash-es/_hashSet.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_nativeCreate.js");const n=function(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=r.default&&void 0===t?"__lodash_hash_undefined__":t,this}},"./node_modules/lodash-es/_initCloneArray.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=Object.prototype.hasOwnProperty;const n=function(e){var t=e.length,s=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(s.index=e.index,s.input=e.input),s}},"./node_modules/lodash-es/_initCloneByTag.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_cloneArrayBuffer.js"),n=s("./node_modules/lodash-es/_cloneDataView.js"),o=s("./node_modules/lodash-es/_cloneRegExp.js"),i=s("./node_modules/lodash-es/_cloneSymbol.js"),a=s("./node_modules/lodash-es/_cloneTypedArray.js");const l=function(e,t,s){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return(0,r.default)(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return(0,n.default)(e,s);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return(0,a.default)(e,s);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return(0,o.default)(e);case"[object Symbol]":return(0,i.default)(e)}}},"./node_modules/lodash-es/_initCloneObject.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_baseCreate.js"),n=s("./node_modules/lodash-es/_getPrototype.js"),o=s("./node_modules/lodash-es/_isPrototype.js");const i=function(e){return"function"!=typeof e.constructor||(0,o.default)(e)?{}:(0,r.default)((0,n.default)(e))}},"./node_modules/lodash-es/_isFlattenable.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_Symbol.js"),n=s("./node_modules/lodash-es/isArguments.js"),o=s("./node_modules/lodash-es/isArray.js"),i=r.default?r.default.isConcatSpreadable:void 0;const a=function(e){return(0,o.default)(e)||(0,n.default)(e)||!!(i&&e&&e[i])}},"./node_modules/lodash-es/_isIndex.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=/^(?:0|[1-9]\d*)$/;const n=function(e,t){var s=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==s||"symbol"!=s&&r.test(e))&&e>-1&&e%1==0&&e<t}},"./node_modules/lodash-es/_isIterateeCall.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/eq.js"),n=s("./node_modules/lodash-es/isArrayLike.js"),o=s("./node_modules/lodash-es/_isIndex.js"),i=s("./node_modules/lodash-es/isObject.js");const a=function(e,t,s){if(!(0,i.default)(s))return!1;var a=typeof t;return!!("number"==a?(0,n.default)(s)&&(0,o.default)(t,s.length):"string"==a&&t in s)&&(0,r.default)(s[t],e)}},"./node_modules/lodash-es/_isKey.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/isArray.js"),n=s("./node_modules/lodash-es/isSymbol.js"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;const a=function(e,t){if((0,r.default)(e))return!1;var s=typeof e;return!("number"!=s&&"symbol"!=s&&"boolean"!=s&&null!=e&&!(0,n.default)(e))||(i.test(e)||!o.test(e)||null!=t&&e in Object(t))}},"./node_modules/lodash-es/_isKeyable.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},"./node_modules/lodash-es/_isMasked.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r,n=s("./node_modules/lodash-es/_coreJsData.js"),o=(r=/[^.]+$/.exec(n.default&&n.default.keys&&n.default.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";const i=function(e){return!!o&&o in e}},"./node_modules/lodash-es/_isPrototype.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=Object.prototype;const n=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},"./node_modules/lodash-es/_listCacheClear.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(){this.__data__=[],this.size=0}},"./node_modules/lodash-es/_listCacheDelete.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_assocIndexOf.js"),n=Array.prototype.splice;const o=function(e){var t=this.__data__,s=(0,r.default)(t,e);return!(s<0)&&(s==t.length-1?t.pop():n.call(t,s,1),--this.size,!0)}},"./node_modules/lodash-es/_listCacheGet.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_assocIndexOf.js");const n=function(e){var t=this.__data__,s=(0,r.default)(t,e);return s<0?void 0:t[s][1]}},"./node_modules/lodash-es/_listCacheHas.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_assocIndexOf.js");const n=function(e){return(0,r.default)(this.__data__,e)>-1}},"./node_modules/lodash-es/_listCacheSet.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_assocIndexOf.js");const n=function(e,t){var s=this.__data__,n=(0,r.default)(s,e);return n<0?(++this.size,s.push([e,t])):s[n][1]=t,this}},"./node_modules/lodash-es/_mapCacheClear.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_Hash.js"),n=s("./node_modules/lodash-es/_ListCache.js"),o=s("./node_modules/lodash-es/_Map.js");const i=function(){this.size=0,this.__data__={hash:new r.default,map:new(o.default||n.default),string:new r.default}}},"./node_modules/lodash-es/_mapCacheDelete.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_getMapData.js");const n=function(e){var t=(0,r.default)(this,e).delete(e);return this.size-=t?1:0,t}},"./node_modules/lodash-es/_mapCacheGet.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_getMapData.js");const n=function(e){return(0,r.default)(this,e).get(e)}},"./node_modules/lodash-es/_mapCacheHas.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_getMapData.js");const n=function(e){return(0,r.default)(this,e).has(e)}},"./node_modules/lodash-es/_mapCacheSet.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_getMapData.js");const n=function(e,t){var s=(0,r.default)(this,e),n=s.size;return s.set(e,t),this.size+=s.size==n?0:1,this}},"./node_modules/lodash-es/_mapToArray.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){var t=-1,s=Array(e.size);return e.forEach((function(e,r){s[++t]=[r,e]})),s}},"./node_modules/lodash-es/_memoizeCapped.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/memoize.js");const n=function(e){var t=(0,r.default)(e,(function(e){return 500===s.size&&s.clear(),e})),s=t.cache;return t}},"./node_modules/lodash-es/_nativeCreate.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=(0,s("./node_modules/lodash-es/_getNative.js").default)(Object,"create")},"./node_modules/lodash-es/_nativeKeys.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=(0,s("./node_modules/lodash-es/_overArg.js").default)(Object.keys,Object)},"./node_modules/lodash-es/_nativeKeysIn.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){var t=[];if(null!=e)for(var s in Object(e))t.push(s);return t}},"./node_modules/lodash-es/_nodeUtil.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_freeGlobal.js"),n="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=n&&"object"==typeof module&&module&&!module.nodeType&&module,i=o&&o.exports===n&&r.default.process;const a=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}()},"./node_modules/lodash-es/_objectToString.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=Object.prototype.toString;const n=function(e){return r.call(e)}},"./node_modules/lodash-es/_overArg.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t){return function(s){return e(t(s))}}},"./node_modules/lodash-es/_overRest.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_apply.js"),n=Math.max;const o=function(e,t,s){return t=n(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,a=n(o.length-t,0),l=Array(a);++i<a;)l[i]=o[t+i];i=-1;for(var d=Array(t+1);++i<t;)d[i]=o[i];return d[t]=s(l),(0,r.default)(e,this,d)}}},"./node_modules/lodash-es/_root.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_freeGlobal.js"),n="object"==typeof self&&self&&self.Object===Object&&self;const o=r.default||n||Function("return this")()},"./node_modules/lodash-es/_safeGet.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},"./node_modules/lodash-es/_setCacheAdd.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},"./node_modules/lodash-es/_setCacheHas.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){return this.__data__.has(e)}},"./node_modules/lodash-es/_setToArray.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){var t=-1,s=Array(e.size);return e.forEach((function(e){s[++t]=e})),s}},"./node_modules/lodash-es/_setToString.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_baseSetToString.js");const n=(0,s("./node_modules/lodash-es/_shortOut.js").default)(r.default)},"./node_modules/lodash-es/_shortOut.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=Date.now;const n=function(e){var t=0,s=0;return function(){var n=r(),o=16-(n-s);if(s=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},"./node_modules/lodash-es/_stackClear.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_ListCache.js");const n=function(){this.__data__=new r.default,this.size=0}},"./node_modules/lodash-es/_stackDelete.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}},"./node_modules/lodash-es/_stackGet.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){return this.__data__.get(e)}},"./node_modules/lodash-es/_stackHas.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){return this.__data__.has(e)}},"./node_modules/lodash-es/_stackSet.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_ListCache.js"),n=s("./node_modules/lodash-es/_Map.js"),o=s("./node_modules/lodash-es/_MapCache.js");const i=function(e,t){var s=this.__data__;if(s instanceof r.default){var i=s.__data__;if(!n.default||i.length<199)return i.push([e,t]),this.size=++s.size,this;s=this.__data__=new o.default(i)}return s.set(e,t),this.size=s.size,this}},"./node_modules/lodash-es/_stringToPath.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_memoizeCapped.js"),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g;const i=(0,r.default)((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(n,(function(e,s,r,n){t.push(r?n.replace(o,"$1"):s||e)})),t}))},"./node_modules/lodash-es/_toKey.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/isSymbol.js");const n=function(e){if("string"==typeof e||(0,r.default)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},"./node_modules/lodash-es/_toSource.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=Function.prototype.toString;const n=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},"./node_modules/lodash-es/_trimmedEndIndex.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=/\s/;const n=function(e){for(var t=e.length;t--&&r.test(e.charAt(t)););return t}},"./node_modules/lodash-es/assignIn.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_copyObject.js"),n=s("./node_modules/lodash-es/_createAssigner.js"),o=s("./node_modules/lodash-es/keysIn.js");const i=(0,n.default)((function(e,t){(0,r.default)(t,(0,o.default)(t),e)}))},"./node_modules/lodash-es/cloneDeep.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_baseClone.js");const n=function(e){return(0,r.default)(e,5)}},"./node_modules/lodash-es/constant.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){return function(){return e}}},"./node_modules/lodash-es/create.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseAssign.js"),n=s("./node_modules/lodash-es/_baseCreate.js");const o=function(e,t){var s=(0,n.default)(e);return null==t?s:(0,r.default)(s,t)}},"./node_modules/lodash-es/debounce.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/isObject.js"),n=s("./node_modules/lodash-es/now.js"),o=s("./node_modules/lodash-es/toNumber.js"),i=Math.max,a=Math.min;const l=function(e,t,s){var l,d,c,u,h,m,f=0,p=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function _(t){var s=l,r=d;return l=d=void 0,f=t,u=e.apply(r,s)}function y(e){var s=e-m;return void 0===m||s>=t||s<0||g&&e-f>=c}function b(){var e=(0,n.default)();if(y(e))return j(e);h=setTimeout(b,function(e){var s=t-(e-m);return g?a(s,c-(e-f)):s}(e))}function j(e){return h=void 0,v&&l?_(e):(l=d=void 0,u)}function w(){var e=(0,n.default)(),s=y(e);if(l=arguments,d=this,m=e,s){if(void 0===h)return function(e){return f=e,h=setTimeout(b,t),p?_(e):u}(m);if(g)return clearTimeout(h),h=setTimeout(b,t),_(m)}return void 0===h&&(h=setTimeout(b,t)),u}return t=(0,o.default)(t)||0,(0,r.default)(s)&&(p=!!s.leading,c=(g="maxWait"in s)?i((0,o.default)(s.maxWait)||0,t):c,v="trailing"in s?!!s.trailing:v),w.cancel=function(){void 0!==h&&clearTimeout(h),f=0,l=m=d=h=void 0},w.flush=function(){return void 0===h?u:j((0,n.default)())},w}},"./node_modules/lodash-es/eq.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e,t){return e===t||e!=e&&t!=t}},"./node_modules/lodash-es/flatten.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_baseFlatten.js");const n=function(e){return(null==e?0:e.length)?(0,r.default)(e,1):[]}},"./node_modules/lodash-es/has.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseHas.js"),n=s("./node_modules/lodash-es/_hasPath.js");const o=function(e,t){return null!=e&&(0,n.default)(e,t,r.default)}},"./node_modules/lodash-es/hasIn.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseHasIn.js"),n=s("./node_modules/lodash-es/_hasPath.js");const o=function(e,t){return null!=e&&(0,n.default)(e,t,r.default)}},"./node_modules/lodash-es/identity.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){return e}},"./node_modules/lodash-es/isArguments.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_baseIsArguments.js"),n=s("./node_modules/lodash-es/isObjectLike.js"),o=Object.prototype,i=o.hasOwnProperty,a=o.propertyIsEnumerable;const l=(0,r.default)(function(){return arguments}())?r.default:function(e){return(0,n.default)(e)&&i.call(e,"callee")&&!a.call(e,"callee")}},"./node_modules/lodash-es/isArray.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=Array.isArray},"./node_modules/lodash-es/isArrayLike.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/isFunction.js"),n=s("./node_modules/lodash-es/isLength.js");const o=function(e){return null!=e&&(0,n.default)(e.length)&&!(0,r.default)(e)}},"./node_modules/lodash-es/isArrayLikeObject.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/isArrayLike.js"),n=s("./node_modules/lodash-es/isObjectLike.js");const o=function(e){return(0,n.default)(e)&&(0,r.default)(e)}},"./node_modules/lodash-es/isBuffer.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/_root.js"),n=s("./node_modules/lodash-es/stubFalse.js"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof module&&module&&!module.nodeType&&module,a=i&&i.exports===o?r.default.Buffer:void 0;const l=(a?a.isBuffer:void 0)||n.default},"./node_modules/lodash-es/isEqual.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_baseIsEqual.js");const n=function(e,t){return(0,r.default)(e,t)}},"./node_modules/lodash-es/isFunction.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseGetTag.js"),n=s("./node_modules/lodash-es/isObject.js");const o=function(e){if(!(0,n.default)(e))return!1;var t=(0,r.default)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},"./node_modules/lodash-es/isLength.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},"./node_modules/lodash-es/isMap.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_baseIsMap.js"),n=s("./node_modules/lodash-es/_baseUnary.js"),o=s("./node_modules/lodash-es/_nodeUtil.js"),i=o.default&&o.default.isMap;const a=i?(0,n.default)(i):r.default},"./node_modules/lodash-es/isObject.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},"./node_modules/lodash-es/isObjectLike.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(e){return null!=e&&"object"==typeof e}},"./node_modules/lodash-es/isPlainObject.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lodash-es/_baseGetTag.js"),n=s("./node_modules/lodash-es/_getPrototype.js"),o=s("./node_modules/lodash-es/isObjectLike.js"),i=Function.prototype,a=Object.prototype,l=i.toString,d=a.hasOwnProperty,c=l.call(Object);const u=function(e){if(!(0,o.default)(e)||"[object Object]"!=(0,r.default)(e))return!1;var t=(0,n.default)(e);if(null===t)return!0;var s=d.call(t,"constructor")&&t.constructor;return"function"==typeof s&&s instanceof s&&l.call(s)==c}},"./node_modules/lodash-es/isSet.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_baseIsSet.js"),n=s("./node_modules/lodash-es/_baseUnary.js"),o=s("./node_modules/lodash-es/_nodeUtil.js"),i=o.default&&o.default.isSet;const a=i?(0,n.default)(i):r.default},"./node_modules/lodash-es/isString.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_baseGetTag.js"),n=s("./node_modules/lodash-es/isArray.js"),o=s("./node_modules/lodash-es/isObjectLike.js");const i=function(e){return"string"==typeof e||!(0,n.default)(e)&&(0,o.default)(e)&&"[object String]"==(0,r.default)(e)}},"./node_modules/lodash-es/isSymbol.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_baseGetTag.js"),n=s("./node_modules/lodash-es/isObjectLike.js");const o=function(e){return"symbol"==typeof e||(0,n.default)(e)&&"[object Symbol]"==(0,r.default)(e)}},"./node_modules/lodash-es/isTypedArray.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lodash-es/_baseIsTypedArray.js"),n=s("./node_modules/lodash-es/_baseUnary.js"),o=s("./node_modules/lodash-es/_nodeUtil.js"),i=o.default&&o.default.isTypedArray;const a=i?(0,n.default)(i):r.default},"./node_modules/lodash-es/keys.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_arrayLikeKeys.js"),n=s("./node_modules/lodash-es/_baseKeys.js"),o=s("./node_modules/lodash-es/isArrayLike.js");const i=function(e){return(0,o.default)(e)?(0,r.default)(e):(0,n.default)(e)}},"./node_modules/lodash-es/keysIn.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_arrayLikeKeys.js"),n=s("./node_modules/lodash-es/_baseKeysIn.js"),o=s("./node_modules/lodash-es/isArrayLike.js");const i=function(e){return(0,o.default)(e)?(0,r.default)(e,!0):(0,n.default)(e)}},"./node_modules/lodash-es/memoize.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_MapCache.js");function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var s=function(){var r=arguments,n=t?t.apply(this,r):r[0],o=s.cache;if(o.has(n))return o.get(n);var i=e.apply(this,r);return s.cache=o.set(n,i)||o,i};return s.cache=new(n.Cache||r.default),s}n.Cache=r.default;const o=n},"./node_modules/lodash-es/merge.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_baseMerge.js");const n=(0,s("./node_modules/lodash-es/_createAssigner.js").default)((function(e,t,s){(0,r.default)(e,t,s)}))},"./node_modules/lodash-es/mergeWith.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_baseMerge.js");const n=(0,s("./node_modules/lodash-es/_createAssigner.js").default)((function(e,t,s,n){(0,r.default)(e,t,s,n)}))},"./node_modules/lodash-es/now.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_root.js");const n=function(){return r.default.Date.now()}},"./node_modules/lodash-es/pick.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_basePick.js");const n=(0,s("./node_modules/lodash-es/_flatRest.js").default)((function(e,t){return null==e?{}:(0,r.default)(e,t)}))},"./node_modules/lodash-es/result.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/_castPath.js"),n=s("./node_modules/lodash-es/isFunction.js"),o=s("./node_modules/lodash-es/_toKey.js");const i=function(e,t,s){var i=-1,a=(t=(0,r.default)(t,e)).length;for(a||(a=1,e=void 0);++i<a;){var l=null==e?void 0:e[(0,o.default)(t[i])];void 0===l&&(i=a,l=s),e=(0,n.default)(l)?l.call(e):l}return e}},"./node_modules/lodash-es/stubArray.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(){return[]}},"./node_modules/lodash-es/stubFalse.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=function(){return!1}},"./node_modules/lodash-es/toNumber.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lodash-es/_baseTrim.js"),n=s("./node_modules/lodash-es/isObject.js"),o=s("./node_modules/lodash-es/isSymbol.js"),i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;const c=function(e){if("number"==typeof e)return e;if((0,o.default)(e))return NaN;if((0,n.default)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,n.default)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=(0,r.default)(e);var s=a.test(e);return s||l.test(e)?d(e.slice(2),s?2:8):i.test(e)?NaN:+e}},"./node_modules/lodash-es/toPlainObject.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lodash-es/_copyObject.js"),n=s("./node_modules/lodash-es/keysIn.js");const o=function(e){return(0,r.default)(e,(0,n.default)(e))}},"./node_modules/lodash-es/toString.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lodash-es/_baseToString.js");const n=function(e){return null==e?"":(0,r.default)(e)}},"./node_modules/mergebounce/mergebounce.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lodash-es/merge.js"),n=s("./node_modules/lodash-es/mergeWith.js"),o=s("./node_modules/@converse/openpromise/dist/openpromise.js");const i=Math.max,a=Math.min;function l(e){if("number"==typeof e)return e;if("string"==typeof e){const t=parseFloat(e);return isNaN(t)?0:t}return 0}const d=function(e,t,s={}){let d,c,u,h,m,f,p=0,g=!1,v=s.promise?(0,o.getOpenPromise)():null;if("function"!=typeof e)throw new TypeError("Expected a function");function _(t){const r=d,n=c,i=v;return d=c=void 0,p=t,h=e.apply(n,r),s.promise&&(i.resolve(h),v=(0,o.getOpenPromise)()),s.promise?i:h}function y(e){const s=e-f;return void 0===f||s>=t||s<0||g&&e-p>=u}function b(){const e=Date.now();if(y(e))return j(e);m=setTimeout(b,function(e){const s=t-(e-f);return g?a(s,u-(e-p)):s}(e))}function j(e){return m=void 0,d?_(e):(d=c=void 0,s.promise?v:h)}function w(e,t){if(Array.isArray(e)&&Array.isArray(t))return(null==s?void 0:s.dedupeArrays)?e.concat(t.filter((t=>-1===e.indexOf(t)))):e.concat(t)}function S(){const e=Date.now(),o=y(e);var i;if(i=Array.from(arguments),d=(null==d?void 0:d.length)?i.length?(null==s?void 0:s.concatArrays)||(null==s?void 0:s.dedupeArrays)?(0,n.default)(d,i,w):(0,r.default)(d,i):d:i||[],c=this,f=e,o){if(void 0===m)return function(e){return p=e,m=setTimeout(b,t),s.promise?v:h}(f);if(g)return clearTimeout(m),m=setTimeout(b,t),_(f)}return void 0===m&&(m=setTimeout(b,t)),s.promise?v:h}return t=l(t)||0,function(e){const t=typeof e;return null!=e&&("object"===t||"function"===t)}(s)&&(g="maxWait"in s,u=g?i(l(s.maxWait)||0,t):u),S.cancel=function(){void 0!==m&&clearTimeout(m),p=0,d=f=c=m=void 0},S.flush=function(){return void 0===m?h:j(Date.now())},S}},"./node_modules/pluggable.js/src/pluggable.js":(e,t,s)=>{"use strict";function r(e,t,s,r,...n){return"function"==typeof s&&(void 0===this.__super__&&(this.__super__=r),this.__super__[e]=s.bind(this)),t.apply(this,n)}s.r(t),s.d(t,{default:()=>i,enable:()=>o});class n{_overrideAttribute(e,t){const s=t.overrides[e];if("function"==typeof s){const t={};t[this.name]=this.plugged;const n=this.plugged[e];this.plugged[e]=function(...o){return r.apply(this,[e,s,n,t,...o])}}else this.plugged[e]=s}_extendObject(e,t){e.prototype.__super__||(e.prototype.__super__={},e.prototype.__super__[this.name]=this.plugged);for(const[s,n]of Object.entries(t))if("events"===s)e.prototype[s]=Object.assign(n,e.prototype[s]);else if("function"==typeof n){const t={};t[this.name]=this.plugged;const o=e.prototype[s];e.prototype[s]=function(...e){return r.apply(this,[s,n,o,t,...e])}}else e.prototype[s]=n}loadPluginDependencies(e){var t;null===(t=e.dependencies)||void 0===t||t.forEach((t=>{const s=this.plugins[t];if(s){var r;if(null===(r=s.dependencies)||void 0===r?void 0:r.includes(e.__name__))throw'Found a circular dependency between the plugins "'+e.__name__+'" and "'+t+'"';this.initializePlugin(s)}else this.throwUndefinedDependencyError('Could not find dependency "'+t+'" for the plugin "'+e.__name__+"\". If it's needed, make sure it's loaded by require.js")}))}throwUndefinedDependencyError(e){if(this.plugged.strict_plugin_dependencies)throw e;console.warn?console.warn(e):console.log(e)}applyOverrides(e){Object.keys(e.overrides||{}).forEach((t=>{const s=e.overrides[t];"object"==typeof s?void 0===this.plugged[t]?this.throwUndefinedDependencyError(`Plugin "${e.__name__}" tried to override "${t}" but it's not found.`):this._extendObject(this.plugged[t],s):this._overrideAttribute(t,e)}))}initializePlugin(e){var t;Object.keys(this.allowed_plugins).includes(e.__name__)&&(this.initialized_plugins.includes(e.__name__)||("boolean"==typeof e.enabled&&e.enabled||(null===(t=e.enabled)||void 0===t?void 0:t.call(e,this.plugged))||null==e.enabled)&&(Object.assign(e,this.properties),e.dependencies&&this.loadPluginDependencies(e),this.applyOverrides(e),"function"==typeof e.initialize&&e.initialize.bind(e)(this),this.initialized_plugins.push(e.__name__)))}registerPlugin(e,t){if(e in this.plugins)throw new Error("Error: Plugin name "+e+" is already taken");t.__name__=e,this.plugins[e]=t}initializePlugins(e={},t=[],s=[]){if(Object.keys(this.plugins).length){this.properties=e,this.allowed_plugins={};for(const[e,r]of Object.entries(this.plugins))t.length&&!t.includes(e)||s.includes(e)||(this.allowed_plugins[e]=r);Object.values(this.allowed_plugins).forEach((e=>this.initializePlugin(e)))}}constructor(e,t){this.name=t,this.plugged=e,void 0===this.plugged.__super__?this.plugged.__super__={}:"string"==typeof this.plugged.__super__&&(this.plugged.__super__={__string__:this.plugged.__super__}),this.plugged.__super__[t]=this.plugged,this.plugins={},this.initialized_plugins=[]}}function o(e,t,s){return void 0===s&&(s="pluginSocket"),void 0===t&&(t="plugged"),e[s]=new n(e,t),e}const i={enable:o}},"./node_modules/sizzle/dist/sizzle.js":(e,t,s)=>{var r;!function(n){var o,i,a,l,d,c,u,h,m,f,p,g,v,_,y,b,j,w,S,x="sizzle"+1*new Date,E=n.document,A=0,O=0,C=he(),T=he(),$=he(),k=he(),M=function(e,t){return e===t&&(p=!0),0},I={}.hasOwnProperty,P=[],N=P.pop,D=P.push,R=P.push,z=P.slice,L=function(e,t){for(var s=0,r=e.length;s<r;s++)if(e[s]===t)return s;return-1},U="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",q="\\["+B+"*("+F+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+B+"*\\]",H=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",G=new RegExp(B+"+","g"),W=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),V=new RegExp("^"+B+"*,"+B+"*"),K=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),J=new RegExp(B+"|>"),Y=new RegExp(H),Q=new RegExp("^"+F+"$"),X={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+U+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},Z=/HTML$/i,ee=/^(?:input|select|textarea|button)$/i,te=/^h\d$/i,se=/^[^{]+\{\s*\[native \w/,re=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ne=/[+~]/,oe=new RegExp("\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\([^\\r\\n\\f])","g"),ie=function(e,t){var s="0x"+e.slice(1)-65536;return t||(s<0?String.fromCharCode(s+65536):String.fromCharCode(s>>10|55296,1023&s|56320))},ae=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,le=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},de=function(){g()},ce=xe((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{R.apply(P=z.call(E.childNodes),E.childNodes),P[E.childNodes.length].nodeType}catch(e){R={apply:P.length?function(e,t){D.apply(e,z.call(t))}:function(e,t){for(var s=e.length,r=0;e[s++]=t[r++];);e.length=s-1}}}function ue(e,t,s,r){var n,o,a,l,d,u,m,f=t&&t.ownerDocument,p=t?t.nodeType:9;if(s=s||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return s;if(!r&&(g(t),t=t||v,y)){if(11!==p&&(d=re.exec(e)))if(n=d[1]){if(9===p){if(!(a=t.getElementById(n)))return s;if(a.id===n)return s.push(a),s}else if(f&&(a=f.getElementById(n))&&S(t,a)&&a.id===n)return s.push(a),s}else{if(d[2])return R.apply(s,t.getElementsByTagName(e)),s;if((n=d[3])&&i.getElementsByClassName&&t.getElementsByClassName)return R.apply(s,t.getElementsByClassName(n)),s}if(i.qsa&&!k[e+" "]&&(!b||!b.test(e))&&(1!==p||"object"!==t.nodeName.toLowerCase())){if(m=e,f=t,1===p&&(J.test(e)||K.test(e))){for((f=ne.test(e)&&je(t.parentNode)||t)===t&&i.scope||((l=t.getAttribute("id"))?l=l.replace(ae,le):t.setAttribute("id",l=x)),o=(u=c(e)).length;o--;)u[o]=(l?"#"+l:":scope")+" "+Se(u[o]);m=u.join(",")}try{return R.apply(s,f.querySelectorAll(m)),s}catch(t){k(e,!0)}finally{l===x&&t.removeAttribute("id")}}}return h(e.replace(W,"$1"),t,s,r)}function he(){var e=[];return function t(s,r){return e.push(s+" ")>a.cacheLength&&delete t[e.shift()],t[s+" "]=r}}function me(e){return e[x]=!0,e}function fe(e){var t=v.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function pe(e,t){for(var s=e.split("|"),r=s.length;r--;)a.attrHandle[s[r]]=t}function ge(e,t){var s=t&&e,r=s&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(s)for(;s=s.nextSibling;)if(s===t)return-1;return e?1:-1}function ve(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function _e(e){return function(t){var s=t.nodeName.toLowerCase();return("input"===s||"button"===s)&&t.type===e}}function ye(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ce(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function be(e){return me((function(t){return t=+t,me((function(s,r){for(var n,o=e([],s.length,t),i=o.length;i--;)s[n=o[i]]&&(s[n]=!(r[n]=s[n]))}))}))}function je(e){return e&&void 0!==e.getElementsByTagName&&e}for(o in i=ue.support={},d=ue.isXML=function(e){var t=e&&e.namespaceURI,s=e&&(e.ownerDocument||e).documentElement;return!Z.test(t||s&&s.nodeName||"HTML")},g=ue.setDocument=function(e){var t,s,r=e?e.ownerDocument||e:E;return r!=v&&9===r.nodeType&&r.documentElement?(_=(v=r).documentElement,y=!d(v),E!=v&&(s=v.defaultView)&&s.top!==s&&(s.addEventListener?s.addEventListener("unload",de,!1):s.attachEvent&&s.attachEvent("onunload",de)),i.scope=fe((function(e){return _.appendChild(e).appendChild(v.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),i.cssHas=fe((function(){try{return v.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}})),i.attributes=fe((function(e){return e.className="i",!e.getAttribute("className")})),i.getElementsByTagName=fe((function(e){return e.appendChild(v.createComment("")),!e.getElementsByTagName("*").length})),i.getElementsByClassName=se.test(v.getElementsByClassName),i.getById=fe((function(e){return _.appendChild(e).id=x,!v.getElementsByName||!v.getElementsByName(x).length})),i.getById?(a.filter.ID=function(e){var t=e.replace(oe,ie);return function(e){return e.getAttribute("id")===t}},a.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var s=t.getElementById(e);return s?[s]:[]}}):(a.filter.ID=function(e){var t=e.replace(oe,ie);return function(e){var s=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return s&&s.value===t}},a.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var s,r,n,o=t.getElementById(e);if(o){if((s=o.getAttributeNode("id"))&&s.value===e)return[o];for(n=t.getElementsByName(e),r=0;o=n[r++];)if((s=o.getAttributeNode("id"))&&s.value===e)return[o]}return[]}}),a.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var s,r=[],n=0,o=t.getElementsByTagName(e);if("*"===e){for(;s=o[n++];)1===s.nodeType&&r.push(s);return r}return o},a.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&y)return t.getElementsByClassName(e)},j=[],b=[],(i.qsa=se.test(v.querySelectorAll))&&(fe((function(e){var t;_.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&b.push("[*^$]="+B+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||b.push("\\["+B+"*(?:value|"+U+")"),e.querySelectorAll("[id~="+x+"-]").length||b.push("~="),(t=v.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||b.push("\\["+B+"*name"+B+"*="+B+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||b.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||b.push(".#.+[+~]"),e.querySelectorAll("\\\f"),b.push("[\\r\\n\\f]")})),fe((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=v.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&b.push("name"+B+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&b.push(":enabled",":disabled"),_.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&b.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),b.push(",.*:")}))),(i.matchesSelector=se.test(w=_.matches||_.webkitMatchesSelector||_.mozMatchesSelector||_.oMatchesSelector||_.msMatchesSelector))&&fe((function(e){i.disconnectedMatch=w.call(e,"*"),w.call(e,"[s!='']:x"),j.push("!=",H)})),i.cssHas||b.push(":has"),b=b.length&&new RegExp(b.join("|")),j=j.length&&new RegExp(j.join("|")),t=se.test(_.compareDocumentPosition),S=t||se.test(_.contains)?function(e,t){var s=9===e.nodeType&&e.documentElement||e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(s.contains?s.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},M=t?function(e,t){if(e===t)return p=!0,0;var s=!e.compareDocumentPosition-!t.compareDocumentPosition;return s||(1&(s=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===s?e==v||e.ownerDocument==E&&S(E,e)?-1:t==v||t.ownerDocument==E&&S(E,t)?1:f?L(f,e)-L(f,t):0:4&s?-1:1)}:function(e,t){if(e===t)return p=!0,0;var s,r=0,n=e.parentNode,o=t.parentNode,i=[e],a=[t];if(!n||!o)return e==v?-1:t==v?1:n?-1:o?1:f?L(f,e)-L(f,t):0;if(n===o)return ge(e,t);for(s=e;s=s.parentNode;)i.unshift(s);for(s=t;s=s.parentNode;)a.unshift(s);for(;i[r]===a[r];)r++;return r?ge(i[r],a[r]):i[r]==E?-1:a[r]==E?1:0},v):v},ue.matches=function(e,t){return ue(e,null,null,t)},ue.matchesSelector=function(e,t){if(g(e),i.matchesSelector&&y&&!k[t+" "]&&(!j||!j.test(t))&&(!b||!b.test(t)))try{var s=w.call(e,t);if(s||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return s}catch(e){k(t,!0)}return ue(t,v,null,[e]).length>0},ue.contains=function(e,t){return(e.ownerDocument||e)!=v&&g(e),S(e,t)},ue.attr=function(e,t){(e.ownerDocument||e)!=v&&g(e);var s=a.attrHandle[t.toLowerCase()],r=s&&I.call(a.attrHandle,t.toLowerCase())?s(e,t,!y):void 0;return void 0!==r?r:i.attributes||!y?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},ue.escape=function(e){return(e+"").replace(ae,le)},ue.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ue.uniqueSort=function(e){var t,s=[],r=0,n=0;if(p=!i.detectDuplicates,f=!i.sortStable&&e.slice(0),e.sort(M),p){for(;t=e[n++];)t===e[n]&&(r=s.push(n));for(;r--;)e.splice(s[r],1)}return f=null,e},l=ue.getText=function(e){var t,s="",r=0,n=e.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)s+=l(e)}else if(3===n||4===n)return e.nodeValue}else for(;t=e[r++];)s+=l(t);return s},a=ue.selectors={cacheLength:50,createPseudo:me,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(oe,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(oe,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ue.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ue.error(e[0]),e},PSEUDO:function(e){var t,s=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":s&&Y.test(s)&&(t=c(s,!0))&&(t=s.indexOf(")",s.length-t)-s.length)&&(e[0]=e[0].slice(0,t),e[2]=s.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(oe,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&C(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,s){return function(r){var n=ue.attr(r,e);return null==n?"!="===t:!t||(n+="","="===t?n===s:"!="===t?n!==s:"^="===t?s&&0===n.indexOf(s):"*="===t?s&&n.indexOf(s)>-1:"$="===t?s&&n.slice(-s.length)===s:"~="===t?(" "+n.replace(G," ")+" ").indexOf(s)>-1:"|="===t&&(n===s||n.slice(0,s.length+1)===s+"-"))}},CHILD:function(e,t,s,r,n){var o="nth"!==e.slice(0,3),i="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===n?function(e){return!!e.parentNode}:function(t,s,l){var d,c,u,h,m,f,p=o!==i?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),_=!l&&!a,y=!1;if(g){if(o){for(;p;){for(h=t;h=h[p];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=p="only"===e&&!f&&"nextSibling"}return!0}if(f=[i?g.firstChild:g.lastChild],i&&_){for(y=(m=(d=(c=(u=(h=g)[x]||(h[x]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]||[])[0]===A&&d[1])&&d[2],h=m&&g.childNodes[m];h=++m&&h&&h[p]||(y=m=0)||f.pop();)if(1===h.nodeType&&++y&&h===t){c[e]=[A,m,y];break}}else if(_&&(y=m=(d=(c=(u=(h=t)[x]||(h[x]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]||[])[0]===A&&d[1]),!1===y)for(;(h=++m&&h&&h[p]||(y=m=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++y||(_&&((c=(u=h[x]||(h[x]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]=[A,y]),h!==t)););return(y-=n)===r||y%r===0&&y/r>=0}}},PSEUDO:function(e,t){var s,r=a.pseudos[e]||a.setFilters[e.toLowerCase()]||ue.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(s=[e,e,"",t],a.setFilters.hasOwnProperty(e.toLowerCase())?me((function(e,s){for(var n,o=r(e,t),i=o.length;i--;)e[n=L(e,o[i])]=!(s[n]=o[i])})):function(e){return r(e,0,s)}):r}},pseudos:{not:me((function(e){var t=[],s=[],r=u(e.replace(W,"$1"));return r[x]?me((function(e,t,s,n){for(var o,i=r(e,null,n,[]),a=e.length;a--;)(o=i[a])&&(e[a]=!(t[a]=o))})):function(e,n,o){return t[0]=e,r(t,null,o,s),t[0]=null,!s.pop()}})),has:me((function(e){return function(t){return ue(e,t).length>0}})),contains:me((function(e){return e=e.replace(oe,ie),function(t){return(t.textContent||l(t)).indexOf(e)>-1}})),lang:me((function(e){return Q.test(e||"")||ue.error("unsupported lang: "+e),e=e.replace(oe,ie).toLowerCase(),function(t){var s;do{if(s=y?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(s=s.toLowerCase())===e||0===s.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===_},focus:function(e){return e===v.activeElement&&(!v.hasFocus||v.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ye(!1),disabled:ye(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!a.pseudos.empty(e)},header:function(e){return te.test(e.nodeName)},input:function(e){return ee.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:be((function(){return[0]})),last:be((function(e,t){return[t-1]})),eq:be((function(e,t,s){return[s<0?s+t:s]})),even:be((function(e,t){for(var s=0;s<t;s+=2)e.push(s);return e})),odd:be((function(e,t){for(var s=1;s<t;s+=2)e.push(s);return e})),lt:be((function(e,t,s){for(var r=s<0?s+t:s>t?t:s;--r>=0;)e.push(r);return e})),gt:be((function(e,t,s){for(var r=s<0?s+t:s;++r<t;)e.push(r);return e}))}},a.pseudos.nth=a.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})a.pseudos[o]=ve(o);for(o in{submit:!0,reset:!0})a.pseudos[o]=_e(o);function we(){}function Se(e){for(var t=0,s=e.length,r="";t<s;t++)r+=e[t].value;return r}function xe(e,t,s){var r=t.dir,n=t.next,o=n||r,i=s&&"parentNode"===o,a=O++;return t.first?function(t,s,n){for(;t=t[r];)if(1===t.nodeType||i)return e(t,s,n);return!1}:function(t,s,l){var d,c,u,h=[A,a];if(l){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,s,l))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if(c=(u=t[x]||(t[x]={}))[t.uniqueID]||(u[t.uniqueID]={}),n&&n===t.nodeName.toLowerCase())t=t[r]||t;else{if((d=c[o])&&d[0]===A&&d[1]===a)return h[2]=d[2];if(c[o]=h,h[2]=e(t,s,l))return!0}return!1}}function Ee(e){return e.length>1?function(t,s,r){for(var n=e.length;n--;)if(!e[n](t,s,r))return!1;return!0}:e[0]}function Ae(e,t,s,r,n){for(var o,i=[],a=0,l=e.length,d=null!=t;a<l;a++)(o=e[a])&&(s&&!s(o,r,n)||(i.push(o),d&&t.push(a)));return i}function Oe(e,t,s,r,n,o){return r&&!r[x]&&(r=Oe(r)),n&&!n[x]&&(n=Oe(n,o)),me((function(o,i,a,l){var d,c,u,h=[],m=[],f=i.length,p=o||function(e,t,s){for(var r=0,n=t.length;r<n;r++)ue(e,t[r],s);return s}(t||"*",a.nodeType?[a]:a,[]),g=!e||!o&&t?p:Ae(p,h,e,a,l),v=s?n||(o?e:f||r)?[]:i:g;if(s&&s(g,v,a,l),r)for(d=Ae(v,m),r(d,[],a,l),c=d.length;c--;)(u=d[c])&&(v[m[c]]=!(g[m[c]]=u));if(o){if(n||e){if(n){for(d=[],c=v.length;c--;)(u=v[c])&&d.push(g[c]=u);n(null,v=[],d,l)}for(c=v.length;c--;)(u=v[c])&&(d=n?L(o,u):h[c])>-1&&(o[d]=!(i[d]=u))}}else v=Ae(v===i?v.splice(f,v.length):v),n?n(null,i,v,l):R.apply(i,v)}))}function Ce(e){for(var t,s,r,n=e.length,o=a.relative[e[0].type],i=o||a.relative[" "],l=o?1:0,d=xe((function(e){return e===t}),i,!0),c=xe((function(e){return L(t,e)>-1}),i,!0),u=[function(e,s,r){var n=!o&&(r||s!==m)||((t=s).nodeType?d(e,s,r):c(e,s,r));return t=null,n}];l<n;l++)if(s=a.relative[e[l].type])u=[xe(Ee(u),s)];else{if((s=a.filter[e[l].type].apply(null,e[l].matches))[x]){for(r=++l;r<n&&!a.relative[e[r].type];r++);return Oe(l>1&&Ee(u),l>1&&Se(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(W,"$1"),s,l<r&&Ce(e.slice(l,r)),r<n&&Ce(e=e.slice(r)),r<n&&Se(e))}u.push(s)}return Ee(u)}we.prototype=a.filters=a.pseudos,a.setFilters=new we,c=ue.tokenize=function(e,t){var s,r,n,o,i,l,d,c=T[e+" "];if(c)return t?0:c.slice(0);for(i=e,l=[],d=a.preFilter;i;){for(o in s&&!(r=V.exec(i))||(r&&(i=i.slice(r[0].length)||i),l.push(n=[])),s=!1,(r=K.exec(i))&&(s=r.shift(),n.push({value:s,type:r[0].replace(W," ")}),i=i.slice(s.length)),a.filter)!(r=X[o].exec(i))||d[o]&&!(r=d[o](r))||(s=r.shift(),n.push({value:s,type:o,matches:r}),i=i.slice(s.length));if(!s)break}return t?i.length:i?ue.error(e):T(e,l).slice(0)},u=ue.compile=function(e,t){var s,r=[],n=[],o=$[e+" "];if(!o){for(t||(t=c(e)),s=t.length;s--;)(o=Ce(t[s]))[x]?r.push(o):n.push(o);o=$(e,function(e,t){var s=t.length>0,r=e.length>0,n=function(n,o,i,l,d){var c,u,h,f=0,p="0",_=n&&[],b=[],j=m,w=n||r&&a.find.TAG("*",d),S=A+=null==j?1:Math.random()||.1,x=w.length;for(d&&(m=o==v||o||d);p!==x&&null!=(c=w[p]);p++){if(r&&c){for(u=0,o||c.ownerDocument==v||(g(c),i=!y);h=e[u++];)if(h(c,o||v,i)){l.push(c);break}d&&(A=S)}s&&((c=!h&&c)&&f--,n&&_.push(c))}if(f+=p,s&&p!==f){for(u=0;h=t[u++];)h(_,b,o,i);if(n){if(f>0)for(;p--;)_[p]||b[p]||(b[p]=N.call(l));b=Ae(b)}R.apply(l,b),d&&!n&&b.length>0&&f+t.length>1&&ue.uniqueSort(l)}return d&&(A=S,m=j),_};return s?me(n):n}(n,r)),o.selector=e}return o},h=ue.select=function(e,t,s,r){var n,o,i,l,d,h="function"==typeof e&&e,m=!r&&c(e=h.selector||e);if(s=s||[],1===m.length){if((o=m[0]=m[0].slice(0)).length>2&&"ID"===(i=o[0]).type&&9===t.nodeType&&y&&a.relative[o[1].type]){if(!(t=(a.find.ID(i.matches[0].replace(oe,ie),t)||[])[0]))return s;h&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(n=X.needsContext.test(e)?0:o.length;n--&&(i=o[n],!a.relative[l=i.type]);)if((d=a.find[l])&&(r=d(i.matches[0].replace(oe,ie),ne.test(o[0].type)&&je(t.parentNode)||t))){if(o.splice(n,1),!(e=r.length&&Se(o)))return R.apply(s,r),s;break}}return(h||u(e,m))(r,t,!y,s,!t||ne.test(e)&&je(t.parentNode)||t),s},i.sortStable=x.split("").sort(M).join("")===x,i.detectDuplicates=!!p,g(),i.sortDetached=fe((function(e){return 1&e.compareDocumentPosition(v.createElement("fieldset"))})),fe((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||pe("type|href|height|width",(function(e,t,s){if(!s)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),i.attributes&&fe((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||pe("value",(function(e,t,s){if(!s&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),fe((function(e){return null==e.getAttribute("disabled")}))||pe(U,(function(e,t,s){var r;if(!s)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}));var Te=n.Sizzle;ue.noConflict=function(){return n.Sizzle===ue&&(n.Sizzle=Te),ue},void 0===(r=function(){return ue}.call(t,s,t,e))||(e.exports=r)}(window)},"./node_modules/sprintf-js/src/sprintf.js":(e,t,s)=>{var r;!function(){"use strict";var n={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(e){return function(e,t){var s,r,i,a,l,d,c,u,h,m=1,f=e.length,p="";for(r=0;r<f;r++)if("string"==typeof e[r])p+=e[r];else if("object"==typeof e[r]){if((a=e[r]).keys)for(s=t[m],i=0;i<a.keys.length;i++){if(null==s)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[i],a.keys[i-1]));s=s[a.keys[i]]}else s=a.param_no?t[a.param_no]:t[m++];if(n.not_type.test(a.type)&&n.not_primitive.test(a.type)&&s instanceof Function&&(s=s()),n.numeric_arg.test(a.type)&&"number"!=typeof s&&isNaN(s))throw new TypeError(o("[sprintf] expecting number but found %T",s));switch(n.number.test(a.type)&&(u=s>=0),a.type){case"b":s=parseInt(s,10).toString(2);break;case"c":s=String.fromCharCode(parseInt(s,10));break;case"d":case"i":s=parseInt(s,10);break;case"j":s=JSON.stringify(s,null,a.width?parseInt(a.width):0);break;case"e":s=a.precision?parseFloat(s).toExponential(a.precision):parseFloat(s).toExponential();break;case"f":s=a.precision?parseFloat(s).toFixed(a.precision):parseFloat(s);break;case"g":s=a.precision?String(Number(s.toPrecision(a.precision))):parseFloat(s);break;case"o":s=(parseInt(s,10)>>>0).toString(8);break;case"s":s=String(s),s=a.precision?s.substring(0,a.precision):s;break;case"t":s=String(!!s),s=a.precision?s.substring(0,a.precision):s;break;case"T":s=Object.prototype.toString.call(s).slice(8,-1).toLowerCase(),s=a.precision?s.substring(0,a.precision):s;break;case"u":s=parseInt(s,10)>>>0;break;case"v":s=s.valueOf(),s=a.precision?s.substring(0,a.precision):s;break;case"x":s=(parseInt(s,10)>>>0).toString(16);break;case"X":s=(parseInt(s,10)>>>0).toString(16).toUpperCase()}n.json.test(a.type)?p+=s:(!n.number.test(a.type)||u&&!a.sign?h="":(h=u?"+":"-",s=s.toString().replace(n.sign,"")),d=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",c=a.width-(h+s).length,l=a.width&&c>0?d.repeat(c):"",p+=a.align?h+s+l:"0"===d?h+l+s:l+h+s)}return p}(function(e){if(a[e])return a[e];var t,s=e,r=[],o=0;for(;s;){if(null!==(t=n.text.exec(s)))r.push(t[0]);else if(null!==(t=n.modulo.exec(s)))r.push("%");else{if(null===(t=n.placeholder.exec(s)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var i=[],l=t[2],d=[];if(null===(d=n.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(i.push(d[1]);""!==(l=l.substring(d[0].length));)if(null!==(d=n.key_access.exec(l)))i.push(d[1]);else{if(null===(d=n.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");i.push(d[1])}t[2]=i}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}s=s.substring(t[0].length)}return a[e]=r}(e),arguments)}function i(e,t){return o.apply(null,[e].concat(t||[]))}var a=Object.create(null);t.sprintf=o,t.vsprintf=i,"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=i,void 0===(r=function(){return{sprintf:o,vsprintf:i}}.call(t,s,t,e))||(e.exports=r))}()},"./node_modules/strophe.js/dist/strophe.browser.esm.js":(e,t,s)=>{"use strict";function r(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function n(e){return function(){var t=this,s=arguments;return new Promise((function(n,o){var i=e.apply(t,s);function a(e){r(i,n,o,a,l,"next",e)}function l(e){r(i,n,o,a,l,"throw",e)}a(void 0)}))}}function o(e,t,s){if(!t.has(e))throw new TypeError("attempted to "+s+" private field on non-instance");return t.get(e)}function i(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,o(e,t,"get"))}function a(e,t,s){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,s)}function l(e,t,s){return function(e,t,s){if(t.set)t.set.call(e,s);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=s}}(e,o(e,t,"set"),s),s}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){d(e,t,s[t])}))}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}s.r(t),s.d(t,{$build:()=>Q,$iq:()=>Z,$msg:()=>X,$pres:()=>ee,Builder:()=>oe,Request:()=>ae,Stanza:()=>Ie,Strophe:()=>Ne,stx:()=>Pe,toStanza:()=>De});const h={HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",SERVER:"jabber:server",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},m={tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"]},f={ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9,CONNTIMEOUT:10,BINDREQUIRED:11,ATTACHFAIL:12,RECONNECTING:13},p={BAD_FORMAT:"bad-format",CONFLICT:"conflict",MISSING_JID_NODE:"x-strophe-bad-non-anon-jid",NO_AUTH_MECH:"no-auth-mech",UNKNOWN_REASON:"unknown"},g={DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},v={NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11};let _=g.DEBUG;const y={setLogLevel(e){if(e<g.DEBUG||e>g.FATAL)throw new Error("Invalid log level supplied to setLogLevel");_=e},log(e,t){var s;if(!(e<_))if(e>=g.ERROR)null===(s=console)||void 0===s||s.error(t);else if(e===g.INFO){var r;null===(r=console)||void 0===r||r.info(t)}else if(e===g.WARN){var n;null===(n=console)||void 0===n||n.warn(t)}else if(e===g.DEBUG){var o;null===(o=console)||void 0===o||o.debug(t)}},debug(e){this.log(g.DEBUG,e)},info(e){this.log(g.INFO,e)},warn(e){this.log(g.WARN,e)},error(e){this.log(g.ERROR,e)},fatal(e){this.log(g.FATAL,e)}};function b(e,t){const s=M(e),r=I(s);if(r)throw new Error(`Parser Error: ${r}`);const n=P(s);if(["message","iq","presence"].includes(n.nodeName.toLowerCase())&&"jabber:client"!==n.namespaceURI&&"jabber:server"!==n.namespaceURI){const e=`Invalid namespaceURI ${n.namespaceURI}`;if(t)throw new Error(e);y.error(e)}return n}function j(e){void 0!==e.stack&&y.fatal(e.stack),y.fatal("error: "+e.message)}function w(e){let t="";const s=e.length;for(let r=0;r<s;r++){const s=e.charCodeAt(r);s>=0&&s<=127?t+=e.charAt(r):s>2047?(t+=String.fromCharCode(224|s>>12&15),t+=String.fromCharCode(128|s>>6&63),t+=String.fromCharCode(128|63&s)):(t+=String.fromCharCode(192|s>>6&31),t+=String.fromCharCode(128|63&s))}return t}function S(e,t){const s=new Uint8Array(e),r=new Uint8Array(t),n=new Uint8Array(e.byteLength);for(let t=0;t<e.byteLength;t++)n[t]=s[t]^r[t];return n.buffer}function x(e){let t="";const s=new Uint8Array(e),r=s.byteLength;for(let e=0;e<r;e++)t+=String.fromCharCode(s[e]);return btoa(t)}function E(e){var t;return null===(t=Uint8Array.from(atob(e),(e=>e.charCodeAt(0))))||void 0===t?void 0:t.buffer}function A(e){return(new TextEncoder).encode(e).buffer}function O(e){"undefined"==typeof document&&y.error("addCookies: not adding any cookies, since there's no document object"),e=e||{};for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let s="",r="",n="";const o=e[t],i="object"==typeof o,a=escape(unescape(i?o.value:o));i&&(s=o.expires?";expires="+o.expires:"",r=o.domain?";domain="+o.domain:"",n=o.path?";path="+o.path:""),document.cookie=t+"="+a+s+r+n}}let C=null;function T(){return C||(C=document.implementation.createDocument("jabber:client","strophe",null)),C}function $(e){return T().createTextNode(e)}function k(e){const t=Array.from(e.childNodes);return 1===t.length&&t[0].nodeType===v.TEXT||t.forEach((t=>{"body"!==t.nodeName.toLowerCase()&&(t.nodeType!==v.TEXT||/\S/.test(t.nodeValue)?t.nodeType===v.NORMAL&&k(t):e.removeChild(t))})),e}function M(e){return(new DOMParser).parseFromString(e,"text/xml")}function I(e){var t;const s="parsererror"===(null===(t=e.firstElementChild)||void 0===t?void 0:t.nodeName)?e.firstElementChild:e.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","parsererror")[0];return"parsererror"===(null==s?void 0:s.nodeName)?null==s?void 0:s.textContent:null}function P(e){if(e.firstElementChild)return e.firstElementChild;let t,s=0;const r=e.childNodes;for(;t=r[s++];)if(1===t.nodeType)return t;return null}function N(e,t,s){if(!e)return null;const r=T().createElement(e);if(!s||"string"!=typeof s&&"number"!=typeof s){if("string"==typeof t||"number"==typeof t)return r.appendChild($(t.toString())),r}else r.appendChild($(s.toString()));if(!t)return r;if(Array.isArray(t))for(const e of t)Array.isArray(e)&&null!=e[0]&&null!=e[1]&&r.setAttribute(e[0],e[1]);else if("object"==typeof t)for(const e of Object.keys(t))e&&null!=t[e]&&r.setAttribute(e,t[e].toString());return r}function D(e){for(let t=0;t<m.tags.length;t++)if(e===m.tags[t])return!0;return!1}function R(e,t){const s=m.attributes[e];if((null==s?void 0:s.length)>0)for(let e=0;e<s.length;e++)if(t===s[e])return!0;return!1}function z(e){for(let t=0;t<m.css.length;t++)if(e===m.css[t])return!0;return!1}function L(e){if(e.nodeType===v.NORMAL)return function(e){let t;const s=e.nodeName.toLowerCase();if(D(s))try{if(t=N(s),s in m.attributes){const n=m.attributes[s];for(let s=0;s<n.length;s++){const o=n[s];let i=e.getAttribute(o);var r;if(null!=i&&""!==i)if("style"===o&&"object"==typeof i&&(i=null!==(r=i.cssText)&&void 0!==r?r:i),"style"===o){const e=[],s=i.split(";");for(let t=0;t<s.length;t++){const r=s[t].split(":"),n=r[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase();if(z(n)){const t=r[1].replace(/^\s*/,"").replace(/\s*$/,"");e.push(n+": "+t)}}e.length>0&&(i=e.join("; "),t.setAttribute(o,i))}else t.setAttribute(o,i)}for(let s=0;s<e.childNodes.length;s++)t.appendChild(L(e.childNodes[s]))}}catch(e){t=$("")}else{t=T().createDocumentFragment();for(let s=0;s<e.childNodes.length;s++)t.appendChild(L(e.childNodes[s]))}return t}(e);if(e.nodeType===v.FRAGMENT){const t=T().createDocumentFragment();for(let s=0;s<e.childNodes.length;s++)t.appendChild(L(e.childNodes[s]));return t}return e.nodeType===v.TEXT?$(e.nodeValue):void 0}function U(e){let t;if(e.nodeType===v.NORMAL){const s=e;t=N(s.tagName);for(let e=0;e<s.attributes.length;e++)t.setAttribute(s.attributes[e].nodeName,s.attributes[e].value);for(let e=0;e<s.childNodes.length;e++)t.appendChild(U(s.childNodes[e]))}else e.nodeType===v.TEXT&&(t=T().createTextNode(e.nodeValue));return t}function B(e){return e=(e=(e=(e=(e=e.replace(/\&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/'/g,"&apos;")).replace(/"/g,"&quot;")}function F(e,t,s){for(let r=0;r<e.childNodes.length;r++){const n=e.childNodes[r];n.nodeType!==v.NORMAL||t&&!this.isTagEqual(n,t)||s(n)}}function q(e,t){return e.tagName===t}function H(e){if(!e)return null;let t="";e.childNodes.length||e.nodeType!==v.TEXT||(t+=e.nodeValue);for(const s of e.childNodes)s.nodeType===v.TEXT&&(t+=s.nodeValue);return B(t)}function G(e){return e.indexOf("@")<0?null:e.split("@")[0]}function W(e){const t=K(e);if(t.indexOf("@")<0)return t;{const e=t.split("@");return e.splice(0,1),e.join("@")}}function V(e){if(!e)return null;const t=e.split("/");return t.length<2?null:(t.splice(0,1),t.join("/"))}function K(e){return e?e.split("/")[0]:null}const J={utf16to8:w,xorArrayBuffers:S,arrayBufToBase64:x,base64ToArrayBuf:E,stringToArrayBuf:A,addCookies:O};var Y=Object.freeze({__proto__:null,toElement:b,handleError:j,utf16to8:w,xorArrayBuffers:S,arrayBufToBase64:x,base64ToArrayBuf:E,stringToArrayBuf:A,addCookies:O,xmlGenerator:T,xmlTextNode:$,stripWhitespace:k,xmlHtmlNode:M,getParserError:I,getFirstElementChild:P,xmlElement:N,validTag:D,validAttribute:R,validCSS:z,createHtml:L,copyElement:U,xmlescape:B,xmlunescape:function(e){return e=(e=(e=(e=(e=e.replace(/\&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&apos;/g,"'")).replace(/&quot;/g,'"')},forEachChild:F,isTagEqual:q,getText:H,escapeNode:function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(e){return"string"!=typeof e?e:e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:G,getDomainFromJid:W,getResourceFromJid:V,getBareJidFromJid:K,default:J});function Q(e,t){return new oe(e,t)}function X(e){return new oe("message",e)}function Z(e){return new oe("iq",e)}function ee(e){return new oe("presence",e)}var te=new WeakMap,se=new WeakMap,re=new WeakMap,ne=new WeakMap;class oe{static fromString(e){const t=b(e,!0),s=new oe("");return l(s,te,t),s}buildTree(){return N(i(this,re),i(this,ne))}get nodeTree(){return i(this,te)||l(this,te,this.buildTree()),i(this,te)}get node(){return i(this,se)||l(this,se,this.tree()),i(this,se)}set node(e){l(this,se,e)}static serialize(e){if(!e)return null;const t=e instanceof oe?e.tree():e,s=[...Array(t.attributes.length).keys()].map((e=>t.attributes[e].nodeName));s.sort();let r=s.reduce(((e,s)=>`${e} ${s}="${B(t.attributes.getNamedItem(s).value)}"`),`<${t.nodeName}`);if(t.childNodes.length>0){r+=">";for(let e=0;e<t.childNodes.length;e++){const s=t.childNodes[e];switch(s.nodeType){case v.NORMAL:r+=oe.serialize(s);break;case v.TEXT:r+=B(s.nodeValue);break;case v.CDATA:r+="<![CDATA["+s.nodeValue+"]]>"}}r+="</"+t.nodeName+">"}else r+="/>";return r}tree(){return this.nodeTree}toString(){return oe.serialize(this.tree())}up(){return this.node=this.node.parentElement?this.node.parentElement:this.node.parentNode,this}root(){return this.node=this.tree(),this}attrs(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(null!=e[t]?this.node.setAttribute(t,e[t].toString()):this.node.removeAttribute(t));return this}c(e,t,s){const r=N(e,t,s);return this.node.appendChild(r),"string"!=typeof s&&"number"!=typeof s&&(this.node=r),this}cnode(e){let t;e instanceof oe&&(e=e.tree());const s=T();try{t=void 0!==s.importNode}catch(e){t=!1}const r=t?s.importNode(e,!0):U(e);return this.node.appendChild(r),this.node=r,this}t(e){const t=$(e);return this.node.appendChild(t),this}h(e){const t=T().createElement("body");t.innerHTML=e;const s=L(t);for(;s.childNodes.length>0;)this.node.appendChild(s.childNodes[0]);return this}constructor(e,t){a(this,te,{writable:!0,value:void 0}),a(this,se,{writable:!0,value:void 0}),a(this,re,{writable:!0,value:void 0}),a(this,ne,{writable:!0,value:void 0}),"presence"!==e&&"message"!==e&&"iq"!==e||(t&&!t.xmlns?t.xmlns=h.CLIENT:t||(t={xmlns:h.CLIENT})),l(this,re,e),l(this,ne,t)}}let ie=0;class ae{getResponse(){var e;const t=null===(e=this.xhr.responseXML)||void 0===e?void 0:e.documentElement;if(t){if("parsererror"===t.tagName)throw y.error("invalid response received"),y.error("responseText: "+this.xhr.responseText),y.error("responseXML: "+oe.serialize(t)),new Error("parsererror")}else if(this.xhr.responseText){y.debug("Got responseText but no responseXML; attempting to parse it with DOMParser...");const e=M(this.xhr.responseText),t=I(e);if(!e||t){t&&(y.error("invalid response received: "+t),y.error("responseText: "+this.xhr.responseText));const e=new Error;throw e.name=p.BAD_FORMAT,e}}return t}_newXHR(){const e=new XMLHttpRequest;return e.overrideMimeType&&e.overrideMimeType("text/xml; charset=utf-8"),e.onreadystatechange=this.func.bind(null,this),e}constructor(e,t,s,r=0){this.id=++ie,this.xmlData=e,this.data=oe.serialize(e),this.origFunc=t,this.func=t,this.rid=s,this.date=NaN,this.sends=r,this.abort=!1,this.dead=null,this.age=()=>this.date?((new Date).valueOf()-this.date.valueOf())/1e3:0,this.timeDead=()=>this.dead?((new Date).valueOf()-this.dead.valueOf())/1e3:0,this.xhr=this._newXHR()}}let le=1.1,de=.1;class ce{static setTimeoutMultiplier(e){le=e}static getTimeoutMultplier(){return le}static setSecondaryTimeoutMultiplier(e){de=e}static getSecondaryTimeoutMultplier(){return de}_buildBody(){const e=Q("body",{rid:this.rid++,xmlns:h.HTTPBIND});return null!==this.sid&&e.attrs({sid:this.sid}),this._conn.options.keepalive&&this._conn._sessionCachingSupported()&&this._cacheSession(),e}_reset(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,this._conn._sessionCachingSupported()&&sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)}_connect(e,t,s){this.wait=e||this.wait,this.hold=t||this.hold,this.errors=0;const r=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":h.BOSH});s&&r.attrs({route:s});const n=this._conn._connect_cb;this._requests.push(new ae(r.tree(),this._onRequestStateChange.bind(this,n.bind(this._conn)),Number(r.tree().getAttribute("rid")))),this._throttledRequestHandler()}_attach(e,t,s,r,n,o,i){this._conn.jid=e,this.sid=t,this.rid=s,this._conn.connect_callback=r,this._conn.domain=W(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=n||this.wait,this.hold=o||this.hold,this.window=i||this.window,this._conn._changeConnectStatus(f.ATTACHED,null)}_restore(e,t,s,r,n){const o=JSON.parse(sessionStorage.getItem("strophe-bosh-session"));if(!(null!=o&&o.rid&&o.sid&&o.jid&&(null==e||K(o.jid)===K(e)||null===G(e)&&W(o.jid)===e))){const e=new Error("_restore: no restoreable session.");throw e.name="StropheSessionError",e}this._conn.restored=!0,this._attach(o.jid,o.sid,o.rid,t,s,r,n)}_cacheSession(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&sessionStorage.setItem("strophe-bosh-session",JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):sessionStorage.removeItem("strophe-bosh-session")}_connect_cb(e){const t=e.getAttribute("type");if(null!==t&&"terminate"===t){let t=e.getAttribute("condition");y.error("BOSH-Connection failed: "+t);const s=e.getElementsByTagName("conflict");return null!==t?("remote-stream-error"===t&&s.length>0&&(t="conflict"),this._conn._changeConnectStatus(f.CONNFAIL,t)):this._conn._changeConnectStatus(f.CONNFAIL,"unknown"),this._conn._doDisconnect(t),f.CONNFAIL}this.sid||(this.sid=e.getAttribute("sid"));const s=e.getAttribute("requests");s&&(this.window=parseInt(s,10));const r=e.getAttribute("hold");r&&(this.hold=parseInt(r,10));const n=e.getAttribute("wait");n&&(this.wait=parseInt(n,10));const o=e.getAttribute("inactivity");o&&(this.inactivity=parseInt(o,10))}_disconnect(e){this._sendTerminate(e)}_doDisconnect(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),this._conn._sessionCachingSupported()&&sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)}_emptyQueue(){return 0===this._requests.length}_callProtocolErrorHandlers(e){const t=ce._getRequestStatus(e),s=this._conn.protocolErrorHandlers.HTTP[t];s&&s.call(this,t)}_hitError(e){this.errors++,y.warn("request errored, status: "+e+", number of errors: "+this.errors),this.errors>4&&this._conn._onDisconnectTimeout()}_no_auth_received(e){y.warn("Server did not yet offer a supported authentication mechanism. Sending a blank poll request."),e=e?e.bind(this._conn):this._conn._connect_cb.bind(this._conn);const t=this._buildBody();this._requests.push(new ae(t.tree(),this._onRequestStateChange.bind(this,e),Number(t.tree().getAttribute("rid")))),this._throttledRequestHandler()}_onDisconnectTimeout(){this._abortAllRequests()}_abortAllRequests(){for(;this._requests.length>0;){const e=this._requests.pop();e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){}}}_onIdle(){const e=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===e.length&&!this._conn.disconnecting&&(y.debug("no requests during idle cycle, sending blank request"),e.push(null)),!this._conn.paused){if(this._requests.length<2&&e.length>0){const t=this._buildBody();for(let s=0;s<e.length;s++)null!==e[s]&&("restart"===e[s]?t.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":h.BOSH}):t.cnode(e[s]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new ae(t.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),Number(t.tree().getAttribute("rid")))),this._throttledRequestHandler()}if(this._requests.length>0){const e=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(le*this.wait)&&this._throttledRequestHandler(),e>Math.floor(le*this.wait)&&(y.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(le*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}}}static _getRequestStatus(e,t){let s;if(4===e.xhr.readyState)try{s=e.xhr.status}catch(e){y.error(`Caught an error while retrieving a request's status, reqStatus: ${s}, message: ${e.message}`)}return void 0===s&&(s="number"==typeof t?t:0),s}_onRequestStateChange(e,t){if(y.debug("request id "+t.id+"."+t.sends+" state changed to "+t.xhr.readyState),t.abort)return void(t.abort=!1);if(4!==t.xhr.readyState)return;const s=ce._getRequestStatus(t);if(this.lastResponseHeaders=t.xhr.getAllResponseHeaders(),this._conn.disconnecting&&s>=400)return this._hitError(s),void this._callProtocolErrorHandlers(t);const r=this._requests[0]===t,n=this._requests[1]===t,o=s>0&&s<500,i=t.sends>this._conn.maxRetries;(o||i)&&(this._removeRequest(t),y.debug("request id "+t.id+" should now be removed")),200===s?((n||r&&this._requests.length>0&&this._requests[0].age()>Math.floor(le*this.wait))&&this._restartRequest(0),this._conn.nextValidRid(t.rid+1),y.debug("request id "+t.id+"."+t.sends+" got 200"),e(t),this.errors=0):0===s||s>=400&&s<600||s>=12e3?(y.error("request id "+t.id+"."+t.sends+" error "+s+" happened"),this._hitError(s),this._callProtocolErrorHandlers(t),s>=400&&s<500&&(this._conn._changeConnectStatus(f.DISCONNECTING,null),this._conn._doDisconnect())):y.error("request id "+t.id+"."+t.sends+" error "+s+" happened"),o||i?i&&!this._conn.connected&&this._conn._changeConnectStatus(f.CONNFAIL,"giving-up"):this._throttledRequestHandler()}_processRequest(e){let t=this._requests[e];const s=ce._getRequestStatus(t,-1);if(t.sends>this._conn.maxRetries)return void this._conn._onDisconnectTimeout();const r=t.age(),n=!isNaN(r)&&r>Math.floor(le*this.wait),o=null!==t.dead&&t.timeDead()>Math.floor(de*this.wait),i=4===t.xhr.readyState&&(s<1||s>=500);if((n||o||i)&&(o&&y.error(`Request ${this._requests[e].id} timed out (secondary), restarting`),t.abort=!0,t.xhr.abort(),t.xhr.onreadystatechange=function(){},this._requests[e]=new ae(t.xmlData,t.origFunc,t.rid,t.sends),t=this._requests[e]),0===t.xhr.readyState){var a,l;y.debug("request id "+t.id+"."+t.sends+" posting");try{const e=this._conn.options.contentType||"text/xml; charset=utf-8";t.xhr.open("POST",this._conn.service,!this._conn.options.sync),void 0!==t.xhr.setRequestHeader&&t.xhr.setRequestHeader("Content-Type",e),this._conn.options.withCredentials&&(t.xhr.withCredentials=!0)}catch(e){return y.error("XHR open failed: "+e.toString()),this._conn.connected||this._conn._changeConnectStatus(f.CONNFAIL,"bad-service"),void this._conn.disconnect()}const e=()=>{if(t.date=(new Date).valueOf(),this._conn.options.customHeaders){const e=this._conn.options.customHeaders;for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.xhr.setRequestHeader(s,e[s])}t.xhr.send(t.data)};if(t.sends>1){const s=1e3*Math.min(Math.floor(le*this.wait),Math.pow(t.sends,3));setTimeout((function(){e()}),s)}else e();var d,c,u,h;if(t.sends++,this.strip&&"body"===t.xmlData.nodeName&&t.xmlData.childNodes.length)null===(d=(c=this._conn).xmlOutput)||void 0===d||d.call(c,t.xmlData.children[0]);else null===(u=(h=this._conn).xmlOutput)||void 0===u||u.call(h,t.xmlData);null===(a=(l=this._conn).rawOutput)||void 0===a||a.call(l,t.data)}else y.debug("_processRequest: "+(0===e?"first":"second")+" request has readyState of "+t.xhr.readyState)}_removeRequest(e){y.debug("removing request");for(let t=this._requests.length-1;t>=0;t--)e===this._requests[t]&&this._requests.splice(t,1);e.xhr.onreadystatechange=function(){},this._throttledRequestHandler()}_restartRequest(e){const t=this._requests[e];null===t.dead&&(t.dead=new Date),this._processRequest(e)}_reqToData(e){try{return e.getResponse()}catch(e){if("parsererror"!==e.message)throw e;this._conn.disconnect("strophe-parsererror")}}_sendTerminate(e){y.debug("_sendTerminate was called");const t=this._buildBody().attrs({type:"terminate"}),s=e instanceof oe?e.tree():e;e&&t.cnode(s);const r=new ae(t.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),Number(t.tree().getAttribute("rid")));this._requests.push(r),this._throttledRequestHandler()}_send(){clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout((()=>this._conn._onIdle()),100)}_sendRestart(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)}_throttledRequestHandler(){this._requests?y.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):y.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}constructor(e){var t;this._conn=e,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this.inactivity=null,this.strip=null!==(t=ce.prototype.strip)&&void 0!==t&&t,this.lastResponseHeaders=null,this._requests=[]}}class ue{getNamespace(e){let t=e.getAttribute("xmlns");return t&&this.options.ignoreNamespaceFragment&&(t=t.split("#")[0]),t}namespaceMatch(e){if(!this.ns||this.getNamespace(e)===this.ns)return!0;for(const s of null!==(t=e.children)&&void 0!==t?t:[]){var t;if(this.getNamespace(s)===this.ns)return!0;if(this.namespaceMatch(s))return!0}return!1}isMatch(e){let t=e.getAttribute("from");this.options.matchBareFromJid&&(t=K(t));const s=e.getAttribute("type");return!(!this.namespaceMatch(e)||this.name&&!q(e,this.name)||this.type&&(Array.isArray(this.type)?-1===this.type.indexOf(s):s!==this.type)||this.id&&e.getAttribute("id")!==this.id||this.from&&t!==this.from)}run(e){let t=null;try{t=this.handler(e)}catch(e){throw j(e),e}return t}toString(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}constructor(e,t,s,r,n,o,i){this.handler=e,this.ns=t,this.name=s,this.type=r,this.id=n,this.options=i||{matchBareFromJid:!1,ignoreNamespaceFragment:!1},this.options.matchBareFromJid?this.from=o?K(o):null:this.from=o,this.user=!0}}class he{run(){return this.lastCalled=(new Date).getTime(),this.handler()}reset(){this.lastCalled=(new Date).getTime()}toString(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}constructor(e,t){this.period=e,this.handler=t,this.lastCalled=(new Date).getTime(),this.user=!0}}class me{test(e){return!0}onStart(e){this._connection=e}onChallenge(e,t){throw new Error("You should implement challenge handling!")}clientChallenge(e){if(!this.isClientFirst)throw new Error("clientChallenge should not be called if isClientFirst is false!");return this.onChallenge(e)}onFailure(){this._connection=null}onSuccess(){this._connection=null}constructor(e,t,s){this.mechname=e,this.isClientFirst=t,this.priority=s}}class fe extends me{test(e){return null===e.authcid}constructor(e="ANONYMOUS",t=!1,s=20){super(e,t,s)}}class pe extends me{onChallenge(e){return e.authcid===e.authzid?"":e.authzid}constructor(e="EXTERNAL",t=!0,s=10){super(e,t,s)}}class ge extends me{test(e){return null!==e.pass}onChallenge(e){let t="n,";return null!==e.authcid&&(t=t+"a="+e.authzid),t+=",",t+="",t+="auth=Bearer ",t+=e.pass,t+="",t+="",J.utf16to8(t)}constructor(e="OAUTHBEARER",t=!0,s=40){super(e,t,s)}}class ve extends me{test(e){return null!==e.authcid}onChallenge(e){const{authcid:t,authzid:s,domain:r,pass:n}=e;if(!r)throw new Error("SASLPlain onChallenge: domain is not defined!");let o=s!==`${t}@${r}`?s:"";return o+="\0",o+=t,o+="\0",o+=n,J.utf16to8(o)}constructor(e="PLAIN",t=!0,s=50){super(e,t,s)}}const _e={scramResponse:(e,t,s,r)=>n((function*(){const o=e._sasl_data.cnonce,i=function(e){let t,s,r;const n=/([a-z]+)=([^,]+)(,|$)/;for(;e.match(n);){const o=e.match(n);switch(e=e.replace(o[0],""),o[1]){case"r":t=o[2];break;case"s":s=J.base64ToArrayBuf(o[2]);break;case"i":r=parseInt(o[2],10);break;case"m":return}}if(isNaN(r)||r<4096)y.warn("Failing SCRAM authentication because server supplied iteration count < 4096.");else{if(s)return{nonce:t,salt:s,iter:r};y.warn("Failing SCRAM authentication because server supplied incorrect salt.")}}(t);if(!i&&(null==i?void 0:i.nonce.slice(0,o.length))!==o)return y.warn("Failing SCRAM authentication because server supplied incorrect nonce."),e._sasl_data={},e._sasl_failure_cb();let a,l;const{pass:d}=e;if("string"==typeof e.pass||e.pass instanceof String){const e=yield function(e,t,s,r,o){return n((function*(){const n=yield crypto.subtle.deriveBits({name:"PBKDF2",salt:t,iterations:s,hash:{name:r}},yield crypto.subtle.importKey("raw",J.stringToArrayBuf(e),"PBKDF2",!1,["deriveBits"]),o),i=yield crypto.subtle.importKey("raw",n,{name:"HMAC",hash:r},!1,["sign"]);return{ck:yield crypto.subtle.sign("HMAC",i,J.stringToArrayBuf("Client Key")),sk:yield crypto.subtle.sign("HMAC",i,J.stringToArrayBuf("Server Key"))}}))()}(d,i.salt,i.iter,s,r);a=e.ck,l=e.sk}else{if((null==d?void 0:d.name)!==s||(null==d?void 0:d.salt)!==J.arrayBufToBase64(i.salt)||(null==d?void 0:d.iter)!==i.iter)return e._sasl_failure_cb();{const{ck:e,sk:t}=d;a=J.base64ToArrayBuf(e),l=J.base64ToArrayBuf(t)}}const c=e._sasl_data["client-first-message-bare"],u=t,h=`c=biws,r=${i.nonce}`,m=`${c},${u},${h}`,f=yield function(e,t,s){return n((function*(){const r=yield crypto.subtle.importKey("raw",yield crypto.subtle.digest(s,t),{name:"HMAC",hash:s},!1,["sign"]),n=yield crypto.subtle.sign("HMAC",r,J.stringToArrayBuf(e));return J.xorArrayBuffers(t,n)}))()}(m,a,s),p=yield function(e,t,s){return n((function*(){const r=yield crypto.subtle.importKey("raw",t,{name:"HMAC",hash:s},!1,["sign"]);return crypto.subtle.sign("HMAC",r,J.stringToArrayBuf(e))}))()}(m,l,s);return e._sasl_data["server-signature"]=J.arrayBufToBase64(p),e._sasl_data.keys={name:s,iter:i.iter,salt:J.arrayBufToBase64(i.salt),ck:J.arrayBufToBase64(a),sk:J.arrayBufToBase64(l)},`${h},p=${J.arrayBufToBase64(f)}`}))(),clientChallenge(e,t){const s=t||function(){const e=new Uint8Array(16);return J.arrayBufToBase64(crypto.getRandomValues(e).buffer)}(),r=`n=${e.authcid},r=${s}`;return e._sasl_data.cnonce=s,e._sasl_data["client-first-message-bare"]=r,`n,,${r}`}};class ye extends me{test(e){return null!==e.authcid}onChallenge(e,t){return n((function*(){return yield _e.scramResponse(e,t,"SHA-1",160)}))()}clientChallenge(e,t){return _e.clientChallenge(e,t)}constructor(e="SCRAM-SHA-1",t=!0,s=60){super(e,t,s)}}class be extends me{test(e){return null!==e.authcid}onChallenge(e,t){return n((function*(){return yield _e.scramResponse(e,t,"SHA-256",256)}))()}clientChallenge(e,t){return _e.clientChallenge(e,t)}constructor(e="SCRAM-SHA-256",t=!0,s=70){super(e,t,s)}}class je extends me{test(e){return null!==e.authcid}onChallenge(e,t){return n((function*(){return yield _e.scramResponse(e,t,"SHA-384",384)}))()}clientChallenge(e,t){return _e.clientChallenge(e,t)}constructor(e="SCRAM-SHA-384",t=!0,s=71){super(e,t,s)}}class we extends me{test(e){return null!==e.authcid}onChallenge(e,t){return n((function*(){return yield _e.scramResponse(e,t,"SHA-512",512)}))()}clientChallenge(e,t){return _e.clientChallenge(e,t)}constructor(e="SCRAM-SHA-512",t=!0,s=72){super(e,t,s)}}class Se extends me{test(e){return null!==e.pass}onChallenge(e){let t="\0";return null!==e.authcid&&(t+=e.authzid),t+="\0",t+=e.pass,J.utf16to8(t)}constructor(e="X-OAUTH2",t=!0,s=30){super(e,t,s)}}class xe extends Error{constructor(e){super(e),this.name="StropheSessionError"}}class Ee{_buildStream(){return Q("open",{xmlns:h.FRAMING,to:this._conn.domain,version:"1.0"})}_checkStreamError(e,t){let s;if(s=e.getElementsByTagNameNS?e.getElementsByTagNameNS(h.STREAM,"error"):e.getElementsByTagName("stream:error"),0===s.length)return!1;const r=s[0];let n="",o="";for(let e=0;e<r.childNodes.length;e++){const t=r.childNodes[e];if(t.nodeType===t.ELEMENT_NODE){if("urn:ietf:params:xml:ns:xmpp-streams"!==t.getAttribute("xmlns"))break}"text"===t.nodeName?o=t.textContent:n=t.nodeName}let i="WebSocket stream error: ";return i+=n||"unknown",o&&(i+=" - "+o),y.error(i),this._conn._changeConnectStatus(t,n),this._conn._doDisconnect(),!0}_reset(){}_connect(){this._closeSocket(),this.socket=new WebSocket(this._conn.service,"xmpp"),this.socket.onopen=()=>this._onOpen(),this.socket.onerror=e=>this._onError(e),this.socket.onclose=e=>this._onClose(e),this.socket.onmessage=e=>this._onInitialMessage(e)}_connect_cb(e){if(this._checkStreamError(e,f.CONNFAIL))return f.CONNFAIL}_handleStreamStart(e){let t=null;const s=e.getAttribute("xmlns");"string"!=typeof s?t="Missing xmlns in <open />":s!==h.FRAMING&&(t="Wrong xmlns in <open />: "+s);const r=e.getAttribute("version");return"string"!=typeof r?t="Missing version in <open />":"1.0"!==r&&(t="Wrong version in <open />: "+r),!t||(this._conn._changeConnectStatus(f.CONNFAIL,t),this._conn._doDisconnect(),!1)}_onInitialMessage(e){if(0===e.data.indexOf("<open ")||0===e.data.indexOf("<?xml")){const t=e.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===t)return;const s=(new DOMParser).parseFromString(t,"text/xml").documentElement;this._conn.xmlInput(s),this._conn.rawInput(e.data),this._handleStreamStart(s)&&this._connect_cb(s)}else if(0===e.data.indexOf("<close ")){const t=(new DOMParser).parseFromString(e.data,"text/xml").documentElement;this._conn.xmlInput(t),this._conn.rawInput(e.data);const s=t.getAttribute("see-other-uri");if(s){const e=this._conn.service;(e.indexOf("wss:")>=0&&s.indexOf("wss:")>=0||e.indexOf("ws:")>=0)&&(this._conn._changeConnectStatus(f.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=s,this._connect())}else this._conn._changeConnectStatus(f.CONNFAIL,"Received closing stream"),this._conn._doDisconnect()}else{this._replaceMessageHandler();const t=this._streamWrap(e.data),s=(new DOMParser).parseFromString(t,"text/xml").documentElement;this._conn._connect_cb(s,null,e.data)}}_replaceMessageHandler(){this.socket.onmessage=e=>this._onMessage(e)}_disconnect(e){if(this.socket&&this.socket.readyState!==WebSocket.CLOSED){e&&this._conn.send(e);const t=Q("close",{xmlns:h.FRAMING});this._conn.xmlOutput(t.tree());const s=oe.serialize(t);this._conn.rawOutput(s);try{this.socket.send(s)}catch(e){y.warn(`Couldn't send <close /> tag. "${e.message}"`)}}setTimeout((()=>this._conn._doDisconnect()),0)}_doDisconnect(){y.debug("WebSockets _doDisconnect was called"),this._closeSocket()}_streamWrap(e){return"<wrapper>"+e+"</wrapper>"}_closeSocket(){if(this.socket)try{this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null,this.socket.close()}catch(e){y.debug(e.message)}this.socket=null}_emptyQueue(){return!0}_onClose(e){this._conn.connected&&!this._conn.disconnecting?(y.error("Websocket closed unexpectedly"),this._conn._doDisconnect()):e&&1006===e.code&&!this._conn.connected&&this.socket?(y.error("Websocket closed unexcectedly"),this._conn._changeConnectStatus(f.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._conn._doDisconnect()):y.debug("Websocket closed")}_no_auth_received(e){y.error("Server did not offer a supported authentication mechanism"),this._conn._changeConnectStatus(f.CONNFAIL,p.NO_AUTH_MECH),null==e||e.call(this._conn),this._conn._doDisconnect()}_onDisconnectTimeout(){}_abortAllRequests(){}_onError(e){y.error("Websocket error "+JSON.stringify(e)),this._conn._changeConnectStatus(f.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._disconnect()}_onIdle(){const e=this._conn._data;if(e.length>0&&!this._conn.paused){for(let t=0;t<e.length;t++)if(null!==e[t]){const s="restart"===e[t]?this._buildStream().tree():e[t];if("restart"===s)throw new Error("Wrong type for stanza");const r=oe.serialize(s);this._conn.xmlOutput(s),this._conn.rawOutput(r),this.socket.send(r)}this._conn._data=[]}}_onMessage(e){let t;const s='<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" />';if(e.data===s)return this._conn.rawInput(s),this._conn.xmlInput(e),void(this._conn.disconnecting||this._conn._doDisconnect());if(0===e.data.search("<open ")){if(t=(new DOMParser).parseFromString(e.data,"text/xml").documentElement,!this._handleStreamStart(t))return}else{const s=this._streamWrap(e.data);t=(new DOMParser).parseFromString(s,"text/xml").documentElement}return this._checkStreamError(t,f.ERROR)?void 0:this._conn.disconnecting&&"presence"===t.firstElementChild.nodeName&&"unavailable"===t.firstElementChild.getAttribute("type")?(this._conn.xmlInput(t),void this._conn.rawInput(oe.serialize(t))):void this._conn._dataRecv(t,e.data)}_onOpen(){y.debug("Websocket open");const e=this._buildStream();this._conn.xmlOutput(e.tree());const t=oe.serialize(e);this._conn.rawOutput(t),this.socket.send(t)}_send(){this._conn.flush()}_sendRestart(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}constructor(e){this._conn=e,this.strip="wrapper";const t=e.service;if(0!==t.indexOf("ws:")&&0!==t.indexOf("wss:")){let s="";"ws"===e.options.protocol&&"https:"!==location.protocol?s+="ws":s+="wss",s+="://"+location.host,0!==t.indexOf("/")?s+=location.pathname+t:s+=t,e.service=s}}}class Ae extends Ee{_setSocket(){this.socket={send:e=>this.worker.port.postMessage(["send",e]),close:()=>this.worker.port.postMessage(["_closeSocket"]),onopen:()=>{},onerror:e=>this._onError(e),onclose:e=>this._onClose(e),onmessage:()=>{},readyState:null}}_connect(){this._setSocket(),this._messageHandler=e=>this._onInitialMessage(e),this.worker.port.start(),this.worker.port.onmessage=e=>this._onWorkerMessage(e),this.worker.port.postMessage(["_connect",this._conn.service,this._conn.jid])}_attach(e){this._setSocket(),this._messageHandler=e=>this._onMessage(e),this._conn.connect_callback=e,this.worker.port.start(),this.worker.port.onmessage=e=>this._onWorkerMessage(e),this.worker.port.postMessage(["_attach",this._conn.service])}_attachCallback(e,t){e===f.ATTACHED?(this._conn.jid=t,this._conn.authenticated=!0,this._conn.connected=!0,this._conn.restored=!0,this._conn._changeConnectStatus(f.ATTACHED)):e===f.ATTACHFAIL&&(this._conn.authenticated=!1,this._conn.connected=!1,this._conn.restored=!1,this._conn._changeConnectStatus(f.ATTACHFAIL))}_disconnect(e){e&&this._conn.send(e);const t=Q("close",{xmlns:h.FRAMING});this._conn.xmlOutput(t.tree());const s=oe.serialize(t);this._conn.rawOutput(s),this.worker.port.postMessage(["send",s]),this._conn._doDisconnect()}_closeSocket(){this.socket.close()}_replaceMessageHandler(){this._messageHandler=e=>this._onMessage(e)}_onWorkerMessage(e){const{data:t}=e,s=t[0];if("_onMessage"===s)this._messageHandler(t[1]);else if(s in this)try{this[s].apply(this,e.data.slice(1))}catch(e){y.error(e)}else if("log"===s){const e={debug:g.DEBUG,info:g.INFO,warn:g.WARN,error:g.ERROR,fatal:g.FATAL},s=t[1],r=t[2];y.log(e[s],r)}else y.error(`Found unhandled service worker message: ${t}`)}constructor(e){super(e),this._conn=e,this.worker=new SharedWorker(this._conn.options.worker,"Strophe XMPP Connection"),this.worker.onerror=e=>{var t;null===(t=console)||void 0===t||t.error(e),y.error(`Shared Worker Error: ${e}`)}}}const Oe={};class Ce{static addConnectionPlugin(e,t){Oe[e]=t}setProtocol(){const e=this.options.protocol||"";this.options.worker?this._proto=new Ae(this):0===this.service.indexOf("ws:")||0===this.service.indexOf("wss:")||0===e.indexOf("ws")?this._proto=new Ee(this):this._proto=new ce(this)}reset(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this._data=[],this._requests=[],this._uniqueId=0}pause(){this.paused=!0}resume(){this.paused=!1}getUniqueId(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return"string"==typeof e||"number"==typeof e?t+":"+e:t+""}addProtocolErrorHandler(e,t,s){this.protocolErrorHandlers[e][t]=s}connect(e,t,s,r,n,o,i,a=3e3){this.jid=e,this.authzid=K(this.jid),this.authcid=i||G(this.jid),this.pass=t,this.scram_keys=null,this.connect_callback=s,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.disconnection_timeout=a,this.domain=W(this.jid),this._changeConnectStatus(f.CONNECTING,null),this._proto._connect(r,n,o)}attach(e,t,s,r,n,o,i){if(this._proto instanceof ce&&"string"==typeof e)return this._proto._attach(e,t,s,r,n,o,i);if(this._proto instanceof Ae&&"function"==typeof e){const t=e;return this._proto._attach(t)}throw new xe('The "attach" method is not available for your connection protocol')}restore(e,t,s,r,n){if(!(this._proto instanceof ce&&this._sessionCachingSupported()))throw new xe('The "restore" method can only be used with a BOSH connection.');this._sessionCachingSupported()&&this._proto._restore(e,t,s,r,n)}_sessionCachingSupported(){if(this._proto instanceof ce){if(!JSON)return!1;try{sessionStorage.setItem("_strophe_","_strophe_"),sessionStorage.removeItem("_strophe_")}catch(e){return!1}return!0}return!1}xmlInput(e){}xmlOutput(e){}rawInput(e){}rawOutput(e){}nextValidRid(e){}send(e){if(null!==e){if(Array.isArray(e))e.forEach((e=>this._queueData(e instanceof oe?e.tree():e)));else{const t=e instanceof oe?e.tree():e;this._queueData(t)}this._proto._send()}}flush(){clearTimeout(this._idleTimeout),this._onIdle()}sendPresence(e,t,s,r){let n=null;const o=e instanceof oe?e.tree():e;let i=o.getAttribute("id");if(i||(i=this.getUniqueId("sendPresence"),o.setAttribute("id",i)),"function"==typeof t||"function"==typeof s){const e=this.addHandler((e=>{n&&this.deleteTimedHandler(n),"error"===e.getAttribute("type")?null==s||s(e):t&&t(e)}),null,"presence",null,i);r&&(n=this.addTimedHandler(r,(()=>(this.deleteHandler(e),null==s||s(null),!1))))}return this.send(o),i}sendIQ(e,t,s,r){let n=null;const o=e instanceof oe?e.tree():e;let i=o.getAttribute("id");if(i||(i=this.getUniqueId("sendIQ"),o.setAttribute("id",i)),"function"==typeof t||"function"==typeof s){const e=this.addHandler((e=>{n&&this.deleteTimedHandler(n);const r=e.getAttribute("type");if("result"===r)null==t||t(e);else{if("error"!==r){const e=new Error(`Got bad IQ type of ${r}`);throw e.name="StropheError",e}null==s||s(e)}}),null,"iq",["error","result"],i);r&&(n=this.addTimedHandler(r,(()=>(this.deleteHandler(e),null==s||s(null),!1))))}return this.send(o),i}_queueData(e){if(null===e||!e.tagName||!e.childNodes){const e=new Error("Cannot queue non-DOMElement.");throw e.name="StropheError",e}this._data.push(e)}_sendRestart(){this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout((()=>this._onIdle()),100)}addTimedHandler(e,t){const s=new he(e,t);return this.addTimeds.push(s),s}deleteTimedHandler(e){this.removeTimeds.push(e)}addHandler(e,t,s,r,n,o,i){const a=new ue(e,t,s,r,n,o,i);return this.addHandlers.push(a),a}deleteHandler(e){this.removeHandlers.push(e);const t=this.addHandlers.indexOf(e);t>=0&&this.addHandlers.splice(t,1)}registerSASLMechanisms(e){this.mechanisms={},(e||[fe,pe,ge,Se,ve,ye,be,je,we]).forEach((e=>this.registerSASLMechanism(e)))}registerSASLMechanism(e){const t=new e;this.mechanisms[t.mechname]=t}disconnect(e){if(this._changeConnectStatus(f.DISCONNECTING,e),e?y.info("Disconnect was called because: "+e):y.debug("Disconnect was called"),this.connected){let e=null;this.disconnecting=!0,this.authenticated&&(e=ee({xmlns:h.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(this.disconnection_timeout,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(e)}else y.debug("Disconnect was called before Strophe connected to the server"),this._proto._abortAllRequests(),this._doDisconnect()}_changeConnectStatus(e,t,s){for(const s in Oe)if(Object.prototype.hasOwnProperty.call(Oe,s)){const r=this[s];if(r.statusChanged)try{r.statusChanged(e,t)}catch(e){y.error(`${s} plugin caused an exception changing status: ${e}`)}}if(this.connect_callback)try{this.connect_callback(e,t,s)}catch(e){j(e),y.error(`User connection callback caused an exception: ${e}`)}}_doDisconnect(e){"number"==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),y.debug("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(f.DISCONNECTED,e),this.connected=!1}_dataRecv(e,t){const s="_reqToData"in this._proto?this._proto._reqToData(e):e;if(null===s)return;for(this.xmlInput!==Ce.prototype.xmlInput&&(s.nodeName===this._proto.strip&&s.childNodes.length?this.xmlInput(s.childNodes[0]):this.xmlInput(s)),this.rawInput!==Ce.prototype.rawInput&&(t?this.rawInput(t):this.rawInput(oe.serialize(s)));this.removeHandlers.length>0;){const e=this.removeHandlers.pop(),t=this.handlers.indexOf(e);t>=0&&this.handlers.splice(t,1)}for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())return void this._doDisconnect();const r=s.getAttribute("type");if(null!==r&&"terminate"===r){if(this.disconnecting)return;let e=s.getAttribute("condition");const t=s.getElementsByTagName("conflict");return null!==e?("remote-stream-error"===e&&t.length>0&&(e="conflict"),this._changeConnectStatus(f.CONNFAIL,e)):this._changeConnectStatus(f.CONNFAIL,p.UNKNOWN_REASON),void this._doDisconnect(e)}F(s,null,(e=>{const t=[];this.handlers=this.handlers.reduce(((s,r)=>{try{!r.isMatch(e)||!this.authenticated&&r.user?s.push(r):(r.run(e)&&s.push(r),t.push(r))}catch(e){y.warn("Removing Strophe handlers due to uncaught exception: "+e.message)}return s}),[]),!t.length&&this.iqFallbackHandler.isMatch(e)&&this.iqFallbackHandler.run(e)}))}_connect_cb(e,t,s){let r;y.debug("_connect_cb was called"),this.connected=!0;try{r="_reqToData"in this._proto?this._proto._reqToData(e):e}catch(e){if(e.name!==p.BAD_FORMAT)throw e;this._changeConnectStatus(f.CONNFAIL,p.BAD_FORMAT),this._doDisconnect(p.BAD_FORMAT)}if(!r)return;this.xmlInput!==Ce.prototype.xmlInput&&(r.nodeName===this._proto.strip&&r.childNodes.length?this.xmlInput(r.childNodes[0]):this.xmlInput(r)),this.rawInput!==Ce.prototype.rawInput&&(s?this.rawInput(s):this.rawInput(oe.serialize(r)));if(this._proto._connect_cb(r)===f.CONNFAIL)return;let n;if(n=r.getElementsByTagNameNS?r.getElementsByTagNameNS(h.STREAM,"features").length>0:r.getElementsByTagName("stream:features").length>0||r.getElementsByTagName("features").length>0,!n)return void this._proto._no_auth_received(t);const o=Array.from(r.getElementsByTagName("mechanism")).map((e=>this.mechanisms[e.textContent])).filter((e=>e));0!==o.length||0!==r.getElementsByTagName("auth").length?!1!==this.do_authentication&&this.authenticate(o):this._proto._no_auth_received(t)}sortMechanismsByPriority(e){for(let t=0;t<e.length-1;++t){let s=t;for(let r=t+1;r<e.length;++r)e[r].priority>e[s].priority&&(s=r);if(s!==t){const r=e[t];e[t]=e[s],e[s]=r}}return e}authenticate(e){this._attemptSASLAuth(e)||this._attemptLegacyAuth()}_attemptSASLAuth(e){e=this.sortMechanismsByPriority(e||[]);let t=!1;for(let s=0;s<e.length;++s){if(!e[s].test(this))continue;this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=e[s],this._sasl_mechanism.onStart(this);const r=Q("auth",{xmlns:h.SASL,mechanism:this._sasl_mechanism.mechname});if(this._sasl_mechanism.isClientFirst){const e=this._sasl_mechanism.clientChallenge(this);r.t(btoa(e))}this.send(r.tree()),t=!0;break}return t}_sasl_challenge_cb(e){return n((function*(){const t=atob(H(e)),s=yield this._sasl_mechanism.onChallenge(this,t),r=Q("response",{xmlns:h.SASL});return s&&r.t(btoa(s)),this.send(r.tree()),!0})).call(this)}_attemptLegacyAuth(){null===G(this.jid)?(this._changeConnectStatus(f.CONNFAIL,p.MISSING_JID_NODE),this.disconnect(p.MISSING_JID_NODE)):(this._changeConnectStatus(f.AUTHENTICATING,null),this._addSysHandler(this._onLegacyAuthIQResult.bind(this),null,null,null,"_auth_1"),this.send(Z({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:h.AUTH}).c("username",{}).t(G(this.jid)).tree()))}_onLegacyAuthIQResult(){const e="string"==typeof this.pass?this.pass:"",t=Z({type:"set",id:"_auth_2"}).c("query",{xmlns:h.AUTH}).c("username",{}).t(G(this.jid)).up().c("password").t(e);return V(this.jid)||(this.jid=K(this.jid)+"/strophe"),t.up().c("resource",{}).t(V(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(t.tree()),!1}_sasl_success_cb(e){if(this._sasl_data["server-signature"]){let t;const s=/([a-z]+)=([^,]+)(,|$)/,r=atob(H(e)).match(s);if("v"===r[1]&&(t=r[2]),t!==this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}y.info("SASL authentication succeeded."),this._sasl_data.keys&&(this.scram_keys=this._sasl_data.keys),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);const t=[],s=(e,t)=>{for(;e.length;)this.deleteHandler(e.pop());return this._onStreamFeaturesAfterSASL(t),!1};return t.push(this._addSysHandler((e=>s(t,e)),null,"stream:features",null,null)),t.push(this._addSysHandler((e=>s(t,e)),h.STREAM,"features",null,null)),this._sendRestart(),!1}_onStreamFeaturesAfterSASL(e){this.features=e;for(let t=0;t<e.childNodes.length;t++){const s=e.childNodes[t];"bind"===s.nodeName&&(this.do_bind=!0),"session"===s.nodeName&&(this.do_session=!0)}return this.do_bind?(this.options.explicitResourceBinding?this._changeConnectStatus(f.BINDREQUIRED,null):this.bind(),!1):(this._changeConnectStatus(f.AUTHFAIL,null),!1)}bind(){if(!this.do_bind)return void y.info('Connection.prototype.bind called but "do_bind" is false');this._addSysHandler(this._onResourceBindResultIQ.bind(this),null,null,null,"_bind_auth_2");const e=V(this.jid);e?this.send(Z({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:h.BIND}).c("resource",{}).t(e).tree()):this.send(Z({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:h.BIND}).tree())}_onResourceBindResultIQ(e){if("error"===e.getAttribute("type")){y.warn("Resource binding failed.");let t;return e.getElementsByTagName("conflict").length>0&&(t=p.CONFLICT),this._changeConnectStatus(f.AUTHFAIL,t,e),!1}const t=e.getElementsByTagName("bind");if(!(t.length>0))return y.warn("Resource binding failed."),this._changeConnectStatus(f.AUTHFAIL,null,e),!1;{const e=t[0].getElementsByTagName("jid");e.length>0&&(this.authenticated=!0,this.jid=H(e[0]),this.do_session?this._establishSession():this._changeConnectStatus(f.CONNECTED,null))}}_establishSession(){if(!this.do_session)throw new Error(`Connection.prototype._establishSession called but apparently ${h.SESSION} wasn't advertised by the server`);this._addSysHandler(this._onSessionResultIQ.bind(this),null,null,null,"_session_auth_2"),this.send(Z({type:"set",id:"_session_auth_2"}).c("session",{xmlns:h.SESSION}).tree())}_onSessionResultIQ(e){if("result"===e.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(f.CONNECTED,null);else if("error"===e.getAttribute("type"))return this.authenticated=!1,y.warn("Session creation failed."),this._changeConnectStatus(f.AUTHFAIL,null,e),!1;return!1}_sasl_failure_cb(e){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(f.AUTHFAIL,null,e),!1}_auth2_cb(e){return"result"===e.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(f.CONNECTED,null)):"error"===e.getAttribute("type")&&(this._changeConnectStatus(f.AUTHFAIL,null,e),this.disconnect("authentication failed")),!1}_addSysTimedHandler(e,t){const s=new he(e,t);return s.user=!1,this.addTimeds.push(s),s}_addSysHandler(e,t,s,r,n){const o=new ue(e,t,s,r,n);return o.user=!1,this.addHandlers.push(o),o}_onDisconnectTimeout(){return y.debug("_onDisconnectTimeout was called"),this._changeConnectStatus(f.CONNTIMEOUT,null),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1}_onIdle(){for(;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;){const e=this.removeTimeds.pop(),t=this.timedHandlers.indexOf(e);t>=0&&this.timedHandlers.splice(t,1)}const e=(new Date).getTime(),t=[];for(let s=0;s<this.timedHandlers.length;s++){const r=this.timedHandlers[s];if(this.authenticated||!r.user){r.lastCalled+r.period-e<=0?r.run()&&t.push(r):t.push(r)}}this.timedHandlers=t,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout((()=>this._onIdle()),100))}constructor(e,t={}){this.service=e,this.options=t,this.setProtocol(),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_bind=!1,this.do_session=!1,this.mechanisms={},this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.protocolErrorHandlers={HTTP:{},websocket:{}},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout((()=>this._onIdle()),100),O(this.options.cookies),this.registerSASLMechanisms(this.options.mechanisms),this.iqFallbackHandler=new ue((e=>this.send(Z({type:"error",id:e.getAttribute("id")}).c("error",{type:"cancel"}).c("service-unavailable",{xmlns:h.STANZAS}))),null,"iq",["get","set"]);for(const e in Oe)if(Object.prototype.hasOwnProperty.call(Oe,e)){const t=function(){};t.prototype=Oe[e],this[e]=new t,this[e].init(this)}}}class Te extends String{}var $e=new WeakMap,ke=new WeakMap,Me=new WeakMap;class Ie extends oe{static unsafeXML(e){return new Te(e)}static toElement(e,t){const s=M(e),r=I(s);if(r)throw new Error(`Parser Error: ${r}`);const n=k(P(s));if(["message","iq","presence"].includes(n.nodeName.toLowerCase())&&"jabber:client"!==n.namespaceURI&&"jabber:server"!==n.namespaceURI){const e=`Invalid namespaceURI ${n.namespaceURI}`;if(t)throw new Error(e);y.error(e)}return n}buildTree(){return Ie.toElement(this.toString(),!0)}toString(){return l(this,$e,i(this,$e)||i(this,ke).reduce(((e,t,s)=>{const r=i(this,Me).length>s?i(this,Me)[s]:"";return e+t+(Array.isArray(r)?r.map((e=>e instanceof Te||e instanceof oe?e:B(e.toString()))).join(""):r instanceof Te||r instanceof oe?r:B((null!=r?r:"").toString()))}),"").trim()),i(this,$e)}constructor(e,t){super("stanza"),a(this,$e,{writable:!0,value:void 0}),a(this,ke,{writable:!0,value:void 0}),a(this,Me,{writable:!0,value:void 0}),l(this,ke,e),l(this,Me,t)}}function Pe(e,...t){return new Ie(e,t)}const Ne=u(c({VERSION:"3.0.0",get TIMEOUT(){return ce.getTimeoutMultplier()},set TIMEOUT(e){ce.setTimeoutMultiplier(e)},get SECONDARY_TIMEOUT(){return ce.getSecondaryTimeoutMultplier()},set SECONDARY_TIMEOUT(e){ce.setSecondaryTimeoutMultiplier(e)}},Y,y),{Request:ae,Bosh:ce,Websocket:Ee,WorkerWebsocket:Ae,Connection:Ce,Handler:ue,SASLAnonymous:fe,SASLPlain:ve,SASLSHA1:ye,SASLSHA256:be,SASLSHA384:je,SASLSHA512:we,SASLOAuthBearer:ge,SASLExternal:pe,SASLXOAuth2:Se,Stanza:Ie,Builder:oe,ElementType:v,ErrorCondition:p,LogLevel:g,NS:h,SASLMechanism:me,Status:f,TimedHandler:he,XHTML:u(c({},m),{validTag:D,validCSS:z,validAttribute:R}),serialize:e=>oe.serialize(e),setLogLevel(e){y.setLogLevel(e)},addNamespace(e,t){Ne.NS[e]=t},addConnectionPlugin(e,t){Ce.addConnectionPlugin(e,t)}});globalThis.$build=Q,globalThis.$iq=Z,globalThis.$msg=X,globalThis.$pres=ee,globalThis.Strophe=Ne,globalThis.stx=Pe;const De=Ie.toElement;globalThis.toStanza=Ie.toElement},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":e=>{"use strict";var t=[];function s(e){for(var s=-1,r=0;r<t.length;r++)if(t[r].identifier===e){s=r;break}return s}function r(e,r){for(var o={},i=[],a=0;a<e.length;a++){var l=e[a],d=r.base?l[0]+r.base:l[0],c=o[d]||0,u="".concat(d," ").concat(c);o[d]=c+1;var h=s(u),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(m);else{var f=n(m,r);r.byIndex=a,t.splice(a,0,{identifier:u,updater:f,references:1})}i.push(u)}return i}function n(e,t){var s=t.domAPI(t);s.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,n){var o=r(e=e||[],n=n||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var a=s(o[i]);t[a].references--}for(var l=r(e,n),d=0;d<o.length;d++){var c=s(o[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=l}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":e=>{"use strict";var t={};e.exports=function(e,s){var r=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(s)}},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":(e,t,s)=>{"use strict";e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var r="";s.supports&&(r+="@supports (".concat(s.supports,") {")),s.media&&(r+="@media ".concat(s.media," {"));var n=void 0!==s.layer;n&&(r+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),r+=s.css,n&&(r+="}"),s.media&&(r+="}"),s.supports&&(r+="}");var o=s.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},"./src/headless/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{BaseMessage:()=>u.default,Bookmark:()=>f.Bookmark,Bookmarks:()=>f.Bookmarks,ChatBox:()=>p.ChatBox,EmojiPicker:()=>m.EmojiPicker,MAMPlaceholderMessage:()=>g.MAMPlaceholderMessage,MUC:()=>v.MUC,MUCMessage:()=>v.MUCMessage,MUCMessages:()=>v.MUCMessages,MUCOccupant:()=>v.MUCOccupant,MUCOccupants:()=>v.MUCOccupants,Message:()=>p.Message,Messages:()=>p.Messages,ModelWithMessages:()=>h.default,Presence:()=>_.Presence,Presences:()=>_.Presences,Profile:()=>y.Profile,RosterContact:()=>_.RosterContact,RosterContacts:()=>_.RosterContacts,RosterFilter:()=>_.RosterFilter,VCard:()=>b.VCard,VCards:()=>b.VCards,_converse:()=>l._converse,api:()=>l.api,constants:()=>S,converse:()=>c.default,default:()=>x,errors:()=>w,i18n:()=>l.i18n,log:()=>a.default,parsers:()=>l.parsers,u:()=>d.default});var r=s("./node_modules/dayjs/dayjs.min.js"),n=s.n(r),o=s("./node_modules/dayjs/plugin/advancedFormat.js"),i=s.n(o),a=s("./src/log/index.js"),l=s("./src/headless/shared/index.js"),d=s("./src/headless/utils/index.js"),c=s("./src/headless/shared/api/public.js"),u=s("./src/headless/shared/message.js"),h=s("./src/headless/shared/model-with-messages.js"),m=s("./src/headless/plugins/emoji/index.js"),f=s("./src/headless/plugins/bookmarks/index.js"),p=(s("./src/headless/plugins/blocklist/index.js"),s("./src/headless/plugins/bosh/index.js"),s("./src/headless/plugins/caps/index.js"),s("./src/headless/plugins/chat/index.js")),g=(s("./src/headless/plugins/chatboxes/index.js"),s("./src/headless/plugins/disco/index.js"),s("./src/headless/plugins/adhoc/index.js"),s("./src/headless/plugins/headlines/index.js"),s("./src/headless/plugins/mam/index.js")),v=s("./src/headless/plugins/muc/index.js"),_=(s("./src/headless/plugins/ping/index.js"),s("./src/headless/plugins/pubsub/index.js"),s("./src/headless/plugins/roster/index.js")),y=(s("./src/headless/plugins/smacks/index.js"),s("./src/headless/plugins/status/index.js")),b=s("./src/headless/plugins/vcard/index.js"),j=s("./src/headless/plugins/muc/constants.js"),w=s("./src/headless/shared/errors.js");n().extend(i());const S=Object.assign({},l.constants,j);Object.assign(l._converse.constants,S);const x=c.default},"./src/headless/plugins/adhoc/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s("./src/log/index.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),a=s("./src/headless/plugins/adhoc/utils.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const{Strophe:h,$iq:m,u:f,stx:p}=i.default.env,g={adhoc:{getCommands:e=>d((function*(){try{return(0,a.parseForCommands)(yield o.default.disco.items(e,h.NS.ADHOC))}catch(t){return null===t?r.default.error(`Error: timeout while fetching ad-hoc commands for ${e}`):(r.default.error(`Error while fetching ad-hoc commands for ${e}`),r.default.error(t)),[]}}))(),fetchCommandForm:(e,t)=>d((function*(){const s=m({type:"set",to:e}).c("command",{xmlns:h.NS.ADHOC,action:"execute",node:t});return(0,a.parseCommandResult)(yield o.default.sendIQ(s))}))(),runCommand:(e,t,s,i,l)=>d((function*(){var d;const m=p`<iq type="set" to="${e}" xmlns="jabber:client">
                    <command sessionid="${t}" node="${s}" action="${i}" xmlns="${h.NS.ADHOC}">
                        ${["cancel","prev"].includes(i)?"":p`
                            <x xmlns="${h.NS.XFORM}" type="submit">
                                ${l.map((({name:e,value:t})=>p`<field var="${e}"><value>${t}</value></field>`))}
                            </x>`}
                    </command>
                </iq>`,g=yield o.default.sendIQ(m,null,!1);if(null===g){r.default.warn("A timeout occurred while trying to run an ad-hoc command");const{__:e}=n.default;return{status:"error",note:e("A timeout occurred")}}f.isErrorStanza(g)&&(r.default.error("Error while trying to execute an ad-hoc command"),r.default.error(g));const v=g.querySelector("command"),_=null==v?void 0:v.getAttribute("status");return u(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){c(e,t,s[t])}))}return e}({status:_},"executing"===_?(0,a.parseCommandResult)(g):{}),{note:null===(d=g.querySelector("note"))||void 0===d?void 0:d.textContent})}))()}}},"./src/headless/plugins/adhoc/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/plugins/adhoc/api.js"),n=s("./src/headless/shared/api/public.js");const{Strophe:o}=n.default.env;o.addNamespace("ADHOC","http://jabber.org/protocol/commands"),n.default.plugins.add("converse-adhoc",{dependencies:["converse-disco"],initialize(){Object.assign(this._converse.api,r.default)}})},"./src/headless/plugins/adhoc/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{parseCommandResult:()=>h,parseForCommands:()=>u});var r=s("./node_modules/sizzle/dist/sizzle.js"),n=s.n(r),o=s("./src/headless/shared/api/public.js"),i=s("./src/headless/shared/parsers.js");function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const{Strophe:d,u:c}=o.default.env;function u(e){return n()(`query[xmlns="${d.NS.DISCO_ITEMS}"][node="${d.NS.ADHOC}"] item`,e).map(c.getAttributes)}function h(e){var t;const s=n()(`command[xmlns="${d.NS.ADHOC}"]`,e).pop(),r=s.querySelector("note");var o;return l(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){a(e,t,s[t])}))}return e}({},(0,i.parseXForm)(e)),{sessionid:s.getAttribute("sessionid"),note:r?{text:r.textContent,type:r.getAttribute("type")}:null,actions:Array.from(null!==(o=null===(t=s.querySelector("actions"))||void 0===t?void 0:t.children)&&void 0!==o?o:[]).map((e=>e.nodeName.toLowerCase()))})}},"./src/headless/plugins/blocklist/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/shared/api/promise.js"),n=s("./src/headless/plugins/blocklist/utils.js");function o(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function i(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var i=e.apply(t,s);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)}))}}const{waitUntil:a}=r.default,l={blocklist:{get:()=>i((function*(){return yield a("blocklistInitialized")}))(),add:(e,t=!0)=>i((function*(){const s=yield a("blocklistInitialized"),r=Array.isArray(e)?e:[e];return t&&(yield(0,n.sendBlockStanza)(r)),r.forEach((e=>s.create({jid:e}))),s}))(),remove:(e,t=!0)=>i((function*(){const s=yield a("blocklistInitialized"),r=Array.isArray(e)?e:[e];return t&&(yield(0,n.sendUnblockStanza)(r)),r.forEach((e=>{var t;return null===(t=s.get(e))||void 0===t?void 0:t.destroy()})),s.remove(r),s}))()}}},"./src/headless/plugins/blocklist/collection.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),n=s("./node_modules/@converse/skeletor/dist/skeletor.js"),o=s("./src/log/index.js"),i=s("./src/headless/shared/_converse.js"),a=s("./src/headless/utils/storage.js"),l=s("./src/headless/shared/api/index.js"),d=s("./src/headless/shared/api/public.js"),c=s("./src/headless/plugins/blocklist/model.js");function u(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function h(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){u(o,r,n,i,a,"next",e)}function a(e){u(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{stx:m,u:f}=d.default.env;class p extends n.Collection{get idAttribute(){return"jid"}initialize(){return h((function*(){const{session:e}=i.default,t=`converse.blocklist-${e.get("bare_jid")}`;this.fetched_flag=`${t}-fetched`,(0,a.initStorage)(this,t),this.on("add",this.rejectContactRequest),yield this.fetchBlocklist(),l.default.trigger("blocklistInitialized",this)})).call(this)}rejectContactRequest(e){return h((function*(){const t=(yield l.default.waitUntil("rosterContactsFetched")).get(e.get("jid"));if(null==t?void 0:t.get("requesting")){const e=yield l.default.chats.get(t.get("jid"));null==e||e.close(),t.unauthorize().destroy()}}))()}fetchBlocklist(){const e=(0,r.getOpenPromise)();return window.sessionStorage.getItem(this.fetched_flag)?this.fetch({success:()=>e.resolve(),error:()=>e.resolve()}):this.fetchBlocklistFromServer(e),e}fetchBlocklistFromServer(e){return h((function*(){const t=m`<iq xmlns="jabber:client"
            type="get"
            id="${f.getUniqueId()}"><blocklist xmlns="urn:xmpp:blocking"/></iq>`;try{this.onBlocklistReceived(e,yield l.default.sendIQ(t))}catch(t){return o.default.error(t),void e.resolve()}})).call(this)}onBlocklistReceived(e,t){return h((function*(){if(Array.from(t.querySelectorAll("blocklist item")).forEach((e=>{const t=e.getAttribute("jid"),s=this.get(t);s?s.save({jid:t}):this.create({jid:t})})),window.sessionStorage.setItem(this.fetched_flag,"true"),void 0!==e)return e.resolve()})).call(this)}constructor(){super(),this.model=c.default}}const g=p},"./src/headless/plugins/blocklist/index.js":(e,t,s)=>{"use strict";s.r(t);s("./src/headless/plugins/blocklist/plugin.js")},"./src/headless/plugins/blocklist/model.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/shared/api/public.js");const{Strophe:o}=n.default.env;class i extends r.Model{get idAttribute(){return"jid"}getDisplayName(){return o.xmlunescape(this.get("name"))}}const a=i},"./src/headless/plugins/blocklist/plugin.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/api/public.js"),i=s("./src/log/index.js"),a=s("./src/headless/plugins/blocklist/collection.js"),l=s("./src/headless/plugins/blocklist/model.js"),d=s("./src/headless/plugins/blocklist/api.js"),c=s("./src/headless/plugins/roster/utils.js");function u(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function h(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){u(o,r,n,i,a,"next",e)}function a(e){u(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{Strophe:m,sizzle:f}=o.default.env;m.addNamespace("BLOCKING","urn:xmpp:blocking"),o.default.plugins.add("converse-blocklist",{dependencies:["converse-disco"],initialize(){const e={Blocklist:a.default,BlockedEntity:l.default};Object.assign(r.default.exports,e),Object.assign(n.default,d.default),n.default.promises.add(["blocklistInitialized"]),n.default.listen.on("cachedRoster",(e=>h((function*(){const t=r.default.session.get("domain");if(yield n.default.disco.supports(m.NS.BLOCKING,t)){const t=yield n.default.blocklist.get();e.filter((e=>e.get("requesting"))).forEach((e=>h((function*(){t.get(e.get("jid"))&&((0,c.rejectPresenceSubscription)(e.get("jid")),e.destroy())}))()))}}))())),n.default.listen.on("getErrorAttributesForMessage",((e,t)=>{if(e.errors.find((e=>"blocked"===e.name&&e.xmlns===`${m.NS.BLOCKING}:errors`))){const{__:e}=r.default;t.error=e("You are blocked from sending messages.")}return t})),n.default.listen.on("connected",(()=>{n.default.connection.get().addHandler((e=>{const t=r.default.session.get("bare_jid"),s=e.getAttribute("from");if(m.getBareJidFromJid(null!=s?s:t)!=t)return i.default.warn(`Received a blocklist push stanza from a suspicious JID ${s}`),!0;const o=f(`block[xmlns="${m.NS.BLOCKING}"] item`,e).map((e=>e.getAttribute("jid")));o.length&&n.default.blocklist.add(o,!1);const a=f(`unblock[xmlns="${m.NS.BLOCKING}"] item`,e).map((e=>e.getAttribute("jid")));return a.length&&n.default.blocklist.remove(a,!1),!0}),m.NS.BLOCKING,"iq","set")})),n.default.listen.on("clearSession",(()=>{const{state:e}=r.default;e.blocklist&&(e.blocklist.clearStore({silent:!0}),window.sessionStorage.removeItem(e.blocklist.fetched_flag),delete e.blocklist)})),n.default.listen.on("discoInitialized",(()=>h((function*(){const e=r.default.session.get("domain");(yield n.default.disco.supports(m.NS.BLOCKING,e))&&(r.default.state.blocklist=new r.default.exports.Blocklist)}))()))}})},"./src/headless/plugins/blocklist/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{sendBlockStanza:()=>u,sendUnblockStanza:()=>c});var r=s("./src/headless/shared/api/public.js"),n=s("./src/headless/shared/api/send.js");function o(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function i(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var i=e.apply(t,s);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)}))}}const{Strophe:a,stx:l,u:d}=r.default.env;function c(e){return i((function*(){const t=Array.isArray(e)?e:[e],s=l`
        <iq xmlns="jabber:client" type="set" id="${d.getUniqueId()}">
            <unblock xmlns="${a.NS.BLOCKING}">
                ${t.map((e=>l`<item jid="${e}"/>`))}
            </unblock>
        </iq>`;yield n.default.sendIQ(s)}))()}function u(e){return i((function*(){const t=Array.isArray(e)?e:[e],s=l`
        <iq xmlns="jabber:client" type="set" id="${d.getUniqueId()}">
            <block xmlns="${a.NS.BLOCKING}">
                ${t.map((e=>l`<item jid="${e}"/>`))}
            </block>
        </iq>`;yield n.default.sendIQ(s)}))()}},"./src/headless/plugins/bookmarks/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});s("./src/headless/shared/_converse.js");var r=s("./src/headless/shared/api/promise.js");function n(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function o(e){return function(){var t=this,s=arguments;return new Promise((function(r,o){var i=e.apply(t,s);function a(e){n(i,r,o,a,l,"next",e)}function l(e){n(i,r,o,a,l,"throw",e)}a(void 0)}))}}const{waitUntil:i}=r.default,a={bookmarks:{set(e){return o((function*(e,t=!0,s={}){return(yield i("bookmarksInitialized")).setBookmark(e,t,s)})).apply(this,arguments)},get:e=>o((function*(){return(yield i("bookmarksInitialized")).get(e)}))()}}},"./src/headless/plugins/bookmarks/collection.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),o=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./node_modules/@converse/openpromise/dist/openpromise.js"),a=s("./src/headless/plugins/bookmarks/model.js"),l=s("./src/headless/shared/_converse.js"),d=s("./src/headless/shared/api/index.js"),c=s("./src/headless/shared/api/public.js"),u=s("./src/headless/shared/parsers.js"),h=s("./src/log/index.js"),m=s("./src/headless/utils/storage.js"),f=s("./src/headless/plugins/bookmarks/parsers.js");s("./src/headless/plugins/muc/index.js");function p(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function g(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){p(o,r,n,i,a,"next",e)}function a(e){p(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{Strophe:v,stx:_}=c.default.env;class y extends o.Collection{get idAttribute(){return"jid"}initialize(){return g((function*(){this.on("add",(e=>this.openBookmarkedRoom(e).then((e=>this.markRoomAsBookmarked(e))).catch((e=>h.default.fatal(e))))),this.on("remove",this.leaveRoom,this),this.on("change:autojoin",this.onAutoJoinChanged,this),this.on("remove",((e,t)=>this.sendBookmarkStanza(t)),this);const{session:e}=l.default,t=`converse.room-bookmarks${e.get("bare_jid")}`;this.fetched_flag=t+"fetched",(0,m.initStorage)(this,t),yield this.fetchBookmarks(),d.default.trigger("bookmarksInitialized",this)})).call(this)}static checkBookmarksSupport(){return g((function*(){const e=l.default.session.get("bare_jid");if(!e)return!1;const t=yield d.default.disco.getIdentity("pubsub","pep",e);return d.default.settings.get("allow_public_bookmarks")?!!t:d.default.disco.supports(v.NS.PUBSUB+"#publish-options",e)}))()}openBookmarkedRoom(e){return g((function*(){if(d.default.settings.get("muc_respect_autojoin")&&e.get("autojoin")){(yield d.default.rooms.create(e.get("jid"),{nick:e.get("nick"),password:e.get("password")})).maybeShow()}return e}))()}fetchBookmarks(){const e=(0,i.getOpenPromise)();return window.sessionStorage.getItem(this.fetched_flag)?this.fetch({success:()=>e.resolve(),error:()=>e.resolve()}):this.fetchBookmarksFromServer(e),e}setBookmark(e,t=!0,s={}){if(!e.jid)return h.default.warn("No JID provided for setBookmark");let r=!1,n=this.get(e.jid);if(n){Object.keys(e).reduce(((t,s)=>{var r,o;return t||(null!==(r=e[s])&&void 0!==r?r:"")!==(null!==(o=n.attributes[s])&&void 0!==o?o:"")}),!1)&&(n.save(e,s),r=!0)}else t&&(n=this.create(e,s),r=!0);r&&this.sendBookmarkStanza(n).catch((e=>this.onBookmarkError(e)))}getPublishedItems(e,t){if(e===v.NS.BOOKMARKS2){var s;const e=null!==(s=t.get("extensions"))&&void 0!==s?s:[];return _`<item id="${t.get("jid")}">
                        <conference xmlns="${v.NS.BOOKMARKS2}"
                                name="${t.get("name")||r.nothing}"
                                autojoin="${t.get("autojoin")}">
                            ${t.get("nick")?_`<nick>${t.get("nick")}</nick>`:""}
                            ${t.get("password")?_`<password>${t.get("password")}</password>`:""}
                        ${e.length?_`<extensions>${e.map((e=>n.Stanza.fromString(e)))}</extensions>`:""}
                        </conference>
                    </item>`}return _`<item id="current">
                <storage xmlns="${v.NS.BOOKMARKS}">
                ${this.map((e=>_`<conference name="${e.get("name")}" autojoin="${e.get("autojoin")}"
                        jid="${e.get("jid")}">
                        ${e.get("nick")?_`<nick>${e.get("nick")}</nick>`:""}
                        ${e.get("password")?_`<password>${e.get("password")}</password>`:""}
                    </conference>`))}
                </storage>
            </item>`}sendBookmarkStanza(e){return g((function*(){const t=l.default.session.get("bare_jid"),s=(yield d.default.disco.supports(`${v.NS.BOOKMARKS2}#compat`,t))?v.NS.BOOKMARKS2:v.NS.BOOKMARKS,r=yield d.default.disco.supports(`${v.NS.PUBSUB}#config-node-max`,t);return d.default.pubsub.publish(null,s,this.getPublishedItems(s,e),{persist_items:!0,max_items:r?"max":9999,send_last_published_item:"never",access_model:"whitelist"})})).call(this)}onBookmarkError(e){h.default.error("Error while trying to add bookmark"),h.default.error(e)}fetchBookmarksFromServer(e){return g((function*(){const t=l.default.session.get("bare_jid"),s=(yield d.default.disco.supports(`${v.NS.BOOKMARKS2}#compat`,t))?v.NS.BOOKMARKS2:v.NS.BOOKMARKS,r=_`
            <iq type="get" from="${d.default.connection.get().jid}" xmlns="jabber:client">
                <pubsub xmlns="${v.NS.PUBSUB}">
                    <items node="${s}"/>
                </pubsub>
            </iq>`;d.default.sendIQ(r).then((t=>this.onBookmarksReceived(e,t))).catch((t=>this.onBookmarksReceivedError(e,t)))})).call(this)}markRoomAsBookmarked(e){const{chatboxes:t}=l.default.state,s=t.get(e.get("jid"));null==s||s.save("bookmarked",!0)}onAutoJoinChanged(e){e.get("autojoin")?this.openBookmarkedRoom(e):this.leaveRoom(e)}leaveRoom(e){return g((function*(){const t=yield d.default.rooms.get(e.get("jid"));null==t||t.close()}))()}setBookmarksFromStanza(e){return g((function*(){(yield(0,f.parseStanzaForBookmarks)(e)).forEach((e=>{const t=this.get(e.jid);t?t.save(e):this.create(e)}))})).call(this)}onBookmarksReceived(e,t){return g((function*(){if(yield this.setBookmarksFromStanza(t),window.sessionStorage.setItem(this.fetched_flag,"true"),void 0!==e)return e.resolve()})).call(this)}onBookmarksReceivedError(e,t){return g((function*(){if(null===t){const{__:t}=l.default;h.default.error("Error: timeout while fetching bookmarks"),d.default.alert("error",t("Timeout Error"),[t("The server did not return your bookmarks within the allowed time. You can reload the page to request them again.")]),null==e||e.reject(new Error("Could not fetch bookmarks"))}else{const{errors:s}=c.default.env;(yield(0,u.parseErrorStanza)(t))instanceof s.ItemNotFoundError?(window.sessionStorage.setItem(this.fetched_flag,"true"),null==e||e.resolve()):(h.default.error("Error while fetching bookmarks"),t&&h.default.error(t),null==e||e.reject(new Error("Could not fetch bookmarks")))}})).call(this)}getUnopenedBookmarks(){return g((function*(){yield d.default.waitUntil("bookmarksInitialized"),yield d.default.waitUntil("chatBoxesFetched");const{chatboxes:e}=l.default.state;return this.filter((t=>!e.get(t.get("jid"))))})).call(this)}constructor(){super([],{comparator:e=>e.get("name").toLowerCase()}),this.model=a.default}}const b=y},"./src/headless/plugins/bookmarks/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{Bookmark:()=>r.default,Bookmarks:()=>n.default});var r=s("./src/headless/plugins/bookmarks/model.js"),n=s("./src/headless/plugins/bookmarks/collection.js");s("./src/headless/plugins/bookmarks/plugin.js")},"./src/headless/plugins/bookmarks/model.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/shared/api/public.js");const{Strophe:o}=n.default.env;class i extends r.Model{get idAttribute(){return"jid"}getDisplayName(){return o.xmlunescape(this.get("name"))}}const a=i},"./src/headless/plugins/bookmarks/parsers.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{parseStanzaForBookmarks:()=>d});var r=s("./src/headless/shared/api/public.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{Strophe:a,sizzle:l}=r.default.env;function d(e){return(t=function*(){let t,s;const r=n.default.session.get("bare_jid");return(yield o.default.disco.supports(`${a.NS.BOOKMARKS2}#compat`,r))?(t=a.NS.BOOKMARKS2,s=`items[node="${t}"] item conference`):(t=a.NS.BOOKMARKS,s=`items[node="${t}"] item storage[xmlns="${t}"] conference`),l(s,e).map((e=>{var s,r,n;const o=t===a.NS.BOOKMARKS2?e.parentElement.getAttribute("id"):e.getAttribute("jid");var i,l,d;return{jid:o,name:e.getAttribute("name")||o,autojoin:["1","true"].includes(e.getAttribute("autojoin")),nick:null!==(i=null===(s=e.querySelector("nick"))||void 0===s?void 0:s.textContent)&&void 0!==i?i:"",password:null!==(l=null===(r=e.querySelector("password"))||void 0===r?void 0:r.textContent)&&void 0!==l?l:"",extensions:Array.from(null!==(d=null===(n=e.querySelector("extensions"))||void 0===n?void 0:n.children)&&void 0!==d?d:[]).map((e=>e.outerHTML))}}))},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))})();var t}},"./src/headless/plugins/bookmarks/plugin.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/plugins/bookmarks/model.js"),n=s("./src/headless/plugins/bookmarks/collection.js"),o=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/plugins/bookmarks/utils.js"),d=(s("./src/headless/plugins/muc/index.js"),s("./src/log/index.js")),c=s("./src/headless/plugins/bookmarks/api.js");function u(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function h(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){u(o,r,n,i,a,"next",e)}function a(e){u(o,r,n,i,a,"throw",e)}i(void 0)}))}}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{Strophe:f}=a.default.env;f.addNamespace("BOOKMARKS","storage:bookmarks"),f.addNamespace("BOOKMARKS2","urn:xmpp:bookmarks:1"),a.default.plugins.add("converse-bookmarks",{dependencies:["converse-chatboxes","converse-muc"],initialize(){i.default.settings.extend({allow_bookmarks:!0,allow_public_bookmarks:!1,muc_respect_autojoin:!0}),i.default.promises.add("bookmarksInitialized"),Object.assign(i.default,c.default);const e={Bookmark:r.default,Bookmarks:n.default};Object.assign(o.default,e),Object.assign(o.default.exports,e),i.default.listen.on("getNicknameForMUC",((e,t)=>t||(0,l.getNicknameFromBookmark)(e.get("jid")))),i.default.listen.on("parseMUCPresence",((e,t)=>(t.is_self&&t.codes.includes("303")&&i.default.bookmarks.get(t.muc_jid).then((e=>{e||d.default.warn("parseMUCPresence: no bookmark returned");const{nick:s,muc_jid:r}=t;var n,o,a,l;i.default.bookmarks.set({jid:r,nick:s,autojoin:null===(n=null==e?void 0:e.get("autojoin"))||void 0===n||n,password:null!==(o=null==e?void 0:e.get("password"))&&void 0!==o?o:"",name:null!==(a=null==e?void 0:e.get("name"))&&void 0!==a?a:"",extensions:null!==(l=null==e?void 0:e.get("extensions"))&&void 0!==l?l:[]})})),t))),i.default.listen.on("enteredNewRoom",(({attributes:e})=>h((function*(){const{jid:t,nick:s,password:r,name:n}=e;yield i.default.bookmarks.set(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){m(e,t,s[t])}))}return e}({jid:t,autojoin:!0,nick:s},r?{password:r}:{},n?{name:n}:{}))}))())),i.default.listen.on("leaveRoom",(({attributes:e})=>h((function*(){const{jid:t}=e;yield i.default.bookmarks.set({jid:t,autojoin:!1},!1,{silent:!0})}))())),i.default.listen.on("addClientFeatures",(()=>{i.default.settings.get("allow_bookmarks")&&i.default.disco.own.features.add(f.NS.BOOKMARKS+"+notify")})),i.default.listen.on("clearSession",(()=>{const{state:e}=o.default;e.bookmarks&&(e.bookmarks.clearStore({silent:!0}),window.sessionStorage.removeItem(e.bookmarks.fetched_flag),delete e.bookmarks)})),i.default.listen.on("connected",(()=>h((function*(){const e=o.default.session.get("bare_jid"),t=i.default.connection.get();t.addHandler(l.handleBookmarksPush,f.NS.BOOKMARKS,"message","headline",null,e),t.addHandler(l.handleBookmarksPush,f.NS.BOOKMARKS2,"message","headline",null,e),yield Promise.all([i.default.waitUntil("chatBoxesFetched")]),(0,l.initBookmarks)()}))()))}})},"./src/headless/plugins/bookmarks/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{getNicknameFromBookmark:()=>d,handleBookmarksPush:()=>c,initBookmarks:()=>l});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/index.js"),o=s("./src/log/index.js"),i=s("./src/headless/plugins/bookmarks/collection.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(){return(e=function*(){n.default.settings.get("allow_bookmarks")&&(yield i.default.checkBookmarksSupport())&&(r.default.state.bookmarks=new r.default.exports.Bookmarks,Object.assign(r.default,{bookmarks:r.default.state.bookmarks}))},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))})();var e}function d(e){var t,s;return n.default.settings.get("allow_bookmarks")?null===(s=r.default.state.bookmarks)||void 0===s||null===(t=s.get(e))||void 0===t?void 0:t.get("nick"):null}function c(e){return n.default.waitUntil("bookmarksInitialized").then((()=>r.default.state.bookmarks.setBookmarksFromStanza(e))).catch((e=>o.default.fatal(e))),!0}},"./src/headless/plugins/bosh/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./src/headless/shared/api/index.js");const n={tokens:{get(e){const t=r.default.connection.get();return t?"rid"===e.toLowerCase()?t.rid||t._proto.rid:"sid"===e.toLowerCase()?t.sid||t._proto.sid:void 0:null}}}},"./src/headless/plugins/bosh/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),a=s("./src/headless/plugins/bosh/api.js"),l=s("./src/headless/plugins/bosh/utils.js");i.default.plugins.add("converse-bosh",{enabled:()=>!n.default.api.settings.get("blacklisted_plugins").includes("converse-bosh"),initialize(){o.default.settings.extend({bosh_service_url:void 0,prebind_url:null}),Object.assign(o.default,a.default),o.default.listen.on("clearSession",l.clearSession),o.default.listen.on("setUserJID",l.saveJIDToSession),o.default.listen.on("login",l.attemptPrebind),o.default.listen.on("addClientFeatures",(()=>o.default.disco.own.features.add(r.Strophe.NS.BOSH)))}})},"./src/headless/plugins/bosh/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{attemptPrebind:()=>b,clearSession:()=>w,restoreBOSHSession:()=>S,saveJIDToSession:()=>j,startNewPreboundBOSHSession:()=>y});var r=s("./src/log/index.js"),n=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/_converse.js"),i=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),a=s("./node_modules/@converse/skeletor/dist/skeletor.js"),l=s("./src/headless/utils/storage.js"),d=s("./src/headless/utils/session.js"),c=s("./src/headless/utils/init.js"),u=s("./src/headless/shared/constants.js");function h(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function m(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){h(o,r,n,i,a,"next",e)}function a(e){h(o,r,n,i,a,"throw",e)}i(void 0)}))}}function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){f(e,t,s[t])}))}return e}function g(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const v="converse.bosh-session";let _;function y(){if(!n.default.settings.get("prebind_url"))throw new Error("startNewPreboundBOSHSession: If you use prebind then you MUST supply a prebind_url");const e=n.default.connection.get(),t=new XMLHttpRequest;t.open("GET",n.default.settings.get("prebind_url"),!0),t.setRequestHeader("Accept","application/json, text/javascript"),t.onload=function(s){return m((function*(){if(t.status>=200&&t.status<400){const s=JSON.parse(t.responseText),r=yield(0,c.setUserJID)(s.jid);e.attach(r,s.sid,s.rid,e.onConnectStatusChanged,u.BOSH_WAIT)}else t.onerror(s)}))()},t.onerror=function(){n.default.connection.destroy(),n.default.trigger("noResumeableBOSHSession",o.default)},t.send()}function b(e,t){return m((function*(){if(t.success)return t;const{automatic:e}=t;return(yield S())?g(p({},t),{success:!0}):n.default.settings.get("authentication")!==u.PREBIND||e&&!n.default.settings.get("auto_login")?t:(y(),g(p({},t),{success:!0}))}))()}function j(){void 0!==_&&_.save({jid:o.default.session.get("jid")})}function w(){if(void 0===_){const e=v;sessionStorage.removeItem(e),sessionStorage.removeItem(`${e}-${e}`)}else _.destroy(),_=void 0}function S(){return m((function*(){const e=(yield m((function*(){const e=v;_||(_=new a.Model({id:e}),_.browserStorage=(0,l.createStore)(e,"session"),yield new Promise((e=>_.fetch({success:e,error:e}))));let t=o.default.session.get("jid");if(t)_.get("jid")!==t&&(t=yield(0,c.setUserJID)(t),_.clear({silent:!0}),_.save({jid:t}));else{const e=_.get("jid");e&&(yield(0,c.setUserJID)(e))}return _}))()).get("jid"),t=n.default.connection.get();if(e&&t._proto instanceof i.Strophe.Bosh)try{return t.restore(e,t.onConnectStatusChanged),!0}catch(t){return!(0,d.isTestEnv)()&&r.default.warn("Could not restore session for jid: "+e+" Error message: "+t.message),!1}return!1}))()}},"./src/headless/plugins/caps/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/shared/api/index.js"),n=s("./src/headless/shared/api/public.js"),o=s("./src/headless/plugins/caps/utils.js");const{Strophe:i}=n.default.env;i.addNamespace("CAPS","http://jabber.org/protocol/caps"),n.default.plugins.add("converse-caps",{dependencies:["converse-status"],initialize(){r.default.listen.on("constructedPresence",((e,t)=>(0,o.addCapsNode)(t))),r.default.listen.on("constructedMUCPresence",((e,t)=>(0,o.addCapsNode)(t)))}})},"./src/headless/plugins/caps/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{addCapsNode:()=>u});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/public.js"),o=s("./src/headless/utils/arraybuffer.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function a(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))}}const{Strophe:l,stx:d}=n.default.env;function c(e,t){return e.sort(((e,s)=>e[t]>s[t]?-1:1))}function u(e){return a((function*(){const t=d`<c
        xmlns="${l.NS.CAPS}"
        hash="sha-1"
        node="https://conversejs.org"
        ver="${yield a((function*(){const e=r.default.api.disco.own.identities.get(),t=r.default.api.disco.own.features.get();e.length>1&&(c(e,"category"),c(e,"type"),c(e,"lang"));let s=e.reduce(((e,t)=>{var s;return`${e}${t.category}/${t.type}/${null!==(s=null==t?void 0:t.lang)&&void 0!==s?s:""}/${t.name}<`}),"");t.sort(),s=t.reduce(((e,t)=>`${e}${t}<`),s);const n=yield crypto.subtle.digest("SHA-1",(0,o.stringToArrayBuffer)(s));return(0,o.arrayBufferToBase64)(n)}))()}"></c>`;return e.root().cnode(t).up(),e}))()}},"./src/headless/plugins/chat/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/index.js"),o=s("./src/log/index.js"),i=s("./src/headless/shared/constants.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}}const d={chats:{create:(e,t)=>l((function*(){if("string"==typeof e){if(t&&!(null==t?void 0:t.fullname)){var s;const r=yield n.default.contacts.get(e);t.fullname=null==r||null===(s=r.attributes)||void 0===s?void 0:s.fullname}const r=n.default.chats.get(e,t,!0);return r||void o.default.error("Could not open chatbox for JID: "+e)}return Array.isArray(e)?Promise.all(e.map((s=>l((function*(){var r;const o=yield n.default.contacts.get(e);return t.fullname=null==o||null===(r=o.attributes)||void 0===r?void 0:r.fullname,n.default.chats.get(s,t,!0).maybeShow()}))()))):(o.default.error("chats.create: You need to provide at least one JID"),null)}))(),open:(e,t,s)=>l((function*(){if("string"==typeof e){const r=yield n.default.chats.get(e,t,!0);return r?r.maybeShow(s):r}if(Array.isArray(e))return Promise.all(e.map((e=>n.default.chats.get(e,t,!0).then((e=>e&&e.maybeShow(s))))).filter((e=>e)));const r="chats.open: You need to provide at least one JID";throw o.default.error(r),new Error(r)}))(),get(e){return l((function*(e,t={},s=!1){function o(e){return l((function*(){let o=yield n.default.chatboxes.get(e);return!o&&s?o=yield n.default.chatboxes.create(e,t,r.default.exports.ChatBox):(o=o&&o.get("type")===i.PRIVATE_CHAT_TYPE?o:null,o&&Object.keys(t).length&&o.save(t)),o}))()}if(yield n.default.waitUntil("chatBoxesFetched"),void 0===e){return(yield n.default.chatboxes.get()).filter((e=>e.get("type")===i.PRIVATE_CHAT_TYPE))}return"string"==typeof e?o(e):Promise.all(e.map((e=>o(e))))})).apply(this,arguments)}}}},"./src/headless/plugins/chat/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{ChatBox:()=>r.default,Message:()=>n.default,Messages:()=>o.default});var r=s("./src/headless/plugins/chat/model.js"),n=s("./src/headless/plugins/chat/message.js"),o=s("./src/headless/plugins/chat/messages.js");s("./src/headless/plugins/chat/plugin.js")},"./src/headless/plugins/chat/message.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),n=s("./node_modules/@converse/openpromise/dist/openpromise.js"),o=(s("./src/headless/shared/_converse.js"),s("./src/headless/shared/api/index.js")),i=s("./src/headless/shared/message.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class l extends i.default{initialize(){var e,t=this,s=()=>super.initialize;return(e=function*(){s().call(t),this.initialized=(0,n.getOpenPromise)(),this.on("change:type",(()=>this.setContact())),yield this.setContact(),yield o.default.trigger("messageInitialized",this,{synchronous:!0}),this.initialized.resolve()},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}).call(this)}setContact(){if(["chat","normal"].includes(this.get("type")))return this.setModelContact(r.Strophe.getBareJidFromJid(this.get("from")))}getDisplayName(){return this.contact?this.contact.getDisplayName():this.vcard?this.vcard.getDisplayName():this.get("from")}}const d=l},"./src/headless/plugins/chat/messages.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/headless/plugins/chat/message.js"),n=s("./node_modules/@converse/skeletor/dist/skeletor.js");class o extends n.Collection{constructor(){super(),this.comparator="time",this.model=r.default,this.fetched=null,this.chatbox=null}}const i=o},"./src/headless/plugins/chat/model.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),n=s("./src/headless/shared/constants.js"),o=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/log/index.js"),d=s("./src/headless/utils/session.js"),c=s("./src/headless/shared/actions.js"),u=s("./src/headless/shared/model-with-messages.js"),h=s("./src/headless/shared/model-with-vcard.js"),m=s("./src/headless/shared/model-with-contact.js"),f=s("./src/headless/shared/color.js"),p=s("./src/headless/shared/chatbox.js");function g(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function v(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){g(o,r,n,i,a,"next",e)}function a(e){g(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{Strophe:_,u:y}=a.default.env;class b extends((0,h.default)((0,u.default)((0,m.default)((0,f.default)(p.default))))){defaults(){return{bookmarked:!1,hidden:(0,d.isUniView)()&&!i.default.settings.get("singleton"),message_type:"chat",num_unread:0,time_opened:this.get("time_opened")||(new Date).getTime(),time_sent:new Date(0).toISOString(),type:n.PRIVATE_CHAT_TYPE}}initialize(){var e=this,t=()=>super.initialize;return v((function*(){t().call(e),this.initialized=(0,r.getOpenPromise)();const s=this.get("jid");this.setPresence(s),yield this.setModelContact(s),this.on("change:chat_state",(()=>(0,c.sendChatState)(this.get("jid"),this.get("chat_state")))),this.on("change:hidden",(()=>this.get("hidden")&&this.setChatState(n.INACTIVE))),yield this.fetchMessages(),yield i.default.trigger("chatBoxInitialized",this,{synchronous:!0}),this.initialized.resolve()})).call(this)}setPresence(e){return v((function*(){yield i.default.waitUntil("presencesInitialized");const{presences:t}=o.default.state;this.presence=t.get(e)||t.create({jid:e}),this.presence.on("change:show",(e=>this.onPresenceChanged(e)))})).call(this)}onMessage(e){return v((function*(){if(y.isErrorObject(e)){const{stanza:t,message:s}=e;return t&&l.default.error(t),l.default.error(s)}const t=e,s=this.getDuplicateMessage(t);if(s)this.updateMessage(s,t);else if(!this.handleReceipt(t)&&!this.handleChatMarker(t)&&!(yield this.handleRetraction(t))&&(this.setEditable(t,t.time),t.chat_state&&"them"===t.sender&&this.notifications.set("chat_state",t.chat_state),y.shouldCreateMessage(t))){const e=(yield this.handleCorrection(t))||(yield this.createMessage(t));this.notifications.set({chat_state:null}),this.handleUnreadMessage(e)}})).call(this)}onPresenceChanged(e){const{__:t}=o.default,s=e.get("show"),r=this.getDisplayName();let n;"offline"===s?n=t("%1$s has gone offline",r):"away"===s?n=t("%1$s has gone away",r):"dnd"===s?n=t("%1$s is busy",r):"online"===s&&(n=t("%1$s is online",r)),n&&this.createMessage({message:n,type:"info",is_ephemeral:!0})}close(){var e=this,t=()=>super.close;return v((function*(){i.default.connection.connected()&&(this.setChatState(n.INACTIVE),(0,c.sendChatState)(this.get("jid"),this.get("chat_state"))),yield t().call(e)})).call(this)}getDisplayName(){if(this.contact){const e=this.contact.getDisplayName({no_jid:!0});if(e)return e}return this.vcard?this.vcard.getDisplayName():this.get("jid")}isSameUser(e,t){return y.isSameBareJID(e,t)}handleChatMarker(e){if(_.getBareJidFromJid(e.to)!==o.default.session.get("bare_jid"))return!1;if(e.is_markable)return!this.contact||["none","to",void 0].includes(this.contact.get("subscription"))||e.is_archived||e.is_carbon||(0,c.sendMarker)(e.from,e.msgid,"received"),!1;if(e.marker_id){const t=this.messages.findWhere({msgid:e.marker_id}),s=`marker_${e.marker}`;return t&&!t.get(s)&&t.save({field_name:(new Date).toISOString()}),!0}}getOutgoingMessageAttributes(e){return v((function*(){const t=!!this.get("composing_spoiler"),s=y.getUniqueId(),r=null==e?void 0:e.body,n=r?y.shortnamesToUnicode(r):void 0;return e=Object.assign({},e,{body:n,from:o.default.session.get("jid"),fullname:o.default.state.profile.get("fullname"),id:s,is_spoiler:t,jid:this.get("jid"),message:n,msgid:s,nick:this.get("nickname"),origin_id:s,sender:"me",time:(new Date).toISOString(),type:this.get("message_type")},yield y.getMediaURLsMetadata(r)),e=yield i.default.hook("getOutgoingMessageAttributes",this,e)})).call(this)}canPostMessages(){return!0}isChatMessage(e){const t=e.get("type");return t===this.get("message_type")||"normal"===t}constructor(e,t){super(e,t),this.disable_mam=!1}}const j=b},"./src/headless/plugins/chat/parsers.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{parseMessage:()=>g});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/api/public.js"),i=s("./node_modules/dayjs/dayjs.min.js"),a=s.n(i),l=s("./src/log/index.js"),d=s("./src/headless/utils/index.js"),c=s("./src/headless/shared/actions.js"),u=s("./src/headless/shared/errors.js"),h=s("./src/headless/shared/parsers.js");function m(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{Strophe:f,sizzle:p}=o.default.env;function g(e){return(t=function*(){var t,s,o,i,m;(0,h.throwErrorIfInvalidForward)(e);let g=e.getAttribute("to");const v=f.getResourceFromJid(g),_=r.default.session.get("resource");if(n.default.settings.get("filter_by_resource")&&v&&v!==_)return new u.StanzaParseError(e,`Ignoring incoming message intended for a different resource: ${g}`);const y=r.default.session.get("bare_jid"),b=e;let j=e.getAttribute("from")||y;if((0,h.isCarbon)(e)){if(j!==y)return(0,c.rejectMessage)(e,"Rejecting carbon from invalid JID"),new u.StanzaParseError(e,`Rejecting carbon from invalid JID ${g}`);{const t=`[xmlns="${f.NS.CARBONS}"] > forwarded[xmlns="${f.NS.FORWARD}"] > message`;g=(e=p(t,e).pop()).getAttribute("to"),j=e.getAttribute("from")}}const w=(0,h.isArchived)(e);if(w){if(j!==y)return new u.StanzaParseError(e,`Invalid Stanza: alleged MAM message from ${e.getAttribute("from")}`);{const t=`[xmlns="${f.NS.MAM}"] > forwarded[xmlns="${f.NS.FORWARD}"] > message`;g=(e=p(t,e).pop()).getAttribute("to"),j=e.getAttribute("from")}}const S=f.getBareJidFromJid(j),x=S===y;if(x&&null===g)return new u.StanzaParseError(e,`Don't know how to handle message stanza without 'to' attribute. ${e.outerHTML}`);const E=(0,h.isHeadline)(e),A=(0,h.isServerMessage)(e);let O,C;if(!E&&!A&&(C=x?f.getBareJidFromJid(g):S,O=yield n.default.contacts.get(C),void 0===O&&!n.default.settings.get("allow_non_roster_messaging")))return l.default.error(e),new u.StanzaParseError(e,"Blocking messaging with a JID not in our roster because allow_non_roster_messaging is false.");const T=p(`delay[xmlns="${f.NS.DELAY}"]`,b).pop(),$=(0,h.getChatMarker)(e),k=(new Date).toISOString();let M=Object.assign({contact_jid:C,is_archived:w,is_headline:E,is_server_message:A,body:null===(s=e.querySelector("body"))||void 0===s||null===(t=s.textContent)||void 0===t?void 0:t.trim(),chat_state:(0,h.getChatState)(e),from:e.getAttribute("from"),is_carbon:(0,h.isCarbon)(b),is_delayed:!!T,is_markable:!!p(`markable[xmlns="${f.NS.MARKERS}"]`,e).length,is_marker:!!$,is_unstyled:!!p(`unstyled[xmlns="${f.NS.STYLING}"]`,e).length,marker_id:$&&$.getAttribute("id"),nick:null==O||null===(o=O.attributes)||void 0===o?void 0:o.nickname,receipt_id:(0,h.getReceiptId)(e),received:(new Date).toISOString(),references:(0,h.getReferences)(e),sender:x?"me":"them",subject:null===(i=e.querySelector("subject"))||void 0===i?void 0:i.textContent,thread:null===(m=e.querySelector("thread"))||void 0===m?void 0:m.textContent,time:T?a()(T.getAttribute("stamp")).toISOString():k,to:e.getAttribute("to"),type:e.getAttribute("type")||"normal"},(0,h.getErrorAttributes)(e),(0,h.getOutOfBandAttributes)(e),(0,h.getSpoilerAttributes)(e),(0,h.getCorrectionAttributes)(e,b),(0,h.getStanzaIDs)(e,b),(0,h.getRetractionAttributes)(e,b),(0,h.getEncryptionAttributes)(e));if(M.is_archived){const t=b.getAttribute("from");if(t&&t!==y)return new u.StanzaParseError(e,`Invalid Stanza: Forged MAM message from ${t}`)}M=Object.assign({message:M.body||M.error,is_valid_receipt_request:(0,h.isValidReceiptRequest)(e,M)},M),M.id=M.origin_id||M[`stanza_id ${M.from}`]||d.default.getUniqueId(),M=yield n.default.hook("parseMessage",e,M);const I=yield d.default.getMediaURLsMetadata(M.is_encrypted?M.plaintext:M.body);return Object.assign(M,I)},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function i(e){m(o,r,n,i,a,"next",e)}function a(e){m(o,r,n,i,a,"throw",e)}i(void 0)}))})();var t}},"./src/headless/plugins/chat/plugin.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/plugins/chat/model.js"),n=s("./src/headless/plugins/chat/message.js"),o=s("./src/headless/plugins/chat/messages.js"),i=s("./src/headless/shared/_converse.js"),a=s("./src/headless/shared/api/index.js"),l=s("./src/headless/shared/api/public.js"),d=s("./src/headless/plugins/chatboxes/api.js"),c=s("./src/headless/plugins/chat/api.js"),u=s("./src/headless/shared/constants.js"),h=s("./src/headless/plugins/chat/utils.js");l.default.plugins.add("converse-chat",{dependencies:["converse-chatboxes","converse-disco"],initialize(){a.default.settings.extend({allow_message_corrections:"all",allow_message_retraction:"all",allow_message_styling:!0,auto_join_private_chats:[],clear_messages_on_reconnection:!1,filter_by_resource:!1,prune_messages_above:void 0,pruning_behavior:"unscrolled",send_chat_markers:["received","displayed","acknowledged"],send_chat_state_notifications:!0});const e={ChatBox:r.default,Message:n.default,Messages:o.default,handleMessageStanza:h.handleMessageStanza};Object.assign(i.default,e),Object.assign(i.default.exports,e),Object.assign(a.default,c.default),d.default.registry.add(u.PRIVATE_CHAT_TYPE,r.default),(0,h.routeToChat)(),addEventListener("hashchange",h.routeToChat),a.default.listen.on("chatBoxesFetched",h.autoJoinChats),a.default.listen.on("presencesInitialized",h.registerMessageHandlers),a.default.listen.on("connected",(()=>(0,h.enableCarbons)())),a.default.listen.on("reconnected",(()=>(0,h.enableCarbons)()))}})},"./src/headless/plugins/chat/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{autoJoinChats:()=>y,enableCarbons:()=>w,handleMessageStanza:()=>j,isNewMessage:()=>_,registerMessageHandlers:()=>b,routeToChat:()=>v});var r=s("./node_modules/sizzle/dist/sizzle.js"),n=s.n(r),o=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/shared/_converse.js"),a=s("./src/headless/shared/api/index.js"),l=s("./src/headless/shared/api/public.js"),d=s("./src/log/index.js"),c=s("./src/headless/shared/parsers.js"),u=s("./src/headless/plugins/chat/parsers.js"),h=s("./src/headless/shared/constants.js");function m(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function f(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){m(o,r,n,i,a,"next",e)}function a(e){m(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{Strophe:p,u:g}=l.default.env;function v(e){if(!location.hash.startsWith("#converse/chat?jid="))return;null==e||e.preventDefault();const t=location.hash.split("=").pop();if(!g.isValidJID(t))return d.default.warn(`Invalid JID "${t}" provided in URL fragment`);a.default.chats.open(t)}function _(e){return e instanceof Element?!(n()(`result[xmlns="${p.NS.MAM}"]`,e).length&&n()(`delay[xmlns="${p.NS.DELAY}"]`,e).length):(e instanceof o.Model&&(e=e.attributes),!(e.is_delayed&&e.is_archived))}function y(){a.default.settings.get("auto_join_private_chats").forEach((e=>{i.default.state.chatboxes.where({jid:e}).length||("string"==typeof e?a.default.chats.open(e):d.default.error('Invalid jid criteria specified for "auto_join_private_chats"'))})),a.default.trigger("privateChatsAutoJoined")}function b(){a.default.connection.get().addHandler((e=>!!(["groupchat","error"].includes(e.getAttribute("type"))||(0,c.isHeadline)(e)||(0,c.isServerMessage)(e)||(0,c.isArchived)(e))||(i.default.exports.handleMessageStanza(e)||!0)),null,"message"),a.default.connection.get().addHandler((e=>(function(e){f((function*(){const t=p.getBareJidFromJid(e.getAttribute("from")),s=i.default.session.get("bare_jid");if(g.isSameBareJID(t,s))return;const r=yield a.default.chatboxes.get(t);(null==r?void 0:r.get("type"))===h.PRIVATE_CHAT_TYPE&&(null==r||r.handleErrorMessageStanza(e))}))()}(e),!0)),null,"message","error")}function j(e){return f((function*(){if(e=e instanceof Element?e:e.tree(),(0,c.isServerMessage)(e)){const t=e.getAttribute("from");return d.default.info(`handleMessageStanza: Ignoring incoming server message from JID: ${t}`)}if(yield(0,c.isMUCPrivateMessage)(e))return!0;let t;try{t=yield(0,u.parseMessage)(e)}catch(e){return d.default.error(e)}if(g.isErrorObject(t)){const{stanza:e,message:s}=t;return e&&d.default.error(e),d.default.error(s)}const{body:s,plaintext:r,contact_jid:n,nick:o}=t,i=!(!s&&!r),l=yield a.default.chats.get(n,{nickname:o},i);yield null==l?void 0:l.queueMessage(t);const h={stanza:e,attrs:t,chatbox:l};a.default.trigger("message",h)}))()}function w(){return f((function*(){const e=i.default.session.get("bare_jid"),t=p.getDomainFromJid(e);if(!(yield a.default.disco.supports(p.NS.CARBONS,t)))return void d.default.warn("Not enabling carbons because it's not supported!");const s=new p.Builder("iq",{from:a.default.connection.get().jid,type:"set"}).c("enable",{xmlns:p.NS.CARBONS}),r=yield a.default.sendIQ(s,null,!1);null===r?d.default.warn("A timeout occurred while trying to enable carbons"):g.isErrorStanza(r)?(d.default.warn("An error occurred while trying to enable message carbons."),d.default.error(r)):d.default.debug("Message carbons have been enabled.")}))()}},"./src/headless/plugins/chatboxes/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/promise.js"),o=s("./src/headless/plugins/chatboxes/utils.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function a(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))}}const{waitUntil:l}=n.default,d={},c={create(e){return a((function*(e=[],t={},s){return yield l("chatBoxesFetched"),"string"==typeof e?(0,o.createChatBox)(e,t,s):Promise.all(e.map((e=>(0,o.createChatBox)(e,t,s))))})).apply(this,arguments)},get:e=>a((function*(){yield l("chatBoxesFetched");const{chatboxes:t}=r.default.state;return void 0===e?t.models:"string"==typeof e?t.get(e.toLowerCase()):(e=e.map((e=>e.toLowerCase())),t.models.filter((t=>e.includes(t.get("jid")))))}))(),registry:{add(e,t){d[e]=t},get:e=>d[e]}}},"./src/headless/plugins/chatboxes/chatboxes.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/index.js"),o=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/utils/storage.js");class a extends o.Collection{onChatBoxesFetched(e){e.filter((e=>!e.isValid())).forEach((e=>e.destroy())),n.default.trigger("chatBoxesFetched")}onConnected(e){if(e)return;const t=r.default.session.get("bare_jid");(0,i.initStorage)(this,`converse.chatboxes-${t}`),this.fetch({add:!0,success:e=>this.onChatBoxesFetched(e)})}createModel(e,t){if(!e.type)throw new Error("You need to specify a type of chatbox to be created");return new(n.default.chatboxes.registry.get(e.type))(e,t)}constructor(e,t){super(e,Object.assign({comparator:"time_opened"},t))}}const l=a},"./src/headless/plugins/chatboxes/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/plugins/chatboxes/chatboxes.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),a=s("./src/headless/utils/session.js"),l=s("./src/headless/plugins/chatboxes/api.js"),d=s("./src/headless/plugins/chatboxes/utils.js");s("./src/headless/plugins/emoji/index.js");const{Strophe:c}=i.default.env;i.default.plugins.add("converse-chatboxes",{dependencies:["converse-emoji","converse-roster","converse-vcard"],initialize(){let e;o.default.promises.add(["chatBoxesFetched","chatBoxesInitialized","privateChatsAutoJoined"]),Object.assign(o.default,{chatboxes:l.default}),Object.assign(n.default,{ChatBoxes:r.default}),Object.assign(n.default.exports,{ChatBoxes:r.default}),o.default.listen.on("addClientFeatures",(()=>{o.default.disco.own.features.add(c.NS.MESSAGE_CORRECT),o.default.disco.own.features.add(c.NS.HTTPUPLOAD),o.default.disco.own.features.add(c.NS.OUTOFBAND)})),o.default.listen.on("pluginsInitialized",(()=>{e=new n.default.exports.ChatBoxes,Object.assign(n.default,{chatboxes:e}),Object.assign(n.default.state,{chatboxes:e}),o.default.trigger("chatBoxesInitialized")})),o.default.listen.on("presencesInitialized",(t=>e.onConnected(t))),o.default.listen.on("reconnected",(()=>e.forEach((e=>e.onReconnection())))),o.default.listen.on("clearSession",d.onClearSession),o.default.listen.on("chatBoxClosed",(()=>{var e;(0,a.isUniView)()&&(null===(e=n.default.state.chatboxes.find((e=>e.get("jid"))))||void 0===e||e.maybeShow())}))}})},"./src/headless/plugins/chatboxes/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{createChatBox:()=>u,onClearSession:()=>c});var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),n=s("./src/log/index.js"),o=s("./src/headless/shared/_converse.js"),i=s("./src/headless/utils/session.js"),a=s("./src/headless/shared/constants.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}}function c(){return d((function*(){if((0,i.shouldClearCache)(o.default)){const{chatboxes:e}=o.default.state;yield Promise.all(e.map((e=>{var t;return null===(t=e.messages)||void 0===t?void 0:t.clearStore({silent:!0})}))),e.clearStore({silent:!0},(e=>e.get("type")!==a.CONTROLBOX_TYPE))}}))()}function u(e,t,s){return d((function*(){let i;e=r.Strophe.getBareJidFromJid(e.toLowerCase()),Object.assign(t,{jid:e,id:e});try{i=new s(t,{collection:o.default.state.chatboxes})}catch(e){return n.default.error(e),null}return yield i.initialized,i.isValid()?(o.default.state.chatboxes.add(i),i):(i.destroy(),null)}))()}},"./src/headless/plugins/disco/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),a=s("./src/log/index.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{Strophe:c,$iq:u}=i.default.env,h={disco:{stream:{getFeature:(e,t)=>d((function*(){yield o.default.waitUntil("streamFeaturesAdded");const s=n.default.state.stream_features;if(!e||!t)throw new Error("name and xmlns need to be provided when calling disco.stream.getFeature");if(void 0!==s||o.default.connection.connected())return s.findWhere({name:e,xmlns:t});{const s=`Tried to get feature ${e} ${t} but stream_features has been torn down`;a.default.warn(s)}}))()},own:{identities:{add(e,t,s,r){const o=n.default.state.disco;for(var i=0;i<o._identities.length;i++)if(o._identities[i].category==e&&o._identities[i].type==t&&o._identities[i].name==s&&o._identities[i].lang==r)return!1;o._identities.push({category:e,type:t,name:s,lang:r})},clear(){n.default.state.disco._identities=[]},get:()=>n.default.state.disco._identities},features:{add(e){const t=n.default.state.disco;for(let s=0;s<t._features.length;s++)if(t._features[s]==e)return!1;t._features.push(e)},clear(){n.default.state.disco._features=[]},get:()=>n.default.state.disco._features}},info(e,t){const s={xmlns:c.NS.DISCO_INFO};t&&(s.node=t);const r=u({from:o.default.connection.get().jid,to:e,type:"get"}).c("query",s);return o.default.sendIQ(r)},items(e,t){const s={xmlns:c.NS.DISCO_ITEMS};return t&&(s.node=t),o.default.sendIQ(u({from:o.default.connection.get().jid,to:e,type:"get"}).c("query",s))},entities:{get:(e,t=!1)=>d((function*(){yield o.default.waitUntil("discoInitialized");const s=n.default.state.disco_entities;if(!e)return s;if(void 0===s)return void a.default.warn(`Tried to look up entity ${e} but disco_entities has been torn down`);const r=s.get(e);return r||!t?r:o.default.disco.entities.create({jid:e})}))(),items:e=>d((function*(){const t=yield o.default.disco.entities.get(e);yield t.waitUntilItemsFetched;return n.default.state.disco_entities.filter((t=>{var s;return null===(s=t.get("parent_jids"))||void 0===s?void 0:s.includes(e)}))}))(),create:(e,t)=>n.default.state.disco_entities.create(e,t)},features:{get:(e,t)=>d((function*(){if(!t)throw new TypeError("api.disco.features.get: You need to provide an entity JID");const s=yield o.default.disco.entities.get(t,!0);if(void 0===n.default.state.disco_entities&&!o.default.connection.connected())return a.default.warn(`Tried to get feature ${e} for ${t} but _converse.disco_entities has been torn down`),[];const r=yield o.default.disco.entities.items(t),i=[s.getFeature(e),...r.map((t=>t.getFeature(e)))];return(yield Promise.all(i)).filter((e=>e instanceof Object))}))(),has:(e,t)=>d((function*(){if(!t)throw new TypeError("api.disco.feature.has: You need to provide an entity JID");const s=yield o.default.disco.entities.get(t,!0);if(!s)return a.default.warn(`api.disco.has: could not get entity for ${t}`),!1;if(void 0===n.default.state.disco_entities&&!o.default.connection.connected())return a.default.warn(`Tried to check if ${t} supports feature ${e}`),!1;if(yield s.getFeature(e))return!0;const r=yield o.default.disco.entities.items(t);return(yield Promise.all(r.map((t=>t.getFeature(e))))).map((e=>e instanceof Object)).includes(!0)}))()},supports(e,t){try{return o.default.disco.features.has(e,t)}catch(e){return a.default.error(e),!1}},refresh:e=>d((function*(){if(!e)throw new TypeError("api.disco.refresh: You need to provide an entity JID");yield o.default.waitUntil("discoInitialized");let t=yield o.default.disco.entities.get(e);return t?(t.features.reset(),t.fields.reset(),t.identities.reset(),t.waitUntilFeaturesDiscovered.isPending||(t.waitUntilFeaturesDiscovered=(0,r.getOpenPromise)()),t.waitUntilItemsFetched.isPending||(t.waitUntilItemsFetched=(0,r.getOpenPromise)()),t.queryInfo()):t=yield o.default.disco.entities.create({jid:e},{ignore_cache:!0}),t.waitUntilItemsFetched}))(),getFeatures:e=>d((function*(){if(!e)throw new TypeError("api.disco.getFeatures: You need to provide an entity JID");yield o.default.waitUntil("discoInitialized");let t=yield o.default.disco.entities.get(e,!0);return t=yield t.waitUntilFeaturesDiscovered,t.features}))(),getFields:e=>d((function*(){if(!e)throw new TypeError("api.disco.getFields: You need to provide an entity JID");yield o.default.waitUntil("discoInitialized");let t=yield o.default.disco.entities.get(e,!0);return t=yield t.waitUntilFeaturesDiscovered,t.fields}))(),getIdentity:(e,t,s)=>d((function*(){const r=yield o.default.disco.entities.get(s,!0);if(void 0!==r||o.default.connection.connected())return r.getIdentity(e,t);{const t=`Tried to look up category ${e} for ${s} but _converse.disco_entities has been torn down`;a.default.warn(t)}}))()}}},"./src/headless/plugins/disco/entities.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/plugins/disco/entity.js"),n=s("./src/log/index.js"),o=s("./node_modules/@converse/skeletor/dist/skeletor.js");class i extends o.Collection{fetchEntities(){return new Promise(((e,t)=>{this.fetch({add:!0,success:e,error(e,s){n.default.error(s),t(new Error("Could not fetch disco entities"))}})}))}constructor(){super(),this.model=r.default}}const a=i},"./src/headless/plugins/disco/entity.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./node_modules/@converse/openpromise/dist/openpromise.js"),o=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/shared/parsers.js"),d=s("./src/log/index.js"),c=s("./node_modules/sizzle/dist/sizzle.js"),u=s.n(c),h=s("./src/headless/utils/storage.js");function m(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function f(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){m(o,r,n,i,a,"next",e)}function a(e){m(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{Strophe:p,u:g}=a.default.env;class v extends r.Model{get idAttribute(){return"jid"}initialize(e,t){super.initialize(),this.waitUntilFeaturesDiscovered=(0,n.getOpenPromise)(),this.waitUntilItemsFetched=(0,n.getOpenPromise)(),this.dataforms=new r.Collection;let s=`converse.dataforms-${this.get("jid")}`;this.dataforms.browserStorage=(0,h.createStore)(s,"session"),this.features=new r.Collection,s=`converse.features-${this.get("jid")}`,this.features.browserStorage=(0,h.createStore)(s,"session"),this.listenTo(this.features,"add",this.onFeatureAdded),this.fields=new r.Collection,s=`converse.fields-${this.get("jid")}`,this.fields.browserStorage=(0,h.createStore)(s,"session"),this.listenTo(this.fields,"add",this.onFieldAdded),this.items=new r.Collection,s=`converse.items-${this.get("jid")}`,this.items.browserStorage=(0,h.createStore)(s,"session"),this.identities=new r.Collection,s=`converse.identities-${this.get("jid")}`,this.identities.browserStorage=(0,h.createStore)(s,"session"),this.fetchFeatures(t)}getIdentity(e,t){return f((function*(){return yield this.waitUntilItemsFetched,this.identities.findWhere({category:e,type:t})})).call(this)}getFeature(e){return f((function*(){if(yield this.waitUntilFeaturesDiscovered,this.features.findWhere({var:e}))return this})).call(this)}onFeatureAdded(e){e.entity=this,i.default.trigger("serviceDiscovered",e)}onFieldAdded(e){e.entity=this,i.default.trigger("discoExtensionFieldDiscovered",e)}fetchFeatures(e){return f((function*(){if(e.ignore_cache)yield this.queryInfo();else{const e=this.features.browserStorage.name,t=yield this.features.browserStorage.store.getItem(e);if(t&&0===t.length||null===t)yield this.queryInfo();else{yield new Promise((e=>this.fetch({success:e,error:e}))),yield new Promise((e=>this.features.fetch({add:!0,success:()=>{this.waitUntilFeaturesDiscovered.resolve(this),this.trigger("featuresDiscovered"),e()},error:e}))),yield new Promise((e=>this.identities.fetch({add:!0,success:e,error:e})));const e=this.get("items");Array.isArray(e)?yield Promise.all(e.map((e=>f((function*(){return yield i.default.disco.entities.get(e,!0)}))()))):yield this.queryForItems(),this.waitUntilItemsFetched.resolve()}}})).call(this)}queryInfo(){return f((function*(){let e;try{e=yield i.default.disco.info(this.get("jid"),null)}catch(e){if(g.isElement(e)){const t=yield(0,l.parseErrorStanza)(e);"item-not-found"!==t.message&&d.default.error(`Error querying disco#info for ${this.get("jid")}: ${t.message}`),this.save({error:t.message}),this.waitUntilFeaturesDiscovered.resolve(t),this.waitUntilItemsFetched.resolve(t)}else null===e?d.default.error(`Timeout for disco#info query for ${this.get("jid")}`):d.default.error(`Error querying disco#info for ${this.get("jid")}: ${e}`),this.waitUntilFeaturesDiscovered.resolve(e),this.waitUntilItemsFetched.resolve(e);return}this.onInfo(e)})).call(this)}onDiscoItems(e){const t=u()(`query[xmlns="${p.NS.DISCO_ITEMS}"] item`,e),s=[];t.forEach((e=>{if(e.getAttribute("node"))return;const t=e.getAttribute("jid");let r=o.default.state.disco_entities.get(t);if(r){const e=r.get("parent_jids");r.set({parent_jids:[...e,this.get("jid")]})}else r=i.default.disco.entities.create({jid:t,parent_jids:[this.get("jid")],name:e.getAttribute("name")});s.push(r.get("jid"))})),this.save({items:s})}queryForItems(){return f((function*(){if(0===this.identities.where({category:"server"}).length)return;const e=yield i.default.disco.items(this.get("jid"));this.onDiscoItems(e)})).call(this)}onInfo(e){return f((function*(){Array.from(e.querySelectorAll("identity")).forEach((e=>{this.identities.create({category:e.getAttribute("category"),type:e.getAttribute("type"),name:e.getAttribute("name")})})),u()(`x[type="result"][xmlns="${p.NS.XFORM}"]`,e).forEach((e=>{const t={};u()("field",e).forEach((e=>{var s;t[e.getAttribute("var")]={value:null===(s=e.querySelector("value"))||void 0===s?void 0:s.textContent,type:e.getAttribute("type")}})),this.dataforms.create(t)})),e.querySelector(`feature[var="${p.NS.DISCO_ITEMS}"]`)&&(yield this.queryForItems()),this.waitUntilItemsFetched.resolve(),Array.from(e.querySelectorAll("feature")).forEach((t=>{this.features.create({var:t.getAttribute("var"),from:e.getAttribute("from")})})),u()('x[type="result"][xmlns="jabber:x:data"] field',e).forEach((t=>{var s;this.fields.create({var:t.getAttribute("var"),value:null===(s=t.querySelector("value"))||void 0===s?void 0:s.textContent,from:e.getAttribute("from")})})),this.waitUntilFeaturesDiscovered.resolve(this),this.trigger("featuresDiscovered")})).call(this)}}const _=v},"./src/headless/plugins/disco/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/plugins/disco/entities.js"),n=s("./src/headless/plugins/disco/entity.js"),o=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/plugins/disco/api.js"),d=s("./src/headless/plugins/disco/utils.js");function c(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function u(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){c(o,r,n,i,a,"next",e)}function a(e){c(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{Strophe:h}=a.default.env;a.default.plugins.add("converse-disco",{initialize(){Object.assign(i.default,l.default),i.default.promises.add("discoInitialized"),i.default.promises.add("streamFeaturesAdded");const e={DiscoEntity:n.default,DiscoEntities:r.default};Object.assign(o.default,e),Object.assign(o.default.exports,e);const t={_identities:[],_features:[]};Object.assign(o.default,{disco:t}),Object.assign(o.default.state,{disco:t}),i.default.listen.on("userSessionInitialized",(()=>u((function*(){(0,d.initStreamFeatures)(),o.default.state.connfeedback.get("connection_status")===h.Status.ATTACHED&&(yield new Promise(((e,t)=>o.default.state.stream_features.fetch({success:e,error:t}))),(0,d.notifyStreamFeaturesAdded)())}))())),i.default.listen.on("beforeResourceBinding",d.populateStreamFeatures),i.default.listen.on("reconnected",d.initializeDisco),i.default.listen.on("connected",d.initializeDisco),i.default.listen.on("beforeTearDown",(()=>u((function*(){i.default.promises.add("streamFeaturesAdded"),i.default.promises.add("discoInitialized");const{stream_features:e}=o.default.state;e&&(yield e.clearStore(),delete o.default.state.stream_features,Object.assign(o.default,{stream_features:void 0}))}))())),i.default.listen.on("will-reconnect",d.clearSession),i.default.listen.on("clearSession",d.clearSession)}})},"./src/headless/plugins/disco/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{clearSession:()=>p,initStreamFeatures:()=>h,initializeDisco:()=>u,notifyStreamFeaturesAdded:()=>m,populateStreamFeatures:()=>f});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/api/public.js"),i=s("./node_modules/@converse/skeletor/dist/skeletor.js"),a=s("./src/headless/utils/storage.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{Strophe:d,$iq:c}=o.default.env;function u(){return(e=function*(){n.default.disco.own.identities.add("client","web","Converse"),n.default.disco.own.features.add(d.NS.CHATSTATES),n.default.disco.own.features.add(d.NS.DISCO_INFO),n.default.disco.own.features.add(d.NS.ROSTERX),n.default.disco.own.features.add(d.NS.CARBONS),n.default.trigger("addClientFeatures"),n.default.connection.get().addHandler((e=>function(e){const t=e.getElementsByTagName("query")[0].getAttribute("node"),s={xmlns:d.NS.DISCO_INFO};t&&(s.node=t);const o=c({type:"result",id:e.getAttribute("id")}),i=e.getAttribute("from");return null!==i&&o.attrs({to:i}),o.c("query",s),r.default.state.disco._identities.forEach((e=>{const t={category:e.category,type:e.type};e.name&&(t.name=e.name),e.lang&&(t["xml:lang"]=e.lang),o.c("identity",t).up()})),r.default.state.disco._features.forEach((e=>o.c("feature",{var:e}).up())),n.default.send(o.tree()),!0}(e)),d.NS.DISCO_INFO,"iq","get",null,null);const e=new r.default.exports.DiscoEntities;Object.assign(r.default,{disco_entities:e}),Object.assign(r.default.state,{disco_entities:e});const t=`converse.disco-entities-${r.default.session.get("bare_jid")}`;e.browserStorage=(0,a.createStore)(t,"session");const s=yield e.fetchEntities(),o=r.default.session.get("domain");0!==s.length&&s.get(o)||n.default.disco.entities.create({jid:o},{ignore_cache:!0}),n.default.trigger("discoInitialized")},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))})();var e}function h(){if(!r.default.state.stream_features){const e=`converse.stream-features-${r.default.session.get("bare_jid")}`;n.default.promises.add("streamFeaturesAdded");const t=new i.Collection;t.browserStorage=(0,a.createStore)(e,"session"),Object.assign(r.default,{stream_features:t}),Object.assign(r.default.state,{stream_features:t})}}function m(){n.default.trigger("streamFeaturesAdded")}function f(){h(),Array.from(n.default.connection.get().features.childNodes).forEach((e=>{r.default.state.stream_features.create({name:e.nodeName,xmlns:e.getAttribute("xmlns")})})),m()}function p(){const{disco_entities:e}=r.default.state;null==e||e.forEach((e=>e.features.clearStore())),null==e||e.forEach((e=>e.identities.clearStore())),null==e||e.forEach((e=>e.dataforms.clearStore())),null==e||e.forEach((e=>e.fields.clearStore())),null==e||e.clearStore(),delete r.default.state.disco_entities,Object.assign(r.default,{disco_entities:void 0})}},"./src/headless/plugins/emoji/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/headless/shared/api/index.js"),n=s("./src/headless/shared/api/public.js");function o(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const i={emojis:{initialize(){return(e=function*(){if(!n.default.emojis.initialized){n.default.emojis.initialized=!0;const e=yield s.e("emojis").then(s.t.bind(s,"./src/headless/plugins/emoji/emoji.json",19)),t=yield r.default.hook("loadEmojis",{},e.default);n.default.emojis.json=t,n.default.emojis.by_sn=Object.keys(t).reduce(((e,s)=>Object.assign(e,t[s])),{}),n.default.emojis.list=Object.values(n.default.emojis.by_sn),n.default.emojis.list.sort(((e,t)=>e.sn<t.sn?-1:e.sn>t.sn?1:0)),n.default.emojis.shortnames=n.default.emojis.list.map((e=>e.sn));const o=()=>n.default.emojis.shortnames.map((e=>e.replace(/[+]/g,"\\$&"))).join("|");n.default.emojis.shortnames_regex=new RegExp(o(),"gi"),n.default.emojis.initialized_promise.resolve()}return n.default.emojis.initialized_promise},function(){var t=this,s=arguments;return new Promise((function(r,n){var i=e.apply(t,s);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)}))})();var e}}}},"./src/headless/plugins/emoji/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{EmojiPicker:()=>r.default});var r=s("./src/headless/plugins/emoji/picker.js");s("./src/headless/plugins/emoji/plugin.js")},"./src/headless/plugins/emoji/picker.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js");class n extends r.Model{defaults(){return{current_category:"smileys",current_skintone:"",scroll_position:0}}}const o=n},"./src/headless/plugins/emoji/plugin.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),a=s("./src/headless/plugins/emoji/picker.js"),l=s("./src/headless/plugins/emoji/api.js"),d=s("./src/headless/plugins/emoji/utils.js");function c(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function u(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){c(o,r,n,i,a,"next",e)}function a(e){c(o,r,n,i,a,"throw",e)}i(void 0)}))}}function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){h(e,t,s[t])}))}return e}function f(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}i.default.emojis={initialized:!1,initialized_promise:(0,r.getOpenPromise)()},i.default.plugins.add("converse-emoji",{initialize(){const{___:e}=n.default;o.default.settings.extend({emoji_image_path:"https://twemoji.maxcdn.com/v/12.1.6/",emoji_categories:{smileys:":grinning:",people:":thumbsup:",activity:":soccer:",travel:":motorcycle:",objects:":bomb:",nature:":rainbow:",food:":hotdog:",symbols:":musical_note:",flags:":flag_ac:",custom:null},emoji_category_labels:{smileys:e("Smileys and emotions"),people:e("People"),activity:e("Activities"),travel:e("Travel"),objects:e("Objects"),nature:e("Animals and nature"),food:e("Food and drink"),symbols:e("Symbols"),flags:e("Flags"),custom:e("Stickers")}});const t={EmojiPicker:a.default};function s(e,t){return u((function*(){return yield o.default.emojis.initialize(),f(m({},t),{is_only_emojis:!!t.body&&(0,d.isOnlyEmojis)(t.body)})}))()}Object.assign(n.default,t),Object.assign(n.default.exports,t),Object.assign(o.default,l.default),o.default.listen.on("getOutgoingMessageAttributes",((e,t)=>u((function*(){yield o.default.emojis.initialize();const{original_text:e}=t;return f(m({},t),{is_only_emojis:!!e&&(0,d.isOnlyEmojis)(e)})}))())),o.default.listen.on("parseMUCMessage",s),o.default.listen.on("parseMessage",s)}})},"./src/headless/plugins/emoji/regexes.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{ASCII_REPLACE_REGEX:()=>r,CODEPOINTS_REGEX:()=>n});const r=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|((\\s|^)(\\*\\\\0\\/\\*|\\*\\\\O\\/\\*|\\-___\\-|\\:'\\-\\)|'\\:\\-\\)|'\\:\\-D|\\>\\:\\-\\)|>\\:\\-\\)|'\\:\\-\\(|\\>\\:\\-\\(|>\\:\\-\\(|\\:'\\-\\(|O\\:\\-\\)|0\\:\\-3|0\\:\\-\\)|0;\\^\\)|O;\\-\\)|0;\\-\\)|O\\:\\-3|\\-__\\-|\\:\\-Þ|\\:\\-Þ|\\<\\/3|<\\/3|\\:'\\)|\\:\\-D|'\\:\\)|'\\=\\)|'\\:D|'\\=D|\\>\\:\\)|>\\:\\)|\\>;\\)|>;\\)|\\>\\=\\)|>\\=\\)|;\\-\\)|\\*\\-\\)|;\\-\\]|;\\^\\)|'\\:\\(|'\\=\\(|\\:\\-\\*|\\:\\^\\*|\\>\\:P|>\\:P|X\\-P|\\>\\:\\[|>\\:\\[|\\:\\-\\(|\\:\\-\\[|\\>\\:\\(|>\\:\\(|\\:'\\(|;\\-\\(|\\>\\.\\<|>\\.<|#\\-\\)|%\\-\\)|X\\-\\)|\\\\0\\/|\\\\O\\/|0\\:3|0\\:\\)|O\\:\\)|O\\=\\)|O\\:3|B\\-\\)|8\\-\\)|B\\-D|8\\-D|\\-_\\-|\\>\\:\\\\|>\\:\\\\|\\>\\:\\/|>\\:\\/|\\:\\-\\/|\\:\\-\\.|\\:\\-P|\\:Þ|\\:Þ|\\:\\-b|\\:\\-O|O_O|\\>\\:O|>\\:O|\\:\\-X|\\:\\-#|\\:\\-\\)|\\(y\\)|\\<3|<3|\\:D|\\=D|;\\)|\\*\\)|;\\]|;D|\\:\\*|\\=\\*|\\:\\(|\\:\\[|\\=\\(|\\:@|;\\(|D\\:|\\:\\$|\\=\\$|#\\)|%\\)|X\\)|B\\)|8\\)|\\:\\/|\\:\\\\|\\=\\/|\\=\\\\|\\:L|\\=L|\\:P|\\=P|\\:b|\\:O|\\:X|\\:#|\\=X|\\=#|\\:\\)|\\=\\]|\\=\\)|\\:\\])(?=\\s|$|[!,.?]))","gi"),n=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g},"./src/headless/plugins/emoji/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{convertASCII2Emoji:()=>d,getCodePointReferences:()=>u,getShortnameReferences:()=>c,isOnlyEmojis:()=>h});var r=s("./src/headless/plugins/emoji/regexes.js"),n=s("./src/headless/shared/api/public.js");const{u:o}=n.default.env,i={},a={"*\\0/*":"1f646","*\\O/*":"1f646","-___-":"1f611",":'-)":"1f602","':-)":"1f605","':-D":"1f605",">:-)":"1f606","':-(":"1f613",">:-(":"1f620",":'-(":"1f622","O:-)":"1f607","0:-3":"1f607","0:-)":"1f607","0;^)":"1f607","O;-)":"1f607","0;-)":"1f607","O:-3":"1f607","-__-":"1f611",":-Þ":"1f61b","</3":"1f494",":')":"1f602",":-D":"1f603","':)":"1f605","'=)":"1f605","':D":"1f605","'=D":"1f605",">:)":"1f606",">;)":"1f606",">=)":"1f606",";-)":"1f609","*-)":"1f609",";-]":"1f609",";^)":"1f609","':(":"1f613","'=(":"1f613",":-*":"1f618",":^*":"1f618",">:P":"1f61c","X-P":"1f61c",">:[":"1f61e",":-(":"1f61e",":-[":"1f61e",">:(":"1f620",":'(":"1f622",";-(":"1f622",">.<":"1f623","#-)":"1f635","%-)":"1f635","X-)":"1f635","\\0/":"1f646","\\O/":"1f646","0:3":"1f607","0:)":"1f607","O:)":"1f607","O=)":"1f607","O:3":"1f607","B-)":"1f60e","8-)":"1f60e","B-D":"1f60e","8-D":"1f60e","-_-":"1f611",">:\\":"1f615",">:/":"1f615",":-/":"1f615",":-.":"1f615",":-P":"1f61b",":Þ":"1f61b",":-b":"1f61b",":-O":"1f62e",O_O:"1f62e",">:O":"1f62e",":-X":"1f636",":-#":"1f636",":-)":"1f642","(y)":"1f44d","<3":"2764",":D":"1f603","=D":"1f603",";)":"1f609","*)":"1f609",";]":"1f609",";D":"1f609",":*":"1f618","=*":"1f618",":(":"1f61e",":[":"1f61e","=(":"1f61e",":@":"1f620",";(":"1f622","D:":"1f628",":$":"1f633","=$":"1f633","#)":"1f635","%)":"1f635","X)":"1f635","B)":"1f60e","8)":"1f60e",":/":"1f615",":\\":"1f615","=/":"1f615","=\\":"1f615",":L":"1f615","=L":"1f615",":P":"1f61b","=P":"1f61b",":b":"1f61b",":O":"1f62e",":X":"1f636",":#":"1f636","=X":"1f636","=#":"1f636",":)":"1f642","=]":"1f642","=)":"1f642",":]":"1f642"};function l(e){if(e.indexOf("-")>-1){const t=[],s=e.split("-");for(let e=0;e<s.length;e++){const r=parseInt(s[e],16);if(r>=65536&&r<=1114111){const e=Math.floor((r-65536)/1024)+55296,s=(r-65536)%1024+56320;t.push(String.fromCharCode(e)+String.fromCharCode(s))}else t.push(String.fromCharCode(r))}return t.join("")}return function(e){let t="string"==typeof e?parseInt(e,16):e;return t<65536?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}(e)}function d(e){return e.replace(r.ASCII_REPLACE_REGEX,((e,t,s,r)=>{if(void 0===r||""===r||!(o.unescapeHTML(r)in a))return e;r=o.unescapeHTML(r);return s+l(a[r].toUpperCase())}))}function c(e){if(!n.default.emojis.initialized)throw new Error("getShortnameReferences called before emojis are initialized. To avoid this problem, first await the converse.emojis.initialized_promise");return[...e.matchAll(n.default.emojis.shortnames_regex)].filter((e=>e[0].length>0)).map((e=>{var t;const s=null===(t=n.default.emojis.by_sn[e[0].toLowerCase()])||void 0===t?void 0:t.cp;return{cp:s,begin:e.index,end:e.index+e[0].length,shortname:e[0],emoji:s?l(s):null}}))}function u(e){const t=[];return function(e,t){const s=/\uFE0F/g,n=String.fromCharCode(8205);String(e).replace(r.CODEPOINTS_REGEX,((e,r,o)=>{const i=function(e){const t=[];let s=0,r=0;for(;r<e.length;){const n=e.charCodeAt(r++);s?(t.push((65536+(s-55296<<10)+(n-56320)).toString(16)),s=0):55296<=n&&n<=56319?s=n:t.push(n.toString(16))}return t.join("-")}(e.indexOf(n)<0?e.replace(s,""):e);return i&&t(i,e,o),e}))}(e,((e,s,r)=>{var n;t.push({begin:r,cp:e,emoji:s,end:r+s.length,shortname:(null===(n=m("cp")[e])||void 0===n?void 0:n.sn)||""})})),t}function h(e){const t=e.trim().split(/\s+/);if(0===t.length||t.length>3)return!1;const s=t.filter((e=>{const t=u(o.shortnamesToUnicode(e));return 1===t.length&&(e.toLowerCase()===t[0].shortname||e===t[0].emoji)}));return s.length===t.length}function m(e){if(i[e])return i[e];if("category"===e)return n.default.emojis.json;const t=n.default.emojis.list.map((t=>t[e])).filter(((e,t,s)=>s.indexOf(e)==t));return i[e]={},t.forEach((t=>i[e][t]=n.default.emojis.list.find((s=>s[e]===t)))),i[e]}Object.assign(o,{getCodePointReferences:u,getShortnameReferences:c,convertASCII2Emoji:d,getEmojisByAttribute:m,isOnlyEmojis:h,shortnamesToUnicode:function(e){return function(e){let t=[e];return[...c(e),...u(e)].sort(((e,t)=>t.begin-e.begin)).forEach((e=>{const s=t.shift(),r=e.emoji||e.shortname;t=[s.slice(0,e.begin)+r+s.slice(e.end),...t]})),t}(d(e)).pop()}})},"./src/headless/plugins/headlines/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/constants.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function a(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))}}const l={headlines:{get(e){return a((function*(e,t={},s=!1){function i(e){return a((function*(){let i=yield n.default.chatboxes.get(e);if(!i&&s){const{HeadlinesFeed:s}=r.default.exports;i=yield n.default.chatboxes.create(e,t,s)}else i=i&&i.get("type")===o.HEADLINES_TYPE?i:null,i&&Object.keys(t).length&&i.save(t);return i}))()}if(void 0===e){return(yield n.default.chatboxes.get()).filter((e=>e.get("type")===o.HEADLINES_TYPE))}return"string"==typeof e?i(e):Promise.all(e.map((e=>i(e))))})).apply(this,arguments)}}}},"./src/headless/plugins/headlines/feed.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/shared/api/index.js"),n=s("./src/headless/utils/session.js"),o=s("./src/headless/shared/constants.js"),i=s("./src/headless/shared/chatbox.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class l extends i.default{defaults(){return{bookmarked:!1,hidden:(0,n.isUniView)()&&!r.default.settings.get("singleton"),message_type:"headline",num_unread:0,time_opened:this.get("time_opened")||(new Date).getTime(),time_sent:void 0,type:o.HEADLINES_TYPE}}initialize(){var e,t=this,s=()=>super.initialize;return(e=function*(){yield s().call(t),yield this.fetchMessages(),r.default.trigger("headlinesFeedInitialized",this)},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}).call(this)}canPostMessages(){return!1}isChatMessage(e){const t=e.get("type");return t===this.get("message_type")||"normal"===t}constructor(e,t){super(e,t),this.disable_mam=!0}}},"./src/headless/plugins/headlines/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/plugins/headlines/feed.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),a=s("./src/headless/plugins/headlines/api.js"),l=s("./src/headless/plugins/headlines/utils.js"),d=s("./src/headless/shared/constants.js");i.default.plugins.add("converse-headlines",{dependencies:["converse-chat"],initialize(){const e={HeadlinesFeed:r.default};function t(){var e;null===(e=o.default.connection.get())||void 0===e||e.addHandler((e=>((0,l.onHeadlineMessage)(e),!0)),null,"message")}Object.assign(n.default,e),Object.assign(n.default.exports,e),o.default.listen.on("connected",t),o.default.listen.on("reconnected",t),Object.assign(o.default,a.default),o.default.chatboxes.registry.add(d.HEADLINES_TYPE,r.default)}})},"./src/headless/plugins/headlines/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{onHeadlineMessage:()=>c});var r=s("./src/headless/plugins/headlines/feed.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/constants.js"),a=s("./src/headless/shared/parsers.js"),l=s("./src/headless/plugins/chat/parsers.js");function d(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function c(e){return(t=function*(){if((0,a.isHeadline)(e)||(0,a.isServerMessage)(e)){const t=e.getAttribute("from");if(yield o.default.waitUntil("rosterInitialized"),t.includes("@")&&!n.default.state.roster.get(t)&&!o.default.settings.get("allow_non_roster_messaging"))return;if(null===e.querySelector("body"))return;const s=yield o.default.chatboxes.create(t,{id:t,jid:t,type:i.HEADLINES_TYPE,from:t},r.default),a=yield(0,l.parseMessage)(e);yield s.createMessage(a),o.default.trigger("message",{chatbox:s,stanza:e,attrs:a})}},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function i(e){d(o,r,n,i,a,"next",e)}function a(e){d(o,r,n,i,a,"throw",e)}i(void 0)}))})();var t}},"./src/headless/plugins/mam/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/api/public.js"),i=s("./node_modules/dayjs/dayjs.min.js"),a=s.n(i),l=s("./src/log/index.js"),d=s("./node_modules/sizzle/dist/sizzle.js"),c=s.n(d),u=s("./src/headless/shared/rsm.js"),h=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),m=s("./src/headless/shared/errors.js");function f(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function g(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const{NS:v}=h.Strophe,{stx:_,u:y}=o.default.env,b={archive:{query(){return(e=function*(e={}){var t;if(!n.default.connection.connected())throw new Error("Can't call `api.archive.query` before having established an XMPP session");let s;if(e&&e.is_groupchat){var o;if(!(null===(o=e.mam)||void 0===o?void 0:o.with))throw new Error('You need to specify a "with" value containing the groupchat JID, when querying groupchat messages.');s=e.mam.with}const i=!e.is_groupchat&&(null===(t=e.mam)||void 0===t?void 0:t.with)||null,d=r.default.session.get("bare_jid"),f=s||d;if(!(yield n.default.disco.supports(v.MAM,f)))return l.default.warn(`Did not fetch MAM archive for ${f} because it doesn't support ${v.MAM}`),{messages:[]};const{start:b,end:j}=["start","end"].reduce(((t,s)=>{var r;if(null===(r=e.mam)||void 0===r?void 0:r[s]){const r=a()(e.mam[s]);if(!r.isValid())throw new TypeError(`archive.query: invalid date provided for: ${s}`);t[s]=r.toISOString()}return t}),{start:null,end:null}),w=n.default.connection.get(),S=e.rsm?new u.RSM(e.rsm):{},x=y.getUniqueId();var E;const A=_`
                <iq id="${y.getUniqueId()}"
                        ${s?h.Stanza.unsafeXML(`to="${h.Strophe.xmlescape(s)}"`):""}
                        type="set"
                        xmlns="jabber:client">
                    <query queryid="${x}" xmlns="${v.MAM}">
                        ${i||b||j?_`
                            <x type="submit" xmlns="${v.XFORM}">
                                <field type="hidden" var="FORM_TYPE"><value>${v.MAM}</value></field>
                                ${i?_`<field var="with"><value>${i}</value></field>`:""}
                                ${b?_`<field var="start"><value>${b}</value></field>`:""}
                                ${j?_`<field var="end"><value>${j}</value></field>`:""}
                            </x>`:""}
                        ${Object.keys(null!==(E=S.query)&&void 0!==E?E:{}).length?h.Stanza.fromString(S.toString()):""}
                    </query>
                </iq>`,O=[],C=w.addHandler((t=>{const s=c()(`message > result[xmlns="${v.MAM}"]`,t).pop();if(void 0===s||s.getAttribute("queryid")!==x)return!0;const r=t.getAttribute("from")||d;var n;if(e.is_groupchat){if(r!==(null===(n=e.mam)||void 0===n?void 0:n.with))return l.default.warn(`Ignoring alleged groupchat MAM message from ${t.getAttribute("from")}`),!0}else if(r!==d)return l.default.warn(`Ignoring alleged MAM message from ${t.getAttribute("from")}`),!0;return O.push(t),!0}),v.MAM);let T;const $=n.default.settings.get("message_archiving_timeout"),k=yield n.default.sendIQ(A,$,!1);if(null===k){const{__:e}=r.default,t=e("Timeout while trying to fetch archived messages.");return l.default.error(t),T=new m.TimeoutError(t),{messages:O,error:T}}if(y.isErrorStanza(k)){const{__:e}=r.default,t=e("An error occurred while querying for archived messages.");return l.default.error(t),l.default.error(k),T=new Error(t),{messages:O,error:T}}let M;w.deleteHandler(C);const I=k&&c()(`fin[xmlns="${v.MAM}"]`,k).pop(),P="true"===(null==I?void 0:I.getAttribute("complete")),N=c()(`set[xmlns="${v.RSM}"]`,I).pop();return N&&(M=new u.RSM(g(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){p(e,t,s[t])}))}return e}({},e.rsm),{xml:N}))),{messages:O,rsm:M,complete:P}},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){f(o,r,n,i,a,"next",e)}function a(e){f(o,r,n,i,a,"throw",e)}i(void 0)}))}).apply(this,arguments);var e}}}},"./src/headless/plugins/mam/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{MAMPlaceholderMessage:()=>n.default});var r=s("./src/headless/utils/index.js"),n=s("./src/headless/plugins/mam/placeholder.js"),o=s("./src/headless/plugins/mam/utils.js");s("./src/headless/plugins/mam/plugin.js");Object.assign(r.default,{mam:{fetchArchivedMessages:o.fetchArchivedMessages}})},"./src/headless/plugins/mam/placeholder.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/utils/index.js");function o(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class i extends r.Model{defaults(){return{msgid:(0,n.getUniqueId)(),is_ephemeral:!1}}fetchMissingMessages(){return(e=function*(){var e;this.set("fetching",!0);const t={rsm:{before:null!==(e=this.get("before"))&&void 0!==e?e:""},mam:{start:this.get("start")}};yield n.default.mam.fetchArchivedMessages(this.collection.chatbox,t),this.destroy()},function(){var t=this,s=arguments;return new Promise((function(r,n){var i=e.apply(t,s);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)}))}).call(this);var e}}},"./src/headless/plugins/mam/plugin.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),a=s("./src/headless/shared/constants.js"),l=(s("./src/headless/plugins/disco/index.js"),s("./src/headless/plugins/mam/api.js")),d=s("./src/headless/plugins/mam/placeholder.js"),c=s("./src/headless/plugins/mam/utils.js");const{NS:u}=r.Strophe;i.default.plugins.add("converse-mam",{dependencies:["converse-disco","converse-muc"],initialize(){o.default.settings.extend({archived_messages_page_size:"50",mam_request_all_pages:!1,message_archiving:void 0,message_archiving_timeout:6e4}),Object.assign(o.default,l.default);const e={onMAMError:c.onMAMError,onMAMPreferences:c.onMAMPreferences,handleMAMResult:c.handleMAMResult,MAMPlaceholderMessage:d.default};Object.assign(n.default,e),Object.assign(n.default.exports,e),o.default.listen.on("addClientFeatures",(()=>o.default.disco.own.features.add(u.MAM))),o.default.listen.on("serviceDiscovered",c.getMAMPrefsFromFeature),o.default.listen.on("chatRoomViewInitialized",(({model:e})=>{o.default.settings.get("muc_show_logs_before_join")&&((0,c.preMUCJoinMAMFetch)(e),e.features.on("change:mam_enabled",(()=>(0,c.preMUCJoinMAMFetch)(e))))})),o.default.listen.on("enteredNewRoom",(e=>e.features.get("mam_enabled")&&(0,c.fetchNewestMessages)(e))),o.default.listen.on("chatReconnected",(e=>{[a.CHATROOMS_TYPE,a.PRIVATE_CHAT_TYPE].includes(e.get("type"))&&(0,c.fetchNewestMessages)(e)})),o.default.listen.on("afterMessagesFetched",(e=>{e.get("type")===a.PRIVATE_CHAT_TYPE&&(0,c.fetchNewestMessages)(e),(0,c.createScrollupPlaceholder)(e)}))}})},"./src/headless/plugins/mam/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{createScrollupPlaceholder:()=>C,fetchArchivedMessages:()=>O,fetchNewestMessages:()=>T,getMAMPrefsFromFeature:()=>x,handleMAMResult:()=>A,onMAMError:()=>w,onMAMPreferences:()=>S,preMUCJoinMAMFetch:()=>E});var r=s("./node_modules/sizzle/dist/sizzle.js"),n=s.n(r),o=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),i=s("./src/headless/shared/_converse.js"),a=s("./src/headless/shared/api/index.js"),l=s("./src/headless/shared/api/public.js"),d=s("./src/log/index.js"),c=s("./src/headless/plugins/muc/parsers.js"),u=s("./src/headless/plugins/chat/parsers.js"),h=s("./src/headless/shared/constants.js"),m=s("./src/headless/shared/errors.js"),f=s("./src/headless/plugins/mam/placeholder.js"),p=s("./src/headless/shared/parsers.js");function g(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function v(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){g(o,r,n,i,a,"next",e)}function a(e){g(o,r,n,i,a,"throw",e)}i(void 0)}))}}function _(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){_(e,t,s[t])}))}return e}const{NS:b}=o.Strophe,j=l.default.env.utils;function w(e,t){return v((function*(){if(j.isElement(e)){const s=yield(0,p.parseErrorStanza)(e);if("feature-not-implemented"===(null==s?void 0:s.name))return void d.default.warn(`Message Archive Management (XEP-0313) not supported by ${t.getAttribute("to")}`)}d.default.error(`Error while trying to set archiving preferences for ${t.getAttribute("to")}.`),d.default.error(t)}))()}function S(e,t){const s=n()(`prefs[xmlns="${b.MAM}"]`,e).pop();if(s.getAttribute("default")!==a.default.settings.get("message_archiving")){const e=(0,o.$iq)({type:"set"}).c("prefs",{xmlns:b.MAM,default:a.default.settings.get("message_archiving")});Array.from(s.children).forEach((t=>e.cnode(t).up())),a.default.sendIQ(e).then((()=>t.save({preferences:{default:a.default.settings.get("message_archiving")}}))).catch((t=>i.default.exports.onMAMError(t,e.tree())))}else t.save({preferences:{default:a.default.settings.get("message_archiving")}})}function x(e){const t=e.get("preferences")||{};if(e.get("var")===b.MAM&&void 0!==a.default.settings.get("message_archiving")&&t.default!==a.default.settings.get("message_archiving")){const t=(0,o.$iq)({type:"get"}).c("prefs",{xmlns:b.MAM});a.default.sendIQ(t).then((t=>i.default.exports.onMAMPreferences(t,e))).catch((e=>i.default.exports.onMAMError(e,t.tree())))}}function E(e){a.default.settings.get("muc_show_logs_before_join")&&e.features.get("mam_enabled")&&!e.get("prejoin_mam_fetched")&&(T(e),e.save({prejoin_mam_fetched:!0}))}function A(e,t,s,r,n=!1){return v((function*(){const o=e.get("type")===h.CHATROOMS_TYPE,i=yield Promise.all(t.messages.map((t=>o?(0,c.parseMUCMessage)(t,e):(0,u.parseMessage)(t))));t.messages=i;const l={query:s,chatbox:e,messages:i};if(yield a.default.trigger("MAMResult",l,{synchronous:!0}),i.forEach((t=>e.queueMessage(t))),t.error){const s=t.error.retry_event_id=j.getUniqueId();a.default.listen.once(s,(()=>O(e,r,n))),function(e,t){v((function*(){t instanceof m.TimeoutError&&((yield e.createMessage({type:"error",message:t.message,retry_event_id:t.retry_event_id,is_ephemeral:2e4})).error=t)}))()}(e,t.error)}}))()}function O(e){return v((function*(e,t={},s=!1){if(e.disable_mam)return;const r=e.get("type")===h.CHATROOMS_TYPE,n=i.default.session.get("bare_jid"),o=r?e.get("jid"):n;if(!(yield a.default.disco.supports(b.MAM,o)))return;const l=a.default.settings.get("archived_messages_page_size"),c={is_groupchat:r,rsm:y({max:l},t.rsm),mam:y({with:e.get("jid")},t.mam)},u=yield a.default.archive.query(c);if(yield A(e,u,c,t,s),u.rsm&&!u.complete){if(s)return"forwards"===s?t=u.rsm.next(l,t.rsm.before).query:"backwards"===s&&(t=u.rsm.previous(l,t.rsm.after).query),O(e,t,s);!function(e,t,s){v((function*(){var r;const n=yield Promise.all(s.messages),o=e.get("type")===h.CHATROOMS_TYPE?e.get("jid"):i.default.session.get("bare_jid"),{rsm:a}=s,l=`stanza_id ${o}`,c=n.find((e=>e[l]===a.result.first)),u=new Date(c.time),m={before:a.result.first,start:null===(r=t.mam)||void 0===r?void 0:r.start,template_hook:"getMessageTemplate",time:new Date(u.getTime()-1).toISOString()};e.messages.findWhere(m)?d.default.debug("Gap placeholder already exists, not recreating."):e.messages.add(new f.default(m))}))()}(e,t,u)}})).apply(this,arguments)}function C(e){if(e.messages.length){const t=`stanza_id ${e.get("type")===h.CHATROOMS_TYPE?e.get("jid"):i.default.session.get("bare_jid")}`,s=e.getOldestMessage();if(!s)return;const r={before:s.get(t),template_hook:"getMessageTemplate",time:new Date(new Date(s.get("time")).getTime()-1).toISOString()};if(e.messages.findWhere(r))return void d.default.debug("Gap placeholder already exists, not recreating.");e.messages.add(new f.default(r))}}function T(e){if(e.disable_mam)return;const t=e.getMostRecentMessage(),s=!!a.default.settings.get("mam_request_all_pages")&&"backwards";return O(e,t?{mam:{start:t.get("time")},rsm:{before:""}}:{rsm:{before:""}},s)}},"./src/headless/plugins/muc/affiliations/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./src/headless/plugins/muc/affiliations/utils.js");const n={affiliations:{set:(e,t)=>(t=Array.isArray(t)?t:[t],e=Array.isArray(e)?e:[e],(0,r.setAffiliations)(e,t)),get:(e,t)=>(0,r.getAffiliationList)(e,t)}}},"./src/headless/plugins/muc/affiliations/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{computeAffiliationsDelta:()=>v,getAffiliationList:()=>f,setAffiliation:()=>g,setAffiliations:()=>p});s("./src/headless/shared/_converse.js");var r=s("./src/headless/shared/api/index.js"),n=s("./src/headless/shared/api/public.js"),o=s("./src/log/index.js"),i=s("./src/headless/plugins/muc/parsers.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const{Strophe:c,$iq:u,u:h,stx:m}=n.default.env;function f(e,t){return(s=function*(){const s=m`
        <iq xmlns="jabber:client" to="${t}" type="get">
            <query xmlns="${c.NS.MUC_ADMIN}">
                <item affiliation="${e}"/>
            </query>
        </iq>`,n=yield r.default.sendIQ(s,null,!1);if(null===n){const s=`Error: timeout while fetching ${e} list for MUC ${t}`,r=new Error(s);return o.default.warn(s),r}if(h.isErrorStanza(n)){const s=`Error: not allowed to fetch ${e} list for MUC ${t}`,r=new Error(s);return o.default.warn(s),o.default.warn(n),r}return(0,i.parseMemberListIQ)(n).filter((e=>e)).sort(((e,t)=>e.nick<t.nick?-1:e.nick>t.nick?1:0))},function(){var e=this,t=arguments;return new Promise((function(r,n){var o=s.apply(e,t);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))})();var s}function p(e,t){const s=[...new Set(t.map((e=>e.affiliation)))];return Promise.all(s.map((s=>g(s,e,t))))}function g(e,t,s){return Array.isArray(t)||(t=[t]),s=s.filter((t=>[void 0,e].includes(t.affiliation))),Promise.all(t.reduce(((t,n)=>[...t,...s.map((t=>function(e,t,s){e=s.affiliation||e;const n=u({to:t,type:"set"}).c("query",{xmlns:c.NS.MUC_ADMIN}).c("item",d(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){l(e,t,s[t])}))}return e}({affiliation:e},"outcast"===e?{}:{nick:s.nick}),{jid:s.jid}));void 0!==s.reason&&n.c("reason",s.reason);return r.default.sendIQ(n)}(e,n,t)))]),[]))}function v(e,t,s,r){const n=s.map((e=>e.jid)),o=r.map((e=>e.jid));let i=n.filter((e=>!o.includes(e))).map((e=>s[n.indexOf(e)]));return e||(i=i.concat(s.filter((e=>{const t=o.indexOf(e.jid);return t>=0&&e.affiliation!==r[t].affiliation})))),t&&(i=i.concat(o.filter((e=>!n.includes(e))).map((e=>({jid:e,affiliation:"none"}))))),i}},"./src/headless/plugins/muc/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/plugins/chatboxes/api.js"),o=s("./src/log/index.js"),i=s("./src/headless/shared/api/promise.js"),a=s("./src/headless/shared/constants.js"),l=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),d=s("./src/headless/utils/jid.js"),c=s("./src/headless/shared/settings/api.js");function u(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function h(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){u(o,r,n,i,a,"next",e)}function a(e){u(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{waitUntil:m}=i.default,f={create(e,t={}){if(!(t="string"==typeof t?{nick:t}:t||{}).nick&&c.settings_api.get("muc_nickname_from_jid")){const e=r.default.session.get("bare_jid");t.nick=l.Strophe.getNodeFromJid(e)}if(void 0===e)throw new TypeError("rooms.create: You need to provide at least one JID");return"string"==typeof e?f.get((0,d.getJIDFromURI)(e),t,!0):Promise.all(e.map((e=>f.get((0,d.getJIDFromURI)(e),t,!0))))},open(e){return h((function*(e,t={},s=!1){if(yield m("chatBoxesFetched"),void 0===e){const e="rooms.open: You need to provide at least one JID";throw o.default.error(e),new TypeError(e)}if("string"==typeof e){const r=yield f.get(e,t,!0);return!t.hidden&&(null==r||r.maybeShow(s)),r}{const r=yield Promise.all(e.map((e=>r.get(e,t,!0))));return r.forEach((e=>!t.hidden&&e.maybeShow(s))),r}})).apply(this,arguments)},get(e){return h((function*(e,t={},s=!1){function o(e){return h((function*(){e=(0,d.getJIDFromURI)(e);let o=yield n.default.get(e);return!o&&s?o=yield n.default.create(e,t,r.default.exports.MUC):(o=o&&o.get("type")===a.CHATROOMS_TYPE?o:null,o&&Object.keys(t).length&&o.save(t)),o}))()}if(yield m("chatBoxesFetched"),void 0===e){return(yield n.default.get()).filter((e=>e.get("type")===a.CHATROOMS_TYPE))}return"string"==typeof e?o(e):Promise.all(e.map((e=>o(e))))})).apply(this,arguments)}},p={rooms:f}},"./src/headless/plugins/muc/constants.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{ACTION_INFO_CODES:()=>r,ADMIN_COMMANDS:()=>o,AFFILIATIONS:()=>i,AFFILIATION_CHANGES:()=>f,AFFILIATION_CHANGES_LIST:()=>p,DISCONNECT_CODES:()=>a,INFO_CODES:()=>b,MODERATOR_COMMANDS:()=>l,MUC_NICK_CHANGED_CODE:()=>S,MUC_ROLE_CHANGES:()=>_,MUC_ROLE_CHANGES_LIST:()=>y,MUC_ROLE_WEIGHTS:()=>m,MUC_TRAFFIC_STATES:()=>g,MUC_TRAFFIC_STATES_LIST:()=>v,NEW_NICK_CODES:()=>n,OWNER_COMMANDS:()=>d,ROLES:()=>c,ROOMSTATUS:()=>j,ROOM_FEATURES:()=>w,STATUS_CODE_STANZAS:()=>h,VISITOR_COMMANDS:()=>u});const r=["301","333","307","321","322"],n=["210","303"],o=["admin","ban","deop","destroy","member","op","revoke"],i=["owner","admin","member","outcast","none"],a=["301","333","307","321","322","332"],l=["kick","mute","voice","modtools"],d=["owner"],c=["moderator","participant","visitor"],u=["nick"],h={100:["message","presence"],101:["message"],102:["message"],103:["message"],104:["message"],110:["presence"],170:["message","presence"],171:["message"],172:["message"],173:["message"],174:["message"],201:["presence"],210:["presence"],301:["presence"],303:["presence"],307:["presence"],321:["presence"],322:["presence"],332:["presence"],333:["presence"]},m={moderator:1,participant:2,visitor:3,none:2},f={OWNER:"owner",ADMIN:"admin",MEMBER:"member",EXADMIN:"exadmin",EXOWNER:"exowner",EXOUTCAST:"exoutcast",EXMEMBER:"exmember"},p=Object.values(f),g={ENTERED:"entered",EXITED:"exited"},v=Object.values(g),_={OP:"op",DEOP:"deop",VOICE:"voice",MUTE:"mute"},y=Object.values(_),b={visibility_changes:["100","102","103","172","173","174"],self:["110"],non_privacy_changes:["104","201"],muc_logging_changes:["170","171"],nickname_changes:["210","303"],disconnected:["301","307","321","322","332","333"],affiliation_changes:[...p],join_leave_events:[...v],role_changes:[...y]},j={CONNECTED:0,CONNECTING:1,NICKNAME_REQUIRED:2,PASSWORD_REQUIRED:3,DISCONNECTED:4,ENTERED:5,DESTROYED:6,BANNED:7,CLOSING:8},w=["passwordprotected","unsecured","hidden","publicroom","membersonly","open","persistent","temporary","nonanonymous","semianonymous","moderated","unmoderated","mam_enabled","vcard-temp"],S="303"},"./src/headless/plugins/muc/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{MUC:()=>i.default,MUCMessage:()=>n.default,MUCMessages:()=>o.default,MUCOccupant:()=>a.default,MUCOccupants:()=>l.default});var r=s("./src/headless/utils/index.js"),n=s("./src/headless/plugins/muc/message.js"),o=s("./src/headless/plugins/muc/messages.js"),i=s("./src/headless/plugins/muc/muc.js"),a=s("./src/headless/plugins/muc/occupant.js"),l=s("./src/headless/plugins/muc/occupants.js"),d=(s("./src/headless/plugins/muc/plugin.js"),s("./src/headless/plugins/muc/utils.js")),c=s("./src/headless/plugins/muc/affiliations/utils.js");Object.assign(r.default,{muc:{isChatRoom:d.isChatRoom,setAffiliation:c.setAffiliation,getDefaultMUCService:d.getDefaultMUCService}})},"./src/headless/plugins/muc/message.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),n=(s("./src/headless/shared/_converse.js"),s("./src/headless/shared/api/index.js")),o=s("./src/headless/shared/message.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class a extends o.default{initialize(){super.initialize(),this.on("change:type",(()=>this.setOccupant())),this.setOccupant(),n.default.trigger("chatRoomMessageInitialized",this)}get occupants(){return"chat"===this.get("type")?this.chatbox.collection:this.chatbox.occupants}getDisplayName(){var e;return(null===(e=this.occupant)||void 0===e?void 0:e.getDisplayName())||this.get("nick")}mayBeModerated(){return(e=function*(){if(void 0!==this.get("from_muc"))return["all","moderator"].includes(n.default.settings.get("allow_message_retraction"))&&this.get(`stanza_id ${this.get("from_muc")}`)&&(yield this.chatbox.canModerateMessages())},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))}).call(this);var e}checkValidity(){const e=super.checkValidity();return!e&&this.chatbox.debouncedRejoin(),e}onOccupantRemoved(){this.stopListening(this.occupant),delete this.occupant,this.listenTo(this.occupants,"add",this.onOccupantAdded)}onOccupantAdded(e){if(this.get("occupant_id")){if(e.get("occupant_id")!==this.get("occupant_id"))return}else if(e.get("nick")!==r.Strophe.getResourceFromJid(this.get("from")))return;this.setOccupant(e)}getOccupant(){return this.occupant||this.setOccupant()}setOccupant(e){if(["groupchat","chat"].includes(this.get("type"))&&!this.isEphemeral()){if(e)this.occupant=e;else if("chat"===this.get("type")&&"them"===this.get("sender"))this.occupant=this.chatbox;else{if(this.occupant)return;const e=r.Strophe.getResourceFromJid(this.get("from")),t=this.get("occupant_id");if(this.occupant=e||t?this.occupants.findOccupant({nick:e,occupant_id:t}):null,!this.occupant){const s=this.get("from_real_jid");if(!e&&!t&&!s)return;if(this.occupant=this.occupants.create({nick:e,occupant_id:t,jid:s}),n.default.settings.get("muc_send_probes")){const t=`${this.chatbox.get("jid")}/${e}`;n.default.user.presence.send({to:t,type:"probe"})}}}return this.get("from_real_jid")!==this.occupant.get("jid")&&this.save("from_real_jid",this.occupant.get("jid")),this.trigger("occupant:add"),this.listenTo(this.occupant,"change",(e=>this.trigger("occupant:change",e))),this.listenTo(this.occupant,"vcard:add",(e=>this.trigger("occupant:change",e))),this.listenTo(this.occupant,"vcard:change",(e=>this.trigger("occupant:change",e))),this.listenTo(this.occupant,"destroy",this.onOccupantRemoved),this.stopListening(this.occupants,"add",this.onOccupantAdded),this.occupant}}}const l=a},"./src/headless/plugins/muc/messages.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/headless/plugins/muc/message.js"),n=s("./node_modules/@converse/skeletor/dist/skeletor.js");class o extends n.Collection{constructor(e,t={}){super(e,Object.assign({comparator:"time"},t)),this.model=r.default,this.fetched=null}}const i=o},"./src/headless/plugins/muc/muc.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>U});var r=s("./node_modules/lodash-es/debounce.js"),n=s("./node_modules/lodash-es/pick.js"),o=s("./node_modules/sizzle/dist/sizzle.js"),i=s.n(o),a=s("./node_modules/@converse/openpromise/dist/openpromise.js"),l=s("./node_modules/@converse/skeletor/dist/skeletor.js"),d=s("./src/log/index.js"),c=s("./src/headless/utils/parse-helpers.js"),u=s("./src/headless/shared/_converse.js"),h=s("./src/headless/shared/api/index.js"),m=s("./src/headless/shared/api/public.js"),f=s("./src/headless/plugins/muc/constants.js"),p=s("./src/headless/shared/constants.js"),g=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),v=s("./src/headless/shared/errors.js"),_=s("./src/headless/plugins/muc/affiliations/utils.js"),y=s("./src/headless/utils/storage.js"),b=s("./src/headless/shared/parsers.js"),j=s("./src/headless/utils/index.js"),w=s("./src/headless/utils/init.js"),S=s("./src/headless/utils/session.js"),x=s("./src/headless/plugins/muc/parsers.js"),E=s("./src/headless/shared/actions.js"),A=s("./src/headless/shared/chatbox.js"),O=s("./src/headless/shared/color.js"),C=s("./src/headless/shared/model-with-messages.js"),T=s("./src/headless/shared/model-with-vcard.js"),$=s("./src/headless/plugins/muc/utils.js"),k=s("./src/headless/plugins/muc/session.js");function M(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function I(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){M(o,r,n,i,a,"next",e)}function a(e){M(o,r,n,i,a,"throw",e)}i(void 0)}))}}function P(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function N(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){P(e,t,s[t])}))}return e}function D(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const{u:R,stx:z}=m.default.env;class L extends((0,T.default)((0,C.default)((0,O.default)(A.default)))){defaults(){return{bookmarked:!1,chat_state:void 0,closed:!1,has_activity:!1,hidden:(0,S.isUniView)()&&!h.default.settings.get("singleton"),hidden_occupants:!!h.default.settings.get("hide_muc_participants"),message_type:"groupchat",name:"",num_unread_general:0,num_unread:0,roomconfig:{},time_opened:this.get("time_opened")||(new Date).getTime(),time_sent:new Date(0).toISOString(),type:p.CHATROOMS_TYPE}}initialize(){var e=this,t=()=>super.initialize;return I((function*(){if(t().call(e),this.on("change:closed",(()=>{this.get("closed")||this.initialize()})),this.get("closed"))return;this.initialized=(0,a.getOpenPromise)(),this.debouncedRejoin=(0,r.default)(this.rejoin,250),this.initOccupants(),this.initDiscoModels(),this.registerHandlers(),this.on("change:chat_state",this.sendChatState,this),this.on("change:hidden",this.onHiddenChange,this),this.on("destroy",this.removeHandlers,this),yield this.restoreSession(),this.session.on("change:connection_status",this.onConnectionStatusChanged,this),this.listenTo(this.occupants,"add",this.onOccupantAdded),this.listenTo(this.occupants,"remove",this.onOccupantRemoved),this.listenTo(this.occupants,"change:presence",this.onOccupantPresenceChanged),this.listenTo(this.occupants,"change:affiliation",this.createAffiliationChangeMessage),this.listenTo(this.occupants,"change:role",this.createRoleChangeMessage);(yield this.restoreFromCache())||(yield this.join()),yield h.default.trigger("chatRoomInitialized",this,{synchronous:!0}),this.initialized.resolve()})).call(this)}isEntered(){var e;return(null===(e=this.session)||void 0===e?void 0:e.get("connection_status"))===f.ROOMSTATUS.ENTERED}isRAICandidate(){return this.get("hidden")&&h.default.settings.get("muc_subscribe_to_rai")&&"none"!==this.getOwnAffiliation()}restoreFromCache(){return I((function*(){if(this.isEntered()){if(yield this.fetchOccupants().catch((e=>d.default.error(e))),this.isRAICandidate())return this.session.save("connection_status",f.ROOMSTATUS.DISCONNECTED),this.enableRAI(),!0;if(yield this.isJoined())return yield new Promise((e=>this.config.fetch({success:e,error:e}))),yield new Promise((e=>this.features.fetch({success:e,error:e}))),yield this.fetchMessages().catch((e=>d.default.error(e))),!0}return this.session.save("connection_status",f.ROOMSTATUS.DISCONNECTED),this.clearOccupantsCache(),!1})).call(this)}join(e,t){return I((function*(){if(this.isEntered())return;this.session.save("connection_status",f.ROOMSTATUS.CONNECTING);const s=(yield this.refreshDiscoInfo())instanceof v.ItemNotFoundError;if(!(e=yield this.getAndPersistNickname(e)))return(0,w.safeSave)(this.session,{connection_status:f.ROOMSTATUS.NICKNAME_REQUIRED}),void(!s&&h.default.settings.get("muc_show_logs_before_join")&&(yield this.fetchMessages()));h.default.send(yield this.constructJoinPresence(t,s)),s&&(yield this.refreshDiscoInfo())})).call(this)}rejoin(){return this.session.save("connection_status",f.ROOMSTATUS.DISCONNECTED),this.registerHandlers(),this.clearOccupantsCache(),this.join()}constructJoinPresence(e,t){return I((function*(){const s=t||this.features.get("mam_enabled")?0:h.default.settings.get("muc_history_max_stanzas");e=e||this.get("password");const{profile:r}=u.default.state,n=r.get("show"),o=r.get("status_message"),i=z`
            <presence xmlns="jabber:client"
                      id="${(0,j.getUniqueId)()}"
                      from="${h.default.connection.get().jid}"
                      to="${this.getRoomJIDAndNick()}">
                <x xmlns="${g.Strophe.NS.MUC}">
                    <history maxstanzas="${s}"/>
                    ${e?z`<password>${e}</password>`:""}
                </x>
                ${p.PRES_SHOW_VALUES.includes(n)?z`<show>${n}</show>`:""}
                ${o?z`<status>${o}</status>`:""}
            </presence>`;return yield h.default.hook("constructedMUCPresence",this,i)})).call(this)}clearOccupantsCache(){this.occupants.length?this.occupants.filter((e=>!e.isMember())).forEach((e=>e.destroy())):this.occupants.clearStore()}sendMarkerForMessage(e,t="displayed",s=!1){if(e&&h.default.settings.get("send_chat_markers").includes(t)&&"groupchat"===(null==e?void 0:e.get("type"))){if((null==e?void 0:e.get("is_markable"))||s){const s=`stanza_id ${this.get("jid")}`,r=e.get(s);if(!r)return d.default.error(`Can't send marker for message without stanza ID: ${s}`),Promise.resolve();const n=g.Strophe.getBareJidFromJid(e.get("from"));(0,E.sendMarker)(n,r,t,e.get("type"))}return Promise.resolve()}}sendMarkerForLastMessage(e="displayed",t=!1){const s=Array.from(this.messages.models);s.reverse();const r=s.find((e=>"them"===e.get("sender")&&(t||e.get("is_markable"))));r&&this.sendMarkerForMessage(r,e,t)}enableRAI(){if(h.default.settings.get("muc_subscribe_to_rai")){const e=g.Strophe.getDomainFromJid(this.get("jid"));h.default.user.presence.send({to:e},(0,g.$build)("rai",{xmlns:g.Strophe.NS.RAI}))}}onHiddenChange(){return I((function*(){const e=f.ROOMSTATUS,t=this.session.get("connection_status");this.get("hidden")?t===e.ENTERED&&(this.setChatState(p.INACTIVE),this.isRAICandidate()&&(this.sendMarkerForLastMessage("received",!0),yield this.leave(),this.enableRAI())):(yield this.initialized,t===e.DISCONNECTED&&this.rejoin(),this.clearUnreadMsgCounter())})).call(this)}onOccupantAdded(e){(0,$.isInfoVisible)(m.default.MUC_TRAFFIC_STATES.ENTERED)&&this.session.get("connection_status")===f.ROOMSTATUS.ENTERED&&"online"===e.get("presence")&&this.updateNotifications(e.get("nick"),m.default.MUC_TRAFFIC_STATES.ENTERED)}onOccupantRemoved(e){(0,$.isInfoVisible)(m.default.MUC_TRAFFIC_STATES.EXITED)&&this.isEntered()&&"online"===e.get("presence")&&this.updateNotifications(e.get("nick"),m.default.MUC_TRAFFIC_STATES.EXITED)}onOccupantPresenceChanged(e){e.get("states").includes("303")||("offline"===e.get("presence")&&(0,$.isInfoVisible)(m.default.MUC_TRAFFIC_STATES.EXITED)?this.updateNotifications(e.get("nick"),m.default.MUC_TRAFFIC_STATES.EXITED):"online"===e.get("presence")&&(0,$.isInfoVisible)(m.default.MUC_TRAFFIC_STATES.ENTERED)&&this.updateNotifications(e.get("nick"),m.default.MUC_TRAFFIC_STATES.ENTERED))}onRoomEntered(){return I((function*(){yield this.occupants.fetchMembers(),h.default.settings.get("clear_messages_on_reconnection")?yield this.clearMessages():yield this.fetchMessages(),h.default.trigger("enteredNewRoom",this),h.default.settings.get("auto_register_muc_nickname")&&(yield h.default.disco.supports(g.Strophe.NS.MUC_REGISTER,this.get("jid")))&&this.registerNickname()})).call(this)}onConnectionStatusChanged(){return I((function*(){if(this.isEntered())if(this.isRAICandidate()){try{yield this.leave()}catch(e){d.default.error(e)}this.enableRAI()}else yield this.onRoomEntered()})).call(this)}onReconnection(){return I((function*(){yield this.rejoin(),this.announceReconnection()})).call(this)}getMessagesCollection(){return new u.default.exports.MUCMessages}restoreSession(){const e=`muc.session-${u.default.session.get("bare_jid")}-${this.get("jid")}`;return this.session=new k.default({id:e}),(0,y.initStorage)(this.session,e,"session"),new Promise((e=>this.session.fetch({success:e,error:e})))}initDiscoModels(){const e=u.default.session.get("bare_jid");let t=`converse.muc-features-${e}-${this.get("jid")}`;this.features=new l.Model(Object.assign({id:t},m.default.ROOM_FEATURES.reduce(((e,t)=>(e[t]=!1,e)),{}))),this.features.browserStorage=(0,y.createStore)(t,"session"),this.features.listenTo(u.default,"beforeLogout",(()=>this.features.browserStorage.flush())),t=`converse.muc-config-${e}-${this.get("jid")}`,this.config=new l.Model({id:t}),this.config.browserStorage=(0,y.createStore)(t,"session"),this.config.listenTo(u.default,"beforeLogout",(()=>this.config.browserStorage.flush()))}initOccupants(){this.occupants=new u.default.exports.MUCOccupants;const e=`converse.occupants-${u.default.session.get("bare_jid")}${this.get("jid")}`;this.occupants.browserStorage=(0,y.createStore)(e,"session"),this.occupants.chatroom=this,this.occupants.listenTo(u.default,"beforeLogout",(()=>this.occupants.browserStorage.flush()))}fetchOccupants(){return this.occupants.fetched=new Promise((e=>{this.occupants.fetch({add:!0,silent:!0,success:e,error:e})})),this.occupants.fetched}handleAffiliationChangedMessage(e){if(e.querySelector("body"))return;const t=i()(`x[xmlns="${g.Strophe.NS.MUC_USER}"] item`,e).pop();if(t){const s=e.getAttribute("from"),r=t.getAttribute("jid"),n={from:s,states:[],jid:g.Strophe.getBareJidFromJid(r),resource:g.Strophe.getResourceFromJid(r)},o=t.getAttribute("affiliation");o&&(n.affiliation=o);const i=t.getAttribute("role");i&&(n.role=i);const a=this.occupants.findOccupant({jid:n.jid});a?a.save(n):this.occupants.create(n)}}handleErrorMessageStanza(e){return I((function*(){const{__:t}=u.default,s=yield(0,x.parseMUCMessage)(e,this);if(R.isErrorObject(s)){const{stanza:e,message:t}=s;return e&&d.default.error(e),d.default.error(t)}const r=s;if(!(yield this.shouldShowErrorMessage(r)))return;const n=g.Strophe.getResourceFromJid(r.from),o=n?this.getOccupant(n):null,i=o||this,a=i.getMessageReferencedByError(r);if(a){const e={error:r.error,error_condition:r.error_condition,error_text:r.error_text,error_type:r.error_type,editable:!1};r.msgid===a.get("retraction_id")?(e.retracted=void 0,e.retraction_id=void 0,e.retracted_id=void 0,r.error||("forbidden"===r.error_condition?e.error=t("You're not allowed to retract your message."):"not-acceptable"===r.error_condition?e.error=t("Your retraction was not delivered because you're not present in the groupchat."):e.error=t("Sorry, an error occurred while trying to retract your message."))):r.error||("forbidden"===r.error_condition?e.error=t("Your message was not delivered because you weren't allowed to send it."):"not-acceptable"===r.error_condition?e.error=t("Your message was not delivered because you're not present in the groupchat."):e.error=t("Sorry, an error occurred while trying to send your message.")),a.save(e)}else i.createMessage(r)})).call(this)}handleMessageFromMUCHost(e){if(this.isEntered())return;const t=i()(`rai[xmlns="${g.Strophe.NS.RAI}"]`,e).pop();Array.from((null==t?void 0:t.querySelectorAll("activity"))||[]).map((e=>e.textContent)).includes(this.get("jid"))&&this.save({has_activity:!0,num_unread_general:0})}handleForwardedMentions(e){if(this.isEntered())return;const t=i()(`mentions[xmlns="${g.Strophe.NS.MENTIONS}"] forwarded[xmlns="${g.Strophe.NS.FORWARD}"] message[type="groupchat"]`,e),s=this.get("jid"),r=t.filter((e=>g.Strophe.getBareJidFromJid(e.getAttribute("from"))===s));r.length&&(this.save({has_activity:!0,num_unread:this.get("num_unread")+r.length}),r.forEach((e=>I((function*(){const t=yield(0,x.parseMUCMessage)(e,this),s={stanza:e,attrs:t,chatbox:this};h.default.trigger("message",s)})).call(this))))}handleMessageStanza(e){return I((function*(){var t,s;const r=(e=null!==(s=null===(t=e.tree)||void 0===t?void 0:t.call(e))&&void 0!==s?s:e).getAttribute("type");if("error"===r)return this.handleErrorMessageStanza(e);if("groupchat"===r){if((0,b.isArchived)(e))return d.default.warn('Received a MAM message with type "groupchat"')}else if(!r)return this.handleForwardedMentions(e);let n;try{n=yield(0,x.parseMUCMessage)(e,this)}catch(e){return d.default.error(e)}if(R.isErrorObject(n)){const{stanza:e,message:t}=n;return e&&d.default.error(e),d.default.error(t)}const o=n;"groupchat"===o.type&&(o.codes.forEach((e=>this.createInfoMessage(e))),this.fetchFeaturesIfConfigurationChanged(o));const i={stanza:e,attrs:o,chatbox:this};return h.default.trigger("message",i),o&&this.queueMessage(o)})).call(this)}registerHandlers(){const e=this.get("jid"),t=g.Strophe.getDomainFromJid(e);this.removeHandlers();const s=h.default.connection.get();this.presence_handler=s.addHandler((e=>(this.onPresence(e),!0)),null,"presence",null,null,e,{ignoreNamespaceFragment:!0,matchBareFromJid:!0}),this.domain_presence_handler=s.addHandler((e=>(this.onPresenceFromMUCHost(e),!0)),null,"presence",null,null,t),this.message_handler=s.addHandler((e=>(this.handleMessageStanza(e),!0)),null,"message",null,null,e,{matchBareFromJid:!0}),this.domain_message_handler=s.addHandler((e=>(this.handleMessageFromMUCHost(e),!0)),null,"message",null,null,t),this.affiliation_message_handler=s.addHandler((e=>(this.handleAffiliationChangedMessage(e),!0)),g.Strophe.NS.MUC_USER,"message",null,null,e)}removeHandlers(){const e=h.default.connection.get();return this.message_handler&&(null==e||e.deleteHandler(this.message_handler),delete this.message_handler),this.domain_message_handler&&(null==e||e.deleteHandler(this.domain_message_handler),delete this.domain_message_handler),this.presence_handler&&(null==e||e.deleteHandler(this.presence_handler),delete this.presence_handler),this.domain_presence_handler&&(null==e||e.deleteHandler(this.domain_presence_handler),delete this.domain_presence_handler),this.affiliation_message_handler&&(null==e||e.deleteHandler(this.affiliation_message_handler),delete this.affiliation_message_handler),this}invitesAllowed(){return h.default.settings.get("allow_muc_invitations")&&(this.features.get("open")||"owner"===this.getOwnAffiliation())}getDisplayName(){const e=this.get("name");return e?e.trim():"hidden"===h.default.settings.get("locked_muc_domain")?g.Strophe.getNodeFromJid(this.get("jid")):this.get("jid")}sendTimedMessage(e){const t=e instanceof Element?e:e.tree();let s=t.getAttribute("id");s||(s=(0,j.getUniqueId)("sendIQ"),t.setAttribute("id",s));const r=(0,a.getOpenPromise)(),n=h.default.settings.get("stanza_timeout"),o=h.default.connection.get(),i=o.addTimedHandler(n,(()=>{o.deleteHandler(l);const e=new v.TimeoutError("Timeout Error: No response from server");return r.resolve(e),!1})),l=o.addHandler((e=>{i&&o.deleteTimedHandler(i),r.resolve(e)}),null,"message",["error","groupchat"],s);return h.default.send(t),r}retractOwnMessage(e){return I((function*(){const t=u.default.__,s=e.get("editable"),r=(0,j.getUniqueId)(),n=e.get("id"),o=z`
            <message id="${r}"
                     to="${this.get("jid")}"
                     type="groupchat"
                     xmlns="jabber:client">
                <retract id="${n}" xmlns="${g.Strophe.NS.RETRACT}"/>
                <body>/me retracted a message</body>
                <store xmlns="${g.Strophe.NS.HINTS}"/>
                <fallback xmlns="${g.Strophe.NS.FALLBACK}" for="${g.Strophe.NS.RETRACT}" />
            </message>`;e.set({retracted:(new Date).toISOString(),retracted_id:n,retraction_id:r,editable:!1});const i=yield this.sendTimedMessage(o);R.isErrorStanza(i)?d.default.error(i):i instanceof v.TimeoutError&&(d.default.error(i),e.save({editable:s,error_type:"timeout",error:t("A timeout happened while trying to retract your message."),retracted:void 0,retracted_id:void 0,retraction_id:void 0}))})).call(this)}retractOtherMessage(e,t){return I((function*(){const s=e.get("editable"),r=u.default.session.get("bare_jid");e.save({moderated:"retracted",moderated_by:r,moderated_id:e.get("msgid"),moderation_reason:t,editable:!1});const n=yield this.sendRetractionIQ(e,t);return(null===n||R.isErrorStanza(n))&&e.save({editable:s,moderated:void 0,moderated_by:void 0,moderated_id:void 0,moderation_reason:void 0}),n})).call(this)}sendRetractionIQ(e,t){const s=z`
            <iq to="${this.get("jid")}" type="set" xmlns="jabber:client">
                <moderate id="${e.get(`stanza_id ${this.get("jid")}`)}" xmlns="${g.Strophe.NS.MODERATE}">
                    <retract xmlns="${g.Strophe.NS.RETRACT}"/>
                    ${t?z`<reason>${t}</reason>`:""}
                </moderate>
            </iq>`;return h.default.sendIQ(s,null,!1)}sendDestroyIQ(e,t){const s=z`
            <iq to="${this.get("jid")}" type="set" xmlns="jabber:client">
                <query xmlns="${g.Strophe.NS.MUC_OWNER}">
                    <destroy ${t?g.Stanza.unsafeXML(`jid="${g.Strophe.xmlescape(t)}"`):""}>
                        ${e?z`<reason>${e}</reason>`:""}
                    </destroy>
                </query>
            </iq>`;return h.default.sendIQ(s)}leave(e){return I((function*(){var t;h.default.user.presence.send({type:"unavailable",to:this.getRoomJIDAndNick(),status:e}),(0,w.safeSave)(this.session,{connection_status:f.ROOMSTATUS.DISCONNECTED}),this.features&&(yield new Promise((e=>this.features.destroy({success:e,error:(t,s)=>{d.default.error(s),e()}}))));const s=null===(t=u.default.state.disco_entities)||void 0===t?void 0:t.get(this.get("jid"));s&&(yield new Promise((e=>s.destroy({success:e,error:(t,s)=>{d.default.error(s),e()}}))))})).call(this)}close(e){var t=this,s=()=>super.close;return I((function*(){const{ENTERED:r,CLOSING:n}=f.ROOMSTATUS,o=this.session.get("connection_status")===r;(0,w.safeSave)(this.session,{connection_status:n}),o&&this.sendMarkerForLastMessage("received",!0),yield this.leave(),this.occupants.clearStore();return"closeAllChatBoxes"!==(null==e?void 0:e.name)&&(yield this.unregisterNickname(),h.default.settings.get("muc_clear_messages_on_leave")&&this.clearMessages(),h.default.trigger("leaveRoom",this)),yield new Promise((e=>this.session.destroy({success:e,error:(t,s)=>{d.default.error(s),e()}}))),s().call(t)})).call(this)}canModerateMessages(){const e=this.getOwnOccupant();return e&&e.isModerator()&&h.default.disco.supports(g.Strophe.NS.MODERATE,this.get("jid"))}canPostMessages(){return this.isEntered()&&!(this.features.get("moderated")&&"visitor"===this.getOwnRole())}isChatMessage(e){return e.get("type")===this.get("message_type")}getAllKnownNicknames(){return[...new Set([...this.occupants.map((e=>e.get("nick"))),...this.messages.map((e=>e.get("nick")))])].filter((e=>e))}getAllKnownNicknamesRegex(){const e=this.getAllKnownNicknames().map((e=>c.default.escapeRegexString(e))).join("|");return RegExp(`(?:\\p{P}|\\p{Z}|^)@(${e})(?![\\w@-])`,"uig")}getOccupantByJID(e){return this.occupants.findOccupant({jid:e})}getOccupantByNickname(e){return this.occupants.findOccupant({nick:e})}getReferenceURIFromNickname(e){const t=this.get("jid"),s=this.getOccupant(e),r=this.features.get("nonanonymous")&&(null==s?void 0:s.get("jid"))||`${t}/${e}`;return encodeURI(`xmpp:${r}`)}parseTextForReferences(e){const t=RegExp("(\\p{P}|\\p{Z}|^)([@][\\w_-]+(?:\\.\\w+)*)","giu");if(!e||!t.test(e))return[e,[]];const s=c.default.findFirstMatchInArray(this.getAllKnownNicknames()),r=this.getAllKnownNicknamesRegex(),n=[...e.matchAll(r)].filter((e=>!e[0].startsWith("/"))).map((e=>{let t=e[0].indexOf("@");"@"===e[0][t+1]&&(t+=1);const r=e.index+t,n=r+e[0].length-t,o=s(e[1]);return{begin:r,end:n,value:o,type:"mention",uri:this.getReferenceURIFromNickname(o)}})),[o,i]=c.default.reduceTextFromReferences(e,n);return[o,i]}getOutgoingMessageAttributes(e){return I((function*(){const t=this.get("composing_spoiler");let s,r="";(null==e?void 0:e.body)&&([r,s]=this.parseTextForReferences(e.body));const n=(0,j.getUniqueId)(),o=r?R.shortnamesToUnicode(r):void 0;return e=Object.assign({},e,{body:o,is_spoiler:t,origin_id:n,references:s,id:n,msgid:n,from:`${this.get("jid")}/${this.get("nick")}`,fullname:this.get("nick"),message:o,nick:this.get("nick"),sender:"me",type:"groupchat",original_text:r},yield R.getMediaURLsMetadata(r)),e=yield h.default.hook("getOutgoingMessageAttributes",this,e)})).call(this)}getRoomJIDAndNick(){const e=this.get("nick");return g.Strophe.getBareJidFromJid(this.get("jid"))+(null!==e?`/${e}`:"")}sendChatState(){if(!h.default.settings.get("send_chat_state_notifications")||!this.get("chat_state")||!this.isEntered()||this.features.get("moderated")&&"visitor"===this.getOwnRole())return;const e=h.default.settings.get("send_chat_state_notifications");if(Array.isArray(e)&&!e.includes(this.get("chat_state")))return;const t=this.get("chat_state");t!==p.GONE&&h.default.send(z`
            <message to="${this.get("jid")}" type="groupchat" xmlns="jabber:client">
                ${t===p.INACTIVE?z`<inactive xmlns="${g.Strophe.NS.CHATSTATES}"/>`:""}
                ${t===p.ACTIVE?z`<active xmlns="${g.Strophe.NS.CHATSTATES}"/>`:""}
                ${t===p.COMPOSING?z`<composing xmlns="${g.Strophe.NS.CHATSTATES}"/>`:""}
                ${t===p.PAUSED?z`<paused xmlns="${g.Strophe.NS.CHATSTATES}"/>`:""}
                <no-store xmlns="${g.Strophe.NS.HINTS}"/>
                <no-permanent-store xmlns="${g.Strophe.NS.HINTS}"/>
            </message>`)}directInvite(e,t){this.features.get("membersonly")&&this.updateMemberLists([{jid:e,affiliation:"member",reason:t}]);const s=z`
            <message xmlns="jabber:client" to="${e}" id="${(0,j.getUniqueId)()}">
                <x xmlns="jabber:x:conference"
                    jid="${this.get("jid")}"
                    ${this.get("password")?g.Stanza.unsafeXML(`password="${g.Strophe.xmlescape(this.get("password"))}"`):""}
                    ${t?g.Stanza.unsafeXML(`reason="${g.Strophe.xmlescape(t)}"`):""} />
            </message>`;h.default.send(s),h.default.trigger("roomInviteSent",{room:this,recipient:e,reason:t})}refreshDiscoInfo(){return I((function*(){const e=yield h.default.disco.refresh(this.get("jid"));return e instanceof v.StanzaError?e:this.getDiscoInfo().catch((e=>d.default.error(e)))})).call(this)}getDiscoInfo(){return I((function*(){const e=yield h.default.disco.getIdentity("conference","text",this.get("jid"));(null==e?void 0:e.get("name"))?this.save({name:e.get("name")}):d.default.error(`No identity or name found for ${this.get("jid")}`),yield this.getDiscoInfoFields(),yield this.getDiscoInfoFeatures()})).call(this)}getDiscoInfoFields(){return I((function*(){const e=(yield h.default.disco.getFields(this.get("jid"))).reduce(((e,t)=>{const s=t.get("var");return"muc#roomconfig_roomname"===s&&(e.roomname=t.get("value")),(null==s?void 0:s.startsWith("muc#roominfo_"))&&(e[s.replace("muc#roominfo_","")]=t.get("value")),e}),{});this.config.save(e),e.roomname&&this.save({name:e.roomname})})).call(this)}getDiscoInfoFeatures(){return I((function*(){const e=yield h.default.disco.getFeatures(this.get("jid")),t=m.default.ROOM_FEATURES.reduce(((e,t)=>(e[t]=!1,e)),{fetched:(new Date).toISOString()});e.each((e=>{const s=e.get("var");s.startsWith("muc_")?t[s.replace("muc_","")]=!0:s===g.Strophe.NS.MAM?t.mam_enabled=!0:t[s]=!0})),this.features.save(t)})).call(this)}addFieldValue(e){const t=e.getAttribute("type");if("fixed"===t)return e;const s=e.getAttribute("var").replace("muc#roomconfig_",""),r=this.get("roomconfig");if(s in r){let n;switch(t){case"boolean":n=[r[s]?1:0];break;case"list-multi":n=r[s];break;default:n=[r[s]]}e.innerHTML=n.map((e=>(0,g.$build)("value").t(e))).join("")}return e}autoConfigureChatRoom(){return I((function*(){const e=yield this.fetchRoomConfiguration(),t=i()("field",e).map((e=>this.addFieldValue(e)));if(t.length)return this.sendConfiguration(t)})).call(this)}fetchRoomConfiguration(){return h.default.sendIQ(z`
            <iq to="${this.get("jid")}" type="get" xmlns="jabber:client">
                <query xmlns="${g.Strophe.NS.MUC_OWNER}"/>
            </iq>`)}sendConfiguration(e=[]){const t=z`
            <iq to="${this.get("jid")}" type="set" xmlns="jabber:client">
                <query xmlns="${g.Strophe.NS.MUC_OWNER}">
                    <x xmlns="${g.Strophe.NS.XFORM}" type="submit">
                        ${e.map((e=>g.Strophe.Builder.fromString(e.outerHTML)))}
                    </x>
                </query>
            </iq>`;return h.default.sendIQ(t)}onCommandError(e){const{__:t}=u.default;d.default.fatal(e);const s=t("Sorry, an error happened while running the command.")+" "+t("Check your browser's developer console for details.");this.createMessage({message:s,type:"error"})}getNickOrJIDFromCommandArgs(e){const{__:t}=u.default;if(R.isValidJID(e.trim()))return e.trim();e.startsWith("@")||(e="@"+e);const s=this.parseTextForReferences(e)[1];if(!s.length){const e=t("Error: couldn't find a groupchat participant based on your arguments");return void this.createMessage({message:e,type:"error"})}if(s.length>1){const e=t("Error: found multiple groupchat participant based on your arguments");return void this.createMessage({message:e,type:"error"})}const r=s.pop().value,n=e.split(r,2)[1];if(!n||n.startsWith(" "))return r;{const e=t("Error: couldn't find a groupchat participant based on your arguments");this.createMessage({message:e,type:"error"})}}validateRoleOrAffiliationChangeArgs(e,t){const{__:s}=u.default;if(!t){const t=s('Error: the "%1$s" command takes two arguments, the user\'s nickname and optionally a reason.',e);return this.createMessage({message:t,type:"error"}),!1}return!0}getAllowedCommands(){let e=["clear","help","me","nick","register"];(this.config.get("changesubject")||["owner","admin"].includes(this.getOwnAffiliation()))&&(e=[...e,"subject","topic"]);const t=u.default.session.get("bare_jid"),s=this.occupants.findWhere({jid:t});return this.verifyAffiliations(["owner"],s,!1)?e=e.concat(f.OWNER_COMMANDS).concat(f.ADMIN_COMMANDS):this.verifyAffiliations(["admin"],s,!1)&&(e=e.concat(f.ADMIN_COMMANDS)),this.verifyRoles(["moderator"],s,!1)?e=e.concat(f.MODERATOR_COMMANDS).concat(f.VISITOR_COMMANDS):this.verifyRoles(["visitor","participant","moderator"],s,!1)||(e=e.concat(f.VISITOR_COMMANDS)),e.sort(),Array.isArray(h.default.settings.get("muc_disable_slash_commands"))?e.filter((e=>!h.default.settings.get("muc_disable_slash_commands").includes(e))):e}verifyAffiliations(e,t,s=!0){const{__:r}=u.default;if(!Array.isArray(e))throw new TypeError("affiliations must be an Array");if(!e.length)return!0;const n=u.default.session.get("bare_jid");if(t=t||this.occupants.findWhere({jid:n})){const s=t.get("affiliation");if(e.includes(s))return!0}if(s){const e=r("Forbidden: you do not have the necessary affiliation in order to do that.");this.createMessage({message:e,type:"error"})}return!1}verifyRoles(e,t,s=!0){const{__:r}=u.default;if(!Array.isArray(e))throw new TypeError("roles must be an Array");if(!e.length)return!0;const n=u.default.session.get("bare_jid");if(t=t||this.occupants.findWhere({jid:n})){const s=t.get("role");if(e.includes(s))return!0}if(s){const e=r("Forbidden: you do not have the necessary role in order to do that.");this.createMessage({message:e,type:"error",is_ephemeral:2e4})}return!1}getOwnRole(){var e;return null===(e=this.getOwnOccupant())||void 0===e?void 0:e.get("role")}getOwnAffiliation(){var e;return(null===(e=this.getOwnOccupant())||void 0===e?void 0:e.get("affiliation"))||"none"}getOwnOccupant(){return this.occupants.getOwnOccupant()}setNickname(e){return I((function*(){const t=g.Strophe.getBareJidFromJid(this.get("jid"));h.default.send(z`<presence xmlns="jabber:client"
                    id="${(0,j.getUniqueId)()}"
                    from="${h.default.connection.get().jid}"
                    to="${t}/${e}"></presence>`)})).call(this)}setRole(e,t,s,r,n){const o=z`
            <iq to="${this.get("jid")}" type="set" xmlns="jabber:client">
                <query xmlns="${g.Strophe.NS.MUC_ADMIN}">
                    <item nick="${e.get("nick")}" role="${t}">
                        ${null!==s?z`<reason>${s}</reason>`:""}
                    </item>
                </query>
            </iq>`;return h.default.sendIQ(o).then(r).catch(n)}getOccupant(e){return R.isValidJID(e)?this.getOccupantByJID(e):this.getOccupantByNickname(e)}getOccupantsWithRole(e){return this.getOccupantsSortedBy("nick").filter((t=>t.get("role")===e)).map((e=>({jid:e.get("jid"),nick:e.get("nick"),role:e.get("role")})))}getOccupantsWithAffiliation(e){return this.getOccupantsSortedBy("nick").filter((t=>t.get("affiliation")===e)).map((e=>({jid:e.get("jid"),nick:e.get("nick"),affiliation:e.get("affiliation")})))}getOccupantsSortedBy(e){return Array.from(this.occupants.models).sort(((t,s)=>t.get(e)<s.get(e)?-1:t.get(e)>s.get(e)?1:0))}updateMemberLists(e){return I((function*(){const t=this.get("jid"),s=(yield Promise.all(["member","admin","owner"].map((e=>(0,_.getAffiliationList)(e,t))))).reduce(((e,t)=>t instanceof Error?(d.default.error(t),e):[...t,...e]),[]);yield(0,_.setAffiliations)(t,(0,_.computeAffiliationsDelta)(!0,!1,e,s)),yield this.occupants.fetchMembers()})).call(this)}getNicknameFromHook(){return I((function*(){return yield h.default.hook("getNicknameForMUC",this,null)})).call(this)}getAndPersistNickname(e){return I((function*(){return(e=e||this.get("nick")||(yield this.getReservedNick())||(yield this.getNicknameFromHook())||u.default.exports.getDefaultMUCNickname())&&(0,w.safeSave)(this,{nick:e},{silent:!0}),e})).call(this)}getReservedNick(){return I((function*(){const e=z`
            <iq to="${this.get("jid")}" type="get" xmlns="jabber:client">
                <query xmlns="${g.Strophe.NS.DISCO_INFO}" node="x-roomuser-item"/>
            </iq>`,t=yield h.default.sendIQ(e,null,!1);if(R.isErrorObject(t))throw t;const s=null==t?void 0:t.querySelector('query[node="x-roomuser-item"] identity');return s?s.getAttribute("name"):null})).call(this)}registerNickname(){return I((function*(){const{__:e}=u.default,t=this.get("nick"),s=this.get("jid");let r,n;try{r=yield h.default.sendIQ(z`<iq to="${s}" type="get" xmlns="jabber:client">
                    <query xmlns="${g.Strophe.NS.MUC_REGISTER}"/>
                </iq>`)}catch(t){return i()(`not-allowed[xmlns="${g.Strophe.NS.STANZAS}"]`,t).length?n=e("You're not allowed to register yourself in this groupchat."):i()(`registration-required[xmlns="${g.Strophe.NS.STANZAS}"]`,t).length&&(n=e("You're not allowed to register in this groupchat because it's members-only.")),d.default.error(t),n}const o=i()("field required",r).map((e=>e.parentElement));if(o.length>1&&"muc#register_roomnick"!==o[0].getAttribute("var"))return d.default.error(`Can't register the user register in the groupchat ${s} due to the required fields`);try{yield h.default.sendIQ(z`<iq to="${s}" type="set" xmlns="jabber:client">
                    <query xmlns="${g.Strophe.NS.MUC_REGISTER}">
                        <x xmlns="${g.Strophe.NS.XFORM}" type="submit">
                            <field var="FORM_TYPE">
                                <value>http://jabber.org/protocol/muc#register</value>
                            </field>
                            <field var="muc#register_roomnick">
                                <value>${t}</value>
                            </field>
                        </x>
                    </query>
                </iq>`)}catch(e){const t=yield(0,b.parseErrorStanza)(e);throw"service-unavailable"===(null==t?void 0:t.name)?d.default.error("Can't register your nickname in this groupchat, it doesn't support registration."):"bad-request"===(null==t?void 0:t.name)?d.default.error("Can't register your nickname in this groupchat, invalid data form supplied."):d.default.error(e),t}})).call(this)}unregisterNickname(){return I((function*(){if("unregister"===h.default.settings.get("auto_register_muc_nickname"))try{(yield h.default.disco.supports(g.Strophe.NS.MUC_REGISTER,this.get("jid")))&&(yield this.sendUnregistrationIQ())}catch(e){d.default.error(e)}})).call(this)}sendUnregistrationIQ(){const e=z`
            <iq to="${this.get("jid")}" type="set" xmlns="jabber:client">
                <query xmlns="${g.Strophe.NS.MUC_REGISTER}">
                    <remove/>
                </query>
            </iq>`;return h.default.sendIQ(e).catch((e=>d.default.error(e)))}updateOccupantsOnPresence(e){var t,s;if("error"===e.type||!e.jid&&!e.nick&&!e.occupant_id)return!0;const r=this.occupants.findOccupant(e);if("unavailable"===e.type&&r&&!e.codes.includes(m.default.MUC_NICK_CHANGED_CODE)&&!["admin","owner","member"].includes(e.affiliation))return r.set(D(N({},e),{presence:"offline"})),void r.destroy();const n="unavailable"!==e.type?"online":"offline",o=e.jid||"",i=D(N({},e),{presence:n,jid:g.Strophe.getBareJidFromJid(o)||(null==r||null===(t=r.attributes)||void 0===t?void 0:t.jid),resource:g.Strophe.getResourceFromJid(o)||(null==r||null===(s=r.attributes)||void 0===s?void 0:s.resource)});if(e.is_self){let t=!1;e.codes.includes(m.default.MUC_NICK_CHANGED_CODE)&&(t=!0,this.set("nick",e.nick)),this.features.get(g.Strophe.NS.OCCUPANTID)&&this.get("occupant-id")!==e.occupant_id&&(t=!0,this.set("occupant_id",e.occupant_id)),t&&this.save()}r?r.save(i):this.occupants.create(i)}fetchFeaturesIfConfigurationChanged(e){const t=["104","170","171","172","173","174"];e.codes.filter((e=>t.includes(e))).length&&this.refreshDiscoInfo()}isSameUser(e,t){const s=g.Strophe.getBareJidFromJid(e),r=g.Strophe.getBareJidFromJid(t),n=g.Strophe.getResourceFromJid(e),o=g.Strophe.getResourceFromJid(t);if(R.isSameBareJID(e,t))return s!==this.get("jid")||n===o;return(s===this.get("jid")?this.occupants.findOccupant({nick:n}):this.occupants.findOccupant({jid:s}))===(r===this.get("jid")?this.occupants.findOccupant({nick:o}):this.occupants.findOccupant({jid:r}))}isSubjectHidden(){return I((function*(){return(yield h.default.user.settings.get("mucs_with_hidden_subject",[])).includes(this.get("jid"))})).call(this)}toggleSubjectHiddenState(){return I((function*(){const e=this.get("jid"),t=yield h.default.user.settings.get("mucs_with_hidden_subject",[]);t.includes(this.get("jid"))?h.default.user.settings.set("mucs_with_hidden_subject",t.filter((t=>t!==e))):h.default.user.settings.set("mucs_with_hidden_subject",[...t,e])})).call(this)}handleSubjectChange(e){return I((function*(){const t=u.default.__;if("string"==typeof e.subject&&!e.thread&&!e.message){const s=e.subject,r=e.nick;if((0,w.safeSave)(this,{subject:{author:r,text:e.subject||""}}),!e.is_delayed&&r){const n=t(s?"Topic set by %1$s":"Topic cleared by %1$s",r),o=this.messages.last();(null==o?void 0:o.get("nick"))===e.nick&&"info"===(null==o?void 0:o.get("type"))&&(null==o?void 0:o.get("message"))===n||this.createMessage({message:n,nick:e.nick,type:"info",is_ephemeral:!0}),(yield this.isSubjectHidden())&&this.toggleSubjectHiddenState()}return!0}return!1})).call(this)}setSubject(e=""){h.default.send(z`
            <message to="${this.get("jid")}" type="groupchat" xmlns="jabber:client">
                <subject>${e}</subject>
            </message>`)}ignorableCSN(e){return e.chat_state&&!e.body&&(e.is_delayed||this.isOwnMessage(e))}isOwnMessage(e){let t;return t=e instanceof Element?e.getAttribute("from"):e instanceof u.default.exports.MUCMessage?e.get("from"):e.from,g.Strophe.getResourceFromJid(t)==this.get("nick")}getUpdatedMessageAttributes(e,t){const s=N({},super.getUpdatedMessageAttributes(e,t),(0,n.default)(t,["from_muc","occupant_id"]));if(this.isOwnMessage(t)){const r=Object.keys(t).filter((e=>e.startsWith("stanza_id")));Object.assign(s,N({},(0,n.default)(t,r)),{body:t.body}),e.get("received")||(s.received=(new Date).toISOString())}return s}isJoined(){return I((function*(){return this.isEntered()?(h.default.connection.connected()||(yield new Promise((e=>h.default.listen.once("reconnected",e)))),h.default.ping(`${this.get("jid")}/${this.get("nick")}`)):(d.default.info(`isJoined: not pinging MUC ${this.get("jid")} since we're not entered`),!1)})).call(this)}sendStatusPresence(e,t){return I((function*(){if(this.session.get("connection_status")===f.ROOMSTATUS.ENTERED){const s=yield u.default.state.profile.constructPresence(D(N({},e),{to:`${this.get("jid")}/${this.get("nick")}`}),null==t?void 0:t.map((e=>{var t;return null!==(t=null==e?void 0:e.tree())&&void 0!==t?t:e})));h.default.send(s)}})).call(this)}rejoinIfNecessary(){return I((function*(){return this.isRAICandidate()?(d.default.debug(`rejoinIfNecessary: not rejoining hidden MUC "${this.get("jid")}" since we're using RAI`),!0):(yield this.isJoined())?void 0:(this.rejoin(),!0)})).call(this)}shouldShowErrorMessage(e){var t=this,s=()=>super.shouldShowErrorMessage;return I((function*(){if("Decryption"===e.error_type){if("Message key not found. The counter was repeated or the key was not filled."===e.error_message)return!1;if("not-encrypted-for-this-device"===e.error_condition)return!1}else if("not-acceptable"===e.error_condition&&(yield this.rejoinIfNecessary()))return!1;return s().call(t,e)})).call(this)}findDanglingModeration(e){if(!this.messages.length)return null;if(this.messages.last().get("time")>e.time){const t=Array.from(this.messages.models),s=e[`stanza_id ${this.get("jid")}`];return s?(t.reverse(),t.find((({attributes:e})=>"retracted"===e.moderated&&e.moderated_id===s&&e.moderated_by))):null}}handleModeration(e){return I((function*(){const t=["editable","moderated","moderated_by","moderated_by_id","moderated_id","moderation_reason"];if("retracted"===e.moderated){const s={};s[`stanza_id ${this.get("jid")}`]=e.moderated_id;const r=this.messages.findWhere(s);return r?(r.save((0,n.default)(e,t)),!0):(e.dangling_moderation=!0,yield this.createMessage(e),!0)}{const s=this.findDanglingModeration(e);if(s){const r=(0,n.default)(s.attributes,t),o=Object.assign({dangling_moderation:!1},e,r);return delete o.id,s.save(o),!0}}return!1})).call(this)}getNotificationsText(){const{__:e}=u.default,t=this.notifications.toJSON(),s=h.default.settings.get("muc_show_info_messages").filter((e=>m.default.MUC_ROLE_CHANGES_LIST.includes(e))),r=h.default.settings.get("muc_show_info_messages").filter((e=>m.default.MUC_TRAFFIC_STATES_LIST.includes(e)));return[...m.default.CHAT_STATES,...r,...s].reduce(((s,r)=>{const n=t[r];if(!(null==n?void 0:n.length))return s;const o=n.map((e=>{var t;return(null===(t=this.getOccupant(e))||void 0===t?void 0:t.getDisplayName())||e}));if(1===o.length){if("composing"===r)return`${s}${e("%1$s is typing",o[0])}\n`;if("paused"===r)return`${s}${e("%1$s has stopped typing",o[0])}\n`;if(r===p.GONE)return`${s}${e("%1$s has gone away",o[0])}\n`;if("entered"===r)return`${s}${e("%1$s has entered the groupchat",o[0])}\n`;if("exited"===r)return`${s}${e("%1$s has left the groupchat",o[0])}\n`;if("op"===r)return`${s}${e("%1$s is now a moderator",o[0])}\n`;if("deop"===r)return`${s}${e("%1$s is no longer a moderator",o[0])}\n`;if("voice"===r)return`${s}${e("%1$s has been given a voice",o[0])}\n`;if("mute"===r)return`${s}${e("%1$s has been muted",o[0])}\n`}else if(o.length>1){let t;if(o.length>3)t=`${Array.from(o).slice(0,2).join(", ")} and others`;else{const s=o.pop();t=e("%1$s and %2$s",o.join(", "),s)}if("composing"===r)return`${s}${e("%1$s are typing",t)}\n`;if("paused"===r)return`${s}${e("%1$s have stopped typing",t)}\n`;if(r===p.GONE)return`${s}${e("%1$s have gone away",t)}\n`;if("entered"===r)return`${s}${e("%1$s have entered the groupchat",t)}\n`;if("exited"===r)return`${s}${e("%1$s have left the groupchat",t)}\n`;if("op"===r)return`${s}${e("%1$s are now moderators",o[0])}\n`;if("deop"===r)return`${s}${e("%1$s are no longer moderators",o[0])}\n`;if("voice"===r)return`${s}${e("%1$s have been given voices",o[0])}\n`;if("mute"===r)return`${s}${e("%1$s have been muted",o[0])}\n`}return s}),"")}removeNotification(e,t){const s=this.notifications.toJSON();(t=Array.isArray(t)?t:[t]).forEach((t=>{const r=Array.from(s[t]||[]);if(r.includes(e)){const s=r.indexOf(e);r.splice(s,1),this.notifications.set(t,Array.from(r))}}))}updateNotifications(e,t){const s=this.notifications.toJSON(),r=s[t]||[];if(r.includes(e))return;const n=(n,o)=>(n[o]=o===t?[...r,e]:(s[o]||[]).filter((t=>t!==e)),n),o=m.default.CHAT_STATES.reduce(n,{}),i=m.default.MUC_TRAFFIC_STATES_LIST.reduce(n,{}),a=m.default.MUC_ROLE_CHANGES_LIST.reduce(n,{});this.notifications.set(Object.assign(o,i,a)),setTimeout((()=>this.removeNotification(e,t)),1e4)}handleMUCPrivateMessage(e){if("chat"===e.type||null===e.type){const t=this.occupants.findOccupant(e);if(t)return t.queueMessage(e)}return!1}handleMetadataFastening(e){if(e.ogp_for_id){if(e.from!==this.get("jid"))return!1;const t=this.messages.findWhere({origin_id:e.ogp_for_id});if(t){const s=t.get("ogp_metadata")||[];if(s.filter((t=>t["og:url"]===e["og:url"])).length)return!1;const r=[...s,(0,n.default)(e,p.METADATA_ATTRIBUTES)];return t.save("ogp_metadata",r),!0}}return!1}handleMEPNotification(e){var t;return!(e.from!==this.get("jid")||!e.activities)&&(null===(t=e.activities)||void 0===t||t.forEach((t=>{const s=Object.assign(e,t);this.createMessage(s),h.default.trigger("message",{attrs:s,chatbox:this})})),!!e.activities.length)}getDuplicateMessage(e){var t;return(null===(t=e.activities)||void 0===t?void 0:t.length)?this.messages.findWhere({type:"mep",msgid:e.msgid}):super.getDuplicateMessage(e)}onMessage(e){return I((function*(){if(R.isErrorObject(e))return d.default.error(e.message);const t=e;if("error"===t.type&&!(yield this.shouldShowErrorMessage(t)))return;const s=this.getDuplicateMessage(t);if(s)"groupchat"===s.get("type")&&this.updateMessage(s,t);else if(!(t.receipt_id||t.is_marker||this.ignorableCSN(t)))if(this.handleMUCPrivateMessage(t)||this.handleMetadataFastening(t)||this.handleMEPNotification(t)||(yield this.handleModeration(t))||(yield this.handleRetraction(t))||(yield this.handleSubjectChange(t)))t.nick&&this.removeNotification(t.nick,["composing","paused"]);else if(this.setEditable(t,t.time),t.chat_state&&this.updateNotifications(t.nick,t.chat_state),(0,$.shouldCreateGroupchatMessage)(t)){const e=(yield this.handleCorrection(t))||(yield this.createMessage(t));this.removeNotification(t.nick,["composing","paused"]),this.handleUnreadMessage(e)}})).call(this)}handleModifyError(e){var t;const s=null===(t=e.querySelector("error text"))||void 0===t?void 0:t.textContent;if(s)if(this.session.get("connection_status")===f.ROOMSTATUS.CONNECTING)this.setDisconnectionState(s);else{const e={type:"error",message:s,is_ephemeral:!0};this.createMessage(e)}}handleDisconnection(e){const{is_self:t,reason:s,actor:r}=e,n=e.codes.filter((e=>f.DISCONNECT_CODES.includes(e)));if(!(t&&n.length>0))return;const{STATUS_CODE_MESSAGES:o}=u.default.labels.muc,i=o[n[0]],a=n.includes("301")?f.ROOMSTATUS.BANNED:f.ROOMSTATUS.DISCONNECTED;this.setDisconnectionState(i,s,null==r?void 0:r.nick,a)}getActionInfoMessage(e,t){const{nick:s,actor:r}=t,n=u.default.__;return"301"===e?(null==r?void 0:r.nick)?n("%1$s has been banned by %2$s",s,r.nick):n("%1$s has been banned",s):"303"===e?n("%1$s's nickname has changed",s):"307"===e?(null==r?void 0:r.nick)?n("%1$s has been kicked out by %2$s",s,r.nick):n("%1$s has been kicked out",s):"321"===e?n("%1$s has been removed because of an affiliation change",s):"322"===e?n("%1$s has been removed for not being a member",s):void 0}createAffiliationChangeMessage(e){const t=u.default.__,s=e._previousAttributes.affiliation;if(!s)return;const r=e.get("affiliation");"admin"===s&&(0,$.isInfoVisible)(m.default.AFFILIATION_CHANGES.EXADMIN)?this.createMessage({type:"info",message:t("%1$s is no longer an admin of this groupchat",e.get("nick"))}):"owner"===s&&(0,$.isInfoVisible)(m.default.AFFILIATION_CHANGES.EXOWNER)?this.createMessage({type:"info",message:t("%1$s is no longer an owner of this groupchat",e.get("nick"))}):"outcast"===s&&(0,$.isInfoVisible)(m.default.AFFILIATION_CHANGES.EXOUTCAST)&&this.createMessage({type:"info",message:t("%1$s is no longer banned from this groupchat",e.get("nick"))}),"none"===r&&"member"===s&&(0,$.isInfoVisible)(m.default.AFFILIATION_CHANGES.EXMEMBER)&&this.createMessage({type:"info",message:t("%1$s is no longer a member of this groupchat",e.get("nick"))}),"member"===r&&(0,$.isInfoVisible)(m.default.AFFILIATION_CHANGES.MEMBER)?this.createMessage({type:"info",message:t("%1$s is now a member of this groupchat",e.get("nick"))}):("admin"===r&&(0,$.isInfoVisible)(m.default.AFFILIATION_CHANGES.ADMIN)||"owner"==r&&(0,$.isInfoVisible)(m.default.AFFILIATION_CHANGES.OWNER))&&this.createMessage({type:"info",message:t("%1$s is now an %2$s of this groupchat",e.get("nick"),r)})}createRoleChangeMessage(e,t){if("none"===t||e.changed.affiliation)return;const s=e._previousAttributes.role;"moderator"===s&&(0,$.isInfoVisible)(m.default.MUC_ROLE_CHANGES.DEOP)?this.updateNotifications(e.get("nick"),m.default.MUC_ROLE_CHANGES.DEOP):"visitor"===s&&(0,$.isInfoVisible)(m.default.MUC_ROLE_CHANGES.VOICE)&&this.updateNotifications(e.get("nick"),m.default.MUC_ROLE_CHANGES.VOICE),"visitor"===e.get("role")&&(0,$.isInfoVisible)(m.default.MUC_ROLE_CHANGES.MUTE)?this.updateNotifications(e.get("nick"),m.default.MUC_ROLE_CHANGES.MUTE):"moderator"===e.get("role")&&!["owner","admin"].includes(e.get("affiliation"))&&(0,$.isInfoVisible)(m.default.MUC_ROLE_CHANGES.OP)&&this.updateNotifications(e.get("nick"),m.default.MUC_ROLE_CHANGES.OP)}createInfoMessageFromPresence(e,t){const s=u.default.__;var r;const n=null!==(r=t.is_self)&&void 0!==r&&r;if(!$.isInfoVisible||"110"===e||"100"===e&&!n)return;const{STATUS_CODE_MESSAGES:o}=u.default.labels.muc,i=o[e],a={type:"info",is_ephemeral:!0,message:i,code:e};if(!n&&f.ACTION_INFO_CODES.includes(e)?(a.message=this.getActionInfoMessage(e,t),a.reason=t.reason):n&&f.NEW_NICK_CODES.includes(e)&&(a.message=t.nick?s(i,t.nick):void 0),a.message){if("201"===e&&this.messages.findWhere(a))return;this.createMessage(a)}}createInfoMessage(e){if(!(0,$.isInfoVisible)(e)||"110"===e)return;const{STATUS_CODE_MESSAGES:t}=u.default.labels.muc,s=t[e];s&&this.createMessage({type:"info",is_ephemeral:!0,message:s,code:e})}setDisconnectionState(e,t,s,r=f.ROOMSTATUS.DISCONNECTED){this.session.save({connection_status:r,disconnection_actor:s,disconnection_message:e,disconnection_reason:t})}onNicknameClash(e){const t=u.default.__;if(h.default.settings.get("muc_nickname_from_jid")){const t=e.getAttribute("from").split("/")[1];if(t===u.default.exports.getDefaultMUCNickname())this.join(t+"-2");else{const e=t.lastIndexOf("-"),s=t.substring(e+1,t.length);this.join(t.substring(0,e+1)+String(Number(s)+1))}}else this.save({nickname_validation_message:t("The nickname you chose is reserved or currently in use, please choose a different one.")}),this.session.save({connection_status:f.ROOMSTATUS.NICKNAME_REQUIRED})}onErrorPresence(e){var t;const s=u.default.__,r=e.querySelector("error"),n=r.getAttribute("type"),o=null===(t=i()(`text[xmlns="${g.Strophe.NS.STANZAS}"]`,r).pop())||void 0===t?void 0:t.textContent;if("modify"===n)this.handleModifyError(e);else if("auth"===n){if(i()(`not-authorized[xmlns="${g.Strophe.NS.STANZAS}"]`,r).length&&(this.save({password_validation_message:o||s("Password incorrect")}),this.session.save({connection_status:f.ROOMSTATUS.PASSWORD_REQUIRED})),r.querySelector("registration-required")){const e=s("You are not on the member list of this groupchat.");this.setDisconnectionState(e,o)}else if(r.querySelector("forbidden")){const{STATUS_CODE_MESSAGES:e}=u.default.labels.muc;this.setDisconnectionState(e[301],o,null,f.ROOMSTATUS.BANNED)}}else if("cancel"===n)if(r.querySelector("not-allowed")){const e=s("You are not allowed to create new groupchats.");this.setDisconnectionState(e,o)}else if(r.querySelector("not-acceptable")){const e=s("Your nickname doesn't conform to this groupchat's policies.");this.setDisconnectionState(e,o)}else if(i()(`gone[xmlns="${g.Strophe.NS.STANZAS}"]`,r).length){var a;const e=null===(a=i()(`gone[xmlns="${g.Strophe.NS.STANZAS}"]`,r).pop())||void 0===a?void 0:a.textContent.replace(/^xmpp:/,"").replace(/\?join$/,"");this.save({moved_jid:e,destroyed_reason:o}),this.session.save({connection_status:f.ROOMSTATUS.DESTROYED})}else if(r.querySelector("conflict"))this.onNicknameClash(e);else if(r.querySelector("item-not-found")){const e=s("This groupchat does not (yet) exist.");this.setDisconnectionState(e,o)}else if(r.querySelector("service-unavailable")){const e=s("This groupchat has reached its maximum number of participants.");this.setDisconnectionState(e,o)}else if(r.querySelector("remote-server-not-found")){const e=s("Remote server not found");this.setDisconnectionState(e,o)}else if(r.querySelector("forbidden")){const e=s("You're not allowed to enter this groupchat");this.setDisconnectionState(e,o)}else{const e=s("An error happened while trying to enter this groupchat");this.setDisconnectionState(e,o)}}onPresenceFromMUCHost(e){if("error"===e.getAttribute("type")){const t=e.querySelector("error");"wait"===(null==t?void 0:t.getAttribute("type"))&&(null==t?void 0:t.querySelector("resource-constraint"))&&this.session.get("connection_status")===f.ROOMSTATUS.DISCONNECTED&&this.rejoin()}}onPresence(e){return I((function*(){if("error"===e.getAttribute("type"))return this.onErrorPresence(e);const t=yield(0,x.parseMUCPresence)(e,this);t.codes.forEach((e=>I((function*(){if(this.createInfoMessageFromPresence(e,t),t.is_self&&f.NEW_NICK_CODES.includes(e)&&(this.save("nick",t.nick),"303"===e&&h.default.settings.get("auto_register_muc_nickname")&&(yield h.default.disco.supports(g.Strophe.NS.MUC_REGISTER,this.get("jid")))))try{yield this.registerNickname()}catch(e){d.default.error(e),d.default.error("Error: could not register new nickname")}})).call(this))),t.is_self?(this.onOwnPresence(t),"none"!==this.getOwnRole()&&this.session.get("connection_status")===f.ROOMSTATUS.CONNECTING&&this.session.save("connection_status",f.ROOMSTATUS.CONNECTED)):this.updateOccupantsOnPresence(t)})).call(this)}onOwnPresence(e){return I((function*(){if(yield this.occupants.fetched,"unavailable"===e.type)return void this.handleDisconnection(e);const t=this.session.get("connection_status");t!==f.ROOMSTATUS.ENTERED&&t!==f.ROOMSTATUS.CLOSING?(this.session.save("connection_status",f.ROOMSTATUS.ENTERED,{silent:!0}),this.updateOccupantsOnPresence(e),this.session.trigger("change:connection_status",this.session,t)):this.updateOccupantsOnPresence(e);e.codes.includes("201")&&(this.get("auto_configure")?yield this.autoConfigureChatRoom().then((()=>this.refreshDiscoInfo())):h.default.settings.get("muc_instant_rooms")?yield this.sendConfiguration().then((()=>this.refreshDiscoInfo())):h.default.modal.show("converse-muc-config-modal",{model:this}))})).call(this)}isUserMentioned(e){const t=this.get("nick");if(e.get("references").length){return e.get("references").filter((e=>"mention"===e.type)).map((e=>e.value)).includes(t)}return new RegExp(`\\b${t}\\b`).test(e.get("body"))}incrementUnreadMsgsCounter(e){const t={num_unread_general:this.get("num_unread_general")+1};0===this.get("num_unread_general")&&(t.first_unread_id=e.get("id")),this.isUserMentioned(e)&&(t.num_unread=this.get("num_unread")+1),this.save(t)}clearUnreadMsgCounter(){return I((function*(){(this.get("num_unread_general")>0||this.get("num_unread")>0||this.get("has_activity"))&&(yield this.sendMarkerForMessage(this.messages.last())),(0,w.safeSave)(this,{has_activity:!1,num_unread:0,num_unread_general:0})})).call(this)}}const U=L},"./src/headless/plugins/muc/occupant.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/log/index.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/_converse.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/shared/color.js"),d=s("./src/headless/shared/model-with-messages.js"),c=s("./src/headless/shared/model-with-vcard.js"),u=s("./src/headless/plugins/muc/constants.js"),h=s("./src/headless/plugins/muc/messages.js"),m=s("./src/headless/utils/index.js"),f=s("./src/headless/plugins/muc/utils.js"),p=s("./src/headless/shared/actions.js");function g(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function v(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){g(o,r,n,i,a,"next",e)}function a(e){g(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{Strophe:_,stx:y}=a.default.env;class b extends((0,c.default)((0,d.default)((0,l.default)(r.Model)))){initialize(){var e=this,t=()=>super.initialize;return v((function*(){this.lazy_load_vcard=!0,t().call(e),yield this.fetchMessages(),this.on("change:nick",(()=>this.setColor())),this.on("change:jid",(()=>this.setColor())),this.on("change:chat_state",(()=>(0,p.sendChatState)(this.get("jid"),this.get("chat_state"))))})).call(this)}defaults(){return{hats:[],presence:"offline",show:void 0,states:[],hidden:!0,num_unread:0,message_type:"chat"}}save(e,t,s){let r;return null==e?super.save(e,t,s):("object"==typeof e?(r=e,s=t):(r={})[e]=t,r.occupant_id&&(r.id=r.occupant_id),super.save(r,s))}getMessagesCacheKey(){return`converse.muc-private-msgs-${this.get("occupant_id")||this.get("jid")||this.get("nick")}-${i.default.session.get("bare_jid")}`}getMessagesCollection(){return new h.default}onMessage(e){return v((function*(){if(m.default.isErrorObject(e)){const{stanza:t,message:s}=e;return t&&n.default.error(t),n.default.error(s)}const t=e;if("error"===t.type&&!(yield this.shouldShowErrorMessage(t)))return;const s=this.getDuplicateMessage(t);if(s)this.updateMessage(s,t);else if(!(yield this.handleRetraction(t))&&(this.setEditable(t,t.time),(0,f.shouldCreateGroupchatMessage)(t))){const e=(yield this.handleCorrection(t))||(yield this.createMessage(t));this.handleUnreadMessage(e)}})).call(this)}getDisplayName(){return this.get("nick")||this.get("jid")||""}getAssignableRoles(){let e=o.default.settings.get("modtools_disable_assign");return Array.isArray(e)||(e=e?u.ROLES:[]),"moderator"===this.get("role")?u.ROLES.filter((t=>!e.includes(t))):[]}getAssignableAffiliations(){let e=o.default.settings.get("modtools_disable_assign");return Array.isArray(e)||(e=e?u.AFFILIATIONS:[]),"owner"===this.get("affiliation")?u.AFFILIATIONS.filter((t=>!e.includes(t))):"admin"===this.get("affiliation")?u.AFFILIATIONS.filter((t=>!["owner","admin",...e].includes(t))):[]}isMember(){return["admin","owner","member"].includes(this.get("affiliation"))}isModerator(){return["admin","owner"].includes(this.get("affiliation"))||"moderator"===this.get("role")}isSelf(){return this.get("states").includes("110")}getOutgoingMessageAttributes(e){return v((function*(){const t=m.default.getUniqueId(),s=null==e?void 0:e.body,r=s?m.default.shortnamesToUnicode(s):void 0,n=this.collection.chatroom,a=n.getOwnOccupant();var l;return e=Object.assign({},e,{body:r,from:a.get("from"),fullname:i.default.state.profile.get("fullname"),id:t,jid:this.get("jid"),message:r,msgid:t,nick:a.get("nickname"),origin_id:t,sender:"me",time:(new Date).toISOString(),to:null!==(l=this.get("from"))&&void 0!==l?l:`${n.get("jid")}/${this.get("nick")}`,type:"chat"},yield m.default.getMediaURLsMetadata(s)),e=yield o.default.hook("getOutgoingMessageAttributes",this,e)})).call(this)}createMessageStanza(e){var t=this,s=()=>super.createMessageStanza;return v((function*(){const r=yield s().call(t,e);return r.cnode(y`<x xmlns="${_.NS.MUC}#user"/>`).root(),r}))()}isChatMessage(e){return e.get("type")===this.get("message_type")}}const j=b},"./src/headless/plugins/muc/occupants.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s("./src/headless/plugins/muc/occupant.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),a=s("./node_modules/@converse/skeletor/dist/skeletor.js"),l=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),d=s("./src/headless/plugins/muc/affiliations/utils.js"),c=s("./src/headless/plugins/muc/utils.js"),u=s("./src/headless/utils/index.js");function h(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{u:m}=i.default.env;class f extends a.Collection{get model(){return r.default}initialize(){this.on("change:nick",(()=>this.sort())),this.on("change:role",(()=>this.sort()))}static getAutoFetchedAffiliationLists(){const e=o.default.settings.get("muc_fetch_members");return Array.isArray(e)?e:e?["member","admin","owner"]:[]}create(e,t){return e.id||e instanceof a.Model||(e.id=e.occupant_id||(0,u.getUniqueId)()),super.create(e,t)}fetchMembers(){return(e=function*(){var e;if(!["member","admin","owner"].includes(null===(e=this.getOwnOccupant())||void 0===e?void 0:e.get("affiliation")))return;const t=f.getAutoFetchedAffiliationLists();if(0===t.length)return;const s=this.chatroom.get("jid"),r=yield Promise.all(t.map((e=>(0,d.getAffiliationList)(e,s)))),i=r.reduce(((e,t)=>t instanceof Error?e:[...t,...e]),[]),a=t.filter((e=>!m.isErrorObject(r[t.indexOf(e)]))),l=i.map((e=>e.jid)).filter((e=>void 0!==e)),c=i.map((e=>!e.jid&&e.nick||void 0)).filter((e=>void 0!==e)),u=this.filter((e=>a.includes(e.get("affiliation"))&&!c.includes(e.get("nick"))&&!l.includes(e.get("jid")))),h=n.default.session.get("bare_jid");u.forEach((e=>{e.get("jid")!==h&&("offline"===e.get("show")?e.destroy():e.save("affiliation",null))})),i.forEach((e=>{const t=this.findOccupant(e);t?t.save(e):this.create(e)})),o.default.trigger("membersFetched")},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){h(o,r,n,i,a,"next",e)}function a(e){h(o,r,n,i,a,"throw",e)}i(void 0)}))}).call(this);var e}findOccupant(e){if(e.occupant_id)return this.get(e.occupant_id);const t=e.jid&&l.Strophe.getBareJidFromJid(e.jid);return t&&this.findWhere({jid:t})||e.nick&&this.findWhere({nick:e.nick})}getOwnOccupant(){return this.findOccupant({jid:n.default.session.get("bare_jid"),occupant_id:this.chatroom.get("occupant_id")})}constructor(e,t){super(e,Object.assign({comparator:c.occupantsComparator},t)),this.chatroom=null}}const p=f},"./src/headless/plugins/muc/parsers.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{getMEPActivities:()=>b,parseMUCMessage:()=>E,parseMUCPresence:()=>O,parseMemberListIQ:()=>A});var r=s("./node_modules/dayjs/dayjs.min.js"),n=s.n(r),o=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/shared/errors.js"),d=s("./src/headless/shared/parsers.js"),c=s("./src/headless/plugins/muc/constants.js");function u(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function h(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){u(o,r,n,i,a,"next",e)}function a(e){u(o,r,n,i,a,"throw",e)}i(void 0)}))}}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){m(e,t,s[t])}))}return e}function p(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const{Strophe:g,sizzle:v,u:_}=a.default.env,{NS:y}=g;function b(e){const t=v(`items[node="${g.NS.CONFINFO}"]`,e).pop();if(!t)return null;const s=e.getAttribute("from"),r=e.getAttribute("id"),n=`item conference-info[xmlns="${g.NS.CONFINFO}"] activity[xmlns="${g.NS.ACTIVITY}"]`;return v(n,t).map((t=>{var n;const o=null===(n=t.querySelector("text"))||void 0===n?void 0:n.textContent;if(o){var i;const n=(0,d.getReferences)(e),a=null===(i=t.querySelector("reason"))||void 0===i?void 0:i.textContent;return{from:s,msgid:r,message:o,reason:a,references:n,type:"mep"}}return{}}))}function j(e){const t=v(`> retract[xmlns="${g.NS.RETRACT}"]`,e).pop();if(t){const e=v(`moderated[xmlns="${g.NS.MODERATE}"]`,t).pop();var s,r;if(e)return{editable:!1,moderated:"retracted",moderated_by:e.getAttribute("by"),moderated_by_id:null===(s=e.querySelector("occupant-id"))||void 0===s?void 0:s.getAttribute("id"),moderated_id:t.getAttribute("id"),moderation_reason:null===(r=t.querySelector("reason"))||void 0===r?void 0:r.textContent}}else{const t=v(`retracted[xmlns="${g.NS.RETRACT}"]`,e).pop();var n,o;if(t)return{editable:!1,is_tombstone:!0,moderated_by:t.getAttribute("by"),moderated_by_id:null===(n=t.querySelector("occupant-id"))||void 0===n?void 0:n.getAttribute("id"),retracted:t.getAttribute("stamp"),moderation_reason:null===(o=t.querySelector("reason"))||void 0===o?void 0:o.textContent}}return function(e){const t=v(`apply-to[xmlns="${g.NS.FASTEN}"]`,e).pop();if(t){const e=t.getAttribute("id"),r=v(`moderated[xmlns="${g.NS.MODERATE0}"]`,t).pop();var s;if(r)if(v(`retract[xmlns="${g.NS.RETRACT0}"]`,r).pop())return{editable:!1,moderated:"retracted",moderated_by:r.getAttribute("by"),moderated_id:e,moderation_reason:null===(s=r.querySelector("reason"))||void 0===s?void 0:s.textContent}}else{const t=v(`> moderated[xmlns="${g.NS.MODERATE0}"]`,e).pop();var r;if(t)if(v(`retracted[xmlns="${g.NS.RETRACT0}"]`,t).pop())return{editable:!1,is_tombstone:!0,moderated_by:t.getAttribute("by"),retracted:t.getAttribute("stamp"),moderation_reason:null===(r=t.querySelector("reason"))||void 0===r?void 0:r.textContent}}return{}}(e)}function w(e,t){const s=v(`${t} > x[xmlns="${g.NS.MUC_USER}"] status`,e).map((e=>e.getAttribute("code"))).filter((e=>{var s;return null===(s=c.STATUS_CODE_STANZAS[e])||void 0===s?void 0:s.includes(t)}));return"presence"===t&&s.includes("333")&&s.includes("307")&&s.splice(s.indexOf("307"),1),{codes:s,is_self:s.includes("110")}}function S(e,t){var s;if(t.features.get(g.NS.OCCUPANTID))return null===(s=v(`occupant-id[xmlns="${g.NS.OCCUPANTID}"]`,e).pop())||void 0===s?void 0:s.getAttribute("id")}function x(e,t){let s;const r=t.get("occupant_id");if(r)s=e.occupant_id===r;else if(e.from_real_jid){const t=o.default.session.get("bare_jid");s=g.getBareJidFromJid(e.from_real_jid)===t}else s=e.nick===t.get("nick");return s?"me":"them"}function E(e,t){return h((function*(){var s,r,o;(0,d.throwErrorIfInvalidForward)(e);const a=v(`result[xmlns="${y.MAM}"] > forwarded[xmlns="${y.FORWARD}"] > message`,e).pop(),c=a||e;if(v(`message > forwarded[xmlns="${g.NS.FORWARD}"]`,c).length)return new l.StanzaParseError(c,`Invalid Stanza: Forged MAM groupchat message from ${c.getAttribute("from")}`);let u,h;if(a){var m,f;if(v(`message > forwarded[xmlns="${g.NS.FORWARD}"]`,a).length)return new l.StanzaParseError(e,`Invalid Stanza: Forged MAM groupchat message from ${e.getAttribute("from")}`);u=v(`delay[xmlns="${g.NS.DELAY}"]`,a.parentElement).pop(),h=null===(f=a.querySelector(":scope > body"))||void 0===f||null===(m=f.textContent)||void 0===m?void 0:m.trim()}else{var p,E;u=v(`message > delay[xmlns="${g.NS.DELAY}"]`,e).pop(),h=null===(E=e.querySelector(":scope > body"))||void 0===E||null===(p=E.textContent)||void 0===p?void 0:p.trim()}const A=c.getAttribute("from"),O=(0,d.getChatMarker)(c);let C=Object.assign({from:A,body:h,activities:b(c),chat_state:(0,d.getChatState)(c),from_muc:g.getBareJidFromJid(A),is_archived:(0,d.isArchived)(e),is_carbon:(0,d.isCarbon)(e),is_delayed:!!u,is_forwarded:!!v(`message > forwarded[xmlns="${g.NS.FORWARD}"]`,c).length,is_headline:(0,d.isHeadline)(c),is_markable:!!v(`message > markable[xmlns="${g.NS.MARKERS}"]`,c).length,is_marker:!!O,is_unstyled:!!v(`message > unstyled[xmlns="${g.NS.STYLING}"]`,c).length,marker_id:O&&O.getAttribute("id"),nick:g.unescapeNode(g.getResourceFromJid(A)),occupant_id:S(c,t),receipt_id:(0,d.getReceiptId)(c),received:(new Date).toISOString(),references:(0,d.getReferences)(c),subject:null===(s=c.querySelector(":scope > subject"))||void 0===s?void 0:s.textContent,thread:null===(r=c.querySelector(":scope > thread"))||void 0===r?void 0:r.textContent,time:u?n()(u.getAttribute("stamp")).toISOString():(new Date).toISOString(),to:c.getAttribute("to"),type:c.getAttribute("type")},(0,d.getErrorAttributes)(c),(0,d.getOutOfBandAttributes)(c),(0,d.getSpoilerAttributes)(c),(0,d.getCorrectionAttributes)(c,e),(0,d.getStanzaIDs)(c,e),(0,d.getOpenGraphMetadata)(c),(0,d.getRetractionAttributes)(c,e),j(c),(0,d.getEncryptionAttributes)(c),w(c,"message"));if(C.from_real_jid=C.is_archived&&function(e){const t=v(`message > x[xmlns="${g.NS.MUC_USER}"] item`,e).pop();return null==t?void 0:t.getAttribute("jid")}(c)||(null===(o=t.occupants.findOccupant(C))||void 0===o?void 0:o.get("jid")),C=Object.assign({is_valid_receipt_request:(0,d.isValidReceiptRequest)(c,C),message:C.body||C.error,sender:x(C,t)},C),C.is_archived&&e.getAttribute("from")!==C.from_muc)return new l.StanzaParseError(e,`Invalid Stanza: Forged MAM message from ${e.getAttribute("from")}`);if(C.is_archived&&e.getAttribute("from")!==t.get("jid"))return new l.StanzaParseError(e,`Invalid Stanza: Forged MAM groupchat message from ${c.getAttribute("from")}`);if(C.is_carbon)return new l.StanzaParseError(e,"Invalid Stanza: MUC messages SHOULD NOT be XEP-0280 carbon copied");C.id=C.origin_id||C[`stanza_id ${C.from_muc||C.from}`]||_.getUniqueId(),C=yield i.default.hook("parseMUCMessage",e,C);const T=yield _.getMediaURLsMetadata(C.is_encrypted?C.plaintext:C.body);return Object.assign(C,T)}))()}function A(e){return v(`query[xmlns="${g.NS.MUC_ADMIN}"] item`,e).map((e=>{const t={affiliation:e.getAttribute("affiliation")},s=e.getAttribute("jid");_.isValidJID(s)?t.jid=s:t.nick=s;const r=e.getAttribute("nick");r&&(t.nick=r);return e.getAttribute("role")&&(t.role=r),t}))}function O(e,t){return h((function*(){var s,r,n;yield t.initialized;const o=e.getAttribute("from"),a=e.getAttribute("type"),l=g.getResourceFromJid(o);var d,c;const u=f({from:o,nick:l,type:a,muc_jid:g.getBareJidFromJid(o),occupant_id:S(e,t),status:null!==(d=null===(s=e.querySelector(":scope > status"))||void 0===s?void 0:s.textContent)&&void 0!==d?d:void 0,show:null!==(c=null===(r=e.querySelector(":scope > show"))||void 0===r?void 0:r.textContent)&&void 0!==c?c:void 0,image_hash:null===(n=v(`presence > x[xmlns="${g.NS.VCARDUPDATE}"] photo`,e).pop())||void 0===n?void 0:n.textContent,hats:v(`presence > hats[xmlns="${g.NS.MUC_HATS}"] hat`,e).map((e=>({title:e.getAttribute("title"),uri:e.getAttribute("uri")})))},w(e,"presence"),function(e,t){const s=v(`presence > x[xmlns="${g.NS.MUC_USER}"] item`,e).pop();if(s){var r;const e=s.querySelector("actor");var n,o,i;return p(f({affiliation:s.getAttribute("affiliation"),role:s.getAttribute("role"),jid:s.getAttribute("jid"),nick:s.getAttribute("nick")||t},e?{actor:{nick:null!==(n=null==e?void 0:e.getAttribute("nick"))&&void 0!==n?n:null,jid:null!==(o=null==e?void 0:e.getAttribute("jid"))&&void 0!==o?o:null}}:{}),{reason:null!==(i=null===(r=s.querySelector("reason"))||void 0===r?void 0:r.textContent)&&void 0!==i?i:null})}}(e,l));return yield i.default.hook("parseMUCPresence",e,u)}))()}},"./src/headless/plugins/muc/plugin.js":(e,t,s)=>{"use strict";s.r(t);s("./src/headless/plugins/chat/index.js"),s("./src/headless/plugins/disco/index.js"),s("./src/headless/plugins/emoji/index.js");var r=s("./src/headless/plugins/muc/message.js"),n=s("./src/headless/plugins/muc/messages.js"),o=s("./src/headless/plugins/muc/muc.js"),i=s("./src/headless/plugins/muc/occupant.js"),a=s("./src/headless/plugins/muc/occupants.js"),l=s("./src/headless/plugins/muc/affiliations/api.js"),d=s("./src/headless/plugins/muc/api.js"),c=s("./src/headless/shared/_converse.js"),u=s("./src/headless/shared/api/index.js"),h=s("./src/headless/shared/api/public.js"),m=s("./src/headless/shared/constants.js"),f=s("./src/headless/plugins/muc/utils.js"),p=s("./src/headless/plugins/muc/affiliations/utils.js"),g=s("./src/headless/plugins/muc/constants.js");h.default.AFFILIATION_CHANGES=g.AFFILIATION_CHANGES,h.default.AFFILIATION_CHANGES_LIST=g.AFFILIATION_CHANGES_LIST,h.default.MUC_TRAFFIC_STATES=g.MUC_TRAFFIC_STATES,h.default.MUC_TRAFFIC_STATES_LIST=g.MUC_TRAFFIC_STATES_LIST,h.default.MUC_ROLE_CHANGES=g.MUC_ROLE_CHANGES,h.default.MUC_ROLE_CHANGES_LIST=g.MUC_ROLE_CHANGES_LIST,h.default.MUC={INFO_CODES:g.INFO_CODES},h.default.MUC_NICK_CHANGED_CODE=g.MUC_NICK_CHANGED_CODE,h.default.ROOM_FEATURES=g.ROOM_FEATURES,h.default.ROOMSTATUS=g.ROOMSTATUS;const{Strophe:v}=h.default.env;v.addNamespace("MUC_ADMIN",v.NS.MUC+"#admin"),v.addNamespace("MUC_OWNER",v.NS.MUC+"#owner"),v.addNamespace("MUC_REGISTER","jabber:iq:register"),v.addNamespace("MUC_ROOMCONF",v.NS.MUC+"#roomconfig"),v.addNamespace("MUC_USER",v.NS.MUC+"#user"),v.addNamespace("MUC_HATS","urn:xmpp:hats:0"),v.addNamespace("CONFINFO","urn:ietf:params:xml:ns:conference-info"),h.default.plugins.add("converse-muc",{dependencies:["converse-chatboxes","converse-chat","converse-disco"],initialize(){const{__:e,___:t}=c.default;if(u.default.settings.extend({allow_muc_invitations:!0,auto_join_on_invite:!1,auto_join_rooms:[],auto_register_muc_nickname:!0,colorize_username:!1,hide_muc_participants:!1,locked_muc_domain:!1,modtools_disable_assign:!1,muc_clear_messages_on_leave:!0,muc_domain:void 0,muc_fetch_members:!0,muc_history_max_stanzas:void 0,muc_instant_rooms:!0,muc_nickname_from_jid:!1,muc_send_probes:!1,muc_show_info_messages:[...h.default.MUC.INFO_CODES.visibility_changes,...h.default.MUC.INFO_CODES.self,...h.default.MUC.INFO_CODES.non_privacy_changes,...h.default.MUC.INFO_CODES.muc_logging_changes,...h.default.MUC.INFO_CODES.nickname_changes,...h.default.MUC.INFO_CODES.disconnected,...h.default.MUC.INFO_CODES.affiliation_changes,...h.default.MUC.INFO_CODES.join_leave_events,...h.default.MUC.INFO_CODES.role_changes],muc_show_logs_before_join:!1,muc_subscribe_to_rai:!1}),u.default.promises.add(["roomsAutoJoined"]),u.default.settings.get("locked_muc_domain")&&"string"!=typeof u.default.settings.get("muc_domain"))throw new Error("Config Error: it makes no sense to set locked_muc_domain to true when muc_domain is not set");h.default.env.muc_utils={computeAffiliationsDelta:p.computeAffiliationsDelta},Object.assign(u.default,d.default),Object.assign(u.default.rooms,l.default);const s={muc:{STATUS_CODE_MESSAGES:{100:e("This groupchat is not anonymous"),102:e("This groupchat now shows unavailable members"),103:e("This groupchat does not show unavailable members"),104:e("The groupchat configuration has changed"),170:e("Groupchat logging is now enabled"),171:e("Groupchat logging is now disabled"),172:e("This groupchat is now no longer anonymous"),173:e("This groupchat is now semi-anonymous"),174:e("This groupchat is now fully-anonymous"),201:e("A new groupchat has been created"),210:t("Your nickname has been automatically set to %1$s"),301:e("You have been banned from this groupchat"),303:t("Your nickname has been changed to %1$s"),307:e("You have been kicked from this groupchat"),321:e("You have been removed from this groupchat because of an affiliation change"),322:e("You have been removed from this groupchat because it has changed to members-only and you're not a member"),332:e("You have been removed from this groupchat because the service hosting it is being shut down"),333:e("You have exited this groupchat due to a technical problem")}}};Object.assign(c.default.labels,s),Object.assign(c.default,s),(0,f.routeToRoom)(),addEventListener("hashchange",f.routeToRoom);const g={ChatRoom:o.default,ChatRoomMessage:r.default,ChatRoomMessages:n.default,ChatRoomOccupant:i.default,ChatRoomOccupants:a.default};Object.assign(c.default,g);const _={MUC:o.default,MUCMessage:r.default,MUCMessages:n.default,MUCOccupant:i.default,MUCOccupants:a.default,getDefaultMUCNickname:f.getDefaultMUCNickname,isInfoVisible:f.isInfoVisible,onDirectMUCInvitation:f.onDirectMUCInvitation};Object.assign(c.default.exports,_),Object.assign(c.default,_),u.default.chatboxes.registry.add(m.CHATROOMS_TYPE,o.default),u.default.settings.get("allow_muc_invitations")&&(u.default.listen.on("connected",f.registerDirectInvitationHandler),u.default.listen.on("reconnected",f.registerDirectInvitationHandler)),u.default.listen.on("addClientFeatures",(()=>u.default.disco.own.features.add(`${v.NS.CONFINFO}+notify`))),u.default.listen.on("addClientFeatures",f.onAddClientFeatures),u.default.listen.on("beforeResourceBinding",f.onBeforeResourceBinding),u.default.listen.on("beforeTearDown",f.onBeforeTearDown),u.default.listen.on("chatBoxesFetched",f.autoJoinRooms),u.default.listen.on("disconnected",f.disconnectChatRooms),u.default.listen.on("statusInitialized",f.onStatusInitialized),document.addEventListener("visibilitychange",f.onWindowStateChanged)}})},"./src/headless/plugins/muc/session.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/plugins/muc/constants.js");class o extends r.Model{defaults(){return{connection_status:n.ROOMSTATUS.DISCONNECTED}}}const i=o},"./src/headless/plugins/muc/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{autoJoinRooms:()=>T,disconnectChatRooms:()=>w,getDefaultMUCNickname:()=>O,getDefaultMUCService:()=>v,isChatRoom:()=>_,isInfoVisible:()=>C,occupantsComparator:()=>b,onAddClientFeatures:()=>$,onBeforeResourceBinding:()=>I,onBeforeTearDown:()=>k,onDirectMUCInvitation:()=>A,onStatusInitialized:()=>M,onWindowStateChanged:()=>S,openChatRoom:()=>E,registerDirectInvitationHandler:()=>j,routeToRoom:()=>x,shouldCreateGroupchatMessage:()=>y});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/api/public.js"),i=s("./src/log/index.js"),a=s("./src/headless/plugins/muc/constants.js"),l=s("./src/headless/utils/init.js"),d=s("./src/headless/shared/constants.js"),c=s("./src/headless/utils/session.js");function u(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function h(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){u(o,r,n,i,a,"next",e)}function a(e){u(o,r,n,i,a,"throw",e)}i(void 0)}))}}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{Strophe:f,sizzle:p,u:g}=o.default.env;function v(){return h((function*(){let e=n.default.settings.get("muc_domain")||r.default.session.get("default_muc_service");if(!e){const t=r.default.session.get("domain"),s=yield n.default.disco.entities.items(t);for(const t of s)if(yield n.default.disco.features.has(f.NS.MUC,t.get("jid"))){e=t.get("jid"),r.default.session.save({default_muc_service:e});break}}return e}))()}function _(e){return"chatroom"===(null==e?void 0:e.get("type"))}function y(e){return e.nick&&(g.shouldCreateMessage(e)||e.is_tombstone)}function b(e,t){const s=e.get("role")||"none",r=t.get("role")||"none";if(a.MUC_ROLE_WEIGHTS[s]===a.MUC_ROLE_WEIGHTS[r]){const s=e.getDisplayName().toLowerCase(),r=t.getDisplayName().toLowerCase();return s<r?-1:s>r?1:0}return a.MUC_ROLE_WEIGHTS[s]<a.MUC_ROLE_WEIGHTS[r]?-1:1}function j(){n.default.connection.get().addHandler((e=>(r.default.exports.onDirectMUCInvitation(e),!0)),"jabber:x:conference","message")}function w(){return r.default.state.chatboxes.filter((e=>e.get("type")===d.CHATROOMS_TYPE)).forEach((e=>e.session.save({connection_status:o.default.ROOMSTATUS.DISCONNECTED})))}function S(){return h((function*(){if(!document.hidden&&n.default.connection.connected()){(yield n.default.rooms.get()).forEach((e=>e.rejoinIfNecessary()))}}))()}function x(e){return h((function*(){if(!location.hash.startsWith("#converse/room?jid="))return;null==e||e.preventDefault();const t=location.hash.split("=").pop();if(!g.isValidMUCJID(t))return i.default.warn(`invalid jid "${t}" provided in url fragment`);yield n.default.waitUntil("roomsAutoJoined"),n.default.settings.get("allow_bookmarks")&&(yield n.default.waitUntil("bookmarksInitialized")),n.default.rooms.open(t,{},!0)}))()}function E(e,t){return h((function*(){t.type=d.CHATROOMS_TYPE,t.id=e;const s=yield n.default.rooms.get(e,t,!0);return s.maybeShow(!0),s}))()}function A(e){return h((function*(){const t=p('x[xmlns="jabber:x:conference"]',e).pop(),s=f.getBareJidFromJid(e.getAttribute("from")),i=t.getAttribute("jid"),a=t.getAttribute("reason");let l;if(n.default.settings.get("auto_join_on_invite"))l=!0;else{var d,c;const e=null!==(c=null===(d=r.default.state.roster.get(s))||void 0===d?void 0:d.getDisplayName())&&void 0!==c?c:s;l=yield n.default.hook("confirmDirectMUCInvitation",{contact:e,reason:a,jid:i},!1)}if(l){(yield E(i,{password:t.getAttribute("password")})).session.get("connection_status")===o.default.ROOMSTATUS.DISCONNECTED&&r.default.state.chatboxes.get(i).rejoin()}}))()}function O(){const{profile:e}=r.default.state;if(!e)return i.default.error("Called getDefaultMUCNickname before statusInitialized has been fired."),"";const t=e.getNickname();if(t)return t;if(n.default.settings.get("muc_nickname_from_jid")){const e=r.default.session.get("bare_jid");return f.unescapeNode(f.getNodeFromJid(e))}}function C(e){return!!n.default.settings.get("muc_show_info_messages").includes(e)}function T(){return h((function*(){yield Promise.all(n.default.settings.get("auto_join_rooms").map((e=>"string"==typeof e?r.default.state.chatboxes.where({jid:e}).length?Promise.resolve():n.default.rooms.open(e):e instanceof Object?n.default.rooms.open(e.jid,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){m(e,t,s[t])}))}return e}({},e)):(i.default.error('Invalid muc criteria specified for "auto_join_rooms"'),Promise.resolve())))),n.default.trigger("roomsAutoJoined")}))()}function $(){n.default.disco.own.features.add(f.NS.MUC),n.default.settings.get("allow_muc_invitations")&&n.default.disco.own.features.add("jabber:x:conference")}function k(){r.default.state.chatboxes.where({type:d.CHATROOMS_TYPE}).forEach((e=>(0,l.safeSave)(e.session,{connection_status:o.default.ROOMSTATUS.DISCONNECTED})))}function M(){window.addEventListener((0,c.getUnloadEvent)(),(()=>{!n.default.connection.isType("websocket")||n.default.settings.get("enable_smacks")&&r.default.session.get("smacks_stream_id")||w()}))}function I(){n.default.connection.get().addHandler((e=>{const t=f.getBareJidFromJid(e.getAttribute("from"));return r.default.state.chatboxes.get(t)||n.default.waitUntil("chatBoxesFetched").then((()=>h((function*(){const s=r.default.state.chatboxes.get(t);s&&(yield s.initialized,s.message_handler.run(e))}))())),!0}),null,"message","groupchat")}},"./src/headless/plugins/ping/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/api/public.js"),i=s("./src/log/index.js"),a=s("./src/headless/plugins/ping/utils.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{Strophe:d,$iq:c,u}=o.default.env,h={ping(e,t){return(s=function*(){if(!n.default.connection.authenticated())return i.default.debug("Not pinging when we know we're not authenticated"),null;(0,a.setLastStanzaDate)(new Date);const s=r.default.session.get("bare_jid");e=e||d.getDomainFromJid(s);const o=c({type:"get",to:e,id:u.getUniqueId("ping")}).c("ping",{xmlns:d.NS.PING}),l=yield n.default.sendIQ(o,t||1e4,!1);return null===l?(i.default.warn(`Timeout while pinging ${e}`),e===d.getDomainFromJid(s)&&n.default.connection.reconnect(),!1):!u.isErrorStanza(l)||(i.default.error(`Error while pinging ${e}`),i.default.error(l),!1)},function(){var e=this,t=arguments;return new Promise((function(r,n){var o=s.apply(e,t);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))})();var s}}},"./src/headless/plugins/ping/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/shared/api/index.js"),n=s("./src/headless/shared/api/public.js"),o=s("./src/headless/plugins/ping/api.js"),i=s("./src/headless/plugins/ping/utils.js");const{Strophe:a}=n.default.env;a.addNamespace("PING","urn:xmpp:ping"),n.default.plugins.add("converse-ping",{initialize(){r.default.settings.extend({ping_interval:60}),Object.assign(r.default,o.default),r.default.listen.on("connected",i.registerHandlers),r.default.listen.on("reconnected",i.registerHandlers),r.default.listen.on("disconnected",i.unregisterIntervalHandler),document.addEventListener("visibilitychange",i.onWindowStateChanged)}})},"./src/headless/plugins/ping/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{onEverySecond:()=>v,onWindowStateChanged:()=>c,registerHandlers:()=>p,registerPingHandler:()=>f,registerPongHandler:()=>m,setLastStanzaDate:()=>u,unregisterIntervalHandler:()=>g});var r=s("./src/headless/shared/api/index.js"),n=s("./src/headless/shared/api/public.js"),o=s("./src/headless/utils/session.js");const{Strophe:i,$iq:a}=n.default.env;let l,d;function c(){document.hidden||r.default.ping(null,5e3)}function u(e){l=e}function h(e){l=new Date;const t=e.getAttribute("from"),s=e.getAttribute("id"),n=a({type:"result",to:t,id:s});return r.default.sendIQ(n),!0}function m(){const e=r.default.connection.get();return e.disco&&r.default.disco.own.features.add(i.NS.PING),e.addHandler(h,i.NS.PING,"iq","get")}function f(){var e;null===(e=r.default.connection.get())||void 0===e||e.addHandler((()=>{if(r.default.settings.get("ping_interval")>0)return l=new Date,!0}))}function p(){m(),f(),clearInterval(d),d=setInterval(v,1e3)}function g(){clearInterval(d)}function v(){if((0,o.isTestEnv)()||!r.default.connection.authenticated())return;const e=r.default.settings.get("ping_interval");if(e>0){const t=new Date;l=null!=l?l:t,(t.valueOf()-l.valueOf())/1e3>e&&r.default.ping()}}},"./src/headless/plugins/pubsub/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s("./src/headless/shared/api/public.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/log/index.js"),a=s("./src/headless/shared/parsers.js"),l=s("./src/headless/plugins/pubsub/parsers.js");function d(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function c(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){d(o,r,n,i,a,"next",e)}function a(e){d(o,r,n,i,a,"throw",e)}i(void 0)}))}}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{Strophe:h,stx:m}=r.default.env,f={pubsub:{config:{get:(e,t)=>c((function*(){if(!t)throw new Error("api.pubsub.config.get: Node value required");const s=n.default.session.get("bare_jid"),r=n.default.session.get("jid"),i=m`
                    <iq xmlns="jabber:client"
                        from="${r}"
                        type="get"
                        to="${e||s}">
                    <pubsub xmlns="${h.NS.PUBSUB}"><configure node="${t}"/></pubsub>
                    </iq>`;let d;try{d=yield o.default.sendIQ(i)}catch(e){throw yield(0,a.parseErrorStanza)(e)}return(0,l.parseStanzaForPubSubConfig)(d)}))(),set:(e,t,s)=>c((function*(){if(!t)throw new Error("api.pubsub.config.set: Node value required");const r=n.default.session.get("bare_jid"),i=e||r,l=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){u(e,t,s[t])}))}return e}({},yield o.default.pubsub.config.get(i,t),s),d=m`
                    <iq xmlns="jabber:client"
                        from="${r}"
                        type="set"
                        to="${i}">
                    <pubsub xmlns="${h.NS.PUBSUB}#owner">
                        <configure node="${t}">
                            <x xmlns="${h.NS.XFORM}" type="submit">
                                <field var="FORM_TYPE" type="hidden">
                                    <value>${h.NS.PUBSUB}#nodeconfig</value>
                                </field>
                                ${Object.entries(l).map((([e,t])=>m`<field var="${e}"><value>${t}</value></field>`))}
                            </x>
                        </configure>
                    </pubsub>
                    </iq>`;try{yield o.default.sendIQ(d)}catch(e){throw yield(0,a.parseErrorStanza)(e)}return l}))()},publish:(e,t,s,r,l=!0)=>c((function*(){if(!t)throw new Error("api.pubsub.publish: node value required");if(!s)throw new Error("api.pubsub.publish: item value required");const d=n.default.session.get("bare_jid"),c=e||d,u=m`
                <iq xmlns="jabber:client"
                    from="${d}"
                    type="set"
                    to="${c}">
                <pubsub xmlns="${h.NS.PUBSUB}">
                    <publish node="${t}">${s}</publish>
                    ${r?m`<publish-options>
                    <x xmlns="${h.NS.XFORM}" type="submit">
                        <field var="FORM_TYPE" type="hidden">
                            <value>${h.NS.PUBSUB}#publish-options</value>
                        </field>
                        ${Object.entries(r).map((([e,t])=>m`<field var="pubsub#${e}"><value>${t}</value></field>`))}
                    </x></publish-options>`:""}
                </pubsub>
                </iq>`;if(c===d){if(!((yield o.default.disco.getIdentity("pubsub","pep",d))||(yield o.default.disco.getIdentity("pubsub","pep",h.getDomainFromJid(d)))))return i.default.warn("api.pubsub.publish: Not publishing via PEP because it's not supported!"),void i.default.warn(u)}if(!((yield o.default.disco.supports(h.NS.PUBSUB+"#publish-options",c))||c===d&&(yield o.default.disco.supports(h.NS.PUBSUB+"#publish-options",h.getDomainFromJid(c))))&&l)return i.default.warn("api.pubsub.publish: #publish-options not supported, refusing to publish item."),void i.default.warn(u);try{yield o.default.sendIQ(u)}catch(e){const s=yield(0,a.parseErrorStanza)(e);if("conflict"!==s.name||"precondition-not-met"!==s.extra[h.NS.PUBSUB_ERROR])throw e;yield o.default.pubsub.config.set(c,t,r);try{yield o.default.sendIQ(u)}catch(e){if(i.default.error(e),!l){const e=u.tree();e.querySelector("publish-options").outerHTML="",i.default.warn("api.pubsub.publish: #publish-options precondition-not-met, publishing anyway."),yield o.default.sendIQ(e)}}}}))()}}},"./src/headless/plugins/pubsub/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/public.js"),o=s("./src/headless/plugins/pubsub/api.js");s("./src/headless/plugins/disco/index.js");function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function a(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const{Strophe:l,sizzle:d}=n.default.env;l.addNamespace("PUBSUB_ERROR",l.NS.PUBSUB+"#errors"),n.default.plugins.add("converse-pubsub",{dependencies:["converse-disco"],initialize(){const{api:e}=r.default;Object.assign(r.default.api,o.default),e.listen.on("parseErrorStanza",((e,t)=>{const s=d(`error [xmlns="${l.NS.PUBSUB_ERROR}"]`,e).pop();return s?a(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){i(e,t,s[t])}))}return e}({},t),{[l.NS.PUBSUB_ERROR]:s.nodeName}):t}))}})},"./src/headless/plugins/pubsub/parsers.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{parseStanzaForPubSubConfig:()=>n});var r=s("./src/headless/shared/parsers.js");function n(e){return(0,r.parseXForm)(e).fields.reduce(((e,t)=>{if(t.var.startsWith("pubsub#")){const r=t.var.replace(/^pubsub#/,"");var s;const n="boolean"===t.type?t.checked:null!==(s=t.value)&&void 0!==s?s:null;e[r]=n}return e}),{})}},"./src/headless/plugins/roster/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/headless/utils/jid.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}}const{Strophe:d}=i.default.env,c={contacts:{get:e=>l((function*(){yield o.default.waitUntil("rosterContactsFetched");const{roster:t}=n.default.state,s=e=>t.get(d.getBareJidFromJid(e));if(void 0===e)e=t.pluck("jid");else if("string"==typeof e)return s(e);return e.map(s)}))(),remove:(e,t)=>l((function*(){yield o.default.waitUntil("rosterContactsFetched");(yield o.default.contacts.get(e)).remove(t)}))(),add:(e,t=!0,s=!0,o="")=>l((function*(){if(!(0,r.isValidJID)(null==e?void 0:e.jid))throw new Error("api.contacts.add: Valid JID required");const{roster:i}=n.default.state;return i.addContact(e,t,s,o)}))()}}},"./src/headless/plugins/roster/contact.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),n=s("./node_modules/@converse/skeletor/dist/skeletor.js"),o=(s("./src/headless/plugins/status/api.js"),s("./src/headless/shared/_converse.js")),i=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/shared/color.js"),d=s("./src/headless/shared/model-with-vcard.js"),c=s("./src/headless/plugins/roster/utils.js");function u(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function h(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){u(o,r,n,i,a,"next",e)}function a(e){u(o,r,n,i,a,"throw",e)}i(void 0)}))}}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{Strophe:f,$pres:p,stx:g}=a.default.env;class v extends((0,d.default)((0,l.default)(n.Model))){get idAttribute(){return"jid"}defaults(){return{groups:[],num_unread:0}}initialize(e){var t=this,s=()=>super.initialize;return h((function*(){this.lazy_load_vcard=!0,s().call(t),this.initialized=(0,r.getOpenPromise)(),yield this.setPresence();const{jid:n}=e;this.set(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){m(e,t,s[t])}))}return e}({},e,{jid:f.getBareJidFromJid(n).toLowerCase(),user_id:f.getNodeFromJid(n)})),this.listenTo(this.presence,"change:show",(()=>i.default.trigger("contactPresenceChanged",this))),this.listenTo(this.presence,"change:show",(()=>this.trigger("presence:change"))),this.listenTo(this.presence,"change:presence",(()=>i.default.trigger("contactPresenceChanged",this))),this.listenTo(this.presence,"change:presence",(()=>this.trigger("presence:change"))),yield i.default.trigger("rosterContactInitialized",this,{synchronous:!0}),this.initialized.resolve()})).call(this)}setPresence(){return h((function*(){const e=this.get("jid");yield i.default.waitUntil("presencesInitialized");const{presences:t}=o.default.state;this.presence=t.get(e)||t.create({jid:e})})).call(this)}getStatus(){var e;return(null===(e=this.presence)||void 0===e?void 0:e.getStatus())||"offline"}openChat(){i.default.chats.open(this.get("jid"),{},!0)}getDisplayName(e){var t;return this.get("nickname")||(null===(t=this.vcard)||void 0===t?void 0:t.getDisplayName())||((null==e?void 0:e.no_jid)?null:this.get("jid"))}subscribe(e){return i.default.user.presence.send({type:"subscribe",to:this.get("jid"),status:e}),this.save("ask","subscribe"),this}ackSubscribe(){i.default.send(p({type:"subscribe",to:this.get("jid")}))}ackUnsubscribe(){i.default.send(p({type:"unsubscribe",to:this.get("jid")})),this.sendRosterRemoveStanza(),this.destroy()}unauthorize(e){return(0,c.rejectPresenceSubscription)(this.get("jid"),e),this.save({requesting:!1}),this}authorize(e){return i.default.send(g`
            <presence
                to="${this.get("jid")}"
                type="subscribed"
                xmlns="jabber:client">
                    ${e&&""!==e?g`<status>${e}</status>`:""}
            </presence>`),this.save({requesting:!1,subscription:"from"}),this}remove(e){const t=this.get("subscription");if("none"===t&&"subscribe"!==this.get("ask"))return void this.destroy();"subscribe"!==this.get("ask")&&"to"!==t||i.default.send(p({type:"unsubscribe",to:this.get("jid")})),e&&["from","both"].includes(t)&&this.unauthorize();const s=this.sendRosterRemoveStanza();return this.collection&&this.destroy(),s}update(e){return h((function*(){var t;return this.save(e),yield i.default.sendIQ(g`<iq xmlns="jabber:client" type="set">
                <query xmlns="${f.NS.ROSTER}">
                    <item jid="${this.get("jid")}" name="${this.get("nickname")}">
                        ${null===(t=this.get("groups"))||void 0===t?void 0:t.map((e=>g`<group>${e}</group>`))}
                    </item>
                </query>
            </iq>`)})).call(this)}sendRosterRemoveStanza(){return h((function*(){const e=g`<iq type="set" xmlns="jabber:client">
            <query xmlns="${f.NS.ROSTER}">
                <item jid="${this.get("jid")}" subscription="remove"/>
            </query>
        </iq>`;return yield i.default.sendIQ(e)})).call(this)}isUnsaved(){return void 0===this.get("subscription")}}const _=v},"./src/headless/plugins/roster/contacts.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/plugins/roster/contact.js"),o=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/log/index.js"),d=s("./src/headless/utils/storage.js"),c=s("./src/headless/plugins/roster/utils.js");function u(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function h(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){u(o,r,n,i,a,"next",e)}function a(e){u(o,r,n,i,a,"throw",e)}i(void 0)}))}}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{Strophe:f,sizzle:p,stx:g,u:v,Stanza:_}=a.default.env;class y extends r.Collection{initialize(){const e=`roster.state-${o.default.session.get("bare_jid")}-${this.get("jid")}`;this.state=new r.Model({id:e,collapsed_groups:[]}),(0,d.initStorage)(this.state,e),this.state.fetch(),i.default.listen.on("chatBoxClosed",(e=>this.removeUnsavedContact(e)))}removeUnsavedContact(e){const t=this.get(e.get("jid"));t&&void 0===t.get("subscription")&&t.destroy()}onConnected(){this.registerRosterHandler(),this.registerRosterXHandler()}registerRosterHandler(){i.default.connection.get().addHandler((e=>(o.default.state.roster.onRosterPush(e),!0)),f.NS.ROSTER,"iq","set")}registerRosterXHandler(){let e=0;i.default.connection.get().addHandler((t=>(setTimeout((()=>{const{roster:e}=o.default.state;i.default.connection.get().flush(),e.subscribeToSuggestedItems(t)}),e),e+=250*t.querySelectorAll("item").length,!0)),f.NS.ROSTERX,"message",null)}fetchRosterContacts(){return h((function*(){const e=yield new Promise(((e,t)=>{this.fetch({add:!0,silent:!0,success:e,error:(e,s)=>t(s)})}));if(v.isErrorObject(e)&&(l.default.error(e),o.default.session.save("roster_cached",!1),this.data.save("version",void 0)),!o.default.session.get("roster_cached"))return i.default.connection.get().send_initial_presence=!0,o.default.state.roster.fetchFromServer();i.default.trigger("cachedRoster",e)})).call(this)}subscribeToSuggestedItems(e){return Array.from(e.querySelectorAll("item")).forEach((e=>{"add"===e.getAttribute("action")&&this.addContact({jid:e.getAttribute("jid"),name:e.getAttribute("name"),subscription:"to"})})),!0}isSelf(e){return v.isSameBareJID(e,i.default.connection.get().jid)}sendContactAddIQ(e){const{jid:t,groups:s}=e,r=e.name?e.name:null,n=g`
            <iq type="set" xmlns="jabber:client">
                <query xmlns="${f.NS.ROSTER}">
                    <item jid="${t}" ${r?_.unsafeXML(`name="${f.xmlescape(r)}"`):""}>
                        ${null==s?void 0:s.map((e=>g`<group>${e}</group>`))}
                    </item>
                </query>
            </iq>`;return i.default.sendIQ(n)}addContact(e,t=!0,s=!0,r=""){return h((function*(){const{jid:n,name:a}=null!=e?e:{};if(!n||!v.isValidJID(n))throw new Error("Invalid JID provided to addContact");if(yield i.default.waitUntil("rosterContactsFetched"),t)try{yield this.sendContactAddIQ(e)}catch(e){l.default.error(e);const{__:t}=o.default;throw alert(t("Sorry, an error occurred while trying to add %1$s as a contact.",a||n)),e}const d=yield this.create(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){m(e,t,s[t])}))}return e}({},{ask:void 0,nickname:a,groups:[],requesting:!1,subscription:t?"none":void 0},e),{sort:!1});return s&&d.subscribe(r),d})).call(this)}subscribeBack(e,t,s="",r=""){return h((function*(){const n=this.get(e),{RosterContact:i}=o.default.exports;if(n instanceof i)n.authorize().subscribe();else{var a;const n=(null===(a=p(`nick[xmlns="${f.NS.NICK}"]`,t).pop())||void 0===a?void 0:a.textContent)||void 0,o=yield this.addContact({jid:e,name:n,groups:[],subscription:"from"});o instanceof i&&o.authorize(s).subscribe(r)}})).call(this)}onRosterPush(e){const t=e.getAttribute("id"),s=e.getAttribute("from"),r=o.default.session.get("bare_jid");if(s&&s!==r)return void l.default.warn(`Ignoring roster illegitimate roster push message from ${e.getAttribute("from")}`);i.default.send(g`<iq type="result" id="${t}" from="${i.default.connection.get().jid}" xmlns="jabber:client" />`);const n=p(`query[xmlns="${f.NS.ROSTER}"]`,e).pop();this.data.save("version",n.getAttribute("ver"));const a=p("item",n);if(a.length>1)throw l.default.error(e),new Error('Roster push query may not contain more than one "item" element.');if(0===a.length)return l.default.warn(e),void l.default.warn('Received a roster push stanza without an "item" element.');this.updateContact(a.pop()),i.default.trigger("rosterPush",e)}shouldUseRosterVersioning(){return i.default.settings.get("enable_roster_versioning")&&this.data.get("version")&&i.default.disco.stream.getFeature("ver","urn:xmpp:features:rosterver")}fetchFromServer(){return h((function*(){const e=g`
            <iq type="get" id="${v.getUniqueId("roster")}" xmlns="jabber:client">
                <query xmlns="${f.NS.ROSTER}"
                    ${this.shouldUseRosterVersioning()?_.unsafeXML(`ver="${this.data.get("version")}"`):""}>
                </query>
            </iq>`,t=yield i.default.sendIQ(e,null,!1);if("result"===t.getAttribute("type")){const e=p(`query[xmlns="${f.NS.ROSTER}"]`,t).pop();if(e){const t=p("item",e);if(!this.data.get("version")&&this.models.length){const e=t.map((e=>e.getAttribute("jid")));this.forEach((t=>!t.get("requesting")&&!e.includes(t.get("jid"))&&t.destroy()))}t.forEach((e=>this.updateContact(e))),this.data.save("version",e.getAttribute("ver"))}}else if(!v.isServiceUnavailableError(t))return l.default.error(t),void l.default.error("Error while trying to fetch roster from the server");o.default.session.save("roster_cached",!0),i.default.trigger("roster",t)})).call(this)}updateContact(e){const t=e.getAttribute("jid"),s=this.get(t),r=e.getAttribute("subscription");if("remove"===r)return null==s?void 0:s.destroy();const n=e.getAttribute("ask"),o=e.getAttribute("name"),i=[...new Set(p("group",e).map((e=>e.textContent)))];s?s.save({subscription:r,ask:n,nickname:o,groups:i,requesting:null}):this.create({nickname:o,ask:n,groups:i,jid:t,subscription:r},{sort:!1})}createRequestingContact(e){var t;const s={jid:f.getBareJidFromJid(e.getAttribute("from")),subscription:"none",ask:null,requesting:!0,nickname:(null===(t=p(`nick[xmlns="${f.NS.NICK}"]`,e).pop())||void 0===t?void 0:t.textContent)||null};i.default.trigger("contactRequest",this.create(s))}handleIncomingSubscription(e){const t=e.getAttribute("from"),s=f.getBareJidFromJid(t),r=this.get(s);if(!i.default.settings.get("allow_contact_requests")){const{__:e}=o.default;(0,c.rejectPresenceSubscription)(t,e("This client does not allow presence subscriptions"))}i.default.settings.get("auto_subscribe")?r&&"to"===r.get("subscription")?r.authorize():this.subscribeBack(s,e):r?("none"!==r.get("subscription")||"subscribe"===r.get("ask"))&&r.authorize():this.createRequestingContact(e)}handleOwnPresence(e){const t=e.getAttribute("from"),s=f.getResourceFromJid(t),r=e.getAttribute("type"),{profile:n}=o.default.state;if(i.default.connection.get().jid!==t&&"unavailable"!==r&&(!0===i.default.settings.get("synchronize_availability")||i.default.settings.get("synchronize_availability")===s)){var a,l;const t=null===(a=e.querySelector("show"))||void 0===a?void 0:a.textContent;n.save({show:t,presence:"online"},{silent:!0});const s=null===(l=e.querySelector("status"))||void 0===l?void 0:l.textContent;s&&n.save({status_message:s})}o.default.session.get("jid")===t&&"unavailable"===r&&i.default.user.presence.send()}presenceHandler(e){const t=e.getAttribute("type");if("error"===t)return!0;const s=e.getAttribute("from"),r=f.getBareJidFromJid(s);if(this.isSelf(r))return this.handleOwnPresence(e);if(p(`query[xmlns="${f.NS.MUC}"]`,e).length)return;const n=this.get(r);if(n){var o;const t=null===(o=e.querySelector("status"))||void 0===o?void 0:o.textContent;n.get("status")!==t&&n.save({status:t})}if("subscribed"===t&&n)n.ackSubscribe();else if("unsubscribed"===t&&n)n.ackUnsubscribe();else{if("unsubscribe"===t)return;if("subscribe"===t)this.handleIncomingSubscription(e);else if("unavailable"===t&&n){const e=f.getResourceFromJid(s);n.presence.removeResource(e)}else n&&n.presence.addResource(e)}}constructor(){super(),this.model=n.default,this.data=null}}const b=y},"./src/headless/plugins/roster/filter.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{RosterFilter:()=>n});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js");class n extends r.Model{initialize(){super.initialize(),this.set({text:"",type:"items",state:"online"})}}},"./src/headless/plugins/roster/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{Presence:()=>o.default,Presences:()=>i.default,RosterContact:()=>r.default,RosterContacts:()=>n.default,RosterFilter:()=>a.RosterFilter});var r=s("./src/headless/plugins/roster/contact.js"),n=s("./src/headless/plugins/roster/contacts.js"),o=s("./src/headless/plugins/roster/presence.js"),i=s("./src/headless/plugins/roster/presences.js"),a=s("./src/headless/plugins/roster/filter.js");s("./src/headless/plugins/roster/plugin.js")},"./src/headless/plugins/roster/parsers.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{parsePresence:()=>a});var r=s("./src/headless/shared/api/public.js");const{Strophe:n,sizzle:o,dayjs:i}=r.default.env;function a(e){var t,s;const r=e.getAttribute("from"),a=e.getAttribute("type"),l=n.getResourceFromJid(r),d=o(`delay[xmlns="${n.NS.DELAY}"]`,e).pop(),c=null===(t=e.querySelector("priority"))||void 0===t?void 0:t.textContent;return{resource:l,show:null===(s=e.querySelector("show"))||void 0===s?void 0:s.textContent,timestamp:d?i(d.getAttribute("stamp")).toISOString():(new Date).toISOString(),type:a,priority:Number.isNaN(parseInt(c,10))?0:parseInt(c,10)}}},"./src/headless/plugins/roster/plugin.js":(e,t,s)=>{"use strict";s.r(t);s("./src/headless/plugins/status/index.js");var r=s("./src/headless/plugins/roster/contact.js"),n=s("./src/headless/plugins/roster/contacts.js"),o=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/plugins/roster/api.js"),d=s("./src/headless/plugins/roster/presence.js"),c=s("./src/headless/plugins/roster/presences.js"),u=s("./src/headless/plugins/roster/utils.js");a.default.plugins.add("converse-roster",{dependencies:["converse-status"],initialize(){i.default.settings.extend({allow_contact_requests:!0,auto_subscribe:!1,enable_roster_versioning:!0,show_self_in_roster:!0,synchronize_availability:!0}),i.default.promises.add(["cachedRoster","roster","rosterContactsFetched","rosterInitialized","presencesInitialized"]),Object.assign(o.default.api,l.default);const{__:e}=o.default,t={HEADER_UNSAVED_CONTACTS:e("Unsaved contacts"),HEADER_CURRENT_CONTACTS:e("My contacts"),HEADER_PENDING_CONTACTS:e("Pending contacts"),HEADER_REQUESTING_CONTACTS:e("Contact requests"),HEADER_UNGROUPED:e("Ungrouped"),HEADER_UNREAD:e("New messages")};Object.assign(o.default,t),Object.assign(o.default.labels,t);const s={Presence:d.default,Presences:c.default,RosterContact:r.default,RosterContacts:n.default};Object.assign(o.default,s),Object.assign(o.default.exports,s),i.default.listen.on("beforeTearDown",(()=>(0,u.unregisterPresenceHandler)())),i.default.listen.on("chatBoxesInitialized",u.onChatBoxesInitialized),i.default.listen.on("clearSession",u.onClearSession),i.default.listen.on("presencesInitialized",u.onPresencesInitialized),i.default.listen.on("statusInitialized",u.onStatusInitialized),i.default.listen.on("streamResumptionFailed",(()=>o.default.session.set("roster_cached",!1))),i.default.waitUntil("rosterContactsFetched").then(u.onRosterContactsFetched)}})},"./src/headless/plugins/roster/presence.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/plugins/roster/resources.js"),n=s("./node_modules/@converse/skeletor/dist/skeletor.js"),o=s("./src/headless/utils/storage.js"),i=s("./src/headless/plugins/roster/parsers.js");class a extends n.Model{get idAttribute(){return"jid"}defaults(){return{presence:"offline",show:null}}initialize(){super.initialize(),this.resources=new r.default;const e=`converse.identities-${this.get("jid")}`;(0,o.initStorage)(this.resources,e,"session"),this.listenTo(this.resources,"update",this.onResourcesChanged),this.listenTo(this.resources,"change",this.onResourcesChanged)}onResourcesChanged(){const e=this.getHighestPriorityResource();var t;const{presence:s,show:r}=null!==(t=null==e?void 0:e.attributes)&&void 0!==t?t:{};this.save({presence:s,show:r})}getStatus(){const e=this.get("presence");return"offline"===e?"offline":this.get("show")||e||"offline"}getHighestPriorityResource(){return this.resources.sortBy((e=>`${e.get("priority")}-${e.get("timestamp")}`)).reverse()[0]}addResource(e){const t=(0,i.parsePresence)(e),s={name:t.resource,presence:"unavailable"===t.type?"offline":"online",priority:t.priority,show:t.show,timestamp:t.timestamp},r=this.resources.get(s.name);r?r.save(s):this.resources.create(s)}removeResource(e){const t=this.resources.get(e);null==t||t.destroy()}}const l=a},"./src/headless/plugins/roster/presences.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/plugins/roster/presence.js");class o extends r.Collection{constructor(){super(),this.model=n.default}}const i=o},"./src/headless/plugins/roster/resource.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js");class n extends r.Model{get idAttribute(){return"name"}}const o=n},"./src/headless/plugins/roster/resources.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/plugins/roster/resource.js");class o extends r.Collection{constructor(){super(),this.model=n.default}}const i=o},"./src/headless/plugins/roster/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{isUnsavedContact:()=>E,onChatBoxesInitialized:()=>w,onClearSession:()=>y,onPresencesInitialized:()=>b,onRosterContactsFetched:()=>S,onStatusInitialized:()=>j,rejectPresenceSubscription:()=>x,unregisterPresenceHandler:()=>v});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/api/public.js"),i=s("./src/log/index.js"),a=s("./node_modules/@converse/skeletor/dist/skeletor.js"),l=s("./src/headless/plugins/roster/filter.js"),d=s("./src/headless/shared/constants.js"),c=s("./src/headless/utils/storage.js"),u=s("./src/headless/utils/session.js");function h(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function m(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){h(o,r,n,i,a,"next",e)}function a(e){h(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{$pres:f}=o.default.env;function p(e){const t=r.default.state.roster,s=null==t?void 0:t.get(e.get("jid"));null==s||s.save({num_unread:e.get("num_unread")})}let g;function v(){if(g){n.default.connection.get().deleteHandler(g),g=null}}function _(){return m((function*(){var e;yield null===(e=r.default.state.presences)||void 0===e?void 0:e.clearStore()}))()}function y(){return m((function*(){if(yield _(),(0,u.shouldClearCache)(r.default)){const t=r.default.state.roster;var e;if(t)null===(e=t.data)||void 0===e||e.destroy(),yield t.clearStore(),delete r.default.state.roster,Object.assign(r.default,{roster:void 0})}}))()}function b(e){e?n.default.trigger("rosterReadyAfterReconnection"):function(){const e=new r.default.exports.RosterContacts;Object.assign(r.default,{roster:e}),Object.assign(r.default.state,{roster:e});const t=r.default.session.get("bare_jid");let s=`converse.contacts-${t}`;(0,c.initStorage)(e,s);const o=new l.RosterFilter;Object.assign(r.default,{roster_filter:o}),Object.assign(r.default.state,{roster_filter:o}),o.id=`_converse.rosterfilter-${t}`,(0,c.initStorage)(o,o.id),o.fetch(),s=`converse-roster-model-${t}`,e.data=new a.Model,e.data.id=s,(0,c.initStorage)(e.data,s),e.data.fetch(),n.default.trigger("rosterInitialized",e)}();r.default.state.roster.onConnected(),function(){v();const e=n.default.connection.get();g=e.addHandler((e=>(r.default.state.roster.presenceHandler(e),!0)),null,"presence",null)}(),function(e=!1){m((function*(){const t=n.default.connection.get();e&&(t.send_initial_presence=!0);const s=r.default.state.roster;try{yield s.fetchRosterContacts(),n.default.trigger("rosterContactsFetched",s)}catch(e){i.default.error(e)}finally{t.send_initial_presence&&(n.default.user.presence.send(),r.default.state.profile.save({presence:"online"}))}}))()}(!n.default.connection.get().restored)}function j(e){return m((function*(){if(e)!n.default.connection.get().hasResumed()&&(yield _());else{const e=new r.default.exports.Presences;Object.assign(r.default,{presences:e}),Object.assign(r.default.state,{presences:e});const t=`converse.presences-${r.default.session.get("bare_jid")}`;(0,c.initStorage)(e,t,"session"),yield new Promise((t=>e.fetch({success:t,error:t})))}n.default.trigger("presencesInitialized",e)}))()}function w(){const{chatboxes:e}=r.default.state;e.on("change:num_unread",p),e.on("add",(e=>{e.get("type")===d.PRIVATE_CHAT_TYPE&&e.setModelContact(e.get("jid"))}))}function S(){r.default.state.roster.on("add",(e=>{const t=r.default.state.chatboxes.findWhere({jid:e.get("jid")});null==t||t.setModelContact(e.get("jid"))}))}function x(e,t){const s=f({to:e,type:"unsubscribed"});t&&""!==t&&s.c("status").t(t),n.default.send(s)}function E(e){return!(r.default.session.get("bare_jid")!==e.get("jid"))&&!e.get("subscription")}},"./src/headless/plugins/smacks/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/shared/api/index.js"),n=s("./src/headless/shared/api/public.js"),o=s("./src/headless/plugins/smacks/utils.js");const{Strophe:i}=n.default.env;i.addNamespace("SM","urn:xmpp:sm:3"),n.default.plugins.add("converse-smacks",{initialize(){r.default.settings.extend({enable_smacks:!0,smacks_max_unacked_stanzas:5}),r.default.listen.on("afterResourceBinding",o.sendEnableStanza),r.default.listen.on("beforeResourceBinding",o.enableStreamManagement),r.default.listen.on("send",o.onStanzaSent),r.default.listen.on("userSessionInitialized",o.initSessionData)}})},"./src/headless/plugins/smacks/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{enableStreamManagement:()=>E,initSessionData:()=>_,onStanzaSent:()=>A,sendEnableStanza:()=>S});var r=s("./src/log/index.js"),n=s("./node_modules/@converse/openpromise/dist/openpromise.js"),o=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/headless/utils/session.js");function d(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function c(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){d(o,r,n,i,a,"next",e)}function a(e){d(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{Strophe:u,u:h,stx:m}=a.default.env;function f(){return!(i.default.connection.isType("bosh")&&!(0,l.isTestEnv)())&&i.default.disco.stream.getFeature("sm",u.NS.SM)}function p(e){if(!o.default.session.get("smacks_enabled"))return!0;const t=parseInt(e.getAttribute("h"),10),s=o.default.session.get("num_stanzas_handled_by_server"),n=t-s;if(n<0){const e=`New reported stanza count lower than previous. New: ${t} - Previous: ${s}`;r.default.error(e)}const i=o.default.session.get("unacked_stanzas");if(n>i.length){const e=`Higher reported acknowledge count than unacknowledged stanzas. Reported Acknowledged Count: ${n} -Unacknowledged Stanza Count: ${i.length} -New: ${t} - Previous: ${s}`;r.default.error(e)}return o.default.session.save({num_stanzas_handled_by_server:t,num_stanzas_since_last_ack:0,unacked_stanzas:i.slice(n)}),!0}function g(){if(o.default.session.get("smacks_enabled")){const e=o.default.session.get("num_stanzas_handled"),t=m`<a xmlns="${u.NS.SM}" h="${e}"/>`;i.default.send(t)}return!0}function v(e){if(o.default.session.get("smacks_enabled")&&(h.isTagEqual(e,"iq")||h.isTagEqual(e,"presence")||h.isTagEqual(e,"message"))){const e=o.default.session.get("num_stanzas_handled");o.default.session.save("num_stanzas_handled",e+1)}return!0}function _(){const{session:e}=o.default;e.save({smacks_enabled:o.default.session.get("smacks_enabled")||!1,num_stanzas_handled:o.default.session.get("num_stanzas_handled")||0,num_stanzas_handled_by_server:o.default.session.get("num_stanzas_handled_by_server")||0,num_stanzas_since_last_ack:o.default.session.get("num_stanzas_since_last_ack")||0,unacked_stanzas:o.default.session.get("unacked_stanzas")||[]})}function y(){const{session:e}=o.default;h.safeSave(e,{smacks_enabled:!1,num_stanzas_handled:0,num_stanzas_handled_by_server:0,num_stanzas_since_last_ack:0,unacked_stanzas:[]})}function b(e){const t={smacks_enabled:!0};return["1","true"].includes(e.getAttribute("resume"))&&(t.smacks_stream_id=e.getAttribute("id")),o.default.session.save(t),!0}function j(e){if(y(),i.default.trigger("streamResumptionFailed"),e.querySelector("item-not-found"))r.default.warn("Could not resume previous SMACKS session, session id not found. A new session will be established.");else{r.default.error("Failed to enable stream management"),r.default.error(e.outerHTML);i.default.connection.get()._changeConnectStatus(u.Status.DISCONNECTED,null)}return!0}function w(e){b(e),p(e),function(){const e=o.default.session.get("unacked_stanzas");o.default.session.save("unacked_stanzas",[]),e.forEach((e=>i.default.send(h.toStanza(e))))}();const t=i.default.connection.get();t.do_bind=!1,t.authenticated=!0,t.restored=!0,t._changeConnectStatus(u.Status.CONNECTED,null)}function S(){return c((function*(){if(i.default.settings.get("enable_smacks")&&!o.default.session.get("smacks_enabled")&&(yield f())){const e=(0,n.getOpenPromise)(),t=i.default.connection.get();t._addSysHandler((t=>e.resolve(b(t))),u.NS.SM,"enabled"),t._addSysHandler((t=>e.resolve(j(t))),u.NS.SM,"failed");const s=i.default.connection.isType("websocket")||(0,l.isTestEnv)(),r=m`<enable xmlns="${u.NS.SM}" resume="${s}"/>`;i.default.send(r),t.flush(),yield e}}))()}const x=[];function E(){return c((function*(){if(!i.default.settings.get("enable_smacks"))return;if(!(yield f()))return;const e=i.default.connection.get();for(;x.length;)e.deleteHandler(x.pop());x.push(e.addHandler(v)),x.push(e.addHandler(g,u.NS.SM,"r")),x.push(e.addHandler(p,u.NS.SM,"a"));const{session:t}=o.default;(null==t?void 0:t.get("smacks_stream_id"))?yield c((function*(){const e=(0,n.getOpenPromise)(),t=i.default.connection.get();t._addSysHandler((t=>e.resolve(w(t))),u.NS.SM,"resumed"),t._addSysHandler((t=>e.resolve(j(t))),u.NS.SM,"failed");const s=o.default.session.get("smacks_stream_id"),r=o.default.session.get("num_stanzas_handled"),a=m`<resume xmlns="${u.NS.SM}" h="${r}" previd="${s}"/>`;i.default.send(a),t.flush(),yield e}))():y()}))()}function A(e){if(o.default.session){if(o.default.session.get("smacks_enabled")&&(h.isTagEqual(e,"iq")||h.isTagEqual(e,"presence")||h.isTagEqual(e,"message"))){const t=u.serialize(e);o.default.session.save("unacked_stanzas",(o.default.session.get("unacked_stanzas")||[]).concat([t]));const s=i.default.settings.get("smacks_max_unacked_stanzas");if(s>0){const e=o.default.session.get("num_stanzas_since_last_ack")+1;e%s===0&&i.default.send(m`<r xmlns="${u.NS.SM}"/>`),o.default.session.save({num_stanzas_since_last_ack:e})}}}else r.default.warn("No _converse.session!")}},"./src/headless/plugins/status/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/shared/api/index.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/constants.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function a(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))}}const l={status:{get:()=>a((function*(){yield r.default.waitUntil("statusInitialized");const e=n.default.state.profile.get("show");if(e)return e;const t=n.default.state.profile.get("status");return t||"online"}))(),set:(e,t)=>a((function*(){if(!Object.keys(o.STATUS_WEIGHTS).includes(e))throw new Error("Invalid availability value. See https://xmpp.org/rfcs/rfc3921.html#rfc.section.2.2.2.1");let s=o.PRES_SHOW_VALUES.includes(e)?e:void 0;"away"===e&&(s="dnd");const i={show:s,type:o.PRES_TYPE_VALUES.includes(e)?e:void 0};"string"==typeof t&&(i.status_message=t),yield r.default.waitUntil("statusInitialized"),n.default.state.profile.save(i)}))(),message:{get:()=>a((function*(){return yield r.default.waitUntil("statusInitialized"),n.default.state.profile.get("status_message")}))(),set:e=>a((function*(){yield r.default.waitUntil("statusInitialized"),n.default.state.profile.save({status_message:e})}))()}}}},"./src/headless/plugins/status/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{Profile:()=>r.default});var r=s("./src/headless/plugins/status/profile.js");s("./src/headless/plugins/status/plugin.js")},"./src/headless/plugins/status/plugin.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/plugins/status/profile.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),a=s("./src/headless/plugins/status/api.js"),l=s("./src/headless/utils/session.js"),d=s("./src/headless/plugins/status/utils.js");const{Strophe:c}=i.default.env;c.addNamespace("IDLE","urn:xmpp:idle:1"),i.default.plugins.add("converse-status",{initialize(){o.default.settings.extend({auto_away:0,auto_xa:0,csi_waiting_time:0,idle_presence_timeout:300,priority:0}),o.default.promises.add(["statusInitialized"]);const e={XMPPStatus:r.default,Profile:r.default,onUserActivity:d.onUserActivity,onEverySecond:d.onEverySecond,sendCSI:d.sendCSI,registerIntervalHandler:d.registerIntervalHandler};Object.assign(n.default,e),Object.assign(n.default.exports,e),Object.assign(n.default.api.user,a.default),o.default.settings.get("idle_presence_timeout")>0&&o.default.listen.on("addClientFeatures",(()=>o.default.disco.own.features.add(c.NS.IDLE))),o.default.listen.on("presencesInitialized",(e=>!e&&(0,d.registerIntervalHandler)())),o.default.listen.on("beforeTearDown",d.tearDown),o.default.listen.on("clearSession",(()=>{(0,l.shouldClearCache)(n.default)&&n.default.state.profile&&(n.default.state.profile.destroy(),delete n.default.state.profile,Object.assign(n.default,{profile:void 0}),o.default.promises.add(["statusInitialized"]))})),o.default.listen.on("connected",(()=>(0,d.initStatus)(!1))),o.default.listen.on("reconnected",(()=>(0,d.initStatus)(!0)))}})},"./src/headless/plugins/status/profile.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),a=s("./src/headless/shared/model-with-vcard.js"),l=s("./src/headless/shared/color.js"),d=s("./src/headless/plugins/status/utils.js");function c(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{Stanza:u,Strophe:h,stx:m}=i.default.env;class f extends((0,a.default)((0,l.default)(r.Model))){defaults(){return{presence:"online",status:null,show:null,groups:[]}}getStatus(){const e=this.get("presence");return"offline"===e||"unavailable"===e?"offline":this.get("show")||e||"offline"}get(e){return"jid"===e?n.default.session.get("bare_jid"):"nickname"===e?o.default.settings.get("nickname"):super.get(e)}set(e,t,s){if("jid"===e||"nickname"===e)throw new Error("Readonly property");return super.set(e,t,s)}initialize(){super.initialize(),this.on("change",(e=>{var t,s,r;((null===(t=e.changed)||void 0===t?void 0:t.status)||(null===(s=e.changed)||void 0===s?void 0:s.status_message)||(null===(r=e.changed)||void 0===r?void 0:r.show))&&o.default.user.presence.send({show:this.get("show"),status:this.get("status_message")})}))}getDisplayName(e){var t;const{__:s}=n.default,r=(null===(t=this.vcard)||void 0===t?void 0:t.get("fullname"))||this.getNickname()||this.get("jid");return"roster"===(null==e?void 0:e.context)?`${r} (${s("me")})`:r}getNickname(){var e;return(null===(e=this.vcard)||void 0===e?void 0:e.get("nickname"))||o.default.settings.get("nickname")}constructPresence(){return(e=function*(e={}){const{type:t,to:s}=e,{profile:r}=n.default.state,i="string"==typeof e.status?e.status:this.get("status_message"),a=e.show||this.get("status"),l="subscribe"===t?r.getNickname():null,c=o.default.settings.get("priority");let f;(0,d.isIdle)()&&(f=new Date,f.setSeconds(f.getSeconds()-(0,d.getIdleSeconds)()));const p=m`
            <presence ${s?u.unsafeXML(`to="${h.xmlescape(s)}"`):""}
                    ${t?u.unsafeXML(`type="${h.xmlescape(t)}"`):""}
                    xmlns="jabber:client">
                ${l?m`<nick xmlns="${h.NS.NICK}">${l}</nick>`:""}
                ${a?m`<show>${a}</show>`:""}
                ${i?m`<status>${i}</status>`:""}
                <priority>${Number.isNaN(Number(c))?0:c}</priority>
                ${f?m`<idle xmlns="${h.NS.IDLE}" since="${f.toISOString()}"></idle>`:""}
            </presence>`;return yield o.default.hook("constructedPresence",null,p)},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){c(o,r,n,i,a,"next",e)}function a(e){c(o,r,n,i,a,"throw",e)}i(void 0)}))}).apply(this,arguments);var e}}},"./src/headless/plugins/status/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{getIdleSeconds:()=>y,initStatus:()=>h,isIdle:()=>_,onEverySecond:()=>j,onUserActivity:()=>b,registerIntervalHandler:()=>S,sendCSI:()=>w,tearDown:()=>x});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/api/public.js"),i=s("./src/headless/utils/storage.js"),a=s("./src/headless/utils/session.js"),l=s("./src/headless/shared/constants.js");const{Strophe:d,$build:c}=o.default.env;function u(e){n.default.trigger("statusInitialized",e)}function h(e){if(e=void 0!==r.default.state.profile&&e)u(e);else{const t=`converse.xmppstatus-${r.default.session.get("bare_jid")}`;r.default.state.profile=new r.default.exports.Profile({id:t}),r.default.state.xmppstatus=r.default.state.profile,Object.assign(r.default,{xmppstatus:r.default.state.profile}),(0,i.initStorage)(r.default.state.profile,t,"session"),r.default.state.profile.fetch({success:()=>u(e),error:()=>u(e),silent:!0})}}let m,f=0,p=!1,g=!1,v=!1;function _(){return p}function y(){return f}function b(){var e;f>0&&(f=0),(null===(e=n.default.connection.get())||void 0===e?void 0:e.authenticated)&&(v&&w(l.ACTIVE),p&&(p=!1,n.default.user.presence.send()),!0===g&&(g=!1,r.default.state.profile.set("show",void 0)))}function j(){var e;if(!(null===(e=n.default.connection.get())||void 0===e?void 0:e.authenticated))return;const{profile:t}=r.default.state,s=t.get("show");f++,n.default.settings.get("csi_waiting_time")>0&&f>n.default.settings.get("csi_waiting_time")&&!v&&w(l.INACTIVE),n.default.settings.get("idle_presence_timeout")>0&&f>n.default.settings.get("idle_presence_timeout")&&!p&&(p=!0,n.default.user.presence.send()),n.default.settings.get("auto_away")>0&&f>n.default.settings.get("auto_away")&&"away"!==s&&"xa"!==s&&"dnd"!==s?(g=!0,t.set("show","away")):n.default.settings.get("auto_xa")>0&&f>n.default.settings.get("auto_xa")&&"xa"!==s&&"dnd"!==s&&(g=!0,t.set("show","xa"))}function w(e){n.default.send(c(e,{xmlns:d.NS.CSI})),v=e===l.INACTIVE}function S(){if(n.default.settings.get("auto_away")<1&&n.default.settings.get("auto_xa")<1&&n.default.settings.get("csi_waiting_time")<1&&n.default.settings.get("idle_presence_timeout")<1)return;f=0,g=!1;const{onUserActivity:e,onEverySecond:t}=r.default.exports;window.addEventListener("click",e),window.addEventListener("focus",e),window.addEventListener("keypress",e),window.addEventListener("mousemove",e),window.addEventListener((0,a.getUnloadEvent)(),e,{once:!0,passive:!0}),m=setInterval(t,1e3)}function x(){const{onUserActivity:e}=r.default.exports;window.removeEventListener("click",e),window.removeEventListener("focus",e),window.removeEventListener("keypress",e),window.removeEventListener("mousemove",e),window.removeEventListener((0,a.getUnloadEvent)(),e),m&&(clearInterval(m),m=null)}},"./src/headless/plugins/vcard/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s("./src/log/index.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),a=s("./src/headless/plugins/vcard/utils.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{Strophe:c,dayjs:u,u:h,stx:m}=i.default.env,f={vcard:{set:(e,t)=>d((function*(){if(!e)throw Error("No jid provided for the VCard data");o.default.waitUntil("VCardsInitialized");let s=n.default.state.vcards.get(e);var r;const i=null!==(r=null==s?void 0:s.attributes)&&void 0!==r?r:null;if(s&&i.image!==t.image){const e=h.base64ToArrayBuffer(t.image),r=yield crypto.subtle.digest("SHA-1",e);s.save({image:t.image,image_type:t.image_type,image_hash:h.arrayBufferToHex(r)})}let l;var d,u,f,p,g,v,_;const y=m`
                <vCard xmlns="vcard-temp">
                    <FN>${null!==(d=t.fn)&&void 0!==d?d:""}</FN>
                    <NICKNAME>${null!==(u=t.nickname)&&void 0!==u?u:""}</NICKNAME>
                    <URL>${null!==(f=t.url)&&void 0!==f?f:""}</URL>
                    <ROLE>${null!==(p=t.role)&&void 0!==p?p:""}</ROLE>
                    <EMAIL><INTERNET/><PREF/><USERID>${null!==(g=t.email)&&void 0!==g?g:""}</USERID></EMAIL>
                    <PHOTO>
                        <TYPE>${null!==(v=t.image_type)&&void 0!==v?v:""}</TYPE>
                        <BINVAL>${null!==(_=t.image)&&void 0!==_?_:""}</BINVAL>
                    </PHOTO>
                </vCard>`;try{l=yield o.default.sendIQ((0,a.createStanza)("set",e,y))}catch(e){throw i&&s.save(i),e}if(s=yield o.default.vcard.update(e,!0),h.isOwnJID(e)){var b;const e=m`<x xmlns="${c.NS.VCARD_UPDATE}">
                    <photo>${null!==(b=s.get("image_hash"))&&void 0!==b?b:""}</photo>
                </x>`;o.default.user.presence.send({},e)}return l}))(),get:(e,t)=>d((function*(){if(o.default.waitUntil("VCardsInitialized"),"string"==typeof e)return(0,a.fetchVCard)(e);const s=e.get("vcard_error");if(s){const{random:e,round:r}=Math,n=r(e()),o=u().subtract(21,"days").subtract(r(24*e())*n,"hours").add(r(24*e())*(n?0:1),"hours"),i=u(s).isAfter(o);if(!t&&i)return null}const n=e.get("vcard_updated");if(n){const{random:e,round:s}=Math,r=s(e()),o=u().subtract(7,"days").subtract(s(24*e())*r,"hours").add(s(24*e())*(r?0:1),"hours"),i=u(n).isAfter(o);if(!t&&i)return null}const i=e.get("jid");return i?(0,a.fetchVCard)(i):(r.default.error("No JID to get vcard for"),null)}))(),update(e,t){return d((function*(){o.default.waitUntil("VCardsInitialized");const s=yield this.get(e,t);if(null!==s){if(e="string"==typeof e?n.default.state.vcards.get(e):e)return Object.keys(s).length&&(delete s.stanza,h.safeSave(e,s)),e;r.default.error(`Could not find a VCard model for ${e}`)}else r.default.debug("api.vcard.update: null data returned, not updating the vcard")})).call(this)}}}},"./src/headless/plugins/vcard/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{VCard:()=>r.default,VCards:()=>n.default});var r=s("./src/headless/plugins/vcard/vcard.js"),n=s("./src/headless/plugins/vcard/vcards.js");s("./src/headless/plugins/vcard/plugin.js")},"./src/headless/plugins/vcard/parsers.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{parseVCardResultStanza:()=>i});var r=s("./src/headless/shared/api/public.js");function n(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{u:o}=r.default.env;function i(e){return(t=function*(){var t,s,r,n,i,a,l;const d={email:null===(t=e.querySelector(":scope > vCard EMAIL USERID"))||void 0===t?void 0:t.textContent,fullname:null===(s=e.querySelector(":scope > vCard FN"))||void 0===s?void 0:s.textContent,image:null===(r=e.querySelector(":scope > vCard PHOTO BINVAL"))||void 0===r?void 0:r.textContent,image_type:null===(n=e.querySelector(":scope > vCard PHOTO TYPE"))||void 0===n?void 0:n.textContent,nickname:null===(i=e.querySelector(":scope > vCard NICKNAME"))||void 0===i?void 0:i.textContent,role:null===(a=e.querySelector(":scope > vCard ROLE"))||void 0===a?void 0:a.textContent,stanza:e,url:null===(l=e.querySelector(":scope > vCard URL"))||void 0===l?void 0:l.textContent,vcard_updated:(new Date).toISOString(),error:void 0,vcard_error:void 0,image_hash:void 0};if(d.image){const e=o.base64ToArrayBuffer(d.image),t=yield crypto.subtle.digest("SHA-1",e);d.image_hash=o.arrayBufferToHex(t)}return d},function(){var e=this,s=arguments;return new Promise((function(r,o){var i=t.apply(e,s);function a(e){n(i,r,o,a,l,"next",e)}function l(e){n(i,r,o,a,l,"throw",e)}a(void 0)}))})();var t}},"./src/headless/plugins/vcard/plugin.js":(e,t,s)=>{"use strict";s.r(t);s("./src/headless/plugins/status/index.js");var r=s("./src/headless/plugins/vcard/vcard.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),a=s("./src/headless/plugins/vcard/api.js"),l=s("./src/headless/plugins/vcard/vcards.js"),d=s("./src/headless/plugins/vcard/utils.js");const{Strophe:c}=i.default.env;i.default.plugins.add("converse-vcard",{dependencies:["converse-status","converse-roster"],enabled(){var e;return!(null===(e=o.default.settings.get("blacklisted_plugins"))||void 0===e?void 0:e.includes("converse-vcard"))},initialize(){o.default.settings.extend({lazy_load_vcards:!0}),o.default.promises.add("VCardsInitialized"),Object.assign(n.default.api,a.default);const e={VCard:r.default,VCards:l.default};Object.assign(n.default,e),Object.assign(n.default.exports,e),o.default.listen.on("chatRoomInitialized",(e=>{e.listenTo(e.occupants,"change:image_hash",(e=>(0,d.onOccupantAvatarChanged)(e)))})),o.default.listen.on("addClientFeatures",(()=>{o.default.disco.own.features.add(c.NS.VCARD),o.default.disco.own.features.add(c.NS.VCARD_UPDATE)})),o.default.listen.on("clearSession",(()=>(0,d.clearVCardsSession)())),o.default.listen.on("visibilityChanged",(({el:e})=>{const{model:t}=e;(null==t?void 0:t.vcard)&&t.vcard.trigger("visibilityChanged")})),o.default.listen.on("connected",(()=>{const e=new n.default.exports.VCards;n.default.state.vcards=e,Object.assign(n.default,{vcards:e})})),o.default.listen.on("presencesInitialized",(()=>(0,d.registerPresenceHandler)())),o.default.listen.on("beforeTearDown",(()=>(0,d.unregisterPresenceHandler)())),o.default.listen.on("constructedPresence",((e,t)=>(0,d.updatePresence)(t)))}})},"./src/headless/plugins/vcard/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{clearVCardsSession:()=>j,createStanza:()=>v,fetchVCard:()=>w,getVCardForModel:()=>y,getVCardForOccupant:()=>b,onOccupantAvatarChanged:()=>_,registerPresenceHandler:()=>E,unregisterPresenceHandler:()=>x,updatePresence:()=>A});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/index.js"),o=s("./src/headless/shared/api/public.js"),i=s("./src/log/index.js"),a=s("./src/headless/utils/session.js"),l=s("./src/headless/utils/html.js"),d=s("./src/headless/shared/parsers.js"),c=s("./src/headless/plugins/vcard/parsers.js");function u(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function h(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){u(o,r,n,i,a,"next",e)}function a(e){u(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{Strophe:m,$iq:f,sizzle:p,stx:g}=o.default.env;function v(e,t,s){const r=f(t?{type:e,to:t}:{type:e});return s?r.cnode(s):r.c("vCard",{xmlns:m.NS.VCARD}),r}function _(e){const t=e.get("image_hash"),s=[];e.get("jid")&&s.push(r.default.state.vcards.get(e.get("jid"))),s.push(r.default.state.vcards.get(e.get("from"))),s.forEach((e=>t&&e&&(null==e?void 0:e.get("image_hash"))!==t&&n.default.vcard.update(e,!0)))}function y(e,t=!1){return h((function*(){let s;if(yield n.default.waitUntil("VCardsInitialized"),e instanceof r.default.exports.MUCOccupant)s=yield b(e,t);else if(e instanceof r.default.exports.MUCMessage)s=yield function(e,t=!0){return h((function*(){var s;if(["error","info"].includes(e.get("type")))return;yield n.default.waitUntil("VCardsInitialized");const{vcards:o,profile:a}=r.default.state,l=null==e||null===(s=e.collection)||void 0===s?void 0:s.chatbox,d=m.getResourceFromJid(e.get("from"));if(d&&(null==l?void 0:l.get("nick"))===d)return a.vcard;{var c;const s=(null===(c=e.occupant)||void 0===c?void 0:c.get("jid"))||e.get("from");return s?o.get(s)||o.create({jid:s},{lazy_load:t}):(i.default.warn(`Could not get VCard for message because no JID found! msgid: ${e.get("msgid")}`),null)}}))()}(e,t);else{let n;if(e instanceof r.default.exports.Message){if(["error","info"].includes(e.get("type")))return;n=m.getBareJidFromJid(e.get("from"))}else n=e.get("jid");if(!n)return i.default.warn("Could not set VCard on model because no JID found!"),null;const{vcards:o}=r.default.state;s=o.get(n)||o.create({jid:n},{lazy_load:t})}return s&&s.on("change",(()=>e.trigger("vcard:change"))),s}))()}function b(e,t=!0){return h((function*(){var s;yield n.default.waitUntil("VCardsInitialized");const{vcards:o,profile:a}=r.default.state,l=null==e||null===(s=e.collection)||void 0===s?void 0:s.chatroom,d=e.get("nick");if(d&&(null==l?void 0:l.get("nick"))===d)return a.vcard;{const s=e.get("jid")||e.get("from");return s?o.get(s)||o.create({jid:s},{lazy_load:t}):(i.default.debug("Could not get VCard for occupant because no JID found!"),null)}}))()}function j(){(0,a.shouldClearCache)(r.default)&&(n.default.promises.add("VCardsInitialized"),r.default.state.vcards&&(r.default.state.vcards.clearStore(),Object.assign(r.default,{vcards:void 0}),delete r.default.state.vcards))}function w(e){return h((function*(){const t=r.default.session.get("bare_jid"),s=m.getBareJidFromJid(e)===t?null:e;let o;try{o=yield n.default.sendIQ(v("get",s))}catch(t){var i;const{message:s}=null!==(i=(0,l.isElement)(t)?yield(0,d.parseErrorStanza)(t):t)&&void 0!==i?i:{};return{jid:e,stanza:(0,l.isElement)(t)?t:null,error:s,vcard_error:(new Date).toISOString()}}return(0,c.parseVCardResultStanza)(o)}))()}let S;function x(){if(S){n.default.connection.get().deleteHandler(S),S=null}}function E(){const e=n.default.connection.get();S=e.addHandler((e=>{try{!function(e){h((function*(){yield n.default.waitUntil("VCardsInitialized");const t=p(`x[xmlns="${m.NS.VCARD_UPDATE}"] photo`,e).pop();if(t){const s=t.textContent,o=m.getBareJidFromJid(e.getAttribute("from")),a=yield r.default.state.vcards.get(o);(null==a?void 0:a.get("image_hash"))!==s&&n.default.vcard.update(o,!0).catch((e=>i.default.error(e)))}}))()}(e)}catch(e){i.default.error(e)}return!0}),null,"presence",null)}function A(e){if(0===p(`x[xmlns=${m.NS.VCARD_UPDATE}"]`,e.root()).length){const t=g`<x xmlns="${m.NS.VCARD_UPDATE}"></x>`;e.root().cnode(t).up()}return e}m.addNamespace("VCARD_UPDATE","vcard-temp:x:update")},"./src/headless/plugins/vcard/vcard.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=(s("./src/headless/shared/_converse.js"),s("./src/headless/shared/api/index.js"));class o extends r.Model{initialize(e,t){this.lazy_load=n.default.settings.get("lazy_load_vcards")&&!!(null==t?void 0:t.lazy_load),this.lazy_load?this.once("visibilityChanged",(()=>n.default.vcard.update(this))):n.default.vcard.update(this)}get idAttribute(){return"jid"}getDisplayName(){return this.get("nickname")||this.get("fullname")||this.get("jid")}constructor(e,t){super(e,t),this._vcard=null}}const i=o},"./src/headless/plugins/vcard/vcards.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./node_modules/@converse/openpromise/dist/openpromise.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/_converse.js"),a=s("./src/headless/utils/storage.js"),l=s("./src/headless/plugins/vcard/vcard.js");function d(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class c extends r.Collection{initialize(){return(e=function*(){const{session:e}=i.default,t=`${e.get("bare_jid")}-converse.vcards`;(0,a.initStorage)(this,t),yield this.fetchVCards(),o.default.trigger("VCardsInitialized")},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){d(o,r,n,i,a,"next",e)}function a(e){d(o,r,n,i,a,"throw",e)}i(void 0)}))}).call(this);var e}fetchVCards(){const e=(0,n.getOpenPromise)();return this.fetch({success:()=>e.resolve(),error:()=>e.resolve()}),e}constructor(){super(),this.model=l.default}}const u=c},"./src/headless/shared/_converse.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./src/log/index.js"),n=s("./src/headless/shared/i18n.js"),o=s("./node_modules/pluggable.js/src/pluggable.js"),i=s("./node_modules/@converse/skeletor/dist/skeletor.js"),a=s("./node_modules/@converse/openpromise/dist/openpromise.js"),l=s("./src/headless/utils/session.js"),d=s("./src/headless/shared/constants.js");const c={chatboxes:null,bookmarks:null,ANONYMOUS:d.ANONYMOUS,CLOSED:d.CLOSED,EXTERNAL:d.EXTERNAL,LOGIN:d.LOGIN,LOGOUT:d.LOGOUT,OPENED:d.OPENED,PREBIND:d.PREBIND,SUCCESS:d.SUCCESS,FAILURE:d.FAILURE,INACTIVE:d.INACTIVE,ACTIVE:d.ACTIVE,COMPOSING:d.COMPOSING,PAUSED:d.PAUSED,GONE:d.GONE};class u extends((0,i.EventEmitter)(Object)){initialize(){this.VERSION_NAME=d.VERSION_NAME,this.strict_plugin_dependencies=!1,this.pluggable=null,this.templates={},this.storage={},this.promises={initialized:(0,a.getOpenPromise)()},this.NUM_PREKEYS=100,this.TIMEOUTS={PAUSED:1e4,INACTIVE:9e4},Object.assign(this,c),this.api=null,this.labels={},this.exports={},this.constants={},this.env={},this.state={},this.initSession()}initSession(){var e;null===(e=this.session)||void 0===e||e.destroy(),this.session=new i.Model,Object.assign(this,{jid:void 0,bare_jid:void 0,domain:void 0,resource:void 0})}__(...e){return n.default.__(...e)}___(e){return e}constructor(){super();const e=new Proxy(this,{get:(e,t)=>((0,l.isTestEnv)()||"string"!=typeof t||Object.keys(c).includes(t)&&r.default.warn(`Accessing ${t} on _converse is DEPRECATED`),Reflect.get(e,t))});return e.initialize(),e}}const h=new u;o.default.enable(h,"_converse","pluggable");const m=h},"./src/headless/shared/actions.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{rejectMessage:()=>u,sendChatState:()=>f,sendMarker:()=>h,sendReceiptStanza:()=>m,sendRetractionMessage:()=>p});var r=s("./src/log/index.js"),n=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),o=s("./src/headless/shared/api/index.js"),i=s("./src/headless/shared/api/public.js"),a=s("./src/headless/shared/constants.js");const{u:l,stx:d,Stanza:c}=i.default.env;function u(e,t){o.default.send(d`<message to="${e.getAttribute("from")}"
                    type="error"
                    id="${e.getAttribute("id")}"
                    xmlns="jabber:client">
                <error type="cancel">
                    <not-allowed xmlns="${n.Strophe.NS.STANZAS}"/>
                    <text xmlns="${n.Strophe.NS.STANZAS}">${t}</text>
                </error>
            </message>`),r.default.warn(`Rejecting message stanza with the following reason: ${t}`),r.default.warn(e)}function h(e,t,s,i){if(!a.MARKER_TYPES.includes(s))return void r.default.error(`Invalid marker type: ${s}`);const u=d`
        <message from="${o.default.connection.get().jid}"
                id="${l.getUniqueId()}"
                to="${e}"
                type="${i||"chat"}"
                xmlns="jabber:client">
            <${c.unsafeXML(s)} xmlns="${n.Strophe.NS.MARKERS}" id="${t}"/>
        </message>`;o.default.send(u)}function m(e,t){const s=d`
        <message from="${o.default.connection.get().jid}"
                id="${l.getUniqueId()}"
                to="${e}"
                type="chat"
                xmlns="jabber:client">
            <received xmlns="${n.Strophe.NS.RECEIPTS}" id="${t}"/>
            <store xmlns="${n.Strophe.NS.HINTS}"/>
        </message>`;o.default.send(s)}function f(e,t){if(e)if(a.CHAT_STATES.includes(t)){if(o.default.settings.get("send_chat_state_notifications")&&t){const s=o.default.settings.get("send_chat_state_notifications");if(Array.isArray(s)&&!s.includes(t))return;o.default.send(d`<message id="${l.getUniqueId()}" to="${e}" type="chat" xmlns="jabber:client">
                <${c.unsafeXML(t)} xmlns="${n.Strophe.NS.CHATSTATES}"/>
                <no-store xmlns="${n.Strophe.NS.HINTS}"/>
                <no-permanent-store xmlns="${n.Strophe.NS.HINTS}"/>
            </message>`)}}else r.default.error(`Invalid chat state: ${t}`);else r.default.error("sendChatState called with no JID")}function p(e,t,s){const r=t.get("origin_id");if(!r)throw new Error("Can't retract message without a XEP-0359 Origin ID");const i=d`
        <message id="${s}"
                 to="${e}"
                 type="chat"
                 xmlns="jabber:client">
            <retract id="${r}" xmlns="${n.Strophe.NS.RETRACT}"/>
            <body>/me retracted a message</body>
            <store xmlns="${n.Strophe.NS.HINTS}"/>
            <fallback xmlns="${n.Strophe.NS.FALLBACK}" for="${n.Strophe.NS.RETRACT}" />
        </message>`;return o.default.connection.get().send(i)}},"./src/headless/shared/api/events.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/utils/object.js");function o(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const i={trigger(e){return(t=function*(e){if(!r.default._events)return;const t=Array.from(arguments),s=t.pop();if(s&&s.synchronous){const s=r.default._events[e]||[],n=t.splice(1);yield Promise.all(s.map((e=>e.callback.apply(e.ctx,n))))}else r.default.trigger.apply(r.default,arguments);const n=r.default.promises[e];void 0!==n&&n.resolve(arguments[1])},function(){var e=this,s=arguments;return new Promise((function(r,n){var i=t.apply(e,s);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)}))}).apply(this,arguments);var t},hook(e,t,s){const n=r.default._events[e]||[];return n.length?n.reduce(((e,s)=>e.then((e=>s.callback(t,e)))),Promise.resolve(s)):s},listen:{once:r.default.once.bind(r.default),on:r.default.on.bind(r.default),not:r.default.off.bind(r.default),stanza(e,t,s){(0,n.isFunction)(t)?(s=t,t={}):t=t||{},r.default.api.connection.get().addHandler(s,t.ns,e,t.type,t.id,t.from,t)}}}},"./src/headless/shared/api/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./src/headless/shared/connection/api.js"),n=s("./src/headless/shared/api/events.js"),o=s("./src/headless/shared/api/promise.js"),i=s("./src/headless/shared/api/send.js"),a=s("./src/headless/shared/api/user.js"),l=s("./src/headless/shared/settings/api.js");function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=(u=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){d(e,t,s[t])}))}return e}({connection:r.default,settings:l.settings_api},i.default,a.default,n.default,o.default),h=null!=(h={disco:null,elements:null,contacts:null})?h:{},Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(h)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(h)).forEach((function(e){Object.defineProperty(u,e,Object.getOwnPropertyDescriptor(h,e))})),u);var u,h;const m=c},"./src/headless/shared/api/presence.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/promise.js"),o=s("./src/headless/shared/api/send.js"),i=s("./src/headless/plugins/muc/api.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{waitUntil:l}=n.default,{send:d}=o.default,{rooms:c}=i.default,u={presence:{send(e,t){return(s=function*(){yield l("statusInitialized");let s=[];t&&(s=Array.isArray(t)?t:[t]);const n=r.default.state.profile,o=yield n.constructPresence(e);s.map((e=>{var t;return null!==(t=null==e?void 0:e.tree())&&void 0!==t?t:e})).forEach((e=>o.cnode(e).up())),d(o);const{show:i,type:a}=e||{};!i&&a||(yield c.get()).forEach((t=>t.sendStatusPresence(e,s)))},function(){var e=this,t=arguments;return new Promise((function(r,n){var o=s.apply(e,t);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))})();var s}}}},"./src/headless/shared/api/promise.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/shared/_converse.js"),n=s("./node_modules/@converse/openpromise/dist/openpromise.js"),o=s("./src/headless/utils/promise.js"),i=s("./src/headless/utils/object.js");const a={promises:{add(e,t=!0){(e=Array.isArray(e)?e:[e]).forEach((e=>{const s=(0,n.getOpenPromise)();s.replace=t,r.default.promises[e]=s}))}},waitUntil(e){if((0,i.isFunction)(e))return(0,o.waitUntil)(e);{const t=r.default.promises[e];return void 0===t?null:t}}}},"./src/headless/shared/api/public.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>E});var r=s("./node_modules/sprintf-js/src/sprintf.js"),n=s("./node_modules/dayjs/dayjs.min.js"),o=s.n(n),i=s("./node_modules/sizzle/dist/sizzle.js"),a=s.n(i),l=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),d=s("./node_modules/@converse/skeletor/dist/skeletor.js"),c=s("./node_modules/filesize/dist/filesize.esm.js"),u=s("./node_modules/lit/index.js"),h=s("./src/headless/shared/api/index.js"),m=s("./src/headless/shared/_converse.js"),f=s("./src/headless/shared/i18n.js"),p=s("./src/log/index.js"),g=s("./src/headless/shared/connection/feedback.js"),v=s("./src/headless/utils/index.js"),_=s("./src/headless/shared/constants.js"),y=s("./src/headless/utils/session.js"),b=s("./src/headless/shared/errors.js"),j=s("./src/headless/shared/settings/utils.js"),w=s("./src/headless/utils/init.js");function S(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}m.default.api=h.default;const x={$build:l.$build,$iq:l.$iq,$msg:l.$msg,$pres:l.$pres,Collection:d.Collection,Model:d.Model,Stanza:l.Stanza,Strophe:l.Strophe,TimeoutError:b.TimeoutError,VERSION_NAME:_.VERSION_NAME,css:u.css,dayjs:o(),errors:b,filesize:c.filesize,html:u.html,log:p.default,nothing:u.nothing,render:u.render,sizzle:a(),sprintf:r.sprintf,stx:l.stx,u:v.default,utils:v.default},E=Object.assign(window.converse||{},{CHAT_STATES:_.CHAT_STATES,keycodes:_.KEYCODES,initialize(e){return(t=function*(){var t,s;const{api:r}=m.default;if(yield(0,w.cleanup)(m.default),(0,j.initAppSettings)(e),m.default.strict_plugin_dependencies=e.strict_plugin_dependencies,p.default.setLogLevel(r.settings.get("loglevel")),r.settings.get("authentication")===_.ANONYMOUS&&r.settings.get("auto_login")&&!r.settings.get("jid"))throw new Error("Config Error: you need to provide the server's domain via the 'jid' option when using anonymous authentication with auto_login.");(0,v.setLogLevelFromRoute)(),addEventListener("hashchange",v.setLogLevelFromRoute);const n=new g.default;Object.assign(m.default,{connfeedback:n}),Object.assign(m.default.state,{connfeedback:n}),m.default.env=x,yield(0,w.initSessionStorage)(m.default),yield(0,w.initClientConfig)(m.default),yield f.default.initialize(),(0,w.initPlugins)(m.default),null===(t=r.elements)||void 0===t||t.register(),(0,w.registerGlobalEventHandlers)(m.default);const o=m.default.pluggable.plugins;if((r.settings.get("auto_login")||r.settings.get("keepalive")&&(null===(s=o["converse-bosh"])||void 0===s?void 0:s.enabled()))&&(yield r.user.login(null,null,!0)),r.trigger("initialized"),(0,y.isTestEnv)())return m.default},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function i(e){S(o,r,n,i,a,"next",e)}function a(e){S(o,r,n,i,a,"throw",e)}i(void 0)}))})();var t},plugins:{add(e,t){if(t.__name__=e,void 0!==m.default.pluggable.plugins[e])throw new TypeError(`Error: plugin with name "${e}" has already been registered!`);m.default.pluggable.plugins[e]=t}},env:x})},"./src/headless/shared/api/send.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/shared/_converse.js"),n=s("./src/log/index.js"),o=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),i=s("./src/headless/shared/errors.js");const a={send(e){const{api:t}=r.default;if(!t.connection.connected())return n.default.warn("Not sending stanza because we're not connected!"),void n.default.warn(o.Strophe.serialize(e));const s=e instanceof Element?e:e.tree();if("iq"===s.tagName)return t.sendIQ(s);t.connection.get().send(s),t.trigger("send",s)},sendIQ(e,t,s=!0){const{api:n}=r.default;if(!n.connection.connected())throw new Error("Not sending IQ stanza because we're not connected!");const a=n.connection.get();let l;const d=e instanceof Element?e:e.tree();return["get","set"].includes(d.getAttribute("type"))?(t=t||n.settings.get("stanza_timeout"),s?(l=new Promise(((e,s)=>a.sendIQ(d,e,s,t))),l.catch((e=>{if(null===e)throw new i.TimeoutError(`Timeout error after ${t}ms for the following IQ stanza: ${o.Strophe.serialize(d)}`)}))):l=new Promise((e=>a.sendIQ(d,e,e,t)))):(a.sendIQ(d),l=Promise.resolve()),n.trigger("send",d),l}}},"./src/headless/shared/api/user.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./src/headless/shared/_converse.js"),n=s("./src/headless/shared/api/presence.js"),o=s("./src/headless/shared/connection/api.js"),i=s("./src/headless/utils/session.js"),a=s("./src/headless/utils/init.js"),l=s("./node_modules/@converse/openpromise/dist/openpromise.js"),d=s("./src/headless/shared/settings/user/api.js"),c=s("./src/headless/shared/constants.js");function u(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function h(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){u(o,r,n,i,a,"next",e)}function a(e){u(o,r,n,i,a,"throw",e)}i(void 0)}))}}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const f={user:(p=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){m(e,t,s[t])}))}return e}({settings:d.user_settings_api},n.default),g={jid(){var e;return null===(e=o.default.get())||void 0===e?void 0:e.jid},login(e,t,s=!1){return h((function*(){var n;const{api:i}=r.default;e=e||i.settings.get("jid");const l=o.default.init(e);if((null===(n=i.settings.get("connection_options"))||void 0===n?void 0:n.worker)&&(yield l.restoreWorkerSession()))return;e&&(e=yield(0,a.setUserJID)(e));const{success:d}=yield r.default.api.hook("login",this,{jid:e,password:t,automatic:s});if(d)return;t=t||i.settings.get("password");const c=e&&t?{jid:e,password:t}:null;yield(0,a.attemptNonPreboundSession)(c,s)})).call(this)},logout:()=>h((function*(){const{api:e}=r.default;yield e.trigger("beforeLogout",{synchronous:!0});const t=(0,l.getOpenPromise)(),s=()=>{Object.keys(r.default.promises).forEach((e=>(0,i.replacePromise)(r.default,e))),localStorage.removeItem("conversejs-session-jid"),e.trigger("logout"),t.resolve()},n=o.default.get();return n?(n.setDisconnectionCause(c.LOGOUT,void 0,!0),e.listen.once("disconnected",(()=>s())),n.disconnect()):s(),t}))()},g=null!=g?g:{},Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(g)).forEach((function(e){Object.defineProperty(p,e,Object.getOwnPropertyDescriptor(g,e))})),p)};var p,g;const v=f},"./src/headless/shared/chatbox.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/shared/api/index.js"),o=s("./src/headless/utils/session.js"),i=s("./src/headless/shared/_converse.js"),a=s("./src/headless/shared/api/public.js"),l=s("./src/log/index.js"),d=s("./src/headless/shared/model-with-messages.js");function c(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function u(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){c(o,r,n,i,a,"next",e)}function a(e){c(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{u:h}=a.default.env;class m extends((0,d.default)(r.Model)){initialize(){var e=this,t=()=>super.initialize;return u((function*(){yield t().call(e);const s=this.get("jid");s&&this.set({box_id:`box-${s}`})})).call(this)}validate(e){if(!e.jid)return"Ignored ChatBox without JID";const t=n.default.settings.get("auto_join_rooms").map((e=>e instanceof Object?e.jid:e)),s=n.default.settings.get("auto_join_private_chats").concat(t);if(n.default.settings.get("singleton")&&!s.includes(e.jid)&&!n.default.settings.get("auto_join_on_invite")){const t=`${e.jid} is not allowed because singleton is true and it's not being auto_joined`;return l.default.warn(t),t}}maybeShow(e){if((0,o.isUniView)()){const t=e=>!e.get("hidden")&&e.get("jid")!==this.get("jid")&&"controlbox"!==e.get("id"),s=i.default.state.chatboxes.filter(t);return(e||0===s.length)&&(s.forEach((e=>h.safeSave(e,{hidden:!0}))),h.safeSave(this,{hidden:!1}),this.trigger("show")),this}return h.safeSave(this,{hidden:!1,closed:!1}),this.trigger("show"),this}shouldDestroyOnClose(){return u((function*(){return yield n.default.hook("shouldDestroyOnClose",this,!0)})).call(this)}close(e){return u((function*(){if(yield this.shouldDestroyOnClose())try{yield new Promise(((e,t)=>this.destroy({success:e,error:(e,s)=>t(s)})))}catch(e){l.default.debug(e)}else h.safeSave(this,{closed:!0});n.default.settings.get("clear_messages_on_reconnection")&&(yield this.clearMessages()),n.default.trigger("chatBoxClosed",this)})).call(this)}announceReconnection(){n.default.trigger("chatReconnected",this)}onReconnection(){return u((function*(){n.default.settings.get("clear_messages_on_reconnection")&&(yield this.clearMessages()),this.announceReconnection()})).call(this)}}},"./src/headless/shared/color.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/utils/index.js"),n=s("./src/headless/shared/constants.js");function o(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function i(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var i=e.apply(t,s);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)}))}}const{safeSave:a,colorize:l}=r.default;function d(e){return class extends e{setColor(){return i((function*(){const e=yield l(this.getIdentifier());a(this,{color:e})})).call(this)}getIdentifier(){return this.get("type")===n.CHATROOMS_TYPE?this.get("jid"):"groupchat"===this.get("type")?this.get("from_real_jid")||this.get("from"):this.get("occupant_id")||this.get("jid")||this.get("from")||this.get("nick")}getColor(){return i((function*(){return this.get("color")||(yield this.setColor()),this.get("color")})).call(this)}getAvatarStyle(e=""){return i((function*(){try{return`background-color: ${yield this.getColor()} !important; ${e}`}catch(t){return`background-color: gray !important; ${e}`}})).call(this)}}}},"./src/headless/shared/connection/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./src/headless/shared/api/events.js"),n=s("./src/headless/shared/connection/index.js"),o=s("./src/headless/shared/constants.js"),i=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),a=s("./src/headless/shared/connection/utils.js"),l=s("./src/headless/utils/jid.js"),d=s("./src/headless/utils/session.js"),c=s("./src/headless/shared/settings/api.js");let u;const h={explicitResourceBinding:!0},m={init(e){if(e&&(null==u?void 0:u.jid)&&(0,l.isSameDomain)(u.jid,e))return u;if(!c.settings_api.get("bosh_service_url")&&c.settings_api.get("authentication")===o.PREBIND)throw new Error("authentication is set to 'prebind' but we don't have a BOSH connection");const t=(0,d.isTestEnv)()?n.MockConnection:n.Connection;return u=new t((0,a.getConnectionServiceURL)(),Object.assign(h,c.settings_api.get("connection_options"),{keepalive:c.settings_api.get("keepalive")})),(0,a.setStropheLogLevel)(),r.default.trigger("connectionInitialized"),u},get:()=>u,destroy(){this.disconnect(),null==u||u.disconnect(),u=void 0},authenticated:()=>(null==u?void 0:u.authenticated)&&!0,connected:()=>(null==u?void 0:u.connected)&&!0,disconnect(){null==u||u.disconnect()},reconnect:()=>(u.setConnectionStatus(i.Strophe.Status.RECONNECTING,"The connection has dropped, attempting to reconnect."),(null==u?void 0:u.reconnecting)?u.debouncedReconnect():u.reconnect()),isType:e=>u.isType(e)}},"./src/headless/shared/connection/feedback.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/shared/_converse.js"),n=s("./node_modules/@converse/skeletor/dist/skeletor.js"),o=s("./node_modules/strophe.js/dist/strophe.browser.esm.js");class i extends n.Model{defaults(){return{connection_status:o.Strophe.Status.DISCONNECTED,message:""}}initialize(){super.initialize();const{api:e}=r.default;this.on("change",(()=>e.trigger("connfeedback",r.default.state.connfeedback)))}}const a=i},"./src/headless/shared/connection/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{Connection:()=>g,MockConnection:()=>v});var r=s("./node_modules/lodash-es/debounce.js"),n=s("./src/log/index.js"),o=s("./node_modules/sizzle/dist/sizzle.js"),i=s.n(o),a=s("./src/headless/shared/_converse.js"),l=s("./src/headless/shared/constants.js"),d=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),c=s("./src/headless/utils/session.js"),u=s("./node_modules/@converse/openpromise/dist/openpromise.js"),h=s("./src/headless/utils/init.js");function m(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function f(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){m(o,r,n,i,a,"next",e)}function a(e){m(o,r,n,i,a,"throw",e)}i(void 0)}))}}const p=Object.keys(d.Strophe.Status).reduce(((e,t)=>Math.max(e,d.Strophe.Status[t])),0);d.Strophe.Status.RECONNECTING=p+1;class g extends d.Strophe.Connection{xmlInput(e){n.default.debug(e.outerHTML,"color: darkgoldenrod")}xmlOutput(e){n.default.debug(e.outerHTML,"color: darkcyan")}bind(){var e=this,t=()=>super.bind;return f((function*(){const{api:s}=a.default;yield s.trigger("beforeResourceBinding",{synchronous:!0}),t().call(e)}))()}onDomainDiscovered(e){return f((function*(){const{api:t}=a.default,s=yield e.text(),r=(new DOMParser).parseFromString(s,"text/xml").firstElementChild;if("XRD"!=r.nodeName||"http://docs.oasis-open.org/ns/xri/xrd-1.0"!=r.namespaceURI)return n.default.info("Could not discover XEP-0156 connection methods");const o=i()('Link[rel="urn:xmpp:alt-connections:xbosh"]',r),l=i()('Link[rel="urn:xmpp:alt-connections:websocket"]',r),d=o.map((e=>e.getAttribute("href"))).filter((e=>e.startsWith("https:"))),c=l.map((e=>e.getAttribute("href"))).filter((e=>e.startsWith("wss:")));0===d.length&&0===c.length?n.default.info("Neither BOSH nor WebSocket connection methods have been specified with XEP-0156."):(t.settings.set("websocket_url",c.pop()),t.settings.set("bosh_service_url",d.pop()),this.service=t.settings.get("websocket_url")||t.settings.get("bosh_service_url"),this.setProtocol())})).call(this)}discoverConnectionMethods(e){return f((function*(){const t={mode:"cors",headers:{Accept:"application/xrd+xml, text/xml"}},s=`https://${e}/.well-known/host-meta`;let r;try{r=yield fetch(s,t)}catch(e){return n.default.info(`Failed to discover alternative connection methods at ${s}`),void n.default.error(e)}r.status>=200&&r.status<400?yield this.onDomainDiscovered(r):n.default.info("Could not discover XEP-0156 connection methods")})).call(this)}connect(e,t,s){var r=this,n=()=>super.connect;return f((function*(){const{__:o,api:i}=a.default;if(i.settings.get("discover_connection_methods")){const t=d.Strophe.getDomainFromJid(e);yield this.discoverConnectionMethods(t)}if(!i.settings.get("bosh_service_url")&&!i.settings.get("websocket_url"))return i.settings.set("show_connection_url_input",!0),void(s||this.onConnectStatusChanged.bind(this))(d.Strophe.Status.DISCONNECTED,o("Could not automatically determine a connection URL"));n().call(r,e,t,s||this.onConnectStatusChanged,l.BOSH_WAIT)})).call(this)}disconnect(e){super.disconnect(e),this.send_initial_presence=!0}switchTransport(){return f((function*(){const{api:e}=a.default,t=a.default.session.get("bare_jid");e.connection.isType("websocket")&&e.settings.get("bosh_service_url")?(yield(0,h.setUserJID)(t),this._proto._doDisconnect(),this._proto=new d.Strophe.Bosh(this),this.service=e.settings.get("bosh_service_url")):e.connection.isType("bosh")&&e.settings.get("websocket_url")&&(e.settings.get("authentication")===l.ANONYMOUS?yield(0,h.setUserJID)(e.settings.get("jid")):yield(0,h.setUserJID)(t),this._proto._doDisconnect(),this._proto=new d.Strophe.Websocket(this),this.service=e.settings.get("websocket_url"))})).call(this)}reconnect(){return f((function*(){const{api:e}=a.default;n.default.debug("RECONNECTING: the connection has dropped, attempting to reconnect."),this.reconnecting=!0,yield(0,c.tearDown)(a.default);const t=a.default.state.connfeedback.get("connection_status");t===d.Strophe.Status.CONNFAIL?this.switchTransport():t===d.Strophe.Status.AUTHFAIL&&e.settings.get("authentication")===l.ANONYMOUS&&(yield(0,h.setUserJID)(e.settings.get("jid"))),e.trigger("will-reconnect"),e.settings.get("authentication")===l.ANONYMOUS&&(yield(0,c.clearSession)(a.default));const s=a.default.session.get("jid");return e.user.login(s)})).call(this)}onConnected(e){return f((function*(){const{api:t}=a.default;if(delete this.reconnecting,this.flush(),yield(0,h.setUserJID)(this.jid),a.default.state.config.get("trusted")){const e=a.default.session.get("bare_jid");localStorage.setItem("conversejs-session-jid",e)}yield t.trigger("afterResourceBinding",e,{synchronous:!0}),e?t.trigger("reconnected"):t.trigger("connected")})).call(this)}setDisconnectionCause(e,t,s){void 0===e?(delete this.disconnection_cause,delete this.disconnection_reason):(void 0===this.disconnection_cause||s)&&(this.disconnection_cause=e,this.disconnection_reason=t)}setConnectionStatus(e,t){this.status=e,a.default.state.connfeedback.set({connection_status:e,message:t})}finishDisconnection(){return f((function*(){this.setConnectionStatus(d.Strophe.Status.DISCONNECTED,this.disconnection_reason);const{api:e}=a.default;n.default.debug("DISCONNECTED"),delete this.reconnecting,this.reset(),(0,c.tearDown)(a.default),yield(0,c.clearSession)(a.default),e.connection.destroy(),e.trigger("disconnected")})).call(this)}onDisconnected(){const{api:e}=a.default;if(!e.settings.get("auto_reconnect"))return this.finishDisconnection();{const t=this.disconnection_reason;if(this.disconnection_cause===d.Strophe.Status.AUTHFAIL)return e.settings.get("credentials_url")||e.settings.get("authentication")===l.ANONYMOUS?e.connection.reconnect():this.finishDisconnection();if(this.status===d.Strophe.Status.CONNECTING){const{__:e}=a.default;return this.setConnectionStatus(d.Strophe.Status.CONNFAIL,e("An error occurred while connecting to the chat server.")),this.finishDisconnection()}if(this.disconnection_cause===l.LOGOUT||t===d.Strophe.ErrorCondition.NO_AUTH_MECH||"host-unknown"===t||"remote-connection-failed"===t)return this.finishDisconnection();e.connection.reconnect()}}onConnectStatusChanged(e,t){const{__:s}=a.default;var r;if(n.default.debug(`Status changed to: ${l.CONNECTION_STATUS[e]}`),e===d.Strophe.Status.ATTACHFAIL)this.setConnectionStatus(e),null===(r=this.worker_attach_promise)||void 0===r||r.resolve(!1);else if(e===d.Strophe.Status.CONNECTED||e===d.Strophe.Status.ATTACHED){var o,i;if((null===(o=this.worker_attach_promise)||void 0===o?void 0:o.isResolved)&&this.status===d.Strophe.Status.ATTACHED)return;this.setConnectionStatus(e),null===(i=this.worker_attach_promise)||void 0===i||i.resolve(!0),this.setDisconnectionCause(),this.reconnecting?(n.default.debug(e===d.Strophe.Status.CONNECTED?"Reconnected":"Reattached"),this.onConnected(!0)):(n.default.debug(e===d.Strophe.Status.CONNECTED?"Connected":"Attached"),this.restored&&(this.send_initial_presence=!1),this.onConnected())}else if(e===d.Strophe.Status.DISCONNECTED)this.setDisconnectionCause(e,t),this.onDisconnected();else if(e===d.Strophe.Status.BINDREQUIRED)this.bind();else if(e===d.Strophe.Status.ERROR)this.setConnectionStatus(e,s("An error occurred while connecting to the chat server."));else if(e===d.Strophe.Status.CONNECTING)this.setConnectionStatus(e);else if(e===d.Strophe.Status.AUTHENTICATING)this.setConnectionStatus(e);else if(e===d.Strophe.Status.AUTHFAIL)t||(t=s("Your XMPP address and/or password is incorrect. Please try again.")),this.setConnectionStatus(e,t),this.setDisconnectionCause(e,t,!0),this.onDisconnected();else if(e===d.Strophe.Status.CONNFAIL){var c;let r=t;"host-unknown"===t||"remote-connection-failed"==t?r=s("We could not connect to %1$s, is your XMPP address correct?",d.Strophe.getDomainFromJid(this.jid)):"policy-violation"===t?r=s("The XMPP server rejected the connection because of a policy violation"):void 0!==t&&t===(null===d.Strophe||void 0===d.Strophe||null===(c=d.Strophe.ErrorCondition)||void 0===c?void 0:c.NO_AUTH_MECH)&&(r=s("The XMPP server did not offer a supported authentication mechanism")),this.setConnectionStatus(e,r),this.setDisconnectionCause(e,t)}else e===d.Strophe.Status.DISCONNECTING&&(this.setConnectionStatus(e),this.setDisconnectionCause(e,t))}isType(e){return"websocket"===e.toLowerCase()?this._proto instanceof d.Strophe.Websocket:"bosh"===e.toLowerCase()?d.Strophe.Bosh&&this._proto instanceof d.Strophe.Bosh:void 0}hasResumed(){var e;const{api:t}=a.default;return(null===(e=t.settings.get("connection_options"))||void 0===e?void 0:e.worker)||this.isType("bosh")?a.default.state.connfeedback.get("connection_status")===d.Strophe.Status.ATTACHED:!this.do_bind}restoreWorkerSession(){return this.attach(this.onConnectStatusChanged),this.worker_attach_promise=(0,u.getOpenPromise)(),this.worker_attach_promise}constructor(e,t){super(e,t),this.send_initial_presence=!0,this.debouncedReconnect=(0,r.default)(this.reconnect,3e3)}}class v extends g{get _sasl_mechanism(){return new d.Strophe.SASLSHA256}_processRequest(){}sendIQ(e,t,s){var r,n;e=null!==(n=null===(r=e.tree)||void 0===r?void 0:r.call(e))&&void 0!==n?n:e,this.IQ_stanzas.push(e);const o=super.sendIQ(e,t,s);return this.IQ_ids.push(o),o}send(e){var t,s;return e=null!==(s=null===(t=e.tree)||void 0===t?void 0:t.call(e))&&void 0!==s?s:e,this.sent_stanzas.push(e),super.send(e)}bind(){return f((function*(){const{api:e}=a.default;yield e.trigger("beforeResourceBinding",{synchronous:!0}),this.authenticated=!0,this._changeConnectStatus(d.Strophe.Status.CONNECTED)})).call(this)}constructor(e,t){super(e,t),this.sent_stanzas=[],this.IQ_stanzas=[],this.IQ_ids=[],this.features=d.Strophe.xmlHtmlNode('<stream:features xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client"><ver xmlns="urn:xmpp:features:rosterver"/><csi xmlns="urn:xmpp:csi:0"/><this xmlns="http://jabber.org/protocol/caps" ver="UwBpfJpEt3IoLYfWma/o/p3FFRo=" hash="sha-1" node="http://prosody.im"/><bind xmlns="urn:ietf:params:xml:ns:xmpp-bind"><required/></bind><sm xmlns=\'urn:xmpp:sm:3\'/><session xmlns="urn:ietf:params:xml:ns:xmpp-session"><optional/></session></stream:features>').firstElementChild,this._proto._processRequest=()=>{},this._proto._disconnect=()=>this._onDisconnectTimeout(),this._proto._onDisconnectTimeout=()=>{},this._proto._connect=()=>{this.connected=!0,this.mock=!0,this.jid="romeo@montague.lit/orchard",this._changeConnectStatus(d.Strophe.Status.BINDREQUIRED)}}}},"./src/headless/shared/connection/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{generateResource:()=>i,getConnectionServiceURL:()=>l,setStropheLogLevel:()=>a});var r=s("./src/log/index.js"),n=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),o=s("./src/headless/shared/settings/api.js");function i(){return`/converse.js-${Math.floor(139749528*Math.random()).toString()}`}function a(){const e=o.settings_api.get("loglevel");n.Strophe.setLogLevel(n.Strophe.LogLevel[e.toUpperCase()]);const t={};t[n.Strophe.LogLevel.DEBUG]="debug",t[n.Strophe.LogLevel.INFO]="info",t[n.Strophe.LogLevel.WARN]="warn",t[n.Strophe.LogLevel.ERROR]="error",t[n.Strophe.LogLevel.FATAL]="fatal",n.Strophe.log=(e,s)=>r.default.log(s,t[e]),n.Strophe.error=e=>r.default.error(e)}function l(){return("WebSocket"in window||"MozWebSocket"in window)&&o.settings_api.get("websocket_url")?o.settings_api.get("websocket_url"):o.settings_api.get("bosh_service_url")?o.settings_api.get("bosh_service_url"):""}},"./src/headless/shared/constants.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{ACTIVE:()=>b,ANONYMOUS:()=>c,BOSH_WAIT:()=>n,CHATROOMS_TYPE:()=>E,CHAT_STATES:()=>$,CLOSED:()=>u,COMPOSING:()=>j,CONNECTION_STATUS:()=>C,CONTROLBOX_TYPE:()=>O,CORE_PLUGINS:()=>T,EXTERNAL:()=>h,FAILURE:()=>_,GONE:()=>S,HEADLINES_TYPE:()=>A,INACTIVE:()=>y,KEYCODES:()=>M,LOGIN:()=>m,LOGOUT:()=>f,MARKER_TYPES:()=>k,METADATA_ATTRIBUTES:()=>d,OPENED:()=>p,PAUSED:()=>w,PREBIND:()=>g,PRES_SHOW_VALUES:()=>i,PRES_TYPE_VALUES:()=>a,PRIVATE_CHAT_TYPE:()=>x,STATUS_WEIGHTS:()=>l,SUCCESS:()=>v,VERSION_NAME:()=>o,XFORM_TYPE_MAP:()=>I,XFORM_VALIDATE_TYPE_MAP:()=>P});var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js");const n=59,o="v11.0.1",i=["chat","dnd","away","xa"],a=["available","unavailable","error","probe","subscribe","subscribed","unsubscribe","unsubscribed"],l={offline:6,unavailable:5,xa:4,away:3,dnd:2,chat:1,online:1},d=["og:article:author","og:article:published_time","og:description","og:image","og:image:height","og:image:width","og:site_name","og:title","og:type","og:url","og:video:height","og:video:secure_url","og:video:tag","og:video:type","og:video:url","og:video:width"],c="anonymous",u="closed",h="external",m="login",f="logout",p="opened",g="prebind",v="success",_="failure",y="inactive",b="active",j="composing",w="paused",S="gone",x="chatbox",E="chatroom",A="headline",O="controlbox",C={};C[r.Strophe.Status.ATTACHED]="ATTACHED",C[r.Strophe.Status.AUTHENTICATING]="AUTHENTICATING",C[r.Strophe.Status.AUTHFAIL]="AUTHFAIL",C[r.Strophe.Status.CONNECTED]="CONNECTED",C[r.Strophe.Status.CONNECTING]="CONNECTING",C[r.Strophe.Status.CONNFAIL]="CONNFAIL",C[r.Strophe.Status.DISCONNECTED]="DISCONNECTED",C[r.Strophe.Status.DISCONNECTING]="DISCONNECTING",C[r.Strophe.Status.ERROR]="ERROR",C[r.Strophe.Status.RECONNECTING]="RECONNECTING",C[r.Strophe.Status.REDIRECT]="REDIRECT",r.Strophe.addNamespace("ACTIVITY","http://jabber.org/protocol/activity"),r.Strophe.addNamespace("CARBONS","urn:xmpp:carbons:2"),r.Strophe.addNamespace("CHATSTATES","http://jabber.org/protocol/chatstates"),r.Strophe.addNamespace("CSI","urn:xmpp:csi:0"),r.Strophe.addNamespace("DELAY","urn:xmpp:delay"),r.Strophe.addNamespace("EME","urn:xmpp:eme:0"),r.Strophe.addNamespace("FALLBACK","urn:xmpp:fallback:0"),r.Strophe.addNamespace("FASTEN","urn:xmpp:fasten:0"),r.Strophe.addNamespace("FORWARD","urn:xmpp:forward:0"),r.Strophe.addNamespace("HINTS","urn:xmpp:hints"),r.Strophe.addNamespace("HTTPUPLOAD","urn:xmpp:http:upload:0"),r.Strophe.addNamespace("MAM","urn:xmpp:mam:2"),r.Strophe.addNamespace("MARKERS","urn:xmpp:chat-markers:0"),r.Strophe.addNamespace("MENTIONS","urn:xmpp:mmn:0"),r.Strophe.addNamespace("MESSAGE_CORRECT","urn:xmpp:message-correct:0"),r.Strophe.addNamespace("MODERATE","urn:xmpp:message-moderate:1"),r.Strophe.addNamespace("MODERATE0","urn:xmpp:message-moderate:0"),r.Strophe.addNamespace("NICK","http://jabber.org/protocol/nick"),r.Strophe.addNamespace("OCCUPANTID","urn:xmpp:occupant-id:0"),r.Strophe.addNamespace("OMEMO","eu.siacs.conversations.axolotl"),r.Strophe.addNamespace("OUTOFBAND","jabber:x:oob"),r.Strophe.addNamespace("PUBSUB","http://jabber.org/protocol/pubsub"),r.Strophe.addNamespace("RAI","urn:xmpp:rai:0"),r.Strophe.addNamespace("RECEIPTS","urn:xmpp:receipts"),r.Strophe.addNamespace("REFERENCE","urn:xmpp:reference:0"),r.Strophe.addNamespace("REGISTER","jabber:iq:register"),r.Strophe.addNamespace("RETRACT","urn:xmpp:message-retract:1"),r.Strophe.addNamespace("RETRACT0","urn:xmpp:message-retract:0"),r.Strophe.addNamespace("ROSTERX","http://jabber.org/protocol/rosterx"),r.Strophe.addNamespace("RSM","http://jabber.org/protocol/rsm"),r.Strophe.addNamespace("SID","urn:xmpp:sid:0"),r.Strophe.addNamespace("SPOILER","urn:xmpp:spoiler:0"),r.Strophe.addNamespace("STANZAS","urn:ietf:params:xml:ns:xmpp-stanzas"),r.Strophe.addNamespace("STYLING","urn:xmpp:styling:0"),r.Strophe.addNamespace("VCARD","vcard-temp"),r.Strophe.addNamespace("VCARDUPDATE","vcard-temp:x:update"),r.Strophe.addNamespace("XFORM","jabber:x:data"),r.Strophe.addNamespace("XHTML","http://www.w3.org/1999/xhtml");const T=["converse-adhoc","converse-bookmarks","converse-blocklist","converse-bosh","converse-caps","converse-chat","converse-chatboxes","converse-disco","converse-emoji","converse-headlines","converse-mam","converse-muc","converse-ping","converse-pubsub","converse-roster","converse-smacks","converse-status","converse-vcard"],$=["active","composing","gone","inactive","paused"],k=["displayed","received","acknowledged"],M={TAB:"Tab",ENTER:"Enter",SHIFT:"Shift",CTRL:"Control",ALT:"Alt",ESCAPE:"Escape",LEFT_ARROW:"ArrowLeft",UP_ARROW:"ArrowUp",RIGHT_ARROW:"ArrowRight",DOWN_ARROW:"ArrowDown",FORWARD_SLASH:"Divide",AT:"Alt",META:"Meta"},I={"text-private":"password","text-single":"text",fixed:"label",boolean:"checkbox",hidden:"hidden","jid-multi":"textarea","list-single":"dropdown","list-multi":"dropdown"},P={"xs:anyURI":"url","xs:byte":"number","xs:date":"date","xs:dateTime":"datetime","xs:int":"number","xs:integer":"number","xs:time":"time"}},"./src/headless/shared/errors.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{BadRequestError:()=>a,ConflictError:()=>l,FeatureNotImplementedError:()=>d,ForbiddenError:()=>c,GoneError:()=>u,InternalServerError:()=>h,ItemNotFoundError:()=>m,JIDMalformedError:()=>f,MethodNotImplementedError:()=>r,NotAcceptableError:()=>p,NotAllowedError:()=>g,NotAuthorizedError:()=>v,PaymentRequiredError:()=>_,RecipientUnavailableError:()=>y,RedirectError:()=>b,RegistrationRequiredError:()=>j,RemoteServerNotFoundError:()=>w,RemoteServerTimeoutError:()=>S,ResourceConstraintError:()=>x,ServiceUnavailableError:()=>E,StanzaError:()=>o,StanzaParseError:()=>i,SubscriptionRequiredError:()=>A,TimeoutError:()=>n,UndefinedConditionError:()=>O,UnexpectedRequestError:()=>C});class r extends Error{}class n extends Error{constructor(e){super(e),this.retry_event_id=null}}class o extends Error{constructor(e,t,s){var r,n;super(null!==(n=null===(r=t.querySelector("text"))||void 0===r?void 0:r.textContent)&&void 0!==n?n:""),this.name=e,this.message=e,this.type=t.getAttribute("type"),this.el=t,this.extra=s}}class i extends Error{constructor(e,t){super(t),this.name="StanzaParseError",this.stanza=e}}class a extends o{}class l extends o{}class d extends o{}class c extends o{}class u extends o{}class h extends o{}class m extends o{}class f extends o{}class p extends o{}class g extends o{}class v extends o{}class _ extends o{}class y extends o{}class b extends o{}class j extends o{}class w extends o{}class S extends o{}class x extends o{}class E extends o{}class A extends o{}class O extends o{}class C extends o{}},"./src/headless/shared/i18n.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/sprintf-js/src/sprintf.js");function n(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const o={initialize(){return(e=function*(){},function(){var t=this,s=arguments;return new Promise((function(r,o){var i=e.apply(t,s);function a(e){n(i,r,o,a,l,"next",e)}function l(e){n(i,r,o,a,l,"throw",e)}a(void 0)}))})();var e},__:(...e)=>(0,r.sprintf)(...e)}},"./src/headless/shared/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{_converse:()=>a.default,api:()=>i.default,constants:()=>n,errors:()=>o,i18n:()=>l.default,parsers:()=>r});var r=s("./src/headless/shared/parsers.js"),n=s("./src/headless/shared/constants.js"),o=s("./src/headless/shared/errors.js"),i=s("./src/headless/shared/api/index.js"),a=s("./src/headless/shared/_converse.js"),l=s("./src/headless/shared/i18n.js")},"./src/headless/shared/message.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s("./node_modules/dayjs/dayjs.min.js"),n=s.n(r),o=s("./node_modules/sizzle/dist/sizzle.js"),i=s.n(o),a=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),l=s("./node_modules/@converse/skeletor/dist/skeletor.js"),d=s("./src/log/index.js"),c=s("./src/headless/shared/_converse.js"),u=s("./src/headless/shared/api/index.js"),h=s("./src/headless/shared/constants.js"),m=s("./src/headless/shared/color.js"),f=s("./src/headless/shared/model-with-contact.js"),p=s("./src/headless/shared/model-with-vcard.js"),g=s("./src/headless/utils/index.js");function v(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function _(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){v(o,r,n,i,a,"next",e)}function a(e){v(o,r,n,i,a,"throw",e)}i(void 0)}))}}class y extends((0,p.default)((0,f.default)((0,m.default)(l.Model)))){defaults(){return{msgid:(0,g.getUniqueId)(),time:(new Date).toISOString(),is_ephemeral:!1}}initialize(){var e;this.lazy_load_vcard=!0,super.initialize(),this.chatbox=null===(e=this.collection)||void 0===e?void 0:e.chatbox,this.checkValidity()&&(this.get("file")&&this.on("change:put",(()=>this.uploadFile())),this.on("change:is_ephemeral",(()=>this.setTimerForEphemeralMessage())),this.setTimerForEphemeralMessage())}checkValidity(){return 3!==Object.keys(this.attributes).length||(this.validationError="Empty message",this.safeDestroy(),!1)}safeDestroy(){try{this.destroy()}catch(e){d.default.warn(`safeDestroy: ${e}`)}}setTimerForEphemeralMessage(){this.ephemeral_timer&&clearTimeout(this.ephemeral_timer);const e=this.isEphemeral();if(e){const t="number"==typeof e?e:1e4;this.ephemeral_timer=setTimeout((()=>this.safeDestroy()),t)}}isEphemeral(){return this.get("is_ephemeral")}isMeCommand(){const e=this.getMessageText();return!!e&&e.startsWith("/me ")}isRetracted(){return this.get("retracted")||"retracted"===this.get("moderated")}isFollowup(){var e;const t=null===(e=this.collection)||void 0===e?void 0:e.models;if(!t)return!1;const s=t.indexOf(this),r=s?t[s-1]:null;if(null===r)return!1;const o=n()(this.get("time"));return this.get("from")===r.get("from")&&!this.isRetracted()&&!r.isRetracted()&&!this.isMeCommand()&&!r.isMeCommand()&&!!this.get("is_encrypted")==!!r.get("is_encrypted")&&this.get("type")===r.get("type")&&"info"!==this.get("type")&&o.isBefore(n()(r.get("time")).add(10,"minutes"))&&("groupchat"!==this.get("type")||this.get("occupant_id")===r.get("occupant_id"))}mayBeRetracted(){const e="me"===this.get("sender"),t="cancel"!==this.get("error_type");return e&&t&&["all","own"].includes(u.default.settings.get("allow_message_retraction"))}getMessageText(){if(this.get("is_encrypted")){const{__:e}=c.default;return this.get("plaintext")||this.get("body")||e("Undecryptable OMEMO message")}return["groupchat","chat","normal"].includes(this.get("type"))?this.get("body"):this.get("message")}sendSlotRequestStanza(){if(!this.file)return Promise.reject(new Error("file is undefined"));const e=(0,a.$iq)({from:c.default.session.get("jid"),to:this.get("slot_request_url"),type:"get"}).c("request",{xmlns:a.Strophe.NS.HTTPUPLOAD,filename:this.file.name,size:this.file.size,"content-type":this.file.type});return u.default.sendIQ(e)}getUploadRequestMetadata(e){return{headers:i()(`slot[xmlns="${a.Strophe.NS.HTTPUPLOAD}"] put header`,e).map((e=>({name:e.getAttribute("name"),value:e.textContent}))).filter((e=>["Authorization","Expires"].includes(e.name)))}}getRequestSlotURL(){return _((function*(){const{__:e}=c.default;let t;try{t=yield this.sendSlotRequestStanza()}catch(t){return d.default.error(t),this.save({is_ephemeral:!0,message:e("Sorry, could not determine upload URL."),type:"error"})}const s=i()(`slot[xmlns="${a.Strophe.NS.HTTPUPLOAD}"]`,t).pop();if(!s)return this.save({is_ephemeral:!0,message:e("Sorry, could not determine file upload URL."),type:"error"});this.upload_metadata=this.getUploadRequestMetadata(t),this.save({get:s.querySelector("get").getAttribute("url"),put:s.querySelector("put").getAttribute("url")})})).call(this)}uploadFile(){var e;const t=new XMLHttpRequest;t.onreadystatechange=e=>_((function*(){if(t.readyState===XMLHttpRequest.DONE)if(d.default.info("Status: "+t.status),200===t.status||201===t.status){let e={body:this.get("get"),message:this.get("get"),oob_url:this.get("get"),upload:h.SUCCESS};e=yield u.default.hook("afterFileUploaded",this,e),this.save(e)}else d.default.error(e),t.onerror(new ProgressEvent(`Response status: ${t.status}`))})).call(this),t.upload.addEventListener("progress",(e=>{e.lengthComputable&&this.set("progress",e.loaded/e.total)}),!1),t.onerror=()=>{const{__:e}=c.default;let s;s=t.responseText?e('Sorry, could not succesfully upload your file. Your server’s response: "%1$s"',t.responseText):e("Sorry, could not succesfully upload your file."),this.save({is_ephemeral:!0,message:s,type:"error",upload:h.FAILURE})},t.open("PUT",this.get("put"),!0),t.setRequestHeader("Content-type",this.file.type),null===(e=this.upload_metadata.headers)||void 0===e||e.forEach((e=>t.setRequestHeader(e.name,e.value))),t.send(this.file)}constructor(e,t){super(e,t),this.file=null,this.attributes}}const b=y},"./src/headless/shared/model-with-contact.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),n=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),o=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return class extends e{initialize(){super.initialize(),this.rosterContactAdded=(0,r.getOpenPromise)(),this.onClosedChanged=()=>this.setModelContact(this.get("jid")),this.contact=null}setModelContact(e){return(t=function*(){var t;if((null===(t=this.contact)||void 0===t?void 0:t.get("jid"))===e)return;if(this.get("closed"))return this.off("change:closed",this.onClosedChanged),void this.on("change:closed",this.onClosedChanged);const{session:s,state:r}=o.default;let a;n.Strophe.getBareJidFromJid(e)===s.get("bare_jid")?a=r.profile:(a=yield i.default.contacts.get(e),a||(yield i.default.blocklist.get()).get(e)||(a=yield i.default.contacts.add({jid:e},!1,!1))),a&&(this.contact=a,this.set("nickname",a.get("nickname")),this.listenTo(this.contact,"vcard:add",(e=>{this.trigger("contact:change",e)})),this.listenTo(this.contact,"vcard:change",(e=>{this.trigger("contact:change",e)})),this.listenTo(this.contact,"change",(e=>{e.nickname&&this.set("nickname",e.nickname),this.trigger("contact:change",e)})),this.listenTo(this.contact,"destroy",(()=>{delete this.contact,this.trigger("contact:destroy")})),this.rosterContactAdded.resolve(),this.trigger("contact:add",this.contact))},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}).call(this);var t}}}},"./src/headless/shared/model-with-messages.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s("./node_modules/filesize/dist/filesize.esm.js"),n=s("./node_modules/lodash-es/pick.js"),o=s("./node_modules/lodash-es/debounce.js"),i=s("./node_modules/@converse/openpromise/dist/openpromise.js"),a=s("./node_modules/@converse/skeletor/dist/skeletor.js"),l=s("./src/log/index.js"),d=s("./src/headless/utils/storage.js"),c=s("./src/headless/shared/constants.js"),u=s("./src/headless/shared/api/public.js"),h=s("./src/headless/shared/api/index.js"),m=s("./src/headless/plugins/chat/utils.js"),f=s("./src/headless/shared/_converse.js"),p=s("./src/headless/shared/errors.js"),g=s("./src/headless/shared/actions.js"),v=s("./src/headless/plugins/chat/parsers.js");function _(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function y(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){_(o,r,n,i,a,"next",e)}function a(e){_(o,r,n,i,a,"throw",e)}i(void 0)}))}}function b(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{Strophe:j,stx:w,u:S}=u.default.env;function x(e){return class extends e{initialize(){var e=this,t=()=>super.initialize;return y((function*(){t().call(e),this.initUI(),this.initMessages(),this.initNotifications(),this.ui.on("change:scrolled",(()=>this.onScrolledChanged()))})).call(this)}initNotifications(){this.notifications=new a.Model}initUI(){this.ui=new a.Model}getDisplayName(){return this.get("jid")}canPostMessages(){return!0}createMessage(e,t){return y((function*(){return e.time=e.time||(new Date).toISOString(),yield this.messages.fetched,this.messages.create(e,t)})).call(this)}getMessagesCacheKey(){return`converse.messages-${this.get("jid")}-${f.default.session.get("bare_jid")}`}getMessagesCollection(){return new f.default.exports.Messages}getNotificationsText(){var e,t,s;const{__:r}=f.default;return(null===(e=this.notifications)||void 0===e?void 0:e.get("chat_state"))===c.COMPOSING?r("%1$s is typing",this.getDisplayName()):(null===(t=this.notifications)||void 0===t?void 0:t.get("chat_state"))===c.PAUSED?r("%1$s has stopped typing",this.getDisplayName()):(null===(s=this.notifications)||void 0===s?void 0:s.get("chat_state"))===c.GONE?r("%1$s has gone away",this.getDisplayName()):""}initMessages(){this.messages=this.getMessagesCollection(),this.messages.fetched=(0,i.getOpenPromise)(),this.messages.chatbox=this,(0,d.initStorage)(this.messages,this.getMessagesCacheKey()),this.listenTo(this.messages,"add",(e=>this.onMessageAdded(e))),this.listenTo(this.messages,"change:upload",(e=>this.onMessageUploadChanged(e))),this.listenTo(this.messages,"change:correcting",(e=>this.onMessageCorrecting(e)))}fetchMessages(){if(this.messages.fetched_flag)return void l.default.info(`Not re-fetching messages for ${this.get("jid")}`);this.messages.fetched_flag=!0;const e=this.messages.fetched.resolve;return this.messages.fetch({add:!0,success:()=>{this.afterMessagesFetched(),e()},error:()=>{this.afterMessagesFetched(),e()}}),this.messages.fetched}afterMessagesFetched(){this.pruneHistoryWhenScrolledDown(),h.default.trigger("afterMessagesFetched",this)}onMessage(e){return y((function*(){throw new p.MethodNotImplementedError("onMessage is not implemented")}))()}getUpdatedMessageAttributes(e,t){return t.error_type||"Decryption"!==e.get("error_type")?{is_archived:t.is_archived,time:t.time?t.time:e.get("time")}:Object.assign({},t,{error_condition:void 0,error_message:void 0,error_text:void 0,error_type:void 0,is_archived:t.is_archived,is_ephemeral:!1,is_error:!1})}updateMessage(e,t){const s=this.getUpdatedMessageAttributes(e,t);s&&e.save(s)}handleCorrection(e){return y((function*(){if(!e.replace_id||!e.from)return;let t;if("groupchat"===e.type){const{occupant_id:s,replace_id:r}=e;t=s?({attributes:e})=>e.msgid===r&&e.occupant_id==s:({attributes:t})=>t.msgid===e.replace_id&&t.from===e.from&&null==t.occupant_id}else t=({attributes:t})=>t.msgid===e.replace_id&&t.from===e.from&&null==t.occupant_id;const s=this.messages.models.find(t);if(!s)return e.older_versions={},yield this.createMessage(e);const r=s.get("older_versions")||{};return e.time<s.get("time")&&s.get("edited")?(r[e.time]=e.message,s.save({older_versions:r})):(Object.keys(r).length?r[s.get("edited")]=s.getMessageText():r[s.get("time")]=s.getMessageText(),delete(e=Object.assign(e,{older_versions:r})).msgid,delete e.id,e.time=s.get("time"),s.save(e)),s})).call(this)}queueMessage(e){return this.msg_chain=(this.msg_chain||this.messages.fetched).then((()=>this.onMessage(e))).catch((e=>l.default.error(e))),this.msg_chain}getOutgoingMessageAttributes(e){return y((function*(){throw new p.MethodNotImplementedError("getOutgoingMessageAttributes is not implemented")}))()}sendMessage(e){return y((function*(){var t;if(yield null===(t=u.default.emojis)||void 0===t?void 0:t.initialized_promise,!this.canPostMessages())return void l.default.warn("sendMessage was called but canPostMessages is false");e=yield this.getOutgoingMessageAttributes(e);let s=this.messages.findWhere("correcting");if(s){const t=s.get("older_versions")||{};t[s.get("edited")||s.get("time")]=s.getMessageText(),s.save(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){b(e,t,s[t])}))}return e}({},["body","is_only_emojis","media_urls","references","is_encrypted"].reduce(((t,s)=>(e.hasOwnProperty(s)&&(t[s]=e[s]),t)),{}),{correcting:!1,edited:(new Date).toISOString(),message:e.body,ogp_metadata:[],older_versions:t,origin_id:S.getUniqueId(),plaintext:e.is_encrypted?e.message:void 0,received:void 0}))}else this.setEditable(e,(new Date).toISOString()),s=yield this.createMessage(e);try{const e=yield this.createMessageStanza(s);h.default.send(e)}catch(e){return s.destroy(),void l.default.error(e)}return h.default.trigger("sendMessage",{chatbox:this,message:s}),s})).call(this)}retractOwnMessage(e){const t=S.getUniqueId();(0,g.sendRetractionMessage)(this.get("jid"),e,t),e.save({retracted:(new Date).toISOString(),retracted_id:e.get("origin_id"),retraction_id:t,is_ephemeral:!0,editable:!1})}sendFiles(e){return y((function*(){var t;const{__:s,session:n}=f.default,o=(yield h.default.disco.features.get(j.NS.HTTPUPLOAD,n.get("domain"))).pop();if(!o)return void this.createMessage({message:s("Sorry, looks like file upload is not supported by your server."),type:"error",is_ephemeral:!0});const i=o.dataforms.where({FORM_TYPE:{value:j.NS.HTTPUPLOAD,type:"hidden"}}).pop(),a=parseInt(null===(t=((null==i?void 0:i.attributes)||{})["max-file-size"])||void 0===t?void 0:t.value,10),l=null==o?void 0:o.id;l?Array.from(e).forEach((e=>y((function*(){if(e=yield h.default.hook("beforeFileUpload",this,e),!isNaN(a)&&e.size>a){const t=(0,r.filesize)(a),n=Array.isArray(t)?s("The size of your file, %1$s, exceeds the maximum allowed by your server.",e.name):s("The size of your file, %1$s, exceeds the maximum allowed by your server, which is %2$s.",e.name,t);return this.createMessage({message:n,type:"error",is_ephemeral:!0})}{const t=yield this.getOutgoingMessageAttributes(),s=Object.assign(t,{file:!0,progress:0,slot_request_url:l});this.setEditable(s,(new Date).toISOString());const r=yield this.createMessage(s,{silent:!0});r.file=e,this.messages.trigger("add",r),r.getRequestSlotURL()}})).call(this))):this.createMessage({message:s("Sorry, looks like file upload is not supported by your server."),type:"error",is_ephemeral:!0})})).call(this)}setEditable(e,t){if(!e.is_headline&&!S.isEmptyMessage(e)&&"me"===e.sender)if("all"===h.default.settings.get("allow_message_corrections"))e.editable=!(e.file||e.retracted||"oob_url"in e);else if("last"===h.default.settings.get("allow_message_corrections")&&t>this.get("time_sent")){var s;this.set({time_sent:t}),null===(s=this.messages.findWhere({editable:!0}))||void 0===s||s.save({editable:!1}),e.editable=!(e.file||e.retracted||"oob_url"in e)}}setChatState(e,t){return void 0!==this.chat_state_timeout&&(clearTimeout(this.chat_state_timeout),delete this.chat_state_timeout),e===c.COMPOSING?this.chat_state_timeout=setTimeout(this.setChatState.bind(this),f.default.TIMEOUTS.PAUSED,c.PAUSED):e===c.PAUSED&&(this.chat_state_timeout=setTimeout(this.setChatState.bind(this),f.default.TIMEOUTS.INACTIVE,c.INACTIVE)),this.set("chat_state",e,t),this}onMessageAdded(e){!h.default.settings.get("prune_messages_above")||"scrolled"!==h.default.settings.get("pruning_behavior")&&this.ui.get("scrolled")||S.isEmptyMessage(e)||this.debouncedPruneHistory()}onMessageUploadChanged(e){return y((function*(){if(e.get("upload")===c.SUCCESS){const t={body:e.get("body"),spoiler_hint:e.get("spoiler_hint"),oob_url:e.get("oob_url")};yield this.sendMessage(t),e.destroy()}})).call(this)}onMessageCorrecting(e){e.get("correcting")?this.save({correcting:e.get("id"),draft:S.prefixMentions(e)}):this.save({correcting:void 0,draft:void 0})}onScrolledChanged(){this.ui.get("scrolled")||(this.clearUnreadMsgCounter(),this.pruneHistoryWhenScrolledDown())}pruneHistoryWhenScrolledDown(){h.default.settings.get("prune_messages_above")&&"unscrolled"===h.default.settings.get("pruning_behavior")&&!this.ui.get("scrolled")&&this.debouncedPruneHistory()}shouldShowErrorMessage(e){if(this.getMessageReferencedByError(e)||!e.chat_state)return Promise.resolve(!0)}clearMessages(){return y((function*(){try{yield this.messages.clearStore()}catch(e){this.messages.trigger("reset"),l.default.error(e)}finally{this.messages.fetched.resolve()}})).call(this)}editEarlierMessage(){let e,t=this.messages.findLastIndex("correcting");if(t>=0)for(this.messages.at(t).save("correcting",!1);t>0;){t-=1;const s=this.messages.at(t);if(s.get("editable")){e=s;break}}e=e||this.messages.filter({sender:"me"}).reverse().find((e=>e.get("editable"))),null==e||e.save("correcting",!0)}editLaterMessage(){let e,t=this.messages.findLastIndex("correcting");if(t>=0)for(this.messages.at(t).save("correcting",!1);t<this.messages.length-1;){t+=1;const s=this.messages.at(t);if(s.get("editable")){e=s,e.save("correcting",!0);break}}return e}isChatMessage(e){throw new p.MethodNotImplementedError}getOldestMessage(){for(let e=0;e<this.messages.length;e++){const t=this.messages.at(e);if(this.isChatMessage(t))return t}}getMostRecentMessage(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages.at(e);if(this.isChatMessage(t))return t}}getMessageReferencedByError(e){const t=e.msgid;return t&&this.messages.models.find((e=>[e.get("msgid"),e.get("retraction_id")].includes(t)))}findDanglingRetraction(e){if(!e.origin_id||!this.messages.length)return null;if(this.messages.last().get("time")>e.time){const t=Array.from(this.messages.models);return t.reverse(),t.find((({attributes:t})=>t.retracted_id===e.origin_id&&t.from===e.from&&!t.moderated_by))}return null}getDuplicateMessage(e){const t=[...this.getStanzaIdQueryAttrs(e),this.getOriginIdQueryAttrs(e),this.getMessageBodyQueryAttrs(e)].filter((e=>e));return this.messages.models.find((e=>t.find((t=>Object.keys(t).every((s=>e.get(s)===t[s]))))))}getOriginIdQueryAttrs(e){return e.origin_id&&{origin_id:e.origin_id,from:e.from}}getStanzaIdQueryAttrs(e){return Object.keys(e).filter((e=>e.startsWith("stanza_id "))).map((t=>{const s={};return s[`stanza_id ${t.replace(/^stanza_id /,"")}`]=e[t],s}))}getMessageBodyQueryAttrs(e){if(e.msgid){const t={from:e.from,msgid:e.msgid};return!e.is_encrypted&&e.body&&(t.body=e.body),t}}sendMarkerForMessage(e,t="displayed",s=!1){return y((function*(){if(!e||"groupchat"===(null==e?void 0:e.get("type"))||!h.default.settings.get("send_chat_markers").includes(t))return;const r=yield h.default.contacts.get(this.get("jid")),n=null==r?void 0:r.get("subscription");if(r&&"none"!==n&&"to"!==n&&((null==e?void 0:e.get("is_markable"))||s)){const s=j.getBareJidFromJid(e.get("from"));(0,g.sendMarker)(s,e.get("msgid"),t,e.get("type"))}})).call(this)}handleUnreadMessage(e){(null==e?void 0:e.get("body"))&&(0,m.isNewMessage)(e)&&("me"===e.get("sender")?this.ui.set("scrolled",!1):this.isHidden()?this.incrementUnreadMsgsCounter(e):this.sendMarkerForMessage(e))}getErrorAttributesForMessage(e,t){return y((function*(){const{__:s}=f.default,r={editable:!1,error:t.error,error_condition:t.error_condition,error_text:t.error_text,error_type:t.error_type,is_error:!0};return t.msgid===e.get("retraction_id")?(r.retraction_id=void 0,t.error||("forbidden"===t.error_condition?r.error=s("You're not allowed to retract your message."):r.error=s("Sorry, an error occurred while trying to retract your message."))):t.error||("forbidden"===t.error_condition?r.error=s("You're not allowed to send a message."):r.error=s("Sorry, an error occurred while trying to send your message.")),yield h.default.hook("getErrorAttributesForMessage",t,r)}))()}handleErrorMessageStanza(e){return y((function*(){const t=yield(0,v.parseMessage)(e);if(S.isErrorObject(t)){const{stanza:e,message:s}=t;return e&&l.default.error(e),l.default.error(s)}const s=t;if(!(yield this.shouldShowErrorMessage(s)))return;const r=this.getMessageReferencedByError(s);if(r){const e=yield this.getErrorAttributesForMessage(r,s);r.save(e)}else this.createMessage(s)})).call(this)}incrementUnreadMsgsCounter(e){const t={num_unread:this.get("num_unread")+1};0===this.get("num_unread")&&(t.first_unread_id=e.get("id")),this.save(t)}clearUnreadMsgCounter(){this.get("num_unread")>0&&this.sendMarkerForMessage(this.messages.last()),S.safeSave(this,{num_unread:0})}handleRetraction(e){return y((function*(){const t=["retracted","retracted_id","editable"];if(e.retracted){if(e.is_tombstone)return!1;for(const s of this.messages.models)if(s.get("from")===e.from&&(s.get("origin_id")===e.retracted_id||s.get("msgid")===e.retracted_id))return s.save((0,n.default)(e,t)),!0;return e.dangling_retraction=!0,yield this.createMessage(e),!0}{const s=this.findDanglingRetraction(e);if(s){const r=(0,n.default)(s.attributes,t),o=Object.assign({dangling_retraction:!1},e,r);return delete o.id,s.save(o),!0}}return!1})).call(this)}handleReceipt(e){if("them"===e.sender)if(e.is_valid_receipt_request)(0,g.sendReceiptStanza)(e.from,e.msgid);else if(e.receipt_id){const t=this.messages.findWhere({msgid:e.receipt_id});return t&&!t.get("received")&&t.save({received:(new Date).toISOString()}),!0}return!1}createMessageStanza(e){return y((function*(){const{body:t,edited:s,is_encrypted:r,is_spoiler:n,msgid:o,oob_url:i,origin_id:a,references:l,spoiler_hint:d,type:c}=e.attributes,u=w`
                <message xmlns="jabber:client"
                        from="${"groupchat"===e.get("type")?h.default.connection.get().jid:e.get("from")}"
                        to="${e.get("to")||this.get("jid")}"
                        type="${this.get("message_type")}"
                        id="${s&&S.getUniqueId()||o}">
                    ${t?w`<body>${t}</body>`:""}
                    <active xmlns="${j.NS.CHATSTATES}"/>
                    ${"chat"===c?w`<request xmlns="${j.NS.RECEIPTS}"></request>`:""}
                    ${!r&&i?w`<x xmlns="${j.NS.OUTOFBAND}"><url>${i}</url></x>`:""}
                    ${!r&&n?w`<spoiler xmlns="${j.NS.SPOILER}">${null!=d?d:""}</spoiler>`:""}
                    ${r?"":null==l?void 0:l.map((e=>w`<reference xmlns="${j.NS.REFERENCE}"
                                                begin="${e.begin}"
                                                end="${e.end}"
                                                type="${e.type}"
                                                uri="${e.uri}"></reference>`))}
                    ${s?w`<replace xmlns="${j.NS.MESSAGE_CORRECT}" id="${o}"></replace>`:""}
                    ${a?w`<origin-id xmlns="${j.NS.SID}" id="${a}"></origin-id>`:""}
                </message>`;return(yield h.default.hook("createMessageStanza",this,{message:e,stanza:u})).stanza})).call(this)}pruneHistory(){const e=h.default.settings.get("prune_messages_above");if(e&&"number"==typeof e&&this.messages.length>e){const t=this.messages.filter((e=>!S.isEmptyMessage(e)));if(t.length>e){for(;t.length>e;)t.shift().destroy();this.trigger("historyPruned")}}}isScrolledUp(){return this.ui.get("scrolled")}isHidden(){return this.get("hidden")||this.isScrolledUp()||document.hidden}constructor(...e){super(e[0],e[1]),b(this,"debouncedPruneHistory",(0,o.default)((()=>this.pruneHistory()),500,{maxWait:2e3})),this.disable_mam=!1}}}},"./src/headless/shared/model-with-vcard.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/headless/plugins/vcard/utils.js"),n=s("./src/headless/shared/_converse.js");function o(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function i(e){return class extends e{initialize(){super.initialize(),this.getVCard()}get vcard(){return this._vcard}getVCard(){return(e=function*(){var e;const{pluggable:t}=n.default;return(null===(e=t.plugins["converse-vcard"])||void 0===e?void 0:e.enabled(n.default))?(this._vcard||(this._vcard=yield(0,r.getVCardForModel)(this,this.lazy_load_vcard),this.trigger("vcard:add",{vcard:this._vcard})),this._vcard):null},function(){var t=this,s=arguments;return new Promise((function(r,n){var i=e.apply(t,s);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)}))}).call(this);var e}constructor(...e){super(...e),this._vcard=null,this.lazy_load_vcard=!1}}}},"./src/headless/shared/parsers.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{getChatMarker:()=>z,getChatState:()=>N,getCorrectionAttributes:()=>O,getDeprecatedRetractionAttributes:()=>E,getEncryptionAttributes:()=>x,getErrorAttributes:()=>k,getInputType:()=>H,getOpenGraphMetadata:()=>C,getOutOfBandAttributes:()=>$,getReceiptId:()=>I,getReferences:()=>M,getRetractionAttributes:()=>A,getSpoilerAttributes:()=>T,getStanzaIDs:()=>S,isArchived:()=>F,isCarbon:()=>P,isHeadline:()=>L,isMUCPrivateMessage:()=>U,isServerMessage:()=>B,isValidReceiptRequest:()=>D,parseErrorStanza:()=>w,parseXForm:()=>G,throwErrorIfInvalidForward:()=>R});var r=s("./node_modules/sizzle/dist/sizzle.js"),n=s.n(r),o=s("./src/headless/shared/_converse.js"),i=s("./src/headless/shared/api/index.js"),a=s("./node_modules/dayjs/dayjs.min.js"),l=s.n(a),d=s("./src/log/index.js"),c=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),u=s("./src/headless/utils/html.js"),h=s("./src/headless/utils/stanza.js"),m=s("./src/headless/shared/actions.js"),f=s("./src/headless/shared/constants.js"),p=s("./src/headless/shared/errors.js");function g(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function v(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){g(o,r,n,i,a,"next",e)}function a(e){g(o,r,n,i,a,"throw",e)}i(void 0)}))}}function _(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){_(e,t,s[t])}))}return e}function b(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const{NS:j}=c.Strophe;function w(e){return v((function*(){var t;if(null===e)return null;if(e instanceof Error)return e;if("error"!==e.getAttribute("type"))return null;const s=e.querySelector("error");if(!s)return null;const r=null===(t=n()(`[xmlns="${c.Strophe.NS.STANZAS}"]`,s).filter((e=>e.nodeName&&"text"!==e.nodeName)).pop())||void 0===t?void 0:t.nodeName,o=yield i.default.hook("parseErrorStanza",e,{});return"bad-request"===r?new p.BadRequestError(r,s,o):"conflict"===r?new p.ConflictError(r,s,o):"feature-not-implemented"===r?new p.FeatureNotImplementedError(r,s,o):"forbidden"===r?new p.ForbiddenError(r,s,o):"gone"===r?new p.GoneError(r,s,o):"internal-server-error"===r?new p.InternalServerError(r,s,o):"item-not-found"===r?new p.ItemNotFoundError(r,s,o):"jid-malformed"===r?new p.JIDMalformedError(r,s,o):"not-acceptable"===r?new p.NotAcceptableError(r,s,o):"not-allowed"===r?new p.NotAllowedError(r,s,o):"not-authorized"===r?new p.NotAuthorizedError(r,s,o):"payment-required"===r?new p.PaymentRequiredError(r,s,o):"recipient-unavailable"===r?new p.RecipientUnavailableError(r,s,o):"redirect"===r?new p.RedirectError(r,s,o):"registration-required"===r?new p.RegistrationRequiredError(r,s,o):"remote-server-not-found"===r?new p.RemoteServerNotFoundError(r,s,o):"remote-server-timeout"===r?new p.RemoteServerTimeoutError(r,s,o):"resource-constraint"===r?new p.ResourceConstraintError(r,s,o):"service-unavailable"===r?new p.ServiceUnavailableError(r,s,o):"subscription-required"===r?new p.SubscriptionRequiredError(r,s,o):"undefined-condition"===r?new p.UndefinedConditionError(r,s,o):"unexpected-request"===r?new p.UnexpectedRequestError(r,s,o):new p.StanzaError("unknown",s)}))()}function S(e,t){var s;const r=n()(`stanza-id[xmlns="${c.Strophe.NS.SID}"]`,e).reduce(((e,t)=>(e[`stanza_id ${t.getAttribute("by")}`]=t.getAttribute("id"),e)),{}),i=y({origin_id:null===(s=n()(`origin-id[xmlns="${c.Strophe.NS.SID}"]`,e).pop())||void 0===s?void 0:s.getAttribute("id"),msgid:e.getAttribute("id")||t.getAttribute("id")},r),a=n()(`message > result[xmlns="${c.Strophe.NS.MAM}"]`,t).pop();if(a){const e=o.default.session.get("bare_jid");i[`stanza_id ${t.getAttribute("from")||e}`]=a.getAttribute("id")}return i}function x(e){const t=n()(`encryption[xmlns="${c.Strophe.NS.EME}"]`,e).pop(),s=null==t?void 0:t.getAttribute("namespace"),r={};return s?(r.is_encrypted=!0,r.encryption_namespace=s):n()(`encrypted[xmlns="${c.Strophe.NS.OMEMO}"]`,e).pop()&&(r.is_encrypted=!0,r.encryption_namespace=c.Strophe.NS.OMEMO),r}function E(e,t){const s=n()(`> apply-to[xmlns="${c.Strophe.NS.FASTEN}"]`,e).pop();if(s){const e=s.getAttribute("id");if(n()(`> retract[xmlns="${c.Strophe.NS.RETRACT0}"]`,s).pop()){const s=n()(`delay[xmlns="${c.Strophe.NS.DELAY}"]`,t).pop();return{editable:!1,retracted:s?l()(s.getAttribute("stamp")).toISOString():(new Date).toISOString(),retracted_id:e}}}return{}}function A(e,t){const s=n()(`> retract[xmlns="${c.Strophe.NS.RETRACT}"]`,e).pop();if(s){const e=n()(`> delay[xmlns="${c.Strophe.NS.DELAY}"]`,t).pop();return{editable:!1,retracted:e?l()(e.getAttribute("stamp")).toISOString():(new Date).toISOString(),retracted_id:s.getAttribute("id")}}{const t=n()(`> retracted[xmlns="${c.Strophe.NS.RETRACT}"]`,e).pop()||n()(`> retracted[xmlns="${c.Strophe.NS.RETRACT0}"]`,e).pop();if(t)return{editable:!1,is_tombstone:!0,retracted:t.getAttribute("stamp"),retraction_id:t.getAttribute("id")}}return E(e,t)}function O(e,t){const s=n()(`replace[xmlns="${c.Strophe.NS.MESSAGE_CORRECT}"]`,e).pop();if(s){const e=s.getAttribute("id");if(e){const s=n()(`delay[xmlns="${c.Strophe.NS.DELAY}"]`,t).pop();return{replace_id:e,edited:s?l()(s.getAttribute("stamp")).toISOString():(new Date).toISOString()}}}return{}}function C(e){const t=n()(`> apply-to[xmlns="${c.Strophe.NS.FASTEN}"]`,e).pop();if(t){const e=t.getAttribute("id"),r=n()(`> meta[xmlns="${c.Strophe.NS.XHTML}"]`,t);if(r.length){var s;const t=i.default.settings.get("message_limit"),n=r.reduce(((e,s)=>{const r=s.getAttribute("property");if(r){let n=(0,u.decodeHTMLEntities)(s.getAttribute("content")||"");t&&"og:description"===r&&n.length>=t&&(n=`${n.slice(0,t)}${(0,u.decodeHTMLEntities)("&#8230;")}`),e[r]=n}return e}),{ogp_for_id:e}),o=n["og:url"];if((null==o?void 0:o.startsWith("/"))&&"github"===(null===(s=n["og:site_name"])||void 0===s?void 0:s.toLowerCase())&&(n["og:url"]=`https://github.com${o}`),"og:description"in n||"og:title"in n||"og:image"in n)return n}}return{}}function T(e){const t=n()(`spoiler[xmlns="${c.Strophe.NS.SPOILER}"]`,e).pop();return{is_spoiler:!!t,spoiler_hint:null==t?void 0:t.textContent}}function $(e){const t=n()(`x[xmlns="${c.Strophe.NS.OUTOFBAND}"]`,e).pop();var s,r;return t?{oob_url:null===(s=t.querySelector("url"))||void 0===s?void 0:s.textContent,oob_desc:null===(r=t.querySelector("desc"))||void 0===r?void 0:r.textContent}:{}}function k(e){if("error"===e.getAttribute("type")){const t=e.querySelector("error"),s=n()(`text[xmlns="${c.Strophe.NS.STANZAS}"]`,t).pop();return{is_error:!0,error_text:null==s?void 0:s.textContent,error_type:t.getAttribute("type"),error_condition:t.firstElementChild.nodeName,errors:Array.from(t.children).map((e=>({name:e.nodeName,xmlns:e.getAttribute("xmlns")})))}}return{}}function M(e){return n()(`reference[xmlns="${c.Strophe.NS.REFERENCE}"]`,e).map((t=>{var s;const r=t.getAttribute("anchor"),n=null===(s=e.querySelector(r?`#${r}`:"body"))||void 0===s?void 0:s.textContent;if(!n)return d.default.warn(`Could not find referenced text for ${t}`),null;const o=Number(t.getAttribute("begin")),i=Number(t.getAttribute("end"));return{begin:o,end:i,type:t.getAttribute("type"),value:n.slice(o,i),uri:t.getAttribute("uri")}})).filter((e=>e))}function I(e){const t=n()(`received[xmlns="${c.Strophe.NS.RECEIPTS}"]`,e).pop();return null==t?void 0:t.getAttribute("id")}function P(e){const t=c.Strophe.NS.CARBONS;return n()(`message > received[xmlns="${t}"]`,e).length>0||n()(`message > sent[xmlns="${t}"]`,e).length>0}function N(e){var t;return null===(t=n()(`\n        composing[xmlns="${j.CHATSTATES}"],\n        paused[xmlns="${j.CHATSTATES}"],\n        inactive[xmlns="${j.CHATSTATES}"],\n        active[xmlns="${j.CHATSTATES}"],\n        gone[xmlns="${j.CHATSTATES}"]`,e).pop())||void 0===t?void 0:t.nodeName}function D(e,t){return"me"!==t.sender&&!t.is_carbon&&!t.is_archived&&n()(`request[xmlns="${c.Strophe.NS.RECEIPTS}"]`,e).length}function R(e){if(n()(`message > forwarded[xmlns="${c.Strophe.NS.FORWARD}"]`,e).length){(0,m.rejectMessage)(e,"Forwarded messages not part of an encapsulating protocol are not supported");const t=e.getAttribute("from");throw new p.StanzaParseError(e,`Ignoring unencapsulated forwarded message from ${t}`)}}function z(e){return n()(`\n        acknowledged[xmlns="${c.Strophe.NS.MARKERS}"],\n        displayed[xmlns="${c.Strophe.NS.MARKERS}"],\n        received[xmlns="${c.Strophe.NS.MARKERS}"]`,e).pop()}function L(e){return"headline"===e.getAttribute("type")}function U(e){return v((function*(){const t=c.Strophe.getBareJidFromJid(e.getAttribute("from"));return!!(yield i.default.rooms.get(t))}))()}function B(e){if(n()(`mentions[xmlns="${c.Strophe.NS.MENTIONS}"]`,e).pop())return!1;const t=e.getAttribute("from");return!("error"===e.getAttribute("type")||!t||t.includes("@"))}function F(e){return!!n()(`message > result[xmlns="${c.Strophe.NS.MAM}"]`,e).pop()}function q(e,t,s){var r;const o=e.getAttribute("var"),i=e.getAttribute("label")||"",a=e.getAttribute("type"),l={readonly:t,desc:null===(r=e.querySelector("desc"))||void 0===r?void 0:r.textContent};if("list-single"===a||"list-multi"===a){const t=Array.from(e.querySelectorAll(":scope > value")).map((e=>null==e?void 0:e.textContent)),s=Array.from(e.querySelectorAll(":scope > option")).map((s=>{var r;const n=null===(r=s.querySelector("value"))||void 0===r?void 0:r.textContent;return y({value:n,label:s.getAttribute("label"),selected:t.includes(n),required:!!e.querySelector("required")},l)}));return y({type:a,options:s,label:e.getAttribute("label"),var:o,required:!!e.querySelector("required")},l)}if("fixed"===a){var d;return y({text:null===(d=e.querySelector("value"))||void 0===d?void 0:d.textContent,label:i,type:a,var:o},l)}var c,u,h,m,f;if("jid-multi"===a)return y({type:a,var:o,label:i,value:null===(c=e.querySelector("value"))||void 0===c?void 0:c.textContent,required:!!e.querySelector("required")},l);if("boolean"===a){var p;const t=null===(p=e.querySelector("value"))||void 0===p?void 0:p.textContent;return y({type:a,var:o,label:i,checked:"1"===t||"true"===t},l)}if("url"===o)return y({var:o,label:i,value:null===(u=e.querySelector("value"))||void 0===u?void 0:u.textContent},l);if("username"===o)return y({var:o,label:i,value:null===(h=e.querySelector("value"))||void 0===h?void 0:h.textContent,required:!!e.querySelector("required"),type:H(e)},l);if("password"===o)return y({var:o,label:i,value:null===(m=e.querySelector("value"))||void 0===m?void 0:m.textContent,required:!!e.querySelector("required")},l);if("ocr"===o){const t=e.querySelector("uri"),r=n()('data[cid="'+t.textContent.replace(/^cid:/,"")+'"]',s)[0];return y({label:e.getAttribute("label"),var:o,uri:{type:t.getAttribute("type"),data:null==r?void 0:r.textContent},required:!!e.querySelector("required")},l)}return y({label:i,var:o,required:!!e.querySelector("required"),value:null===(f=e.querySelector("value"))||void 0===f?void 0:f.textContent,type:H(e)},l)}function H(e){const t=f.XFORM_TYPE_MAP[e.getAttribute("type")];if("text"==t){const s=e.getElementsByTagNameNS("http://jabber.org/protocol/xdata-validate","validate");if(1===s.length){const e=s[0].getAttribute("datatype");return f.XFORM_VALIDATE_TYPE_MAP[e]||t}}return t}function G(e){var t;const s=n()(`x[xmlns="${c.Strophe.NS.XFORM}"]`,e);if(s.length>1)throw d.default.error(e),new Error("Invalid stanza");if(0===s.length)return null;const r=s[0],o=r.getAttribute("type"),i={type:o,title:null===(t=r.querySelector("title"))||void 0===t?void 0:t.textContent};if("result"===o){const t=r.querySelector(":scope > reported");if(t){const e=t?Array.from(t.querySelectorAll(":scope > field")):[],s=Array.from(r.querySelectorAll(":scope > item"));return b(y({},i),{reported:e.map(h.getAttributes),items:s.map((e=>Array.from(e.querySelectorAll("field")).map((e=>{var t,s;return b(y({},(0,h.getAttributes)(e)),{value:null!==(s=null===(t=e.querySelector("value"))||void 0===t?void 0:t.textContent)&&void 0!==s?s:""})}))))})}return b(y({},i),{fields:Array.from(r.querySelectorAll("field")).map((t=>q(t,!0,e)))})}var a;if("form"===o)return b(y({},i),{instructions:null===(a=r.querySelector("instructions"))||void 0===a?void 0:a.textContent,fields:Array.from(r.querySelectorAll("field")).map((t=>q(t,!1,e)))});throw new Error(`Invalid type in XForm response stanza: ${o}`)}},"./src/headless/shared/rsm.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{RSM:()=>h,RSM_ATTRIBUTES:()=>u,RSM_TYPES:()=>c});var r=s("./src/headless/utils/object.js"),n=s("./src/headless/shared/api/public.js");const{Strophe:o,$build:i}=n.default.env;o.addNamespace("RSM","http://jabber.org/protocol/rsm");const a=["after","before","index","max"],l=e=>Number(e),d=e=>e.toString(),c={after:d,before:d,count:l,first:d,index:l,last:d,max:l},u=Object.keys(c);class h{static getQueryParameters(e={}){return a.reduce(((t,s)=>(void 0!==e[s]&&(t[s]=e[s]),t)),{})}static parseXMLResult(e){const t={};for(var s=0;s<u.length;s++){const n=u[s],i=e.getElementsByTagName(n)[0];(0,r.isUndefined)(i)||null===i||(t[n]=c[n](o.getText(i)),"first"==n&&(t.index=c.index(i.getAttribute("index"))))}return t}toXML(){const e=i("set",{xmlns:o.NS.RSM});return a.reduce(((e,t)=>(0,r.isUndefined)(this.query[t])?e:e.c(t).t((this.query[t]||"").toString()).up()),e).tree()}toString(){return o.serialize(this.toXML())}next(e,t){const s=Object.assign({},this.query,{after:this.result.last,before:t,max:e});return new h(s)}previous(e,t){const s=Object.assign({},this.query,{after:t,before:this.result.first,max:e});return new h(s)}constructor(e={}){this.query=h.getQueryParameters(e),this.result=e.xml?h.parseXMLResult(e.xml):{}}}},"./src/headless/shared/settings/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{settings_api:()=>n});var r=s("./src/headless/shared/settings/utils.js");const n={extend:e=>(0,r.extendAppSettings)(e),get:e=>e?(0,r.getAppSetting)(e):(0,r.getAppSettings)(),set(e,t){(0,r.updateAppSettings)(e,t)},listen:{on(e,t,s){(0,r.registerListener)(e,t,s)},not(e,t){(0,r.unregisterListener)(e,t)}}}},"./src/headless/shared/settings/constants.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{DEFAULT_SETTINGS:()=>r});const r={allow_non_roster_messaging:!0,allow_url_history_change:!0,assets_path:"/dist",authentication:"login",auto_login:!1,auto_reconnect:!0,blacklisted_plugins:[],clear_cache_on_logout:!1,connection_options:{},credentials_url:null,disable_effects:!1,discover_connection_methods:!0,embed_3rd_party_media_players:!0,geouri_regex:/https\:\/\/www.openstreetmap.org\/.*#map=[0-9]+\/([\-0-9.]+)\/([\-0-9.]+)\S*/g,geouri_replacement:"https://www.openstreetmap.org/?mlat=$1&mlon=$2#map=18/$1/$2",i18n:void 0,jid:void 0,reuse_scram_keys:!0,keepalive:!0,loglevel:"info",locales:["af","ar","bg","ca","cs","da","de","el","en","eo","es","eu","fa","fi","fr","gl","he","hi","hu","id","it","ja","lt","mr","nb","nl","oc","pl","pt","pt_BR","ro","ru","sv","ta","th","tr","ug","uk","vi","zh_CN","zh_TW"],nickname:void 0,password:void 0,persistent_store:"IndexedDB",rid:void 0,root:window.document,sid:void 0,singleton:!1,strict_plugin_dependencies:!1,stanza_timeout:6e4,view_mode:"fullscreen",websocket_url:void 0,whitelisted_plugins:[]}},"./src/headless/shared/settings/user/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{user_settings_api:()=>o});var r=s("./src/headless/shared/settings/user/utils.js");function n(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const o={getModel:()=>(0,r.getUserSettings)(),get(e,t){return(s=function*(){const s=yield(0,r.getUserSettings)();return void 0===s.get(e)?t:s.get(e)},function(){var e=this,t=arguments;return new Promise((function(r,o){var i=s.apply(e,t);function a(e){n(i,r,o,a,l,"next",e)}function l(e){n(i,r,o,a,l,"throw",e)}a(void 0)}))})();var s},set(e,t){if(e instanceof Object)return(0,r.updateUserSettings)(e,{promise:!0});{const s={};return s[e]=t,(0,r.updateUserSettings)(s,{promise:!0})}},clear:()=>(0,r.clearUserSettings)()}},"./src/headless/shared/settings/user/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{clearUserSettings:()=>m,getUserSettings:()=>u,updateUserSettings:()=>h});var r=s("./src/headless/shared/_converse.js"),n=s("./src/log/index.js"),o=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/utils/storage.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}}let d;function c(){const e=r.default.session.get("bare_jid");if(!e){const e="No JID to fetch user settings for";throw n.default.error(e),Error(e)}const t=`converse.user-settings.${e}`;if((null==d?void 0:d.get("id"))!==t)return d=new o.Model({id:t}),(0,i.initStorage)(d,t),d.fetch({promise:!0})}function u(){return l((function*(){return yield c(),d}))()}function h(e,t){return l((function*(){return yield c(),d.save(e,t)}))()}function m(){return l((function*(){if(r.default.session.get("bare_jid"))return yield c(),d.clear();d=void 0}))()}},"./src/headless/shared/settings/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{extendAppSettings:()=>p,getAppSetting:()=>f,getAppSettings:()=>u,getInitSettings:()=>m,initAppSettings:()=>h,registerListener:()=>g,unregisterListener:()=>v,updateAppSettings:()=>_});var r=s("./node_modules/lodash-es/isEqual.js"),n=s("./node_modules/lodash-es/pick.js"),o=s("./node_modules/@converse/skeletor/dist/skeletor.js"),i=s("./src/headless/shared/settings/constants.js"),a=s("./src/headless/utils/object.js");let l,d={};class c extends((0,o.EventEmitter)(Object)){}function u(){return l}function h(e){d=e,l=new c;const t=(0,n.default)(e,Object.keys(i.DEFAULT_SETTINGS));Object.assign(l,i.DEFAULT_SETTINGS,t)}function m(){return d}function f(e){if(Object.keys(i.DEFAULT_SETTINGS).includes(e))return l[e]}function p(e){(0,a.merge)(i.DEFAULT_SETTINGS,e);const t=Object.keys(e).filter((e=>e in i.DEFAULT_SETTINGS)),s=(0,n.default)(d,t),r=Object.assign((0,n.default)(e,t),s);(0,a.merge)(l,r)}function g(e,t,s){l.on(e,t,s)}function v(e,t){l.off(e,t)}function _(e,t){if(null==e)return this;let s;e instanceof Object?s=e:"string"==typeof e&&(s={},s[e]=t);const n=Object.keys(s).filter((e=>e in i.DEFAULT_SETTINGS)),o={};n.forEach((e=>{const t=s[e];(0,r.default)(l[e],t)||(o[e]=t,l[e]=t)})),Object.keys(o).forEach((e=>l.trigger("change:"+e,o[e]))),l.trigger("change",o)}},"./src/headless/utils/array.js":(e,t,s)=>{"use strict";function r(e){return[...new Set(e)]}s.r(t),s.d(t,{unique:()=>r})},"./src/headless/utils/arraybuffer.js":(e,t,s)=>{"use strict";function r(e,t){const s=new Uint8Array(e.byteLength+t.byteLength);return s.set(new Uint8Array(e),0),s.set(new Uint8Array(t),e.byteLength),s.buffer}function n(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}function o(e){return new TextDecoder("utf-8").decode(e)}function i(e){return(new TextEncoder).encode(e).buffer}function a(e){return btoa(new Uint8Array(e).reduce(((e,t)=>e+String.fromCharCode(t)),""))}function l(e){const t=atob(e),s=t.length,r=new Uint8Array(s);for(let e=0;e<s;e++)r[e]=t.charCodeAt(e);return r.buffer}function d(e){return new Uint8Array(e.match(/[\da-f]{2}/gi).map((e=>parseInt(e,16)))).buffer}s.r(t),s.d(t,{appendArrayBuffer:()=>r,arrayBufferToBase64:()=>a,arrayBufferToHex:()=>n,arrayBufferToString:()=>o,base64ToArrayBuffer:()=>l,hexToArrayBuffer:()=>d,stringToArrayBuffer:()=>i})},"./src/headless/utils/color.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{colorize:()=>i});var r=s("./node_modules/hsluv/dist/hsluv.mjs");function n(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const o=new Map;function i(e){return(t=function*(){const t=o.get(e);if(t)return t;const s=Array.from(new Uint8Array(yield crypto.subtle.digest("SHA-1",(new TextEncoder).encode(e)))),n=(s[0]+256*s[1])/65536*360,i=new r.Hsluv;return i.hsluv_h=n,i.hsluv_s=100,i.hsluv_l=50,i.hsluvToHex(),o.set(e,i.hex),i.hex},function(){var e=this,s=arguments;return new Promise((function(r,o){var i=t.apply(e,s);function a(e){n(i,r,o,a,l,"next",e)}function l(e){n(i,r,o,a,l,"throw",e)}a(void 0)}))})();var t}},"./src/headless/utils/form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{getCurrentWord:()=>l,getSelectValues:()=>i,isMentionBoundary:()=>d,placeCaretAtEnd:()=>u,replaceCurrentWord:()=>c,webForm2xForm:()=>a});var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js");const n=(e,t)=>`<field var="${e}">${t}</field>`,o=e=>`<value>${r.Strophe.xmlescape(e)}</value>`;function i(e){const t=[],s=null==e?void 0:e.options;for(let e=0,r=s.length;e<r;e++){const r=s[e];r.selected&&t.push(r.value||r.text)}return t}function a(e){const t=e.getAttribute("name");if(!t)return null;let s;return s="checkbox"===e.getAttribute("type")?e.checked?"1":"0":"TEXTAREA"==e.tagName?e.value.split("\n").filter((e=>e.trim())):"SELECT"==e.tagName?i(e):e.value,(0,r.toStanza)(n(t,Array.isArray(s)?s.map(o):o(s)))}function l(e,t,s){t||(t=e.selectionEnd||void 0);let[r]=e.value.slice(0,t).split(/\s/).slice(-1);return s&&([r]=r.split(s).slice(-1)),r}function d(e){return"@"!==e&&RegExp("(\\p{Z}|\\p{P})","u").test(e)}function c(e,t){const s=e.selectionEnd||void 0,r=e.value.slice(0,s).split(/\s/).pop(),n=e.value,o=d(r[0])?r[0]:"";e.value=n.slice(0,s-r.length)+o+`${t} `+n.slice(s);const i=s-r.length+t.length+1;e.selectionEnd=o?i+1:i}function u(e){e!==document.activeElement&&e.focus();const t=2*e.value.length;setTimeout((()=>e.setSelectionRange(t,t)),1),e.scrollTop=999999}},"./src/headless/utils/html.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{decodeHTMLEntities:()=>u,isElement:()=>o,isTagEqual:()=>i,queryChildren:()=>l,siblingIndex:()=>d,stringToElement:()=>a});var r=s("./node_modules/dompurify/dist/purify.es.mjs"),n=s("./node_modules/strophe.js/dist/strophe.browser.esm.js");function o(e){return e instanceof Element||e instanceof HTMLDocument}function i(e,t){if(e instanceof n.Strophe.Builder)return i(e.tree(),t);if(e instanceof Element)return n.Strophe.isTagEqual(e,t);throw Error("isTagEqual called with value which isn't an element or Strophe.Builder instance")}function a(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function l(e,t){return Array.from(e.childNodes).filter((e=>e instanceof Element&&e.matches(t)))}function d(e){for(var t=0;e=e.previousElementSibling;t++);return t}const c=document.createElement("div");function u(e){return e&&"string"==typeof e&&(c.innerHTML=r.default.sanitize(e),e=c.textContent,c.textContent=""),e}},"./src/headless/utils/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>E,getRandomInt:()=>S,getUniqueId:()=>x,isEmptyMessage:()=>j,prefixMentions:()=>w,setLogLevelFromRoute:()=>b});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/log/index.js"),o=s("./src/headless/utils/array.js"),i=s("./src/headless/utils/arraybuffer.js"),a=s("./src/headless/utils/color.js"),l=s("./src/headless/utils/form.js"),d=s("./src/headless/utils/html.js"),c=s("./src/headless/utils/init.js"),u=s("./src/headless/utils/jid.js"),h=s("./src/headless/utils/object.js"),m=s("./src/headless/utils/promise.js"),f=s("./src/headless/utils/session.js"),p=s("./src/headless/utils/stanza.js"),g=s("./src/headless/utils/storage.js"),v=s("./src/headless/utils/text.js"),_=s("./src/headless/utils/url.js");function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function b(e){if(location.hash.startsWith("#converse?loglevel=")){null==e||e.preventDefault();const t=location.hash.split("=").pop();Object.keys(n.LEVELS).includes(t)?n.default.setLogLevel(t):n.default.error(`Could not set loglevel of ${t}`)}}function j(e){return e instanceof r.Model&&(e=e.attributes),!(e.oob_url||e.file||e.is_encrypted&&e.plaintext||e.message||e.body)}function w(e){let t=e.getMessageText();return(e.get("references")||[]).sort(((e,t)=>t.begin-e.begin)).forEach((e=>{t=`${t.slice(0,e.begin)}@${t.slice(e.begin)}`})),t}function S(e){return Math.random()*e|0}function x(e){var t,s,r;const n=null!==(r=null===(t=(s=crypto).randomUUID)||void 0===t?void 0:t.call(s))&&void 0!==r?r:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=S(16);return("x"===e?t:3&t|8).toString(16)}));return"string"==typeof e||"number"==typeof e?n+":"+e:n}const E=Object.assign((A=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){y(e,t,s[t])}))}return e}({},o,i,a,l,d,c,u,h,m,f,p,g,v,_),O=null!=(O={getRandomInt:S,getUniqueId:x,isEmptyMessage:j,onMultipleEvents:function(e=[],t){let s=[];function r(r){s.push(r),e.length===s.length&&(t(s),s=[])}e.forEach((e=>e.object.on(e.event,r)))},prefixMentions:w,shouldCreateMessage:function(e){return e.retracted||!j(e)},triggerEvent:function(e,t,s="Event",r=!0,n=!0){const o=document.createEvent(s);o.initEvent(t,r,n),e.dispatchEvent(o)}})?O:{},Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(O)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(O)).forEach((function(e){Object.defineProperty(A,e,Object.getOwnPropertyDescriptor(O,e))})),A),{muc:null,mam:null});var A,O},"./src/headless/utils/init.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{attemptNonPreboundSession:()=>T,cleanup:()=>O,initClientConfig:()=>b,initPersistentStorage:()=>w,initPlugins:()=>y,initSession:()=>E,initSessionStorage:()=>j,registerGlobalEventHandlers:()=>A,safeSave:()=>M,savedLoginInfo:()=>$,setUserJID:()=>x});var r=s("./node_modules/@converse/skeletor/src/storage.js"),n=s("./src/headless/shared/_converse.js"),o=s("./node_modules/lodash-es/debounce.js"),i=s("./node_modules/localforage-webextensionstorage-driver/local.js"),a=s("./src/log/index.js"),l=s("./node_modules/localforage-webextensionstorage-driver/sync.js"),d=s("./src/headless/shared/constants.js"),c=s("./node_modules/@converse/skeletor/dist/skeletor.js"),u=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),h=s("./src/headless/utils/storage.js"),m=s("./src/headless/shared/connection/utils.js"),f=s("./src/headless/utils/jid.js"),p=s("./src/headless/utils/session.js"),g=s("./src/headless/utils/object.js");function v(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function _(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){v(o,r,n,i,a,"next",e)}function a(e){v(o,r,n,i,a,"throw",e)}i(void 0)}))}}function y(e){e.pluggable.initialized_plugins=[];const t=d.CORE_PLUGINS.concat(e.api.settings.get("whitelisted_plugins"));e.api.settings.get("singleton")&&["converse-bookmarks","converse-controlbox","converse-headline","converse-register"].forEach((t=>e.api.settings.get("blacklisted_plugins").push(t))),e.pluggable.initializePlugins({_converse:e},t,e.api.settings.get("blacklisted_plugins")),e.api.trigger("pluginsInitialized")}function b(e){return _((function*(){const t="converse.client-config",s=new c.Model({id:t,trusted:!0});s.browserStorage=(0,h.createStore)(t,"session"),Object.assign(e,{config:s}),Object.assign(e.state,{config:s}),yield new Promise((e=>s.fetch({success:e,error:e}))),e.api.trigger("clientConfigInitialized")}))()}function j(e){return _((function*(){yield r.default.sessionStorageInitialized,e.storage.session=r.default.localForage.createInstance({name:(0,p.isTestEnv)()?"converse-test-session":"converse-session",description:"sessionStorage instance",driver:["sessionStorageWrapper"]})}))()}function w(e,t,s="persistent"){const{api:n}=e;if("sessionStorage"===n.settings.get("persistent_store"))return void(e.storage[s]=e.storage.session);if("BrowserExtLocal"===n.settings.get("persistent_store"))return r.default.localForage.defineDriver(i.default).then((()=>r.default.localForage.setDriver("webExtensionLocalStorage"))),void(e.storage[s]=r.default.localForage);if("BrowserExtSync"===n.settings.get("persistent_store"))return r.default.localForage.defineDriver(l.default).then((()=>r.default.localForage.setDriver("webExtensionSyncStorage"))),void(e.storage[s]=r.default.localForage);const o={name:(0,p.isTestEnv)()?"converse-test-persistent":"converse-persistent",storeName:t};"localStorage"===n.settings.get("persistent_store")?(o.description="localStorage instance",o.driver=[r.default.localForage.LOCALSTORAGE]):"IndexedDB"===n.settings.get("persistent_store")&&(o.description="indexedDB instance",o.driver=[r.default.localForage.INDEXEDDB]),e.storage[s]=r.default.localForage.createInstance(o)}function S(e,t){const{api:s,session:r}=e;s.settings.get("authentication")===d.ANONYMOUS||u.Strophe.getResourceFromJid(t)||(t=t.toLowerCase()+(0,m.generateResource)());const n=u.Strophe.getBareJidFromJid(t),o=u.Strophe.getResourceFromJid(t),i=u.Strophe.getDomainFromJid(t);Object.assign(e,{jid:t,bare_jid:n,resource:o,domain:i}),r.save({jid:t,bare_jid:n,resource:o,domain:i,active:!0}),s.connection.get().jid=t}function x(e){return _((function*(){return yield E(n.default,e),n.default.api.trigger("setUserJID"),e}))()}function E(e,t){return _((function*(){var s;const r=e.api.settings.get("connection_options").worker,n=u.Strophe.getBareJidFromJid(t).toLowerCase(),o=`converse.session-${n}`;(null===(s=e.session)||void 0===s?void 0:s.get("id"))!==o?(w(e,n),e.session.set({id:o}),(0,h.initStorage)(e.session,o,r?"persistent":"session"),yield new Promise((t=>e.session.fetch({success:t,error:t}))),!r&&e.session.get("active")&&(e.session.clear(),e.session.save({id:o})),S(e,t),window.addEventListener((0,p.getUnloadEvent)(),(()=>M(e.session,{active:!1}))),e.api.trigger("userSessionInitialized")):S(e,t)}))()}function A(e){e.api.trigger("registeredGlobalEventHandlers")}function O(e){return _((function*(){var t;const{api:s}=e;yield s.trigger("cleanup",{synchronous:!0}),function(e){e.api.trigger("unregisteredGlobalEventHandlers")}(e),null===(t=s.connection.get())||void 0===t||t.reset(),e.stopListening(),e.off(),e.promises.initialized.isResolved&&s.promises.add("initialized")}))()}function C(e=0){return new Promise((0,o.default)(((e,t)=>_((function*(){let s=new XMLHttpRequest;s.open("GET",n.default.api.settings.get("credentials_url"),!0),s.setRequestHeader("Accept","application/json, text/javascript"),s.onload=()=>{if(s.status>=200&&s.status<400){const t=JSON.parse(s.responseText);x(t.jid).then((()=>{e({jid:t.jid,password:t.password})}))}else t(new Error(`${s.status}: ${s.responseText}`))},s.onerror=t,s=yield n.default.api.hook("beforeFetchLoginCredentials",this,s),s.send()})).call(this)),e))}function T(e,t){return _((function*(){const{api:s}=n.default,{credentials:r}=yield s.hook("beforeAttemptNonPreboundSession",this,{credentials:e,automatic:t});if(r)return k(r);if(s.settings.get("authentication")===d.LOGIN){const t=n.default.session.get("jid");if(e)return k(e);if(s.settings.get("credentials_url"))return k(yield _((function*(){let e,t=0;for(;!e;){try{e=yield C(t)}catch(e){a.default.error("Could not fetch login credentials"),a.default.error(e)}t=2e3}return e}))());if(t&&(s.settings.get("password")||s.connection.get().pass))return k();if(s.settings.get("reuse_scram_keys")){const e=yield _((function*(){const e=localStorage.getItem("conversejs-session-jid");if(!e)return null;yield x(e);const t=(yield $(e)).get("scram_keys");return t?{jid:e,password:t}:null}))();if(e)return k(e)}if(!(0,p.isTestEnv)()&&"credentials"in navigator){const e=yield _((function*(){if(!localStorage.getItem("conversejs-session-jid"))return null;try{const e=yield navigator.credentials.get({password:!0});if(e&&"password"==e.type&&(0,f.isValidJID)(e.id))return yield x(e.id),{jid:e.id,password:e.password}}catch(e){return a.default.error(e),null}}))();if(e)return k(e)}(0,p.isTestEnv)()||a.default.debug("attemptNonPreboundSession: Couldn't find credentials to log in with")}else![d.ANONYMOUS,d.EXTERNAL].includes(s.settings.get("authentication"))||t&&!s.settings.get("auto_login")||k()})).call(this)}function $(e){return _((function*(){var t;const s=`converse.scram-keys-${u.Strophe.getBareJidFromJid(e)}`;if((null===(t=n.default.state.login_info)||void 0===t?void 0:t.get("id"))===s)return n.default.state.login_info;const r=new c.Model({id:s});return n.default.state.login_info=r,(0,h.initStorage)(r,s,"persistent"),yield new Promise((e=>r.fetch({success:e,error:e}))),r}))()}function k(e){return _((function*(){const{api:t}=n.default,s=n.default.session.get("jid"),r=t.connection.get();if([d.ANONYMOUS,d.EXTERNAL].includes(t.settings.get("authentication"))){if(!s)throw new Error("Config Error: when using anonymous login you need to provide the server's domain via the 'jid' option. Either when calling converse.initialize, or when calling _converse.api.user.login.");r.reconnecting||r.reset(),r.connect(s.toLowerCase())}else if(t.settings.get("authentication")===d.LOGIN){var o;const i=null!==(o=null==e?void 0:e.password)&&void 0!==o?o:(null==r?void 0:r.pass)||t.settings.get("password");if(!i){if(t.settings.get("auto_login"))throw new Error("autoLogin: If you use auto_login and authentication='login' then you also need to provide a password.");return r.setDisconnectionCause(u.Strophe.Status.AUTHFAIL,void 0,!0),void t.connection.disconnect()}let a;if(r.reconnecting||(r.reset(),r.service=(0,m.getConnectionServiceURL)()),n.default.state.config.get("trusted")&&s&&t.settings.get("reuse_scram_keys")&&!(null==i?void 0:i.ck)){const e=yield $(s);a=(t,s)=>{const{scram_keys:n}=r;n&&e.save({scram_keys:n}),r.onConnectStatusChanged(t,s)}}r.connect(s,i,a)}}))()}function M(e,t,s){(0,g.isPersistableModel)(e)?e.save(t,s):e.set(t,s)}},"./src/headless/utils/jid.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{getJIDFromURI:()=>d,isOwnJID:()=>c,isSameBareJID:()=>a,isSameDomain:()=>l,isValidJID:()=>o,isValidMUCJID:()=>i});var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),n=s("./src/headless/shared/_converse.js");function o(e){if("string"!=typeof e)return!1;return!(e.split("/").length-1>1)&&(2===e.split("@").filter((e=>!!e)).length&&!e.startsWith("@")&&!e.endsWith("@"))}function i(e){return!e.startsWith("@")&&!e.endsWith("@")}function a(e,t){return"string"==typeof e&&"string"==typeof t&&r.Strophe.getBareJidFromJid(e).toLowerCase()===r.Strophe.getBareJidFromJid(t).toLowerCase()}function l(e,t){return"string"==typeof e&&"string"==typeof t&&r.Strophe.getDomainFromJid(e).toLowerCase()===r.Strophe.getDomainFromJid(t).toLowerCase()}function d(e){return e.startsWith("xmpp:")&&e.endsWith("?join")?e.replace(/^xmpp:/,"").replace(/\?join$/,""):e}function c(e,t=!1){return t?e===n.default.session.get("full_jid"):r.Strophe.getBareJidFromJid(e)===n.default.session.get("bare_jid")}},"./src/headless/utils/object.js":(e,t,s)=>{"use strict";function r(e,t){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&"__proto__"!==s&&"constructor"!==s&&(e[s]instanceof Object?r(e[s],t[s]):e[s]=t[s])}function n(e){return"[object Error]"===Object.prototype.toString.call(e)}function o(e){return"function"==typeof e}function i(e){return void 0===e}function a(e){return e instanceof Error}function l(e){var t;return e.browserStorage||(null===(t=e.collection)||void 0===t?void 0:t.browserStorage)}s.r(t),s.d(t,{isError:()=>n,isErrorObject:()=>a,isFunction:()=>o,isPersistableModel:()=>l,isUndefined:()=>i,merge:()=>r})},"./src/headless/utils/parse-helpers.js":(e,t,s)=>{"use strict";function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function n(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),n.forEach((function(t){r(e,t,s[t])}))}return e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}s.r(t),s.d(t,{default:()=>d});const i={},a=(e,t)=>e.replace(RegExp("\\"+t,"ig"),"\\"+t);i.escapeCharacters=e=>t=>e.split("").reduce(a,t),i.escapeRegexString=i.escapeCharacters("[\\^$.?*+(){}|"),i.findFirstMatchInArray=e=>t=>{for(let s=0;s<e.length;s++)if(0===t.localeCompare(e[s],void 0,{sensitivity:"base"}))return e[s];return null};const l=([e,t],s,r)=>{let i=e,{begin:a,end:l}=s;const{value:d}=s;return a-=r,l=l-r-1,i=`${i.slice(0,a)}${d}${i.slice(l+1)}`,[i,[...t,o(n({},s),{begin:a,end:l})]]};i.reduceTextFromReferences=(e,t)=>t.reduce(l,[e,[]]);const d=i},"./src/headless/utils/promise.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{debounce:()=>o,getOpenPromise:()=>n.getOpenPromise,waitUntil:()=>a});var r=s("./src/log/index.js"),n=s("./node_modules/@converse/openpromise/dist/openpromise.js");function o(e,t){let s;return function(...r){clearTimeout(s),s=setTimeout((()=>{e.apply(this,r)}),t)}}function i(e,t){clearTimeout(e),clearInterval(t)}function a(e,t=300,s=3){try{const t=e();if(t)return Promise.resolve(t)}catch(e){return Promise.reject(e)}const o=(0,n.getOpenPromise)(),a=new Error;const l=setInterval((function(){try{const t=e();t&&(i(d,l),o.resolve(t))}catch(e){i(d,l),o.reject(e)}}),s);const d=setTimeout((function(){i(d,l);const e=`Wait until promise timed out: \n\n${a.stack}`;console.trace(),r.default.error(e),o.reject(new Error(e))}),t);return o}},"./src/headless/utils/session.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{clearSession:()=>p,getUnloadEvent:()=>u,isTestEnv:()=>c,isUniView:()=>d,replacePromise:()=>h,shouldClearCache:()=>m,tearDown:()=>f});var r=s("./src/log/index.js"),n=s("./node_modules/@converse/openpromise/dist/openpromise.js"),o=s("./src/headless/shared/settings/api.js"),i=s("./src/headless/shared/settings/utils.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const l=o.settings_api;function d(){return["fullscreen","embedded"].includes(l.get("view_mode"))}function c(){return"montague.lit/http-bind"===(0,i.getInitSettings)().bosh_service_url}function u(){return"onpagehide"in window?"pagehide":"onbeforeunload"in window?"beforeunload":"unload"}function h(e,t){const s=e.promises[t];if(!s)throw new Error(`Tried to replace non-existing promise: ${t}`);if(s.replace){const r=(0,n.getOpenPromise)();r.replace=s.replace,e.promises[t]=r}else r.default.debug(`Not replacing promise "${t}"`)}function m(e){const{api:t}=e;return!e.state.config.get("trusted")||t.settings.get("clear_cache_on_logout")||c()}function f(e){return(t=function*(){const{api:t}=e;return yield t.trigger("beforeTearDown",{synchronous:!0}),t.trigger("afterTearDown"),e},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))})();var t}function p(e){var t;m(e)&&(e.api.user.settings.clear(),null===(t=e.state.login_info)||void 0===t||t.destroy());return e.initSession(),e.api.trigger("clearSession",{synchronous:!0})}},"./src/headless/utils/stanza.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{getAttributes:()=>c,isErrorStanza:()=>a,isForbiddenError:()=>l,isServiceUnavailableError:()=>d,toStanza:()=>o.toStanza});var r=s("./node_modules/sizzle/dist/sizzle.js"),n=s.n(r),o=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),i=s("./src/headless/utils/html.js");function a(e){return!!(0,i.isElement)(e)&&"error"===e.getAttribute("type")}function l(e){return!!(0,i.isElement)(e)&&n()(`error[type="auth"] forbidden[xmlns="${o.Strophe.NS.STANZAS}"]`,e).length>0}function d(e){return!!(0,i.isElement)(e)&&n()(`error[type="cancel"] service-unavailable[xmlns="${o.Strophe.NS.STANZAS}"]`,e).length>0}function c(e){return e.getAttributeNames().reduce(((t,s)=>(t[s]=o.Strophe.xmlunescape(e.getAttribute(s)),t)),{})}},"./src/headless/utils/storage.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{createStore:()=>c,getDefaultStore:()=>l,initStorage:()=>u});var r=s("./node_modules/@converse/skeletor/src/storage.js"),n=s("./src/headless/shared/_converse.js"),o=s("./src/headless/shared/settings/api.js"),i=s("./src/headless/utils/session.js");const a=o.settings_api;function l(){if(n.default.state.config.get("trusted")){return"sessionStorage"===a.get("persistent_store")?"session":"persistent"}return"session"}function d(e){return"persistent"===e&&"IndexedDB"===a.get("persistent_store")}function c(e,t){const s=t||l(),o=n.default.storage[s];if(void 0===o)throw new TypeError(`createStore: Could not find store for ${e}`);return new r.default(e,o,d(t))}function u(e,t,s){const r=s||l();if(e.browserStorage=c(t,r),d(r)){const t=()=>e.browserStorage.flush(),s=(0,i.getUnloadEvent)();window.addEventListener(s,t),e.on("destroy",(()=>window.removeEventListener(s,t))),e.listenTo(n.default,"beforeLogout",t)}}},"./src/headless/utils/text.js":(e,t,s)=>{"use strict";function r(e){if(!e)return"";const t=e.codePointAt(0),s=t>65535?2:1;return String.fromCodePoint(t).toLocaleUpperCase()+e.substring(s)}function n(e,t){return t.reduce((function(t,s){return e.startsWith(s)&&s.length>t.length?s:t}),"")}function o(e){return"string"==typeof e||e instanceof String}s.r(t),s.d(t,{firstCharToUpperCase:()=>r,getLongestSubstring:()=>n,isString:()=>o})},"./src/headless/utils/url.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{addMediaURLsOffset:()=>A,checkFileTypes:()=>f,getHeaders:()=>w,getMediaURLs:()=>E,getMediaURLsMetadata:()=>x,getMetadataForURL:()=>S,getURL:()=>m,isAudioURL:()=>v,isEncryptedFileURL:()=>b,isGIFURL:()=>g,isImageURL:()=>y,isURLWithImageExtension:()=>p,isValidURL:()=>h,isVideoURL:()=>_,withinString:()=>j});var r=s("./src/log/index.js"),n=s("./src/headless/shared/settings/api.js");function o(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function i(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var i=e.apply(t,s);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)}))}}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){a(e,t,s[t])}))}return e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const c=n.settings_api,u={start:/(\b|_)(?:([a-z][a-z0-9.+-]*:\/\/)|xmpp:|mailto:|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g};function h(e){try{return e.startsWith("www.")?!!m(`http://${e}`):!!m(e)}catch(e){return!1}}function m(e){return e instanceof URL?e:e.toLowerCase().startsWith("www.")?m(`http://${e}`):new URL(e)}function f(e,t){let s;try{s=m(t)}catch(e){throw new Error(`checkFileTypes: could not parse url ${t}`)}const r=s.pathname.split("/").pop().toLowerCase();return!!e.filter((e=>r.endsWith(e))).length}function p(e){return f([".jpg",".jpeg",".png",".gif",".bmp",".tiff",".svg"],e)}function g(e){return f([".gif"],e)}function v(e,t){var s;return!!(null==t||null===(s=t.get("content-type"))||void 0===s?void 0:s.startsWith("audio"))||f([".ogg",".mp3",".m4a"],e)}function _(e,t){var s;return!!(null==t||null===(s=t.get("content-type"))||void 0===s?void 0:s.startsWith("video"))||f([".mp4",".webm"],e)}function y(e,t){var s;if(null==t||null===(s=t.get("content-type"))||void 0===s?void 0:s.startsWith("video"))return!0;const r=c.get("image_urls_regex");return(null==r?void 0:r.test(e))||p(e)}function b(e){return m(e).href.startsWith("aesgcm://")}function j(e,t,s){const r=(s=s||{}).start||u.start,n=s.end||u.end,o=s.trim||u.trim,i=s.parens||u.parens,a=/[a-z0-9-]=["']?$/i;for(r.lastIndex=0;;){const l=r.exec(e);if(!l)break;let d=l.index;if(s.ignoreHtml){const t=e.slice(Math.max(d-3,0),d);if(t&&a.test(t))continue}let c=d+e.slice(d).search(n),u=e.slice(d,c),h=-1;for(;;){const e=i.exec(u);if(!e)break;const t=e.index+e[0].length;h=Math.max(h,t)}if(u=h>-1?u.slice(0,h)+u.slice(h).replace(o,""):u.replace(o,""),u.length<=l[0].length)continue;if(s.ignore&&s.ignore.test(u))continue;c=d+u.length;const m=t(u,d,c);void 0!==m?(e=e.slice(0,d)+String(m)+e.slice(c),r.lastIndex=d+String(m).length):r.lastIndex=c}return r.lastIndex=0,e}function w(e){return i((function*(){try{return(yield fetch(e,{method:"HEAD"})).headers}catch(t){return console.debug(`Error calling HEAD on url ${e}: ${t}`),null}}))()}function S(e){return i((function*(){const t=n.settings_api.get("fetch_url_headers")?yield w(e.url):null;return d(l({},e),{is_gif:g(e.url),is_audio:v(e.url,t),is_image:y(e.url,t),is_video:_(e.url,t),is_encrypted:b(e.url)})}))()}function x(e,t=0){return i((function*(){const s=[];if(!e)return{};try{j(e,((e,r,n)=>(e.startsWith("_")&&(e=e.slice(1),r+=1),e.endsWith("_")&&(e=e.slice(0,e.length-1),n-=1),h(e)&&s.push({url:e,start:r+t,end:n+t}),e)))}catch(e){r.default.debug(e)}const n=yield Promise.all(s.map(S));return n.length?{media_urls:n}:{}}))()}function E(e,t){return e.map((e=>{if(e.start<0||e.start>=t.length)return null;const s=t.substring(e.start,e.end);return d(l({},e),{url:s})})).filter((e=>e))}function A(e,t,s=0){return e.map((e=>{const r=e.start-s,n=e.end-s;return r<0||r>=t.length?null:Object.assign({},e,{start:r,end:n,url:t.substring(e.start-s,e.end-s)})})).filter((e=>e))}},"./src/i18n lazy recursive ^\\.\\/.*\\/LC_MESSAGES\\/converse\\.po$":(e,t,s)=>{var r={"./af/LC_MESSAGES/converse.po":["./src/i18n/af/LC_MESSAGES/converse.po","locales/af-LC_MESSAGES-converse-po"],"./ar/LC_MESSAGES/converse.po":["./src/i18n/ar/LC_MESSAGES/converse.po","locales/ar-LC_MESSAGES-converse-po"],"./be/LC_MESSAGES/converse.po":["./src/i18n/be/LC_MESSAGES/converse.po","locales/be-LC_MESSAGES-converse-po"],"./bg/LC_MESSAGES/converse.po":["./src/i18n/bg/LC_MESSAGES/converse.po","locales/bg-LC_MESSAGES-converse-po"],"./ca/LC_MESSAGES/converse.po":["./src/i18n/ca/LC_MESSAGES/converse.po","locales/ca-LC_MESSAGES-converse-po"],"./cs/LC_MESSAGES/converse.po":["./src/i18n/cs/LC_MESSAGES/converse.po","locales/cs-LC_MESSAGES-converse-po"],"./da/LC_MESSAGES/converse.po":["./src/i18n/da/LC_MESSAGES/converse.po","locales/da-LC_MESSAGES-converse-po"],"./de/LC_MESSAGES/converse.po":["./src/i18n/de/LC_MESSAGES/converse.po","locales/de-LC_MESSAGES-converse-po"],"./el/LC_MESSAGES/converse.po":["./src/i18n/el/LC_MESSAGES/converse.po","locales/el-LC_MESSAGES-converse-po"],"./eo/LC_MESSAGES/converse.po":["./src/i18n/eo/LC_MESSAGES/converse.po","locales/eo-LC_MESSAGES-converse-po"],"./es/LC_MESSAGES/converse.po":["./src/i18n/es/LC_MESSAGES/converse.po","locales/es-LC_MESSAGES-converse-po"],"./eu/LC_MESSAGES/converse.po":["./src/i18n/eu/LC_MESSAGES/converse.po","locales/eu-LC_MESSAGES-converse-po"],"./fa/LC_MESSAGES/converse.po":["./src/i18n/fa/LC_MESSAGES/converse.po","locales/fa-LC_MESSAGES-converse-po"],"./fi/LC_MESSAGES/converse.po":["./src/i18n/fi/LC_MESSAGES/converse.po","locales/fi-LC_MESSAGES-converse-po"],"./fr/LC_MESSAGES/converse.po":["./src/i18n/fr/LC_MESSAGES/converse.po","locales/fr-LC_MESSAGES-converse-po"],"./gl/LC_MESSAGES/converse.po":["./src/i18n/gl/LC_MESSAGES/converse.po","locales/gl-LC_MESSAGES-converse-po"],"./he/LC_MESSAGES/converse.po":["./src/i18n/he/LC_MESSAGES/converse.po","locales/he-LC_MESSAGES-converse-po"],"./hi/LC_MESSAGES/converse.po":["./src/i18n/hi/LC_MESSAGES/converse.po","locales/hi-LC_MESSAGES-converse-po"],"./hu/LC_MESSAGES/converse.po":["./src/i18n/hu/LC_MESSAGES/converse.po","locales/hu-LC_MESSAGES-converse-po"],"./id/LC_MESSAGES/converse.po":["./src/i18n/id/LC_MESSAGES/converse.po","locales/id-LC_MESSAGES-converse-po"],"./it/LC_MESSAGES/converse.po":["./src/i18n/it/LC_MESSAGES/converse.po","locales/it-LC_MESSAGES-converse-po"],"./ja/LC_MESSAGES/converse.po":["./src/i18n/ja/LC_MESSAGES/converse.po","locales/ja-LC_MESSAGES-converse-po"],"./ko/LC_MESSAGES/converse.po":["./src/i18n/ko/LC_MESSAGES/converse.po","locales/ko-LC_MESSAGES-converse-po"],"./lt/LC_MESSAGES/converse.po":["./src/i18n/lt/LC_MESSAGES/converse.po","locales/lt-LC_MESSAGES-converse-po"],"./mr/LC_MESSAGES/converse.po":["./src/i18n/mr/LC_MESSAGES/converse.po","locales/mr-LC_MESSAGES-converse-po"],"./nb/LC_MESSAGES/converse.po":["./src/i18n/nb/LC_MESSAGES/converse.po","locales/nb-LC_MESSAGES-converse-po"],"./nl/LC_MESSAGES/converse.po":["./src/i18n/nl/LC_MESSAGES/converse.po","locales/nl-LC_MESSAGES-converse-po"],"./nl_BE/LC_MESSAGES/converse.po":["./src/i18n/nl_BE/LC_MESSAGES/converse.po","locales/nl_BE-LC_MESSAGES-converse-po"],"./oc/LC_MESSAGES/converse.po":["./src/i18n/oc/LC_MESSAGES/converse.po","locales/oc-LC_MESSAGES-converse-po"],"./pl/LC_MESSAGES/converse.po":["./src/i18n/pl/LC_MESSAGES/converse.po","locales/pl-LC_MESSAGES-converse-po"],"./pt/LC_MESSAGES/converse.po":["./src/i18n/pt/LC_MESSAGES/converse.po","locales/pt-LC_MESSAGES-converse-po"],"./pt_BR/LC_MESSAGES/converse.po":["./src/i18n/pt_BR/LC_MESSAGES/converse.po","locales/pt_BR-LC_MESSAGES-converse-po"],"./ro/LC_MESSAGES/converse.po":["./src/i18n/ro/LC_MESSAGES/converse.po","locales/ro-LC_MESSAGES-converse-po"],"./ru/LC_MESSAGES/converse.po":["./src/i18n/ru/LC_MESSAGES/converse.po","locales/ru-LC_MESSAGES-converse-po"],"./si/LC_MESSAGES/converse.po":["./src/i18n/si/LC_MESSAGES/converse.po","locales/si-LC_MESSAGES-converse-po"],"./sq/LC_MESSAGES/converse.po":["./src/i18n/sq/LC_MESSAGES/converse.po","locales/sq-LC_MESSAGES-converse-po"],"./sv/LC_MESSAGES/converse.po":["./src/i18n/sv/LC_MESSAGES/converse.po","locales/sv-LC_MESSAGES-converse-po"],"./ta/LC_MESSAGES/converse.po":["./src/i18n/ta/LC_MESSAGES/converse.po","locales/ta-LC_MESSAGES-converse-po"],"./th/LC_MESSAGES/converse.po":["./src/i18n/th/LC_MESSAGES/converse.po","locales/th-LC_MESSAGES-converse-po"],"./tr/LC_MESSAGES/converse.po":["./src/i18n/tr/LC_MESSAGES/converse.po","locales/tr-LC_MESSAGES-converse-po"],"./ug/LC_MESSAGES/converse.po":["./src/i18n/ug/LC_MESSAGES/converse.po","locales/ug-LC_MESSAGES-converse-po"],"./uk/LC_MESSAGES/converse.po":["./src/i18n/uk/LC_MESSAGES/converse.po","locales/uk-LC_MESSAGES-converse-po"],"./vi/LC_MESSAGES/converse.po":["./src/i18n/vi/LC_MESSAGES/converse.po","locales/vi-LC_MESSAGES-converse-po"],"./zh_CN/LC_MESSAGES/converse.po":["./src/i18n/zh_CN/LC_MESSAGES/converse.po","locales/zh_CN-LC_MESSAGES-converse-po"],"./zh_TW/LC_MESSAGES/converse.po":["./src/i18n/zh_TW/LC_MESSAGES/converse.po","locales/zh_TW-LC_MESSAGES-converse-po"]};function n(e){if(!s.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],n=t[0];return s.e(t[1]).then((()=>s.t(n,19)))}n.keys=()=>Object.keys(r),n.id="./src/i18n lazy recursive ^\\.\\/.*\\/LC_MESSAGES\\/converse\\.po$",e.exports=n},"./src/i18n/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{__:()=>p,i18n:()=>f});var r=s("./node_modules/jed/jed.js"),n=s.n(r),o=s("./src/headless/index.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function a(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))}}const{dayjs:l}=o.converse.env;let d,c="en";function u(e,t){return t.includes(e)}function h(e,t){if("en"===e||t(e))return e;const{languages:s}=window.navigator;let r;for(let e=0;e<s.length&&!r;e++)r=m(s[e],t);return r||"en"}function m(e,t){if(t(e))return e;var s=e.split("-")[0];return s!==e&&t(s)?s:void 0}const f=Object.assign(o.i18n,{getLocale:()=>c,translate(e,t){if(!d)return n().sprintf.apply(n(),arguments);const s=d.translate(e);return arguments.length>1?s.fetch.apply(s,t):s.fetch()},initialize:()=>a((function*(){if(o.u.isTestEnv())c="en";else try{const e=o.api.settings.get("i18n"),t=o.api.settings.get("locales");c=h(e,(e=>u(e,t))),d=yield a((function*(){const e=function(e){const t=e.toLowerCase().replace("_","-");return"ug"===t?"ug-cn":t}(c);if(!u(c,o.api.settings.get("locales"))||"en"===c)return;const{default:t}=yield s("./src/i18n lazy recursive ^\\.\\/.*\\/LC_MESSAGES\\/converse\\.po$")(`./${c}/LC_MESSAGES/converse.po`);return yield s("./node_modules/dayjs/locale lazy recursive ^\\.\\/.*\\.js$")(`./${e}.js`),l.locale(h(e,(e=>l.locale(e)))),new(n())(t)}))()}catch(e){o.log.fatal(e.message),c="en"}}))(),__:(e,...t)=>f.translate(e,t)}),p=f.__},"./src/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});s("./src/shared/styles/index.scss"),s("./src/i18n/index.js"),s("./src/shared/registry.js"),s("./src/shared/components/index.js");var r=s("./src/shared/components/element.js"),n=s("./src/shared/constants.js"),o=s("./src/headless/index.js");s("./src/utils/index.js"),s("./src/plugins/modal/index.js"),s("./src/plugins/adhoc-views/index.js"),s("./src/plugins/bookmark-views/index.js"),s("./src/plugins/chatview/index.js"),s("./src/plugins/controlbox/index.js"),s("./src/plugins/disco-views/index.js"),s("./src/plugins/headlines-view/index.js"),s("./src/plugins/mam-views/index.js"),s("./src/plugins/minimize/index.js"),s("./src/plugins/muc-views/index.js"),s("./src/plugins/notifications/index.js"),s("./src/plugins/profile/index.js"),s("./src/plugins/omemo/index.js"),s("./src/plugins/push/index.js"),s("./src/plugins/register/index.js"),s("./src/plugins/roomslist/index.js"),s("./src/plugins/rootview/index.js"),s("./src/plugins/rosterview/index.js"),s("./src/plugins/singleton/index.js"),s("./src/plugins/dragresize/index.js"),s("./src/plugins/fullscreen/index.js");o._converse.exports.CustomElement=r.CustomElement;const i=o.converse.initialize;o.converse.initialize=function(e,t){return Array.isArray(e.whitelisted_plugins)?e.whitelisted_plugins=e.whitelisted_plugins.concat(n.VIEW_PLUGINS):e.whitelisted_plugins=n.VIEW_PLUGINS,i(e,t)};const a=o.converse},"./src/log/index.js":(e,t,s)=>{"use strict";var r,n,o,i;s.r(t),s.d(t,{LEVELS:()=>a,default:()=>c,isElement:()=>d});const a={debug:0,info:1,warn:2,error:3,fatal:4},l=Object.assign({debug:(null===(r=console)||void 0===r?void 0:r.log)?console.log.bind(console):function(){},error:(null===(n=console)||void 0===n?void 0:n.log)?console.log.bind(console):function(){},info:(null===(o=console)||void 0===o?void 0:o.log)?console.log.bind(console):function(){},warn:(null===(i=console)||void 0===i?void 0:i.log)?console.log.bind(console):function(){}},console);function d(e){return e instanceof Element||e instanceof Document}const c={loglevel:"info",setLogLevel(e){if(!["debug","info","warn","error","fatal"].includes(e))throw new Error(`Invalid loglevel: ${e}`);this.loglevel=e},log(e,t,s=""){if(a[t]<a[this.loglevel])return;"error"===t||"fatal"===t?s=s||"color: maroon":"debug"===t&&(s=s||"color: green"),e instanceof Error?e=e.stack:d(e)&&(e=e.outerHTML);const r=s?"%c":"";"error"===t?l.error(`${r} ERROR: ${e}`,s):"warn"===t?l.warn(`${r} ${(new Date).toISOString()} WARNING: ${e}`,s):"fatal"===t?l.error(`${r} FATAL: ${e}`,s):"debug"===t?l.debug(`${r} ${(new Date).toISOString()} DEBUG: ${e}`,s):l.info(`${r} ${(new Date).toISOString()} INFO: ${e}`,s)},debug(e,t){this.log(e,"debug",t)},error(e,t){this.log(e,"error",t)},info(e,t){this.log(e,"info",t)},warn(e,t){this.log(e,"warn",t)},fatal(e,t){this.log(e,"fatal",t)}}},"./src/plugins/adhoc-views/adhoc-commands.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./src/headless/index.js"),n=(s("./src/shared/autocomplete/index.js"),s("./src/plugins/adhoc-views/templates/ad-hoc.js")),o=s("./src/shared/components/element.js"),i=s("./src/i18n/index.js"),a=s("./src/utils/html.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{Strophe:c,sizzle:u}=r.converse.env;class h extends o.CustomElement{static get properties(){return{alert:{type:String},alert_type:{type:String},commands:{type:Array},fetching:{type:Boolean},showform:{type:String},view:{type:String}}}render(){return(0,n.default)(this)}fetchCommands(e){return d((function*(){if(e.preventDefault(),!(e.target instanceof HTMLFormElement))return this.alert_type="danger",void(this.alert="Form could not be submitted");this.fetching=!0,delete this.alert_type,delete this.alert;const t=new FormData(e.target).get("jid").trim();let s;try{s=yield r.api.disco.supports(c.NS.ADHOC,t)}catch(e){r.log.error(e)}finally{this.fetching=!1}if(s)try{this.commands=yield r.api.adhoc.getCommands(t),this.view="list-commands"}catch(e){return r.log.error(e),this.alert_type="danger",this.alert=(0,i.__)("Sorry, an error occurred while looking for commands on that entity."),this.commands=[],void r.log.error(e)}else this.commands=[],this.alert_type="danger",this.alert=(0,i.__)("The specified entity doesn't support ad-hoc commands")})).call(this)}toggleCommandForm(e){return d((function*(){e.preventDefault();const t=e.target.getAttribute("data-command-node"),s=this.commands.filter((e=>e.node===t))[0],{jid:n}=s;if(this.showform===t)this.showform="",this.requestUpdate();else{try{const e=yield r.api.adhoc.fetchCommandForm(n,t);Object.assign(s,e)}catch(e){null===e?r.log.error(`Error: timeout while trying to execute command for ${n}`):(r.log.error(`Error while trying to execute command for ${n}`),r.log.error(e)),s.alert=(0,i.__)("An error occurred while trying to fetch the command form"),s.alert_type="danger"}this.showform=t}})).call(this)}executeAction(e){e.preventDefault();const t=e.target,s=t.getAttribute("data-action");["execute","next","prev","complete"].includes(s)?this.runCommand(t.form,s):r.log.error(`Unknown action: ${s}`)}clearCommand(e){delete e.alert,delete e.instructions,delete e.sessionid,delete e.alert_type,delete e.status,e.fields=[],e.actions=[],this.showform=""}runCommand(e,t){return d((function*(){const s=new FormData(e),n=s.get("command_jid").trim(),o=s.get("command_node").trim(),l=this.commands.filter((e=>e.node===o))[0];delete l.alert,this.requestUpdate();const d="prev"===t?[]:u(":input:not([type=button]):not([type=submit])",e).filter((e=>!["command_jid","command_node"].includes(e.getAttribute("name")))).map(a.getNameAndValue).filter((e=>e)),c=yield r.api.adhoc.runCommand(n,l.sessionid,l.node,t,d),{fields:h,status:m,note:f,instructions:p,actions:g}=c;if("error"===m)return l.status=m,l.alert_type="danger",l.alert=(0,i.__)("Sorry, an error occurred while trying to execute the command. See the developer console for details"),this.requestUpdate();"executing"===m?(Object.assign(l,{fields:h,instructions:p,actions:g,status:m}),l.alert=(0,i.__)("Executing"),l.alert_type="primary"):"completed"===m?(this.alert_type="primary",this.alert=(0,i.__)("Completed"),this.note=f,this.clearCommand(l)):(r.log.error(`Unexpected status for ad-hoc command: ${m}`),l.alert=(0,i.__)("Completed"),l.alert_type="primary"),this.requestUpdate()})).call(this)}cancel(e){return d((function*(){e.preventDefault(),this.showform="",this.requestUpdate();const t=new FormData(e.target.form),s=t.get("command_jid").trim(),n=t.get("command_node").trim(),o=this.commands.filter((e=>e.node===n))[0];delete o.alert,this.requestUpdate();const{status:a}=yield r.api.adhoc.runCommand(s,o.sessionid,o.node,"cancel",[]);"error"===a?(o.alert_type="danger",o.alert=(0,i.__)("An error occurred while trying to cancel the command. See the developer console for details")):"canceled"===a?(this.alert_type="",this.alert="",this.clearCommand(o)):(r.log.error(`Unexpected status for ad-hoc command: ${a}`),o.alert=(0,i.__)("Error: unexpected result"),o.alert_type="danger"),this.requestUpdate()})).call(this)}constructor(){super(),this.view="choose-service",this.fetching=!1,this.showform="",this.commands=[]}}r.api.elements.define("converse-adhoc-commands",h)},"./src/plugins/adhoc-views/index.js":(e,t,s)=>{"use strict";s.r(t);s("./src/plugins/adhoc-views/adhoc-commands.js");var r=s("./src/headless/index.js");r.converse.plugins.add("converse-adhoc-views",{dependencies:["converse-controlbox","converse-muc"],initialize(){r.api.settings.extend({allow_adhoc_commands:!0})}})},"./src/plugins/adhoc-views/templates/ad-hoc-command-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js"),o=s("./src/utils/html.js");const i={execute:(0,n.__)("Execute"),prev:(0,n.__)("Previous"),next:(0,n.__)("Next"),complete:(0,n.__)("Complete")},a={info:"primary",warn:"secondary",error:"danger"};const l=(e,t)=>{var s,l,d;const c=(0,n.__)("Cancel");var u;return r.html`<span><form class="converse-form">${t.alert?r.html`<div class="alert alert-${t.alert_type}" role="alert">${t.alert}</div>`:""} ${t.note?r.html`<div class="alert alert-${a[t.note.type||"info"]}" role="alert">${t.note.text}</div>`:""} ${"result"===t.type&&t.title?r.html`<div class="alert alert-info">${t.title}</div>`:""} ${"form"===t.type&&t.title?r.html`<h6>${t.title}</h6>`:""}<fieldset><input type="hidden" name="command_node" value="${t.node}"> <input type="hidden" name="command_jid" value="${t.jid}"> ${t.instructions?r.html`<p class="form-instructions">${t.instructions}</p>`:""} ${"result"===t.type?function(e){var t,s;return r.html`<table class="table"><thead class="thead-light">${null===(t=e.reported)||void 0===t?void 0:t.map((e=>r.html`<th scope="col" data-var="${e.var}">${e.label}</th>`))}</thead><tbody>${null===(s=e.items)||void 0===s?void 0:s.map((e=>r.html`<tr>${e.map((e=>r.html`<td data-var="${e.var}">${e.value}</td>`))}</tr>`))}</tbody></table>`}(t):""} ${null!==(u=null===(s=t.fields)||void 0===s?void 0:s.map((e=>(0,o.xFormField2TemplateResult)(e)),{domain:t.jid}))&&void 0!==u?u:""}</fieldset>${(null===(l=t.actions)||void 0===l?void 0:l.length)?r.html`<fieldset>${null===(d=t.actions)||void 0===d?void 0:d.map((t=>r.html`<input data-action="${t}" @click="${t=>e.executeAction(t)}" type="button" class="btn btn-primary" value="${i[t]}">`))} <input type="button" class="btn btn-secondary button-cancel" value="${c}" @click="${t=>e.cancel(t)}"></fieldset>`:""}</form></span>`}},"./src/plugins/adhoc-views/templates/ad-hoc-command.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/plugins/adhoc-views/templates/ad-hoc-command-form.js");const o=(e,t)=>r.html`<li class="room-item list-group-item"><div class="available-chatroom d-flex flex-row"><a class="open-room available-room w-100" @click="${t=>e.toggleCommandForm(t)}" data-command-node="${t.node}" data-command-jid="${t.jid}" data-command-name="${t.name}" title="${t.name}" href="#">${t.name||t.jid}</a></div>${t.node===e.showform?(0,n.default)(e,t):""}</li>`},"./src/plugins/adhoc-views/templates/ad-hoc.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/plugins/adhoc-views/templates/ad-hoc-command.js"),n=s("./src/i18n/index.js"),o=s("./src/plugins/muc-views/utils.js"),i=s("./node_modules/lit/index.js");const a=e=>{const t=(0,n.__)("On which entity do you want to run commands?"),s=(0,n.__)("Certain XMPP services and entities allow privileged users to execute ad-hoc commands on them."),a=(0,n.__)("Commands found"),l=(0,n.__)("List available commands"),d=(0,n.__)("XMPP Address"),c=(0,n.__)("No commands found");return i.html`${e.alert?i.html`<div class="alert alert-${e.alert_type}" role="alert">${e.alert}</div>`:""} ${e.note?i.html`<p class="form-help">${e.note}</p>`:""}<form class="converse-form" @submit="${e.fetchCommands}"><fieldset><label class="form-label">${t}<p class="form-help">${s}</p><converse-autocomplete .getAutoCompleteList="${o.getAutoCompleteList}" required placeholder="${d}" name="jid"></converse-autocomplete></label></fieldset><fieldset>${e.fetching?i.html`<converse-spinner></converse-spinner>`:i.html`<input type="submit" class="btn btn-primary" value="${l}">`}</fieldset>${"list-commands"===e.view?i.html`<fieldset><ul class="list-group"><li class="list-group-item active">${e.commands.length?a:c}:</li>${e.commands.map((t=>(0,r.default)(e,t)))}</ul></fieldset>`:""}</form>`}},"./src/plugins/bookmark-views/components/bookmark-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/plugins/bookmark-views/components/templates/form.js"),n=s("./src/shared/components/element.js"),o=s("./src/headless/index.js");class i extends n.CustomElement{static get properties(){return{jid:{type:String}}}willUpdate(e){const{chatboxes:t,bookmarks:s}=o._converse.state;e.has("jid")&&(this.model=t.get(this.jid),this.bookmark=s.get(this.jid))}render(){return(0,r.default)(this)}onBookmarkFormSubmitted(e){var t,s,r,n;e.preventDefault();const{bookmarks:i}=o._converse.state,a=e.target;i.setBookmark({jid:this.jid,autojoin:(null===(t=a.querySelector('input[name="autojoin"]'))||void 0===t?void 0:t.checked)||!1,name:null===(s=a.querySelector("input[name=name]"))||void 0===s?void 0:s.value,nick:null===(r=a.querySelector("input[name=nick]"))||void 0===r?void 0:r.value,password:null===(n=a.querySelector("input[name=password]"))||void 0===n?void 0:n.value}),this.closeBookmarkForm(e)}removeBookmark(e){var t;null===(t=this.bookmark)||void 0===t||t.destroy(),this.closeBookmarkForm(e)}closeBookmarkForm(e){e.preventDefault(),this.dispatchEvent(new Event("hide.bs.modal",{bubbles:!0,cancelable:!0}))}constructor(){super(),this.jid=null}}o.api.elements.define("converse-muc-bookmark-form",i);const a=i},"./src/plugins/bookmark-views/components/bookmarks-list.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lodash-es/debounce.js"),n=s("./node_modules/@converse/skeletor/dist/skeletor.js"),o=s("./src/headless/index.js"),i=s("./src/plugins/bookmark-views/components/templates/list.js"),a=s("./src/templates/spinner.js"),l=s("./src/shared/components/element.js");s("./src/plugins/bookmark-views/styles/bookmarks.scss");function d(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{initStorage:c}=o.u;class u extends l.CustomElement{initialize(){return(e=function*(){yield o.api.waitUntil("bookmarksInitialized");const{bookmarks:e,chatboxes:t}=o._converse.state;this.liveFilter=(0,r.default)((e=>this.model.set({text:e.target.value})),100),this.listenTo(e,"add",(()=>this.requestUpdate())),this.listenTo(e,"remove",(()=>this.requestUpdate())),this.listenTo(t,"add",(()=>this.requestUpdate())),this.listenTo(t,"remove",(()=>this.requestUpdate()));const s=`converse.bookmarks-list-model-${o._converse.session.get("bare_jid")}`;this.model=new n.Model({id:s}),c(this.model,s),this.listenTo(this.model,"change",(()=>this.requestUpdate())),this.model.fetch({success:()=>this.requestUpdate(),error:()=>this.requestUpdate()})},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){d(o,r,n,i,a,"next",e)}function a(e){d(o,r,n,i,a,"throw",e)}i(void 0)}))}).call(this);var e}render(){return o._converse.state.bookmarks&&this.model?(0,i.default)(this):(0,a.default)()}clearFilter(e){var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),this.model.set("text","")}}o.api.elements.define("converse-bookmarks",u)},"./src/plugins/bookmark-views/components/templates/form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js");const o=e=>{var t,s;const o=e.model.getDisplayName();var i;const a=null!==(i=null===(t=e.bookmark)||void 0===t?void 0:t.get("nick"))&&void 0!==i?i:e.model.get("nick"),l=(0,n.__)('Bookmark for "%1$s"',o),d=(0,n.__)("Would you like this groupchat to be automatically joined upon startup?"),c=(0,n.__)("Remove"),u=(0,n.__)("Name"),h=(0,n.__)("What should your nickname for this groupchat be?"),m=(0,n.__)("Password (for a protected groupchat)"),f=(0,n.__)("If the groupchat requires a password to enter, you can save it here. Note this is not intended to be a secure storage."),p=e.bookmark?(0,n.__)("Update"):(0,n.__)("Save");return r.html`<form class="converse-form chatroom-form" @submit="${t=>e.onBookmarkFormSubmitted(t)}"><legend>${l}</legend><fieldset><label class="form-label" for="converse_muc_bookmark_name">${u}</label> <input class="form-control" type="text" value="${o}" name="name" required="required" id="converse_muc_bookmark_name"></fieldset><fieldset><label class="form-label" for="converse_muc_bookmark_nick">${h}</label> <input class="form-control" type="text" name="nick" value="${a||""}" id="converse_muc_bookmark_nick"></fieldset><fieldset><label for="muc-password" class="form-label">${m}</label><p class="form-help">${f}</p><input type="password" name="password" class="form-control" id="muc-password"></fieldset><fieldset class="form-group form-check"><input class="form-check-input" id="converse_muc_bookmark_autojoin" type="checkbox" ?checked="${null===(s=e.bookmark)||void 0===s?void 0:s.get("autojoin")}" name="autojoin"> <label class="form-check-label" for="converse_muc_bookmark_autojoin">${d}</label></fieldset><fieldset><input class="btn btn-primary" type="submit" value="${p}"> ${e.bookmark?r.html`<input class="btn btn-secondary button-remove" type="button" value="${c}" @click="${t=>e.removeBookmark(t)}">`:""}</fieldset></form>`}},"./src/plugins/bookmark-views/components/templates/item.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/i18n/index.js"),n=s("./node_modules/lit/index.js"),o=s("./src/plugins/bookmark-views/utils.js");const i=e=>{const t=e.get("jid"),s=(0,r.__)("Unbookmark this groupchat"),i=(0,r.__)("Click to open this groupchat");return n.html`<div class="list-item room-item available-chatroom d-flex flex-row" data-room-jid="${t}"><a class="list-item-link open-room w-100" data-room-jid="${t}" title="${i}" @click="${o.openRoomViaEvent}">${e.getDisplayName()}</a> <a class="list-item-action remove-bookmark align-self-center ${e.get("bookmarked")?"button-on":""}" tabindex="0" data-room-jid="${t}" data-bookmark-name="${e.getDisplayName()}" title="${s}" @click="${o.removeBookmarkViaEvent}"><converse-icon class="fa fa-times" size="1em"></converse-icon></a></div>`}},"./src/plugins/bookmark-views/components/templates/list.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/plugins/bookmark-views/components/templates/item.js"),n=s("./src/i18n/index.js"),o=s("./src/headless/index.js"),i=s("./node_modules/lit/index.js");const a=e=>{const t=(0,n.__)("Filter"),s=e.model.get("text"),{bookmarks:a}=o._converse.state,l=s?a.filter((e=>((e,t)=>{var s,r;return(null===(s=e.get("name"))||void 0===s?void 0:s.includes(t))||(null===(r=e.get("jid"))||void 0===r?void 0:r.includes(t))})(e,s))):a;return i.html`<form class="converse-form bookmarks-filter"><div class="btn-group w-100"><input .value="${null!=s?s:""}" @keydown="${t=>e.liveFilter(t)}" class="form-control" placeholder="${t}"><converse-icon size="1em" class="fa fa-times clear-input ${s?"":"hidden"}" @click="${e.clearFilter}"></converse-icon></div></form><div class="list-container list-container--bookmarks"><div class="items-list bookmarks rooms-list">${l.map((e=>(0,r.default)(e)))}</div></div>`}},"./src/plugins/bookmark-views/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js"),n=(s("./src/plugins/bookmark-views/modals/bookmark-list.js"),s("./src/plugins/bookmark-views/modals/bookmark-form.js"),s("./src/plugins/bookmark-views/components/bookmark-form.js")),o=s("./src/plugins/bookmark-views/components/bookmarks-list.js"),i=s("./src/plugins/bookmark-views/mixins.js"),a=s("./src/plugins/bookmark-views/utils.js");s("./src/plugins/bookmark-views/styles/bookmarks.scss");r.converse.plugins.add("converse-bookmark-views",{dependencies:["converse-chatboxes","converse-muc","converse-muc-views"],initialize(){r.api.settings.extend({hide_open_bookmarks:!0});const e={removeBookmarkViaEvent:a.removeBookmarkViaEvent,MUCBookmarkForm:n.default,BookmarksView:o.default};Object.assign(r._converse,e),Object.assign(r._converse.exports,e),Object.assign(r._converse.exports.ChatRoomView.prototype,i.BookmarkableChatRoomView),r.api.listen.on("chatRoomViewInitialized",(e=>e.setBookmarkState()))}})},"./src/plugins/bookmark-views/mixins.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{BookmarkableChatRoomView:()=>o});var r=s("./src/headless/index.js");const{u:n}=r.converse.env,o={setBookmarkState(){const{bookmarks:e}=r._converse.state;if(e){e.where({jid:this.model.get("jid")}).length?this.model.save("bookmarked",!0):this.model.save("bookmarked",!1)}},renderBookmarkForm(){if(!this.bookmark_form){this.bookmark_form=new r._converse.state.MUCBookmarkForm({model:this.model,chatroomview:this});this.querySelector(".chatroom-body").insertAdjacentElement("beforeend",this.bookmark_form.el)}n.showElement(this.bookmark_form.el)},showBookmarkModal(e){null==e||e.preventDefault();const t=this.model.get("jid");r.api.modal.show("converse-bookmark-form-modal",{jid:t},e)}}},"./src/plugins/bookmark-views/modals/bookmark-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=(s("./src/plugins/bookmark-views/components/bookmark-form.js"),s("./src/plugins/modal/modal.js")),i=s("./src/i18n/index.js");class a extends o.default{renderModal(){return r.html`<converse-muc-bookmark-form class="muc-form-container" jid="${this.jid}"></converse-muc-bookmark-form>`}getModalTitle(){return(0,i.__)("Bookmark")}constructor(e){super(e),this.jid=null}}n.api.elements.define("converse-bookmark-form-modal",a)},"./src/plugins/bookmark-views/modals/bookmark-list.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),n=s("./src/plugins/modal/modal.js"),o=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");s("./src/plugins/bookmark-views/components/bookmarks-list.js");class a extends n.default{renderModal(){return o.html`<converse-bookmarks></converse-bookmarks>`}getModalTitle(){return(0,i.__)("Bookmarks")}}r.api.elements.define("converse-bookmark-list-modal",a)},"./src/plugins/bookmark-views/styles/bookmarks.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/bookmark-views/styles/bookmarks.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/bookmark-views/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{openRoomViaEvent:()=>a,removeBookmarkViaEvent:()=>i});var r=s("./src/headless/index.js"),n=s("./src/i18n/index.js");function o(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function i(e){return(t=function*(){e.preventDefault();const t=e.currentTarget,s=t.getAttribute("data-bookmark-name"),o=t.getAttribute("data-room-jid");(yield r.api.confirm((0,n.__)('Are you sure you want to remove the bookmark "%1$s"?',s)))&&r._converse.state.bookmarks.where({jid:o}).forEach((e=>e.destroy()))},function(){var e=this,s=arguments;return new Promise((function(r,n){var i=t.apply(e,s);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)}))})();var t}function a(e){e.preventDefault();const{Strophe:t}=r.converse.env,s=e.currentTarget,n=s.textContent,o=s.getAttribute("data-room-jid"),i={name:n||t.unescapeNode(t.getNodeFromJid(o))||o};r.api.rooms.open(o,i,!0)}},"./src/plugins/chatboxviews/container.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=class{add(e,t){this.views[e]=t}get(e){return this.views[e]}xget(e){return this.keys().filter((t=>t!==e)).reduce(((e,t)=>(e[t]=this.views[t],e)),{})}getAll(){return Object.values(this.views)}keys(){return Object.keys(this.views)}remove(e){delete this.views[e]}map(e){return Object.values(this.views).map(e)}forEach(e){return Object.values(this.views).forEach(e)}filter(e){return Object.values(this.views).filter(e)}closeAllChatBoxes(){return Promise.all(Object.values(this.views).map((e=>e.close({name:"closeAllChatBoxes"}))))}constructor(){this.views={},this.el=null}}},"./src/plugins/chatboxviews/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js"),n=(s("./src/plugins/chatboxviews/view.js"),s("./src/plugins/chatboxviews/container.js")),o=s("./src/plugins/chatboxviews/utils.js");s("./src/plugins/chatboxviews/styles/chats.scss");r.converse.plugins.add("converse-chatboxviews",{dependencies:["converse-chatboxes","converse-vcard"],initialize(){r.api.promises.add(["chatBoxViewsInitialized"]),r.api.settings.extend({animate:!0});const e=new n.default;Object.assign(r._converse,{chatboxviews:e}),Object.assign(r._converse.state,{chatboxviews:e}),r.api.listen.on("chatBoxesInitialized",(()=>{r._converse.state.chatboxes.on("destroy",(t=>e.remove(t.get("jid"))))})),r.api.listen.on("cleanup",(()=>Object.assign(r._converse,{chatboxviews:null}))),r.api.listen.on("cleanup",(()=>delete r._converse.state.chatboxviews)),r.api.listen.on("clearSession",(()=>e.closeAllChatBoxes())),r.api.listen.on("chatBoxViewsInitialized",o.calculateViewportHeightUnit),window.addEventListener("resize",o.calculateViewportHeightUnit),Object.assign(r.converse,{insertInto(t){const s=e.el;if(s&&!t.contains(s))t.insertAdjacentElement("afterbegin",s);else if(!s)throw new Error("Cannot insert non-existing #conversejs element into the DOM")}})}})},"./src/plugins/chatboxviews/styles/chats.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/chatboxviews/styles/chats.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/chatboxviews/templates/chats.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/repeat.js"),o=s("./src/headless/index.js"),i=s("./src/shared/chat/utils.js");const{CONTROLBOX_TYPE:a,CHATROOMS_TYPE:l,HEADLINES_TYPE:d,CONNECTION_STATUS:c}=o.constants;function u(e){const t="overlayed"===o.api.settings.get("view_mode")&&e.get("hidden");return e.get("type")===a||!e.get("hidden")&&!e.get("closed")&&!t}const h=()=>{const{chatboxes:e,connfeedback:t}=o._converse.state,s="overlayed"===o.api.settings.get("view_mode"),h=(0,i.isMobileViewport)(),m=o.api.connection.get(),f=!(null==m?void 0:m.connected)||!(null==m?void 0:m.authenticated)||(null==m?void 0:m.disconnecting),p=t.get("connection_status"),g=["CONNECTED","CONNECTING","AUTHENTICATING","RECONNECTING"].includes(c[p]);return r.html`${!f&&s?r.html`<converse-minimized-chats class="col-auto"></converse-minimized-chats>`:""} ${(0,n.repeat)(e.filter(u),(e=>e.get("jid")),(e=>{const t=e.get("width"),n=!h&&s&&t?`width: ${t}px`:r.nothing;return e.get("type")===a?s&&e.get("closed")?r.html`<converse-controlbox-toggle class="col-auto"></converse-controlbox-toggle>`:r.html`<converse-controlbox id="controlbox" class="col-auto chatbox ${f&&!g?"logged-out":""}" style="${n}"></converse-controlbox>`:e.get("type")===l?r.html`<converse-muc jid="${e.get("jid")}" class="col-auto chatbox chatroom" style="${n}"></converse-muc>`:e.get("type")===d?r.html`<converse-headlines jid="${e.get("jid")}" class="col-auto chatbox headlines" style="${n}"></converse-headlines>`:r.html`<converse-chat jid="${e.get("jid")}" class="col-auto chatbox" style="${n}"></converse-chat>`}))}`}},"./src/plugins/chatboxviews/utils.js":(e,t,s)=>{"use strict";function r(){const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}s.r(t),s.d(t,{calculateViewportHeightUnit:()=>r})},"./src/plugins/chatboxviews/view.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/plugins/chatboxviews/templates/chats.js");class i extends n.CustomElement{initialize(){this.model=r._converse.state.chatboxes,this.listenTo(this.model,"add",(()=>this.requestUpdate())),this.listenTo(this.model,"change:closed",(()=>this.requestUpdate())),this.listenTo(this.model,"change:hidden",(()=>this.requestUpdate())),this.listenTo(this.model,"change:jid",(()=>this.requestUpdate())),this.listenTo(this.model,"destroy",(()=>this.requestUpdate())),this.listenTo(r._converse,"connected",(()=>this.requestUpdate())),this.listenTo(r._converse,"reconnected",(()=>this.requestUpdate())),this.listenTo(r._converse,"disconnected",(()=>this.requestUpdate()));const e=r.api.settings.get();this.listenTo(e,"change:view_mode",(()=>this.requestUpdate())),this.listenTo(e,"change:singleton",(()=>this.requestUpdate()));document.querySelector("body").classList.add(`converse-${r.api.settings.get("view_mode")}`),r.api.trigger("chatBoxViewsInitialized")}render(){return(0,o.default)()}}r.api.elements.define("converse-chats",i)},"./src/plugins/chatview/bottom-panel.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/plugins/chatview/templates/bottom-panel.js"),i=s("./src/plugins/chatview/utils.js");s("./src/plugins/chatview/message-form.js"),s("./src/plugins/chatview/styles/chat-bottom-panel.scss");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}}class d extends n.CustomElement{static get properties(){return{model:{type:Object}}}connectedCallback(){var e=this,t=()=>super.connectedCallback;return l((function*(){t().call(e),yield this.initialize(),this.requestUpdate()})).call(this)}initialize(){return l((function*(){yield this.model.initialized,this.listenTo(this.model,"change:num_unread",(()=>this.requestUpdate())),this.listenTo(this.model,"emoji-picker-autocomplete",this.autocompleteInPicker),this.addEventListener("emojipickerblur",(()=>this.querySelector(".chat-textarea").focus()))})).call(this)}render(){return this.model?(0,o.default)({model:this.model,viewUnreadMessages:e=>this.viewUnreadMessages(e)}):""}viewUnreadMessages(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),this.model.ui.set({scrolled:!1})}onDragOver(e){e.preventDefault()}clearMessages(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),(0,i.clearMessages)(this.model)}autocompleteInPicker(e){return l((function*(){const{target:t,value:s}=e;yield r.api.emojis.initialize();const n=this.querySelector("converse-emoji-picker");if(n){n.state.set({ac_position:t.selectionStart,autocompleting:s,query:s});const e=this.querySelector("converse-emoji-dropdown");null==e||e.dropdown.show()}})).call(this)}constructor(){super(),this.model=null}}r.api.elements.define("converse-chat-bottom-panel",d)},"./src/plugins/chatview/chat.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/headless/index.js"),n=(s("./src/plugins/chatview/heading.js"),s("./src/plugins/chatview/bottom-panel.js"),s("./src/shared/chat/baseview.js")),o=s("./src/i18n/index.js"),i=s("./src/plugins/dragresize/mixin.js"),a=s("./src/plugins/chatview/templates/chat.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{ACTIVE:d}=r.constants;class c extends((0,i.default)(n.default)){initialize(){return(e=function*(){const{chatboxviews:e,chatboxes:t}=r._converse.state;e.add(this.jid,this),this.model=t.get(this.jid),this.listenTo(this.model,"change:requesting",(()=>this.requestUpdate())),this.listenTo(this.model,"change:hidden",(()=>!this.model.get("hidden")&&this.afterShown())),this.listenTo(this.model,"change:show_help_messages",(()=>this.requestUpdate())),this.listenTo(this.model,"contact:add",(()=>this.requestUpdate())),this.listenTo(this.model,"contact:change",(()=>this.requestUpdate())),this.listenTo(this.model,"contact:destroy",(()=>this.requestUpdate())),document.addEventListener("visibilitychange",(()=>this.onWindowStateChanged())),yield this.model.messages.fetched,!this.model.get("hidden")&&this.afterShown(),r.api.trigger("chatBoxViewInitialized",this)},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}).call(this);var e}render(){return(0,a.default)(this)}getHelpMessages(){return[`<strong>/clear</strong>: ${(0,o.__)("Remove messages")}`,`<strong>/close</strong>: ${(0,o.__)("Close this chat")}`,`<strong>/me</strong>: ${(0,o.__)("Write in the third person")}`,`<strong>/help</strong>: ${(0,o.__)("Show this menu")}`]}afterShown(){this.model.setChatState(d),this.model.clearUnreadMsgCounter(),this.maybeFocus()}constructor(...e){var t,s,r;super(...e),r=200,(s="length")in(t=this)?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r}}r.api.elements.define("converse-chat",c)},"./src/plugins/chatview/heading.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/i18n/index.js"),i=s("./src/plugins/chatview/templates/chat-head.js");s("./src/shared/modals/user-details.js"),s("./src/plugins/chatview/styles/chat-head.scss");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}}const{Strophe:d}=r.converse.env;class c extends n.CustomElement{static get properties(){return{jid:{type:String}}}initialize(){var e;const{chatboxes:t}=r._converse.state;this.model=t.get(this.jid),this.listenTo(this.model,"change:status",(()=>this.requestUpdate())),this.listenTo(this.model,"vcard:add",(()=>this.requestUpdate())),this.listenTo(this.model,"vcard:change",(()=>this.requestUpdate())),this.model.contact&&this.listenTo(this.model.contact,"destroy",(()=>this.requestUpdate())),null===(e=this.model.rosterContactAdded)||void 0===e||e.then((()=>{this.listenTo(this.model.contact,"change:nickname",(()=>this.requestUpdate())),this.requestUpdate()})),this.requestUpdate()}render(){return(0,i.default)(this)}showUserDetailsModal(e){var t;e.preventDefault(),(null===(t=this.model)||void 0===t?void 0:t.contact)instanceof r._converse.exports.Profile?r.api.modal.show("converse-profile-modal",{model:this.model},e):r.api.modal.show("converse-user-details-modal",{model:this.model},e)}close(e){e.preventDefault(),this.model.close()}getHeadingButtons(){return l((function*(){const e=[{a_class:"show-user-details-modal",handler:e=>this.showUserDetailsModal(e),i18n_text:(0,o.__)("Details"),i18n_title:(0,o.__)("See more information about this person"),icon_class:"fa-id-card",name:"details",standalone:!1}],t=r._converse.session.get("domain");if(t&&(yield r.api.disco.supports(d.NS.BLOCKING,t))){(yield r.api.blocklist.get()).get(this.model.get("jid"))?e.push({a_class:"unblock-user",handler:e=>l((function*(){e.preventDefault();(yield r.api.confirm((0,o.__)("Unblock user"),[(0,o.__)("Are you sure you want to unblock this user?")]))&&r.api.blocklist.remove(this.model.get("jid"))})).call(this),i18n_text:(0,o.__)("Unblock this user"),i18n_title:(0,o.__)("Allow this user to send you messages"),icon_class:"fa-check",name:"unblock",standalone:!1}):e.push({a_class:"block-user",handler:e=>l((function*(){e.preventDefault();if(yield r.api.confirm((0,o.__)("Block user"),[(0,o.__)("Are you sure you want to prevent %1$s from contacting you further?",this.model.getDisplayName())])){const e=this.model.get("jid");r.api.blocklist.add(e),r.api.contacts.remove(e,!0),this.model.close()}})).call(this),i18n_text:(0,o.__)("Block this user"),i18n_title:(0,o.__)("Prevent this user from sending you any further messages"),icon_class:"fa-trash",name:"block",standalone:!1})}r.api.settings.get("singleton")||e.push({a_class:"close-chatbox-button",handler:e=>this.close(e),i18n_text:(0,o.__)("Close"),i18n_title:(0,o.__)("Close and end this conversation"),icon_class:"fa-times",name:"close",standalone:"overlayed"===r.api.settings.get("view_mode")});const{chatboxviews:s}=r._converse.state,n=s.get(this.getAttribute("jid"));return n?r._converse.api.hook("getHeadingButtons",n,e):e})).call(this)}constructor(){super(),this.jid=null}}r.api.elements.define("converse-chat-heading",c)},"./src/plugins/chatview/index.js":(e,t,s)=>{"use strict";s.r(t);s("./src/plugins/chatboxviews/index.js"),s("./src/shared/chat/chat-content.js"),s("./src/shared/chat/help-messages.js"),s("./src/shared/chat/toolbar.js");var r=s("./src/plugins/chatview/chat.js"),n=s("./src/headless/index.js"),o=s("./src/plugins/chatview/utils.js");s("./src/plugins/chatview/styles/index.scss");const{Strophe:i}=n.converse.env;n.converse.plugins.add("converse-chatview",{dependencies:["converse-dragresize","converse-chatboxviews","converse-chat","converse-disco","converse-modal"],initialize(){n.api.settings.extend({fetch_url_headers:!1,allowed_audio_domains:null,allowed_image_domains:null,allowed_video_domains:null,auto_focus:!0,debounced_content_rendering:!0,filter_url_query_params:null,image_urls_regex:null,message_limit:0,muc_hats:["xep317"],render_media:!0,show_message_avatar:!0,show_retraction_warning:!0,show_send_button:!0,show_toolbar:!0,time_format:"HH:mm",use_system_emojis:!0,visible_toolbar_buttons:{call:!1,clear:!0,emoji:!0,spoiler:!1}});const e={ChatBoxView:r.default,ChatView:r.default};Object.assign(n._converse,e),Object.assign(n._converse.exports,e),n.api.listen.on("connected",(()=>n.api.disco.own.features.add(i.NS.SPOILER))),n.api.listen.on("chatBoxClosed",(e=>(0,o.clearHistory)(e.get("jid"))))}})},"./src/plugins/chatview/message-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./src/headless/index.js"),n=s("./src/log/index.js"),o=s("./src/i18n/index.js"),i=s("./src/shared/components/element.js"),a=s("./src/plugins/chatview/templates/message-form.js"),l=s("./src/plugins/chatview/utils.js");function d(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function c(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){d(o,r,n,i,a,"next",e)}function a(e){d(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{ACTIVE:u,COMPOSING:h}=r.constants;class m extends i.CustomElement{static get properties(){return{model:{type:Object}}}initialize(){return c((function*(){yield this.model.initialized,this.listenTo(this.model,"change:composing_spoiler",(()=>this.requestUpdate())),this.listenTo(this.model,"change:draft",(()=>this.requestUpdate())),this.listenTo(this.model,"change:hidden",(()=>{if(this.model.get("hidden")){var e,t;const s=null===(e=this.querySelector(".spoiler-hint"))||void 0===e?void 0:e.value,n=null===(t=this.querySelector(".chat-textarea"))||void 0===t?void 0:t.value;r.u.safeSave(this.model,{draft:n,draft_hint:s})}})),this.handleEmojiSelection=({detail:e})=>{this.model.get("jid")===e.jid&&this.insertIntoTextArea(e.value,e.autocompleting,e.ac_position)},document.addEventListener("emojiSelected",this.handleEmojiSelection),this.requestUpdate()})).call(this)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("emojiSelected",this.handleEmojiSelection)}render(){return(0,a.default)(this)}insertIntoTextArea(e,t=!1,s,n=" "){const o=this.querySelector(".chat-textarea");if(t)o.value=s&&"string"==typeof t?o.value.replace(new RegExp(t,"g"),((r,o)=>o==s-t.length?e+n:r)):e;else{let t=o.value;t&&t[t.length-1]!==n&&(t+=n),o.value=t+e+n}const i=new Event("change",{bubbles:!1,cancelable:!0});o.dispatchEvent(i),r.u.placeCaretAtEnd(o)}onEscapePressed(e){const t=this.model.messages.findLastIndex("correcting"),s=t>=0?this.model.messages.at(t):null;s&&(e.preventDefault(),s.save("correcting",!1))}onPaste(e){if(0!==e.clipboardData.files.length)return e.stopPropagation(),e.preventDefault(),void this.model.sendFiles(Array.from(e.clipboardData.files));const t=this.querySelector(".chat-textarea");if(!t)return void n.default.error("onPaste: could not find textarea to paste in to!");var s;e.preventDefault(),e.stopPropagation();const r=null!==(s=t.value)&&void 0!==s?s:"",o=e.clipboardData.getData("text/plain"),i=t.selectionStart,a=r.substring(0,i),l=r.substring(t.selectionEnd),d=a.endsWith(" ")||0===a.length?"":" ",c=l.startsWith(" ")||0===l.length?"":" ";this.model.save({draft:`${a}${d}${o}${c}${l}`});const u=a.length+d.length+o.length+c.length;setTimeout((()=>t.setSelectionRange(u,u)),0)}onDrop(e){0!=e.dataTransfer.files.length&&(e.preventDefault(),this.model.sendFiles(e.dataTransfer.files))}onKeyUp(e){this.model.trigger("event:keyup",{ev:e})}onKeyDown(e){const{keycodes:t}=r.converse;if(!(e.ctrlKey||e.shiftKey&&e.key===t.ENTER||[t.SHIFT,t.META,t.ESCAPE,t.ALT].includes(e.key))){if(!e.shiftKey&&!e.altKey&&!e.metaKey){const t=e.target;if(e.key===r.converse.keycodes.TAB){const s=r.u.getCurrentWord(t,null,/(:.*?:)/g);s.startsWith(":")&&(e.preventDefault(),e.stopPropagation(),this.model.trigger("emoji-picker-autocomplete",{target:t,value:s}))}else{if(e.key===r.converse.keycodes.FORWARD_SLASH)return;if(e.key===r.converse.keycodes.ESCAPE)return this.onEscapePressed(e);if(e.key===r.converse.keycodes.ENTER)return this.onFormSubmitted(e);if(e.key!==r.converse.keycodes.UP_ARROW||t.selectionEnd){if(e.key===r.converse.keycodes.DOWN_ARROW&&t.selectionEnd===t.value.length&&this.model.get("correcting"))return this.model.editLaterMessage()}else{if(!this.querySelector(".chat-textarea").value||this.model.get("correcting"))return this.model.editEarlierMessage()}}}this.model.get("chat_state")!==h&&this.model.setChatState(h)}}onFormSubmitted(e){return c((function*(){var t,s;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e);const{chatboxviews:n}=r._converse.state,i=this.querySelector(".chat-textarea"),a=i.value.trim();if(r.api.settings.get("message_limit")&&a.length>r.api.settings.get("message_limit")||!a.replace(/\s/g,"").length)return;if(!r.api.connection.get().authenticated){const e=(0,o.__)("Sorry, the connection has been lost, and your message could not be sent");return r.api.alert("error",(0,o.__)("Error"),e),void r.api.connection.reconnect()}let d,c={};this.model.get("composing_spoiler")&&(c=this.querySelector("form.chat-message-form input.spoiler-hint"),d=c.value),r.u.addClass("disabled",i),i.setAttribute("disabled","disabled"),null===(s=this.querySelector("converse-emoji-dropdown"))||void 0===s||s.dropdown.hide();const h=yield(0,l.parseMessageForCommands)(this.model,a),m=h?null:yield this.model.sendMessage({body:a,spoiler_hint:d});if((h||m)&&(c.value="",i.value="",i.style.height="auto",this.model.save({draft:""})),"overlayed"===r.api.settings.get("view_mode")){n.get(this.model.get("jid")).querySelector(".chat-content__messages").parentElement.style.display="none"}if(i.removeAttribute("disabled"),r.u.removeClass("disabled",i),"overlayed"===r.api.settings.get("view_mode")){n.get(this.model.get("jid")).querySelector(".chat-content__messages").parentElement.style.display=""}this.model.setChatState(u,{silent:!0}),i.focus()})).call(this)}constructor(){super(),this.model=null}}r.api.elements.define("converse-message-form",m)},"./src/plugins/chatview/styles/chat-bottom-panel.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/chatview/styles/chat-bottom-panel.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/chatview/styles/chat-head.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/chatview/styles/chat-head.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/chatview/styles/index.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/chatview/styles/index.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/chatview/templates/bottom-panel.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/i18n/index.js"),n=s("./node_modules/lit/index.js");const o=e=>{const t=(0,r.__)("You have unread messages");return n.html`${e.model.ui.get("scrolled")&&e.model.get("num_unread")?n.html`<div class="new-msgs-indicator" @click="${t=>e.viewUnreadMessages(t)}">▼ ${t} ▼</div>`:""}<converse-message-form .model="${e.model}"></converse-message-form>`}},"./src/plugins/chatview/templates/chat-head.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/until.js"),o=s("./src/headless/index.js"),i=s("./src/i18n/index.js"),a=s("./src/shared/chat/utils.js");const{HEADLINES_TYPE:l}=o.constants,d=e=>{var t,s;const{jid:d,status:c,type:u}=e.model.attributes,h=e.getHeadingButtons(),m=t=>e.showUserDetailsModal(t),f=(0,i.__)("The User's Profile Image"),p=e.model.getDisplayName(),g=r.html`<span title="${f}"><converse-avatar .model="${e.model.contact||e.model}" class="avatar chat-msg__avatar" name="${p}" nonce="${null===(s=e.model.contact)||void 0===s||null===(t=s.vcard)||void 0===t?void 0:t.get("vcard_updated")}" height="40" width="40"></converse-avatar></span>`;return r.html`<div class="chatbox-title ${c?"":"chatbox-title--no-desc"}"><div class="chatbox-title--row">${o._converse.api.settings.get("singleton")?"":r.html`<converse-controlbox-navback jid="${d}"></converse-controlbox-navback>`} ${u!==l?r.html`<a class="show-msg-author-modal" @click="${m}">${g}</a>`:""}<div class="chatbox-title__text" title="${d}" role="heading" aria-level="2">${u!==l?r.html`<a class="user show-msg-author-modal" @click="${m}">${p}</a>`:p}</div></div><div class="chatbox-title__buttons btn-toolbar g-0">${(0,n.until)((0,a.getStandaloneButtons)(h),"")} ${(0,n.until)((0,a.getDropdownButtons)(h),"")}</div></div>${c?r.html`<p class="chat-head__desc">${c}</p>`:""}`}},"./src/plugins/chatview/templates/chat.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=(s("./src/i18n/index.js"),s("./src/shared/chat/utils.js"));const{CHATROOMS_TYPE:i}=n.constants,a=e=>{var t;const s=e.getHelpMessages(),a=e.model.get("show_help_messages"),l="overlayed"===n.api.settings.get("view_mode"),d=(0,o.getChatStyle)(e.model),c=null===(t=e.model.contact)||void 0===t?void 0:t.get("requesting");return r.html`<div class="flyout box-flyout" style="${d||r.nothing}">${l?r.html`<converse-dragresize></converse-dragresize>`:""} ${e.model?r.html`<converse-chat-heading jid="${e.model.get("jid")}" class="chat-head chat-head-chatbox row g-0"></converse-chat-heading><div class="chat-body">${c?r.html`<converse-contact-approval-alert .contact="${e.model.contact}"></converse-contact-approval-alert>`:""}<div class="chat-content ${e.model.get("show_send_button")?"chat-content-sendbutton":""}" aria-live="polite"><converse-chat-content .model="${e.model}"></converse-chat-content>${a?r.html`<div class="chat-content__help"><converse-chat-help .model="${e.model}" .messages="${s}" ?hidden="${!a}" type="info" chat_type="${i}"></converse-chat-help></div>`:""}</div><converse-chat-bottom-panel .model="${e.model}" class="bottom-panel"></converse-chat-bottom-panel></div>`:""}</div>`}},"./src/plugins/chatview/templates/message-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/i18n/index.js"),n=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js"),i=s("./src/plugins/chatview/utils.js");const a=e=>{const t=e.model.get("composing_spoiler"),s=t?(0,r.__)("Hidden message"):(0,r.__)("Message"),a=(0,r.__)("Optional hint"),l=n.api.settings.get("message_limit"),d=n.api.settings.get("visible_toolbar_buttons").call,c=n.api.settings.get("visible_toolbar_buttons").emoji,u=n.api.settings.get("show_send_button"),h=n.api.settings.get("visible_toolbar_buttons").spoiler,m=n.api.settings.get("show_toolbar");var f,p;return o.html`<form class="chat-message-form" @submit="${t=>e.onFormSubmitted(t)}">${m?o.html`<converse-chat-toolbar class="btn-toolbar chat-toolbar no-text-select" .model="${e.model}" ?composing_spoiler="${t}" ?show_call_button="${d}" ?show_emoji_button="${c}" ?show_send_button="${u}" ?show_spoiler_button="${h}" ?show_toolbar="${m}" message_limit="${l}"></converse-chat-toolbar>`:""} <input type="text" enterkeyhint="send" placeholder="${a||""}" .value="${null!==(f=e.model.get("draft_hint"))&&void 0!==f?f:""}" @change="${t=>n.u.safeSave(e.model,{draft_hint:t.target.value})}" class="${t?"":"hidden"} spoiler-hint"> <textarea autofocus type="text" enterkeyhint="send" .value="${null!==(p=e.model.get("draft"))&&void 0!==p?p:""}" @drop="${t=>e.onDrop(t)}" @input="${i.resetElementHeight}" @keydown="${t=>e.onKeyDown(t)}" @keyup="${t=>e.onKeyUp(t)}" @paste="${t=>e.onPaste(t)}" @change="${t=>n.u.safeSave(e.model,{draft:t.target.value})}" class="chat-textarea ${e.model.get("correcting")?"correcting":""} ${u?"chat-textarea-send-button":""} ${t?"spoiler":""}" placeholder="${s}"></textarea></form>`}},"./src/plugins/chatview/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{clearHistory:()=>a,clearMessages:()=>l,parseMessageForCommands:()=>d,resetElementHeight:()=>c});var r=s("./src/i18n/index.js"),n=s("./src/headless/index.js");function o(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function i(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var i=e.apply(t,s);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)}))}}function a(e){location.hash===`converse/chat?jid=${e}`&&history.pushState(null,"",window.location.pathname)}function l(e){return i((function*(){(yield n.api.confirm((0,r.__)("Confirm"),(0,r.__)("Are you sure you want to clear the messages from this conversation?")))&&(yield e.clearMessages())}))()}function d(e,t){return i((function*(){const s=t.replace(/^\s*/,"").match(/^\/(.*)\s*$/);if(s){let o=!1;if(o=yield n.api.hook("parseMessageForCommands",{model:e,text:t},o),o)return!0;if("clear"===s[1])return l(e),!0;if("close"===s[1]){var r;const{chatboxviews:t}=n._converse.state;return null===(r=t.get(e.get("jid")))||void 0===r||r.close(),!0}if("help"===s[1])return e.set({show_help_messages:!1},{silent:!0}),e.set({show_help_messages:!0}),!0}return!1}))()}function c(e){var t;if(!(null===(t=window.CSS)||void 0===t?void 0:t.supports("field-sizing","content")))if(e.target.value){const t=e.target.scrollHeight+"px";e.target.style.height!=t&&(e.target.style.height="auto",e.target.style.height=t)}else e.target.style=""}},"./src/plugins/controlbox/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),n=s("./src/plugins/controlbox/model.js");function o(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{u:i}=r.converse.env,a={controlbox:{open(){return(e=function*(){yield r.api.waitUntil("chatBoxesFetched");let e=yield r.api.chatboxes.get("controlbox");return e||(e=yield r.api.chatboxes.create("controlbox",{},n.default)),i.safeSave(e,{closed:!1}),e},function(){var t=this,s=arguments;return new Promise((function(r,n){var i=e.apply(t,s);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)}))})();var e},get:()=>r._converse.state.chatboxviews.get("controlbox")}}},"./src/plugins/controlbox/buttons.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/plugins/controlbox/templates/buttons.js");s("./src/plugins/controlbox/styles/buttons.scss");class i extends n.CustomElement{initialize(){const{chatboxes:e}=r._converse.state;this.model=e.get("controlbox")}render(){return(0,o.default)(this)}showUserSettingsModal(e){null==e||e.preventDefault(),r.api.modal.show("converse-user-settings-modal",{model:r._converse.state.xmppstatus,_converse:r._converse},e)}closeControlBox(e){null==e||e.preventDefault();const t=r._converse.state.chatboxviews.get("controlbox");null==t||t.close()}}r.api.elements.define("converse-controlbox-buttons",i);const a=i},"./src/plugins/controlbox/constants.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{CONNECTION_STATUS_CSS_CLASS:()=>o});var r=s("./src/headless/index.js");s("./src/i18n/index.js");const{Strophe:n}=r.converse.env,o=Object.fromEntries([[n.Status.ERROR,"danger"],[n.Status.CONNECTING,"info"],[n.Status.CONNFAIL,"danger"],[n.Status.AUTHENTICATING,"info"],[n.Status.AUTHFAIL,"danger"],[n.Status.CONNECTED,"info"],[n.Status.DISCONNECTED,"danger"],[n.Status.DISCONNECTING,"warning"],[n.Status.ATTACHED,"info"],[n.Status.REDIRECT,"info"],[n.Status.RECONNECTING,"warning"]])},"./src/plugins/controlbox/controlbox.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/shared/constants.js"),i=s("./src/plugins/dragresize/mixin.js"),a=s("./src/plugins/controlbox/templates/controlbox.js");s("./src/plugins/controlbox/navbar.js");const{LOGOUT:l}=r.constants;class d extends((0,i.default)(n.CustomElement)){initialize(){this.setModel();const{chatboxviews:e}=r._converse.state;e.add("controlbox",this),this.model.get("connected")&&void 0===this.model.get("closed")&&this.model.set("closed",!r.api.settings.get("show_controlbox_by_default")),this.viewportMediaQuery=window.matchMedia(`(max-width: ${o.MOBILE_CUTOFF}px)`),this.renderOnViewportChange=()=>this.requestUpdate(),r.api.trigger("controlBoxInitialized",this)}connectedCallback(){super.connectedCallback(),this.viewportMediaQuery.addEventListener("change",this.renderOnViewportChange)}disconnectedCallback(){super.disconnectedCallback(),r._converse.state.chatboxviews.remove("controlbox",this),this.viewportMediaQuery.removeEventListener("change",this.renderOnViewportChange)}setModel(){this.model=r._converse.state.chatboxes.get("controlbox"),this.listenTo(r._converse.state.connfeedback,"change:connection_status",(()=>this.requestUpdate())),this.listenTo(this.model,"change:active-form",(()=>this.requestUpdate())),this.listenTo(this.model,"change:connected",(()=>this.requestUpdate())),this.requestUpdate()}render(){return"overlayed"===r.api.settings.get("view_mode")?this.model&&!this.model.get("closed")?(0,a.default)(this):"":(0,a.default)(this)}close(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e);const s=r.api.connection.get();if(("closeAllChatBoxes"!==(null==e?void 0:e.name)||s.disconnection_cause===l&&!r.api.settings.get("show_controlbox_by_default"))&&!r.api.settings.get("sticky_controlbox")&&"overlayed"===r.api.settings.get("view_mode"))return r.u.safeSave(this.model,{closed:!0}),r.api.trigger("controlBoxClosed",this),this}}r.api.elements.define("converse-controlbox",d);const c=d},"./src/plugins/controlbox/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js"),n=s("./src/plugins/controlbox/loginform.js"),o=s("./src/plugins/controlbox/model.js"),i=s("./src/plugins/controlbox/toggle.js"),a=s("./src/plugins/controlbox/controlbox.js"),l=s("./src/plugins/controlbox/api.js"),d=s("./src/plugins/controlbox/utils.js");s("./src/shared/components/brand-heading.js"),s("./src/plugins/chatview/index.js"),s("./src/plugins/controlbox/navback.js"),s("./src/plugins/controlbox/buttons.js"),s("./src/plugins/controlbox/styles/_controlbox.scss");const{CONTROLBOX_TYPE:c}=r.constants;r.converse.plugins.add("converse-controlbox",{dependencies:["converse-modal","converse-chatboxes","converse-chat","converse-rosterview","converse-chatview"],enabled:e=>!e.api.settings.get("singleton"),initialize(){r.api.settings.extend({allow_logout:!0,allow_user_trust_override:!0,default_domain:void 0,locked_domain:void 0,show_connection_url_input:!1,show_controlbox_by_default:!1,sticky_controlbox:!1}),r.api.promises.add("controlBoxInitialized",!1),Object.assign(r.api,l.default);const e={ControlBox:o.default,ControlBoxView:a.default,ControlBoxToggle:i.default,LoginForm:n.default};Object.assign(r._converse,e),Object.assign(r._converse.exports,e),r.api.chatboxes.registry.add(c,o.default),r.api.listen.on("chatBoxesFetched",d.onChatBoxesFetched),r.api.listen.on("clearSession",d.clearSession),r.api.listen.on("will-reconnect",d.disconnect),r.api.waitUntil("chatBoxViewsInitialized").then(d.addControlBox).catch((e=>r.log.fatal(e)))}})},"./src/plugins/controlbox/loginform.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/plugins/controlbox/utils.js"),i=s("./src/plugins/controlbox/templates/loginform.js");s("./src/plugins/controlbox/styles/loginform.scss");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{Strophe:l}=r.converse.env,{ANONYMOUS:d}=r.constants;class c extends n.CustomElement{initialize(){const e=r.api.settings.get();this.listenTo(e,"change:show_connection_url_input",(()=>this.requestUpdate())),this.listenTo(r._converse.state.connfeedback,"change",(()=>this.requestUpdate())),this.handler=()=>this.requestUpdate()}connectedCallback(){super.connectedCallback(),r.api.settings.listen.on("change",this.handler)}disconnectedCallback(){super.disconnectedCallback(),r.api.settings.listen.not("change",this.handler)}render(){return(0,i.default)(this)}onLoginFormSubmitted(e){return(t=function*(){if(null==e||e.preventDefault(),r.api.settings.get("authentication")===d){const e=r._converse.session.get("jid");return this.connect(e)}const t=e.target;(0,o.validateJID)(t)&&((0,o.updateSettingsWithFormData)(t),r.api.settings.get("bosh_service_url")||r.api.settings.get("websocket_url")||(yield this.discoverConnectionMethods(t)),r.api.settings.get("bosh_service_url")||r.api.settings.get("websocket_url")?this.connect():r.api.settings.set("show_connection_url_input",!0))},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}).call(this);var t}discoverConnectionMethods(e){if(!r.api.settings.get("discover_connection_methods"))return;const t=new FormData(e).get("jid");if(t instanceof File)throw new Error('Found file instead of string for "jid" field in form');const s=l.getDomainFromJid(t);return r.api.connection.init(t),r.api.connection.get().discoverConnectionMethods(s)}connect(e){var t;["converse/login","converse/register"].includes(location.hash)&&history.pushState(null,"",window.location.pathname),null===(t=r.api.connection.get())||void 0===t||t.reset(),r.api.user.login(e)}}r.api.elements.define("converse-login-form",c);const u=c},"./src/plugins/controlbox/modals/about.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),i=s("./src/plugins/modal/modal.js");class a extends i.default{getModalTitle(){return(0,o.__)("About Converse")}renderModal(){return r.html`<p>Converse is an open-source <a href="https://xmpp.org" target="_blank" rel="noopener">XMPP</a> chat app written in JavaScript.</p><p>Just like the XMPP protocol, Converse is built with extensibility in mind.</p><p>Because it is open source, integrators and developers can use it to add chat functionality to their websites.</p><p>Converse is also <a href="https://conversejs.org/docs/html/configuration.html" target="_blank" rel="noopener">configurable</a>, built with modern web technologies and <a href="https://conversejs.org/docs/html/plugin_development.html" target="_blank" rel="noopener">extensible with plugins</a>. It has different modes, which means it can be a full page app, an embedded chat widget, or an overlayed chat box. For a list of supported features and XMPP extensions, please see the <a href="https://github.com/conversejs/converse.js?tab=readme-ov-file#features" target="_blank" rel="noopener">README</a>.</p><p>Converse is translated into over 30 languages. You can <a target="_blank" rel="nofollow" href="https://hosted.weblate.org/projects/conversejs/#languages">translate</a> it into your own language.</p><p>Converse was created by <a target="_blank" rel="nofollow" href="https://opkode.com">JC Brand</a>. You can <a target="_blank" rel="nofollow" href="https://opkode.com/contact.html">hire me</a> for customizations, support or to build your next project.</p><p>If you're interested in sponsoring Converse, please visit: <a href="https://github.com/sponsors/jcbrand" target="_blank" rel="noopener">Github</a>, <a href="https://www.patreon.com/jcbrand" target="_blank" rel="noopener">Patreon</a>, <a href="https://liberapay.com/jcbrand" target="_blank" rel="noopener">Liberapay</a> or <a href="https://opkode.com/contact.html" target="_blank" rel="noopener">contact us</a>.</p>`}}n.api.elements.define("converse-about-modal",a)},"./src/plugins/controlbox/model.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/index.js");const{dayjs:o}=n.converse.env,{CONTROLBOX_TYPE:i}=n.constants;class a extends r.Model{defaults(){return{bookmarked:!1,box_id:"controlbox",chat_state:void 0,closed:!n.api.settings.get("show_controlbox_by_default"),num_unread:0,time_opened:o(0).valueOf(),type:i,url:""}}validate(e){return e.type===i?"embedded"===n.api.settings.get("view_mode")&&n.api.settings.get("singleton")?"Controlbox not relevant in embedded view mode":void 0:n._converse.state.ChatBox.prototype.validate.call(this,e)}maybeShow(e){return e||"controlbox"!==this.get("id")?n._converse.state.ChatBox.prototype.maybeShow.call(this,e):this}onReconnection(){this.save("connected",!0)}}const l=a},"./src/plugins/controlbox/navback.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/plugins/controlbox/templates/navback.js"),n=s("./src/shared/components/element.js"),o=s("./src/headless/index.js");class i extends n.CustomElement{static get properties(){return{jid:{type:String}}}render(){return(0,r.default)(this.jid)}constructor(){super(),this.jid=null}}o.api.elements.define("converse-controlbox-navback",i);const a=i},"./src/plugins/controlbox/navbar.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/plugins/controlbox/templates/navbar.js");s("./src/plugins/controlbox/modals/about.js");class i extends n.CustomElement{render(){return(0,o.default)(this)}openAboutDialog(e){e.preventDefault(),r.api.modal.show("converse-about-modal")}}r.api.elements.define("converse-controlbox-navbar",i);const a=i},"./src/plugins/controlbox/styles/_controlbox.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/controlbox/styles/_controlbox.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/controlbox/styles/buttons.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/controlbox/styles/buttons.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/controlbox/styles/loginform.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/controlbox/styles/loginform.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/controlbox/templates/buttons.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/i18n/index.js");const i=e=>{const t=e.model.get("connected"),s=n.api.settings.get("show_client_info")||n.api.settings.get("allow_adhoc_commands");return r.html`<div class="btn-toolbar g-0" role="toolbar"><div class="btn-group" role="group">${t&&s?function(e){const t=(0,o.__)("Show details about this chat client");return r.html`<a class="controlbox-heading__btn show-client-info align-self-center" title="${t}" @click="${e.showUserSettingsModal}"><converse-icon class="fa fa-cog" size="1em"></converse-icon></a>`}(e):""} ${n.api.settings.get("sticky_controlbox")?"":function(e){return r.html`<a class="controlbox-heading__btn close align-self-center" @click="${t=>e.closeControlBox(t)}"><converse-icon class="fa fa-times" size="1em"></converse-icon></a>`}(e)}</div></div>`}},"./src/plugins/controlbox/templates/controlbox.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/shared/chat/utils.js");const{Strophe:i}=n.converse.env,{ANONYMOUS:a}=n.constants;const l=e=>{const t=(0,o.getChatStyle)(e.model);return r.html`<div class="flyout box-flyout" style="${t||r.nothing}"><converse-dragresize></converse-dragresize>${e.model.get("connected")?r.html`<converse-user-profile></converse-user-profile><div class="controlbox-pane"><converse-headlines-feeds-list class="controlbox-section"></converse-headlines-feeds-list><div id="chatrooms" class="controlbox-section"><converse-rooms-list></converse-rooms-list></div>${n.api.settings.get("authentication")===a?"":r.html`<div id="converse-roster" class="controlbox-section"><converse-roster></div>`}</div>`:function(e){const t="fullscreen"===n.api.settings.get("view_mode"),s=n._converse.state.connfeedback.get("connection_status"),o=[i.Status.RECONNECTING,i.Status.CONNECTING].includes(s),a=n.api.settings.get("view_mode"),l=n.api.settings.get("show_background");return r.html`${l&&"fullscreen"===a?r.html`<converse-bg></converse-bg>`:""}<converse-controlbox-buttons class="controlbox-padded"></converse-controlbox-buttons><div class="controlbox-pane d-flex flex-column justify-content-between">${t?r.html`<converse-controlbox-navbar></converse-controlbox-navbar>`:""}<converse-brand-logo></converse-brand-logo>${o?r.html`<converse-spinner class="vertically-centered fade-in"></converse-spinner>`:"register"===e.model.get("active-form")?r.html`<converse-registration-form class="fade-in rounded"></converse-registration-form>`:r.html`<converse-login-form class="fade-in rounded"></converse-login-form>`} ${t?r.html`<converse-footer></converse-footer>`:""}</div>`}(e)}</div>`}},"./src/plugins/controlbox/templates/loginform.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p,tplConnectionURLInput:()=>m});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/templates/spinner.js"),i=s("./src/plugins/controlbox/constants.js"),a=s("./src/i18n/index.js");s("./src/shared/components/brand-heading.js"),s("./src/shared/components/footer.js");const{ANONYMOUS:l,EXTERNAL:d,LOGIN:c,PREBIND:u,CONNECTION_STATUS:h}=n.constants;function m(){const e=(0,a.__)("Connection URL"),t=(0,a.__)("HTTP or websocket URL that is used to connect to your XMPP server"),s=(0,a.__)("e.g. wss://example.org/xmpp-websocket");return r.html`<div class="mb-3 fade-in"><label for="converse-conn-url" class="form-label">${e}</label><p class="form-help instructions">${t}</p><input required id="converse-conn-url" class="form-control" type="url" name="connection-url" placeholder="${s}"></div>`}function f(){const e=n.api.settings.get("authentication"),t=(0,a.__)("Log in"),s=(0,a.__)("XMPP Address"),o=n.api.settings.get("locked_domain"),i=n.api.settings.get("default_domain"),l=(o||i)&&(0,a.__)("Username")||(0,a.__)("user@domain"),c=n.api.settings.get("allow_user_trust_override");var u,h;return r.html`<div class="mb-3"><label for="converse-login-jid" class="form-label">${s}:</label><div class="${o?"input-group":""}"><input id="converse-login-jid" ?autofocus="${!!n.api.settings.get("auto_focus")}" value="${null!==(u=n.api.settings.get("jid"))&&void 0!==u?u:""}" required class="form-control" type="text" name="jid" placeholder="${l}"> ${o?(h=o,r.html`<span class="input-group-text addon" id="basic-addon2">@${h}</span>`):""}</div></div>${e!==d?function(){const e=(0,a.__)("Password");var t;return r.html`<div class="mb-3"><label for="converse-login-password" class="form-label">${e}</label> <input id="converse-login-password" class="form-control" required="required" value="${null!==(t=n.api.settings.get("password"))&&void 0!==t?t:""}" type="password" name="password" placeholder="${e}"></div>`}():""} ${n.api.settings.get("show_connection_url_input")?m():""} ${c?function(e){const t=(0,a.__)("To improve performance, we cache your data in this browser. Uncheck this box if this is a public computer or if you want your data to be deleted when you log out. It's important that you explicitly log out, otherwise not all cached data might be deleted. Please note, when using an untrusted device, OMEMO encryption is NOT available."),s=(0,a.__)("This is a trusted device");return r.html`<div class="form-check mb-2 login-trusted"><input id="converse-login-trusted" type="checkbox" class="form-check-input" name="trusted" ?checked="${e}"> <label for="converse-login-trusted" class="form-check-label login-trusted__desc">${s}</label><converse-popover title="${(0,a.__)("Info")}" text="${t}"></converse-popover></div>`}("off"!==c):""}<div class="text-center mb-3"><button class="btn btn-primary px-5 mx-auto" type="submit">${t}</button></div><converse-register-link></converse-register-link>`}const p=e=>{const{connfeedback:t}=n._converse.state,s=t.get("connection_status");var m;const p=null!==(m=null===i.CONNECTION_STATUS_CSS_CLASS||void 0===i.CONNECTION_STATUS_CSS_CLASS?void 0:i.CONNECTION_STATUS_CSS_CLASS[s])&&void 0!==m?m:"none",g=t.get("message");return r.html`<form id="converse-login" class="converse-form" method="post" @submit="${e.onLoginFormSubmitted}"><div class="alert ${`alert-${p}`} conn-feedback mb-3 ${g?"":"d-none"}" role="alert"><span class="feedback-message">${g}</span></div>${["CONNECTED","CONNECTING","AUTHENTICATING","RECONNECTING"].includes(h[s])?r.html`<div class="text-center my-3">${(0,o.default)()}</div>`:function(){const e=n.api.settings.get("authentication"),t=(0,a.__)("Disconnected"),s=(0,a.__)("Click here to log in anonymously");return r.html`${e==c||e==d?f():""} ${e==l?r.html`<div class="text-center mb-3"><button class="btn btn-primary login-anon px-5 mx-auto" type="submit">${s}</button></div>`:""} ${e==u?r.html`<p class="alert alert-warning">${t}</p>`:""}`}()}</form>`}},"./src/plugins/controlbox/templates/navback.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/plugins/controlbox/utils.js");const o=e=>r.html`<converse-icon size="1em" class="fa fa-arrow-left" @click="${()=>(0,n.navigateToControlBox)(e)}"></converse-icon>`},"./src/plugins/controlbox/templates/navbar.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=e=>r.html`<nav class="navbar navbar-expand-lg"><div class="container-fluid"><div class="collapse navbar-collapse"><ul class="navbar-nav ms-auto mb-2 mb-lg-0"><li class="nav-item"><a class="nav-link" href="#" @click="${e.openAboutDialog}">About</a></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href="https://github.com/conversejs/converse.js">Github</a></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href="https://conversejs.org/docs/html">Documentation</a></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href="https://opkode.com/contact.html">Contact</a></li></ul></div></div></nav>`},"./src/plugins/controlbox/templates/toggle.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js"),o=s("./src/plugins/controlbox/utils.js");const i=e=>{var t;return r.html`<button type="button" class="btn toggle-controlbox ${(null===(t=e.model)||void 0===t?void 0:t.get("closed"))?"":"hidden"}" @click="${e=>(0,o.showControlBox)(e)}"><span class="toggle-feedback">${(0,n.__)("Chat")}</span></button>`}},"./src/plugins/controlbox/toggle.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/plugins/controlbox/templates/toggle.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class a extends n.CustomElement{connectedCallback(){var e,t=this,s=()=>super.connectedCallback;return(e=function*(){s().call(t),yield r.api.waitUntil("initialized");const{chatboxes:e}=r._converse.state;this.model=e.get("controlbox"),this.listenTo(this.model,"change:closed",(()=>this.requestUpdate())),this.requestUpdate()},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))}).call(this)}render(){return(0,o.default)(this)}}r.api.elements.define("converse-controlbox-toggle",a);const l=a},"./src/plugins/controlbox/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{addControlBox:()=>a,clearSession:()=>u,disconnect:()=>c,navigateToControlBox:()=>d,onChatBoxesFetched:()=>h,showControlBox:()=>l,updateSettingsWithFormData:()=>m,validateJID:()=>f});var r=s("./src/headless/index.js"),n=s("./src/i18n/index.js");const{Strophe:o,u:i}=r.converse.env;function a(){var e;const t=r._converse.state.chatboxes.add(new r._converse.exports.ControlBox({id:"controlbox"}));return null===(e=r._converse.state.chatboxviews.get("controlbox"))||void 0===e||e.setModel(),t}function l(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e);const s=r._converse.state.chatboxes.get("controlbox")||a();i.safeSave(s,{closed:!1})}function d(e){l();const t=r._converse.state.chatboxes.get(e);i.safeSave(t,{hidden:!0})}function c(){var e;const t=null===(e=r._converse.state.chatboxes)||void 0===e?void 0:e.get("controlbox");t&&i.safeSave(t,{connected:!1})}function u(){const{chatboxviews:e}=r._converse.state,t=null==e?void 0:e.get("controlbox");t&&(i.safeSave(t.model,{connected:!1}),(null==t?void 0:t.controlbox_pane)&&(t.controlbox_pane.remove(),delete t.controlbox_pane))}function h(){(r._converse.state.chatboxes.get("controlbox")||a()).save({connected:!0})}function m(e,t={}){const s=new FormData(e),n=s.get("connection-url");(null==n?void 0:n.startsWith("ws"))?t.websocket_url=n:(null==n?void 0:n.startsWith("http"))&&(t.bosh_service_url=n);let i=s.get("jid");if(r.api.settings.get("locked_domain")){const e="@"+r.api.settings.get("locked_domain");i.endsWith(e)&&(i=i.substr(0,i.length-e.length)),i=o.escapeNode(i)+e}else r.api.settings.get("default_domain")&&!i.includes("@")&&(i=i+"@"+r.api.settings.get("default_domain"));t.jid=i,t.password=s.get("password"),r.api.settings.set(t),r._converse.state.config.save({trusted:!!s.get("trusted")})}function f(e){const t=e.querySelector("input[name=jid]");return!t.value||r.api.settings.get("locked_domain")||r.api.settings.get("default_domain")||i.isValidJID(t.value)?(t.setCustomValidity(""),!0):(t.setCustomValidity((0,n.__)("Please enter a valid XMPP address")),!1)}},"./src/plugins/disco-views/disco-browser.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),i=s("./src/shared/components/element.js"),a=s("./src/plugins/disco-views/templates/disco-browser.js");s("./src/plugins/disco-views/styles/disco-browser.scss");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class d extends i.CustomElement{static get properties(){return{_entity_jids:{type:Array,state:!0}}}render(){return(0,a.default)(this)}handleBreadcrumbClick(e,t){e.preventDefault(),this._entity_jids=[...this._entity_jids.slice(0,t+1)]}queryEntity(e){e.preventDefault();const t=e.target,s=new FormData(t);this._entity_jids=[s.get("entity_jid").trim()]}renderItem(e){return r.html`${e.get("name")?`${e.get("name")} <${e.get("jid")}>`:`${e.get("jid")}`}`}addEntityJID(e,t){e.preventDefault(),this._entity_jids=[...this._entity_jids,t.get("jid")]}getDiscoInfo(){return(e=function*(){var e,t;const s=this._entity_jids[this._entity_jids.length-1],r=yield n.api.disco.entities.get(s,!0);yield r.waitUntilItemsFetched;const i=r.get("error");if(i)return["item-not-found","remote-server-not-found"].includes(i)?{error:(0,o.__)("No service found with that XMPP address")}:{error:(0,o.__)("Error: %1$s",i)};const a=(null===(e=r.features)||void 0===e?void 0:e.map((e=>e.get("var"))))||[],l=r.identities||[],d=r.get("items")||[],c=yield Promise.all(d.map((e=>n.api.disco.entities.get(e))));return{features:(null===(t=a.toSorted)||void 0===t?void 0:t.call(a))||a,identities:l,items:c}},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}).call(this);var e}constructor(){super(),this._entity_jids=[n._converse.session.get("domain")]}}n.api.elements.define("converse-disco-browser",d);const c=d},"./src/plugins/disco-views/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js");s("./src/plugins/disco-views/disco-browser.js");r.converse.plugins.add("converse-disco-views",{dependencies:["converse-disco"],enabled:()=>!0,initialize(){}})},"./src/plugins/disco-views/styles/disco-browser.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/disco-views/styles/disco-browser.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/disco-views/templates/disco-browser.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/until.js"),o=(s("./src/headless/index.js"),s("./src/i18n/index.js")),i=s("./src/plugins/rosterview/utils.js");const a=e=>{const t=e.getDiscoInfo(),s=e._entity_jids[e._entity_jids.length-1];return r.html`<h4 class="mt-3 text-center">${(0,o.__)("Discover Services")}</h4><form class="mt-2 mb-3" @submit="${t=>e.queryEntity(t)}"><div class="d-flex w-100"><converse-autocomplete .getAutoCompleteList="${i.getJIDsAutoCompleteList}" class="w-100" min_chars="2" name="entity_jid" position="below" required value="${s}"></converse-autocomplete><button type="submit" class="btn btn-outline-secondary">${(0,o.__)("Inspect")}</button></div></form><nav aria-label="breadcrumb"><ol class="breadcrumb"><li>${(0,o.__)("Service")}: </li>${e._entity_jids.map(((t,s)=>r.html`<li class="breadcrumb-item"><a href="#" @click="${t=>e.handleBreadcrumbClick(t,s)}">${t}</a></li>`))}</ol></nav>${(0,n.until)(t.then((()=>"")),r.html`<converse-spinner></converse-spinner>`)} ${(0,n.until)(t.then((({error:e})=>e?r.html`<div class="alert alert-danger" role="alert">${e}</div>`:"")),"")}<div class="container">${(0,n.until)(t.then((({identities:e})=>(null==e?void 0:e.length)?r.html`<h5 class="mt-3">${(0,o.__)("Identities")}</h5><ul class="items-list identities">${e.map((e=>r.html`<li class="list-item"><ul class="list-unstyled">${e.get("name")?r.html`<li><strong>${(0,o.__)("Name")}:</strong> ${e.get("name")}</li>`:""} ${e.get("type")?r.html`<li><strong>${(0,o.__)("Type")}:</strong> ${e.get("type")}</li>`:""} ${e.get("category")?r.html`<li><strong>${(0,o.__)("Category")}:</strong> ${e.get("category")}</li>`:""}</ul></li>`))}</ul>`:"")),"")} ${(0,n.until)(t.then((({items:t})=>(null==t?void 0:t.length)?r.html`<h5 class="mt-3">${(0,o.__)("Items")}</h5><ul class="items-list disco-items">${t.map((t=>r.html`<li class="list-item"><a @click="${s=>e.addEntityJID(s,t)}">${e.renderItem(t)}</a></li>`))}</ul>`:"")),"")} ${(0,n.until)(t.then((({features:e})=>(null==e?void 0:e.length)?r.html`<h5 class="mt-3">${(0,o.__)("Features")}</h5><ul class="items-list features">${e.map((e=>r.html`<li class="list-item">${e}</li>`))}</ul>`:"")),"")}</div>`}},"./src/plugins/dragresize/components/dragresize.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/plugins/dragresize/templates/dragresize.js");class i extends n.CustomElement{render(){return(0,o.default)()}}r.api.elements.define("converse-dragresize",i)},"./src/plugins/dragresize/index.js":(e,t,s)=>{"use strict";s.r(t);s("./src/plugins/dragresize/components/dragresize.js");var r=s("./src/plugins/dragresize/utils.js"),n=s("./src/headless/index.js");n.converse.plugins.add("converse-dragresize",{initialize(){n.api.settings.extend({allow_dragresize:!0,dragresize_top_margin:0}),n.api.listen.on("registeredGlobalEventHandlers",r.registerGlobalEventHandlers),n.api.listen.on("unregisteredGlobalEventHandlers",r.unregisterGlobalEventHandlers),n.api.listen.on("startDiagonalResize",r.dragresizeOverIframeHandler),n.api.listen.on("startHorizontalResize",r.dragresizeOverIframeHandler),n.api.listen.on("startVerticalResize",r.dragresizeOverIframeHandler),n.api.listen.on("shouldDestroyOnClose",r.shouldDestroyOnClose)}})},"./src/plugins/dragresize/mixin.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/log/index.js"),n=s("./src/headless/index.js"),o=s("./src/plugins/dragresize/utils.js");function i(e){return class extends e{updated(e){super.updated(e),e.has("model")&&this.model&&this.initDragResize()}initDragResize(){"overlayed"==n.api.settings.get("view_mode")&&this.setupDragResize()}setupDragResize(){const e=n.u.debounce((()=>this.setDimensions()),250);window.addEventListener("resize",e),this.listenTo(this.model,"destroy",(()=>window.removeEventListener("resize",e)));const t=this.querySelector(".box-flyout");this.model.set(this.getDefaultDimensions());const s=window.getComputedStyle(t),r=s["min-width"],o=s["min-height"];return this.model.set("min_width",r.endsWith("px")?Number(r.replace(/px$/,"")):0),this.model.set("min_height",o.endsWith("px")?Number(o.replace(/px$/,"")):0),this.prev_pageY=0,this.prev_pageX=0,this.height=this.model.get("height"),this.width=this.model.get("width"),this}getDefaultDimensions(){const e=this.querySelector(".box-flyout");if(this.model.get("height")||this.model.get("width")){const t=e.getAttribute("style");e.removeAttribute("style");const s={default_height:e.offsetHeight,default_width:e.offsetWidth};return e.setAttribute("style",t),s}{const t=window.getComputedStyle(e);return{default_height:parseInt(t.height.replace(/px$/,""),10),default_width:parseInt(t.width.replace(/px$/,""),10)}}}setDimensions(){"overlayed"===n.api.settings.get("view_mode")&&(this.setChatBoxWidth(this.model.get("width")),this.setChatBoxHeight(this.model.get("height")))}resizeChatBox(e){let t;const s=(0,o.getResizingDirection)();if(0===s.indexOf("top")){var i;const s=null!==(i=n.api.settings.get("dragresize_top_margin"))&&void 0!==i?i:0,o=window.innerHeight-s;if(t=e.pageY-this.prev_pageY,t){const s=this.height-t;r.default.debug("------------"),r.default.debug(`window.innerHeight: ${window.innerHeight}`),r.default.debug(`max_height: ${o}`),r.default.debug(`new_height: ${s}`),r.default.debug(`diff: ${t}`),this.height=this.height-t>(this.model.get("min_height")||0)?s<=o?s:o:this.model.get("min_height"),this.prev_pageY=e.pageY,this.setChatBoxHeight(this.height)}}s.includes("left")&&(t=this.prev_pageX-e.pageX,t&&(this.width=this.width+t>(this.model.get("min_width")||0)?this.width+t:this.model.get("min_width"),this.prev_pageX=e.pageX,this.setChatBoxWidth(this.width)))}setChatBoxHeight(e){const t=this.querySelector(".box-flyout");null!==t&&(t.style.height=e?(0,o.applyDragResistance)(e,this.model.get("default_height"))+"px":"")}setChatBoxWidth(e){const t=e?(0,o.applyDragResistance)(e,this.model.get("default_width"))+"px":"";this.style.width=t;const s=this.querySelector(".box-flyout");null!==s&&(s.style.width=t)}constructor(...e){super(e),this.model=null,n.api.settings.listen.on("change:view_mode",(()=>this.initDragResize()))}}}},"./src/plugins/dragresize/templates/dragresize.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/plugins/dragresize/utils.js");const o=()=>r.html`<div class="dragresize dragresize-top" @mousedown="${n.onStartVerticalResize}"></div><div class="dragresize dragresize-topleft" @mousedown="${n.onStartDiagonalResize}"></div><div class="dragresize dragresize-left" @mousedown="${n.onStartHorizontalResize}"></div>`},"./src/plugins/dragresize/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{applyDragResistance:()=>m,dragresizeOverIframeHandler:()=>a,getResizingDirection:()=>d,onMouseMove:()=>f,onMouseUp:()=>p,onStartDiagonalResize:()=>h,onStartHorizontalResize:()=>u,onStartVerticalResize:()=>c,registerGlobalEventHandlers:()=>o,shouldDestroyOnClose:()=>g,unregisterGlobalEventHandlers:()=>i});var r=s("./src/headless/index.js");const{u:n}=r.converse.env;function o(){document.addEventListener("mousemove",f),document.addEventListener("mouseup",p)}function i(){document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",p)}function a(e){const t=Array.from(document.getElementsByTagName("iframe"));for(const s of t)e.addEventListener("mousedown",(()=>{s.style.pointerEvents="none"}),{once:!0}),e.addEventListener("mouseup",(()=>{s.style.pointerEvents="initial"}),{once:!0})}const l={};function d(){return l.direction}function c(e,t=!0){if(!r.api.settings.get("allow_dragresize"))return!0;e.preventDefault();const s=n.ancestor(e.target,".box-flyout"),o=window.getComputedStyle(s),i=s.parentElement;i.height=parseInt(o.height.replace(/px$/,""),10),l.chatbox=i,l.direction="top",i.prev_pageY=e.pageY,t&&r.api.trigger("startVerticalResize",i)}function u(e,t=!0){if(!r.api.settings.get("allow_dragresize"))return!0;e.preventDefault();const s=n.ancestor(e.target,".box-flyout"),o=window.getComputedStyle(s),i=s.parentElement;i.width=parseInt(o.width.replace(/px$/,""),10),l.chatbox=i,l.direction="left",i.prev_pageX=e.pageX,t&&r.api.trigger("startHorizontalResize",i)}function h(e){u(e,!1),c(e,!1),l.direction="topleft",r.api.trigger("startDiagonalResize",this)}function m(e,t){if(void 0===e)return;if(void 0===t)return e;return e!==t&&Math.abs(e-t)<10?t:e}function f(e){if(!l.chatbox||!r.api.settings.get("allow_dragresize"))return!0;e.preventDefault(),l.chatbox.resizeChatBox(e)}function p(e){if(!l.chatbox||!r.api.settings.get("allow_dragresize"))return!0;e.preventDefault();const t=l.chatbox.model.get("default_width"),s=l.chatbox.model.get("default_height"),o=m(l.chatbox.height,s),i=m(l.chatbox.width,t);o!==s||i!==t?n.safeSave(l.chatbox.model,{height:o,width:i}):n.safeSave(l.chatbox.model,{height:void 0,width:void 0}),delete l.chatbox,delete l.direction}function g(e,t){return!e.get("height")&&!e.get("width")&&t}},"./src/plugins/fullscreen/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js");s("./src/plugins/fullscreen/styles/fullscreen.scss");const{isUniView:n}=r.u;r.converse.plugins.add("converse-fullscreen",{enabled:()=>n(),initialize(){r.api.settings.extend({chatview_avatar_height:50,chatview_avatar_width:50,hide_open_bookmarks:!0,show_controlbox_by_default:!0,sticky_controlbox:!0})}})},"./src/plugins/fullscreen/styles/fullscreen.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/fullscreen/styles/fullscreen.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/headlines-view/feed-list.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{HeadlinesFeedsList:()=>l});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/plugins/headlines-view/templates/feeds-list.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{HEADLINES_TYPE:a}=r.constants;class l extends n.CustomElement{initialize(){this.model=r._converse.state.chatboxes,this.listenTo(this.model,"add",(e=>this.renderIfHeadline(e))),this.listenTo(this.model,"remove",(e=>this.renderIfHeadline(e))),this.listenTo(this.model,"destroy",(e=>this.renderIfHeadline(e))),this.requestUpdate()}render(){return(0,o.default)(this)}renderIfHeadline(e){return(null==e?void 0:e.get("type"))===a&&this.requestUpdate()}openHeadline(e){return(t=function*(){e.preventDefault();const t=e.target.getAttribute("data-headline-jid");(yield r.api.headlines.get(t)).maybeShow(!0)},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))})();var t}}r.api.elements.define("converse-headlines-feeds-list",l)},"./src/plugins/headlines-view/heading.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/i18n/index.js"),i=s("./src/plugins/headlines-view/templates/chat-head.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class d extends n.CustomElement{static get properties(){return{jid:{type:String}}}initialize(){return(e=function*(){this.model=r._converse.state.chatboxes.get(this.jid),yield this.model.initialized,this.requestUpdate()},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}).call(this);var e}render(){return(0,i.default)(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){l(e,t,s[t])}))}return e}({},this.model.toJSON(),{display_name:this.model.getDisplayName(),heading_buttons_promise:this.getHeadingButtons()}))}getHeadingButtons(){const e=[];return r.api.settings.get("singleton")||e.push({a_class:"close-chatbox-button",handler:e=>this.close(e),i18n_text:(0,o.__)("Close"),i18n_title:(0,o.__)("Close these announcements"),icon_class:"fa-times",name:"close",standalone:"overlayed"===r.api.settings.get("view_mode")}),r._converse.api.hook("getHeadingButtons",this,e)}close(e){e.preventDefault(),this.model.close()}constructor(){super(),this.jid=null}}r.api.elements.define("converse-headlines-heading",d)},"./src/plugins/headlines-view/index.js":(e,t,s)=>{"use strict";s.r(t);s("./src/plugins/chatview/index.js");var r=s("./src/plugins/headlines-view/view.js"),n=s("./src/plugins/headlines-view/feed-list.js"),o=s("./src/headless/index.js");s("./src/plugins/headlines-view/styles/headlines.scss"),s("./src/plugins/headlines-view/styles/headlines-head.scss");o.converse.plugins.add("converse-headlines-view",{dependencies:["converse-headlines","converse-dragresize","converse-chatview"],initialize(){const e={HeadlinesFeedView:r.default,HeadlinesFeedsList:n.HeadlinesFeedsList,HeadlinesPanel:n.HeadlinesFeedsList};Object.assign(o._converse,e),Object.assign(o._converse.exports,e)}})},"./src/plugins/headlines-view/styles/headlines-head.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/headlines-view/styles/headlines-head.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/headlines-view/styles/headlines.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/headlines-view/styles/headlines.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/headlines-view/templates/chat-head.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),n=s("./node_modules/lit/index.js"),o=s("./node_modules/lit/directives/until.js"),i=s("./src/shared/chat/utils.js");const a=e=>n.html`<div class="chatbox-title ${e.status?"":"chatbox-title--no-desc"}"><div class="chatbox-title--row">${r._converse.api.settings.get("singleton")?"":n.html`<converse-controlbox-navback jid="${e.jid}"></converse-controlbox-navback>`}<div class="chatbox-title__text" title="${e.jid}">${e.display_name}</div></div><div class="chatbox-title__buttons btn-toolbar g-0">${(0,o.until)((0,i.getDropdownButtons)(e.heading_buttons_promise),"")} ${(0,o.until)((0,i.getStandaloneButtons)(e.heading_buttons_promise),"")}</div></div>${e.status?n.html`<p class="chat-head__desc">${e.status}</p>`:""}`},"./src/plugins/headlines-view/templates/feeds-list.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/i18n/index.js"),n=s("./node_modules/lit/index.js"),o=s("./src/headless/index.js");const{HEADLINES_TYPE:i}=o.constants;const a=e=>{const t=e.model.filter((e=>e.get("type")===i)),s=(0,r.__)("Announcements");return n.html`<div class="controlbox-section" id="headline"><div class="d-flex controlbox-padded ${t.length?"":"hidden"}"><span class="w-100 controlbox-heading controlbox-heading--headline" role="heading" aria-level="3">${s}</span></div></div><div class="list-container list-container--headline ${t.length?"":"hidden"}"><div class="items-list rooms-list headline-list">${t.map((t=>function(e,t){const s=(0,r.__)("Click to open this server message");return n.html`<div class="list-item controlbox-padded d-flex flex-row" data-headline-jid="${t.get("jid")}"><a class="list-item-link open-headline available-room w-100" data-headline-jid="${t.get("jid")}" title="${s}" @click="${t=>e.openHeadline(t)}" href="#">${t.get("jid")}</a></div>`}(e,t)))}</div></div>`}},"./src/plugins/headlines-view/templates/headlines.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/shared/chat/utils.js");s("./src/plugins/headlines-view/heading.js");const o=e=>{const t=(0,n.getChatStyle)(e.model);return r.html`<div class="flyout box-flyout" style="${t||r.nothing}"><converse-dragresize></converse-dragresize>${e.model?r.html`<converse-headlines-heading jid="${e.model.get("jid")}" class="chat-head chat-head-chatbox row g-0"></converse-headlines-heading><div class="chat-body"><div class="chat-content" aria-live="polite"><converse-chat-content .model="${e.model}"></converse-chat-content></div></div>`:""}</div>`}},"./src/plugins/headlines-view/view.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/headless/index.js"),n=s("./src/shared/chat/baseview.js"),o=s("./src/plugins/dragresize/mixin.js"),i=s("./src/plugins/headlines-view/templates/headlines.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}}class d extends((0,o.default)(n.default)){initialize(){return l((function*(){const{chatboxviews:e,chatboxes:t}=r._converse.state;e.add(this.jid,this),this.model=t.get(this.jid),this.listenTo(this.model,"change:hidden",(()=>this.afterShown())),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model.messages,"add",(()=>this.requestUpdate())),this.listenTo(this.model.messages,"remove",(()=>this.requestUpdate())),this.listenTo(this.model.messages,"reset",(()=>this.requestUpdate())),document.addEventListener("visibilitychange",(()=>this.onWindowStateChanged())),yield this.model.messages.fetched,this.model.maybeShow(),r.api.trigger("headlinesBoxViewInitialized",this)})).call(this)}render(){return(0,i.default)(this)}close(e){return l((function*(){var t;return null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),location.hash==="converse/chat?jid="+this.model.get("jid")&&history.pushState(null,"",window.location.pathname),yield this.model.close(e),this})).call(this)}getNotifications(){return[]}afterShown(){this.model.clearUnreadMsgCounter()}}r.api.elements.define("converse-headlines",d);const c=d},"./src/plugins/mam-views/index.js":(e,t,s)=>{"use strict";s.r(t);s("./src/plugins/mam-views/placeholder.js");var r=s("./src/headless/index.js"),n=s("./src/plugins/mam-views/utils.js");r.converse.plugins.add("converse-mam-views",{dependencies:["converse-mam","converse-chatview","converse-muc-views"],initialize(){r.api.settings.extend({auto_fill_history_gaps:!0}),r.api.listen.on("getMessageTemplate",n.getPlaceholderTemplate)}})},"./src/plugins/mam-views/placeholder.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),n=s("./src/shared/components/observable.js"),o=s("./src/plugins/mam-views/templates/placeholder.js");s("./src/plugins/mam-views/styles/placeholder.scss");function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function a(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}class l extends n.ObservableElement{static get properties(){return a(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){i(e,t,s[t])}))}return e}({},super.properties),{model:{type:Object}})}render(){return(0,o.default)(this)}fetchMissingMessages(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),this.model.fetchMissingMessages()}onVisibilityChanged(e){r.api.settings.get("auto_fill_history_gaps")&&this.isVisible&&!this.model.get("fetching")&&this.fetchMissingMessages()}constructor(){super(),this.model=null,this.observable="once",this.intersectionRatio=.1}}r.api.elements.define("converse-mam-placeholder",l);const d=l},"./src/plugins/mam-views/styles/placeholder.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/mam-views/styles/placeholder.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/mam-views/templates/placeholder.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/html.js"),n=s("./src/i18n/index.js"),o=s("./src/templates/spinner.js");const i=e=>e.model.get("fetching")?(0,o.default)({classes:"hor_centered"}):r.html`<a @click="${t=>e.fetchMissingMessages(t)}" title="${(0,n.__)("Click to load missing messages")}"><div class="message mam-placeholder"></div></a>`},"./src/plugins/mam-views/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{fetchMessagesOnScrollUp:()=>l,getPlaceholderTemplate:()=>a});var r=s("./node_modules/lit/html.js"),n=s("./src/headless/index.js");function o(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{CHATROOMS_TYPE:i}=n.constants;function a(e,t){return e instanceof n.MAMPlaceholderMessage?r.html`<converse-mam-placeholder .model="${e}"></converse-mam-placeholder>`:t}function l(e){return(t=function*(){if(!e.model.ui.get("chat-content-spinner-top")&&e.model.messages.length){const t=e.model.get("type")===i,s=e.model.getOldestMessage();if(s){const r=n._converse.session.get("bare_jid"),o=t?e.model.get("jid"):r,i=s.get(`stanza_id ${o}`);e.model.ui.set("chat-content-spinner-top",!0);try{i?yield n.u.mam.fetchArchivedMessages(e.model,{before:i}):yield n.u.mam.fetchArchivedMessages(e.model,{end:s.get("time")})}catch(t){return n.log.error(t),void e.model.ui.set("chat-content-spinner-top",!1)}n.api.settings.get("allow_url_history_change")&&history.pushState(null,"",`#${s.get("msgid")}`),setTimeout((()=>e.model.ui.set("chat-content-spinner-top",!1)),250)}}},function(){var e=this,s=arguments;return new Promise((function(r,n){var i=t.apply(e,s);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)}))})();var t}},"./src/plugins/minimize/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./node_modules/lodash-es/debounce.js"),n=s("./src/headless/index.js"),o=s("./src/plugins/minimize/toggle.js"),i=s("./src/plugins/minimize/utils.js");s("./src/plugins/minimize/view.js"),s("./src/plugins/minimize/minimized-chat.js"),s("./src/plugins/minimize/styles/minimize.scss");const{CHATROOMS_TYPE:a}=n.constants;n.converse.plugins.add("converse-minimize",{dependencies:["converse-chatview","converse-controlbox","converse-muc-views","converse-headlines-view","converse-dragresize"],enabled:e=>"overlayed"===e.api.settings.get("view_mode"),initialize(){n.api.settings.extend({no_trimming:!1}),n.api.promises.add("minimizedChatsInitialized");const e={MinimizedChatsToggle:o.default};Object.assign(n._converse,e),Object.assign(n._converse.exports,e),Object.assign(n._converse,{minimize:{trimChats:i.trimChats,minimize:i.minimize,maximize:i.maximize}}),Object.assign(n._converse.exports,{minimize:{trimChats:i.trimChats,minimize:i.minimize,maximize:i.maximize}}),Object.assign(n.u,{trimChats:i.trimChats,minimize:i.minimize,maximize:i.maximize}),n.api.listen.on("chatBoxViewInitialized",(e=>(0,i.trimChats)(e))),n.api.listen.on("chatRoomViewInitialized",(e=>(0,i.trimChats)(e))),n.api.listen.on("controlBoxInitialized",(e=>(0,i.trimChats)(e))),n.api.listen.on("chatBoxInitialized",i.initializeChat),n.api.listen.on("chatRoomInitialized",i.initializeChat),n.api.listen.on("getHeadingButtons",((e,t)=>e.model.get("type")===a?(0,i.addMinimizeButtonToMUC)(e,t):(0,i.addMinimizeButtonToChat)(e,t)));const t=(0,r.default)((()=>(0,i.trimChats)()),250);n.api.listen.on("registeredGlobalEventHandlers",(()=>window.addEventListener("resize",t))),n.api.listen.on("unregisteredGlobalEventHandlers",(()=>window.removeEventListener("resize",t)))}})},"./src/plugins/minimize/minimized-chat.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),n=s("./src/plugins/minimize/templates/trimmed_chat.js"),o=s("./src/shared/components/element.js"),i=s("./src/plugins/minimize/utils.js");class a extends o.CustomElement{static get properties(){return{model:{type:Object},title:{type:String},type:{type:String},num_unread:{type:Number}}}render(){return(0,n.default)(this)}close(e){null==e||e.preventDefault(),this.model.close()}restore(e){null==e||e.preventDefault(),(0,i.maximize)(this.model)}constructor(){super(),this.model=null,this.num_unread=null,this.type=null,this.title=null}}r.api.elements.define("converse-minimized-chat",a)},"./src/plugins/minimize/styles/minimize.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/minimize/styles/minimize.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/minimize/templates/toggle.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js");const o=e=>{const t=e.model.where({hidden:!0}),s=t.reduce(((e,t)=>e+t.get("num_unread")),0),o=t.reduce(((e,t)=>e+(t.get("hidden")?1:0)),0),i=e.minchats.get("collapsed");return r.html`<div id="minimized-chats" class="${t.length?"":"hidden"}"><button type="button" class="btn btn-primary" @click="${t=>e.toggle(t)}">${o} ${(0,n.__)("hidden")} <span class="badge bg-secondary unread-message-count ${s?"":"hidden"}">${s}</span></button><div class="flyout minimized-chats-flyout row g-0 ${i?"hidden":""}">${t.map((e=>r.html`<converse-minimized-chat .model="${e}" title="${e.getDisplayName()}" type="${e.get("type")}" num_unread="${e.get("num_unread")}"></converse-minimized-chat>`))}</div></div>`}},"./src/plugins/minimize/templates/trimmed_chat.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js");const o=e=>{const t=(0,n.__)("Click to restore this chat");let s;return s="chatroom"===e.type?"var(--muc-color)":"headline"===e.type?"var(--headlines-color)":"var(--chat-color)",r.html`<div class="chat-head-${e.type} chat-head row g-0"><a class="col-10 restore-chat align-self-center" title="${t}" @click="${t=>e.restore(t)}">${e.num_unread?r.html`<span class="message-count badge badge-light">${e.num_unread}</span>`:""} ${e.title} </a><a class="col-2 pl-1" @click="${t=>e.close(t)}"><converse-icon color="${s}" class="fas fa-times" @click="${t=>e.close(t)}" size="1em"></converse-icon></a></div>`}},"./src/plugins/minimize/toggle.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js");class n extends r.Model{defaults(){return{collapsed:!1}}}const o=n},"./src/plugins/minimize/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{addMinimizeButtonToChat:()=>h,addMinimizeButtonToMUC:()=>m,initializeChat:()=>i,maximize:()=>f,minimize:()=>p,onMinimizedChanged:()=>g,trimChats:()=>c});var r=s("./src/headless/index.js"),n=s("./src/i18n/index.js");const{ACTIVE:o}=r.constants;function i(e){e.on("change:hidden",(()=>g(e))),"controlbox"!==e.get("id")&&e.save({hidden:!!e.get("hidden"),time_minimized:e.get("time_minimized")})}function a(e){if("controlbox"===e.model.get("id")){if(r.u.isVisible(e))return r.u.getOuterWidth(e,!0);{const e=document.querySelector("converse-controlbox-toggle");return e?r.u.getOuterWidth(e,!0):0}}return!e.model.get("hidden")&&r.u.isVisible(e)?r.u.getOuterWidth(e,!0):0}function l(){const e=document.querySelector("converse-minimized-chats");return r._converse.state.chatboxes.pluck("hidden").includes(!0)?r.u.getOuterWidth(e,!0):0}function d(e){const t=e?e.model.get("id"):null,s=e?r.u.getOuterWidth(e,!0):0;return Object.values(r._converse.state.chatboxviews.xget(t)).reduce(((e,t)=>e+a(t)),s)}function c(e){if(r.api.settings.get("no_trimming")||"overlayed"!==r.api.settings.get("view_mode"))return;const t=r._converse.state.chatboxviews.filter((e=>!e.model.get("hidden")&&!e.model.get("closed")&&r.u.isVisible(e)));if(t.length<=1)return;const s=r.u.getOuterWidth(document.querySelector("body"),!0);if(a(t[0])===s)return;if(document.querySelector("converse-minimized-chats"))for(;l()+d(e)>s;){const t=u([e?e.model.get("id"):null]);if(!t)break;{const e=r._converse.state.chatboxes.get(t.get("id"));null==e||e.save("hidden",!0),p(t)}}}function u(e){e.push("controlbox");let t=0,s=r._converse.state.chatboxes.sort().at(t);for(;e.includes(s.get("id"))||!0===s.get("hidden");)if(t++,s=r._converse.state.chatboxes.at(t),!s)return null;return s}function h(e,t){const s={a_class:"toggle-chatbox-button",handler:t=>p(t,e.model),i18n_text:(0,n.__)("Minimize"),i18n_title:(0,n.__)("Minimize this chat"),icon_class:"fa-minus",name:"minimize",standalone:"overlayed"===r._converse.api.settings.get("view_mode")},o=t.map((e=>e.name)).indexOf("close");return o>-1?[...t.slice(0,o),s,...t.slice(o)]:[s,...t]}function m(e,t){const s={a_class:"toggle-chatbox-button",handler:t=>p(t,e.model),i18n_text:(0,n.__)("Minimize"),i18n_title:(0,n.__)("Minimize this groupchat"),icon_class:"fa-minus",name:"minimize",standalone:"overlayed"===r._converse.api.settings.get("view_mode")},o=t.map((e=>e.name)).indexOf("signout");return o>-1?[...t.slice(0,o),s,...t.slice(o)]:[s,...t]}function f(e,t){(null==e?void 0:e.preventDefault)?e.preventDefault():t=e,r.u.safeSave(t,{hidden:!1,time_opened:(new Date).getTime()})}function p(e,t){(null==e?void 0:e.preventDefault)?e.preventDefault():t=e,r.u.safeSave(t,{hidden:!0,time_minimized:(new Date).toISOString()})}function g(e){e.get("hidden")?function(e){r.api.trigger("chatBoxMinimized",e)}(e):function(e){e.isScrolledUp()||e.clearUnreadMsgCounter(),e.setChatState(o),r.api.trigger("chatBoxMaximized",e)}(e)}},"./src/plugins/minimize/view.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/plugins/minimize/toggle.js"),i=s("./src/plugins/minimize/templates/toggle.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}}class d extends n.CustomElement{initialize(){return l((function*(){this.model=r._converse.state.chatboxes,yield this.initToggle(),this.listenTo(this.minchats,"change:collapsed",(()=>this.requestUpdate())),this.listenTo(this.model,"add",(()=>this.requestUpdate())),this.listenTo(this.model,"change:fullname",(()=>this.requestUpdate())),this.listenTo(this.model,"change:jid",(()=>this.requestUpdate())),this.listenTo(this.model,"change:hidden",(()=>this.requestUpdate())),this.listenTo(this.model,"change:name",(()=>this.requestUpdate())),this.listenTo(this.model,"change:num_unread",(()=>this.requestUpdate())),this.listenTo(this.model,"remove",(()=>this.requestUpdate())),this.listenTo(r._converse,"connected",(()=>this.requestUpdate())),this.listenTo(r._converse,"reconnected",(()=>this.requestUpdate())),this.listenTo(r._converse,"disconnected",(()=>this.requestUpdate()))})).call(this)}render(){return(0,i.default)(this)}initToggle(){return l((function*(){const e=`converse.minchatstoggle-${r._converse.session.get("bare_jid")}`;this.minchats=new o.default({id:e}),r.u.initStorage(this.minchats,e,"session"),yield new Promise((e=>this.minchats.fetch({success:e,error:e})))})).call(this)}toggle(e){null==e||e.preventDefault(),this.minchats.save({collapsed:!this.minchats.get("collapsed")})}}r.api.elements.define("converse-minimized-chats",d)},"./src/plugins/modal/alert.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/plugins/modal/modal.js"),n=s("./src/plugins/modal/templates/alert.js"),o=s("./src/headless/index.js");class i extends r.default{initialize(){super.initialize(),this.addEventListener("hide.bs.modal",(()=>this.remove()),!1)}renderModal(){return(0,n.default)(this.state.toJSON())}getModalTitle(){return this.state.get("title")}}o.api.elements.define("converse-alert-modal",i)},"./src/plugins/modal/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});s("./src/plugins/modal/alert.js");var r=s("./src/plugins/modal/confirm.js"),n=s("./node_modules/@converse/skeletor/dist/skeletor.js"),o=s("./src/headless/index.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function a(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))}}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let d=[],c={},u={};const h={modal:{show(e,t,s){let r;if("string"==typeof e){var n;r=null!==(n=this.get(e))&&void 0!==n?n:this.create(e,t),Object.assign(r,t)}else{const s=e;var o;const n=null!==(o=s.id)&&void 0!==o?o:t.id;var i;r=null!==(i=this.get(n))&&void 0!==i?i:this.create(s,t)}return r.show(s),r},get(e){var t;return null!==(t=c[e])&&void 0!==t?t:d.filter((t=>t.id==e)).pop()},create(e,t){const s=customElements.get(e);return c[e]=new s(t)},remove(e){let t;"string"==typeof e?(t=c[e],delete c[e]):(t=e,d=d.filter((e=>e!==t))),null==t||t.remove()},removeAll(){d.forEach((e=>e.remove())),d=[],c={}}},confirm(e){return a((function*(e,t=[],s=[]){"string"==typeof t&&(t=[t]);const o=new n.Model({title:e,messages:t,fields:s,type:"confirm"}),i=new r.default({state:o});let a;i.show();try{a=yield i.confirmation}catch(e){a=!1}return i.remove(),a})).apply(this,arguments)},prompt(e){return a((function*(e,t=[],s=""){"string"==typeof t&&(t=[t]);const o=new n.Model({title:e,messages:t,fields:[{name:"reason",placeholder:s}],type:"prompt"}),i=new r.default({state:o});let a;i.show();try{var l;a=null===(l=(yield i.confirmation).pop())||void 0===l?void 0:l.value}catch(e){a=!1}return i.remove(),a})).apply(this,arguments)},alert(e,t,s){let r;"string"==typeof s&&(s=[s]),"error"===e?r="alert-danger":"info"===e?r="alert-info":"warn"===e&&(r="alert-warning");const o=new n.Model({title:t,messages:s,level:r,type:"alert"});h.modal.show("converse-alert-modal",{state:o})},toast:{show(e,t){u[e]=t,o.api.trigger("showToast",t)},get:e=>e?u[e]:Object.keys(u).map((e=>function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){l(e,t,s[t])}))}return e}({name:e},u[e]))),remove(e){delete u[e],o.api.trigger("hideToast")}}},m=h},"./src/plugins/modal/confirm.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),n=s("./src/headless/index.js"),o=s("./src/plugins/modal/modal.js"),i=s("./src/plugins/modal/templates/prompt.js");class a extends o.default{initialize(){super.initialize(),this.listenTo(this.state,"change",(()=>this.requestUpdate())),this.addEventListener("hide.bs.modal",(()=>{this.confirmation.isResolved||this.confirmation.reject()}),!1),this.onKeyDown=e=>{if(e.key===n.constants.KEYCODES.ENTER){e.preventDefault(),e.stopPropagation();this.querySelector("form.confirm button[type=submit]").click()}}}connectedCallback(){super.connectedCallback(),this.addEventListener("keydown",this.onKeyDown)}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown),super.disconnectedCallback()}renderModal(){return(0,i.default)(this)}getModalTitle(){return this.state.get("title")}renderModalFooter(){return""}onConfimation(e){e.preventDefault();const t=e.target,s=new FormData(t),r=(this.state.get("fields")||[]).map((e=>{const t=s.get(e.name);return e.value=t,e.challenge&&(e.challenge_failed=t!==e.challenge),e}));if(r.filter((e=>e.challenge_failed)).length)return this.state.set("fields",r),void this.state.trigger("change");this.confirmation.resolve(r),this.modal.hide()}constructor(e){super(e),this.confirmation=(0,r.getOpenPromise)()}}n.api.elements.define("converse-confirm-modal",a)},"./src/plugins/modal/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js"),n=s("./src/plugins/modal/api.js"),o=s("./src/plugins/modal/modal.js"),i=s("./src/plugins/modal/popover.js"),a=s("./src/plugins/modal/toast.js");s("./src/plugins/modal/modals.js"),s("./src/plugins/modal/toasts.js");r.converse.plugins.add("converse-modal",{initialize(){r.api.listen.on("disconnect",(()=>{const e=document.querySelector("#converse-modals");e&&(e.innerHTML="")})),r.api.listen.on("clearSession",(()=>r.api.modal.removeAll())),Object.assign(r._converse.exports,{BaseModal:o.default,Popover:i.default,Toast:a.default}),Object.assign(r._converse.api,n.default)}})},"./src/plugins/modal/modal.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/bootstrap/js/src/modal.js"),o=s("./node_modules/@converse/openpromise/dist/openpromise.js"),i=s("./node_modules/@converse/skeletor/dist/skeletor.js"),a=s("./src/shared/components/element.js"),l=s("./src/headless/index.js"),d=s("./src/plugins/modal/templates/buttons.js"),c=s("./src/plugins/modal/templates/modal.js");s("./src/plugins/modal/styles/_modal.scss");function u(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function h(e,t,s){if(!t.has(e))throw new TypeError("attempted to "+s+" private field on non-instance");return t.get(e)}function m(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,h(e,t,"get"))}function f(e,t,s){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,s)}function p(e,t,s){return function(e,t,s){if(t.set)t.set.call(e,s);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=s}}(e,h(e,t,"set"),s),s}var g=new WeakMap;class v extends a.CustomElement{static get properties(){return{model:{type:i.Model}}}connectedCallback(){super.connectedCallback(),window.addEventListener("keydown",this.onKeyDown)}disconnectedCallback(){window.removeEventListener("resize",this.onKeyDown),super.disconnectedCallback()}get modal(){return m(this,g)||p(this,g,new n.default(this,{backdrop:!l.u.isTestEnv(),keyboard:!0})),m(this,g)}initialize(){this.requestUpdate(),this.initialized.resolve()}renderModal(){return""}renderModalFooter(){return r.html`<div class="modal-footer">${d.modal_close_button}</div>`}render(){return(0,c.default)(this)}getModalTitle(){return""}switchTab(e){null==e||e.stopPropagation(),null==e||e.preventDefault(),this.tab=e.target.getAttribute("data-name"),this.requestUpdate()}close(){this.modal.hide()}insertIntoDOM(){document.querySelector("#converse-modals").insertAdjacentElement("beforeend",this)}alert(e,t="primary",s=!0){this.state.set("alert",{message:e,type:t}),s&&(this.alertTimeout&&clearTimeout(this.alertTimeout),this.alertTimeout=setTimeout((()=>{this.state.set("alert",void 0)}),5e3))}show(){return(e=function*(){yield this.initialized,this.modal.show(),this.requestUpdate()},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){u(o,r,n,i,a,"next",e)}function a(e){u(o,r,n,i,a,"throw",e)}i(void 0)}))}).call(this);var e}constructor(e){super(),f(this,g,{writable:!0,value:void 0}),this.model=null,this.state=new i.Model,this.listenTo(this.state,"change",(()=>this.requestUpdate())),this.className=l.u.isTestEnv()?"modal":"modal fade",this.tabIndex=-1,this.ariaHidden="true",this.onKeyDown=e=>{"Escape"===e.key&&"false"===this.ariaHidden&&this.close()},this.initialized=(0,o.getOpenPromise)(),Object.assign(this,e),setTimeout((()=>this.insertIntoDOM())),this.addEventListener("shown.bs.modal",(()=>{this.ariaHidden="false"})),this.addEventListener("hidden.bs.modal",(()=>{this.ariaHidden="true",l.api.modal.remove(this.nodeName.toLowerCase())}))}}const _=v},"./src/plugins/modal/modals.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{ModalsContainer:()=>i,default:()=>a});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/shared/components/element.js");class i extends o.CustomElement{render(){return r.html`<converse-about-modal></converse-about-modal>`}}n.api.elements.define("converse-modals",i);const a=i},"./src/plugins/modal/popover.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/bootstrap/js/src/popover.js"),o=s("./src/headless/index.js"),i=s("./src/shared/components/element.js");s("./src/plugins/modal/styles/popover.scss");class a extends i.CustomElement{static get properties(){return{title:{type:String},text:{type:String}}}firstUpdated(e){super.firstUpdated(e),new n.default(this.firstElementChild,{container:"converse-root",trigger:"focus"})}render(){return r.html`<button type="button" class="btn p-0" data-toggle="popover" data-bs-title="${this.title}" data-bs-content="${this.text}"><converse-icon class="fa fa-info-circle" size="1.2em"></converse-icon></button>`}constructor(){super(),this.title=null,this.text=null}}o.api.elements.define("converse-popover",a);const l=a},"./src/plugins/modal/styles/_modal.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/modal/styles/_modal.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/modal/styles/popover.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/modal/styles/popover.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/modal/styles/toast.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/modal/styles/toast.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/modal/templates/alert.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=e=>r.html`<div class="modal-body"><span class="modal-alert"></span> ${e.messages.map((e=>r.html`<p>${e}</p>`))}</div>`},"./src/plugins/modal/templates/buttons.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{modal_close_button:()=>o,modal_header_close_button:()=>i});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js");const o=r.html`<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">${(0,n.__)("Close")}</button>`,i=r.html`<button type="button" class="btn d-flex align-items-center justify-content-center" data-bs-dismiss="modal" aria-label="${(0,n.__)("Close")}"><converse-icon size="1.25em" class="fa fa-times"></converse-icon></button>`},"./src/plugins/modal/templates/modal.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/plugins/modal/templates/buttons.js");const o=e=>{var t,s;const o=null===(t=e.state)||void 0===t?void 0:t.get("alert");var i;const a=null!==(i=null===(s=e.state)||void 0===s?void 0:s.get("level"))&&void 0!==i?i:"";return r.html`<div class="modal-dialog" role="document" role="dialog"><div class="modal-content"><div class="modal-header ${a}"><h5 class="modal-title">${e.getModalTitle()}</h5>${n.modal_header_close_button}</div><div class="modal-body">${o?(l=o.type,d=o.message,r.html`<div class="alert alert-${l}" role="alert">${d}</div>`):""} ${e.renderModal()}</div>${e.renderModalFooter()}</div></div>`;var l,d}},"./src/plugins/modal/templates/prompt.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js");const o=e=>{var t,s,o;const i=null===(t=e.state.get("messages"))||void 0===t?void 0:t[0],a=(null===(s=e.state.get("messages"))||void 0===s?void 0:s.slice(1))||[];return r.html`<form class="converse-form converse-form--modal confirm" action="#" @submit="${t=>e.onConfimation(t)}"><div class="mb-3 lh-base"><strong>${i}</strong></div><div class="mb-3">${null==a?void 0:a.map((e=>r.html`<p>${e}</p>`))}</div>${null===(o=e.state.get("fields"))||void 0===o?void 0:o.map((e=>function(e){return"checkbox"===e.type?r.html`<div class="form-check"><input name="${e.name}" class="form-check-input" type="checkbox" id="${e.name}"> <label class="form-check-label" for="${e.name}">${e.label}</label></div>`:r.html`<div class="mb-3"><label class="form-label" for="${e.name}">${e.label||""}</label> <input type="text" name="${e.name}" class="${e.challenge_failed?"is-invalid":""} form-control" ?required="${e.required}" placeholder="${e.placeholder}" id="${e.name}"> ${e.challenge_failed?r.html`<div class="invalid-feedback">Please provide a valid input.</div>`:""}</div>`}(e)))}<div class="d-flex justify-content-end"><button type="submit" class="btn btn-primary me-2">${(0,n.__)("Confirm")}</button> <input type="button" class="btn btn-secondary" data-bs-dismiss="modal" value="${(0,n.__)("Cancel")}"></div></form>`}},"./src/plugins/modal/toast.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),i=s("./src/shared/components/element.js");s("./src/plugins/modal/styles/toast.scss");class a extends i.CustomElement{static get properties(){return{type:{type:String},name:{type:String},title:{type:String},body:{type:String}}}updated(e){"danger"!==e.get("type")?this.timeoutId=setTimeout((()=>this.hide()),5e3):clearTimeout(this.timeoutId)}render(){var e,t,s;return r.html`<div class="toast show text-bg-${null!==(e=this.type)&&void 0!==e?e:"info"}" role="alert" aria-live="assertive" aria-atomic="true">${this.title?r.html`<div class="toast-header"><img src="/logo/conversejs-filled.svg" class="rounded me-2" alt="${(0,o.__)("Converse logo")}"> <strong class="me-auto">${null!==(t=this.title)&&void 0!==t?t:""}</strong> <button @click="${this.hide}" type="button" class="btn-close" aria-label="${(0,o.__)("Close")}"></button></div>`:""} ${this.body?r.html`<div class="d-flex justify-content-between toast-body__container"><div class="toast-body w-100">${null!==(s=this.body)&&void 0!==s?s:""}</div>${this.title?"":r.html`<button @click="${this.hide}" type="button" class="btn centered" aria-label="${(0,o.__)("Close")}"><converse-icon size="1em" class="fa fa-times"></converse-icon></button>`}</div>`:""}</div>`}hide(e){null==e||e.preventDefault(),n.api.toast.remove(this.name)}constructor(){super(),this.name="",this.body="",this.header="",this.type="info"}}n.api.elements.define("converse-toast",a)},"./src/plugins/modal/toasts.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{ToastsContainer:()=>i,default:()=>a});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/shared/components/element.js");class i extends o.CustomElement{initialize(){super.initialize(),n.api.listen.on("showToast",(()=>this.requestUpdate())),n.api.listen.on("hideToast",(()=>this.requestUpdate()))}render(){const e=n.api.toast.get();return r.html`${e.map((e=>{var t,s,n;return r.html`<converse-toast name="${e.name}" title="${null!==(t=e.title)&&void 0!==t?t:""}" body="${null!==(s=e.body)&&void 0!==s?s:""}" type="${null!==(n=e.type)&&void 0!==n?n:""}"></converse-toast>`}))}`}}n.api.elements.define("converse-toasts",i);const a=i},"./src/plugins/muc-views/affiliation-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./src/headless/index.js"),n=s("./src/i18n/index.js"),o=s("./src/shared/components/element.js"),i=s("./src/plugins/muc-views/templates/affiliation-form.js");s("./src/plugins/muc-views/styles/affiliation-form.scss");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{Strophe:l,sizzle:d}=r.converse.env;class c extends o.CustomElement{static get properties(){return{muc:{type:Object},jid:{type:String},affiliation:{type:String},alert_message:{type:String,attribute:!1},alert_type:{type:String,attribute:!1}}}render(){return(0,i.default)(this)}alert(e,t){this.alert_message=e,this.alert_type=t}assignAffiliation(e){return(t=function*(){e.stopPropagation(),e.preventDefault(),this.alert();const t=new FormData(e.target),s=t.get("affiliation"),o={jid:this.jid,reason:t.get("reason")},i=this.muc.get("jid");try{yield r.u.muc.setAffiliation(s,i,[o])}catch(e){return null===e?this.alert((0,n.__)("Timeout error while trying to set the affiliation"),"danger"):d(`not-allowed[xmlns="${l.NS.STANZAS}"]`,e).length?this.alert((0,n.__)("Sorry, you're not allowed to make that change"),"danger"):this.alert((0,n.__)("Sorry, something went wrong while trying to set the affiliation"),"danger"),void r.log.error(e)}yield this.muc.occupants.fetchMembers();const a=new CustomEvent("affiliationChanged",{bubbles:!0});this.dispatchEvent(a)},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}).call(this);var t}constructor(){super(),this.jid=null,this.muc=null,this.affiliation=null}}r.api.elements.define("converse-muc-affiliation-form",c);const u=c},"./src/plugins/muc-views/bottom-panel.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});s("./src/shared/autocomplete/index.js");var r=s("./src/plugins/chatview/bottom-panel.js"),n=s("./src/plugins/muc-views/templates/muc-bottom-panel.js"),o=s("./src/headless/index.js");s("./src/plugins/muc-views/styles/muc-bottom-panel.scss");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class a extends r.default{initialize(){var e,t=this,s=()=>super.initialize;return(e=function*(){yield s().call(t),this.listenTo(this.model,"change:hidden_occupants",(()=>this.requestUpdate())),this.listenTo(this.model,"change:num_unread_general",(()=>this.requestUpdate())),this.listenTo(this.model.features,"change:moderated",(()=>this.requestUpdate())),this.listenTo(this.model.occupants,"add",this.renderIfOwnOccupant),this.listenTo(this.model.occupants,"change:role",this.renderIfOwnOccupant),this.listenTo(this.model.session,"change:connection_status",(()=>this.requestUpdate()))},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))}).call(this)}render(){return this.model?(0,n.default)(this):""}renderIfOwnOccupant(e){const t=o._converse.session.get("bare_jid");e.get("jid")===t&&this.requestUpdate()}sendButtonClicked(e){var t;if("sendMessage"===(null===(t=e.delegateTarget)||void 0===t?void 0:t.dataset.action)){const t=this.querySelector("converse-muc-message-form");null==t||t.onFormSubmitted(e)}}}o.api.elements.define("converse-muc-bottom-panel",a)},"./src/plugins/muc-views/chatarea.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./src/headless/index.js"),n=s("./src/i18n/index.js"),o=s("./src/shared/components/element.js"),i=s("./src/shared/constants.js"),a=s("./src/plugins/muc-views/templates/muc-chatarea.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e,t,s){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return s}function c(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}var u=new WeakSet;class h extends o.CustomElement{static get properties(){return{jid:{type:String},show_help_messages:{type:Boolean},type:{type:String}}}initialize(){return(e=function*(){this.model=yield r.api.rooms.get(this.jid),this.listenTo(this.model,"change:show_help_messages",(()=>this.requestUpdate())),this.listenTo(this.model,"change:hidden_occupants",(()=>this.requestUpdate())),this.listenTo(this.model.session,"change:connection_status",(()=>this.requestUpdate())),d(this,u,m).call(this),this.requestUpdate()},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}).call(this);var e}render(){return this.model?(0,a.default)(this):""}updated(e){super.updated(e),e.has("jid")&&this.model&&this.jid!==this.model.get("jid")&&(this.stopListening(),this.initialize())}connectedCallback(){super.connectedCallback(),this.hideSidebarIfSmallViewport=d(this,u,m).bind(this),this.viewportMediaQuery.addEventListener("change",this.hideSidebarIfSmallViewport)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.viewportMediaQuery)||void 0===e||e.removeEventListener("change",this.hideSidebarIfSmallViewport)}shouldShowSidebar(){return!this.model.get("hidden_occupants")&&this.model.session.get("connection_status")===r.converse.ROOMSTATUS.ENTERED}getHelpMessages(){const e=r.api.settings.get("muc_disable_slash_commands"),t=Array.isArray(e)?e:[];return[`<strong>/admin</strong>: ${(0,n.__)("Change user's affiliation to admin")}`,`<strong>/ban</strong>: ${(0,n.__)("Ban user by changing their affiliation to outcast")}`,`<strong>/clear</strong>: ${(0,n.__)("Clear the chat area")}`,`<strong>/close</strong>: ${(0,n.__)("Close this groupchat")}`,`<strong>/deop</strong>: ${(0,n.__)("Change user role to participant")}`,`<strong>/destroy</strong>: ${(0,n.__)("Remove this groupchat")}`,`<strong>/help</strong>: ${(0,n.__)("Show this menu")}`,`<strong>/kick</strong>: ${(0,n.__)("Kick user from groupchat")}`,`<strong>/me</strong>: ${(0,n.__)("Write in 3rd person")}`,`<strong>/member</strong>: ${(0,n.__)("Grant membership to a user")}`,`<strong>/modtools</strong>: ${(0,n.__)("Opens up the moderator tools GUI")}`,`<strong>/mute</strong>: ${(0,n.__)("Remove user's ability to post messages")}`,`<strong>/nick</strong>: ${(0,n.__)("Change your nickname")}`,`<strong>/op</strong>: ${(0,n.__)("Grant moderator role to user")}`,`<strong>/owner</strong>: ${(0,n.__)("Grant ownership of this groupchat")}`,`<strong>/register</strong>: ${(0,n.__)("Register your nickname")}`,`<strong>/revoke</strong>: ${(0,n.__)("Revoke the user's current affiliation")}`,`<strong>/subject</strong>: ${(0,n.__)("Set groupchat subject")}`,`<strong>/topic</strong>: ${(0,n.__)("Set groupchat subject (alias for /subject)")}`,`<strong>/voice</strong>: ${(0,n.__)("Allow muted user to post messages")}`].filter((e=>t.every((t=>!e.startsWith(t+"<",9))))).filter((e=>this.model.getAllowedCommands().some((t=>e.startsWith(t+"<",9)))))}constructor(){super(),c(this,u),this.jid=null,this.type=null,this.split=null,this.viewportMediaQuery=window.matchMedia(`(max-width: ${i.MOBILE_CUTOFF}px)`)}}function m(e){var t,s;if(null===(t=this.model)||void 0===t?void 0:t.get("hidden_occupants"))return;(e?e.matches:this.viewportMediaQuery.matches)&&(null===(s=this.model)||void 0===s||s.save("hidden_occupants",!0))}r.api.elements.define("converse-muc-chatarea",h)},"./src/plugins/muc-views/destroyed.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/plugins/muc-views/templates/muc-destroyed.js"),n=s("./src/shared/components/element.js"),o=s("./src/headless/index.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class a extends n.CustomElement{static get properties(){return{jid:{type:String}}}connectedCallback(){super.connectedCallback(),this.model=o._converse.state.chatboxes.get(this.jid)}render(){const e=this.model.get("destroyed_reason"),t=this.model.get("moved_jid");return(0,r.default)({moved_jid:t,reason:e,onSwitch:e=>this.onSwitch(e)})}onSwitch(e){return(t=function*(){e.preventDefault();const t=this.model.get("moved_jid");(yield o.api.rooms.get(t,{},!0)).maybeShow(!0),this.model.destroy()},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))}).call(this);var t}constructor(){super(),this.jid=null}}o.api.elements.define("converse-muc-destroyed",a)},"./src/plugins/muc-views/disconnected.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/plugins/muc-views/templates/muc-disconnect.js"),n=s("./src/shared/components/element.js"),o=s("./src/i18n/index.js"),i=s("./src/headless/index.js");class a extends n.CustomElement{static get properties(){return{jid:{type:String}}}connectedCallback(){super.connectedCallback(),this.model=i._converse.state.chatboxes.get(this.jid)}render(){const e=this.model.session.get("disconnection_message");if(!e)return;const t=[e],s=this.model.session.get("disconnection_actor");s&&t.push((0,o.__)("This action was done by %1$s.",s));const n=this.model.session.get("disconnection_reason");return n&&t.push((0,o.__)('The reason given is: "%1$s".',n)),(0,r.default)(t)}constructor(){super(),this.jid=null}}i.api.elements.define("converse-muc-disconnected",a)},"./src/plugins/muc-views/heading.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/headless/index.js"),n=(s("./src/plugins/muc-views/modals/config.js"),s("./src/plugins/muc-views/modals/muc-details.js"),s("./src/plugins/muc-views/modals/nickname.js"),s("./src/shared/components/element.js")),o=s("./src/i18n/index.js"),i=s("./src/plugins/muc-views/utils.js"),a=s("./src/plugins/muc-views/templates/muc-head.js");s("./src/plugins/muc-views/styles/muc-head.scss");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}}class c extends n.CustomElement{initialize(){return d((function*(){const{chatboxes:e}=r._converse.state;this.model=e.get(this.getAttribute("jid")),this.listenTo(this.model,"change",(()=>this.requestUpdate())),this.listenTo(this.model,"vcard:add",(()=>this.requestUpdate())),this.listenTo(this.model,"vcard:change",(()=>this.requestUpdate())),this.user_settings=yield r._converse.api.user.settings.getModel(),this.listenTo(this.user_settings,"change:mucs_with_hidden_subject",(()=>this.requestUpdate())),yield this.model.initialized;const t=this.model.occupants.findOccupant({jid:r._converse.session.get("bare_jid")});t&&this.updateIfOwnOccupant(t),this.listenTo(this.model.occupants,"add",this.updateIfOwnOccupant),this.listenTo(this.model.occupants,"change:affiliation",this.updateIfOwnOccupant),this.listenTo(this.model.occupants,"change:role",this.updateIfOwnOccupant),this.listenTo(this.model.session,"change:connection_status",(()=>this.requestUpdate())),this.requestUpdate()})).call(this)}render(){return this.model?(0,a.default)(this):""}updateIfOwnOccupant(e){const t=r._converse.session.get("bare_jid");e.get("jid")===t&&this.requestUpdate()}showRoomDetailsModal(e){e.preventDefault(),r.api.modal.show("converse-muc-details-modal",{model:this.model},e)}showNicknameModal(e){e.preventDefault(),r.api.modal.show("converse-muc-nickname-modal",{model:this.model},e)}toggleTopic(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),this.model.toggleSubjectHiddenState()}toggleOccupants(e){var t,s;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),null==e||null===(s=e.stopPropagation)||void 0===s||s.call(e),this.model.save({hidden_occupants:!this.model.get("hidden_occupants")})}showConfigModal(e){e.preventDefault(),r.api.modal.show("converse-muc-config-modal",{model:this.model},e)}close(e){e.preventDefault(),this.model.close()}destroy(e){e.preventDefault(),(0,i.destroyMUC)(this.model)}getHeadingButtons(e){const t=[];t.push({i18n_text:(0,o.__)("Details"),i18n_title:(0,o.__)("Show more information about this groupchat"),handler:e=>this.showRoomDetailsModal(e),a_class:"show-muc-details-modal",icon_class:"fa-info-circle",name:"details"}),"owner"===this.model.getOwnAffiliation()&&t.push({i18n_text:(0,o.__)("Configure"),i18n_title:(0,o.__)("Configure this groupchat"),handler:e=>this.showConfigModal(e),a_class:"configure-chatroom-button",icon_class:"fa-wrench",name:"configure"}),t.push({i18n_text:(0,o.__)("Nickname"),i18n_title:(0,o.__)("Change the nickname you're using in this groupchat"),handler:e=>this.showNicknameModal(e),a_class:"open-nickname-modal",icon_class:"fa-smile",name:"nickname"});const s=this.model.get("subject");s&&s.text&&t.push({i18n_text:e?(0,o.__)("Show topic"):(0,o.__)("Hide topic"),i18n_title:e?(0,o.__)("Show the topic message in the heading"):(0,o.__)("Hide the topic in the heading"),handler:e=>this.toggleTopic(e),a_class:"hide-topic",icon_class:"fa-minus-square",name:"toggle-topic"}),t.push({i18n_text:this.model.get("hidden_occupants")?(0,o.__)("Show participants"):(0,o.__)("Hide participants"),i18n_title:this.model.get("hidden_occupants")?(0,o.__)("Show the groupchat participants"):(0,o.__)("Hide the groupchat participants"),handler:e=>this.toggleOccupants(e),icon_class:"fa-users"});if(this.model.session.get("connection_status")===r.converse.ROOMSTATUS.ENTERED){const e=this.model.getAllowedCommands();e.includes("modtools")&&t.push({i18n_text:(0,o.__)("Moderate"),i18n_title:(0,o.__)("Moderate this groupchat"),handler:()=>(0,i.showModeratorToolsModal)(this.model),a_class:"moderate-chatroom-button",icon_class:"fa-user-cog",name:"moderate"}),e.includes("destroy")&&t.push({i18n_text:(0,o.__)("Destroy"),i18n_title:(0,o.__)("Remove this groupchat"),handler:e=>this.destroy(e),a_class:"destroy-chatroom-button",icon_class:"fa-trash",name:"destroy"})}r.api.settings.get("singleton")||t.push({i18n_text:(0,o.__)("Leave"),i18n_title:(0,o.__)("Leave and close this groupchat"),handler:e=>d((function*(){e.stopPropagation();const t=[(0,o.__)("Are you sure you want to leave this groupchat?")];(yield r.api.confirm((0,o.__)("Confirm"),t))&&this.close(e)})).call(this),a_class:"close-chatbox-button",standalone:"overlayed"===r.api.settings.get("view_mode"),icon_class:"fa-sign-out-alt",name:"signout"});const{chatboxviews:n}=r._converse.state,a=n.get(this.getAttribute("jid"));return a?r._converse.api.hook("getHeadingButtons",a,t):Promise.resolve(t)}}r.api.elements.define("converse-muc-heading",c)},"./src/plugins/muc-views/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js"),n=(s("./src/plugins/chatboxviews/index.js"),s("./src/plugins/muc-views/affiliation-form.js"),s("./src/plugins/muc-views/role-form.js"),s("./src/plugins/muc-views/muc.js")),o=s("./src/plugins/muc-views/utils.js");s("./src/plugins/muc-views/styles/index.scss");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{Strophe:a}=r.converse.env,{CHATROOMS_TYPE:l}=r.constants;r.converse.MUC.VIEWS={CONFIG:"config-form"},r.converse.plugins.add("converse-muc-views",{dependencies:["converse-modal","converse-dragresize","converse-controlbox","converse-chatview"],initialize(){const{_converse:e}=this;r.api.settings.extend({auto_list_rooms:!1,cache_muc_messages:!0,locked_muc_nickname:!1,modtools_disable_query:[],muc_disable_slash_commands:!1,muc_mention_autocomplete_filter:"contains",muc_mention_autocomplete_min_chars:0,muc_mention_autocomplete_show_avatar:!0,muc_roomid_policy:null,muc_roomid_policy_hint:null,muc_search_service:"api@search.jabber.network",roomconfig_whitelist:[],show_retraction_warning:!0});const t={ChatRoomView:n.default,MUCView:n.default};Object.assign(e,t),Object.assign(e.exports,t),r.api.settings.get("muc_domain")||r.api.listen.on("serviceDiscovered",(e=>{return(t=function*(){if((null==e?void 0:e.get("var"))===a.NS.MUC){if(e.entity.get("jid").includes("@"))return;(yield e.entity.getIdentity("conference","text"))&&r.api.settings.set("muc_domain",a.getDomainFromJid(e.get("from")))}},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))})();var t})),r.api.listen.on("clearsession",(()=>{const t=e.chatboxviews.get("controlbox");t&&t.roomspanel&&(t.roomspanel.model.destroy(),t.roomspanel.remove(),delete t.roomspanel)})),r.api.listen.on("chatBoxClosed",(e=>{e.get("type")===l&&(0,o.clearHistory)(e.get("jid"))})),r.api.listen.on("parseMessageForCommands",o.parseMessageForMUCCommands),r.api.listen.on("confirmDirectMUCInvitation",o.confirmDirectMUCInvitation)}})},"./src/plugins/muc-views/message-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/shared/autocomplete/utils.js"),n=s("./src/headless/index.js"),o=s("./src/shared/autocomplete/autocomplete.js"),i=s("./src/plugins/chatview/message-form.js"),a=s("./src/plugins/muc-views/utils.js"),l=s("./src/plugins/muc-views/templates/message-form.js");function d(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class c extends i.default{initialize(){var e,t=this,s=()=>super.initialize;return(e=function*(){s().call(t),yield this.model.initialized,this.initMentionAutoComplete()},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){d(o,r,n,i,a,"next",e)}function a(e){d(o,r,n,i,a,"throw",e)}i(void 0)}))}).call(this)}render(){return(0,l.default)(this)}shouldAutoComplete(){const e=this.model instanceof n.MUCOccupant?this.model.collection.chatroom:this.model;if(e){return e.session.get("connection_status")===n.converse.ROOMSTATUS.ENTERED&&!(e.features.get("moderated")&&"visitor"===e.getOwnRole())}return n.log.debug("Could not determine MUC for MUCMessageForm element"),!1}initMentionAutoComplete(){this.auto_complete=new o.default(this,{auto_first:!0,min_chars:n.api.settings.get("muc_mention_autocomplete_min_chars"),match_current_word:!0,list:()=>this.getAutoCompleteList(),filter:"contains"==n.api.settings.get("muc_mention_autocomplete_filter")?r.FILTER_CONTAINS:r.FILTER_STARTSWITH,ac_triggers:["Tab","@"],include_triggers:[],item:(e,t)=>(0,a.getAutoCompleteListItem)(this.model,e,t)}),this.auto_complete.on("suggestion-box-selectcomplete",(()=>this.auto_completing=!1))}getAutoCompleteList(){return this.model.getAllKnownNicknames().map((e=>({label:e,value:`@${e}`})))}onKeyDown(e){this.shouldAutoComplete()&&this.auto_complete.onKeyDown(e)||super.onKeyDown(e)}onKeyUp(e){this.shouldAutoComplete()&&this.auto_complete.auto_completing&&this.auto_complete.evaluate(e),super.onKeyUp(e)}}n.api.elements.define("converse-muc-message-form",c)},"./src/plugins/muc-views/modals/add-muc.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./src/headless/index.js"),n=s("./src/plugins/modal/modal.js"),o=s("./src/plugins/muc-views/modals/templates/add-muc.js"),i=s("./src/i18n/index.js");s("./src/plugins/muc-views/styles/add-muc-modal.scss");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function c(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const u=r.converse.env.utils,{Strophe:h}=r.converse.env;class m extends n.default{initialize(){super.initialize(),this.requestUpdate(),this.addEventListener("shown.bs.modal",(()=>{var e;null===(e=this.querySelector('input[name="chatroom"]'))||void 0===e||e.focus()}),!1)}renderModal(){return(0,o.default)(this)}getModalTitle(){return(0,i.__)("Enter a new Groupchat")}parseRoomDataFromEvent(e){var t;const s=new FormData(e),n=null===(t=s.get("chatroom"))||void 0===t?void 0:t.trim();let o;if(r.api.settings.get("locked_muc_nickname")){if(o=r._converse.exports.getDefaultMUCNickname(),!o)throw new Error("Using locked_muc_nickname but no nickname found!")}else o=s.get("nickname").trim();return{jid:n,nick:o}}normalizeNode(e){return e.trim().replace(/\s+/g,"-").replace(/\u0142/g,"l").replace(/[^\x00-\x7F]/g,(e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,""))).replace(/[^a-zA-Z0-9-]/g,"-").replace(/-+/g,"-").replace(/[^a-zA-Z0-9]$/g,"").toLowerCase()}openChatRoom(e){return l((function*(){e.preventDefault();const t=this.querySelector("converse-autocomplete");if((yield t.onChange()).error_message)return;const{escapeNode:s,getNodeFromJid:n,getDomainFromJid:o}=h,i=e.target,a=this.parseRoomDataFromEvent(i);var l;const m={nick:null!==(l=a.nick)&&void 0!==l?l:void 0};let f;if(r.api.settings.get("locked_muc_domain")||!u.isValidJID(a.jid)){const e=yield u.muc.getDefaultMUCService();e&&(m.name=a.jid,m.auto_configure=!0,m.roomconfig={roomname:a.jid},f=`${this.normalizeNode(a.jid)}@${e}`.toLowerCase())}f||(f=`${s(n(a.jid))}@${o(a.jid)}`.toLowerCase()),r.api.rooms.open(f,c(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){d(e,t,s[t])}))}return e}({},m),{jid:f}),!0),i.reset(),this.modal.hide()})).call(this)}validateMUCJID(e){return l((function*(){if(0===e.length)return(0,i.__)("Invalid groupchat address, it cannot be empty.");if(e.split("/").length-1>0)return(0,i.__)("Invalid groupchat address, a forward slash is not allowed.");if(e.split("@").length-1>1)return(0,i.__)("Invalid groupchat address, more than one @ sign is not allowed.");if(e.startsWith("@")||e.endsWith("@"))return(0,i.__)("Invalid groupchat address, it cannot start or end with an @ sign.");if(!e.includes("@")){if(!(yield u.muc.getDefaultMUCService()))return(0,i.__)("No default groupchat service found. You'll need to specify the full address, for example room@conference.example.org")}const t=r.api.settings.get("muc_roomid_policy");if(t&&r.api.settings.get("muc_domain")){!r.api.settings.get("locked_muc_domain")&&u.isValidJID(e)||(e=`${h.escapeNode(e)}@${r.api.settings.get("muc_domain")}`);const s=h.getNodeFromJid(e),n=h.getDomainFromJid(e);if(r.api.settings.get("muc_domain")===n&&!t.test(s))return(0,i.__)("Groupchat id is invalid.")}return""}))()}}r.api.elements.define("converse-add-muc-modal",m)},"./src/plugins/muc-views/modals/config.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./src/headless/index.js"),n=s("./src/plugins/muc-views/modals/templates/muc-config.js"),o=s("./src/plugins/modal/modal.js"),i=s("./src/i18n/index.js"),a=s("./src/utils/file.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{sizzle:c,u}=r.converse.env;class h extends o.default{initialize(){super.initialize(),this.addListeners()}addListeners(){this.listenTo(this.model,"change",(()=>this.requestUpdate())),this.listenTo(this.model.features,"change:passwordprotected",(()=>this.requestUpdate())),this.listenTo(this.model.session,"change:config_stanza",(()=>this.requestUpdate()))}renderModal(){return(0,n.default)(this)}shouldUpdate(e){return e.has("model")&&this.model&&(this.stopListening(),this.addListeners(),this.getConfig()),!0}getModalTitle(){return(0,i.__)("Configure %1$s",this.model.getDisplayName())}getConfig(){return d((function*(){const e=yield this.model.fetchRoomConfiguration();this.model.session.set("config_stanza",e.outerHTML)})).call(this)}setAvatar(e){return d((function*(){if(!this.model.features.get("vcard-temp"))return;const t=new FormData(e.target).get("avatar_image");if(null==t?void 0:t.size){const e=a.isImageWithAlphaChannel?t:yield(0,a.compressImage)(t),s=new FileReader;s.onloadend=()=>d((function*(){const e={image:btoa(s.result),image_type:t.type};yield r.api.vcard.set(this.model.get("jid"),e)})).call(this),s.readAsBinaryString(e)}})).call(this)}submitConfigForm(e){return d((function*(){e.preventDefault();const t=c(':input:not([type=button]):not([type=submit]):not([name="avatar_image"][type="file"])',e.target).map(u.webForm2xForm).filter((e=>e));try{yield this.model.sendConfiguration(t)}catch(e){r.log.error(e);const t=(0,i.__)("Sorry, an error occurred while trying to submit the config form.")+" "+(0,i.__)("Check your browser's developer console for details.");r.api.alert("error",(0,i.__)("Error"),t)}try{yield this.setAvatar(e)}catch(e){return r.log.fatal(e),void this.alert([(0,i.__)("Sorry, an error happened while trying to save the groupchat avatar."),(0,i.__)("You can check your browser's developer console for any error output.")].join(" "))}yield this.model.refreshDiscoInfo(),this.modal.hide()})).call(this)}constructor(e){super(e),this.id="converse-muc-config-modal"}}r.api.elements.define("converse-muc-config-modal",h)},"./src/plugins/muc-views/modals/moderator-tools.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});s("./src/plugins/muc-views/modtools.js");var r=s("./src/plugins/modal/modal.js"),n=s("./src/i18n/index.js"),o=s("./src/headless/index.js"),i=s("./node_modules/lit/index.js");class a extends r.default{renderModal(){return i.html`<converse-modtools jid="${this.jid}" affiliation="${this.affiliation}"></converse-modtools>`}getModalTitle(){return(0,n.__)("Moderator Tools")}constructor(e){super(e),this.id="converse-modtools-modal",this.affiliation=e.affiliation,this.jid=e.jid}}o.api.elements.define("converse-modtools-modal",a)},"./src/plugins/muc-views/modals/muc-details.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/plugins/modal/modal.js"),n=s("./src/plugins/muc-views/modals/templates/muc-details.js"),o=s("./src/i18n/index.js"),i=s("./src/headless/index.js");s("./src/plugins/muc-views/styles/muc-details-modal.scss");class a extends r.default{initialize(){super.initialize(),this.listenTo(this.model,"change",(()=>this.requestUpdate())),this.listenTo(this.model.features,"change",(()=>this.requestUpdate())),this.listenTo(this.model.occupants,"add",(()=>this.requestUpdate())),this.listenTo(this.model.occupants,"change",(()=>this.requestUpdate()))}renderModal(){return(0,n.default)(this.model)}getModalTitle(){return(0,o.__)("Groupchat info")}}i.api.elements.define("converse-muc-details-modal",a)},"./src/plugins/muc-views/modals/muc-invite.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),n=s("./src/plugins/modal/modal.js"),o=(s("./src/shared/autocomplete/index.js"),s("./src/plugins/muc-views/modals/templates/muc-invite.js")),i=s("./src/i18n/index.js");const a=r.converse.env.utils;class l extends n.default{renderModal(){return(0,o.default)(this)}getModalTitle(){return(0,i.__)("Invite someone to this groupchat")}getAutoCompleteList(){return r._converse.state.roster.map((e=>({label:e.getDisplayName(),value:e.get("jid")})))}submitInviteForm(e){var t;e.preventDefault();const s=new FormData(e.target),r=null===(t=s.get("invitee_jids"))||void 0===t?void 0:t.trim(),n=s.get("reason");a.isValidJID(r)?(this.muc.directInvite(r,n),this.modal.hide()):this.state.set({invalid_invite_jid:!0})}constructor(e){super(e),this.id="converse-muc-invite-modal",this.muc=e.muc}}r.api.elements.define("converse-muc-invite-modal",l)},"./src/plugins/muc-views/modals/muc-list.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s("./src/plugins/modal/modal.js"),n=s("./src/plugins/muc-views/templates/muc-description.js"),o=s("./src/plugins/muc-views/templates/muc-list.js"),i=s("./src/templates/spinner.js"),a=s("./src/i18n/index.js"),l=s("./src/headless/index.js");const{Strophe:d,$iq:c,sizzle:u}=l.converse.env,{getAttributes:h}=l.u;function m(e){const t=l.u.ancestor(e.target,".room-item"),s=t.querySelector("div.room-info");s?(l.u.slideIn(s).then(l.u.removeElement),t.querySelector("a.room-info").classList.remove("selected")):(t.insertAdjacentElement("beforeend",l.u.getElementFromTemplateResult((0,i.default)())),l.api.disco.info(e.target.getAttribute("data-room-jid"),null).then((e=>function(e,t){var s,r;e.querySelector("span.spinner").remove(),e.querySelector("a.room-info").classList.add("selected"),e.insertAdjacentHTML("beforeend",l.u.getElementFromTemplateResult((0,n.default)({jid:t.getAttribute("from"),desc:null===(s=u('field[var="muc#roominfo_description"] value',t).shift())||void 0===s?void 0:s.textContent,occ:null===(r=u('field[var="muc#roominfo_occupants"] value',t).shift())||void 0===r?void 0:r.textContent,hidden:u('feature[var="muc_hidden"]',t).length,membersonly:u('feature[var="muc_membersonly"]',t).length,moderated:u('feature[var="muc_moderated"]',t).length,nonanonymous:u('feature[var="muc_nonanonymous"]',t).length,open:u('feature[var="muc_open"]',t).length,passwordprotected:u('feature[var="muc_passwordprotected"]',t).length,persistent:u('feature[var="muc_persistent"]',t).length,publicroom:u('feature[var="muc_publicroom"]',t).length,semianonymous:u('feature[var="muc_semianonymous"]',t).length,temporary:u('feature[var="muc_temporary"]',t).length,unmoderated:u('feature[var="muc_unmoderated"]',t).length})))}(t,e))).catch((e=>l.log.error(e))))}class f extends r.default{initialize(){super.initialize(),this.listenTo(this.model,"change:muc_domain",this.onDomainChange),this.listenTo(this.model,"change:feedback_text",(()=>this.requestUpdate())),this.addEventListener("shown.bs.modal",(()=>l.api.settings.get("locked_muc_domain")&&this.updateRoomsList())),this.model.save("feedback_text","")}renderModal(){return(0,o.default)(Object.assign(this.model.toJSON(),{show_form:!l.api.settings.get("locked_muc_domain"),server_placeholder:this.model.get("muc_domain")||(0,a.__)("conference.example.org"),items:this.items,loading_items:this.loading_items,openRoom:e=>this.openRoom(e),setDomainFromEvent:e=>this.setDomainFromEvent(e),submitForm:e=>this.showRooms(e),toggleRoomInfo:e=>this.toggleRoomInfo(e)}))}getModalTitle(){return(0,a.__)("Query for Groupchats")}openRoom(e){e.preventDefault();const t=e.target.getAttribute("data-room-jid"),s=e.target.getAttribute("data-room-name");this.modal.hide(),l.api.rooms.open(t,{name:s},!0)}toggleRoomInfo(e){e.preventDefault(),m(e)}onDomainChange(){l.api.settings.get("auto_list_rooms")&&this.updateRoomsList()}onRoomsFound(e){this.loading_items=!1;const t=e?u("query item",e):[];return t.length?(this.model.set({feedback_text:(0,a.__)("Groupchats found")},{silent:!0}),this.items=t.map(h)):(this.items=[],this.model.set({feedback_text:(0,a.__)("No groupchats found")},{silent:!0})),this.requestUpdate(),!0}updateRoomsList(){const e=c({to:this.model.get("muc_domain"),from:l.api.connection.get().jid,type:"get"}).c("query",{xmlns:d.NS.DISCO_ITEMS});l.api.sendIQ(e).then((e=>this.onRoomsFound(e))).catch((()=>this.onRoomsFound()))}showRooms(e){e.preventDefault(),this.loading_items=!0,this.requestUpdate();const t=new FormData(e.target);this.model.setDomain(t.get("server")),this.updateRoomsList()}setDomainFromEvent(e){this.model.setDomain(e.target.value)}setNick(e){this.model.save({nick:e.target.value})}constructor(e){super(e),this.items=[],this.loading_items=!1}}l.api.elements.define("converse-muc-list-modal",f)},"./src/plugins/muc-views/modals/nickname.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),i=s("./src/plugins/modal/modal.js");class a extends i.default{renderModal(){return r.html`<converse-muc-nickname-form jid="${this.model.get("jid")}"></converse-muc-nickname-form>`}getModalTitle(){return(0,o.__)("Change your nickname")}}n.api.elements.define("converse-muc-nickname-modal",a)},"./src/plugins/muc-views/modals/occupant.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),i=s("./src/plugins/modal/modal.js"),a=s("./src/plugins/muc-views/modals/templates/occupant.js");const{u:l}=n.converse.env;class d extends i.default{initialize(){var e;super.initialize();const t=null!==(e=this.model)&&void 0!==e?e:this.message;this.listenTo(t,"change",(()=>this.requestUpdate())),n.api.trigger("occupantModalInitialized",{model:this.model,message:this.message})}renderModal(){return(0,a.default)(this)}openChat(e){e.preventDefault(),n.api.chats.open(this.model.get("jid"),{},!0),this.close()}getVcard(){var e;const t=null!==(e=this.model)&&void 0!==e?e:this.message;if(t.vcard)return t.vcard;const s=(null==t?void 0:t.get("jid"))||(null==t?void 0:t.get("from"));return s?n._converse.state.vcards.get(s):null}getModalTitle(){var e;const t=null!==(e=this.model)&&void 0!==e?e:this.message;return null==t?void 0:t.getDisplayName()}addToContacts(){var e;const t=(null!==(e=this.model)&&void 0!==e?e:this.message).get("jid");t&&n.api.modal.show("converse-add-contact-modal",{state:new r.Model({jid:t})})}toggleForm(e){"row-form"===l.ancestor(e.target,".toggle-form").getAttribute("data-form")?this.show_role_form=!this.show_role_form:this.show_affiliation_form=!this.show_affiliation_form,this.requestUpdate()}constructor(e){super(),this.message=e.message,this.addEventListener("affiliationChanged",(()=>this.alert((0,o.__)("Affiliation changed")))),this.addEventListener("roleChanged",(()=>this.alert((0,o.__)("role changed"))))}}n.api.elements.define("converse-muc-occupant-modal",d)},"./src/plugins/muc-views/modals/styles/config.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/modals/styles/config.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/modals/styles/occupant.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/modals/styles/occupant.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/modals/templates/add-muc.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/dompurify/dist/purify.es.mjs"),n=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js"),i=s("./node_modules/lit/directives/unsafe-html.js"),a=s("./src/plugins/muc-views/search.js"),l=s("./src/i18n/index.js");const d=e=>{const t=(0,l.__)("Join");let s;s=n.api.settings.get("locked_muc_domain")?(0,l.__)("Groupchat name"):(0,l.__)("Groupchat name or address");const d=n.api.settings.get("muc_roomid_policy_hint"),c=n.api.settings.get("muc_search_service");return o.html`<form class="converse-form add-chatroom needs-validation" @submit="${t=>e.openChatRoom(t)}" novalidate><div class="mb-3"><label for="chatroom" class="form-label">${s}:</label><div class="input-group">${c?o.html`<converse-autocomplete .getAutoCompleteList="${a.getAutoCompleteList}" .validate="${t=>e.validateMUCJID(t)}" ?autofocus="${!0}" class="add-muc-autocomplete" min_chars="3" name="chatroom" position="below" required></converse-autocomplete>`:""}</div>${d?o.html`<div class="mb-3">${(0,i.unsafeHTML)(r.default.sanitize(d,{ALLOWED_TAGS:["b","br","em"]}))}</div>`:""}</div>${n.api.settings.get("locked_muc_nickname")?"":(()=>{const e=(0,l.__)("Nickname"),t=(0,l.__)("This field is required");return o.html`<div class="mb-3"><label for="nickname" class="form-label">${e}:</label> <input type="text" title="${t}" required name="nickname" value="${n._converse.exports.getDefaultMUCNickname()||""}" class="form-control"></div>`})()} <input type="submit" class="btn btn-primary mt-3" name="join" value="${t||""}"></form>`}},"./src/plugins/muc-views/modals/templates/muc-config.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),n=s("./node_modules/lit/index.js"),o=s("./src/templates/spinner.js"),i=s("./src/i18n/index.js");s("./src/shared/components/image-picker.js"),s("./src/plugins/muc-views/modals/styles/config.scss");const a=r.converse.env.utils,l=e=>{const t=r.api.settings.get("roomconfig_whitelist");let s=[],l="",d=(0,i.__)("Loading configuration form");const c=e.model.session.get("config_stanza");if(c){var u,h;const n=a.toStanza(c);let{fields:o}=r.parsers.parseXForm(n);t.length&&(o=o.filter((e=>t.includes(e.var))));const i={new_password:!e.model.features.get("passwordprotected"),fixed_username:e.model.get("jid")};s=o.map((e=>a.xFormField2TemplateResult(e,i))),l=null===(u=n.querySelector("instructions"))||void 0===u?void 0:u.textContent,d=null===(h=n.querySelector("title"))||void 0===h?void 0:h.textContent}const m=(0,i.__)("Save");return n.html`<form class="converse-form chatroom-form ${s.length?"":"converse-form--spinner"}" autocomplete="off" @submit="${t=>e.submitConfigForm(t)}"><fieldset><legend class="centered">${d}</legend>${d!==l?n.html`<p class="form-help">${l}</p>`:""} ${s.length&&e.model.features.get("vcard-temp")?n.html`<div class="row py-2"><converse-image-picker .model="${e.model}" width="96" height="96"></converse-image-picker></div>`:""} ${s.length?s:(0,o.default)({classes:"hor_centered"})}</fieldset>${s.length?n.html`<fieldset><input type="submit" class="btn btn-primary" value="${m}"></fieldset>`:""}</form>`}},"./src/plugins/muc-views/modals/templates/muc-details.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/i18n/index.js"),n=s("./node_modules/lit/index.js");const o=e=>{var t;const s=e.config.toJSON(),o=e.features.toJSON(),i=e.occupants.filter((e=>"offline"!==e.get("show"))).length,a=(0,r.__)("XMPP address"),l=(0,r.__)("Message archiving"),d=(0,r.__)("Messages are archived on the server"),c=(0,r.__)("Description"),u=(0,r.__)("Features"),h=(0,r.__)("Hidden"),m=(0,r.__)("This groupchat is not publicly searchable"),f=(0,r.__)("This groupchat is restricted to members only"),p=(0,r.__)("Members only"),g=(0,r.__)("Moderated"),v=(0,r.__)("Participants entering this groupchat need to request permission to write"),_=(0,r.__)("Name"),y=(0,r.__)("This groupchat does not require a password upon entry"),b=(0,r.__)("No password required"),j=(0,r.__)("Not anonymous"),w=(0,r.__)("All other groupchat participants can see your XMPP address"),S=(0,r.__)("Not moderated"),x=(0,r.__)("Participants entering this groupchat can write right away"),E=(0,r.__)("Online users"),A=(0,r.__)("Open"),O=(0,r.__)("Anyone can join this groupchat"),C=(0,r.__)("This groupchat requires a password before entry"),T=(0,r.__)("Password protected"),$=(0,r.__)("Persistent"),k=(0,r.__)("This groupchat persists even if it's unoccupied"),M=(0,r.__)("Public"),I=(0,r.__)("This groupchat is publicly searchable"),P=(0,r.__)("Semi-anonymous"),N=(0,r.__)("Only moderators can see your XMPP address"),D=(0,r.__)("Temporary"),R=(0,r.__)("This groupchat will disappear once the last person leaves");return n.html`<div class="room-info"><converse-avatar .model="${e}" class="avatar align-self-center" name="${e.getDisplayName()}" nonce="${null===(t=e.vcard)||void 0===t?void 0:t.get("vcard_updated")}" height="72" width="72"></converse-avatar><p class="room-info"><strong>${_}:</strong> ${e.get("name")}</p><p class="room-info"><strong>${a}:</strong><converse-texture text="xmpp:${e.get("jid")}?join"></converse-texture></p><br><p class="room-info"><strong>${c}:</strong><converse-texture text="${s.description}" render_styling></converse-texture></p>${e.get("subject")?(e=>{const t=e.get("subject"),s=(0,r.__)("Topic"),o=(0,r.__)("Topic author");return n.html`<p class="room-info"><strong>${s}:</strong><converse-texture text="${t.text}" render_styling></converse-texture></p><p class="room-info"><strong>${o}:</strong> ${t&&t.author}</p>`})(e):""}<p class="room-info"><strong>${E}:</strong> ${i}</p><p class="room-info"><strong>${u}:</strong></p><div class="chatroom-features"><ul class="features-list">${o.passwordprotected?n.html`<li class="feature"><converse-icon size="1em" class="fa fa-lock"></converse-icon>${T} - <em>${C}</em></li>`:""} ${o.unsecured?n.html`<li class="feature"><converse-icon size="1em" class="fa fa-unlock"></converse-icon>${b} - <em>${y}</em></li>`:""} ${o.hidden?n.html`<li class="feature"><converse-icon size="1em" class="fa fa-eye-slash"></converse-icon>${h} - <em>${m}</em></li>`:""} ${o.public_room?n.html`<li class="feature"><converse-icon size="1em" class="fa fa-eye"></converse-icon>${M} - <em>${I}</em></li>`:""} ${o.membersonly?n.html`<li class="feature"><converse-icon size="1em" class="fa fa-address-book"></converse-icon>${p} - <em>${f}</em></li>`:""} ${o.open?n.html`<li class="feature"><converse-icon size="1em" class="fa fa-globe"></converse-icon>${A} - <em>${O}</em></li>`:""} ${o.persistent?n.html`<li class="feature"><converse-icon size="1em" class="fa fa-save"></converse-icon>${$} - <em>${k}</em></li>`:""} ${o.temporary?n.html`<li class="feature"><converse-icon size="1em" class="fa fa-snowflake"></converse-icon>${D} - <em>${R}</em></li>`:""} ${o.nonanonymous?n.html`<li class="feature"><converse-icon size="1em" class="fa fa-id-card"></converse-icon>${j} - <em>${w}</em></li>`:""} ${o.semianonymous?n.html`<li class="feature"><converse-icon size="1em" class="fa fa-user-secret"></converse-icon>${P} - <em>${N}</em></li>`:""} ${o.moderated?n.html`<li class="feature"><converse-icon size="1em" class="fa fa-gavel"></converse-icon>${g} - <em>${v}</em></li>`:""} ${o.unmoderated?n.html`<li class="feature"><converse-icon size="1em" class="fa fa-info-circle"></converse-icon>${S} - <em>${x}</em></li>`:""} ${o.mam_enabled?n.html`<li class="feature"><converse-icon size="1em" class="fa fa-database"></converse-icon>${l} - <em>${d}</em></li>`:""}</ul></div><p></p></div>`}},"./src/plugins/muc-views/modals/templates/muc-invite.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js");const o=e=>{const t=(0,n.__)("Invite"),s=(0,n.__)("user@example.org"),o=(0,n.__)("Please enter a valid XMPP address"),i=(0,n.__)("XMPP Address"),a=(0,n.__)("Optional reason for the invitation");return r.html`<form class="converse-form" @submit="${t=>e.submitInviteForm(t)}"><fieldset><label class="form-label clearfix" for="invitee_jids">${i}:</label> ${e.state.get("invalid_invite_jid")?r.html`<div class="error error-feedback">${o}</div>`:""}<converse-autocomplete .getAutoCompleteList="${()=>e.getAutoCompleteList()}" ?autofocus="${!0}" min_chars="1" position="below" required="required" name="invitee_jids" id="invitee_jids" placeholder="${s}"></converse-autocomplete></fieldset><fieldset><label class="form-label">${a}:</label> <textarea class="form-control" name="reason"></textarea></fieldset><fieldset><input type="submit" class="btn btn-primary" value="${t}"></fieldset></form>`}},"./src/plugins/muc-views/modals/templates/occupant.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});s("./src/shared/avatar/avatar.js");var r=s("./src/i18n/index.js"),n=s("./node_modules/lit/index.js"),o=s("./node_modules/lit/directives/until.js"),i=s("./src/headless/index.js");s("./src/plugins/muc-views/modals/styles/occupant.scss");const a=e=>{var t,s,a,l,d;const c=null!==(d=e.model)&&void 0!==d?d:e.message,u=null==c?void 0:c.get("jid"),h=e.getVcard(),m=c.get("nick"),f=c.get("occupant_id"),p=null===(t=e.model)||void 0===t?void 0:t.get("role"),g=null===(s=e.model)||void 0===s?void 0:s.get("affiliation"),v=(null===(l=e.model)||void 0===l||null===(a=l.get("hats"))||void 0===a?void 0:a.length)?e.model.get("hats"):null,_=e.model.collection.chatroom,y=(0,r.__)("Add to Contacts"),b=_.getAllowedCommands().includes("modtools"),j=_.features.get("nonanonymous")||"moderator"===_.getOwnRole(),w=u!=i._converse.session.get("bare_jid"),S=i.api.settings.get("singleton")?"":i.api.contacts.get(u).then((e=>!e&&w&&j)).then((t=>t?n.html`<li><button class="btn btn-primary" type="button" @click="${()=>e.addToContacts()}">${y}</button></li>`:""));return n.html`<div class="row"><div class="col-auto"><converse-avatar .model="${e.model}" class="avatar modal-avatar" name="${e.model.getDisplayName()}" nonce="${null==h?void 0:h.get("vcard_updated")}" height="120" width="120"></converse-avatar></div><div class="col"><ul class="occupant-details list-unstyled"><li class="row mb-2"><div class="col text-start"><strong>${(0,r.__)("Nickname")}:</strong></div><div class="col text-end">${m}</div></li><li class="row mb-2"><div class="col text-start"><strong>${(0,r.__)("XMPP Address")}:</strong></div><div class="col text-end">${u?n.html`<a href="#" @click="${e.openChat}">${u}</a>`:""}</div></li><li class="row mb-2"><div class="col text-start"><strong>${(0,r.__)("Affiliation")}:</strong></div><div class="col text-end">${g}  ${b?n.html`<a href="#" data-form="affiliation-form" class="toggle-form" @click="${t=>e.toggleForm(t)}"><converse-icon class="fa fa-wrench" size="1em"></converse-icon></a>`:""}</div>${e.show_affiliation_form?n.html`<div class="row mt-2"><converse-muc-affiliation-form jid="${u}" .muc="${_}" affiliation="${g}"></converse-muc-affiliation-form></div>`:""}</li><li class="row mb-2"><div class="col text-start"><strong>${(0,r.__)("Role")}:</strong></div><div class="col text-end">${p}  ${b&&p?n.html`<a href="#" data-form="row-form" class="toggle-form" @click="${t=>e.toggleForm(t)}"><converse-icon class="fa fa-wrench" size="1em"></converse-icon></a>`:""}</div>${e.show_role_form?n.html`<div class="row mt-2"><converse-muc-role-form jid="${u}" .muc="${_}" role="${p}"></converse-muc-role-form></div>`:""}</li><li class="row mb-2"><div class="col text-start"><strong>${(0,r.__)("Hats")}:</strong></div><div class="col text-end">${v}</div></li><li class="row mb-2"><div class="col text-start"><strong>${(0,r.__)("Occupant Id")}:</strong></div><div class="col text-end text-occupant-id">${f}</div></li>${(0,o.until)(S,"")}</ul></div></div>`}},"./src/plugins/muc-views/modtools.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/@converse/openpromise/dist/openpromise.js"),n=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),i=s("./src/shared/components/element.js"),a=s("./src/plugins/muc-views/templates/moderator-tools.js");s("./src/plugins/muc-views/styles/moderator-tools.scss");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{u:c}=n.converse.env,{AFFILIATIONS:u,ROLES:h}=n.constants;class m extends i.CustomElement{static get properties(){return{affiliation:{type:String},affiliations_filter:{type:String,attribute:!1},alert_message:{type:String,attribute:!1},alert_type:{type:String,attribute:!1},jid:{type:String},muc:{type:Object,attribute:!1},role:{type:String},roles_filter:{type:String,attribute:!1},tab:{type:String},users_with_affiliation:{type:Array,attribute:!1},users_with_role:{type:Array,attribute:!1}}}updated(e){e.has("role")&&this.onSearchRoleChange(),e.has("affiliation")&&this.onSearchAffiliationChange(),e.has("jid")&&e.get("jid")&&this.initialize()}initialize(){return d((function*(){this.initialized=(0,r.getOpenPromise)();const e=yield n.api.rooms.get(this.jid);yield e.initialized,this.muc=e,this.initialized.resolve()})).call(this)}render(){var e;if(null===(e=this.muc)||void 0===e?void 0:e.occupants){const e=this.muc.occupants.getOwnOccupant();return(0,a.default)(this,{affiliations_filter:this.affiliations_filter,alert_message:this.alert_message,alert_type:this.alert_type,assignable_affiliations:e.getAssignableAffiliations(),assignable_roles:e.getAssignableRoles(),filterAffiliationResults:e=>this.filterAffiliationResults(e),filterRoleResults:e=>this.filterRoleResults(e),loading_users_with_affiliation:this.loading_users_with_affiliation,queryAffiliation:e=>this.queryAffiliation(e),queryRole:e=>this.queryRole(e),queryable_affiliations:u.filter((e=>!n.api.settings.get("modtools_disable_query").includes(e))),queryable_roles:h.filter((e=>!n.api.settings.get("modtools_disable_query").includes(e))),roles_filter:this.roles_filter,switchTab:e=>this.switchTab(e),tab:this.tab,toggleForm:e=>this.toggleForm(e),users_with_affiliation:this.users_with_affiliation,users_with_role:this.users_with_role})}return""}switchTab(e){e.stopPropagation(),e.preventDefault(),this.tab=e.target.getAttribute("data-name"),this.requestUpdate()}onSearchAffiliationChange(){return d((function*(){if(this.affiliation){if(yield this.initialized,this.clearAlert(),this.loading_users_with_affiliation=!0,this.users_with_affiliation=null,this.shouldFetchAffiliationsList()){const e=yield n.api.rooms.affiliations.get(this.affiliation,this.jid);e instanceof Error?(this.alert(e.message,"danger"),this.users_with_affiliation=[]):this.users_with_affiliation=e}else this.users_with_affiliation=this.muc.getOccupantsWithAffiliation(this.affiliation);this.loading_users_with_affiliation=!1}})).call(this)}onSearchRoleChange(){return d((function*(){this.role&&(yield this.initialized,this.clearAlert(),this.users_with_role=this.muc.getOccupantsWithRole(this.role))})).call(this)}shouldFetchAffiliationsList(){const e=this.affiliation;if("none"===e)return!1;return!n.MUCOccupants.getAutoFetchedAffiliationLists().includes(e)}toggleForm(e){e.stopPropagation(),e.preventDefault();const t=c.ancestor(e.target,".toggle-form"),s=t.getAttribute("data-form"),r=c.ancestor(t,".list-group-item").querySelector(s);c.hasClass("hidden",r)?c.removeClass("hidden",r):c.addClass("hidden",r)}filterRoleResults(e){this.roles_filter=e.target.value,this.requestUpdate()}filterAffiliationResults(e){this.affiliations_filter=e.target.value}queryRole(e){e.stopPropagation(),e.preventDefault();const t=new FormData(e.target).get("role");this.role=null,this.role=t}queryAffiliation(e){e.stopPropagation(),e.preventDefault();const t=new FormData(e.target).get("affiliation");this.affiliation=null,this.affiliation=t}alert(e,t){this.alert_message=e,this.alert_type=t}clearAlert(){this.alert_message=void 0,this.alert_type=void 0}constructor(){super(),this.jid=null,this.tab="affiliations",this.affiliation=null,this.affiliations_filter="",this.role="",this.roles_filter="",this.addEventListener("affiliationChanged",(()=>{this.alert((0,o.__)("Affiliation changed"),"primary"),this.onSearchAffiliationChange(),this.requestUpdate()})),this.addEventListener("roleChanged",(()=>{this.alert((0,o.__)("Role changed"),"primary"),this.requestUpdate()}))}}n.api.elements.define("converse-modtools",m)},"./src/plugins/muc-views/muc-chat-content.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/headless/index.js"),n=s("./src/shared/chat/chat-content.js");s("./src/shared/chat/message-history.js"),s("./src/plugins/muc-views/styles/muc-chat-content.scss");function o(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class i extends n.default{initialize(){var e,t=this,s=()=>super.initialize;return(e=function*(){yield s().call(t),this.listenTo(this.model,"change:hidden_occupants",(()=>this.requestUpdate())),this.listenTo(this.model.occupants,"change",(()=>this.requestUpdate()))},function(){var t=this,s=arguments;return new Promise((function(r,n){var i=e.apply(t,s);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)}))}).call(this)}}r.api.elements.define("converse-muc-chat-content",i)},"./src/plugins/muc-views/muc.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),n=s("./src/shared/chat/baseview.js"),o=s("./src/plugins/dragresize/mixin.js"),i=s("./src/plugins/muc-views/templates/muc.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class d extends((0,o.default)(n.default)){initialize(){return(e=function*(){this.model=yield r.api.rooms.get(this.jid),r._converse.state.chatboxviews.add(this.jid,this),this.setAttribute("id",this.model.get("box_id")),this.listenTo(this.model.session,"change:connection_status",this.onConnectionStatusChanged),this.listenTo(this.model.session,"change:view",(()=>this.requestUpdate())),document.addEventListener("visibilitychange",(()=>this.onWindowStateChanged())),this.onConnectionStatusChanged(),this.model.maybeShow(),r.api.trigger("chatRoomViewInitialized",this)},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}).call(this);var e}render(){return(0,i.default)(this)}onConnectionStatusChanged(){this.model.session.get("connection_status")===r.converse.ROOMSTATUS.CONNECTING&&(this.model.session.save({disconnection_actor:void 0,disconnection_message:void 0,disconnection_reason:void 0}),this.model.save({moved_jid:void 0,password_validation_message:void 0,reason:void 0})),this.requestUpdate()}constructor(...e){super(...e),l(this,"length",300),l(this,"is_chatroom",!0)}}r.api.elements.define("converse-muc",d)},"./src/plugins/muc-views/nickname-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/plugins/muc-views/templates/muc-nickname-form.js");s("./src/plugins/muc-views/styles/nickname-form.scss");class i extends n.CustomElement{static get properties(){return{jid:{type:String}}}shouldUpdate(e){if(e.has("jid")&&this.jid){const{chatboxes:e}=r._converse.state;this.model=e.get(this.jid)}return!0}render(){return(0,o.default)(this)}submitNickname(e){e.preventDefault();const t=e.target.nick.value.trim();t&&(this.model.isEntered()?(this.model.setNickname(t),this.closeModal()):this.model.join(t))}closeModal(){document.querySelector("converse-muc-nickname-modal").close()}constructor(){super(),this.jid=null,this.model=null}}r.api.elements.define("converse-muc-nickname-form",i);const a=i},"./src/plugins/muc-views/occupant-bottom-panel.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),n=s("./src/i18n/index.js"),o=(s("./src/shared/autocomplete/index.js"),s("./src/plugins/chatview/bottom-panel.js")),i=s("./src/plugins/muc-views/templates/occupant-bottom-panel.js");s("./src/plugins/muc-views/styles/occupant-bottom-panel.scss");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class l extends o.default{static get properties(){return{model:{type:Object,noAccessor:!0},muc:{type:Object}}}initialize(){var e,t=this,s=()=>super.initialize;return(e=function*(){yield s().call(t),this.listenTo(this.muc.session,"change:connection_status",(()=>this.requestUpdate()))},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}).call(this)}render(){return this.model?(0,i.default)(this):""}canPostMessages(){return this.muc.isEntered()&&"offline"!==this.model.get("show")}openChat(){const e=this.model.get("jid");return e?r.api.chats.open(e,{},!0):r.api.alert("error",(0,n.__)("Error"),"Could not find XMPP address")}invite(){const e=this.model.get("jid");return r.api.listen.once("roomInviteSent",(()=>r.api.alert("info",(0,n.__)("Success"),(0,n.__)("The user has been invited to join this groupchat")))),e?this.muc.directInvite(e):r.api.alert("error",(0,n.__)("Error"),"Could not find XMPP address")}constructor(){super(),this.muc=null}}r.api.elements.define("converse-occupant-bottom-panel",l)},"./src/plugins/muc-views/occupant.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/index.js"),o=s("./src/shared/components/element.js"),i=s("./src/plugins/muc-views/templates/muc-occupant.js");s("./src/plugins/muc-views/occupant-bottom-panel.js"),s("./src/plugins/muc-views/styles/muc-occupant.scss");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{u:l}=n.converse.env;class d extends o.CustomElement{static get properties(){return{muc_jid:{type:String},occupant_id:{type:String}}}initialize(){var e,t=this,s=()=>super.initialize;return(e=function*(){s().call(t);const{chatboxes:e}=n._converse.state;this.muc=e.get(this.muc_jid),yield this.muc.initialized,this.model=this.muc.occupants.get(this.occupant_id),this.requestUpdate()},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}).call(this)}render(){return this.muc?(0,i.default)(this):""}openChat(e){n.api.chats.open(e,{},!0)}closeSidebar(){l.safeSave(this.muc,{hidden_occupants:!0})}showOccupantModal(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),n.api.modal.show("converse-muc-occupant-modal",{model:this.model},e)}getVcard(){const e=this.model;if(e.vcard)return e.vcard;const t=(null==e?void 0:e.get("jid"))||(null==e?void 0:e.get("from"));return t?n._converse.state.vcards.get(t):null}addToContacts(){const e=this.model.get("jid");e&&n.api.modal.show("converse-add-contact-modal",{state:new r.Model({jid:e})})}toggleForm(e){"row-form"===l.ancestor(e.target,".toggle-form").getAttribute("data-form")?this.show_role_form=!this.show_role_form:this.show_affiliation_form=!this.show_affiliation_form,this.requestUpdate()}constructor(){super(),this.muc_jid=null,this.occupant_id=null}}n.api.elements.define("converse-muc-occupant",d)},"./src/plugins/muc-views/occupants.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lodash-es/debounce.js"),n=s("./src/headless/index.js"),o=s("./src/shared/components/element.js"),i=s("./src/plugins/muc-views/templates/muc-occupants.js");s("./src/shared/autocomplete/index.js"),s("./src/plugins/muc-views/modals/muc-invite.js"),s("./src/plugins/muc-views/occupant.js"),s("./src/shared/styles/status.scss"),s("./src/plugins/muc-views/styles/muc-occupants.scss");const{initStorage:a}=n.u;class l extends o.CustomElement{static get properties(){return{jid:{type:String}}}initialize(){const e=`_converse.occupants-filter-${this.jid}`;this.filter=new n.RosterFilter,this.filter.id=e,a(this.filter,e),this.filter.fetch();const{chatboxes:t}=n._converse.state;this.model=t.get(this.jid);const s=(0,r.default)((()=>this.requestUpdate()),200,{maxWait:1e3});this.listenTo(this.model,"change",(()=>this.requestUpdate())),this.listenTo(this.model.occupants,"add",s),this.listenTo(this.model.occupants,"change",s),this.listenTo(this.model.occupants,"remove",s),this.listenTo(this.model.occupants,"sort",s),this.listenTo(this.model.features,"change:open",(()=>this.requestUpdate())),this.model.initialized.then((()=>this.requestUpdate()))}render(){return(0,i.default)(this)}showInviteModal(e){e.preventDefault(),n.api.modal.show("converse-muc-invite-modal",{muc:this.model},e)}toggleFilter(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),n.u.safeSave(this.model,{filter_visible:!this.model.get("filter_visible")})}closeSidebar(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),n.u.safeSave(this.model,{hidden_occupants:!0})}constructor(){super(),this.jid=null}}n.api.elements.define("converse-muc-occupants",l)},"./src/plugins/muc-views/password-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/plugins/muc-views/templates/muc-password-form.js"),n=s("./src/shared/components/element.js"),o=s("./src/headless/index.js");class i extends n.CustomElement{static get properties(){return{jid:{type:String}}}connectedCallback(){super.connectedCallback();const{chatboxes:e}=o._converse.state;this.model=e.get(this.jid),this.listenTo(this.model,"change:password_validation_message",(()=>this.requestUpdate())),this.requestUpdate()}render(){return(0,r.default)({jid:this.model.get("jid"),submitPassword:e=>this.submitPassword(e),validation_message:this.model.get("password_validation_message")})}submitPassword(e){e.preventDefault();const t=this.querySelector("input[type=password]").value;this.model.join(this.model.get("nick"),t),this.model.set("password_validation_message",null)}constructor(){super(),this.jid=null}}o.api.elements.define("converse-muc-password-form",i);const a=i},"./src/plugins/muc-views/role-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/headless/index.js"),n=s("./src/i18n/index.js"),o=s("./src/shared/components/element.js"),i=s("./src/plugins/muc-views/templates/role-form.js");s("./src/plugins/muc-views/styles/role-form.scss");const{Strophe:a,sizzle:l}=r.converse.env;class d extends o.CustomElement{static get properties(){return{muc:{type:Object},jid:{type:String},role:{type:String},alert_message:{type:String,attribute:!1},alert_type:{type:String,attribute:!1}}}render(){return(0,i.default)(this)}alert(e,t){this.alert_message=e,this.alert_type=t}assignRole(e){e.stopPropagation(),e.preventDefault(),this.alert();const t=new FormData(e.target),s=this.muc.getOccupant(t.get("jid")||t.get("nick")),o=t.get("role"),i=t.get("reason");this.muc.setRole(s,o,i,(()=>{const e=new CustomEvent("roleChanged",{bubbles:!0});this.dispatchEvent(e)}),(e=>{l(`not-allowed[xmlns="${a.NS.STANZAS}"]`,e).length?this.alert((0,n.__)("You're not allowed to make that change"),"danger"):(this.alert((0,n.__)("Sorry, something went wrong while trying to set the role"),"danger"),r.u.isErrorObject(e)&&r.log.error(e))}))}constructor(){super(),this.muc=null,this.nick=null,this.jid=null}}r.api.elements.define("converse-muc-role-form",d);const c=d},"./src/plugins/muc-views/search.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{getAutoCompleteList:()=>c});var r=s("./src/headless/index.js");function n(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{Strophe:o,$iq:i,sizzle:a}=r.converse.env;o.addNamespace("MUCSEARCH","https://xmlns.zombofant.net/muclumbus/search/1.0");const l={};function d(e){return(t=function*(){const t=r.api.settings.get("muc_search_service"),s=r._converse.session.get("bare_jid"),n=i({type:"get",from:s,to:t}).c("search",{xmlns:o.NS.MUCSEARCH}).c("set",{xmlns:o.NS.RSM}).c("max").t(10).up().up().c("x",{xmlns:o.NS.XFORM,type:"submit"}).c("field",{var:"FORM_TYPE",type:"hidden"}).c("value").t("https://xmlns.zombofant.net/muclumbus/search/1.0#params").up().up().c("field",{var:"q",type:"text-single"}).c("value").t(e).up().up().c("field",{var:"sinname",type:"boolean"}).c("value").t("true").up().up().c("field",{var:"sindescription",type:"boolean"}).c("value").t("false").up().up().c("field",{var:"sinaddr",type:"boolean"}).c("value").t("true").up().up().c("field",{var:"min_users",type:"text-single"}).c("value").t("1").up().up().c("field",{var:"key",type:"list-single"}).c("value").t("address").up().c("option").c("value").t("nusers").up().up().c("option").c("value").t("address");let l;try{l=yield r.api.sendIQ(n)}catch(e){return r.log.error(e),[]}const d=`result[xmlns="${o.NS.MUCSEARCH}"] item`;return a(d,l).map((e=>{var t;const s=e.getAttribute("address");return{label:`${null===(t=e.querySelector("name"))||void 0===t?void 0:t.textContent} (${s})`,value:s}}))},function(){var e=this,s=arguments;return new Promise((function(r,o){var i=t.apply(e,s);function a(e){n(i,r,o,a,l,"next",e)}function l(e){n(i,r,o,a,l,"throw",e)}a(void 0)}))})();var t}function c(e){return l[e]||(l[e]=d(e)),l[e]}},"./src/plugins/muc-views/sidebar-occupant.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/index.js"),o=s("./src/shared/components/observable.js"),i=s("./src/plugins/muc-views/templates/occupant.js");s("./src/plugins/muc-views/occupant-bottom-panel.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}class c extends o.ObservableElement{static get properties(){return d(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){l(e,t,s[t])}))}return e}({},super.properties),{model:{type:r.Model},muc:{type:n.MUC}})}initialize(){var e,t=this,s=()=>super.initialize;return(e=function*(){s().call(t),yield this.muc.initialized,this.listenTo(this.model,"change",(()=>this.requestUpdate())),this.listenTo(this.model,"vcard:add",(()=>this.requestUpdate())),this.listenTo(this.model,"vcard:change",(()=>this.requestUpdate())),this.requestUpdate()},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}).call(this)}render(){return this.muc?(0,i.default)(this):""}onOccupantClicked(e,t){e.preventDefault(),this.muc.getOwnOccupant()===t?n.api.modal.show("converse-profile-modal",{model:n._converse.state.xmppstatus},e):this.muc.save({sidebar_view:`occupant:${t.id}`})}constructor(){super(),this.muc=null,this.observable="once"}}n.api.elements.define("converse-muc-occupant-list-item",c)},"./src/plugins/muc-views/sidebar.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/plugins/muc-views/templates/muc-sidebar.js");s("./src/plugins/muc-views/modals/muc-invite.js"),s("./src/plugins/muc-views/occupants.js"),s("./src/shared/autocomplete/index.js"),s("./src/shared/styles/status.scss"),s("./src/plugins/muc-views/styles/muc-sidebar.scss");class i extends n.CustomElement{static get properties(){return{jid:{type:String}}}initialize(){const{chatboxes:e}=r._converse.state;this.model=e.get(this.jid),this.listenTo(this.model,"change",(()=>this.requestUpdate())),this.listenTo(this.model.features,"change:open",(()=>this.requestUpdate())),this.model.initialized.then((()=>this.requestUpdate()))}render(){return(0,o.default)(this)}closeSidebar(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),r.u.safeSave(this.model,{hidden_occupants:!0})}constructor(){super(),this.jid=null}}r.api.elements.define("converse-muc-sidebar",i)},"./src/plugins/muc-views/styles/add-muc-modal.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/add-muc-modal.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/styles/affiliation-form.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/affiliation-form.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/styles/index.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/index.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/styles/moderator-tools.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/moderator-tools.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/styles/muc-bottom-panel.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/muc-bottom-panel.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/styles/muc-chat-content.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/muc-chat-content.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/styles/muc-details-modal.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/muc-details-modal.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/styles/muc-head.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/muc-head.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/styles/muc-occupant.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/muc-occupant.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/styles/muc-occupants.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/muc-occupants.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/styles/muc-sidebar.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/muc-sidebar.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/styles/nickname-form.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/nickname-form.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/styles/occupant-bottom-panel.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/occupant-bottom-panel.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/styles/role-form.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/muc-views/styles/role-form.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/muc-views/templates/affiliation-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js");const o=e=>{const t=(0,n.__)("Change affiliation"),s=(0,n.__)("New affiliation"),o=(0,n.__)("Reason"),i=e.muc.getOwnOccupant().getAssignableAffiliations();return r.html`<form class="affiliation-form" @submit="${t=>e.assignAffiliation(t)}">${e.alert_message?r.html`<div class="alert alert-${e.alert_type}" role="alert">${e.alert_message}</div>`:""}<div class="mb-3"><div class="row"><div class="col-md-6"><label class="form-label"><strong>${s}:</strong></label> <select class="form-select select-affiliation" name="affiliation">${i.map((t=>r.html`<option value="${t}" ?selected="${t===e.affiliation}">${t}</option>`))}</select></div><div class="col-md-6"><label class="form-label"><strong>${o}:</strong></label> <input class="form-control" type="text" name="reason" placeholder="${o}"></div></div></div><div class="text-end"><button type="submit" class="btn btn-primary" name="change">${t}</button></div></form>`}},"./src/plugins/muc-views/templates/mep-message.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/headless/index.js"),n=s("./node_modules/lit/index.js");const{dayjs:o}=r.converse.env,i=e=>{const t=o(e.model.get("time")).toISOString();return n.html`<div class="message chat-info message--mep ${e.getExtraMessageClasses()}" data-isodate="${t}" data-type="${e.data_name}" data-value="${e.data_value}"><div class="chat-msg__content"><div class="chat-msg__body chat-msg__body--${e.model.get("type")} ${e.model.get("is_delayed")?"chat-msg__body--delayed":""}"><div class="chat-info__message">${e.model.isRetracted()?e.renderRetraction():n.html`<converse-texture .mentions="${e.model.get("references")}" render_styling text="${e.model.getMessageText()}"></converse-texture>${e.model.get("reason")?n.html`<q class="reason"><converse-texture text="${e.model.get("reason")}"></converse-texture></q>`:""}`}</div><converse-message-actions ?is_retracted="${e.model.isRetracted()}" .model="${e.model}"></converse-message-actions></div></div></div>`}},"./src/plugins/muc-views/templates/message-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/i18n/index.js"),n=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js"),i=s("./src/plugins/chatview/utils.js");const a=e=>{const t=e.model.get("composing_spoiler"),s=t?(0,r.__)("Hidden message"):(0,r.__)("Message"),a=(0,r.__)("Optional hint"),l=n.api.settings.get("message_limit"),d=n.api.settings.get("visible_toolbar_buttons").call,c=n.api.settings.get("visible_toolbar_buttons").emoji,u=n.api.settings.get("show_send_button"),h=n.api.settings.get("visible_toolbar_buttons").spoiler,m=n.api.settings.get("show_toolbar");var f,p;return o.html`<form class="setNicknameButtonForm hidden"><input type="submit" class="btn btn-primary" name="join" value="Join"></form><form class="chat-message-form" @submit="${t=>e.onFormSubmitted(t)}">${m?o.html`<converse-chat-toolbar class="btn-toolbar chat-toolbar no-text-select" .model="${e.model}" ?hidden_occupants="${e.model.get("hidden_occupants")}" ?is_groupchat="${"groupchat"===e.model.get("message_type")}" ?show_call_button="${d}" ?show_emoji_button="${c}" ?show_send_button="${u}" ?show_spoiler_button="${h}" ?show_toolbar="${m}" message_limit="${l}"></converse-chat-toolbar>`:""} <input type="text" placeholder="${a||""}" .value="${null!==(f=e.model.get("draft_hint"))&&void 0!==f?f:""}" @change="${t=>n.u.safeSave(e.model,{draft_hint:t.target.value})}" class="${t?"":"hidden"} spoiler-hint"><div class="suggestion-box"><ul class="suggestion-box__results suggestion-box__results--above" hidden=""></ul><textarea autofocus type="text" .value="${null!==(p=e.model.get("draft"))&&void 0!==p?p:""}" @drop="${t=>e.onDrop(t)}" @input="${i.resetElementHeight}" @keydown="${t=>e.onKeyDown(t)}" @keyup="${t=>e.onKeyUp(t)}" @paste="${t=>e.onPaste(t)}" @change="${t=>n.u.safeSave(e.model,{draft:t.target.value})}" class="chat-textarea suggestion-box__input ${e.model.get("correcting")?"correcting":""} ${u?"chat-textarea-send-button":""} ${t?"spoiler":""}" placeholder="${s}"></textarea> <span class="suggestion-box__additions visually-hidden" role="status" aria-live="assertive" aria-relevant="additions"></span></div></form>`}},"./src/plugins/muc-views/templates/moderator-tools.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./src/templates/spinner.js"),n=s("./src/i18n/index.js"),o=s("./node_modules/lit/index.js");function i(e){return"moderator"===e?(0,n.__)("Moderators are privileged users who can change the roles of other users (except those with admin or owner affiliations."):"participant"===e?(0,n.__)("The default role, implies that you can read and write messages."):"visitor"==e?(0,n.__)("Visitors aren't allowed to write messages in a moderated multi-user chat."):void 0}function a(e){return"owner"===e?(0,n.__)("Owner is the highest affiliation. Owners can modify roles and affiliations of all other users."):"admin"===e?(0,n.__)("Admin is the 2nd highest affiliation. Admins can modify roles and affiliations of all other users except owners."):"outcast"===e?(0,n.__)('To ban a user, you give them the affiliation of "outcast".'):void 0}const l=(e,t)=>o.html`<li class="list-group-item" data-nick="${t.item.nick}"><ul class="list-group"><li class="list-group-item active"><div><strong>JID:</strong> ${t.item.jid}</div></li><li class="list-group-item"><div><strong>Nickname:</strong> ${t.item.nick}</div></li><li class="list-group-item"><div><strong>Role:</strong> ${t.item.role} ${t.assignable_roles.length?(e=>o.html`<a href="#" data-form="converse-muc-role-form" class="toggle-form right" color="var(--secondary-color)" @click="${e.toggleForm}"><converse-icon class="fa fa-wrench" size="1em"></converse-icon></a>`)(t):""}</div>${t.assignable_roles.length?o.html`<converse-muc-role-form class="hidden" .muc="${e.muc}" jid="${t.item.jid}" role="${t.item.role}"></converse-muc-role-form>`:""}</li></ul></li>`,d=(e,t)=>o.html`<li class="list-group-item" data-nick="${t.item.nick}"><ul class="list-group"><li class="list-group-item active"><div><strong>JID:</strong> ${t.item.jid}</div></li><li class="list-group-item"><div><strong>Nickname:</strong> ${t.item.nick}</div></li><li class="list-group-item"><div><strong>Affiliation:</strong> ${t.item.affiliation} ${t.assignable_affiliations.length?(e=>o.html`<a href="#" data-form="converse-muc-affiliation-form" class="toggle-form right" color="var(--secondary-color)" @click="${e.toggleForm}"><converse-icon class="fa fa-wrench" size="1em"></converse-icon></a>`)(t):""}</div>${t.assignable_affiliations.length?o.html`<converse-muc-affiliation-form class="hidden" .muc="${e.muc}" jid="${t.item.jid}" affiliation="${t.item.affiliation}"></converse-muc-affiliation-form>`:""}</li></ul></li>`,c=(e,t)=>{const s=(0,n.__)("Affiliation"),c=(0,n.__)("No users with that affiliation found."),u=(0,n.__)("No users with that role found."),h=(0,n.__)("Type here to filter the search results"),m=(0,n.__)("Role"),f=(0,n.__)("Show users"),p=(0,n.__)("Roles are assigned to users to grant or deny them certain abilities in a multi-user chat. They're assigned either explicitly or implicitly as part of an affiliation. A role that's not due to an affiliation, is only valid for the duration of the user's session."),g=(0,n.__)("An affiliation is a long-lived entitlement which typically implies a certain role and which grants privileges and responsibilities. For example admins and owners automatically have the moderator role."),v=t.queryable_roles.length&&t.queryable_affiliations.length;return o.html`${t.alert_message?o.html`<div class="alert alert-${t.alert_type}" role="alert">${t.alert_message}</div>`:""} ${v?(e=>o.html`<ul class="nav nav-pills justify-content-center"><li role="presentation" class="nav-item"><a class="nav-link ${"affiliations"===e.tab?"active":""}" id="affiliations-tab" href="#affiliations-tabpanel" aria-controls="affiliations-tabpanel" role="tab" data-name="affiliations" @click="${e.switchTab}">Affiliations</a></li><li role="presentation" class="nav-item"><a class="nav-link ${"roles"===e.tab?"active":""}" id="roles-tab" href="#roles-tabpanel" aria-controls="roles-tabpanel" role="tab" data-name="roles" @click="${e.switchTab}">Roles</a></li></ul>`)(t):""}<div class="tab-content">${t.queryable_affiliations.length?o.html`<div class="tab-pane tab-pane--columns ${"affiliations"===t.tab?"active":""}" id="affiliations-tabpanel" role="tabpanel" aria-labelledby="affiliations-tab"><form class="converse-form query-affiliation" @submit="${t.queryAffiliation}"><p class="helptext pb-3">${g}</p><div><label class="form-label" for="affiliation"><strong>${s}:</strong></label><div class="row"><div class="col"><select class="form-select select-affiliation" name="affiliation">${t.queryable_affiliations.map((e=>(e=>o.html`<option value="${e.item||""}" ?selected="${e.item===e.affiliation}" title="${a(e.item)}">${e.item}</option>`)(Object.assign({item:e},t))))}</select></div><div class="col"><input type="submit" class="btn btn-primary" name="users_with_affiliation" value="${f}"></div></div><div class="row"><div class="col mt-3">${Array.isArray(t.users_with_affiliation)&&t.users_with_affiliation.length>5?o.html`<input class="form-control" .value="${t.affiliations_filter}" @keyup="${t.filterAffiliationResults}" type="text" name="filter" placeholder="${h}">`:""}</div></div>${a(t.affiliation)?o.html`<div class="row"><div class="col pt-2"><p class="helptext pb-3">${a(t.affiliation)}</p></div></div>`:""}</div></form><div class="scrollable-container"><ul class="list-group list-group--users">${t.loading_users_with_affiliation?o.html`<li class="list-group-item">${(0,r.default)()}</li>`:""} ${Array.isArray(t.users_with_affiliation)&&0===t.users_with_affiliation.length?o.html`<li class="list-group-item">${c}</li>`:""} ${t.users_with_affiliation instanceof Error?o.html`<li class="list-group-item">${t.users_with_affiliation.message}</li>`:(t.users_with_affiliation||[]).map((s=>(s.nick||s.jid).match(new RegExp(t.affiliations_filter,"i"))?d(e,Object.assign({item:s},t)):""))}</ul></div></div>`:""} ${t.queryable_roles.length?o.html`<div class="tab-pane tab-pane--columns ${"roles"===t.tab?"active":""}" id="roles-tabpanel" role="tabpanel" aria-labelledby="roles-tab"><form class="converse-form query-role" @submit="${t.queryRole}"><p class="helptext pb-3">${p}</p><div><label class="form-label" for="role"><strong>${m}:</strong></label><div class="row"><div class="col"><select class="form-select select-role" name="role">${t.queryable_roles.map((e=>(e=>o.html`<option value="${e.item||""}" ?selected="${e.item===e.role}" title="${i(e.item)}">${e.item}</option>`)(Object.assign({item:e},t))))}</select></div><div class="col"><input type="submit" class="btn btn-primary" name="users_with_role" value="${f}"></div></div><div class="row"><div class="col mt-3">${Array.isArray(t.users_with_role)&&t.users_with_role.length>5?o.html`<input class="form-control" .value="${t.roles_filter}" @keyup="${t.filterRoleResults}" type="text" name="filter" placeholder="${h}">`:""}</div></div>${i(t.role)?o.html`<div class="row"><div class="col pt-2"><p class="helptext pb-3">${i(t.role)}</p></div></div>`:""}</div></form><div class="scrollable-container"><ul class="list-group list-group--users">${t.loading_users_with_role?o.html`<li class="list-group-item">${(0,r.default)()}</li>`:""} ${t.users_with_role&&0===t.users_with_role.length?o.html`<li class="list-group-item">${u}</li>`:""} ${(t.users_with_role||[]).map((s=>s.nick.match(t.roles_filter)?l(e,Object.assign({item:s},t)):""))}</ul></div></div>`:""}</div>`}},"./src/plugins/muc-views/templates/muc-bottom-panel.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});s("./src/plugins/muc-views/message-form.js"),s("./src/plugins/muc-views/nickname-form.js"),s("./src/shared/chat/toolbar.js");var r=s("./src/i18n/index.js"),n=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js");const i=e=>{const t=(0,r.__)("You have unread messages"),s=e.model.session.get("connection_status"),i=(0,r.__)("You're not allowed to send messages in this room");return s===n.converse.ROOMSTATUS.ENTERED?o.html`${e.model.ui.get("scrolled")&&e.model.get("num_unread_general")?o.html`<div class="new-msgs-indicator" @click="${t=>e.viewUnreadMessages(t)}">▼ ${t} ▼</div>`:""} ${e.model.canPostMessages()?o.html`<converse-muc-message-form .model="${e.model}"></converse-muc-message-form>`:o.html`<span class="muc-bottom-panel muc-bottom-panel--muted">${i}</span>`}`:s!=n.converse.ROOMSTATUS.NICKNAME_REQUIRED?"":n.api.settings.get("muc_show_logs_before_join")?o.html`<span class="muc-bottom-panel muc-bottom-panel--nickname"><converse-muc-nickname-form .model="${e.model}"></converse-muc-nickname-form></span>`:void 0}},"./src/plugins/muc-views/templates/muc-chatarea.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js");s("./src/shared/chat/help-messages.js"),s("./src/shared/components/split-resize.js"),s("./src/plugins/muc-views/bottom-panel.js"),s("./src/plugins/muc-views/sidebar.js"),s("./src/plugins/muc-views/muc-chat-content.js");const{CHATROOMS_TYPE:o}=n.constants,i=e=>{var t;const s=n.api.settings.get("show_send_button"),i=n.api.settings.get("view_mode");let a,l;return"overlayed"===i?(a="d-none d-md-flex col-s-10 col-md-8",l="col-xs-12 col-s-2 col-md-4"):"fullscreen"===i?(a="d-none d-md-flex col-md-8 col-xl-10",l="col-xs-12 col-md-4 col-xl-2"):"embedded"===i&&(a="d-flex col-8",l="col-4"),r.html`<div class="chat-area ${e.shouldShowSidebar()?a:"col-xs-12"}"><div class="chat-content ${s?"chat-content-sendbutton":""}" aria-live="polite"><converse-muc-chat-content .model="${e.model}"></converse-muc-chat-content>${(null===(t=e.model)||void 0===t?void 0:t.get("show_help_messages"))?r.html`<div class="chat-content__help"><converse-chat-help .model="${e.model}" .messages="${e.getHelpMessages()}" type="info" chat_type="${o}"></converse-chat-help></div>`:""}</div><converse-muc-bottom-panel .model="${e.model}" class="bottom-panel"></converse-muc-bottom-panel></div>${e.model&&e.shouldShowSidebar()?r.html`<converse-split-resize></converse-split-resize><converse-muc-sidebar class="${l}" jid="${e.jid}"></converse-muc-sidebar>`:""}`}},"./src/plugins/muc-views/templates/muc-description.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js");const o=e=>{const t=(0,n.__)("Description:"),s=(0,n.__)("Groupchat XMPP Address:"),o=(0,n.__)("Participants:"),i=(0,n.__)("Features:"),a=(0,n.__)("Requires authentication"),l=(0,n.__)("Hidden"),d=(0,n.__)("Requires an invitation"),c=(0,n.__)("Moderated"),u=(0,n.__)("Non-anonymous"),h=(0,n.__)("Open"),m=(0,n.__)("Permanent"),f=(0,n.__)("Public"),p=(0,n.__)("Semi-anonymous"),g=(0,n.__)("Temporary"),v=(0,n.__)("Unmoderated");return r.html`<div class="room-info"><p class="room-info"><strong>${s}</strong> ${e.jid}</p><p class="room-info"><strong>${t}</strong> ${e.desc}</p><p class="room-info"><strong>${o}</strong> ${e.occ}</p><p class="room-info"><strong>${i}</strong></p><ul>${e.passwordprotected?r.html`<li class="room-info locked">${a}</li>`:""} ${e.hidden?r.html`<li class="room-info">${l}</li>`:""} ${e.membersonly?r.html`<li class="room-info">${d}</li>`:""} ${e.moderated?r.html`<li class="room-info">${c}</li>`:""} ${e.nonanonymous?r.html`<li class="room-info">${u}</li>`:""} ${e.open?r.html`<li class="room-info">${h}</li>`:""} ${e.persistent?r.html`<li class="room-info">${m}</li>`:""} ${e.publicroom?r.html`<li class="room-info">${f}</li>`:""} ${e.semianonymous?r.html`<li class="room-info">${p}</li>`:""} ${e.temporary?r.html`<li class="room-info">${g}</li>`:""} ${e.unmoderated?r.html`<li class="room-info">${v}</li>`:""}</ul><p></p></div>`}},"./src/plugins/muc-views/templates/muc-destroyed.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/i18n/index.js"),n=s("./node_modules/lit/index.js");const o=e=>{const t=(0,r.__)("This groupchat no longer exists"),s=(0,r.__)('The following reason was given: "%1$s"',e.reason||"");return n.html`<div class="alert alert-danger"><h3 class="alert-heading disconnect-msg">${t}</h3></div>${e.reason?n.html`<p class="destroyed-reason">${s}</p>`:""} ${e.moved_jid?(e=>{const t=(0,r.__)("The conversation has moved to a new address. Click the link below to enter.");return n.html`<p class="moved-label">${t}</p><p class="moved-link"><a class="switch-chat" @click="${t=>e.onSwitch(t)}">${e.moved_jid}</a></p>`})(e):""}`}},"./src/plugins/muc-views/templates/muc-disconnect.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=e=>r.html`<div class="alert alert-danger"><h3 class="alert-heading disconnect-msg">${e[0]}</h3>${e.slice(1).map((e=>r.html`<p class="disconnect-msg">${e}</p>`))}</div>`},"./src/plugins/muc-views/templates/muc-head.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/until.js"),o=s("./src/i18n/index.js"),i=s("./src/headless/index.js"),a=s("./src/shared/chat/utils.js");s("./src/shared/components/dropdown.js"),s("./src/shared/texture/components/texture.js");const l=e=>{var t,s,l;const d=e.model.toJSON(),c=null===(s=e.user_settings)||void 0===s||null===(t=s.get("mucs_with_hidden_subject",[]))||void 0===t?void 0:t.includes(e.model.get("jid")),u=e.getHeadingButtons(c),h=(0,o.__)("Hide the groupchat topic"),m=d.subject?d.subject.text:"",f=m&&!c;return r.html`<div class="chatbox-title ${f?"":"chatbox-title--no-desc"}"><div class="chatbox-title--row">${i._converse.api.settings.get("singleton")?"":r.html`<converse-controlbox-navback jid="${d.jid}"></converse-controlbox-navback>`} <a data-room-jid="${e.model.get("jid")}" title="${(0,o.__)("Show more information on this groupchat")}" @click="${t=>e.showRoomDetailsModal(t)}"><converse-avatar .model="${e.model}" class="avatar align-self-center" name="${e.model.getDisplayName()}" nonce="${null===(l=e.model.vcard)||void 0===l?void 0:l.get("vcard_updated")}" height="40" width="40"></converse-avatar></a><div class="chatbox-title__text" role="heading" aria-level="2" title="${"hidden"!==i.api.settings.get("locked_muc_domain")?d.jid:""}">${e.model.getDisplayName()}</div></div><div class="chatbox-title__buttons btn-toolbar g-0">${(0,n.until)((0,a.getStandaloneButtons)(u),"")} ${(0,n.until)((0,a.getDropdownButtons)(u),"")}</div></div>${f?r.html`<p class="chat-head__desc" title="${h}"><converse-texture text="${m}" render_styling embed_audio></converse-texture></p>`:""}`}},"./src/plugins/muc-views/templates/muc-list.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/i18n/index.js"),n=s("./node_modules/lit/index.js"),o=s("./node_modules/lit/directives/repeat.js"),i=s("./src/templates/spinner.js");const a=e=>n.html`${e.show_form?(e=>{const t=(0,r.__)("Show groupchats"),s=(0,r.__)("Server address");return n.html`<form class="converse-form list-chatrooms" @submit="${e.submitForm}"><div><label class="form-label" for="chatroom">${s}:</label> <input type="text" autofocus @change="${e.setDomainFromEvent}" value="${e.muc_domain||""}" required="required" name="server" class="form-control" placeholder="${e.server_placeholder}"></div><input type="submit" class="btn btn-primary" name="list" value="${t}"></form>`})(e):""}<ul class="available-chatrooms list-group">${e.loading_items?n.html`<li class="list-group-item">${(0,i.default)()}</li>`:""} ${e.feedback_text?n.html`<li class="list-group-item active">${e.feedback_text}</li>`:""} ${(0,o.repeat)(e.items,(e=>e.jid),(t=>((e,t)=>{const s=(0,r.__)("Show more information on this groupchat"),o=(0,r.__)("Click to open this groupchat");return n.html`<li class="room-item list-group-item"><div class="available-chatroom d-flex flex-row"><a class="open-room available-room w-100" @click="${e.openRoom}" data-room-jid="${t.jid}" data-room-name="${t.name}" title="${o}" href="#">${t.name||t.jid}</a> <a class="right room-info icon-room-info" @click="${e.toggleRoomInfo}" data-room-jid="${t.jid}" title="${s}" href="#"></a></div></li>`})(e,t)))}</ul>`},"./src/plugins/muc-views/templates/muc-nickname-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/i18n/index.js"),n=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js");const i=e=>{var t,s,i;const a=(0,r.__)("Nickname"),l=(null===(t=e.model)||void 0===t?void 0:t.isEntered())?(0,r.__)("Change nickname"):(0,r.__)("Enter groupchat"),d=n.api.settings.get("muc_show_logs_before_join")?(0,r.__)("Choose a nickname to enter"):(0,r.__)("Please choose your nickname"),c=null===(s=e.model)||void 0===s?void 0:s.get("nickname_validation_message");return o.html`<div class="chatroom-form-container muc-nickname-form"><form class="converse-form chatroom-form converse-centered-form" @submit="${t=>e.submitNickname(t)}"><fieldset><label class="form-label">${d}</label><p class="validation-message">${c}</p><input type="text" required="required" name="nick" value="${(null===(i=e.model)||void 0===i?void 0:i.get("nick"))||""}" class="form-control ${c?"error":""}" placeholder="${a}"></fieldset><fieldset><input type="submit" class="btn btn-primary" name="join" value="${l}"></fieldset></form></div>`}},"./src/plugins/muc-views/templates/muc-occupant.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/i18n/index.js");const i=e=>{var t,s,i,a,l,d,c;const u=(0,o.__)("Hide"),h=(0,o.__)("No participant data found"),m=(0,o.__)("Participants"),f=(0,o.__)("Show details"),p=null===(t=e.model)||void 0===t?void 0:t.get("jid"),g=null===(s=e.model)||void 0===s?void 0:s.get("nick"),v=n.u.firstCharToUpperCase(null===(i=e.model)||void 0===i?void 0:i.get("role")),_=n.u.firstCharToUpperCase(null===(a=e.model)||void 0===a?void 0:a.get("affiliation")),y=(null===(d=e.model)||void 0===d||null===(l=d.get("hats"))||void 0===l?void 0:l.length)?e.model.get("hats").map((({title:e})=>e)):[];return r.html`<span class="sidebar-occupant"><div class="sidebar-heading"><span><button type="button" class="btn btn--transparent back-button" @click="${()=>e.muc.save({sidebar_view:"occupants"})}"><converse-icon size="1em" class="fa fa-arrow-left"></converse-icon></button> <a @click="${t=>{t.preventDefault(),e.muc.save({sidebar_view:"occupants"})}}">${m}</a></span><converse-dropdown .items="${[r.html`<a class="dropdown-item show-occupant-modal" role="button" title="${f}" @click="${()=>e.showOccupantModal()}"><converse-icon class="fa fa-id-card" size="1em"></converse-icon>${f}</a>`,r.html`<a href="#" class="dropdown-item" role="button" @click="${()=>e.closeSidebar()}"><converse-icon size="1em" class="fa fa-times"></converse-icon>${u}</a>`]}"></converse-dropdown></div>${e.model?r.html`<div class="row"><div class="col"><a title="${f}" @click="${()=>e.showOccupantModal()}"><converse-avatar .model="${e.model}" class="avatar modal-avatar justify-content-center" name="${e.model.getDisplayName()}" nonce="${null===(c=e.getVcard())||void 0===c?void 0:c.get("vcard_updated")}" height="120" width="120"></converse-avatar></a></div></div>`:""}<ul class="occupant-details">${e.model?r.html`${g?r.html`<li class="occupant-details-nickname">${g}</li>`:""}<li class="occupant-details-jid">${p?r.html`<a @click="${()=>e.openChat(p)}">${p}</a>`:""}</li><li>${_&&"None"!==_?r.html`<span class="badge text-bg-primary">${_}</span>`:""} ${v?r.html`<span class="badge text-bg-secondary">${v}</span>`:""} ${y.length?r.html`${y.map((e=>r.html`<span class="badge text-bg-info">${e}</span>`))}`:""}</li>`:r.html`<li>${h}</li>`}</ul>${e.model?r.html`<div class="chat-body"><div class="chat-content chat-content-sendbutton" aria-live="polite"><converse-chat-content .model="${e.model}"></converse-chat-content></div><converse-occupant-bottom-panel .model="${e.model}" .muc="${e.muc}" class="bottom-panel"></converse-occupant-bottom-panel></div>`:""}</span>`}},"./src/plugins/muc-views/templates/muc-occupants.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/repeat.js"),o=s("./src/i18n/index.js"),i=(s("./src/shared/components/list-filter.js"),s("./src/plugins/muc-views/sidebar-occupant.js"),s("./src/plugins/muc-views/templates/occupants-filter.js"));const a=e=>{const t=1===e.model.occupants?(0,o.__)("Participant"):(0,o.__)("Participants"),s=(0,o.__)("Hide"),a=(0,o.__)("Show filter"),l=(0,o.__)("Hide filter"),d=e.model.get("filter_visible"),c=(0,o.__)("Invite someone"),u=(0,o.__)("Invite someone to join this groupchat"),h=[];return e.model.invitesAllowed()&&h.push(r.html`<a href="#" class="dropdown-item open-invite-modal" role="button" title="${u}" @click="${t=>e.showInviteModal(t)}"><converse-icon size="1em" class="fa fa-user-plus"></converse-icon>${c}</a>`),e.model.occupants.length>5&&h.push(r.html`<a href="#" class="dropdown-item toggle-filter" role="button" @click="${t=>e.toggleFilter(t)}"><converse-icon size="1em" class="fa fa-filter"></converse-icon>${d?l:a}</a>`),h.length?h.push(r.html`<a href="#" class="dropdown-item" role="button" @click="${t=>e.closeSidebar(t)}"><converse-icon size="1em" class="fa fa-times"></converse-icon>${s}</a>`):h.push(r.html`<i class="hide-occupants" @click="${t=>e.closeSidebar(t)}"><converse-icon class="fa fa-times" size="1em"></converse-icon></i>`),r.html`<div class="occupants"><div class="occupants-header"><div class="occupants-header--title"><span class="occupants-heading sidebar-heading">${e.model.occupants.length} ${t}</span> ${1===h.length?h[0]:r.html`<converse-dropdown class="chatbox-btn btn-group dropstart" .items="${h}"></converse-dropdown>`}</div></div><ul class="items-list occupant-list">${d?r.html`<converse-list-filter @update="${()=>e.requestUpdate()}" .promise="${e.model.initialized}" .items="${e.model.occupants}" .template="${i.default}" .model="${e.filter}"></converse-list-filter>`:""} ${(0,n.repeat)(e.model.occupants.models,(e=>e.get("jid")),(t=>function(e,t){if(!e.model.get("filter_visible"))return!1;const s=e.filter.get("type"),r="state"===s?e.filter.get("state").toLowerCase():e.filter.get("text").toLowerCase();if(!r)return!1;if("state"===s){var n;const e=t.get("presence");return"online"===r?["offline","unavailable"].includes(e):"ofline"===r?"online"===e:!(null===(n=t.get("show"))||void 0===n?void 0:n.includes(r))}return"items"===s?!t.getDisplayName().toLowerCase().includes(r):void 0}(e,t)?"":r.html`<converse-muc-occupant-list-item .muc="${e.model}" .model="${t}">`))}</ul></div>`}},"./src/plugins/muc-views/templates/muc-password-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js");const o=e=>{const t=(0,n.__)("This groupchat requires a password"),s=(0,n.__)("Password: "),o=(0,n.__)("Submit");return r.html`<form class="converse-form chatroom-form converse-centered-form" @submit="${e.submitPassword}"><fieldset><label class="form-label">${t}</label><p class="validation-message">${e.validation_message}</p><input class="hidden-username" aria-hidden="true" type="text" autocomplete="username" value="${e.jid}"><input type="password" name="password" required="required" class="form-control ${e.validation_message?"error":""}" placeholder="${s}"></fieldset><fieldset><input class="btn btn-primary" type="submit" value="${o}"></fieldset></form>`}},"./src/plugins/muc-views/templates/muc-sidebar.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=e=>{const t=e.model.get("sidebar_view")||"",s=t.split("occupant:").pop();return r.html`${(null==t?void 0:t.startsWith("occupant:"))?r.html`<converse-muc-occupant muc_jid="${e.jid}" occupant_id="${s}"></converse-muc-occupant>`:r.html`<converse-muc-occupants jid="${e.jid}"></converse-muc-occupants>`}`}},"./src/plugins/muc-views/templates/muc.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/shared/chat/utils.js"),i=s("./src/plugins/muc-views/utils.js");s("./src/plugins/muc-views/chatarea.js"),s("./src/plugins/muc-views/destroyed.js"),s("./src/plugins/muc-views/disconnected.js"),s("./src/plugins/muc-views/heading.js"),s("./src/plugins/muc-views/nickname-form.js"),s("./src/plugins/muc-views/password-form.js");const a=e=>{const t=e.model?(0,o.getChatStyle)(e.model):"";return r.html`<div class="flyout box-flyout" style="${t||r.nothing}">${"overlayed"===n.api.settings.get("view_mode")?r.html`<converse-dragresize></converse-dragresize>`:""} ${e.model?r.html`<converse-muc-heading jid="${e.model.get("jid")}" class="chat-head chat-head-chatroom row g-0"></converse-muc-heading><div class="chat-body chatroom-body row g-0">${(0,i.getChatRoomBodyTemplate)(e.model)}</div>`:""}</div>`}},"./src/plugins/muc-views/templates/occupant-bottom-panel.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});s("./src/plugins/muc-views/message-form.js"),s("./src/plugins/muc-views/nickname-form.js"),s("./src/shared/chat/toolbar.js");var r=s("./src/i18n/index.js"),n=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js");const i=e=>{const t=(0,r.__)("You have unread messages"),s=e.muc.session.get("connection_status"),i=(0,r.__)("This user is not currently in this groupchat and can't receive messages."),a=(0,r.__)("Invite this user to join this groupchat"),l=(0,r.__)("Open a one-on-one chat with this user"),d=(0,r.__)("Open Chat"),c=(0,r.__)("Invite");return s===n.converse.ROOMSTATUS.ENTERED?o.html`${e.muc.ui.get("scrolled")&&e.model.get("num_unread")?o.html`<div class="new-msgs-indicator" @click="${t=>e.viewUnreadMessages(t)}">▼ ${t} ▼</div>`:""} ${e.canPostMessages()?o.html`<converse-muc-message-form .model="${e.model}"></converse-muc-message-form>`:o.html`<div class="bottom-panel bottom-panel--muted"><p class="bottom-panel--muted__msg">${i}</p>${e.model.get("jid")?o.html`<button @click="${e.openChat}" type="button" class="btn btn-primary" title="${l}">${d}</button> <button @click="${e.invite}" type="button" class="btn btn-secondary" title="${a}">${c}</button>`:""}</div>`}`:""}},"./src/plugins/muc-views/templates/occupant.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s("./src/headless/index.js"),n=s("./src/shared/constants.js"),o=s("./src/i18n/index.js"),i=s("./node_modules/lit/index.js"),a=s("./node_modules/lit/directives/until.js"),l=s("./src/utils/color.js"),d=s("./src/shared/chat/utils.js");function c(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}let u;function h(e){u||function(){let e;u={},u.owner={label:(0,o.__)("Owner"),classname:"badge-groupchat"},u.admin={label:(0,o.__)("Admin"),classname:"badge-info"},u.member={label:(0,o.__)("Member"),classname:"badge-info"},u.moderator={label:(0,o.__)("Moderator"),classname:"badge-info"},u.visitor={label:(0,o.__)("Visitor"),classname:"badge-secondary"};for(let o=1;o<5&&(!e||Object.values(e).find((e=>e>1)));o++){const i={};for(const a of Object.values(u)){var t,s,r,n;(!e||(null!==(t=e[a.shortlabel])&&void 0!==t?t:0)>=2)&&(a.shortlabel=a.label.substr(0,o).toLocaleUpperCase(),null!==(n=(s=i)[r=a.shortlabel])&&void 0!==n||(s[r]=0),i[a.shortlabel]++)}e=i}}();const t=u[e];return t?i.html`<span title="${t.label}" aria-label="${t.label}" class="badge ${null!==(s=t.classname)&&void 0!==s?s:"badge-info"}">${t.shortlabel}</span>`:"";var s}function m(e){const t=e.get("role"),s=(e=>(0,o.__)("Click to mention %1$s in your message.",e.get("nick")))(e),r=(0,o.__)("This user is a moderator."),n=(0,o.__)("This user can send messages in this groupchat."),i=(0,o.__)("This user can NOT send messages in this groupchat."),a=e.get("jid")?`${e.get("jid")} `:"";return"moderator"===t?`${a}${r} ${s}`:"participant"===t?`${a}${n} ${s}`:"visitor"===t?`${a}${i} ${s}`:["visitor","participant","moderator"].includes(t)?void 0:`${a}${s}`}function f(e){return(t=function*(){const t=yield r.api.hook("getOccupantActionButtons",e,[]);if(!(null==t?void 0:t.length))return"";const s=t.map((e=>i.html`<button class="dropdown-item ${e.button_class}" @click="${e.handler}" type="button"><converse-icon class="${e.icon_class}" color="var(--foreground-color)" size="1em" aria-hidden="true"></converse-icon> ${e.i18n_text}</button>`));return i.html`<converse-dropdown class="occupant-actions chatbox-btn" .items="${s}"></converse-dropdown>`},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function i(e){c(o,r,n,i,a,"next",e)}function a(e){c(o,r,n,i,a,"throw",e)}i(void 0)}))})();var t}const p=e=>{var t;const s=e.model,{show:r,presence:o,affiliation:c}=e.model.attributes,u=n.PRETTY_CHAT_STATUS[r||o],p=s.get("role");let g,v;[g,v]="chat"===r||!r&&"online"===o?["fa fa-circle","chat-status-online"]:"dnd"===r?["fa fa-minus-circle","chat-status-busy"]:"away"===r||"xa"===r?["fa fa-circle","chat-status-away"]:["fa fa-circle","chat-status-offline"];const _=(0,d.getUnreadMsgsDisplay)(s);return i.html`<li class="list-item occupant" id="${s.id}"><a @click="${t=>e.onOccupantClicked(t,s)}"><div class="row g-0"><div class="col-auto"><converse-avatar .model="${s}" class="avatar chat-msg__avatar" name="${s.getDisplayName()}" nonce="${null===(t=s.vcard)||void 0===t?void 0:t.get("vcard_updated")}" height="30" width="30"></converse-avatar><converse-icon title="${u}" color="var(--${v})" size="0.82em" class="${g} chat-status chat-status--avatar"></converse-icon>${_?i.html`<span class="msgs-indicator badge">${_}</span>`:""}</div><div class="col occupant-nick-badge"><span class="occupant-nick" title="${m(s)}" style="${(0,l.getAuthorStyle)(s)}">${s.getDisplayName()}</span> <span class="occupant-badges">${"owner"===c?h("owner"):""} ${"admin"===c?h("admin"):""} ${"member"===c?h("member"):""} ${"moderator"===p?h("moderator"):""} ${"visitor"===p?h("visitor"):""} </span>${(0,a.until)(f(s))}</div></div></a></li>`}},"./src/plugins/muc-views/templates/occupants-filter.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js"),o=s("./src/headless/index.js");const i=e=>{const t=(0,n.__)("Filter"),s=(0,n.__)("Filter by name"),i=(0,n.__)("Filter by status"),a=(0,n.__)("Any"),l=(0,n.__)("Online"),d=(0,n.__)("Chatty"),c=(0,n.__)("Busy"),u=(0,n.__)("Away"),h=(0,n.__)("Extended Away"),m=(0,n.__)("Offline"),f=e.model.get("state"),p=e.model.get("text"),g=e.model.get("type"),v="overlayed"===o.api.settings.get("view_mode");return r.html`<form class="items-filter-form input-button-group ${e.shouldBeVisible()?"fade-in":"hidden"}" @submit="${t=>e.submitFilter(t)}"><div class="${v?"":"flex-nowrap"}"><div class="filter-by d-flex flex-nowrap"><converse-icon size="1em" @click="${t=>e.changeTypeFilter(t)}" class="fa fa-user clickable ${"items"===g?"selected":""}" data-type="items" title="${s}"></converse-icon><converse-icon size="1em" @click="${t=>e.changeTypeFilter(t)}" class="fa fa-circle clickable ${"state"===g?"selected":""}" data-type="state" title="${i}"></converse-icon></div><div class="btn-group"><input .value="${p||""}" @keydown="${t=>e.liveFilter(t)}" class="items-filter form-control ${"state"===g?"hidden":""}" placeholder="${t}"><converse-icon size="1em" class="fa fa-times clear-input ${p&&"state"!==g?"":"hidden"}" @click="${t=>e.clearFilter(t)}"></converse-icon></div><select class="form-control state-type ${"state"!==g?"hidden":""}" @change="${t=>e.changeChatStateFilter(t)}"><option value="">${a}</option><option ?selected="${"online"===f}" value="online">${l}</option><option ?selected="${"chat"===f}" value="chat">${d}</option><option ?selected="${"dnd"===f}" value="dnd">${c}</option><option ?selected="${"away"===f}" value="away">${u}</option><option ?selected="${"xa"===f}" value="xa">${h}</option><option ?selected="${"offline"===f}" value="offline">${m}</option></select></div></form>`}},"./src/plugins/muc-views/templates/role-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js");const o=e=>{const t=(0,n.__)("Change role"),s=(0,n.__)("New Role"),o=(0,n.__)("Reason"),i=e.muc.getOwnOccupant().getAssignableRoles();return r.html`<form class="role-form" @submit="${e.assignRole}"><input type="hidden" name="jid" value="${e.jid}"> <input type="hidden" name="nick" value="${e.nick}"><div class="mb-3"><div class="row"><div class="col-md-6"><label class="form-label"><strong>${s}:</strong></label> <select class="form-select select-role" name="role">${i.map((t=>r.html`<option value="${t}" ?selected="${t===e.role}">${t}</option>`))}</select></div><div class="col-md-6"><label class="form-label"><strong>${o}:</strong></label> <input class="form-control" type="text" name="reason" placeholder="${o}"></div></div></div><div class="text-end"><button type="submit" class="btn btn-primary">${t}</button></div></form>`}},"./src/plugins/muc-views/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{clearHistory:()=>p,confirmDirectMUCInvitation:()=>f,destroyMUC:()=>g,getAutoCompleteList:()=>b,getAutoCompleteListItem:()=>y,getChatRoomBodyTemplate:()=>_,getNicknameRequiredTemplate:()=>v,parseMessageForMUCCommands:()=>E,showModeratorToolsModal:()=>S,showOccupantModal:()=>x});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=(s("./src/plugins/muc-views/modals/occupant.js"),s("./src/plugins/muc-views/modals/moderator-tools.js"),s("./src/templates/spinner.js")),i=s("./src/i18n/index.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}}const{Strophe:d,u:c}=n.converse.env,{CHATROOMS_TYPE:u}=n.constants,h={admin:"admin",ban:"outcast",member:"member",owner:"owner",revoke:"none"},m={deop:"participant",kick:"none",mute:"visitor",op:"moderator",voice:"participant"};function f({contact:e,jid:t,reason:s}){return s?n.api.confirm((0,i.__)("Invitation to a groupchat"),(0,i.__)('%1$s has invited you to join the groupchat "%2$s", and left the following reason: "%3$s"',e,t,s)):n.api.confirm((0,i.__)("Invitation to a groupchat"),(0,i.__)('%1$s has invited you to join the groupchat "%2$s"',e,t))}function p(e){location.hash===`converse/room?jid=${e}`&&history.pushState(null,"",window.location.pathname)}function g(e){return l((function*(){const t=[(0,i.__)("Are you sure you want to destroy this groupchat?")];let s=[{name:"challenge",label:(0,i.__)("Please enter the XMPP address of this groupchat to confirm"),challenge:e.get("jid"),placeholder:(0,i.__)("name@example.org"),required:!0},{name:"reason",label:(0,i.__)("Optional reason for destroying this groupchat"),placeholder:(0,i.__)("Reason")},{name:"newjid",label:(0,i.__)("Optional XMPP address for a new groupchat that replaces this one"),placeholder:(0,i.__)("replacement@example.org")}];try{var r,o;s=yield n.api.confirm((0,i.__)("Confirm"),t,s);const a=null===(r=s.filter((e=>"reason"===e.name)).pop())||void 0===r?void 0:r.value,l=null===(o=s.filter((e=>"newjid"===e.name)).pop())||void 0===o?void 0:o.value;return e.sendDestroyIQ(a,l).then((()=>e.close()))}catch(e){n.log.error(e)}}))()}function v(e){const t=e.get("jid");return n.api.settings.get("muc_show_logs_before_join")?r.html`<converse-muc-chatarea class="row g-0" jid="${t}"></converse-muc-chatarea>`:r.html`<converse-muc-nickname-form jid="${t}"></converse-muc-nickname-form>`}function _(e){const t=e.session.get("view"),s=e.get("jid"),i=n.converse.ROOMSTATUS,a=e.session.get("connection_status");return t===n.converse.MUC.VIEWS.CONFIG?r.html`<converse-muc-config-form class="muc-form-container" jid="${s}"></converse-muc-config-form>`:r.html`${a==i.PASSWORD_REQUIRED?r.html`<converse-muc-password-form class="muc-form-container" jid="${s}"></converse-muc-password-form>`:""} ${a==i.ENTERED?r.html`<converse-muc-chatarea class="row g-0" jid="${s}"></converse-muc-chatarea>`:""} ${a==i.CONNECTING?(0,o.default)({class:"vertically-centered"}):""} ${a==i.NICKNAME_REQUIRED?v(e):""} ${a==i.DISCONNECTED?r.html`<converse-muc-disconnected jid="${s}"></converse-muc-disconnected>`:""} ${a==i.BANNED?r.html`<converse-muc-disconnected jid="${s}"></converse-muc-disconnected>`:""} ${a==i.DESTROYED?r.html`<converse-muc-destroyed jid="${s}"></converse-muc-destroyed>`:""}`}function y(e,t,s){let o;s=s.trim();const i=n.api.settings.get("muc_mention_autocomplete_show_avatar");if(i){const s=t.label.toLowerCase();o=e.occupants.findWhere((e=>{var t,r,n,o,i,a;return(null===(r=e.getDisplayName())||void 0===r||null===(t=r.toLowerCase())||void 0===t?void 0:t.startsWith(s))||(null===(o=e.get("nickname"))||void 0===o||null===(n=o.toLowerCase())||void 0===n?void 0:n.startsWith(s))||(null===(a=e.get("jid"))||void 0===a||null===(i=a.toLowerCase())||void 0===i?void 0:i.startsWith(s))?e:void 0}))}const a=new RegExp("("+s+")","ig"),l=s?t.split(a):[t];return r.html`<li aria-selected="false">${i?r.html`<converse-avatar .model="${o}" name="${o.getDisplayName()}" height="22" width="22" class="avatar avatar-autocomplete"></converse-avatar>`:""} <span class="autocomplete-item">${l.map((e=>s&&e.match(a)?r.html`<mark>${e}</mark>`:e))}</span></li>`}function b(){return l((function*(){const e=[...yield n.api.rooms.get(),...yield n.api.contacts.get()];return[...new Set(e.map((e=>d.getDomainFromJid(e.get("jid")))))]}))()}function j(e,t,s,r=[],n=[]){const o=m[t];if(!o)throw Error(`ChatRoomView#setRole called with invalid command: ${t}`);if(!e.verifyAffiliations(r)||!e.verifyRoles(n))return!1;if(!e.validateRoleOrAffiliationChangeArgs(t,s))return!1;const i=e.getNickOrJIDFromCommandArgs(s);if(!i)return!1;const a=s.split(i,2)[1].trim(),l=e.getOccupant(i);return e.setRole(l,o,a,void 0,(t=>e.onCommandError(t))),!0}function w(e,t,s,r){const o=h[t];if(!o)throw Error(`verifyAffiliations called with invalid command: ${t}`);if(!e.verifyAffiliations(r))return!1;if(!e.validateRoleOrAffiliationChangeArgs(t,s))return!1;const a=e.getNickOrJIDFromCommandArgs(s);if(!a)return!1;let l;const d=s.split(a,2)[1].trim(),u=e.getOccupant(a);if(u)l=u.get("jid");else{if(!c.isValidJID(a)){const t=(0,i.__)("Couldn't find a participant with that nickname. They might have left the groupchat.");return void e.createMessage({message:t,type:"error"})}l=a}const m={jid:l,reason:d};u&&n.api.settings.get("auto_register_muc_nickname")&&(m.nick=u.get("nick")),c.muc.setAffiliation(o,e.get("jid"),[m]).then((()=>e.occupants.fetchMembers())).catch((t=>e.onCommandError(t)))}function S(e,t){if(!e.verifyRoles(["moderator"]))return;let s=n.api.modal.get("converse-modtools-modal");s?(s.affiliation=t,s.render()):s=n.api.modal.create("converse-modtools-modal",{affiliation:t,jid:e.get("jid")}),s.show()}function x(e,t){n.api.modal.show("converse-muc-occupant-modal",{model:t},e)}function E(e,t){const s=e.model;if(t||s.get("type")!==u||n.api.settings.get("muc_disable_slash_commands")&&!Array.isArray(n.api.settings.get("muc_disable_slash_commands")))return t;let r=e.text;r=r.replace(/^\s*/,"");const o=(r.match(/^\/([a-zA-Z]*) ?/)||[""]).pop().toLowerCase();if(!o)return!1;const a=r.slice(("/"+o).length+1).trim();var l;const d=null!==(l=s.getAllowedCommands())&&void 0!==l?l:[];if("admin"===o&&d.includes(o))return w(s,o,a,["owner"]),!0;if("ban"===o&&d.includes(o))return w(s,o,a,["admin","owner"]),!0;if("modtools"===o&&d.includes(o))return S(s,a),!0;if("deop"===o&&d.includes(o))return j(s,o,a,["admin","owner"]),!0;if("destroy"===o&&d.includes(o))return!s.verifyAffiliations(["owner"])||(g(s).catch((e=>s.onCommandError(e))),!0);if("help"===o&&d.includes(o))return s.set({show_help_messages:!1},{silent:!0}),s.set({show_help_messages:!0}),!0;if("kick"===o&&d.includes(o))return j(s,o,a,[],["moderator"]),!0;if("mute"===o&&d.includes(o))return j(s,o,a,[],["moderator"]),!0;if("member"===o&&d.includes(o))return w(s,o,a,["admin","owner"]),!0;if("nick"===o&&d.includes(o)){if(!s.verifyRoles(["visitor","participant","moderator"]))return!0;if(0===a.length){const e=(0,i.__)('Your nickname is "%1$s"',s.get("nick"));s.createMessage({message:e,type:"error"})}else s.setNickname(a);return!0}return"owner"===o&&d.includes(o)?(w(s,o,a,["owner"]),!0):"op"===o&&d.includes(o)?(j(s,o,a,["admin","owner"]),!0):"register"===o&&d.includes(o)?(a.length>1?s.createMessage({message:(0,i.__)("Error: invalid number of arguments"),type:"error"}):s.registerNickname().then((e=>{e&&s.createMessage({message:e,type:"error"})})),!0):"revoke"===o&&d.includes(o)?(w(s,o,a,["admin","owner"]),!0):"topic"===o&&d.includes(o)||"subject"===o&&d.includes(o)?(s.setSubject(a),!0):!("voice"!==o||!d.includes(o))&&(j(s,o,a,[],["moderator"]),!0)}},"./src/plugins/notifications/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js"),n=s("./src/plugins/notifications/utils.js");r.converse.plugins.add("converse-notification",{dependencies:["converse-chatboxes"],initialize(){r.api.settings.extend({chatstate_notification_blacklist:[],notification_delay:5e3,notification_icon:"/images/logo/conversejs-filled.svg",notify_all_room_messages:!1,notify_nicknames_without_references:!1,play_sounds:!0,show_chat_state_notifications:!1,show_desktop_notifications:!0,show_tab_notifications:!0,sounds_path:r.api.settings.get("assets_path")+"/sounds/"}),r.api.listen.on("clearSession",n.clearFavicon),r.api.waitUntil("chatBoxesInitialized").then((()=>{const{chatboxes:e}=r._converse.state;e.on("change:num_unread",n.updateUnreadFavicon)})),r.api.listen.on("pluginsInitialized",(function(){r.api.listen.on("contactRequest",n.handleContactRequestNotification),r.api.listen.on("contactPresenceChanged",n.handleChatStateNotification),r.api.listen.on("message",n.handleMessageNotification),r.api.listen.on("feedback",n.handleFeedback),r.api.listen.on("connected",n.requestPermission)}))}})},"./src/plugins/notifications/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{areDesktopNotificationsEnabled:()=>g,clearFavicon:()=>v,handleChatStateNotification:()=>E,handleContactRequestNotification:()=>A,handleFeedback:()=>x,handleMessageNotification:()=>S,isMessageToHiddenChat:()=>p,requestPermission:()=>O,shouldNotifyOfGroupMessage:()=>b,showFeedbackNotification:()=>w,updateUnreadFavicon:()=>_});var r=s("./node_modules/favico.js-slevomat/favico.js"),n=s.n(r),o=s("./src/i18n/index.js"),i=s("./src/headless/index.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}}const{Strophe:d,u:c}=i.converse.env,{isEmptyMessage:u,isTestEnv:h}=c,m="Notification"in window;let f;function p(e){var t,s;return h()||null!==(s=null===(t=i._converse.state.chatboxes.get(e))||void 0===t?void 0:t.isHidden())&&void 0!==s&&s||document.hidden}function g(){return h()||m&&i.api.settings.get("show_desktop_notifications")&&"granted"===Notification.permission}function v(){var e,t;null==f||f.badge(0),f=null,null===(e=(t=navigator).clearAppBadge)||void 0===e||e.call(t).catch((e=>i.log.error("Could not clear unread count in app badge "+e)))}function _(){if(i.api.settings.get("show_tab_notifications")){var e,t;f=null!=f?f:new i.converse.env.Favico({type:"circle",animation:"pop"});const s=i._converse.state.chatboxes.models.reduce(((e,t)=>e+(t.get("num_unread")||0)),0);f.badge(s),null===(e=(t=navigator).setAppBadge)||void 0===e||e.call(t,s).catch((e=>i.log.error("Could set unread count in app badge - "+e)))}}function y(e,t,s){const r=i._converse.session.get("bare_jid");return e.reduce(((e,n)=>e||n.uri&&(e=>[r,`${t}/${s}`].includes(e.uri.replace(/^xmpp:/,"")))(n)),!1)}function b(e){return l((function*(){if(!(null==e?void 0:e.body)&&!(null==e?void 0:e.message))return!1;const t=e.from,s=e.from_muc,r=i.api.settings.get("notify_all_room_messages"),n=i._converse.state.chatboxes.get(s),o=d.getResourceFromJid(t),a=o&&d.unescapeNode(o)||"";let l=!1;const c=n.get("nick");i.api.settings.get("notify_nicknames_without_references")&&(l=new RegExp(`\\b${c}\\b`).test(e.body));const u=a!==c,h=!0===r||Array.isArray(r)&&r.includes(s)||y(e.references,s,c)||l;if(u&&h){return yield i.api.hook("shouldNotifyOfGroupMessage",e,!0)}return!1}))()}function j(e){const{attrs:t}=e;if(!t||t.is_forwarded)return!1;if("groupchat"===t.type)return b(t);if("info"===t.type)return function(e){return l((function*(){if(!e.from_muc)return!1;const t=yield i.api.rooms.get(e.from_muc);if(!t)return!1;const s=t.get("nick"),r=e.from_muc,n=i.api.settings.get("notify_all_room_messages");return!0===n||Array.isArray(n)&&n.includes(r)||y(e.references,r,s)}))()}(t);if(t.is_headline)return p(t);const s=i._converse.session.get("bare_jid"),r=d.getBareJidFromJid(t.from)===s;return!u(t)&&!r&&("all"===i.api.settings.get("show_desktop_notifications")||p(t))}function w(e){if("error"===e.klass||"warn"===e.klass){const t=new Notification(e.subject,{body:e.message,lang:o.i18n.getLocale(),icon:i.api.settings.get("notification_icon")});setTimeout(t.close.bind(t),5e3)}}function S(e){return l((function*(){if(!(yield j(e)))return!1;i.api.trigger("messageNotification",e);try{!function(){if(i.api.settings.get("play_sounds")&&void 0!==window.Audio){const e=new Audio(i.api.settings.get("sounds_path")+"msg_received.ogg"),t=e.canPlayType("audio/ogg");if("probably"===t)return e.play();const s=new Audio(i.api.settings.get("sounds_path")+"msg_received.mp3"),r=s.canPlayType("audio/mp3");"probably"===r?s.play():"maybe"===t?e.play():"maybe"===r&&s.play()}}()}catch(e){i.log.error(e)}!function(e){const{attrs:t}=e;if(t.is_error)return;if(!g())return;let s,r;const n=t.from,a=d.getBareJidFromJid(n);if("info"==t.type)s=t.message;else if("headline"===t.type){if(a.includes("@")&&!i.api.settings.get("allow_non_roster_messaging"))return;s=(0,o.__)("Notification from %1$s",a)}else if(a.includes("@"))if("groupchat"===t.type)s=(0,o.__)("%1$s says",d.getResourceFromJid(n));else{if(void 0===i._converse.state.roster)return void i.log.error("Could not send notification, because roster is undefined");if(r=i._converse.state.roster.get(a),void 0!==r)s=(0,o.__)("%1$s says",r.getDisplayName());else{if(!i.api.settings.get("allow_non_roster_messaging"))return;s=(0,o.__)("%1$s says",a)}}else s=(0,o.__)("Notification from %1$s",a);let l;if("info"==t.type)l=t.reason;else if(l=t.is_encrypted?t.plaintext:t.body,!l)return;const c=new Notification(s,{body:l,lang:o.i18n.getLocale(),icon:i.api.settings.get("notification_icon"),requireInteraction:!i.api.settings.get("notification_delay")});i.api.settings.get("notification_delay")&&setTimeout((()=>c.close()),i.api.settings.get("notification_delay")),c.onclick=function(e){e.preventDefault(),window.focus(),i._converse.state.chatboxes.get(a).maybeShow(!0)}}(e)}))()}function x(e){g()&&w(e)}function E(e){g()&&i.api.settings.get("show_chat_state_notifications")&&function(e){var t;if(null===(t=i.api.settings.get("chatstate_notification_blacklist"))||void 0===t?void 0:t.includes(e.get("jid")))return;const s=e.presence.get("show");let r=null;if("offline"===s?r=(0,o.__)("has gone offline"):"away"===s?r=(0,o.__)("has gone away"):"dnd"===s?r=(0,o.__)("is busy"):"online"===s&&(r=(0,o.__)("has come online")),null===r)return;const n=new Notification(e.getDisplayName(),{body:r,lang:o.i18n.getLocale(),icon:i.api.settings.get("notification_icon")});setTimeout((()=>n.close()),5e3)}(e)}function A(e){g()&&function(e){const t=new Notification(e.getDisplayName(),{body:(0,o.__)("wants to be your contact"),lang:o.i18n.getLocale(),icon:i.api.settings.get("notification_icon")});setTimeout((()=>t.close()),5e3)}(e)}function O(){m&&!["denied","granted"].includes(Notification.permission)&&Notification.requestPermission()}i.converse.env.Favico=n()},"./src/plugins/omemo/api.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),n=s("./src/plugins/omemo/utils.js"),o=s("./src/plugins/omemo/store.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function a(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))}}const l={omemo:{getDeviceID:()=>a((function*(){return yield r.api.waitUntil("OMEMOInitialized"),r._converse.state.omemo_store.get("device_id")}))(),session:{restore:()=>a((function*(){const{state:e}=r._converse;if(void 0===e.omemo_store){const t=`converse.omemosession-${r._converse.session.get("bare_jid")}`;e.omemo_store=new o.default({id:t}),r.u.initStorage(e.omemo_store,t)}yield e.omemo_store.fetchSession()}))()},devicelists:{get:(e,t=!1)=>a((function*(){const{devicelists:s}=r._converse.state,n=s.get(e)||(t?s.create({jid:e}):null);return yield null==n?void 0:n.initialized,n}))()},bundle:{generate:()=>a((function*(){yield r.api.waitUntil("OMEMOInitialized");const e=r._converse.session.get("bare_jid"),t=yield r.api.omemo.devicelists.get(e),{omemo_store:s}=r._converse.state,o=s.get("device_id");if(o){const e=t.devices.get(o);s.unset(o),e&&(yield new Promise((t=>e.destroy({success:t,error:t})))),t.devices.trigger("remove")}yield s.generateBundle(),yield t.publishDevices();const i=t.devices.get(s.get("device_id")),a=(0,n.generateFingerprint)(i);return yield s.publishBundle(),a}))()}}}},"./src/plugins/omemo/consts.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{KEY_ALGO:()=>a,TAG_LENGTH:()=>i,TRUSTED:()=>n,UNDECIDED:()=>r,UNTRUSTED:()=>o});const r=0,n=1,o=-1,i=128,a={name:"AES-GCM",length:128}},"./src/plugins/omemo/device.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/index.js"),o=s("./src/shared/errors.js"),i=s("./src/plugins/omemo/consts.js"),a=s("./src/plugins/omemo/utils.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{Strophe:d,sizzle:c,stx:u}=n.converse.env;class h extends r.Model{defaults(){return{trusted:i.UNDECIDED,active:!0}}getRandomPreKey(){const e=this.get("bundle");return e.prekeys[n.u.getRandomInt(e.prekeys.length)]}fetchBundleFromServer(){return(e=function*(){const e=n._converse.session.get("bare_jid"),t=u`
            <iq type="get" from="${e}" to="${this.get("jid")}" xmlns="jabber:client">
                <pubsub xmlns="${d.NS.PUBSUB}">
                    <items node="${d.NS.OMEMO_BUNDLES}:${this.get("id")}"/>
                </pubsub>
            </iq>`;let s;try{s=yield n.api.sendIQ(t)}catch(s){return n.log.error(`Could not fetch bundle for device ${this.get("id")} from ${this.get("jid")}`),n.log.error(s),null}if(s.querySelector("error"))throw new o.IQError("Could not fetch bundle",s);const r=c(`items[node="${d.NS.OMEMO_BUNDLES}:${this.get("id")}"]`,s).pop(),i=c(`bundle[xmlns="${d.NS.OMEMO}"]`,r).pop(),l=(0,a.parseBundle)(i);return this.save("bundle",l),l},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}).call(this);var e}getBundle(){return this.get("bundle")?Promise.resolve(this.get("bundle")):this.fetchBundleFromServer()}}const m=h},"./src/plugins/omemo/devicelist.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./node_modules/@converse/openpromise/dist/openpromise.js"),o=s("./src/headless/index.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function a(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))}}const{Strophe:l,stx:d,sizzle:c}=o.converse.env;class u extends r.Model{get idAttribute(){return"jid"}initialize(){var e=this,t=()=>super.initialize;return a((function*(){t().call(e),this.initialized=(0,n.getOpenPromise)(),yield this.initDevices(),this.initialized.resolve()})).call(this)}initDevices(){this.devices=new o._converse.exports.Devices;const e=`converse.devicelist-${o._converse.session.get("bare_jid")}-${this.get("jid")}`;return o.u.initStorage(this.devices,e),this.fetchDevices()}onDevicesFound(e){return a((function*(){if(0===e.length){let e=[];try{e=yield this.fetchDevicesFromServer()}catch(e){null===e?(o.log.error(`Timeout error while fetching OMEMO devices for ${this.get("jid")}`),this.destroy()):o.u.isElement(e)&&(yield o.parsers.parseErrorStanza(e))instanceof o.errors.ItemNotFoundError?o.log.debug(`No OMEMO devices found for ${this.get("jid")}`):(o.log.error(`Could not fetch OMEMO devices for ${this.get("jid")}`),o.log.error(e),this.destroy())}const t=o._converse.session.get("bare_jid");this.get("jid")===t&&this.publishCurrentDevice(e)}})).call(this)}fetchDevices(){return void 0===this._devices_promise&&(this._devices_promise=new Promise((e=>{this.devices.fetch({success:t=>e(this.onDevicesFound(t)),error:(t,s)=>{o.log.error(s),e()}})}))),this._devices_promise}getOwnDeviceId(){return a((function*(){const{omemo_store:e}=o._converse.state;let t=e.get("device_id");return this.devices.get(t)||(yield e.generateBundle(),t=e.get("device_id")),t})).call(this)}publishCurrentDevice(e){return a((function*(){const t=o._converse.session.get("bare_jid");if(this.get("jid")===t){if(yield o.api.omemo.session.restore(),o._converse.state.omemo_store)return e.includes(yield this.getOwnDeviceId())?void 0:this.publishDevices();o.log.debug("publishCurrentDevice: omemo_store is not defined, likely a timing issue")}})).call(this)}fetchDevicesFromServer(){return a((function*(){const e=o._converse.session.get("bare_jid"),t=d`
            <iq type='get' from='${e}' to='${this.get("jid")}' xmlns="jabber:client">
                <pubsub xmlns='${l.NS.PUBSUB}'>
                    <items node='${l.NS.OMEMO_DEVICELIST}'/>
                </pubsub>
            </iq>`,s=yield o.api.sendIQ(t),r=`list[xmlns="${l.NS.OMEMO}"] device`,n=c(r,s).map((e=>e.getAttribute("id"))),i=this.get("jid");return Promise.all(n.map((e=>this.devices.create({id:e,jid:i},{promise:!0}))))})).call(this)}publishDevices(){const e=d`
            <item id='current'>
                <list xmlns='${l.NS.OMEMO}'>
                    ${this.devices.filter((e=>e.get("active"))).map((e=>d`<device id='${e.get("id")}'/>`))}
                </list>
            </item>`;return o.api.pubsub.publish(null,l.NS.OMEMO_DEVICELIST,e,{access_model:"open"},!1)}removeOwnDevices(e){return a((function*(){const t=o._converse.session.get("bare_jid");if(this.get("jid")!==t)throw new Error("Cannot remove devices from someone else's device list");return yield Promise.all(e.map((e=>this.devices.get(e))).map((e=>new Promise((t=>e.destroy({success:t,error:(e,s)=>{o.log.error(s),t()}})))))),this.publishDevices()})).call(this)}}const h=u},"./src/plugins/omemo/devicelists.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/plugins/omemo/devicelist.js"),n=s("./node_modules/@converse/skeletor/dist/skeletor.js");class o extends n.Collection{constructor(){super(),this.model=r.default}}const i=o},"./src/plugins/omemo/devices.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/plugins/omemo/device.js");class o extends r.Collection{constructor(){super(),this.model=n.default}}const i=o},"./src/plugins/omemo/fingerprints.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{Fingerprints:()=>a});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/plugins/omemo/templates/fingerprints.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class a extends n.CustomElement{static get properties(){return{jid:{type:String}}}initialize(){return(e=function*(){this.devicelist=yield r.api.omemo.devicelists.get(this.jid,!0),this.listenTo(this.devicelist.devices,"change:bundle",(()=>this.requestUpdate())),this.listenTo(this.devicelist.devices,"change:trusted",(()=>this.requestUpdate())),this.listenTo(this.devicelist.devices,"remove",(()=>this.requestUpdate())),this.listenTo(this.devicelist.devices,"add",(()=>this.requestUpdate())),this.listenTo(this.devicelist.devices,"reset",(()=>this.requestUpdate())),this.requestUpdate()},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))}).call(this);var e}render(){return this.devicelist?(0,o.default)(this):""}toggleDeviceTrust(e){const t=e.target;this.devicelist.devices.get(t.getAttribute("name")).save("trusted",parseInt(t.value,10))}constructor(){super(),this.jid=null}}r.api.elements.define("converse-omemo-fingerprints",a)},"./src/plugins/omemo/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js"),n=(s("./src/plugins/omemo/fingerprints.js"),s("./src/plugins/omemo/profile.js"),s("./src/shared/modals/user-details.js"),s("./src/plugins/omemo/device.js")),o=s("./src/plugins/omemo/devicelist.js"),i=s("./src/plugins/omemo/devicelists.js"),a=s("./src/plugins/omemo/devices.js"),l=s("./src/plugins/omemo/store.js"),d=s("./src/plugins/omemo/api.js"),c=s("./src/plugins/omemo/utils.js");s("./src/plugins/omemo/styles/omemo.scss");function u(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{Strophe:h}=r.converse.env,{shouldClearCache:m}=r.u;r.converse.env.omemo=c.omemo,h.addNamespace("OMEMO_DEVICELIST",h.NS.OMEMO+".devicelist"),h.addNamespace("OMEMO_VERIFICATION",h.NS.OMEMO+".verification"),h.addNamespace("OMEMO_WHITELISTED",h.NS.OMEMO+".whitelisted"),h.addNamespace("OMEMO_BUNDLES",h.NS.OMEMO+".bundles"),r.converse.plugins.add("converse-omemo",{enabled:e=>window.libsignal&&e.config.get("trusted")&&!r.api.settings.get("clear_cache_on_logout")&&!e.api.settings.get("blacklisted_plugins").includes("converse-omemo"),dependencies:["converse-chatview","converse-pubsub","converse-profile"],initialize(){r.api.settings.extend({omemo_default:!1}),r.api.promises.add(["OMEMOInitialized"]),Object.assign(r._converse.api,d.default);const e={OMEMOStore:l.default,Device:n.default,Devices:a.default,DeviceList:o.default,DeviceLists:i.default};Object.assign(r._converse,e),Object.assign(r._converse.exports,e),r.api.listen.on("chatRoomInitialized",c.onChatInitialized),r.api.listen.on("chatBoxInitialized",c.onChatInitialized),r.api.listen.on("getOutgoingMessageAttributes",c.getOutgoingMessageAttributes),r.api.listen.on("createMessageStanza",((e,t)=>{return(s=function*(){try{t=yield(0,c.createOMEMOMessageStanza)(e,t)}catch(t){(0,c.handleMessageSendError)(t,e)}return t},function(){var e=this,t=arguments;return new Promise((function(r,n){var o=s.apply(e,t);function i(e){u(o,r,n,i,a,"next",e)}function a(e){u(o,r,n,i,a,"throw",e)}i(void 0)}))})();var s})),r.api.listen.on("afterFileUploaded",((e,t)=>e.file.xep454_ivkey?(0,c.setEncryptedFileURL)(e,t):t)),r.api.listen.on("beforeFileUpload",((e,t)=>e.get("omemo_active")?(0,c.encryptFile)(t):t)),r.api.listen.on("parseMessage",c.parseEncryptedMessage),r.api.listen.on("parseMUCMessage",c.parseEncryptedMessage),r.api.listen.on("chatBoxViewInitialized",c.onChatComponentInitialized),r.api.listen.on("chatRoomViewInitialized",c.onChatComponentInitialized),r.api.listen.on("connected",c.registerPEPPushHandler),r.api.listen.on("getToolbarButtons",c.getOMEMOToolbarButton),r.api.listen.on("statusInitialized",c.initOMEMO),r.api.listen.on("addClientFeatures",(()=>r.api.disco.own.features.add(`${h.NS.OMEMO_DEVICELIST}+notify`))),r.api.listen.on("afterMessageBodyTransformed",c.handleEncryptedFiles),r.api.listen.on("userDetailsModalInitialized",(e=>{const t=e.get("jid");(0,c.generateFingerprints)(t).catch((e=>r.log.error(e)))})),r.api.listen.on("profileModalInitialized",(()=>{const e=r._converse.session.get("bare_jid");(0,c.generateFingerprints)(e).catch((e=>r.log.error(e)))})),r.api.listen.on("clearSession",(()=>{delete r._converse.state.omemo_store,m(r._converse)&&r._converse.state.devicelists&&(r._converse.state.devicelists.clearStore(),delete r._converse.state.devicelists)}))}})},"./src/plugins/omemo/profile.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{Profile:()=>m});var r=s("./src/plugins/omemo/templates/profile.js"),n=s("./src/templates/spinner.js"),o=s("./src/shared/components/element.js"),i=s("./src/i18n/index.js"),a=s("./src/headless/index.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{Strophe:c,sizzle:u,u:h}=a.converse.env;class m extends o.CustomElement{initialize(){return d((function*(){const e=a._converse.session.get("bare_jid");this.devicelist=yield a.api.omemo.devicelists.get(e,!0),yield this.setAttributes(),this.listenTo(this.devicelist.devices,"change:bundle",(()=>this.requestUpdate())),this.listenTo(this.devicelist.devices,"reset",(()=>this.requestUpdate())),this.listenTo(this.devicelist.devices,"reset",(()=>this.requestUpdate())),this.listenTo(this.devicelist.devices,"remove",(()=>this.requestUpdate())),this.listenTo(this.devicelist.devices,"add",(()=>this.requestUpdate())),this.requestUpdate()})).call(this)}setAttributes(){return d((function*(){this.device_id=yield a.api.omemo.getDeviceID(),this.current_device=this.devicelist.devices.get(this.device_id),this.other_devices=this.devicelist.devices.filter((e=>e.get("id")!==this.device_id))})).call(this)}render(){return this.devicelist?(0,r.default)(this):(0,n.default)()}selectAll(e){let t=h.ancestor(e.target,"li");for(;t;)t.querySelector('input[type="checkbox"]').checked=e.target.checked,t=t.nextElementSibling}removeSelectedFingerprints(e){return d((function*(){e.preventDefault(),e.stopPropagation(),e.target.querySelector(".select-all").checked=!1;const t=u('.fingerprint-removal-item input[type="checkbox"]:checked',e.target).map((e=>e.value));try{yield this.devicelist.removeOwnDevices(t)}catch(e){a.log.error(e),a._converse.api.alert(c.LogLevel.ERROR,(0,i.__)("Error"),[(0,i.__)("Sorry, an error occurred while trying to remove the devices.")])}yield this.setAttributes(),this.requestUpdate()})).call(this)}generateOMEMODeviceBundle(e){return d((function*(){e.preventDefault();(yield a.api.confirm((0,i.__)("Confirm"),(0,i.__)("Are you sure you want to generate new OMEMO keys? This will remove your old keys and all previously encrypted messages will no longer be decryptable on this device.")))&&(yield a.api.omemo.bundle.generate(),yield this.setAttributes(),this.requestUpdate())})).call(this)}}a.api.elements.define("converse-omemo-profile",m)},"./src/plugins/omemo/store.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/plugins/omemo/utils.js"),o=s("./src/headless/index.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function a(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))}}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{Strophe:d,stx:c,u}=o.converse.env;class h extends r.Model{get Direction(){return{SENDING:1,RECEIVING:2}}getIdentityKeyPair(){const e=this.get("identity_keypair");return Promise.resolve({privKey:u.base64ToArrayBuffer(e.privKey),pubKey:u.base64ToArrayBuffer(e.pubKey)})}getLocalRegistrationId(){return Promise.resolve(parseInt(this.get("device_id"),10))}isTrustedIdentity(e,t,s){if(null==e)throw new Error("Can't check identity key for invalid key");if(!(t instanceof ArrayBuffer))throw new Error("Expected identity_key to be an ArrayBuffer");const r=this.get("identity_key"+e);return void 0===r?Promise.resolve(!0):Promise.resolve(u.arrayBufferToBase64(t)===r)}loadIdentityKey(e){if(null==e)throw new Error("Can't load identity_key for invalid identifier");return Promise.resolve(u.base64ToArrayBuffer(this.get("identity_key"+e)))}saveIdentity(e,t){if(null==e)throw new Error("Can't save identity_key for invalid identifier");const{libsignal:s}=window,r=new s.SignalProtocolAddress.fromString(e),n=this.get("identity_key"+r.getName()),o=u.arrayBufferToBase64(t);return this.save("identity_key"+r.getName(),o),n&&o!==n?Promise.resolve(!0):Promise.resolve(!1)}getPreKeys(){return this.get("prekeys")||{}}loadPreKey(e){const t=this.getPreKeys()[e];return t?Promise.resolve({privKey:u.base64ToArrayBuffer(t.privKey),pubKey:u.base64ToArrayBuffer(t.pubKey)}):Promise.resolve()}storePreKey(e,t){const s={};return s[e]={pubKey:u.arrayBufferToBase64(t.pubKey),privKey:u.arrayBufferToBase64(t.privKey)},this.save("prekeys",Object.assign(this.getPreKeys(),s)),Promise.resolve()}removePreKey(e){const t=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){l(e,t,s[t])}))}return e}({},this.getPreKeys());return delete t[e],this.save("prekeys",t),Promise.resolve()}loadSignedPreKey(e){const t=this.get("signed_prekey");return t?Promise.resolve({privKey:u.base64ToArrayBuffer(t.privKey),pubKey:u.base64ToArrayBuffer(t.pubKey)}):Promise.resolve()}storeSignedPreKey(e){if("object"!=typeof e)throw new Error("storeSignedPreKey: expected an object");return this.save("signed_prekey",{id:e.keyId,privKey:u.arrayBufferToBase64(e.keyPair.privKey),pubKey:u.arrayBufferToBase64(e.keyPair.pubKey),signature:u.arrayBufferToBase64(e.signature)}),Promise.resolve()}removeSignedPreKey(e){return this.get("signed_prekey").id===e&&(this.unset("signed_prekey"),this.save()),Promise.resolve()}loadSession(e){return Promise.resolve(this.get("session"+e))}storeSession(e,t){return Promise.resolve(this.save("session"+e,t))}removeSession(e){return Promise.resolve(this.unset("session"+e))}removeAllSessions(e){const t=Object.keys(this.attributes).filter((t=>!!t.startsWith("session"+e)&&t)),s={};return t.forEach((e=>{s[e]=void 0})),this.save(s),Promise.resolve()}publishBundle(){const e=this.get("signed_prekey"),t=`${d.NS.OMEMO_BUNDLES}:${this.get("device_id")}`,s=c`
            <item>
                <bundle xmlns="${d.NS.OMEMO}">
                    <signedPreKeyPublic signedPreKeyId="${e.id}">${e.pubKey}</signedPreKeyPublic>
                    <signedPreKeySignature>${e.signature}</signedPreKeySignature>
                    <identityKey>${this.get("identity_keypair").pubKey}</identityKey>
                    <prekeys>${Object.values(this.get("prekeys")).map(((e,t)=>c`<preKeyPublic preKeyId="${t}">${e.pubKey}</preKeyPublic>`))}
                    </prekeys>
                </bundle>
            </item>`;return o.api.pubsub.publish(null,t,s,{access_model:"open"},!1)}generateMissingPreKeys(){return a((function*(){const{libsignal:e}=window,{KeyHelper:t}=e,s=Object.keys(this.getPreKeys()),r=Array.from({length:o._converse.NUM_PREKEYS},((e,t)=>t.toString())).filter((e=>!s.includes(e)));if(r.length<1)return o.log.debug("No missing prekeys to generate for our own device"),Promise.resolve();(yield Promise.all(r.map((e=>t.generatePreKey(parseInt(e,10)))))).forEach((e=>this.storePreKey(e.keyId,e.keyPair)));const n=this.getPreKeys(),i=Object.keys(n).map((e=>({id:e,key:n[e].pubKey}))),a=o._converse.session.get("bare_jid"),l=(yield o.api.omemo.devicelists.get(a)).devices.get(this.get("device_id")),d=yield l.getBundle();l.save("bundle",Object.assign(d,{prekeys:i}))})).call(this)}generatePreKeys(){return a((function*(){const e=o._converse.NUM_PREKEYS,{libsignal:t}=window,{KeyHelper:s}=t,r=yield Promise.all([...Array(e).keys()].map((e=>s.generatePreKey(e))));return r.forEach((e=>this.storePreKey(e.keyId,e.keyPair))),r.map((e=>({id:e.keyId,key:u.arrayBufferToBase64(e.keyPair.pubKey)})))})).call(this)}generateBundle(){return a((function*(){const{libsignal:e}=window,t=yield e.KeyHelper.generateIdentityKeyPair(),s=u.arrayBufferToBase64(t.pubKey),r=yield(0,n.generateDeviceID)();this.save({device_id:r,identity_key:s,identity_keypair:{privKey:u.arrayBufferToBase64(t.privKey),pubKey:s}});const i=yield e.KeyHelper.generateSignedPreKey(t,0);this.storeSignedPreKey(i);const a={identity_key:s,device_id:r,prekeys:yield this.generatePreKeys()};a.signed_prekey={id:i.keyId,public_key:u.arrayBufferToBase64(i.keyPair.pubKey),signature:u.arrayBufferToBase64(i.signature)};const l=o._converse.session.get("bare_jid"),d=yield o.api.omemo.devicelists.get(l);(yield d.devices.create({id:a.device_id,jid:l},{promise:!0})).save("bundle",a)})).call(this)}fetchSession(){return void 0===this._setup_promise&&(this._setup_promise=new Promise(((e,t)=>{this.fetch({success:()=>{this.get("device_id")?e():this.generateBundle().then(e).catch(t)},error:(s,r)=>{o.log.warn(`Could restore OMEMO session, we'll generate a new one: ${r}`),this.generateBundle().then(e).catch(t)}})}))),this._setup_promise}}const m=h},"./src/plugins/omemo/styles/omemo.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/omemo/styles/omemo.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/omemo/templates/fingerprints.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/i18n/index.js"),n=s("./node_modules/lit/index.js"),o=s("./src/plugins/omemo/utils.js"),i=s("./src/headless/index.js");const{u:a}=i.converse.env,l=e=>{const t=(0,r.__)("OMEMO Fingerprints"),s=(0,r.__)("No OMEMO-enabled devices found"),i=e.devicelist.devices;return n.html`<ul class="list-group fingerprints"><li class="list-group-item active">${t}</li>${i.length?i.map((t=>((e,t)=>{const s=(0,r.__)("Trusted"),i=(0,r.__)("Untrusted"),l=(0,r.__)("Choose which devices you trust for OMEMO encrypted communication"),d=a.getUniqueId(),c=a.getUniqueId(),u=-1!==t.get("trusted");return t.get("bundle")&&t.get("bundle").fingerprint?n.html`<li class="list-group-item"><form class="fingerprint-trust"><div class="btn-group btn-group-toggle" role="group" aria-label="${l}"><input type="radio" class="btn-check" name="${t.get("id")}" id="${d}" autocomplete="off" value="1" @click="${e.toggleDeviceTrust}" ?checked="${u}"> <label class="btn ${u?"btn-primary active":"btn-outline-secondary"}" for="${d}">${s}</label> <input type="radio" class="btn-check" name="${t.get("id")}" id="${c}" autocomplete="off" value="-1" @click="${e.toggleDeviceTrust}" ?checked="${!u}"> <label class="btn ${u?"btn-outline-secondary":"btn-primary active"}" for="${c}">${i}</label></div><code class="fingerprint">${(0,o.formatFingerprint)(t.get("bundle").fingerprint)}</code></form></li>`:""})(e,t))):n.html`<li class="list-group-item">${s}</li>`}</ul>`}},"./src/plugins/omemo/templates/profile.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/templates/spinner.js"),n=s("./src/plugins/omemo/utils.js"),o=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");s("./src/shared/qrcode/component.js");function a(e){return o.html`${e.get("bundle")&&e.get("bundle").fingerprint?function(e){const t=(0,i.__)("Checkbox for selecting the following fingerprint");return o.html`<li class="fingerprint-removal-item list-group-item"><label class="form-label"><input type="checkbox" value="${e.get("id")}" aria-label="${t}"> <span class="fingerprint">${(0,n.formatFingerprint)(e.get("bundle").fingerprint)}</span></label></li>`}(e):function(e){const t=(0,i.__)("Device without a fingerprint"),s=(0,i.__)("Checkbox for selecting the following device");return o.html`<li class="fingerprint-removal-item list-group-item"><label class="form-label"><input type="checkbox" value="${e.get("id")}" aria-label="${s}"> <span>${t}</span></label></li>`}(e)}`}const l=e=>{var t,s;const l=(0,i.__)("This device's OMEMO fingerprint"),d=(0,i.__)("Generate new keys and fingerprint"),c=null==e||null===(t=e.current_device)||void 0===t?void 0:t.get("bundle").fingerprint;return o.html`<form class="converse-form fingerprint-removal" @submit="${e.removeSelectedFingerprints}"><ul class="list-group fingerprints"><li class="list-group-item active">${l}</li><li class="list-group-item">${c?function(e){return o.html`<span class="fingerprint">${(0,n.formatFingerprint)(e.current_device.get("bundle").fingerprint)}</span>`}(e):(0,r.default)()}</li><li class="list-group-item p-4">${c?o.html`<converse-qr-code class="centered" text="${(0,n.formatFingerprintForQRCode)(c)}"></converse-qr-code>`:""}</li></ul><div class="pb-3"><button type="button" class="generate-bundle btn btn-danger" @click="${e.generateOMEMODeviceBundle}">${d}</button></div>${(null===(s=e.other_devices)||void 0===s?void 0:s.length)?function(e){var t;const s=(0,i.__)("Other OMEMO-enabled devices"),r=(0,i.__)("Checkbox to select fingerprints of all other OMEMO devices"),n=(0,i.__)("Remove checked devices and close"),l=(0,i.__)("Select all");return o.html`<ul class="list-group fingerprints"><li class="list-group-item active"><label class="form-label"><input type="checkbox" class="select-all" @change="${e.selectAll}" title="${l}" aria-label="${r}"> ${s}</label></li>${null===(t=e.other_devices)||void 0===t?void 0:t.map((e=>a(e)))}</ul><div><button type="submit" class="save-form btn btn-primary">${n}</button></div>`}(e):""}</form>`}},"./src/plugins/omemo/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{contactHasOMEMOSupport:()=>U,createOMEMOMessageStanza:()=>fe,encryptFile:()=>F,formatFingerprint:()=>R,formatFingerprintForQRCode:()=>z,generateDeviceID:()=>oe,generateFingerprint:()=>se,generateFingerprints:()=>te,getDeviceForContact:()=>ne,getDevicesForContact:()=>re,getOMEMOToolbarButton:()=>me,getOutgoingMessageAttributes:()=>B,getSession:()=>ie,getSessionCipher:()=>Y,handleEncryptedFiles:()=>W,handleMessageSendError:()=>L,initOMEMO:()=>ce,omemo:()=>pe,onChatComponentInitialized:()=>J,onChatInitialized:()=>K,parseBundle:()=>ee,parseEncryptedMessage:()=>V,registerPEPPushHandler:()=>le,restoreOMEMOSession:()=>de,setEncryptedFileURL:()=>q});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js"),o=s("./node_modules/lit/directives/until.js"),i=s("./src/headless/index.js"),a=s("./src/shared/texture/templates/audio.js"),l=s("./src/templates/file.js"),d=s("./src/shared/texture/templates/image.js"),c=s("./src/shared/texture/templates/video.js"),u=s("./src/plugins/omemo/consts.js"),h=s("./src/utils/file.js"),m=s("./src/shared/errors.js"),f=s("./src/plugins/omemo/devicelists.js"),p=s("./src/utils/html.js");function g(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function v(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){g(o,r,n,i,a,"next",e)}function a(e){g(o,r,n,i,a,"throw",e)}i(void 0)}))}}function _(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function y(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const{Strophe:b,sizzle:j,stx:w}=i.converse.env,{CHATROOMS_TYPE:S,PRIVATE_CHAT_TYPE:x}=i.constants,{appendArrayBuffer:E,arrayBufferToBase64:A,arrayBufferToHex:O,arrayBufferToString:C,base64ToArrayBuffer:T,hexToArrayBuffer:$,initStorage:k,isAudioURL:M,isError:I,isImageURL:P,isVideoURL:N,stringToArrayBuffer:D}=i.u;function R(e){e=e.replace(/^05/,"");for(let t=1;t<8;t++){const s=8*t+t-1;e=e.slice(0,s)+" "+e.slice(s)}return e}function z(e){const t=i._converse.state.omemo_store.get("device_id");return`xmpp:${i._converse.session.get("bare_jid")}?omemo-sid-${t}=${e=e.replace(/^05/,"")}`}function L(e,t){if(e instanceof m.IQError){t.save("omemo_supported",!1);const s=[];j(`presence-subscription-required[xmlns="${b.NS.PUBSUB_ERROR}"]`,e.iq).length?s.push((0,n.__)("Sorry, we're unable to send an encrypted message because %1$s requires you to be subscribed to their presence in order to see their OMEMO information",e.iq.getAttribute("from"))):j('remote-server-not-found[xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"]',e.iq).length?s.push((0,n.__)("Sorry, we're unable to send an encrypted message because the remote server for %1$s could not be found",e.iq.getAttribute("from"))):(s.push((0,n.__)("Unable to send an encrypted message due to an unexpected error.")),s.push(e.iq.outerHTML)),i.api.alert("error",(0,n.__)("Error"),s)}else e instanceof m.UserFacingError&&i.api.alert("error",(0,n.__)("Error"),[e.message]);throw e}function U(e){return v((function*(){return(yield re(e)).length>0}))()}function B(e,t){return e.get("omemo_active")&&t.body?y(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){_(e,t,s[t])}))}return e}({},t),{is_encrypted:!0,plaintext:t.body,body:(0,n.__)("This is an OMEMO encrypted message which your client doesn’t seem to support. Find more information on https://conversations.im/omemo")}):t}function F(e){return v((function*(){const t=crypto.getRandomValues(new Uint8Array(12)),s=yield crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),r=yield crypto.subtle.encrypt({name:"AES-GCM",iv:t},s,yield e.arrayBuffer()),n=yield window.crypto.subtle.exportKey("raw",s),o=new File([r],e.name,{type:e.type,lastModified:e.lastModified});return Object.assign(o,{xep454_ivkey:O(t)+O(n)}),o}))()}function q(e,t){const s=t.oob_url.replace(/^https?:/,"aesgcm:")+"#"+e.file.xep454_ivkey;return Object.assign(t,{oob_url:null,message:s,body:s})}function H(e){return v((function*(){const t=new URL(e),s="localhost"===window.location.hostname&&"localhost"===t.hostname?"http":"https",r=t.toString().replace(/^aesgcm/,s),o=yield function(e){return v((function*(){let t;try{t=yield fetch(e)}catch(t){return i.log.error(`${t.name}: Failed to download encrypted media: ${e}`),i.log.error(t),null}if(t.status>=200&&t.status<400)return t.arrayBuffer()}))()}(r);if(null===o)return i.log.error(`Could not decrypt a received encrypted file ${t.toString()} since it could not be downloaded`),new Error((0,n.__)("Error: could not decrypt a received encrypted file, because it could not be downloaded"));const a=t.hash.slice(1),l=a.substring(a.length-64),d=a.replace(l,"");let c;try{c=yield function(e,t,s){return v((function*(){const r=yield crypto.subtle.importKey("raw",$(t),"AES-GCM",!1,["decrypt"]),n={name:"AES-GCM",iv:$(e)};return crypto.subtle.decrypt(n,r,s)}))()}(d,l,o)}catch(e){return i.log.error(`Could not decrypt file ${t.toString()}`),i.log.error(e),null}const[u,m]=t.pathname.split("/").pop().split("."),f=h.MIMETYPES_MAP[m];try{const e=new File([c],u,{type:f});return URL.createObjectURL(e)}catch(e){return i.log.error(`Could not decrypt file ${t.toString()}`),i.log.error(e),null}}))()}function G(e,t,s){const n=[];try{const t={start:/\b(aesgcm:\/\/)/gi};i.u.withinString(e,((e,t,s)=>(n.push({url:e,start:t,end:s}),e)),t)}catch(e){return void i.log.debug(e)}n.forEach((e=>{const n=H(e.url).then((t=>function(e,t,s){return I(t)?r.html`<p class="error">${t.message}</p>`:P(e)?(0,d.default)({src:t,onClick:s.onImgClick,onLoad:s.onImgLoad}):M(e)?(0,a.default)(t):N(e)?(0,c.default)(t):(0,l.default)(t,(0,p.getFileName)(e))}(e.url,t,s))),i=r.html`${(0,o.until)(n,"")}`;s.addTemplateResult(e.start+t,e.end+t,i)}))}function W(e){i._converse.state.config.get("trusted")&&e.addAnnotations(((t,s)=>G(t,s,e)))}function V(e,t){return v((function*(){var s;if(i.api.settings.get("clear_cache_on_logout")||!t.is_encrypted||t.encryption_namespace!==b.NS.OMEMO)return t;const r=j(`encrypted[xmlns="${b.NS.OMEMO}"]`,e).pop(),n=r.querySelector("header");t.encrypted={device_id:n.getAttribute("sid")};const o=yield null===(s=i.api.omemo)||void 0===s?void 0:s.getDeviceID(),a=o&&j(`key[rid="${o}"]`,r).pop();return a?(Object.assign(t.encrypted,{iv:n.querySelector("iv").textContent,key:a.textContent,payload:(null===(l=r.querySelector("payload"))||void 0===l?void 0:l.textContent)||null,prekey:["true","1"].includes(a.getAttribute("prekey"))}),!0===t.encrypted.prekey?function(e){return v((function*(){const t=Y(Q(e),parseInt(e.encrypted.device_id,10)),s=T(e.encrypted.key);let r;try{r=yield t.decryptPreKeyWhisperMessage(s,"binary")}catch(t){return i.log.error(`${t.name} ${t.message}`),Object.assign(e,Z(t))}try{const t=yield X(e,r),{omemo_store:s}=i._converse.state;return yield s.generateMissingPreKeys(),yield s.publishBundle(),t?Object.assign(e,{plaintext:t}):Object.assign(e,{is_only_key:!0})}catch(t){return i.log.error(`${t.name} ${t.message}`),Object.assign(e,Z(t))}}))()}(t):function(e){return v((function*(){const t=Y(Q(e),parseInt(e.encrypted.device_id,10)),s=T(e.encrypted.key);try{const r=yield t.decryptWhisperMessage(s,"binary"),n=yield X(e,r);return Object.assign(e,{plaintext:n})}catch(t){return i.log.error(`${t.name} ${t.message}`),Object.assign(e,Z(t))}}))()}(t)):Object.assign(t,{error_condition:"not-encrypted-for-this-device",error_type:"Decryption",is_ephemeral:!0,is_error:!0,type:"error"});var l}))()}function K(e){ue(e),e.get("type")===S&&(e.occupants.on("add",(t=>{return s=e,r=t,v((function*(){!r.isSelf()&&s.features.get("nonanonymous")&&s.features.get("membersonly")&&s.get("omemo_active")&&((yield U(r.get("jid")))||(s.createMessage({message:(0,n.__)("%1$s doesn't appear to have a client that supports OMEMO. Encrypted chat will no longer be possible in this grouchat.",r.get("nick")),type:"error"}),s.save({omemo_active:!1,omemo_supported:!1})))}))();var s,r})),e.features.on("change",(()=>ue(e))))}function J(e){e.listenTo(e.model.messages,"add",(t=>{t.get("is_encrypted")&&!t.get("is_error")&&e.model.save("omemo_supported",!0)})),e.listenTo(e.model,"change:omemo_supported",(()=>{var t;!e.model.get("omemo_supported")&&e.model.get("omemo_active")?e.model.set("omemo_active",!1):null===(t=e.querySelector("converse-chat-toolbar"))||void 0===t||t.requestUpdate()})),e.listenTo(e.model,"change:omemo_active",(()=>{e.querySelector("converse-chat-toolbar").requestUpdate()}))}function Y(e,t){const{libsignal:s}=window,r=new s.SignalProtocolAddress(e,t);return new s.SessionCipher(i._converse.state.omemo_store,r)}function Q(e){let t;if(t="me"===e.sender?i._converse.session.get("bare_jid"):e.contact_jid?e.contact_jid:"from_real_jid"in e?e.from_real_jid:e.from,!t)throw Object.assign(e,{error_text:(0,n.__)("Sorry, could not decrypt a received OMEMO message because we don't have the XMPP address for that user."),error_type:"Decryption",is_ephemeral:!0,is_error:!0,type:"error"}),new Error("Could not find JID to decrypt OMEMO message for");return t}function X(e,t){return v((function*(){const s=Q(e),r=yield i.api.omemo.devicelists.get(s,!0),n=e.encrypted;let o=r.devices.get(n.device_id);if(o||(o=yield r.devices.create({id:n.device_id,jid:s},{promise:!0})),n.payload){const e=t.slice(0,16),s=t.slice(16),r=yield pe.decryptMessage(Object.assign(n,{key:e,tag:s}));return o.save("active",!0),r}}))()}function Z(e){return{error_text:(0,n.__)("Sorry, could not decrypt a received OMEMO message due to an error.")+` ${e.name} ${e.message}`,error_condition:e.name,error_message:e.message,error_type:"Decryption",is_ephemeral:!0,is_error:!0,type:"error"}}function ee(e){const t=e.querySelector("signedPreKeyPublic"),s=e.querySelector("signedPreKeySignature"),r=j("prekeys > preKeyPublic",e).map((e=>({id:parseInt(e.getAttribute("preKeyId"),10),key:e.textContent})));return{identity_key:e.querySelector("identityKey").textContent.trim(),signed_prekey:{id:parseInt(t.getAttribute("signedPreKeyId"),10),public_key:t.textContent,signature:s.textContent},prekeys:r}}function te(e){return v((function*(){const t=yield re(e);return Promise.all(t.map((e=>se(e))))}))()}function se(e){return v((function*(){var t;if(null===(t=e.get("bundle"))||void 0===t?void 0:t.fingerprint)return;const s=yield e.getBundle();s.fingerprint=O(T(s.identity_key)),e.save("bundle",s),e.trigger("change:bundle")}))()}function re(e){return v((function*(){yield i.api.waitUntil("OMEMOInitialized");const t=yield i.api.omemo.devicelists.get(e,!0);return yield t.fetchDevices(),t.devices}))()}function ne(e,t){return v((function*(){return(yield re(e)).get(t)}))()}function oe(){return v((function*(){const{libsignal:e}=window,t=i._converse.session.get("bare_jid"),s=(yield i.api.omemo.devicelists.get(t,!0)).devices.pluck("id");let r=e.KeyHelper.generateRegistrationId(),n=0;for(;s.includes(r);)if(r=e.KeyHelper.generateRegistrationId(),n++,10===n)throw new Error("Unable to generate a unique device ID");return r.toString()}))()}function ie(e){return v((function*(){if(!e.get("bundle"))return i.log.error(`Could not build an OMEMO session for device ${e.get("id")} because we don't have its bundle`),null;const{libsignal:t}=window,s=new t.SignalProtocolAddress(e.get("jid"),e.get("id")),r=yield i._converse.state.omemo_store.loadSession(s.toString());if(r)return r;try{return yield function(e){return v((function*(){const{libsignal:t}=window,s=new t.SignalProtocolAddress(e.get("jid"),e.get("id")),r=new t.SessionBuilder(i._converse.state.omemo_store,s),n=e.getRandomPreKey(),o=yield e.getBundle();return r.processPreKey({registrationId:parseInt(e.get("id"),10),identityKey:T(o.identity_key),signedPreKey:{keyId:o.signed_prekey.id,publicKey:T(o.signed_prekey.public_key),signature:T(o.signed_prekey.signature)},preKey:{keyId:n.id,publicKey:T(n.key)}})}))()}(e)}catch(t){return i.log.error(`Could not build an OMEMO session for device ${e.get("id")}`),i.log.error(t),null}}))()}function ae(e){return v((function*(){try{j(`event[xmlns="${b.NS.PUBSUB}#event"]`,e).length&&(yield i.api.waitUntil("OMEMOInitialized"),yield(t=e,v((function*(){const e=j(`items[node="${b.NS.OMEMO_DEVICELIST}"]`,t).pop();if(!e)return;const s=`item list[xmlns="${b.NS.OMEMO}"] device`,r=j(s,e).map((e=>e.getAttribute("id"))),n=t.getAttribute("from"),o=yield i.api.omemo.devicelists.get(n,!0),a=o.devices,l=a.pluck("id").filter((e=>!r.includes(e))),d=i._converse.session.get("bare_jid");l.forEach((e=>{n===d&&e===i._converse.state.omemo_store.get("device_id")||a.get(e).save("active",!1)})),r.forEach((e=>{const t=a.get(e);t?t.save("active",!0):a.create({id:e,jid:n})})),i.u.isSameBareJID(d,n)&&o.publishCurrentDevice(r)}))()),yield function(e){return v((function*(){const t=j("items",e).pop();if(!t||!t.getAttribute("node").startsWith(b.NS.OMEMO_BUNDLES))return;const s=t.getAttribute("node").split(":")[1],r=e.getAttribute("from"),n=j("item > bundle",t).pop(),o=yield i.api.omemo.devicelists.get(r,!0);(o.devices.get(s)||o.devices.create({id:s,jid:r})).save({bundle:ee(n)})}))()}(e))}catch(e){i.log.error(e)}var t}))()}function le(){i.api.connection.get().addHandler((e=>(ae(e),!0)),null,"message","headline")}function de(){return v((function*(){}))()}function ce(e){return v((function*(){if(!e)if(i._converse.state.config.get("trusted")&&!i.api.settings.get("clear_cache_on_logout")){try{yield v((function*(){const e=i._converse.session.get("bare_jid");i._converse.state.devicelists=new f.default;const t=`converse.devicelists-${e}`;k(i._converse.state.devicelists,t),yield new Promise((e=>{i._converse.state.devicelists.fetch({success:e,error:(t,s)=>{i.log.error(s),e()}})})),yield i.api.omemo.devicelists.get(e,!0)}))(),yield i.api.omemo.session.restore(),yield i._converse.state.omemo_store.publishBundle()}catch(e){return i.log.error("Could not initialize OMEMO support"),void i.log.error(e)}i.api.trigger("OMEMOInitialized")}else i.log.warn("Not initializing OMEMO, since this browser is not trusted or clear_cache_on_logout is set to true")}))()}function ue(e){return v((function*(){let t;e.get("type")===S?(yield i.api.waitUntil("OMEMOInitialized"),t=e.features.get("nonanonymous")&&e.features.get("membersonly")):e.get("type")===x&&(t=yield U(e.get("jid"))),e.set("omemo_supported",!!t),t&&i.api.settings.get("omemo_default")&&e.set("omemo_active",!0)}))()}function he(e){e.stopPropagation(),e.preventDefault();const t=i.u.ancestor(e.target,"converse-chat-toolbar");if(!t.model.get("omemo_supported")){let e;return e=t.model.get("type")===S?[(0,n.__)("Cannot use end-to-end encryption in this groupchat, either the groupchat has some anonymity or not all participants support OMEMO.")]:[(0,n.__)("Cannot use end-to-end encryption because %1$s uses a client that doesn't support OMEMO.",t.model.contact.getDisplayName())],i.api.alert("error",(0,n.__)("Error"),e)}t.model.save({omemo_active:!t.model.get("omemo_active")})}function me(e,t){const s=e.model,o=s.get("type")===S;let a,l;if(s.get("omemo_supported")){const e=(0,n.__)("Messages are being sent in plaintext"),t=(0,n.__)("Messages are sent encrypted");a=s.get("omemo_active")?t:e}else a=o?(0,n.__)("This groupchat needs to be members-only and non-anonymous in order to support OMEMO encrypted messages"):(0,n.__)("OMEMO encryption is not supported");return l=s.get("omemo_supported")?s.get("omemo_active")?o?"var(--muc-color)":"var(--chat-color)":"var(--error-color)":"var(--disabled-color)",t.push(r.html`<button type="button" class="btn toggle-omemo" title="${a}" data-disabled="${!s.get("omemo_supported")}" @click="${he}"><converse-icon class="fa ${s.get("omemo_active")?"fa-lock":"fa-unlock"}" path-prefix="${i.api.settings.get("assets_path")}" size="1em" color="${l}"></converse-icon></button>`),t}function fe(e,t){return v((function*(){let{stanza:s}=t;const{message:r}=t;if(!r.get("is_encrypted"))return t;if(!r.get("body"))throw new Error("No message body to encrypt!");const o=yield(a=e,v((function*(){const e=(0,n.__)("Sorry, no devices found to which we can send an OMEMO encrypted message.");let t;if(a instanceof i.MUC){const e=yield Promise.all(a.occupants.map((e=>re(e.get("jid")))));t=e.reduce(((e,t)=>e.concat(t.models)),[])}else if(a.get("type")===x){const s=yield re(a.get("jid"));if(0===s.length)throw new m.UserFacingError(e);const r=i._converse.session.get("bare_jid"),n=(yield i.api.omemo.devicelists.get(r)).devices;t=[...n.models,...s.models]}const s=i._converse.state.omemo_store.get("device_id");t=t.filter((e=>e.get("id")!==s)),yield Promise.all(t.map((e=>e.getBundle())));const r=t.filter((e=>e)).map((e=>ie(e)));if(yield Promise.all(r),r.includes(null)&&(t=t.filter((e=>r[t.indexOf(e)])),0===t.length))throw new m.UserFacingError(e);return t}))());var a;const{key_and_tag:l,iv:d,payload:c}=yield pe.encryptMessage(r.get("plaintext")),h=yield Promise.all(o.filter((e=>e.get("trusted")!=u.UNTRUSTED&&e.get("active"))).map((e=>function(e,t){return Y(t.get("jid"),t.get("id")).encrypt(e).then((e=>({payload:e,device:t})))}(l,e))));return s.cnode(w`
            <encrypted xmlns="${b.NS.OMEMO}">
                <header sid="${i._converse.state.omemo_store.get("device_id")}">
                    ${h.map((({payload:e,device:t})=>3==parseInt(e.type,10)?w`<key rid="${t.get("id")}" prekey="true">${btoa(e.body)}</key>`:w`<key rid="${t.get("id")}">${btoa(e.body)}</key>`))}
                    <iv>${d}</iv>
                </header>
                <payload>${c}</payload>
            </encrypted>`).root(),s.cnode(w`<store xmlns="${b.NS.HINTS}"/>`).root(),s.cnode(w`<encryption xmlns="${b.NS.EME}" namespace="${b.NS.OMEMO}"/>`).root(),{message:r,stanza:s}}))()}const pe={decryptMessage:function(e){return v((function*(){const t=yield crypto.subtle.importKey("raw",e.key,u.KEY_ALGO,!0,["encrypt","decrypt"]),s=E(T(e.payload),e.tag),r={name:"AES-GCM",iv:T(e.iv),tagLength:u.TAG_LENGTH};return C(yield crypto.subtle.decrypt(r,t,s))}))()},encryptMessage:function(e){return v((function*(){const t=crypto.getRandomValues(new window.Uint8Array(12)),s=yield crypto.subtle.generateKey(u.KEY_ALGO,!0,["encrypt","decrypt"]),r={iv:t,name:"AES-GCM",tagLength:u.TAG_LENGTH},n=yield crypto.subtle.encrypt(r,s,D(e)),o=n.byteLength-16,i=n.slice(0,o),a=n.slice(o),l=yield crypto.subtle.exportKey("raw",s);return{tag:a,key:l,key_and_tag:E(l,a),payload:A(i),iv:A(t)}}))()},formatFingerprint:R}},"./src/plugins/profile/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js");s("./src/plugins/modal/index.js"),s("./src/plugins/profile/modals/profile.js"),s("./src/plugins/profile/modals/user-settings.js"),s("./src/plugins/profile/statusview.js");r.converse.plugins.add("converse-profile",{dependencies:["converse-status","converse-modal","converse-vcard","converse-chatboxviews","converse-adhoc-views"],initialize(){r.api.settings.extend({show_client_info:!0})}})},"./src/plugins/profile/modals/profile.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r,n,o,i=s("./node_modules/lit/index.js"),a=s("./node_modules/@converse/skeletor/dist/skeletor.js"),l=s("./src/headless/index.js"),d=s("./src/i18n/index.js"),c=s("./src/plugins/modal/modal.js"),u=s("./src/utils/file.js"),h=(s("./src/plugins/profile/password-reset.js"),s("./src/plugins/modal/templates/buttons.js")),m=s("./src/plugins/profile/templates/logout_button.js"),f=s("./src/plugins/profile/templates/profile_modal.js");s("./src/plugins/profile/modals/styles/profile.scss");function p(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function g(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){p(o,r,n,i,a,"next",e)}function a(e){p(o,r,n,i,a,"throw",e)}i(void 0)}))}}class v extends c.default{initialize(){super.initialize(),this.listenTo(this.model,"change",this.render),this.addEventListener("shown.bs.modal",(()=>{var e;null===(e=this.querySelector('input[name="status_message"]'))||void 0===e||e.focus()}),!1),l.api.trigger("profileModalInitialized",this.model)}willUpdate(e){e.has("model")&&(this._show_clear_button=!!this.model.get("status_message"))}getModalTitle(){return(0,d.__)("Your Profile")}renderModal(){return(0,f.default)(this)}renderModalFooter(){return l.api.settings.get("allow_logout")?i.html`<div class="modal-footer d-flex justify-content-between">${h.modal_close_button} ${(0,m.default)(this)}</div>`:""}setVCard(e){return g((function*(){const t=l._converse.session.get("bare_jid");try{yield l.api.vcard.set(t,e)}catch(e){return l.log.fatal(e),this.alert([(0,d.__)("Sorry, an error happened while trying to save your profile data."),(0,d.__)("You can check your browser's developer console for any error output.")].join(" ")),!1}return!0})).call(this)}onProfileFormSubmitted(e){return g((function*(){e.preventDefault(),this._submitting=!0;const t=new FormData(e.target),s=t.get("avatar_image"),r={fn:t.get("fn"),nickname:t.get("nickname"),role:t.get("role"),email:t.get("email"),url:t.get("url")};if(null==s?void 0:s.size){const e=yield(0,u.compressImage)(s),t=new FileReader;t.onloadend=()=>g((function*(){Object.assign(r,{image:btoa(t.result),image_type:s.type}),(yield this.setVCard(r))&&(this._submitting=!1,this.modal.hide())})).call(this),t.readAsBinaryString(e)}else Object.assign(r,{image:this.model.vcard.get("image"),image_type:this.model.vcard.get("image_type")}),(yield this.setVCard(r))&&(this.modal.hide(),l.api.toast.show("vcard-updated",{type:"success",body:(0,d.__)("Profile updated successfully")})),this._submitting=!1})).call(this)}onStatusFormSubmitted(e){e.preventDefault();const t=new FormData(e.target);let s,r;const n=t.get("chat_status");"online"===n?r="online":s=n,this.model.save({status_message:t.get("status_message"),presence:r,show:s}),this.alert((0,d.__)("Status updated"),"info")}clearStatusMessage(e){e&&e.preventDefault&&e.preventDefault(),this._show_clear_button=!1;this.querySelector('input[name="status_message"]').value=""}logOut(e){return g((function*(){null==e||e.preventDefault(),this.close();(yield l.api.confirm((0,d.__)("Confirm"),(0,d.__)("Are you sure you want to log out?")))&&l.api.user.logout()})).call(this)}constructor(e){super(e),this.tab="status",this._show_clear_button=!1}}r=v,n="properties",o={_submitting:{state:!0},_show_clear_button:{type:Boolean,state:!0},model:{type:a.Model},tab:{type:String}},n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,l.api.elements.define("converse-profile-modal",v)},"./src/plugins/profile/modals/styles/profile.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/profile/modals/styles/profile.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/profile/modals/styles/user-settings.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/profile/modals/styles/user-settings.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/profile/modals/templates/user-settings.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/dompurify/dist/purify.es.mjs"),n=s("./node_modules/lit/index.js"),o=s("./src/headless/index.js"),i=s("./src/i18n/index.js"),a=s("./node_modules/lit/directives/unsafe-html.js");const l=e=>{var t;const s=(0,i.__)("%1$s Open Source %2$s XMPP chat client brought to you by %3$s Opkode %2$s",'<a target="_blank" rel="nofollow" href="https://conversejs.org">',"</a>",'<a target="_blank" rel="nofollow" href="https://opkode.com">'),l=(0,i.__)("%1$s Translate %2$s it into your own language",'<a target="_blank" rel="nofollow" href="https://hosted.weblate.org/projects/conversejs/#languages">',"</a>"),d=o.api.settings.get("show_client_info"),c=o.api.settings.get("allow_adhoc_commands"),u=d&&c;return n.html`${u?(e=>{var t;const s=(0,i.__)("About"),r=(0,i.__)("Commands"),a=(0,i.__)("Services"),l=o.api.settings.get("show_client_info"),d=o.api.settings.get("allow_adhoc_commands"),c=null===(t=o._converse.pluggable.plugins["converse-disco-views"])||void 0===t?void 0:t.enabled(o._converse),u=(l?1:0)+(d?1:0)+(c?1:0)>=2;return n.html`${u?n.html`<ul class="nav nav-pills justify-content-center">${l?n.html`<li role="presentation" class="nav-item"><a class="nav-link ${"about"===e.tab?"active":""}" id="about-tab" href="#about-tabpanel" aria-controls="about-tabpanel" role="tab" data-toggle="tab" data-name="about" @click="${t=>e.switchTab(t)}">${s}</a></li>`:""} ${d?n.html`<li role="presentation" class="nav-item"><a class="nav-link ${"commands"===e.tab?"active":""}" id="commands-tab" href="#commands-tabpanel" aria-controls="commands-tabpanel" role="tab" data-toggle="tab" data-name="commands" @click="${t=>e.switchTab(t)}">${r}</a></li>`:""} ${c?n.html`<li role="presentation" class="nav-item"><a class="nav-link ${"disco"===e.tab?"active":""}" id="server-tab" href="#server-tabpanel" aria-controls="server-tabpanel" role="tab" data-toggle="tab" data-name="disco" @click="${t=>e.switchTab(t)}">${a}</a></li>`:""}</ul>`:""}`})(e):""}<div class="tab-content">${d?n.html`<div class="tab-pane tab-pane--columns ${"about"===e.tab?"active":""}" id="about-tabpanel" role="tabpanel" aria-labelledby="about-tab"><div class="container"><converse-brand-logo class="d-flex justify-content-center mt-3" hide_byline></converse-brand-logo><p class="text-center brand-subtitle">${o._converse.VERSION_NAME}</p><p class="text-center brand-subtitle">${(0,a.unsafeHTML)(r.default.sanitize(s))}</p><p class="text-center brand-subtitle">${(0,a.unsafeHTML)(r.default.sanitize(l))}</p></div></div>`:""} ${c?n.html`<div class="tab-pane tab-pane--columns ${"commands"===e.tab?"active":""}" id="commands-tabpanel" role="tabpanel" aria-labelledby="commands-tab"><converse-adhoc-commands></div>`:""} ${(null===(t=o._converse.pluggable.plugins["converse-disco-views"])||void 0===t?void 0:t.enabled(o._converse))?n.html`<div class="tab-pane tab-pane--columns ${"disco"===e.tab?"active":""}" id="server-tabpanel" role="tabpanel" aria-labelledby="server-tab">${"disco"===e.tab?n.html`<converse-disco-browser></converse-disco-browser>`:""}</div>`:""}</div>`}},"./src/plugins/profile/modals/user-settings.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),n=s("./src/i18n/index.js"),o=s("./src/plugins/modal/modal.js"),i=s("./src/plugins/profile/modals/templates/user-settings.js");s("./src/plugins/profile/modals/styles/user-settings.scss");class a extends o.default{renderModal(){return(0,i.default)(this)}getModalTitle(){return(0,n.__)("Settings")}constructor(e){super(e);const t=r.api.settings.get("show_client_info"),s=r.api.settings.get("allow_adhoc_commands");t&&s||t?this.tab="about":s&&(this.tab="commands")}}r.api.elements.define("converse-user-settings-modal",a)},"./src/plugins/profile/password-reset.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/plugins/profile/templates/password-reset.js"),n=s("./src/shared/components/element.js"),o=s("./src/i18n/index.js"),i=s("./src/headless/index.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{Strophe:l,$iq:d,sizzle:c,u}=i.converse.env;class h extends n.CustomElement{static get properties(){return{passwords_mismatched:{type:Boolean},alert_message:{type:String}}}initialize(){this.passwords_mismatched=!1,this.alert_message=""}render(){return(0,r.default)(this)}checkPasswordsMatch(e){var t;const s=new FormData(null!==(t=e.target.form)&&void 0!==t?t:e.target),r=s.get("password"),n=s.get("password_check");return this.passwords_mismatched=r&&r!==n,this.passwords_mismatched}onSubmit(e){return(t=function*(){if(e.preventDefault(),this.checkPasswordsMatch(e))return;const t=i._converse.session.get("domain"),s=d({type:"get",to:t}).c("query",{xmlns:l.NS.REGISTER}),r=yield i.api.sendIQ(s);if(null===r)return void(this.alert_message=(0,o.__)("Timeout error"));if(c(`error service-unavailable[xmlns="${l.NS.STANZAS}"]`,r).length)return void(this.alert_message=(0,o.__)("Your server does not support password reset"));if(u.isErrorStanza(r))return this.alert_message=(0,o.__)("Your server responded with an unknown error, check the console for details"),i.log.error("Could not set password"),void i.log.error(r);const n=r.querySelector("username").textContent,a=new FormData(e.target).get("password"),h=d({type:"set",to:t}).c("query",{xmlns:l.NS.REGISTER}).c("username",{},n).c("password",{},a),m=yield i.api.sendIQ(h);null===m?this.alert_message=(0,o.__)("Timeout error while trying to set your password"):c(`error not-allowed[xmlns="${l.NS.STANZAS}"]`,m).length?this.alert_message=(0,o.__)("Your server does not allow password reset"):c(`error forbidden[xmlns="${l.NS.STANZAS}"]`,m).length||u.isErrorStanza(m)?this.alert_message=(0,o.__)("You are not allowed to change your password"):i.api.alert("info",(0,o.__)("Success"),[(0,o.__)("Your new password has been set")])},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}).call(this);var t}}i.api.elements.define("converse-change-password-form",h)},"./src/plugins/profile/statusview.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/plugins/profile/templates/profile.js");s("./src/plugins/profile/styles/profile.scss");class i extends n.CustomElement{initialize(){this.model=r._converse.state.profile,this.listenTo(this.model,"change",(()=>this.requestUpdate())),this.listenTo(this.model,"vcard:add",(()=>this.requestUpdate())),this.listenTo(this.model,"vcard:change",(()=>this.requestUpdate()))}render(){return(0,o.default)(this)}showProfileModal(e,t="status"){null==e||e.preventDefault(),r.api.modal.show("converse-profile-modal",{model:this.model,tab:t},e)}}r.api.elements.define("converse-user-profile",i);const a=i},"./src/plugins/profile/styles/profile.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/profile/styles/profile.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/profile/templates/chat-status-form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js");const o=e=>{const t=(0,n.__)("Away"),s=(0,n.__)("Busy"),o=(0,n.__)("Online"),i=(0,n.__)("Set status"),a=(0,n.__)("Away for long"),l=(0,n.__)("Personal status message"),d=e.model.get("show")||e.model.get("presence"),c=e.model.get("status_message");return r.html`<form class="converse-form set-xmpp-status" id="set-xmpp-status" @submit="${t=>e.onStatusFormSubmitted(t)}"><div class="mb-3"><div class="form-check"><input ?checked="${"online"===d}" type="radio" id="radio-online" value="online" name="chat_status" class="form-check-input"> <label class="form-check-label" for="radio-online"><converse-icon size="1em" class="fa fa-circle chat-status chat-status--online"></converse-icon> ${o}</label></div><div class="form-check"><input ?checked="${"busy"===d}" type="radio" id="radio-busy" value="dnd" name="chat_status" class="form-check-input"> <label class="form-check-label" for="radio-busy"><converse-icon size="1em" class="fa fa-minus-circle chat-status chat-status--busy"></converse-icon> ${s}</label></div><div class="form-check"><input ?checked="${"away"===d}" type="radio" id="radio-away" value="away" name="chat_status" class="form-check-input"> <label class="form-check-label" for="radio-away"><converse-icon size="1em" class="fa fa-circle chat-status chat-status--away"></converse-icon> ${t}</label></div><div class="form-check"><input ?checked="${"xa"===d}" type="radio" id="radio-xa" value="xa" name="chat_status" class="form-check-input"> <label class="form-check-label" for="radio-xa"><converse-icon size="1em" class="far fa-circle chat-status chat-status--xa"></converse-icon> ${a}</label></div></div><div class="mb-3"><div class="${e._show_clear_button?"input-group":""}"><input name="status_message" type="text" class="form-control" autofocus value="${c||""}" placeholder="${l}" @input="${t=>e._show_clear_button=!!t.target.value}"> <button type="button" class="btn btn-outline-secondary" @click="${t=>e.clearStatusMessage(t)}" title="${(0,n.__)("Clear status message")}" ?hidden="${!e._show_clear_button}"><converse-icon size="1em" class="fa fa-times"></converse-icon></button></div></div><button type="submit" class="btn btn-primary">${i}</button></form>`}},"./src/plugins/profile/templates/logout_button.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/i18n/index.js");const i=e=>{const t=(0,o.__)("Log out");return r.html`<button type="button" @click="${t=>e.logOut(t)}" class="btn btn-danger">${n.api.settings.get("allow_logout")?r.html`<converse-icon class="fas fa-sign-out-alt" color="var(--background-color)" size="1em"></converse-icon> ${t}`:""}</button>`}},"./src/plugins/profile/templates/password-reset.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/i18n/index.js"),n=s("./node_modules/lit/index.js");const o=e=>{const t=(0,r.__)("Submit"),s=(0,r.__)("The new passwords must match"),o=(0,r.__)("New password"),i=(0,r.__)("Confirm new password");return n.html`<form class="converse-form passwordreset-form" method="POST" @submit="${t=>e.onSubmit(t)}">${e.alert_message?n.html`<div class="alert alert-danger" role="alert">${e.alert_message}</div>`:""}<div class="py-2"><label for="converse_password_reset_new" class="form-label">${o}</label> <input class="form-control ${e.passwords_mismatched?"error":""}" type="password" name="password" required="required" id="converse_password_reset_new" autocomplete="new-password" minlength="8" ?disabled="${e.alert_message}"></div><div class="py-2"><label for="converse_password_reset_check" class="form-label">${i}</label> <input class="form-control ${e.passwords_mismatched?"error":""}" type="password" name="password_check" required="required" id="converse_password_reset_check" autocomplete="new-password" minlength="8" ?disabled="${e.alert_message}" @input="${t=>e.checkPasswordsMatch(t)}"> ${e.passwords_mismatched?n.html`<span class="error">${s}</span>`:""}</div><input class="save-form btn btn-primary" type="submit" value="${t}" ?disabled="${e.alert_message}"></form>`}},"./src/plugins/profile/templates/profile.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js"),n=(s("./src/shared/avatar/avatar.js"),s("./src/i18n/index.js")),o=s("./src/plugins/profile/utils.js");const i=e=>{var t;const s=e.model.get("show"),i=e.model.get("presence")||"online",a=s||i,l=e.model.get("status_message")||(0,n.__)("I am %1$s",(0,o.getPrettyStatus)(a)),d=(0,n.__)("Update your profile"),c=(0,n.__)("Click to change your chat status");let u,h;return[u,h]="chat"===s||!s&&"online"===i?["fa fa-circle chat-status","chat-status-online"]:"dnd"===s?["fa fa-minus-circle chat-status","chat-status-busy"]:"away"===s||"xa"===s?["fa fa-circle chat-status","chat-status-away"]:["fa fa-circle chat-status","comment"],r.html`<div class="userinfo"><div class="controlbox-section profile d-flex justify-content-between"><a class="show-profile" href="#" @click="${t=>e.showProfileModal(t,"profile")}" title="${d}"><converse-avatar class="avatar align-self-center" .model="${e.model}" name="${e.model.getDisplayName()}" nonce="${null===(t=e.model.vcard)||void 0===t?void 0:t.get("vcard_updated")}" height="40" width="40"></converse-avatar><span class="username align-self-center w-100" role="heading" aria-level="2">${e.model.getDisplayName()}</span></a><converse-controlbox-buttons></converse-controlbox-buttons></div><div class="d-flex xmpp-status"><a class="change-status" title="${c}" data-toggle="modal" data-target="#changeStatusModal" @click="${t=>e.showProfileModal(t)}"><span class="${a} w-100" data-value="${a}"><converse-icon color="var(--${h})" css="margin-top: -0.1em" size="0.82em" class="${u}"></converse-icon><span class="xmpp-status__msg">${l}</span></span></a></div></div>`}},"./src/plugins/profile/templates/profile_modal.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),i=(s("./src/shared/components/image-picker.js"),s("./src/plugins/profile/utils.js")),a=s("./src/plugins/profile/templates/chat-status-form.js");function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=e=>{var t,s;const d=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){l(e,t,s[t])}))}return e}({},e.model.toJSON(),null===(t=e.model.vcard)||void 0===t?void 0:t.toJSON()),c=(0,o.__)("Email"),u=(0,o.__)("Full Name"),h=(0,o.__)("XMPP Address"),m=(0,o.__)("Nickname"),f=(0,o.__)("Role"),p=(0,o.__)("Save and close"),g=(0,o.__)("Use commas to separate multiple roles. Your roles are shown next to your name on your chat messages."),v=(0,o.__)("URL"),_=(0,o.__)("Status"),y=(0,o.__)("OMEMO"),b=(0,o.__)("Profile"),j=(0,o.__)("Reset Password"),w=new Map;return w.set("status",r.html`<li role="presentation" class="nav-item"><a class="nav-link ${"status"===e.tab?"active":""}" id="status-tab" href="#status-tabpanel" aria-controls="status-tabpanel" role="tab" @click="${t=>e.switchTab(t)}" data-name="status" data-toggle="tab">${_}</a></li>`),w.set("profile",r.html`<li role="presentation" class="nav-item"><a class="nav-link ${"profile"===e.tab?"active":""}" id="profile-tab" href="#profile-tabpanel" aria-controls="profile-tabpanel" role="tab" @click="${t=>e.switchTab(t)}" data-name="profile" data-toggle="tab">${b}</a></li>`),(0,i.shouldShowPasswordResetForm)()&&w.set("passwordreset",r.html`<li role="presentation" class="nav-item"><a class="nav-link ${"passwordreset"===e.tab?"active":""}" id="passwordreset-tab" href="#passwordreset-tabpanel" aria-controls="passwordreset-tabpanel" role="tab" @click="${t=>e.switchTab(t)}" data-name="passwordreset" data-toggle="tab">${j}</a></li>`),(null===(s=n._converse.pluggable.plugins["converse-omemo"])||void 0===s?void 0:s.enabled(n._converse))&&w.set("omemo",r.html`<li role="presentation" class="nav-item"><a class="nav-link ${"omemo"===e.tab?"active":""}" id="omemo-tab" href="#omemo-tabpanel" aria-controls="omemo-tabpanel" role="tab" @click="${t=>e.switchTab(t)}" data-name="omemo" data-toggle="tab">${y}</a></li>`),r.html`${w.size?r.html`<ul class="nav nav-pills justify-content-center">${Array.from(w.values())}</ul>`:""}<div class="tab-content">${w.get("passwordreset")?r.html`<div class="tab-pane ${"status"===e.tab?"active":""}" id="status-tabpanel" role="tabpanel" aria-labelledby="status-tab">${"status"===e.tab?(0,a.default)(e):""}</div>`:""}<div class="tab-pane ${"profile"===e.tab?"active":""}" id="profile-tabpanel" role="tabpanel" aria-labelledby="profile-tab"><form class="converse-form converse-form--modal" action="#" @submit="${t=>e.onProfileFormSubmitted(t)}"><div class="row py-2"><div class="col-auto"><converse-image-picker .model="${e.model}" width="128" height="128"></converse-image-picker></div><div class="col"><div class="px-3"><label class="col-form-label">${h}:</label><div>${d.jid}</div></div></div></div><div><label for="vcard-fullname" class="col-form-label">${u}:</label> <input id="vcard-fullname" type="text" class="form-control" name="fn" value="${d.fullname||""}"></div><div><label for="vcard-nickname" class="col-form-label">${m}:</label> <input id="vcard-nickname" type="text" class="form-control" name="nickname" value="${d.nickname||""}"></div><div><label for="vcard-url" class="col-form-label">${v}:</label> <input id="vcard-url" type="url" class="form-control" name="url" value="${d.url||""}"></div><div><label for="vcard-email" class="col-form-label">${c}:</label> <input id="vcard-email" type="email" class="form-control" name="email" value="${d.email||""}"></div><div><label for="vcard-role" class="col-form-label pb-0">${f}:</label> <small id="vcard-role-help" class="d-block pb-1 form-text text-muted">${g}</small> <input id="vcard-role" type="text" class="form-control" name="role" value="${d.role||""}" aria-describedby="vcard-role-help"></div><div class="mt-3">${e._submitting?r.html`<converse-spinner></converse-spinner>`:r.html`<button type="submit" class="save-form btn btn-primary">${p}</button>`}</div></form></div>${w.get("passwordreset")?r.html`<div class="tab-pane ${"passwordreset"===e.tab?"active":""}" id="passwordreset-tabpanel" role="tabpanel" aria-labelledby="passwordreset-tab">${"passwordreset"===e.tab?r.html`<converse-change-password-form></converse-change-password-form>`:""}</div>`:""} ${w.get("omemo")?function(e){return r.html`<div class="tab-pane ${"omemo"===e.tab?"active":""}" id="omemo-tabpanel" role="tabpanel" aria-labelledby="omemo-tab">${"omemo"===e.tab?r.html`<converse-omemo-profile></converse-omemo-profile>`:""}</div>`}(e):""}</div>`}},"./src/plugins/profile/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{getPrettyStatus:()=>o,shouldShowPasswordResetForm:()=>i});var r=s("./src/i18n/index.js"),n=s("./src/headless/index.js");function o(e){return"chat"===e?(0,r.__)("online"):"dnd"===e?(0,r.__)("busy"):"xa"===e?(0,r.__)("away for long"):"away"===e?(0,r.__)("away"):"offline"===e?(0,r.__)("offline"):(0,r.__)(e)||(0,r.__)("online")}function i(){const e=n._converse.api.connection.get()._sasl_mechanism;return"EXTERNAL"!==e.mechname&&"ANONYMOUS"!==e.mechname&&"X-OAUTH2"!==e.mechname&&"OAUTHBEARER"!==e.mechname}},"./src/plugins/push/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js"),n=s("./src/plugins/push/utils.js");const{Strophe:o}=r.converse.env;o.addNamespace("PUSH","urn:xmpp:push:0"),r.converse.plugins.add("converse-push",{initialize(){r.api.settings.extend({push_app_servers:[],enable_muc_push:!1}),r.api.listen.on("statusInitialized",(()=>(0,n.enablePush)())),r.api.settings.get("enable_muc_push")&&r.api.listen.on("chatBoxesInitialized",(()=>r._converse.state.chatboxes.on("add",n.onChatBoxAdded)))}})},"./src/plugins/push/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{enablePush:()=>d,onChatBoxAdded:()=>c});var r=s("./src/headless/index.js");function n(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function o(e){return function(){var t=this,s=arguments;return new Promise((function(r,o){var i=e.apply(t,s);function a(e){n(i,r,o,a,l,"next",e)}function l(e){n(i,r,o,a,l,"throw",e)}a(void 0)}))}}const{Strophe:i,$iq:a}=r.converse.env,{CHATROOMS_TYPE:l}=r.constants;function d(e){return o((function*(){if(!e){const t=r._converse.session.get("bare_jid");e=t}const t=r._converse.session.get("push_enabled")||[];if(t.includes(e))return;const s=r.api.settings.get("push_app_servers").filter((e=>!e.disable)),n=r.api.settings.get("push_app_servers").filter((e=>e.disable)),l=s.map((t=>function(e,t){return o((function*(){if(!t.jid||!t.node)return;if(!(yield r.api.disco.getIdentity("pubsub","push",t.jid)))return r.log.warn(`Not enabling push the service "${t.jid}", it doesn't have the right disco identtiy.`);const s=yield Promise.all([r.api.disco.supports(i.NS.PUSH,t.jid),r.api.disco.supports(i.NS.PUSH,e)]);if(!s[0]&&!s[1])return void r.log.warn(`Not enabling push app server "${t.jid}", no disco support from your server.`);const n=a({type:"set"}),o=r._converse.session.get("bare_jid");return e!==o&&n.attrs({to:e}),n.c("enable",{xmlns:i.NS.PUSH,jid:t.jid,node:t.node}),t.secret&&n.c("x",{xmlns:i.NS.XFORM,type:"submit"}).c("field",{var:"FORM_TYPE"}).c("value").t(`${i.NS.PUBSUB}#publish-options`).up().up().c("field",{var:"secret"}).c("value").t(t.secret),r.api.sendIQ(n)}))()}(e,t))),d=n.map((t=>function(e,t){return o((function*(){if(!t.jid)return;const s=r._converse.session.get("bare_jid");if(!(yield r.api.disco.supports(i.NS.PUSH,e||s)))return void r.log.warn(`Not disabling push app server "${t.jid}", no disco support from your server.`);const n=a({type:"set"});e!==s&&n.attrs({to:e}),n.c("disable",{xmlns:i.NS.PUSH,jid:t.jid}),t.node&&n.attrs({node:t.node}),r.api.sendIQ(n).catch((e=>{r.log.error(`Could not disable push app server for ${t.jid}`),r.log.error(e)}))}))()}(e,t)));try{yield Promise.all(l.concat(d))}catch(e){r.log.error("Could not enable or disable push App Server"),e&&r.log.error(e)}finally{t.push(e)}r._converse.session.save("push_enabled",t)}))()}function c(e){e.get("type")==l&&d(i.getDomainFromJid(e.get("jid")))}},"./src/plugins/register/form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r=s("./src/headless/index.js"),n=s("./src/templates/form_input.js"),o=s("./src/templates/form_url.js"),i=s("./src/templates/form_username.js"),a=s("./src/plugins/register/templates/choose_provider.js"),l=s("./src/shared/components/element.js"),d=s("./src/i18n/index.js"),c=s("./src/plugins/register/utils.js");s("./src/plugins/register/styles/register.scss");function u(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function h(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}const{Strophe:m,sizzle:f,$iq:p}=r.converse.env,{CONNECTION_STATUS:g}=r.constants,v=1,_=2;var y=new WeakSet;class b extends l.CustomElement{static get properties(){return{status:{type:String},domain:{type:String},service_url:{type:String},alert_message:{type:String},alert_type:{type:String}}}initialize(){this.reset(),this.listenTo(r._converse,"connectionInitialized",(()=>this.registerHooks()));const e=r.api.settings.get();this.listenTo(e,"change:show_connection_url_input",(()=>this.requestUpdate()));const t=r.api.settings.get("registration_domain");t?this.fetchRegistrationForm(t):this.status=0}render(){return(0,a.default)(this)}setMessage(e,t){this.alert_type=t,this.alert_message=e}registerHooks(){const e=r.api.connection.get(),t=e._connect_cb.bind(e);e._connect_cb=(e,s,r)=>{this._registering?this.getRegistrationFields(e,s)&&(this._registering=!1):t(e,s,r)}}getRegistrationFields(e,t){const s=r.api.connection.get();s.connected=!0;const n="_reqToData"in s._proto?s._proto._reqToData(e):e;if(!n)return;if(s._proto._connect_cb(n)===m.Status.CONNFAIL)return this.status=0,this.setErrorMessage((0,d.__)("Sorry, we're unable to connect to your chosen provider.")),!1;const o=n.getElementsByTagName("register"),i=n.getElementsByTagName("mechanism");if(0===o.length&&0===i.length)return s._proto._no_auth_received(t),!1;if(0===o.length)return s._changeConnectStatus(m.Status.REGIFAIL),this.alert_type="danger",this.setErrorMessage((0,d.__)("Sorry, the given provider does not support in band account registration. Please try with a different provider.")),!0;s._addSysHandler((e=>this.onRegistrationFields(e)),null,"iq",null,null);const a=p({type:"get"}).c("query",{xmlns:m.NS.REGISTER}).tree();return a.setAttribute("id",s.getUniqueId("sendIQ")),s.send(a),s.connected=!1,!0}onRegistrationFields(e){return"error"===e.getAttribute("type")?(this.reportErrors(e),r.api.settings.get("registration_domain")?this.status=3:this.status=0,!1):(this.setFields(e),this.status===v&&this.renderRegistrationForm(e),!1)}reset(e){Object.assign(this,{fields:{},urls:[],title:"",instructions:"",registered:!1,_registering:!1,domain:null,form_type:null}),e&&Object.assign(this,e)}onFormSubmission(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e);const s=e.target;null===s.querySelector("input[name=domain]")?this.submitRegistrationForm(s):this.onProviderChosen(s)}onProviderChosen(e){var t;const s=null===(t=e.querySelector("input[name=domain]"))||void 0===t?void 0:t.value;if(s){const t=new FormData(e);let n=null;if(r.api.settings.get("show_connection_url_input"))if(n=t.get("connection-url"),n.startsWith("wss:"))r.api.settings.set("websocket_url",n);else{if(!n.startsWith("https:"))return this.alert_message=(0,d.__)("Invalid connection URL, only HTTPS and WSS accepted"),this.alert_type="danger",this.status=0,void this.requestUpdate();r.api.settings.set("bosh_service_url",n)}this.fetchRegistrationForm(s.trim(),null==n?void 0:n.trim())}else this.status=0}fetchRegistrationForm(e,t){var s;return this.status=v,this.reset({_registering:!0,domain:m.getDomainFromJid(e),service_url:t}),r.api.connection.init(),null===(s=r.api.connection.get())||void 0===s||s.connect(this.domain,"",((e,t)=>this.onConnectStatusChanged(e,t))),!1}onConnectStatusChanged(e,t){if(r.log.debug("converse-register: onConnectStatusChanged"),[m.Status.DISCONNECTED,m.Status.CONNFAIL,m.Status.REGIFAIL,m.Status.NOTACCEPTABLE,m.Status.CONFLICT].includes(e))r.log.warn(`Problem during registration: Strophe.Status is ${g[e]}`),this.abortRegistration(t);else if(e===m.Status.REGISTERED){if(r.log.debug("Registered successfully."),r.api.connection.get().reset(),["converse/login","converse/register"].includes(window.location.hash)&&history.pushState(null,"",window.location.pathname),(0,c.setActiveForm)("login"),this.fields.password&&this.fields.username){const e=r.api.connection.get();e.connect(this.fields.username.toLowerCase()+"@"+this.domain.toLowerCase(),this.fields.password,e.onConnectStatusChanged),this.setFeedbackMessage((0,d.__)("Now logging you in"))}else this.setFeedbackMessage((0,d.__)("Registered successfully"));this.reset()}}getLegacyFormFields(){return[...Object.keys(this.fields).map((e=>"username"===e?(0,i.default)({domain:` @${this.domain}`,name:e,type:"text",label:e,value:"",required:!0}):(0,n.default)({label:e,name:e,placeholder:e,required:!0,type:"password"===e||"email"===e?e:"text",value:""}))),...this.urls.map((e=>(0,o.default)({label:"",value:e})))]}getFormFields(e){if("xform"===this.form_type){const{fields:s}=r.parsers.parseXForm(e);var t;return null!==(t=null==s?void 0:s.map((e=>r.u.xFormField2TemplateResult(e,{domain:this.domain}))))&&void 0!==t?t:[]}return this.getLegacyFormFields()}renderRegistrationForm(e){this.form_fields=this.getFormFields(e),this.status=_}reportErrors(e){return(t=function*(){if((yield r.parsers.parseErrorStanza(e))instanceof r.errors.ConflictError)return void this.setErrorMessage(`${(0,d.__)("Registration failed.")} ${(0,d.__)("Please try a different username.")}`);const t=Array.from(e.querySelectorAll("error"));t.length?this.setErrorMessage(`${(0,d.__)("Registration failed.")}${t.reduce(((e,t)=>`${e}\n${t.textContent}`),"")}`):this.setErrorMessage((0,d.__)("The provider rejected your registration attempt. Please check the values you entered for correctness."))},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function i(e){u(o,r,n,i,a,"next",e)}function a(e){u(o,r,n,i,a,"throw",e)}i(void 0)}))}).call(this);var t}renderProviderChoiceForm(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e);const s=r.api.connection.get();s._proto._abortAllRequests(),s.reset(),this.status=0}abortRegistration(e){const t=r.api.connection.get();t._proto._abortAllRequests(),t.reset(),[v,_].includes(this.status)&&r.api.settings.get("registration_domain")?this.fetchRegistrationForm(r.api.settings.get("registration_domain")):(this.alert_message=e,this.alert_type="danger",this.status=0,this.requestUpdate())}submitRegistrationForm(e){const t=f(":input:not([type=button]):not([type=submit])",e),s=p({type:"set",id:r.u.getUniqueId()}).c("query",{xmlns:m.NS.REGISTER});if("xform"===this.form_type){s.c("x",{xmlns:m.NS.XFORM,type:"submit"});t.map((e=>r.u.webForm2xForm(e))).filter((e=>e)).forEach((e=>s.cnode(e).up()))}else t.forEach((e=>s.c(e.getAttribute("name"),{},e.value)));const n=r.api.connection.get();n._addSysHandler((e=>function(e,t,s){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return s}(this,y,j).call(this,e)),null,"iq",null,null),n.send(s),this.setFields(s.tree())}setFields(e){const t=e.querySelector("query"),s=f(`x[xmlns="${m.NS.XFORM}"]`,t);s.length>0?this.setFieldsFromXForm(s.pop()):this.setFieldsFromLegacy(t)}setFieldsFromLegacy(e){[].forEach.call(e.children,(e=>{"instructions"!==e.tagName.toLowerCase()?"x"!==e.tagName.toLowerCase()?this.fields[e.tagName.toLowerCase()]=m.getText(e):"jabber:x:oob"===e.getAttribute("xmlns")&&this.urls.concat(f("url",e).map((e=>e.textContent))):this.instructions=m.getText(e)})),this.form_type="legacy"}setFieldsFromXForm(e){var t,s,n,o;this.title=null!==(n=null===(t=e.querySelector("title"))||void 0===t?void 0:t.textContent)&&void 0!==n?n:"",this.instructions=null!==(o=null===(s=e.querySelector("instructions"))||void 0===s?void 0:s.textContent)&&void 0!==o?o:"",e.querySelectorAll("field").forEach((e=>{const t=e.getAttribute("var");var s,n;t?this.fields[t.toLowerCase()]=null!==(n=null===(s=e.querySelector("value"))||void 0===s?void 0:s.textContent)&&void 0!==n?n:"":r.log.warn("Found field we couldn't parse")})),this.form_type="xform"}constructor(){super(),h(this,y),this.urls=[],this.fields={},this.domain=null,this.alert_type="info",this.setErrorMessage=e=>this.setMessage(e,"danger"),this.setFeedbackMessage=e=>this.setMessage(e,"info")}}function j(e){const t=r.api.connection.get();if("error"===e.getAttribute("type")){r.log.info("Registration failed."),this.reportErrors(e);const s=e.getElementsByTagName("error");if(1!==s.length)return t._changeConnectStatus(m.Status.REGIFAIL,"unknown"),!1;const n=s[0].firstElementChild.tagName.toLowerCase();"conflict"===n?t._changeConnectStatus(m.Status.CONFLICT,n):"not-acceptable"===n?t._changeConnectStatus(m.Status.NOTACCEPTABLE,n):t._changeConnectStatus(m.Status.REGIFAIL,n)}else t._changeConnectStatus(m.Status.REGISTERED,null);return!1}r.api.elements.define("converse-registration-form",b);const w=b},"./src/plugins/register/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js"),n=s("./src/i18n/index.js"),o=s("./src/plugins/register/utils.js"),i=s("./src/plugins/register/form.js"),a=s("./src/plugins/register/register_link.js");const{Strophe:l}=r.converse.env,{CONNECTION_STATUS:d}=r.constants;l.addNamespace("REGISTER","jabber:iq:register");const c=Object.keys(l.Status).reduce(((e,t)=>Math.max(e,l.Status[t])),0);l.Status.REGIFAIL=c+1,l.Status.REGISTERED=c+2,l.Status.CONFLICT=c+3,l.Status.NOTACCEPTABLE=c+5,r.converse.plugins.add("converse-register",{dependencies:["converse-controlbox"],enabled:()=>!0,initialize(){d[l.Status.REGIFAIL]="REGIFAIL",d[l.Status.REGISTERED]="REGISTERED",d[l.Status.CONFLICT]="CONFLICT",d[l.Status.NOTACCEPTABLE]="NOTACCEPTABLE",r.api.settings.extend({allow_registration:!0,domain_placeholder:(0,n.__)(" e.g. conversejs.org"),providers_link:"https://compliance.conversations.im/",registration_domain:""});const e={RegisterLink:a.default,RegistrationForm:i.default};Object.assign(r._converse.exports,e),(0,o.routeToForm)(),addEventListener("hashchange",o.routeToForm)}})},"./src/plugins/register/register_link.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js"),o=s("./src/headless/index.js"),i=s("./src/shared/components/element.js");class a extends i.CustomElement{render(){const e=(0,n.__)("Create an account"),t=(0,n.__)("Don't have a chat account?");return this.shouldShow()?r.html`<div class="mt-3 text-center switch-form"><p class="mb-1">${t}</p><a class="register-account toggle-register-login" href="#converse/register">${e}</a></div>`:""}shouldShow(){return o.api.settings.get("allow_registration")&&!o.api.settings.get("auto_login")&&o._converse.pluggable.plugins["converse-register"].enabled(o._converse)}}o.api.elements.define("converse-register-link",a);const l=a},"./src/plugins/register/styles/register.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/register/styles/register.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/register/templates/choose_provider.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/templates/spinner.js"),i=s("./src/i18n/index.js"),a=s("./src/plugins/controlbox/templates/loginform.js"),l=s("./src/plugins/register/templates/switch_form.js"),d=s("./src/plugins/register/templates/registration_form.js");function c(e){const t=n.api.settings.get("registration_domain"),s=(0,i.__)("Create your account"),o=(0,i.__)("Please enter the XMPP provider to register with:"),l=!t&&e.status===u;return r.html`<form id="converse-register" class="converse-form" @submit="${t=>e.onFormSubmission(t)}"><legend class="col-form-label">${s}</legend><div class="pt-3"><label class="form-label">${o}</label> ${t||function(e){const t=n.api.settings.get("domain_placeholder"),s=(0,i.__)("Tip: A list of public XMPP providers is available"),o=(0,i.__)("here"),l=n.api.settings.get("providers_link");return r.html`<input class="form-control" required="required" type="text" name="domain" placeholder="${t}" value="${e.domain}"><p class="form-text text-muted">${s} <a href="${l}" class="url" target="_blank" rel="noopener">${o}</a>.</p>${n.api.settings.get("show_connection_url_input")?(0,a.tplConnectionURLInput)():""}`}(e)}</div>${l?function(){const e=(0,i.__)("Fetch registration form"),t=(0,i.__)("Already have a chat account?"),s=(0,i.__)("Go back to login");return r.html`<fieldset class="form-group buttons"><input class="btn btn-primary" type="submit" value="${e}"></fieldset><div class="switch-form"><p class="mb-1">${t}</p><a class="login-here toggle-register-login" href="#converse/login">${s}</a></div>`}():""}</form>`}const u=0,h=e=>r.html`${e.alert_message?r.html`<div class="alert alert-${e.alert_type}" role="alert">${e.alert_message}</div>`:""} ${e.status===u?c(e):""} ${1===e.status?function(e){const t=n.api.settings.get("registration_domain"),s=(0,i.__)("Cancel");return r.html`<form id="converse-register" class="converse-form no-scrolling" @submit="${t=>e.onFormSubmission(t)}">${(0,o.default)({classes:"hor_centered"})} ${t?"":r.html`<button class="btn btn-secondary button-cancel hor_centered" @click="${t=>e.renderProviderChoiceForm(t)}">${s}</button>`}</form>`}(e):""} ${2===e.status?(0,d.default)(e):""} ${3===e.status?(0,l.default)():""}`},"./src/plugins/register/templates/registration_form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),i=s("./src/plugins/register/templates/switch_form.js");const a=e=>{const t=(0,o.__)("Choose a different provider"),s=(0,o.__)("Account Registration:"),a=(0,o.__)("Register"),l=n.api.settings.get("registration_domain");return r.html`<form id="converse-register" class="converse-form rounded" @submit="${t=>e.onFormSubmission(t)}"><legend class="col-form-label">${s} ${e.domain}</legend><p class="title">${e.title}</p><p class="form-help instructions">${e.instructions}</p><div class="form-errors hidden"></div>${e.form_fields}<fieldset class="buttons form-group">${e.fields?r.html`<input type="submit" class="btn btn-primary" value="${a}">`:""} ${l?"":r.html`<input type="button" class="btn btn-secondary button-cancel" value="${t}" @click="${t=>e.renderProviderChoiceForm(t)}">`} ${(0,i.default)()}</fieldset></form>`}},"./src/plugins/register/templates/switch_form.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/i18n/index.js"),n=s("./node_modules/lit/index.js");const o=()=>{const e=(0,r.__)("Already have a chat account?"),t=(0,r.__)("Go back to login");return n.html`<div class="switch-form"><p class="mb-1">${e}</p><a class="login-here toggle-register-login" href="#converse/login">${t}</a></div>`}},"./src/plugins/register/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{routeToForm:()=>i,setActiveForm:()=>o});var r=s("./src/headless/index.js");function n(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function o(e){return(t=function*(){yield r.api.waitUntil("controlBoxInitialized");const{chatboxes:t}=r._converse.state;t.get("controlbox").set({"active-form":e})},function(){var e=this,s=arguments;return new Promise((function(r,o){var i=t.apply(e,s);function a(e){n(i,r,o,a,l,"next",e)}function l(e){n(i,r,o,a,l,"throw",e)}a(void 0)}))})();var t}function i(e){"#converse/login"===location.hash?(null==e||e.preventDefault(),o("login")):"#converse/register"===location.hash&&(null==e||e.preventDefault(),o("register"))}},"./src/plugins/roomslist/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js");s("./src/plugins/roomslist/view.js");r.converse.plugins.add("converse-roomslist",{dependencies:["converse-singleton","converse-controlbox","converse-muc","converse-bookmarks"],initialize(){r.api.settings.extend({muc_grouped_by_domain:!1}),r.api.listen.on("clearSession",(()=>{var e;r.u.shouldClearCache(r._converse)&&(null===(e=r._converse.state.roomslist)||void 0===e||e.destroy())}))}})},"./src/plugins/roomslist/model.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/index.js");const{Strophe:o}=n.converse.env,{OPENED:i}=n.constants;class a extends r.Model{defaults(){return{muc_domain:n.api.settings.get("muc_domain"),toggle_state:i,collapsed_domains:[]}}initialize(){super.initialize(),n.api.settings.listen.on("change:muc_domain",(e=>this.setDomain(e)))}setDomain(e){n.api.settings.get("locked_muc_domain")||this.save("muc_domain",o.getDomainFromJid(e))}}const l=a},"./src/plugins/roomslist/styles/roomsgroups.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/roomslist/styles/roomsgroups.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/roomslist/templates/roomslist.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=(s("./src/plugins/muc-views/modals/add-muc.js"),s("./src/plugins/muc-views/modals/muc-list.js"),s("./src/i18n/index.js")),i=s("./src/shared/chat/utils.js");s("./src/plugins/roomslist/styles/roomsgroups.scss");const{CLOSED:a}=n.constants,{isUniView:l}=n.u;function d(e){return l()&&!e.get("hidden")}function c(e,t){var s;const n=(0,o.__)("Leave this groupchat"),a=t.get("num_unread_general")||t.get("has_activity");return r.html`<li class="list-item controlbox-padded available-chatroom d-flex flex-row ${d(t)?"open":""} ${a?"unread-msgs":""}" data-room-jid="${t.get("jid")}"><a class="list-item-link open-room available-room w-100" data-room-jid="${t.get("jid")}" data-room-name="${t.getDisplayName()}" title="${(0,o.__)("Click to open this groupchat")}" @click="${t=>e.openRoom(t)}"><converse-avatar .model="${t}" class="avatar avatar-muc" name="${t.getDisplayName()}" nonce="${null===(s=t.vcard)||void 0===s?void 0:s.get("vcard_updated")}" height="30" width="30"></converse-avatar><span>${t.get("num_unread")?function(e){return r.html`<span class="list-item-badge badge badge--muc msgs-indicator">${(0,i.getUnreadMsgsDisplay)(e)}</span>`}(t):t.get("has_activity")?r.html`<span class="list-item-badge badge badge--muc msgs-indicator"></span>`:""} ${t.getDisplayName()}</span> </a><a class="list-item-action close-room" tabindex="0" data-room-jid="${t.get("jid")}" data-room-name="${t.getDisplayName()}" title="${n}" @click="${t=>e.closeRoom(t)}"><converse-icon class="fa fa-sign-out-alt" size="1.2em" color="${d(t)?"var(--foreground-color)":""}"></converse-icon></a></li>`}function u(e,t){const s=new Map;for(const e of t){const t=e.get("jid").split("@").at(-1).toLowerCase();s.has(t)?s.get(t).push(e):s.set(t,[e])}const n=Array.from(s.keys());return n.sort(),n.map((t=>function(e,t,s){const n=(0,o.__)("Click to hide these rooms"),i=e.model.get("collapsed_domains").includes(t);return r.html`<div class="muc-domain-group" data-domain="${t}"><a href="#" class="list-toggle muc-domain-group-toggle controlbox-padded" title="${n}" @click="${s=>e.toggleDomainList(s,t)}"><converse-icon class="fa ${i?"fa-caret-right":"fa-caret-down"}" size="1em" color="var(--muc-color)"></converse-icon>${t}</a><ul class="items-list muc-domain-group-rooms ${i?"collapsed":""}" data-domain="${t}">${s.map((t=>c(e,t)))}</ul></div>`}(e,t,s.get(t))))}const h=e=>{const t=n.api.settings.get("muc_grouped_by_domain"),s=e.getRoomsToShow(),i=(0,o.__)("Click to toggle the list of open groupchats"),l=(0,o.__)("Groupchats"),d=(0,o.__)("Query server"),h=(0,o.__)("Add groupchat"),m=(0,o.__)("Bookmarks"),f=e.model.get("toggle_state")===a,p=[r.html`<a class="dropdown-item show-add-muc-modal" role="button" @click="${t=>n.api.modal.show("converse-add-muc-modal",{model:e.model},t)}" data-toggle="modal" data-target="#add-chatrooms-modal"><converse-icon class="fa fa-plus" size="1em"></converse-icon>${h}</a>`,r.html`<a class="dropdown-item show-list-muc-modal" role="button" @click="${t=>n.api.modal.show("converse-muc-list-modal",{model:e.model},t)}" data-toggle="modal" data-target="#muc-list-modal"><converse-icon class="fa fa-list-ul" size="1em"></converse-icon>${d}</a>`,r.html`<a class="dropdown-item show-bookmark-list-modal" role="button" @click="${t=>n.api.modal.show("converse-bookmark-list-modal",{model:e.model},t)}" data-toggle="modal"><converse-icon class="fa fa-bookmark" size="1em"></converse-icon>${m}</a>`];return r.html`<div class="d-flex controlbox-padded"><span class="w-100 controlbox-heading controlbox-heading--groupchats"><a class="list-toggle open-rooms-toggle" role="heading" aria-level="3" title="${i}" @click="${t=>e.toggleRoomsList(t)}">${l} ${s.length?r.html`<converse-icon class="fa ${f?"fa-caret-right":"fa-caret-down"}" size="1em" color="var(--muc-color)"></converse-icon>`:""}</a></span><converse-dropdown class="btn-group dropstart" .items="${p}"></converse-dropdown></div><div class="list-container list-container--openrooms ${s.length?"":"hidden"}"><ul class="items-list rooms-list open-rooms-list ${f?"collapsed":""}">${t?u(e,s):s.map((t=>c(e,t)))}</ul></div>`}},"./src/plugins/roomslist/view.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{RoomsList:()=>p});var r=s("./src/headless/index.js"),n=s("./src/i18n/index.js"),o=(s("./src/plugins/muc-views/modals/muc-details.js"),s("./src/shared/components/element.js")),i=s("./src/plugins/roomslist/model.js"),a=s("./src/plugins/roomslist/templates/roomslist.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{Strophe:c}=r.converse.env,{initStorage:u}=r.u,{CHATROOMS_TYPE:h,CLOSED:m,OPENED:f}=r.constants;class p extends o.CustomElement{initialize(){const e=`converse.roomspanel${r._converse.session.get("bare_jid")}`;this.model=new i.default({id:e}),r._converse.state.roomslist=this.model,u(this.model,e),this.model.fetch();const{chatboxes:t}=r._converse.state;this.listenTo(t,"add",this.renderIfChatRoom),this.listenTo(t,"remove",this.renderIfChatRoom),this.listenTo(t,"destroy",this.renderIfChatRoom),this.listenTo(t,"change",this.renderIfRelevantChange),this.listenTo(t,"vcard:add",(()=>this.requestUpdate())),this.listenTo(t,"vcard:change",(()=>this.requestUpdate())),this.listenTo(this.model,"change",(()=>this.requestUpdate())),this.requestUpdate()}render(){return(0,a.default)(this)}renderIfChatRoom(e){r.u.muc.isChatRoom(e)&&this.requestUpdate()}renderIfRelevantChange(e){const t=["bookmarked","hidden","name","num_unread","num_unread_general","has_activity"],s=e.changed||{};r.u.muc.isChatRoom(e)&&Object.keys(s).filter((e=>t.includes(e))).length&&this.requestUpdate()}getRoomsToShow(){const{chatboxes:e}=r._converse.state,t=e.filter((e=>e.get("type")===h&&!e.get("closed")));return t.sort(((e,t)=>e.getDisplayName().toLowerCase()<=t.getDisplayName().toLowerCase()?-1:1)),t}openRoom(e){return d((function*(){e.preventDefault();const t=r.u.ancestor(e.target,".open-room"),s=t.getAttribute("data-room-name"),n=t.getAttribute("data-room-jid"),o={name:s||c.unescapeNode(c.getNodeFromJid(n))||n};yield r.api.rooms.open(n,o,!0)}))()}closeRoom(e){return d((function*(){e.preventDefault();const t=e.currentTarget,s=t.getAttribute("data-room-name"),o=t.getAttribute("data-room-jid");if(yield r.api.confirm((0,n.__)("Confirm"),(0,n.__)("Are you sure you want to leave the groupchat %1$s?",s))){(yield r.api.rooms.get(o)).close()}}))()}toggleRoomsList(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e);const s=this.querySelector(".open-rooms-list");this.model.get("toggle_state")===m?r.u.slideOut(s).then((()=>this.model.save({toggle_state:f}))):r.u.slideIn(s).then((()=>this.model.save({toggle_state:m})))}toggleDomainList(e,t){var s;null==e||null===(s=e.preventDefault)||void 0===s||s.call(e);const r=this.model.get("collapsed_domains");r.includes(t)?this.model.save({collapsed_domains:r.filter((e=>e!==t))}):this.model.save({collapsed_domains:[...r,t]})}}r.api.elements.define("converse-rooms-list",p)},"./src/plugins/rootview/background.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/plugins/rootview/templates/background_logo.js"),i=s("./src/plugins/rootview/utils.js");s("./src/plugins/rootview/styles/background.scss");class a extends n.CustomElement{static get properties(){return{logo:{type:Boolean}}}initialize(){this.setThemeAttributes();const e=r.api.settings.get();this.listenTo(e,"change:view_mode",(()=>this.setThemeAttributes())),this.listenTo(e,"change:singleton",(()=>this.setThemeAttributes())),window.matchMedia("(prefers-color-scheme: dark)").addListener((()=>this.setThemeAttributes())),window.matchMedia("(prefers-color-scheme: light)").addListener((()=>this.setThemeAttributes()))}render(){return(0,o.default)(this)}setThemeAttributes(){const e=(0,i.getTheme)();this.classList.add(`theme-${e}`),this.setAttribute("data-converse-theme",e),this.setAttribute("data-bs-theme",e),this.requestUpdate()}}r.api.elements.define("converse-bg",a);const l=a},"./src/plugins/rootview/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js"),n=s("./src/plugins/rootview/root.js"),o=s("./src/plugins/rootview/utils.js");s("./src/plugins/rootview/background.js");r.converse.plugins.add("converse-rootview",{initialize(){r.api.settings.extend({auto_insert:!0,dark_theme:"dracula",rtl_langs:["ar","fa","he","ug"],show_background:!1,theme:"classic"}),r.api.listen.on("chatBoxesInitialized",o.ensureElement),r.api.elements.define("converse-root",n.default)}})},"./src/plugins/rootview/root.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/i18n/index.js"),n=s("./src/headless/index.js"),o=s("./src/plugins/rootview/templates/root.js"),i=s("./src/shared/components/element.js"),a=s("./src/plugins/rootview/utils.js");s("./src/plugins/rootview/styles/root.scss");class l extends i.CustomElement{render(){return(0,o.default)()}initialize(){this.setAttribute("id","conversejs"),this.setThemeAttributes();const e=n.api.settings.get();this.listenTo(e,"change:view_mode",(()=>this.setThemeAttributes())),this.listenTo(e,"change:singleton",(()=>this.setThemeAttributes())),window.matchMedia("(prefers-color-scheme: dark)").addListener((()=>this.setThemeAttributes())),window.matchMedia("(prefers-color-scheme: light)").addListener((()=>this.setThemeAttributes()))}setThemeAttributes(){const e=(0,a.getTheme)();this.className="",this.classList.add("container-fluid"),this.classList.add("g-0"),this.classList.add("conversejs"),this.classList.add(`converse-${n.api.settings.get("view_mode")}`),this.classList.add(`theme-${e}`),this.setAttribute("data-bs-theme",e),this.setAttribute("data-converse-theme",e);const t=r.i18n.getLocale();this.setAttribute("lang",t);n.api.settings.get("rtl_langs").includes(t)?this.setAttribute("dir","rtl"):this.setAttribute("dir","ltr"),this.requestUpdate()}}},"./src/plugins/rootview/styles/background.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/rootview/styles/background.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/rootview/styles/root.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/rootview/styles/root.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/rootview/templates/background_logo.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js");const o=e=>r.html`${"cyberpunk"===n.api.settings.get("theme")?r.html`<section class="moving-grid"><div class="container"><div class="static-lines">${[...Array(20).keys()].map((()=>r.html`<div class="vert"></div>`))}</div><div class="moving-lines">${[...Array(60).keys()].map((()=>r.html`<div class="horz"></div>`))}</div></div></section>`:""} ${e.hasAttribute("logo")?r.html`<div class="inner-content converse-brand row"><div class="converse-brand__heading"><converse-logo></converse-logo><span class="converse-brand__text"><span>converse<span class="subdued">.js</span></span><p class="byline">messaging freedom</p></span></div>${"overlayed"===n.api.settings.get("view_mode")?r.html`<div class="converse-brand__padding"></div>`:""}</div>`:""}`},"./src/plugins/rootview/templates/root.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js");s("./src/shared/components/font-awesome.js");const o=()=>{const e=n.api.settings.get("singleton")?["converse-singleton"]:[];return e.push(`converse-${n.api.settings.get("view_mode")}`),r.html`${n.api.settings.get("show_background")?r.html`<converse-bg logo></converse-bg>`:""}<converse-chats class="converse-chatboxes row justify-content-start g-0 ${e.join(" ")}"></converse-chats><converse-modals id="converse-modals" class="modals"></converse-modals><converse-toasts></converse-toasts><converse-fontawesome></converse-fontawesome>`}},"./src/plugins/rootview/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{ensureElement:()=>o,getTheme:()=>n});var r=s("./src/headless/index.js");function n(){return window.matchMedia("(prefers-color-scheme: dark)").matches?r.api.settings.get("dark_theme"):r.api.settings.get("theme")}function o(){var e;if(!r.api.settings.get("auto_insert"))return;const t=r.api.settings.get("root");if(!t.querySelector("converse-root")&&!(null===(e=t.matches)||void 0===e?void 0:e.call(t,"converse-root"))){const e=document.createElement("converse-root"),s=t.querySelector("body");s?s.appendChild(e):t.appendChild(e)}}},"./src/plugins/rosterview/approval-alert.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r,n,o,i=s("./src/headless/index.js"),a=s("./src/shared/components/element.js"),l=s("./src/plugins/rosterview/utils.js"),d=s("./src/plugins/rosterview/templates/approval-alert.js");s("./src/plugins/rosterview/styles/approval-alert.scss");function c(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function u(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){c(o,r,n,i,a,"next",e)}function a(e){c(o,r,n,i,a,"throw",e)}i(void 0)}))}}class h extends a.CustomElement{render(){return(0,d.default)(this)}acceptRequest(e){return u((function*(){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),i.api.modal.show("converse-accept-contact-request-modal",{contact:this.contact},e)})).call(this)}declineRequest(e){return u((function*(){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),(0,l.declineContactRequest)(this.contact)})).call(this)}constructor(){super(),this.contact=null}}r=h,n="properties",o={contact:{type:i.RosterContact}},n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,i.api.elements.define("converse-contact-approval-alert",h)},"./src/plugins/rosterview/constants.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{STATUSES:()=>n});var r=s("./src/i18n/index.js");const n={dnd:(0,r.__)("This contact is busy"),online:(0,r.__)("This contact is online"),offline:(0,r.__)("This contact is offline"),unavailable:(0,r.__)("This contact is unavailable"),xa:(0,r.__)("This contact is away for an extended period"),away:(0,r.__)("This contact is away")}},"./src/plugins/rosterview/contactview.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./src/headless/index.js"),n=s("./src/shared/components/observable.js"),o=s("./src/plugins/rosterview/templates/requesting_contact.js"),i=s("./src/plugins/rosterview/templates/roster_item.js"),a=s("./src/plugins/rosterview/templates/unsaved_contact.js"),l=(s("./src/i18n/index.js"),s("./src/plugins/rosterview/utils.js"));function d(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function c(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){d(o,r,n,i,a,"next",e)}function a(e){d(o,r,n,i,a,"throw",e)}i(void 0)}))}}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function h(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}class m extends n.ObservableElement{static get properties(){return h(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){u(e,t,s[t])}))}return e}({},super.properties),{model:{type:Object}})}initialize(){this.listenTo(this.model,"change",(()=>this.requestUpdate())),this.listenTo(this.model,"highlight",(()=>this.requestUpdate())),this.listenTo(this.model,"vcard:add",(()=>this.requestUpdate())),this.listenTo(this.model,"vcard:change",(()=>this.requestUpdate())),this.listenTo(this.model,"presence:change",(()=>this.requestUpdate()))}render(){if(this.model instanceof r._converse.exports.RosterContact){if(!0===this.model.get("requesting"))return(0,o.default)(this);if(!this.model.get("subscription"))return(0,a.default)(this)}return(0,i.default)(this)}openChat(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),r.api.chats.open(this.model.get("jid"),{},!0)}addContact(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),r.api.modal.show("converse-add-contact-modal",{contact:this.model},e)}removeContact(e){return c((function*(){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),yield(0,l.removeContact)(this.model,!0)})).call(this)}showUserDetailsModal(e){return c((function*(){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),e.preventDefault(),this.model instanceof r._converse.exports.Profile?r.api.modal.show("converse-profile-modal",{model:this.model},e):r.api.modal.show("converse-user-details-modal",{model:this.model},e)})).call(this)}blockContact(e){return c((function*(){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),yield(0,l.blockContact)(this.model)})).call(this)}acceptRequest(e){return c((function*(){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),r.api.modal.show("converse-accept-contact-request-modal",{contact:this.model},e)})).call(this)}declineRequest(e){return c((function*(){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),(0,l.declineContactRequest)(this.model)})).call(this)}constructor(){super(),this.model=null,this.observable="once"}}r.api.elements.define("converse-roster-contact",m)},"./src/plugins/rosterview/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js"),n=s("./src/plugins/rosterview/contactview.js"),o=s("./src/plugins/rosterview/utils.js"),i=(s("./src/plugins/modal/index.js"),s("./src/plugins/rosterview/modals/add-contact.js")),a=s("./src/plugins/rosterview/modals/accept-contact-request.js"),l=s("./src/plugins/rosterview/modals/new-chat.js"),d=s("./src/plugins/rosterview/modals/blocklist.js"),c=s("./src/plugins/rosterview/rosterview.js");s("./src/plugins/rosterview/approval-alert.js"),s("./src/shared/styles/status.scss"),s("./src/plugins/rosterview/styles/roster.scss");r.converse.plugins.add("converse-rosterview",{dependencies:["converse-roster","converse-modal","converse-chatboxviews","converse-blocklist"],initialize(){r.api.settings.extend({allow_contact_removal:!0,hide_offline_users:!1,roster_groups:!0,xhr_user_search_url:null}),r.api.promises.add("rosterViewInitialized");const e={AcceptContactRequestModal:a.default,AddContactModal:i.default,BlockListModal:d.default,NewChatModal:l.default,RosterContactView:n.default,RosterFilter:r.RosterFilter,RosterView:c.default};Object.assign(r._converse,e),Object.assign(r._converse.exports,e),r.api.listen.on("chatBoxesInitialized",(()=>{r._converse.state.chatboxes.on("destroy",(e=>(0,o.highlightRosterItem)(e.get("jid")))),r._converse.state.chatboxes.on("change:hidden",(e=>(0,o.highlightRosterItem)(e.get("jid"))))}))}})},"./src/plugins/rosterview/modals/accept-contact-request.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/headless/index.js"),n=(s("./src/shared/autocomplete/index.js"),s("./src/plugins/modal/modal.js")),o=s("./src/plugins/rosterview/modals/templates/accept-contact-request.js"),i=s("./src/i18n/index.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class l extends n.default{initialize(){super.initialize(),this.listenTo(this.contact,"change",(()=>this.requestUpdate())),this.requestUpdate(),this.addEventListener("shown.bs.modal",(()=>{var e;return null===(e=this.querySelector('input[name="name"]'))||void 0===e?void 0:e.focus()}),!1)}renderModal(){return(0,o.default)(this)}getModalTitle(){return(0,i.__)("Contact Request")}acceptContactRequest(e){return(t=function*(){var t;e.preventDefault();const s=e.target,n=new FormData(s),o=(n.get("name")||"").trim(),a=(null===(t=n.get("groups"))||void 0===t?void 0:t.split(",").map((e=>e.trim())).filter((e=>e)))||[];try{yield r._converse.state.roster.sendContactAddIQ({jid:this.contact.get("jid"),name:o,groups:a}),this.contact.authorize().subscribe()}catch(e){return r.log.error(e),void r.api.toast.show("accept-request-error",{type:"danger",body:(0,i.__)("Sorry, something went wrong while accepting the contact request")})}this.contact.save({nickname:o,groups:a}),r.api.toast.show("accept-request-success",{type:"success",body:(0,i.__)("Successfully accepted the contact request")}),this.modal.hide()},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}).call(this);var t}constructor(e){super(e),this.contact=null}}r.api.elements.define("converse-accept-contact-request-modal",l)},"./src/plugins/rosterview/modals/add-contact.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),n=s("./src/headless/index.js"),o=s("./src/plugins/modal/modal.js"),i=s("./src/plugins/rosterview/modals/templates/add-contact.js"),a=s("./src/i18n/index.js");s("./src/plugins/rosterview/modals/styles/add-contact.scss");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}}class c extends o.default{initialize(){super.initialize(),this.listenTo(this.contact,"change",(()=>this.requestUpdate())),this.requestUpdate(),this.addEventListener("shown.bs.modal",(()=>{var e;return null===(e=this.querySelector('input[name="jid"]'))||void 0===e?void 0:e.focus()}),!1)}renderModal(){return(0,i.default)(this)}getModalTitle(){return(0,a.__)("Add a Contact")}validateSubmission(e){return!e||e.split("@").filter((e=>!!e)).length<2?(this.alert((0,a.__)("Please enter a valid XMPP address"),"danger",!1),!1):!this.contact&&n._converse.state.roster.get(r.Strophe.getBareJidFromJid(e))?(this.alert((0,a.__)("This contact has already been added"),"danger",!1),!1):(this.alert(null),!0)}afterSubmission(e,t,s){return d((function*(){n.api.contacts.add({jid:e,name:t,groups:s}).catch((e=>{n.log.error(e),n.api.toast.show("contact-add-error",{type:"danger",body:(0,a.__)("Sorry, something went wrong while adding the contact")})})),n.api.chats.open(e,{},!0),this.alert(null),n.api.toast.show("contact-added",{type:"success",body:(0,a.__)("Contact added successfully")}),this.modal.hide()})).call(this)}addContactFromForm(e){return d((function*(){e.preventDefault();const t=e.target,s=new FormData(t);let r,o=(s.get("jid")||"").trim();if(n.api.settings.get("xhr_user_search_url")){const e=o.match(/^(.*) <(.*)>$/);if(!e)return void this.alert((0,a.__)('Invalid value for the name and XMPP address. Please use the format "Name <username@example.org>".'),"danger",!1);r=e[1].trim(),o=e[2].trim()}else r=(s.get("name")||"").trim();if(this.validateSubmission(o)){var i;const e=(null===(i=s.get("groups"))||void 0===i?void 0:i.split(",").map((e=>e.trim())).filter((e=>e)))||[];this.afterSubmission(o,r,e),t.reset()}})).call(this)}constructor(){super(),this.contact=null}}n.api.elements.define("converse-add-contact-modal",c)},"./src/plugins/rosterview/modals/blocklist.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/plugins/modal/modal.js"),i=s("./src/plugins/rosterview/modals/templates/blocklist.js"),a=s("./src/i18n/index.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}class h extends o.default{static get properties(){return u(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){c(e,t,s[t])}))}return e}({},super.properties),{filter_text:{type:String}})}initialize(){var e=this,t=()=>super.initialize;return d((function*(){t().call(e),this.blocklist=yield n.api.blocklist.get(),this.listenTo(this.blocklist,"add",(()=>this.requestUpdate())),this.listenTo(this.blocklist,"remove",(()=>this.requestUpdate())),this.listenTo(this.blocklist,"change",(()=>this.requestUpdate())),this.addEventListener("shown.bs.modal",(()=>{var e;null===(e=this.querySelector('input[name="blocklist_filter"]'))||void 0===e||e.focus()}),!1),this.requestUpdate()})).call(this)}renderModal(){return this.blocklist?(0,i.default)(this):r.html`<converse-spinner></converse-spinner>`}getModalTitle(){return(0,a.__)("Blocklist")}unblockUsers(e){return d((function*(){e.preventDefault();const t=e.target,s=[...new FormData(t).entries()].filter((e=>"on"===e[1])).map((e=>e[0]));yield n.api.blocklist.remove(s);const r=s.length>1?(0,a.__)("Successfully unblocked %1$s XMPP addresses",s.length):(0,a.__)("Successfully unblocked one XMPP address");n.api.toast.show("blocked",{type:"success",body:r})}))()}toggleSelectAll(e){const t=e.target.checked;this.querySelectorAll('input[type="checkbox"]').forEach((e=>e.checked=t))}constructor(){super(),this.filter_text=""}}n.api.elements.define("converse-blocklist-modal",h)},"./src/plugins/rosterview/modals/new-chat.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),n=s("./src/plugins/modal/modal.js"),o=s("./src/plugins/rosterview/modals/templates/new-chat.js"),i=s("./src/i18n/index.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}}class d extends n.default{initialize(){super.initialize(),this.listenTo(this.model,"change",(()=>this.requestUpdate())),this.requestUpdate(),this.addEventListener("shown.bs.modal",(()=>{var e;return null===(e=this.querySelector('input[name="jid"]'))||void 0===e?void 0:e.focus()}),!1)}renderModal(){return(0,o.default)(this)}getModalTitle(){return(0,i.__)("Start a new chat")}validateSubmission(e){return!e||e.split("@").filter((e=>!!e)).length<2?(this.model.set("error",(0,i.__)("Please enter a valid XMPP address")),!1):(this.model.set("error",null),!0)}afterSubmission(e,t){return l((function*(){try{yield r.api.chats.open(t,{},!0)}catch(e){return r.log.error(e),void this.model.set("error",(0,i.__)("Sorry, something went wrong"))}this.model.clear(),this.modal.hide()})).call(this)}startChatFromForm(e){return l((function*(){e.preventDefault();const t=e.target,s=(new FormData(t).get("jid")||"").trim();this.validateSubmission(s)&&this.afterSubmission(t,s)})).call(this)}}r.api.elements.define("converse-new-chat-modal",d)},"./src/plugins/rosterview/modals/styles/add-contact.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/rosterview/modals/styles/add-contact.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/rosterview/modals/templates/accept-contact-request.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/i18n/index.js"),n=s("./src/plugins/rosterview/utils.js"),o=s("./node_modules/lit/index.js");const i=e=>{var t;const s=(0,r.__)("Accept"),i=(0,r.__)("Groups"),a=(0,r.__)("Use commas to separate multiple values"),l=(0,r.__)("Name"),d=(0,r.__)("XMPP Address");return o.html`<div class="modal-body"><form class="converse-form" @submit="${t=>e.acceptContactRequest(t)}"><div class="mb-3"><label class="form-label clearfix" for="name">${l}:</label> <input type="text" name="name" value="${(null===(t=e.contact.vcard)||void 0===t?void 0:t.get("fullname"))||""}" class="form-control"></div><div class="mb-3"><label class="form-label clearfix" for="name">${i}:</label><div class="mb-1"><small class="form-text text-muted">${a}</small></div><converse-autocomplete .list="${(0,n.getGroupsAutoCompleteList)()}" name="groups"></converse-autocomplete></div><div class="mb-3 d-flex justify-content-between"><label class="form-label clearfix w-100" for="jid-display">${d}:</label><p class="form-control-plaintext text-end" id="jid-display">${e.contact.get("jid")}</p></div><button type="submit" class="btn btn-primary">${s}</button></form></div>`}},"./src/plugins/rosterview/modals/templates/add-contact.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),i=s("./src/plugins/rosterview/utils.js");s("./src/shared/autocomplete/index.js");const a=e=>{const t=(0,o.__)("Add"),s=(0,o.__)("name@example.org"),a=(0,o.__)("Groups"),l=(0,o.__)("Use commas to separate multiple values"),d=(0,o.__)("Name"),c=n.api.settings.get("xhr_user_search_url"),u=(0,o.__)("XMPP Address"),h=c?(0,o.__)("Search name or XMPP address"):u;return r.html`<div class="modal-body"><form class="converse-form add-xmpp-contact" @submit="${t=>e.addContactFromForm(t)}">${e.contact?r.html`<input type="hidden" name="jid" value="${e.contact.get("jid")}">`:r.html`<div class="mb-3"><label class="form-label clearfix" for="jid">${h}:</label> ${c?r.html`<converse-autocomplete .getAutoCompleteList="${i.getNamesAutoCompleteList}" position="below" min_chars="2" filter="contains" ?required="${!0}" value="${e.state.get("jid")||""}" placeholder="${s}" name="jid"></converse-autocomplete>`:r.html`<converse-autocomplete .list="${(0,i.getJIDsAutoCompleteList)()}" .data="${(e,t)=>`${t.slice(0,t.indexOf("@"))}@${e}`}" position="below" min_chars="2" filter="startswith" ?required="${!n.api.settings.get("xhr_user_search_url")}" value="${e.state.get("jid")||""}" placeholder="${s}" name="jid"></converse-autocomplete>`}</div>`} ${c?"":r.html`<div class="mb-3"><label class="form-label clearfix" for="name">${d}:</label> <input type="text" name="name" value="${e.state.get("nickname")||""}" class="form-control"></div>`}<div class="mb-3"><label class="form-label clearfix" for="name">${a}:</label><div class="mb-1"><small class="form-text text-muted">${l}</small></div><converse-autocomplete .list="${(0,i.getGroupsAutoCompleteList)()}" name="groups"></converse-autocomplete></div>${e.contact?r.html`<div class="mb-3 d-flex justify-content-between"><label class="form-label clearfix w-100" for="jid-display">${u}:</label><p class="form-control-plaintext text-end" id="jid-display">${e.contact.get("jid")}</p></div>`:""} <button type="submit" class="btn btn-primary">${t}</button></form></div>`}},"./src/plugins/rosterview/modals/templates/blocklist.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/i18n/index.js"),n=s("./node_modules/lit/index.js"),o=s("./node_modules/lit/directives/repeat.js");const i=e=>{if(e.blocklist.length){const t=e.filter_text?e.blocklist.filter((t=>t.get("jid").toLowerCase().includes(e.filter_text.toLowerCase()))):e.blocklist;return n.html`<form @submit="${t=>e.unblockUsers(t)}"><div class="d-flex justify-content-between">${e.blocklist.length>5?n.html`<p style="line-height:3em">${(0,r.__)("%1$s blocked users shown",t.length)}</p>`:""} ${t.length?n.html`<div class="text-end"><button type="submit" class="btn btn-danger mt-2 mb-2">${(0,r.__)("Unblock selected users")}</button></div>`:""}</div>${e.blocklist.length>5?n.html`<div class="mb-3 ${e.filter_text?"input-group":""}"><input autofocus name="blocklist_filter" type="text" class="form-control" value="${e.filter_text}" placeholder="${(0,r.__)("Filter blocked users")}" @input="${t=>e.filter_text=t.target.value}"> <button type="button" class="btn btn-outline-secondary ${e.filter_text?"":"hidden"}" @click="${()=>{e.filter_text="";e.querySelector('input[name="blocklist_filter"]').value=""}}"><converse-icon size="1em" class="fa fa-times"></converse-icon>${(0,r.__)("clear")}</button></div><div class="form-check mb-1"><input class="form-check-input" type="checkbox" id="select-all" @change="${t=>e.toggleSelectAll(t)}"> <label class="form-check-label" for="select-all"><strong>${(0,r.__)("Select All")}</strong></label></div>`:""}<ul class="items-list">${(0,o.repeat)(t,(e=>e.get("jid")),(e=>n.html`<li class="list-item" @click="${t=>{if("checkbox"===t.target.type)return;t.preventDefault();const s=document.getElementById(`blocklist-${e.get("jid")}`);s.checked=!s.checked}}"><div class="form-check"><input class="form-check-input" type="checkbox" id="blocklist-${e.get("jid")}" name="${e.get("jid")}"> <label class="form-check-label w-100" for="blocklist-${e.get("jid")}">${e.get("jid")}</label></div></li>`))}</ul></form>`}return n.html`<p>${(0,r.__)("No blocked XMPP addresses")}</p>`}},"./src/plugins/rosterview/modals/templates/new-chat.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/i18n/index.js"),n=s("./node_modules/lit/index.js");const o=e=>{const t=(0,r.__)("Start Chat"),s=(0,r.__)("XMPP Address"),o=e.model.get("error");return n.html`<div class="modal-body">${o?n.html`<div class="alert alert-danger" role="alert">${o}</div>`:""}<form @submit="${t=>e.startChatFromForm(t)}"><div class="mb-3"><label class="form-label" for="jid">${s}</label> <input type="text" name="jid" class="form-control" required></div><button type="submit" class="btn btn-primary">${t}</button></form></div>`}},"./src/plugins/rosterview/rosterview.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/@converse/skeletor/dist/skeletor.js"),n=s("./src/headless/index.js"),o=s("./src/shared/components/element.js"),i=s("./src/utils/html.js"),a=s("./src/plugins/rosterview/templates/roster.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{initStorage:c}=n.u,{CLOSED:u,OPENED:h}=n.constants;class m extends o.CustomElement{initialize(){return d((function*(){const e=`converse.contacts-panel${n._converse.session.get("bare_jid")}`;this.model=new r.Model({id:e}),c(this.model,e),this.model.fetch(),yield n.api.waitUntil("rosterInitialized");const{chatboxes:t,presences:s,roster:o}=n._converse.state;this.listenTo(n._converse,"rosterContactsFetched",(()=>this.requestUpdate())),this.listenTo(s,"change:show",(()=>this.requestUpdate())),this.listenTo(t,"change:hidden",(()=>this.requestUpdate())),this.listenTo(o,"add",(()=>this.requestUpdate())),this.listenTo(o,"destroy",(()=>this.requestUpdate())),this.listenTo(o,"remove",(()=>this.requestUpdate())),this.listenTo(o,"change",(()=>this.requestUpdate())),this.listenTo(o,"presence:change",(()=>this.requestUpdate())),this.listenTo(o.state,"change",(()=>this.requestUpdate())),this.listenTo(this.model,"change",(()=>this.requestUpdate())),n.api.trigger("rosterViewInitialized")})).call(this)}render(){return(0,a.default)(this)}showAddContactModal(e){n.api.modal.show("converse-add-contact-modal",{model:new r.Model},e)}showNewChatModal(e){n.api.modal.show("converse-new-chat-modal",{model:new r.Model},e)}showBlocklistModal(e){n.api.modal.show("converse-blocklist-modal",{},e)}syncContacts(e){return d((function*(){null==e||e.preventDefault();const{roster:t}=n._converse.state;this.syncing_contacts=!0,this.requestUpdate(),t.data.save("version",null),yield t.fetchFromServer(),n.api.user.presence.send(),this.syncing_contacts=!1,this.requestUpdate()})).call(this)}toggleRoster(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e);const s=this.querySelector(".list-container.roster-contacts");this.model.get("toggle_state")===u?(0,i.slideOut)(s).then((()=>this.model.save({toggle_state:h}))):(0,i.slideIn)(s).then((()=>this.model.save({toggle_state:u})))}toggleFilter(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),this.model.save({filter_visible:!this.model.get("filter_visible")})}}n.api.elements.define("converse-roster",m)},"./src/plugins/rosterview/styles/approval-alert.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/rosterview/styles/approval-alert.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/rosterview/styles/roster.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/rosterview/styles/roster.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/plugins/rosterview/templates/approval-alert.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js");const o=e=>e.contact?r.html`<div class="alert alert-info d-flex flex-column align-items-center mb-0 p-3 text-center"><p class="mb-2">${(0,n.__)("%1$s would like to be your contact",e.contact.getDisplayName())}</p><div class="btn-group"><button type="button" class="btn btn-sm btn-success" @click="${t=>e.acceptRequest(t)}">${(0,n.__)("Approve")}</button> <button type="button" class="btn btn-sm btn-danger" @click="${t=>e.declineRequest(t)}">${(0,n.__)("Deny")}</button></div></div>`:""},"./src/plugins/rosterview/templates/group.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/repeat.js"),o=s("./src/headless/index.js"),i=(s("./src/shared/components/icons.js"),s("./src/i18n/index.js")),a=s("./src/plugins/rosterview/utils.js");const{isUniView:l}=o.u;function d(e){const t=e.get("jid"),s=[];if(l()){const e=o._converse.state.chatboxes.get(t);e&&!e.get("hidden")&&s.push("open")}const n=e.get("ask"),i=e.get("requesting"),a=e.get("subscription");return"subscribe"===n||"from"===a?s.push("pending-xmpp-contact"):!0===i?s.push("requesting-xmpp-contact"):("both"===a||"to"===a||o.u.isSameBareJID(t,o.api.connection.get().jid))&&(s.push("current-xmpp-contact"),s.push(a),s.push(e.getStatus())),r.html`<li class="list-item d-flex controlbox-padded ${s.join(" ")}" data-status="${e.getStatus()}"><converse-roster-contact .model="${e}"></converse-roster-contact></li>`}const c=e=>{const t=(0,i.__)("Click to hide these contacts"),s=o._converse.state.roster.state.get("collapsed_groups");return r.html`<div class="roster-group" data-group="${e.name}"><a href="#" class="list-toggle group-toggle controlbox-padded" title="${t}" @click="${t=>(0,a.toggleGroup)(t,e.name)}"><converse-icon color="var(--chat-color)" size="1em" class="fa ${s.includes(e.name)?"fa-caret-right":"fa-caret-down"}"></converse-icon>${e.name}  ${e.contacts[0].get("requesting")?r.html`<converse-icon color="var(--chat-color)" size="1.2em" class="fa fa-bell-alt"></converse-icon>`:""}</a><ul class="items-list roster-group-contacts ${s.includes(e.name)?"collapsed":""}" data-group="${e.name}">${(0,n.repeat)(e.contacts,(e=>e.get("jid")),d)}</ul></div>`}},"./src/plugins/rosterview/templates/requesting_contact.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js"),o=s("./src/shared/chat/utils.js"),i=s("./src/plugins/rosterview/templates/roster_item.js");const a=e=>{var t;const s=(0,o.getUnreadMsgsDisplay)(e.model),a=e.model.get("jid"),l=e.model.getDisplayName(),d=(0,n.__)("Click to accept the contact request from %1$s (XMPP address: %2$s)",l,a),c=(0,n.__)("Click to decline the contact request from %1$s (XMPP address: %2$s)",l,a),u=(0,n.__)("Click to chat with %1$s (XMPP address: %2$s)",l,a),h=[r.html`<a class="dropdown-item accept-xmpp-request" role="button" @click="${t=>e.acceptRequest(t)}" aria-label="${d}" title="${d}" href="#"><converse-icon class="fa fa-check" size="1em"></converse-icon>${(0,n.__)("Accept as contact")}</a>`,(0,i.tplDetailsButton)(e),r.html`<a class="dropdown-item decline-xmpp-request" role="button" @click="${t=>e.declineRequest(t)}" aria-label="${c}" title="${c}"><converse-icon class="fa fa-times" size="1em"></converse-icon>${(0,n.__)("Remove")}</a>`];return r.html`<a class="list-item-link cbox-list-item open-chat ${s?"unread-msgs":""}" title="${u}" href="#" data-jid="${a}" @click="${e.openChat}"><span><converse-avatar .model="${e.model}" class="avatar" name="${e.model.getDisplayName()}" nonce="${null===(t=e.model.vcard)||void 0===t?void 0:t.get("vcard_updated")}" height="30" width="30"></converse-avatar></span>${s?r.html`<span class="msgs-indicator badge">${s}</span>`:""} <span class="contact-name ${s?"unread-msgs":""}">${l}</span> </a><span class="contact-actions"><converse-dropdown class="btn-group dropstart list-item-action" .items="${h}"></converse-dropdown></span>`}},"./src/plugins/rosterview/templates/roster.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/repeat.js"),o=s("./src/headless/index.js"),i=s("./src/plugins/rosterview/templates/group.js"),a=s("./src/plugins/rosterview/templates/roster_filter.js"),l=s("./src/i18n/index.js"),d=s("./src/plugins/rosterview/utils.js");const{CLOSED:c}=o.constants,u=e=>{const t=(0,l.__)("Contacts"),s=(0,l.__)("Click to toggle contacts"),u=(0,l.__)("Add a contact"),h=(0,l.__)("Start a new chat"),m=(0,l.__)("Show block list"),{state:f}=o._converse,p=[...f.roster||[],...o.api.settings.get("show_self_in_roster")?[f.xmppstatus]:[]],g=p.reduce(((e,t)=>(0,d.populateContactsMap)(e,t)),{}),v=Object.keys(g).filter((t=>(0,d.shouldShowGroup)(t,e.model))),_=e.model.get("toggle_state")===c;v.sort(d.groupsComparator);const y=(0,l.__)("Show filter"),b=(0,l.__)("Hide filter"),j=e.model.get("filter_visible"),w=[];if(o.api.settings.get("allow_contact_requests")&&w.push(r.html`<a href="#" class="dropdown-item add-contact" role="button" @click="${t=>e.showAddContactModal(t)}" title="${u}" data-toggle="modal" data-target="#add-contact-modal"><converse-icon class="fa fa-user-plus" size="1em"></converse-icon>${u}</a>`),o.api.settings.get("allow_non_roster_messaging")&&w.push(r.html`<a href="#" class="dropdown-item new-chat" role="button" @click="${t=>e.showNewChatModal(t)}" title="${h}" data-toggle="modal" data-target="#new-chat-modal"><converse-icon class="fa fa-user-plus" size="1em"></converse-icon>${h}</a>`),w.push(r.html`<a href="#" class="dropdown-item" role="button" @click="${t=>e.showBlocklistModal(t)}" title="${m}"><converse-icon class="fa fa-list-ul" size="1em"></converse-icon>${m}</a>`),p.length>5&&w.push(r.html`<a href="#" class="dropdown-item toggle-filter" role="button" @click="${t=>e.toggleFilter(t)}"><converse-icon size="1em" class="fa fa-filter"></converse-icon>${j?b:y}</a>`),"debug"===o.api.settings.get("loglevel")){const t=(0,l.__)("Re-sync contacts");w.push(r.html`<a href="#" class="dropdown-item" role="button" @click="${t=>e.syncContacts(t)}" title="${t}"><converse-icon class="fa fa-sync sync-contacts" size="1em"></converse-icon>${t}</a>`)}return r.html`<div class="d-flex controlbox-padded"><span class="w-100 controlbox-heading controlbox-heading--contacts"><a class="list-toggle open-contacts-toggle" title="${s}" role="heading" aria-level="3" @click="${e.toggleRoster}">${t} ${p.length?r.html`<converse-icon class="fa ${_?"fa-caret-right":"fa-caret-down"}" size="1em" color="var(--chat-color)"></converse-icon>`:""}</a></span><converse-dropdown class="chatbox-btn btn-group dropstart dropdown--contacts" .items="${w}"></converse-dropdown></div><div class="list-container roster-contacts ${_?"hidden":""}">${j?r.html`<converse-list-filter @update="${()=>e.requestUpdate()}" .promise="${o.api.waitUntil("rosterInitialized")}" .items="${o._converse.state.roster}" .template="${a.default}" .model="${o._converse.state.roster_filter}"></converse-list-filter>`:""} ${(0,n.repeat)(v,(e=>e),(t=>{const s=g[t].filter((s=>(0,d.shouldShowContact)(s,t,e.model)));return s.sort(d.contactsComparator),s.length?(0,i.default)({contacts:s,name:t}):""}))}</div>`}},"./src/plugins/rosterview/templates/roster_filter.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js"),n=s("./src/i18n/index.js"),o=s("./src/shared/constants.js");const i=e=>{const t=(0,n.__)("Filter"),s=(0,n.__)("Filter by contact name"),i=(0,n.__)("Filter by group name"),a=(0,n.__)("Filter by status"),l=(0,n.__)("Any"),d=(0,n.__)("Unread"),{offline:c,xa:u,away:h,dnd:m,chat:f,online:p}=o.PRETTY_CHAT_STATUS,g=e.model.get("state"),v=e.model.get("text"),_=e.model.get("type");return r.html`<form class="controlbox-padded items-filter-form input-button-group ${e.shouldBeVisible()?"fade-in":"hidden"}" @submit="${t=>e.submitFilter(t)}"><div class="flex-nowrap"><div class="filter-by d-flex flex-nowrap"><converse-icon size="1em" @click="${t=>e.changeTypeFilter(t)}" class="fa fa-user clickable ${"items"===_?"selected":""}" data-type="items" title="${s}"></converse-icon><converse-icon size="1em" @click="${t=>e.changeTypeFilter(t)}" class="fa fa-users clickable ${"groups"===_?"selected":""}" data-type="groups" title="${i}"></converse-icon><converse-icon size="1em" @click="${t=>e.changeTypeFilter(t)}" class="fa fa-circle clickable ${"state"===_?"selected":""}" data-type="state" title="${a}"></converse-icon></div><div class="btn-group"><input .value="${v||""}" @keydown="${t=>e.liveFilter(t)}" class="items-filter form-control ${"state"===_?"hidden":""}" placeholder="${t}"><converse-icon size="1em" class="fa fa-times clear-input ${v&&"state"!==_?"":"hidden"}" @click="${t=>e.clearFilter(t)}"></converse-icon></div><select class="form-control state-type ${"state"!==_?"hidden":""}" @change="${t=>e.changeChatStateFilter(t)}"><option value="">${l}</option><option ?selected="${"unread_messages"===g}" value="unread_messages">${d}</option><option ?selected="${"online"===g}" value="online">${p}</option><option ?selected="${"chat"===g}" value="chat">${f}</option><option ?selected="${"dnd"===g}" value="dnd">${m}</option><option ?selected="${"away"===g}" value="away">${h}</option><option ?selected="${"xa"===g}" value="xa">${u}</option><option ?selected="${"offline"===g}" value="offline">${c}</option></select></div></form>`}},"./src/plugins/rosterview/templates/roster_item.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,tplDetailsButton:()=>d,tplRemoveButton:()=>l});var r=s("./src/i18n/index.js"),n=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js"),i=s("./src/shared/chat/utils.js"),a=s("./src/plugins/rosterview/constants.js");function l(e){const t=e.model.getDisplayName(),s=(0,r.__)("Click to remove %1$s as a contact",t);return o.html`<a class="dropdown-item remove-xmpp-contact" role="button" @click="${t=>e.removeContact(t)}" title="${s}" data-toggle="modal"><converse-icon class="fa fa-trash-alt" size="1em"></converse-icon>${(0,r.__)("Remove")}</a>`}function d(e){const t=e.model.getDisplayName(),s=(0,r.__)("Click to show more details about %1$s",t);return o.html`<a class="dropdown-item" role="button" @click="${t=>e.showUserDetailsModal(t)}" title="${s}" data-toggle="modal"><converse-icon class="fa fa-id-card" size="1em"></converse-icon>${(0,r.__)("Details")}</a>`}const c=e=>{var t;const s=n._converse.session.get("bare_jid"),c=e.model.getStatus()||"offline";let u,h;[u,h]="online"===c?["fa fa-circle","chat-status-online"]:"dnd"===c?["fa fa-minus-circle","chat-status-busy"]:"away"===c?["fa fa-circle","chat-status-away"]:["fa fa-circle","chat-status-offline"];const m=s===e.model.get("jid"),f=a.STATUSES[c],p=(0,i.getUnreadMsgsDisplay)(e.model),g=e.model.getDisplayName({context:"roster"}),v=e.model.get("jid"),_=m?(0,r.__)("Click to chat with yourself"):(0,r.__)("Click to chat with %1$s (XMPP address: %2$s)",g,v),y=[d(e),...n.api.settings.get("allow_contact_removal")&&!m?[l(e)]:[]];return o.html`<a class="list-item-link cbox-list-item open-chat ${p?"unread-msgs":""}" title="${_}" href="#" data-jid="${v}" @click="${e.openChat}"><span><converse-avatar .model="${e.model}" class="avatar" name="${e.model.getDisplayName()}" nonce="${null===(t=e.model.vcard)||void 0===t?void 0:t.get("vcard_updated")}" height="30" width="30"></converse-avatar>${["both","to"].includes(e.model.get("subscription"))?o.html`<converse-icon title="${f}" color="var(--${h})" size="1em" class="${u} chat-status chat-status--avatar"></converse-icon>`:""} </span>${p?o.html`<span class="msgs-indicator badge">${p}</span>`:""} <span class="contact-name contact-name--${c} ${p?"unread-msgs":""}">${g}</span> </a><span class="contact-actions"><converse-dropdown class="btn-group dropstart list-item-action" .items="${y}"></converse-dropdown></span>`}},"./src/plugins/rosterview/templates/unsaved_contact.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/i18n/index.js"),n=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js"),i=s("./src/shared/chat/utils.js"),a=s("./src/plugins/rosterview/templates/roster_item.js");function l(e){const t=e.model.getDisplayName(),s=(0,r.__)("Click to add %1$s as a contact",t);return o.html`<a class="dropdown-item add-contact" role="button" @click="${t=>e.addContact(t)}" title="${s}" data-toggle="modal"><converse-icon class="fa fa-user-plus" size="1.5em"></converse-icon>${(0,r.__)("Save as contact")}</a>`}const d=e=>{var t;const s=(0,i.getUnreadMsgsDisplay)(e.model),d=e.model.getDisplayName(),c=e.model.get("jid"),u=(0,r.__)("Click to chat with %1$s (XMPP address: %2$s)",d,c),h=[(0,a.tplDetailsButton)(e),l(e),...n.api.settings.get("allow_contact_removal")?[(0,a.tplRemoveButton)(e)]:[]];return o.html`<a class="list-item-link cbox-list-item open-chat ${s?"unread-msgs":""}" title="${u}" href="#" data-jid="${c}" @click="${e.openChat}"><span><converse-avatar .model="${e.model}" class="avatar" name="${e.model.getDisplayName()}" nonce="${null===(t=e.model.vcard)||void 0===t?void 0:t.get("vcard_updated")}" height="30" width="30"></converse-avatar></span>${s?o.html`<span class="msgs-indicator badge">${s}</span>`:""} <span class="contact-name ${s?"unread-msgs":""}">${d}</span> </a><span class="contact-actions"><converse-dropdown class="btn-group dropstart list-item-action" .items="${h}"></converse-dropdown></span>`}},"./src/plugins/rosterview/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{blockContact:()=>h,contactsComparator:()=>j,declineContactRequest:()=>u,getGroupsAutoCompleteList:()=>S,getJIDsAutoCompleteList:()=>x,getNamesAutoCompleteList:()=>E,groupsComparator:()=>w,highlightRosterItem:()=>f,isContactFiltered:()=>v,populateContactsMap:()=>b,removeContact:()=>c,shouldShowContact:()=>_,shouldShowGroup:()=>y,toggleGroup:()=>p,unblockContact:()=>m});var r=s("./src/i18n/index.js"),n=s("./src/headless/index.js");function o(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function i(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var i=e.apply(t,s);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)}))}}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{Strophe:l}=n.converse.env,{STATUS_WEIGHTS:d}=n.constants;function c(e,t=!1){return i((function*(){if(!n.api.settings.get("allow_contact_removal"))return;if(!(yield n.api.confirm((0,r.__)("Confirm"),(0,r.__)("Are you sure you want to remove this contact?"))))return!1;const s=yield n.api.chats.get(e.get("jid"));null==s||s.close();try{yield e.remove(t)}catch(t){n.log.error(t),n.api.alert("error",(0,r.__)("Error"),[(0,r.__)("Sorry, an error occurred while trying to remove %1$s as a contact",e.getDisplayName())])}return!0}))()}function u(e){return i((function*(){const t=n._converse.session.get("domain"),s=yield n.api.disco.supports(l.NS.BLOCKING,t),o=yield n.api.confirm((0,r.__)("Remove and decline contact request"),[(0,r.__)("Are you sure you want to decline the contact request from %1$s?",e.getDisplayName())],s?[{label:(0,r.__)("Also block this user from sending you further messages"),name:"block",type:"checkbox"}]:[]);if(o){var i;const t=yield n.api.chats.get(e.get("jid"));e.unauthorize(),s&&Array.isArray(o)&&"on"===(null===(i=o.find((e=>"block"===e.name)))||void 0===i?void 0:i.value)?(n.api.blocklist.add(e.get("jid")),n.api.toast.show("declined-and-blocked",{type:"success",body:(0,r.__)("Contact request declined and user blocked")}),null==t||t.close()):n.api.toast.show("request-declined",{type:"success",body:(0,r.__)("Contact request declined")}),t||e.destroy()}return this})).call(this)}function h(e){return i((function*(){var t;const s=n._converse.session.get("domain");if(!(yield n.api.disco.supports(l.NS.BLOCKING,s)))return!1;const o=(0,r.__)("Do you want to block this contact, so they cannot send you messages?");if(!(yield n.api.confirm((0,r.__)("Confirm"),o)))return!1;null===(t=yield n.api.chats.get(e.get("jid")))||void 0===t||t.close();try{yield Promise.all([n.api.blocklist.add(e.get("jid")),e.remove(!0)])}catch(t){n.log.error(t),n.api.alert("error",(0,r.__)("Error"),[(0,r.__)("Sorry, an error occurred while trying to block %1$s",e.getDisplayName())])}}))()}function m(e){return i((function*(){const t=n._converse.session.get("domain");if(!(yield n.api.disco.supports(l.NS.BLOCKING,t)))return!1;const s=(0,r.__)("Do you want to unblock this contact, so they can send you messages?");if(!(yield n.api.confirm(s)))return!1;try{yield n.api.blocklist.remove(e.get("jid"))}catch(t){n.log.error(t),n.api.alert("error",(0,r.__)("Error"),[(0,r.__)("Sorry, an error occurred while trying to unblock %1$s",e.getDisplayName())])}}))()}function f(e){var t,s;null===(s=n._converse.state.roster)||void 0===s||null===(t=s.get(e))||void 0===t||t.trigger("highlight")}function p(e,t){var s;null==e||null===(s=e.preventDefault)||void 0===s||s.call(e);const{roster:r}=n._converse.state,o=r.state.get("collapsed_groups");o.includes(t)?r.state.save("collapsed_groups",o.filter((e=>e!==t))):r.state.save("collapsed_groups",[...o,t])}function g(e){const t=e instanceof n.Profile?e.getNickname():e.get("nickname"),s=e.get("jid");let r=e.getDisplayName({context:"roster"});return r=r.includes(s)?r:r.concat(`   ${s}`),r=r.includes(t)?r:r.concat(`   ${t}`),r.toLowerCase()}function v(e,t){const s=n._converse.state.roster_filter,r=s.get("type"),o="state"===r?s.get("state").toLowerCase():s.get("text").toLowerCase();if(!o)return!1;if("state"===r){return![n._converse.labels.HEADER_REQUESTING_CONTACTS,n._converse.labels.HEADER_UNREAD].includes(t)&&("unread_messages"===o?0===e.get("num_unread"):"online"===o?["offline","unavailable","dnd","away","xa"].includes(e.getStatus()):!e.getStatus().includes(o))}return"items"===r?!g(e).includes(o):void 0}function _(e,t,s){if(!s.get("filter_visible"))return!0;const r=e.getStatus();return n.api.settings.get("hide_offline_users")&&"offline"===r?("subscribe"===e.get("ask")||"from"===e.get("subscription")||!0===e.get("requesting"))&&!v(e,t):!v(e,t)}function y(e,t){if(!t.get("filter_visible"))return!0;const s=n._converse.state.roster_filter;if("groups"===s.get("type")){var r;const t=null===(r=s.get("text"))||void 0===r?void 0:r.toLowerCase();if(!t)return!0;if(!e.toLowerCase().includes(t))return!1}return!0}function b(e,t){const{labels:s}=n._converse;var r;const o=n.u.unique(null!==(r=t.get("groups"))&&void 0!==r?r:[]);n.u.isOwnJID(t.get("jid"))&&!o.length?o.push(s.HEADER_UNGROUPED):t.get("requesting")?o.push(s.HEADER_REQUESTING_CONTACTS):"subscribe"===t.get("ask")?o.push(s.HEADER_PENDING_CONTACTS):void 0===t.get("subscription")?o.push(s.HEADER_UNSAVED_CONTACTS):n.api.settings.get("roster_groups")?o.length||o.push(s.HEADER_UNGROUPED):o.push(s.HEADER_CURRENT_CONTACTS);for(const s of o){var i;(null===(i=e[s])||void 0===i?void 0:i.includes(t))||(e[s]?e[s].push(t):e[s]=[t])}if(t.get("num_unread")){const r=s.HEADER_UNREAD;e[r]?e[r].push(t):e[r]=[t]}return e}function j(e,t){const s=e.getStatus(),r=t.getStatus();if(d[s]===d[r]){const s=e.getDisplayName().toLowerCase(),r=t.getDisplayName().toLowerCase();return s<r?-1:s>r?1:0}return d[s]<d[r]?-1:1}function w(e,t){const s={},{HEADER_CURRENT_CONTACTS:r,HEADER_REQUESTING_CONTACTS:o,HEADER_UNGROUPED:i,HEADER_UNREAD:a,HEADER_PENDING_CONTACTS:l,HEADER_UNSAVED_CONTACTS:d}=n._converse.labels;s[a]=0,s[d]=1,s[o]=2,s[r]=3,s[i]=4,s[l]=5;const c=s,u=Object.keys(s),h=u.includes(e),m=u.includes(t);if(!h&&!m)return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0;if(h&&m)return c[e]<c[t]?-1:c[e]>c[t]?1:0;if(!h&&m){const e=r;return c[e]<c[t]?-1:c[e]>c[t]?1:0}if(h&&!m){const t=r;return c[e]<c[t]?-1:c[e]>c[t]?1:0}}function S(){const e=n._converse.state.roster.reduce(((e,t)=>e.concat(t.get("groups"))),[]);return[...new Set(e.filter((e=>e)))]}function x(){const e=n._converse.state.roster;return[...new Set([...e.map((e=>l.getDomainFromJid(e.get("jid")))),n._converse.session.get("domain")])]}function E(e){return i((function*(){const t={mode:"cors",headers:{Accept:"text/json"}},s=`${n.api.settings.get("xhr_user_search_url")}q=${encodeURIComponent(e)}`;let r;try{r=yield fetch(s,t)}catch(t){return n.log.error(`Failed to fetch names for query "${e}"`),n.log.error(t),[]}const o=yield r.json();return Array.isArray(o)?o.map((e=>function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){a(e,t,s[t])}))}return e}({label:`${e.fullname} <${e.jid}>`,value:`${e.fullname} <${e.jid}>`},e))):(n.log.error('Invalid JSON returned"'),[])}))()}Object.assign(n.u,{rosterview:{removeContact:c,declineContactRequest:u,blockContact:h,unblockContact:m,highlightRosterItem:f,toggleGroup:p,getFilterCriteria:g,isContactFiltered:v,shouldShowContact:_,shouldShowGroup:y,populateContactsMap:b,contactsComparator:j,groupsComparator:w,getGroupsAutoCompleteList:S,getJIDsAutoCompleteList:x,getNamesAutoCompleteList:E}})},"./src/plugins/singleton/index.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js");s("./src/plugins/singleton/singleton.scss");r.converse.plugins.add("converse-singleton",{enabled:e=>e.api.settings.get("singleton"),initialize(){r.api.settings.extend({allow_logout:!1,allow_muc_invitations:!1,hide_muc_server:!0});const e=r.api.settings.get("auto_join_rooms"),t=r.api.settings.get("auto_join_private_chats");if(!Array.isArray(e)&&!Array.isArray(t))throw new Error("converse-singleton: auto_join_rooms must be an Array");if(0===e.length&&0===t.length)throw new Error("If you set singleton set to true, you need to specify auto_join_rooms or auto_join_private_chats");if(e.length>0&&t.length>0)throw new Error("It doesn't make sense to have singleton set to true and auto_join_rooms or auto_join_private_chats set to more then one, since only one chat room may be open at any time.")}})},"./src/plugins/singleton/singleton.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/plugins/singleton/singleton.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/autocomplete/autocomplete.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{AutoComplete:()=>c,default:()=>u});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/@converse/skeletor/dist/skeletor.js"),o=s("./src/headless/index.js"),i=s("./src/shared/autocomplete/suggestion.js"),a=s("./src/shared/autocomplete/utils.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}const{siblingIndex:d}=o.u;class c extends((0,n.EventEmitter)(Object)){bindEvents(){this._events={input:{blur:()=>this.close({reason:"blur"})},form:{submit:()=>this.close({reason:"submit"})},ul:{mousedown:e=>this.onMouseDown(e),mouseover:e=>this.onMouseOver(e)}},a.helpers.bind(this.input,this._events.input),a.helpers.bind(this.input.form,this._events.form),a.helpers.bind(this.ul,this._events.ul)}set list(e){if(Array.isArray(e)||"function"==typeof e)this._list=e;else if("string"==typeof e&&e.includes(","))this._list=e.split(/\s*,\s*/);else{var t;const s=(null===(t=a.helpers.getElement(e))||void 0===t?void 0:t.children)||[];this._list=Array.from(s).filter((e=>!e.disabled)).map((e=>{const t=e.textContent.trim(),s=e.value||t,r=e.label||t;return""!==s?{label:r,value:s}:null})).filter((e=>e))}document.activeElement===this.input&&this.evaluate()}get list(){return this._list}get selected(){return this.index>-1}get opened(){return this.is_opened}close(e){this.opened&&(this.ul.setAttribute("hidden",""),this.is_opened=!1,this.index=-1,this.trigger("suggestion-box-close",e||{}))}insertValue(e){this.match_current_word?o.u.replaceCurrentWord(this.input,e.value):this.input.value=e.value}open(){this.ul.removeAttribute("hidden"),this.is_opened=!0,this.auto_first&&-1===this.index&&this.goto(0),this.trigger("suggestion-box-open")}destroy(){a.helpers.unbind(this.input,this._events.input),a.helpers.unbind(this.input.form,this._events.form),this.input.removeAttribute("aria-autocomplete")}next(){const e=this.ul.children.length;this.goto(this.index<e-1?this.index+1:e?0:-1)}previous(){const e=this.ul.children.length,t=this.index-1;this.goto(this.selected&&-1!==t?t:e-1)}goto(e,t=!0){const s=Array.from(this.ul.children).filter((e=>e instanceof HTMLElement));this.selected&&s[this.index].setAttribute("aria-selected","false"),this.index=e,e>-1&&s.length>0&&(s[e].setAttribute("aria-selected","true"),s[e].focus(),this.status.textContent=s[e].textContent,t&&(this.ul.scrollTop=s[e].offsetTop-this.ul.clientHeight+s[e].clientHeight),this.trigger("suggestion-box-highlight",{text:this.suggestions[this.index]}))}select(e){if(e?this.index=d(e):e=this.ul.children[this.index],e){const e=this.suggestions[this.index];this.insertValue(e),this.close({reason:"select"}),this.auto_completing=!1,this.trigger("suggestion-box-selectcomplete",{text:e,suggestion:e})}}onMouseOver(e){const t=o.u.ancestor(e.target,"li");if(t){const e=Array.prototype.slice.call(this.ul.children).indexOf(t);this.goto(e,!1)}}onMouseDown(e){if(0!==e.button)return;const t=o.u.ancestor(e.target,"li");t&&(e.preventDefault(),this.select(t))}onKeyDown(e){if(this.opened){if([o.converse.keycodes.ENTER,o.converse.keycodes.TAB].includes(e.key)&&this.selected)return e.preventDefault(),e.stopPropagation(),this.select(),!0;if(e.key===o.converse.keycodes.ESCAPE)return this.close({reason:"esc"}),!0;if([o.converse.keycodes.UP_ARROW,o.converse.keycodes.DOWN_ARROW].includes(e.key))return e.preventDefault(),e.stopPropagation(),this[e.key===o.converse.keycodes.UP_ARROW?"previous":"next"](),!0}if(![o.converse.keycodes.SHIFT,o.converse.keycodes.META,o.converse.keycodes.ESCAPE,o.converse.keycodes.ALT].includes(e.key))if(this.ac_triggers.includes(e.key)){if("Tab"===e.key){if(e.shiftKey)return;if(this.min_chars>0&&""===this.input.value)return;e.preventDefault()}this.auto_completing=!0}else if("Backspace"===e.key){const t=e.target,s=o.u.getCurrentWord(t,t.selectionEnd-1);a.helpers.isMention(s,this.ac_triggers)&&(this.auto_completing=!0)}}evaluate(e){return(t=function*(){if(this.selected&&e&&(e.key===o.converse.keycodes.UP_ARROW||e.key===o.converse.keycodes.DOWN_ARROW))return;let t=this.match_current_word?o.u.getCurrentWord(this.input):this.input.value;const s=a.helpers.isMention(t,this.ac_triggers);s&&!this.include_triggers.includes(e.key)&&(t=o.u.isMentionBoundary(t[0])?t.slice(2):t.slice(1));const n=t.length&&t.length>=this.min_chars;if(s||n){this.auto_completing=!0;const e="function"==typeof this._list?yield this._list(t):this._list;if(0===e.length||!this.auto_completing)return void this.close({reason:"nomatches"});this.index=-1,this.suggestions=e.map((e=>new i.default(this.data(e,t),t))).filter((({value:e})=>this.filter(e,t))),this.sort&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.max_items),(0,r.render)(r.html`${this.suggestions.map((e=>this.item(e,t)))}`,this.ul),0===this.suggestions.length?this.close({reason:"nomatches"}):this.open()}else this.close({reason:"nomatches"}),s||(this.auto_completing=!1)},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}).call(this);var t}constructor(e,t={}){super(),this.suggestions=[],this.is_opened=!1,this.match_current_word=!1,this.sort=!1===t.sort?null:a.SORT_BY_QUERY_POSITION,this.filter=a.FILTER_CONTAINS,this.ac_triggers=[],this.include_triggers=[],this.min_chars=2,this.max_items=10,this.auto_first=!1,this.data=(e,t)=>e,this.item=a.getAutoCompleteItem,o.u.hasClass("suggestion-box",e)?this.container=e:this.container=e.querySelector(".suggestion-box"),this.input=this.container.querySelector(".suggestion-box__input"),this.input.setAttribute("aria-autocomplete","list"),this.ul=this.container.querySelector(".suggestion-box__results"),this.status=this.container.querySelector(".suggestion-box__additions"),Object.assign(this,t),this.index=-1,this.bindEvents(),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||t.list||[]}}const u=c},"./src/shared/autocomplete/component.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/shared/autocomplete/autocomplete.js"),n=s("./src/shared/components/element.js"),o=s("./src/shared/autocomplete/utils.js"),i=s("./src/headless/index.js"),a=s("./node_modules/lit/index.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class d extends n.CustomElement{static get properties(){return{auto_evaluate:{type:Boolean},auto_first:{type:Boolean},autofocus:{type:Boolean},data:{type:Function},error_message:{type:String},filter:{type:String},getAutoCompleteList:{type:Function},include_triggers:{type:String},list:{type:Array},min_chars:{type:Number},name:{type:String},placeholder:{type:String},position:{type:String},renderItem:{type:Function},required:{type:Boolean},triggers:{type:String},validate:{type:Function},value:{type:String}}}render(){const e=`suggestion-box__results--${this.position}`;return a.html`<div class="suggestion-box suggestion-box__name"><ul class="suggestion-box__results ${e}" hidden=""></ul><input .validate="${this.validate}" ?autofocus="${this.autofocus}" ?required="${this.required}" @change="${this.onChange}" @keydown="${this.onKeyDown}" @input="${this.evaluate}" autocomplete="off" class="form-control suggestion-box__input ${this.error_message?"is-invalid error":""}" name="${this.name}" placeholder="${this.placeholder}" type="text" value="${this.value}"> <span class="suggestion-box__additions visually-hidden" role="status" aria-live="assertive" aria-relevant="additions"></span></div>${this.error_message?a.html`<div class="invalid-feedback">${this.error_message}</div>`:""}`}firstUpdated(){var e;this.auto_complete=new r.default(this.firstElementChild,{ac_triggers:this.triggers.split(" "),auto_first:this.auto_first,filter:"contains"==this.filter?o.FILTER_CONTAINS:o.FILTER_STARTSWITH,include_triggers:[],list:null!==(e=this.list)&&void 0!==e?e:e=>this.getAutoCompleteList(e),data:this.data,match_current_word:!0,max_items:this.max_items,min_chars:this.min_chars,item:this.renderItem}),this.auto_complete.on("suggestion-box-selectcomplete",(({suggestion:e})=>{this.auto_completing=!1,this.dispatchEvent(new CustomEvent("autocomplete-select",{detail:{suggestion:e},bubbles:!0,composed:!0}))}))}onKeyDown(e){this.auto_complete.onKeyDown(e)}onChange(){return(e=function*(){var e;const t=this.querySelector("input");return this.error_message=yield null===(e=this.validate)||void 0===e?void 0:e.call(this,t.value),this.error_message&&this.requestUpdate(),this},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}).call(this);var e}constructor(){super(),this.auto_evaluate=!0,this.auto_first=!1,this.data=e=>e,this.error_message="",this.filter="contains",this.getAutoCompleteList=null,this.include_triggers="",this.list=null,this.match_current_word=!1,this.max_items=10,this.min_chars=1,this.name="",this.placeholder="",this.position="above",this.renderItem=o.getAutoCompleteItem,this.required=!1,this.triggers="",this.validate=null,this.value="",this.evaluate=i.u.debounce((e=>{this.auto_evaluate&&this.auto_complete.evaluate(e)}),250)}}i.api.elements.define("converse-autocomplete",d)},"./src/shared/autocomplete/index.js":(e,t,s)=>{"use strict";s.r(t);s("./src/shared/autocomplete/component.js");var r=s("./src/shared/autocomplete/autocomplete.js"),n=s("./src/headless/index.js");s("./src/shared/autocomplete/styles/_autocomplete.scss");const o={AutoComplete:r.default};Object.assign(n._converse,o),Object.assign(n._converse.exports,o)},"./src/shared/autocomplete/styles/_autocomplete.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/autocomplete/styles/_autocomplete.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/autocomplete/suggestion.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});const r=class extends String{get lenth(){return this.label.length}toString(){return`${this.label}`}valueOf(){return this.toString()}constructor(e,t){super();const s=Array.isArray(e)?{label:e[0],value:e[1]}:"object"==typeof e&&"label"in e&&"value"in e?e:{label:e,value:e};this.label=s.label||s.value,this.value=s.value,this.query=t,this.data=e}}},"./src/shared/autocomplete/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{FILTER_CONTAINS:()=>a,FILTER_STARTSWITH:()=>l,SORT_BY_LENGTH:()=>d,SORT_BY_QUERY_POSITION:()=>c,getAutoCompleteItem:()=>u,helpers:()=>o,regExpEscape:()=>i});var r=s("./node_modules/lit/index.js");const n=s("./src/headless/index.js").converse.env.utils,o={getElement:(e,t)=>"string"==typeof e?(t||document).querySelector(e):e||null,bind(e,t){if(e)for(var s in t){if(!Object.prototype.hasOwnProperty.call(t,s))continue;const r=t[s];s.split(/\s+/).forEach((t=>e.addEventListener(t,r)))}},unbind(e,t){if(e)for(var s in t){if(!Object.prototype.hasOwnProperty.call(t,s))continue;const r=t[s];s.split(/\s+/).forEach((t=>e.removeEventListener(t,r)))}},isMention:(e,t)=>t.includes(e[0])||n.isMentionBoundary(e[0])&&t.includes(e[1])};function i(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")}function a(e,t){return RegExp(i(t.trim()),"i").test(e)}function l(e,t){return RegExp("^"+i(t.trim()),"i").test(e)}function d(e,t){return e.length!==t.length?e.length-t.length:e<t?-1:1}const c=function(e,t){const s=e.query.toLowerCase(),r=e.label.toLowerCase().indexOf(s),n=t.label.toLowerCase().indexOf(s);return r===n?d(e,t):(-1===r?1/0:r)<(-1===n?1/0:n)?-1:1};function u(e,t){t=t.trim();const s=new RegExp("("+i(t)+")","ig"),n=t?e.split(s):[e];return r.html`<li aria-selected="false">${n.map((e=>t&&e.match(s)?r.html`<mark>${e}</mark>`:e))}</li>`}Object.assign(n,{autocomplete:{regExpEscape:i,getAutoCompleteItem:u}})},"./src/shared/avatar/avatar.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/until.js"),o=s("./src/headless/index.js"),i=s("./src/i18n/index.js"),a=s("./src/shared/components/element.js"),l=s("./src/shared/avatar/templates/avatar.js");s("./src/shared/avatar/avatar.scss");class d extends a.CustomElement{static get properties(){return{model:{type:Object},pickerdata:{type:Object},name:{type:String},width:{type:String},height:{type:String},nonce:{type:String}}}render(){let e,t,s;var o,a,d,c;this.pickerdata?(e=this.pickerdata.image_type,s=this.pickerdata.data_uri):(e=null===(a=this.model)||void 0===a||null===(o=a.vcard)||void 0===o?void 0:o.get("image_type"),t=null===(c=this.model)||void 0===c||null===(d=c.vcard)||void 0===d?void 0:d.get("image"));if(e&&(t||s))return(0,l.default)({classes:this.getAttribute("class"),height:this.height,width:this.width,image:s||`data:${e};base64,${t}`,image_type:e,alt_text:(0,i.__)("The profile picture of %1$s",this.name)});const u=`\n            width: ${this.width}px;\n            height: ${this.height}px;\n            font: ${this.width/2}px Arial;\n            line-height: ${this.height}px;`,h=this.model.getAvatarStyle(u);return r.html`<div class="avatar-initials" style="${(0,n.until)(h,"background-color: gray;"+u)}" aria-label="${this.name}">${this.getInitials(this.name)}</div>`}getInitials(e){const t=null==e?void 0:e.split(" ");return(null==t?void 0:t.length)>1?t[0].charAt(0).toUpperCase()+t[t.length-1].charAt(0).toUpperCase():1===(null==t?void 0:t.length)?t[0].charAt(0).toUpperCase():""}constructor(){super(),this.model=null,this.pickerdata=null,this.width=36,this.height=36,this.name=""}}o.api.elements.define("converse-avatar",d)},"./src/shared/avatar/avatar.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/avatar/avatar.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/avatar/templates/avatar.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=e=>{return e.image?r.html`<svg xmlns="http://www.w3.org/2000/svg" class="avatar ${e.classes}" width="${e.width}" height="${e.height}" aria-label="${e.alt_text}" role="${e.alt_text?r.nothing:"presentation"}"><image width="${e.width}" height="${e.height}" preserveAspectRatio="xMidYMid meet" href="${t=e.image,s=e.image_type,t.startsWith("data:")?t:`data:${s};base64,${t}`}"/></svg>`:"";var t,s}},"./src/shared/chat/baseview.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/shared/constants.js"),i=s("./src/shared/chat/utils.js");const{CHATROOMS_TYPE:a,INACTIVE:l}=r.constants;class d extends n.CustomElement{static get properties(){return{jid:{type:String},model:{state:!0}}}connectedCallback(){super.connectedCallback(),this.viewportMediaQuery.addEventListener("change",this.renderOnViewportChange)}disconnectedCallback(){super.disconnectedCallback(),r._converse.state.chatboxviews.remove(this.jid,this),this.viewportMediaQuery.removeEventListener("change",this.renderOnViewportChange)}updated(e){super.updated(e),e.has("jid")&&this.model&&this.jid!==this.model.get("jid")&&(this.stopListening(),r._converse.state.chatboxviews.remove(this.model.get("jid"),this),this.initialize())}close(e){var t,s;return null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),null===(s=this.model)||void 0===s?void 0:s.close(e)}maybeFocus(){r.api.settings.get("auto_focus")&&this.focus()}focus(){const e=this.getElementsByClassName("chat-textarea")[0];return e&&document.activeElement!==e&&e.focus(),this}getBottomPanel(){return this.model.get("type")===a?this.querySelector("converse-muc-bottom-panel"):this.querySelector("converse-chat-bottom-panel")}getMessageForm(){return this.model.get("type")===a?this.querySelector("converse-muc-message-form"):this.querySelector("converse-message-form")}scrollDown(e){var t,s;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),null==e||null===(s=e.stopPropagation)||void 0===s||s.call(e),this.model.ui.get("scrolled")&&this.model.ui.set({scrolled:!1}),(0,i.onScrolledDown)(this.model)}onWindowStateChanged(){document.hidden?this.model.setChatState(l,{silent:!0}):this.model.isHidden()||this.model.clearUnreadMsgCounter()}constructor(){super(),this.jid=null,this.model=null,this.viewportMediaQuery=window.matchMedia(`(max-width: ${o.MOBILE_CUTOFF}px)`),this.renderOnViewportChange=()=>this.requestUpdate()}}},"./src/shared/chat/chat-content.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/templates/spinner.js"),i=s("./src/shared/components/element.js"),a=s("./src/shared/chat/utils.js");s("./src/shared/chat/message-history.js"),s("./src/shared/chat/styles/chat-content.scss");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e,t,s){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return s}function c(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}const u=100;var h=new WeakSet,m=new WeakSet,f=new WeakSet;class p extends i.CustomElement{static get properties(){return{model:{type:Object},window_top:{state:!0},window_bottom:{state:!0}}}initialize(){return(e=function*(){yield this.model.initialized,this.listenTo(this.model.messages,"add",(()=>d(this,h,g).call(this))),this.listenTo(this.model.messages,"remove",(()=>d(this,h,g).call(this))),this.listenTo(this.model.messages,"reset",(()=>d(this,h,g).call(this))),this.listenTo(this.model.messages,"change",(()=>this.requestUpdate())),this.listenTo(this.model.messages,"rendered",(()=>this.requestUpdate())),this.listenTo(this.model,"historyPruned",(()=>d(this,f,_).call(this))),this.listenTo(this.model.notifications,"change",(()=>this.requestUpdate())),this.listenTo(this.model.ui,"change",(()=>this.requestUpdate())),this.listenTo(this.model.ui,"change:scrolled",(()=>this.scrollDown())),this.window_bottom=this.model.messages.length-1,this.window_top=Math.max(0,this.window_bottom-u),this.requestUpdate()},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}).call(this);var e}render(){var e;return this.model?r.html`<div class="chat-content__messages" @scroll="${e=>this.scrollHandler(e)}"><div class="chat-content__notifications">${this.model.getNotificationsText()}</div><converse-message-history .model="${this.model}" .messages="${this.model.messages.slice(this.window_top,this.window_bottom+1)}"></converse-message-history></div>${(null===(e=this.model.ui)||void 0===e?void 0:e.get("chat-content-spinner-top"))?(0,o.default)():""}`:""}scrollDown(){if(!this.model.ui.get("scrolled")){if(this.scrollTo){const e=this.scrollTop?"smooth":"auto";this.scrollTo({top:0,behavior:e})}else this.scrollTop=0;n.api.trigger("chatBoxScrolledDown",{chatbox:this.model})}}constructor(){super(),c(this,h),c(this,m),c(this,f),this.model=null,this.scrollTop=0,this.scroll_debounce=null,this.window_top=0,this.window_bottom=0,this.scrollHandler=e=>{this.mark_scrolled_debounce&&clearTimeout(this.scroll_debounce),this.mark_scrolled_debounce=setTimeout((()=>{d(this,m,v).call(this,e)}),250),requestAnimationFrame((()=>d(this,f,_).call(this)))}}}function g(){d(this,f,_).call(this),this.requestUpdate()}function v(e){let t=!0;const s=e.target,r=0===Math.floor(s.scrollTop),o=Math.ceil(s.clientHeight-s.scrollTop)>=s.scrollHeight-Math.ceil(s.scrollHeight/20);r?(t=!1,(0,a.onScrolledDown)(this.model)):o&&n.api.trigger("chatBoxScrolledUp",s),this.model.get("scolled")!==t&&this.model.ui.set({scrolled:t})}function _(){const e=this.model.messages.length,t=this.querySelector(".chat-content__messages"),s=Math.ceil(t.scrollHeight/5);if(Math.ceil(t.clientHeight-t.scrollTop)>=t.scrollHeight-s)return this.window_top=Math.max(0,this.window_top-5),void(this.window_bottom=this.window_top+u);if(0===Math.floor(t.scrollTop))return this.window_bottom=e-1,void(this.window_top=Math.max(0,this.window_bottom-u));return Math.floor(Math.abs(t.scrollTop))<s?(this.window_bottom=Math.min(e-1,this.window_bottom+5),void(this.window_top=Math.max(0,this.window_bottom-u))):void 0}n.api.elements.define("converse-chat-content",p)},"./src/shared/chat/emoji-dropdown.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/i18n/index.js"),i=s("./src/shared/components/dropdown.js"),a=s("./node_modules/lit/directives/until.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{CHATROOMS_TYPE:c}=n.constants,{initStorage:u}=n.u;class h extends i.default{static get properties(){return{icon_classes:{type:String},items:{type:Array},model:{type:Object}}}initModel(){return this.init_promise||(this.init_promise=(()=>d((function*(){yield n.api.emojis.initialize();const e=`converse.emoji-${n._converse.session.get("bare_jid")}-${this.model.get("jid")}`;this.state=new n.EmojiPicker({id:e}),u(this.state,e),yield new Promise((e=>this.state.fetch({success:e,error:e}))),this.state.set({autocompleting:null,ac_position:null})})).call(this))()),this.init_promise}render(){const e=this.model.get("type")===c?"--muc-color":"--chat-color";return r.html`<button class="btn dropdown-toggle dropdown-toggle--no-caret toggle-emojis" type="button" id="${this.id}" title="${(0,o.__)("Insert emojis")}" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><converse-icon color="var(${e})" class="fa fa-smile" path-prefix="${n.api.settings.get("assets_path")}" size="1em"></converse-icon></button><ul class="dropdown-menu" aria-labelledby="${this.id}"><li>${(0,a.until)(this.initModel().then((()=>r.html`<converse-emoji-picker .state="${this.state}" .model="${this.model}" @emojiSelected="${()=>this.dropdown.hide()}" ?render_emojis="${this.render_emojis}" current_category="${this.state.get("current_category")||""}" current_skintone="${this.state.get("current_skintone")||""}" query="${this.state.get("query")||""}"></converse-emoji-picker>`)),"")}</li></ul>`}connectedCallback(){super.connectedCallback(),this.render_emojis=!1}onShown(){return d((function*(){yield this.initModel(),this.render_emojis||(this.render_emojis=!0,this.requestUpdate(),yield this.updateComplete),setTimeout((()=>{var e;return null===(e=this.querySelector(".emoji-search"))||void 0===e?void 0:e.focus()}))})).call(this)}constructor(){super(),this.id=n.u.getUniqueId(),this.render_emojis=!1,this.state=null,this.model=null,this.addEventListener("shown.bs.dropdown",(()=>this.onShown()))}}n.api.elements.define("converse-emoji-dropdown",h)},"./src/shared/chat/emoji-picker-content.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/shared/components/element.js"),i=s("./src/shared/chat/templates/emoji-picker.js"),a=s("./src/shared/chat/utils.js"),l=s("./src/shared/autocomplete/utils.js");const{sizzle:d}=n.converse.env;class c extends o.CustomElement{static get properties(){return{search_results:{type:Array},current_skintone:{type:String},model:{type:Object},query:{type:String}}}render(){const e={current_skintone:this.current_skintone,insertEmoji:e=>this.insertEmoji(e),query:this.query,search_results:this.search_results,shouldBeHidden:e=>this.shouldBeHidden(e)};return r.html`<div class="emoji-picker__lists">${(0,i.tplSearchResults)(e)} ${(0,i.tplAllEmojis)(e)}</div>`}firstUpdated(){this.initIntersectionObserver()}initIntersectionObserver(){if(window.IntersectionObserver){if(this.observer)this.observer.disconnect();else{const e={root:this.querySelector(".emoji-picker__lists"),threshold:[.1]},t=e=>this.setCategoryOnVisibilityChange(e);this.observer=new IntersectionObserver(t,e)}d(".emoji-picker",this).forEach((e=>this.observer.observe(e)))}}setCategoryOnVisibilityChange(e){const t=this.parentElement.navigator.selected,s=e.filter((e=>e.target.contains(t))).pop();let r;if(r=s||e.reduce(((e,t)=>t.intersectionRatio>=((null==e?void 0:e.intersectionRatio)||0)?t:e),null),r&&r.isIntersecting){const e=r.target.getAttribute("data-category");e!==this.model.get("current_category")&&(this.parentElement.preserve_scroll=!0,n.u.safeSave(this.model,{current_category:e}))}}insertEmoji(e){e.preventDefault(),e.stopPropagation();const t=e.target,s="IMG"===t.nodeName?t.parentElement:t;this.parentElement.selectEmoji(s.getAttribute("data-emoji"))}shouldBeHidden(e){if(e.includes("_tone")){if(!this.current_skintone||!e.includes(this.current_skintone))return!0}else if(this.current_skintone&&(0,a.getTonedEmojis)().includes(e))return!0;return!(!this.query||(0,l.FILTER_CONTAINS)(e,this.query))}constructor(){super(),this.model=null,this.current_skintone=null,this.query=null,this.search_results=null}}n.api.elements.define("converse-emoji-picker-content",c)},"./src/shared/chat/emoji-picker.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s("./node_modules/lodash-es/debounce.js"),n=s("./src/headless/index.js"),o=s("./src/shared/dom-navigator/index.js"),i=s("./src/shared/components/element.js"),a=s("./src/shared/autocomplete/utils.js"),l=s("./src/shared/chat/utils.js"),d=s("./src/shared/chat/templates/emoji-picker.js");s("./src/shared/chat/emoji-picker-content.js"),s("./src/shared/chat/emoji-dropdown.js"),s("./src/shared/chat/styles/emoji.scss");function c(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}const{KEYCODES:u}=n.constants;var h=new WeakSet;class m extends i.CustomElement{static get properties(){return{current_category:{type:String,reflect:!0},current_skintone:{type:String,reflect:!0},model:{type:Object},query:{type:String,reflect:!0},state:{type:Object},render_emojis:{type:Boolean}}}initialize(){super.initialize(),this.dropdown=this.closest("converse-emoji-dropdown")}firstUpdated(e){super.firstUpdated(e),this.listenTo(this.state,"change",(e=>this.onModelChanged(e.changed))),this.initArrowNavigation()}get search_results(){return this._search_results}set search_results(e){this._search_results=e,this.requestUpdate()}render(){return(0,d.tplEmojiPicker)(this,{current_category:this.current_category,current_skintone:this.current_skintone,onCategoryPicked:e=>this.chooseCategory(e),onSearchInputFocus:()=>this.disableArrowNavigation(),onSearchInputKeyDown:e=>this.onSearchInputKeyDown(e),onSkintonePicked:e=>this.chooseSkinTone(e),query:this.query,search_results:this.search_results,render_emojis:this.render_emojis,sn2Emoji:e=>n.u.shortnamesToEmojis(this.getTonedShortname(e))})}updated(e){e.has("query")&&this.updateSearchResults(e),e.has("current_category")&&this.setScrollPosition()}onModelChanged(e){"current_category"in e&&(this.current_category=e.current_category),"current_skintone"in e&&(this.current_skintone=e.current_skintone),"query"in e&&(this.query=e.query)}setScrollPosition(){if(this.preserve_scroll)return void(this.preserve_scroll=!1);const e=this.querySelector(".emoji-lists__container--browse"),t=this.querySelector(`#emoji-picker-${this.current_category}`);t instanceof HTMLElement&&(e.scrollTop=t.offsetTop-3*t.offsetHeight+4)}updateSearchResults(e){const t=e.get("query"),s=a.FILTER_CONTAINS;if(this.query){if(this.query===t)return this.search_results;t&&this.query.includes(t)?this.search_results=this.search_results.filter((e=>s(e.sn,this.query))):this.search_results=n.converse.emojis.list.filter((e=>s(e.sn,this.query)))}else this.search_results.length&&(this.search_results=[])}registerEvents(){this.onKeyDown=e=>function(e,t,s){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return s}(this,h,f).call(this,e),this.dropdown.addEventListener("hide.bs.dropdown",(()=>this.onDropdownHide())),this.addEventListener("keydown",this.onKeyDown)}connectedCallback(){super.connectedCallback(),this.registerEvents()}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown),this.disableArrowNavigation(),super.disconnectedCallback()}onDropdownHide(){this.disableArrowNavigation(),this.dispatchEvent(new CustomEvent("emojipickerblur",{bubbles:!0}))}setCategoryForElement(e){const t=this.current_category,s=(null==e?void 0:e.getAttribute("data-category"))||t;t!==s&&this.state.save({current_category:s})}selectEmoji(e){const t=this.state.get("autocompleting"),s=this.state.get("ac_position");this.state.set({autocompleting:null,query:"",ac_position:null}),this.disableArrowNavigation();const r={bubbles:!0,detail:{value:e,autocompleting:t,ac_position:s,jid:this.model.get("jid")}};this.dispatchEvent(new CustomEvent("emojiSelected",r))}chooseSkinTone(e){e.preventDefault(),e.stopPropagation();const t=e.target,s=("IMG"===t.nodeName?t.parentElement:t).getAttribute("data-skintone").trim();this.current_skintone===s?this.state.save({current_skintone:""}):this.state.save({current_skintone:s})}chooseCategory(e){var t;e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation();const s=null!==(t=e.target)&&void 0!==t?t:e.relatedTarget,r=s.matches("li")?s:n.u.ancestor(s,"li");this.setCategoryForElement(r),this.navigator.select(r),!this.navigator.enabled&&this.navigator.enable()}onSearchInputKeyDown(e){const t=e.target;if(e.key===u.TAB)if(t.value){e.preventDefault();const s=n.converse.emojis.shortnames.find((e=>(0,a.FILTER_CONTAINS)(e,t.value)));s&&this.state.set({query:s})}else this.navigator.enabled||this.enableArrowNavigation(e);else e.key!==u.DOWN_ARROW||this.navigator.enabled?e.key!==u.ENTER&&e.key!==u.DOWN_ARROW&&this.debouncedFilter(t):this.enableArrowNavigation(e)}onEnterPressed(e){e.preventDefault(),e.stopPropagation();const t=e.target;n.converse.emojis.shortnames.includes(t.value)?this.selectEmoji(t.value):1===this.search_results.length?this.selectEmoji(this.search_results[0].sn):this.navigator.selected&&this.navigator.selected.matches(".insert-emoji")?this.selectEmoji(this.navigator.selected.getAttribute("data-emoji")):this.navigator.selected&&this.navigator.selected.matches(".emoji-category")&&this.chooseCategory(new MouseEvent("click",{relatedTarget:this.navigator.selected}))}getTonedShortname(e){return(0,l.getTonedEmojis)().includes(e)&&this.current_skintone?`${e.slice(0,e.length-1)}_${this.current_skintone}:`:e}initArrowNavigation(){if(!this.navigator){const e="li:not(.hidden):not(.emoji-skintone), .emoji-search",t={jump_to_picked:".emoji-category",jump_to_picked_selector:".emoji-category.picked",jump_to_picked_direction:o.DOMNavigator.DIRECTION.down,picked_selector:".picked",scroll_container:this.querySelector(".emoji-picker__lists"),getSelector:t=>{if(t===o.DOMNavigator.DIRECTION.down){const t=this.navigator.selected&&this.navigator.selected.getAttribute("data-category");return t?`ul[data-category="${t}"] li:not(.hidden):not(.emoji-skintone), .emoji-search`:e}return e},onSelected:e=>{e.matches(".insert-emoji")&&this.setCategoryForElement(e.parentElement),e.matches(".insert-emoji, .emoji-category")&&e.firstElementChild.focus(),e.matches(".emoji-search")&&e.focus()}};this.navigator=new o.DOMNavigator(this,t)}}disableArrowNavigation(){var e;null===(e=this.navigator)||void 0===e||e.disable()}enableArrowNavigation(e){var t,s;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),null==e||null===(s=e.stopPropagation)||void 0===s||s.call(e),this.disableArrowNavigation(),this.navigator.enable(),this.navigator.handleKeydown(e)}constructor(){super(),c(this,h),this.state=null,this.model=null,this.query="",this.render_emojis=null,this._search_results=[],this.debouncedFilter=(0,r.default)((e=>this.state.set({query:e.value})),250)}}function f(e){this.navigator&&n.u.isVisible(this)&&(e.key===u.ENTER?this.onEnterPressed(e):e.key!==u.DOWN_ARROW||this.navigator.enabled||this.enableArrowNavigation(e))}n.api.elements.define("converse-emoji-picker",m)},"./src/shared/chat/help-messages.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});s("./src/shared/components/icons.js");var r=s("./node_modules/dompurify/dist/purify.es.mjs"),n=s("./src/shared/components/element.js"),o=s("./src/headless/index.js"),i=s("./node_modules/lit/index.js"),a=s("./node_modules/lit/directives/unsafe-html.js");class l extends n.CustomElement{static get properties(){return{chat_type:{type:String},messages:{type:Array},model:{type:Object},type:{type:String}}}render(){const e=(new Date).toISOString();return[i.html`<converse-icon class="fas fa-times close-chat-help" @click="${this.close}" path-prefix="${o.api.settings.get("assets_path")}" size="1em"></converse-icon>`,...this.messages.map((t=>this.renderHelpMessage({isodate:e,markup:r.default.sanitize(t,{ALLOWED_TAGS:["strong"]})})))]}close(){this.model.set({show_help_messages:!1})}renderHelpMessage(e){return i.html`<div class="message chat-${this.type}" data-isodate="${e.isodate}">${(0,a.unsafeHTML)(e.markup)}</div>`}constructor(){super(),this.messages=[],this.model=null,this.type=null}}o.api.elements.define("converse-chat-help",l)},"./src/shared/chat/message-actions.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/until.js"),o=s("./src/headless/index.js"),i=s("./src/shared/components/element.js"),a=s("./src/i18n/index.js"),l=s("./src/utils/url.js");s("./src/shared/chat/styles/message-actions.scss");function d(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function c(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){d(o,r,n,i,a,"next",e)}function a(e){d(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{getMediaURLs:u}=o.u,{CHATROOMS_TYPE:h}=o.constants;class m extends i.CustomElement{static get properties(){return{is_retracted:{type:Boolean},model:{type:Object}}}initialize(){const e=o.api.settings.get();this.listenTo(e,"change:allowed_audio_domains",(()=>this.requestUpdate())),this.listenTo(e,"change:allowed_image_domains",(()=>this.requestUpdate())),this.listenTo(e,"change:allowed_video_domains",(()=>this.requestUpdate())),this.listenTo(e,"change:render_media",(()=>this.requestUpdate())),this.listenTo(this.model,"change",(()=>this.requestUpdate())),this.listenTo(this.model.chatbox.features,"change:moderated",(()=>this.requestUpdate())),this.listenTo(this.model.chatbox.occupants,"add",this.updateIfOwnOccupant),this.listenTo(this.model.chatbox.occupants,"change:role",this.updateIfOwnOccupant),this.listenTo(this.model.chatbox.session,"change:connection_status",(()=>this.requestUpdate()))}updateIfOwnOccupant(e){const t=o._converse.session.get("bare_jid");e.get("jid")===t&&this.requestUpdate()}render(){return r.html`${(0,n.until)(this.renderActions(),"")}`}renderActions(){return c((function*(){if(!this.model.collection)return"";const e=(yield this.getActionButtons()).map((e=>m.getActionsDropdownItem(e)));return e.length?r.html`<converse-dropdown class="chat-msg__actions btn-group dropstart" .items="${e}"></converse-dropdown>`:""})).call(this)}static getActionsDropdownItem(e){return r.html`<button type="button" class="dropdown-item chat-msg__action ${e.button_class}" @click="${e.handler}"><converse-icon class="${e.icon_class}" color="var(--foreground-color)" size="1em"></converse-icon> ${e.i18n_text}</button>`}onMessageEditButtonClicked(e){return c((function*(){var t,s;e.preventDefault();const r=this.model.collection.findWhere("correcting"),n=null===(s=o.u.ancestor(this,".chatbox"))||void 0===s||null===(t=s.querySelector(".chat-textarea"))||void 0===t?void 0:t.value;if(n&&(!r||r.getMessageText()!==n)){if(!(yield o.api.confirm((0,a.__)("Confirm"),(0,a.__)("You have an unsent message which will be lost if you continue. Are you sure?"))))return}r!==this.model?(null==r||r.save("correcting",!1),this.model.save("correcting",!0)):this.model.save("correcting",!1)})).call(this)}onDirectMessageRetractButtonClicked(){return c((function*(){if("me"!==this.model.get("sender"))return o.log.error("onMessageRetractButtonClicked called for someone else's message!");const e=(0,a.__)("Be aware that other XMPP/Jabber clients (and servers) may not yet support retractions and that this message may not be removed everywhere."),t=[(0,a.__)("Are you sure you want to retract this message?")];o.api.settings.get("show_retraction_warning")&&(t[1]=e);if(yield o.api.confirm((0,a.__)("Confirm"),t)){this.model.collection.chatbox.retractOwnMessage(this.model)}})).call(this)}retractOtherMessage(e){return c((function*(){const t=this.model.collection.chatbox,s=yield t.retractOtherMessage(this.model,e);if(null===s){const e=(0,a.__)("A timeout occurred while trying to retract the message");o.api.alert("error",(0,a.__)("Error"),e),o.log.warn(e)}else if(o.u.isErrorStanza(s)){const e=(0,a.__)("Sorry, you're not allowed to retract this message.");o.api.alert("error",(0,a.__)("Error"),e),o.log.warn(e),o.log.error(s)}})).call(this)}onMUCMessageRetractButtonClicked(){return c((function*(){const e=(0,a.__)("Be aware that other XMPP/Jabber clients (and servers) may not yet support retractions and that this message may not be removed everywhere.");if(this.model.mayBeRetracted()){const t=[(0,a.__)("Are you sure you want to retract this message?")];if(o.api.settings.get("show_retraction_warning")&&(t[1]=e),yield o.api.confirm((0,a.__)("Confirm"),t)){this.model.collection.chatbox.retractOwnMessage(this.model)}}else if(yield this.model.mayBeModerated())if("me"===this.model.get("sender")){let t=[(0,a.__)("Are you sure you want to retract this message?")];o.api.settings.get("show_retraction_warning")&&(t=[t[0],e,t[1]]),(yield o.api.confirm((0,a.__)("Confirm"),t))&&this.retractOtherMessage()}else{let t=[(0,a.__)("You are about to retract this message."),(0,a.__)("You may optionally include a message, explaining the reason for the retraction.")];o.api.settings.get("show_retraction_warning")&&(t=[t[0],e,t[1]]);const s=yield o.api.prompt((0,a.__)("Message Retraction"),t,(0,a.__)("Optional reason"));!1!==s&&this.retractOtherMessage(s)}else{const e=(0,a.__)("Sorry, you're not allowed to retract this message");o.api.alert("error",(0,a.__)("Error"),e)}})).call(this)}onMessageRetractButtonClicked(e){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e);this.model.collection.chatbox.get("type")===h?this.onMUCMessageRetractButtonClicked():this.onDirectMessageRetractButtonClicked()}onMediaToggleClicked(e){var t;if(null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),this.hasHiddenMedia(this.getMediaURLs()))this.model.save({hide_url_previews:!1,url_preview_transition:"fade-in"});else{(this.model.get("ogp_metadata")||[]).length?this.model.set("url_preview_transition","fade-out"):this.model.save({hide_url_previews:!0,url_preview_transition:"fade-in"})}}hasHiddenMedia(e){if("boolean"==typeof this.model.get("hide_url_previews"))return this.model.get("hide_url_previews");const t=o.api.settings.get("render_media");return Array.isArray(t)?e.reduce(((e,s)=>e||!(0,l.isDomainWhitelisted)(t,s)),!1):!t}getMediaURLs(){const e=(this.model.get("ogp_metadata")||[]).map((e=>({url:e["og:image"],is_image:!0}))).filter((e=>(0,l.isMediaURLDomainAllowed)(e))),t=u(this.model.get("media_urls")||[],this.model.get("body")).filter((e=>(0,l.isMediaURLDomainAllowed)(e)));return[...new Set([...t.map((e=>e.url)),...e.map((e=>e.url))])]}addMediaRenderingToggle(e){const t=this.getMediaURLs();if(t.length){const s=this.hasHiddenMedia(t);e.push({i18n_text:s?(0,a.__)("Show media"):(0,a.__)("Hide media"),handler:e=>this.onMediaToggleClicked(e),button_class:"chat-msg__action-hide-previews",icon_class:s?"fas fa-eye":"fas fa-eye-slash",name:"hide"})}}onMessageCopyButtonClicked(e){return c((function*(){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),yield navigator.clipboard.writeText(this.model.getMessageText())})).call(this)}onMessageQuoteButtonClicked(e){var t,s,r;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e);const n=this.model.collection.chatbox,i=null===(r=o.u.ancestor(this,".chatbox"))||void 0===r||null===(s=r.querySelector(".chat-textarea"))||void 0===s?void 0:s.selectionEnd,a=this.model.getMessageText().replaceAll(/^/gm,"> ");var l;let d=null!==(l=n.get("draft"))&&void 0!==l?l:"";i?d=`${d.slice(0,i)}\n${a}\n${d.slice(i)}`:d+=a,n.save({draft:d})}getActionButtons(){return c((function*(){const e=[];this.model.get("editable")&&e.push({i18n_text:this.model.get("correcting")?(0,a.__)("Cancel Editing"):(0,a.__)("Edit"),handler:e=>this.onMessageEditButtonClicked(e),button_class:"chat-msg__action-edit",icon_class:"fa fa-pencil-alt",name:"edit"});const t=["groupchat","mep"].includes(this.model.get("type"))&&(yield this.model.mayBeModerated());return!this.is_retracted&&(this.model.mayBeRetracted()||t)&&e.push({i18n_text:(0,a.__)("Retract"),handler:e=>this.onMessageRetractButtonClicked(e),button_class:"chat-msg__action-retract",icon_class:"fas fa-trash-alt",name:"retract"}),this.model.collection?(this.addMediaRenderingToggle(e),e.push({i18n_text:(0,a.__)("Copy"),handler:e=>this.onMessageCopyButtonClicked(e),button_class:"chat-msg__action-copy",icon_class:"fas fa-copy",name:"copy"}),this.model.collection.chatbox.canPostMessages()&&e.push({i18n_text:(0,a.__)("Quote"),handler:e=>this.onMessageQuoteButtonClicked(e),button_class:"chat-msg__action-quote",icon_class:"fas fa-quote-right",name:"quote"}),o.api.hook("getMessageActionButtons",this,e)):[]})).call(this)}constructor(){super(),this.model=null,this.is_retracted=null}}o.api.elements.define("converse-message-actions",m)},"./src/shared/chat/message-body.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/headless/index.js"),n=(s("./src/shared/registry.js"),s("./src/shared/modals/image.js"),s("./src/shared/components/element.js")),o=s("./src/shared/texture/directives/texture.js");s("./src/shared/chat/styles/message-body.scss");class i extends n.CustomElement{static get properties(){return{hide_url_previews:{type:String},is_me_message:{type:Boolean},model:{type:Object},text:{type:String}}}initialize(){const e=r.api.settings.get();this.listenTo(e,"change:allowed_audio_domains",(()=>this.requestUpdate())),this.listenTo(e,"change:allowed_image_domains",(()=>this.requestUpdate())),this.listenTo(e,"change:allowed_video_domains",(()=>this.requestUpdate())),this.listenTo(e,"change:render_media",(()=>this.requestUpdate()))}onImgClick(e){e.preventDefault(),r.api.modal.show("converse-image-modal",{src:e.target.src},e)}onImgLoad(){this.dispatchEvent(new CustomEvent("imageLoaded",{detail:this,bubbles:!0}))}render(){const e={media_urls:this.model.get("media_urls"),mentions:this.model.get("references"),nick:this.model.chatbox.get("nick"),onImgClick:e=>this.onImgClick(e),onImgLoad:()=>this.onImgLoad(),render_styling:!this.model.get("is_unstyled")&&r.api.settings.get("allow_message_styling"),show_me_message:!0};return"false"===this.hide_url_previews?(e.embed_audio=!0,e.embed_videos=!0,e.show_images=!0):"true"===this.hide_url_previews&&(e.embed_audio=!1,e.embed_videos=!1,e.show_images=!1),(0,o.default)(this.text,0,e,(()=>{var e;return null===(e=this.model.collection)||void 0===e?void 0:e.trigger("rendered",this.model)}))}constructor(){super(),this.text=null,this.model=null,this.hide_url_previews=null}}r.api.elements.define("converse-chat-message-body",i)},"./src/shared/chat/message-history.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/repeat.js"),o=s("./node_modules/lit/directives/until.js"),i=s("./src/headless/index.js"),a=s("./src/shared/components/element.js"),l=s("./src/shared/chat/utils.js");s("./src/shared/chat/message.js");class d extends a.CustomElement{static get properties(){return{model:{type:Object},messages:{type:Array}}}render(){const e=this.messages;return e.length?(0,n.repeat)(e,(e=>e.get("id")),(e=>r.html`${this.renderMessage(e)}`)):""}renderMessage(e){if(e.get("dangling_retraction")||e.get("dangling_moderation")||e.get("is_only_key"))return"";const t=e.get("template_hook");if("string"==typeof t){const s=i.api.hook(t,e,"");return(0,o.until)(s,"")}{const t=r.html`<converse-chat-message .model_with_messages="${this.model}" .model="${e}"></converse-chat-message>`,s=(0,l.getDayIndicator)(e);return s?[s,t]:t}}constructor(){super(),this.model=null,this.messages=[]}}i.api.elements.define("converse-message-history",d)},"./src/shared/chat/message-limit.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/shared/chat/templates/message-limit.js"),n=s("./src/shared/components/element.js"),o=s("./src/headless/index.js");class i extends n.CustomElement{static get properties(){return{model:{type:Object},_draft_length:{state:!0}}}connectedCallback(){var e,t;super.connectedCallback(),this._draft_length=null!==(t=null===(e=this.model.get("draft"))||void 0===e?void 0:e.length)&&void 0!==t?t:0,this.listenTo(this.model,"change:draft",(()=>{var e,t;this._draft_length=null!==(t=null===(e=this.model.get("draft"))||void 0===e?void 0:e.length)&&void 0!==t?t:0})),this.listenTo(this.model,"event:keyup",(({ev:e})=>{const t=e.target;this._draft_length=t.value.length}))}render(){const e=o.api.settings.get("message_limit");return e?(0,r.default)(e-this._draft_length):""}constructor(){super(),this.model=null,this._draft_length=0}}o.api.elements.define("converse-message-limit-indicator",i)},"./src/shared/chat/message.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s("./src/headless/index.js"),n=(s("./src/shared/chat/message-actions.js"),s("./src/shared/chat/message-body.js"),s("./src/shared/components/dropdown.js"),s("./src/shared/modals/message-versions.js"),s("./src/shared/modals/user-details.js"),s("./src/shared/registry.js"),s("./src/plugins/muc-views/modals/occupant.js"),s("./src/shared/chat/templates/file-progress.js")),o=s("./src/shared/chat/templates/info-message.js"),i=s("./src/plugins/muc-views/templates/mep-message.js"),a=s("./src/shared/chat/templates/message.js"),l=s("./src/shared/chat/templates/message-text.js"),d=s("./src/shared/chat/templates/retraction.js"),c=s("./src/templates/spinner.js"),u=s("./src/shared/components/observable.js"),h=s("./src/i18n/index.js");function m(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function f(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){m(o,r,n,i,a,"next",e)}function a(e){m(o,r,n,i,a,"throw",e)}i(void 0)}))}}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function g(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const{Strophe:v}=r.converse.env,{SUCCESS:_}=r.constants;class y extends u.ObservableElement{static get properties(){return g(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){p(e,t,s[t])}))}return e}({},super.properties),{model_with_messages:{type:Object},model:{type:Object}})}initialize(){var e=this,t=()=>super.initialize;return f((function*(){t().call(e),yield this.model_with_messages.initialized,yield this.model_with_messages.messages.fetched;const s=r.api.settings.get();this.listenTo(s,"change:render_media",(()=>{this.model.save("hide_url_previews",void 0),this.requestUpdate()})),this.listenTo(this.model_with_messages,"change:first_unread_id",(()=>this.requestUpdate())),this.listenTo(this.model,"change",(()=>this.requestUpdate())),this.listenTo(this.model,"contact:change",(()=>this.requestUpdate())),this.listenTo(this.model,"occupant:add",(()=>this.requestUpdate())),this.listenTo(this.model,"occupant:change",(()=>this.requestUpdate())),this.listenTo(this.model,"vcard:add",(()=>this.requestUpdate())),this.listenTo(this.model,"vcard:change",(()=>this.requestUpdate())),this.requestUpdate()})).call(this)}render(){return this.model?this.show_spinner?(0,c.default)():this.model.get("file")&&this.model.get("upload")!==_?this.renderFileProgress():["mep"].includes(this.model.get("type"))?this.renderMEPMessage():["error","info"].includes(this.model.get("type"))?this.renderInfoMessage():this.renderChatMessage():""}renderRetraction(){return(0,d.default)(this)}renderMessageText(){return(0,l.default)(this)}renderMEPMessage(){return(0,i.default)(this)}renderInfoMessage(){return(0,o.default)(this)}renderFileProgress(){return this.model.file?(0,n.default)(this):""}renderChatMessage(){return(0,a.default)(this)}shouldShowAvatar(){return r.api.settings.get("show_message_avatar")&&!this.model.isMeCommand()&&["chat","groupchat","normal"].includes(this.model.get("type"))}onImgClick(e){e.preventDefault(),r.api.modal.show("converse-image-modal",{src:e.target.src},e)}onUnfurlAnimationEnd(){"fade-out"===this.model.get("url_preview_transition")&&this.model.save({hide_url_previews:!0,url_preview_transition:"fade-in"})}onRetryClicked(){return f((function*(){this.show_spinner=!0,this.requestUpdate(),yield r.api.trigger(this.model.get("retry_event_id"),{synchronous:!0}),this.model.destroy(),this.parentElement.removeChild(this)})).call(this)}hasMentions(){return"groupchat"===this.model.get("type")&&"them"===this.model.get("sender")&&this.model_with_messages.isUserMentioned(this.model)}getOccupantAffiliation(){var e;return null===(e=this.model.occupant)||void 0===e?void 0:e.get("affiliation")}getOccupantRole(){var e;return null===(e=this.model.occupant)||void 0===e?void 0:e.get("role")}getExtraMessageClasses(){const e=this.model.isMeCommand()||this.model.isRetracted(),t=[this.model.isFollowup()?"chat-msg--followup":null,this.model.get("is_delayed")?"delayed":null,e?"chat-msg--action":null,this.model.isRetracted()?"chat-msg--retracted":null,this.model.get("type"),this.shouldShowAvatar()?"chat-msg--with-avatar":null].map((e=>e));var s,r;"groupchat"===this.model.get("type")&&(t.push(null!==(s=this.getOccupantRole())&&void 0!==s?s:""),t.push(null!==(r=this.getOccupantAffiliation())&&void 0!==r?r:""),"them"===this.model.get("sender")&&this.hasMentions()&&t.push("mentioned"));return this.model.get("correcting")&&t.push("correcting"),t.filter((e=>e)).join(" ")}getRetractionText(){if(["groupchat","mep"].includes(this.model.get("type"))&&this.model.get("moderated_by")){const e=this.model.get("moderated_by");if(!this.model.mod){const{occupants:t}=this.model_with_messages;this.model.mod=t.findOccupant({jid:e})||t.findOccupant({nick:v.getResourceFromJid(e)})}const t=this.model.mod?this.model.mod.getDisplayName():(0,h.__)("A moderator");return(0,h.__)("%1$s has removed a message",t)}return"me"===this.model.get("sender")?(0,h.__)("You have removed a message"):(0,h.__)("%1$s has removed a message",this.model.getDisplayName())}showUserModal(e){"me"===this.model.get("sender")?r.api.modal.show("converse-profile-modal",{model:r._converse.state.xmppstatus},e):"groupchat"===this.model.get("type")?(e.preventDefault(),r.api.modal.show("converse-muc-occupant-modal",{model:this.model.getOccupant(),message:this.model},e)):(e.preventDefault(),r.api.modal.show("converse-user-details-modal",{model:this.model_with_messages},e))}showMessageVersionsModal(e){e.preventDefault(),r.api.modal.show("converse-message-versions-modal",{model:this.model},e)}toggleSpoilerMessage(e){null==e||e.preventDefault(),this.model.save({is_spoiler_visible:!this.model.get("is_spoiler_visible")})}constructor(){super(),this.model_with_messages=null,this.model=null,this.observable="once"}}r.api.elements.define("converse-chat-message",y)},"./src/shared/chat/styles/chat-content.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/chat/styles/chat-content.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/chat/styles/emoji.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/chat/styles/emoji.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/chat/styles/message-actions.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/chat/styles/message-actions.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/chat/styles/message-body.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/chat/styles/message-body.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/chat/styles/retraction.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/chat/styles/retraction.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/chat/styles/toolbar.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/chat/styles/toolbar.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/chat/styles/unfurl.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/chat/styles/unfurl.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/chat/templates/emoji-picker.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{tplAllEmojis:()=>c,tplEmojiPicker:()=>u,tplSearchResults:()=>d});var r=s("./src/i18n/index.js"),n=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js");const i=n.converse.env.utils,a=e=>{const t=n.api.settings.get("emoji_categories");return o.html`<ul>${Object.keys(t).map((s=>t[s]?(e=>o.html`<li data-category="${e.category}" class="emoji-category ${e.category} ${e.current_category===e.category?"picked":""}" title="${(0,r.__)(n.api.settings.get("emoji_category_labels")[e.category])}"><a class="btn pick-category" @click="${e.onCategoryPicked}" href="#emoji-picker-${e.category}" data-category="${e.category}">${e.emoji}</a></li>`)(Object.assign({category:s,emoji:e.sn2Emoji(t[s])},e)):""))}</ul>`},l=e=>o.html`<li class="emoji insert-emoji ${e.shouldBeHidden(e.emoji.sn)?"hidden":""}" data-emoji="${e.emoji.sn}" title="${e.emoji.sn}"><a href="#" @click="${e.insertEmoji}" data-emoji="${e.emoji.sn}">${i.shortnamesToEmojis(e.emoji.sn)}</a></li>`;function d(e){const t=(0,r.__)("Search results");return o.html`<span ?hidden="${!e.query}" class="emoji-lists__container emojis-lists__container--search"><a id="emoji-picker-search-results" class="emoji-category__heading">${t}</a><ul class="emoji-picker">${e.search_results.map((t=>l(Object.assign({emoji:t},e))))}</ul></span>`}function c(e){const t=n.api.settings.get("emoji_categories");return o.html`<span ?hidden="${e.query}" class="emoji-lists__container emoji-lists__container--browse">${Object.keys(t).map((s=>t[s]?function(e){return o.html`<a id="emoji-picker-${e.category}" class="emoji-category__heading" data-category="${e.category}">${(0,r.__)(n.api.settings.get("emoji_category_labels")[e.category])}</a><ul class="emoji-picker" data-category="${e.category}">${Object.values(n.converse.emojis.json[e.category]).map((t=>l(Object.assign({emoji:t},e))))}</ul>`}(Object.assign({category:s},e)):""))}</span>`}function u(e,t){const s=(0,r.__)("Search"),n={tone1:":raised_hand_tone1:",tone2:":raised_hand_tone2:",tone3:":raised_hand_tone3:",tone4:":raised_hand_tone4:",tone5:":raised_hand_tone5:"};return o.html`<div class="emoji-picker__header"><input class="form-control emoji-search" name="emoji-search" placeholder="${s}" .value="${t.query||""}" @keydown="${t.onSearchInputKeyDown}" @blur="${t.onSearchInputBlurred}" @focus="${t.onSearchInputFocus}"> ${t.query?"":a(t)}</div>${t.render_emojis?o.html`<converse-emoji-picker-content .model="${e.state}" .search_results="${t.search_results}" current_skintone="${t.current_skintone}" query="${t.query}"></converse-emoji-picker-content>`:""}<div class="emoji-skintone-picker">Skin tone:<ul>${Object.keys(n).map((e=>function(e,t,s){return o.html`<li data-skintone="${s}" class="emoji-skintone ${e.current_skintone===t?"picked":""}"><a class="pick-skintone" href="#" data-skintone="${t}" @click="${e.onSkintonePicked}">${i.shortnamesToEmojis(s)}</a></li>`}(t,e,n[e])))}</ul></div>`}},"./src/shared/chat/templates/file-progress.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});s("./src/shared/avatar/avatar.js");var r=s("./src/i18n/index.js"),n=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js");const{filesize:i}=n.converse.env,a=e=>{var t;const s=(0,r.__)("Uploading file:"),n=e.model.file.name,a=i(e.model.file.size),l=e.model.occupant||e.model.contact;return o.html`<div class="message chat-msg">${e.shouldShowAvatar()?o.html`<a class="show-msg-author-modal" @click="${e.showUserModal}"><converse-avatar .model="${l||e.model}" class="avatar align-self-center" name="${e.model.getDisplayName()}" nonce="${null===(t=e.model.vcard)||void 0===t?void 0:t.get("vcard_updated")}" height="40" width="40"></converse-avatar></a>`:""}<div class="chat-msg__content"><span class="chat-msg__text">${s} <strong>${n}</strong>, ${a}</span><progress value="${e.model.get("progress")}"></div></div>`}},"./src/shared/chat/templates/info-message.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/i18n/index.js"),n=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js");const{dayjs:i}=n.converse.env,a=e=>{const t=i(e.model.get("time")).toISOString(),s=(0,r.__)("Retry");return o.html`<div class="message chat-info chat-${e.model.get("type")}" data-isodate="${t}" data-type="${e.data_name}" data-value="${e.data_value}"><div class="chat-info__message"><converse-texture .mentions="${e.model.get("references")}" render_styling text="${e.model.getMessageText()}"></converse-texture></div>${e.model.get("reason")?o.html`<q class="reason">${e.model.get("reason")}</q>`:""} ${e.model.get("error_text")?o.html`<q class="reason">${e.model.get("error_text")}</q>`:""} ${e.model.get("retry_event_id")?o.html`<a class="retry" @click="${e.onRetryClicked}">${s}</a>`:""}</div>`}},"./src/shared/chat/templates/message-limit.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/i18n/index.js"),n=s("./node_modules/lit/index.js");const o=e=>{const t=(0,r.__)("Message characters remaining");return n.html`<span class="message-limit ${e<1?"error":""}" title="${t}">${e}</span>`}},"./src/shared/chat/templates/message-text.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/headless/index.js"),n=s("./src/i18n/index.js"),o=s("./node_modules/lit/index.js");const i=e=>{const t=(0,n.__)("Show more"),s="groupchat"===e.model.get("type"),i=(0,n.__)("Show less"),a=e.model.get("error_text")||e.model.get("error"),l=`${(0,n.__)("Message delivery failed.")}\n${a}`,d=o.html`<div class="chat-msg__spoiler-hint"><span class="spoiler-hint">${e.model.get("spoiler_hint")}</span> <a class="badge badge-info spoiler-toggle" href="#" @click="${e.toggleSpoilerMessage}"><converse-icon size="1em" color="var(--background-color)" class="fa ${e.model.get("is_spoiler_visible")?"fa-eye-slash":"fa-eye"}"></converse-icon>${e.model.get("is_spoiler_visible")?i:t}</a></div>`,c=e.model.get("is_spoiler")?"spoiler "+(e.model.get("is_spoiler_visible")?"":"hidden"):"",u=e.model.getMessageText(),h=e.model.get("oob_url")&&u!==e.model.get("oob_url"),m=r.api.settings.get("render_media");return o.html`${e.model.get("is_spoiler")?d:""} ${e.model.get("subject")?o.html`<div class="chat-msg__subject">${e.model.get("subject")}</div>`:""} <span class="chat-msg__body--wrapper ${a?"error":""}"><converse-chat-message-body class="chat-msg__text ${e.model.get("is_only_emojis")?"chat-msg__text--larger":""} ${c}" .model="${e.model}" hide_url_previews="${e.model.get("hide_url_previews")}" ?is_me_message="${e.model.isMeCommand()}" text="${u}"></converse-chat-message-body>${!e.model.get("received")||e.model.isMeCommand()||s?"":o.html`<converse-icon size="0.75em" color="var(--chat-color)" class="fa fa-check chat-msg__receipt"></converse-icon>`} ${e.model.get("edited")?function(e){const t=(0,n.__)("This message has been edited");return o.html`<converse-icon title="${t}" class="fa fa-edit chat-msg__edit-modal" @click="${e.showMessageVersionsModal}" size="1em"></converse-icon>`}(e):""} </span>${h?o.html`<div class="chat-msg__media"><converse-texture text="${e.model.get("oob_url")}" .onImgClick="${t=>e.onImgClick(t)}" ?embed_audio="${m}" ?embed_videos="${m}" ?show_images="${m}"></div>`:""} ${a?o.html`<div class="chat-msg__error">${l}</div>`:""}`}},"./src/shared/chat/templates/message.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/utils/url.js"),i=s("./src/utils/color.js"),a=s("./src/shared/chat/utils.js"),l=s("./src/i18n/index.js");s("./src/shared/avatar/avatar.js"),s("./src/shared/chat/unfurl.js");const{dayjs:d}=n.converse.env,c=e=>{var t,s;const c=(0,l.__)("New messages"),u=e.model.get("edited"),h=e.model_with_messages.get("first_unread_id")===e.model.get("id"),m=e.model.isFollowup(),f=e.model.isMeCommand(),p=e.model.isRetracted(),g=e.model.get("msgid"),v=e.model.get("sender"),_=e.model.get("time"),y=e.model.occupant||e.model.contact,b=(0,i.getAuthorStyle)(y),j=n.api.settings.get("time_format"),w=d(u||_).format(j),S=(0,a.getHats)(e.model),x=e.model.getDisplayName(),E=f||p,A=!E&&!m,O=e.shouldShowAvatar()&&A,C=(null==y?void 0:y.vcard)?y:e.model;return r.html`${h?r.html`<div class="message separator"><hr class="separator"><span class="separator-text">${c}</span></div>`:""}<div class="message chat-msg ${e.getExtraMessageClasses()}" data-isodate="${_}" data-msgid="${g}" data-from="${e.model.get("from")}" data-encrypted="${e.model.get("is_encrypted")}"><a id="${g}"></a> ${O?r.html`<a class="show-msg-author-modal" @click="${e.showUserModal}"><converse-avatar .model="${C}" class="avatar align-self-center" name="${e.model.getDisplayName()}" nonce="${null===(t=C.vcard)||void 0===t?void 0:t.get("vcard_updated")}" height="40" width="40"></converse-avatar></a>`:""}<div class="chat-msg__content chat-msg__content--${v} ${E?"chat-msg__content--action":""}">${A?r.html`<span class="chat-msg__heading"><span class="chat-msg__author"><a class="show-msg-author-modal" @click="${e.showUserModal}" style="${b}">${x}</a> </span>${S.map((e=>r.html`<span class="badge badge-secondary">${e.title}</span>`))} <time timestamp="${u||_}" class="chat-msg__time">${w}</time> ${e.model.get("is_encrypted")?r.html`<converse-icon class="fa fa-lock" size="1.1em"></converse-icon>`:""}</span>`:""}<div class="chat-msg__body chat-msg__body--${e.model.get("message_type")} ${e.model.get("received")?"chat-msg__body--received":""} ${e.model.get("is_delayed")?"chat-msg__body--delayed":""}"><div class="chat-msg__message">${E?r.html`<time timestamp="${u||_}" class="chat-msg__time">${w}</time> ${f?r.html`<span class="chat-msg__author" style="${b}">${f?"**":""}${x}</span> `:""}`:""} ${p?e.renderRetraction():e.renderMessageText()}</div><converse-message-actions .model="${e.model}" ?is_retracted="${p}"></converse-message-actions></div>${null===(s=e.model.get("ogp_metadata"))||void 0===s?void 0:s.map((t=>{var s;return!0===e.model.get("hide_url_previews")?"":r.html`<converse-message-unfurl @animationend="${e.onUnfurlAnimationEnd}" class="${e.model.get("url_preview_transition")}" jid="${null===(s=e.model_with_messages)||void 0===s?void 0:s.get("jid")}" description="${t["og:description"]||""}" title="${t["og:title"]||""}" image="${t["og:image"]&&(0,o.shouldRenderMediaFromURL)(t["og:image"],"image")?t["og:image"]:r.nothing}" site_name="${t["og:site_name"]||""}" url="${t["og:url"]||""}"></converse-message-unfurl>`}))}</div></div>`}},"./src/shared/chat/templates/new-day.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=e=>r.html`<div class="message date-separator" data-isodate="${e.time}"><hr class="separator"><time class="separator-text" datetime="${e.time}"><span>${e.datestring}</span></time></div>`},"./src/shared/chat/templates/retraction.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");s("./src/shared/chat/styles/retraction.scss");const n=e=>{const t=e.model.isRetracted()?e.getRetractionText():null;return r.html`<span class="retraction"><span>${t}</span> ${e.model.get("moderation_reason")?r.html`<q class="chat-msg--retracted__reason">${e.model.get("moderation_reason")}</q>`:""}</span>`}},"./src/shared/chat/templates/toolbar.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/until.js"),o=s("./src/i18n/index.js"),i=s("./src/headless/index.js");const a=e=>{const t=i.api.settings.get("message_limit");return r.html`<span class="btn-group toolbar-buttons">${(0,n.until)(e.getButtons(),"")}</span> <span>${t?r.html`<converse-message-limit-indicator .model="${e.model}">`:""} ${e.show_send_button?function(){const e=(0,o.__)("Send the message");return r.html`<button type="submit" class="btn send-button" data-action="sendMessage" title="${e}"><converse-icon color="var(--background-color)" class="fa fa-paper-plane" size="1em"></converse-icon></button>`}():""}</span>`}},"./src/shared/chat/templates/unfurl.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/utils/url.js");s("./src/shared/texture/components/image.js");const i=e=>{const t=e.description||"",s=e.image||"",i=e.title||"",a=e.url||"",l=function(e){return e&&(0,o.isDomainAllowed)(e,"allowed_image_domains")&&n.u.isValidURL(e)}(s),d=i||t||a;return l||d?r.html`<div class="card card--unfurl">${l?function(e){const t=e.image||"",s=e.url||"";return r.html`<converse-image class="card-img-top hor_centered" href="${s}" src="${t}" .onImgLoad="${()=>e.onImageLoad()}"></converse-image>`}(e):""} ${d?r.html`<div class="card-body">${i?function(e,t){const s=e.image||"",o=e.url||"",i=e.title||"";return o&&n.u.isValidURL(o)&&!n.u.isGIFURL(s)?r.html`<a href="${o}" target="_blank" rel="noopener">${t(i)}</a>`:t(null!=i?i:"")}(e,(e=>r.html`<h5 class="card-title">${e}</h5>`)):""} ${t?r.html`<p class="card-text"><converse-texture text="${t}"></converse-texture></p>`:""} ${a&&n.u.isValidURL(a)?r.html`<p class="card-text"><a href="${a}" target="_blank" rel="noopener">${new URL(a).hostname}</a></p>`:""}</div>`:""}</div>`:""}},"./src/shared/chat/toolbar.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{ChatToolbar:()=>c});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/until.js"),o=s("./src/headless/index.js"),i=(s("./src/shared/chat/emoji-picker.js"),s("./src/shared/chat/message-limit.js"),s("./src/shared/chat/templates/toolbar.js")),a=s("./src/shared/components/element.js"),l=s("./src/i18n/index.js");s("./src/shared/chat/styles/toolbar.scss");const d=o.converse.env.Strophe;class c extends a.CustomElement{static get properties(){return{hidden_occupants:{type:Boolean},is_groupchat:{type:Boolean},message_limit:{type:Number},model:{type:Object},show_call_button:{type:Boolean},show_emoji_button:{type:Boolean},show_send_button:{type:Boolean},show_spoiler_button:{type:Boolean}}}connectedCallback(){super.connectedCallback(),this.listenTo(this.model,"change:composing_spoiler",(()=>this.requestUpdate()))}render(){return(0,i.default)(this)}firstUpdated(){o.api.trigger("renderToolbar",this)}getButtons(){const e=[];if(this.show_emoji_button&&e.push(r.html`<converse-emoji-dropdown .model="${this.model}"></converse-emoji-dropdown>`),this.show_call_button){const t=this.is_groupchat?"--muc-color":"--chat-color",s=(0,l.__)("Start a call");e.push(r.html`<button type="button" class="btn toggle-call" @click="${this.toggleCall}" title="${s}"><converse-icon color="var(${t})" class="fa fa-phone" size="1em"></converse-icon></button>`)}this.show_spoiler_button&&e.push(this.getSpoilerButton());const t=o._converse.session.get("domain"),s=o.api.disco.supports(d.NS.HTTPUPLOAD,t);return e.push(r.html`${(0,n.until)(s.then((e=>this.getHTTPUploadButton(!!e))),"")}`),o._converse.api.hook("getToolbarButtons",this,e)}getHTTPUploadButton(e){if(e){const e=(0,l.__)("Choose a file to send");return r.html`<button type="button" class="btn" title="${e}" @click="${this.toggleFileUpload}"><converse-icon class="fa fa-paperclip" size="1em"></converse-icon></button> <input type="file" @change="${this.onFileSelection}" class="fileupload" multiple="" style="display:none">`}return""}getSpoilerButton(){var e;const t=this.model;if(!this.is_groupchat&&!(null===(e=t.presence)||void 0===e?void 0:e.resources.length))return;let s;s=t.get("composing_spoiler")?(0,l.__)("Click to write as a normal (non-spoiler) message"):(0,l.__)("Click to write your message as a spoiler");const i=this.is_groupchat?"--muc-color":"--chat-color",a=r.html`<button type="button" class="btn toggle-compose-spoiler" title="${s}" @click="${this.toggleComposeSpoilerMessage}"><converse-icon color="var(${i})" class="fa ${t.get("composing_spoiler")?"fa-eye-slash":"fa-eye"}" size="1em"></converse-icon></button>`;if(this.is_groupchat)return a;{const e=t.get("jid"),s=Promise.all(t.presence.resources.map((t=>o.api.disco.supports(d.NS.SPOILER,`${e}/${t.get("name")}`)))).then((e=>e.reduce(((e,t)=>e&&t),!0)));return r.html`${(0,n.until)(s.then((()=>a)),"")}`}}toggleFileUpload(e){var t,s;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),null==e||null===(s=e.stopPropagation)||void 0===s||s.call(e),this.querySelector(".fileupload").click()}onFileSelection(e){this.model.sendFiles(e.target.files)}toggleComposeSpoilerMessage(e){var t,s;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),null==e||null===(s=e.stopPropagation)||void 0===s||s.call(e),this.model.set("composing_spoiler",!this.model.get("composing_spoiler"))}toggleCall(e){var t,s;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),null==e||null===(s=e.stopPropagation)||void 0===s||s.call(e),o.api.trigger("callButtonClicked",{connection:o.api.connection.get(),model:this.model})}constructor(){super(),this.model=null,this.is_groupchat=null,this.hidden_occupants=!1,this.show_send_button=!1,this.show_spoiler_button=!1,this.show_call_button=!1,this.show_emoji_button=!1}}o.api.elements.define("converse-chat-toolbar",c)},"./src/shared/chat/unfurl.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/shared/chat/templates/unfurl.js");s("./src/shared/chat/styles/unfurl.scss");class i extends n.CustomElement{static get properties(){return{description:{type:String},image:{type:String},jid:{type:String},title:{type:String},url:{type:String},site_name:{type:String}}}initialize(){const e=r.api.settings.get();this.listenTo(e,"change:allowed_image_domains",(()=>this.requestUpdate())),this.listenTo(e,"change:render_media",(()=>this.requestUpdate()))}render(){return(0,o.default)(this)}onImageLoad(){this.dispatchEvent(new CustomEvent("imageLoaded",{detail:this,bubbles:!0}))}constructor(){super(),this.jid=null,this.url=null,this.title=null,this.image=null,this.description=null,this.site_name=null}}r.api.elements.define("converse-message-unfurl",i)},"./src/shared/chat/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{addEmojisMarkup:()=>O,getChatStyle:()=>g,getDayIndicator:()=>S,getDropdownButtons:()=>j,getEmojiMarkup:()=>A,getHats:()=>x,getHeadingDropdownItem:()=>_,getHeadingStandaloneButton:()=>y,getStandaloneButtons:()=>b,getTonedEmojis:()=>E,getUnreadMsgsDisplay:()=>v,isMobileViewport:()=>p,onScrolledDown:()=>w,shortnamesToEmojis:()=>C});var r=s("./src/headless/index.js"),n=s("./node_modules/lit/index.js"),o=s("./node_modules/lit/directives/until.js"),i=s("./src/shared/constants.js"),a=s("./src/shared/chat/templates/new-day.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))}}const{dayjs:c,u}=r.converse.env,{convertASCII2Emoji:h,getShortnameReferences:m,getCodePointReferences:f}=u;function p(){return window.innerWidth<=i.MOBILE_CUTOFF}function g(e){if(p())return"";const{height:t,width:s}=e.toJSON();return"overlayed"===r.api.settings.get("view_mode")?`${s?`width: ${s}px;`:""}${t?`height: ${t}px;`:""}`:""}function v(e){const t=e.get("num_unread")||0;return t<100?t:"99+"}function _(e){return d((function*(){const t=yield e;return t?n.html`<a href="#" role="button" class="dropdown-item ${t.a_class}" @click="${t.handler}" title="${t.i18n_title}"><converse-icon size="1em" class="fa ${t.icon_class}"></converse-icon>${t.i18n_text}</a>`:""}))()}function y(e){return d((function*(){const t=yield e;return n.html`<button type="button" class="btn chatbox-btn ${t.a_class}" @click="${t.handler}" title="${t.i18n_title}"><converse-icon size="1em" class="fa ${t.icon_class}"></converse-icon></button>`}))()}function b(e){return d((function*(){return(yield e).filter((e=>e.standalone)).map((e=>y(e))).reverse().map((e=>(0,o.until)(e,"")))}))()}function j(e){return d((function*(){const t=(yield e).filter((e=>!e.standalone)).map((e=>_(e)));return t.length?n.html`<converse-dropdown class="chatbox-btn btn-group dropstart" .items="${t}"></converse-dropdown>`:""}))()}function w(e){if(!e.isHidden()&&r.api.settings.get("allow_url_history_change")){const t=window.location.hash;t&&e.messages.get(t.slice(1))&&history.pushState(null,"",window.location.pathname)}}function S(e){var t;const s=null===(t=e.collection)||void 0===t?void 0:t.models;if(!s)return;const r=s.indexOf(e),n=s[r-1];if(!n||c(e.get("time")).isAfter(c(n.get("time")),"day")){const t=c(e.get("time")).startOf("day");return(0,a.default)({type:"date",time:t.toISOString(),datestring:t.format("dddd MMM Do YYYY")})}}function x(e){if("groupchat"===e.get("type")){var t;const s=r.api.settings.get("muc_hats").filter((e=>e)).map((e=>e.toLowerCase()));let n=[];s.includes("vcard_roles")&&(n=e.vcard?e.vcard.get("role"):null,n=n?n.split(",").filter((e=>e)).map((e=>({title:e}))):[]);const o=[...e.occupant?[e.occupant.get("role")]:[],...e.occupant?[e.occupant.get("affiliation")]:[]].filter((e=>e)).filter((e=>s.includes(e.toLowerCase()))).map((e=>({title:e})));return[...s.includes("xep317")&&(null===(t=e.occupant)||void 0===t?void 0:t.get("hats"))||[],...n,...o]}return[]}function E(){return r.converse.emojis.toned||(r.converse.emojis.toned=u.unique(Object.values(r.converse.emojis.json.people).filter((e=>e.sn.includes("_tone"))).map((e=>e.sn.replace(/_tone[1-5]/,""))))),r.converse.emojis.toned}function A(e,t={unicode_only:!1,add_title_wrapper:!1}){const s=e.emoji,o=e.shortname;if(s){if(t.unicode_only)return s;if(r.api.settings.get("use_system_emojis"))return t.add_title_wrapper&&o?n.html`<span title="${o}">${s}</span>`:s;{const t=r.api.settings.get("emoji_image_path");return n.html`<img class="emoji" loading="lazy" draggable="false" title="${o}" alt="${s}" src="${t}/72x72/${e.cp}.png">`}}if(t.unicode_only)return o;{const{url:e}=r.converse.emojis.by_sn[o];return n.html`<img class="emoji" loading="lazy" draggable="false" title="${o}" alt="${o}" src="${e.startsWith(".")?`${r.api.settings.get("assets_path")}/${e}`:e}">`}}function O(e,t){let s=[e];return[...m(e),...f(e)].sort(((e,t)=>t.begin-e.begin)).forEach((e=>{const r=s.shift(),n=A(e,t);s="string"==typeof n?[r.slice(0,e.begin)+n+r.slice(e.end),...s]:[r.slice(0,e.begin),n,r.slice(e.end),...s]})),s}function C(e,t={unicode_only:!1,add_title_wrapper:!1}){return O(e=h(e),t)}Object.assign(u,{shortnamesToEmojis:C})},"./src/shared/components/brand-heading.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{ConverseBrandHeading:()=>i});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/shared/components/element.js");s("./src/shared/components/brand-logo.js");class i extends o.CustomElement{render(){return r.html`<converse-brand-logo></converse-brand-logo>`}}n.api.elements.define("converse-brand-heading",i)},"./src/shared/components/brand-logo.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{ConverseBrandLogo:()=>i});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./node_modules/lit/index.js");s("./src/shared/components/logo.js");class i extends n.CustomElement{static get properties(){return{hide_byline:{type:Boolean}}}render(){const e="fullscreen"===r.api.settings.get("view_mode");return o.html`<a class="brand-heading" href="https://conversejs.org" target="_blank" rel="noopener"><span class="brand-name-wrapper ${e?"brand-name-wrapper--fullscreen":""}"><converse-logo class="converse-svg-logo"></converse-logo><span class="brand-name"><span class="brand-name__text">converse<span class="subdued">.js</span></span> ${e&&!this.hide_byline?o.html`<p class="byline">messaging freedom</p>`:""}</span></span></a>`}constructor(){super(),this.hide_byline=!1}}r.api.elements.define("converse-brand-logo",i)},"./src/shared/components/dropdown.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/until.js"),o=s("./src/headless/index.js"),i=s("./src/shared/dom-navigator/index.js"),a=s("./src/shared/components/dropdownbase.js"),l=(s("./src/shared/components/icons.js"),s("./src/i18n/index.js"));s("./src/shared/components/styles/dropdown.scss");function d(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}const{KEYCODES:c}=o.constants;var u=new WeakSet;class h extends a.default{static get properties(){return{icon_classes:{type:String},items:{type:Array}}}render(){return r.html`<button class="btn btn--transparent btn--standalone dropdown-toggle dropdown-toggle--no-caret" id="${this.id}" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="${(0,l.__)("Menu")}"><converse-icon aria-hidden="true" size="1em" class="${this.icon_classes}"></converse-icon></button><ul class="dropdown-menu" aria-labelledby="${this.id}">${this.items.map((e=>r.html`<li>${(0,n.until)(e,"")}</li>`))}</ul>`}firstUpdated(){super.firstUpdated(),this.initArrowNavigation()}connectedCallback(){super.connectedCallback(),this.registerEvents()}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown),this.disableArrowNavigation(),super.disconnectedCallback()}registerEvents(){this.onKeyDown=e=>function(e,t,s){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return s}(this,u,m).call(this,e),this.addEventListener("hide.bs.dropdown",(()=>this.onDropdownHide())),this.addEventListener("keydown",this.onKeyDown)}onDropdownHide(){this.disableArrowNavigation()}initArrowNavigation(){if(!this.navigator){const e={selector:".dropdown-menu li",onSelected:e=>e.focus()};this.navigator=new i.DOMNavigator(this.menu,e)}}disableArrowNavigation(){var e;null===(e=this.navigator)||void 0===e||e.disable()}enableArrowNavigation(e){null==e||e.preventDefault(),null==e||e.stopPropagation(),this.disableArrowNavigation(),this.navigator.enable(),this.navigator.select(this.menu.firstElementChild)}onEnterPressed(e){var t,s;e.preventDefault(),e.stopPropagation(),null===(s=this.navigator.selected)||void 0===s||null===(t=s.querySelector("a"))||void 0===t||t.click(),this.dropdown.hide()}constructor(){super(),d(this,u),this.icon_classes="fa fa-bars",this.items=[],this.id=o.u.getUniqueId()}}function m(e){this.navigator&&o.u.isVisible(this)&&(e.key===c.ENTER?this.onEnterPressed(e):e.key!==c.DOWN_ARROW||this.navigator.enabled?e.key===c.ESCAPE&&this.dropdown.hide():this.enableArrowNavigation(e))}o.api.elements.define("converse-dropdown",h)},"./src/shared/components/dropdownbase.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/bootstrap/js/src/dropdown.js"),n=s("./node_modules/bootstrap/js/src/dom/event-handler.js"),o=s("./src/shared/components/element.js");class i extends o.CustomElement{firstUpdated(e){super.firstUpdated(e),this.menu=this.querySelector(".dropdown-menu"),this.button=this.querySelector("button"),this.dropdown=new r.default(this.button)}}n.default.off(document,"keydown.bs.dropdown.data-api")},"./src/shared/components/element.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{CustomElement:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/@converse/skeletor/dist/skeletor.js");class o extends((0,n.EventEmitter)(r.LitElement)){createRenderRoot(){return this}initialize(){return null}connectedCallback(){return super.connectedCallback(),this.initialize()}disconnectedCallback(){super.disconnectedCallback(),this.stopListening()}constructor(){super()}}},"./src/shared/components/font-awesome.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{FontAwesome:()=>i});var r=s("./src/shared/components/templates/icons.js"),n=s("./src/shared/components/element.js"),o=s("./src/headless/index.js");class i extends n.CustomElement{render(){return(0,r.default)()}}o.api.elements.define("converse-fontawesome",i)},"./src/shared/components/footer.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{ConverseFooter:()=>a});var r=s("./src/headless/index.js"),n=s("./node_modules/lit/index.js"),o=s("./src/shared/components/element.js"),i=s("./src/i18n/index.js");class a extends o.CustomElement{render(){const e="fullscreen"===r.api.settings.get("view_mode"),t=r.api.settings.get("theme"),s=["dracula","cyberpunk"].includes(t),o=(0,i.__)("A big thank you to our sponsors 🙏");return n.html`${e?n.html`<footer class="footer mt-auto py-3 pb-3"><div class="container"><div class="row"><div class="col-12 text-center"><p class="brand-subtitle mb-2 subdued">Version: ${r._converse.VERSION_NAME}</p><p class="brand-subtitle mb-4"><a target="_blank" rel="nofollow" href="https://github.com/conversejs/converse.js">Open Source</a> XMPP chat client brought to you by <a target="_blank" rel="nofollow" href="https://opkode.com/about">Opkode</a>.</p><div class="sponsors text-center"><p class="byline mb-1">${o}</p><div class="fs-6 d-flex flex-wrap justify-content-center align-items-center gap-4 mb-2"><div><a href="https://bairesdev.com/sponsoring-open-source-projects/?utm_source=conversejs" target="_blank" rel="noopener"><img style="width:13em" src="https://conversejs.org/media/logos/bairesdev-primary.png" alt="BairesDev"></a></div><div><a href="https://blokt.com?utm_source=conversejs" target="_blank" rel="noopener"><img style="width:12em" src="${s?"https://conversejs.org/media/logos/blokt-invert.png":"https://conversejs.org/media/logos/blokt.png"}" alt="Blokt Crypto & Privacy"></a></div><div><a href="https://www.keycdn.com?utm_source=conversejs" target="_blank" rel="noopener"><img style="height:3em" src="https://conversejs.org/logo/keycdn.png" alt="KeyCDN"></a></div></div></div><p class="brand-subtitle mb-3">If you'd like to sponsor this project, please visit: <a href="https://github.com/sponsors/jcbrand" target="_blank" rel="noopener">Github</a>, <a href="https://www.patreon.com/jcbrand" target="_blank" rel="noopener">Patreon</a>, <a href="https://liberapay.com/jcbrand" target="_blank" rel="noopener">Liberapay</a> or <a href="https://opkode.com/contact.html" target="_blank" rel="noopener">contact us</a>.</p></div></div></div></footer>`:""}`}}r.api.elements.define("converse-footer",a)},"./src/shared/components/icons.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/shared/components/element.js");s("./src/shared/components/styles/icon.scss");class i extends o.CustomElement{static get properties(){return{color:{type:String},class_name:{attribute:"class"},css:{type:String},size:{type:String}}}getSource(){return`#icon-${this.class_name.trim().split(" ")[1].replace("fa-","")}`}getStyles(){var e;const t=null===(e=this.color.match(/var\((--.*)\)/))||void 0===e?void 0:e[1],s=t?getComputedStyle(this).getPropertyValue(t):this.color;return`\n            ${this.size?`width: ${this.size};`:""}\n            ${this.size?`height: ${this.size};`:""}\n            ${s?`fill: ${s};`:""}\n            ${this.css}\n        `}render(){return r.html`<svg .style="${this.getStyles()}"><use href="${this.getSource()}"></use></svg>`}constructor(){super(),this.class_name="",this.css="",this.size="",this.color=""}}n.api.elements.define("converse-icon",i)},"./src/shared/components/image-picker.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/shared/components/element.js"),i=s("./src/i18n/index.js");s("./src/shared/components/styles/image-picker.scss");const a=(0,i.__)("Click to set a new picture"),l=(0,i.__)("Clear picture");class d extends o.CustomElement{static get properties(){return{height:{type:Number},model:{type:Object},width:{type:Number}}}render(){var e,t,s,n;return r.html`<div class="image-picker"><a class="change-avatar" @click="${this.openFileSelection}" title="${a}"><converse-avatar .model="${this.model}" .pickerdata="${this.data}" class="avatar" name="${this.model.getDisplayName()}" height="${this.height}" nonce="${this.nonce||(null===(e=this.model.vcard)||void 0===e?void 0:e.get("vcard_updated"))}" width="${this.width}"></converse-avatar></a>${(null===(t=this.data)||void 0===t?void 0:t.data_uri)||(null===(n=this.model)||void 0===n||null===(s=n.vcard)||void 0===s?void 0:s.get("image"))?r.html`<button class="clear-image" @click="${this.clearImage}" title="${l}"><converse-icon class="fa fa-trash-alt" size="1.5em"></converse-icon></button>`:""} <input @change="${this.updateFilePreview}" class="hidden" name="avatar_image" type="file"></div>`}clearImage(e){e.preventDefault();this.querySelector('input[name="avatar_image').value="",this.model.vcard.set({image:null,image_type:null}),this.data={data_uri:null,image_type:null},this.nonce=(new Date).toISOString(),this.requestUpdate()}openFileSelection(e){e.preventDefault(),this.querySelector('input[type="file"]').click()}updateFilePreview(e){const t=e.target.files[0],s=new FileReader;s.onloadend=()=>{this.data={data_uri:s.result,image_type:t.type},this.nonce=(new Date).toISOString(),this.requestUpdate()},s.readAsDataURL(t)}constructor(){super(),this.model=null,this.width=null,this.height=null,this.nonce=null}}n.api.elements.define("converse-image-picker",d)},"./src/shared/components/index.js":(e,t,s)=>{"use strict";s.r(t);s("./src/shared/components/brand-heading.js"),s("./src/shared/components/brand-logo.js"),s("./src/shared/components/dropdown.js"),s("./src/shared/components/font-awesome.js"),s("./src/shared/components/icons.js"),s("./src/shared/components/image-picker.js"),s("./src/shared/components/list-filter.js"),s("./src/shared/components/message-versions.js"),s("./src/shared/components/observable.js"),s("./src/shared/components/spinner.js"),s("./src/shared/components/split-resize.js")},"./src/shared/components/list-filter.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./node_modules/lodash-es/debounce.js"),n=s("./src/shared/components/element.js"),o=s("./src/headless/index.js");s("./src/shared/components/styles/list-filter.scss");class i extends n.CustomElement{static get properties(){return{items:{type:Array},model:{type:Object},promise:{type:Promise},template:{type:Object}}}initialize(){this.liveFilter=(0,r.default)((e=>this.model.save({text:e.target.value})),250),this.listenTo(this.items,"add",(()=>this.requestUpdate())),this.listenTo(this.items,"destroy",(()=>this.requestUpdate())),this.listenTo(this.items,"remove",(()=>this.requestUpdate())),this.listenTo(this.model,"change",(()=>{this.dispatchUpdateEvent(),this.requestUpdate()})),this.promise.then((()=>this.requestUpdate())),this.requestUpdate()}render(){return this.shouldBeVisible()?this.template(this):""}dispatchUpdateEvent(){this.dispatchEvent(new CustomEvent("update",{detail:this.model.changed}))}changeChatStateFilter(e){e&&e.preventDefault();const t=this.querySelector(".state-type").value;this.model.save({state:t})}changeTypeFilter(e){var t;e&&e.preventDefault();const s=(null===(t=e.target.closest("converse-icon"))||void 0===t?void 0:t.dataset.type)||"items";if("state"===s){const e=this.querySelector(".state-type").value;this.model.save({type:s,state:e})}else{const e=this.querySelector(".items-filter").value;this.model.save({type:s,text:e})}}submitFilter(e){null==e||e.preventDefault(),this.liveFilter()}isActive(){return"state"===this.model.get("type")||this.model.get("text")}shouldBeVisible(){var e;return(null===(e=this.items)||void 0===e?void 0:e.length)>=5||this.isActive()}clearFilter(e){e&&e.preventDefault(),this.model.save({text:""})}constructor(){super(),this.items=null,this.model=null,this.template=null,this.promise=Promise.resolve()}}o.api.elements.define("converse-list-filter",i)},"./src/shared/components/logo.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/shared/components/element.js");class i extends o.CustomElement{render(){return"overlayed"===n.api.settings.get("view_mode")?r.html`<svg class="converse-svg-logo" version="1.1" viewBox="0 0 364 364" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><title>Converse Logo</title><g class="cls-1" id="g904"><g data-name="Layer 2"><g data-name="Layer 7"><path class="cls-3" d="M221.46,103.71c0,18.83-29.36,18.83-29.12,0C192.1,84.88,221.46,84.88,221.46,103.71Z"/><path class="cls-4" d="M179.9,4.15A175.48,175.48,0,1,0,355.38,179.63,175.48,175.48,0,0,0,179.9,4.15Zm-40.79,264.5c-.23-17.82,27.58-17.82,27.58,0S138.88,286.48,139.11,268.65ZM218.6,168.24A79.65,79.65,0,0,1,205.15,174a12.76,12.76,0,0,0-6.29,4.65L167.54,222a1.36,1.36,0,0,1-2.46-.8v-35.8a2.58,2.58,0,0,0-3.06-2.53c-15.43,3-30.23,7.7-42.73,19.94-38.8,38-29.42,105.69,16.09,133.16a162.25,162.25,0,0,1-91.47-67.27C-3.86,182.26,34.5,47.25,138.37,25.66c46.89-9.75,118.25,5.16,123.73,62.83C265.15,120.64,246.56,152.89,218.6,168.24Z"/></g></g></g></svg>`:r.html`<svg class="converse-svg-logo" version="1.1" viewBox="0 0 364 364" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><title>Converse Logo</title><defs><linearGradient id="gradient" x1="92.14" y1="27.64" x2="267.65" y2="331.62" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#fff1d1"/><stop offset="0.05" stop-color="#fae8c1"/><stop offset="0.15" stop-color="#f0d5a1"/><stop offset="0.27" stop-color="#e7c687"/><stop offset="0.4" stop-color="#e1bb72"/><stop offset="0.54" stop-color="#dcb264"/><stop offset="0.71" stop-color="#daad5c"/><stop offset="1" stop-color="#d9ac59"/></linearGradient><filter id="shadow"><feGaussianBlur in="SourceAlpha" stdDeviation="2.3" result="blur1"/><feOffset in="blur1" dx="3" dy="3" result="blur2"/><feColorMatrix in="blur2" type="matrix" result="blur3" values="1 0 0 0 0.1                            0 1 0 0 0.1                            0 0 1 0 0.1                            0 0 0 1 0"/><feMerge><feMergeNode in="blur3"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g filter="url(#shadow)"><path d="M221.46,103.71c0,18.83-29.36,18.83-29.12,0C192.1,84.88,221.46,84.88,221.46,103.71Z" fill="#d9ac59"/><path d="M179.9,4.15A175.48,175.48,0,1,0,355.38,179.63,175.48,175.48,0,0,0,179.9,4.15Zm-40.79,264.5c-.23-17.82,27.58-17.82,27.58,0S138.88,286.48,139.11,268.65ZM218.6,168.24A79.65,79.65,0,0,1,205.15,174a12.76,12.76,0,0,0-6.29,4.65L167.54,222a1.36,1.36,0,0,1-2.46-.8v-35.8a2.58,2.58,0,0,0-3.06-2.53c-15.43,3-30.23,7.7-42.73,19.94-38.8,38-29.42,105.69,16.09,133.16a162.25,162.25,0,0,1-91.47-67.27C-3.86,182.26,34.5,47.25,138.37,25.66c46.89-9.75,118.25,5.16,123.73,62.83C265.15,120.64,246.56,152.89,218.6,168.24Z" fill="url(#gradient)"/></g></svg>`}}n.api.elements.define("converse-logo",i)},"./src/shared/components/message-versions.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{MessageVersions:()=>l});var r=s("./src/shared/components/element.js"),n=s("./src/headless/index.js"),o=s("./node_modules/lit/index.js"),i=s("./src/i18n/index.js");s("./src/shared/components/styles/message-versions.scss");const{dayjs:a}=n.converse.env;class l extends r.CustomElement{static get properties(){return{model:{type:Object}}}render(){const e=this.model.get("older_versions"),t=Object.keys(e);return o.html`${t.length?o.html`<h4>${(0,i.__)("Older versions")}</h4>${t.map((t=>((e,t)=>o.html`<p class="older-msg"><time>${a(e).format("MMM D, YYYY, HH:mm:ss")}</time>: ${t[e]}</p>`)(t,e)))}`:o.html`<h4>${(0,i.__)("No older versions found")}</h4>`}<hr><h4>${(0,i.__)("Current version")}</h4><p><time>${a(this.model.get("time")).format("MMM D, YYYY, HH:mm:ss")}</time>: ${this.model.getMessageText()}</p>`}constructor(){super(),this.model=null}}n.api.elements.define("converse-message-versions",l)},"./src/shared/components/observable.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{ObservableElement:()=>a});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js");function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}class a extends n.CustomElement{static get properties(){return i(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){o(e,t,s[t])}))}return e}({},super.properties),{observable:{type:String},intersectionRatio:{type:Number}})}firstUpdated(e){super.firstUpdated(e),this.initIntersectionObserver()}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.intersectionObserver)||void 0===e||e.disconnect()}initIntersectionObserver(){this.observable&&!this.isVisible&&(this.intersectionObserver=new IntersectionObserver((e=>this.handleIntersectionCallback(e)),{rootMargin:this.observableMargin,threshold:this.observableThresholds,delay:this.observableDelay}),this.intersectionObserver.observe(this))}alreadyHandled(){return"once"===this.observable&&this.isVisible}handleIntersectionCallback(e){if(!this.alreadyHandled())for(const t of e){Number(t.intersectionRatio.toFixed(2))>=this.intersectionRatio&&!this.alreadyHandled()&&("once"===this.observable&&this.intersectionObserver.disconnect(),this.isVisible=!0,r.api.trigger("visibilityChanged",{el:this,entry:t}),this.onVisibilityChanged(t))}}onVisibilityChanged(e){}constructor(){super(),this.model=null,this.observable=null,this.isVisible=!1,this.observableThresholds=[0,.25,.5,.75,1],this.observableMargin="0px",this.intersectionRatio=.5,this.observableDelay=100}}},"./src/shared/components/spinner.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/headless/index.js"),n=s("./src/templates/spinner.js"),o=s("./src/shared/components/element.js");class i extends o.CustomElement{render(){return(0,n.default)()}}r.api.elements.define("converse-spinner",i)},"./src/shared/components/split-resize.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/shared/components/element.js");s("./src/shared/components/styles/split-resize.scss");const i="_a",a="_b",l="_c",d="horizontal",c=()=>!1,u="undefined"!=typeof window?window:null;class h extends o.CustomElement{initialize(){super.initialize()}render(){return r.html`<div class="gutter gutter-horizontal"></div>`}disconnectedCallback(){super.disconnectedCallback(),this.pair.gutter.removeEventListener("mousedown",this.pair[i]),this.pair.gutter.removeEventListener("touchstart",this.pair[i])}updated(e){super.updated(e),this.pair||this.setupSplit([this.previousElementSibling,this.nextElementSibling])}getOption(e,t,s){const r=e[t];return void 0!==r?r:s}getElementStyle(e,t,s){const r={};return n.u.isString(t)?r[e]=t:r[e]=`calc(${t}% - ${s}px)`,r}defaultGutterStyleFn(e,t){return{[e]:`${t}px`}}getGutterSize(e,t,s,r){if(t){if("end"===r)return 0;if("center"===r)return e/2}else if(s){if("start"===r)return 0;if("center"===r)return e/2}return e}setElementSize(e,t,s){const r=this.getElementStyle(this.dimension,t,s);Object.keys(r).forEach((t=>{e.style[t]=r[t]}))}getSizes(){return this.elements.map((e=>e.size))}getMousePosition(e){return"touches"in e?e.touches[0][this.clientAxis]:e[this.clientAxis]}adjust(e){const t=this.elements[this.pair.a],s=this.elements[this.pair.b],r=t.size+s.size;t.size=e/this.pair.size*r,s.size=r-e/this.pair.size*r,this.setElementSize(t.element,t.size,this.pair[a]),this.setElementSize(s.element,s.size,this.pair[l])}drag(e,t){let s;const r=this.elements[this.pair.a],n=this.elements[this.pair.b];this.pair.dragging&&(s=this.getMousePosition(e)-this.pair.start+(this.pair[a]-this.pair.dragOffset),this.dragInterval>1&&(s=Math.round(s/this.dragInterval)*this.dragInterval),s<=r.minSize+r.snapOffset+this.pair[a]?s=r.minSize+this.pair[a]:s>=this.pair.size-(n.minSize+n.snapOffset+this.pair[l])&&(s=this.pair.size-(n.minSize+this.pair[l])),s>=r.maxSize-r.snapOffset+this.pair[a]?s=r.maxSize+this.pair[a]:s<=this.pair.size-(n.maxSize-n.snapOffset+this.pair[l])&&(s=this.pair.size-(n.maxSize+this.pair[l])),this.adjust(s),this.getOption(t,"onDrag",c)(this.getSizes()))}calculateSizes(e){const t=this.elements[e.a].element,s=this.elements[e.b].element,r=t.getBoundingClientRect(),n=s.getBoundingClientRect();e.size=r[this.dimension]+n[this.dimension]+e[a]+e[l],e.start=r[this.position],e.end=r[this.positionEnd]}innerSize(e){if(!getComputedStyle)return null;const t=getComputedStyle(e);if(!t)return null;let s=e[this.clientSize];return 0===s?null:(this.direction===d?s-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight):s-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),s)}trimToMin(e){const t=this.innerSize(this.parent);if(null===t)return e;if(this.minSizes.reduce(((e,t)=>e+t),0)>t)return e;let s=0;const r=[],n=e.map(((n,o)=>{const i=t*n/100,a=this.getGutterSize(this.gutterSize,0===o,o===e.length-1,this.gutterAlign),l=this.minSizes[o]+a;return i<l?(s+=l-i,r.push(0),l):(r.push(i-l),i)}));return 0===s?e:n.map(((e,n)=>{let o=e;if(s>0&&r[n]-s>0){const t=Math.min(s,r[n]-s);s-=t,o=e-t}return o/t*100}))}stopDragging(e){const t=this.elements[this.pair.a].element,s=this.elements[this.pair.b].element;this.pair.dragging&&this.getOption(e,"onDragEnd",c)(this.getSizes()),this.pair.dragging=!1,u.removeEventListener("mouseup",this.pair.stop),u.removeEventListener("touchend",this.pair.stop),u.removeEventListener("touchcancel",this.pair.stop),u.removeEventListener("mousemove",this.pair.move),u.removeEventListener("touchmove",this.pair.move),this.pair.stop=null,this.pair.move=null,t.removeEventListener("selectstart",c),t.removeEventListener("dragstart",c),s.removeEventListener("selectstart",c),s.removeEventListener("dragstart",c),t.style.userSelect="",t.style.pointerEvents="",s.style.userSelect="",s.style.pointerEvents="",this.pair.gutter.style.cursor="",this.pair.parent.style.cursor="",document.body.style.cursor=""}startDragging(e,t){if("button"in e&&0!==e.button)return;const s=this.elements[this.pair.a].element,r=this.elements[this.pair.b].element;this.pair.dragging||this.getOption(t,"onDragStart",c)(this.getSizes()),e.preventDefault(),this.pair.dragging=!0,this.pair.stop=()=>this.stopDragging(t),this.pair.move=e=>this.drag(e,t),u.addEventListener("mouseup",this.pair.stop),u.addEventListener("touchend",this.pair.stop),u.addEventListener("touchcancel",this.pair.stop),u.addEventListener("mousemove",this.pair.move),u.addEventListener("touchmove",this.pair.move),s.addEventListener("selectstart",c),s.addEventListener("dragstart",c),r.addEventListener("selectstart",c),r.addEventListener("dragstart",c),s.style.userSelect="none",s.style.pointerEvents="none",r.style.userSelect="none",r.style.pointerEvents="none",this.pair.gutter.style.cursor=this.cursor,this.pair.parent.style.cursor=this.cursor,document.body.style.cursor=this.cursor,this.calculateSizes(this.pair),this.pair.dragOffset=this.getMousePosition(e)-this.pair.end}adjustToMin(e){this.calculateSizes(this.pair),this.adjust(this.pair.size-e.minSize-this.pair[l])}setSizes(e){const t=this.trimToMin(e);t.forEach(((e,s)=>{if(s>0){const r=this.elements[this.pair.a],n=this.elements[this.pair.b];r.size=t[s-1],n.size=e,this.setElementSize(r.element,r.size,this.pair[a]),this.setElementSize(n.element,n.size,this.pair[l])}}))}setupSplit(e,t={}){const s=(e=Array.from(e))[0];this.parent=s.parentElement;const r=this.getOption(t,"minSize",100);this.minSizes=Array.isArray(r)?r:e.map((()=>r));const n=this.getOption(t,"expandToMin",!1);this.gutterSize=this.getOption(t,"gutterSize",5),this.gutterAlign=this.getOption(t,"gutterAlign","center"),this.dragInterval=this.getOption(t,"dragInterval",1),this.direction=this.getOption(t,"direction",d),this.cursor=this.getOption(t,"cursor",this.direction===d?"col-resize":"row-resize"),this.direction===d?(this.dimension="width",this.clientAxis="clientX",this.position="left",this.positionEnd="right",this.clientSize="clientWidth"):"vertical"===this.direction&&(this.dimension="height",this.clientAxis="clientY",this.position="top",this.positionEnd="bottom",this.clientSize="clientHeight"),this.elements=e.map(((s,r)=>this.createElement(e,s,r,t))),this.elements.forEach((e=>{const t=e.element.getBoundingClientRect()[this.dimension];t<e.minSize&&(n?this.adjustToMin(e):e.minSize=t)})),this.createPair(t)}createElement(e,t,s,r){let n=this.getOption(r,"sizes")||e.map((()=>100/e.length));n=this.trimToMin(n);const o=this.getOption(r,"maxSize",1/0),i=Array.isArray(o)?o:e.map((()=>o)),a=this.getOption(r,"snapOffset",30),l=Array.isArray(a)?a:e.map((()=>a));return{element:t,size:n[s],minSize:this.minSizes[s],maxSize:i[s],snapOffset:l[s],i:s}}createPair(e){const t=getComputedStyle?getComputedStyle(this.parent):null,s=t?t.flexDirection:null;if(this.pair={a:0,b:1,dragging:!1,direction:this.direction,parent:this.parent},this.pair[a]=this.getGutterSize(this.gutterSize,!0,!1,this.gutterAlign),this.pair[l]=this.getGutterSize(this.gutterSize,!1,!0,this.gutterAlign),"row-reverse"===s||"column-reverse"===s){const e=this.pair.a;this.pair.a=this.pair.b,this.pair.b=e}const r=this.firstElementChild;this.pair[i]=t=>this.startDragging(t,e),this.addEventListener("mousedown",this.pair[i]),this.addEventListener("touchstart",this.pair[i]),this.pair.gutter=r}constructor(){super(),this.pair=null}}n.api.elements.define("converse-split-resize",h)},"./src/shared/components/styles/dropdown.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/components/styles/dropdown.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/components/styles/icon.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/components/styles/icon.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/components/styles/image-picker.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/components/styles/image-picker.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/components/styles/list-filter.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/components/styles/list-filter.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/components/styles/message-versions.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/components/styles/message-versions.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/components/styles/split-resize.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/components/styles/split-resize.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/components/templates/icons.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=()=>r.html`<?xml version="1.0" encoding="UTF-8"?> <svg xmlns="http://www.w3.org/2000/svg" style="display:none"><symbol id="icon-filter" viewBox="0 0 512 512"><path d="M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"/></symbol><symbol id="icon-address-book" viewBox="0 0 448 512"><path d="M436 160c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h320c26.5 0 48-21.5 48-48v-48h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20zm-228-32c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zm112 236.8c0 10.6-10 19.2-22.4 19.2H118.4C106 384 96 375.4 96 364.8v-19.2c0-31.8 30.1-57.6 67.2-57.6h5c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h5c37.1 0 67.2 25.8 67.2 57.6v19.2z"></path></symbol><symbol id="icon-angle-double-down" viewBox="0 0 320 512"><path d="M143 256.3L7 120.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0L313 86.3c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.4 9.5-24.6 9.5-34 .1zm34 192l136-136c9.4-9.4 9.4-24.6 0-33.9l-22.6-22.6c-9.4-9.4-24.6-9.4-33.9 0L160 352.1l-96.4-96.4c-9.4-9.4-24.6-9.4-33.9 0L7 278.3c-9.4 9.4-9.4 24.6 0 33.9l136 136c9.4 9.5 24.6 9.5 34 .1z"></path></symbol><symbol id="icon-angle-double-left" viewBox="0 0 448 512"><path d="M223.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L319.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L393.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34zm-192 34l136 136c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9L127.9 256l96.4-96.4c9.4-9.4 9.4-24.6 0-33.9L201.7 103c-9.4-9.4-24.6-9.4-33.9 0l-136 136c-9.5 9.4-9.5 24.6-.1 34z"></path></symbol><symbol id="icon-angle-double-right" viewBox="0 0 448 512"><path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34zm192-34l-136-136c-9.4-9.4-24.6-9.4-33.9 0l-22.6 22.6c-9.4 9.4-9.4 24.6 0 33.9l96.4 96.4-96.4 96.4c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l136-136c9.4-9.2 9.4-24.4 0-33.8z"></path></symbol><symbol id="icon-angle-double-up" viewBox="0 0 320 512"><path d="M177 255.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 351.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 425.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1zm-34-192L7 199.7c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l96.4-96.4 96.4 96.4c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9l-136-136c-9.2-9.4-24.4-9.4-33.8 0z"></path></symbol><symbol id="icon-angle-down" viewBox="0 0 320 512"><path d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"></path></symbol><symbol id="icon-angle-left" viewBox="0 0 256 512"><path d="M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"></path></symbol><symbol id="icon-angle-right" viewBox="0 0 256 512"><path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"></path></symbol><symbol id="icon-angle-up" viewBox="0 0 320 512"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"></path></symbol><symbol id="icon-arrow-alt-circle-down" viewBox="0 0 512 512"><path d="M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zM212 140v116h-70.9c-10.7 0-16.1 13-8.5 20.5l114.9 114.3c4.7 4.7 12.2 4.7 16.9 0l114.9-114.3c7.6-7.6 2.2-20.5-8.5-20.5H300V140c0-6.6-5.4-12-12-12h-64c-6.6 0-12 5.4-12 12z"></path></symbol><symbol id="icon-arrow-alt-circle-left" viewBox="0 0 512 512"><path d="M256 504C119 504 8 393 8 256S119 8 256 8s248 111 248 248-111 248-248 248zm116-292H256v-70.9c0-10.7-13-16.1-20.5-8.5L121.2 247.5c-4.7 4.7-4.7 12.2 0 16.9l114.3 114.9c7.6 7.6 20.5 2.2 20.5-8.5V300h116c6.6 0 12-5.4 12-12v-64c0-6.6-5.4-12-12-12z"></path></symbol><symbol id="icon-arrow-alt-circle-right" viewBox="0 0 512 512"><path d="M256 8c137 0 248 111 248 248S393 504 256 504 8 393 8 256 119 8 256 8zM140 300h116v70.9c0 10.7 13 16.1 20.5 8.5l114.3-114.9c4.7-4.7 4.7-12.2 0-16.9l-114.3-115c-7.6-7.6-20.5-2.2-20.5 8.5V212H140c-6.6 0-12 5.4-12 12v64c0 6.6 5.4 12 12 12z"></path></symbol><symbol id="icon-arrow-alt-circle-up" viewBox="0 0 512 512"><path d="M8 256C8 119 119 8 256 8s248 111 248 248-111 248-248 248S8 393 8 256zm292 116V256h70.9c10.7 0 16.1-13 8.5-20.5L264.5 121.2c-4.7-4.7-12.2-4.7-16.9 0l-115 114.3c-7.6 7.6-2.2 20.5 8.5 20.5H212v116c0 6.6 5.4 12 12 12h64c6.6 0 12-5.4 12-12z"></path></symbol><symbol id="icon-arrow-circle-down" viewBox="0 0 512 512"><path d="M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-143.6-28.9L288 302.6V120c0-13.3-10.7-24-24-24h-16c-13.3 0-24 10.7-24 24v182.6l-72.4-75.5c-9.3-9.7-24.8-9.9-34.3-.4l-10.9 11c-9.4 9.4-9.4 24.6 0 33.9L239 404.3c9.4 9.4 24.6 9.4 33.9 0l132.7-132.7c9.4-9.4 9.4-24.6 0-33.9l-10.9-11c-9.5-9.5-25-9.3-34.3.4z"></path></symbol><symbol id="icon-arrow-circle-left" viewBox="0 0 512 512"><path d="M256 504C119 504 8 393 8 256S119 8 256 8s248 111 248 248-111 248-248 248zm28.9-143.6L209.4 288H392c13.3 0 24-10.7 24-24v-16c0-13.3-10.7-24-24-24H209.4l75.5-72.4c9.7-9.3 9.9-24.8.4-34.3l-11-10.9c-9.4-9.4-24.6-9.4-33.9 0L107.7 239c-9.4 9.4-9.4 24.6 0 33.9l132.7 132.7c9.4 9.4 24.6 9.4 33.9 0l11-10.9c9.5-9.5 9.3-25-.4-34.3z"></path></symbol><symbol id="icon-arrow-circle-right" viewBox="0 0 512 512"><path d="M256 8c137 0 248 111 248 248S393 504 256 504 8 393 8 256 119 8 256 8zm-28.9 143.6l75.5 72.4H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h182.6l-75.5 72.4c-9.7 9.3-9.9 24.8-.4 34.3l11 10.9c9.4 9.4 24.6 9.4 33.9 0L404.3 273c9.4-9.4 9.4-24.6 0-33.9L271.6 106.3c-9.4-9.4-24.6-9.4-33.9 0l-11 10.9c-9.5 9.6-9.3 25.1.4 34.4z"></path></symbol><symbol id="icon-arrow-circle-up" viewBox="0 0 512 512"><path d="M8 256C8 119 119 8 256 8s248 111 248 248-111 248-248 248S8 393 8 256zm143.6 28.9l72.4-75.5V392c0 13.3 10.7 24 24 24h16c13.3 0 24-10.7 24-24V209.4l72.4 75.5c9.3 9.7 24.8 9.9 34.3.4l10.9-11c9.4-9.4 9.4-24.6 0-33.9L273 107.7c-9.4-9.4-24.6-9.4-33.9 0L106.3 240.4c-9.4 9.4-9.4 24.6 0 33.9l10.9 11c9.6 9.5 25.1 9.3 34.4-.4z"></path></symbol><symbol id="icon-arrow-down" viewBox="0 0 448 512"><path d="M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"></path></symbol><symbol id="icon-arrow-left" viewBox="0 0 448 512"><path d="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"></path></symbol><symbol id="icon-arrow-right" viewBox="0 0 448 512"><path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"></path></symbol><symbol id="icon-arrow-up" viewBox="0 0 448 512"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"></path></symbol><symbol id="icon-arrows-alt" viewBox="0 0 512 512"><path d="M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z"></path></symbol><symbol id="icon-arrows-alt-h" viewBox="0 0 512 512"><path d="M377.941 169.941V216H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.568 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296h243.882v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.568 0-33.941l-86.059-86.059c-15.119-15.12-40.971-4.412-40.971 16.97z"></path></symbol><symbol id="icon-arrows-alt-v" viewBox="0 0 256 512"><path d="M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"></path></symbol><symbol id="icon-bars" viewBox="0 0 448 512"><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"></path></symbol><symbol id="icon-bookmark" viewBox="0 0 384 512"><path d="M0 512V48C0 21.49 21.49 0 48 0h288c26.51 0 48 21.49 48 48v464L192 400 0 512z"></path></symbol><symbol id="icon-bookmark-empty" viewBox="0 0 384 512"><path d="M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z"/></symbol><symbol id="icon-caret-down" viewBox="0 0 320 512"><path d="M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"></path></symbol><symbol id="icon-caret-right" viewBox="0 0 192 512"><path d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"></path></symbol><symbol id="icon-check" viewBox="0 0 512 512"><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"></path></symbol><symbol id="icon-circle" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></symbol><symbol id="icon-cog" viewBox="0 0 512 512"><path d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"></path></symbol><symbol id="icon-database" viewBox="0 0 448 512"><path d="M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"></path></symbol><symbol id="icon-edit" viewBox="0 0 576 512"><path d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"></path></symbol><symbol id="icon-eye" viewBox="0 0 576 512"><path d="M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"></path></symbol><symbol id="icon-eye-slash" viewBox="0 0 640 512"><path d="M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"></path></symbol><symbol id="icon-gavel" viewBox="0 0 512 512"><path d="M504.971 199.362l-22.627-22.627c-9.373-9.373-24.569-9.373-33.941 0l-5.657 5.657L329.608 69.255l5.657-5.657c9.373-9.373 9.373-24.569 0-33.941L312.638 7.029c-9.373-9.373-24.569-9.373-33.941 0L154.246 131.48c-9.373 9.373-9.373 24.569 0 33.941l22.627 22.627c9.373 9.373 24.569 9.373 33.941 0l5.657-5.657 39.598 39.598-81.04 81.04-5.657-5.657c-12.497-12.497-32.758-12.497-45.255 0L9.373 412.118c-12.497 12.497-12.497 32.758 0 45.255l45.255 45.255c12.497 12.497 32.758 12.497 45.255 0l114.745-114.745c12.497-12.497 12.497-32.758 0-45.255l-5.657-5.657 81.04-81.04 39.598 39.598-5.657 5.657c-9.373 9.373-9.373 24.569 0 33.941l22.627 22.627c9.373 9.373 24.569 9.373 33.941 0l124.451-124.451c9.372-9.372 9.372-24.568 0-33.941z"></path></symbol><symbol id="icon-globe" viewBox="0 0 496 512"><path d="M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"></path></symbol><symbol id="icon-id-card" viewBox="0 0 576 512"><path d="M528 32H48C21.5 32 0 53.5 0 80v16h576V80c0-26.5-21.5-48-48-48zM0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V128H0v304zm352-232c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zM176 192c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zM67.1 396.2C75.5 370.5 99.6 352 128 352h8.2c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h8.2c28.4 0 52.5 18.5 60.9 44.2 3.2 9.9-5.2 19.8-15.6 19.8H82.7c-10.4 0-18.8-10-15.6-19.8z"></path></symbol><symbol id="icon-id-card-alt" viewBox="0 0 576 512"><path d="M528 64H384v96H192V64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM288 224c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zm93.3 224H194.7c-10.4 0-18.8-10-15.6-19.8 8.3-25.6 32.4-44.2 60.9-44.2h8.2c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h8.2c28.4 0 52.5 18.5 60.9 44.2 3.2 9.8-5.2 19.8-15.6 19.8zM352 32c0-17.7-14.3-32-32-32h-64c-17.7 0-32 14.3-32 32v96h128V32z"></path></symbol><symbol id="icon-info" viewBox="0 0 192 512"><path d="M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"></path></symbol><symbol id="icon-info-circle" viewBox="0 0 512 512"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"></path></symbol><symbol id="icon-list-ul" viewBox="0 0 512 512"><path d="M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"></path></symbol><symbol id="icon-lock" viewBox="0 0 448 512"><path d="M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"></path></symbol><symbol id="icon-lock-open" viewBox="0 0 576 512"><path d="M423.5 0C339.5.3 272 69.5 272 153.5V224H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48h-48v-71.1c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v80c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-80C576 68 507.5-.3 423.5 0z"></path></symbol><symbol id="icon-minus" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></symbol><symbol id="icon-minus-circle" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"></path></symbol><symbol id="icon-minus-square" viewBox="0 0 448 512"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"></path></symbol><symbol id="icon-paper-plane" viewBox="0 0 512 512"><path d="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"></path></symbol><symbol id="icon-paperclip" viewBox="0 0 448 512"><path d="M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z"></path></symbol><symbol id="icon-pencil-alt" viewBox="0 0 512 512"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"></path></symbol><symbol id="icon-phone" viewBox="0 0 512 512"><path d="M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"></path></symbol><symbol id="icon-plus" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></symbol><symbol id="icon-plus-circle" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"></path></symbol><symbol id="icon-plus-square" viewBox="0 0 448 512"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"></path></symbol><symbol id="icon-save" viewBox="0 0 448 512"><path d="M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"></path></symbol><symbol id="icon-sign-out-alt" viewBox="0 0 512 512"><path d="M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"></path></symbol><symbol id="icon-smile" viewBox="0 0 496 512"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm80 168c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32zm-160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32zm194.8 170.2C334.3 380.4 292.5 400 248 400s-86.3-19.6-114.8-53.8c-13.6-16.3 11-36.7 24.6-20.5 22.4 26.9 55.2 42.2 90.2 42.2s67.8-15.4 90.2-42.2c13.4-16.2 38.1 4.2 24.6 20.5z"></path></symbol><symbol id="icon-snowflake" viewBox="0 0 448 512"><path d="M440.3 345.2l-33.8-19.5 26-7c8.2-2.2 13.1-10.7 10.9-18.9l-4-14.9c-2.2-8.2-10.7-13.1-18.9-10.9l-70.8 19-63.9-37 63.8-36.9 70.8 19c8.2 2.2 16.7-2.7 18.9-10.9l4-14.9c2.2-8.2-2.7-16.7-10.9-18.9l-26-7 33.8-19.5c7.4-4.3 9.9-13.7 5.7-21.1L430.4 119c-4.3-7.4-13.7-9.9-21.1-5.7l-33.8 19.5 7-26c2.2-8.2-2.7-16.7-10.9-18.9l-14.9-4c-8.2-2.2-16.7 2.7-18.9 10.9l-19 70.8-62.8 36.2v-77.5l53.7-53.7c6.2-6.2 6.2-16.4 0-22.6l-11.3-11.3c-6.2-6.2-16.4-6.2-22.6 0L256 56.4V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v40.4l-19.7-19.7c-6.2-6.2-16.4-6.2-22.6 0L138.3 48c-6.3 6.2-6.3 16.4 0 22.6l53.7 53.7v77.5l-62.8-36.2-19-70.8c-2.2-8.2-10.7-13.1-18.9-10.9l-14.9 4c-8.2 2.2-13.1 10.7-10.9 18.9l7 26-33.8-19.5c-7.4-4.3-16.8-1.7-21.1 5.7L2.1 145.7c-4.3 7.4-1.7 16.8 5.7 21.1l33.8 19.5-26 7c-8.3 2.2-13.2 10.7-11 19l4 14.9c2.2 8.2 10.7 13.1 18.9 10.9l70.8-19 63.8 36.9-63.8 36.9-70.8-19c-8.2-2.2-16.7 2.7-18.9 10.9l-4 14.9c-2.2 8.2 2.7 16.7 10.9 18.9l26 7-33.8 19.6c-7.4 4.3-9.9 13.7-5.7 21.1l15.5 26.8c4.3 7.4 13.7 9.9 21.1 5.7l33.8-19.5-7 26c-2.2 8.2 2.7 16.7 10.9 18.9l14.9 4c8.2 2.2 16.7-2.7 18.9-10.9l19-70.8 62.8-36.2v77.5l-53.7 53.7c-6.3 6.2-6.3 16.4 0 22.6l11.3 11.3c6.2 6.2 16.4 6.2 22.6 0l19.7-19.7V496c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-40.4l19.7 19.7c6.2 6.2 16.4 6.2 22.6 0l11.3-11.3c6.2-6.2 6.2-16.4 0-22.6L256 387.7v-77.5l62.8 36.2 19 70.8c2.2 8.2 10.7 13.1 18.9 10.9l14.9-4c8.2-2.2 13.1-10.7 10.9-18.9l-7-26 33.8 19.5c7.4 4.3 16.8 1.7 21.1-5.7l15.5-26.8c4.3-7.3 1.8-16.8-5.6-21z"></path></symbol><symbol id="icon-spinner" viewBox="0 0 512 512"><path d="M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"></path></symbol><symbol id="icon-sync" viewBox="0 0 512 512"><path d="M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"></path></symbol><symbol id="icon-times" viewBox="0 0 352 512"><path d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"></path></symbol><symbol id="icon-times-circle" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"></path></symbol><symbol id="icon-trash" viewBox="0 0 448 512"><path d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"></path></symbol><symbol id="icon-trash-alt" viewBox="0 0 448 512"><path d="M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"></path></symbol><symbol id="icon-unlock" viewBox="0 0 448 512"><path d="M400 256H152V152.9c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v16c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-16C376 68 307.5-.3 223.5 0 139.5.3 72 69.5 72 153.5V256H48c-26.5 0-48 21.5-48 48v160c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"></path></symbol><symbol id="icon-user" viewBox="0 0 448 512"><path d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"></path></symbol><symbol id="icon-user-cog" viewBox="0 0 640 512"><path d="M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"></path></symbol><symbol id="icon-user-plus" viewBox="0 0 640 512"><path d="M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"></path></symbol><symbol id="icon-user-secret" viewBox="0 0 448 512"><path d="M383.9 308.3l23.9-62.6c4-10.5-3.7-21.7-15-21.7h-58.5c11-18.9 17.8-40.6 17.8-64v-.3c39.2-7.8 64-19.1 64-31.7 0-13.3-27.3-25.1-70.1-33-9.2-32.8-27-65.8-40.6-82.8-9.5-11.9-25.9-15.6-39.5-8.8l-27.6 13.8c-9 4.5-19.6 4.5-28.6 0L182.1 3.4c-13.6-6.8-30-3.1-39.5 8.8-13.5 17-31.4 50-40.6 82.8-42.7 7.9-70 19.7-70 33 0 12.6 24.8 23.9 64 31.7v.3c0 23.4 6.8 45.1 17.8 64H56.3c-11.5 0-19.2 11.7-14.7 22.3l25.8 60.2C27.3 329.8 0 372.7 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-48.4-25.8-90.4-64.1-114.1zM176 480l-41.6-192 49.6 32 24 40-32 120zm96 0l-32-120 24-40 49.6-32L272 480zm41.7-298.5c-3.9 11.9-7 24.6-16.5 33.4-10.1 9.3-48 22.4-64-25-2.8-8.4-15.4-8.4-18.3 0-17 50.2-56 32.4-64 25-9.5-8.8-12.7-21.5-16.5-33.4-.8-2.5-6.3-5.7-6.3-5.8v-10.8c28.3 3.6 61 5.8 96 5.8s67.7-2.1 96-5.8v10.8c-.1.1-5.6 3.2-6.4 5.8z"></path></symbol><symbol id="icon-users" viewBox="0 0 640 512"><path d="M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"></path></symbol><symbol id="icon-wrench" viewBox="0 0 512 512"><path d="M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"></path></symbol><symbol id="icon-refresh" viewBox="0 0 512 512"><path d="M464 16c-17.67 0-32 14.31-32 32v74.09C392.1 66.52 327.4 32 256 32C161.5 32 78.59 92.34 49.58 182.2c-5.438 16.81 3.797 34.88 20.61 40.28c16.89 5.5 34.88-3.812 40.3-20.59C130.9 138.5 189.4 96 256 96c50.5 0 96.26 24.55 124.4 64H336c-17.67 0-32 14.31-32 32s14.33 32 32 32h128c17.67 0 32-14.31 32-32V48C496 30.31 481.7 16 464 16zM441.8 289.6c-16.92-5.438-34.88 3.812-40.3 20.59C381.1 373.5 322.6 416 256 416c-50.5 0-96.25-24.55-124.4-64H176c17.67 0 32-14.31 32-32s-14.33-32-32-32h-128c-17.67 0-32 14.31-32 32v144c0 17.69 14.33 32 32 32s32-14.31 32-32v-74.09C119.9 445.5 184.6 480 255.1 480c94.45 0 177.4-60.34 206.4-150.2C467.9 313 458.6 294.1 441.8 289.6z"></path></symbol><symbol id="icon-copy" viewBox="0 0 448 512"><path d="M320 448v40c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V120c0-13.3 10.7-24 24-24h72v296c0 30.9 25.1 56 56 56h168zm0-344V0H152c-13.3 0-24 10.7-24 24v368c0 13.3 10.7 24 24 24h272c13.3 0 24-10.7 24-24V128H344c-13.2 0-24-10.8-24-24zm121-31L375 7A24 24 0 0 0 358.1 0H352v96h96v-6.1a24 24 0 0 0 -7-17z"></path></symbol><symbol id="icon-quote-right" viewBox="0 0 512 512"><path d="M464 32H336c-26.5 0-48 21.5-48 48v128c0 26.5 21.5 48 48 48h80v64c0 35.3-28.7 64-64 64h-8c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h8c88.4 0 160-71.6 160-160V80c0-26.5-21.5-48-48-48zm-288 0H48C21.5 32 0 53.5 0 80v128c0 26.5 21.5 48 48 48h80v64c0 35.3-28.7 64-64 64h-8c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h8c88.4 0 160-71.6 160-160V80c0-26.5-21.5-48-48-48z"></path></symbol><symbol id="icon-bell" viewBox="0 0 512 512"><path d="M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"></path></symbol><symbol id="icon-bell-alt" viewBox="0 0 512 512"><path d="M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 25.4c0 45.4-15.5 89.5-43.8 124.9L5.3 377c-5.8 7.2-6.9 17.1-2.9 25.4S14.8 416 24 416l400 0c9.2 0 17.6-5.3 21.6-13.6s2.9-18.2-2.9-25.4l-14.9-18.6C399.5 322.9 384 278.8 384 233.4l0-25.4c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm0 96c61.9 0 112 50.1 112 112l0 25.4c0 47.9 13.9 94.6 39.7 134.6L72.3 368C98.1 328 112 281.3 112 233.4l0-25.4c0-61.9 50.1-112 112-112zm64 352l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7s18.7-28.3 18.7-45.3z"></path></symbol></svg>`},"./src/shared/constants.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{MOBILE_CUTOFF:()=>i,PRETTY_CHAT_STATUS:()=>o,VIEW_PLUGINS:()=>n});var r=s("./src/i18n/index.js");const n=["converse-adhoc-views","converse-bookmark-views","converse-chatboxviews","converse-chatview","converse-controlbox","converse-disco-views","converse-dragresize","converse-fullscreen","converse-headlines-view","converse-mam-views","converse-minimize","converse-modal","converse-muc-views","converse-notification","converse-omemo","converse-profile","converse-push","converse-register","converse-roomslist","converse-rootview","converse-rosterview","converse-singleton"],o={offline:(0,r.__)("Offline"),unavailable:(0,r.__)("Unavailable"),xa:(0,r.__)("Extended Away"),away:(0,r.__)("Away"),dnd:(0,r.__)("Do not disturb"),chat:(0,r.__)("Chatty"),online:(0,r.__)("Online")},i=768},"./src/shared/dom-navigator/dom-navigator.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/utils/html.js"),n=s("./src/headless/index.js"),o=s("./src/shared/dom-navigator/utils.js");const{keycodes:i}=n.converse;class a{static get DIRECTION(){return{down:"down",end:"end",home:"home",left:"left",right:"right",up:"up"}}static get DEFAULTS(){return{home:[`${i.SHIFT}${i.UP_ARROW}`],end:[`${i.SHIFT}${i.DOWN_ARROW}`],up:[i.UP_ARROW],down:[i.DOWN_ARROW],left:[i.LEFT_ARROW,`${i.SHIFT}${i.TAB}`],right:[i.RIGHT_ARROW,i.TAB],getSelector:null,jump_to_picked:null,jump_to_picked_direction:null,jump_to_picked_selector:"picked",onSelected:null,selected:"selected",selector:"li"}}static getClosestElement(e,t){return e.reduce(((e,s)=>{const r=t(s);return r<e.distance?{distance:r,element:s}:e}),{distance:1/0,element:null}).element}init(){this.selected=null,this.keydownHandler=null,this.elements={},this.keys={},this.options.down.forEach((e=>this.keys[e]=a.DIRECTION.down)),this.options.end.forEach((e=>this.keys[e]=a.DIRECTION.end)),this.options.home.forEach((e=>this.keys[e]=a.DIRECTION.home)),this.options.left.forEach((e=>this.keys[e]=a.DIRECTION.left)),this.options.right.forEach((e=>this.keys[e]=a.DIRECTION.right)),this.options.up.forEach((e=>this.keys[e]=a.DIRECTION.up))}enable(){this.getElements(),this.keydownHandler=e=>this.handleKeydown(e);r.default.getRootElement().addEventListener("keydown",this.keydownHandler),this.enabled=!0}disable(){if(this.keydownHandler){r.default.getRootElement().removeEventListener("keydown",this.keydownHandler)}this.unselect(),this.elements={},this.enabled=!1}destroy(){this.disable()}getNextElement(e){let t;if(e===a.DIRECTION.home)t=this.getElements(e)[0];else if(e===a.DIRECTION.end)t=Array.from(this.getElements(e)).pop();else if(this.selected)if(e===a.DIRECTION.right){const s=this.getElements(e);t=s.slice(s.indexOf(this.selected))[1]}else if(e==a.DIRECTION.left){const s=this.getElements(e);t=s.slice(0,s.indexOf(this.selected)).pop()||this.selected}else if(e==a.DIRECTION.down){const e=this.selected.offsetLeft,s=this.selected.offsetTop+this.selected.offsetHeight,r=this.elementsAfter(0,s),n=t=>Math.abs(t.offsetLeft-e)+Math.abs(t.offsetTop-s);t=a.getClosestElement(r,n)}else{if(e!=a.DIRECTION.up)throw new Error("getNextElement: invalid direction value");{const e=this.selected.offsetLeft,s=this.selected.offsetTop-1,r=this.elementsBefore(1/0,s),n=t=>Math.abs(e-t.offsetLeft)+Math.abs(s-t.offsetTop);t=a.getClosestElement(r,n)}}else t=e===a.DIRECTION.right||e===a.DIRECTION.down?this.getElements(e)[1]:this.getElements(e)[0];return this.options.jump_to_picked&&t&&t.matches(this.options.jump_to_picked)&&e===this.options.jump_to_picked_direction&&(t=this.container.querySelector(this.options.jump_to_picked_selector)||t),t}select(e,t){e&&e!==this.selected&&(this.unselect(),t&&this.scrollTo(e,t),e.matches("input")?e.focus():r.default.addClass(this.options.selected,e),this.selected=e,this.options.onSelected&&this.options.onSelected(e))}unselect(){this.selected&&(r.default.removeClass(this.options.selected,this.selected),delete this.selected)}scrollTo(e,t){if(this.inScrollContainerViewport(e)){if(!(0,o.inViewport)(e))switch(t){case a.DIRECTION.left:document.body.scrollLeft=(0,o.absoluteOffsetLeft)(e)-document.body.offsetLeft;break;case a.DIRECTION.up:document.body.scrollTop=(0,o.absoluteOffsetTop)(e)-document.body.offsetTop;break;case a.DIRECTION.right:document.body.scrollLeft=(0,o.absoluteOffsetLeft)(e)-document.body.offsetLeft-(document.documentElement.clientWidth-e.offsetWidth);break;case a.DIRECTION.down:document.body.scrollTop=(0,o.absoluteOffsetTop)(e)-document.body.offsetTop-(document.documentElement.clientHeight-e.offsetHeight)}}else{const s=this.scroll_container;if(!s.contains(e))return;switch(t){case a.DIRECTION.left:s.scrollLeft=e.offsetLeft-s.offsetLeft,s.scrollTop=e.offsetTop-s.offsetTop;break;case a.DIRECTION.up:s.scrollTop=e.offsetTop-s.offsetTop;break;case a.DIRECTION.right:s.scrollLeft=e.offsetLeft-s.offsetLeft-(s.offsetWidth-e.offsetWidth),s.scrollTop=e.offsetTop-s.offsetTop-(s.offsetHeight-e.offsetHeight);break;case a.DIRECTION.down:s.scrollTop=e.offsetTop-s.offsetTop-(s.offsetHeight-e.offsetHeight)}}}inScrollContainerViewport(e){const t=this.scroll_container;return!(e.offsetLeft-t.scrollLeft<t.offsetLeft)&&(!(e.offsetTop-t.scrollTop<t.offsetTop)&&(!(e.offsetLeft+e.offsetWidth-t.scrollLeft>t.offsetLeft+t.offsetWidth)&&!(e.offsetTop+e.offsetHeight-t.scrollTop>t.offsetTop+t.offsetHeight)))}getElements(e){const t=this.options.getSelector?this.options.getSelector(e):this.options.selector;return this.elements[t]||(this.elements[t]=Array.from(this.container.querySelectorAll(t))),this.elements[t]}elementsAfter(e,t){return this.getElements(a.DIRECTION.down).filter((s=>s.offsetLeft>=e&&s.offsetTop>=t))}elementsBefore(e,t){return this.getElements(a.DIRECTION.up).filter((s=>s.offsetLeft<=e&&s.offsetTop<=t))}handleKeydown(e){const t=i,s=e.shiftKey?this.keys[`${t.SHIFT}${e.key}`]:this.keys[e.key];if(s){e.preventDefault(),e.stopPropagation();const t=this.getNextElement(s);this.select(t,s)}}constructor(e,t){this.container=e,this.scroll_container=t.scroll_container||e,this.options=Object.assign({},a.DEFAULTS,t),this.init()}}const l=a},"./src/shared/dom-navigator/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{DOMNavigator:()=>r.default});var r=s("./src/shared/dom-navigator/dom-navigator.js")},"./src/shared/dom-navigator/utils.js":(e,t,s)=>{"use strict";function r(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=window.innerHeight&&t.right<=window.innerWidth}function n(e){let t=0;do{isNaN(e.offsetTop)||(t+=e.offsetTop)}while(e=e.offsetParent);return t}function o(e){let t=0;do{isNaN(e.offsetLeft)||(t+=e.offsetLeft)}while(e=e.offsetParent);return t}s.r(t),s.d(t,{absoluteOffsetLeft:()=>o,absoluteOffsetTop:()=>n,inViewport:()=>r})},"./src/shared/errors.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{IQError:()=>r,UserFacingError:()=>n});class r extends Error{constructor(e,t){super(e),this.name="IQError",this.iq=t}}class n extends Error{constructor(e){super(e),this.name="UserFacingError",this.user_facing=!0}}},"./src/shared/gif/component.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s("./src/shared/gif/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/headless/index.js"),i=s("./src/utils/html.js"),a=s("./node_modules/lit/index.js");s("./src/shared/gif/styles.scss");class l extends n.CustomElement{static get properties(){return{autoplay:{type:Boolean},noloop:{type:Boolean},progress_color:{type:String},fallback:{type:String},src:{type:String}}}initGIF(){const e={autoplay:this.autoplay,loop:!this.noloop};this.progress_color&&(e.progress_color=this.progress_color),this.supergif=new r.default(this,e)}updated(e){this.supergif&&!e.has("src")?(e.has("autoplay")&&(this.supergif.options.autoplay=this.autoplay),e.has("noloop")&&(this.supergif.options.loop=!this.noloop),e.has("progress_color")&&(this.supergif.options.progress_color=this.progress_color)):this.initGIF()}render(){var e;return(null===(e=this.supergif)||void 0===e?void 0:e.load_error)&&["url","empty"].includes(this.fallback)?this.renderErrorFallback():a.html`<canvas class="gif-canvas" @mouseover="${()=>this.setHover()}" @mouseleave="${()=>this.unsetHover()}" @click="${e=>this.onControlsClicked(e)}"><img class="gif" src="${this.src}"></canvas>`}renderErrorFallback(){return"url"===this.fallback?(0,i.getHyperlinkTemplate)(this.src):"empty"===this.fallback?"":void 0}setHover(){this.supergif&&(this.supergif.hovering=!0,this.hover_timeout&&clearTimeout(this.hover_timeout),this.hover_timeout=setTimeout((()=>this.unsetHover()),2e3))}unsetHover(){this.supergif&&(this.supergif.hovering=!1)}onControlsClicked(e){e.preventDefault(),this.supergif.playing?this.supergif.pause():this.supergif.frames.length>0&&(this.supergif.options.loop=!0,this.supergif.play())}constructor(){super(),this.src=null,this.autoplay=!1,this.noloop=!1,this.fallback="url",this.progress_color=null}}o.api.elements.define("converse-gif",l)},"./src/shared/gif/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s("./src/log/index.js"),n=s("./node_modules/@converse/openpromise/dist/openpromise.js"),o=s("./node_modules/gifuct-js/lib/index.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class a{initialize(){return(e=function*(){this.options.width&&this.options.height&&this.setSizes(this.options.width,this.options.height);const e=yield this.fetchGIF(this.gif_el.src);requestAnimationFrame((()=>this.handleGIFResponse(e)))},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))}).call(this);var e}initPlayer(){if(!this.load_error&&(this.options.width&&this.options.height||this.ctx.scale(this.getCanvasScale(),this.getCanvasScale()),this.frame_idx=0,this.renderImage(),this.options.autoplay)){var e,t;const s=null!==(t=null===(e=this.frames[this.frame_idx])||void 0===e?void 0:e.delay)&&void 0!==t?t:0;setTimeout((()=>this.play()),s)}}getNextFrameNo(){return 0===this.frames.length?0:(this.frame_idx+1+this.frames.length)%this.frames.length}onIterationEnd(){var e,t;return this.iteration_count++,null===(e=(t=this.options).onIterationEnd)||void 0===e||e.call(t,this.el),!this.options.loop&&(this.pause(),!0)}onAnimationFrame(e,t,s){var r;if(!this.playing)return;if(e-t<s)return this.hovering?this.drawPauseIcon():this.renderImage(),void requestAnimationFrame((e=>this.onAnimationFrame(e,t,s)));const n=this.getNextFrameNo();if(0===n&&this.onIterationEnd())return;this.frame_idx=n,this.renderImage();const o=(null===(r=this.frames[this.frame_idx])||void 0===r?void 0:r.delay)||8;requestAnimationFrame((t=>this.onAnimationFrame(t,e,o)))}setSizes(e,t){this.canvas.width=e*this.getCanvasScale(),this.canvas.height=t*this.getCanvasScale(),this.offscreenCanvas.width=e,this.offscreenCanvas.height=t,this.offscreenCanvas.style.width=e+"px",this.offscreenCanvas.style.height=t+"px",this.offscreenCanvas.getContext("2d").setTransform(1,0,0,1,0,0)}doShowProgress(e,t,s){if(s&&this.options.show_progress_bar){let s=this.options.progress_bar_height;const r=(this.canvas.height-s)/(this.ctx_scaled?this.getCanvasScale():1),n=e/t*this.canvas.width/(this.ctx_scaled?this.getCanvasScale():1),o=this.canvas.width/(this.ctx_scaled?this.getCanvasScale():1);s/=this.ctx_scaled?this.getCanvasScale():1,this.ctx.fillStyle=this.options.progress_bg_color,this.ctx.fillRect(n,r,o-n,s),this.ctx.fillStyle=this.options.progress_color,this.ctx.fillRect(0,r,n,s)}}handleGIFResponse(e){try{const r=(0,o.parseGIF)(e);var t,s;this.hdr=r.header,this.lsd=r.lsd,this.setSizes(null!==(t=this.options.width)&&void 0!==t?t:this.lsd.width,null!==(s=this.options.height)&&void 0!==s?s:this.lsd.height),this.frames=(0,o.decompressFrames)(r,!0)}catch(e){this.showError()}this.initPlayer(),!this.options.autoplay&&this.drawPlayIcon()}drawError(){this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.options.width,this.options.height),this.ctx.strokeStyle="red",this.ctx.lineWidth=3,this.ctx.moveTo(0,0),this.ctx.lineTo(this.options.width,this.options.height),this.ctx.moveTo(0,this.options.height),this.ctx.lineTo(this.options.width,0),this.ctx.stroke()}showError(){this.load_error=!0,this.hdr={width:this.gif_el.width,height:this.gif_el.height},this.frames=[],this.drawError(),this.el.requestUpdate()}manageDisposal(e){if(e<=0)return;const t=this.offscreenCanvas.getContext("2d"),s=this.frames[e-1].disposalType;e>1&&(3===s?null!=this.disposal_restore_from_idx&&t.putImageData(this.frames[this.disposal_restore_from_idx].data,0,0):this.disposal_restore_from_idx=e-1),2===s&&t.clearRect(this.last_frame.dims.left,this.last_frame.dims.top,this.last_frame.dims.width,this.last_frame.dims.height)}renderImage(e=!0){if(!this.frames.length)return;let t=this.frame_idx;t=parseInt(t.toString(),10),(t>this.frames.length-1||t<0)&&(t=0),this.manageDisposal(t);const s=this.frames[t],r=this.patchCanvas.getContext("2d"),n=this.offscreenCanvas.getContext("2d"),o=s.dims;this.frameImageData&&o.width==this.frameImageData.width&&o.height==this.frameImageData.height||(this.patchCanvas.width=o.width,this.patchCanvas.height=o.height,this.frameImageData=r.createImageData(o.width,o.height)),this.frameImageData.data.set(s.patch),r.putImageData(this.frameImageData,0,0),n.drawImage(this.patchCanvas,o.left,o.top);const i=n.getImageData(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height);this.ctx.putImageData(i,0,0),this.ctx.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height),e&&this.hovering&&this.drawPauseIcon(),this.last_frame=s}play(){this.playing=!0,requestAnimationFrame((e=>this.onAnimationFrame(e,0,0)))}pause(){this.playing=!1,requestAnimationFrame((()=>this.drawPlayIcon()))}drawPauseIcon(){if(!this.playing)return;this.renderImage(!1),this.ctx.fillStyle="rgb(0, 0, 0, 0.25)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);const e=.1*this.canvas.height;this.ctx.lineWidth=.04*this.canvas.height,this.ctx.beginPath(),this.ctx.moveTo(this.canvas.width/2-e/2,this.canvas.height/2-e),this.ctx.lineTo(this.canvas.width/2-e/2,this.canvas.height/2+e),this.ctx.fillStyle="rgb(200, 200, 200, 0.75)",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.canvas.width/2+e/2,this.canvas.height/2-e),this.ctx.lineTo(this.canvas.width/2+e/2,this.canvas.height/2+e),this.ctx.fillStyle="rgb(200, 200, 200, 0.75)",this.ctx.stroke(),this.ctx.lineWidth=.02*this.canvas.height,this.ctx.strokeStyle="rgb(200, 200, 200, 0.75)",this.ctx.beginPath(),this.ctx.arc(this.canvas.width/2,this.canvas.height/2,1.5*e,0,2*Math.PI),this.ctx.stroke()}drawPlayIcon(){if(this.playing)return;this.renderImage(!1),this.ctx.fillStyle="rgb(0, 0, 0, 0.25)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);const e=.1*this.canvas.height,t=new Path2D;t.moveTo(this.canvas.width/2+e,this.canvas.height/2),t.lineTo(this.canvas.width/2-e/2,this.canvas.height/2+e),t.lineTo(this.canvas.width/2-e/2,this.canvas.height/2-e),t.closePath(),this.ctx.fillStyle="rgb(200, 200, 200, 0.75)",this.ctx.fill(t);const s=1.5*e;this.ctx.lineWidth=.02*this.canvas.height,this.ctx.strokeStyle="rgb(200, 200, 200, 0.75)",this.ctx.beginPath(),this.ctx.arc(this.canvas.width/2,this.canvas.height/2,s,0,2*Math.PI),this.ctx.stroke()}getCanvasScale(){let e;return e=this.options.max_width&&this.hdr&&this.lsd.width>this.options.max_width?this.options.max_width/this.lsd.width:1,e}fetchGIF(e){const t=(0,n.getOpenPromise)(),s=new XMLHttpRequest;return s.open("GET",e,!0),s.responseType="arraybuffer",null==s||s.overrideMimeType("text/plain; charset=x-user-defined"),s.onload=()=>{if(200!=s.status)return this.showError(),t.reject();t.resolve(s.response)},s.onprogress=e=>e.lengthComputable&&this.doShowProgress(e.loaded,e.total,!0),s.onerror=e=>{r.default.error(e),this.showError()},s.send(),t}constructor(e,t){this.options=Object.assign({width:null,height:null,autoplay:!0,loop:!0,show_progress_bar:!0,progress_bg_color:"rgba(0,0,0,0.4)",progress_color:"rgba(255,0,22,.8)",progress_bar_height:5},t),this.el=e,this.gif_el=e.querySelector("img"),this.canvas=e.querySelector("canvas"),this.ctx=this.canvas.getContext("2d"),this.offscreenCanvas=document.createElement("canvas"),this.patchCanvas=document.createElement("canvas"),this.ctx_scaled=!1,this.frames=[],this.load_error=null,this.playing=this.options.autoplay,this.frame_idx=0,this.iteration_count=0,this.start=null,this.hovering=null,this.frameImageData=null,this.disposal_restore_from_idx=null,this.initialize()}}},"./src/shared/gif/styles.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/gif/styles.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/modals/image.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/plugins/modal/modal.js"),n=s("./src/shared/modals/templates/image.js"),o=s("./src/i18n/index.js"),i=s("./src/headless/index.js"),a=s("./src/utils/html.js"),l=s("./node_modules/lit/index.js");s("./src/shared/modals/styles/image.scss");class d extends r.default{renderModal(){return(0,n.default)({src:this.src})}getModalTitle(){return l.html`${(0,o.__)("Image: ")}<a target="_blank" rel="noopener" href="${this.src}">${(0,a.getFileName)(this.src)}</a>`}constructor(e){super(e),this.src=e.src}}i.api.elements.define("converse-image-modal",d)},"./src/shared/modals/message-versions.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});s("./src/shared/components/message-versions.js");var r=s("./src/plugins/modal/modal.js"),n=s("./src/i18n/index.js"),o=s("./node_modules/lit/index.js"),i=s("./src/headless/index.js");class a extends r.default{renderModal(){return o.html`<converse-message-versions .model="${this.model}"></converse-message-versions>`}getModalTitle(){return(0,n.__)("Message versions")}}i.api.elements.define("converse-message-versions-modal",a)},"./src/shared/modals/styles/image.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/modals/styles/image.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/modals/styles/user-details.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/modals/styles/user-details.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/modals/templates/image.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=e=>r.html`<img class="chat-image chat-image--modal" src="${e.src}">`},"./src/shared/modals/templates/user-details.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{tplUserDetailsModal:()=>h});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/until.js"),o=s("./src/headless/index.js"),i=s("./src/plugins/rosterview/utils.js"),a=s("./src/i18n/index.js");function l(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{Strophe:c}=o.converse.env;function u(e){const t=(0,a.__)("Add to blocklist");return r.html`<button type="button" @click="${t=>e.blockContact(t)}" class="btn btn-danger"><converse-icon class="fas fa-list-ul" color="var(--background-color)" size="1em"></converse-icon> ${t}</button>`}function h(e){var t,s,h,m;const f=null===(t=e.model)||void 0===t?void 0:t.vcard,p=f?f.toJSON():{},g=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){d(e,t,s[t])}))}return e}({},e.model.toJSON(),p),v=e.getContact(),_=v&&!v.isUnsaved(),y=o.api.settings.get("allow_contact_removal"),b=o._converse.session.get("domain"),j=o.api.disco.supports(c.NS.BLOCKING,b).then((t=>{return(s=function*(){const s=yield o.api.blocklist.get();t&&(s.get(e.model.get("jid"))?function(e){const t=(0,a.__)("Remove from blocklist");r.html`<button type="button" @click="${t=>e.unblockContact(t)}" class="btn btn-danger"><converse-icon class="fas fa-times" color="var(--background-color)" size="1em"></converse-icon> ${t}</button>`}(e):u(e))},function(){var e=this,t=arguments;return new Promise((function(r,n){var o=s.apply(e,t);function i(e){l(o,r,n,i,a,"next",e)}function a(e){l(o,r,n,i,a,"throw",e)}i(void 0)}))})();var s})),w=(0,a.__)("XMPP Address"),S=(0,a.__)("Email"),x=(0,a.__)("Full Name"),E=(0,a.__)("Nickname"),A=(0,a.__)("Role"),O=(0,a.__)("URL"),C=(0,a.__)("Groups"),T=(0,a.__)("Use commas to separate multiple values"),$=(0,a.__)("OMEMO"),k=(0,a.__)("Profile"),M=(0,a.__)("Edit"),I=[r.html`<li role="presentation" class="nav-item"><a class="nav-link ${"profile"===e.tab?"active":""}" id="profile-tab" href="#profile-tabpanel" aria-controls="profile-tabpanel" role="tab" @click="${t=>e.switchTab(t)}" data-name="profile" data-toggle="tab">${k}</a></li>`];_&&I.push(r.html`<li role="presentation" class="nav-item"><a class="nav-link ${"edit"===e.tab?"active":""}" id="edit-tab" href="#edit-tabpanel" aria-controls="edit-tabpanel" role="tab" @click="${t=>e.switchTab(t)}" data-name="edit" data-toggle="tab">${M}</a></li>`),(null===(s=o._converse.pluggable.plugins["converse-omemo"])||void 0===s?void 0:s.enabled(o._converse))&&I.push(r.html`<li role="presentation" class="nav-item"><a class="nav-link ${"omemo"===e.tab?"active":""}" id="omemo-tab" href="#omemo-tabpanel" aria-controls="omemo-tabpanel" role="tab" @click="${t=>e.switchTab(t)}" data-name="omemo" data-toggle="tab">${$}</a></li>`);const P=(null==v?void 0:v.get("nickname"))||(null==v||null===(h=v.vcard)||void 0===h?void 0:h.get("fullname")),N=(null==v?void 0:v.get("groups"))||[];return r.html`<ul class="nav nav-pills justify-content-center">${I}</ul><div class="tab-content"><div class="tab-pane ${"profile"===e.tab?"active":""}" id="profile-tabpanel" role="tabpanel" aria-labelledby="profile-tab"><div class="mb-4 centered"><converse-avatar .model="${e.model}" name="${e.model.getDisplayName()}" height="140" width="140"></converse-avatar></div>${g.fullname?r.html`<div class="row mb-2"><div class="col-sm-4"><label>${x}:</label></div><div class="col-sm-8">${g.fullname}</div></div>`:""}<div class="row mb-2"><div class="col-sm-4"><label>${w}:</label></div><div class="col-sm-8"><a href="xmpp:${g.jid}">${g.jid}</a></div></div>${v?r.html`<div class="row mb-2"><div class="col-sm-4"><label>${(0,a.__)("Presence")}:</label></div><div class="col-sm-8">${function(e){const t=null==e?void 0:e.get("subscription");return"none"===t?(0,a.__)("Neither of you receive presence updates"):"to"===t?(0,a.__)("Only you receive presence updates"):"from"===t?(0,a.__)("Only they receive presence updates"):"both"===t?(0,a.__)("Both of you receive presence updates"):""}(v)}</div></div>`:""} ${g.nickname?r.html`<div class="row mb-2"><div class="col-sm-4"><label>${E}:</label></div><div class="col-sm-8">${g.nickname}</div></div>`:""} ${g.url?r.html`<div class="row mb-2"><div class="col-sm-4"><label>${O}:</label></div><div class="col-sm-8"><a target="_blank" rel="noopener" href="${g.url}">${g.url}</a></div></div>`:""} ${g.email?r.html`<div class="row mb-2"><div class="col-sm-4"><label>${S}:</label></div><div class="col-sm-8"><a href="mailto:${g.email}">${g.email}</a></div></div>`:""} ${g.role?r.html`<div class="row mb-2"><div class="col-sm-4"><label>${A}:</label></div><div class="col-sm-8">${g.role}</div></div>`:""} ${N.length?r.html`<div class="row mb-2"><div class="col-sm-4"><label>${C}:</label></div><div class="col-sm-8">${N.map((e=>r.html`<span class="badge badge-roster-group me-1">${e}</span>`))}</div></div>`:""} ${!(null==v?void 0:v.get("requesting"))&&_&&v?"":r.html`<hr>`} ${(null==v?void 0:v.get("requesting"))?r.html`<div class="row mb-2"><div class="col-sm-4"><label>${(0,a.__)("Contact Request")}:</label></div><div class="col-sm-8">${function(e){const t=(0,a.__)("Accept");return r.html`<button type="button" @click="${t=>e.acceptContactRequest(t)}" class="btn btn-success accept-contact-request"><converse-icon class="fas fa-user-plus" color="var(--background-color)" size="1em"></converse-icon> ${t}</button>`}(e)} ${function(e){const t=(0,a.__)("Decline");return r.html`<button type="button" @click="${t=>e.declineContactRequest(t)}" class="btn btn-danger decline-contact-request"><converse-icon class="fas fa-user-plus" color="var(--background-color)" size="1em"></converse-icon> ${t}</button>`}(e)}</div></div>`:""} ${_?"":function(e){const t=(0,a.__)("Add as contact");return r.html`<button type="button" @click="${t=>e.addContact(t)}" class="btn btn-success add-contact"><converse-icon class="fas fa-user-plus" color="var(--background-color)" size="1em"></converse-icon> ${t}</button>`}(e)} ${v?"":(0,n.until)(j.then((()=>u(e))),"")}</div>${_?r.html`<div class="tab-pane ${"edit"===e.tab?"active":""}" id="edit-tabpanel" role="tabpanel" aria-labelledby="edit-tab">${"edit"===e.tab?r.html`<form class="converse-form" @submit="${t=>e.updateContact(t)}"><div class="mb-3"><label class="form-label clearfix" for="name">${(0,a.__)("Name")}:</label> <input type="text" name="name" value="${P}" class="form-control"></div><div class="mb-3"><label class="form-label clearfix" for="name">${C}:</label><div class="mb-1"><small class="form-text text-muted">${T}</small></div><converse-autocomplete .list="${(0,i.getGroupsAutoCompleteList)()}" name="groups" value="${N}"></converse-autocomplete></div><button type="submit" class="btn btn-primary">${(0,a.__)("Update")}</button></form><hr>${y&&_?function(e){const t=(0,a.__)("Remove as contact");return r.html`<button type="button" @click="${t=>e.removeContact(t)}" class="btn btn-danger remove-contact"><converse-icon class="fas fa-trash-alt" color="var(--background-color)" size="1em"></converse-icon> ${t}</button>`}(e):""} ${(0,n.until)(j.then((()=>u(e))),"")}`:""}</div>`:""} ${(null===(m=o._converse.pluggable.plugins["converse-omemo"])||void 0===m?void 0:m.enabled(o._converse))?r.html`<div class="tab-pane ${"omemo"===e.tab?"active":""}" id="omemo-tabpanel" role="tabpanel" aria-labelledby="omemo-tab">${"omemo"===e.tab?r.html`<converse-omemo-fingerprints jid="${g.jid}"></converse-omemo-fingerprints>`:""}</div>`:""}</div>`}},"./src/shared/modals/user-details.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),n=s("./src/plugins/rosterview/utils.js"),o=s("./src/plugins/modal/modal.js"),i=(s("./src/i18n/index.js"),s("./src/shared/modals/templates/user-details.js"));s("./src/shared/modals/styles/user-details.scss");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}}class d extends o.default{initialize(){super.initialize(),this.addListeners(),r.api.trigger("userDetailsModalInitialized",this.model)}addListeners(){this.listenTo(this.model,"change",(()=>this.requestUpdate())),this.model instanceof r._converse.exports.ChatBox?(this.model.rosterContactAdded.then((()=>this.registerContactEventHandlers(this.model.contact))),this.registerContactEventHandlers(this.model.contact)):this.registerContactEventHandlers(this.model)}getContact(){return this.model instanceof r._converse.exports.ChatBox?this.model.contact:this.model}shouldUpdate(e){return e.has("model")&&this.model&&(this.stopListening(),this.addListeners(),this.tab="profile",this.requestUpdate()),!0}renderModal(){return(0,i.tplUserDetailsModal)(this)}getModalTitle(){return this.model.getDisplayName()}registerContactEventHandlers(e){e&&(this.listenTo(e,"change",(()=>this.requestUpdate())),this.listenTo(e,"destroy",(()=>this.close())),this.listenTo(e.vcard,"change",(()=>this.requestUpdate())),e.vcard&&r.api.vcard.update(e.vcard,!0))}addContact(e){return l((function*(){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),this.modal.hide(),r.api.modal.show("converse-add-contact-modal",{contact:this.model},e)})).call(this)}updateContact(e){return l((function*(){var t,s;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e);const r=e.target,n=new FormData(r),o=(n.get("name")||"").trim(),i=(null===(s=n.get("groups"))||void 0===s?void 0:s.split(",").map((e=>e.trim())))||[];this.getContact().update({nickname:o,groups:i}),this.modal.hide()})).call(this)}removeContact(e){return l((function*(){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),setTimeout((()=>(0,n.removeContact)(this.getContact())),1),this.modal.hide()})).call(this)}blockContact(e){return l((function*(){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),setTimeout((()=>(0,n.blockContact)(this.getContact())),1),this.modal.hide()})).call(this)}unblockContact(e){return l((function*(){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),setTimeout((()=>(0,n.unblockContact)(this.getContact())),1),this.modal.hide()})).call(this)}acceptContactRequest(e){return l((function*(){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),setTimeout((()=>{r.api.modal.show("converse-accept-contact-request-modal",{contact:this.getContact()},e)})),this.modal.hide()})).call(this)}declineContactRequest(e){return l((function*(){var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),setTimeout((()=>(0,n.declineContactRequest)(this.getContact()))),this.modal.hide()})).call(this)}constructor(e){super(e),this.tab="profile"}}r.api.elements.define("converse-user-details-modal",d)},"./src/shared/qrcode/component.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/shared/components/element.js"),i=s("./src/shared/qrcode/generator.js"),a=s("./src/shared/qrcode/constants.js");s("./src/shared/qrcode/qrcode.scss");function l(e,t,s){if(!t.has(e))throw new TypeError("attempted to "+s+" private field on non-instance");return t.get(e)}function d(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,l(e,t,"get"))}function c(e,t,s){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,s)}function u(e,t,s){return function(e,t,s){if(t.set)t.set.call(e,s);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=s}}(e,l(e,t,"set"),s),s}var h=new WeakMap;class m extends o.CustomElement{static get properties(){return{text:{type:String},width:{type:String},height:{type:String}}}render(){const e=d(this,h).getModuleCount(),t=[];for(let s=0;s<e;s++)for(let n=0;n<e;n++)d(this,h).isDark(s,n)&&t.push(r.svg`<use x="${s}" y="${n}" href="#template"></use>`);return r.svg`<svg viewBox="0 0 ${e} ${e}" width="${this.width}" height="${this.height}" fill="${this.colorLight}"><rect fill="${this.colorLight}" width="100%" height="100%"></rect><rect fill="${this.colorDark}" width="1" height="1" id="template"></rect>${t}</svg>`}shouldUpdate(e){return!d(this,h)||e.has("text")||e.has("correctLevel")?(this.title=this.text,u(this,h,new i.QRCodeModel(this.text,this.correctLevel)),d(this,h).make(),super.shouldUpdate(e)||!0):super.shouldUpdate(e)}constructor(){super(),c(this,h,{writable:!0,value:void 0}),u(this,h,null),this.text=null,this.width="200px",this.height="200px",this.colorDark="#000000",this.colorLight="#ffffff",this.correctLevel=a.QRErrorCorrectLevelMap.H}}n.api.elements.define("converse-qr-code",m);const f=m},"./src/shared/qrcode/constants.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{PATTERN_POSITION_TABLE:()=>a,QRCodeLimitLength:()=>i,QRErrorCorrectLevelMap:()=>r,QRMaskPattern:()=>o,QRMode:()=>n,RS_BLOCK_TABLE:()=>l});const r={L:1,M:0,Q:3,H:2},n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},i=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],a=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],l=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]]},"./src/shared/qrcode/generator.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{QRCodeModel:()=>i});var r=s("./src/shared/qrcode/constants.js"),n=s("./src/shared/qrcode/polynomial.js"),o=s("./src/shared/qrcode/utils.js");class i{static get PAD0(){return 236}static get PAD1(){return 17}isDark(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(let e=0;e<this.moduleCount;e++){this.modules[e]=new Array(this.moduleCount);for(let t=0;t<this.moduleCount;t++)this.modules[e][t]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)}setupPositionProbePattern(e,t){for(let s=-1;s<=7;s++)if(!(e+s<=-1||this.moduleCount<=e+s))for(let r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[e+s][t+r]=0<=s&&s<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==s||6==s)||2<=s&&s<=4&&2<=r&&r<=4)}getBestMaskPattern(){let e=0,t=0;for(let s=0;s<8;s++){this.makeImpl(!0,s);let r=o.QRUtil.getLostPoint(this);(0==s||e>r)&&(e=r,t=s)}return t}setupTimingPattern(){for(let e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(let e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)}setupPositionAdjustPattern(){let e=o.QRUtil.getPatternPosition(this.typeNumber);for(let t=0;t<e.length;t++)for(let s=0;s<e.length;s++){let r=e[t],n=e[s];if(null==this.modules[r][n])for(let e=-2;e<=2;e++)for(let t=-2;t<=2;t++)this.modules[r+e][n+t]=-2==e||2==e||-2==t||2==t||0==e&&0==t}}setupTypeNumber(e){let t=o.QRUtil.getBCHTypeNumber(this.typeNumber);for(let s=0;s<18;s++){let r=!e&&1==(t>>s&1);this.modules[Math.floor(s/3)][s%3+this.moduleCount-8-3]=r}for(let s=0;s<18;s++){let r=!e&&1==(t>>s&1);this.modules[s%3+this.moduleCount-8-3][Math.floor(s/3)]=r}}setupTypeInfo(e,t){const s=this.errorCorrectLevel<<3|t,r=o.QRUtil.getBCHTypeInfo(s);for(let t=0;t<15;t++){let s=!e&&1==(r>>t&1);t<6?this.modules[t][8]=s:t<8?this.modules[t+1][8]=s:this.modules[this.moduleCount-15+t][8]=s}for(let t=0;t<15;t++){let s=!e&&1==(r>>t&1);t<8?this.modules[8][this.moduleCount-t-1]=s:t<9?this.modules[8][15-t-1+1]=s:this.modules[8][15-t-1]=s}this.modules[this.moduleCount-8][8]=!e}mapData(e,t){let s=-1,r=this.moduleCount-1,n=7,i=0;for(let a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(let s=0;s<2;s++)if(null==this.modules[r][a-s]){let l=!1;i<e.length&&(l=1==(e[i]>>>n&1)),o.QRUtil.getMask(t,r,a-s)&&(l=!l),this.modules[r][a-s]=l,n--,-1==n&&(i++,n=7)}if(r+=s,r<0||this.moduleCount<=r){r-=s,s=-s;break}}}static createData(e,t,s){let r=l.getRSBlocks(e,t);const n=new d;for(let t=0;t<s.length;t++){let r=s[t];n.put(r.mode,4),n.put(r.getLength(),o.QRUtil.getLengthInBits(r.mode,e)),r.write(n)}let a=0;for(let e=0;e<r.length;e++)a+=r[e].dataCount;if(n.getLengthInBits()>8*a)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+8*a+")");for(n.getLengthInBits()+4<=8*a&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=8*a||(n.put(i.PAD0,8),n.getLengthInBits()>=8*a));)n.put(i.PAD1,8);return i.createBytes(n,r)}static createBytes(e,t){let s=0,r=0,i=0,a=new Array(t.length),l=new Array(t.length);for(let d=0;d<t.length;d++){let c=t[d].dataCount,u=t[d].totalCount-c;r=Math.max(r,c),i=Math.max(i,u),a[d]=new Array(c);for(let t=0;t<a[d].length;t++)a[d][t]=255&e.buffer[t+s];s+=c;let h=o.QRUtil.getErrorCorrectPolynomial(u),m=new n.default(a[d],h.getLength()-1).mod(h);l[d]=new Array(h.getLength()-1);for(let e=0;e<l[d].length;e++){let t=e+m.getLength()-l[d].length;l[d][e]=t>=0?m.get(t):0}}let d=0;for(let e=0;e<t.length;e++)d+=t[e].totalCount;let c=new Array(d),u=0;for(let e=0;e<r;e++)for(let s=0;s<t.length;s++)e<a[s].length&&(c[u++]=a[s][e]);for(let e=0;e<i;e++)for(let s=0;s<t.length;s++)e<l[s].length&&(c[u++]=l[s][e]);return c}constructor(e,t){this.text=e,this.errorCorrectLevel=t,this.typeNumber=(0,o.getTypeNumber)(this.text,this.errorCorrectLevel),this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[new a(this.text)]}}class a{getLength(){return this.parsedData.length}write(e){for(let t=0,s=this.parsedData.length;t<s;t++)e.put(this.parsedData[t],8)}constructor(e){this.mode=r.QRMode.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(let e=0,t=this.data.length;e<t;e++){let t=[],s=this.data.charCodeAt(e);s>65536?(t[0]=240|(1835008&s)>>>18,t[1]=128|(258048&s)>>>12,t[2]=128|(4032&s)>>>6,t[3]=128|63&s):s>2048?(t[0]=224|(61440&s)>>>12,t[1]=128|(4032&s)>>>6,t[2]=128|63&s):s>128?(t[0]=192|(1984&s)>>>6,t[1]=128|63&s):t[0]=s,this.parsedData.push(t)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}}class l{static getRSBlocks(e,t){let s=l.getRsBlockTable(e,t);if(null==s)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);let r=s.length/3,n=[];for(let e=0;e<r;e++){let t=s[3*e+0],r=s[3*e+1],o=s[3*e+2];for(let e=0;e<t;e++)n.push(new l(r,o))}return n}static getRsBlockTable(e,t){switch(t){case r.QRErrorCorrectLevelMap.L:return r.RS_BLOCK_TABLE[4*(e-1)+0];case r.QRErrorCorrectLevelMap.M:return r.RS_BLOCK_TABLE[4*(e-1)+1];case r.QRErrorCorrectLevelMap.Q:return r.RS_BLOCK_TABLE[4*(e-1)+2];case r.QRErrorCorrectLevelMap.H:return r.RS_BLOCK_TABLE[4*(e-1)+3];default:return}}constructor(e,t){this.totalCount=e,this.dataCount=t}}class d{get(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)}put(e,t){for(let s=0;s<t;s++)this.putBit(1==(e>>>t-s-1&1))}getLengthInBits(){return this.length}putBit(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}constructor(){this.buffer=[],this.length=0}}},"./src/shared/qrcode/polynomial.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{QRMath:()=>o,default:()=>n});class r{get(e){return this.num[e]}getLength(){return this.num.length}multiply(e){let t=new Array(this.getLength()+e.getLength()-1);for(let s=0;s<this.getLength();s++)for(let r=0;r<e.getLength();r++)t[s+r]^=o.gexp(o.glog(this.get(s))+o.glog(e.get(r)));return new r(t,0)}mod(e){if(this.getLength()-e.getLength()<0)return this;let t=o.glog(this.get(0))-o.glog(e.get(0)),s=new Array(this.getLength());for(let e=0;e<this.getLength();e++)s[e]=this.get(e);for(let r=0;r<e.getLength();r++)s[r]^=o.gexp(o.glog(e.get(r))+t);return new r(s,0).mod(e)}constructor(e,t){if(null==e.length)throw new Error(e.length+"/"+t);let s=0;for(;s<e.length&&0==e[s];)s++;this.num=new Array(e.length-s+t);for(let t=0;t<e.length-s;t++)this.num[t]=e[t+s]}}const n=r,o={glog:function(e){if(e<1)throw new Error("glog("+e+")");return o.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return o.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(let e=0;e<8;e++)o.EXP_TABLE[e]=1<<e;for(let e=8;e<256;e++)o.EXP_TABLE[e]=o.EXP_TABLE[e-4]^o.EXP_TABLE[e-5]^o.EXP_TABLE[e-6]^o.EXP_TABLE[e-8];for(let e=0;e<255;e++)o.LOG_TABLE[o.EXP_TABLE[e]]=e},"./src/shared/qrcode/qrcode.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/qrcode/qrcode.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/qrcode/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{QRUtil:()=>i,getTypeNumber:()=>o});var r=s("./src/shared/qrcode/constants.js"),n=s("./src/shared/qrcode/polynomial.js");function o(e,t){let s=1,n=function(e){let t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}(e);for(let e=0,o=r.QRCodeLimitLength.length;e<=o;e++){let o=0;switch(t){case r.QRErrorCorrectLevelMap.L:o=r.QRCodeLimitLength[e][0];break;case r.QRErrorCorrectLevelMap.M:o=r.QRCodeLimitLength[e][1];break;case r.QRErrorCorrectLevelMap.Q:o=r.QRCodeLimitLength[e][2];break;case r.QRErrorCorrectLevelMap.H:o=r.QRCodeLimitLength[e][3]}if(n<=o)break;s++}if(s>r.QRCodeLimitLength.length)throw new Error("Too long data");return s}const i={G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo(e){let t=e<<10;for(;i.getBCHDigit(t)-i.getBCHDigit(i.G15)>=0;)t^=i.G15<<i.getBCHDigit(t)-i.getBCHDigit(i.G15);return(e<<10|t)^i.G15_MASK},getBCHTypeNumber(e){let t=e<<12;for(;i.getBCHDigit(t)-i.getBCHDigit(i.G18)>=0;)t^=i.G18<<i.getBCHDigit(t)-i.getBCHDigit(i.G18);return e<<12|t},getBCHDigit(e){let t=0;for(;0!=e;)t++,e>>>=1;return t},getPatternPosition:e=>r.PATTERN_POSITION_TABLE[e-1],getMask(e,t,s){switch(e){case r.QRMaskPattern.PATTERN000:return(t+s)%2==0;case r.QRMaskPattern.PATTERN001:return t%2==0;case r.QRMaskPattern.PATTERN010:return s%3==0;case r.QRMaskPattern.PATTERN011:return(t+s)%3==0;case r.QRMaskPattern.PATTERN100:return(Math.floor(t/2)+Math.floor(s/3))%2==0;case r.QRMaskPattern.PATTERN101:return t*s%2+t*s%3==0;case r.QRMaskPattern.PATTERN110:return(t*s%2+t*s%3)%2==0;case r.QRMaskPattern.PATTERN111:return(t*s%3+(t+s)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial(e){let t=new n.default([1],0);for(let s=0;s<e;s++)t=t.multiply(new n.default([1,n.QRMath.gexp(s)],0));return t},getLengthInBits(e,t){if(1<=t&&t<10)switch(e){case r.QRMode.MODE_NUMBER:return 10;case r.QRMode.MODE_ALPHA_NUM:return 9;case r.QRMode.MODE_8BIT_BYTE:case r.QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case r.QRMode.MODE_NUMBER:return 12;case r.QRMode.MODE_ALPHA_NUM:return 11;case r.QRMode.MODE_8BIT_BYTE:return 16;case r.QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case r.QRMode.MODE_NUMBER:return 14;case r.QRMode.MODE_ALPHA_NUM:return 13;case r.QRMode.MODE_8BIT_BYTE:return 16;case r.QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint(e){let t=e.getModuleCount(),s=0;for(let r=0;r<t;r++)for(let n=0;n<t;n++){let o=0,i=e.isDark(r,n);for(let s=-1;s<=1;s++)if(!(r+s<0||t<=r+s))for(let a=-1;a<=1;a++)n+a<0||t<=n+a||0==s&&0==a||i==e.isDark(r+s,n+a)&&o++;o>5&&(s+=3+o-5)}for(let r=0;r<t-1;r++)for(let n=0;n<t-1;n++){let t=0;e.isDark(r,n)&&t++,e.isDark(r+1,n)&&t++,e.isDark(r,n+1)&&t++,e.isDark(r+1,n+1)&&t++,0!=t&&4!=t||(s+=3)}for(let r=0;r<t;r++)for(let n=0;n<t-6;n++)e.isDark(r,n)&&!e.isDark(r,n+1)&&e.isDark(r,n+2)&&e.isDark(r,n+3)&&e.isDark(r,n+4)&&!e.isDark(r,n+5)&&e.isDark(r,n+6)&&(s+=40);for(let r=0;r<t;r++)for(let n=0;n<t-6;n++)e.isDark(n,r)&&!e.isDark(n+1,r)&&e.isDark(n+2,r)&&e.isDark(n+3,r)&&e.isDark(n+4,r)&&!e.isDark(n+5,r)&&e.isDark(n+6,r)&&(s+=40);let r=0;for(let s=0;s<t;s++)for(let n=0;n<t;n++)e.isDark(n,s)&&r++;return s+=10*(Math.abs(100*r/t/t-50)/5),s}}},"./src/shared/registry.js":(e,t,s)=>{"use strict";s.r(t);var r=s("./src/headless/index.js");const n={},o={registry:n,define(e,t){this.registry[e]=t},register(){Object.keys(n).forEach((e=>{customElements.get(e)||customElements.define(e,n[e])}))}};Object.assign(r.api,{elements:o})},"./src/shared/styles/index.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/styles/index.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/styles/status.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/styles/status.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/texture/components/image.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),n=s("./src/shared/components/element.js"),o=s("./src/shared/texture/templates/gif.js"),i=s("./src/utils/url.js"),a=s("./src/shared/texture/templates/image.js");const{isGIFURL:l}=r.u;class d extends n.CustomElement{static get properties(){return{src:{type:String},onImgLoad:{type:Function},href:{type:String}}}render(){return l(this.src)&&(0,i.shouldRenderMediaFromURL)(this.src,"image")?(0,o.default)((0,i.filterQueryParamsFromURL)(this.src),!0):(0,a.default)({src:(0,i.filterQueryParamsFromURL)(this.src),href:this.href,onClick:this.onImgClick,onLoad:this.onImgLoad})}constructor(){super(),this.src=null,this.href=null,this.onImgClick=null,this.onImgLoad=null}}r.api.elements.define("converse-image",d)},"./src/shared/texture/components/texture.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/shared/texture/directives/texture.js");s("./src/shared/texture/styles/texture.scss");class o extends r.LitElement{static get properties(){return{embed_audio:{type:Boolean},embed_videos:{type:Boolean},mentions:{type:Array},nick:{type:String},offset:{type:Number},onImgClick:{type:Function},onImgLoad:{type:Function},render_styling:{type:Boolean},show_images:{type:Boolean},hide_media_urls:{type:Boolean},show_me_message:{type:Boolean},text:{type:String}}}createRenderRoot(){return this}render(){const e={embed_audio:this.embed_audio,embed_videos:this.embed_videos,hide_media_urls:this.hide_media_urls,mentions:this.mentions,nick:this.nick,onImgClick:this.onImgClick,onImgLoad:this.onImgLoad,render_styling:this.render_styling,show_images:this.show_images,show_me_message:this.show_me_message};return(0,n.default)(this.text,this.offset,e)}constructor(){super(),this.nick=null,this.onImgClick=null,this.onImgLoad=null,this.text=null,this.embed_audio=!1,this.embed_videos=!1,this.hide_media_urls=!1,this.mentions=[],this.offset=0,this.render_styling=!1,this.show_image_urls=!0,this.show_images=!1,this.show_me_message=!1}}customElements.define("converse-texture",o)},"./src/shared/texture/constants.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{bracketing_directives:()=>r,dont_escape:()=>i,styling_directives:()=>n,styling_map:()=>o});const r=["*","_","~","`"],n=[...r,"```",">"],o={"*":{name:"strong",type:"span"},_:{name:"emphasis",type:"span"},"~":{name:"strike",type:"span"},"`":{name:"preformatted",type:"span"},"```":{name:"preformatted_block",type:"block"},">":{name:"quote",type:"block"}},i=["_",">","`","~"]},"./src/shared/texture/directives/image.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{renderImage:()=>c});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/async-directive.js"),o=s("./node_modules/lit/directive.js"),i=s("./src/headless/index.js"),a=s("./src/utils/html.js");const{isURLWithImageExtension:l}=i.u;class d extends n.AsyncDirective{render(e,t,s,n){return t?r.html`<a href="${t}" class="chat-image__link" target="_blank" rel="noopener">${this.renderImage(e,t,s,n)}</a>`:this.renderImage(e,t,s,n)}renderImage(e,t,s,n){return r.html`<img class="chat-image img-thumbnail" loading="lazy" src="${e}" @click="${n}" @error="${()=>this.onError(e,t,s,n)}" @load="${s}">`}onError(e,t,s,r){if(l(e))t&&this.setValue((0,a.getHyperlinkTemplate)(t));else try{const n=new URL(e),o=n.pathname.split("/").pop();if(o){const e=`${o}.png`;n.pathname=n.pathname.replace(o,e),this.setValue(c(n.toString(),t,s,r))}}catch(t){console.error("Invalid URL:",e)}}}const c=(0,o.directive)(d)},"./src/shared/texture/directives/texture.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/until.js"),o=s("./node_modules/lit/directive.js"),i=s("./src/shared/texture/texture.js");function a(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}class l{transform(){return(e=function*(){const e=new i.Texture(this.text,this.offset,this.options);try{yield e.addTemplates()}catch(e){console.error(e)}return e.payload},function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){a(o,r,n,i,l,"next",e)}function l(e){a(o,r,n,i,l,"throw",e)}i(void 0)}))}).call(this);var e}render(){return r.html`${(0,n.until)(this.transform(),r.html`${this.text}`)}`}constructor(e,t,s={}){this.offset=t,this.options=s,this.text=e}}class d extends o.Directive{render(e,t,s,r){const n=new l(e,t,s).render();return null==r||r(),n}}const c=(0,o.directive)(d)},"./src/shared/texture/styles/audio.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/texture/styles/audio.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/texture/styles/texture.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/shared/texture/styles/texture.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/shared/texture/templates/audio.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js");s("./src/shared/texture/styles/audio.scss");const o=(e,t,s)=>{const{hostname:o}=n.u.getURL(e);return r.html`<figure class="audio-element">${s||!t?r.html`<figcaption>${s?r.html`${s}<br>`:""} ${t?"":r.html`<a target="_blank" rel="noopener" title="${e}" href="${e}">${o}</a>`}</figcaption>`:""}<audio controls src="${e}"></audio></figure>`}},"./src/shared/texture/templates/gif.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");s("./src/shared/gif/component.js");const n=(e,t)=>r.html`<converse-gif autoplay noloop fallback="empty" src="${e}"></converse-gif>${t?"":r.html`<a target="_blank" rel="noopener" href="${e}">${e}</a>`}`},"./src/shared/texture/templates/image.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/shared/texture/directives/image.js");const o=e=>r.html`${(0,n.renderImage)(e.src||e.url,e.href,e.onLoad,e.onClick)}`},"./src/shared/texture/templates/spotify.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js");const o=(e,t,s)=>{const{hostname:o}=n.u.getURL(t);return r.html`<figure><iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/${e}" width="100%" height="352" frameborder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>${s?"":r.html`<a target="_blank" rel="noopener" title="${t}" href="${t}">${o}</a>`}</figure>`}},"./src/shared/texture/templates/video.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js");const o=(e,t)=>{const{hostname:s}=n.u.getURL(e);return r.html`<figure><video controls preload="metadata" src="${e}"></video>${t||!s?"":r.html`<a target="_blank" rel="noopener" title="${e}" href="${e}">${s}</a>`}</figure>`}},"./src/shared/texture/texture.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{Texture:()=>O,getDirectiveTemplate:()=>k});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/until.js"),o=s("./node_modules/lit/directive.js"),i=s("./src/headless/index.js"),a=s("./src/shared/texture/templates/audio.js"),l=s("./src/shared/texture/templates/gif.js"),d=s("./src/shared/texture/templates/image.js"),c=s("./src/shared/texture/templates/video.js"),u=s("./src/shared/texture/templates/spotify.js"),h=s("./src/shared/chat/utils.js"),m=s("./src/utils/html.js"),f=s("./src/utils/url.js"),p=s("./src/shared/texture/utils.js"),g=s("./src/shared/texture/constants.js");function v(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function _(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var o=e.apply(t,s);function i(e){v(o,r,n,i,a,"next",e)}function a(e){v(o,r,n,i,a,"throw",e)}i(void 0)}))}}function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){y(e,t,s[t])}))}return e}function j(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const{addMediaURLsOffset:w,convertASCII2Emoji:S,getCodePointReferences:x,getMediaURLsMetadata:E,getShortnameReferences:A}=i.u;class O extends String{shouldRenderMedia(e,t){let s;return"image"===t?s=this.show_images:"audio"===t?s=this.embed_audio:"video"===t&&(s=this.embed_videos),"boolean"==typeof s?s:(0,f.shouldRenderMediaFromURL)(e,t)}addHyperlinkTemplate(e){return _((function*(){const{url:t}=e,s=(0,f.filterQueryParamsFromURL)(t);let r;if(e.is_gif&&this.shouldRenderMedia(t,"image"))r=(0,l.default)(s,this.hide_media_urls);else if(e.is_image&&this.shouldRenderMedia(t,"image"))r=(0,d.default)({src:s,href:this.hide_media_urls?null:s,onClick:this.onImgClick,onLoad:this.onImgLoad});else if(e.is_video&&this.shouldRenderMedia(t,"video"))r=(0,c.default)(s,this.hide_media_urls);else if(e.is_audio&&this.shouldRenderMedia(t,"audio"))r=(0,a.default)(s,this.hide_media_urls);else if(i.api.settings.get("embed_3rd_party_media_players")&&(0,p.isSpotifyTrack)(t)){const e=t.split("/track/")[1];r=(0,u.default)(e,t,this.hide_media_urls)}return r||(0,m.getHyperlinkTemplate)(s)})).call(this)}addHyperlinks(e,t){return _((function*(){const s=t+this.offset,r=this.media_urls||(yield E(e,t)).media_urls||[],n=w(r,e,s);yield Promise.all(n.filter((e=>!e.is_encrypted)).map((e=>_((function*(){const s=yield this.addHyperlinkTemplate(e);this.addTemplateResult(e.start+t,e.end+t,s)})).call(this))))})).call(this)}addMapURLs(e,t){const s=/geo:([\-0-9.]+),([\-0-9.]+)(?:,([\-0-9.]+))?(?:\?(.*))?/g,r=e.matchAll(s);for(const e of r)this.addTemplateResult(e.index+t,e.index+e[0].length+t,(0,m.getHyperlinkTemplate)(e[0].replace(s,i.api.settings.get("geouri_replacement"))))}addEmojis(e,t){[...A(e.toString()),...x(e.toString())].forEach((e=>{this.addTemplateResult(e.begin+t,e.end+t,(0,h.getEmojiMarkup)(e,{add_title_wrapper:!0}))}))}addMentions(e,t){var s;const r=t+this.offset;null===(s=this.mentions)||void 0===s||s.forEach((s=>{const n=Number(s.begin)-r;if(n<0||n>=r+e.length)return;const o=Number(s.end)-r,i=e.slice(n,o);i===this.nick?this.addTemplateResult(n+t,o+t,(0,p.tplMentionWithNick)(j(b({},s),{mention:i}))):this.addTemplateResult(n+t,o+t,(0,p.tplMention)(j(b({},s),{mention:i})))}))}addStyling(){if(!(0,p.containsDirectives)(this))return;const e=[],t=this.mentions.map((e=>Array.from({length:Number(e.end)},((t,s)=>Number(e.begin)+s))));let s=0;for(;s<this.length;){if(t.filter((e=>e.includes(s))).length){s++;continue}const{d:r,length:n}=(0,p.getDirectiveAndLength)(this,s);if(r&&n){const t=(0,p.isQuoteDirective)(r),o=s+n,i=t?o:o-r.length;let a="```"===r?s+r.length+1:s+r.length;t&&" "===this[a]&&(a+=1);const l=a,d=this.slice(a,i);e.push({begin:s,template:k(r,d,l,this.options),end:o}),s=o}s++}e.forEach((e=>this.addTemplateResult(e.begin,e.end,e.template)))}trimMeMessage(){0===this.offset&&this.isMeCommand()&&(this.payload[0]=this.payload[0].substring(4))}addAnnotations(e){return _((function*(){const t=this.marshall();let s=0;for(const r of t)r&&((0,p.isString)(r)?(yield e.call(this,r,s),s+=r.length):s=r.end)})).call(this)}addTemplates(){return _((function*(){yield i.api.trigger("beforeMessageBodyTransformed",this,{synchronous:!0}),this.render_styling&&this.addStyling(),yield this.addAnnotations(this.addMentions),yield this.addAnnotations(this.addHyperlinks),yield this.addAnnotations(this.addMapURLs),yield i.api.emojis.initialize(),yield this.addAnnotations(this.addEmojis),yield i.api.trigger("afterMessageBodyTransformed",this,{synchronous:!0}),this.payload=this.marshall(),this.options.show_me_message&&this.trimMeMessage(),this.payload=this.payload.map((e=>(0,p.isString)(e)?e:e.template))})).call(this)}addTemplateResult(e,t,s){this.references.push({begin:e,end:t,template:s})}isMeCommand(){const e=this.toString();return!!e&&e.startsWith("/me ")}marshall(){let e=[this.toString()];return this.references.sort(((e,t)=>t.begin-e.begin)).forEach((t=>{const s=e.shift();e=[s.slice(0,t.begin),t,s.slice(t.end),...e]})),e.reduce(((e,t)=>(0,p.isString)(t)?[...e,S((0,p.collapseLineBreaks)(t))]:[...e,t]),[])}constructor(e,t=0,s={}){super(e),this.embed_audio=null==s?void 0:s.embed_audio,this.embed_videos=null==s?void 0:s.embed_videos,this.mentions=(null==s?void 0:s.mentions)||[],this.media_urls=null==s?void 0:s.media_urls,this.nick=null==s?void 0:s.nick,this.offset=t,this.onImgClick=null==s?void 0:s.onImgClick,this.onImgLoad=null==s?void 0:s.onImgLoad,this.options=s,this.payload=[],this.references=[],this.render_styling=null==s?void 0:s.render_styling,this.show_images=null==s?void 0:s.show_images,this.hide_media_urls=null==s?void 0:s.hide_media_urls}}class C extends o.Directive{static transform(e){return _((function*(){try{yield e.addTemplates()}catch(e){console.error(e)}return e.payload}))()}render(e,t,s){const o=new O(e,t,Object.assign(s,{show_images:!1,embed_videos:!1,embed_audio:!1}));return r.html`${(0,n.until)(C.transform(o),r.html`${o}`)}`}}const T=(0,o.directive)(C),$={emphasis:(e,t,s)=>r.html`<span class="styling-directive">_</span><i>${T(e,t,s)}</i><span class="styling-directive">_</span>`,preformatted:e=>r.html`<span class="styling-directive">\`</span><code>${e}</code><span class="styling-directive">\`</span>`,preformatted_block:e=>r.html`<div class="styling-directive">\`\`\`</div><pre><code class="block">${e}</code></pre><div class="styling-directive">\`\`\`</div>`,quote:(e,t,s)=>r.html`<blockquote>${T(e,t,s)}</blockquote>`,strike:(e,t,s)=>r.html`<span class="styling-directive">~</span><del>${T(e,t,s)}</del><span class="styling-directive">~</span>`,strong:(e,t,s)=>r.html`<span class="styling-directive">*</span><b>${T(e,t,s)}</b><span class="styling-directive">*</span>`};function k(e,t,s,r){const n=$[g.styling_map[e].name];if((0,p.isQuoteDirective)(e)){return n(t.replace(/\n\u200B*>[ \f\r\t\v\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]?/g,(e=>`\n${"​".repeat(e.length-1)}`)).replace(/\n$/,""),s,r)}return n(t,s,r)}},"./src/shared/texture/utils.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{collapseLineBreaks:()=>c,containsDirectives:()=>g,getDirectiveAndLength:()=>f,getHeaders:()=>d,isQuoteDirective:()=>p,isSpotifyTrack:()=>l,isString:()=>a,tplMention:()=>h,tplMentionWithNick:()=>u});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js"),o=s("./src/shared/texture/constants.js");function i(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function a(e){return"string"==typeof e}function l(e){try{const{hostname:t,pathname:s}=n.u.getURL(e);return"open.spotify.com"===t&&s.startsWith("/track/")}catch(t){return console.debug(`Could not create URL object from ${e}`),!1}}function d(e){return(t=function*(){try{return(yield fetch(e,{method:"HEAD"})).headers}catch(t){return console.debug(`Error calling HEAD on url ${e}: ${t}`),null}},function(){var e=this,s=arguments;return new Promise((function(r,n){var o=t.apply(e,s);function a(e){i(o,r,n,a,l,"next",e)}function l(e){i(o,r,n,a,l,"throw",e)}a(void 0)}))})();var t}function c(e){return e.replace(/\n(\u200B*\n)+/g,(e=>e.length>2?`\n${"​".repeat(e.length-2)}\n`:2===e.length?"\n​":1===e.length?"​":void 0))}const u=e=>r.html`<span class="mention mention--self badge badge-info" data-uri="${e.uri}">${e.mention}</span>`;function h(e){return r.html`<span class="mention" data-uri="${e.uri}">${e.mention}</span>`}function m(e,t,s=!0){let r;if(/(^```[\s,\u200B]*\n)|(^```[\s,\u200B]*$)/.test(e.slice(t))&&(0===t||">"===e[t-1]||/\n\u200B{0,2}$/.test(e.slice(0,t))))r=e.slice(t,t+3);else{if(!o.styling_directives.includes(e.slice(t,t+1)))return null;if(r=e.slice(t,t+1),!function(e,t,s,r){if(r){const r=RegExp(o.dont_escape.includes(e)?`^(\\p{L}|\\p{N})${e}`:`^(\\p{L}|\\p{N})\\${e}`,"u");if(s>1&&r.test(t.slice(s-1)))return!1;if(p(e)&&s>0&&"\n"!==t[s-1])return!1;if(o.bracketing_directives.includes(e)&&t[s+1]===e)return!1}else{const r=RegExp(o.dont_escape.includes(e)?`^${e}(\\p{L}|\\p{N})`:`^\\${e}(\\p{L}|\\p{N})`,"u");if(s<t.length-1&&r.test(t.slice(s)))return!1;if(o.bracketing_directives.includes(e)&&t[s-1]===e)return!1}return!0}(r,e,t,s))return null}return r}function f(e,t){const s=m(e,t),r=s?function(e,t,s){if(!e)return 0;const r=s;if(s+=e.length,p(e))return(s+=t.slice(s).split(/\n\u200B*[^>\u200B]/).shift().length)-r;if("span"===o.styling_map[e].type){const r=t.slice(s).split("\n").shift();let n=0,o=r.indexOf(e);for(;-1!==o;){if(m(t,s+o,!1)===e)return o+2*e.length;o=r.indexOf(e,n++)}return 0}{const r=t.slice(s+1);let n=0,o=r.indexOf(e);for(;-1!==o;){if(m(t,s+1+o,!1)===e)return o+1+2*e.length;o=r.indexOf(e,n++)}return 0}}(s,e,t):0;return r>0?{d:s,length:r}:{}}function p(e){return[">","&gt;"].includes(e)}function g(e){for(let t=0;t<o.styling_directives.length;t++)if(e.includes(o.styling_directives[t]))return!0;return!1}},"./src/templates/file.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./src/i18n/index.js"),n=s("./node_modules/lit/index.js");const o=(e,t)=>{const s=(0,r.__)('Download file "%1$s"',t);return n.html`<a target="_blank" rel="noopener" href="${e}">${s}</a>`}},"./src/templates/form_captcha.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=e=>r.html`<fieldset class="mb-3">${e.label?r.html`<label class="form-label">${e.label}</label>`:""} <img src="data:${e.type};base64,${e.data}"> <input name="${e.name}" type="text" ?required="${e.required}"></fieldset>`},"./src/templates/form_checkbox.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=e=>r.html`<fieldset class="mb-3 form-check"><input id="${e.id}" name="${e.name}" type="checkbox" class="form-check-input" ?readonly="${e.readonly}" ?checked="${e.checked}" ?required="${e.required}"> <label class="form-check-label" for="${e.id}">${e.label} ${e.desc?r.html`<small class="form-text text-muted">${e.desc}</small>`:""}</label></fieldset>`},"./src/templates/form_date.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=e=>r.html`<div class="mb-3"><label for="${e.id}" class="form-label">${e.label} ${e.desc?r.html`<small class="form-text text-muted">${e.desc}</small>`:""}</label> <input class="form-control" id="${e.id}" name="${e.name}" type="datetime-local" value="${e.value||""}" ?readonly="${e.readonly}" ?required="${e.required}"></div>`},"./src/templates/form_fixed.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=e=>r.html`<p>${e.text}</p>`},"./src/templates/form_input.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=e=>r.html`<div class="mb-3">${"hidden"!==e.type?r.html`<label for="${e.id}" class="form-label">${e.label} ${e.desc?r.html`<small class="form-text text-muted">${e.desc}</small>`:""}</label>`:""} ${"password"===e.type&&e.fixed_username?r.html`<input class="hidden-username" aria-hidden="true" type="text" autocomplete="username" value="${e.fixed_username}">`:""} <input autocomplete="${e.autocomplete||""}" class="form-control" id="${e.id}" name="${e.name}" placeholder="${e.placeholder||""}" type="${e.type}" value="${e.value||""}" ?readonly="${e.readonly}" ?required="${e.required}"></div>`},"./src/templates/form_select.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=e=>{var t;return r.html`<div class="mb-3"><label for="${e.id}" class="form-label">${e.label}</label> <select class="form-control" id="${e.id}" name="${e.name}" ?multiple="${e.multiple}">${null===(t=e.options)||void 0===t?void 0:t.map((e=>(e=>r.html`<option value="${e.value}" ?selected="${e.selected}">${e.label}</option>`)(e)))}</select></div>`}},"./src/templates/form_textarea.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s("./node_modules/lit/index.js"),n=s("./src/headless/index.js");const o=e=>{const t=n.u.getUniqueId();return r.html`<div class="mb-3"><label class="form-label label-ta" for="${e.id}">${e.label} ${e.desc?r.html`<small class="form-text text-muted">${e.desc}</small>`:""}</label> <textarea name="${e.name}" id="${t}" ?readonly="${e.readonly}" ?required="${e.required}" class="form-control">${e.value}</textarea></div>`}},"./src/templates/form_url.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=e=>r.html`<div class="mb-3"><label for="${e.id}" class="form-label">${e.label} ${e.desc?r.html`<small id="o.id" class="form-text text-muted">${e.desc}</small>`:""}</label><div><a class="form-url" target="_blank" rel="noopener" id="${e.id}" href="${e.value}">${e.value}</a></div></div>`},"./src/templates/form_username.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");const n=e=>r.html`<div class="mb-3">${"hidden"!==e.type?r.html`<label for="${e.id}" class="form-label">${e.label} ${e.desc?r.html`<small class="form-text text-muted">${e.desc}</small>`:""}</label>`:""}<div class="input-group"><input name="${e.name}" class="form-control" id="${e.id}" type="${e.type}" value="${e.value||""}" ?readonly="${e.readonly}" ?required="${e.required}"> ${e.domain?r.html`<div class="input-group-append"><div class="input-group-text" title="${e.domain}">${e.domain}</div></div>`:""}</div></div>`},"./src/templates/hyperlink.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s("./src/headless/index.js"),n=s("./node_modules/lit/index.js");function o(e){e.preventDefault(),r.api.rooms.open(e.target.href)}const i=(e,t)=>"xmpp:"===e.protocol&&null!=e.searchParams.get("join")?n.html`<a target="_blank" rel="noopener" @click="${o}" href="${e.href}">${t}</a>`:n.html`<a target="_blank" rel="noopener" href="${e.href}">${t}</a>`},"./src/templates/spinner.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s("./node_modules/lit/index.js");s("./src/templates/styles/spinner.scss");const n=(e={})=>r.html`<div class="d-flex justify-content-center ${e.class}"><div class="spinner-grow" role="status"><span class="visually-hidden">Loading...</span></div></div>`},"./src/templates/styles/spinner.scss":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s.n(r),o=s("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),i=s.n(o),a=s("./node_modules/style-loader/dist/runtime/insertBySelector.js"),l=s.n(a),d=s("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=s.n(d),u=s("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),h=s.n(u),m=s("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=s.n(m),p=s("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[5].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[5].use[3]!./src/templates/styles/spinner.scss"),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=h();n()(p.default,g);const v=p.default&&p.default.locals?p.default.locals:void 0},"./src/utils/color.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{getAuthorStyle:()=>a});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/lit/directives/until.js"),o=s("./src/headless/index.js");function i(e,t=""){return`color: ${e}!important;${t}`}function a(e){if(o.api.settings.get("colorize_username")){const t=null==e?void 0:e.get("color");return t?i(t):e?r.html`${(0,n.until)(null==e?void 0:e.getColor().then(i),"")}`:""}}},"./src/utils/file.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{MIMETYPES_MAP:()=>a,compressImage:()=>d,isImageWithAlphaChannel:()=>l});var r=s("./node_modules/client-compress/dist/index.js"),n=s.n(r);function o(e,t,s,r,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function i(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var i=e.apply(t,s);function a(e){o(i,r,n,a,l,"next",e)}function l(e){o(i,r,n,a,l,"throw",e)}a(void 0)}))}}const a={aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",cda:"application/x-cdf",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",gz:"application/gzip",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",m4a:"audio/mp4",mid:"audio/midi",midi:"audio/midi",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"text/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"};function l(e){return i((function*(){if(e.type===a.png){const t=new FileReader;return yield new Promise((s=>{t.onloadend=e=>{const t=new DataView(e.target.result);if(2303741511===t.getUint32(0)&&218765834===t.getUint32(4)){const e=t.getUint8(25);s(e===4||e===6)}s(!1)},t.readAsArrayBuffer(e)}))}return!1}))()}function d(e){return i((function*(e,t={targetSize:.1,quality:.75,maxWidth:256,maxHeight:256,maxUncompressedSize:100}){if(t.maxUncompressedSize&&e.size>1024*t.maxUncompressedSize){delete t.maxUncompressedSize;const s=new(n())(t),r=yield s.compress([e]),{photo:o}=r[0];return o.data}return e})).apply(this,arguments)}},"./src/utils/html.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{addClass:()=>k,ancestor:()=>P,default:()=>F,getFileName:()=>C,getHyperlinkTemplate:()=>N,getNameAndValue:()=>O,getOuterWidth:()=>L,getRootElement:()=>B,hasClass:()=>$,removeClass:()=>M,removeElement:()=>I,slideIn:()=>R,slideOut:()=>D,xFormField2TemplateResult:()=>z});var r=s("./node_modules/lit/index.js"),n=s("./node_modules/strophe.js/dist/strophe.browser.esm.js"),o=s("./src/headless/index.js"),i=s("./src/templates/form_date.js"),a=s("./src/templates/form_captcha.js"),l=s("./src/templates/form_checkbox.js"),d=s("./src/templates/form_fixed.js"),c=s("./src/templates/form_input.js"),u=s("./src/templates/form_select.js"),h=s("./src/templates/form_textarea.js"),m=s("./src/templates/form_url.js"),f=s("./src/templates/form_username.js"),p=s("./src/templates/hyperlink.js");function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){g(e,t,s[t])}))}return e}function _(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}const{sizzle:y,Strophe:b,dayjs:j}=o.converse.env,{isValidURL:w}=o.u,S=["http:","https:","xmpp:","mailto:"],x=/\s*\n\s*/;function E(e){let t;(e instanceof n.Builder||e instanceof n.Stanza)&&(e=e.tree());const s=[],r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,(e=>"body"===e.parentElement.nodeName.toLowerCase()?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT));for(;t=r.nextNode();)s.push(t);return s.forEach((e=>x.test(e.data)&&e.parentElement.removeChild(e))),e}function A(e,t){return{"muc#roomconfig_lang":"language","muc#roomconfig_roomsecret":(null==t?void 0:t.new_password)?"new-password":"current-password"}[e]}function O(e){const t=e.getAttribute("name");if(!t)return null;let s;return s="checkbox"===e.getAttribute("type")?e.checked?1:0:"TEXTAREA"==e.tagName?e.value.split("\n").filter((e=>e.trim())):"SELECT"==e.tagName?o.u.getSelectValues(e):e.value,{name:t,value:s}}function C(e){try{const t=o.u.getURL(e);return decodeURI(t.pathname.split("/").pop())}catch(t){return o.log.debug(t),e}}function T(e){return Array.from(e.children).reduce(((e,t)=>t instanceof HTMLElement?e+t.offsetHeight:e),0)}function $(e,t){return t instanceof Element&&t.classList.contains(e)}function k(e,t){return t instanceof Element&&t.classList.add(e),t}function M(e,t){return t instanceof Element&&t.classList.remove(e),t}function I(e){return e instanceof Element&&e.parentNode&&e.parentNode.removeChild(e),e}function P(e,t){let s=e;for(;null!==s&&!y.matchesSelector(s,t);)s=s.parentElement;return s}function N(e){const t=RegExp("^w{3}.","ig").test(e)?`http://${e}`:e;try{const s=o.u.getURL(t);return function(e,t=S){return!!t.includes(e)}(s.protocol)?(0,p.default)(s,e):e}catch(e){o.log.debug(e)}}function D(e,t=200){return new Promise(((s,r)=>{if(!e){const e="An element needs to be passed in to slideOut";return o.log.warn(e),void r(new Error(e))}const n=e.getAttribute("data-slider-marker");n&&!Number.isNaN(Number(n))&&(e.removeAttribute("data-slider-marker"),cancelAnimationFrame(Number(n)));const i=T(e);if(o.api.settings.get("disable_effects"))return e.style.height=i+"px",function(e){e.removeAttribute("data-slider-marker"),e.classList.remove("collapsed"),e.style.overflow="",e.style.height=""}(e),void s();if(!$("collapsed",e)&&!$("hidden",e))return void s();const a=t/17;let l=0;e.style.height="0",e.style.overflow="hidden",e.classList.remove("hidden"),e.classList.remove("collapsed"),e.setAttribute("data-slider-marker",requestAnimationFrame((function t(){l+=i/a,l<i?(e.style.height=l+"px",e.setAttribute("data-slider-marker",requestAnimationFrame(t).toString())):(e.removeAttribute("data-slider-marker"),e.style.height=T(e)+"px",e.style.overflow="",e.style.height="",s())})).toString())}))}function R(e,t=200){return new Promise(((s,r)=>{if(!e){const e="An element needs to be passed in to slideIn";return o.log.warn(e),r(new Error(e))}if($("collapsed",e))return s(e);if(o.api.settings.get("disable_effects"))return e.classList.add("collapsed"),e.style.height="",s(e);const n=e.getAttribute("data-slider-marker");n&&!Number.isNaN(Number(n))&&(e.removeAttribute("data-slider-marker"),cancelAnimationFrame(Number(n)));const i=e.offsetHeight,a=t/17;let l=i;e.style.overflow="hidden",e.setAttribute("data-slider-marker",requestAnimationFrame((function t(){l-=i/a,l>0?(e.style.height=l+"px",e.setAttribute("data-slider-marker",requestAnimationFrame(t).toString())):(e.removeAttribute("data-slider-marker"),e.classList.add("collapsed"),e.style.height="",s(e))})).toString())}))}function z(e,t={}){const s={id:o.u.getUniqueId(),name:e.var};if("list-single"===e.type||"list-multi"===e.type)return(0,u.default)(_(v({},s,e),{multiple:"list-multi"===e.type}));if("fixed"===e.type)return(0,d.default)(e);if("jid-multi"===e.type)return(0,h.default)(v({},s,e));if("boolean"===e.type)return(0,l.default)(v({},s,e));if("username"===e.var)return(0,f.default)(v(_(v({},s),{domain:t.domain?" @"+t.domain:""}),e));if("password"===e.var)return(0,c.default)(_(v({},s,e),{autocomplete:A(e.var,t),fixed_username:null==t?void 0:t.fixed_username,type:"password"}));if("ocr"===e.var)return(0,a.default)(_(v({},s,e),{data:e.uri.data,type:e.uri.type}));if("hidden"===e.type||"url"!==e.var&&"uri"!==e.var&&!w(e.value)){if("datetime"===e.type||"date"===e.type){const t=e.value?j(e.value):null,r=(null==t?void 0:t.isValid())?"datetime"===e.type?t.format("YYYY-MM-DDTHH:mm:ss"):t.format("YYYY-MM-DD"):null;return(0,i.default)(_(v({},s,e),{value:r}))}return(0,c.default)(_(v({},s,e),{autocomplete:A(e.var,t),placeholder:null}))}return(0,m.default)(e)}function L(e,t=!1){let s=e.offsetWidth;if(!t)return s;const r=window.getComputedStyle(e);return s+=parseInt(r.marginLeft?r.marginLeft:"0",10)+parseInt(r.marginRight?r.marginRight:"0",10),s}let U;function B(){return U||(U=document.querySelector("converse-root")||document.createElement("converse-root")),U}Object.assign(o.u,{addClass:k,ancestor:P,calculateElementHeight:T,escapeHTML:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},getElementFromTemplateResult:function(e){const t=document.createElement("div");return(0,r.render)(e,t),t.firstElementChild},getNextElement:function(e,t="*"){let s=e.nextElementSibling;for(;null!==s&&!y.matchesSelector(s,t);)s=s.nextElementSibling;return s},getOuterWidth:L,getRootElement:B,hasClass:$,hideElement:function(e){return e instanceof Element&&e.classList.add("hidden"),e},isEqualNode:function(e,t){if(!o.u.isElement(e))throw new Error("Element being compared must be an Element!");e=E(e),t=E(t);let s=e.isEqualNode(t);if(!s){const{xmlHtmlNode:r}=b,n=b.serialize(e),o=b.serialize(t);s=n===o||r(n).isEqualNode(r(o))}return s},isInDOM:function(e){return document.querySelector("body").contains(e)},isVisible:function(e){return null!==e&&(!$("hidden",e)&&(e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0))},nextUntil:function(e,t){const s=[];let r=e.nextElementSibling;for(;null!==r&&!r.matches(t);)s.push(r),r=r.nextElementSibling;return s},removeClass:M,removeElement:I,showElement:function(e){M("collapsed",e),M("hidden",e)},slideIn:R,slideOut:D,unescapeHTML:function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText},xFormField2TemplateResult:z});const F=o.u},"./src/utils/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s("./src/headless/index.js"),n=s("./src/utils/color.js"),o=s("./src/utils/file.js"),i=s("./src/utils/html.js"),a=s("./src/utils/url.js");function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=Object.assign(r.u,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},r=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),r.forEach((function(t){l(e,t,s[t])}))}return e}({},n,o,i,a))},"./src/utils/url.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{filterQueryParamsFromURL:()=>l,isDomainAllowed:()=>o,isDomainWhitelisted:()=>n,isMediaURLDomainAllowed:()=>i,shouldRenderMediaFromURL:()=>a});var r=s("./src/headless/index.js");function n(e,t){const s=r.u.getURL(t).hostname.split("."),n=s.slice(-2).join("."),o=s.slice(0,-2).join("."),i=`${o?`${o}.`:""}${n}`;return e.includes(n)||e.includes(i)}function o(e,t){const s=r.api.settings.get(t);if(!Array.isArray(s))return!0;try{return n(s,e)}catch(e){return r.log.debug(e),!1}}function i(e){return e.is_audio&&o(e.url,"allowed_audio_domains")||e.is_video&&o(e.url,"allowed_video_domains")||e.is_image&&o(e.url,"allowed_image_domains")}function a(e,t){if(!function(e){const{protocol:t}=window.location;if(["chrome-extension:","file:"].includes(t))return!0;const s=r.u.getURL(e);return"http:"===t||"https:"===t&&["https:","aesgcm:"].includes(s.protocol.toLowerCase())}(e))return!1;const s=r.api.settings.get("render_media"),i=o(e,`allowed_${t}_domains`);return Array.isArray(s)?i&&n(s,e):i&&s}function l(e){const t=r.api.settings.get("filter_url_query_params");if(!t)return e;const s=Array.isArray(t)?t:[t],n=r.u.getURL(e);return s.forEach((e=>n.searchParams.delete(e))),n.toString()}}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var s=o[e]={id:e,loaded:!1,exports:{}};return n[e].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=n,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(s,r){if(1&r&&(s=this(s)),8&r)return s;if("object"==typeof s&&s){if(4&r&&s.__esModule)return s;if(16&r&&"function"==typeof s.then)return s}var n=Object.create(null);i.r(n);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&s;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>s[e]));return o.default=()=>s,i.d(n,o),n},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,s)=>(i.f[s](e,t),t)),[])),i.u=e=>e+".js",i.miniCssF=e=>{},i.miniCssF=e=>{},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s={},r="converse.js:",i.l=(e,t,n,o)=>{if(s[e])s[e].push(t);else{var a,l;if(void 0!==n)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==r+n){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",r+n),a.src=e),s[e]=[t];var h=(t,r)=>{a.onerror=a.onload=null,clearTimeout(m);var n=s[e];if(delete s[e],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(r))),t)return t(r)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.p="/dist/",(()=>{var e={"converse.min":0};i.f.j=(t,s)=>{var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)s.push(r[2]);else{var n=new Promise(((s,n)=>r=e[t]=[s,n]));s.push(r[2]=n);var o=i.p+i.u(t),a=new Error;i.l(o,(s=>{if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var n=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;a.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",a.name="ChunkLoadError",a.type=n,a.request=o,r[1](a)}}),"chunk-"+t,t)}};var t=(t,s)=>{var r,n,[o,a,l]=s,d=0;if(o.some((t=>0!==e[t]))){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);if(l)l(i)}for(t&&t(s);d<o.length;d++)n=o[d],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0},s=self.webpackChunkconverse_js=self.webpackChunkconverse_js||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),i.nc=void 0;var a={};(()=>{"use strict";i.r(a),i.d(a,{default:()=>r});const e={},t={plugins:{add(t,s){if(void 0!==e[t])throw new TypeError(`Error: plugin with name "${t}" has already been registered!`);e[t]=s}},initialize:(e={})=>t.load(e).initialize(e),load:(s={})=>(s.assets_path&&(i.p=s.assets_path),i("./src/index.js"),Object.keys(e).forEach((s=>t.plugins.add(s,e[s]))),t)};window.converse=t;const s=new CustomEvent("converse-loaded",{detail:{converse:t}});window.dispatchEvent(s);const r=t})()})();
//# sourceMappingURL=converse.min.js.map