{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap c26bc67f9ebc8e0e4bd1","webpack:///../jitsi-meet-logger/lib/index.js","webpack:///./modules/browser/index.js","webpack:///../strophe.js/strophe.js","webpack:///./modules/util/GlobalOnErrorHandler.js","webpack:///./service/RTC/MediaType.js","webpack:///./modules/statistics/statistics.js","webpack:///./service/statistics/AnalyticsEvents.js","webpack:///./JitsiConferenceEvents.js","webpack:///./service/xmpp/XMPPEvents.js","webpack:///./service/RTC/RTCEvents.js","webpack:///./modules/util/Listenable.js","webpack:///../webrtc-adapter/src/js/utils.js","webpack:///./JitsiTrackError.js","webpack:///./service/RTC/VideoType.js","webpack:///./modules/xmpp/SDPUtil.js","webpack:///../sdp-transform/lib/index.js","webpack:///../events/events.js","webpack:///../webpack/buildin/global.js","webpack:///./JitsiTrackErrors.js","webpack:///./JitsiTrackEvents.js","webpack:///./modules/util/RandomUtil.js","webpack:///../precalltest/dist/utility/timestamps.js","webpack:///./modules/xmpp/ConnectionPlugin.js","webpack:///./modules/settings/Settings.js","webpack:///../precalltest/dist/utility/stats/detectbrowser.js","webpack:///../bluebird/js/browser/bluebird.js","webpack:///./JitsiConnectionEvents.js","webpack:///./modules/RTC/RTC.js","webpack:///./modules/RTC/RTCUtils.js","webpack:///./modules/xmpp/SdpTransformUtil.js","webpack:///./modules/videosipgw/VideoSIPGWConstants.js","webpack:///./service/connectivity/ConnectionQualityEvents.js","webpack:///./JitsiConferenceErrors.js","webpack:///../react-native-callstats/swPlugin.js","webpack:///../node-libs-browser/node_modules/process/browser.js","webpack:///./service/RTC/Resolutions.js","webpack:///./modules/connectivity/ParticipantConnectionStatus.js","webpack:///./modules/RTC/adapter.screenshare.js","webpack:///../jitsi-meet-logger/lib/Logger.js","webpack:///../js-utils/browser-detection/BrowserDetection.js","webpack:///../js-utils/browser-detection/browsers.js","webpack:///../js-utils/browser-capabilities/BrowserCapabilities.js","webpack:///../timers-browserify/main.js","webpack:///../precalltest/dist/tests/turnTest.js","webpack:///../precalltest/dist/utility/messageMaker.js","webpack:///./modules/statistics/LocalStatsCollector.js","webpack:///./service/statistics/Events.js","webpack:///./modules/util/ScriptUtil.js","webpack:///./modules/xmpp/xmpp.js","webpack:///./JitsiConnectionErrors.js","webpack:///./JitsiTranscriptionStatus.js","webpack:///./service/authentication/AuthenticationEvents.js","webpack:///./modules/xmpp/recording.js","webpack:///./JitsiRecorderErrors.js","webpack:///./modules/xmpp/JingleSessionState.js","webpack:///./modules/xmpp/SDP.js","webpack:///./service/RTC/SignalingEvents.js","webpack:///./modules/RTC/JitsiTrack.js","webpack:///./service/RTC/CameraFacingMode.js","webpack:///../sdp-transform/lib/grammar.js","webpack:///../sdp/sdp.js","webpack:///./modules/transcription/audioRecorder.js","webpack:///./JitsiMediaDevicesEvents.js","webpack:///./index.js","webpack:///./JitsiMeetJS.js","webpack:///./modules/util/AuthUtil.js","webpack:///./JitsiConnection.js","webpack:///./JitsiConference.js","webpack:///./modules/statistics/AvgRTPStatsReporter.js","webpack:///../jitsi-meet-logger/lib/LogCollector.js","webpack:///./modules/browser/BrowserCapabilities.js","webpack:///../js-utils/node_modules/bowser/src/bowser.js","webpack:///../webpack/buildin/amd-define.js","webpack:///./modules/statistics/AnalyticsAdapter.js","webpack:///./modules/util/UsernameGenerator.js","webpack:///./modules/statistics/CallStats.js","webpack:///../react-native-callstats/callstats.js","webpack:///../react-native-callstats/callstatsUtils.js","webpack:///../react-native-callstats/statsReporter.js","webpack:///../react-native-callstats/slidingWindow.js","webpack:///../react-native-callstats/swItem.js","webpack:///../react-native-callstats/swPercentileTracker.js","webpack:///../react-native-callstats/swPercentileNotification.js","webpack:///../react-native-callstats/binaryTree.js","webpack:///../react-native-callstats/swAvg.js","webpack:///../react-native-callstats/pcCallbackHandler.js","webpack:///../precalltest/dist/main.js","webpack:///../precalltest/dist/turnConnection.js","webpack:///../precalltest/dist/utility/parsedIceCandidate.js","webpack:///../precalltest/dist/utility/stats/getstatshandler.js","webpack:///../precalltest/dist/utility/stats/statsadapter.js","webpack:///../setimmediate/setImmediate.js","webpack:///../precalltest/dist/tests/rttTest.js","webpack:///../precalltest/dist/tests/throughputTest.js","webpack:///../precalltest/dist/utility/resultsHandler.js","webpack:///../precalltest/dist/utility/onlineCheck.js","webpack:///./modules/statistics/RTPStatsCollector.js","webpack:///../current-executing-script/dist/currentExecutingScript.js","webpack:///./service/statistics/constants.js","webpack:///./modules/version/ComponentsVersions.js","webpack:///./modules/connectivity/ConnectionQuality.js","webpack:///./authenticateAndUpgradeRole.js","webpack:///../strophejs-plugin-disco/lib/strophe.disco.js","webpack:///./modules/xmpp/strophe.emuc.js","webpack:///./modules/xmpp/ChatRoom.js","webpack:///./modules/xmpp/moderator.js","webpack:///./modules/xmpp/strophe.jingle.js","webpack:///./modules/xmpp/JingleSessionPC.js","webpack:///../async/lib/async.js","webpack:///./modules/util/StringUtils.js","webpack:///./modules/xmpp/JingleSession.js","webpack:///./modules/xmpp/SDPDiffer.js","webpack:///./modules/xmpp/SignalingLayerImpl.js","webpack:///./service/RTC/SignalingLayer.js","webpack:///./modules/xmpp/strophe.util.js","webpack:///./modules/xmpp/strophe.ping.js","webpack:///./modules/xmpp/strophe.rayo.js","webpack:///./modules/xmpp/strophe.logger.js","webpack:///./modules/xmpp/Caps.js","webpack:///./JitsiConferenceEventManager.js","webpack:///./modules/util/EventEmitterForwarder.js","webpack:///./modules/DTMF/JitsiDTMFManager.js","webpack:///./JitsiParticipant.js","webpack:///./modules/event/Jvb121EventGenerator.js","webpack:///./modules/P2PDominantSpeakerDetection.js","webpack:///./modules/RTC/BridgeChannel.js","webpack:///./modules/RTC/JitsiLocalTrack.js","webpack:///./modules/RTC/ortc/RTCPeerConnection.js","webpack:///../yaeti/index.js","webpack:///../yaeti/lib/EventTarget.js","webpack:///../yaeti/lib/Event.browser.js","webpack:///./modules/RTC/ortc/RTCSessionDescription.js","webpack:///../sdp-transform/lib/parser.js","webpack:///../sdp-transform/lib/writer.js","webpack:///./modules/RTC/ortc/utils.js","webpack:///./modules/RTC/ortc/errors.js","webpack:///./modules/RTC/ScreenObtainer.js","webpack:///../webrtc-adapter/src/js/adapter_core.js","webpack:///../webrtc-adapter/src/js/adapter_factory.js","webpack:///../webrtc-adapter/src/js/chrome/chrome_shim.js","webpack:///../webrtc-adapter/src/js/chrome/getusermedia.js","webpack:///../webrtc-adapter/src/js/edge/edge_shim.js","webpack:///../rtcpeerconnection-shim/rtcpeerconnection.js","webpack:///../webpack/buildin/module.js","webpack:///../webrtc-adapter/src/js/edge/getusermedia.js","webpack:///../webrtc-adapter/src/js/firefox/firefox_shim.js","webpack:///../webrtc-adapter/src/js/firefox/getusermedia.js","webpack:///../webrtc-adapter/src/js/safari/safari_shim.js","webpack:///../webrtc-adapter/src/js/common_shim.js","webpack:///./modules/util/MathUtil.js","webpack:///./modules/RTC/TraceablePeerConnection.js","webpack:///./modules/RTC/JitsiRemoteTrack.js","webpack:///./modules/RTC/LocalSdpMunger.js","webpack:///./modules/xmpp/RtxModifier.js","webpack:///./modules/xmpp/SdpConsistency.js","webpack:///../sdp-interop/lib/index.js","webpack:///../sdp-interop/lib/interop.js","webpack:///../sdp-interop/lib/transform.js","webpack:///../sdp-interop/lib/array-equals.js","webpack:///../sdp-simulcast/lib/index.js","webpack:///../sdp-simulcast/lib/transform-utils.js","webpack:///./modules/TalkMutedDetection.js","webpack:///./modules/transcription/transcriber.js","webpack:///./modules/transcription/recordingResult.js","webpack:///./modules/transcription/transcriptionServices/SphinxTranscriptionService.js","webpack:///./modules/transcription/transcriptionServices/AbstractTranscriptionService.js","webpack:///./modules/transcription/word.js","webpack:///./modules/videosipgw/VideoSIPGW.js","webpack:///./modules/videosipgw/JitsiVideoSIPGWSession.js","webpack:///./modules/statistics/SpeakerStatsCollector.js","webpack:///./modules/statistics/SpeakerStats.js","webpack:///./JitsiMediaDevices.js","webpack:///./modules/RTC/RTCUIHelper.js"],"names":["root","factory","exports","module","define","amd","JitsiMeetJS","self","this","e","__webpack_require__","moduleId","installedModules","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","t","Logger","LogCollector","idLoggers","loggers","curLevel","levels","TRACE","addGlobalTransport","transport","removeGlobalTransport","getLogger","id","transports","format","logger","push","setLogLevelById","level","length","setLevel","setLogLevel","__webpack_exports__","a","__WEBPACK_IMPORTED_MODULE_0__BrowserCapabilities__","r","Symbol","iterator","constructor","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","__WEBPACK_AMD_DEFINE_FACTORY__","requirejs","require","undef","hasProp","obj","prop","hasOwn","normalize","baseName","nameParts","nameSegment","mapValue","foundMap","lastIndex","foundI","foundStarMap","starI","j","part","baseParts","split","map","config","starMap","nodeIdCompat","jsSuffixRegExp","test","replace","charAt","slice","concat","splice","join","makeRequire","relName","forceSync","args","aps","arguments","req","apply","makeLoad","depName","value","defined","callDep","waiting","defining","main","Error","splitPrefix","prefix","index","indexOf","substring","makeRelParts","makeMap","handlers","relParts","plugin","parts","relResourceName","f","pr","uri","deps","callback","cjsModule","ret","usingExports","callbackType","_typeof","load","alt","setTimeout","cfg","_defined","jQuery","Function","bind","func","_slice","Array","_concat","_args","isArray","arg","toString","elt","len","from","Number","Math","ceil","floor","forEach","thisArg","T","k","TypeError","O","kValue","keyStr","btoa","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","charCodeAt","isNaN","atob","String","fromCharCode","core_sha1","x","olda","oldb","oldc","oldd","olde","w","b","rol","safe_add","sha1_ft","sha1_kt","core_hmac_sha1","key","data","bkey","str2binb","ipad","opad","hash","y","lsw","num","cnt","str","bin","binb2str","binb2b64","binarray","triplet","b64_hmac_sha1","b64_sha1","str_hmac_sha1","str_sha1","SHA1","MD5","str2binl","md5_cmn","q","md5_ff","md5_gg","md5_hh","md5_ii","core_md5","hexdigest","stropheUtils","utf16to8","out","addCookies","cookies","cookieName","cookieObj","isObj","cookieValue","expires","domain","path","escape","unescape","document","cookie","Strophe","$build","$iq","$msg","$pres","utils","attrs","Builder","VERSION","NS","HTTPBIND","BOSH","CLIENT","AUTH","ROSTER","PROFILE","DISCO_INFO","DISCO_ITEMS","MUC","SASL","STREAM","FRAMING","BIND","SESSION","STANZAS","XHTML_IM","XHTML","tags","attributes","blockquote","br","cite","em","img","li","ol","span","strong","ul","body","css","validTag","tag","validAttribute","attribute","validCSS","style","Status","ERROR","CONNECTING","CONNFAIL","AUTHENTICATING","AUTHFAIL","CONNECTED","DISCONNECTED","DISCONNECTING","ATTACHED","REDIRECT","CONNTIMEOUT","ErrorCondition","BAD_FORMAT","CONFLICT","MISSING_JID_NODE","NO_AUTH_MECH","UNKNOWN_REASON","LogLevel","DEBUG","INFO","WARN","FATAL","ElementType","NORMAL","TEXT","CDATA","FRAGMENT","TIMEOUT","SECONDARY_TIMEOUT","addNamespace","forEachChild","elem","elemName","childNode","childNodes","nodeType","isTagEqual","el","tagName","_xmlGenerator","_makeGenerator","doc","implementation","createDocument","documentMode","_getIEXmlDom","appendChild","createElement","xmlGenerator","docStrings","ActiveXObject","xmlElement","node","xmlTextNode","sort","attr","setAttribute","xmlescape","text","xmlunescape","createTextNode","xmlHtmlNode","html","DOMParser","parseFromString","async","loadXML","getText","nodeValue","copyElement","nodeName","createHtml","cssAttrs","cssName","cssValue","toLowerCase","getAttribute","cssText","createDocumentFragment","escapeNode","unescapeNode","getNodeFromJid","jid","getDomainFromJid","bare","getBareJidFromJid","getResourceFromJid","_handleError","stack","fatal","sourceURL","handler","line","message","fileName","lineNumber","log","msg","debug","info","warn","error","serialize","result","tree","child","_requestId","_connectionPlugins","addConnectionPlugin","ptype","xmlns","nodeTree","up","parentNode","moreattrs","removeAttribute","cnode","impNode","xmlGen","importNode","newElem","h","fragment","innerHTML","xhtml","Handler","ns","type","options","matchBareFromJid","ignoreNamespaceFragment","matchBare","user","getNamespace","elNamespace","namespaceMatch","nsMatch","that","isMatch","elem_type","run","TimedHandler","period","lastCalled","Date","getTime","reset","Connection","service","proto","protocol","_proto","Websocket","Bosh","features","_sasl_data","do_session","do_bind","timedHandlers","removeTimeds","removeHandlers","addTimeds","addHandlers","protocolErrorHandlers","HTTP","websocket","_idleTimeout","_disconnectTimeout","authenticated","connected","disconnecting","do_authentication","paused","restored","_data","_uniqueId","_sasl_success_handler","_sasl_failure_handler","_sasl_challenge_handler","maxRetries","_onIdle","registerSASLMechanisms","mechanisms","F","init","_reset","_requests","pause","resume","getUniqueId","suffix","uuid","random","addProtocolErrorHandler","status_code","connect","pass","wait","hold","route","authcid","authzid","servtype","connect_callback","_changeConnectStatus","_connect","attach","sid","rid","wind","_attach","restore","_sessionCachingSupported","_restore","JSON","sessionStorage","setItem","removeItem","xmlInput","xmlOutput","rawInput","rawOutput","nextValidRid","send","_queueData","_send","flush","clearTimeout","sendPresence","errback","timeout","timeoutHandler","addHandler","stanza","deleteTimedHandler","addTimedHandler","deleteHandler","sendIQ","iqtype","element","_sendRestart","thand","handRef","hand","SASLAnonymous","SASLExternal","SASLMD5","SASLOAuthBearer","SASLXOAuth2","SASLPlain","SASLSHA1","registerSASLMechanism","mechanism","disconnect","reason","pres","_addSysTimedHandler","_onDisconnectTimeout","_disconnect","_abortAllRequests","_doDisconnect","status","condition","statusChanged","err","_dataRecv","raw","_reqToData","strip","pop","_emptyQueue","cond","conflict","getElementsByTagName","UNKOWN_REASON","newList","_no_auth_received","_callback","_connect_cb","bodyWrap","getElementsByTagNameNS","mech","matched","authenticate","sortMechanismsByPriority","higher","swap","priority","_attemptSASLAuth","mechanism_found","_addSysHandler","_sasl_success_cb","_sasl_failure_cb","_sasl_challenge_cb","_sasl_mechanism","onStart","request_auth_exchange","isClientFirst","response","onChallenge","_attemptLegacyAuth","_auth1_cb","to","challenge","iq","_auth2_cb","serverSignature","matches","match","onSuccess","streamfeature_handlers","wrapper","_sasl_auth1_cb","_sasl_bind_cb","resource","jidNode","_sasl_session_cb","onFailure","now","SASLMechanism","connection","_connection","auth_str","test_cnonce","cnonce","nonce","salt","iter","Hi","U","U_old","clientKey","serverKey","clientSignature","responseText","authMessage","attribMatch","substr","_quote","realm","host","digest_uri","cred","A1","A2","core","Request","sends","xmlData","origFunc","date","NaN","abort","dead","age","timeDead","xhr","_newXHR","getResponse","responseXML","documentElement","window","XMLHttpRequest","overrideMimeType","onreadystatechange","_conn","errors","inactivity","lastResponseHeaders","_buildBody","keepalive","_cacheSession","xml:lang","content","ver","xmpp:version","xmlns:xmpp","_onRequestStateChange","_throttledRequestHandler","session","parse","getItem","stringify","typ","parseInt","_sendTerminate","_callProtocolErrorHandlers","err_callback","reqStatus","_getRequestStatus","_hitError","xmpp:restart","time_elapsed","def","readyState","getAllResponseHeaders","valid_request","too_many_retries","_removeRequest","reqIs0","_restartRequest","_processRequest","primaryTimeout","secondaryTimeout","requestCompletedWithServerError","contentType","open","sync","setRequestHeader","withCredentials","e2","sendFunc","customHeaders","headers","header","backoff","min","pow","abs","new_service","location","pathname","_buildStream","version","_check_streamerror","connectstatus","textContent","errorString","_closeSocket","socket","WebSocket","onopen","_onOpen","onerror","_onError","onclose","_onClose","onmessage","_connect_cb_wrapper","_handleStreamStart","streamStart","see_uri","string","_streamWrap","_onMessage","CLOSED","close","closeString","code","rawStanza","search","firstChild","start","startString","oldOnErrorHandler","oldOnUnhandledRejection","onunhandledrejection","_len","_key","event","GlobalOnErrorHandler","callErrorHandler","errHandler","callUnhandledRejectionHandler","VIDEO","AUDIO","_initCallStatsBackend","__WEBPACK_IMPORTED_MODULE_3__CallStats__","isBackendInitialized","userName","__WEBPACK_IMPORTED_MODULE_7__settings_Settings__","callStatsUserName","initBackend","callStatsID","callStatsSecret","swapUserNameAndAlias","callStatsAliasName","aliasName","applicationName","getWiFiStatsMethod","Statistics","xmpp","rtpStatsMap","Map","eventEmitter","__WEBPACK_IMPORTED_MODULE_0_events___default","callStatsIntegrationEnabled","disableThirdPartyRequests","__WEBPACK_IMPORTED_MODULE_6__browser__","isReactNative","isCallstatsLoaded","__WEBPACK_IMPORTED_MODULE_8__util_ScriptUtil___default","loadScript","customScriptUrl","callStatsConfIDNamespace","callsStatsInstances","instances","add","_","u","v","__filename","_instances","audioLevelsEnabled","disableAudioLevels","audioLevelsInterval","analytics","__WEBPACK_IMPORTED_MODULE_2__AnalyticsAdapter__","Set","startRemoteStats","peerconnection","stopRemoteStats","rtpStats","__WEBPACK_IMPORTED_MODULE_5__RTPStatsCollector__","set","localStats","startLocalStats","stream","__WEBPACK_IMPORTED_MODULE_4__LocalStatsCollector__","addAudioLevelListener","listener","on","__WEBPACK_IMPORTED_MODULE_10__service_statistics_Events__","removeAudioLevelListener","removeListener","addBeforeDisposedListener","removeBeforeDisposedListener","addConnectionStatsListener","removeConnectionStatsListener","addByteSentStatsListener","removeByteSentStatsListener","dispose","size","emit","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","values","next","done","callStats","stopCallStats","tpc","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","keys","tpcId","_stopRemoteStats","removeAllListeners","delete","stopLocalStats","stop","startCallStats","remoteUserID","has","newInstance","confID","_getCallStatsConfID","_getAllCallStatsInstances","csInstances","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","statistics","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","cs","roomName","callStatsInstance","sendTerminateEvent","isCallstatsEnabled","sendConnectionResumeOrHoldEvent","isResume","instance","sendResumeOrHoldEvent","sendIceConnectionFailedEvent","sendMuteEvent","muted","sendScreenSharingEvent","ssrc","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","sendDominantSpeakerEvent","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","sendActiveDeviceListEvent","devicesData","globalSet","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","associateStreamWithVideoTag","isLocal","userId","usageLabel","containerId","sendGetUserMediaFailed","__WEBPACK_IMPORTED_MODULE_9__JitsiTrackError__","gum","constraintName","constraints","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","sendCreateOfferFailed","sendCreateAnswerFailed","sendSetLocalDescFailed","sendSetRemoteDescFailed","sendAddIceCandidateFailed","sendLog","globalSubSet","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","stats","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","csPerStats","sendApplicationLog","sendFeedback","overall","comment","sendEvent","__WEBPACK_IMPORTED_MODULE_1__service_statistics_AnalyticsEvents__","rating","LOCAL_JID","reportGlobalError","sendAnalyticsAndLog","properties","eventToLog","sendAnalytics","eventName","TYPE_OPERATIONAL","TYPE_PAGE","TYPE_TRACK","TYPE_UI","ACTION_JINGLE_RESTART","ACTION_JINGLE_SA_TIMEOUT","ACTION_JINGLE_SI_RECEIVED","ACTION_JINGLE_TERMINATE","ACTION_JINGLE_TR_RECEIVED","ACTION_JINGLE_TR_SUCCESS","ACTION_P2P_ESTABLISHED","ACTION_P2P_FAILED","ACTION_P2P_SWITCH_TO_JVB","AVAILABLE_DEVICE","CONNECTION_DISCONNECTED","FEEDBACK","ICE_DURATION","ICE_ESTABLISHMENT_DURATION_DIFF","ICE_STATE_CHANGED","TRACK_UNMUTED","createBridgeDownEvent","action","actionSubject","createConnectionFailedEvent","errorType","errorMessage","details","error_type","error_message","createConnectionStageReachedEvent","stage","source","createFocusLeftEvent","createGetUserMediaEvent","createJingleEvent","createNoDataFromSourceEvent","mediaType","media_type","createP2PEvent","createRemotelyMutedEvent","createRtpStatsEvent","createTtfmEvent","USER_STATUS_CHANGED","AUTH_STATUS_CHANGED","AVAILABLE_DEVICES_CHANGED","AVATAR_CHANGED","BEFORE_STATISTICS_DISPOSED","CONFERENCE_ERROR","CONFERENCE_FAILED","CONFERENCE_JOINED","CONFERENCE_LEFT","CONNECTION_INTERRUPTED","CONNECTION_RESTORED","DATA_CHANNEL_OPENED","DISPLAY_NAME_CHANGED","DOMINANT_SPEAKER_CHANGED","DTMF_SUPPORT_CHANGED","ENDPOINT_MESSAGE_RECEIVED","JVB121_STATUS","KICKED","LAST_N_ENDPOINTS_CHANGED","LOCK_STATE_CHANGED","MESSAGE_RECEIVED","PRIVATE_MESSAGE_RECEIVED","PARTICIPANT_CONN_STATUS_CHANGED","PARTCIPANT_FEATURES_CHANGED","PARTICIPANT_PROPERTY_CHANGED","P2P_STATUS","PHONE_NUMBER_CHANGED","RECORDER_STATE_CHANGED","VIDEO_SIP_GW_AVAILABILITY_CHANGED","VIDEO_SIP_GW_SESSION_STATE_CHANGED","START_MUTED_POLICY_CHANGED","STARTED_MUTED","SUBJECT_CHANGED","SUSPEND_DETECTED","TALK_WHILE_MUTED","TRACK_ADDED","TRACK_AUDIO_LEVEL_CHANGED","TRACK_MUTE_CHANGED","TRACK_REMOVED","TRANSCRIPTION_STATUS_CHANGED","USER_JOINED","USER_LEFT","USER_ROLE_CHANGED","ADD_ICE_CANDIDATE_FAILED","AUDIO_MUTED_BY_FOCUS","AUTHENTICATION_REQUIRED","BRIDGE_DOWN","CALL_ACCEPTED","CALL_INCOMING","CALL_ENDED","CHAT_ERROR_RECEIVED","CONFERENCE_SETUP_FAILED","CONNECTION_ESTABLISHED","CONNECTION_FAILED","CONNECTION_ICE_FAILED","EMUC_ROOM_ADDED","EMUC_ROOM_REMOVED","ETHERPAD","FOCUS_DISCONNECTED","FOCUS_LEFT","GRACEFUL_SHUTDOWN","ICE_RESTARTING","JINGLE_ERROR","JINGLE_FATAL_ERROR","LOCAL_ROLE_CHANGED","MUC_DESTROYED","MUC_JOINED","MUC_MEMBER_JOINED","MUC_MEMBER_LEFT","MUC_LEFT","MUC_ROLE_CHANGED","MUC_LOCK_CHANGED","PARTICIPANT_AUDIO_MUTED","PARTICIPANT_VIDEO_MUTED","PARTICIPANT_VIDEO_TYPE_CHANGED","PASSWORD_REQUIRED","PEERCONNECTION_READY","PRESENCE_STATUS","PROMPT_FOR_LOGIN","READY_TO_JOIN","REMOTE_STATS","RESERVATION_ERROR","ROOM_CONNECT_ERROR","ROOM_CONNECT_NOT_ALLOWED_ERROR","ROOM_JOIN_ERROR","ROOM_MAX_USERS_ERROR","SENDING_CHAT_MESSAGE","SENDING_PRIVATE_CHAT_MESSAGE","SESSION_ACCEPT_TIMEOUT","START_MUTED_FROM_FOCUS","TRANSPORT_INFO","ICE_CONNECTION_STATE_CHANGED","JSON_MESSAGE_RECEIVED","CREATE_ANSWER_FAILED","CREATE_OFFER_FAILED","RTC_READY","DATA_CHANNEL_OPEN","ENDPOINT_CONN_STATUS_CHANGED","LASTN_ENDPOINT_CHANGED","LASTN_VALUE_CHANGED","LOCAL_TRACK_SSRC_UPDATED","TRACK_ATTACHED","REMOTE_TRACK_ADDED","REMOTE_TRACK_MUTE","REMOTE_TRACK_REMOVED","REMOTE_TRACK_UNMUTE","SET_LOCAL_DESCRIPTION_FAILED","SET_REMOTE_DESCRIPTION_FAILED","AUDIO_OUTPUT_DEVICE_CHANGED","DEVICE_LIST_CHANGED","DEVICE_LIST_AVAILABLE","LOCAL_UFRAG_CHANGED","REMOTE_UFRAG_CHANGED","writable","Listenable","addEventListener","addListener","removeEventListener","off","logDisabled_","deprecationWarnings_","disableLog","bool","disableWarnings","console","deprecated","oldMethod","newMethod","extractVersion","uastring","expr","pos","detectBrowser","navigator","browser","mozGetUserMedia","userAgent","webkitGetUserMedia","webkitRTCPeerConnection","mediaDevices","shimCreateObjectURL","JitsiTrackError","devices","__WEBPACK_IMPORTED_MODULE_0__JitsiTrackErrors__","PERMISSION_DENIED","TRACK_ERROR_TO_MESSAGE_MAP","NOT_FOUND","constraint","video","UNSUPPORTED_RESOLUTION","failedConstraintName","mandatory","minWidth","minHeight","CONSTRAINT_FAILED","GENERAL","FIREFOX_EXTENSION_NEEDED","CHROME_EXTENSION_INSTALLATION_ERROR","CHROME_EXTENSION_USER_GESTURE_REQUIRED","CHROME_EXTENSION_USER_CANCELED","CHROME_EXTENSION_GENERIC_ERROR","ELECTRON_DESKTOP_PICKER_ERROR","ELECTRON_DESKTOP_PICKER_NOT_FOUND","TRACK_IS_DISPOSED","TRACK_NO_STREAM_FOUND","NO_DATA_FROM_SOURCE","create","CAMERA","DESKTOP","__WEBPACK_IMPORTED_MODULE_0_jitsi_meet_logger__","SDPUtil","filterSpecialChars","iceparams","mediadesc","sessiondesc","ufrag","pwd","findLine","parseICEUfrag","parseICEPwd","buildICEUfrag","frag","buildICEPwd","parseMID","parseMLine","media","shift","port","fmt","buildMLine","mline","parseRTPMap","clockrate","channels","parseSCTPMap","buildRTPMap","parseCrypto","parseFingerprint","fingerprint","parseFmtp","parseICECandidate","candidate","elems","foundation","component","ip","generation","tcptype","network","buildICECandidate","cand","hasOwnAttribute","parseSSRC","desc","lines","parseRTCPFB","pt","params","parseExtmap","direction","haystack","needle","sessionpart","findLines","needles","candidateToJingle","candidateFromJingle","__WEBPACK_IMPORTED_MODULE_2__browser__","isFirefox","parsePrimaryVideoSsrc","videoMLine","numSsrcs","ssrcs","ssrcInfo","filter","array","numGroups","ssrcGroups","primarySsrc","fidGroup","find","group","semantics","simGroup","generateSsrc","__WEBPACK_IMPORTED_MODULE_1__util_RandomUtil___default","randomInt","getSsrcAttribute","mLine","attributeName","ssrcLine","parseGroupSsrcs","ssrcGroup","ssrcStr","getMedia","sdp","getUfrag","ufragLines","startsWith","preferVideoCodec","codecName","payloadType","rtp","codec","payload","payloadTypes","payloads","payloadIndex","unshift","stripVideoCodec","removePts","rtxApts","item","rtxPts","fmtp","keepPts","rtcpFb","parser","writer","write","parseFmtpConfig","parseParams","parsePayloads","parseRemoteCandidates","parseImageAttributes","parseSimulcastStreamList","EventEmitter","_events","_maxListeners","isFunction","isObject","isUndefined","defaultMaxListeners","setMaxListeners","er","listeners","context","newListener","warned","trace","once","g","fired","list","position","listenerCount","evlistener","emitter","eval","LOCAL_TRACK_STOPPED","TRACK_AUDIO_OUTPUT_CHANGED","TRACK_VIDEOTYPE_CHANGED","max","randomElement","arr","RandomUtil","randomHexDigit","randomHexString","randomAlphanumStr","getCurrent","performance","timing","navigationStart","getConnectionPluginDefinition","base","_class","_classCallCheck","_base","_class2","_ref","_this","__proto__","getPrototypeOf","setPrototypeOf","_createClass","ConnectionPluginListenable","__WEBPACK_IMPORTED_MODULE_0__util_Listenable__","getLocalStorage","storage","localStorage","_p8","_callStatsUserName","_machineId","username","__WEBPACK_IMPORTED_MODULE_1__util_UsernameGenerator___default","generateUsername","machineId","jitsiMeetId","sessionId","detect","Constants","browserName","chrome","codeBaseType","csioReactNative","csioGetOsName","csioGetOsVer","codeBase","os","osVersion","appVersion","parseFloat","opera","msie","edge","safari","firefox","exec","osName","windows","mac","android","ios","browserVersion","_dereq_","1","Promise","any","promises","SomePromiseArray","promise","setHowMany","setUnwrap","_SomePromiseArray","2","Async","_customScheduler","_isTickUsed","_lateQueue","Queue","_normalQueue","_haveDrainedQueues","_trampolineEnabled","drainQueues","_drainQueues","_schedule","schedule","AsyncInvokeLater","fn","receiver","_queueTick","AsyncInvoke","AsyncSettlePromises","_pushOne","firstLineError","util","setScheduler","prev","hasCustomScheduler","enableTrampoline","disableTrampolineIfNecessary","hasDevTools","haveItemsQueued","fatalError","isNode","process","stderr","exit","throwLater","invokeLater","invoke","settlePromises","_settlePromises","_drainQueue","queue","./queue","./schedule","./util","3","INTERNAL","tryConvertToPromise","calledBind","rejectThis","_reject","targetRejected","promiseRejectionQueued","bindingPromise","_then","bindingResolved","_bitField","_resolveCallback","target","bindingRejected","_propagateFrom","propagateFromFunction","_boundValue","boundValueFunction","maybePromise","_target","_setBoundTo","_setOnCancel","_boundTo","_isBound","resolve","4","old","bluebird","noConflict","./promise","5","cr","callerCache","getterCache","ensureMethod","methodName","classString","caller","namedGetter","indexedGetter","getGetter","canEvaluate","isIdentifier","undefined","propertyName","maybeGetter","6","PromiseArray","apiRejection","tryCatch","errorObj","_async","break","cancel","cancellation","_warn","_isCancellable","_cancelBy","_isFollowing","_followee","_cancelBranched","parent","_cancellationParent","_setWillBeCancelled","_branchHasCancelled","_branchesRemainingToCancel","_enoughBranchesHaveCancelled","canceller","_invokeOnCancel","_cancel","_setCancelled","_cancelPromises","_length","_unsetOnCancel","_onCancelField","isPending","_isCancelled","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","_attachExtraTrace","_resultCancelled","_onCancel","_invokeInternalOnCancel","7","NEXT_FILTER","getKeys","cb","boundTo","predicateLoop","matchesPredicate","./es5","8","Context","_trace","CapturedTrace","peekContext","contextStack","longStackTraces","_promiseCreated","_pushContext","_popContext","_peekContext","deactivateLongStackTraces","activateLongStackTraces","Promise_pushContext","Promise_popContext","Promise_PeekContext","Promise_peekContext","Promise_promiseCreated","ctx","9","generatePromiseLifecycleEventObject","defaultFireEvent","cancellationExecute","executor","reject","onCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","previousOnCancel","cancellationOnCancel","cancellationSetOnCancel","cancellationClearCancellationData","cancellationPropagateFrom","flags","branchesRemainingToCancel","isFulfilled","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","ignoreSelf","canAttachTrace","_parent","attachExtraTrace","__stackCleaned__","parsed","parseStackAndMessage","notEnumerableProp","shouldUseOwnTrace","warnings","warning","Warning","activeFireEvent","formatAndLogError","cleanStack","isTraceLine","stackFramePattern","isInternalFrame","shouldIgnore","indentStackFrames","title","isSoft","formatStack","printWarning","fireRejectionEvent","localHandler","localEventFired","formatNonError","maxChars","longStackTracesIsSupported","captureStackTrace","parseLineInfo","parseLineInfoRegex","_promisesCreated","uncycle","unhandledRejectionHandled","possiblyUnhandledRejection","getDomain","_getDomain","bluebirdFramePattern","nodeFramePattern","parseLinePattern","debugging","env","wForgottenReturn","suppressUnhandledRejections","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","_setReturnedNonUndefined","_returnedNonUndefined","_isRejectionUnhandled","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","onPossiblyUnhandledRejection","domainBind","onUnhandledRejectionHandled","disableLongStackTraces","Promise_captureStackTrace","_captureStackTrace","Promise_attachExtraTrace","hasLongStackTraces","fireDomEvent","CustomEvent","global","dispatchEvent","domEvent","detail","cancelable","Event","createEvent","initCustomEvent","fireGlobalEvent","method","eventToObjectGenerator","promiseCreated","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","unhandledRejection","rejectionHandled","globalEventFired","domEventFired","opts","warningsOption","_clearCancellationData","_execute","monitoring","_fireEvent","inherits","nodes","stackToIndex","cycleEdgeNode","currentChildLength","stacks","current","currentLastIndex","currentLastLine","commonRootMeetPoint","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","hasStackAfterThrow","isTTY","color","checkForgottenReturns","returnValue","handlerLine","creatorLine","traceLines","lineMatches","firstUserLine","setBounds","lastLineError","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","replacement","./errors","10","returner","thrower","thenReturn","throw","thenThrow","catchThrow","_reason","caught","catchReturn","_value","11","promiseAllThis","PromiseAll","PromiseReduce","reduce","all","each","mapSeries","12","subError","nameProperty","defaultMessage","SubError","OperationalError","cause","isOperational","_TypeError","_RangeError","es5","Objectfreeze","freeze","CancellationError","TimeoutError","AggregateError","RangeError","methods","indent","errorTypes","__BluebirdErrorTypes__","RejectionError","13","isES5","getDescriptor","getOwnPropertyDescriptor","names","getOwnPropertyNames","propertyIsWritable","descriptor","ObjectKeys","14","PromiseMap","15","PassThroughHandlerContext","called","cancelPromise","FinallyHandlerCancelReaction","finallyHandler","checkCancel","succeed","fail","reasonOrValue","isFinallyHandler","isRejected","catchFilter","_passThrough","success","then","lastly","finally","tap","tapCatch","handlerOrPredicate","catchInstances","./catch_filter","16","Proxyable","PromiseSpawn","generatorFunction","yieldHandler","internal","_finallyPromise","_promise","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","yieldHandlers","_yieldedPromise","_cancellationPhase","_isResolved","_cleanup","_fulfill","_promiseCancelled","coroutine","returnSentinel","_continue","_promiseFulfilled","_promiseRejected","_run","_rejectCallback","traceParent","bitField","_proxy","PromiseSpawn$","generator","spawn","addYieldHandler","17","last","spread","18","MappingPromiseArray","limit","_filter","constructor$","_preservedValues","_limit","_inFlight","_queue","_asyncInit","concurrency","isFinite","_init$","_init","_values","preservedValues","_totalResolved","_resolve","booleans","19","_resolveFromSyncValue","attempt","try","20","wrapAsOperationalError","rErrorKey","markAsOriginatingFromRejection","maybeWrapAsError","multiArgs","wrapped","21","spreadAdapter","val","nodeback","successAdapter","errorAdapter","newReason","asCallback","nodeify","adapter","22","_fulfillmentHandler0","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","deferResolve","deferReject","fillTypes","makeSelfResolutionError","reflectHandler","PromiseInspection","UNDEFINED_BINDING","APPLY","createContext","nodebackForPromise","catch","reflect","didFulfill","didReject","_setIsFinal","toJSON","fulfillmentValue","rejectionReason","originatesFromRejection","getNewLibraryCopy","is","fromNode","fromCallback","_isFateSealed","_setAsyncGuaranteed","cast","_setFulfilled","fulfilled","rejected","internalData","haveInternalData","settler","_settlePromiseCtx","_settlePromiseLateCancellationObserver","_addCallbacks","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_receiverAt","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","fulfill","_migrateCallbackAt","proxyable","shouldBind","_setFollowee","synchronous","ignoreNonErrorWarnings","ensureErrorObject","hasStack","_settlePromiseFromHandler","_settlePromise","isPromise","asyncGuaranteed","_settlePromise0","_clearCallbackDataAtIndex","_fulfillPromises","_rejectPromises","defer","pending","toFastProperties","./any.js","./async","./bind","./call_get.js","./cancel","./context","./debuggability","./direct_resolve","./each.js","./filter.js","./finally","./generators.js","./join","./map.js","./method","./nodeback","./nodeify.js","./promise_array","./promisify.js","./props.js","./race.js","./reduce.js","./settle.js","./some.js","./synchronous_inspection","./thenables","./timers.js","./using.js","23","resolveValueIfEmpty","asArray","_iterate","_resolveEmptyArray","getActualLength","shouldCopyValues","isResolved","24","propsFilter","noCopyPropsPattern","isPromisified","__isPromisified__","hasPromisified","getDataPropertyOrDefault","defaultPromisified","promisifiableMethods","suffixRegexp","inheritedDataKeys","passesDefaultFilter","defaultFilter","keyWithoutAsyncSuffix","promisifyAll","promisifier","RegExp","escapeIdentRegex","promisifiedKey","makeNodePromisified","THIS","promisified","withAppended","makeNodePromisifiedEval","__","defaultThis","promisify","copyDescriptors","isClass","25","PropertiesPromiseArray","entries","isMap","Es6Map","mapToEntries","_isMap","props","castValue","extractEntry","keyOffset","26","capacity","_capacity","_front","_willBeOverCapacity","_checkCapacity","wrapMask","front","_resizeTo","oldCapacity","src","srcIndex","dst","dstIndex","27","race","raceLater","28","ReductionPromiseArray","initialValue","_each","_fn","_initialValue","_currentCancellable","_eachValues","completed","valueOrReason","gotAccum","accum","_gotAccum","gotValue","_eachComplete","sender","_resultCancelled$","29","NativePromise","getNativePromise","MutationObserver","GlobalSetImmediate","setImmediate","ProcessNextTick","nextTick","isRecentNode","nativePromise","standalone","cordova","div","toggleScheduled","div2","classList","toggle","observe","30","SettledPromiseArray","_promiseResolved","inspection","_settledValueField","settle","31","_howMany","_unwrap","_initialized","some","howMany","CANCELLATION","isArrayResolved","_canPossiblyFulfill","_getRangeError","count","_addFulfilled","_fulfilled","_addRejected","_checkOutcome","_rejected","32","__isCancelled","33","34","HandleWrapper","handle","successClear","failureClear","afterValue","delay","ms","handleWrapper","35","resources","thenable","_isDisposable","_getDisposer","_setDisposable","tryDispose","Disposer","_context","FunctionDisposer","maybeUnwrapDisposer","isDisposer","ResourceList","NULL","doDispose","_unsetDisposable","using","spreadArgs","disposer","reflectedResources","resultPromise","inspections","_disposer","36","tryCatcher","tryCatchTarget","isPrimitive","maybeError","safeToString","appendee","defaultValue","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","thisAssignmentPattern","FakeConstructor","rident","filledRange","isError","ignore","hasEnvVariables","globalObject","Child","Parent","excludedPrototypes","isExcludedProto","visitedKeys","enumeration","ArrayFrom","itResult","it","loadTimes","versions","P","WRONG_STATE","S","C","assign","peerConnectionIdCounter","rtcTrackIdCounter","RTC","conference","peerConnections","localTracks","_channel","_channelOpen","_lastN","_lastNEndpoints","_pinnedEndpoint","_selectedEndpoint","_lastNChangeListener","_onLastNChanged","__WEBPACK_IMPORTED_MODULE_12__RTCUtils__","isDeviceChangeAvailable","__WEBPACK_IMPORTED_MODULE_11__service_RTC_RTCEvents___default","deviceId","_updateAudioOutputForAudioTracks","getAudioOutputDevice","__WEBPACK_IMPORTED_MODULE_7__util_Listenable__","wsUrl","_this2","__WEBPACK_IMPORTED_MODULE_1__BridgeChannel__","_channelOpenListener","sendPinnedEndpointMessage","sendSelectedEndpointMessage","__WEBPACK_IMPORTED_MODULE_2__util_GlobalOnErrorHandler___default","sendSetLastNMessage","leavingLastNEndpoints","enteringLastNEndpoints","_this3","lastNEndpoints","oldLastNEndpoints","isInLastN","__WEBPACK_IMPORTED_MODULE_3__JitsiConferenceEvents__","mode","maxFrameHeight","sendReceiverVideoConstraintMessage","signaling","iceConfig","isP2P","pcConstraints","getPCConstraints","abtestSuspendVideo","setSuspendVideo","__WEBPACK_IMPORTED_MODULE_13__statistics_statistics__","addPermanentProperties","__WEBPACK_IMPORTED_MODULE_8__util_MathUtil__","newConnection","__WEBPACK_IMPORTED_MODULE_14__TraceablePeerConnection__","traceablePeerConnection","track","localVideo","getLocalTracks","__WEBPACK_IMPORTED_MODULE_9__service_RTC_MediaType__","localAudio","tracks","getType","remoteTracks","pcRemoteTracks","getRemoteTracks","mutePromises","audioTrack","mute","unmute","owner","removedTracks","pcRemovedTracks","removeRemoteTracks","audioLevel","getTrackBySSRC","isAudioTrack","setAudioLevel","sendMessage","remoteAudioTracks","setAudioOutput","usesNewGumFlow","__WEBPACK_IMPORTED_MODULE_10__browser__","newObtainAudioAndVideoPermissions","obtainAudioAndVideoPermissions","tracksInfo","metaData","sourceId","sourceType","videoType","_track$getSettings","getSettings","facingMode","__WEBPACK_IMPORTED_MODULE_4__JitsiLocalTrack__","kind","rtcId","newTracks","trackInfo","micDeviceId","__WEBPACK_IMPORTED_MODULE_15__service_RTC_VideoType___default","cameraDeviceId","localTrack","_extends","_isReceivingData","__WEBPACK_IMPORTED_MODULE_5__JitsiTrackError__","__WEBPACK_IMPORTED_MODULE_6__JitsiTrackErrors__","eventType","isRTCReady","getDeviceAvailability","p2pPcConstraints","elSelector","attachMediaStream","getStreamID","getTrackID","isDeviceListAvailable","deviceType","getCurrentlyAvailableMediaDevices","device","getEventDataForActiveDevice","setAudioOutputDevice","isUserStreamById","streamId","enumerateDevices","mediaStream","stopMediaStream","isDesktopSharingEnabled","getConstraints","um","audio","isNewStyleConstraintsSupported","__WEBPACK_IMPORTED_MODULE_9__browser__","isEdge","isTemasysPluginUsed","optional","__WEBPACK_IMPORTED_MODULE_1__service_RTC_CameraFacingMode___default","USER","minFps","maxFps","fps","minFrameRate","maxFrameRate","resolution","__WEBPACK_IMPORTED_MODULE_8__service_RTC_Resolutions___default","width","ideal","height","maxWidth","maxHeight","echoCancellation","disableAEC","disableAP","googEchoCancellation","googAutoGainControl","disableAGC","googNoiseSuppression","disableNS","googHighpassFilter","disableHPF","googNoiseSuppression2","googEchoCancellation2","googAutoGainControl2","isChrome","getSSConstraints","AdapterJS","WebRTCPlugin","screensharingKey","mozMediaSource","mediaSource","frameRate","SS_DEFAULT_FRAME_RATE","errmsg","__WEBPACK_IMPORTED_MODULE_4__util_GlobalOnErrorHandler___default","bandwidth","firefox_fake_device","fake","desktopStream","_options$frameRate","chromeMediaSource","screen","chromeMediaSourceId","setAvailableDevices","audioTracksReceived","getAudioTracks","videoTracksReceived","getVideoTracks","__WEBPACK_IMPORTED_MODULE_10__service_RTC_RTCEvents___default","pollForAvailableMediaDevices","rawEnumerateDevicesWithCallback","ds","currentlyAvailableMediaDevices","newDevices","mediaDeviceInfoToJSON","groupId","label","facing","onMediaDevicesListChanged","AVAILABLE_DEVICES_POLL_INTERVAL_TIME","sendDeviceListToAnalytics","deviceList","audioInputDeviceCount","audioOutputDeviceCount","videoInputDeviceCount","videoOutputDeviceCount","audio_input_device_count","audio_output_device_count","video_input_device_count","video_output_device_count","device_id","device_group_id","device_kind","device_label","__WEBPACK_IMPORTED_MODULE_14__statistics_statistics__","__WEBPACK_IMPORTED_MODULE_0__service_statistics_AnalyticsEvents__","devicesReceived","videoInputDevices","audioInputDevices","videoInputDevicesWithEmptyLabels","audioInputDevicesWithEmptyLabels","maybeApply","wrapGetUserMedia","getUserMedia","successCallback","errorCallback","enumerateDevicesThroughMediaStreamTrack","MediaStreamTrack","getSources","sources","convertMediaStreamTrackSource","defaultSetVideoSrc","srcObjectPropertyName","jitsiObjectURL","URL","webkitURL","createObjectURL","onReady","GUM","rtcReady","__WEBPACK_IMPORTED_MODULE_12__ScreenObtainer__","rtcUtils","isDeviceChangeEventSupported","wrapAttachMediaStream","origAttachMediaStream","res","audioOutputChanged","setSinkId","ex","__WEBPACK_IMPORTED_MODULE_3_jitsi_meet_logger__","__WEBPACK_IMPORTED_MODULE_2_events___default","OLD_GUM_DEFAULT_DEVICES","DEFAULT_CONSTRAINTS","aspectRatio","audioOutputDeviceId","featureDetectionAudioEl","isAudioOutputDeviceChangeAvailable","RTCUtils","__WEBPACK_IMPORTED_MODULE_6__util_Listenable__","RTCPeerConnectionType","RTCPeerConnection","foundDevices","srcObject","isOpera","isNWJS","isElectron","__WEBPACK_IMPORTED_MODULE_13__xmpp_SDPUtil__","webkitMediaStream","videoTracks","audioTracks","__WEBPACK_IMPORTED_MODULE_11__ortc_RTCPeerConnection__","jitsiRemoteId","webRTCReadyPromise","webRTCReady","isPluginInstalled","pluginInfo","plugName","containerSel","$","show","getUserMediaWithConstraints","_initPCConstraints","googHighStartBitrate","googPayloadPadding","googScreencastMinBitrate","googCpuOveruseDetection","googCpuOveruseEncodeUsage","googCpuUnderuseThreshold","googCpuOveruseThreshold","useIPv6","googIPv6","disableSuspendVideo","googSuspendBelowMinBitrate","failureCallback","jitsiTrackError","umDevices","_this4","isSupported","supportsVideo","desktopSharingExtensionExternalInstallation","desktopSharingSources","gumOptions","obtainStream","includes","supportsMediaStreamConstructor","_getAudioAndVideoStreams","_getAudioAndVideoStreamsSeparately","streams","audioStream","videoStream","audioVideo","NativeMediaStream","MediaStream","addTrack","desktop","_desktopStream","__WEBPACK_IMPORTED_MODULE_7__service_RTC_MediaType__","_this5","requestingDesktop","avStream","missingTracks","_getMissingTracks","_parseDesktopSharingOptions","requestedDevices","missingDevices","audioDeviceRequested","videoDeviceRequested","_this6","deviceGUM","_len2","_key2","_len3","_key3","obtainDevices","desktopSharingFrameRate","mediaStreamsMetaData","maybeRequestDesktopDevice","isDesktopDeviceRequsted","_newGetDesktopMedia","maybeRequestCaptureDevices","requestedCaptureDevices","_newGetUserMediaWithConstraints","Boolean","onRTCReady","_isDeviceListAvailable","getTracks","release","url","revokeObjectURL","deviceData","enable","ae","parsePrimarySSRC","parseSecondarySSRC","_getSSRCCount","MLineWrap","ssrcNumber","attrName","ssrcObj","ssrcNum","primarySSRC","msid","findGroup","fecGroup","findGroupByPrimarySSRC","videoSSRCs","getSSRCs","ssrcGroupInfo","secondarySsrc","groupInfo","oldSSRC","newSSRC","SdpTransformWrap","rawSDP","parsedSDP","__WEBPACK_IMPORTED_MODULE_0_sdp_transform__","selectedMLine","ERROR_SESSION_EXISTS","STATUS_AVAILABLE","STATUS_UNDEFINED","STATUS_BUSY","STATE_ON","STATE_OFF","STATE_PENDING","STATE_RETRYING","STATE_FAILED","ERROR_NO_CONNECTION","REMOTE_STATS_UPDATED","LOCAL_STATS_UPDATED","VIDEOBRIDGE_NOT_AVAILABLE","CHAT_ERROR","CONFERENCE_DESTROYED","CONFERENCE_MAX_USERS","CONNECTION_ERROR","NOT_ALLOWED_ERROR","INCOMPATIBLE_SERVER_VERSIONS","PASSWORD_NOT_SUPPORTED","SETUP_FAILED","SWPlugin","attaches","signalListeners","mapFnc","remove","notify","addMapFnc","mapping","addSignalListener","signalName","signalize","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","marker","cachedClearTimeout","Item","noop","argv","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","1080","order","fullhd","720","hd","960","360","640","vga","180","320","DEFAULT_NOT_IN_LAST_N_TIMEOUT","DEFAULT_RTC_MUTE_TIMEOUT","ParticipantConnectionStatus","ACTIVE","INACTIVE","INTERRUPTED","RESTORING","ParticipantConnectionStatusHandler","rtc","trackTimers","connStatusFromJvb","outOfLastNTimeout","rtcMuteTimeout","rtcMutedTimestamp","enteredLastNTimestamp","restoringTimers","isConnectionActiveByJvb","isRestoringTimedout","isVideoMuted","isVideoTrackFrozen","__WEBPACK_IMPORTED_MODULE_4__browser__","supportsVideoMuteOnConnInterrupted","_onEndpointConnStatusChanged","onEndpointConnStatusChanged","__WEBPACK_IMPORTED_MODULE_5__service_RTC_RTCEvents___default","_onP2PStatus","refreshConnectionStatusForAll","__WEBPACK_IMPORTED_MODULE_1__JitsiConferenceEvents__","_onTrackRtcMuted","onTrackRtcMuted","_onTrackRtcUnmuted","onTrackRtcUnmuted","_onRemoteTrackAdded","onRemoteTrackAdded","_onRemoteTrackRemoved","onRemoteTrackRemoved","_onSignallingMuteChanged","onSignallingMuteChanged","_onLastNValueChanged","participantIds","participantId","clearRtcMutedTimestamp","endpointId","isActive","myUserId","figureOutConnectionStatus","participant","newStatus","getConnectionStatus","getId","_setConnectionStatus","__WEBPACK_IMPORTED_MODULE_6__statistics_statistics__","remoteTrack","__WEBPACK_IMPORTED_MODULE_3__service_RTC_MediaType__","getParticipantId","__WEBPACK_IMPORTED_MODULE_2__JitsiTrackEvents__","hasAnyVideoRTCMuted","hasAnyVideoTrackWebRTCMuted","_getVideoFrozenTimeout","participants","getParticipants","getParticipantById","inP2PMode","isP2PActive","isRestoringTimedOut","_isRestoringTimedout","audioOnlyMode","getLastN","isConnActiveByJvb","newState","_getNewStateForP2PMode","_getNewStateForJvbMode","_clearRestoringTimer","_changeConnectionStatus","leavingLastN","enteringLastN","rTimer","isMuted","onwebrtcready","isUsingPlugin","_onwebrtcreadies","onwebrtcreadyDone","pluginId","onload","portalLink","downloadLink","companyName","downloadLinks","win","platform","TAGS","NONE","pageId","defineWebRTCInterface","pluginInjectionInterval","injectPlugin","PLUGIN_STATES","INITIALIZING","INJECTING","INJECTED","READY","pluginState","PLUGIN_LOG_LEVELS","WARNING","VERBOSE","SENSITIVE","WaitForPluginReady","callWhenPluginReady","__TemWebRTCReady0","maybeThroughWebRTCReady","timer","setInterval","clearInterval","PLUGIN","REQUIRE_INSTALLATION","NOT_SUPPORTED","BUTTON","REFRESH","REQUIRE_REFRESH","_iceConnectionStates","starting","checking","disconnected","failed","closed","_iceConnectionFiredStates","isDefined","parseWebrtcDetectedBrowser","hasMatch","opr","addons","webrtcDetectedBrowser","webrtcDetectedVersion","webrtcMinimumVersion","webrtcDetectedType","webrtcDetectedDCSupport","chromiumVersion","StyleMedia","InstallTrigger","webstore","isMobile","addEvent","evnt","attachEvent","renderNotificationBar","buttonText","buttonLink","openNewTab","displayRefreshBar","top","left","right","backgroundColor","border","borderBottom","zIndex","webkitTransition","transition","contentWindow","contentDocument","getElementById","EXTENSION","preventDefault","cancelBubble","pluginInstallInterval","isIE","plugins","refresh","removeChild","webkitTransform","transform","checkMediaDataChannelSettings","peerBrowserAgent","peerBrowserVersion","beOfferer","isLocalFirefox","isLocalFirefoxInterop","isPeerFirefox","MozDontOfferDataChannel","checkIceConnectionState","peerId","iceConnectionState","createIceServer","createIceServers","RTCSessionDescription","RTCIceCandidate","reattachMediaStream","exception","time","timeEnd","groupCollapsed","groupEnd","checkPluginReadyState","logLevel","getAllCams","comName","plugType","installedCb","notInstalledCb","pluginArray","mimeTypes","variable","password","iceServer","urlParts","hasCredentials","credential","urls","iceServers","ConstructSessionDescription","servers","invalidConstraits","PEER_CONNECTION_VERSION","PeerConnection","GetSources","constraintsToPlugin","cc","exact","oldname","toUpperCase","oc","mix","advanced","requestUserMedia","kinds","enableSoundTracks","elementId","temp","classHTML","className","class","clientWidth","clientHeight","insertBefore","children","setStreamId","newElement","forwardEventHandlers","getStreamWithId","destElem","srcElem","propName","subPrototype","sdpMid","ConstructIceCandidate","sdpMLineIndex","pluginNeededButNotInstalledCb","pluginNeededButNotInstalledCbPriv","hidePluginInstallPrompt","popupString","SDPUtils","generateIdentifier","localCName","splitLines","blob","trim","splitSections","matchPrefix","parseCandidate","relatedAddress","relatedPort","tcpType","writeCandidate","parseRtpMap","clockRate","numChannels","writeRtpMap","preferredPayloadType","writeExtmap","headerExtension","preferredId","kv","writeFmtp","parameters","param","parseRtcpFb","parameter","writeRtcpFb","rtcpFeedback","fb","parseSsrcMedia","sp","colon","getDtlsParameters","mediaSection","fpLine","role","fingerprints","algorithm","writeDtlsParameters","setupType","fp","getIceParameters","usernameFragment","writeIceParameters","parseRtpParameters","description","codecs","headerExtensions","fecMechanisms","rtcp","rtpmapline","fmtps","writeRtpDescription","caps","parseRtpEncodingParameters","encodingParameters","hasRed","hasUlpfec","flows","apt","encParam","codecPayloadType","rtx","fec","maxBitrate","writeSessionBoilerplate","writeMediaSection","transceiver","iceGatherer","getLocalParameters","dtlsTransport","mid","rtpSender","rtpReceiver","sendEncodingParameters","getDirection","logging","browserDetails","chromeShim","edgeShim","firefoxShim","safariShim","shimPeerConnection","browserShim","shimGetUserMedia","shimMediaStream","shimSourceObject","shimOnTrack","./chrome/chrome_shim","./edge/edge_shim","./firefox/firefox_shim","./safari/safari_shim","./utils","_ontrack","_ontrackpoly","te","HTMLMediaElement","_srcObject","pcConfig","iceTransportPolicy","iceTransports","pc","origGetStats","getStats","selector","fixChromeStats_","standardReport","report","standardStats","timestamp","stat","makeMapStats","legacyStats","generateCertificate","nativeMethod","nativeAddIceCandidate","addIceCandidate","../utils.js","./getusermedia","constraintsToChrome_","oldname_","shimConstraints_","face","getSupportedConstraints","back","shimError_","PermissionDeniedError","ConstraintNotSatisfiedError","onError","getUserMediaPromise_","origGetUserMedia","RTCIceGatherer","_eventTarget","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onnegotiationneeded","ondatachannel","localStreams","remoteStreams","getLocalStreams","getRemoteStreams","localDescription","remoteDescription","signalingState","iceGatheringState","iceOptions","gatherPolicy","usingBundle","bundlePolicy","server","transceivers","_localIceCandidatesBuffer","_emitBufferedCandidates","sections","every","state","addStream","clone","_maybeFireNegotiationNeeded","removeStream","idx","getSenders","getReceivers","_getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","lCodec","rCodec","lHeaderExtension","rHeaderExtension","_createIceAndDtlsTransports","iceTransport","RTCIceTransport","onlocalcandidate","evt","end","complete","onicestatechange","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","_transceive","recv","encodings","cname","recvEncodingParameters","receive","setLocalDescription","_pendingOffer","isIceLite","isDatachannel","remoteIceParameters","cands","setRemoteCandidates","remoteDtlsParameters","_updateSignalingState","hasCallback","setRemoteDescription","receiverList","remoteSsrc","isComplete","RTCRtpReceiver","getCapabilities","RTCRtpSender","trackEvent","states","new","connecting","createOffer","offerOptions","numAudioTracks","numVideoTracks","offerToReceiveAudio","offerToReceiveVideo","wantReceive","createAnswer","addRemoteCandidate","mLineIndex","results","../utils","mozSrcObject","mozRTCPeerConnection","newIceServers","newServer","mozRTCSessionDescription","mozRTCIceCandidate","nativeGetStats","onSucc","onErr","SecurityError","The operation is insecure.","getUserMedia_","constraintsToFF37_","orgEnumerateDevices","successCb","turnUrlParts","attachMediaStream_base","reattachMediaStream_base","baseGetUserMedia","REQUIRE_INSTALLATION_FF","REQUIRE_INSTALLATION_CHROME","BUTTON_FF","BUTTON_CHROME","copy","failureCb","updatedConstraints","checkIfReady","chromeCallback","onIFrameCallback","chromeExtensionStatus","postFrameMessage","captureSourceId","HasScreensharingFeature","isScreensharingAvailable","iframe","isLoaded","display","postMessage","callerInfo","fileLocation","column","globalTransports","consoleTransport","transportIdx","LOG","_detectElectron","ELECTRON","_detectNWJS","NWJS","_detectReactNative","product","REACT_NATIVE","CHROME","OPERA","FIREFOX","INTERNET_EXPLORER","EDGE","SAFARI","UNKNOWN","bowserNameToJitsiName","Chrome","Chromium","Opera","Firefox","Internet Explorer","Microsoft Edge","Safari","BrowserDetection_BrowserDetection","BrowserDetection","browserInfo","detectedBrowserInfo","detectors","bowser_default","_name","_version","compareVersions","compareVersion","BrowserCapabilities","capabilitiesDB","isUsingIFrame","browser_detection_BrowserDetection","capabilitiesByVersion","getVersion","browserCapabilities","getName","capabilities","isVersionGreaterThan","_capabilities","iframeCapabilities","audioIn","audioOut","screenSharing","videoIn","videoOut","R","Timeout","clearFn","_id","_clearFn","unref","ref","enroll","msecs","_idleTimeoutId","unenroll","_unrefActive","active","_onTimeout","clearImmediate","TurnTest","resolveCb","rejectCb","setMessageCallback","handleMessage","setErrorCallback","handleError","forceStopped","initiate","finished","randomAsciiString","MessageMaker","Timestamps","sentBytes","padding","LocalStatsCollector","interval","intervalId","intervalMilis","__WEBPACK_IMPORTED_MODULE_0__browser__","AudioContext","webkitAudioContext","suspend","isLocalStatsSupported","analyser","createAnalyser","smoothingTimeConstant","fftSize","createMediaStreamSource","Uint8Array","frequencyBinCount","getByteTimeDomainData","newLevel","lastLevel","diff","samples","maxVolume","toFixed","CONNECTION_STATS","AUDIO_LEVEL","BEFORE_DISPOSED","BYTE_SENT_STATS","currentExecutingScript","ScriptUtil","prepend","relativeURL","loadCallback","script","referenceNode","scriptEl","scriptSrc","baseScriptSrc","lastIndexOf","XMPP","token","disconnectInProgress","connectionTimes","authenticatedUser","_initStrophePlugins","bosh","conn","__WEBPACK_IMPORTED_MODULE_1_strophe_js__","__WEBPACK_IMPORTED_MODULE_14__Caps__","clientNode","initFeaturesList","__WEBPACK_IMPORTED_MODULE_13__util_Listenable__","addFeature","disableRtx","supportsRtx","enableLipSync","rayo","credentials","statusStr","getStatusString","useStunTurn","p2p","jingle","getStunAndTurnCredentials","pingJid","ping","hasPingSupport","hasPing","startInterval","__WEBPACK_IMPORTED_MODULE_5__JitsiConnectionEvents__","anonymousConnectionFailed","connectionFailed","lastErrorMsg","__WEBPACK_IMPORTED_MODULE_4__JitsiConnectionErrors__","OTHER_ERROR","stopInterval","wasIntentionalDisconnect","errMsg","_getConnectionFailedReasonDetails","lastErrorStatus","getLastErrorStatus","SERVER_ERROR","CONNECTION_DROPPED_ERROR","connectionHandler","attaching","_options$hosts","hosts","anonymousdomain","configDomain","hostname","mucNickname","roomjid","muc","cfgNickname","useNicks","nick","__WEBPACK_IMPORTED_MODULE_3__util_RandomUtil___default","emuc","createRoom","getLog","_connection$rayo","dial","moderate","setMute","eject","sessions","ev","evType","jvb","p2pStunServers","stunServers","__WEBPACK_IMPORTED_MODULE_7__strophe_emuc__","__WEBPACK_IMPORTED_MODULE_8__strophe_jingle__","__WEBPACK_IMPORTED_MODULE_9__strophe_util__","__WEBPACK_IMPORTED_MODULE_10__strophe_ping__","__WEBPACK_IMPORTED_MODULE_11__strophe_rayo__","__WEBPACK_IMPORTED_MODULE_12__strophe_logger__","deploymentInfo","shard","shard_changed","suspend_time","getPingSuspendTime","OFF","ON","IDENTITY_UPDATED","getJibriErrorDetails","errorIqNode","querySelector","errorText","errorChild","Recording","focusMucJid","jirecon","_isSupported","types","JIRECON","JIBRI","JIBRI_FILE","COLIBRI","jireconRid","XMPPEvents","JitsiRecorderErrors","AVAILABLE","UNAVAILABLE","PENDING","RETRYING","BUSY","FAILED","START","STOP","handleJibriPresence","jibri","errorDetails","setRecordingJibri","errCallback","INVALID_STATE","recording_mode","streamid","setRecordingJirecon","mucjid","stateStr","setRecordingColibri","setRecording","toggleRecording","statusChangeHandler","oldState","RECORDER_UNAVAILABLE","RECORDER_BUSY","NO_TOKEN","getState","getURL","STATE_CHANGE_FAILED","ENDED","SDP","mediaI","failICE","removeTcpCandidates","removeUdpCandidates","getMediaSsrcMap","mediaSSRCs","tmp","mediaindex","__WEBPACK_IMPORTED_MODULE_0__SDPUtil__","linessrc","containsSSRC","medias","mangle","newdesc","rtpmap","removeSessionLines","removeMediaLines","toJingle","thecreator","assrcline","creator","amidline","afmtpline","rtcpFbToJingle","crypto","required","ssrcMap","_ref2","_slicedToArray","availableSsrc","ssrcParameters","ssrcSdpLine","ridLines","rids","ridLine","ridInfo","senders","transportToJingle","sctpmap","sctpAttrs","number","setup","payloadtype","subtype","rtcpFbFromJingle","fromJingle","groups","contents","jingle2media","sctp","streamCount","PEER_VIDEO_TYPE_CHANGED","PEER_MUTED_CHANGED","addMediaStreamInactiveHandler","onended","oninactive","__WEBPACK_IMPORTED_MODULE_1_jitsi_meet_logger__","trackHandler2Prop","track_mute","track_unmute","track_ended","JitsiTrack","streamInactiveHandler","trackMediaType","containers","disposed","_streamInactiveHandler","_setStream","_setHandler","container","_onTrackAttach","__WEBPACK_IMPORTED_MODULE_4__RTCUtils__","_maybeFireTrackAttached","_attachTTFMTracker","getStreamId","trackId","getTrackId","isVideoTrack","ENVIRONMENT","grammar","reg","z","encoding","rate","address","sessionConfig","raddr","maxMessageSize","dir2","getDescription","getMediaSections","parseIceOptions","getMid","maxptime","extension","parseRtcpParameters","rtcpParameters","rsize","reducedSize","compound","mux","parseMsid","spec","planB","generateSessionId","sessId","sessVer","getKind","parseOLine","sessionVersion","netType","addressType","startRecorder","trackRecorder","recorder","startTime","stopRecorder","determineCorrectFileType","MediaRecorder","isTypeSupported","AUDIO_WEBM","AUDIO_OGG","AudioRecorder","jitsiConference","recorders","fileType","isRecording","RecordingResult","instantiateTrackRecorder","updateNames","originalStream","getOriginalStream","mimeType","ondataavailable","dataEvent","removeTrack","recorderToRemove","newName","getDisplayName","download","Blob","href","click","getRecordingResults","getFileType","PERMISSION_PROMPT_IS_SHOWN","getAnalyticsAttributesFromOptions","audio_requested","video_requested","screen_sharing_requested","__WEBPACK_IMPORTED_MODULE_27__modules_videosipgw_VideoSIPGWConstants__","__WEBPACK_IMPORTED_MODULE_18_jitsi_meet_logger___default","JitsiConnection","__WEBPACK_IMPORTED_MODULE_6__JitsiConnection__","constants","participantConnectionStatus","__WEBPACK_IMPORTED_MODULE_21__modules_connectivity_ParticipantConnectionStatus__","recordingStatus","__WEBPACK_IMPORTED_MODULE_17__modules_xmpp_recording__","recordingTypes","sipVideoGW","transcriptionStatus","__WEBPACK_IMPORTED_MODULE_15__JitsiTranscriptionStatus__","events","__WEBPACK_IMPORTED_MODULE_5__JitsiConferenceEvents__","__WEBPACK_IMPORTED_MODULE_8__JitsiConnectionEvents__","__WEBPACK_IMPORTED_MODULE_14__JitsiTrackEvents__","__WEBPACK_IMPORTED_MODULE_10__JitsiMediaDevicesEvents__","connectionQuality","__WEBPACK_IMPORTED_MODULE_2__service_connectivity_ConnectionQualityEvents__","__WEBPACK_IMPORTED_MODULE_4__JitsiConferenceErrors__","__WEBPACK_IMPORTED_MODULE_7__JitsiConnectionErrors__","__WEBPACK_IMPORTED_MODULE_11__JitsiRecorderErrors___default","__WEBPACK_IMPORTED_MODULE_13__JitsiTrackErrors__","__WEBPACK_IMPORTED_MODULE_12__JitsiTrackError__","logLevels","__WEBPACK_IMPORTED_MODULE_9__JitsiMediaDevices__","__WEBPACK_IMPORTED_MODULE_26__modules_statistics_statistics__","enableAnalyticsLogging","enableWindowOnErrorHandler","__WEBPACK_IMPORTED_MODULE_3__modules_util_GlobalOnErrorHandler___default","getGlobalOnErrorHandler","aprops","logObject","__WEBPACK_IMPORTED_MODULE_22__modules_RTC_RTC__","addGlobalLogTransport","globalTransport","removeGlobalLogTransport","createLocalTracks","emitEvent","__WEBPACK_IMPORTED_MODULE_23__modules_browser__","mStream","__WEBPACK_IMPORTED_MODULE_19__service_RTC_MediaType__","_setRealDeviceIdFromDeviceList","oldResolution","newResolution","__WEBPACK_IMPORTED_MODULE_20__service_RTC_Resolutions___default","resName","old_resolution","new_resolution","isMultipleAudioInputSupported","isCollectingLocalStats","__WEBPACK_IMPORTED_MODULE_16__modules_statistics_LocalStatsCollector__","lineno","colno","AuthUtil","__WEBPACK_IMPORTED_MODULE_1__modules_util_AuthUtil___default","RTCUIHelper","__WEBPACK_IMPORTED_MODULE_24__modules_RTC_RTCUIHelper__","__WEBPACK_IMPORTED_MODULE_25__modules_util_ScriptUtil___default","getTokenAuthUrl","urlPattern","roleUpgrade","appID","__WEBPACK_IMPORTED_MODULE_4__modules_xmpp_xmpp__","__WEBPACK_IMPORTED_MODULE_2__JitsiConnectionEvents__","errType","__WEBPACK_IMPORTED_MODULE_3__modules_statistics_statistics__","_xmpp","setToken","initJitsiConference","__WEBPACK_IMPORTED_MODULE_1__JitsiConference__","getConnectionTimes","feature","submit","removeFeature","JitsiConference","__WEBPACK_IMPORTED_MODULE_7_events___default","eventManager","__WEBPACK_IMPORTED_MODULE_10__JitsiConferenceEventManager__","componentsVersions","__WEBPACK_IMPORTED_MODULE_3__modules_version_ComponentsVersions__","jvbJingleSession","lastDominantSpeaker","dtmfManager","somebodySupportsDTMF","authEnabled","startAudioMuted","startVideoMuted","startMutedPolicy","availableDevices","isMutedByFocus","wasStopped","__WEBPACK_IMPORTED_MODULE_4__modules_connectivity_ConnectionQuality__","avgRtpStatsReporter","__WEBPACK_IMPORTED_MODULE_2__modules_statistics_AvgRTPStatsReporter__","avgRtpStatsN","isJvbConnectionInterrupted","speakerStatsCollector","__WEBPACK_IMPORTED_MODULE_31__modules_statistics_SpeakerStatsCollector__","deferredStartP2PTask","backToP2PDelay","isP2PConnectionInterrupted","p2pJingleSession","videoSIPGWHandler","__WEBPACK_IMPORTED_MODULE_28__modules_videosipgw_VideoSIPGW__","room","__WEBPACK_IMPORTED_MODULE_5_jitsi_meet_logger__","setupXMPPListeners","_onIceConnectionInterrupted","__WEBPACK_IMPORTED_MODULE_30__service_xmpp_XMPPEvents__","_onIceConnectionRestored","_onIceConnectionEstablished","updateDeviceAvailability","__WEBPACK_IMPORTED_MODULE_21__modules_RTC_RTC__","setupRTCListeners","__WEBPACK_IMPORTED_MODULE_19__modules_connectivity_ParticipantConnectionStatus__","_peerConnStatusRtcMuteTimeout","_peerConnStatusOutOfLastNTimeout","windowLocation","enableDisplayNameInStats","displayName","__WEBPACK_IMPORTED_MODULE_24__modules_statistics_statistics__","callStatsCustomScriptUrl","enableStatsID","setupChatRoomListeners","setupStatisticsListeners","enableTalkWhileMuted","__WEBPACK_IMPORTED_MODULE_25__modules_TalkMutedDetection__","__WEBPACK_IMPORTED_MODULE_11__JitsiConferenceEvents__","setLastN","channelLastN","jvb121Status","__WEBPACK_IMPORTED_MODULE_17__modules_event_Jvb121EventGenerator__","p2pDominantSpeakerDetection","__WEBPACK_IMPORTED_MODULE_20__modules_P2PDominantSpeakerDetection__","authenticateAndUpgradeRole","__WEBPACK_IMPORTED_MODULE_8__authenticateAndUpgradeRole__","isJoined","joined","isP2PEnabled","enabled","isP2PTestModeEnabled","testing","p2pTestMode","leave","onLocalTrackRemoved","closeBridgeChannel","onMemberLeft","getJid","isAuthEnabled","isLoggedIn","authIdentity","getAuthLogin","isExternalAuthEnabled","moderator","getExternalAuthUrl","urlForPopup","getPopupLoginUrl","getLoginUrl","getLocalAudioTrack","getLocalVideoTrack","eventId","addCommandListener","command","addPresenceListener","removeCommandListener","removePresenceListener","sendTextMessage","sendPrivateTextMessage","sendPrivateMessage","sendCommand","addToPresence","sendCommandOnce","removeCommand","removeFromPresence","setDisplayName","setSubject","subject","isModerator","getTranscriber","transcriber","__WEBPACK_IMPORTED_MODULE_26__modules_transcription_transcriber___default","localAudioTracks","__WEBPACK_IMPORTED_MODULE_18__service_RTC_MediaType__","getTranscriptionStatus","localVideoTrack","replaceTrack","_fireAudioLevelChangeEvent","activeTpc","getActivePeerConnection","_fireMuteChangeEvent","muteParticipant","myroomjid","_setConference","removeLocalTrack","__WEBPACK_IMPORTED_MODULE_16__JitsiTrackEvents__","muteHandler","audioLevelHandler","__WEBPACK_IMPORTED_MODULE_27__service_RTC_VideoType___default","oldTrack","newTrack","__WEBPACK_IMPORTED_MODULE_14__JitsiTrackError__","__WEBPACK_IMPORTED_MODULE_15__JitsiTrackErrors__","_doReplaceTrack","_setupNewTrack","replaceTrackPromises","getTrack","addLocalTrack","setAudioMute","setVideoMute","_addLocalTrackAsUnmute","addAsUnmutePromises","addTrackAsUnmute","_removeLocalTrackAsMute","removeAsMutePromises","removeTrackAsMute","getRole","lock","lockRoom","__WEBPACK_IMPORTED_MODULE_9__JitsiConferenceErrors__","unlock","selectParticipant","selectEndpoint","pinParticipant","pinEndpoint","lastN","isInteger","isVideoActive","setMediaTransferActive","getParticipantCount","countHidden","isHidden","kickParticipant","kick","onMemberJoined","statsID","__WEBPACK_IMPORTED_MODULE_0_strophe_js__","__WEBPACK_IMPORTED_MODULE_13__JitsiParticipant__","_role","getFeatures","_supportsDTMF","updateDTMFSupport","_maybeStartOrStopP2P","_this7","onLocalRoleChanged","onUserRoleChanged","onDisplayNameChanged","_displayName","_this8","_tracks","onCallAccepted","answer","setAnswer","onTransportInfo","transportInfo","addIceCandidates","removedTrack","_this9","_onIncomingCallP2P","jingleSession","jingleOffer","rejectReason","getMemberRole","remoteJid","reasonDescription","errorMsg","__WEBPACK_IMPORTED_MODULE_22__modules_browser__","supportsP2P","_rejectIncomingCall","_acceptP2PIncomingCall","onIncomingCall","isFocus","_acceptJvbIncomingCall","_this10","initialize","__WEBPACK_IMPORTED_MODULE_6__modules_util_GlobalOnErrorHandler___default","_setBridgeChannel","acceptOffer","_suspendMediaTransferForJvbConnection","offerIq","webSocket","first","bridgeChannelType","openBridgeChannel","supportsDataChannels","initializeBridgeChannel","terminate","sendSessionTerminate","onCallEnded","reasonCondition","reasonText","forceJvb121","p2pFailed","_stopP2PSession","onSuspendDetected","supportsDTMF","isDTMFSupported","sendTones","tones","duration","peerConnection","__WEBPACK_IMPORTED_MODULE_12__modules_DTMF_JitsiDTMFManager___default","isRecordingSupported","getRecordingState","getRecordingURL","_this11","isSIPCallingSupported","hangup","startTranscriber","stopTranscriber","getPhoneNumber","getPhonePin","getConnectionState","setStartMutedPolicy","policy","getStartMutedPolicy","isStartAudioMuted","isStartVideoMuted","getLogs","getJingleLog","metadata","ua","getXmppLog","setLocalParticipantProperty","overallFeedback","detailedFeedback","remoteUserId","getLocalSSRC","getSSRC","getUsageLabel","_isFocus","mucJid","_fireIncompatibleVersionsEvent","sendEndpointMessage","sendChannelMessage","broadcastEndpointMessage","isConnectionInterrupted","_onIceConnectionFailed","B","initiator","isInitiator","remoteID","getStatsID","_addRemoteJVBTracks","_addRemoteTracks","_addRemoteP2PTracks","logName","__WEBPACK_IMPORTED_MODULE_23__service_RTC_RTCEvents__","p2pEstablishmentDuration","establishmentDuration","jvbEstablishmentDuration","forceJVB121Ratio","establishmentDurationDiff","_setP2PStatus","_removeRemoteJVBTracks","_maybeClearDeferredStartP2P","_removeRemoteTracks","_removeRemoteP2PTracks","sessionNickname","_resumeMediaTransferForJvbConnection","_startP2PSession","newP2PJingleSession","invite","userLeftEvent","peers","peerCount","shouldBeInP2P","peer","myId","peersId","wasP2PEstablished","getP2PConnectionState","startP2PSession","peerJid","stopP2PSession","getSpeakerStats","setReceiverVideoConstraint","createVideoSIPGWSession","sipAddress","__WEBPACK_IMPORTED_MODULE_29__modules_videosipgw_VideoSIPGWConstants__","AverageStatReport","sum","nextValue","calculate","ConnectionAvgStats","_n","_sampleIdx","_avgRTT","_avgRemoteRTTMap","_avgRtpStatsReporter","_avgEnd2EndRTT","_onConnectionStats","_calculateAvgStats","_conference","_onUserLeft","_onRemoteStatsUpdated","_processRemoteStats","__WEBPACK_IMPORTED_MODULE_5__browser__","supportsRTTStatistics","addNext","rtt","batchReport","conference_size","local_candidate_type","localCandidateType","remote_candidate_type","remoteCandidateType","transport_type","appendReport","jvbEnd2EndRTT","jvbStatsMonitor","rtt_diff","avgRemoteRTT","_calculateAvgRemoteRTT","avgLocalRTT","end2end_rtt_avg","__WEBPACK_IMPORTED_MODULE_6__statistics__","D","_resetAvgStats","remoteAvg","avg","validData","jvbRTT","rttAvg","clear","AvgRTPStatsReporter","_avgAudioBitrateUp","_avgAudioBitrateDown","_avgVideoBitrateUp","_avgVideoBitrateDown","_avgBandwidthUp","_avgBandwidthDown","_avgPacketLossTotal","_avgPacketLossUp","_avgPacketLossDown","_avgRemoteFPS","_avgRemoteScreenFPS","_avgLocalFPS","_avgLocalScreenFPS","_avgRemoteCameraPixels","_avgRemoteScreenPixels","_avgLocalCameraPixels","_avgLocalScreenPixels","_avgCQ","_onLocalStatsUpdated","_onP2PStatusChanged","p2pStatsMonitor","_onJvb121StatusChanged","oldStatus","_resetAvgJvbStats","confSize","bitrate","packetLoss","framerate","upload","supportsBandwidthStatistics","total","_calculateAvgVideoFps","__WEBPACK_IMPORTED_MODULE_7__service_RTC_VideoType__","_calculateAvgVideoPixels","peerResolutions","peerPixelsSum","myID","peerID","videosResolution","peerAvgPixels","_calculatePeerAvgVideoPixels","videos","getTracksByMediaType","__WEBPACK_IMPORTED_MODULE_4__service_RTC_MediaType__","peerSsrcCount","peerSsrcPixels","peerFpsSum","videosFps","peerAvgFPS","_calculatePeerAvgVideoFps","peerSsrcFps","logStorage","stringifyObjects","storeInterval","maxEntryLength","_log","storeLogsIntervalID","totalLen","outputCache","someObject","formatLogMessage","prevMessage","_flush","_reschedulePublishInterval","force","reschedule","isReady","cachedQueue","storeLogs","__WEBPACK_IMPORTED_MODULE_1_js_utils__","isSafariWithWebrtc","isSafari","isVersionLessThan","isIExplorer","usesUnifiedPlan","definition","getFirstMatch","regex","getSecondMatch","iosdevice","nexusMobile","nexusTablet","chromeos","silk","sailfish","tizen","webos","windowsphone","linux","edgeVersion","versionIdentifier","tablet","mobile","xbox","samsungBrowser","coast","yandexbrowser","ucbrowser","maxthon","epiphany","puffin","sleipnir","kMeleon","osname","msedge","chromeBook","vivaldi","seamonkey","firefoxos","phantom","slimer","blackberry","touchpad","bada","qupzilla","chromium","googlebot","blink","webkit","gecko","osversion","osMajorVersion","getVersionPrecision","precision","chunks","delta","chunk","reverse","isUnsupportedBrowser","minVersions","strictMode","_bowser","bowser","browserList","browserItem","check","_detect","AnalyticsAdapter","analyticsHandlers","cache","permanentProperties","conferenceName","callstats_name","__WEBPACK_IMPORTED_MODULE_3__settings_Settings__","user_agent","browser_name","setAnalyticsHandlers","_sendEvent","conference_name","_verifyRequiredFields","objectType","containerType","objectId","_maybeCacheEvent","_appendPermanentProperties","wrtcFuncNames","DEFAULT_REMOTE_USER","reportType","_fabrics","CallStats","hasFabric","fabrics","backendInitialized","_addNewFabric","_emptyReportQueue","backend","atLeastOneFabric","defaultInstance","csInstance","defaultConfID","defaultPC","reportsQueue","errorData","_reportError","eventData","sendFabricEvent","associateMstWithUserID","callStatsId","_error","reportError","theBackend","originalMethod","theArguments","__WEBPACK_IMPORTED_MODULE_1__util_GlobalOnErrorHandler___default","originalReportError","CallStatsBackend","callstats","_traceAndCatchBackendCalls","userID","configParams","applicationVersion","_initCallback","attachWifiStatsHandler","addresses","_reportEvent","conferenceID","sendUserFeedback","fabricAttributes","remoteEndpointType","endpointType","addNewFabric","fabricUsage","multiplex","_addNewFabricCallback","streamEndpointId","fabricEvent","fabricTerminated","bb","currentOffset","$a","rtc_rtp_parameters","Sb","above","ccDriven","sumMaxBitrateDiff","sumThroughputDiff","prevCsioAvgBRKbps","_a","streamType","ub","outbound","csioAvgBRKbps","csioSCSValidationSampleCount","csioAvgMaxBitrateDiff","csioAvgDeltaThroughput","csioMaxBitrateAboveRatio","csioCCDrivenRatio","kc","Xb","jb","mediaPlaybackStartEvent","highResTs","mediaSuspendedEvent","Aa","codebase","Fb","hb","googLocalAddress","googRemoteAddress","selectedCandidatePairId","localAddr","remoteAddr","googCodecName","codecImplementationName","lastStatsSent","Transport","latestEventSent","bytesReceived","bytesSent","csioReceivedBwKbps","csioSentBwKbps","csioIntBytesReceived","csioIntBytesSent","packetsSent","csioSentPacketRate","csioIntPacketsSent","packetsReceived","csioReceivedPacketRate","csioIntPacketsReceived","kb","processedStats","lastFabricState","pcState","clockUnsynced","Oa","cacheEvent","channel","lastRawStatsSentInterval","statsPollingStart","rawstatsTS","lastProcessedStatsSentInterval","Fa","da","ma","encodeURIComponent","apiTS","timeShift","fabricState","pcID","pcHash","ucID","Ua","authToken","localID","deviceID","pa","A","G","H","L","K","M","N","nc","E","googActiveConnection","activeConnectionIndex","selected","localCandidate","remoteCandidate","bwe","trackStats","candidatePair","Ub","localStartTime","Wb","Q","associatedVideoTag","usage","cd","fabricTransportSwitch","xb","disrupted","mozRtt","googRtt","roundTripTime","gd","Vb","Za","senderConfiguration","V","W","X","ja","fire","OnPolling","OnOneWayAudioDisruptionsRequest","disruptionType","oneWayMedia","OnSendingThroughputObservationsRequest","sendingThroughputObservations","OnStatsRequest","Y","Ma","Z","inbound","vb","noInboundAudioOnlyFabric","connectionState","onLine","processedStatsTupleArray","Da","aa","od","getConferenceURL","conferenceURL","fractionLoss","csioIntFL","csioIntBRKbps","quality","csioMark","csioMediaType","jitter","googJitterReceived","audioOutputLevel","audioInputLevel","averageRTT","csioAvgRtt","averageJitter","csioAvgJitter","packetLossPercentage","csioPktLossPercentage","statsType","batteryStatus","batteryLevel","Xa","isBatteryCharging","charging","wifiStats","ka","mark","wb","bad","fair","processedStatistics","ba","Ra","msgStat","getStat","isRemote","typePreference","googLocalCandidateType","googRemoteCandidateType","googTransportType","localAddrType","remoteAddrType","transportType","iceCandidates","transportData","ipv6","relayType","J","syncHandler","Ob","na","offsetResults","ld","_isTokenValid","Hb","ia","pd","nb","sendAuthenticationRequest","ob","authOngoing","eb","ab","userJoinedSent","iceCandidatesNumber","authStatus","tokenData","clockSync","stateMachine","pageURL","wsStatus","getWSConnectionState","ca","ea","ga","ha","Reporter","csioChromeLegacyGetStats","la","oa","qa","ra","va","wa","xa","ya","PreCallTest","za","Wa","Ba","Ca","defaultConfig","recommendedConfig","preCallTest","Ga","La","eventCache","updateRemoteUserID","sendCachedEvents","gb","userJoined","decodeURIComponent","sendCachedUserJoinedEvents","ib","fabricSetupFailed","statsSubmissionInterval","updateConferenceId","sendCachedFeedback","Jb","userFeedback","Kb","size_max","size_ewma","statNum_max","statNum_ewma","msg_num","maxInterval","minInterval","avgInterval","stdInterval","lastTime","samplesCount","memorySizeOf","Sa","authInProgress","tokenGenerator","subtle","cryptotype","subtlecrypto","webkitSubtle","msCrypto","sign","alg","csiosign","ArrayBuffer","byteLength","oncomplete","decode","importKey","kty","extractable","ext","use","setAuthType","expiry","setupAuthToken","Ib","submissionInterval","setSubmissionInterval","setReportingMode","adaptiveInterval","collectSDP","tokenGenerationError","jd","client_id","grant_type","auth","token_type","access_token","expires_in","gc","crashDisconnect","hc","_isChannelReady","_setupWebSocketConnection","Qb","RETRY","GET_NEW_TOKEN","REPORT_ERROR","errorCode","authError","appSecretTokenGenerator","keyID","Va","detectBrowserInfo","measureAppLoadingPerformance","loading","Ya","syncStartTime","syncAttempts","maxAllowedLatency","db","fabricHold","fabricResume","audioMute","audioUnmute","videoPause","videoResume","fabricUsageEvent","screenShareStart","screenShareStop","dominantSpeaker","userIDChangedEvent","activeDeviceList","applicationErrorLog","autoFabricSetup","userLeft","refreshPresence","fabricStateChange","iceDisruptionStart","iceDisruptionEnd","iceConnectionDisruptionStart","iceConnectionDisruptionEnd","iceAborted","iceTerminated","iceFailed","iceRestarted","fabricDropped","connectedDevices","iceCompleted","iceCandidateFound","sdpSubmission","callStatsEvent","lb","mb","failure","httpError","wsChannelFailure","csProtoError","appConnectivityError","ok","pb","qb","sendonly","receiveonly","sendrecv","inactive","rb","unbundled","local","remote","noAudioInMultiplexFabric","noOutboundAudioOnlyFabric","excellent","established","initializing","checkingDisrupted","yb","iceConnectionFailure","signalingError","applicationError","applicationLog","zb","mediaConfigError","negotiationFailure","sdpError","iceFailure","transportFailure","Ab","gThreshold","rThreshold","Bb","Cb","Db","Eb","Mb","encodeURI","ontimeout","Nb","filename","col","jsVersion","Pb","invalidWebRTCFunctionName","Rb","Tb","syncedStartTime","simulcastGroup","localSDP","remoteSDP","Zb","Yb","ids","sdpPayload","$b","sc","localCandidates","remoteCandidates","iceCandidatePairs","activeIceCandidatePair","Nc","currPair","_b","ac","endpoint","magicKey","bc","ec","sent","remoteofferSinceCreate","senderConfig","errorSinceCreate","Authorization","adaptiveStats","qmodelThresholdsAPI","confidence","recommended","jc","callstatsID","lc","fabric","qc","rc","tc","activeDevicelist","pcCallback","statsInterval","conferenceFinished","onHold","Qc","uc","wc","yc","buffer","zc","DataView","getUint8","Ac","digest","Ic","Pc","changedState","prevState","sentSenderConfigRequest","senderExists","app_id","local_id","getParameters","callFinished","callStarts","ad","Rc","Yc","numNegotiationNeededCalls","Zc","prevIceConnectionState","currIceConnectionState","gatheringIceCandidatesDelay","disruptionDelay","disruptedTS","prevPair","connectivityIceStatusDelay","bd","failureDelay","prevIceConnectionStateTs","iceConnectionStateTS","_c","fabricSetupSent","setupDelay","iceGatheringDelay","iceConnectivityDelay","fabricTransmissionDirection","clockSyncOffset","switchDelay","dd","ed","fd","codecId","isGreaterBetter","upperThreshold","lowerThreshold","kd","md","_wsConnectionState","conferenceCreationTS","conferenceDuration","getBattery","csioproxy","initializeSinceCreate","disableBeforeUnloadHandler","appVer","disablePrecalltest","addnewfabricSinceCreate","localUserIDObject","intervalAdaptionPhase","currentActivePhaseIndex","userQoe","oncanplay","onsuspend","csError","qualityRating","good","poor","webRTCFunctions","DOMException","domError","function","reportUserIDChange","idType","userIDType","setProxyConfig","collectorURL","authServiceURL","csioInternalAPIURL","wsURL","callStatsAPIReturnStatus","setIdentifiers","transmissionDirection","callstatsUtils","MAX_VALUE","support","loadEventEnd","getEntriesByType","PusherPlug","invoker","Notifier","SenderGate","lastResponsed","onDataSent","Measurement","frameRateReceived","frameWidth","droppedFramesNum","packetLosts","packetsDiscarded","NumberComparator","MeasurementRTTComparator","MeasurementFrameHeightComparator","frameHeight","MeasurementFrameWidthComparator","MeasurementJitterComparator","MeasurementFrameRateReceivedComparator","MeasurementMerger","Assembler","unknown","SWValueTracker","extractorFnc","actual","Signals","SWValueHolder","FractionLost","intervalPacketsRecv","intervalLoss","FractionLostComparator","getValue","FractionLostMerger","getIntervalLoss","getIntervalPacketsRecv","Monitor","measurements","SlidingWindow","maxItemsNum","timeoutInMs","packetLostTracker","addPlugin","packetsDiscardedTracker","resolutionTracker","jitter95PercentileTracker","SWPercentileTracker","addFilter","rtt95PercentileTracker","frameHeight50PercentileTracker","frameHeight95PercentileTracker","frameRate50PercentileTracker","frameRate95PercentileTracker","frameWidth50PercentileTracker","frameWidth95PercentileTracker","rttAvgRTTracker","SWAvg","frameRateMeanTracker","frameHeightMeanTracker","frameWidthMeanTracker","jitterAvgTracker","intervalFractionLosts","FLPercentileTracker","lastSent","firstAdded","lastAdded","doSending","lastTraffic","InboundMonitor","bytesReceivedTracker","packetsReceivedTracker","csioIntBRKbpsCount","csioIntPRCount","InbAudioMonitor","eModel","Direction","MediaTypes","InbVideoMonitor","frameRateReceivedTracker","frameRatePercTracker","setFrameRateReceived10","frameRateReceived10","OutboundMonitor","bytesSentTracker","packetsSentTracker","OutbVideoMonitor","started","maxTs","stable","stableTs","ready","maxVerified","stableVerified","OutbAudioMonitor","Monitors","monitors","assembler","sendable","inbOneWayAudioDisruption","hasTrafficTs","outbOneWayAudioDisruption","Analyzer","lastForwarded","lastInterval","sentCounter","nextInterval","Idle","Run","OnStop","OnStart","analyzer","senderGate","sendingThroughputObservationsSent","currentState","disruptions","adaptiveSending","minMeasurementsNum","SendingTimeTresholds","regular","minDeltaTimeInMs","requestStats","RTT","do","getMediaType","getResolution","getFrameRate","getFrameWidth","getFrameHeight","getLatencyData","getDroppedFramesNum","getPacketLosts","getJitter","getBytesReceived","getPacketsReceived","getPacketsDiscarded","getBytesSent","getPacketsSent","rawdats","setupCodeBase","checkForNan","checkForNegativeValue","discardedPackets","packetsLost","droppedFrames","googFrameRateOutput","googFrameRateDecoded","googFrameRateReceived","googFrameRateSent","framerateMean","googFrameHeightReceived","googFrameHeightSent","googFrameWidthReceived","googFrameWidthSent","validateRTT","getActual","getFirst","getDelta","getPrevious","VideoThroughputThresholds","green","red","AudioThroughputThresholds","FrameRateRatioTresholds","VideoRTTThresholds","VideoFractionLostTreshdolds","AudioFractionLostTresholds","AudioEModelTresholds","avQualityRating","avQualityRatingString","doStart","getStartTime","hasTraffic","getLastMeasurement","getTotalTimeInMs","getDeltaTimeInMs","getLast","setSSRC","requestSending","setIntBRAndPR","csioIntPR","requestSendingIf","getAvgRTT","getResult","percentileTrackerExtractor","getRTT95","getJitter95","getFrameRateMean","getFrameWidth50Percentile","getFrameWidth95Percentile","getFrameHeight50Percentile","getFrameHeight95Percentile","getFrameRate50Percentile","getFrameRate95Percentile","getFrameHeightMean","getFrameWidthMean","getAvgJitter","getQualityEvaluation","getQualityReverseEvaluation","hasData","getItemsNum","csioIntMs","csioPercentileFl","csioIntPktLoss","csioPercentileJitter","csioSig2Latency","csioTimeElapseMs","csioeM","csiores","csioFrameWidth95Percentile","csioFrameWidth50Percentile","csioFrameHeight95Percentile","csioFrameHeight50Percentile","csioFrameRate95Percentile","csioFrameRate50Percentile","csioFrameWidthMean","csioFrameHeightMean","csioFrameRateMean","addIntervalFractionLost","getLastFractionLost","getIntervalFractionLost95","isValid","doSend","setRTT95","csioIntPktRcv","csioAvgPacketSize","getQuality","setFrameRatioQuality","verificationElapsedThreshold","initialElapsedThreshold","minStableKBpsSlack","getSendingKBitrateObservations","maxsendingKBitrate","timeToMaxSendingKBitrate","stablesendingKBitrate","timeToStableSendingKBitrate","checkSendingKBitrateObservations","setEModelQuality","setThroughputQuality","OneWayAudioDisruptionTimeout","DisruptionsMediaType","DisruptionsType","getMonitor","isSendable","checkDistortions","getInbOneWayAudioDisruption","getOutbOneWayAudioDisruption","getSendingThroughputObservations","items","minItemsNum","SWItem","setMaxItemsNum","setTimeoutInMs","setMinItemsNum","getElapsed","foreach","created","comparator","percentile","meanCalcer","ratio","maxtree","BinaryTree","mintree","maxcounter","mincounter","SWPercentileNotification","doFilter","insert","getTopValue","balancing","ReferenceError","insertByTop","deleteBottomValue","insertByBottom","deleteTopValue","getBottomValue","tracked","estimated","BinaryTreeNode","bottom","node_counter","duplicate_counter","getTop","getBottom","getDuplicatedCounter","getNodeCounter","getSize","logTree","inserting","getRightist","getLeftist","extractor","calc","pcCallbackHandler","onIceCandidateCallback","onIceConnectionStateChangeCallback","onPcSignalingStateChangeCallback","onPcNegotiationNeededCallback","iceCandidateCallback","iceConnectionStateChangeCallback","pcSignalingStateChangeCallback","pcNegotiationNeededCallback","_turnConnection","_rttTest","_throughputTest","_resultsHandler","_onlineCheck","_detectbrowser","TEST_NAMES","THROUGHPUT","turnConnection","TurnConnection","onlineCheck","OnlineCheck","callsInProgress","turnTests","resultsHandler","turnTestCounter","ResultsHandler","buildName","buildVersion","_start","startTurnTests","getFailureNumber","activeTurnTest","forceStop","getIceResults","sendResults","getResults","RttTest","ThroughputTest","handleTestResults","median","_parsedIceCandidate","_getstatshandler","statshandler","GetStatsHandler","pctpc1","pctpc2","sendChannel","messageCallback","parsedIceResults","raiseSendError","rejectDisconnect","connectionTimer","createDataChannel","ordered","maxRetransmits","binaryType","assignEvent","onIceCandidate","onIceStateChange","onCreateOfferSuccess","onCreateOfferError","iceTimer","onSetLocalSuccess","onSetSessionDescriptionError","onSetRemoteSuccess","onSetRemoteSessionDescriptionError","onCreateAnswerSuccess","onCreateAnswerError","ParsedIceCandidate","isRelay","isTypeTransportUdp","relayUdpGathered","isTypeTransportTcp","relayTcpGathered","isTypeTransportTls","relayTlsGathered","isServerReflexive","srflxGathered","getOtherPc","onAddIceCandidateSuccess","onAddIceCandidateError","turnIpAddress","turnIpVersion","turnTransport","ipv6Supported","ipv4Supported","relayTlsSuccess","relayTcpSuccess","relayUdpSuccess","srflxSuccess","getIceCandidates","ipAddress","localCandidateId","mozLocalTransport","candidateType","iceCandidateStr","typeTransport","extractTypeTransport","_statsadapter","StatsAdapter","isPromiseBased","csioGetStats","iceCandidatesHandler","getStatsFirefox","getStatsSafari","getStatsChrome","getStatsEdge","extractRawStats","processRawStatsForIceInfo","getParsedStats","statsClassifier","transportStats","formatRelayType","tasksByHandle","runIfPresent","currentlyRunningATask","task","registerImmediate","messagePrefix","onGlobalMessage","nextHandle","attachTo","importScripts","postMessageIsAsynchronous","oldOnMessage","MessageChannel","port1","port2","_turnTest","sendTimer","countSent","rtts","startTimestamp","sendPing","calculateRtt","calculateMetrics","fillResults","sentMessages","unAckedMessages","maxMessages","variance","endTimestamp","_messageMaker","receivedBytes","secondHalfBytes","secondHalfStart","bufferEmpty","chunkSize","messageMaker","lastMessage","intervals","intervalStart","intervalLength","intervalBytes","startSend","averageThroughput","average","bufferListener","fillBuffer","bufferedAmount","bufferFullThreshold","usePolling","make","bufferedAmountLowThreshold","maxDuration","bytesPrepared","fractionLostBytes","_typeof2","trunc","failures","tests","addEntry","online","calculatePacketLoss","lostPackets","totalPackets","round","SsrcStats","loss","StatsCollector","_browserType","KEYS_BY_BROWSER_TYPE","_usesPromiseGetStats","_getStatValue","_defineNewGetStatValueMethod","_defineGetStatValueMethod","baselineAudioLevelsReport","currentAudioLevelsReport","currentStatsReport","previousStatsReport","audioLevelsIntervalId","conferenceStats","audioLevelsIntervalMilis","statsIntervalId","statsIntervalMilis","ssrc2stats","browserSupported","receiveBandwidth","sendBandwidth","remoteAddress","localAddress","activeConnection","currentRoundTripTime","IEXPLORER","setLoss","setResolution","addBitrate","resetBitrate","setFramerate","startAudioLevelStats","processNewAudioLevelReport","processAudioLevelReport","processNewStatsReport","processStatsReport","itemStatByKey","pair","getNonNegativeStat","getStatValue","byteSentStats","localip","conferenceStatsTransport","remoteCandidateId","portNumber","msType","before","ssrcIds","remoteSource","ssrcStats","isDownloadStream","packetsNow","packetsBefore","packetsDiff","packetsLostNow","packetsLostBefore","packetsLostDiff","packetsTotal","bytesReceivedNow","bytesReceivedBefore","nowBytesTransmitted","timeMs","bitrateReceivedKbps","bitrateSentKbps","__WEBPACK_IMPORTED_MODULE_2__service_statistics_Events__","_processAndEmitReport","bitrateDownload","bitrateUpload","resolutions","framerates","audioBitrateDownload","audioBitrateUpload","videoBitrateDownload","videoBitrateUpload","userResolutions","userFramerates","getNonNegativeValue","_calculateBitrate","fieldName","bytesNow","bytesBefore","bytesProcessed","bitrateKbps","nominated","availableIncomingBitrate","availableOutgoingBitrate","remoteUsedCandidate","localUsedCandidate","localIp","networkType","framesPerSecond","framesSent","trackIdentifier","getSsrcByTrackId","_nearestExecutingScript","scripts","eligibleScripts","skipStackDepth","isNotOpera","supportsScriptReadyState","scriptReadyRegex","hasStackBeforeThrowing","hasStackAfterThrowing","getScriptUrlFromStack","ignoreMessage","pageUrl","hasAttribute","hasNativeCurrentScriptAccessor","currentScript","fullPageUrl","Infinity","thrownErr","near","far","origin","ComponentsVersions","processPresence","FOCUS_COMPONENT","VIDEOBRIDGE_COMPONENT","XMPP_SERVER_COMPONENT","mucResource","componentName","__WEBPACK_IMPORTED_MODULE_0__statistics_statistics__","getComponentVersion","getTarget","simulcast","millisSinceStart","simulcastFormat","kSimulcastFormats","targetHeight","pixels","MAX_SAFE_INTEGER","startBitrate","VideoType","Resolutions","__WEBPACK_IMPORTED_MODULE_2_jitsi_meet_logger__","STATS_MESSAGE_TYPE","layers","ConnectionQuality","_localStats","_lastConnectionQualityUpdate","_remoteStats","_timeIceConnected","_timeVideoUnmuted","_updateLocalConnectionQuality","__WEBPACK_IMPORTED_MODULE_0__service_connectivity_ConnectionQualityEvents__","_broadcastLocalStats","_updateRemoteStats","_updateLocalStats","_maybeUpdateUnmuteTime","resolutionName","activeTPC","isSimulcastOn","prevConnectionQuality","diffSeconds","updateLocalConnectionQuality","_calculateConnectionQuality","onLoginSuccessful","roomPassword","canceled","rejectPromise","__WEBPACK_IMPORTED_MODULE_1__modules_xmpp_xmpp__","__WEBPACK_IMPORTED_MODULE_0__JitsiConnectionEvents__","authenticationError","connectionError","strophe_js","_identities","_features","_items","_onDiscoInfo","_onDiscoItems","addIdentity","category","lang","var_name","addItem","call_back","_buildIQResult","query_attrs","iqresult","var","MucConnectionPlugin","rooms","__WEBPACK_IMPORTED_MODULE_3__ConnectionPlugin__","onPresence","onPresenceUnavailable","onPresenceError","onMessage","onMute","roomJid","__WEBPACK_IMPORTED_MODULE_2__ChatRoom__","__WEBPACK_IMPORTED_MODULE_4__service_xmpp_XMPPEvents___default","createNonAnonymousRoom","filterNodeFromPresenceJSON","packet2JSON","packet","json2packet","VALID_FIELD_NAMES","ChatRoom","members","presMap","presHandlers","noBridgeAvailable","__WEBPACK_IMPORTED_MODULE_8__moderator__","initPresenceMap","lastPresences","phoneNumber","phonePin","participantPropertyListener","locked","__WEBPACK_IMPORTED_MODULE_3__JitsiTranscriptionStatus__","__WEBPACK_IMPORTED_MODULE_4__util_Listenable__","xns","__WEBPACK_IMPORTED_MODULE_5__settings_Settings__","addVideoInfoToPresence","userRegion","allocateConferenceFocus","fromJoin","getInfo","__WEBPACK_IMPORTED_MODULE_7__service_xmpp_XMPPEvents___default","getForm","form","formSubmit","member","$statusNode","hasStatusUpdate","mucUserItem","affiliation","getFocusUserJid","isHiddenDomain","hiddenDomain","newRole","_initFocus","memberOfThis","displayJids","att","phone","pin","processNode","lastJibri","recording","__WEBPACK_IMPORTED_MODULE_9__recording__","recordingType","tagHandlers","nickname","skipEvents","onMucMemberLeft","reasonSelect","doLeave","isSelfPresence","isKick","membersKeys","onParticipantLeft","txt","subjectText","stamp","dateParts","discoRoomInfo","json","jsonString","topic","kickIQ","onNotSupported","formsubmit","handlerIdx","sendVideoInfoPresence","sendAudioInfoPresence","addAudioInfoToPresence","mutedNode","__WEBPACK_IMPORTED_MODULE_6__service_RTC_MediaType__","videoTypeNode","isSipGatewayEnabled","iqToFocus","onMucLeft","doReject","createExpBackoffTimer","step","Moderator","__WEBPACK_IMPORTED_MODULE_2__settings_Settings__","xmppService","getNextTimeout","getNextErrorTimeout","externalAuthEnabled","sipGatewayEnabled","call_control","AuthenticationEvents","setFocusUserJid","focusJid","focusUserJid","getFocusComponent","focusComponent","focus","createConferenceIq","machineUID","machine-uid","session-id","enforcedBridge","audioPacketDelay","minBitrate","openSctp","__WEBPACK_IMPORTED_MODULE_1__browser__","stereo","useRoomAsSharedDocumentName","parseSessionId","resultIq","parseConfigOptions","authenticationEnabled","_allocateConferenceFocusSuccess","_allocateConferenceFocusError","invalidSession","reservationErr","errorTextNode","waitMs","retrySec","errorIq","urlCallback","_getLoginUrl","popup","urlCb","logout","logoutUrl","__WEBPACK_IMPORTED_MODULE_2_strophe_js__","JingleConnectionPlugin","jvbIceConfig","p2pIceConfig","mediaConstraints","OfferToReceiveAudio","OfferToReceiveVideo","__WEBPACK_IMPORTED_MODULE_8__ConnectionPlugin__","onJingle","fromJid","ack","sess","startMuted","audioMuted","videoMuted","__WEBPACK_IMPORTED_MODULE_3__service_xmpp_XMPPEvents___default","__WEBPACK_IMPORTED_MODULE_7__JingleSessionPC__","modifyContents","replaceTransport","successTime","sendTransportReject","addRemoteStream","removeRemoteStream","me","__WEBPACK_IMPORTED_MODULE_5__util_RandomUtil___default","onTerminated","iceservers","dict","updateLog","JingleSessionPC","localJid","_iceCheckingStartedTimestamp","_gatheringStartedTimestamp","_localVideoActive","_remoteVideoActive","_gatheringReported","lasticecandidate","signalingLayer","__WEBPACK_IMPORTED_MODULE_10__SignalingLayerImpl__","webrtcIceUdpDisable","webrtcIceTcpDisable","modificationQueue","__WEBPACK_IMPORTED_MODULE_1_async___default","_processQueueTasks","wasConnected","__WEBPACK_IMPORTED_MODULE_5__JingleSession__","jingleContents","videoContents","actionName","__WEBPACK_IMPORTED_MODULE_6__JingleSessionState__","isReconnect","wasstable","pcOptions","gatherStats","maxstats","disableSimulcast","disableH264","preferH264","_abtestSuspendVideoEnabled","enableFirefoxSimulcast","createPeerConnection","__WEBPACK_IMPORTED_MODULE_11__statistics_statistics__","phase","sendIceCandidate","__WEBPACK_IMPORTED_MODULE_12__service_xmpp_XMPPEvents___default","_assertNotEnded","signaling_state","reconnect","iceStarted","setChatRoom","__WEBPACK_IMPORTED_MODULE_7__SDP__","ice","__WEBPACK_IMPORTED_MODULE_9__SDPUtil__","jcand","__WEBPACK_IMPORTED_MODULE_13__util_GlobalOnErrorHandler___default","usedrip","dripContainer","sendIceCandidates","candidates","__WEBPACK_IMPORTED_MODULE_3_strophe_js__","fingerprintLine","newJingleErrorHandler","rtcCandidate","finishedCallback","iceCandidate","outerHTML","ssrcElement","setSSRCOwner","i3","ssrcInfoElement","generateRecvonlySsrc","setOfferAnswerCycle","sendSessionAccept","offerSdp","sendSessionInitiate","jingleAnswer","jingleOfferAnswerIq","newRemoteSdp","_processNewJingleOfferIq","oldLocalSdp","_renegotiate","sendContentModify","newLocalSdp","notifyMySSRCUpdate","onJingleFatalError","jingleOfferElem","originalOffer","sendTransportAccept","accept","responder","videoTransferActive","newSendersValue","sessionModify","_this12","transportAccept","medialines","transportReject","sessionTerminate","sourceAddElem","currentRemoteSdp","addSsrcInfo","i1","i2","_addOrRemoveRemoteStream","isAdd","_this13","logPrefix","readSsrcInfo","addOrRemoveSsrcInfo","_parseSsrcInfoFromSourceAdd","_parseSsrcInfoFromSourceRemove","_processRemoteAddSource","_processRemoteRemoveSource","remoteSdp","removeSsrcInfo","optionalRemoteSdp","_this14","_initiatorRenegotiate","_responderRenegotiate","_this15","_this16","offer","_this17","clearRecvonlySsrc","newLocalSDP","sourceRemoveElem","ssrcLines","operationName","oldSDP","currentLocalSDP","sdpDiff","__WEBPACK_IMPORTED_MODULE_8__SDPDiffer__","addedMedia","getNewMedia","removedMedia","_addRemoveTrackAsMuteUnmute","isMute","_this18","workFunction","oldLocalSDP","removeTrackMute","addTrackUnmute","_verifyNoSSRCChanged","audioActive","videoActive","_this19","logAudioStr","logVideoStr","isSessionActive","audioActiveChanged","setAudioTransferActive","pcVideoActiveChanged","setVideoTransferActive","_this20","newVideoSenders","parseVideoSenders","_modifyRemoteVideoActive","remoteVideoSenders","isRemoteVideoActive","newSDP","sdpDiffer","request","_this21","errResponse","errorElSel","errorReasonSel","errorMsgSel","abTesting","enableSuspendVideoTest","_getInitiatorJid","__WEBPACK_IMPORTED_MODULE_4__util_StringUtils__","integerHash","only_once","previous_async","_toString","_isArray","_map","_keys","eachSeries","iterate","forEachSeries","eachLimit","_eachLimit","forEachLimit","running","replenish","doParallel","doSeries","_asyncMap","eachfn","mapLimit","_mapLimit","memo","inject","foldl","reduceRight","reversed","foldr","filterSeries","select","selectSeries","rejectSeries","main_callback","detectSeries","sortBy","criteria","auto","tasks","remainingTasks","taskComplete","theCallback","taskCallback","safeResults","rkey","requires","retry","times","attempts","wrappedTask","wrappedCallback","wrappedResults","finalAttempt","seriesCallback","series","waterfall","wrapIterator","_parallel","parallel","parallelLimit","makeCallback","concatSeries","whilst","doWhilst","until","doUntil","worker","_insert","drain","saturated","workers","empty","kill","idle","priorityQueue","_compareTasks","sequence","compare","beg","cargo","working","drained","ts","_console_fn","memoize","hasher","queues","memoized","unmemoized","unmemoize","counter","timesSeries","seq","fns","newargs","nextargs","compose","_applyEach","go","applyEach","applyEachSeries","forever","JingleSession","__WEBPACK_IMPORTED_MODULE_1__JingleSessionState__","doInitialize","arrayEquals","array1","array2","equals","SDPDiffer","mySDP","otherSDP","myMedias","othersMedias","newMedia","othersMediaIdx","myMedia","othersMedia","otherSsrcGroup","mySsrcGroup","modify","sdpMediaSsrcs","modified","mediaSsrc","nv","SignalingLayerImpl","ssrcOwners","chatRoom","__WEBPACK_IMPORTED_MODULE_3__service_RTC_SignalingLayer__","oldChatRoom","_audioMuteHandler","_videoMuteHandler","_videoTypeHandler","__WEBPACK_IMPORTED_MODULE_2__service_RTC_SignalingEvents__","__WEBPACK_IMPORTED_MODULE_1__service_RTC_MediaType__","getMediaPresenceInfo","SignalingLayer","__WEBPACK_IMPORTED_MODULE_0__modules_util_Listenable__","__WEBPACK_IMPORTED_MODULE_2__util_GlobalOnErrorHandler__","resetLastErrorStatusRegExpr","lastErrorStatusRegExpr","errStatusCapture","PING_TIMESTAMPS_TO_KEEP","PingConnectionPlugin","failedPings","pingExecIntervals","_addPingExecutionTimestamp","PING","pingIntervals","previousTS","currentInterval","RayoConnectionPlugin","__WEBPACK_IMPORTED_MODULE_2__ConnectionPlugin__","onRayo","roomPass","callResource","StropheLogger","__WEBPACK_IMPORTED_MODULE_1__ConnectionPlugin__","logIncoming","logOutgoing","compareIdentities","IDENTITY_PROPERTIES_FOR_COMPARE","IDENTITY_PROPERTIES","Caps","disco","versionToCapabilities","jidToVersion","__WEBPACK_IMPORTED_MODULE_1__service_xmpp_XMPPEvents___default","_addChatRoom","_removeChatRoom","CAPS","_handleCaps","_onMucMemberLeft","_removeJidToVersionEntry","__WEBPACK_IMPORTED_MODULE_2__util_Listenable__","_generateVersion","_fixChatRoomPresenceMap","identities","accumulatedValue","identity","_notifyVersionChanged","oldVersion","JitsiConferenceEventManager","__WEBPACK_IMPORTED_MODULE_6__JitsiConferenceEvents__","__WEBPACK_IMPORTED_MODULE_11__service_xmpp_XMPPEvents__","__WEBPACK_IMPORTED_MODULE_11__service_xmpp_XMPPEvents___default","__WEBPACK_IMPORTED_MODULE_4_jitsi_meet_logger__","chatRoomForwarder","__WEBPACK_IMPORTED_MODULE_3__modules_util_EventEmitterForwarder___default","__WEBPACK_IMPORTED_MODULE_10__modules_statistics_statistics__","forward","__WEBPACK_IMPORTED_MODULE_5__JitsiConferenceErrors__","setParticipantPropertyListener","setProperty","__WEBPACK_IMPORTED_MODULE_2__service_authentication_AuthenticationEvents___default","myJid","_status","updated","isAudioAvailable","isVideoAvailable","_availableDevices","__WEBPACK_IMPORTED_MODULE_8__service_RTC_RTCEvents___default","__WEBPACK_IMPORTED_MODULE_9__service_RTC_VideoType___default","ignoreStartMuted","_onByteSentStatsReceived","EventEmitterForwarder","dest","srcEvent","JitsiParticipant","hidden","_jid","_hidden","_statsID","_connectionStatus","__WEBPACK_IMPORTED_MODULE_2__modules_connectivity_ParticipantConnectionStatus__","_properties","jitsiTrack","isWebRTCTrackMuted","oldValue","_isMediaTypeMuted","Jvb121EventGenerator","_jvb121","evaluateStatus","P2PDominantSpeakerDetection","__WEBPACK_IMPORTED_MODULE_0__JitsiConferenceEvents__","_audioLevel","myUserID","BridgeChannel","_eventEmitter","_mode","datachannel","_handleChannel","ws","OPEN","colibriClass","msgPayload","jsonObject","pinnedEndpoint","selectedEndpoint","maxFrameHeightPixels","__WEBPACK_IMPORTED_MODULE_1__service_RTC_RTCEvents___default","dominantSpeakerEndpoint","isOpen","JitsiLocalTrack","__WEBPACK_IMPORTED_MODULE_4__JitsiTrackEvents__","_constraints","_prevSetMuted","_facingMode","_trackEnded","_hasSentData","_testDataSent","_realDeviceId","_noDataFromSourceTimeout","_onDeviceListChanged","__WEBPACK_IMPORTED_MODULE_6__RTCUtils__","_onAudioOutputDeviceChanged","__WEBPACK_IMPORTED_MODULE_9__service_RTC_RTCEvents___default","_initNoDataFromSourceHandlers","__WEBPACK_IMPORTED_MODULE_1__JitsiTrack__","__WEBPACK_IMPORTED_MODULE_10__service_RTC_VideoType___default","_onNoDataFromSourceError","_checkForCameraIssues","_clearNoDataFromSourceMuteResources","__WEBPACK_IMPORTED_MODULE_12__statistics_statistics__","__WEBPACK_IMPORTED_MODULE_11__service_statistics_AnalyticsEvents__","track_type","_fireNoDataFromSourceEvent","isReceivingData","_get","storedMSID","getMSID","_queueSetMuted","setMuted","_setMuted","__WEBPACK_IMPORTED_MODULE_2__JitsiTrackError__","__WEBPACK_IMPORTED_MODULE_3__JitsiTrackErrors__","logMuteInfo","doesVideoMuteByStreamRemove","_removeStreamFromConferenceAsMute","_unregisterHandlers","_stopStream","streamOptions","getDeviceId","__WEBPACK_IMPORTED_MODULE_8__service_RTC_MediaType__","getCameraFacingMode","streamsInfo","streamInfo","cont","_addStreamToConferenceAsUnmute","_sendMuteStatus","detach","_bytesSent","trackSettings","__WEBPACK_IMPORTED_MODULE_7__service_RTC_CameraFacingMode___default","_stopStreamInProgress","_switchCamera","RTCSignalingState","haveLocalOffer","haveRemoteOffer","RTCIceGatheringState","gathering","CNAME","ortcRTCPeerConnection","_bufferedIceCandidates","_closed","_dtlsTransport","_iceGatherer","_iceGatheringState","_iceTransport","_localCapabilities","_localDescription","_localTrackInfos","_mids","_remoteDescription","_remoteStreams","_remoteTrackInfos","_sdpGlobalFields","__WEBPACK_IMPORTED_MODULE_6__xmpp_SDPUtil__","_signalingState","_setIceGatherer","_setIceTransport","_setDtlsTransport","__WEBPACK_IMPORTED_MODULE_1_yaeti___default","EventTarget","usePromise","_addIceCandidate","_addStream","_updateAndEmitSignalingStateChange","_createAnswer","_createOffer","_getStats","_removeStream","_setLocalDescription","_setRemoteDescription","__WEBPACK_IMPORTED_MODULE_4__errors__","getTrackById","_emitNegotiationNeeded","_createLocalDescription","addMediaSection","mediaObject","iceUfrag","localIceParameters","icePwd","localIceCandidates","candidateObject","endOfCandidates","rtpObject","paramFmtp","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","localTrackInfos","enableRtx","hasVideoRtx","rtxSsrc","rtcpMux","rtcpRsize","sdpObject","getLocalCandidates","localDtlsParameters","getRemoteParameters","ipVer","msidSemantic","semantic","mids","_ref3","_ref4","__WEBPACK_IMPORTED_MODULE_2__RTCSessionDescription__","_sdpObject","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","sdpCandidate","sdpMIndex","sdpAttribute","degradationPreference","muxId","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_iterator14","codecCapability","ptime","_iteratorNormalCompletion15","_didIteratorError15","_iteratorError15","_step15","_iterator15","_iteratorNormalCompletion16","_didIteratorError16","_iteratorError16","_step16","_iterator16","encrypt","preferredEncrypt","_iteratorNormalCompletion17","_didIteratorError17","_iteratorError17","_step17","_iterator17","_iteratorNormalCompletion18","_didIteratorError18","_iteratorError18","_step18","_iterator18","_iteratorNormalCompletion19","_didIteratorError19","_iteratorError19","_step19","_iterator19","rtpSenders","rtpReceivers","_iteratorNormalCompletion20","_didIteratorError20","_iteratorError20","_step20","_iterator20","sending","_iteratorNormalCompletion21","_didIteratorError21","_iteratorError21","_step21","_iterator21","msGetStats","_iteratorNormalCompletion22","_didIteratorError22","_iteratorError22","_step22","_iterator22","isAudio","_iteratorNormalCompletion26","_didIteratorError26","_iteratorError26","_step26","_iterator26","_iteratorNormalCompletion23","_didIteratorError23","_iteratorError23","_step23","_iterator23","_iteratorNormalCompletion27","_didIteratorError27","_iteratorError27","_step27","_iterator27","datas","_iteratorNormalCompletion24","_didIteratorError24","_iteratorError24","_step24","_iterator24","_iteratorNormalCompletion25","_didIteratorError25","_iteratorError25","_step25","_iterator25","__WEBPACK_IMPORTED_MODULE_3__utils__","_startIceAndDtls","currentRemoteSsrcs","newRemoteTrackInfos","addedRemoteStreams","addedRemoteTracks","removedRemoteTracks","_iteratorNormalCompletion28","_didIteratorError28","_iteratorError28","_step28","_iterator28","_ref5","_ref6","streamRemoteId","trackRemoteId","_getParametersForRtpReceiver","_iteratorNormalCompletion29","_didIteratorError29","_iteratorError29","_step29","_iterator29","_iteratorNormalCompletion30","_didIteratorError30","_iteratorError30","_step30","_iterator30","_ref7","_ref8","_iteratorNormalCompletion31","_didIteratorError31","_iteratorError31","_step31","_iterator31","_ref9","_ref10","_iteratorNormalCompletion32","_didIteratorError32","_iteratorError32","_step32","_iterator32","_emitAddStream","_iteratorNormalCompletion33","_didIteratorError33","_iteratorError33","_step33","_iterator33","_ref11","_ref12","_emitRemoveStream","_iteratorNormalCompletion34","_didIteratorError34","_iteratorError34","_step34","_iterator34","_iteratorNormalCompletion35","_didIteratorError35","_iteratorError35","_step35","_iterator35","_getParametersForRtpSender","onstatechange","_emitConnectionStateChange","iceGatherOptions","_updateAndEmitIceGatheringStateChange","_emitIceCandidate","gather","_emitIceConnectionStateChange","getNominatedCandidatePair","oncandidatepairchange","isLocalInitialAnswer","_handleLocalInitialAnswer","_handleLocalReAnswer","_emitBufferedIceCandidates","_sendMedia","_receiveMedia","isRemoteInitialOffer","_handleRemoteInitialOffer","_handleRemoteReOffer","remoteIceCandidates","_iteratorNormalCompletion36","_didIteratorError36","_iteratorError36","_step36","_iterator36","yaetiEventTarget","_listeners","defineProperties","listenersType","oldListener","dummyListener","stopImmediatePropagation","_yaeti","defaultPrevented","_sdp","_type","__WEBPACK_IMPORTED_MODULE_0_sdp_transform___default","toIntIfInt","parseReg","needsBlank","keyLocation","rawName","validLine","paramReducer","acc","scid","formatRegExp","makeLine","formatStr","defaultOuterOrder","defaultInnerOrder","outerOrder","innerOrder","getFirstActiveMediaSection","codecsMap","savedHeaderExtension","icelite","midToKind","infos","rtxMap","rtxSet","ssrcObject","filterWithCapabilities","localFullCapabilities","remoteRtxMap","remoteCodec","remoteCodecName","localCodec","remoteParamName","remoteParamValue","localParamName","localParamValue","remoteFb","localFb","rtxCodec","remoteExtension","localExtension","remoteFecMechanism","localFecMechanism","InvalidStateError","klass","obtainWebRTCScreen","streamCallback","failCallback","gumFunction","getWebStoreInstallUrl","desktopSharingChromeExtId","checkChromeExtInstalled","runtime","lastError","extVersion","updateRequired","minVersion","s1","s2","n1","n2","desktopSharingChromeMinExtVersion","doGetStreamFromExtension","desktopSharingChromeSources","getStream","onGetStreamResponse","__WEBPACK_IMPORTED_MODULE_0__JitsiTrackError__","__WEBPACK_IMPORTED_MODULE_1__JitsiTrackErrors__","waitForExtensionAfterInstall","waitInterval","retries","currentRetries","installed","initFirefoxExtensionDetection","desktopSharingFirefoxDisabled","firefoxExtInstalled","desktopSharingFirefoxExtId","chromeExtInstalled","chromeExtUpdateRequired","reDetectFirefoxExtension","ScreenObtainer","intChromeExtPromise","disableDesktopSharing","desktopSharingChromeDisabled","_createObtainStreamMethod","JitsiMeetNW","obtainDesktopStream","jitsiError","obtainScreenOnElectron","desktopSharingChromeMethod","append","obtainScreenFromExtension","obtainScreenOnFirefox","extensionRequired","desktopSharingFirefoxMaxVersionExtRequired","JitsiMeetScreenObtainer","openDesktopPicker","_options","doGetStreamFromExtensionOptions","alert","handleExternalInstall","install","handleExtensionInstallationError","webStoreInstallUrl","checkForChromeExtensionOnInterval","checkAgain","adapterFactory","dependencies","shimChrome","shimFirefox","shimEdge","shimSafari","commonShim","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimRTCIceCandidate","shimReplaceTrack","shimRTCIceServerUrls","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver","shimCreateOfferLegacy","origSetRemoteDescription","shimSenderWithDtmf","dtmf","_dtmf","createDTMFSender","_pc","_senders","origAddTrack","origRemoveTrack","origAddStream","origRemoveStream","origGetSenders","replaceInternalStreamId","_reverseStreams","internalId","externalStream","internalStream","_streams","origGetLocalStreams","nativeStreams","newStream","oldStream","origSetLocalDescription","origLocalDescription","OrigPeerConnection","localcandidate","remotecandidate","remap","getSupportedFacingModeLies","dev","DevicesNotFoundError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","shimRTCPeerConnection","origMSTEnabled","RTCDtmfSender","setTrack","dtlsRole","_initialTrackId","getCommonCapabilities","findCodecByPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","isActionAllowedInSignalingState","maybeAddCandidate","alreadyAdded","getRemoteCandidates","makeError","addTrackToStreamAndFireEvent","MediaStreamTrackEvent","fireAddTrack","_dispatchEvent","canTrickleIceCandidates","needNegotiation","rtcpMuxPolicy","hasTurn","isString","_iceGatherers","iceCandidatePoolSize","_config","_sdpSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","onicegatheringstatechange","_emitGatheringStateChange","getConfiguration","_createTransceiver","hasBundleTransport","associatedRemoteMediaStreams","clonedStream","clonedTrack","_createIceGatherer","bufferedCandidateEvents","bufferCandidates","_gather","serializedCandidate","_disposeIceAndDtlsTransports","remoteMsid","setTransport","isNewTrack","nativeTrack","hdrExt","rHdrExt","mediaSectionsInOffer","candidateString","inboundrtp","outboundrtp","candidatepair","webpackPolyfill","deprecate","paths","RTCTrackEvent","modernStatsTypes","InternalError","NotSupportedError","nativeGetUserMedia","nativeGetSettings","applyConstraints","nativeApplyConstraints","_localStreams","getStreamById","_addTrack","_onaddstream","_onaddstreampoly","withCallback","errcb","RTCTransceiver","origCreateOffer","audioTransceiver","getTransceivers","setDirection","addTransceiver","videoTransceiver","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","eventNameToWrap","nativeAddEventListener","nativeEventName","_eventMap","nativeRemoveEventListener","unwrappedCb","nativeCreateObjectURL","nativeRevokeObjectURL","newId","dsc","nativeSetAttribute","TraceablePeerConnection","audioTransferActive","_addedStreams","localSSRCs","localUfrag","remoteUfrag","_peerVideoTypeChanged","__WEBPACK_IMPORTED_MODULE_15__service_RTC_SignalingEvents__","_peerMutedChanged","__WEBPACK_IMPORTED_MODULE_7__RTCUtils__","statsinterval","Interop","interop","Simulcast","numOfLayers","SIMULCAST_LAYERS","explodeRemoteSimulcast","sdpConsistency","__WEBPACK_IMPORTED_MODULE_12__xmpp_SdpConsistency__","localSdpMunger","__WEBPACK_IMPORTED_MODULE_5__LocalSdpMunger__","rtxModifier","__WEBPACK_IMPORTED_MODULE_10__xmpp_RtxModifier__","what","__WEBPACK_IMPORTED_MODULE_8__browser__","_remoteStreamAdded","_remoteStreamRemoved","_processStat","extractPrimarySSRC","SIM_LAYER_RIDS","statValue","endTime","dumpSDP","_getDesiredMediaDirection","mediaTransferActive","hasAnyTracksOfType","supportsSimulcast","videoTrack","_setVideoType","endpoints","endpointTrackMap","mediaTrack","findTrackById","__WEBPACK_IMPORTED_MODULE_6__RTC__","onaddtrack","_remoteTrackAdded","onremovetrack","_remoteTrackRemoved","streamAudioTracks","streamVideoTracks","mediaLines","__WEBPACK_IMPORTED_MODULE_11__xmpp_SDP__","mls","__WEBPACK_IMPORTED_MODULE_14__xmpp_SDPUtil__","trackSsrc","ownerEndpointId","getSSRCOwner","peerMediaInfo","getPeerMediaInfo","_createRemoteTrack","__WEBPACK_IMPORTED_MODULE_3__JitsiRemoteTrack__","remoteTracksMap","isUserStream","_removeRemoteTrackById","_getRemoteTrackById","removedAudioTrack","removedVideoTrack","_removeRemoteTrack","toBeRemoved","_getSSRC","_injectSsrcGroupForUnifiedSimulcast","__WEBPACK_IMPORTED_MODULE_1_sdp_transform___default","simulcast_03","getters","toPlanB","maybeAddMutedLocalVideoTracksToSDP","transformer","__WEBPACK_IMPORTED_MODULE_13__xmpp_SdpTransformUtil__","audioMedia","selectMedia","changed","videoMedia","toRawSDP","transformStreamIdentifiers","webrtcStream","generateNewStreamSSRCInfo","setPrimarySsrc","setSsrcCache","fidGroups","rtxSsrcMapping","_assertTrackBelongs","webRtcStream","_handleFirefoxRemoveStream","doesBelong","isMediaStreamInPc","_ensureSimulcastGroupIsLast","localSdp","sdpStr","videoStartIndex","simStartIndex","otherStartIndex","simEndIndex","simStr","otherEndIndex","_adjustLocalMediaDirection","modifiedDirection","desiredAudioDirection","desiredVideoDirection","parsedSdp","toUnifiedPlan","_insertUnifiedPlanSimulcastReceive","mungeRemoteDescription","stripRtx","firstSsrcs","newSsrcLines","resStr","_injectH264IfNotPresent","payloadsArray","dummyPayloadType","clearVideoSsrcCache","peerTracks","_removePeerConnection","supportsRtpSender","simParams","scaleResolutionDownBy","setParameters","_createOfferOrAnswer","isOffer","_successCallback","resultSdp","hasPrimarySsrcCached","makeVideoPrimarySsrcsConsistent","mungeLocalDescription","modifyRtxSsrcs","groupsMap","groupSSRCs","_processLocalSSRCsMap","_errorCallback","trackMSID","newSSRCNum","oldSSRCNum","currNumSsrcs","RTCEvents","ttfmTrackerAudioAttached","ttfmTrackerVideoAttached","JitsiRemoteTrack","hasBeenMuted","_bindMuteHandlers","_onTrackMute","_onTrackUnmute","gumStart","gumEnd","gumDuration","ttfm","__WEBPACK_IMPORTED_MODULE_4__statistics_statistics__","__WEBPACK_IMPORTED_MODULE_3__browser__","_playCallback","LocalSdpMunger","localVideos","isInPeerConnection","shouldFakeSdp","requiredSSRCs","ssrcCache","cachedPrimarySsrc","primaryCname","removeSSRC","addSSRCAttribute","addSSRCGroup","modifyRtxSsrcs2","pcId","streamAndTrackIDs","__WEBPACK_IMPORTED_MODULE_2__xmpp_SdpTransformUtil__","_addMutedLocalVideoTracksToSDP","sessionDesc","audioMLine","_transformMediaIdentifiers","updateAssociatedRtxStream","primarySsrcInfo","primarySsrcMsid","primarySsrcCname","previousRtxSSRC","getRtxSSRC","dumpSSRCGroups","removeGroupsWithSSRC","RtxModifier","correspondingRtxSsrcs","ssrcMapping","sdpTransformer","__WEBPACK_IMPORTED_MODULE_1__SdpTransformUtil__","getSSRCCount","primaryVideoSsrcs","getPrimaryVideoSSRCs","getSSRCAttrValue","correspondingRtxSsrc","previousAssociatedRtxStream","__WEBPACK_IMPORTED_MODULE_2__SDPUtil__","containsAnySSRCGroups","findGroups","removeGroupsBySemantics","SdpConsistency","injectRecvOnly","newPrimarySsrc","getPrimaryVideoSsrc","replaceSSRC","mlB2UMap","mlU2BMap","candidateToUnifiedPlan","candidateToPlanB","getFirstSendingIndexFromAnswer","rewrite","type2bl","uLine","bundleOnly","cached","hasBundle","recvonlySsrcs","mid2ul","bIdx","uIdx","bLine","ssrc2group","ssrc2ml","related","DEFAULT_NUM_OF_LAYERS","processVideo","validateDescription","transformUtils","parseSsrcs","writeSsrcs","clearSsrcCache","_parseSimLayers","_buildNewToOldSsrcMap","newSsrcList","oldSsrcList","newSsrc","oldSsrc","_fillInSourceDataFromCache","newSimSsrcs","newMsid","newCname","ssrcsToReplace","ssrcsToAdd","_generateSourceData","simSsrcs","simSsrc","_restoreSimulcast","simulcastSsrcs","relatedGroup","relatedSsrcs","relatedSSRC","nuke","invalid","TalkMutedDetection","_eventFired","_trackMuteChanged","_trackAdded","_isLocalAudioTrack","Transcriber","audioRecorder","transcriptionService","SphinxService","transcription","BEFORE_STATE","lineLength","hasPopulatedArrays","twoDimensionalArray","callBack","wordArray","offset","getUTCMilliseconds","wordObject","begin","word","maybeMerge","recordingResult","merge","arrays","potentialWords","lowestWordArray","wordToAdd","updateTranscription","foundSmaller","wordToCompare","getTranscription","TranscriptionService","Word","sphinxURL","toReturn","sendRequest","audioFileBlob","DONE","formatResponse","objects","filler","verify","audioBlob","getWord","getBeginTime","getEndTime","VideoSIPGW","sessionStateChangeListener","sessionStateChanged","handleJibriSIPStatus","handleJibriSIPState","__WEBPACK_IMPORTED_MODULE_2__VideoSIPGWConstants__","sipaddress","setState","__WEBPACK_IMPORTED_MODULE_1__JitsiVideoSIPGWSession__","addStateListener","removeStateListener","JitsiVideoSIPGWSession","__WEBPACK_IMPORTED_MODULE_3__VideoSIPGWConstants__","_sendJibriIQ","displayname","SpeakerStatsCollector","users","dominantSpeakerId","__WEBPACK_IMPORTED_MODULE_1__SpeakerStats___default","_onDominantSpeaker","_onUserJoin","_onUserLeave","_onDisplayNameChange","oldDominantSpeaker","newDominantSpaker","setIsDominantSpeaker","savedUser","markAsHasLeft","SpeakerStats","isLocalStats","_userId","_isLocalStats","totalDominantSpeakerTime","_dominantSpeakerStart","_hasLeft","_isDominantSpeaker","isNowDominantSpeaker","timeElapsed","logOutputDevice","__WEBPACK_IMPORTED_MODULE_5__modules_statistics_statistics__","__WEBPACK_IMPORTED_MODULE_3__modules_RTC_RTC__","JitsiMediaDevices","isDevicePermissionGranted","permissions","__WEBPACK_IMPORTED_MODULE_2__modules_browser__","__WEBPACK_IMPORTED_MODULE_4__service_RTC_RTCEvents___default","__WEBPACK_IMPORTED_MODULE_6__JitsiMediaDevicesEvents__","getVideoElementName","findVideoElement","containerElement","videoElemName","matching","isResizeEventSupported","setVolume","streamElement","volume","setAutoPlay","autoPlay","autoplay"],"mappings":"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","file":"lib-jitsi-meet.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"JitsiMeetJS\"] = factory();\n\telse\n\t\troot[\"JitsiMeetJS\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 61);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c26bc67f9ebc8e0e4bd1","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Logger = require(\"./Logger\");\nvar LogCollector = require(\"./LogCollector\");\n\n/**\n * Definition of the log method\n * @name log_method\n * @function\n * @param {...*} log_args the arguments to be logged\n */\n/**\n * The logger's transport type definition.\n *\n * @typedef {object} LoggerTransport\n *\n * @property {log_method} trace method called to log on {@link Logger.levels.TRACE} logging level\n * @property {log_method} debug method called to log on {@link Logger.levels.DEBUG} logging level\n * @property {log_method} info method called to log on {@link Logger.levels.INFO} logging level\n * @property {log_method} log method called to log on {@link Logger.levels.LOG} logging level\n * @property {log_method} warn method called to log on {@link Logger.levels.WARN} logging level\n * @property {log_method} error method called to log on {@link Logger.levels.ERROR} logging level\n */\n\n/**\n * Map with the created loggers with ID.\n */\nvar idLoggers = {};\n\n/**\n * Array with the loggers without id.\n */\nvar loggers = [];\n\n/**\n * Log level for the lbrary.\n */\nvar curLevel = Logger.levels.TRACE;\n\n\nmodule.exports = {\n    /**\n     * Adds given {@link LoggerTransport} instance to the list of global\n     * transports which means that it'll be used by all {@link Logger}s\n     * @param {LoggerTransport} transport\n     */\n    addGlobalTransport: function(transport) {\n        Logger.addGlobalTransport(transport);\n    },\n    /**\n     * Removes given {@link LoggerTransport} instance from the list of global\n     * transports\n     * @param {LoggerTransport} transport\n     */\n    removeGlobalTransport: function(transport) {\n        Logger.removeGlobalTransport(transport);\n    },\n    /**\n     * Creates new logger.\n     * @arguments the same as Logger constructor\n     */\n    getLogger: function(id, transports, format) {\n        var logger = new Logger(curLevel, id, transports, format);\n        if(id) {\n            idLoggers[id] = idLoggers[id] || [];\n            idLoggers[id].push(logger);\n        } else {\n            loggers.push(logger);\n        }\n        return logger;\n    },\n    /**\n     * Changes the log level for the existing loggers by id.\n     * @param level the new log level.\n     * @param id if specified the level will be changed only for loggers with the\n     * same id. Otherwise the operation will affect all loggers that don't\n     * have id.\n     */\n    setLogLevelById: function(level, id) {\n        var l = id? (idLoggers[id] || []) : loggers;\n        for(var i = 0; i < l.length; i++) {\n            l[i].setLevel(level);\n        }\n    },\n    /**\n     * Changes the log level for all existing loggers.\n     * @param level the new log level.\n     */\n    setLogLevel: function (level) {\n        curLevel = level;\n        var i = 0;\n        for(; i < loggers.length; i++) {\n            loggers[i].setLevel(level);\n        }\n\n        for(var id in idLoggers) {\n            var l = idLoggers[id] || [];\n            for(i = 0; i < l.length; i++) {\n                l[i].setLevel(level);\n            }\n        }\n    },\n    /**\n     * The supported log levels.\n     */\n    levels: Logger.levels,\n    /**\n     * Exports the <tt>LogCollector</tt>.\n     */\n    LogCollector: LogCollector\n};\n\n\n\n// WEBPACK FOOTER //\n// ../jitsi-meet-logger/lib/index.js","import BrowserCapabilities from './BrowserCapabilities';\n\nexport default new BrowserCapabilities();\n\n\n\n// WEBPACK FOOTER //\n// ./modules/browser/index.js","/** File: strophe.js\n *  A JavaScript library for writing XMPP clients.\n *\n *  This library uses either Bidirectional-streams Over Synchronous HTTP (BOSH)\n *  to emulate a persistent, stateful, two-way connection to an XMPP server or\n *  alternatively WebSockets.\n *\n *  More information on BOSH can be found in XEP 124.\n *  For more information on XMPP-over WebSocket see this RFC:\n *  http://tools.ietf.org/html/rfc7395\n */\n\n/* All of the Strophe globals are defined in this special function below so\n * that references to the globals become closures.  This will ensure that\n * on page reload, these references will still be available to callbacks\n * that are still executing.\n */\n\n/* jshint ignore:start */\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        //Allow using this built library as an AMD module\n        //in another project. That other project will only\n        //see this AMD call, not the internal modules in\n        //the closure below.\n        define([], factory);\n    } else {\n        //Browser globals case.\n        var wrapper = factory();\n        root.Strophe        = wrapper.Strophe;\n        root.$build         = wrapper.$build;\n        root.$iq            = wrapper.$iq;\n        root.$msg           = wrapper.$msg;\n        root.$pres          = wrapper.$pres;\n        root.SHA1           = wrapper.SHA1;\n        root.MD5            = wrapper.MD5;\n        root.b64_hmac_sha1  = wrapper.b64_hmac_sha1;\n        root.b64_sha1       = wrapper.b64_sha1;\n        root.str_hmac_sha1  = wrapper.str_hmac_sha1;\n        root.str_sha1       = wrapper.str_sha1;\n    }\n}(this, function () {\n    //almond, and your modules will be inlined here\n/* jshint ignore:end */\n/**\n * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.\n * Released under MIT license, http://github.com/requirejs/almond/LICENSE\n */\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\n//be followed.\n/*global setTimeout: false */\n\nvar requirejs, require, define;\n(function (undef) {\n    var main, req, makeMap, handlers,\n        defined = {},\n        waiting = {},\n        config = {},\n        defining = {},\n        hasOwn = Object.prototype.hasOwnProperty,\n        aps = [].slice,\n        jsSuffixRegExp = /\\.js$/;\n\n    function hasProp(obj, prop) {\n        return hasOwn.call(obj, prop);\n    }\n\n    /**\n     * Given a relative module name, like ./something, normalize it to\n     * a real name that can be mapped to a path.\n     * @param {String} name the relative name\n     * @param {String} baseName a real name that the name arg is relative\n     * to.\n     * @returns {String} normalized name\n     */\n    function normalize(name, baseName) {\n        var nameParts, nameSegment, mapValue, foundMap, lastIndex,\n            foundI, foundStarMap, starI, i, j, part, normalizedBaseParts,\n            baseParts = baseName && baseName.split(\"/\"),\n            map = config.map,\n            starMap = (map && map['*']) || {};\n\n        //Adjust any relative paths.\n        if (name) {\n            name = name.split('/');\n            lastIndex = name.length - 1;\n\n            // If wanting node ID compatibility, strip .js from end\n            // of IDs. Have to do this here, and not in nameToUrl\n            // because node allows either .js or non .js to map\n            // to same file.\n            if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\n                name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\n            }\n\n            // Starts with a '.' so need the baseName\n            if (name[0].charAt(0) === '.' && baseParts) {\n                //Convert baseName to array, and lop off the last part,\n                //so that . matches that 'directory' and not name of the baseName's\n                //module. For instance, baseName of 'one/two/three', maps to\n                //'one/two/three.js', but we want the directory, 'one/two' for\n                //this normalization.\n                normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);\n                name = normalizedBaseParts.concat(name);\n            }\n\n            //start trimDots\n            for (i = 0; i < name.length; i++) {\n                part = name[i];\n                if (part === '.') {\n                    name.splice(i, 1);\n                    i -= 1;\n                } else if (part === '..') {\n                    // If at the start, or previous value is still ..,\n                    // keep them so that when converted to a path it may\n                    // still work when converted to a path, even though\n                    // as an ID it is less than ideal. In larger point\n                    // releases, may be better to just kick out an error.\n                    if (i === 0 || (i === 1 && name[2] === '..') || name[i - 1] === '..') {\n                        continue;\n                    } else if (i > 0) {\n                        name.splice(i - 1, 2);\n                        i -= 2;\n                    }\n                }\n            }\n            //end trimDots\n\n            name = name.join('/');\n        }\n\n        //Apply map config if available.\n        if ((baseParts || starMap) && map) {\n            nameParts = name.split('/');\n\n            for (i = nameParts.length; i > 0; i -= 1) {\n                nameSegment = nameParts.slice(0, i).join(\"/\");\n\n                if (baseParts) {\n                    //Find the longest baseName segment match in the config.\n                    //So, do joins on the biggest to smallest lengths of baseParts.\n                    for (j = baseParts.length; j > 0; j -= 1) {\n                        mapValue = map[baseParts.slice(0, j).join('/')];\n\n                        //baseName segment has  config, find if it has one for\n                        //this name.\n                        if (mapValue) {\n                            mapValue = mapValue[nameSegment];\n                            if (mapValue) {\n                                //Match, update name to the new value.\n                                foundMap = mapValue;\n                                foundI = i;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (foundMap) {\n                    break;\n                }\n\n                //Check for a star map match, but just hold on to it,\n                //if there is a shorter segment match later in a matching\n                //config, then favor over this star map.\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\n                    foundStarMap = starMap[nameSegment];\n                    starI = i;\n                }\n            }\n\n            if (!foundMap && foundStarMap) {\n                foundMap = foundStarMap;\n                foundI = starI;\n            }\n\n            if (foundMap) {\n                nameParts.splice(0, foundI, foundMap);\n                name = nameParts.join('/');\n            }\n        }\n\n        return name;\n    }\n\n    function makeRequire(relName, forceSync) {\n        return function () {\n            //A version of a require function that passes a moduleName\n            //value for items that may need to\n            //look up paths relative to the moduleName\n            var args = aps.call(arguments, 0);\n\n            //If first arg is not require('string'), and there is only\n            //one arg, it is the array form without a callback. Insert\n            //a null so that the following concat is correct.\n            if (typeof args[0] !== 'string' && args.length === 1) {\n                args.push(null);\n            }\n            return req.apply(undef, args.concat([relName, forceSync]));\n        };\n    }\n\n    function makeNormalize(relName) {\n        return function (name) {\n            return normalize(name, relName);\n        };\n    }\n\n    function makeLoad(depName) {\n        return function (value) {\n            defined[depName] = value;\n        };\n    }\n\n    function callDep(name) {\n        if (hasProp(waiting, name)) {\n            var args = waiting[name];\n            delete waiting[name];\n            defining[name] = true;\n            main.apply(undef, args);\n        }\n\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\n            throw new Error('No ' + name);\n        }\n        return defined[name];\n    }\n\n    //Turns a plugin!resource to [plugin, resource]\n    //with the plugin being undefined if the name\n    //did not have a plugin prefix.\n    function splitPrefix(name) {\n        var prefix,\n            index = name ? name.indexOf('!') : -1;\n        if (index > -1) {\n            prefix = name.substring(0, index);\n            name = name.substring(index + 1, name.length);\n        }\n        return [prefix, name];\n    }\n\n    //Creates a parts array for a relName where first part is plugin ID,\n    //second part is resource ID. Assumes relName has already been normalized.\n    function makeRelParts(relName) {\n        return relName ? splitPrefix(relName) : [];\n    }\n\n    /**\n     * Makes a name map, normalizing the name, and using a plugin\n     * for normalization if necessary. Grabs a ref to plugin\n     * too, as an optimization.\n     */\n    makeMap = function (name, relParts) {\n        var plugin,\n            parts = splitPrefix(name),\n            prefix = parts[0],\n            relResourceName = relParts[1];\n\n        name = parts[1];\n\n        if (prefix) {\n            prefix = normalize(prefix, relResourceName);\n            plugin = callDep(prefix);\n        }\n\n        //Normalize according\n        if (prefix) {\n            if (plugin && plugin.normalize) {\n                name = plugin.normalize(name, makeNormalize(relResourceName));\n            } else {\n                name = normalize(name, relResourceName);\n            }\n        } else {\n            name = normalize(name, relResourceName);\n            parts = splitPrefix(name);\n            prefix = parts[0];\n            name = parts[1];\n            if (prefix) {\n                plugin = callDep(prefix);\n            }\n        }\n\n        //Using ridiculous property names for space reasons\n        return {\n            f: prefix ? prefix + '!' + name : name, //fullName\n            n: name,\n            pr: prefix,\n            p: plugin\n        };\n    };\n\n    function makeConfig(name) {\n        return function () {\n            return (config && config.config && config.config[name]) || {};\n        };\n    }\n\n    handlers = {\n        require: function (name) {\n            return makeRequire(name);\n        },\n        exports: function (name) {\n            var e = defined[name];\n            if (typeof e !== 'undefined') {\n                return e;\n            } else {\n                return (defined[name] = {});\n            }\n        },\n        module: function (name) {\n            return {\n                id: name,\n                uri: '',\n                exports: defined[name],\n                config: makeConfig(name)\n            };\n        }\n    };\n\n    main = function (name, deps, callback, relName) {\n        var cjsModule, depName, ret, map, i, relParts,\n            args = [],\n            callbackType = typeof callback,\n            usingExports;\n\n        //Use name if no relName\n        relName = relName || name;\n        relParts = makeRelParts(relName);\n\n        //Call the callback to define the module, if necessary.\n        if (callbackType === 'undefined' || callbackType === 'function') {\n            //Pull out the defined dependencies and pass the ordered\n            //values to the callback.\n            //Default to [require, exports, module] if no deps\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\n            for (i = 0; i < deps.length; i += 1) {\n                map = makeMap(deps[i], relParts);\n                depName = map.f;\n\n                //Fast path CommonJS standard dependencies.\n                if (depName === \"require\") {\n                    args[i] = handlers.require(name);\n                } else if (depName === \"exports\") {\n                    //CommonJS module spec 1.1\n                    args[i] = handlers.exports(name);\n                    usingExports = true;\n                } else if (depName === \"module\") {\n                    //CommonJS module spec 1.1\n                    cjsModule = args[i] = handlers.module(name);\n                } else if (hasProp(defined, depName) ||\n                           hasProp(waiting, depName) ||\n                           hasProp(defining, depName)) {\n                    args[i] = callDep(depName);\n                } else if (map.p) {\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\n                    args[i] = defined[depName];\n                } else {\n                    throw new Error(name + ' missing ' + depName);\n                }\n            }\n\n            ret = callback ? callback.apply(defined[name], args) : undefined;\n\n            if (name) {\n                //If setting exports via \"module\" is in play,\n                //favor that over return value and exports. After that,\n                //favor a non-undefined return value over exports use.\n                if (cjsModule && cjsModule.exports !== undef &&\n                        cjsModule.exports !== defined[name]) {\n                    defined[name] = cjsModule.exports;\n                } else if (ret !== undef || !usingExports) {\n                    //Use the return value from the function.\n                    defined[name] = ret;\n                }\n            }\n        } else if (name) {\n            //May just be an object definition for the module. Only\n            //worry about defining if have a module name.\n            defined[name] = callback;\n        }\n    };\n\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\n        if (typeof deps === \"string\") {\n            if (handlers[deps]) {\n                //callback in this case is really relName\n                return handlers[deps](callback);\n            }\n            //Just return the module wanted. In this scenario, the\n            //deps arg is the module name, and second arg (if passed)\n            //is just the relName.\n            //Normalize module name, if it contains . or ..\n            return callDep(makeMap(deps, makeRelParts(callback)).f);\n        } else if (!deps.splice) {\n            //deps is a config object, not an array.\n            config = deps;\n            if (config.deps) {\n                req(config.deps, config.callback);\n            }\n            if (!callback) {\n                return;\n            }\n\n            if (callback.splice) {\n                //callback is an array, which means it is a dependency list.\n                //Adjust args if there are dependencies\n                deps = callback;\n                callback = relName;\n                relName = null;\n            } else {\n                deps = undef;\n            }\n        }\n\n        //Support require(['a'])\n        callback = callback || function () {};\n\n        //If relName is a function, it is an errback handler,\n        //so remove it.\n        if (typeof relName === 'function') {\n            relName = forceSync;\n            forceSync = alt;\n        }\n\n        //Simulate async callback;\n        if (forceSync) {\n            main(undef, deps, callback, relName);\n        } else {\n            //Using a non-zero value because of concern for what old browsers\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\n            //If want a value immediately, use require('id') instead -- something\n            //that works in almond on the global level, but not guaranteed and\n            //unlikely to work in other AMD implementations.\n            setTimeout(function () {\n                main(undef, deps, callback, relName);\n            }, 4);\n        }\n\n        return req;\n    };\n\n    /**\n     * Just drops the config on the floor, but returns req in case\n     * the config return value is used.\n     */\n    req.config = function (cfg) {\n        return req(cfg);\n    };\n\n    /**\n     * Expose module registry for debugging and tooling\n     */\n    requirejs._defined = defined;\n\n    define = function (name, deps, callback) {\n        if (typeof name !== 'string') {\n            throw new Error('See almond README: incorrect module build, no module name');\n        }\n\n        //This module may not have dependencies\n        if (!deps.splice) {\n            //deps is not an array, so probably means\n            //an object literal or factory function for\n            //the value. Adjust args.\n            callback = deps;\n            deps = [];\n        }\n\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\n            waiting[name] = [name, deps, callback];\n        }\n    };\n\n    define.amd = {\n        jQuery: true\n    };\n}());\n\ndefine(\"node_modules/almond/almond.js\", function(){});\n\n/*\n    This program is distributed under the terms of the MIT license.\n    Please see the LICENSE file for details.\n\n    Copyright 2006-2008, OGG, LLC\n*/\n/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n/* global define */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-polyfill',[], function () {\n            return factory(root);\n        });\n    } else {\n        // Browser globals\n        return factory(root);\n    }\n}(this, function (root) {\n\n/** Function: Function.prototype.bind\n *  Bind a function to an instance.\n *\n *  This Function object extension method creates a bound method similar\n *  to those in Python.  This means that the 'this' object will point\n *  to the instance you want.  See <MDC's bind() documentation at https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind>\n *  and <Bound Functions and Function Imports in JavaScript at http://benjamin.smedbergs.us/blog/2007-01-03/bound-functions-and-function-imports-in-javascript/>\n *  for a complete explanation.\n *\n *  This extension already exists in some browsers (namely, Firefox 3), but\n *  we provide it to support those that don't.\n *\n *  Parameters:\n *    (Object) obj - The object that will become 'this' in the bound function.\n *    (Object) argN - An option argument that will be prepended to the\n *      arguments given for the function call\n *\n *  Returns:\n *    The bound function.\n */\nif (!Function.prototype.bind) {\n    Function.prototype.bind = function (obj /*, arg1, arg2, ... */) {\n        var func = this;\n        var _slice = Array.prototype.slice;\n        var _concat = Array.prototype.concat;\n        var _args = _slice.call(arguments, 1);\n        return function () {\n            return func.apply(obj ? obj : this, _concat.call(_args, _slice.call(arguments, 0)));\n        };\n    };\n}\n\n/** Function: Array.isArray\n *  This is a polyfill for the ES5 Array.isArray method.\n */\nif (!Array.isArray) {\n    Array.isArray = function(arg) {\n        return Object.prototype.toString.call(arg) === '[object Array]';\n    };\n}\n\n/** Function: Array.prototype.indexOf\n *  Return the index of an object in an array.\n *\n *  This function is not supplied by some JavaScript implementations, so\n *  we provide it if it is missing.  This code is from:\n *  http://developer.mozilla.org/En/Core_JavaScript_1.5_Reference:Objects:Array:indexOf\n *\n *  Parameters:\n *    (Object) elt - The object to look for.\n *    (Integer) from - The index from which to start looking. (optional).\n *\n *  Returns:\n *    The index of elt in the array or -1 if not found.\n */\nif (!Array.prototype.indexOf) {\n    Array.prototype.indexOf = function(elt /*, from*/) {\n        var len = this.length;\n        var from = Number(arguments[1]) || 0;\n        from = (from < 0) ? Math.ceil(from) : Math.floor(from);\n        if (from < 0) {\n            from += len;\n        }\n\n        for (; from < len; from++) {\n            if (from in this && this[from] === elt) {\n                return from;\n            }\n        }\n        return -1;\n    };\n}\n\n/** Function: Array.prototype.forEach\n *\n *  This function is not available in IE < 9\n *\n *  See <forEach on developer.mozilla.org at https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach>\n */\nif (!Array.prototype.forEach) {\n    Array.prototype.forEach = function(callback, thisArg) {\n        var T, k;\n        if (this === null) {\n            throw new TypeError(' this is null or not defined');\n        }\n        // 1. Let O be the result of calling toObject() passing the\n        // |this| value as the argument.\n        var O = Object(this);\n        // 2. Let lenValue be the result of calling the Get() internal\n        // method of O with the argument \"length\".\n        // 3. Let len be toUint32(lenValue).\n        var len = O.length >>> 0;\n        // 4. If isCallable(callback) is false, throw a TypeError exception.\n        // See: http://es5.github.com/#x9.11\n        if (typeof callback !== \"function\") {\n            throw new TypeError(callback + ' is not a function');\n        }\n        // 5. If thisArg was supplied, let T be thisArg; else let\n        // T be undefined.\n        if (arguments.length > 1) {\n            T = thisArg;\n        }\n        // 6. Let k be 0\n        k = 0;\n        // 7. Repeat, while k < len\n        while (k < len) {\n            var kValue;\n            // a. Let Pk be ToString(k).\n            //        This is implicit for LHS operands of the in operator\n            // b. Let kPresent be the result of calling the HasProperty\n            //        internal method of O with argument Pk.\n            //        This step can be combined with c\n            // c. If kPresent is true, then\n            if (k in O) {\n                // i. Let kValue be the result of calling the Get internal\n                // method of O with argument Pk.\n                kValue = O[k];\n                // ii. Call the Call internal method of callback with T as\n                // the this value and argument list containing kValue, k, and O.\n                callback.call(T, kValue, k, O);\n            }\n            // d. Increase k by 1.\n            k++;\n        }\n        // 8. return undefined\n    };\n}\n\n// This code was written by Tyler Akins and has been placed in the\n// public domain.  It would be nice if you left this header intact.\n// Base64 code from Tyler Akins -- http://rumkin.com\nvar keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nif (!root.btoa) {\n    root.btoa = function (input) {\n        /**\n         * Encodes a string in base64\n         * @param {String} input The string to encode in base64.\n         */\n        var output = \"\";\n        var chr1, chr2, chr3;\n        var enc1, enc2, enc3, enc4;\n        var i = 0;\n        do {\n            chr1 = input.charCodeAt(i++);\n            chr2 = input.charCodeAt(i++);\n            chr3 = input.charCodeAt(i++);\n\n            enc1 = chr1 >> 2;\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n            enc4 = chr3 & 63;\n\n            if (isNaN(chr2)) {\n                enc2 = ((chr1 & 3) << 4);\n                enc3 = enc4 = 64;\n            } else if (isNaN(chr3)) {\n                enc4 = 64;\n            }\n            output = output + keyStr.charAt(enc1) + keyStr.charAt(enc2) +\n                keyStr.charAt(enc3) + keyStr.charAt(enc4);\n        } while (i < input.length);\n        return output;\n    };\n}\n\nif (!root.atob) {\n    root.atob = function (input) {\n        /**\n         * Decodes a base64 string.\n         * @param {String} input The string to decode.\n         */\n        var output = \"\";\n        var chr1, chr2, chr3;\n        var enc1, enc2, enc3, enc4;\n        var i = 0;\n        // remove all characters that are not A-Z, a-z, 0-9, +, /, or =\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n        do {\n            enc1 = keyStr.indexOf(input.charAt(i++));\n            enc2 = keyStr.indexOf(input.charAt(i++));\n            enc3 = keyStr.indexOf(input.charAt(i++));\n            enc4 = keyStr.indexOf(input.charAt(i++));\n\n            chr1 = (enc1 << 2) | (enc2 >> 4);\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n            chr3 = ((enc3 & 3) << 6) | enc4;\n\n            output = output + String.fromCharCode(chr1);\n\n            if (enc3 !== 64) {\n                output = output + String.fromCharCode(chr2);\n            }\n            if (enc4 !== 64) {\n                output = output + String.fromCharCode(chr3);\n            }\n        } while (i < input.length);\n        return output;\n    };\n}\n}));\n\n/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n * in FIPS PUB 180-1\n * Version 2.1a Copyright Paul Johnston 2000 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for details.\n */\n\n/* jshint undef: true, unused: true:, noarg: true, latedef: false */\n/* global define */\n\n/* Some functions and variables have been stripped for use with Strophe */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-sha1', [],function () {\n            return factory();\n        });\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        // Browser globals\n        root.SHA1 = factory();\n    }\n}(this, function () {\n\n/*\n * Calculate the SHA-1 of an array of big-endian words, and a bit length\n */\nfunction core_sha1(x, len)\n{\n  /* append padding */\n  x[len >> 5] |= 0x80 << (24 - len % 32);\n  x[((len + 64 >> 9) << 4) + 15] = len;\n\n  var w = new Array(80);\n  var a =  1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d =  271733878;\n  var e = -1009589776;\n\n  var i, j, t, olda, oldb, oldc, oldd, olde;\n  for (i = 0; i < x.length; i += 16)\n  {\n    olda = a;\n    oldb = b;\n    oldc = c;\n    oldd = d;\n    olde = e;\n\n    for (j = 0; j < 80; j++)\n    {\n      if (j < 16) { w[j] = x[i + j]; }\n      else { w[j] = rol(w[j-3] ^ w[j-8] ^ w[j-14] ^ w[j-16], 1); }\n      t = safe_add(safe_add(rol(a, 5), sha1_ft(j, b, c, d)),\n                       safe_add(safe_add(e, w[j]), sha1_kt(j)));\n      e = d;\n      d = c;\n      c = rol(b, 30);\n      b = a;\n      a = t;\n    }\n\n    a = safe_add(a, olda);\n    b = safe_add(b, oldb);\n    c = safe_add(c, oldc);\n    d = safe_add(d, oldd);\n    e = safe_add(e, olde);\n  }\n  return [a, b, c, d, e];\n}\n\n/*\n * Perform the appropriate triplet combination function for the current\n * iteration\n */\nfunction sha1_ft(t, b, c, d)\n{\n  if (t < 20) { return (b & c) | ((~b) & d); }\n  if (t < 40) { return b ^ c ^ d; }\n  if (t < 60) { return (b & c) | (b & d) | (c & d); }\n  return b ^ c ^ d;\n}\n\n/*\n * Determine the appropriate additive constant for the current iteration\n */\nfunction sha1_kt(t)\n{\n  return (t < 20) ?  1518500249 : (t < 40) ?  1859775393 :\n         (t < 60) ? -1894007588 : -899497514;\n}\n\n/*\n * Calculate the HMAC-SHA1 of a key and some data\n */\nfunction core_hmac_sha1(key, data)\n{\n  var bkey = str2binb(key);\n  if (bkey.length > 16) { bkey = core_sha1(bkey, key.length * 8); }\n\n  var ipad = new Array(16), opad = new Array(16);\n  for (var i = 0; i < 16; i++)\n  {\n    ipad[i] = bkey[i] ^ 0x36363636;\n    opad[i] = bkey[i] ^ 0x5C5C5C5C;\n  }\n\n  var hash = core_sha1(ipad.concat(str2binb(data)), 512 + data.length * 8);\n  return core_sha1(opad.concat(hash), 512 + 160);\n}\n\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\nfunction safe_add(x, y)\n{\n  var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return (msw << 16) | (lsw & 0xFFFF);\n}\n\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\nfunction rol(num, cnt)\n{\n  return (num << cnt) | (num >>> (32 - cnt));\n}\n\n/*\n * Convert an 8-bit or 16-bit string to an array of big-endian words\n * In 8-bit function, characters >255 have their hi-byte silently ignored.\n */\nfunction str2binb(str)\n{\n  var bin = [];\n  var mask = 255;\n  for (var i = 0; i < str.length * 8; i += 8)\n  {\n    bin[i>>5] |= (str.charCodeAt(i / 8) & mask) << (24 - i%32);\n  }\n  return bin;\n}\n\n/*\n * Convert an array of big-endian words to a string\n */\nfunction binb2str(bin)\n{\n  var str = \"\";\n  var mask = 255;\n  for (var i = 0; i < bin.length * 32; i += 8)\n  {\n    str += String.fromCharCode((bin[i>>5] >>> (24 - i%32)) & mask);\n  }\n  return str;\n}\n\n/*\n * Convert an array of big-endian words to a base-64 string\n */\nfunction binb2b64(binarray)\n{\n  var tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n  var str = \"\";\n  var triplet, j;\n  for (var i = 0; i < binarray.length * 4; i += 3)\n  {\n    triplet = (((binarray[i   >> 2] >> 8 * (3 -  i   %4)) & 0xFF) << 16) |\n              (((binarray[i+1 >> 2] >> 8 * (3 - (i+1)%4)) & 0xFF) << 8 ) |\n               ((binarray[i+2 >> 2] >> 8 * (3 - (i+2)%4)) & 0xFF);\n    for (j = 0; j < 4; j++)\n    {\n      if (i * 8 + j * 6 > binarray.length * 32) { str += \"=\"; }\n      else { str += tab.charAt((triplet >> 6*(3-j)) & 0x3F); }\n    }\n  }\n  return str;\n}\n\n/*\n * These are the functions you'll usually want to call\n * They take string arguments and return either hex or base-64 encoded strings\n */\nreturn {\n    b64_hmac_sha1:  function (key, data){ return binb2b64(core_hmac_sha1(key, data)); },\n    b64_sha1:       function (s) { return binb2b64(core_sha1(str2binb(s),s.length * 8)); },\n    binb2str:       binb2str,\n    core_hmac_sha1: core_hmac_sha1,\n    str_hmac_sha1:  function (key, data){ return binb2str(core_hmac_sha1(key, data)); },\n    str_sha1:       function (s) { return binb2str(core_sha1(str2binb(s),s.length * 8)); },\n};\n}));\n\n/*\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.1 Copyright (C) Paul Johnston 1999 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n/*\n * Everything that isn't used by Strophe has been stripped here!\n */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-md5',[], function () {\n            return factory();\n        });\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        // Browser globals\n        root.MD5 = factory();\n    }\n}(this, function () {\n    /*\n     * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n     * to work around bugs in some JS interpreters.\n     */\n    var safe_add = function (x, y) {\n        var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n        var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n        return (msw << 16) | (lsw & 0xFFFF);\n    };\n\n    /*\n     * Bitwise rotate a 32-bit number to the left.\n     */\n    var bit_rol = function (num, cnt) {\n        return (num << cnt) | (num >>> (32 - cnt));\n    };\n\n    /*\n     * Convert a string to an array of little-endian words\n     */\n    var str2binl = function (str) {\n        var bin = [];\n        for(var i = 0; i < str.length * 8; i += 8)\n        {\n            bin[i>>5] |= (str.charCodeAt(i / 8) & 255) << (i%32);\n        }\n        return bin;\n    };\n\n    /*\n     * Convert an array of little-endian words to a string\n     */\n    var binl2str = function (bin) {\n        var str = \"\";\n        for(var i = 0; i < bin.length * 32; i += 8)\n        {\n            str += String.fromCharCode((bin[i>>5] >>> (i % 32)) & 255);\n        }\n        return str;\n    };\n\n    /*\n     * Convert an array of little-endian words to a hex string.\n     */\n    var binl2hex = function (binarray) {\n        var hex_tab = \"0123456789abcdef\";\n        var str = \"\";\n        for(var i = 0; i < binarray.length * 4; i++)\n        {\n            str += hex_tab.charAt((binarray[i>>2] >> ((i%4)*8+4)) & 0xF) +\n                hex_tab.charAt((binarray[i>>2] >> ((i%4)*8  )) & 0xF);\n        }\n        return str;\n    };\n\n    /*\n     * These functions implement the four basic operations the algorithm uses.\n     */\n    var md5_cmn = function (q, a, b, x, s, t) {\n        return safe_add(bit_rol(safe_add(safe_add(a, q),safe_add(x, t)), s),b);\n    };\n\n    var md5_ff = function (a, b, c, d, x, s, t) {\n        return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\n    };\n\n    var md5_gg = function (a, b, c, d, x, s, t) {\n        return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\n    };\n\n    var md5_hh = function (a, b, c, d, x, s, t) {\n        return md5_cmn(b ^ c ^ d, a, b, x, s, t);\n    };\n\n    var md5_ii = function (a, b, c, d, x, s, t) {\n        return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\n    };\n\n    /*\n     * Calculate the MD5 of an array of little-endian words, and a bit length\n     */\n    var core_md5 = function (x, len) {\n        /* append padding */\n        x[len >> 5] |= 0x80 << ((len) % 32);\n        x[(((len + 64) >>> 9) << 4) + 14] = len;\n\n        var a =  1732584193;\n        var b = -271733879;\n        var c = -1732584194;\n        var d =  271733878;\n\n        var olda, oldb, oldc, oldd;\n        for (var i = 0; i < x.length; i += 16)\n        {\n            olda = a;\n            oldb = b;\n            oldc = c;\n            oldd = d;\n\n            a = md5_ff(a, b, c, d, x[i+ 0], 7 , -680876936);\n            d = md5_ff(d, a, b, c, x[i+ 1], 12, -389564586);\n            c = md5_ff(c, d, a, b, x[i+ 2], 17,  606105819);\n            b = md5_ff(b, c, d, a, x[i+ 3], 22, -1044525330);\n            a = md5_ff(a, b, c, d, x[i+ 4], 7 , -176418897);\n            d = md5_ff(d, a, b, c, x[i+ 5], 12,  1200080426);\n            c = md5_ff(c, d, a, b, x[i+ 6], 17, -1473231341);\n            b = md5_ff(b, c, d, a, x[i+ 7], 22, -45705983);\n            a = md5_ff(a, b, c, d, x[i+ 8], 7 ,  1770035416);\n            d = md5_ff(d, a, b, c, x[i+ 9], 12, -1958414417);\n            c = md5_ff(c, d, a, b, x[i+10], 17, -42063);\n            b = md5_ff(b, c, d, a, x[i+11], 22, -1990404162);\n            a = md5_ff(a, b, c, d, x[i+12], 7 ,  1804603682);\n            d = md5_ff(d, a, b, c, x[i+13], 12, -40341101);\n            c = md5_ff(c, d, a, b, x[i+14], 17, -1502002290);\n            b = md5_ff(b, c, d, a, x[i+15], 22,  1236535329);\n\n            a = md5_gg(a, b, c, d, x[i+ 1], 5 , -165796510);\n            d = md5_gg(d, a, b, c, x[i+ 6], 9 , -1069501632);\n            c = md5_gg(c, d, a, b, x[i+11], 14,  643717713);\n            b = md5_gg(b, c, d, a, x[i+ 0], 20, -373897302);\n            a = md5_gg(a, b, c, d, x[i+ 5], 5 , -701558691);\n            d = md5_gg(d, a, b, c, x[i+10], 9 ,  38016083);\n            c = md5_gg(c, d, a, b, x[i+15], 14, -660478335);\n            b = md5_gg(b, c, d, a, x[i+ 4], 20, -405537848);\n            a = md5_gg(a, b, c, d, x[i+ 9], 5 ,  568446438);\n            d = md5_gg(d, a, b, c, x[i+14], 9 , -1019803690);\n            c = md5_gg(c, d, a, b, x[i+ 3], 14, -187363961);\n            b = md5_gg(b, c, d, a, x[i+ 8], 20,  1163531501);\n            a = md5_gg(a, b, c, d, x[i+13], 5 , -1444681467);\n            d = md5_gg(d, a, b, c, x[i+ 2], 9 , -51403784);\n            c = md5_gg(c, d, a, b, x[i+ 7], 14,  1735328473);\n            b = md5_gg(b, c, d, a, x[i+12], 20, -1926607734);\n\n            a = md5_hh(a, b, c, d, x[i+ 5], 4 , -378558);\n            d = md5_hh(d, a, b, c, x[i+ 8], 11, -2022574463);\n            c = md5_hh(c, d, a, b, x[i+11], 16,  1839030562);\n            b = md5_hh(b, c, d, a, x[i+14], 23, -35309556);\n            a = md5_hh(a, b, c, d, x[i+ 1], 4 , -1530992060);\n            d = md5_hh(d, a, b, c, x[i+ 4], 11,  1272893353);\n            c = md5_hh(c, d, a, b, x[i+ 7], 16, -155497632);\n            b = md5_hh(b, c, d, a, x[i+10], 23, -1094730640);\n            a = md5_hh(a, b, c, d, x[i+13], 4 ,  681279174);\n            d = md5_hh(d, a, b, c, x[i+ 0], 11, -358537222);\n            c = md5_hh(c, d, a, b, x[i+ 3], 16, -722521979);\n            b = md5_hh(b, c, d, a, x[i+ 6], 23,  76029189);\n            a = md5_hh(a, b, c, d, x[i+ 9], 4 , -640364487);\n            d = md5_hh(d, a, b, c, x[i+12], 11, -421815835);\n            c = md5_hh(c, d, a, b, x[i+15], 16,  530742520);\n            b = md5_hh(b, c, d, a, x[i+ 2], 23, -995338651);\n\n            a = md5_ii(a, b, c, d, x[i+ 0], 6 , -198630844);\n            d = md5_ii(d, a, b, c, x[i+ 7], 10,  1126891415);\n            c = md5_ii(c, d, a, b, x[i+14], 15, -1416354905);\n            b = md5_ii(b, c, d, a, x[i+ 5], 21, -57434055);\n            a = md5_ii(a, b, c, d, x[i+12], 6 ,  1700485571);\n            d = md5_ii(d, a, b, c, x[i+ 3], 10, -1894986606);\n            c = md5_ii(c, d, a, b, x[i+10], 15, -1051523);\n            b = md5_ii(b, c, d, a, x[i+ 1], 21, -2054922799);\n            a = md5_ii(a, b, c, d, x[i+ 8], 6 ,  1873313359);\n            d = md5_ii(d, a, b, c, x[i+15], 10, -30611744);\n            c = md5_ii(c, d, a, b, x[i+ 6], 15, -1560198380);\n            b = md5_ii(b, c, d, a, x[i+13], 21,  1309151649);\n            a = md5_ii(a, b, c, d, x[i+ 4], 6 , -145523070);\n            d = md5_ii(d, a, b, c, x[i+11], 10, -1120210379);\n            c = md5_ii(c, d, a, b, x[i+ 2], 15,  718787259);\n            b = md5_ii(b, c, d, a, x[i+ 9], 21, -343485551);\n\n            a = safe_add(a, olda);\n            b = safe_add(b, oldb);\n            c = safe_add(c, oldc);\n            d = safe_add(d, oldd);\n        }\n        return [a, b, c, d];\n    };\n\n    var obj = {\n        /*\n         * These are the functions you'll usually want to call.\n         * They take string arguments and return either hex or base-64 encoded\n         * strings.\n         */\n        hexdigest: function (s) {\n            return binl2hex(core_md5(str2binl(s), s.length * 8));\n        },\n\n        hash: function (s) {\n            return binl2str(core_md5(str2binl(s), s.length * 8));\n        }\n    };\n    return obj;\n}));\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-utils',[], function () {\n            return factory();\n        });\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        // Browser globals\n        root.stropheUtils = factory();\n    }\n}(this, function () {\n\n    var utils = {\n\n        utf16to8: function (str) {\n            var i, c;\n            var out = \"\";\n            var len = str.length;\n            for (i = 0; i < len; i++) {\n                c = str.charCodeAt(i);\n                if ((c >= 0x0000) && (c <= 0x007F)) {\n                    out += str.charAt(i);\n                } else if (c > 0x07FF) {\n                    out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F));\n                    out += String.fromCharCode(0x80 | ((c >>  6) & 0x3F));\n                    out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));\n                } else {\n                    out += String.fromCharCode(0xC0 | ((c >>  6) & 0x1F));\n                    out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));\n                }\n            }\n            return out;\n        },\n\n        addCookies: function (cookies) {\n            /* Parameters:\n             *  (Object) cookies - either a map of cookie names\n             *    to string values or to maps of cookie values.\n             *\n             * For example:\n             * { \"myCookie\": \"1234\" }\n             *\n             * or:\n             * { \"myCookie\": {\n             *      \"value\": \"1234\",\n             *      \"domain\": \".example.org\",\n             *      \"path\": \"/\",\n             *      \"expires\": expirationDate\n             *      }\n             *  }\n             *\n             *  These values get passed to Strophe.Connection via\n             *   options.cookies\n             */\n            var cookieName, cookieObj, isObj, cookieValue, expires, domain, path;\n            for (cookieName in (cookies || {})) {\n                expires = '';\n                domain = '';\n                path = '';\n                cookieObj = cookies[cookieName];\n                isObj = typeof cookieObj === \"object\";\n                cookieValue = escape(unescape(isObj ? cookieObj.value : cookieObj));\n                if (isObj) {\n                    expires = cookieObj.expires ? \";expires=\"+cookieObj.expires : '';\n                    domain = cookieObj.domain ? \";domain=\"+cookieObj.domain : '';\n                    path = cookieObj.path ? \";path=\"+cookieObj.path : '';\n                }\n                document.cookie =\n                    cookieName+'='+cookieValue + expires + domain + path;\n            }\n        }\n    };\n    return utils;\n}));\n\n/*\n    This program is distributed under the terms of the MIT license.\n    Please see the LICENSE file for details.\n\n    Copyright 2006-2008, OGG, LLC\n*/\n\n/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n/*global define, document, sessionStorage, setTimeout, clearTimeout, ActiveXObject, DOMParser, btoa, atob */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-core',[\n            'strophe-sha1',\n            'strophe-md5',\n            'strophe-utils'\n        ], function () {\n            return factory.apply(this, arguments);\n        });\n    }  else if (typeof exports === 'object') {\n        module.exports = factory(\n            require('./sha1'),\n            require('./md5'),\n            require('./utils')\n        );\n    } else {\n        // Browser globals\n        var o = factory(root.SHA1, root.MD5, root.stropheUtils);\n        root.Strophe =        o.Strophe;\n        root.$build =         o.$build;\n        root.$iq =            o.$iq;\n        root.$msg =           o.$msg;\n        root.$pres =          o.$pres;\n        root.SHA1 =           o.SHA1;\n        root.MD5 =            o.MD5;\n        root.b64_hmac_sha1 =  o.SHA1.b64_hmac_sha1;\n        root.b64_sha1 =       o.SHA1.b64_sha1;\n        root.str_hmac_sha1 =  o.SHA1.str_hmac_sha1;\n        root.str_sha1 =       o.SHA1.str_sha1;\n    }\n}(this, function (SHA1, MD5, utils) {\n\nvar Strophe;\n\n/** Function: $build\n *  Create a Strophe.Builder.\n *  This is an alias for 'new Strophe.Builder(name, attrs)'.\n *\n *  Parameters:\n *    (String) name - The root element name.\n *    (Object) attrs - The attributes for the root element in object notation.\n *\n *  Returns:\n *    A new Strophe.Builder object.\n */\nfunction $build(name, attrs) { return new Strophe.Builder(name, attrs); }\n\n/** Function: $msg\n *  Create a Strophe.Builder with a <message/> element as the root.\n *\n *  Parameters:\n *    (Object) attrs - The <message/> element attributes in object notation.\n *\n *  Returns:\n *    A new Strophe.Builder object.\n */\nfunction $msg(attrs) { return new Strophe.Builder(\"message\", attrs); }\n\n/** Function: $iq\n *  Create a Strophe.Builder with an <iq/> element as the root.\n *\n *  Parameters:\n *    (Object) attrs - The <iq/> element attributes in object notation.\n *\n *  Returns:\n *    A new Strophe.Builder object.\n */\nfunction $iq(attrs) { return new Strophe.Builder(\"iq\", attrs); }\n\n/** Function: $pres\n *  Create a Strophe.Builder with a <presence/> element as the root.\n *\n *  Parameters:\n *    (Object) attrs - The <presence/> element attributes in object notation.\n *\n *  Returns:\n *    A new Strophe.Builder object.\n */\nfunction $pres(attrs) { return new Strophe.Builder(\"presence\", attrs); }\n\n/** Class: Strophe\n *  An object container for all Strophe library functions.\n *\n *  This class is just a container for all the objects and constants\n *  used in the library.  It is not meant to be instantiated, but to\n *  provide a namespace for library objects, constants, and functions.\n */\nStrophe = {\n    /** Constant: VERSION */\n    VERSION: \"1.2.14-1\",\n\n    /** Constants: XMPP Namespace Constants\n     *  Common namespace constants from the XMPP RFCs and XEPs.\n     *\n     *  NS.HTTPBIND - HTTP BIND namespace from XEP 124.\n     *  NS.BOSH - BOSH namespace from XEP 206.\n     *  NS.CLIENT - Main XMPP client namespace.\n     *  NS.AUTH - Legacy authentication namespace.\n     *  NS.ROSTER - Roster operations namespace.\n     *  NS.PROFILE - Profile namespace.\n     *  NS.DISCO_INFO - Service discovery info namespace from XEP 30.\n     *  NS.DISCO_ITEMS - Service discovery items namespace from XEP 30.\n     *  NS.MUC - Multi-User Chat namespace from XEP 45.\n     *  NS.SASL - XMPP SASL namespace from RFC 3920.\n     *  NS.STREAM - XMPP Streams namespace from RFC 3920.\n     *  NS.BIND - XMPP Binding namespace from RFC 3920.\n     *  NS.SESSION - XMPP Session namespace from RFC 3920.\n     *  NS.XHTML_IM - XHTML-IM namespace from XEP 71.\n     *  NS.XHTML - XHTML body namespace from XEP 71.\n     */\n    NS: {\n        HTTPBIND: \"http://jabber.org/protocol/httpbind\",\n        BOSH: \"urn:xmpp:xbosh\",\n        CLIENT: \"jabber:client\",\n        AUTH: \"jabber:iq:auth\",\n        ROSTER: \"jabber:iq:roster\",\n        PROFILE: \"jabber:iq:profile\",\n        DISCO_INFO: \"http://jabber.org/protocol/disco#info\",\n        DISCO_ITEMS: \"http://jabber.org/protocol/disco#items\",\n        MUC: \"http://jabber.org/protocol/muc\",\n        SASL: \"urn:ietf:params:xml:ns:xmpp-sasl\",\n        STREAM: \"http://etherx.jabber.org/streams\",\n        FRAMING: \"urn:ietf:params:xml:ns:xmpp-framing\",\n        BIND: \"urn:ietf:params:xml:ns:xmpp-bind\",\n        SESSION: \"urn:ietf:params:xml:ns:xmpp-session\",\n        VERSION: \"jabber:iq:version\",\n        STANZAS: \"urn:ietf:params:xml:ns:xmpp-stanzas\",\n        XHTML_IM: \"http://jabber.org/protocol/xhtml-im\",\n        XHTML: \"http://www.w3.org/1999/xhtml\"\n    },\n\n    /** Constants: XHTML_IM Namespace\n     *  contains allowed tags, tag attributes, and css properties.\n     *  Used in the createHtml function to filter incoming html into the allowed XHTML-IM subset.\n     *  See http://xmpp.org/extensions/xep-0071.html#profile-summary for the list of recommended\n     *  allowed tags and their attributes.\n     */\n    XHTML: {\n        tags: ['a','blockquote','br','cite','em','img','li','ol','p','span','strong','ul','body'],\n        attributes: {\n            'a':          ['href'],\n            'blockquote': ['style'],\n            'br':         [],\n            'cite':       ['style'],\n            'em':         [],\n            'img':        ['src', 'alt', 'style', 'height', 'width'],\n            'li':         ['style'],\n            'ol':         ['style'],\n            'p':          ['style'],\n            'span':       ['style'],\n            'strong':     [],\n            'ul':         ['style'],\n            'body':       []\n        },\n        css: ['background-color','color','font-family','font-size','font-style','font-weight','margin-left','margin-right','text-align','text-decoration'],\n        /** Function: XHTML.validTag\n         *\n         * Utility method to determine whether a tag is allowed\n         * in the XHTML_IM namespace.\n         *\n         * XHTML tag names are case sensitive and must be lower case.\n         */\n        validTag: function(tag) {\n            for (var i = 0; i < Strophe.XHTML.tags.length; i++) {\n                if (tag === Strophe.XHTML.tags[i]) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        /** Function: XHTML.validAttribute\n         *\n         * Utility method to determine whether an attribute is allowed\n         * as recommended per XEP-0071\n         *\n         * XHTML attribute names are case sensitive and must be lower case.\n         */\n        validAttribute: function(tag, attribute) {\n            if (typeof Strophe.XHTML.attributes[tag] !== 'undefined' && Strophe.XHTML.attributes[tag].length > 0) {\n                for (var i = 0; i < Strophe.XHTML.attributes[tag].length; i++) {\n                    if (attribute === Strophe.XHTML.attributes[tag][i]) {\n                        return true;\n                    }\n                }\n            }\n        return false;\n        },\n        validCSS: function(style) {\n            for (var i = 0; i < Strophe.XHTML.css.length; i++) {\n                if (style === Strophe.XHTML.css[i]) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n\n    /** Constants: Connection Status Constants\n     *  Connection status constants for use by the connection handler\n     *  callback.\n     *\n     *  Status.ERROR - An error has occurred\n     *  Status.CONNECTING - The connection is currently being made\n     *  Status.CONNFAIL - The connection attempt failed\n     *  Status.AUTHENTICATING - The connection is authenticating\n     *  Status.AUTHFAIL - The authentication attempt failed\n     *  Status.CONNECTED - The connection has succeeded\n     *  Status.DISCONNECTED - The connection has been terminated\n     *  Status.DISCONNECTING - The connection is currently being terminated\n     *  Status.ATTACHED - The connection has been attached\n     *  Status.REDIRECT - The connection has been redirected\n     *  Status.CONNTIMEOUT - The connection has timed out\n     */\n    Status: {\n        ERROR: 0,\n        CONNECTING: 1,\n        CONNFAIL: 2,\n        AUTHENTICATING: 3,\n        AUTHFAIL: 4,\n        CONNECTED: 5,\n        DISCONNECTED: 6,\n        DISCONNECTING: 7,\n        ATTACHED: 8,\n        REDIRECT: 9,\n        CONNTIMEOUT: 10\n    },\n\n    ErrorCondition: {\n        BAD_FORMAT: \"bad-format\",\n        CONFLICT: \"conflict\",\n        MISSING_JID_NODE: \"x-strophe-bad-non-anon-jid\",\n        NO_AUTH_MECH: \"no-auth-mech\",\n        UNKNOWN_REASON: \"unknown\",\n    },\n\n    /** Constants: Log Level Constants\n     *  Logging level indicators.\n     *\n     *  LogLevel.DEBUG - Debug output\n     *  LogLevel.INFO - Informational output\n     *  LogLevel.WARN - Warnings\n     *  LogLevel.ERROR - Errors\n     *  LogLevel.FATAL - Fatal errors\n     */\n    LogLevel: {\n        DEBUG: 0,\n        INFO: 1,\n        WARN: 2,\n        ERROR: 3,\n        FATAL: 4\n    },\n\n    /** PrivateConstants: DOM Element Type Constants\n     *  DOM element types.\n     *\n     *  ElementType.NORMAL - Normal element.\n     *  ElementType.TEXT - Text data element.\n     *  ElementType.FRAGMENT - XHTML fragment element.\n     */\n    ElementType: {\n        NORMAL: 1,\n        TEXT: 3,\n        CDATA: 4,\n        FRAGMENT: 11\n    },\n\n    /** PrivateConstants: Timeout Values\n     *  Timeout values for error states.  These values are in seconds.\n     *  These should not be changed unless you know exactly what you are\n     *  doing.\n     *\n     *  TIMEOUT - Timeout multiplier. A waiting request will be considered\n     *      failed after Math.floor(TIMEOUT * wait) seconds have elapsed.\n     *      This defaults to 1.1, and with default wait, 66 seconds.\n     *  SECONDARY_TIMEOUT - Secondary timeout multiplier. In cases where\n     *      Strophe can detect early failure, it will consider the request\n     *      failed if it doesn't return after\n     *      Math.floor(SECONDARY_TIMEOUT * wait) seconds have elapsed.\n     *      This defaults to 0.1, and with default wait, 6 seconds.\n     */\n    TIMEOUT: 1.1,\n    SECONDARY_TIMEOUT: 0.1,\n\n    /** Function: addNamespace\n     *  This function is used to extend the current namespaces in\n     *  Strophe.NS.  It takes a key and a value with the key being the\n     *  name of the new namespace, with its actual value.\n     *  For example:\n     *  Strophe.addNamespace('PUBSUB', \"http://jabber.org/protocol/pubsub\");\n     *\n     *  Parameters:\n     *    (String) name - The name under which the namespace will be\n     *      referenced under Strophe.NS\n     *    (String) value - The actual namespace.\n     */\n    addNamespace: function (name, value) {\n        Strophe.NS[name] = value;\n    },\n\n    /** Function: forEachChild\n     *  Map a function over some or all child elements of a given element.\n     *\n     *  This is a small convenience function for mapping a function over\n     *  some or all of the children of an element.  If elemName is null, all\n     *  children will be passed to the function, otherwise only children\n     *  whose tag names match elemName will be passed.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The element to operate on.\n     *    (String) elemName - The child element tag name filter.\n     *    (Function) func - The function to apply to each child.  This\n     *      function should take a single argument, a DOM element.\n     */\n    forEachChild: function (elem, elemName, func) {\n        var i, childNode;\n        for (i = 0; i < elem.childNodes.length; i++) {\n            childNode = elem.childNodes[i];\n            if (childNode.nodeType === Strophe.ElementType.NORMAL &&\n                (!elemName || this.isTagEqual(childNode, elemName))) {\n                func(childNode);\n            }\n        }\n    },\n\n    /** Function: isTagEqual\n     *  Compare an element's tag name with a string.\n     *\n     *  This function is case sensitive.\n     *\n     *  Parameters:\n     *    (XMLElement) el - A DOM element.\n     *    (String) name - The element name.\n     *\n     *  Returns:\n     *    true if the element's tag name matches _el_, and false\n     *    otherwise.\n     */\n    isTagEqual: function (el, name) {\n        return el.tagName === name;\n    },\n\n    /** PrivateVariable: _xmlGenerator\n     *  _Private_ variable that caches a DOM document to\n     *  generate elements.\n     */\n    _xmlGenerator: null,\n\n    /** PrivateFunction: _makeGenerator\n     *  _Private_ function that creates a dummy XML DOM document to serve as\n     *  an element and text node generator.\n     */\n    _makeGenerator: function () {\n        var doc;\n        // IE9 does implement createDocument(); however, using it will cause the browser to leak memory on page unload.\n        // Here, we test for presence of createDocument() plus IE's proprietary documentMode attribute, which would be\n                // less than 10 in the case of IE9 and below.\n        if (document.implementation.createDocument === undefined ||\n                        document.implementation.createDocument && document.documentMode && document.documentMode < 10) {\n            doc = this._getIEXmlDom();\n            doc.appendChild(doc.createElement('strophe'));\n        } else {\n            doc = document.implementation\n                .createDocument('jabber:client', 'strophe', null);\n        }\n        return doc;\n    },\n\n    /** Function: xmlGenerator\n     *  Get the DOM document to generate elements.\n     *\n     *  Returns:\n     *    The currently used DOM document.\n     */\n    xmlGenerator: function () {\n        if (!Strophe._xmlGenerator) {\n            Strophe._xmlGenerator = Strophe._makeGenerator();\n        }\n        return Strophe._xmlGenerator;\n    },\n\n    /** PrivateFunction: _getIEXmlDom\n     *  Gets IE xml doc object\n     *\n     *  Returns:\n     *    A Microsoft XML DOM Object\n     *  See Also:\n     *    http://msdn.microsoft.com/en-us/library/ms757837%28VS.85%29.aspx\n     */\n    _getIEXmlDom : function() {\n        var doc = null;\n        var docStrings = [\n            \"Msxml2.DOMDocument.6.0\",\n            \"Msxml2.DOMDocument.5.0\",\n            \"Msxml2.DOMDocument.4.0\",\n            \"MSXML2.DOMDocument.3.0\",\n            \"MSXML2.DOMDocument\",\n            \"MSXML.DOMDocument\",\n            \"Microsoft.XMLDOM\"\n        ];\n\n        for (var d = 0; d < docStrings.length; d++) {\n            if (doc === null) {\n                try {\n                    doc = new ActiveXObject(docStrings[d]);\n                } catch (e) {\n                    doc = null;\n                }\n            } else {\n                break;\n            }\n        }\n        return doc;\n    },\n\n    /** Function: xmlElement\n     *  Create an XML DOM element.\n     *\n     *  This function creates an XML DOM element correctly across all\n     *  implementations. Note that these are not HTML DOM elements, which\n     *  aren't appropriate for XMPP stanzas.\n     *\n     *  Parameters:\n     *    (String) name - The name for the element.\n     *    (Array|Object) attrs - An optional array or object containing\n     *      key/value pairs to use as element attributes. The object should\n     *      be in the format {'key': 'value'} or {key: 'value'}. The array\n     *      should have the format [['key1', 'value1'], ['key2', 'value2']].\n     *    (String) text - The text child data for the element.\n     *\n     *  Returns:\n     *    A new XML DOM element.\n     */\n    xmlElement: function (name) {\n        if (!name) { return null; }\n\n        var node = Strophe.xmlGenerator().createElement(name);\n        // FIXME: this should throw errors if args are the wrong type or\n        // there are more than two optional args\n        var a, i, k;\n        for (a = 1; a < arguments.length; a++) {\n            var arg = arguments[a];\n            if (!arg) { continue; }\n            if (typeof(arg) === \"string\" ||\n                typeof(arg) === \"number\") {\n                node.appendChild(Strophe.xmlTextNode(arg));\n            } else if (typeof(arg) === \"object\" &&\n                       typeof(arg.sort) === \"function\") {\n                for (i = 0; i < arg.length; i++) {\n                    var attr = arg[i];\n                    if (typeof(attr) === \"object\" &&\n                        typeof(attr.sort) === \"function\" &&\n                        attr[1] !== undefined &&\n                        attr[1] !== null) {\n                        node.setAttribute(attr[0], attr[1]);\n                    }\n                }\n            } else if (typeof(arg) === \"object\") {\n                for (k in arg) {\n                    if (arg.hasOwnProperty(k)) {\n                        if (arg[k] !== undefined &&\n                            arg[k] !== null) {\n                            node.setAttribute(k, arg[k]);\n                        }\n                    }\n                }\n            }\n        }\n\n        return node;\n    },\n\n    /*  Function: xmlescape\n     *  Excapes invalid xml characters.\n     *\n     *  Parameters:\n     *     (String) text - text to escape.\n     *\n     *  Returns:\n     *      Escaped text.\n     */\n    xmlescape: function(text) {\n        text = text.replace(/\\&/g, \"&amp;\");\n        text = text.replace(/</g,  \"&lt;\");\n        text = text.replace(/>/g,  \"&gt;\");\n        text = text.replace(/'/g,  \"&apos;\");\n        text = text.replace(/\"/g,  \"&quot;\");\n        return text;\n    },\n\n    /*  Function: xmlunescape\n    *  Unexcapes invalid xml characters.\n    *\n    *  Parameters:\n    *     (String) text - text to unescape.\n    *\n    *  Returns:\n    *      Unescaped text.\n    */\n    xmlunescape: function(text) {\n        text = text.replace(/\\&amp;/g, \"&\");\n        text = text.replace(/&lt;/g,  \"<\");\n        text = text.replace(/&gt;/g,  \">\");\n        text = text.replace(/&apos;/g,  \"'\");\n        text = text.replace(/&quot;/g,  \"\\\"\");\n        return text;\n    },\n\n    /** Function: xmlTextNode\n     *  Creates an XML DOM text node.\n     *\n     *  Provides a cross implementation version of document.createTextNode.\n     *\n     *  Parameters:\n     *    (String) text - The content of the text node.\n     *\n     *  Returns:\n     *    A new XML DOM text node.\n     */\n    xmlTextNode: function (text) {\n        return Strophe.xmlGenerator().createTextNode(text);\n    },\n\n    /** Function: xmlHtmlNode\n     *  Creates an XML DOM html node.\n     *\n     *  Parameters:\n     *    (String) html - The content of the html node.\n     *\n     *  Returns:\n     *    A new XML DOM text node.\n     */\n    xmlHtmlNode: function (html) {\n        var node;\n        //ensure text is escaped\n        if (DOMParser) {\n            var parser = new DOMParser();\n            node = parser.parseFromString(html, \"text/xml\");\n        } else {\n            node = new ActiveXObject(\"Microsoft.XMLDOM\");\n            node.async=\"false\";\n            node.loadXML(html);\n        }\n        return node;\n    },\n\n    /** Function: getText\n     *  Get the concatenation of all text children of an element.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - A DOM element.\n     *\n     *  Returns:\n     *    A String with the concatenated text of all text element children.\n     */\n    getText: function (elem) {\n        if (!elem) { return null; }\n\n        var str = \"\";\n        if (elem.childNodes.length === 0 && elem.nodeType === Strophe.ElementType.TEXT) {\n            str += elem.nodeValue;\n        }\n\n        for (var i = 0; i < elem.childNodes.length; i++) {\n            if (elem.childNodes[i].nodeType === Strophe.ElementType.TEXT) {\n                str += elem.childNodes[i].nodeValue;\n            }\n        }\n\n        return Strophe.xmlescape(str);\n    },\n\n    /** Function: copyElement\n     *  Copy an XML DOM element.\n     *\n     *  This function copies a DOM element and all its descendants and returns\n     *  the new copy.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - A DOM element.\n     *\n     *  Returns:\n     *    A new, copied DOM element tree.\n     */\n    copyElement: function (elem) {\n        var i, el;\n        if (elem.nodeType === Strophe.ElementType.NORMAL) {\n            el = Strophe.xmlElement(elem.tagName);\n\n            for (i = 0; i < elem.attributes.length; i++) {\n                el.setAttribute(elem.attributes[i].nodeName,\n                                elem.attributes[i].value);\n            }\n\n            for (i = 0; i < elem.childNodes.length; i++) {\n                el.appendChild(Strophe.copyElement(elem.childNodes[i]));\n            }\n        } else if (elem.nodeType === Strophe.ElementType.TEXT) {\n            el = Strophe.xmlGenerator().createTextNode(elem.nodeValue);\n        }\n        return el;\n    },\n\n\n    /** Function: createHtml\n     *  Copy an HTML DOM element into an XML DOM.\n     *\n     *  This function copies a DOM element and all its descendants and returns\n     *  the new copy.\n     *\n     *  Parameters:\n     *    (HTMLElement) elem - A DOM element.\n     *\n     *  Returns:\n     *    A new, copied DOM element tree.\n     */\n    createHtml: function (elem) {\n        var i, el, j, tag, attribute, value, css, cssAttrs, attr, cssName, cssValue;\n        if (elem.nodeType === Strophe.ElementType.NORMAL) {\n            tag = elem.nodeName.toLowerCase(); // XHTML tags must be lower case.\n            if(Strophe.XHTML.validTag(tag)) {\n                try {\n                    el = Strophe.xmlElement(tag);\n                    for(i = 0; i < Strophe.XHTML.attributes[tag].length; i++) {\n                        attribute = Strophe.XHTML.attributes[tag][i];\n                        value = elem.getAttribute(attribute);\n                        if(typeof value === 'undefined' || value === null || value === '' || value === false || value === 0) {\n                            continue;\n                        }\n                        if(attribute === 'style' && typeof value === 'object') {\n                            if(typeof value.cssText !== 'undefined') {\n                                value = value.cssText; // we're dealing with IE, need to get CSS out\n                            }\n                        }\n                        // filter out invalid css styles\n                        if(attribute === 'style') {\n                            css = [];\n                            cssAttrs = value.split(';');\n                            for(j = 0; j < cssAttrs.length; j++) {\n                                attr = cssAttrs[j].split(':');\n                                cssName = attr[0].replace(/^\\s*/, \"\").replace(/\\s*$/, \"\").toLowerCase();\n                                if(Strophe.XHTML.validCSS(cssName)) {\n                                    cssValue = attr[1].replace(/^\\s*/, \"\").replace(/\\s*$/, \"\");\n                                    css.push(cssName + ': ' + cssValue);\n                                }\n                            }\n                            if(css.length > 0) {\n                                value = css.join('; ');\n                                el.setAttribute(attribute, value);\n                            }\n                        } else {\n                            el.setAttribute(attribute, value);\n                        }\n                    }\n\n                    for (i = 0; i < elem.childNodes.length; i++) {\n                        el.appendChild(Strophe.createHtml(elem.childNodes[i]));\n                    }\n                } catch(e) { // invalid elements\n                  el = Strophe.xmlTextNode('');\n                }\n            } else {\n                el = Strophe.xmlGenerator().createDocumentFragment();\n                for (i = 0; i < elem.childNodes.length; i++) {\n                    el.appendChild(Strophe.createHtml(elem.childNodes[i]));\n                }\n            }\n        } else if (elem.nodeType === Strophe.ElementType.FRAGMENT) {\n            el = Strophe.xmlGenerator().createDocumentFragment();\n            for (i = 0; i < elem.childNodes.length; i++) {\n                el.appendChild(Strophe.createHtml(elem.childNodes[i]));\n            }\n        } else if (elem.nodeType === Strophe.ElementType.TEXT) {\n            el = Strophe.xmlTextNode(elem.nodeValue);\n        }\n        return el;\n    },\n\n    /** Function: escapeNode\n     *  Escape the node part (also called local part) of a JID.\n     *\n     *  Parameters:\n     *    (String) node - A node (or local part).\n     *\n     *  Returns:\n     *    An escaped node (or local part).\n     */\n    escapeNode: function (node) {\n        if (typeof node !== \"string\") { return node; }\n        return node.replace(/^\\s+|\\s+$/g, '')\n            .replace(/\\\\/g,  \"\\\\5c\")\n            .replace(/ /g,   \"\\\\20\")\n            .replace(/\\\"/g,  \"\\\\22\")\n            .replace(/\\&/g,  \"\\\\26\")\n            .replace(/\\'/g,  \"\\\\27\")\n            .replace(/\\//g,  \"\\\\2f\")\n            .replace(/:/g,   \"\\\\3a\")\n            .replace(/</g,   \"\\\\3c\")\n            .replace(/>/g,   \"\\\\3e\")\n            .replace(/@/g,   \"\\\\40\");\n    },\n\n    /** Function: unescapeNode\n     *  Unescape a node part (also called local part) of a JID.\n     *\n     *  Parameters:\n     *    (String) node - A node (or local part).\n     *\n     *  Returns:\n     *    An unescaped node (or local part).\n     */\n    unescapeNode: function (node) {\n        if (typeof node !== \"string\") { return node; }\n        return node.replace(/\\\\20/g, \" \")\n            .replace(/\\\\22/g, '\"')\n            .replace(/\\\\26/g, \"&\")\n            .replace(/\\\\27/g, \"'\")\n            .replace(/\\\\2f/g, \"/\")\n            .replace(/\\\\3a/g, \":\")\n            .replace(/\\\\3c/g, \"<\")\n            .replace(/\\\\3e/g, \">\")\n            .replace(/\\\\40/g, \"@\")\n            .replace(/\\\\5c/g, \"\\\\\");\n    },\n\n    /** Function: getNodeFromJid\n     *  Get the node portion of a JID String.\n     *\n     *  Parameters:\n     *    (String) jid - A JID.\n     *\n     *  Returns:\n     *    A String containing the node.\n     */\n    getNodeFromJid: function (jid) {\n        if (jid.indexOf(\"@\") < 0) { return null; }\n        return jid.split(\"@\")[0];\n    },\n\n    /** Function: getDomainFromJid\n     *  Get the domain portion of a JID String.\n     *\n     *  Parameters:\n     *    (String) jid - A JID.\n     *\n     *  Returns:\n     *    A String containing the domain.\n     */\n    getDomainFromJid: function (jid) {\n        var bare = Strophe.getBareJidFromJid(jid);\n        if (bare.indexOf(\"@\") < 0) {\n            return bare;\n        } else {\n            var parts = bare.split(\"@\");\n            parts.splice(0, 1);\n            return parts.join('@');\n        }\n    },\n\n    /** Function: getResourceFromJid\n     *  Get the resource portion of a JID String.\n     *\n     *  Parameters:\n     *    (String) jid - A JID.\n     *\n     *  Returns:\n     *    A String containing the resource.\n     */\n    getResourceFromJid: function (jid) {\n        var s = jid.split(\"/\");\n        if (s.length < 2) { return null; }\n        s.splice(0, 1);\n        return s.join('/');\n    },\n\n    /** Function: getBareJidFromJid\n     *  Get the bare JID from a JID String.\n     *\n     *  Parameters:\n     *    (String) jid - A JID.\n     *\n     *  Returns:\n     *    A String containing the bare JID.\n     */\n    getBareJidFromJid: function (jid) {\n        return jid ? jid.split(\"/\")[0] : null;\n    },\n\n    /** PrivateFunction: _handleError\n     *  _Private_ function that properly logs an error to the console\n     */\n    _handleError: function (e) {\n        if (typeof e.stack !== \"undefined\") {\n            Strophe.fatal(e.stack);\n        }\n        if (e.sourceURL) {\n            Strophe.fatal(\"error: \" + this.handler + \" \" + e.sourceURL + \":\" +\n                          e.line + \" - \" + e.name + \": \" + e.message);\n        } else if (e.fileName) {\n            Strophe.fatal(\"error: \" + this.handler + \" \" +\n                          e.fileName + \":\" + e.lineNumber + \" - \" +\n                          e.name + \": \" + e.message);\n        } else {\n            Strophe.fatal(\"error: \" + e.message);\n        }\n    },\n\n    /** Function: log\n     *  User overrideable logging function.\n     *\n     *  This function is called whenever the Strophe library calls any\n     *  of the logging functions.  The default implementation of this\n     *  function does nothing.  If client code wishes to handle the logging\n     *  messages, it should override this with\n     *  > Strophe.log = function (level, msg) {\n     *  >   (user code here)\n     *  > };\n     *\n     *  Please note that data sent and received over the wire is logged\n     *  via Strophe.Connection.rawInput() and Strophe.Connection.rawOutput().\n     *\n     *  The different levels and their meanings are\n     *\n     *    DEBUG - Messages useful for debugging purposes.\n     *    INFO - Informational messages.  This is mostly information like\n     *      'disconnect was called' or 'SASL auth succeeded'.\n     *    WARN - Warnings about potential problems.  This is mostly used\n     *      to report transient connection errors like request timeouts.\n     *    ERROR - Some error occurred.\n     *    FATAL - A non-recoverable fatal error occurred.\n     *\n     *  Parameters:\n     *    (Integer) level - The log level of the log message.  This will\n     *      be one of the values in Strophe.LogLevel.\n     *    (String) msg - The log message.\n     */\n    /* jshint ignore:start */\n    log: function (level, msg) {\n        return;\n    },\n    /* jshint ignore:end */\n\n    /** Function: debug\n     *  Log a message at the Strophe.LogLevel.DEBUG level.\n     *\n     *  Parameters:\n     *    (String) msg - The log message.\n     */\n    debug: function(msg) {\n        this.log(this.LogLevel.DEBUG, msg);\n    },\n\n    /** Function: info\n     *  Log a message at the Strophe.LogLevel.INFO level.\n     *\n     *  Parameters:\n     *    (String) msg - The log message.\n     */\n    info: function (msg) {\n        this.log(this.LogLevel.INFO, msg);\n    },\n\n    /** Function: warn\n     *  Log a message at the Strophe.LogLevel.WARN level.\n     *\n     *  Parameters:\n     *    (String) msg - The log message.\n     */\n    warn: function (msg) {\n        this.log(this.LogLevel.WARN, msg);\n    },\n\n    /** Function: error\n     *  Log a message at the Strophe.LogLevel.ERROR level.\n     *\n     *  Parameters:\n     *    (String) msg - The log message.\n     */\n    error: function (msg) {\n        this.log(this.LogLevel.ERROR, msg);\n    },\n\n    /** Function: fatal\n     *  Log a message at the Strophe.LogLevel.FATAL level.\n     *\n     *  Parameters:\n     *    (String) msg - The log message.\n     */\n    fatal: function (msg) {\n        this.log(this.LogLevel.FATAL, msg);\n    },\n\n    /** Function: serialize\n     *  Render a DOM element and all descendants to a String.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - A DOM element.\n     *\n     *  Returns:\n     *    The serialized element tree as a String.\n     */\n    serialize: function (elem) {\n        var result;\n\n        if (!elem) { return null; }\n\n        if (typeof(elem.tree) === \"function\") {\n            elem = elem.tree();\n        }\n\n        var nodeName = elem.nodeName;\n        var i, child;\n\n        if (elem.getAttribute(\"_realname\")) {\n            nodeName = elem.getAttribute(\"_realname\");\n        }\n\n        result = \"<\" + nodeName;\n        for (i = 0; i < elem.attributes.length; i++) {\n             if(elem.attributes[i].nodeName !== \"_realname\") {\n               result += \" \" + elem.attributes[i].nodeName +\n                   \"='\" + Strophe.xmlescape(elem.attributes[i].value) + \"'\";\n             }\n        }\n\n        if (elem.childNodes.length > 0) {\n            result += \">\";\n            for (i = 0; i < elem.childNodes.length; i++) {\n                child = elem.childNodes[i];\n                switch( child.nodeType ){\n                  case Strophe.ElementType.NORMAL:\n                    // normal element, so recurse\n                    result += Strophe.serialize(child);\n                    break;\n                  case Strophe.ElementType.TEXT:\n                    // text element to escape values\n                    result += Strophe.xmlescape(child.nodeValue);\n                    break;\n                  case Strophe.ElementType.CDATA:\n                    // cdata section so don't escape values\n                    result += \"<![CDATA[\"+child.nodeValue+\"]]>\";\n                }\n            }\n            result += \"</\" + nodeName + \">\";\n        } else {\n            result += \"/>\";\n        }\n\n        return result;\n    },\n\n    /** PrivateVariable: _requestId\n     *  _Private_ variable that keeps track of the request ids for\n     *  connections.\n     */\n    _requestId: 0,\n\n    /** PrivateVariable: Strophe.connectionPlugins\n     *  _Private_ variable Used to store plugin names that need\n     *  initialization on Strophe.Connection construction.\n     */\n    _connectionPlugins: {},\n\n    /** Function: addConnectionPlugin\n     *  Extends the Strophe.Connection object with the given plugin.\n     *\n     *  Parameters:\n     *    (String) name - The name of the extension.\n     *    (Object) ptype - The plugin's prototype.\n     */\n    addConnectionPlugin: function (name, ptype) {\n        Strophe._connectionPlugins[name] = ptype;\n    }\n};\n\n/** Class: Strophe.Builder\n *  XML DOM builder.\n *\n *  This object provides an interface similar to JQuery but for building\n *  DOM elements easily and rapidly.  All the functions except for toString()\n *  and tree() return the object, so calls can be chained.  Here's an\n *  example using the $iq() builder helper.\n *  > $iq({to: 'you', from: 'me', type: 'get', id: '1'})\n *  >     .c('query', {xmlns: 'strophe:example'})\n *  >     .c('example')\n *  >     .toString()\n *\n *  The above generates this XML fragment\n *  > <iq to='you' from='me' type='get' id='1'>\n *  >   <query xmlns='strophe:example'>\n *  >     <example/>\n *  >   </query>\n *  > </iq>\n *  The corresponding DOM manipulations to get a similar fragment would be\n *  a lot more tedious and probably involve several helper variables.\n *\n *  Since adding children makes new operations operate on the child, up()\n *  is provided to traverse up the tree.  To add two children, do\n *  > builder.c('child1', ...).up().c('child2', ...)\n *  The next operation on the Builder will be relative to the second child.\n */\n\n/** Constructor: Strophe.Builder\n *  Create a Strophe.Builder object.\n *\n *  The attributes should be passed in object notation.  For example\n *  > var b = new Builder('message', {to: 'you', from: 'me'});\n *  or\n *  > var b = new Builder('messsage', {'xml:lang': 'en'});\n *\n *  Parameters:\n *    (String) name - The name of the root element.\n *    (Object) attrs - The attributes for the root element in object notation.\n *\n *  Returns:\n *    A new Strophe.Builder.\n */\nStrophe.Builder = function (name, attrs) {\n    // Set correct namespace for jabber:client elements\n    if (name === \"presence\" || name === \"message\" || name === \"iq\") {\n        if (attrs && !attrs.xmlns) {\n            attrs.xmlns = Strophe.NS.CLIENT;\n        } else if (!attrs) {\n            attrs = {xmlns: Strophe.NS.CLIENT};\n        }\n    }\n\n    // Holds the tree being built.\n    this.nodeTree = Strophe.xmlElement(name, attrs);\n\n    // Points to the current operation node.\n    this.node = this.nodeTree;\n};\n\nStrophe.Builder.prototype = {\n    /** Function: tree\n     *  Return the DOM tree.\n     *\n     *  This function returns the current DOM tree as an element object.  This\n     *  is suitable for passing to functions like Strophe.Connection.send().\n     *\n     *  Returns:\n     *    The DOM tree as a element object.\n     */\n    tree: function () {\n        return this.nodeTree;\n    },\n\n    /** Function: toString\n     *  Serialize the DOM tree to a String.\n     *\n     *  This function returns a string serialization of the current DOM\n     *  tree.  It is often used internally to pass data to a\n     *  Strophe.Request object.\n     *\n     *  Returns:\n     *    The serialized DOM tree in a String.\n     */\n    toString: function () {\n        return Strophe.serialize(this.nodeTree);\n    },\n\n    /** Function: up\n     *  Make the current parent element the new current element.\n     *\n     *  This function is often used after c() to traverse back up the tree.\n     *  For example, to add two children to the same element\n     *  > builder.c('child1', {}).up().c('child2', {});\n     *\n     *  Returns:\n     *    The Stophe.Builder object.\n     */\n    up: function () {\n        this.node = this.node.parentNode;\n        return this;\n    },\n\n    /** Function: root\n     *  Make the root element the new current element.\n     *\n     *  When at a deeply nested element in the tree, this function can be used\n     *  to jump back to the root of the tree, instead of having to repeatedly\n     *  call up().\n     *\n     *  Returns:\n     *    The Stophe.Builder object.\n     */\n    root: function () {\n        this.node = this.nodeTree;\n        return this;\n    },\n\n    /** Function: attrs\n     *  Add or modify attributes of the current element.\n     *\n     *  The attributes should be passed in object notation.  This function\n     *  does not move the current element pointer.\n     *\n     *  Parameters:\n     *    (Object) moreattrs - The attributes to add/modify in object notation.\n     *\n     *  Returns:\n     *    The Strophe.Builder object.\n     */\n    attrs: function (moreattrs) {\n        for (var k in moreattrs) {\n            if (moreattrs.hasOwnProperty(k)) {\n                if (moreattrs[k] === undefined) {\n                    this.node.removeAttribute(k);\n                } else {\n                    this.node.setAttribute(k, moreattrs[k]);\n                }\n            }\n        }\n        return this;\n    },\n\n    /** Function: c\n     *  Add a child to the current element and make it the new current\n     *  element.\n     *\n     *  This function moves the current element pointer to the child,\n     *  unless text is provided.  If you need to add another child, it\n     *  is necessary to use up() to go back to the parent in the tree.\n     *\n     *  Parameters:\n     *    (String) name - The name of the child.\n     *    (Object) attrs - The attributes of the child in object notation.\n     *    (String) text - The text to add to the child.\n     *\n     *  Returns:\n     *    The Strophe.Builder object.\n     */\n    c: function (name, attrs, text) {\n        var child = Strophe.xmlElement(name, attrs, text);\n        this.node.appendChild(child);\n        if (typeof text !== \"string\" && typeof text !==\"number\") {\n            this.node = child;\n        }\n        return this;\n    },\n\n    /** Function: cnode\n     *  Add a child to the current element and make it the new current\n     *  element.\n     *\n     *  This function is the same as c() except that instead of using a\n     *  name and an attributes object to create the child it uses an\n     *  existing DOM element object.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - A DOM element.\n     *\n     *  Returns:\n     *    The Strophe.Builder object.\n     */\n    cnode: function (elem) {\n        var impNode;\n        var xmlGen = Strophe.xmlGenerator();\n        try {\n            impNode = (xmlGen.importNode !== undefined);\n        } catch (e) {\n            impNode = false;\n        }\n        var newElem = impNode ?\n                      xmlGen.importNode(elem, true) :\n                      Strophe.copyElement(elem);\n        this.node.appendChild(newElem);\n        this.node = newElem;\n        return this;\n    },\n\n    /** Function: t\n     *  Add a child text element.\n     *\n     *  This *does not* make the child the new current element since there\n     *  are no children of text elements.\n     *\n     *  Parameters:\n     *    (String) text - The text data to append to the current element.\n     *\n     *  Returns:\n     *    The Strophe.Builder object.\n     */\n    t: function (text) {\n        var child = Strophe.xmlTextNode(text);\n        this.node.appendChild(child);\n        return this;\n    },\n\n    /** Function: h\n     *  Replace current element contents with the HTML passed in.\n     *\n     *  This *does not* make the child the new current element\n     *\n     *  Parameters:\n     *    (String) html - The html to insert as contents of current element.\n     *\n     *  Returns:\n     *    The Strophe.Builder object.\n     */\n    h: function (html) {\n        var fragment = document.createElement('body');\n\n        // force the browser to try and fix any invalid HTML tags\n        fragment.innerHTML = html;\n\n        // copy cleaned html into an xml dom\n        var xhtml = Strophe.createHtml(fragment);\n\n        while(xhtml.childNodes.length > 0) {\n            this.node.appendChild(xhtml.childNodes[0]);\n        }\n        return this;\n    }\n};\n\n/** PrivateClass: Strophe.Handler\n *  _Private_ helper class for managing stanza handlers.\n *\n *  A Strophe.Handler encapsulates a user provided callback function to be\n *  executed when matching stanzas are received by the connection.\n *  Handlers can be either one-off or persistant depending on their\n *  return value. Returning true will cause a Handler to remain active, and\n *  returning false will remove the Handler.\n *\n *  Users will not use Strophe.Handler objects directly, but instead they\n *  will use Strophe.Connection.addHandler() and\n *  Strophe.Connection.deleteHandler().\n */\n\n/** PrivateConstructor: Strophe.Handler\n *  Create and initialize a new Strophe.Handler.\n *\n *  Parameters:\n *    (Function) handler - A function to be executed when the handler is run.\n *    (String) ns - The namespace to match.\n *    (String) name - The element name to match.\n *    (String) type - The element type to match.\n *    (String) id - The element id attribute to match.\n *    (String) from - The element from attribute to match.\n *    (Object) options - Handler options\n *\n *  Returns:\n *    A new Strophe.Handler object.\n */\nStrophe.Handler = function (handler, ns, name, type, id, from, options) {\n    this.handler = handler;\n    this.ns = ns;\n    this.name = name;\n    this.type = type;\n    this.id = id;\n    this.options = options || {'matchBareFromJid': false, 'ignoreNamespaceFragment': false};\n    // BBB: Maintain backward compatibility with old `matchBare` option\n    if (this.options.matchBare) {\n        Strophe.warn('The \"matchBare\" option is deprecated, use \"matchBareFromJid\" instead.');\n        this.options.matchBareFromJid = this.options.matchBare;\n        delete this.options.matchBare;\n    }\n\n    if (this.options.matchBareFromJid) {\n        this.from = from ? Strophe.getBareJidFromJid(from) : null;\n    } else {\n        this.from = from;\n    }\n    // whether the handler is a user handler or a system handler\n    this.user = true;\n};\n\nStrophe.Handler.prototype = {\n    /** PrivateFunction: getNamespace\n     *  Returns the XML namespace attribute on an element.\n     *  If `ignoreNamespaceFragment` was passed in for this handler, then the\n     *  URL fragment will be stripped.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The XML element with the namespace.\n     *\n     *  Returns:\n     *    The namespace, with optionally the fragment stripped.\n     */\n    getNamespace: function (elem) {\n        var elNamespace = elem.getAttribute(\"xmlns\");\n        if (elNamespace && this.options.ignoreNamespaceFragment) {\n            elNamespace = elNamespace.split('#')[0];\n        }\n        return elNamespace;\n    },\n\n    /** PrivateFunction: namespaceMatch\n     *  Tests if a stanza matches the namespace set for this Strophe.Handler.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The XML element to test.\n     *\n     *  Returns:\n     *    true if the stanza matches and false otherwise.\n     */\n    namespaceMatch: function (elem) {\n        var nsMatch = false;\n        if (!this.ns) {\n            return true;\n        } else {\n            var that = this;\n            Strophe.forEachChild(elem, null, function (elem) {\n                if (that.getNamespace(elem) === that.ns) {\n                    nsMatch = true;\n                }\n            });\n            nsMatch = nsMatch || this.getNamespace(elem) === this.ns;\n        }\n        return nsMatch;\n    },\n\n    /** PrivateFunction: isMatch\n     *  Tests if a stanza matches the Strophe.Handler.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The XML element to test.\n     *\n     *  Returns:\n     *    true if the stanza matches and false otherwise.\n     */\n    isMatch: function (elem) {\n        var from = elem.getAttribute('from');\n        if (this.options.matchBareFromJid) {\n            from = Strophe.getBareJidFromJid(from);\n        }\n        var elem_type = elem.getAttribute(\"type\");\n        if (this.namespaceMatch(elem) &&\n            (!this.name || Strophe.isTagEqual(elem, this.name)) &&\n            (!this.type || (Array.isArray(this.type) ? this.type.indexOf(elem_type) !== -1 : elem_type === this.type)) &&\n            (!this.id || elem.getAttribute(\"id\") === this.id) &&\n            (!this.from || from === this.from)) {\n                return true;\n        }\n        return false;\n    },\n\n    /** PrivateFunction: run\n     *  Run the callback on a matching stanza.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The DOM element that triggered the\n     *      Strophe.Handler.\n     *\n     *  Returns:\n     *    A boolean indicating if the handler should remain active.\n     */\n    run: function (elem) {\n        var result = null;\n        try {\n            result = this.handler(elem);\n        } catch (e) {\n            Strophe._handleError(e);\n            throw e;\n        }\n        return result;\n    },\n\n    /** PrivateFunction: toString\n     *  Get a String representation of the Strophe.Handler object.\n     *\n     *  Returns:\n     *    A String.\n     */\n    toString: function () {\n        return \"{Handler: \" + this.handler + \"(\" + this.name + \",\" +\n            this.id + \",\" + this.ns + \")}\";\n    }\n};\n\n/** PrivateClass: Strophe.TimedHandler\n *  _Private_ helper class for managing timed handlers.\n *\n *  A Strophe.TimedHandler encapsulates a user provided callback that\n *  should be called after a certain period of time or at regular\n *  intervals.  The return value of the callback determines whether the\n *  Strophe.TimedHandler will continue to fire.\n *\n *  Users will not use Strophe.TimedHandler objects directly, but instead\n *  they will use Strophe.Connection.addTimedHandler() and\n *  Strophe.Connection.deleteTimedHandler().\n */\n\n/** PrivateConstructor: Strophe.TimedHandler\n *  Create and initialize a new Strophe.TimedHandler object.\n *\n *  Parameters:\n *    (Integer) period - The number of milliseconds to wait before the\n *      handler is called.\n *    (Function) handler - The callback to run when the handler fires.  This\n *      function should take no arguments.\n *\n *  Returns:\n *    A new Strophe.TimedHandler object.\n */\nStrophe.TimedHandler = function (period, handler) {\n    this.period = period;\n    this.handler = handler;\n    this.lastCalled = new Date().getTime();\n    this.user = true;\n};\n\nStrophe.TimedHandler.prototype = {\n    /** PrivateFunction: run\n     *  Run the callback for the Strophe.TimedHandler.\n     *\n     *  Returns:\n     *    true if the Strophe.TimedHandler should be called again, and false\n     *      otherwise.\n     */\n    run: function () {\n        this.lastCalled = new Date().getTime();\n        return this.handler();\n    },\n\n    /** PrivateFunction: reset\n     *  Reset the last called time for the Strophe.TimedHandler.\n     */\n    reset: function () {\n        this.lastCalled = new Date().getTime();\n    },\n\n    /** PrivateFunction: toString\n     *  Get a string representation of the Strophe.TimedHandler object.\n     *\n     *  Returns:\n     *    The string representation.\n     */\n    toString: function () {\n        return \"{TimedHandler: \" + this.handler + \"(\" + this.period +\")}\";\n    }\n};\n\n/** Class: Strophe.Connection\n *  XMPP Connection manager.\n *\n *  This class is the main part of Strophe.  It manages a BOSH or websocket\n *  connection to an XMPP server and dispatches events to the user callbacks\n *  as data arrives. It supports SASL PLAIN, SASL DIGEST-MD5, SASL SCRAM-SHA1\n *  and legacy authentication.\n *\n *  After creating a Strophe.Connection object, the user will typically\n *  call connect() with a user supplied callback to handle connection level\n *  events like authentication failure, disconnection, or connection\n *  complete.\n *\n *  The user will also have several event handlers defined by using\n *  addHandler() and addTimedHandler().  These will allow the user code to\n *  respond to interesting stanzas or do something periodically with the\n *  connection. These handlers will be active once authentication is\n *  finished.\n *\n *  To send data to the connection, use send().\n */\n\n/** Constructor: Strophe.Connection\n *  Create and initialize a Strophe.Connection object.\n *\n *  The transport-protocol for this connection will be chosen automatically\n *  based on the given service parameter. URLs starting with \"ws://\" or\n *  \"wss://\" will use WebSockets, URLs starting with \"http://\", \"https://\"\n *  or without a protocol will use BOSH.\n *\n *  To make Strophe connect to the current host you can leave out the protocol\n *  and host part and just pass the path, e.g.\n *\n *  > var conn = new Strophe.Connection(\"/http-bind/\");\n *\n *  Options common to both Websocket and BOSH:\n *  ------------------------------------------\n *\n *  cookies:\n *\n *  The *cookies* option allows you to pass in cookies to be added to the\n *  document. These cookies will then be included in the BOSH XMLHttpRequest\n *  or in the websocket connection.\n *\n *  The passed in value must be a map of cookie names and string values.\n *\n *  > { \"myCookie\": {\n *  >     \"value\": \"1234\",\n *  >     \"domain\": \".example.org\",\n *  >     \"path\": \"/\",\n *  >     \"expires\": expirationDate\n *  >     }\n *  > }\n *\n *  Note that cookies can't be set in this way for other domains (i.e. cross-domain).\n *  Those cookies need to be set under those domains, for example they can be\n *  set server-side by making a XHR call to that domain to ask it to set any\n *  necessary cookies.\n *\n *  mechanisms:\n *\n *  The *mechanisms* option allows you to specify the SASL mechanisms that this\n *  instance of Strophe.Connection (and therefore your XMPP client) will\n *  support.\n *\n *  The value must be an array of objects with Strophe.SASLMechanism\n *  prototypes.\n *\n *  If nothing is specified, then the following mechanisms (and their\n *  priorities) are registered:\n *\n *      OAUTHBEARER - 60\n *      SCRAM-SHA1 - 50\n *      DIGEST-MD5 - 40\n *      PLAIN - 30\n *      ANONYMOUS - 20\n *      EXTERNAL - 10\n *\n *  WebSocket options:\n *  ------------------\n *\n *  If you want to connect to the current host with a WebSocket connection you\n *  can tell Strophe to use WebSockets through a \"protocol\" attribute in the\n *  optional options parameter. Valid values are \"ws\" for WebSocket and \"wss\"\n *  for Secure WebSocket.\n *  So to connect to \"wss://CURRENT_HOSTNAME/xmpp-websocket\" you would call\n *\n *  > var conn = new Strophe.Connection(\"/xmpp-websocket/\", {protocol: \"wss\"});\n *\n *  Note that relative URLs _NOT_ starting with a \"/\" will also include the path\n *  of the current site.\n *\n *  Also because downgrading security is not permitted by browsers, when using\n *  relative URLs both BOSH and WebSocket connections will use their secure\n *  variants if the current connection to the site is also secure (https).\n *\n *  BOSH options:\n *  -------------\n *\n *  By adding \"sync\" to the options, you can control if requests will\n *  be made synchronously or not. The default behaviour is asynchronous.\n *  If you want to make requests synchronous, make \"sync\" evaluate to true.\n *  > var conn = new Strophe.Connection(\"/http-bind/\", {sync: true});\n *\n *  You can also toggle this on an already established connection.\n *  > conn.options.sync = true;\n *\n *  The *customHeaders* option can be used to provide custom HTTP headers to be\n *  included in the XMLHttpRequests made.\n *\n *  The *keepalive* option can be used to instruct Strophe to maintain the\n *  current BOSH session across interruptions such as webpage reloads.\n *\n *  It will do this by caching the sessions tokens in sessionStorage, and when\n *  \"restore\" is called it will check whether there are cached tokens with\n *  which it can resume an existing session.\n *\n *  The *withCredentials* option should receive a Boolean value and is used to\n *  indicate wether cookies should be included in ajax requests (by default\n *  they're not).\n *  Set this value to true if you are connecting to a BOSH service\n *  and for some reason need to send cookies to it.\n *  In order for this to work cross-domain, the server must also enable\n *  credentials by setting the Access-Control-Allow-Credentials response header\n *  to \"true\". For most usecases however this setting should be false (which\n *  is the default).\n *  Additionally, when using Access-Control-Allow-Credentials, the\n *  Access-Control-Allow-Origin header can't be set to the wildcard \"*\", but\n *  instead must be restricted to actual domains.\n *\n *  The *contentType* option can be set to change the default Content-Type\n *  of \"text/xml; charset=utf-8\", which can be useful to reduce the amount of\n *  CORS preflight requests that are sent to the server.\n *\n *  Parameters:\n *    (String) service - The BOSH or WebSocket service URL.\n *    (Object) options - A hash of configuration options\n *\n *  Returns:\n *    A new Strophe.Connection object.\n */\nStrophe.Connection = function (service, options) {\n    // The service URL\n    this.service = service;\n    // Configuration options\n    this.options = options || {};\n    var proto = this.options.protocol || \"\";\n\n    // Select protocal based on service or options\n    if (service.indexOf(\"ws:\") === 0 || service.indexOf(\"wss:\") === 0 ||\n            proto.indexOf(\"ws\") === 0) {\n        this._proto = new Strophe.Websocket(this);\n    } else {\n        this._proto = new Strophe.Bosh(this);\n    }\n\n    /* The connected JID. */\n    this.jid = \"\";\n    /* the JIDs domain */\n    this.domain = null;\n    /* stream:features */\n    this.features = null;\n\n    // SASL\n    this._sasl_data = {};\n    this.do_session = false;\n    this.do_bind = false;\n\n    // handler lists\n    this.timedHandlers = [];\n    this.handlers = [];\n    this.removeTimeds = [];\n    this.removeHandlers = [];\n    this.addTimeds = [];\n    this.addHandlers = [];\n    this.protocolErrorHandlers = {\n        'HTTP': {},\n        'websocket': {}\n    };\n\n    this._idleTimeout = null;\n    this._disconnectTimeout = null;\n\n    this.authenticated = false;\n    this.connected = false;\n    this.disconnecting = false;\n    this.do_authentication = true;\n    this.paused = false;\n    this.restored = false;\n\n    this._data = [];\n    this._uniqueId = 0;\n\n    this._sasl_success_handler = null;\n    this._sasl_failure_handler = null;\n    this._sasl_challenge_handler = null;\n\n    // Max retries before disconnecting\n    this.maxRetries = 5;\n\n    // Call onIdle callback every 1/10th of a second\n    // XXX: setTimeout should be called only with function expressions (23974bc1)\n    this._idleTimeout = setTimeout(function() {\n        this._onIdle();\n    }.bind(this), 100);\n\n    utils.addCookies(this.options.cookies);\n    this.registerSASLMechanisms(this.options.mechanisms);\n\n    // initialize plugins\n    for (var k in Strophe._connectionPlugins) {\n        if (Strophe._connectionPlugins.hasOwnProperty(k)) {\n            var ptype = Strophe._connectionPlugins[k];\n            // jslint complaints about the below line, but this is fine\n            var F = function () {}; // jshint ignore:line\n            F.prototype = ptype;\n            this[k] = new F();\n            this[k].init(this);\n        }\n    }\n};\n\nStrophe.Connection.prototype = {\n    /** Function: reset\n     *  Reset the connection.\n     *\n     *  This function should be called after a connection is disconnected\n     *  before that connection is reused.\n     */\n    reset: function () {\n        this._proto._reset();\n\n        // SASL\n        this.do_session = false;\n        this.do_bind = false;\n\n        // handler lists\n        this.timedHandlers = [];\n        this.handlers = [];\n        this.removeTimeds = [];\n        this.removeHandlers = [];\n        this.addTimeds = [];\n        this.addHandlers = [];\n\n        this.authenticated = false;\n        this.connected = false;\n        this.disconnecting = false;\n        this.restored = false;\n\n        this._data = [];\n        this._requests = [];\n        this._uniqueId = 0;\n    },\n\n    /** Function: pause\n     *  Pause the request manager.\n     *\n     *  This will prevent Strophe from sending any more requests to the\n     *  server.  This is very useful for temporarily pausing\n     *  BOSH-Connections while a lot of send() calls are happening quickly.\n     *  This causes Strophe to send the data in a single request, saving\n     *  many request trips.\n     */\n    pause: function () {\n        this.paused = true;\n    },\n\n    /** Function: resume\n     *  Resume the request manager.\n     *\n     *  This resumes after pause() has been called.\n     */\n    resume: function () {\n        this.paused = false;\n    },\n\n    /** Function: getUniqueId\n     *  Generate a unique ID for use in <iq/> elements.\n     *\n     *  All <iq/> stanzas are required to have unique id attributes.  This\n     *  function makes creating these easy.  Each connection instance has\n     *  a counter which starts from zero, and the value of this counter\n     *  plus a colon followed by the suffix becomes the unique id. If no\n     *  suffix is supplied, the counter is used as the unique id.\n     *\n     *  Suffixes are used to make debugging easier when reading the stream\n     *  data, and their use is recommended.  The counter resets to 0 for\n     *  every new connection for the same reason.  For connections to the\n     *  same server that authenticate the same way, all the ids should be\n     *  the same, which makes it easy to see changes.  This is useful for\n     *  automated testing as well.\n     *\n     *  Parameters:\n     *    (String) suffix - A optional suffix to append to the id.\n     *\n     *  Returns:\n     *    A unique string to be used for the id attribute.\n     */\n    getUniqueId: function(suffix) {\n        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            var r = Math.random() * 16 | 0,\n                v = c === 'x' ? r : r & 0x3 | 0x8;\n            return v.toString(16);\n        });\n        if (typeof(suffix) === \"string\" || typeof(suffix) === \"number\") {\n            return uuid + \":\" + suffix;\n        } else {\n            return uuid + \"\";\n        }\n    },\n\n    /** Function: addProtocolErrorHandler\n     *  Register a handler function for when a protocol (websocker or HTTP)\n     *  error occurs.\n     *\n     *  NOTE: Currently only HTTP errors for BOSH requests are handled.\n     *  Patches that handle websocket errors would be very welcome.\n     *\n     *  Parameters:\n     *    (String) protocol - 'HTTP' or 'websocket'\n     *    (Integer) status_code - Error status code (e.g 500, 400 or 404)\n     *    (Function) callback - Function that will fire on Http error\n     *\n     *  Example:\n     *  function onError(err_code){\n     *    //do stuff\n     *  }\n     *\n     *  var conn = Strophe.connect('http://example.com/http-bind');\n     *  conn.addProtocolErrorHandler('HTTP', 500, onError);\n     *  // Triggers HTTP 500 error and onError handler will be called\n     *  conn.connect('user_jid@incorrect_jabber_host', 'secret', onConnect);\n     */\n    addProtocolErrorHandler: function(protocol, status_code, callback){\n        this.protocolErrorHandlers[protocol][status_code] = callback;\n    },\n\n\n    /** Function: connect\n     *  Starts the connection process.\n     *\n     *  As the connection process proceeds, the user supplied callback will\n     *  be triggered multiple times with status updates.  The callback\n     *  should take two arguments - the status code and the error condition.\n     *\n     *  The status code will be one of the values in the Strophe.Status\n     *  constants.  The error condition will be one of the conditions\n     *  defined in RFC 3920 or the condition 'strophe-parsererror'.\n     *\n     *  The Parameters _wait_, _hold_ and _route_ are optional and only relevant\n     *  for BOSH connections. Please see XEP 124 for a more detailed explanation\n     *  of the optional parameters.\n     *\n     *  Parameters:\n     *    (String) jid - The user's JID.  This may be a bare JID,\n     *      or a full JID.  If a node is not supplied, SASL OAUTHBEARER or\n     *      SASL ANONYMOUS authentication will be attempted (OAUTHBEARER will\n     *      process the provided password value as an access token).\n     *    (String) pass - The user's password.\n     *    (Function) callback - The connect callback function.\n     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n     *      time the server will wait before returning an empty result for\n     *      a request.  The default setting of 60 seconds is recommended.\n     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n     *      number of connections the server will hold at one time.  This\n     *      should almost always be set to 1 (the default).\n     *    (String) route - The optional route value.\n     *    (String) authcid - The optional alternative authentication identity\n     *      (username) if intending to impersonate another user.\n     *      When using the SASL-EXTERNAL authentication mechanism, for example\n     *      with client certificates, then the authcid value is used to\n     *      determine whether an authorization JID (authzid) should be sent to\n     *      the server. The authzid should not be sent to the server if the\n     *      authzid and authcid are the same. So to prevent it from being sent\n     *      (for example when the JID is already contained in the client\n     *      certificate), set authcid to that same JID. See XEP-178 for more\n     *      details.\n     */\n    connect: function (jid, pass, callback, wait, hold, route, authcid) {\n        this.jid = jid;\n        /** Variable: authzid\n         *  Authorization identity.\n         */\n        this.authzid = Strophe.getBareJidFromJid(this.jid);\n\n        /** Variable: authcid\n         *  Authentication identity (User name).\n         */\n        this.authcid = authcid || Strophe.getNodeFromJid(this.jid);\n\n        /** Variable: pass\n         *  Authentication identity (User password).\n         */\n        this.pass = pass;\n\n        /** Variable: servtype\n         *  Digest MD5 compatibility.\n         */\n        this.servtype = \"xmpp\";\n\n        this.connect_callback = callback;\n        this.disconnecting = false;\n        this.connected = false;\n        this.authenticated = false;\n        this.restored = false;\n\n        // parse jid for domain\n        this.domain = Strophe.getDomainFromJid(this.jid);\n\n        this._changeConnectStatus(Strophe.Status.CONNECTING, null);\n\n        this._proto._connect(wait, hold, route);\n    },\n\n    /** Function: attach\n     *  Attach to an already created and authenticated BOSH session.\n     *\n     *  This function is provided to allow Strophe to attach to BOSH\n     *  sessions which have been created externally, perhaps by a Web\n     *  application.  This is often used to support auto-login type features\n     *  without putting user credentials into the page.\n     *\n     *  Parameters:\n     *    (String) jid - The full JID that is bound by the session.\n     *    (String) sid - The SID of the BOSH session.\n     *    (String) rid - The current RID of the BOSH session.  This RID\n     *      will be used by the next request.\n     *    (Function) callback The connect callback function.\n     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n     *      time the server will wait before returning an empty result for\n     *      a request.  The default setting of 60 seconds is recommended.\n     *      Other settings will require tweaks to the Strophe.TIMEOUT value.\n     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n     *      number of connections the server will hold at one time.  This\n     *      should almost always be set to 1 (the default).\n     *    (Integer) wind - The optional HTTBIND window value.  This is the\n     *      allowed range of request ids that are valid.  The default is 5.\n     */\n    attach: function (jid, sid, rid, callback, wait, hold, wind) {\n        if (this._proto instanceof Strophe.Bosh) {\n            this._proto._attach(jid, sid, rid, callback, wait, hold, wind);\n        } else {\n            throw {\n                name: 'StropheSessionError',\n                message: 'The \"attach\" method can only be used with a BOSH connection.'\n            };\n        }\n    },\n\n    /** Function: restore\n     *  Attempt to restore a cached BOSH session.\n     *\n     *  This function is only useful in conjunction with providing the\n     *  \"keepalive\":true option when instantiating a new Strophe.Connection.\n     *\n     *  When \"keepalive\" is set to true, Strophe will cache the BOSH tokens\n     *  RID (Request ID) and SID (Session ID) and then when this function is\n     *  called, it will attempt to restore the session from those cached\n     *  tokens.\n     *\n     *  This function must therefore be called instead of connect or attach.\n     *\n     *  For an example on how to use it, please see examples/restore.js\n     *\n     *  Parameters:\n     *    (String) jid - The user's JID.  This may be a bare JID or a full JID.\n     *    (Function) callback - The connect callback function.\n     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n     *      time the server will wait before returning an empty result for\n     *      a request.  The default setting of 60 seconds is recommended.\n     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n     *      number of connections the server will hold at one time.  This\n     *      should almost always be set to 1 (the default).\n     *    (Integer) wind - The optional HTTBIND window value.  This is the\n     *      allowed range of request ids that are valid.  The default is 5.\n     */\n    restore: function (jid, callback, wait, hold, wind) {\n        if (this._sessionCachingSupported()) {\n            this._proto._restore(jid, callback, wait, hold, wind);\n        } else {\n            throw {\n                name: 'StropheSessionError',\n                message: 'The \"restore\" method can only be used with a BOSH connection.'\n            };\n        }\n    },\n\n    /** PrivateFunction: _sessionCachingSupported\n     * Checks whether sessionStorage and JSON are supported and whether we're\n     * using BOSH.\n     */\n    _sessionCachingSupported: function () {\n        if (this._proto instanceof Strophe.Bosh) {\n            if (!JSON) { return false; }\n            try {\n                sessionStorage.setItem('_strophe_', '_strophe_');\n                sessionStorage.removeItem('_strophe_');\n            } catch (e) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    },\n\n    /** Function: xmlInput\n     *  User overrideable function that receives XML data coming into the\n     *  connection.\n     *\n     *  The default function does nothing.  User code can override this with\n     *  > Strophe.Connection.xmlInput = function (elem) {\n     *  >   (user code)\n     *  > };\n     *\n     *  Due to limitations of current Browsers' XML-Parsers the opening and closing\n     *  <stream> tag for WebSocket-Connoctions will be passed as selfclosing here.\n     *\n     *  BOSH-Connections will have all stanzas wrapped in a <body> tag. See\n     *  <Strophe.Bosh.strip> if you want to strip this tag.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The XML data received by the connection.\n     */\n    /* jshint unused:false */\n    xmlInput: function (elem) {\n        return;\n    },\n    /* jshint unused:true */\n\n    /** Function: xmlOutput\n     *  User overrideable function that receives XML data sent to the\n     *  connection.\n     *\n     *  The default function does nothing.  User code can override this with\n     *  > Strophe.Connection.xmlOutput = function (elem) {\n     *  >   (user code)\n     *  > };\n     *\n     *  Due to limitations of current Browsers' XML-Parsers the opening and closing\n     *  <stream> tag for WebSocket-Connoctions will be passed as selfclosing here.\n     *\n     *  BOSH-Connections will have all stanzas wrapped in a <body> tag. See\n     *  <Strophe.Bosh.strip> if you want to strip this tag.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The XMLdata sent by the connection.\n     */\n    /* jshint unused:false */\n    xmlOutput: function (elem) {\n        return;\n    },\n    /* jshint unused:true */\n\n    /** Function: rawInput\n     *  User overrideable function that receives raw data coming into the\n     *  connection.\n     *\n     *  The default function does nothing.  User code can override this with\n     *  > Strophe.Connection.rawInput = function (data) {\n     *  >   (user code)\n     *  > };\n     *\n     *  Parameters:\n     *    (String) data - The data received by the connection.\n     */\n    /* jshint unused:false */\n    rawInput: function (data) {\n        return;\n    },\n    /* jshint unused:true */\n\n    /** Function: rawOutput\n     *  User overrideable function that receives raw data sent to the\n     *  connection.\n     *\n     *  The default function does nothing.  User code can override this with\n     *  > Strophe.Connection.rawOutput = function (data) {\n     *  >   (user code)\n     *  > };\n     *\n     *  Parameters:\n     *    (String) data - The data sent by the connection.\n     */\n    /* jshint unused:false */\n    rawOutput: function (data) {\n        return;\n    },\n    /* jshint unused:true */\n\n    /** Function: nextValidRid\n     *  User overrideable function that receives the new valid rid.\n     *\n     *  The default function does nothing. User code can override this with\n     *  > Strophe.Connection.nextValidRid = function (rid) {\n     *  >    (user code)\n     *  > };\n     *\n     *  Parameters:\n     *    (Number) rid - The next valid rid\n     */\n    /* jshint unused:false */\n    nextValidRid: function (rid) {\n        return;\n    },\n    /* jshint unused:true */\n\n    /** Function: send\n     *  Send a stanza.\n     *\n     *  This function is called to push data onto the send queue to\n     *  go out over the wire.  Whenever a request is sent to the BOSH\n     *  server, all pending data is sent and the queue is flushed.\n     *\n     *  Parameters:\n     *    (XMLElement |\n     *     [XMLElement] |\n     *     Strophe.Builder) elem - The stanza to send.\n     */\n    send: function (elem) {\n        if (elem === null) { return ; }\n        if (typeof(elem.sort) === \"function\") {\n            for (var i = 0; i < elem.length; i++) {\n                this._queueData(elem[i]);\n            }\n        } else if (typeof(elem.tree) === \"function\") {\n            this._queueData(elem.tree());\n        } else {\n            this._queueData(elem);\n        }\n\n        this._proto._send();\n    },\n\n    /** Function: flush\n     *  Immediately send any pending outgoing data.\n     *\n     *  Normally send() queues outgoing data until the next idle period\n     *  (100ms), which optimizes network use in the common cases when\n     *  several send()s are called in succession. flush() can be used to\n     *  immediately send all pending data.\n     */\n    flush: function () {\n        // cancel the pending idle period and run the idle function\n        // immediately\n        clearTimeout(this._idleTimeout);\n        this._onIdle();\n    },\n\n    /** Function: sendPresence\n     *  Helper function to send presence stanzas. The main benefit is for\n     *  sending presence stanzas for which you expect a responding presence\n     *  stanza with the same id (for example when leaving a chat room).\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The stanza to send.\n     *    (Function) callback - The callback function for a successful request.\n     *    (Function) errback - The callback function for a failed or timed\n     *      out request.  On timeout, the stanza will be null.\n     *    (Integer) timeout - The time specified in milliseconds for a\n     *      timeout to occur.\n     *\n     *  Returns:\n     *    The id used to send the presence.\n     */\n    sendPresence: function(elem, callback, errback, timeout) {\n        var timeoutHandler = null;\n        var that = this;\n        if (typeof(elem.tree) === \"function\") {\n            elem = elem.tree();\n        }\n        var id = elem.getAttribute('id');\n        if (!id) { // inject id if not found\n            id = this.getUniqueId(\"sendPresence\");\n            elem.setAttribute(\"id\", id);\n        }\n\n        if (typeof callback === \"function\" || typeof errback === \"function\") {\n            var handler = this.addHandler(function (stanza) {\n                // remove timeout handler if there is one\n                if (timeoutHandler) {\n                    that.deleteTimedHandler(timeoutHandler);\n                }\n                var type = stanza.getAttribute('type');\n                if (type === 'error') {\n                    if (errback) {\n                        errback(stanza);\n                    }\n                } else if (callback) {\n                    callback(stanza);\n                }\n            }, null, 'presence', null, id);\n\n            // if timeout specified, set up a timeout handler.\n            if (timeout) {\n                timeoutHandler = this.addTimedHandler(timeout, function () {\n                    // get rid of normal handler\n                    that.deleteHandler(handler);\n                    // call errback on timeout with null stanza\n                    if (errback) {\n                        errback(null);\n                    }\n                    return false;\n                });\n            }\n        }\n        this.send(elem);\n        return id;\n    },\n\n    /** Function: sendIQ\n     *  Helper function to send IQ stanzas.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The stanza to send.\n     *    (Function) callback - The callback function for a successful request.\n     *    (Function) errback - The callback function for a failed or timed\n     *      out request.  On timeout, the stanza will be null.\n     *    (Integer) timeout - The time specified in milliseconds for a\n     *      timeout to occur.\n     *\n     *  Returns:\n     *    The id used to send the IQ.\n    */\n    sendIQ: function(elem, callback, errback, timeout) {\n        var timeoutHandler = null;\n        var that = this;\n        if (typeof(elem.tree) === \"function\") {\n            elem = elem.tree();\n        }\n        var id = elem.getAttribute('id');\n        if (!id) { // inject id if not found\n            id = this.getUniqueId(\"sendIQ\");\n            elem.setAttribute(\"id\", id);\n        }\n\n        if (typeof callback === \"function\" || typeof errback === \"function\") {\n            var handler = this.addHandler(function (stanza) {\n                // remove timeout handler if there is one\n                if (timeoutHandler) {\n                    that.deleteTimedHandler(timeoutHandler);\n                }\n                var iqtype = stanza.getAttribute('type');\n                if (iqtype === 'result') {\n                    if (callback) {\n                        callback(stanza);\n                    }\n                } else if (iqtype === 'error') {\n                    if (errback) {\n                        errback(stanza);\n                    }\n                } else {\n                    throw {\n                        name: \"StropheError\",\n                        message: \"Got bad IQ type of \" + iqtype\n                    };\n                }\n            }, null, 'iq', ['error', 'result'], id);\n\n            // if timeout specified, set up a timeout handler.\n            if (timeout) {\n                timeoutHandler = this.addTimedHandler(timeout, function () {\n                    // get rid of normal handler\n                    that.deleteHandler(handler);\n                    // call errback on timeout with null stanza\n                    if (errback) {\n                        errback(null);\n                    }\n                    return false;\n                });\n            }\n        }\n        this.send(elem);\n        return id;\n    },\n\n    /** PrivateFunction: _queueData\n     *  Queue outgoing data for later sending.  Also ensures that the data\n     *  is a DOMElement.\n     */\n    _queueData: function (element) {\n        if (element === null ||\n            !element.tagName ||\n            !element.childNodes) {\n            throw {\n                name: \"StropheError\",\n                message: \"Cannot queue non-DOMElement.\"\n            };\n        }\n        this._data.push(element);\n    },\n\n    /** PrivateFunction: _sendRestart\n     *  Send an xmpp:restart stanza.\n     */\n    _sendRestart: function () {\n        this._data.push(\"restart\");\n        this._proto._sendRestart();\n        // XXX: setTimeout should be called only with function expressions (23974bc1)\n        this._idleTimeout = setTimeout(function() {\n            this._onIdle();\n        }.bind(this), 100);\n    },\n\n    /** Function: addTimedHandler\n     *  Add a timed handler to the connection.\n     *\n     *  This function adds a timed handler.  The provided handler will\n     *  be called every period milliseconds until it returns false,\n     *  the connection is terminated, or the handler is removed.  Handlers\n     *  that wish to continue being invoked should return true.\n     *\n     *  Because of method binding it is necessary to save the result of\n     *  this function if you wish to remove a handler with\n     *  deleteTimedHandler().\n     *\n     *  Note that user handlers are not active until authentication is\n     *  successful.\n     *\n     *  Parameters:\n     *    (Integer) period - The period of the handler.\n     *    (Function) handler - The callback function.\n     *\n     *  Returns:\n     *    A reference to the handler that can be used to remove it.\n     */\n    addTimedHandler: function (period, handler) {\n        var thand = new Strophe.TimedHandler(period, handler);\n        this.addTimeds.push(thand);\n        return thand;\n    },\n\n    /** Function: deleteTimedHandler\n     *  Delete a timed handler for a connection.\n     *\n     *  This function removes a timed handler from the connection.  The\n     *  handRef parameter is *not* the function passed to addTimedHandler(),\n     *  but is the reference returned from addTimedHandler().\n     *\n     *  Parameters:\n     *    (Strophe.TimedHandler) handRef - The handler reference.\n     */\n    deleteTimedHandler: function (handRef) {\n        // this must be done in the Idle loop so that we don't change\n        // the handlers during iteration\n        this.removeTimeds.push(handRef);\n    },\n\n    /** Function: addHandler\n     *  Add a stanza handler for the connection.\n     *\n     *  This function adds a stanza handler to the connection.  The\n     *  handler callback will be called for any stanza that matches\n     *  the parameters.  Note that if multiple parameters are supplied,\n     *  they must all match for the handler to be invoked.\n     *\n     *  The handler will receive the stanza that triggered it as its argument.\n     *  *The handler should return true if it is to be invoked again;\n     *  returning false will remove the handler after it returns.*\n     *\n     *  As a convenience, the ns parameters applies to the top level element\n     *  and also any of its immediate children.  This is primarily to make\n     *  matching /iq/query elements easy.\n     *\n     *  Options\n     *  ~~~~~~~\n     *  With the options argument, you can specify boolean flags that affect how\n     *  matches are being done.\n     *\n     *  Currently two flags exist:\n     *\n     *  - matchBareFromJid:\n     *      When set to true, the from parameter and the\n     *      from attribute on the stanza will be matched as bare JIDs instead\n     *      of full JIDs. To use this, pass {matchBareFromJid: true} as the\n     *      value of options. The default value for matchBareFromJid is false.\n     *\n     *  - ignoreNamespaceFragment:\n     *      When set to true, a fragment specified on the stanza's namespace\n     *      URL will be ignored when it's matched with the one configured for\n     *      the handler.\n     *\n     *      This means that if you register like this:\n     *      >   connection.addHandler(\n     *      >       handler,\n     *      >       'http://jabber.org/protocol/muc',\n     *      >       null, null, null, null,\n     *      >       {'ignoreNamespaceFragment': true}\n     *      >   );\n     *\n     *      Then a stanza with XML namespace of\n     *      'http://jabber.org/protocol/muc#user' will also be matched. If\n     *      'ignoreNamespaceFragment' is false, then only stanzas with\n     *      'http://jabber.org/protocol/muc' will be matched.\n     *\n     *  Deleting the handler\n     *  ~~~~~~~~~~~~~~~~~~~~\n     *  The return value should be saved if you wish to remove the handler\n     *  with deleteHandler().\n     *\n     *  Parameters:\n     *    (Function) handler - The user callback.\n     *    (String) ns - The namespace to match.\n     *    (String) name - The stanza name to match.\n     *    (String|Array) type - The stanza type (or types if an array) to match.\n     *    (String) id - The stanza id attribute to match.\n     *    (String) from - The stanza from attribute to match.\n     *    (String) options - The handler options\n     *\n     *  Returns:\n     *    A reference to the handler that can be used to remove it.\n     */\n    addHandler: function (handler, ns, name, type, id, from, options) {\n        var hand = new Strophe.Handler(handler, ns, name, type, id, from, options);\n        this.addHandlers.push(hand);\n        return hand;\n    },\n\n    /** Function: deleteHandler\n     *  Delete a stanza handler for a connection.\n     *\n     *  This function removes a stanza handler from the connection.  The\n     *  handRef parameter is *not* the function passed to addHandler(),\n     *  but is the reference returned from addHandler().\n     *\n     *  Parameters:\n     *    (Strophe.Handler) handRef - The handler reference.\n     */\n    deleteHandler: function (handRef) {\n        // this must be done in the Idle loop so that we don't change\n        // the handlers during iteration\n        this.removeHandlers.push(handRef);\n        // If a handler is being deleted while it is being added,\n        // prevent it from getting added\n        var i = this.addHandlers.indexOf(handRef);\n        if (i >= 0) {\n            this.addHandlers.splice(i, 1);\n        }\n    },\n\n    /** Function: registerSASLMechanisms\n     *\n     * Register the SASL mechanisms which will be supported by this instance of\n     * Strophe.Connection (i.e. which this XMPP client will support).\n     *\n     *  Parameters:\n     *    (Array) mechanisms - Array of objects with Strophe.SASLMechanism prototypes\n     *\n     */\n    registerSASLMechanisms: function (mechanisms) {\n        this.mechanisms = {};\n        mechanisms = mechanisms || [\n            Strophe.SASLAnonymous,\n            Strophe.SASLExternal,\n            Strophe.SASLMD5,\n            Strophe.SASLOAuthBearer,\n            Strophe.SASLXOAuth2,\n            Strophe.SASLPlain,\n            Strophe.SASLSHA1\n        ];\n        mechanisms.forEach(this.registerSASLMechanism.bind(this));\n    },\n\n    /** Function: registerSASLMechanism\n     *\n     * Register a single SASL mechanism, to be supported by this client.\n     *\n     *  Parameters:\n     *    (Object) mechanism - Object with a Strophe.SASLMechanism prototype\n     *\n     */\n    registerSASLMechanism: function (mechanism) {\n        this.mechanisms[mechanism.prototype.name] = mechanism;\n    },\n\n    /** Function: disconnect\n     *  Start the graceful disconnection process.\n     *\n     *  This function starts the disconnection process.  This process starts\n     *  by sending unavailable presence and sending BOSH body of type\n     *  terminate.  A timeout handler makes sure that disconnection happens\n     *  even if the BOSH server does not respond.\n     *  If the Connection object isn't connected, at least tries to abort all pending requests\n     *  so the connection object won't generate successful requests (which were already opened).\n     *\n     *  The user supplied connection callback will be notified of the\n     *  progress as this process happens.\n     *\n     *  Parameters:\n     *    (String) reason - The reason the disconnect is occuring.\n     */\n    disconnect: function (reason) {\n        this._changeConnectStatus(Strophe.Status.DISCONNECTING, reason);\n\n        Strophe.info(\"Disconnect was called because: \" + reason);\n        if (this.connected) {\n            var pres = false;\n            this.disconnecting = true;\n            if (this.authenticated) {\n                pres = $pres({\n                    xmlns: Strophe.NS.CLIENT,\n                    type: 'unavailable'\n                });\n            }\n            // setup timeout handler\n            this._disconnectTimeout = this._addSysTimedHandler(\n                3000, this._onDisconnectTimeout.bind(this));\n            this._proto._disconnect(pres);\n        } else {\n            Strophe.info(\"Disconnect was called before Strophe connected to the server\");\n            this._proto._abortAllRequests();\n            this._doDisconnect();\n        }\n    },\n\n    /** PrivateFunction: _changeConnectStatus\n     *  _Private_ helper function that makes sure plugins and the user's\n     *  callback are notified of connection status changes.\n     *\n     *  Parameters:\n     *    (Integer) status - the new connection status, one of the values\n     *      in Strophe.Status\n     *    (String) condition - the error condition or null\n     *    (XMLElement) elem - The triggering stanza.\n     */\n    _changeConnectStatus: function (status, condition, elem) {\n        // notify all plugins listening for status changes\n        for (var k in Strophe._connectionPlugins) {\n            if (Strophe._connectionPlugins.hasOwnProperty(k)) {\n                var plugin = this[k];\n                if (plugin.statusChanged) {\n                    try {\n                        plugin.statusChanged(status, condition);\n                    } catch (err) {\n                        Strophe.error(\"\" + k + \" plugin caused an exception \" +\n                                      \"changing status: \" + err);\n                    }\n                }\n            }\n        }\n\n        // notify the user's callback\n        if (this.connect_callback) {\n            try {\n                this.connect_callback(status, condition, elem);\n            } catch (e) {\n                Strophe._handleError(e);\n                Strophe.error(\n                    \"User connection callback caused an \"+\"exception: \"+e);\n            }\n        }\n    },\n\n    /** PrivateFunction: _doDisconnect\n     *  _Private_ function to disconnect.\n     *\n     *  This is the last piece of the disconnection logic.  This resets the\n     *  connection and alerts the user's connection callback.\n     */\n    _doDisconnect: function (condition) {\n        if (typeof this._idleTimeout === \"number\") {\n            clearTimeout(this._idleTimeout);\n        }\n\n        // Cancel Disconnect Timeout\n        if (this._disconnectTimeout !== null) {\n            this.deleteTimedHandler(this._disconnectTimeout);\n            this._disconnectTimeout = null;\n        }\n\n        Strophe.info(\"_doDisconnect was called\");\n        this._proto._doDisconnect();\n\n        this.authenticated = false;\n        this.disconnecting = false;\n        this.restored = false;\n\n        // delete handlers\n        this.handlers = [];\n        this.timedHandlers = [];\n        this.removeTimeds = [];\n        this.removeHandlers = [];\n        this.addTimeds = [];\n        this.addHandlers = [];\n\n        // tell the parent we disconnected\n        this._changeConnectStatus(Strophe.Status.DISCONNECTED, condition);\n        this.connected = false;\n    },\n\n    /** PrivateFunction: _dataRecv\n     *  _Private_ handler to processes incoming data from the the connection.\n     *\n     *  Except for _connect_cb handling the initial connection request,\n     *  this function handles the incoming data for all requests.  This\n     *  function also fires stanza handlers that match each incoming\n     *  stanza.\n     *\n     *  Parameters:\n     *    (Strophe.Request) req - The request that has data ready.\n     *    (string) req - The stanza a raw string (optiona).\n     */\n    _dataRecv: function (req, raw) {\n        Strophe.info(\"_dataRecv called\");\n        var elem = this._proto._reqToData(req);\n        if (elem === null) { return; }\n\n        if (this.xmlInput !== Strophe.Connection.prototype.xmlInput) {\n            if (elem.nodeName === this._proto.strip && elem.childNodes.length) {\n                this.xmlInput(elem.childNodes[0]);\n            } else {\n                this.xmlInput(elem);\n            }\n        }\n        if (this.rawInput !== Strophe.Connection.prototype.rawInput) {\n            if (raw) {\n                this.rawInput(raw);\n            } else {\n                this.rawInput(Strophe.serialize(elem));\n            }\n        }\n\n        // remove handlers scheduled for deletion\n        var i, hand;\n        while (this.removeHandlers.length > 0) {\n            hand = this.removeHandlers.pop();\n            i = this.handlers.indexOf(hand);\n            if (i >= 0) {\n                this.handlers.splice(i, 1);\n            }\n        }\n\n        // add handlers scheduled for addition\n        while (this.addHandlers.length > 0) {\n            this.handlers.push(this.addHandlers.pop());\n        }\n\n        // handle graceful disconnect\n        if (this.disconnecting && this._proto._emptyQueue()) {\n            this._doDisconnect();\n            return;\n        }\n\n        var type = elem.getAttribute(\"type\");\n        var cond, conflict;\n        if (type !== null && type === \"terminate\") {\n            // Don't process stanzas that come in after disconnect\n            if (this.disconnecting) {\n                return;\n            }\n\n            // an error occurred\n            cond = elem.getAttribute(\"condition\");\n            conflict = elem.getElementsByTagName(\"conflict\");\n            if (cond !== null) {\n                if (cond === \"remote-stream-error\" && conflict.length > 0) {\n                    cond = \"conflict\";\n                }\n                this._changeConnectStatus(Strophe.Status.CONNFAIL, cond);\n            } else {\n                this._changeConnectStatus(\n                    Strophe.Status.CONNFAIL,\n                    Strophe.ErrorCondition.UNKOWN_REASON\n                );\n            }\n            this._doDisconnect(cond);\n            return;\n        }\n\n        // send each incoming stanza through the handler chain\n        var that = this;\n        Strophe.forEachChild(elem, null, function (child) {\n            var i, newList;\n            // process handlers\n            newList = that.handlers;\n            that.handlers = [];\n            for (i = 0; i < newList.length; i++) {\n                var hand = newList[i];\n                // encapsulate 'handler.run' not to lose the whole handler list if\n                // one of the handlers throws an exception\n                try {\n                    if (hand.isMatch(child) &&\n                        (that.authenticated || !hand.user)) {\n                        if (hand.run(child)) {\n                            that.handlers.push(hand);\n                        }\n                    } else {\n                        that.handlers.push(hand);\n                    }\n                } catch(e) {\n                    // if the handler throws an exception, we consider it as false\n                    Strophe.warn('Removing Strophe handlers due to uncaught exception: '+e.message);\n                }\n            }\n        });\n    },\n\n\n    /** Attribute: mechanisms\n     *  SASL Mechanisms available for Connection.\n     */\n    mechanisms: {},\n\n    /** PrivateFunction: _no_auth_received\n     *\n     * Called on stream start/restart when no stream:features\n     * has been received or when no viable authentication mechanism is offered.\n     *\n     * Sends a blank poll request.\n     */\n    _no_auth_received: function (_callback) {\n        var error_msg =  \"Server did not offer a supported authentication mechanism\";\n        Strophe.error(error_msg);\n        this._changeConnectStatus(\n            Strophe.Status.CONNFAIL,\n            Strophe.ErrorCondition.NO_AUTH_MECH\n        );\n        if (_callback) {\n            _callback.call(this);\n        }\n        this._doDisconnect();\n    },\n\n    /** PrivateFunction: _connect_cb\n     *  _Private_ handler for initial connection request.\n     *\n     *  This handler is used to process the initial connection request\n     *  response from the BOSH server. It is used to set up authentication\n     *  handlers and start the authentication process.\n     *\n     *  SASL authentication will be attempted if available, otherwise\n     *  the code will fall back to legacy authentication.\n     *\n     *  Parameters:\n     *    (Strophe.Request) req - The current request.\n     *    (Function) _callback - low level (xmpp) connect callback function.\n     *      Useful for plugins with their own xmpp connect callback (when they\n     *      want to do something special).\n     */\n    _connect_cb: function (req, _callback, raw) {\n        Strophe.info(\"_connect_cb was called\");\n        this.connected = true;\n\n        var bodyWrap;\n        try {\n            bodyWrap = this._proto._reqToData(req);\n        } catch (e) {\n            if (e !== \"badformat\") { throw e; }\n            this._changeConnectStatus(\n                Strophe.Status.CONNFAIL,\n                Strophe.ErrorCondition.BAD_FORMAT\n            );\n            this._doDisconnect(Strophe.ErrorCondition.BAD_FORMAT);\n        }\n        if (!bodyWrap) { return; }\n\n        if (this.xmlInput !== Strophe.Connection.prototype.xmlInput) {\n            if (bodyWrap.nodeName === this._proto.strip && bodyWrap.childNodes.length) {\n                this.xmlInput(bodyWrap.childNodes[0]);\n            } else {\n                this.xmlInput(bodyWrap);\n            }\n        }\n        if (this.rawInput !== Strophe.Connection.prototype.rawInput) {\n            if (raw) {\n                this.rawInput(raw);\n            } else {\n                this.rawInput(Strophe.serialize(bodyWrap));\n            }\n        }\n\n        var conncheck = this._proto._connect_cb(bodyWrap);\n        if (conncheck === Strophe.Status.CONNFAIL) {\n            return;\n        }\n\n        // Check for the stream:features tag\n        var hasFeatures;\n        if (bodyWrap.getElementsByTagNameNS) {\n            hasFeatures = bodyWrap.getElementsByTagNameNS(Strophe.NS.STREAM, \"features\").length > 0;\n        } else {\n            hasFeatures = bodyWrap.getElementsByTagName(\"stream:features\").length > 0 ||\n                            bodyWrap.getElementsByTagName(\"features\").length > 0;\n        }\n        if (!hasFeatures) {\n            this._no_auth_received(_callback);\n            return;\n        }\n\n        var matched = [], i, mech;\n        var mechanisms = bodyWrap.getElementsByTagName(\"mechanism\");\n        if (mechanisms.length > 0) {\n            for (i = 0; i < mechanisms.length; i++) {\n                mech = Strophe.getText(mechanisms[i]);\n                if (this.mechanisms[mech]) matched.push(this.mechanisms[mech]);\n            }\n        }\n        if (matched.length === 0) {\n            if (bodyWrap.getElementsByTagName(\"auth\").length === 0) {\n                // There are no matching SASL mechanisms and also no legacy\n                // auth available.\n                this._no_auth_received(_callback);\n                return;\n            }\n        }\n        if (this.do_authentication !== false) {\n            this.authenticate(matched);\n        }\n    },\n\n    /** Function: sortMechanismsByPriority\n     *\n     *  Sorts an array of objects with prototype SASLMechanism according to\n     *  their priorities.\n     *\n     *  Parameters:\n     *    (Array) mechanisms - Array of SASL mechanisms.\n     *\n     */\n    sortMechanismsByPriority: function (mechanisms) {\n        // Sorting mechanisms according to priority.\n        var i, j, higher, swap;\n        for (i = 0; i < mechanisms.length - 1; ++i) {\n            higher = i;\n            for (j = i + 1; j < mechanisms.length; ++j) {\n                if (mechanisms[j].prototype.priority > mechanisms[higher].prototype.priority) {\n                    higher = j;\n                }\n            }\n            if (higher !== i) {\n                swap = mechanisms[i];\n                mechanisms[i] = mechanisms[higher];\n                mechanisms[higher] = swap;\n            }\n        }\n        return mechanisms;\n    },\n\n    /** PrivateFunction: _attemptSASLAuth\n     *\n     *  Iterate through an array of SASL mechanisms and attempt authentication\n     *  with the highest priority (enabled) mechanism.\n     *\n     *  Parameters:\n     *    (Array) mechanisms - Array of SASL mechanisms.\n     *\n     *  Returns:\n     *    (Boolean) mechanism_found - true or false, depending on whether a\n     *          valid SASL mechanism was found with which authentication could be\n     *          started.\n     */\n    _attemptSASLAuth: function (mechanisms) {\n        mechanisms = this.sortMechanismsByPriority(mechanisms || []);\n        var i = 0, mechanism_found = false;\n        for (i = 0; i < mechanisms.length; ++i) {\n            if (!mechanisms[i].prototype.test(this)) {\n                continue;\n            }\n            this._sasl_success_handler = this._addSysHandler(\n                this._sasl_success_cb.bind(this), null,\n                \"success\", null, null);\n            this._sasl_failure_handler = this._addSysHandler(\n                this._sasl_failure_cb.bind(this), null,\n                \"failure\", null, null);\n            this._sasl_challenge_handler = this._addSysHandler(\n                this._sasl_challenge_cb.bind(this), null,\n                \"challenge\", null, null);\n\n            this._sasl_mechanism = new mechanisms[i]();\n            this._sasl_mechanism.onStart(this);\n\n            var request_auth_exchange = $build(\"auth\", {\n                xmlns: Strophe.NS.SASL,\n                mechanism: this._sasl_mechanism.name\n            });\n            if (this._sasl_mechanism.isClientFirst) {\n                var response = this._sasl_mechanism.onChallenge(this, null);\n                request_auth_exchange.t(btoa(response));\n            }\n            this.send(request_auth_exchange.tree());\n            mechanism_found = true;\n            break;\n        }\n        return mechanism_found;\n    },\n\n    /** PrivateFunction: _attemptLegacyAuth\n     *\n     *  Attempt legacy (i.e. non-SASL) authentication.\n     *\n     */\n    _attemptLegacyAuth: function () {\n        if (Strophe.getNodeFromJid(this.jid) === null) {\n            // we don't have a node, which is required for non-anonymous\n            // client connections\n            this._changeConnectStatus(\n                Strophe.Status.CONNFAIL,\n                Strophe.ErrorCondition.MISSING_JID_NODE\n            );\n            this.disconnect(Strophe.ErrorCondition.MISSING_JID_NODE);\n        } else {\n            // Fall back to legacy authentication\n            this._changeConnectStatus(Strophe.Status.AUTHENTICATING, null);\n            this._addSysHandler(\n                this._auth1_cb.bind(this),\n                null, null, null, \"_auth_1\"\n            );\n            this.send($iq({\n                    'type': \"get\",\n                    'to': this.domain,\n                    'id': \"_auth_1\"\n                }).c(\"query\", {xmlns: Strophe.NS.AUTH})\n                .c(\"username\", {}).t(Strophe.getNodeFromJid(this.jid))\n                .tree());\n        }\n    },\n\n    /** Function: authenticate\n     * Set up authentication\n     *\n     *  Continues the initial connection request by setting up authentication\n     *  handlers and starting the authentication process.\n     *\n     *  SASL authentication will be attempted if available, otherwise\n     *  the code will fall back to legacy authentication.\n     *\n     *  Parameters:\n     *    (Array) matched - Array of SASL mechanisms supported.\n     *\n     */\n    authenticate: function (matched) {\n        if (!this._attemptSASLAuth(matched)) {\n            this._attemptLegacyAuth();\n        }\n    },\n\n    /** PrivateFunction: _sasl_challenge_cb\n     *  _Private_ handler for the SASL challenge\n     *\n     */\n    _sasl_challenge_cb: function(elem) {\n      var challenge = atob(Strophe.getText(elem));\n      var response = this._sasl_mechanism.onChallenge(this, challenge);\n      var stanza = $build('response', {\n          'xmlns': Strophe.NS.SASL\n      });\n      if (response !== \"\") {\n        stanza.t(btoa(response));\n      }\n      this.send(stanza.tree());\n      return true;\n    },\n\n    /** PrivateFunction: _auth1_cb\n     *  _Private_ handler for legacy authentication.\n     *\n     *  This handler is called in response to the initial <iq type='get'/>\n     *  for legacy authentication.  It builds an authentication <iq/> and\n     *  sends it, creating a handler (calling back to _auth2_cb()) to\n     *  handle the result\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The stanza that triggered the callback.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    /* jshint unused:false */\n    _auth1_cb: function (elem) {\n        // build plaintext auth iq\n        var iq = $iq({type: \"set\", id: \"_auth_2\"})\n            .c('query', {xmlns: Strophe.NS.AUTH})\n            .c('username', {}).t(Strophe.getNodeFromJid(this.jid))\n            .up()\n            .c('password').t(this.pass);\n\n        if (!Strophe.getResourceFromJid(this.jid)) {\n            // since the user has not supplied a resource, we pick\n            // a default one here.  unlike other auth methods, the server\n            // cannot do this for us.\n            this.jid = Strophe.getBareJidFromJid(this.jid) + '/strophe';\n        }\n        iq.up().c('resource', {}).t(Strophe.getResourceFromJid(this.jid));\n\n        this._addSysHandler(this._auth2_cb.bind(this), null,\n                            null, null, \"_auth_2\");\n        this.send(iq.tree());\n        return false;\n    },\n    /* jshint unused:true */\n\n    /** PrivateFunction: _sasl_success_cb\n     *  _Private_ handler for succesful SASL authentication.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The matching stanza.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _sasl_success_cb: function (elem) {\n        if (this._sasl_data[\"server-signature\"]) {\n            var serverSignature;\n            var success = atob(Strophe.getText(elem));\n            var attribMatch = /([a-z]+)=([^,]+)(,|$)/;\n            var matches = success.match(attribMatch);\n            if (matches[1] === \"v\") {\n                serverSignature = matches[2];\n            }\n\n            if (serverSignature !== this._sasl_data[\"server-signature\"]) {\n              // remove old handlers\n              this.deleteHandler(this._sasl_failure_handler);\n              this._sasl_failure_handler = null;\n              if (this._sasl_challenge_handler) {\n                this.deleteHandler(this._sasl_challenge_handler);\n                this._sasl_challenge_handler = null;\n              }\n\n              this._sasl_data = {};\n              return this._sasl_failure_cb(null);\n            }\n        }\n        Strophe.info(\"SASL authentication succeeded.\");\n\n        if (this._sasl_mechanism) {\n          this._sasl_mechanism.onSuccess();\n        }\n\n        // remove old handlers\n        this.deleteHandler(this._sasl_failure_handler);\n        this._sasl_failure_handler = null;\n        if (this._sasl_challenge_handler) {\n            this.deleteHandler(this._sasl_challenge_handler);\n            this._sasl_challenge_handler = null;\n        }\n\n        var streamfeature_handlers = [];\n        var wrapper = function(handlers, elem) {\n            while (handlers.length) {\n                this.deleteHandler(handlers.pop());\n            }\n            this._sasl_auth1_cb.bind(this)(elem);\n            return false;\n        };\n        streamfeature_handlers.push(this._addSysHandler(function(elem) {\n            wrapper.bind(this)(streamfeature_handlers, elem);\n        }.bind(this), null, \"stream:features\", null, null));\n        streamfeature_handlers.push(this._addSysHandler(function(elem) {\n            wrapper.bind(this)(streamfeature_handlers, elem);\n        }.bind(this), Strophe.NS.STREAM, \"features\", null, null));\n\n        // we must send an xmpp:restart now\n        this._sendRestart();\n\n        return false;\n    },\n\n    /** PrivateFunction: _sasl_auth1_cb\n     *  _Private_ handler to start stream binding.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The matching stanza.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _sasl_auth1_cb: function (elem) {\n        // save stream:features for future usage\n        this.features = elem;\n        var i, child;\n        for (i = 0; i < elem.childNodes.length; i++) {\n            child = elem.childNodes[i];\n            if (child.nodeName === 'bind') {\n                this.do_bind = true;\n            }\n\n            if (child.nodeName === 'session') {\n                this.do_session = true;\n            }\n        }\n\n        if (!this.do_bind) {\n            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null);\n            return false;\n        } else {\n            this._addSysHandler(this._sasl_bind_cb.bind(this), null, null,\n                                null, \"_bind_auth_2\");\n\n            var resource = Strophe.getResourceFromJid(this.jid);\n            if (resource) {\n                this.send($iq({type: \"set\", id: \"_bind_auth_2\"})\n                          .c('bind', {xmlns: Strophe.NS.BIND})\n                          .c('resource', {}).t(resource).tree());\n            } else {\n                this.send($iq({type: \"set\", id: \"_bind_auth_2\"})\n                          .c('bind', {xmlns: Strophe.NS.BIND})\n                          .tree());\n            }\n        }\n        return false;\n    },\n\n    /** PrivateFunction: _sasl_bind_cb\n     *  _Private_ handler for binding result and session start.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The matching stanza.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _sasl_bind_cb: function (elem) {\n        if (elem.getAttribute(\"type\") === \"error\") {\n            Strophe.info(\"SASL binding failed.\");\n            var conflict = elem.getElementsByTagName(\"conflict\"), condition;\n            if (conflict.length > 0) {\n                condition = Strophe.ErrorCondition.CONFLICT;\n            }\n            this._changeConnectStatus(Strophe.Status.AUTHFAIL, condition, elem);\n            return false;\n        }\n\n        // TODO - need to grab errors\n        var bind = elem.getElementsByTagName(\"bind\");\n        var jidNode;\n        if (bind.length > 0) {\n            // Grab jid\n            jidNode = bind[0].getElementsByTagName(\"jid\");\n            if (jidNode.length > 0) {\n                this.jid = Strophe.getText(jidNode[0]);\n\n                if (this.do_session) {\n                    this._addSysHandler(this._sasl_session_cb.bind(this),\n                                        null, null, null, \"_session_auth_2\");\n\n                    this.send($iq({type: \"set\", id: \"_session_auth_2\"})\n                                  .c('session', {xmlns: Strophe.NS.SESSION})\n                                  .tree());\n                } else {\n                    this.authenticated = true;\n                    this._changeConnectStatus(Strophe.Status.CONNECTED, null);\n                }\n            }\n        } else {\n            Strophe.info(\"SASL binding failed.\");\n            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null, elem);\n            return false;\n        }\n    },\n\n    /** PrivateFunction: _sasl_session_cb\n     *  _Private_ handler to finish successful SASL connection.\n     *\n     *  This sets Connection.authenticated to true on success, which\n     *  starts the processing of user handlers.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The matching stanza.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _sasl_session_cb: function (elem) {\n        if (elem.getAttribute(\"type\") === \"result\") {\n            this.authenticated = true;\n            this._changeConnectStatus(Strophe.Status.CONNECTED, null);\n        } else if (elem.getAttribute(\"type\") === \"error\") {\n            Strophe.info(\"Session creation failed.\");\n            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null, elem);\n            return false;\n        }\n        return false;\n    },\n\n    /** PrivateFunction: _sasl_failure_cb\n     *  _Private_ handler for SASL authentication failure.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The matching stanza.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    /* jshint unused:false */\n    _sasl_failure_cb: function (elem) {\n        // delete unneeded handlers\n        if (this._sasl_success_handler) {\n            this.deleteHandler(this._sasl_success_handler);\n            this._sasl_success_handler = null;\n        }\n        if (this._sasl_challenge_handler) {\n            this.deleteHandler(this._sasl_challenge_handler);\n            this._sasl_challenge_handler = null;\n        }\n\n        if(this._sasl_mechanism)\n          this._sasl_mechanism.onFailure();\n        this._changeConnectStatus(Strophe.Status.AUTHFAIL, null, elem);\n        return false;\n    },\n    /* jshint unused:true */\n\n    /** PrivateFunction: _auth2_cb\n     *  _Private_ handler to finish legacy authentication.\n     *\n     *  This handler is called when the result from the jabber:iq:auth\n     *  <iq/> stanza is returned.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The stanza that triggered the callback.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _auth2_cb: function (elem) {\n        if (elem.getAttribute(\"type\") === \"result\") {\n            this.authenticated = true;\n            this._changeConnectStatus(Strophe.Status.CONNECTED, null);\n        } else if (elem.getAttribute(\"type\") === \"error\") {\n            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null, elem);\n            this.disconnect('authentication failed');\n        }\n        return false;\n    },\n\n    /** PrivateFunction: _addSysTimedHandler\n     *  _Private_ function to add a system level timed handler.\n     *\n     *  This function is used to add a Strophe.TimedHandler for the\n     *  library code.  System timed handlers are allowed to run before\n     *  authentication is complete.\n     *\n     *  Parameters:\n     *    (Integer) period - The period of the handler.\n     *    (Function) handler - The callback function.\n     */\n    _addSysTimedHandler: function (period, handler) {\n        var thand = new Strophe.TimedHandler(period, handler);\n        thand.user = false;\n        this.addTimeds.push(thand);\n        return thand;\n    },\n\n    /** PrivateFunction: _addSysHandler\n     *  _Private_ function to add a system level stanza handler.\n     *\n     *  This function is used to add a Strophe.Handler for the\n     *  library code.  System stanza handlers are allowed to run before\n     *  authentication is complete.\n     *\n     *  Parameters:\n     *    (Function) handler - The callback function.\n     *    (String) ns - The namespace to match.\n     *    (String) name - The stanza name to match.\n     *    (String) type - The stanza type attribute to match.\n     *    (String) id - The stanza id attribute to match.\n     */\n    _addSysHandler: function (handler, ns, name, type, id) {\n        var hand = new Strophe.Handler(handler, ns, name, type, id);\n        hand.user = false;\n        this.addHandlers.push(hand);\n        return hand;\n    },\n\n    /** PrivateFunction: _onDisconnectTimeout\n     *  _Private_ timeout handler for handling non-graceful disconnection.\n     *\n     *  If the graceful disconnect process does not complete within the\n     *  time allotted, this handler finishes the disconnect anyway.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _onDisconnectTimeout: function () {\n        Strophe.info(\"_onDisconnectTimeout was called\");\n        this._changeConnectStatus(Strophe.Status.CONNTIMEOUT, null);\n        this._proto._onDisconnectTimeout();\n        // actually disconnect\n        this._doDisconnect();\n        return false;\n    },\n\n    /** PrivateFunction: _onIdle\n     *  _Private_ handler to process events during idle cycle.\n     *\n     *  This handler is called every 100ms to fire timed handlers that\n     *  are ready and keep poll requests going.\n     */\n    _onIdle: function () {\n        var i, thand, since, newList;\n\n        // add timed handlers scheduled for addition\n        // NOTE: we add before remove in the case a timed handler is\n        // added and then deleted before the next _onIdle() call.\n        while (this.addTimeds.length > 0) {\n            this.timedHandlers.push(this.addTimeds.pop());\n        }\n\n        // remove timed handlers that have been scheduled for deletion\n        while (this.removeTimeds.length > 0) {\n            thand = this.removeTimeds.pop();\n            i = this.timedHandlers.indexOf(thand);\n            if (i >= 0) {\n                this.timedHandlers.splice(i, 1);\n            }\n        }\n\n        // call ready timed handlers\n        var now = new Date().getTime();\n        newList = [];\n        for (i = 0; i < this.timedHandlers.length; i++) {\n            thand = this.timedHandlers[i];\n            if (this.authenticated || !thand.user) {\n                since = thand.lastCalled + thand.period;\n                if (since - now <= 0) {\n                    if (thand.run()) {\n                        newList.push(thand);\n                    }\n                } else {\n                    newList.push(thand);\n                }\n            }\n        }\n        this.timedHandlers = newList;\n\n        clearTimeout(this._idleTimeout);\n\n        this._proto._onIdle();\n\n        // reactivate the timer only if connected\n        if (this.connected) {\n            // XXX: setTimeout should be called only with function expressions (23974bc1)\n            this._idleTimeout = setTimeout(function() {\n                this._onIdle();\n            }.bind(this), 100);\n        }\n    }\n};\n\n/** Class: Strophe.SASLMechanism\n *\n *  encapsulates SASL authentication mechanisms.\n *\n *  User code may override the priority for each mechanism or disable it completely.\n *  See <priority> for information about changing priority and <test> for informatian on\n *  how to disable a mechanism.\n *\n *  By default, all mechanisms are enabled and the priorities are\n *\n *      OAUTHBEARER - 60\n *      SCRAM-SHA1 - 50\n *      DIGEST-MD5 - 40\n *      PLAIN - 30\n *      ANONYMOUS - 20\n *      EXTERNAL - 10\n *\n *  See: Strophe.Connection.addSupportedSASLMechanisms\n */\n\n/**\n * PrivateConstructor: Strophe.SASLMechanism\n * SASL auth mechanism abstraction.\n *\n *  Parameters:\n *    (String) name - SASL Mechanism name.\n *    (Boolean) isClientFirst - If client should send response first without challenge.\n *    (Number) priority - Priority.\n *\n *  Returns:\n *    A new Strophe.SASLMechanism object.\n */\nStrophe.SASLMechanism = function(name, isClientFirst, priority) {\n  /** PrivateVariable: name\n   *  Mechanism name.\n   */\n  this.name = name;\n  /** PrivateVariable: isClientFirst\n   *  If client sends response without initial server challenge.\n   */\n  this.isClientFirst = isClientFirst;\n  /** Variable: priority\n   *  Determines which <SASLMechanism> is chosen for authentication (Higher is better).\n   *  Users may override this to prioritize mechanisms differently.\n   *\n   *  In the default configuration the priorities are\n   *\n   *  SCRAM-SHA1 - 40\n   *  DIGEST-MD5 - 30\n   *  Plain - 20\n   *\n   *  Example: (This will cause Strophe to choose the mechanism that the server sent first)\n   *\n   *  > Strophe.SASLMD5.priority = Strophe.SASLSHA1.priority;\n   *\n   *  See <SASL mechanisms> for a list of available mechanisms.\n   *\n   */\n  this.priority = priority;\n};\n\nStrophe.SASLMechanism.prototype = {\n  /**\n   *  Function: test\n   *  Checks if mechanism able to run.\n   *  To disable a mechanism, make this return false;\n   *\n   *  To disable plain authentication run\n   *  > Strophe.SASLPlain.test = function() {\n   *  >   return false;\n   *  > }\n   *\n   *  See <SASL mechanisms> for a list of available mechanisms.\n   *\n   *  Parameters:\n   *    (Strophe.Connection) connection - Target Connection.\n   *\n   *  Returns:\n   *    (Boolean) If mechanism was able to run.\n   */\n  /* jshint unused:false */\n  test: function(connection) {\n    return true;\n  },\n  /* jshint unused:true */\n\n  /** PrivateFunction: onStart\n   *  Called before starting mechanism on some connection.\n   *\n   *  Parameters:\n   *    (Strophe.Connection) connection - Target Connection.\n   */\n  onStart: function(connection) {\n    this._connection = connection;\n  },\n\n  /** PrivateFunction: onChallenge\n   *  Called by protocol implementation on incoming challenge. If client is\n   *  first (isClientFirst === true) challenge will be null on the first call.\n   *\n   *  Parameters:\n   *    (Strophe.Connection) connection - Target Connection.\n   *    (String) challenge - current challenge to handle.\n   *\n   *  Returns:\n   *    (String) Mechanism response.\n   */\n  /* jshint unused:false */\n  onChallenge: function(connection, challenge) {\n    throw new Error(\"You should implement challenge handling!\");\n  },\n  /* jshint unused:true */\n\n  /** PrivateFunction: onFailure\n   *  Protocol informs mechanism implementation about SASL failure.\n   */\n  onFailure: function() {\n    this._connection = null;\n  },\n\n  /** PrivateFunction: onSuccess\n   *  Protocol informs mechanism implementation about SASL success.\n   */\n  onSuccess: function() {\n    this._connection = null;\n  }\n};\n\n  /** Constants: SASL mechanisms\n   *  Available authentication mechanisms\n   *\n   *  Strophe.SASLAnonymous - SASL ANONYMOUS authentication.\n   *  Strophe.SASLPlain - SASL PLAIN authentication.\n   *  Strophe.SASLMD5 - SASL DIGEST-MD5 authentication\n   *  Strophe.SASLSHA1 - SASL SCRAM-SHA1 authentication\n   *  Strophe.SASLOAuthBearer - SASL OAuth Bearer authentication\n   *  Strophe.SASLExternal - SASL EXTERNAL authentication\n   *  Strophe.SASLXOAuth2 - SASL X-OAuth2 authentication\n   */\n\n// Building SASL callbacks\n\n/** PrivateConstructor: SASLAnonymous\n *  SASL ANONYMOUS authentication.\n */\nStrophe.SASLAnonymous = function() {};\nStrophe.SASLAnonymous.prototype = new Strophe.SASLMechanism(\"ANONYMOUS\", false, 20);\n\nStrophe.SASLAnonymous.prototype.test = function(connection) {\n    return connection.authcid === null;\n};\n\n\n/** PrivateConstructor: SASLPlain\n *  SASL PLAIN authentication.\n */\nStrophe.SASLPlain = function() {};\nStrophe.SASLPlain.prototype = new Strophe.SASLMechanism(\"PLAIN\", true, 30);\n\nStrophe.SASLPlain.prototype.test = function(connection) {\n    return connection.authcid !== null;\n};\n\nStrophe.SASLPlain.prototype.onChallenge = function(connection) {\n    var auth_str = connection.authzid;\n    auth_str = auth_str + \"\\u0000\";\n    auth_str = auth_str + connection.authcid;\n    auth_str = auth_str + \"\\u0000\";\n    auth_str = auth_str + connection.pass;\n    return utils.utf16to8(auth_str);\n};\n\n\n/** PrivateConstructor: SASLSHA1\n *  SASL SCRAM SHA 1 authentication.\n */\nStrophe.SASLSHA1 = function() {};\nStrophe.SASLSHA1.prototype = new Strophe.SASLMechanism(\"SCRAM-SHA-1\", true, 50);\n\nStrophe.SASLSHA1.prototype.test = function(connection) {\n    return connection.authcid !== null;\n};\n\nStrophe.SASLSHA1.prototype.onChallenge = function(connection, challenge, test_cnonce) {\n  var cnonce = test_cnonce || MD5.hexdigest(Math.random() * 1234567890);\n  var auth_str = \"n=\" + utils.utf16to8(connection.authcid);\n  auth_str += \",r=\";\n  auth_str += cnonce;\n  connection._sasl_data.cnonce = cnonce;\n  connection._sasl_data[\"client-first-message-bare\"] = auth_str;\n\n  auth_str = \"n,,\" + auth_str;\n\n  this.onChallenge = function (connection, challenge) {\n    var nonce, salt, iter, Hi, U, U_old, i, k, pass;\n    var clientKey, serverKey, clientSignature;\n    var responseText = \"c=biws,\";\n    var authMessage = connection._sasl_data[\"client-first-message-bare\"] + \",\" +\n      challenge + \",\";\n    var cnonce = connection._sasl_data.cnonce;\n    var attribMatch = /([a-z]+)=([^,]+)(,|$)/;\n\n    while (challenge.match(attribMatch)) {\n      var matches = challenge.match(attribMatch);\n      challenge = challenge.replace(matches[0], \"\");\n      switch (matches[1]) {\n      case \"r\":\n        nonce = matches[2];\n        break;\n      case \"s\":\n        salt = matches[2];\n        break;\n      case \"i\":\n        iter = matches[2];\n        break;\n      }\n    }\n\n    if (nonce.substr(0, cnonce.length) !== cnonce) {\n      connection._sasl_data = {};\n      return connection._sasl_failure_cb();\n    }\n\n    responseText += \"r=\" + nonce;\n    authMessage += responseText;\n\n    salt = atob(salt);\n    salt += \"\\x00\\x00\\x00\\x01\";\n\n    pass = utils.utf16to8(connection.pass);\n    Hi = U_old = SHA1.core_hmac_sha1(pass, salt);\n    for (i = 1; i < iter; i++) {\n      U = SHA1.core_hmac_sha1(pass, SHA1.binb2str(U_old));\n      for (k = 0; k < 5; k++) {\n        Hi[k] ^= U[k];\n      }\n      U_old = U;\n    }\n    Hi = SHA1.binb2str(Hi);\n\n    clientKey = SHA1.core_hmac_sha1(Hi, \"Client Key\");\n    serverKey = SHA1.str_hmac_sha1(Hi, \"Server Key\");\n    clientSignature = SHA1.core_hmac_sha1(SHA1.str_sha1(SHA1.binb2str(clientKey)), authMessage);\n    connection._sasl_data[\"server-signature\"] = SHA1.b64_hmac_sha1(serverKey, authMessage);\n\n    for (k = 0; k < 5; k++) {\n      clientKey[k] ^= clientSignature[k];\n    }\n\n    responseText += \",p=\" + btoa(SHA1.binb2str(clientKey));\n    return responseText;\n  }.bind(this);\n\n  return auth_str;\n};\n\n\n/** PrivateConstructor: SASLMD5\n *  SASL DIGEST MD5 authentication.\n */\nStrophe.SASLMD5 = function() {};\nStrophe.SASLMD5.prototype = new Strophe.SASLMechanism(\"DIGEST-MD5\", false, 40);\n\nStrophe.SASLMD5.prototype.test = function(connection) {\n    return connection.authcid !== null;\n};\n\n/** PrivateFunction: _quote\n *  _Private_ utility function to backslash escape and quote strings.\n *\n *  Parameters:\n *    (String) str - The string to be quoted.\n *\n *  Returns:\n *    quoted string\n */\nStrophe.SASLMD5.prototype._quote = function (str) {\n    return '\"' + str.replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g, '\\\\\"') + '\"';\n    //\" end string workaround for emacs\n};\n\nStrophe.SASLMD5.prototype.onChallenge = function(connection, challenge, test_cnonce) {\n  var attribMatch = /([a-z]+)=(\"[^\"]+\"|[^,\"]+)(?:,|$)/;\n  var cnonce = test_cnonce || MD5.hexdigest(\"\" + (Math.random() * 1234567890));\n  var realm = \"\";\n  var host = null;\n  var nonce = \"\";\n  var qop = \"\";\n  var matches;\n\n  while (challenge.match(attribMatch)) {\n    matches = challenge.match(attribMatch);\n    challenge = challenge.replace(matches[0], \"\");\n    matches[2] = matches[2].replace(/^\"(.+)\"$/, \"$1\");\n    switch (matches[1]) {\n    case \"realm\":\n      realm = matches[2];\n      break;\n    case \"nonce\":\n      nonce = matches[2];\n      break;\n    case \"qop\":\n      qop = matches[2];\n      break;\n    case \"host\":\n      host = matches[2];\n      break;\n    }\n  }\n\n  var digest_uri = connection.servtype + \"/\" + connection.domain;\n  if (host !== null) {\n    digest_uri = digest_uri + \"/\" + host;\n  }\n\n  var cred = utils.utf16to8(connection.authcid + \":\" + realm + \":\" + this._connection.pass);\n  var A1 = MD5.hash(cred) + \":\" + nonce + \":\" + cnonce;\n  var A2 = 'AUTHENTICATE:' + digest_uri;\n\n  var responseText = \"\";\n  responseText += 'charset=utf-8,';\n  responseText += 'username=' + this._quote(utils.utf16to8(connection.authcid)) + ',';\n  responseText += 'realm=' + this._quote(realm) + ',';\n  responseText += 'nonce=' + this._quote(nonce) + ',';\n  responseText += 'nc=00000001,';\n  responseText += 'cnonce=' + this._quote(cnonce) + ',';\n  responseText += 'digest-uri=' + this._quote(digest_uri) + ',';\n  responseText += 'response=' + MD5.hexdigest(MD5.hexdigest(A1) + \":\" +\n                                              nonce + \":00000001:\" +\n                                              cnonce + \":auth:\" +\n                                              MD5.hexdigest(A2)) + \",\";\n  responseText += 'qop=auth';\n\n  this.onChallenge = function () {\n      return \"\";\n  };\n  return responseText;\n};\n\n\n/** PrivateConstructor: SASLOAuthBearer\n *  SASL OAuth Bearer authentication.\n */\nStrophe.SASLOAuthBearer = function() {};\nStrophe.SASLOAuthBearer.prototype = new Strophe.SASLMechanism(\"OAUTHBEARER\", true, 60);\n\nStrophe.SASLOAuthBearer.prototype.test = function(connection) {\n    return connection.pass !== null;\n};\n\nStrophe.SASLOAuthBearer.prototype.onChallenge = function(connection) {\n    var auth_str = 'n,';\n    if (connection.authcid !== null) {\n      auth_str = auth_str + 'a=' + connection.authzid;\n    }\n    auth_str = auth_str + ',';\n    auth_str = auth_str + \"\\u0001\";\n    auth_str = auth_str + 'auth=Bearer ';\n    auth_str = auth_str + connection.pass;\n    auth_str = auth_str + \"\\u0001\";\n    auth_str = auth_str + \"\\u0001\";\n\n    return utils.utf16to8(auth_str);\n};\n\n\n/** PrivateConstructor: SASLExternal\n *  SASL EXTERNAL authentication.\n *\n *  The EXTERNAL mechanism allows a client to request the server to use\n *  credentials established by means external to the mechanism to\n *  authenticate the client. The external means may be, for instance,\n *  TLS services.\n */\nStrophe.SASLExternal = function() {};\nStrophe.SASLExternal.prototype = new Strophe.SASLMechanism(\"EXTERNAL\", true, 10);\n\nStrophe.SASLExternal.prototype.onChallenge = function(connection) {\n    /** According to XEP-178, an authzid SHOULD NOT be presented when the\n     * authcid contained or implied in the client certificate is the JID (i.e.\n     * authzid) with which the user wants to log in as.\n     *\n     * To NOT send the authzid, the user should therefore set the authcid equal\n     * to the JID when instantiating a new Strophe.Connection object.\n     */\n    return connection.authcid === connection.authzid ? '' : connection.authzid;\n};\n\n\n/** PrivateConstructor: SASLXOAuth2\n *  SASL X-OAuth2 authentication.\n */\nStrophe.SASLXOAuth2 = function () { };\nStrophe.SASLXOAuth2.prototype = new Strophe.SASLMechanism(\"X-OAUTH2\", true, 70);\n\nStrophe.SASLXOAuth2.prototype.test = function (connection) {\n    return connection.pass !== null;\n};\n\nStrophe.SASLXOAuth2.prototype.onChallenge = function (connection) {\n    var auth_str = '\\u0000';\n    if (connection.authcid !== null) {\n        auth_str = auth_str + connection.authzid;\n    }\n    auth_str = auth_str + \"\\u0000\";\n    auth_str = auth_str + connection.pass;\n\n    return utils.utf16to8(auth_str);\n};\n\n\nreturn {\n    'Strophe':         Strophe,\n    '$build':          $build,\n    '$iq':             $iq,\n    '$msg':            $msg,\n    '$pres':           $pres,\n    'SHA1':            SHA1,\n    'MD5':             MD5,\n    'b64_hmac_sha1':   SHA1.b64_hmac_sha1,\n    'b64_sha1':        SHA1.b64_sha1,\n    'str_hmac_sha1':   SHA1.str_hmac_sha1,\n    'str_sha1':        SHA1.str_sha1\n};\n}));\n\n/*\n    This program is distributed under the terms of the MIT license.\n    Please see the LICENSE file for details.\n\n    Copyright 2006-2008, OGG, LLC\n*/\n\n/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n/* global define, window, setTimeout, clearTimeout, XMLHttpRequest, ActiveXObject, Strophe, $build */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-bosh',['strophe-core'], function (core) {\n            return factory(\n                core.Strophe,\n                core.$build\n            );\n        });\n    } else if (typeof exports === 'object') {\n        var core = require('./core');\n\n        module.exports = factory(core.Strophe, core.$build);\n    } else {\n        // Browser globals\n        return factory(Strophe, $build);\n    }\n}(this, function (Strophe, $build) {\n\n/** PrivateClass: Strophe.Request\n *  _Private_ helper class that provides a cross implementation abstraction\n *  for a BOSH related XMLHttpRequest.\n *\n *  The Strophe.Request class is used internally to encapsulate BOSH request\n *  information.  It is not meant to be used from user's code.\n */\n\n/** PrivateConstructor: Strophe.Request\n *  Create and initialize a new Strophe.Request object.\n *\n *  Parameters:\n *    (XMLElement) elem - The XML data to be sent in the request.\n *    (Function) func - The function that will be called when the\n *      XMLHttpRequest readyState changes.\n *    (Integer) rid - The BOSH rid attribute associated with this request.\n *    (Integer) sends - The number of times this same request has been sent.\n */\nStrophe.Request = function (elem, func, rid, sends) {\n    this.id = ++Strophe._requestId;\n    this.xmlData = elem;\n    this.data = Strophe.serialize(elem);\n    // save original function in case we need to make a new request\n    // from this one.\n    this.origFunc = func;\n    this.func = func;\n    this.rid = rid;\n    this.date = NaN;\n    this.sends = sends || 0;\n    this.abort = false;\n    this.dead = null;\n\n    this.age = function () {\n        if (!this.date) { return 0; }\n        var now = new Date();\n        return (now - this.date) / 1000;\n    };\n    this.timeDead = function () {\n        if (!this.dead) { return 0; }\n        var now = new Date();\n        return (now - this.dead) / 1000;\n    };\n    this.xhr = this._newXHR();\n};\n\nStrophe.Request.prototype = {\n    /** PrivateFunction: getResponse\n     *  Get a response from the underlying XMLHttpRequest.\n     *\n     *  This function attempts to get a response from the request and checks\n     *  for errors.\n     *\n     *  Throws:\n     *    \"parsererror\" - A parser error occured.\n     *    \"badformat\" - The entity has sent XML that cannot be processed.\n     *\n     *  Returns:\n     *    The DOM element tree of the response.\n     */\n    getResponse: function () {\n        var node = null;\n        if (this.xhr.responseXML && this.xhr.responseXML.documentElement) {\n            node = this.xhr.responseXML.documentElement;\n            if (node.tagName === \"parsererror\") {\n                Strophe.error(\"invalid response received\");\n                Strophe.error(\"responseText: \" + this.xhr.responseText);\n                Strophe.error(\"responseXML: \" +\n                              Strophe.serialize(this.xhr.responseXML));\n                throw \"parsererror\";\n            }\n        } else if (this.xhr.responseText) {\n            Strophe.error(\"invalid response received\");\n            Strophe.error(\"responseText: \" + this.xhr.responseText);\n            throw \"badformat\";\n        }\n\n        return node;\n    },\n\n    /** PrivateFunction: _newXHR\n     *  _Private_ helper function to create XMLHttpRequests.\n     *\n     *  This function creates XMLHttpRequests across all implementations.\n     *\n     *  Returns:\n     *    A new XMLHttpRequest.\n     */\n    _newXHR: function () {\n        var xhr = null;\n        if (window.XMLHttpRequest) {\n            xhr = new XMLHttpRequest();\n            if (xhr.overrideMimeType) {\n                xhr.overrideMimeType(\"text/xml; charset=utf-8\");\n            }\n        } else if (window.ActiveXObject) {\n            xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\n        }\n        // use Function.bind() to prepend ourselves as an argument\n        xhr.onreadystatechange = this.func.bind(null, this);\n        return xhr;\n    }\n};\n\n/** Class: Strophe.Bosh\n *  _Private_ helper class that handles BOSH Connections\n *\n *  The Strophe.Bosh class is used internally by Strophe.Connection\n *  to encapsulate BOSH sessions. It is not meant to be used from user's code.\n */\n\n/** File: bosh.js\n *  A JavaScript library to enable BOSH in Strophejs.\n *\n *  this library uses Bidirectional-streams Over Synchronous HTTP (BOSH)\n *  to emulate a persistent, stateful, two-way connection to an XMPP server.\n *  More information on BOSH can be found in XEP 124.\n */\n\n/** PrivateConstructor: Strophe.Bosh\n *  Create and initialize a Strophe.Bosh object.\n *\n *  Parameters:\n *    (Strophe.Connection) connection - The Strophe.Connection that will use BOSH.\n *\n *  Returns:\n *    A new Strophe.Bosh object.\n */\nStrophe.Bosh = function(connection) {\n    this._conn = connection;\n    /* request id for body tags */\n    this.rid = Math.floor(Math.random() * 4294967295);\n    /* The current session ID. */\n    this.sid = null;\n\n    // default BOSH values\n    this.hold = 1;\n    this.wait = 60;\n    this.window = 5;\n    this.errors = 0;\n    this.inactivity = null;\n\n    this.lastResponseHeaders = null;\n\n    this._requests = [];\n};\n\nStrophe.Bosh.prototype = {\n    /** Variable: strip\n     *\n     *  BOSH-Connections will have all stanzas wrapped in a <body> tag when\n     *  passed to <Strophe.Connection.xmlInput> or <Strophe.Connection.xmlOutput>.\n     *  To strip this tag, User code can set <Strophe.Bosh.strip> to \"body\":\n     *\n     *  > Strophe.Bosh.prototype.strip = \"body\";\n     *\n     *  This will enable stripping of the body tag in both\n     *  <Strophe.Connection.xmlInput> and <Strophe.Connection.xmlOutput>.\n     */\n    strip: null,\n\n    /** PrivateFunction: _buildBody\n     *  _Private_ helper function to generate the <body/> wrapper for BOSH.\n     *\n     *  Returns:\n     *    A Strophe.Builder with a <body/> element.\n     */\n    _buildBody: function () {\n        var bodyWrap = $build('body', {\n            rid: this.rid++,\n            xmlns: Strophe.NS.HTTPBIND\n        });\n        if (this.sid !== null) {\n            bodyWrap.attrs({sid: this.sid});\n        }\n        if (this._conn.options.keepalive && this._conn._sessionCachingSupported()) {\n            this._cacheSession();\n        }\n        return bodyWrap;\n    },\n\n    /** PrivateFunction: _reset\n     *  Reset the connection.\n     *\n     *  This function is called by the reset function of the Strophe Connection\n     */\n    _reset: function () {\n        this.rid = Math.floor(Math.random() * 4294967295);\n        this.sid = null;\n        this.errors = 0;\n        if (this._conn._sessionCachingSupported()) {\n            window.sessionStorage.removeItem('strophe-bosh-session');\n        }\n\n        this._conn.nextValidRid(this.rid);\n    },\n\n    /** PrivateFunction: _connect\n     *  _Private_ function that initializes the BOSH connection.\n     *\n     *  Creates and sends the Request that initializes the BOSH connection.\n     */\n    _connect: function (wait, hold, route) {\n        this.wait = wait || this.wait;\n        this.hold = hold || this.hold;\n        this.errors = 0;\n\n        // build the body tag\n        var body = this._buildBody().attrs({\n            to: this._conn.domain,\n            \"xml:lang\": \"en\",\n            wait: this.wait,\n            hold: this.hold,\n            content: \"text/xml; charset=utf-8\",\n            ver: \"1.6\",\n            \"xmpp:version\": \"1.0\",\n            \"xmlns:xmpp\": Strophe.NS.BOSH\n        });\n\n        if(route){\n            body.attrs({\n                route: route\n            });\n        }\n\n        var _connect_cb = this._conn._connect_cb;\n\n        this._requests.push(\n            new Strophe.Request(body.tree(),\n                                this._onRequestStateChange.bind(\n                                    this, _connect_cb.bind(this._conn)),\n                                body.tree().getAttribute(\"rid\")));\n        this._throttledRequestHandler();\n    },\n\n    /** PrivateFunction: _attach\n     *  Attach to an already created and authenticated BOSH session.\n     *\n     *  This function is provided to allow Strophe to attach to BOSH\n     *  sessions which have been created externally, perhaps by a Web\n     *  application.  This is often used to support auto-login type features\n     *  without putting user credentials into the page.\n     *\n     *  Parameters:\n     *    (String) jid - The full JID that is bound by the session.\n     *    (String) sid - The SID of the BOSH session.\n     *    (String) rid - The current RID of the BOSH session.  This RID\n     *      will be used by the next request.\n     *    (Function) callback The connect callback function.\n     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n     *      time the server will wait before returning an empty result for\n     *      a request.  The default setting of 60 seconds is recommended.\n     *      Other settings will require tweaks to the Strophe.TIMEOUT value.\n     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n     *      number of connections the server will hold at one time.  This\n     *      should almost always be set to 1 (the default).\n     *    (Integer) wind - The optional HTTBIND window value.  This is the\n     *      allowed range of request ids that are valid.  The default is 5.\n     */\n    _attach: function (jid, sid, rid, callback, wait, hold, wind) {\n        this._conn.jid = jid;\n        this.sid = sid;\n        this.rid = rid;\n\n        this._conn.connect_callback = callback;\n\n        this._conn.domain = Strophe.getDomainFromJid(this._conn.jid);\n\n        this._conn.authenticated = true;\n        this._conn.connected = true;\n\n        this.wait = wait || this.wait;\n        this.hold = hold || this.hold;\n        this.window = wind || this.window;\n\n        this._conn._changeConnectStatus(Strophe.Status.ATTACHED, null);\n    },\n\n    /** PrivateFunction: _restore\n     *  Attempt to restore a cached BOSH session\n     *\n     *  Parameters:\n     *    (String) jid - The full JID that is bound by the session.\n     *      This parameter is optional but recommended, specifically in cases\n     *      where prebinded BOSH sessions are used where it's important to know\n     *      that the right session is being restored.\n     *    (Function) callback The connect callback function.\n     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n     *      time the server will wait before returning an empty result for\n     *      a request.  The default setting of 60 seconds is recommended.\n     *      Other settings will require tweaks to the Strophe.TIMEOUT value.\n     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n     *      number of connections the server will hold at one time.  This\n     *      should almost always be set to 1 (the default).\n     *    (Integer) wind - The optional HTTBIND window value.  This is the\n     *      allowed range of request ids that are valid.  The default is 5.\n     */\n    _restore: function (jid, callback, wait, hold, wind) {\n        var session = JSON.parse(window.sessionStorage.getItem('strophe-bosh-session'));\n        if (typeof session !== \"undefined\" &&\n                   session !== null &&\n                   session.rid &&\n                   session.sid &&\n                   session.jid &&\n                   (    typeof jid === \"undefined\" ||\n                        jid === null ||\n                        Strophe.getBareJidFromJid(session.jid) === Strophe.getBareJidFromJid(jid) ||\n                        // If authcid is null, then it's an anonymous login, so\n                        // we compare only the domains:\n                        ((Strophe.getNodeFromJid(jid) === null) && (Strophe.getDomainFromJid(session.jid) === jid))\n                    )\n        ) {\n            this._conn.restored = true;\n            this._attach(session.jid, session.sid, session.rid, callback, wait, hold, wind);\n        } else {\n            throw { name: \"StropheSessionError\", message: \"_restore: no restoreable session.\" };\n        }\n    },\n\n    /** PrivateFunction: _cacheSession\n     *  _Private_ handler for the beforeunload event.\n     *\n     *  This handler is used to process the Bosh-part of the initial request.\n     *  Parameters:\n     *    (Strophe.Request) bodyWrap - The received stanza.\n     */\n    _cacheSession: function () {\n        if (this._conn.authenticated) {\n            if (this._conn.jid && this.rid && this.sid) {\n                window.sessionStorage.setItem('strophe-bosh-session', JSON.stringify({\n                    'jid': this._conn.jid,\n                    'rid': this.rid,\n                    'sid': this.sid\n                }));\n            }\n        } else {\n            window.sessionStorage.removeItem('strophe-bosh-session');\n        }\n    },\n\n    /** PrivateFunction: _connect_cb\n     *  _Private_ handler for initial connection request.\n     *\n     *  This handler is used to process the Bosh-part of the initial request.\n     *  Parameters:\n     *    (Strophe.Request) bodyWrap - The received stanza.\n     */\n    _connect_cb: function (bodyWrap) {\n        var typ = bodyWrap.getAttribute(\"type\");\n        var cond, conflict;\n        if (typ !== null && typ === \"terminate\") {\n            // an error occurred\n            cond = bodyWrap.getAttribute(\"condition\");\n            Strophe.error(\"BOSH-Connection failed: \" + cond);\n            conflict = bodyWrap.getElementsByTagName(\"conflict\");\n            if (cond !== null) {\n                if (cond === \"remote-stream-error\" && conflict.length > 0) {\n                    cond = \"conflict\";\n                }\n                this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, cond);\n            } else {\n                this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, \"unknown\");\n            }\n            this._conn._doDisconnect(cond);\n            return Strophe.Status.CONNFAIL;\n        }\n\n        // check to make sure we don't overwrite these if _connect_cb is\n        // called multiple times in the case of missing stream:features\n        if (!this.sid) {\n            this.sid = bodyWrap.getAttribute(\"sid\");\n        }\n        var wind = bodyWrap.getAttribute('requests');\n        if (wind) { this.window = parseInt(wind, 10); }\n        var hold = bodyWrap.getAttribute('hold');\n        if (hold) { this.hold = parseInt(hold, 10); }\n        var wait = bodyWrap.getAttribute('wait');\n        if (wait) { this.wait = parseInt(wait, 10); }\n        var inactivity = bodyWrap.getAttribute('inactivity');\n        if (inactivity) { this.inactivity = parseInt(inactivity, 10); }\n    },\n\n    /** PrivateFunction: _disconnect\n     *  _Private_ part of Connection.disconnect for Bosh\n     *\n     *  Parameters:\n     *    (Request) pres - This stanza will be sent before disconnecting.\n     */\n    _disconnect: function (pres) {\n        this._sendTerminate(pres);\n    },\n\n    /** PrivateFunction: _doDisconnect\n     *  _Private_ function to disconnect.\n     *\n     *  Resets the SID and RID.\n     */\n    _doDisconnect: function () {\n        this.sid = null;\n        this.rid = Math.floor(Math.random() * 4294967295);\n        if (this._conn._sessionCachingSupported()) {\n            window.sessionStorage.removeItem('strophe-bosh-session');\n        }\n\n        this._conn.nextValidRid(this.rid);\n    },\n\n    /** PrivateFunction: _emptyQueue\n     * _Private_ function to check if the Request queue is empty.\n     *\n     *  Returns:\n     *    True, if there are no Requests queued, False otherwise.\n     */\n    _emptyQueue: function () {\n        return this._requests.length === 0;\n    },\n\n    /** PrivateFunction: _callProtocolErrorHandlers\n     *  _Private_ function to call error handlers registered for HTTP errors.\n     *\n     *  Parameters:\n     *    (Strophe.Request) req - The request that is changing readyState.\n     */\n    _callProtocolErrorHandlers: function (req) {\n        var reqStatus = this._getRequestStatus(req),\n            err_callback;\n        err_callback = this._conn.protocolErrorHandlers.HTTP[reqStatus];\n        if (err_callback) {\n            err_callback.call(this, reqStatus);\n        }\n    },\n\n    /** PrivateFunction: _hitError\n     *  _Private_ function to handle the error count.\n     *\n     *  Requests are resent automatically until their error count reaches\n     *  5.  Each time an error is encountered, this function is called to\n     *  increment the count and disconnect if the count is too high.\n     *\n     *  Parameters:\n     *    (Integer) reqStatus - The request status.\n     */\n    _hitError: function (reqStatus) {\n        this.errors++;\n        Strophe.warn(\"request errored, status: \" + reqStatus +\n                     \", number of errors: \" + this.errors);\n        if (this.errors > 4) {\n            this._conn._onDisconnectTimeout();\n        }\n    },\n\n    /** PrivateFunction: _onDisconnectTimeout\n     *  _Private_ timeout handler for handling non-graceful disconnection.\n     *\n     *  Cancels all remaining Requests and clears the queue.\n     */\n    _onDisconnectTimeout: function () {\n        this._abortAllRequests();\n    },\n\n    /** PrivateFunction: _abortAllRequests\n     *  _Private_ helper function that makes sure all pending requests are aborted.\n     */\n    _abortAllRequests: function _abortAllRequests() {\n        var req;\n        while (this._requests.length > 0) {\n            req = this._requests.pop();\n            req.abort = true;\n            req.xhr.abort();\n            // jslint complains, but this is fine. setting to empty func\n            // is necessary for IE6\n            req.xhr.onreadystatechange = function () {}; // jshint ignore:line\n        }\n    },\n\n    /** PrivateFunction: _onIdle\n     *  _Private_ handler called by Strophe.Connection._onIdle\n     *\n     *  Sends all queued Requests or polls with empty Request if there are none.\n     */\n    _onIdle: function () {\n        var data = this._conn._data;\n        // if no requests are in progress, poll\n        if (this._conn.authenticated && this._requests.length === 0 &&\n            data.length === 0 && !this._conn.disconnecting) {\n            Strophe.info(\"no requests during idle cycle, sending \" +\n                         \"blank request\");\n            data.push(null);\n        }\n\n        if (this._conn.paused) {\n            return;\n        }\n\n        if (this._requests.length < 2 && data.length > 0) {\n            var body = this._buildBody();\n            for (var i = 0; i < data.length; i++) {\n                if (data[i] !== null) {\n                    if (data[i] === \"restart\") {\n                        body.attrs({\n                            to: this._conn.domain,\n                            \"xml:lang\": \"en\",\n                            \"xmpp:restart\": \"true\",\n                            \"xmlns:xmpp\": Strophe.NS.BOSH\n                        });\n                    } else {\n                        body.cnode(data[i]).up();\n                    }\n                }\n            }\n            delete this._conn._data;\n            this._conn._data = [];\n            this._requests.push(\n                new Strophe.Request(body.tree(),\n                                    this._onRequestStateChange.bind(\n                                        this, this._conn._dataRecv.bind(this._conn)),\n                                    body.tree().getAttribute(\"rid\")));\n            this._throttledRequestHandler();\n        }\n\n        if (this._requests.length > 0) {\n            var time_elapsed = this._requests[0].age();\n            if (this._requests[0].dead !== null) {\n                if (this._requests[0].timeDead() >\n                    Math.floor(Strophe.SECONDARY_TIMEOUT * this.wait)) {\n                    this._throttledRequestHandler();\n                }\n            }\n\n            if (time_elapsed > Math.floor(Strophe.TIMEOUT * this.wait)) {\n                Strophe.warn(\"Request \" +\n                             this._requests[0].id +\n                             \" timed out, over \" + Math.floor(Strophe.TIMEOUT * this.wait) +\n                             \" seconds since last activity\");\n                this._throttledRequestHandler();\n            }\n        }\n    },\n\n    /** PrivateFunction: _getRequestStatus\n     *\n     *  Returns the HTTP status code from a Strophe.Request\n     *\n     *  Parameters:\n     *    (Strophe.Request) req - The Strophe.Request instance.\n     *    (Integer) def - The default value that should be returned if no\n     *          status value was found.\n     */\n    _getRequestStatus: function (req, def) {\n        var reqStatus;\n        if (req.xhr.readyState === 4) {\n            try {\n                reqStatus = req.xhr.status;\n            } catch (e) {\n                // ignore errors from undefined status attribute. Works\n                // around a browser bug\n                Strophe.error(\n                    \"Caught an error while retrieving a request's status, \" +\n                    \"reqStatus: \" + reqStatus);\n            }\n        }\n        if (typeof(reqStatus) === \"undefined\") {\n            reqStatus = typeof def === 'number' ? def : 0;\n        }\n        return reqStatus;\n    },\n\n    /** PrivateFunction: _onRequestStateChange\n     *  _Private_ handler for Strophe.Request state changes.\n     *\n     *  This function is called when the XMLHttpRequest readyState changes.\n     *  It contains a lot of error handling logic for the many ways that\n     *  requests can fail, and calls the request callback when requests\n     *  succeed.\n     *\n     *  Parameters:\n     *    (Function) func - The handler for the request.\n     *    (Strophe.Request) req - The request that is changing readyState.\n     */\n    _onRequestStateChange: function (func, req) {\n        Strophe.debug(\"request id \"+req.id+\".\"+req.sends+\n                      \" state changed to \"+req.xhr.readyState);\n        if (req.abort) {\n            req.abort = false;\n            return;\n        }\n        if (req.xhr.readyState !== 4) {\n            // The request is not yet complete\n            return;\n        }\n        var reqStatus = this._getRequestStatus(req);\n        this.lastResponseHeaders = req.xhr.getAllResponseHeaders();\n        if (this.disconnecting && reqStatus >= 400) {\n            this._hitError(reqStatus);\n            this._callProtocolErrorHandlers(req);\n            return;\n        }\n\n        var valid_request = reqStatus > 0 && reqStatus < 500;\n        var too_many_retries = req.sends > this._conn.maxRetries;\n        if (valid_request || too_many_retries) {\n            // remove from internal queue\n            this._removeRequest(req);\n            Strophe.debug(\"request id \"+req.id+\" should now be removed\");\n        }\n\n        if (reqStatus === 200) {\n            // request succeeded\n            var reqIs0 = (this._requests[0] === req);\n            var reqIs1 = (this._requests[1] === req);\n            // if request 1 finished, or request 0 finished and request\n            // 1 is over Strophe.SECONDARY_TIMEOUT seconds old, we need to\n            // restart the other - both will be in the first spot, as the\n            // completed request has been removed from the queue already\n            if (reqIs1 ||\n                (reqIs0 && this._requests.length > 0 &&\n                    this._requests[0].age() > Math.floor(Strophe.SECONDARY_TIMEOUT * this.wait))) {\n                this._restartRequest(0);\n            }\n            this._conn.nextValidRid(Number(req.rid) + 1);\n            Strophe.debug(\"request id \"+req.id+\".\"+req.sends+\" got 200\");\n            func(req); // call handler\n            this.errors = 0;\n        } else if (reqStatus === 0 ||\n                   (reqStatus >= 400 && reqStatus < 600) ||\n                   reqStatus >= 12000) {\n            // request failed\n            Strophe.error(\"request id \"+req.id+\".\"+req.sends+\" error \"+reqStatus+\" happened\");\n            this._hitError(reqStatus);\n            this._callProtocolErrorHandlers(req);\n            if (reqStatus >= 400 && reqStatus < 500) {\n                this._conn._changeConnectStatus(Strophe.Status.DISCONNECTING, null);\n                this._conn._doDisconnect();\n            }\n        } else {\n            Strophe.error(\"request id \"+req.id+\".\"+req.sends+\" error \"+reqStatus+\" happened\");\n        }\n\n        if (!valid_request && !too_many_retries) {\n            this._throttledRequestHandler();\n        } else if (too_many_retries && !this._conn.connected) {\n            this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, \"giving-up\");\n        }\n    },\n\n    /** PrivateFunction: _processRequest\n     *  _Private_ function to process a request in the queue.\n     *\n     *  This function takes requests off the queue and sends them and\n     *  restarts dead requests.\n     *\n     *  Parameters:\n     *    (Integer) i - The index of the request in the queue.\n     */\n    _processRequest: function (i) {\n        var self = this;\n        var req = this._requests[i];\n        var reqStatus = this._getRequestStatus(req, -1);\n\n        // make sure we limit the number of retries\n        if (req.sends > this._conn.maxRetries) {\n            this._conn._onDisconnectTimeout();\n            return;\n        }\n\n        var time_elapsed = req.age();\n        var primaryTimeout = (!isNaN(time_elapsed) &&\n                              time_elapsed > Math.floor(Strophe.TIMEOUT * this.wait));\n        var secondaryTimeout = (req.dead !== null &&\n                                req.timeDead() > Math.floor(Strophe.SECONDARY_TIMEOUT * this.wait));\n        var requestCompletedWithServerError = (req.xhr.readyState === 4 &&\n                                               (reqStatus < 1 || reqStatus >= 500));\n        if (primaryTimeout || secondaryTimeout ||\n            requestCompletedWithServerError) {\n            if (secondaryTimeout) {\n                Strophe.error(\"Request \" + this._requests[i].id +\n                              \" timed out (secondary), restarting\");\n            }\n            req.abort = true;\n            req.xhr.abort();\n            // setting to null fails on IE6, so set to empty function\n            req.xhr.onreadystatechange = function () {};\n            this._requests[i] = new Strophe.Request(req.xmlData,\n                                                    req.origFunc,\n                                                    req.rid,\n                                                    req.sends);\n            req = this._requests[i];\n        }\n\n        if (req.xhr.readyState === 0) {\n            Strophe.debug(\"request id \"+req.id+\".\"+req.sends+\" posting\");\n\n            try {\n                var contentType = this._conn.options.contentType || \"text/xml; charset=utf-8\";\n                req.xhr.open(\"POST\", this._conn.service, this._conn.options.sync ? false : true);\n                if (typeof req.xhr.setRequestHeader !== 'undefined') {\n                    // IE9 doesn't have setRequestHeader\n                    req.xhr.setRequestHeader(\"Content-Type\", contentType);\n                }\n                if (this._conn.options.withCredentials) {\n                    req.xhr.withCredentials = true;\n                }\n            } catch (e2) {\n                Strophe.error(\"XHR open failed: \" + e2.toString());\n                if (!this._conn.connected) {\n                    this._conn._changeConnectStatus(\n                            Strophe.Status.CONNFAIL, \"bad-service\");\n                }\n                this._conn.disconnect();\n                return;\n            }\n\n            // Fires the XHR request -- may be invoked immediately\n            // or on a gradually expanding retry window for reconnects\n            var sendFunc = function () {\n                req.date = new Date();\n                if (self._conn.options.customHeaders){\n                    var headers = self._conn.options.customHeaders;\n                    for (var header in headers) {\n                        if (headers.hasOwnProperty(header)) {\n                            req.xhr.setRequestHeader(header, headers[header]);\n                        }\n                    }\n                }\n                req.xhr.send(req.data);\n            };\n\n            // Implement progressive backoff for reconnects --\n            // First retry (send === 1) should also be instantaneous\n            if (req.sends > 1) {\n                // Using a cube of the retry number creates a nicely\n                // expanding retry window\n                var backoff = Math.min(Math.floor(Strophe.TIMEOUT * this.wait),\n                                       Math.pow(req.sends, 3)) * 1000;\n                setTimeout(function() {\n                    // XXX: setTimeout should be called only with function expressions (23974bc1)\n                    sendFunc();\n                }, backoff);\n            } else {\n                sendFunc();\n            }\n\n            req.sends++;\n\n            if (this._conn.xmlOutput !== Strophe.Connection.prototype.xmlOutput) {\n                if (req.xmlData.nodeName === this.strip && req.xmlData.childNodes.length) {\n                    this._conn.xmlOutput(req.xmlData.childNodes[0]);\n                } else {\n                    this._conn.xmlOutput(req.xmlData);\n                }\n            }\n            if (this._conn.rawOutput !== Strophe.Connection.prototype.rawOutput) {\n                this._conn.rawOutput(req.data);\n            }\n        } else {\n            Strophe.debug(\"_processRequest: \" +\n                          (i === 0 ? \"first\" : \"second\") +\n                          \" request has readyState of \" +\n                          req.xhr.readyState);\n        }\n    },\n\n    /** PrivateFunction: _removeRequest\n     *  _Private_ function to remove a request from the queue.\n     *\n     *  Parameters:\n     *    (Strophe.Request) req - The request to remove.\n     */\n    _removeRequest: function (req) {\n        Strophe.debug(\"removing request\");\n        var i;\n        for (i = this._requests.length - 1; i >= 0; i--) {\n            if (req === this._requests[i]) {\n                this._requests.splice(i, 1);\n            }\n        }\n        // IE6 fails on setting to null, so set to empty function\n        req.xhr.onreadystatechange = function () {};\n        this._throttledRequestHandler();\n    },\n\n    /** PrivateFunction: _restartRequest\n     *  _Private_ function to restart a request that is presumed dead.\n     *\n     *  Parameters:\n     *    (Integer) i - The index of the request in the queue.\n     */\n    _restartRequest: function (i) {\n        var req = this._requests[i];\n        if (req.dead === null) {\n            req.dead = new Date();\n        }\n\n        this._processRequest(i);\n    },\n\n    /** PrivateFunction: _reqToData\n     * _Private_ function to get a stanza out of a request.\n     *\n     * Tries to extract a stanza out of a Request Object.\n     * When this fails the current connection will be disconnected.\n     *\n     *  Parameters:\n     *    (Object) req - The Request.\n     *\n     *  Returns:\n     *    The stanza that was passed.\n     */\n    _reqToData: function (req) {\n        try {\n            return req.getResponse();\n        } catch (e) {\n            if (e !== \"parsererror\") { throw e; }\n            this._conn.disconnect(\"strophe-parsererror\");\n        }\n    },\n\n    /** PrivateFunction: _sendTerminate\n     *  _Private_ function to send initial disconnect sequence.\n     *\n     *  This is the first step in a graceful disconnect.  It sends\n     *  the BOSH server a terminate body and includes an unavailable\n     *  presence if authentication has completed.\n     */\n    _sendTerminate: function (pres) {\n        Strophe.info(\"_sendTerminate was called\");\n        var body = this._buildBody().attrs({type: \"terminate\"});\n        if (pres) {\n            body.cnode(pres.tree());\n        }\n        var req = new Strophe.Request(\n            body.tree(),\n            this._onRequestStateChange.bind(\n            this, this._conn._dataRecv.bind(this._conn)),\n            body.tree().getAttribute(\"rid\")\n        );\n        this._requests.push(req);\n        this._throttledRequestHandler();\n    },\n\n    /** PrivateFunction: _send\n     *  _Private_ part of the Connection.send function for BOSH\n     *\n     * Just triggers the RequestHandler to send the messages that are in the queue\n     */\n    _send: function () {\n        clearTimeout(this._conn._idleTimeout);\n        this._throttledRequestHandler();\n\n        // XXX: setTimeout should be called only with function expressions (23974bc1)\n        this._conn._idleTimeout = setTimeout(function() {\n            this._onIdle();\n        }.bind(this._conn), 100);\n    },\n\n    /** PrivateFunction: _sendRestart\n     *\n     *  Send an xmpp:restart stanza.\n     */\n    _sendRestart: function () {\n        this._throttledRequestHandler();\n        clearTimeout(this._conn._idleTimeout);\n    },\n\n    /** PrivateFunction: _throttledRequestHandler\n     *  _Private_ function to throttle requests to the connection window.\n     *\n     *  This function makes sure we don't send requests so fast that the\n     *  request ids overflow the connection window in the case that one\n     *  request died.\n     */\n    _throttledRequestHandler: function () {\n        if (!this._requests) {\n            Strophe.debug(\"_throttledRequestHandler called with \" +\n                          \"undefined requests\");\n        } else {\n            Strophe.debug(\"_throttledRequestHandler called with \" +\n                          this._requests.length + \" requests\");\n        }\n\n        if (!this._requests || this._requests.length === 0) {\n            return;\n        }\n\n        if (this._requests.length > 0) {\n            this._processRequest(0);\n        }\n\n        if (this._requests.length > 1 &&\n            Math.abs(this._requests[0].rid -\n                     this._requests[1].rid) < this.window) {\n            this._processRequest(1);\n        }\n    }\n};\nreturn Strophe;\n}));\n\n/*\n    This program is distributed under the terms of the MIT license.\n    Please see the LICENSE file for details.\n\n    Copyright 2006-2008, OGG, LLC\n*/\n\n/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n/* global define, window, clearTimeout, WebSocket, DOMParser, Strophe, $build */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-websocket',['strophe-core'], function (core) {\n            return factory(\n                core.Strophe,\n                core.$build\n            );\n        });\n    } else if (typeof exports === 'object') {\n        var core = require('./core');\n\n        module.exports = factory(core.Strophe, core.$build);\n    } else {\n        // Browser globals\n        return factory(Strophe, $build);\n    }\n}(this, function (Strophe, $build) {\n\n/** Class: Strophe.WebSocket\n *  _Private_ helper class that handles WebSocket Connections\n *\n *  The Strophe.WebSocket class is used internally by Strophe.Connection\n *  to encapsulate WebSocket sessions. It is not meant to be used from user's code.\n */\n\n/** File: websocket.js\n *  A JavaScript library to enable XMPP over Websocket in Strophejs.\n *\n *  This file implements XMPP over WebSockets for Strophejs.\n *  If a Connection is established with a Websocket url (ws://...)\n *  Strophe will use WebSockets.\n *  For more information on XMPP-over-WebSocket see RFC 7395:\n *  http://tools.ietf.org/html/rfc7395\n *\n *  WebSocket support implemented by Andreas Guth (andreas.guth@rwth-aachen.de)\n */\n\n/** PrivateConstructor: Strophe.Websocket\n *  Create and initialize a Strophe.WebSocket object.\n *  Currently only sets the connection Object.\n *\n *  Parameters:\n *    (Strophe.Connection) connection - The Strophe.Connection that will use WebSockets.\n *\n *  Returns:\n *    A new Strophe.WebSocket object.\n */\nStrophe.Websocket = function(connection) {\n    this._conn = connection;\n    this.strip = \"wrapper\";\n\n    var service = connection.service;\n    if (service.indexOf(\"ws:\") !== 0 && service.indexOf(\"wss:\") !== 0) {\n        // If the service is not an absolute URL, assume it is a path and put the absolute\n        // URL together from options, current URL and the path.\n        var new_service = \"\";\n\n        if (connection.options.protocol === \"ws\" && window.location.protocol !== \"https:\") {\n            new_service += \"ws\";\n        } else {\n            new_service += \"wss\";\n        }\n\n        new_service += \"://\" + window.location.host;\n\n        if (service.indexOf(\"/\") !== 0) {\n            new_service += window.location.pathname + service;\n        } else {\n            new_service += service;\n        }\n\n        connection.service = new_service;\n    }\n};\n\nStrophe.Websocket.prototype = {\n    /** PrivateFunction: _buildStream\n     *  _Private_ helper function to generate the <stream> start tag for WebSockets\n     *\n     *  Returns:\n     *    A Strophe.Builder with a <stream> element.\n     */\n    _buildStream: function () {\n        return $build(\"open\", {\n            \"xmlns\": Strophe.NS.FRAMING,\n            \"to\": this._conn.domain,\n            \"version\": '1.0'\n        });\n    },\n\n    /** PrivateFunction: _check_streamerror\n     * _Private_ checks a message for stream:error\n     *\n     *  Parameters:\n     *    (Strophe.Request) bodyWrap - The received stanza.\n     *    connectstatus - The ConnectStatus that will be set on error.\n     *  Returns:\n     *     true if there was a streamerror, false otherwise.\n     */\n    _check_streamerror: function (bodyWrap, connectstatus) {\n        var errors;\n        if (bodyWrap.getElementsByTagNameNS) {\n            errors = bodyWrap.getElementsByTagNameNS(Strophe.NS.STREAM, \"error\");\n        } else {\n            errors = bodyWrap.getElementsByTagName(\"stream:error\");\n        }\n        if (errors.length === 0) {\n            return false;\n        }\n        var error = errors[0];\n\n        var condition = \"\";\n        var text = \"\";\n\n        var ns = \"urn:ietf:params:xml:ns:xmpp-streams\";\n        for (var i = 0; i < error.childNodes.length; i++) {\n            var e = error.childNodes[i];\n            if (e.getAttribute(\"xmlns\") !== ns) {\n                break;\n            } if (e.nodeName === \"text\") {\n                text = e.textContent;\n            } else {\n                condition = e.nodeName;\n            }\n        }\n\n        var errorString = \"WebSocket stream error: \";\n\n        if (condition) {\n            errorString += condition;\n        } else {\n            errorString += \"unknown\";\n        }\n\n        if (text) {\n            errorString += \" - \" + text;\n        }\n\n        Strophe.error(errorString);\n\n        // close the connection on stream_error\n        this._conn._changeConnectStatus(connectstatus, condition);\n        this._conn._doDisconnect();\n        return true;\n    },\n\n    /** PrivateFunction: _reset\n     *  Reset the connection.\n     *\n     *  This function is called by the reset function of the Strophe Connection.\n     *  Is not needed by WebSockets.\n     */\n    _reset: function () {\n        return;\n    },\n\n    /** PrivateFunction: _connect\n     *  _Private_ function called by Strophe.Connection.connect\n     *\n     *  Creates a WebSocket for a connection and assigns Callbacks to it.\n     *  Does nothing if there already is a WebSocket.\n     */\n    _connect: function () {\n        // Ensure that there is no open WebSocket from a previous Connection.\n        this._closeSocket();\n\n        // Create the new WobSocket\n        this.socket = new WebSocket(this._conn.service, \"xmpp\");\n        this.socket.onopen = this._onOpen.bind(this);\n        this.socket.onerror = this._onError.bind(this);\n        this.socket.onclose = this._onClose.bind(this);\n        this.socket.onmessage = this._connect_cb_wrapper.bind(this);\n    },\n\n    /** PrivateFunction: _connect_cb\n     *  _Private_ function called by Strophe.Connection._connect_cb\n     *\n     * checks for stream:error\n     *\n     *  Parameters:\n     *    (Strophe.Request) bodyWrap - The received stanza.\n     */\n    _connect_cb: function(bodyWrap) {\n        var error = this._check_streamerror(bodyWrap, Strophe.Status.CONNFAIL);\n        if (error) {\n            return Strophe.Status.CONNFAIL;\n        }\n    },\n\n    /** PrivateFunction: _handleStreamStart\n     * _Private_ function that checks the opening <open /> tag for errors.\n     *\n     * Disconnects if there is an error and returns false, true otherwise.\n     *\n     *  Parameters:\n     *    (Node) message - Stanza containing the <open /> tag.\n     */\n    _handleStreamStart: function(message) {\n        var error = false;\n\n        // Check for errors in the <open /> tag\n        var ns = message.getAttribute(\"xmlns\");\n        if (typeof ns !== \"string\") {\n            error = \"Missing xmlns in <open />\";\n        } else if (ns !== Strophe.NS.FRAMING) {\n            error = \"Wrong xmlns in <open />: \" + ns;\n        }\n\n        var ver = message.getAttribute(\"version\");\n        if (typeof ver !== \"string\") {\n            error = \"Missing version in <open />\";\n        } else if (ver !== \"1.0\") {\n            error = \"Wrong version in <open />: \" + ver;\n        }\n\n        if (error) {\n            this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, error);\n            this._conn._doDisconnect();\n            return false;\n        }\n\n        return true;\n    },\n\n    /** PrivateFunction: _connect_cb_wrapper\n     * _Private_ function that handles the first connection messages.\n     *\n     * On receiving an opening stream tag this callback replaces itself with the real\n     * message handler. On receiving a stream error the connection is terminated.\n     */\n    _connect_cb_wrapper: function(message) {\n        if (message.data.indexOf(\"<open \") === 0 || message.data.indexOf(\"<?xml\") === 0) {\n            // Strip the XML Declaration, if there is one\n            var data = message.data.replace(/^(<\\?.*?\\?>\\s*)*/, \"\");\n            if (data === '') return;\n\n            var streamStart = new DOMParser().parseFromString(data, \"text/xml\").documentElement;\n            this._conn.xmlInput(streamStart);\n            this._conn.rawInput(message.data);\n\n            //_handleStreamSteart will check for XML errors and disconnect on error\n            if (this._handleStreamStart(streamStart)) {\n                //_connect_cb will check for stream:error and disconnect on error\n                this._connect_cb(streamStart);\n            }\n        } else if (message.data.indexOf(\"<close \") === 0) { // <close xmlns=\"urn:ietf:params:xml:ns:xmpp-framing />\n            this._conn.rawInput(message.data);\n            this._conn.xmlInput(message);\n            var see_uri = message.getAttribute(\"see-other-uri\");\n            if (see_uri) {\n                this._conn._changeConnectStatus(\n                    Strophe.Status.REDIRECT,\n                    \"Received see-other-uri, resetting connection\"\n                );\n                this._conn.reset();\n                this._conn.service = see_uri;\n                this._connect();\n            } else {\n                this._conn._changeConnectStatus(\n                    Strophe.Status.CONNFAIL,\n                    \"Received closing stream\"\n                );\n                this._conn._doDisconnect();\n            }\n        } else {\n            var string = this._streamWrap(message.data);\n            var elem = new DOMParser().parseFromString(string, \"text/xml\").documentElement;\n            this.socket.onmessage = this._onMessage.bind(this);\n            this._conn._connect_cb(elem, null, message.data);\n        }\n    },\n\n    /** PrivateFunction: _disconnect\n     *  _Private_ function called by Strophe.Connection.disconnect\n     *\n     *  Disconnects and sends a last stanza if one is given\n     *\n     *  Parameters:\n     *    (Request) pres - This stanza will be sent before disconnecting.\n     */\n    _disconnect: function (pres) {\n        if (this.socket && this.socket.readyState !== WebSocket.CLOSED) {\n            if (pres) {\n                this._conn.send(pres);\n            }\n            var close = $build(\"close\", { \"xmlns\": Strophe.NS.FRAMING });\n            this._conn.xmlOutput(close.tree());\n            var closeString = Strophe.serialize(close);\n            this._conn.rawOutput(closeString);\n            try {\n                this.socket.send(closeString);\n            } catch (e) {\n                Strophe.info(\"Couldn't send <close /> tag.\");\n            }\n        }\n        this._conn._doDisconnect();\n    },\n\n    /** PrivateFunction: _doDisconnect\n     *  _Private_ function to disconnect.\n     *\n     *  Just closes the Socket for WebSockets\n     */\n    _doDisconnect: function () {\n        Strophe.info(\"WebSockets _doDisconnect was called\");\n        this._closeSocket();\n    },\n\n    /** PrivateFunction _streamWrap\n     *  _Private_ helper function to wrap a stanza in a <stream> tag.\n     *  This is used so Strophe can process stanzas from WebSockets like BOSH\n     */\n    _streamWrap: function (stanza) {\n        return \"<wrapper>\" + stanza + '</wrapper>';\n    },\n\n\n    /** PrivateFunction: _closeSocket\n     *  _Private_ function to close the WebSocket.\n     *\n     *  Closes the socket if it is still open and deletes it\n     */\n    _closeSocket: function () {\n        if (this.socket) { try {\n            this.socket.onerror = null;\n            this.socket.close();\n        } catch (e) {} }\n        this.socket = null;\n    },\n\n    /** PrivateFunction: _emptyQueue\n     * _Private_ function to check if the message queue is empty.\n     *\n     *  Returns:\n     *    True, because WebSocket messages are send immediately after queueing.\n     */\n    _emptyQueue: function () {\n        return true;\n    },\n\n    /** PrivateFunction: _onClose\n     * _Private_ function to handle websockets closing.\n     *\n     * Nothing to do here for WebSockets\n     */\n    _onClose: function(e) {\n        if(this._conn.connected && !this._conn.disconnecting) {\n            Strophe.error(\"Websocket closed unexpectedly\");\n            this._conn._doDisconnect();\n        } else if (e && e.code === 1006 && !this._conn.connected && this.socket) {\n            // in case the onError callback was not called (Safari 10 does not\n            // call onerror when the initial connection fails) we need to\n            // dispatch a CONNFAIL status update to be consistent with the\n            // behavior on other browsers.\n            Strophe.error(\"Websocket closed unexcectedly\");\n            this._conn._changeConnectStatus(\n                Strophe.Status.CONNFAIL,\n                \"The WebSocket connection could not be established or was disconnected.\"\n            );\n            this._conn._doDisconnect();\n        } else {\n            Strophe.info(\"Websocket closed\");\n        }\n    },\n\n    /** PrivateFunction: _onDisconnectTimeout\n     *  _Private_ timeout handler for handling non-graceful disconnection.\n     *\n     *  This does nothing for WebSockets\n     */\n    _onDisconnectTimeout: function () {},\n\n    /** PrivateFunction: _abortAllRequests\n     *  _Private_ helper function that makes sure all pending requests are aborted.\n     */\n    _abortAllRequests: function () {},\n\n    /** PrivateFunction: _onError\n     * _Private_ function to handle websockets errors.\n     *\n     * Parameters:\n     * (Object) error - The websocket error.\n     */\n    _onError: function(error) {\n        Strophe.error(\"Websocket error \" + error);\n        this._conn._changeConnectStatus(\n            Strophe.Status.CONNFAIL,\n            \"The WebSocket connection could not be established or was disconnected.\"\n        );\n        this._disconnect();\n    },\n\n    /** PrivateFunction: _onIdle\n     *  _Private_ function called by Strophe.Connection._onIdle\n     *\n     *  sends all queued stanzas\n     */\n    _onIdle: function () {\n        var data = this._conn._data;\n        if (data.length > 0 && !this._conn.paused) {\n            for (var i = 0; i < data.length; i++) {\n                if (data[i] !== null) {\n                    var stanza, rawStanza;\n                    if (data[i] === \"restart\") {\n                        stanza = this._buildStream().tree();\n                    } else {\n                        stanza = data[i];\n                    }\n                    rawStanza = Strophe.serialize(stanza);\n                    this._conn.xmlOutput(stanza);\n                    this._conn.rawOutput(rawStanza);\n                    this.socket.send(rawStanza);\n                }\n            }\n            this._conn._data = [];\n        }\n    },\n\n    /** PrivateFunction: _onMessage\n     * _Private_ function to handle websockets messages.\n     *\n     * This function parses each of the messages as if they are full documents.\n     * [TODO : We may actually want to use a SAX Push parser].\n     *\n     * Since all XMPP traffic starts with\n     *  <stream:stream version='1.0'\n     *                 xml:lang='en'\n     *                 xmlns='jabber:client'\n     *                 xmlns:stream='http://etherx.jabber.org/streams'\n     *                 id='3697395463'\n     *                 from='SERVER'>\n     *\n     * The first stanza will always fail to be parsed.\n     *\n     * Additionally, the seconds stanza will always be <stream:features> with\n     * the stream NS defined in the previous stanza, so we need to 'force'\n     * the inclusion of the NS in this stanza.\n     *\n     * Parameters:\n     * (string) message - The websocket message.\n     */\n    _onMessage: function(message) {\n        var elem, data;\n        // check for closing stream\n        var close = '<close xmlns=\"urn:ietf:params:xml:ns:xmpp-framing\" />';\n        if (message.data === close) {\n            this._conn.rawInput(close);\n            this._conn.xmlInput(message);\n            if (!this._conn.disconnecting) {\n                this._conn._doDisconnect();\n            }\n            return;\n        } else if (message.data.search(\"<open \") === 0) {\n            // This handles stream restarts\n            elem = new DOMParser().parseFromString(message.data, \"text/xml\").documentElement;\n            if (!this._handleStreamStart(elem)) {\n                return;\n            }\n        } else {\n            data = this._streamWrap(message.data);\n            elem = new DOMParser().parseFromString(data, \"text/xml\").documentElement;\n        }\n\n        if (this._check_streamerror(elem, Strophe.Status.ERROR)) {\n            return;\n        }\n\n        //handle unavailable presence stanza before disconnecting\n        if (this._conn.disconnecting &&\n                elem.firstChild.nodeName === \"presence\" &&\n                elem.firstChild.getAttribute(\"type\") === \"unavailable\") {\n            this._conn.xmlInput(elem);\n            this._conn.rawInput(Strophe.serialize(elem));\n            // if we are already disconnecting we will ignore the unavailable stanza and\n            // wait for the </stream:stream> tag before we close the connection\n            return;\n        }\n        this._conn._dataRecv(elem, message.data);\n    },\n\n    /** PrivateFunction: _onOpen\n     * _Private_ function to handle websockets connection setup.\n     *\n     * The opening stream tag is sent here.\n     */\n    _onOpen: function() {\n        Strophe.info(\"Websocket open\");\n        var start = this._buildStream();\n        this._conn.xmlOutput(start.tree());\n\n        var startString = Strophe.serialize(start);\n        this._conn.rawOutput(startString);\n        this.socket.send(startString);\n    },\n\n    /** PrivateFunction: _reqToData\n     * _Private_ function to get a stanza out of a request.\n     *\n     * WebSockets don't use requests, so the passed argument is just returned.\n     *\n     *  Parameters:\n     *    (Object) stanza - The stanza.\n     *\n     *  Returns:\n     *    The stanza that was passed.\n     */\n    _reqToData: function (stanza) {\n        return stanza;\n    },\n\n    /** PrivateFunction: _send\n     *  _Private_ part of the Connection.send function for WebSocket\n     *\n     * Just flushes the messages that are in the queue\n     */\n    _send: function () {\n        this._conn.flush();\n    },\n\n    /** PrivateFunction: _sendRestart\n     *\n     *  Send an xmpp:restart stanza.\n     */\n    _sendRestart: function () {\n        clearTimeout(this._conn._idleTimeout);\n        this._conn._onIdle.bind(this._conn)();\n    }\n};\nreturn Strophe;\n}));\n\n(function(root){\n    if(typeof define === 'function' && define.amd){\n        define('strophe',[\n            \"strophe-core\",\n            \"strophe-bosh\",\n            \"strophe-websocket\"\n        ], function (wrapper) {\n            return wrapper;\n        });\n    } else if (typeof exports === 'object') {\n        var core = require('./core');\n        require('./bosh');\n        require('./websocket');\n        module.exports = core;\n    }\n})(this);\n\n\nrequire([\"strophe-polyfill\"]);\n/* jshint ignore:start */\n    //The modules for your project will be inlined above\n    //this snippet. Ask almond to synchronously require the\n    //module value for 'main' here and return it as the\n    //value to use for the public API for the built file.\n    return require('strophe');\n}));\n/* jshint ignore:end */\n\n\n\n// WEBPACK FOOTER //\n// ../strophe.js/strophe.js","/**\n * This utility class defines custom onerror and onunhandledrejection functions.\n * The custom error handlers respect the previously-defined error handlers.\n * GlobalOnErrorHandler class provides utilities to add many custom error\n * handlers and to execute the error handlers directly.\n */\n\n\n/**\n * List with global error handlers that will be executed.\n */\nconst handlers = [];\n\n// If an old handler exists, also fire its events.\nconst oldOnErrorHandler = window.onerror;\n\n/**\n * Custom error handler that calls the old global error handler and executes\n * all handlers that were previously added.\n */\nfunction JitsiGlobalErrorHandler(...args) {\n    handlers.forEach(handler => handler(...args));\n    oldOnErrorHandler && oldOnErrorHandler(...args);\n}\n\n// If an old handler exists, also fire its events.\nconst oldOnUnhandledRejection = window.onunhandledrejection;\n\n/**\n * Custom handler that calls the old global handler and executes all handlers\n * that were previously added. This handler handles rejected Promises.\n */\nfunction JitsiGlobalUnhandledRejection(event) {\n    handlers.forEach(handler => handler(null, null, null, null, event.reason));\n    oldOnUnhandledRejection && oldOnUnhandledRejection(event);\n}\n\n// Setting the custom error handlers.\nwindow.onerror = JitsiGlobalErrorHandler;\nwindow.onunhandledrejection = JitsiGlobalUnhandledRejection;\n\nconst GlobalOnErrorHandler = {\n    /**\n     * Adds new error handlers.\n     * @param handler the new handler.\n     */\n    addHandler(handler) {\n        handlers.push(handler);\n    },\n\n    /**\n     * Calls the global error handler if there is one.\n     * @param error the error to pass to the error handler\n     */\n    callErrorHandler(error) {\n        const errHandler = window.onerror;\n\n        if (!errHandler) {\n            return;\n        }\n        errHandler(null, null, null, null, error);\n    },\n\n    /**\n     * Calls the global rejection handler if there is one.\n     * @param error the error to pass to the rejection handler.\n     */\n    callUnhandledRejectionHandler(error) {\n        const errHandler = window.onunhandledrejection;\n\n        if (!errHandler) {\n            return;\n        }\n        errHandler(error);\n    }\n};\n\n\nmodule.exports = GlobalOnErrorHandler;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/GlobalOnErrorHandler.js","/**\n * The audio type.\n */\nexport const AUDIO = 'audio';\n\n/**\n * The video type.\n */\nexport const VIDEO = 'video';\n\n\n\n// WEBPACK FOOTER //\n// ./service/RTC/MediaType.js","import EventEmitter from 'events';\n\nimport { FEEDBACK } from '../../service/statistics/AnalyticsEvents';\nimport analytics from './AnalyticsAdapter';\nimport CallStats from './CallStats';\nimport LocalStats from './LocalStatsCollector';\nimport RTPStats from './RTPStatsCollector';\n\nimport browser from '../browser';\nimport Settings from '../settings/Settings';\nimport ScriptUtil from '../util/ScriptUtil';\nimport JitsiTrackError from '../../JitsiTrackError';\nimport * as StatisticsEvents from '../../service/statistics/Events';\n\nconst logger = require('jitsi-meet-logger').getLogger(__filename);\n\n/**\n * Stores all active {@link Statistics} instances.\n * @type {Set<Statistics>}\n */\nlet _instances;\n\n/**\n * True if callstats API is loaded\n */\nlet isCallstatsLoaded = false;\n\n/**\n * Since callstats.io is a third party, we cannot guarantee the quality of their\n * service. More specifically, their server may take noticeably long time to\n * respond. Consequently, it is in our best interest (in the sense that the\n * intergration of callstats.io is pretty important to us but not enough to\n * allow it to prevent people from joining a conference) to (1) start\n * downloading their API as soon as possible and (2) do the downloading\n * asynchronously.\n *\n * @param {StatisticsOptions} options - Options to use for downloading and\n * initializing callstats backend.\n */\nfunction loadCallStatsAPI(options) {\n    if (!isCallstatsLoaded) {\n        ScriptUtil.loadScript(\n            options.customScriptUrl\n                || 'https://api.callstats.io/static/callstats-ws.min.js',\n            /* async */ true,\n            /* prepend */ true,\n            /* relativeURL */ undefined,\n            /* loadCallback */ () => _initCallStatsBackend(options)\n        );\n        isCallstatsLoaded = true;\n    }\n}\n\n/**\n * Initializes Callstats backend.\n *\n * @param {StatisticsOptions} options - The options to use for initializing\n * callstats backend.\n * @private\n */\nfunction _initCallStatsBackend(options) {\n    if (CallStats.isBackendInitialized()) {\n        return;\n    }\n\n    const userName = Settings.callStatsUserName;\n\n    if (!CallStats.initBackend({\n        callStatsID: options.callStatsID,\n        callStatsSecret: options.callStatsSecret,\n        userName: options.swapUserNameAndAlias\n            ? options.callStatsAliasName : userName,\n        aliasName: options.swapUserNameAndAlias\n            ? userName : options.callStatsAliasName,\n        applicationName: options.applicationName,\n        getWiFiStatsMethod: options.getWiFiStatsMethod\n    })) {\n        logger.error('CallStats Backend initialization failed bad');\n    }\n}\n\n/**\n * callstats strips any additional fields from Error except for \"name\", \"stack\",\n * \"message\" and \"constraintName\". So we need to bundle additional information\n * from JitsiTrackError into error passed to callstats to preserve valuable\n * information about error.\n * @param {JitsiTrackError} error\n */\nfunction formatJitsiTrackErrorForCallStats(error) {\n    const err = new Error();\n\n    // Just copy original stack from error\n    err.stack = error.stack;\n\n    // Combine name from error's name plus (possibly) name of original GUM error\n    err.name = (error.name || 'Unknown error') + (error.gum && error.gum.error\n        && error.gum.error.name ? ` - ${error.gum.error.name}` : '');\n\n    // Put all constraints into this field. For constraint failed errors we will\n    // still know which exactly constraint failed as it will be a part of\n    // message.\n    err.constraintName = error.gum && error.gum.constraints\n        ? JSON.stringify(error.gum.constraints) : '';\n\n    // Just copy error's message.\n    err.message = error.message;\n\n    return err;\n}\n\n/**\n * Init statistic options\n * @param options\n */\nStatistics.init = function(options) {\n    Statistics.audioLevelsEnabled = !options.disableAudioLevels;\n\n    if (typeof options.audioLevelsInterval === 'number') {\n        Statistics.audioLevelsInterval = options.audioLevelsInterval;\n    }\n\n    Statistics.disableThirdPartyRequests = options.disableThirdPartyRequests;\n};\n\n/**\n * The options to configure Statistics.\n * @typedef {Object} StatisticsOptions\n * @property {string} applicationName - The application name to pass to\n * callstats.\n * @property {string} callStatsAliasName - The alias name to use when\n * initializing callstats.\n * @property {string} callStatsConfIDNamespace - A namespace to prepend the\n * callstats conference ID with.\n * @property {string} callStatsID - Callstats credentials - the id.\n * @property {string} callStatsSecret - Callstats credentials - the secret.\n * @property {string} customScriptUrl - A custom lib url to use when downloading\n * callstats library.\n * @property {string} roomName - The room name we are currently in.\n * @property {boolean} swapUserNameAndAlias - Whether to swap the places of\n * username and alias when initiating callstats.\n */\n/**\n *\n * @param xmpp\n * @param {StatisticsOptions} options - The options to use creating the\n * Statistics.\n */\nexport default function Statistics(xmpp, options) {\n    /**\n     * {@link RTPStats} mapped by {@link TraceablePeerConnection.id} which\n     * collect RTP statistics for each peerconnection.\n     * @type {Map<string, RTPStats}\n     */\n    this.rtpStatsMap = new Map();\n    this.eventEmitter = new EventEmitter();\n    this.xmpp = xmpp;\n    this.options = options || {};\n\n    this.callStatsIntegrationEnabled\n        = this.options.callStatsID && this.options.callStatsSecret\n\n            // Even though AppID and AppSecret may be specified, the integration\n            // of callstats.io may be disabled because of globally-disallowed\n            // requests to any third parties.\n            && (Statistics.disableThirdPartyRequests !== true);\n    if (this.callStatsIntegrationEnabled) {\n        if (browser.isReactNative()) {\n            _initCallStatsBackend(this.options);\n        } else {\n            loadCallStatsAPI(this.options);\n        }\n\n        if (!this.options.callStatsConfIDNamespace) {\n            logger.warn('\"callStatsConfIDNamespace\" is not defined');\n        }\n    }\n\n    /**\n     * Stores {@link CallStats} instances for each\n     * {@link TraceablePeerConnection} (one {@link CallStats} instance serves\n     * one TPC). The instances are mapped by {@link TraceablePeerConnection.id}.\n     * @type {Map<number, CallStats>}\n     */\n    this.callsStatsInstances = new Map();\n\n    Statistics.instances.add(this);\n}\nStatistics.audioLevelsEnabled = false;\nStatistics.audioLevelsInterval = 200;\nStatistics.disableThirdPartyRequests = false;\nStatistics.analytics = analytics;\n\nObject.defineProperty(Statistics, 'instances', {\n    /**\n     * Returns the Set holding all active {@link Statistics} instances. Lazily\n     * initializes the Set to allow any Set polyfills to be applied.\n     * @type {Set<Statistics>}\n     */\n    get() {\n        if (!_instances) {\n            _instances = new Set();\n        }\n\n        return _instances;\n    }\n});\n\n/**\n * Starts collecting RTP stats for given peerconnection.\n * @param {TraceablePeerConnection} peerconnection\n */\nStatistics.prototype.startRemoteStats = function(peerconnection) {\n    this.stopRemoteStats(peerconnection);\n\n    try {\n        const rtpStats\n            = new RTPStats(\n                peerconnection,\n                Statistics.audioLevelsInterval,\n                2000,\n                this.eventEmitter);\n\n        rtpStats.start(Statistics.audioLevelsEnabled);\n        this.rtpStatsMap.set(peerconnection.id, rtpStats);\n    } catch (e) {\n        logger.error(`Failed to start collecting remote statistics: ${e}`);\n    }\n};\n\nStatistics.localStats = [];\n\nStatistics.startLocalStats = function(stream, callback) {\n    if (!Statistics.audioLevelsEnabled) {\n        return;\n    }\n    const localStats = new LocalStats(stream, Statistics.audioLevelsInterval,\n        callback);\n\n    this.localStats.push(localStats);\n    localStats.start();\n};\n\nStatistics.prototype.addAudioLevelListener = function(listener) {\n    if (!Statistics.audioLevelsEnabled) {\n        return;\n    }\n    this.eventEmitter.on(StatisticsEvents.AUDIO_LEVEL, listener);\n};\n\nStatistics.prototype.removeAudioLevelListener = function(listener) {\n    if (!Statistics.audioLevelsEnabled) {\n        return;\n    }\n    this.eventEmitter.removeListener(StatisticsEvents.AUDIO_LEVEL, listener);\n};\n\nStatistics.prototype.addBeforeDisposedListener = function(listener) {\n    this.eventEmitter.on(StatisticsEvents.BEFORE_DISPOSED, listener);\n};\n\nStatistics.prototype.removeBeforeDisposedListener = function(listener) {\n    this.eventEmitter.removeListener(\n        StatisticsEvents.BEFORE_DISPOSED, listener);\n};\n\nStatistics.prototype.addConnectionStatsListener = function(listener) {\n    this.eventEmitter.on(StatisticsEvents.CONNECTION_STATS, listener);\n};\n\nStatistics.prototype.removeConnectionStatsListener = function(listener) {\n    this.eventEmitter.removeListener(\n        StatisticsEvents.CONNECTION_STATS,\n        listener);\n};\n\nStatistics.prototype.addByteSentStatsListener = function(listener) {\n    this.eventEmitter.on(StatisticsEvents.BYTE_SENT_STATS, listener);\n};\n\nStatistics.prototype.removeByteSentStatsListener = function(listener) {\n    this.eventEmitter.removeListener(StatisticsEvents.BYTE_SENT_STATS,\n        listener);\n};\n\nStatistics.prototype.dispose = function() {\n    try {\n        // NOTE Before reading this please see the comment in stopCallStats...\n        //\n        // Here we prevent from emitting the event twice in case it will be\n        // triggered from stopCallStats.\n        // If the event is triggered from here it means that the logs will not\n        // be submitted anyway (because there is no CallStats instance), but\n        // we're doing that for the sake of some kind of consistency.\n        if (!this.callsStatsInstances.size) {\n            this.eventEmitter.emit(StatisticsEvents.BEFORE_DISPOSED);\n        }\n        for (const callStats of this.callsStatsInstances.values()) {\n            this.stopCallStats(callStats.tpc);\n        }\n        for (const tpcId of this.rtpStatsMap.keys()) {\n            this._stopRemoteStats(tpcId);\n        }\n        if (this.eventEmitter) {\n            this.eventEmitter.removeAllListeners();\n        }\n    } finally {\n        Statistics.instances.delete(this);\n    }\n};\n\nStatistics.stopLocalStats = function(stream) {\n    if (!Statistics.audioLevelsEnabled) {\n        return;\n    }\n\n    for (let i = 0; i < Statistics.localStats.length; i++) {\n        if (Statistics.localStats[i].stream === stream) {\n            const localStats = Statistics.localStats.splice(i, 1);\n\n            localStats[0].stop();\n            break;\n        }\n    }\n};\n\n/**\n * Stops remote RTP stats for given peerconnection ID.\n * @param {string} tpcId {@link TraceablePeerConnection.id}\n * @private\n */\nStatistics.prototype._stopRemoteStats = function(tpcId) {\n    const rtpStats = this.rtpStatsMap.get(tpcId);\n\n    if (rtpStats) {\n        rtpStats.stop();\n        this.rtpStatsMap.delete(tpcId);\n    }\n};\n\n/**\n * Stops collecting RTP stats for given peerconnection\n * @param {TraceablePeerConnection} tpc\n */\nStatistics.prototype.stopRemoteStats = function(tpc) {\n    this._stopRemoteStats(tpc.id);\n};\n\n// CALSTATS METHODS\n\n/**\n * Initializes the callstats.io API.\n * @param {TraceablePeerConnection} tpc the {@link TraceablePeerConnection}\n * instance for which CalStats will be started.\n * @param {string} remoteUserID\n */\nStatistics.prototype.startCallStats = function(tpc, remoteUserID) {\n    if (!this.callStatsIntegrationEnabled) {\n        return;\n    } else if (this.callsStatsInstances.has(tpc.id)) {\n        logger.error('CallStats instance for ${tpc} exists already');\n\n        return;\n    }\n\n    logger.info(`Starting CallStats for ${tpc}...`);\n\n    const newInstance\n        = new CallStats(\n            tpc,\n            {\n                confID: this._getCallStatsConfID(),\n                remoteUserID\n            });\n\n    this.callsStatsInstances.set(tpc.id, newInstance);\n};\n\n/**\n * Obtains the list of *all* {@link CallStats} instances collected from every\n * valid {@link Statistics} instance.\n * @return {Set<CallStats>}\n * @private\n */\nStatistics._getAllCallStatsInstances = function() {\n    const csInstances = new Set();\n\n    for (const statistics of Statistics.instances) {\n        for (const cs of statistics.callsStatsInstances.values()) {\n            csInstances.add(cs);\n        }\n    }\n\n    return csInstances;\n};\n\n/**\n * Constructs the CallStats conference ID based on the options currently\n * configured in this instance.\n * @return {string}\n * @private\n */\nStatistics.prototype._getCallStatsConfID = function() {\n    // The conference ID is case sensitive!!!\n    return this.options.callStatsConfIDNamespace\n        ? `${this.options.callStatsConfIDNamespace}/${this.options.roomName}`\n        : this.options.roomName;\n};\n\n/**\n * Removes the callstats.io instances.\n */\nStatistics.prototype.stopCallStats = function(tpc) {\n    const callStatsInstance = this.callsStatsInstances.get(tpc.id);\n\n    if (callStatsInstance) {\n        // FIXME the original purpose of adding BEFORE_DISPOSED event was to be\n        // able to submit the last log batch from jitsi-meet to CallStats. After\n        // recent changes we dispose the CallStats earlier\n        // (before Statistics.dispose), so we need to emit this event here to\n        // give this last chance for final log batch submission.\n        //\n        // Eventually there should be a separate module called \"log storage\"\n        // which should emit proper events when it's underlying\n        // CallStats instance is going away.\n        if (this.callsStatsInstances.size === 1) {\n            this.eventEmitter.emit(StatisticsEvents.BEFORE_DISPOSED);\n        }\n        this.callsStatsInstances.delete(tpc.id);\n\n        // The fabric needs to be terminated when being stopped\n        callStatsInstance.sendTerminateEvent();\n    }\n};\n\n/**\n * Returns true if the callstats integration is enabled, otherwise returns\n * false.\n *\n * @returns true if the callstats integration is enabled, otherwise returns\n * false.\n */\nStatistics.prototype.isCallstatsEnabled = function() {\n    return this.callStatsIntegrationEnabled;\n};\n\n/**\n * Logs either resume or hold event for the given peer connection.\n * @param {TraceablePeerConnection} tpc the connection for which event will be\n * reported\n * @param {boolean} isResume true for resume or false for hold\n */\nStatistics.prototype.sendConnectionResumeOrHoldEvent = function(tpc, isResume) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.sendResumeOrHoldEvent(isResume);\n    }\n};\n\n/**\n * Notifies CallStats and analytics (if present) for ice connection failed\n * @param {TraceablePeerConnection} tpc connection on which failure occurred.\n */\nStatistics.prototype.sendIceConnectionFailedEvent = function(tpc) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.sendIceConnectionFailedEvent();\n    }\n};\n\n/**\n * Notifies CallStats for mute events\n * @param {TraceablePeerConnection} tpc connection on which failure occurred.\n * @param {boolean} muted true for muted and false for not muted\n * @param {String} type \"audio\"/\"video\"\n */\nStatistics.prototype.sendMuteEvent = function(tpc, muted, type) {\n    const instance = tpc && this.callsStatsInstances.get(tpc.id);\n\n    CallStats.sendMuteEvent(muted, type, instance);\n};\n\n/**\n * Notifies CallStats for screen sharing events\n * @param start {boolean} true for starting screen sharing and\n * false for not stopping\n * @param {string|null} ssrc - optional ssrc value, used only when\n * starting screen sharing.\n */\nStatistics.prototype.sendScreenSharingEvent\n    = function(start, ssrc) {\n        for (const cs of this.callsStatsInstances.values()) {\n            cs.sendScreenSharingEvent(start, ssrc);\n        }\n    };\n\n/**\n * Notifies the statistics module that we are now the dominant speaker of the\n * conference.\n */\nStatistics.prototype.sendDominantSpeakerEvent = function() {\n    for (const cs of this.callsStatsInstances.values()) {\n        cs.sendDominantSpeakerEvent();\n    }\n};\n\n/**\n * Notifies about active device.\n * @param {{deviceList: {String:String}}} devicesData - list of devices with\n *      their data\n */\nStatistics.sendActiveDeviceListEvent = function(devicesData) {\n    const globalSet = Statistics._getAllCallStatsInstances();\n\n    if (globalSet.size) {\n        for (const cs of globalSet) {\n            CallStats.sendActiveDeviceListEvent(devicesData, cs);\n        }\n    } else {\n        CallStats.sendActiveDeviceListEvent(devicesData, null);\n    }\n};\n\n/* eslint-disable max-params */\n\n/**\n * Lets the underlying statistics module know where is given SSRC rendered by\n * providing renderer tag ID.\n * @param {TraceablePeerConnection} tpc the connection to which the stream\n * belongs to\n * @param {number} ssrc the SSRC of the stream\n * @param {boolean} isLocal\n * @param {string} userId\n * @param {string} usageLabel  meaningful usage label of this stream like\n *        'microphone', 'camera' or 'screen'.\n * @param {string} containerId the id of media 'audio' or 'video' tag which\n *        renders the stream.\n */\nStatistics.prototype.associateStreamWithVideoTag = function(\n        tpc,\n        ssrc,\n        isLocal,\n        userId,\n        usageLabel,\n        containerId) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.associateStreamWithVideoTag(\n            ssrc,\n            isLocal,\n            userId,\n            usageLabel,\n            containerId);\n    }\n};\n\n/* eslint-enable max-params */\n\n/**\n * Notifies CallStats that getUserMedia failed.\n *\n * @param {Error} e error to send\n */\nStatistics.sendGetUserMediaFailed = function(e) {\n    const error\n        = e instanceof JitsiTrackError\n            ? formatJitsiTrackErrorForCallStats(e) : e;\n    const globalSet = Statistics._getAllCallStatsInstances();\n\n    if (globalSet.size) {\n        for (const cs of globalSet) {\n            CallStats.sendGetUserMediaFailed(error, cs);\n        }\n    } else {\n        CallStats.sendGetUserMediaFailed(error, null);\n    }\n};\n\n/**\n * Notifies CallStats that peer connection failed to create offer.\n *\n * @param {Error} e error to send\n * @param {TraceablePeerConnection} tpc connection on which failure occurred.\n */\nStatistics.prototype.sendCreateOfferFailed = function(e, tpc) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.sendCreateOfferFailed(e);\n    }\n};\n\n/**\n * Notifies CallStats that peer connection failed to create answer.\n *\n * @param {Error} e error to send\n * @param {TraceablePeerConnection} tpc connection on which failure occured.\n */\nStatistics.prototype.sendCreateAnswerFailed = function(e, tpc) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.sendCreateAnswerFailed(e);\n    }\n};\n\n/**\n * Notifies CallStats that peer connection failed to set local description.\n *\n * @param {Error} e error to send\n * @param {TraceablePeerConnection} tpc connection on which failure occurred.\n */\nStatistics.prototype.sendSetLocalDescFailed = function(e, tpc) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.sendSetLocalDescFailed(e);\n    }\n};\n\n/**\n * Notifies CallStats that peer connection failed to set remote description.\n *\n * @param {Error} e error to send\n * @param {TraceablePeerConnection} tpc connection on which failure occurred.\n */\nStatistics.prototype.sendSetRemoteDescFailed = function(e, tpc) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.sendSetRemoteDescFailed(e);\n    }\n};\n\n/**\n * Notifies CallStats that peer connection failed to add ICE candidate.\n *\n * @param {Error} e error to send\n * @param {TraceablePeerConnection} tpc connection on which failure occurred.\n */\nStatistics.prototype.sendAddIceCandidateFailed = function(e, tpc) {\n    const instance = this.callsStatsInstances.get(tpc.id);\n\n    if (instance) {\n        instance.sendAddIceCandidateFailed(e);\n    }\n};\n\n/**\n * Adds to CallStats an application log.\n *\n * @param {String} m a log message to send or an {Error} object to be reported\n */\nStatistics.sendLog = function(m) {\n    const globalSubSet = new Set();\n\n    // FIXME we don't want to duplicate logs over P2P instance, but\n    // here we should go over instances and call this method for each\n    // unique conference ID rather than selecting the first one.\n    // We don't have such use case though, so leaving as is for now.\n    for (const stats of Statistics.instances) {\n        if (stats.callsStatsInstances.size) {\n            globalSubSet.add(stats.callsStatsInstances.values().next().value);\n        }\n    }\n\n    if (globalSubSet.size) {\n        for (const csPerStats of globalSubSet) {\n            CallStats.sendApplicationLog(m, csPerStats);\n        }\n    } else {\n        CallStats.sendApplicationLog(m, null);\n    }\n};\n\n/**\n * Sends the given feedback through CallStats.\n *\n * @param overall an integer between 1 and 5 indicating the user's rating.\n * @param comment the comment from the user.\n */\nStatistics.prototype.sendFeedback = function(overall, comment) {\n    CallStats.sendFeedback(this._getCallStatsConfID(), overall, comment);\n    Statistics.analytics.sendEvent(\n        FEEDBACK,\n        {\n            rating: overall,\n            comment\n        });\n};\n\nStatistics.LOCAL_JID = require('../../service/statistics/constants').LOCAL_JID;\n\n/**\n * Reports global error to CallStats.\n *\n * @param {Error} error\n */\nStatistics.reportGlobalError = function(error) {\n    if (error instanceof JitsiTrackError && error.gum) {\n        Statistics.sendGetUserMediaFailed(error);\n    } else {\n        Statistics.sendLog(error);\n    }\n};\n\n/**\n * Sends event to analytics and logs a message to the logger/console. Console\n * messages might also be logged to callstats automatically.\n *\n * @param {string | Object} event the event name, or an object which\n * represents the entire event.\n * @param {Object} properties properties to attach to the event (if an event\n * name as opposed to an event object is provided).\n */\nStatistics.sendAnalyticsAndLog = function(event, properties = {}) {\n    if (!event) {\n        logger.warn('No event or event name given.');\n\n        return;\n    }\n\n    let eventToLog;\n\n    // Also support an API with a single object as an event.\n    if (typeof event === 'object') {\n        eventToLog = event;\n    } else {\n        eventToLog = {\n            name: event,\n            properties\n        };\n    }\n\n    logger.log(JSON.stringify(eventToLog));\n\n    // We do this last, because it may modify the object which is passed.\n    this.analytics.sendEvent(event, properties);\n};\n\n/**\n * Sends event to analytics.\n *\n * @param {string | Object} eventName the event name, or an object which\n * represents the entire event.\n * @param {Object} properties properties to attach to the event\n */\nStatistics.sendAnalytics = function(eventName, properties = {}) {\n    this.analytics.sendEvent(eventName, properties);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/statistics.js","/**\n * This class exports constants and factory methods related to the analytics\n * API provided by AnalyticsAdapter. In order for entries in a database to be\n * somewhat easily traceable back to the code which produced them, events sent\n * through analytics should be defined here.\n *\n * Since the AnalyticsAdapter API can be used in different ways, for some events\n * it is more convenient to just define the event name as a constant. For other\n * events a factory function is easier.\n *\n * A general approach for adding a new event:\n * 1. Determine the event type: track, UI, page, or operational. If in doubt use\n * operational.\n * 2. Determine whether the event is related to other existing events, and\n * which fields are desired to be set: name, action, actionSubject, source.\n * 3. If the name is sufficient (the other fields are not important), use a\n * constant. Otherwise use a factory function.\n *\n * Note that the AnalyticsAdapter uses the events passed to its functions for\n * its own purposes, and might modify them. Because of this factory functions\n * should create new objects.\n *\n */\n\n/**\n * The constant which identifies an event of type \"operational\".\n * @type {string}\n */\nexport const TYPE_OPERATIONAL = 'operational';\n\n/**\n * The constant which identifies an event of type \"page\".\n * @type {string}\n */\nexport const TYPE_PAGE = 'page';\n\n/**\n * The constant which identifies an event of type \"track\".\n * @type {string}\n */\nexport const TYPE_TRACK = 'track';\n\n/**\n * The constant which identifies an event of type \"ui\".\n * @type {string}\n */\nexport const TYPE_UI = 'ui';\n\n/**\n * The \"action\" value for Jingle events which indicates that the Jingle session\n * was restarted (TODO: verify/fix the documentation)\n * @type {string}\n */\nexport const ACTION_JINGLE_RESTART = 'restart';\n\n/**\n * The \"action\" value for Jingle events which indicates that a session-accept\n * timed out (TODO: verify/fix the documentation)\n * @type {string}\n */\nexport const ACTION_JINGLE_SA_TIMEOUT = 'session-accept.timeout';\n\n/**\n * The \"action\" value for Jingle events which indicates that a session-initiate\n * was received.\n * @type {string}\n */\nexport const ACTION_JINGLE_SI_RECEIVED = 'session-initiate.received';\n\n/**\n * A constant for the \"terminate\" action for Jingle events. TODO: verify/fix\n * the documentation)\n * @type {string}\n */\nexport const ACTION_JINGLE_TERMINATE = 'terminate';\n\n/**\n * The \"action\" value for Jingle events which indicates that a transport-replace\n * was received.\n * @type {string}\n */\nexport const ACTION_JINGLE_TR_RECEIVED\n    = 'transport-replace.received';\n\n/**\n * The \"action\" value for Jingle events which indicates that a transport-replace\n * succeeded (TODO: verify/fix the documentation)\n * @type {string}\n */\nexport const ACTION_JINGLE_TR_SUCCESS\n    = 'transport-replace.success';\n\n/**\n * The \"action\" value for P2P events which indicates that a connection was\n * established (TODO: verify/fix the documentation)\n * @type {string}\n */\nexport const ACTION_P2P_ESTABLISHED = 'established';\n\n/**\n * The \"action\" value for P2P events which indicates that something failed.\n * @type {string}\n */\nexport const ACTION_P2P_FAILED = 'failed';\n\n/**\n * The \"action\" value for P2P events which indicates that a switch to\n * jitsi-videobridge happened.\n * @type {string}\n */\nexport const ACTION_P2P_SWITCH_TO_JVB = 'switch.to.jvb';\n\n/**\n * The name of an event which indicates an available device. We send one such\n * event per available device once when the available devices are first known,\n * and every time that they change\n * @type {string}\n *\n * Properties:\n *      audio_input_device_count: the number of audio input devices available at\n *          the time the event was sent.\n *      audio_output_device_count: the number of audio output devices available\n *          at the time the event was sent.\n *      video_input_device_count: the number of video input devices available at\n *          the time the event was sent.\n *      video_output_device_count: the number of video output devices available\n *          at the time the event was sent.\n *      device_id: an identifier of the device described in this event.\n *      device_group_id:\n *      device_kind: one of 'audioinput', 'audiooutput', 'videoinput' or\n *          'videooutput'.\n *      device_label: a string which describes the device.\n */\nexport const AVAILABLE_DEVICE = 'available.device';\n\n/**\n * This appears to be fired only in certain cases when the XMPP connection\n * disconnects (and it was intentional?). It is currently never observed to\n * fire in production.\n *\n * TODO: document\n *\n * Properties:\n *      message: an error message\n */\nexport const CONNECTION_DISCONNECTED = 'connection.disconnected';\n\n/**\n * Indicates that the user of the application provided feedback in terms of a\n * rating (an integer from 1 to 5) and an optional comment.\n * Properties:\n *      value: the user's rating (an integer from 1 to 5)\n *      comment: the user's comment\n */\nexport const FEEDBACK = 'feedback';\n\n/**\n * Indicates the duration of a particular phase of the ICE connectivity\n * establishment.\n *\n * Properties:\n *      phase: the ICE phase (e.g. 'gathering', 'checking', 'establishment')\n *      value: the duration in milliseconds.\n *      p2p: whether the associated ICE connection is p2p or towards a\n *          jitsi-videobridge\n *      initiator: whether the local Jingle peer is the initiator or responder\n *          in the Jingle session. XXX we probably actually care about the ICE\n *          role (controlling vs controlled), and we assume that this correlates\n *          with the Jingle initiator.\n */\nexport const ICE_DURATION = 'ice.duration';\n\n/**\n * Indicates the difference in milliseconds between the ICE establishment time\n * for the P2P and JVB connections (e.g. a value of 10 would indicate that the\n * P2P connection took 10ms more than JVB connection to establish).\n *\n * Properties:\n *      value: the difference in establishment durations in milliseconds.\n *\n */\nexport const ICE_ESTABLISHMENT_DURATION_DIFF\n    = 'ice.establishment.duration.diff';\n\n/**\n * Indicates that the ICE state has changed.\n *\n * Properties:\n *      state: the ICE state which was entered (e.g. 'checking', 'connected',\n *          'completed', etc).\n *      value: the time in milliseconds (as reported by\n *          window.performance.now()) that the state change occurred.\n *      p2p: whether the associated ICE connection is p2p or towards a\n *          jitsi-videobridge\n *      signalingState: The signaling state of the associated PeerConnection\n *      reconnect: whether the associated Jingle session is in the process of\n *          reconnecting (or is it ICE? TODO: verify/fix the documentation)\n */\nexport const ICE_STATE_CHANGED = 'ice.state.changed';\n\n/**\n * Indicates that a track was unmuted (?).\n *\n * Properties:\n *      mediaType: the media type of the local track ('audio' or 'video').\n *      trackType: the type of the track ('local' or 'remote').\n *      value: TODO: document\n */\nexport const TRACK_UNMUTED = 'track.unmuted';\n\n/**\n * Creates an operational event which indicates that we have received a\n * \"bridge down\" event from jicofo.\n */\nexport const createBridgeDownEvent = function() {\n    const bridgeDown = 'bridge.down';\n\n    return {\n        action: bridgeDown,\n        actionSubject: bridgeDown,\n        type: TYPE_OPERATIONAL\n    };\n};\n\n/**\n * Creates an event which indicates that the XMPP connection failed\n * @param errorType TODO\n * @param errorMessage TODO\n * @param detail connection failed details.\n */\nexport const createConnectionFailedEvent\n    = function(errorType, errorMessage, details) {\n        return {\n            type: TYPE_OPERATIONAL,\n            action: 'connection.failed',\n            attributes: {\n                'error_type': errorType,\n                'error_message': errorMessage,\n                ...details\n            }\n        };\n    };\n\n/**\n * Creates an operational event which indicates that a particular connection\n * stage was reached (i.e. the XMPP connection transitioned to the \"connected\"\n * state).\n *\n * @param stage the stage which was reached\n * @param attributes additional attributes for the event. This should be an\n * object with a \"value\" property indicating a timestamp in milliseconds\n * relative to the beginning of the document's lifetime.\n *\n */\nexport const createConnectionStageReachedEvent = function(stage, attributes) {\n    const action = 'connection.stage.reached';\n\n    return {\n        action,\n        actionSubject: stage,\n        attributes,\n        source: action,\n        type: TYPE_OPERATIONAL\n    };\n};\n\n/**\n * Creates an event which indicates that the focus has left the MUC.\n */\nexport const createFocusLeftEvent = function() {\n    const action = 'focus.left';\n\n    return {\n        action,\n        actionSubject: action,\n        type: TYPE_OPERATIONAL\n    };\n};\n\n/**\n * Creates an event related to a getUserMedia call.\n *\n * @param action the type of the result that the event represents: 'error',\n * 'success', 'warning', etc.\n * @param attributes the attributes to attach to the event.\n * @returns {{type: string, source: string, name: string}}\n */\nexport const createGetUserMediaEvent = function(action, attributes = {}) {\n    return {\n        type: TYPE_OPERATIONAL,\n        source: 'get.user.media',\n        action,\n        attributes\n    };\n};\n\n/**\n * Creates an event for a Jingle-related event.\n * @param action the action of the event\n * @param attributes attributes to add to the event.\n */\nexport const createJingleEvent = function(action, attributes = {}) {\n    return {\n        type: TYPE_OPERATIONAL,\n        action,\n        source: 'jingle',\n        attributes\n    };\n};\n\n/**\n * Creates an event which indicates that a local track was not able to read\n * data from its source (a camera or a microphone).\n *\n * @param mediaType {String} the media type of the local track ('audio' or\n * 'video').\n */\nexport const createNoDataFromSourceEvent = function(mediaType) {\n    return {\n        attributes: { 'media_type': mediaType },\n        action: 'track.no.data.from.source',\n        type: TYPE_OPERATIONAL\n    };\n};\n\n/**\n * Creates an event for a p2p-related event.\n * @param action the action of the event\n * @param attributes attributes to add to the event.\n */\nexport const createP2PEvent = function(action, attributes = {}) {\n    return {\n        type: TYPE_OPERATIONAL,\n        action,\n        source: 'p2p',\n        attributes\n    };\n};\n\n/**\n * Indicates that we received a remote command to mute.\n */\nexport const createRemotelyMutedEvent = function() {\n    return {\n        type: TYPE_OPERATIONAL,\n        action: 'remotely.muted'\n    };\n};\n\n/**\n * Creates an event which contains RTP statistics such as RTT and packet loss.\n *\n * All average RTP stats are currently reported under 1 event name, but with\n * different properties that allows to distinguish between a P2P call, a\n * call relayed through TURN or the JVB, and multiparty vs 1:1.\n *\n * The structure of the event is:\n *\n * {\n *      p2p: true,\n *      conferenceSize: 2,\n *      localCandidateType: \"relay\",\n *      remoteCandidateType: \"relay\",\n *      transportType: \"udp\",\n *\n *      // Average RTT of 200ms\n *      \"rtt.avg\": 200,\n *      \"rtt.samples\": \"[100, 200, 300]\",\n *\n *      // Average packet loss of 10%\n *      \"packet.loss.avg\": 10,\n *      \"packet.loss.samples\": '[5, 10, 15]'\n *\n *      // Difference in milliseconds in the end-to-end RTT between p2p and jvb.\n *      // The e2e RTT through jvb is 15ms shorter:\n *      \"rtt.diff\": 15,\n *\n *      // End-to-end RTT through JVB is ms.\n *      \"end2end.rtt.avg\" = 100\n * }\n *\n * Note that the value of the \"samples\" properties are (JSON encoded) strings,\n * and not JSON arrays, as events' attributes can not be nested. The samples are\n * currently included for debug purposes only and can be removed anytime soon\n * from the structure.\n *\n * Also note that not all of values are present in each event, as values are\n * obtained and calculated as part of different process/event pipe. For example\n * {@link ConnectionAvgStats} instances are doing the reports for each\n * {@link TraceablePeerConnection} and work independently from the main stats\n * pipe.\n */\nexport const createRtpStatsEvent = function(attributes) {\n    return {\n        type: TYPE_OPERATIONAL,\n        action: 'rtp.stats',\n        attributes\n    };\n};\n\n/**\n * Creates an event which indicates the Time To First Media (TTFM).\n * It is measured in milliseconds relative to the beginning of the document's\n * lifetime (i.e. the origin used by window.performance.now()), and it excludes\n * the following:\n * 1. The delay due to getUserMedia()\n * 2. The period between the MUC being joined and the reception of the Jingle\n * session-initiate from jicofo. This is because jicofo will not start a Jingle\n * session until there are at least 2 participants in the room.\n *\n * @param attributes the attributes to add to the event. Currently used fields:\n *      mediaType: the media type of the local track ('audio' or 'video').\n *      muted: whether the track has ever been muted (?)\n *      value: the TTMF in milliseconds.\n */\nexport const createTtfmEvent = function(attributes) {\n    return createConnectionStageReachedEvent('ttfm', attributes);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./service/statistics/AnalyticsEvents.js","/**\n * The events for the conference.\n */\n\n/**\n * Indicates that authentication status changed.\n */\nexport const AUTH_STATUS_CHANGED = 'conference.auth_status_changed';\n\n/**\n * Indicates that available devices changed.\n */\nexport const AVAILABLE_DEVICES_CHANGED = 'conference.availableDevicesChanged';\n\n/**\n * A participant avatar has changed.\n */\nexport const AVATAR_CHANGED = 'conference.avatarChanged';\n\n/**\n * Fired just before the statistics module is disposed and it's the last chance\n * to submit some logs to the statistics service (ex. CallStats if enabled),\n * before it's disconnected.\n */\nexport const BEFORE_STATISTICS_DISPOSED = 'conference.beforeStatisticsDisposed';\n\n/**\n * Indicates that an error occured.\n */\nexport const CONFERENCE_ERROR = 'conference.error';\n\n/**\n * Indicates that conference failed.\n */\nexport const CONFERENCE_FAILED = 'conference.failed';\n\n/**\n * Indicates that conference has been joined. The event does NOT provide any\n * parameters to its listeners.\n */\nexport const CONFERENCE_JOINED = 'conference.joined';\n\n/**\n * Indicates that conference has been left.\n */\nexport const CONFERENCE_LEFT = 'conference.left';\n\n/**\n * Indicates that the connection to the conference has been interrupted for some\n * reason.\n * XXX This is currently fired when the *ICE* connection is interrupted.\n */\nexport const CONNECTION_INTERRUPTED = 'conference.connectionInterrupted';\n\n/**\n * Indicates that the connection to the conference has been restored.\n * XXX This is currently fired when the *ICE* connection is restored.\n */\nexport const CONNECTION_RESTORED = 'conference.connectionRestored';\n\n/**\n * A connection to the video bridge's data channel has been established.\n */\nexport const DATA_CHANNEL_OPENED = 'conference.dataChannelOpened';\n\n/**\n * A user has changed it display name\n */\nexport const DISPLAY_NAME_CHANGED = 'conference.displayNameChanged';\n\n/**\n * The dominant speaker was changed.\n */\nexport const DOMINANT_SPEAKER_CHANGED = 'conference.dominantSpeaker';\n\n/**\n * Indicates that DTMF support changed.\n */\nexport const DTMF_SUPPORT_CHANGED = 'conference.dtmfSupportChanged';\n\n/**\n * Indicates that a message from another participant is received on data\n * channel.\n */\nexport const ENDPOINT_MESSAGE_RECEIVED = 'conference.endpoint_message_received';\n\n/**\n * NOTE This is lib-jitsi-meet internal event and can be removed at any time !\n *\n * Event emitted when conference transits, between one to one and multiparty JVB\n * conference. If the conference switches to P2P it's neither one to one nor\n * a multiparty JVB conference, but P2P (the status argument of this event will\n * be <tt>false</tt>).\n *\n * The first argument is a boolean which carries the previous value and\n * the seconds argument is a boolean with the new status. The event is emitted\n * only if the previous and the new values are different.\n *\n * @type {string}\n */\nexport const JVB121_STATUS = 'conference.jvb121Status';\n\n/**\n * You are kicked from the conference.\n */\nexport const KICKED = 'conferenece.kicked';\n\n/**\n * The Last N set is changed.\n *\n * @param {Array<string>|null} leavingEndpointIds the ids of all the endpoints\n * which are leaving Last N\n * @param {Array<string>|null} enteringEndpointIds the ids of all the endpoints\n * which are entering Last N\n */\nexport const LAST_N_ENDPOINTS_CHANGED = 'conference.lastNEndpointsChanged';\n\n/**\n * Indicates that the room has been locked or unlocked.\n */\nexport const LOCK_STATE_CHANGED = 'conference.lock_state_changed';\n\n/**\n * New text message was received.\n */\nexport const MESSAGE_RECEIVED = 'conference.messageReceived';\n\n/**\n * New private text message was received.\n */\nexport const PRIVATE_MESSAGE_RECEIVED = 'conference.privateMessageReceived';\n\n/**\n * Event fired when JVB sends notification about interrupted/restored user's\n * ICE connection status or we detect local problem with the video track.\n * First argument is the ID of the participant and\n * the seconds is a string indicating if the connection is currently\n * - active - the connection is active\n * - inactive - the connection is inactive, was intentionally interrupted by\n * the bridge\n * - interrupted - a network problem occurred\n * - restoring - the connection was inactive and is restoring now\n *\n * The current status value can be obtained by calling\n * JitsiParticipant.getConnectionStatus().\n */\nexport const PARTICIPANT_CONN_STATUS_CHANGED\n    = 'conference.participant_conn_status_changed';\n\n/**\n * Indicates that the features of the participant has been changed.\n */\nexport const PARTCIPANT_FEATURES_CHANGED\n    = 'conference.partcipant_features_changed';\n\n/**\n * Indicates that a the value of a specific property of a specific participant\n * has changed.\n */\nexport const PARTICIPANT_PROPERTY_CHANGED\n    = 'conference.participant_property_changed';\n\n/**\n * Indicates that the conference has switched between JVB and P2P connections.\n * The first argument of this event is a <tt>boolean</tt> which when set to\n * <tt>true</tt> means that the conference is running on the P2P connection.\n */\nexport const P2P_STATUS = 'conference.p2pStatus';\n\n/**\n * Indicates that phone number changed.\n */\nexport const PHONE_NUMBER_CHANGED = 'conference.phoneNumberChanged';\n\n/**\n * Indicates that recording state changed.\n */\nexport const RECORDER_STATE_CHANGED = 'conference.recorderStateChanged';\n\n/**\n * Indicates that video SIP GW state changed.\n * @param {VideoSIPGWConstants} status.\n */\nexport const VIDEO_SIP_GW_AVAILABILITY_CHANGED\n    = 'conference.videoSIPGWAvailabilityChanged';\n\n/**\n * Indicates that video SIP GW Session state changed.\n * @param {options} event - {\n *     {string} address,\n *     {VideoSIPGWConstants} oldState,\n *     {VideoSIPGWConstants} newState,\n *     {string} displayName}\n * }.\n */\nexport const VIDEO_SIP_GW_SESSION_STATE_CHANGED\n    = 'conference.videoSIPGWSessionStateChanged';\n\n/**\n * Indicates that start muted settings changed.\n */\nexport const START_MUTED_POLICY_CHANGED\n    = 'conference.start_muted_policy_changed';\n\n/**\n * Indicates that the local user has started muted.\n */\nexport const STARTED_MUTED = 'conference.started_muted';\n\n/**\n * Indicates that subject of the conference has changed.\n */\nexport const SUBJECT_CHANGED = 'conference.subjectChanged';\n\n/**\n * Indicates that DTMF support changed.\n */\nexport const SUSPEND_DETECTED = 'conference.suspendDetected';\n\n/**\n * Event indicates that local user is talking while he muted himself\n */\nexport const TALK_WHILE_MUTED = 'conference.talk_while_muted';\n\n/**\n * A new media track was added to the conference. The event provides the\n * following parameters to its listeners:\n *\n * @param {JitsiTrack} track the added JitsiTrack\n */\nexport const TRACK_ADDED = 'conference.trackAdded';\n\n/**\n * Audio levels of a media track ( attached to the conference) was changed.\n */\nexport const TRACK_AUDIO_LEVEL_CHANGED = 'conference.audioLevelsChanged';\n\n/**\n * A media track ( attached to the conference) mute status was changed.\n */\nexport const TRACK_MUTE_CHANGED = 'conference.trackMuteChanged';\n\n/**\n * The media track was removed from the conference. The event provides the\n * following parameters to its listeners:\n *\n * @param {JitsiTrack} track the removed JitsiTrack\n */\nexport const TRACK_REMOVED = 'conference.trackRemoved';\n\n/**\n * Notifies for transcription status changes. The event provides the\n * following parameters to its listeners:\n *\n * @param {String} status - The new status.\n */\nexport const TRANSCRIPTION_STATUS_CHANGED\n    = 'conference.transcriptionStatusChanged';\n\n\n/**\n * A new user joinned the conference.\n */\nexport const USER_JOINED = 'conference.userJoined';\n\n/**\n * A user has left the conference.\n */\nexport const USER_LEFT = 'conference.userLeft';\n\n/**\n * User role changed.\n */\nexport const USER_ROLE_CHANGED = 'conference.roleChanged';\n\n/**\n * User status changed.\n */\nexport const USER_STATUS_CHANGED = 'conference.statusChanged';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiConferenceEvents.js","const XMPPEvents = {\n    /**\n     * Indicates error while adding ice candidate.\n     */\n    ADD_ICE_CANDIDATE_FAILED: 'xmpp.add_ice_candidate_failed',\n\n    // Designates an event indicating that the focus has asked us to mute our\n    // audio.\n    AUDIO_MUTED_BY_FOCUS: 'xmpp.audio_muted_by_focus',\n    AUTHENTICATION_REQUIRED: 'xmpp.authentication_required',\n    BRIDGE_DOWN: 'xmpp.bridge_down',\n\n    /**\n     * Triggered when 'session-accept' is received from the responder.\n     */\n    CALL_ACCEPTED: 'xmpp.callaccepted.jingle',\n\n    // Designates an event indicating that an offer (e.g. Jingle\n    // session-initiate) was received.\n    CALL_INCOMING: 'xmpp.callincoming.jingle',\n\n    // Triggered when Jicofo kills our media session, this can happen while\n    // we're still in the MUC, when it decides to terminate the media session.\n    // For example when the session is idle for too long, because we're the only\n    // person in the conference room.\n    CALL_ENDED: 'xmpp.callended.jingle',\n    CHAT_ERROR_RECEIVED: 'xmpp.chat_error_received',\n    CONFERENCE_SETUP_FAILED: 'xmpp.conference_setup_failed',\n\n    /**\n     * This event is triggered when the ICE connects for the first time.\n     */\n    CONNECTION_ESTABLISHED: 'xmpp.connection.connected',\n\n    // Designates an event indicating that the connection to the XMPP server\n    // failed.\n    CONNECTION_FAILED: 'xmpp.connection.failed',\n\n    // Designates an event indicating that the media (ICE) connection was\n    // interrupted. This should go to the RTC module.\n    CONNECTION_INTERRUPTED: 'xmpp.connection.interrupted',\n\n    // Designates an event indicating that the media (ICE) connection was\n    // restored. This should go to the RTC module.\n    CONNECTION_RESTORED: 'xmpp.connection.restored',\n\n    // Designates an event indicating that the media (ICE) connection failed.\n    // This should go to the RTC module.\n    CONNECTION_ICE_FAILED: 'xmpp.connection.ice.failed',\n\n    // Designates an event indicating that the display name of a participant\n    // has changed.\n    DISPLAY_NAME_CHANGED: 'xmpp.display_name_changed',\n\n    /**\n     * Chat room instance have been added to Strophe.emuc plugin.\n     */\n    EMUC_ROOM_ADDED: 'xmpp.emuc_room_added',\n\n    /**\n     * Chat room instance have been removed from Strophe.emuc plugin.\n     */\n    EMUC_ROOM_REMOVED: 'xmpp.emuc_room_removed',\n    ETHERPAD: 'xmpp.etherpad',\n    FOCUS_DISCONNECTED: 'xmpp.focus_disconnected',\n    FOCUS_LEFT: 'xmpp.focus_left',\n    GRACEFUL_SHUTDOWN: 'xmpp.graceful_shutdown',\n\n    /**\n     * Event fired when 'transport-replace' Jingle message has been received,\n     * before the new offer is set on the PeerConnection.\n     */\n    ICE_RESTARTING: 'rtc.ice_restarting',\n\n    /* Event fired when XMPP error is returned to any request, it is meant to be\n     * used to report 'signaling' errors to CallStats\n     *\n     * {\n     *   code: {XMPP error code}\n     *   reason: {XMPP error condition}\n     *   source = request.tree()\n     *   session = {JingleSession instance}\n     * }\n     */\n    JINGLE_ERROR: 'xmpp.jingle_error',\n\n    // Event fired when we have failed to set initial offer\n    JINGLE_FATAL_ERROR: 'xmpp.jingle_fatal_error',\n\n    // Designates an event indicating that we were kicked from the XMPP MUC.\n    KICKED: 'xmpp.kicked',\n\n    // Designates an event indicating that our role in the XMPP MUC has changed.\n    LOCAL_ROLE_CHANGED: 'xmpp.localrole_changed',\n\n    // Designates an event indicating that an XMPP message in the MUC was\n    // received.\n    MESSAGE_RECEIVED: 'xmpp.message_received',\n\n    // Designates an event indicating that a private XMPP message in the MUC was\n    // received.\n    PRIVATE_MESSAGE_RECEIVED: 'xmpp.private_message_received',\n\n    // Designates an event indicating that the XMPP MUC was destroyed.\n    MUC_DESTROYED: 'xmpp.muc_destroyed',\n\n    // Designates an event indicating that we have joined the XMPP MUC.\n    MUC_JOINED: 'xmpp.muc_joined',\n\n    // Designates an event indicating that a participant joined the XMPP MUC.\n    MUC_MEMBER_JOINED: 'xmpp.muc_member_joined',\n\n    // Designates an event indicating that a participant left the XMPP MUC.\n    MUC_MEMBER_LEFT: 'xmpp.muc_member_left',\n\n    // Designates an event indicating that local participant left the muc\n    MUC_LEFT: 'xmpp.muc_left',\n\n    // Designates an event indicating that the MUC role of a participant has\n    // changed.\n    MUC_ROLE_CHANGED: 'xmpp.muc_role_changed',\n\n    // Designates an event indicating that the MUC has been locked or unlocked.\n    MUC_LOCK_CHANGED: 'xmpp.muc_lock_changed',\n\n    // Designates an event indicating that a participant in the XMPP MUC has\n    // advertised that they have audio muted (or unmuted).\n    PARTICIPANT_AUDIO_MUTED: 'xmpp.audio_muted',\n\n    // Designates an event indicating that a participant in the XMPP MUC has\n    // advertised that they have video muted (or unmuted).\n    PARTICIPANT_VIDEO_MUTED: 'xmpp.video_muted',\n\n    // Designates an event indicating that the video type (e.g. 'camera' or\n    // 'screen') for a participant has changed.\n    // Note: currently this event fires every time we receive presence from\n    // someone (regardless of whether or not the \"video type\" changed).\n    PARTICIPANT_VIDEO_TYPE_CHANGED: 'xmpp.video_type',\n\n    /**\n     * Indicates that the features of the participant has been changed.\n     */\n    PARTCIPANT_FEATURES_CHANGED: 'xmpp.partcipant_features_changed',\n    PASSWORD_REQUIRED: 'xmpp.password_required',\n    PEERCONNECTION_READY: 'xmpp.peerconnection_ready',\n\n    /**\n     * Indicates that phone number changed.\n     */\n    PHONE_NUMBER_CHANGED: 'conference.phoneNumberChanged',\n    PRESENCE_STATUS: 'xmpp.presence_status',\n    PROMPT_FOR_LOGIN: 'xmpp.prompt_for_login',\n\n    // xmpp is connected and obtained user media\n    READY_TO_JOIN: 'xmpp.ready_to_join',\n\n    /**\n     * Indicates that recording state changed.\n     */\n    RECORDER_STATE_CHANGED: 'xmpp.recorderStateChanged',\n\n    // Designates an event indicating that we received statistics from a\n    // participant in the MUC.\n    REMOTE_STATS: 'xmpp.remote_stats',\n    RESERVATION_ERROR: 'xmpp.room_reservation_error',\n    ROOM_CONNECT_ERROR: 'xmpp.room_connect_error',\n    ROOM_CONNECT_NOT_ALLOWED_ERROR: 'xmpp.room_connect_error.not_allowed',\n    ROOM_JOIN_ERROR: 'xmpp.room_join_error',\n\n    /**\n     * Indicates that max users limit has been reached.\n     */\n    ROOM_MAX_USERS_ERROR: 'xmpp.room_max_users_error',\n\n    // Designates an event indicating that we sent an XMPP message to the MUC.\n    SENDING_CHAT_MESSAGE: 'xmpp.sending_chat_message',\n\n    // Designates an event indicating that we sent a private XMPP message to\n    // a specific user of the muc.\n    SENDING_PRIVATE_CHAT_MESSAGE: 'xmpp.sending_private_chat_message',\n\n    /**\n     * Event fired when we do not get our 'session-accept' acknowledged by\n     * Jicofo. It most likely means that there is serious problem with our\n     * connection or XMPP server and we should reload the conference.\n     *\n     * We have seen that to happen in BOSH requests race condition when the BOSH\n     * request table containing the 'session-accept' was discarded by Prosody.\n     * Jicofo does send the RESULT immediately without any condition, so missing\n     * packets means that most likely it has never seen our IQ.\n     */\n    SESSION_ACCEPT_TIMEOUT: 'xmpp.session_accept_timeout',\n\n    // Designates an event indicating that we should join the conference with\n    // audio and/or video muted.\n    START_MUTED_FROM_FOCUS: 'xmpp.start_muted_from_focus',\n\n    // Designates an event indicating that the subject of the XMPP MUC has\n    // changed.\n    SUBJECT_CHANGED: 'xmpp.subject_changed',\n\n    // FIXME: how does it belong to XMPP ? - it's detected by the PeerConnection\n    // suspending detected\n    SUSPEND_DETECTED: 'xmpp.suspend_detected',\n\n    /**\n     * Notifies for transcription status changes. The event provides the\n     * following parameters to its listeners:\n     *\n     * @param {String} status - The new status.\n     */\n    TRANSCRIPTION_STATUS_CHANGED: 'xmpp.transcription_status_changed',\n\n    /**\n     * Event fired when 'transport-info' with new ICE candidates is received.\n     */\n    TRANSPORT_INFO: 'xmpp.transportinfo.jingle',\n\n    /**\n     * Indicates that video SIP GW state changed.\n     *\n     * @param {VideoSIPGWConstants} status - Any of the following statuses:\n     * STATUS_BUSY, STATUS_AVAILABLE or STATUS_UNDEFINED.\n     */\n    VIDEO_SIP_GW_AVAILABILITY_CHANGED: 'xmpp.videoSIPGWAvailabilityChanged',\n\n    /**\n     * Indicates that video SIP GW Session state changed.\n     * The statuses are any of the following statuses:\n     * STATE_ON, STATE_OFF, STATE_PENDING, STATE_RETRYING, STATE_FAILED.\n     * {@see VideoSIPGWConstants}\n     *\n     * @param {options} event - {address, oldState, newState, displayName}.\n     */\n    VIDEO_SIP_GW_SESSION_STATE_CHANGED:\n        'xmpp.videoSIPGWSessionStateChanged',\n\n    // Designates an event indicating that the local ICE connection state has\n    // changed.\n    ICE_CONNECTION_STATE_CHANGED: 'xmpp.ice_connection_state_changed',\n\n    /**\n     * Event which is emitted when the body in an XMPP message in the MUC\n     * contains JSON\n     */\n    JSON_MESSAGE_RECEIVED: 'xmmp.json_message_received'\n};\n\nmodule.exports = XMPPEvents;\n\n\n\n// WEBPACK FOOTER //\n// ./service/xmpp/XMPPEvents.js","const RTCEvents = {\n    /**\n     * Indicates error while create answer call.\n     */\n    CREATE_ANSWER_FAILED: 'rtc.create_answer_failed',\n\n    /**\n     * Indicates error while create offer call.\n     */\n    CREATE_OFFER_FAILED: 'rtc.create_offer_failed',\n    RTC_READY: 'rtc.ready',\n    DATA_CHANNEL_OPEN: 'rtc.data_channel_open',\n    ENDPOINT_CONN_STATUS_CHANGED: 'rtc.endpoint_conn_status_changed',\n    DOMINANT_SPEAKER_CHANGED: 'rtc.dominant_speaker_changed',\n    LASTN_ENDPOINT_CHANGED: 'rtc.lastn_endpoint_changed',\n\n    /**\n     * Event emitted when {@link RTC.setLastN} method is called to update with\n     * the new value set.\n     * The first argument is the value passed to {@link RTC.setLastN}.\n     */\n    LASTN_VALUE_CHANGED: 'rtc.lastn_value_changed',\n\n    /**\n     * Event emitted when ssrc for a local track is extracted and stored\n     * in {@link TraceablePeerConnection}.\n     * @param {JitsiLocalTrack} track which ssrc was updated\n     * @param {string} ssrc that was stored\n     */\n    LOCAL_TRACK_SSRC_UPDATED: 'rtc.local_track_ssrc_updated',\n\n    AVAILABLE_DEVICES_CHANGED: 'rtc.available_devices_changed',\n    TRACK_ATTACHED: 'rtc.track_attached',\n\n    /**\n     * Event fired when we remote track is added to the conference.\n     * 1st event argument is the added <tt>JitsiRemoteTrack</tt> instance.\n     **/\n    REMOTE_TRACK_ADDED: 'rtc.remote_track_added',\n\n    // FIXME get rid of this event in favour of NO_DATA_FROM_SOURCE event\n    // (currently implemented for local tracks only)\n    REMOTE_TRACK_MUTE: 'rtc.remote_track_mute',\n\n    /**\n     * Indicates that the remote track has been removed from the conference.\n     * 1st event argument is the removed {@link JitsiRemoteTrack} instance.\n     */\n    REMOTE_TRACK_REMOVED: 'rtc.remote_track_removed',\n\n    // FIXME get rid of this event in favour of NO_DATA_FROM_SOURCE event\n    // (currently implemented for local tracks only)\n    REMOTE_TRACK_UNMUTE: 'rtc.remote_track_unmute',\n\n    /**\n     * Indicates error while set local description.\n     */\n    SET_LOCAL_DESCRIPTION_FAILED: 'rtc.set_local_description_failed',\n\n    /**\n     * Indicates error while set remote description.\n     */\n    SET_REMOTE_DESCRIPTION_FAILED: 'rtc.set_remote_description_failed',\n    AUDIO_OUTPUT_DEVICE_CHANGED: 'rtc.audio_output_device_changed',\n    DEVICE_LIST_CHANGED: 'rtc.device_list_changed',\n    DEVICE_LIST_AVAILABLE: 'rtc.device_list_available',\n\n    /**\n     * Indicates that a message from another participant is received on\n     * data channel.\n     */\n    ENDPOINT_MESSAGE_RECEIVED: 'rtc.endpoint_message_received',\n\n    /**\n     * Designates an event indicating that the local ICE username fragment of\n     * the jingle session has changed.\n     * The first argument of the vent is <tt>TraceablePeerConnection</tt> which\n     * is the source of the event.\n     * The second argument is the actual \"ufrag\" string.\n     */\n    LOCAL_UFRAG_CHANGED: 'rtc.local_ufrag_changed',\n\n    /**\n     * Designates an event indicating that the local ICE username fragment of\n     * the jingle session has changed.\n     * The first argument of the vent is <tt>TraceablePeerConnection</tt> which\n     * is the source of the event.\n     * The second argument is the actual \"ufrag\" string.\n     */\n    REMOTE_UFRAG_CHANGED: 'rtc.remote_ufrag_changed'\n};\n\nmodule.exports = RTCEvents;\n\n\n\n// WEBPACK FOOTER //\n// ./service/RTC/RTCEvents.js","import EventEmitter from 'events';\n\n/**\n * The class implements basic event operations - add/remove listener.\n * NOTE: The purpose of the class is to be extended in order to add\n * this functionality to other classes.\n */\nexport default class Listenable {\n    /**\n     * Creates new instance.\n     * @param {EventEmitter} eventEmitter\n     * @constructor\n     */\n    constructor(eventEmitter = new EventEmitter()) {\n        this.eventEmitter = eventEmitter;\n\n        // aliases for addListener/removeListener\n        this.addEventListener = this.on = this.addListener;\n        this.removeEventListener = this.off = this.removeListener;\n    }\n\n    /**\n     * Adds new listener.\n     * @param {String} eventName the name of the event\n     * @param {Function} listener the listener.\n     */\n    addListener(eventName, listener) {\n        this.eventEmitter.addListener(eventName, listener);\n    }\n\n    /**\n     * Removes listener.\n     * @param {String} eventName the name of the event that triggers the\n     * listener\n     * @param {Function} listener the listener.\n     */\n    removeListener(eventName, listener) {\n        this.eventEmitter.removeListener(eventName, listener);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/Listenable.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logDisabled_ = true;\nvar deprecationWarnings_ = true;\n\n// Utility methods.\nvar utils = {\n  disableLog: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return (bool) ? 'adapter.js logging disabled' :\n        'adapter.js logging enabled';\n  },\n\n  /**\n   * Disable or enable deprecation warnings\n   * @param {!boolean} bool set to true to disable warnings.\n   */\n  disableWarnings: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    deprecationWarnings_ = !bool;\n    return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n  },\n\n  log: function() {\n    if (typeof window === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  },\n\n  /**\n   * Shows a deprecation warning suggesting the modern and spec-compatible API.\n   */\n  deprecated: function(oldMethod, newMethod) {\n    if (!deprecationWarnings_) {\n      return;\n    }\n    console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n        ' instead.');\n  },\n\n  /**\n   * Extract browser version out of the provided user agent string.\n   *\n   * @param {!string} uastring userAgent string.\n   * @param {!string} expr Regular expression used as match criteria.\n   * @param {!number} pos position in the version string to be returned.\n   * @return {!number} browser version.\n   */\n  extractVersion: function(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n  },\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser and version\n   *     properties.\n   */\n  detectBrowser: function(window) {\n    var navigator = window && window.navigator;\n\n    // Returned result object.\n    var result = {};\n    result.browser = null;\n    result.version = null;\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    // Firefox.\n    if (navigator.mozGetUserMedia) {\n      result.browser = 'firefox';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Firefox\\/(\\d+)\\./, 1);\n    } else if (navigator.webkitGetUserMedia) {\n      // Chrome, Chromium, Webview, Opera, all use the chrome shim for now\n      if (window.webkitRTCPeerConnection) {\n        result.browser = 'chrome';\n        result.version = this.extractVersion(navigator.userAgent,\n          /Chrom(e|ium)\\/(\\d+)\\./, 2);\n      } else { // Safari (in an unpublished version) or unknown webkit-based.\n        if (navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/)) {\n          result.browser = 'safari';\n          result.version = this.extractVersion(navigator.userAgent,\n            /AppleWebKit\\/(\\d+)\\./, 1);\n        } else { // unknown webkit-based browser.\n          result.browser = 'Unsupported webkit-based browser ' +\n              'with GUM support but no WebRTC support.';\n          return result;\n        }\n      }\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n      result.browser = 'edge';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Edge\\/(\\d+).(\\d+)$/, 2);\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n        // Safari, with webkitGetUserMedia removed.\n      result.browser = 'safari';\n      result.version = this.extractVersion(navigator.userAgent,\n          /AppleWebKit\\/(\\d+)\\./, 1);\n    } else { // Default fallthrough: not supported.\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    return result;\n  },\n\n};\n\n// Export.\nmodule.exports = {\n  log: utils.log,\n  deprecated: utils.deprecated,\n  disableLog: utils.disableLog,\n  disableWarnings: utils.disableWarnings,\n  extractVersion: utils.extractVersion,\n  shimCreateObjectURL: utils.shimCreateObjectURL,\n  detectBrowser: utils.detectBrowser.bind(utils)\n};\n\n\n\n// WEBPACK FOOTER //\n// ../webrtc-adapter/src/js/utils.js","import * as JitsiTrackErrors from './JitsiTrackErrors';\n\nconst TRACK_ERROR_TO_MESSAGE_MAP = {};\n\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.UNSUPPORTED_RESOLUTION]\n    = 'Video resolution is not supported: ';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.FIREFOX_EXTENSION_NEEDED]\n    = 'Firefox extension is not installed';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.CHROME_EXTENSION_INSTALLATION_ERROR]\n    = 'Failed to install Chrome extension';\nTRACK_ERROR_TO_MESSAGE_MAP[\n    JitsiTrackErrors.CHROME_EXTENSION_USER_GESTURE_REQUIRED]\n    = 'Failed to install Chrome extension - installations can only be initiated'\n        + ' by a user gesture.';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.CHROME_EXTENSION_USER_CANCELED]\n    = 'User canceled Chrome\\'s screen sharing prompt';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.CHROME_EXTENSION_GENERIC_ERROR]\n    = 'Unknown error from Chrome extension';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.ELECTRON_DESKTOP_PICKER_ERROR]\n    = 'Unkown error from desktop picker';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.ELECTRON_DESKTOP_PICKER_NOT_FOUND]\n    = 'Failed to detect desktop picker';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.GENERAL]\n    = 'Generic getUserMedia error';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.PERMISSION_DENIED]\n    = 'User denied permission to use device(s): ';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.NOT_FOUND]\n    = 'Requested device(s) was/were not found: ';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.CONSTRAINT_FAILED]\n    = 'Constraint could not be satisfied: ';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.TRACK_IS_DISPOSED]\n    = 'Track has been already disposed';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.TRACK_NO_STREAM_FOUND]\n    = 'Track does not have an associated Media Stream';\nTRACK_ERROR_TO_MESSAGE_MAP[JitsiTrackErrors.NO_DATA_FROM_SOURCE]\n    = 'The track has stopped receiving data from it\\'s source';\n\n\n// FIXME: Using prototype inheritance because otherwise instanceof is not\n// working properly (see https://github.com/babel/babel/issues/3083)\n\n/**\n *\n * Represents an error that occurred to a JitsiTrack. Can represent various\n * types of errors. For error descriptions (@see JitsiTrackErrors).\n *\n * @extends Error\n *\n *\n * @constructor\n * @param {Object|string} error - error object or error name\n * @param {Object|string} (options) - getUserMedia constraints object or\n * error message\n * @param {('audio'|'video'|'desktop'|'screen'|'audiooutput')[]} (devices) -\n * list of getUserMedia requested devices\n */\nfunction JitsiTrackError(error, options, devices) {\n    if (typeof error === 'object' && typeof error.name !== 'undefined') {\n        /**\n         * Additional information about original getUserMedia error\n         * and constraints.\n         * @type {{\n         *     error: Object,\n         *     constraints: Object,\n         *     devices: Array.<'audio'|'video'|'desktop'|'screen'>\n         * }}\n         */\n        this.gum = {\n            error,\n            constraints: options,\n            devices: devices && Array.isArray(devices)\n                ? devices.slice(0)\n                : undefined\n        };\n\n        switch (error.name) {\n        case 'NotAllowedError':\n        case 'PermissionDeniedError':\n        case 'SecurityError':\n            this.name = JitsiTrackErrors.PERMISSION_DENIED;\n            this.message\n                = TRACK_ERROR_TO_MESSAGE_MAP[this.name]\n                    + (this.gum.devices || []).join(', ');\n            break;\n        case 'DevicesNotFoundError':\n        case 'NotFoundError':\n            this.name = JitsiTrackErrors.NOT_FOUND;\n            this.message\n                = TRACK_ERROR_TO_MESSAGE_MAP[this.name]\n                    + (this.gum.devices || []).join(', ');\n            break;\n        case 'ConstraintNotSatisfiedError':\n        case 'OverconstrainedError': {\n            const constraintName = error.constraintName || error.constraint;\n\n            if (options\n                    && options.video\n                    && (!devices || devices.indexOf('video') > -1)\n                    && (constraintName === 'minWidth'\n                        || constraintName === 'maxWidth'\n                        || constraintName === 'minHeight'\n                        || constraintName === 'maxHeight'\n                        || constraintName === 'width'\n                        || constraintName === 'height')) {\n                this.name = JitsiTrackErrors.UNSUPPORTED_RESOLUTION;\n                this.message\n                    = TRACK_ERROR_TO_MESSAGE_MAP[this.name]\n                        + getResolutionFromFailedConstraint(\n                            constraintName,\n                            options);\n            } else {\n                this.name = JitsiTrackErrors.CONSTRAINT_FAILED;\n                this.message\n                    = TRACK_ERROR_TO_MESSAGE_MAP[this.name]\n                        + error.constraintName;\n            }\n            break;\n        }\n\n        default:\n            this.name = JitsiTrackErrors.GENERAL;\n            this.message\n                = error.message || TRACK_ERROR_TO_MESSAGE_MAP[this.name];\n            break;\n        }\n    } else if (typeof error === 'string') {\n        if (TRACK_ERROR_TO_MESSAGE_MAP[error]) {\n            this.name = error;\n            this.message = options || TRACK_ERROR_TO_MESSAGE_MAP[error];\n        } else {\n            // this is some generic error that do not fit any of our\n            // pre-defined errors, so don't give it any specific name, just\n            // store message\n            this.message = error;\n        }\n    } else {\n        throw new Error('Invalid arguments');\n    }\n\n    this.stack = error.stack || (new Error()).stack;\n}\n\nJitsiTrackError.prototype = Object.create(Error.prototype);\nJitsiTrackError.prototype.constructor = JitsiTrackError;\n\n/**\n * Gets failed resolution constraint from corresponding object.\n * @param {string} failedConstraintName\n * @param {Object} constraints\n * @returns {string|number}\n */\nfunction getResolutionFromFailedConstraint(failedConstraintName, constraints) {\n    if (constraints && constraints.video && constraints.video.mandatory) {\n        switch (failedConstraintName) {\n        case 'width':\n            return constraints.video.mandatory.minWidth;\n        case 'height':\n            return constraints.video.mandatory.minHeight;\n        default:\n            return constraints.video.mandatory[failedConstraintName] || '';\n        }\n    }\n\n    return '';\n}\n\nexport default JitsiTrackError;\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiTrackError.js","/* global module */\n/**\n * Enumeration of the video types\n * @type {{CAMERA: string, DESKTOP: string}}\n */\nconst VideoType = {\n    /**\n     * The camera video type.\n     */\n    CAMERA: 'camera',\n\n    /**\n     * The desktop video type.\n     */\n    DESKTOP: 'desktop'\n};\n\nmodule.exports = VideoType;\n\n\n\n// WEBPACK FOOTER //\n// ./service/RTC/VideoType.js","import { getLogger } from 'jitsi-meet-logger';\nconst logger = getLogger(__filename);\n\nimport RandomUtil from '../util/RandomUtil';\nimport browser from '../browser';\n\nconst SDPUtil = {\n    filterSpecialChars(text) {\n        // XXX Neither one of the falsy values (e.g. null, undefined, false,\n        // \"\", etc.) \"contain\" special chars.\n        // eslint-disable-next-line no-useless-escape\n        return text ? text.replace(/[\\\\\\/\\{,\\}\\+]/g, '') : text;\n    },\n    iceparams(mediadesc, sessiondesc) {\n        let data = null;\n        let pwd, ufrag;\n\n        if ((ufrag = SDPUtil.findLine(mediadesc, 'a=ice-ufrag:', sessiondesc))\n                && (pwd\n                    = SDPUtil.findLine(\n                        mediadesc,\n                        'a=ice-pwd:',\n                        sessiondesc))) {\n            data = {\n                ufrag: SDPUtil.parseICEUfrag(ufrag),\n                pwd: SDPUtil.parseICEPwd(pwd)\n            };\n        }\n\n        return data;\n    },\n    parseICEUfrag(line) {\n        return line.substring(12);\n    },\n    buildICEUfrag(frag) {\n        return `a=ice-ufrag:${frag}`;\n    },\n    parseICEPwd(line) {\n        return line.substring(10);\n    },\n    buildICEPwd(pwd) {\n        return `a=ice-pwd:${pwd}`;\n    },\n    parseMID(line) {\n        return line.substring(6);\n    },\n    parseMLine(line) {\n        const data = {};\n        const parts = line.substring(2).split(' ');\n\n        data.media = parts.shift();\n        data.port = parts.shift();\n        data.proto = parts.shift();\n        if (parts[parts.length - 1] === '') { // trailing whitespace\n            parts.pop();\n        }\n        data.fmt = parts;\n\n        return data;\n    },\n    buildMLine(mline) {\n        return (\n            `m=${mline.media} ${mline.port} ${mline.proto} ${\n                mline.fmt.join(' ')}`);\n    },\n    parseRTPMap(line) {\n        const data = {};\n        let parts = line.substring(9).split(' ');\n\n        data.id = parts.shift();\n        parts = parts[0].split('/');\n        data.name = parts.shift();\n        data.clockrate = parts.shift();\n        data.channels = parts.length ? parts.shift() : '1';\n\n        return data;\n    },\n\n    /**\n     * Parses SDP line \"a=sctpmap:...\" and extracts SCTP port from it.\n     * @param line eg. \"a=sctpmap:5000 webrtc-datachannel\"\n     * @returns [SCTP port number, protocol, streams]\n     */\n    parseSCTPMap(line) {\n        const parts = line.substring(10).split(' ');\n        const sctpPort = parts[0];\n        const protocol = parts[1];\n\n        // Stream count is optional\n        const streamCount = parts.length > 2 ? parts[2] : null;\n\n\n        return [ sctpPort, protocol, streamCount ];// SCTP port\n    },\n    buildRTPMap(el) {\n        let line\n            = `a=rtpmap:${el.getAttribute('id')} ${el.getAttribute('name')}/${\n                el.getAttribute('clockrate')}`;\n\n        if (el.getAttribute('channels')\n            && el.getAttribute('channels') !== '1') {\n            line += `/${el.getAttribute('channels')}`;\n        }\n\n        return line;\n    },\n    parseCrypto(line) {\n        const data = {};\n        const parts = line.substring(9).split(' ');\n\n        data.tag = parts.shift();\n        data['crypto-suite'] = parts.shift();\n        data['key-params'] = parts.shift();\n        if (parts.length) {\n            data['session-params'] = parts.join(' ');\n        }\n\n        return data;\n    },\n    parseFingerprint(line) { // RFC 4572\n        const data = {};\n        const parts = line.substring(14).split(' ');\n\n        data.hash = parts.shift();\n        data.fingerprint = parts.shift();\n\n        // TODO assert that fingerprint satisfies 2UHEX *(\":\" 2UHEX) ?\n        return data;\n    },\n    parseFmtp(line) {\n        const data = [];\n        let parts = line.split(' ');\n\n        parts.shift();\n        parts = parts.join(' ').split(';');\n        for (let i = 0; i < parts.length; i++) {\n            let key = parts[i].split('=')[0];\n\n            while (key.length && key[0] === ' ') {\n                key = key.substring(1);\n            }\n            const value = parts[i].split('=')[1];\n\n            if (key && value) {\n                data.push({ name: key,\n                    value });\n            } else if (key) {\n                // rfc 4733 (DTMF) style stuff\n                data.push({ name: '',\n                    value: key });\n            }\n        }\n\n        return data;\n    },\n    parseICECandidate(line) {\n        const candidate = {};\n        const elems = line.split(' ');\n\n        candidate.foundation = elems[0].substring(12);\n        candidate.component = elems[1];\n        candidate.protocol = elems[2].toLowerCase();\n        candidate.priority = elems[3];\n        candidate.ip = elems[4];\n        candidate.port = elems[5];\n\n        // elems[6] => \"typ\"\n        candidate.type = elems[7];\n        candidate.generation = 0; // default value, may be overwritten below\n        for (let i = 8; i < elems.length; i += 2) {\n            switch (elems[i]) {\n            case 'raddr':\n                candidate['rel-addr'] = elems[i + 1];\n                break;\n            case 'rport':\n                candidate['rel-port'] = elems[i + 1];\n                break;\n            case 'generation':\n                candidate.generation = elems[i + 1];\n                break;\n            case 'tcptype':\n                candidate.tcptype = elems[i + 1];\n                break;\n            default: // TODO\n                logger.log(\n                    `parseICECandidate not translating \"${\n                        elems[i]}\" = \"${elems[i + 1]}\"`);\n            }\n        }\n        candidate.network = '1';\n\n        // not applicable to SDP -- FIXME: should be unique, not just random\n        // eslint-disable-next-line newline-per-chained-call\n        candidate.id = Math.random().toString(36).substr(2, 10);\n\n        return candidate;\n    },\n    buildICECandidate(cand) {\n        let line = [\n            `a=candidate:${cand.foundation}`,\n            cand.component,\n            cand.protocol,\n            cand.priority,\n            cand.ip,\n            cand.port,\n            'typ',\n            cand.type\n        ].join(' ');\n\n        line += ' ';\n        switch (cand.type) {\n        case 'srflx':\n        case 'prflx':\n        case 'relay':\n            if (cand.hasOwnAttribute('rel-addr')\n                    && cand.hasOwnAttribute('rel-port')) {\n                line += 'raddr';\n                line += ' ';\n                line += cand['rel-addr'];\n                line += ' ';\n                line += 'rport';\n                line += ' ';\n                line += cand['rel-port'];\n                line += ' ';\n            }\n            break;\n        }\n        if (cand.hasOwnAttribute('tcptype')) {\n            line += 'tcptype';\n            line += ' ';\n            line += cand.tcptype;\n            line += ' ';\n        }\n        line += 'generation';\n        line += ' ';\n        line += cand.hasOwnAttribute('generation') ? cand.generation : '0';\n\n        return line;\n    },\n    parseSSRC(desc) {\n        // proprietary mapping of a=ssrc lines\n        // TODO: see \"Jingle RTP Source Description\" by Juberti and P. Thatcher\n        // on google docs and parse according to that\n        const data = new Map();\n        const lines = desc.split('\\r\\n');\n\n        for (let i = 0; i < lines.length; i++) {\n            if (lines[i].substring(0, 7) === 'a=ssrc:') {\n                // FIXME: Use regex to smartly find the ssrc.\n                const ssrc = lines[i].split('a=ssrc:')[1].split(' ')[0];\n\n                if (!data.get(ssrc)) {\n                    data.set(ssrc, []);\n                }\n\n                data.get(ssrc).push(lines[i]);\n            }\n        }\n\n        return data;\n    },\n    parseRTCPFB(line) {\n        const parts = line.substr(10).split(' ');\n        const data = {};\n\n        data.pt = parts.shift();\n        data.type = parts.shift();\n        data.params = parts;\n\n        return data;\n    },\n    parseExtmap(line) {\n        const parts = line.substr(9).split(' ');\n        const data = {};\n\n        data.value = parts.shift();\n        if (data.value.indexOf('/') === -1) {\n            data.direction = 'both';\n        } else {\n            data.direction = data.value.substr(data.value.indexOf('/') + 1);\n            data.value = data.value.substr(0, data.value.indexOf('/'));\n        }\n        data.uri = parts.shift();\n        data.params = parts;\n\n        return data;\n    },\n    findLine(haystack, needle, sessionpart) {\n        let lines = haystack.split('\\r\\n');\n\n        for (let i = 0; i < lines.length; i++) {\n            if (lines[i].substring(0, needle.length) === needle) {\n                return lines[i];\n            }\n        }\n        if (!sessionpart) {\n            return false;\n        }\n\n        // search session part\n        lines = sessionpart.split('\\r\\n');\n        for (let j = 0; j < lines.length; j++) {\n            if (lines[j].substring(0, needle.length) === needle) {\n                return lines[j];\n            }\n        }\n\n        return false;\n    },\n    findLines(haystack, needle, sessionpart) {\n        let lines = haystack.split('\\r\\n');\n        const needles = [];\n\n        for (let i = 0; i < lines.length; i++) {\n            if (lines[i].substring(0, needle.length) === needle) {\n                needles.push(lines[i]);\n            }\n        }\n        if (needles.length || !sessionpart) {\n            return needles;\n        }\n\n        // search session part\n        lines = sessionpart.split('\\r\\n');\n        for (let j = 0; j < lines.length; j++) {\n            if (lines[j].substring(0, needle.length) === needle) {\n                needles.push(lines[j]);\n            }\n        }\n\n        return needles;\n    },\n    candidateToJingle(line) {\n        // a=candidate:2979166662 1 udp 2113937151 192.168.2.100 57698 typ host\n        // generation 0\n        //      <candidate component=... foundation=... generation=... id=...\n        // ip=... network=... port=... priority=... protocol=... type=.../>\n        if (line.indexOf('candidate:') === 0) {\n            // eslint-disable-next-line no-param-reassign\n            line = `a=${line}`;\n        } else if (line.substring(0, 12) !== 'a=candidate:') {\n            logger.log(\n                'parseCandidate called with a line that is not a candidate'\n                    + ' line');\n            logger.log(line);\n\n            return null;\n        }\n        if (line.substring(line.length - 2) === '\\r\\n') { // chomp it\n            // eslint-disable-next-line no-param-reassign\n            line = line.substring(0, line.length - 2);\n        }\n        const candidate = {};\n        const elems = line.split(' ');\n\n        if (elems[6] !== 'typ') {\n            logger.log('did not find typ in the right place');\n            logger.log(line);\n\n            return null;\n        }\n        candidate.foundation = elems[0].substring(12);\n        candidate.component = elems[1];\n        candidate.protocol = elems[2].toLowerCase();\n        candidate.priority = elems[3];\n        candidate.ip = elems[4];\n        candidate.port = elems[5];\n\n        // elems[6] => \"typ\"\n        candidate.type = elems[7];\n\n        candidate.generation = '0'; // default, may be overwritten below\n        for (let i = 8; i < elems.length; i += 2) {\n            switch (elems[i]) {\n            case 'raddr':\n                candidate['rel-addr'] = elems[i + 1];\n                break;\n            case 'rport':\n                candidate['rel-port'] = elems[i + 1];\n                break;\n            case 'generation':\n                candidate.generation = elems[i + 1];\n                break;\n            case 'tcptype':\n                candidate.tcptype = elems[i + 1];\n                break;\n            default: // TODO\n                logger.log(`not translating \"${elems[i]}\" = \"${elems[i + 1]}\"`);\n            }\n        }\n        candidate.network = '1';\n\n        // not applicable to SDP -- FIXME: should be unique, not just random\n        // eslint-disable-next-line newline-per-chained-call\n        candidate.id = Math.random().toString(36).substr(2, 10);\n\n        return candidate;\n    },\n    candidateFromJingle(cand) {\n        let line = 'a=candidate:';\n\n        line += cand.getAttribute('foundation');\n        line += ' ';\n        line += cand.getAttribute('component');\n        line += ' ';\n\n        let protocol = cand.getAttribute('protocol');\n\n        // use tcp candidates for FF\n\n        if (browser.isFirefox() && protocol.toLowerCase() === 'ssltcp') {\n            protocol = 'tcp';\n        }\n\n        line += protocol; // .toUpperCase(); // chrome M23 doesn't like this\n        line += ' ';\n        line += cand.getAttribute('priority');\n        line += ' ';\n        line += cand.getAttribute('ip');\n        line += ' ';\n        line += cand.getAttribute('port');\n        line += ' ';\n        line += 'typ';\n        line += ` ${cand.getAttribute('type')}`;\n        line += ' ';\n        switch (cand.getAttribute('type')) {\n        case 'srflx':\n        case 'prflx':\n        case 'relay':\n            if (cand.getAttribute('rel-addr')\n                    && cand.getAttribute('rel-port')) {\n                line += 'raddr';\n                line += ' ';\n                line += cand.getAttribute('rel-addr');\n                line += ' ';\n                line += 'rport';\n                line += ' ';\n                line += cand.getAttribute('rel-port');\n                line += ' ';\n            }\n            break;\n        }\n        if (protocol.toLowerCase() === 'tcp') {\n            line += 'tcptype';\n            line += ' ';\n            line += cand.getAttribute('tcptype');\n            line += ' ';\n        }\n        line += 'generation';\n        line += ' ';\n        line += cand.getAttribute('generation') || '0';\n\n        return `${line}\\r\\n`;\n    },\n\n    /**\n     * Parse the 'most' primary video ssrc from the given m line\n     * @param {object} mLine object as parsed from transform.parse\n     * @return {number} the primary video ssrc from the given m line\n     */\n    parsePrimaryVideoSsrc(videoMLine) {\n        const numSsrcs = videoMLine.ssrcs\n            .map(ssrcInfo => ssrcInfo.id)\n            .filter((ssrc, index, array) => array.indexOf(ssrc) === index)\n            .length;\n        const numGroups\n            = (videoMLine.ssrcGroups && videoMLine.ssrcGroups.length) || 0;\n\n        if (numSsrcs > 1 && numGroups === 0) {\n            // Ambiguous, can't figure out the primary\n            return;\n        }\n        let primarySsrc = null;\n\n        if (numSsrcs === 1) {\n            primarySsrc = videoMLine.ssrcs[0].id;\n        } else if (numSsrcs === 2) {\n            // Can figure it out if there's an FID group\n            const fidGroup\n                = videoMLine.ssrcGroups.find(\n                    group => group.semantics === 'FID');\n\n            if (fidGroup) {\n                primarySsrc = fidGroup.ssrcs.split(' ')[0];\n            }\n        } else if (numSsrcs >= 3) {\n            // Can figure it out if there's a sim group\n            const simGroup\n                = videoMLine.ssrcGroups.find(\n                    group => group.semantics === 'SIM');\n\n            if (simGroup) {\n                primarySsrc = simGroup.ssrcs.split(' ')[0];\n            }\n        }\n\n        return primarySsrc;\n    },\n\n    /**\n     * Generate an ssrc\n     * @returns {number} an ssrc\n     */\n    generateSsrc() {\n        return RandomUtil.randomInt(1, 0xffffffff);\n    },\n\n    /**\n     * Get an attribute for the given ssrc with the given attributeName\n     *  from the given mline\n     * @param {object} mLine an mLine object as parsed from transform.parse\n     * @param {number} ssrc the ssrc for which an attribtue is desired\n     * @param {string} attributeName the name of the desired attribute\n     * @returns {string} the value corresponding to the given ssrc\n     *  and attributeName\n     */\n    getSsrcAttribute(mLine, ssrc, attributeName) {\n        for (let i = 0; i < mLine.ssrcs.length; ++i) {\n            const ssrcLine = mLine.ssrcs[i];\n\n            if (ssrcLine.id === ssrc\n                && ssrcLine.attribute === attributeName) {\n                return ssrcLine.value;\n            }\n        }\n    },\n\n    /**\n     * Parses the ssrcs from the group sdp line and\n     *  returns them as a list of numbers\n     * @param {object} the ssrcGroup object as parsed from\n     *  sdp-transform\n     * @returns {list<number>} a list of the ssrcs in the group\n     *  parsed as numbers\n     */\n    parseGroupSsrcs(ssrcGroup) {\n        return ssrcGroup\n            .ssrcs\n            .split(' ')\n            .map(ssrcStr => parseInt(ssrcStr, 10));\n    },\n\n    /**\n     * Get the mline of the given type from the given sdp\n     * @param {object} sdp sdp as parsed from transform.parse\n     * @param {string} type the type of the desired mline (e.g. \"video\")\n     * @returns {object} a media object\n     */\n    getMedia(sdp, type) {\n        return sdp.media.find(m => m.type === type);\n    },\n\n    /**\n     * Extracts the ICE username fragment from an SDP string.\n     * @param {string} sdp the SDP in raw text format\n     */\n    getUfrag(sdp) {\n        const ufragLines\n            = sdp.split('\\n').filter(line => line.startsWith('a=ice-ufrag:'));\n\n        if (ufragLines.length > 0) {\n            return ufragLines[0].substr('a=ice-ufrag:'.length);\n        }\n    },\n\n    /**\n     * Sets the given codecName as the preferred codec by\n     *  moving it to the beginning of the payload types\n     *  list (modifies the given mline in place).  If there\n     *  are multiple options within the same codec (multiple h264\n     *  profiles, for instance), this will prefer the first one\n     *  that is found.\n     * @param {object} videoMLine the video mline object from\n     *  an sdp as parsed by transform.parse\n     * @param {string} codecName the name of the preferred codec\n     */\n    preferVideoCodec(videoMLine, codecName) {\n        let payloadType = null;\n\n        if (!videoMLine || !codecName) {\n            return;\n        }\n\n        for (let i = 0; i < videoMLine.rtp.length; ++i) {\n            const rtp = videoMLine.rtp[i];\n\n            if (rtp.codec\n                && rtp.codec.toLowerCase() === codecName.toLowerCase()) {\n                payloadType = rtp.payload;\n                break;\n            }\n        }\n        if (payloadType) {\n            // Call toString() on payloads to get around an issue within\n            // SDPTransform that sets payloads as a number, instead of a string,\n            // when there is only one payload.\n            const payloadTypes\n                = videoMLine.payloads\n                    .toString()\n                    .split(' ')\n                    .map(p => parseInt(p, 10));\n            const payloadIndex = payloadTypes.indexOf(payloadType);\n\n            payloadTypes.splice(payloadIndex, 1);\n            payloadTypes.unshift(payloadType);\n            videoMLine.payloads = payloadTypes.join(' ');\n        }\n    },\n\n    /**\n     * Strips the given codec from the given mline. All related RTX payload\n     * types are also stripped. If the resulting mline would have no codecs,\n     * it's disabled.\n     *\n     * @param {object} videoMLine the video mline object from an sdp as parsed\n     * by transform.parse.\n     * @param {string} codecName the name of the codec which will be stripped.\n     */\n    stripVideoCodec(videoMLine, codecName) {\n        if (!videoMLine || !codecName) {\n            return;\n        }\n\n        const removePts = [];\n\n        for (const rtp of videoMLine.rtp) {\n            if (rtp.codec\n                && rtp.codec.toLowerCase() === codecName.toLowerCase()) {\n                removePts.push(rtp.payload);\n            }\n        }\n\n        if (removePts.length > 0) {\n            // We also need to remove the payload types that are related to RTX\n            // for the codecs we want to disable.\n            const rtxApts = removePts.map(item => `apt=${item}`);\n            const rtxPts = videoMLine.fmtp.filter(\n                item => rtxApts.indexOf(item.config) !== -1);\n\n            removePts.push(...rtxPts.map(item => item.payload));\n\n            // Call toString() on payloads to get around an issue within\n            // SDPTransform that sets payloads as a number, instead of a string,\n            // when there is only one payload.\n            const allPts = videoMLine.payloads\n                .toString()\n                .split(' ')\n                .map(Number);\n            const keepPts = allPts.filter(pt => removePts.indexOf(pt) === -1);\n\n            if (keepPts.length === 0) {\n                // There are no other video codecs, disable the stream.\n                videoMLine.port = 0;\n                videoMLine.direction = 'inactive';\n                videoMLine.payloads = '*';\n            } else {\n                videoMLine.payloads = keepPts.join(' ');\n            }\n\n            videoMLine.rtp = videoMLine.rtp.filter(\n                item => keepPts.indexOf(item.payload) !== -1);\n            videoMLine.fmtp = videoMLine.fmtp.filter(\n                item => keepPts.indexOf(item.payload) !== -1);\n            if (videoMLine.rtcpFb) {\n                videoMLine.rtcpFb = videoMLine.rtcpFb.filter(\n                    item => keepPts.indexOf(item.payload) !== -1);\n            }\n        }\n    }\n};\n\nexport default SDPUtil;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/SDPUtil.js","var parser = require('./parser');\nvar writer = require('./writer');\n\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseFmtpConfig = parser.parseFmtpConfig;\nexports.parseParams = parser.parseParams;\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\nexports.parseImageAttributes = parser.parseImageAttributes;\nexports.parseSimulcastStreamList = parser.parseSimulcastStreamList;\n\n\n\n// WEBPACK FOOTER //\n// ../sdp-transform/lib/index.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n// WEBPACK FOOTER //\n// ../events/events.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// ../webpack/buildin/global.js","/**\n * The errors for the JitsiTrack objects.\n */\n\n/**\n * Generic error for jidesha extension for Chrome.\n */\nexport const CHROME_EXTENSION_GENERIC_ERROR\n    = 'gum.chrome_extension_generic_error';\n\n/**\n * An error which indicates that the jidesha extension for Chrome is\n * failed to install.\n */\nexport const CHROME_EXTENSION_INSTALLATION_ERROR\n    = 'gum.chrome_extension_installation_error';\n\n/**\n * This error indicates that the attempt to start screensharing was initiated by\n * a script which did not originate in user gesture handler. It means that\n * you should to trigger the action again in response to a button click for\n * example.\n * @type {string}\n */\nexport const CHROME_EXTENSION_USER_GESTURE_REQUIRED\n    = 'gum.chrome_extension_user_gesture_required';\n\n/**\n * An error which indicates that user canceled screen sharing window\n * selection dialog in jidesha extension for Chrome.\n */\nexport const CHROME_EXTENSION_USER_CANCELED\n    = 'gum.chrome_extension_user_canceled';\n\n/**\n * An error which indicates that some of requested constraints in\n * getUserMedia call were not satisfied.\n */\nexport const CONSTRAINT_FAILED = 'gum.constraint_failed';\n\n/**\n * A generic error which indicates an error occurred while selecting\n * a DesktopCapturerSource from the electron app.\n */\nexport const ELECTRON_DESKTOP_PICKER_ERROR\n    = 'gum.electron_desktop_picker_error';\n\n/**\n * An error which indicates a custom desktop picker could not be detected\n * for the electron app.\n */\nexport const ELECTRON_DESKTOP_PICKER_NOT_FOUND\n    = 'gum.electron_desktop_picker_not_found';\n\n/**\n * An error which indicates that the jidesha extension for Firefox is\n * needed to proceed with screen sharing, and that it is not installed.\n */\nexport const FIREFOX_EXTENSION_NEEDED = 'gum.firefox_extension_needed';\n\n/**\n * Generic getUserMedia error.\n */\nexport const GENERAL = 'gum.general';\n\n/**\n * An error which indicates that requested device was not found.\n */\nexport const NOT_FOUND = 'gum.not_found';\n\n/**\n * An error which indicates that user denied permission to share requested\n * device.\n */\nexport const PERMISSION_DENIED = 'gum.permission_denied';\n\n/**\n * An error which indicates that track has been already disposed and cannot\n * be longer used.\n */\nexport const TRACK_IS_DISPOSED = 'track.track_is_disposed';\n\n/**\n * An error which indicates that track has no MediaStream associated.\n */\nexport const TRACK_NO_STREAM_FOUND = 'track.no_stream_found';\n\n/**\n * An error which indicates that requested video resolution is not supported\n * by a webcam.\n */\nexport const UNSUPPORTED_RESOLUTION = 'gum.unsupported_resolution';\n\n/**\n * Indicates that the track is no receiving any data without reason(the\n * stream was stopped, etc)\n */\nexport const NO_DATA_FROM_SOURCE = 'track.no_data_from_source';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiTrackErrors.js","/**\n * The media track was removed to the conference.\n */\nexport const LOCAL_TRACK_STOPPED = 'track.stopped';\n\n/**\n * Audio levels of a this track was changed.\n * The first argument is a number with audio level value in range [0, 1].\n * The second argument is a <tt>TraceablePeerConnection</tt> which is the peer\n * connection which measured the audio level (one audio track can be added\n * to multiple peer connection at the same time). This argument is optional for\n * local tracks for which we can measure audio level without the peer\n * connection (the value will be <tt>undefined</tt>).\n *\n * NOTE The second argument should be treated as library internal and can be\n * removed at any time.\n */\nexport const TRACK_AUDIO_LEVEL_CHANGED = 'track.audioLevelsChanged';\n\n/**\n * The audio output of the track was changed.\n */\nexport const TRACK_AUDIO_OUTPUT_CHANGED = 'track.audioOutputChanged';\n\n/**\n * A media track mute status was changed.\n */\nexport const TRACK_MUTE_CHANGED = 'track.trackMuteChanged';\n\n/**\n * The video type(\"camera\" or \"desktop\") of the track was changed.\n */\nexport const TRACK_VIDEOTYPE_CHANGED = 'track.videoTypeChanged';\n\n/**\n * Indicates that the track is not receiving any data even though we expect it\n * to receive data (i.e. the stream is not stopped).\n */\nexport const NO_DATA_FROM_SOURCE = 'track.no_data_from_source';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiTrackEvents.js","/**\n * @const\n */\nconst ALPHANUM\n    = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n/**\n * Hexadecimal digits.\n * @const\n */\nconst HEX_DIGITS = '0123456789abcdef';\n\n/**\n * Generates random int within the range [min, max]\n * @param min the minimum value for the generated number\n * @param max the maximum value for the generated number\n * @returns random int number\n */\nfunction randomInt(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n/**\n * Get random element from array or string.\n * @param {Array|string} arr source\n * @returns array element or string character\n */\nfunction randomElement(arr) {\n    return arr[randomInt(0, arr.length - 1)];\n}\n\n/**\n * Generate random alphanumeric string.\n * @param {number} length expected string length\n * @returns {string} random string of specified length\n */\nfunction randomAlphanumStr(length) {\n    let result = '';\n\n    for (let i = 0; i < length; i += 1) {\n        result += randomElement(ALPHANUM);\n    }\n\n    return result;\n}\n\n/**\n * Exported interface.\n */\nconst RandomUtil = {\n    /**\n     * Returns a random hex digit.\n     * @returns {*}\n     */\n    randomHexDigit() {\n        return randomElement(HEX_DIGITS);\n    },\n\n    /**\n     * Returns a random string of hex digits with length 'len'.\n     * @param len the length.\n     */\n    randomHexString(len) {\n        let ret = '';\n\n        while (len--) { // eslint-disable-line no-param-reassign\n            ret += this.randomHexDigit();\n        }\n\n        return ret;\n    },\n    randomElement,\n    randomAlphanumStr,\n    randomInt\n};\n\nmodule.exports = RandomUtil;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/RandomUtil.js","/*! precalltest  version = 1.1.6 2018-01-23 */\n\n\"use strict\";function getCurrent(){return window&&window.performance&&window.performance.now&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.now()+window.performance.timing.navigationStart:Date.now()}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.getCurrent=getCurrent;\n\n\n// WEBPACK FOOTER //\n// ../precalltest/dist/utility/timestamps.js","import Listenable from '../util/Listenable';\n\n/**\n * Creates ConnectionPlugin class that extends the passed class.\n * @param {Class} base the definition of the class that will be extended by\n * ConnectionPlugin\n */\nfunction getConnectionPluginDefinition(base = class {}) {\n    /**\n     * Base class for strophe connection plugins.\n     */\n    return class extends base {\n        /**\n         *\n         */\n        constructor(...args) {\n            super(...args);\n            this.connection = null;\n        }\n\n        /**\n         *\n         * @param connection\n         */\n        init(connection) {\n            this.connection = connection;\n        }\n    };\n}\n\n/**\n * ConnectionPlugin class.\n */\nexport default getConnectionPluginDefinition();\n\n/**\n * ConnectionPlugin class that extends Listenable.\n */\nexport const ConnectionPluginListenable\n    = getConnectionPluginDefinition(Listenable);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/ConnectionPlugin.js","import { getLogger } from 'jitsi-meet-logger';\nconst logger = getLogger(__filename);\n\nimport UsernameGenerator from '../util/UsernameGenerator';\n\nlet _callStatsUserName;\n\nlet _machineId;\n\n/**\n *\n */\nexport default {\n    /**\n     * Returns fake username for callstats\n     * @returns {string} fake username for callstats\n     */\n    get callStatsUserName() {\n        if (!_callStatsUserName) {\n            const localStorage = getLocalStorage();\n\n            if (localStorage) {\n                _callStatsUserName = localStorage.getItem('callStatsUserName');\n            }\n            if (!_callStatsUserName) {\n                _callStatsUserName = generateCallStatsUserName();\n                if (localStorage) {\n                    localStorage.setItem(\n                        'callStatsUserName',\n                        _callStatsUserName);\n                }\n            }\n        }\n\n        return _callStatsUserName;\n    },\n\n    /**\n     * Returns current machine id.\n     * @returns {string} machine id\n     */\n    get machineId() {\n        if (!_machineId) {\n            const localStorage = getLocalStorage();\n\n            if (localStorage) {\n                _machineId = localStorage.getItem('jitsiMeetId');\n            }\n            if (!_machineId) {\n                _machineId = generateJitsiMeetId();\n                if (localStorage) {\n                    localStorage.setItem('jitsiMeetId', _machineId);\n                }\n            }\n        }\n\n        return _machineId;\n    },\n\n    /**\n     * Returns current session id.\n     * @returns {string} current session id\n     */\n    get sessionId() {\n        // We may update sessionId in localStorage from another JitsiConference\n        // instance and that's why we should always re-read it.\n        const localStorage = getLocalStorage();\n\n        return localStorage ? localStorage.getItem('sessionId') : undefined;\n    },\n\n    /**\n     * Save current session id.\n     * @param {string} sessionId session id\n     */\n    set sessionId(sessionId) {\n        const localStorage = getLocalStorage();\n\n        if (localStorage) {\n            if (sessionId) {\n                localStorage.setItem('sessionId', sessionId);\n            } else {\n                localStorage.removeItem('sessionId');\n            }\n        }\n    }\n};\n\n/**\n * Generate fake username for callstats.\n * @returns {string} fake random username\n */\nfunction generateCallStatsUserName() {\n    const username = UsernameGenerator.generateUsername();\n\n    logger.log('generated callstats uid', username);\n\n    return username;\n}\n\n/**\n * Generate unique id.\n * @returns {string} random unique id\n */\nfunction generateJitsiMeetId() {\n    const jitsiMeetId = generateUniqueId();\n\n    logger.log('generated id', jitsiMeetId);\n\n    return jitsiMeetId;\n}\n\n/**\n * Gets the localStorage of the browser. (Technically, gets the localStorage of\n * the global object because there may be no browser but React Native for\n * example).\n * @returns {Storage} the local Storage object (if any)\n */\nfunction getLocalStorage() {\n    let storage;\n\n    try {\n        // eslint-disable-next-line no-invalid-this\n        storage = (window || this).localStorage;\n    } catch (error) {\n        logger.error(error);\n    }\n\n    return storage;\n}\n\n/**\n *\n */\nfunction generateUniqueId() {\n    return _p8() + _p8() + _p8() + _p8();\n}\n\n/**\n *\n */\nfunction _p8() {\n    return `${Math.random().toString(16)}000000000`.substr(2, 8);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/settings/Settings.js","/*! precalltest  version = 1.1.6 2018-01-23 */\n\n\"use strict\";function detect(){var s=Constants.browserName.chrome,e=null,o=null,n=null,i=Constants.codeBaseType.chrome;if(window&&(!window.navigator||!window.navigator.userAgent||window.csioReactNative))return window&&window.csioGetOsName&&(e=window.csioGetOsName()),window&&window.csioGetOsVer&&(o=window.csioGetOsVer()),window&&window.csioReactNative&&(n=\"react-native\"),{browserName:s,codeBase:i,os:e,osVersion:o,userAgent:n};var r=(n=navigator.userAgent).toLowerCase(),t=navigator.appVersion,a=\"\"+parseFloat(navigator.appVersion),d=void 0;-1!==(d=r.indexOf(\"opera\"))?(s=Constants.browserName.opera,a=r.substring(d+6),-1!==(d=r.indexOf(\"Version\"))&&(a=r.substring(d+8)),i=Constants.codeBaseType.chrome):-1!==(d=r.indexOf(\"opr\"))?(s=Constants.browserName.opera,a=r.substring(d+4),-1!==(d=r.indexOf(\"Version\"))&&(a=r.substring(d+8)),i=Constants.codeBaseType.chrome):-1!==(d=r.indexOf(\"msie\"))?(s=Constants.browserName.msie,a=r.substring(d+5),i=Constants.codeBaseType.chrome):-1!==(d=r.indexOf(\"edge\"))?(s=Constants.browserName.edge,a=r.substring(d+5),i=Constants.codeBaseType.edge):-1!==(d=r.indexOf(\"chrome\"))?(s=Constants.browserName.chrome,a=r.substring(d+7),i=Constants.codeBaseType.chrome):-1!==(d=r.indexOf(\"safari\"))?(s=Constants.browserName.safari,a=r.substring(d+7),-1!==(d=r.indexOf(\"Version\"))&&(a=r.substring(d+8)),i=Constants.codeBaseType.chrome):-1!==(d=r.indexOf(\"firefox\"))?(s=Constants.browserName.firefox,a=r.substring(d+8),i=Constants.codeBaseType.firefox):-1!==(d=r.indexOf(\"trident\"))&&(s=Constants.browserName.msie,d=r.indexOf(\"rv\"),a=r.substring(d+3,d+7),i=Constants.codeBaseType.chrome);var w=[{s:\"Windows 3.11\",r:/win16/},{s:\"Windows 95\",r:/(windows 95|win95|windows_95)/},{s:\"Windows ME\",r:/(win 9x 4.90|windows me)/},{s:\"Windows 98\",r:/(windows 98|win98)/},{s:\"Windows CE\",r:/windows ce/},{s:\"Windows 2000\",r:/(windows nt 5.0|windows 2000)/},{s:\"Windows XP\",r:/(windows nt 5.1|windows xp)/},{s:\"Windows Server 2003\",r:/windows nt 5.2/},{s:\"Windows Vista\",r:/windows nt 6.0/},{s:\"Windows 7\",r:/(windows 7|windows nt 6.1)/},{s:\"Windows 8.1\",r:/(windows 8.1|windows nt 6.3)/},{s:\"Windows 8\",r:/(windows 8|windows nt 6.2)/},{s:\"Windows 10\",r:/(windows 10|windows nt 10.0)/},{s:\"Windows NT 4.0\",r:/(windows nt 4.0|winnt4.0|winnt|windows nt)/},{s:\"Windows ME\",r:/windows me/},{s:\"Android\",r:/android/},{s:\"Open BSD\",r:/openbsd/},{s:\"Sun OS\",r:/sunos/},{s:\"Linux\",r:/(linux|x11)/},{s:\"iOS\",r:/(iphone|ipad|ipod)/},{s:\"Mac OS X\",r:/mac os x/},{s:\"Mac OS\",r:/(macppc|macintel|mac_powerpc|macintosh)/},{s:\"QNX\",r:/qnx/},{s:\"UNIX\",r:/unix/},{s:\"BeOS\",r:/beos/},{s:\"OS/2\",r:/os\\/2/},{s:\"Search Bot\",r:/(nuhk|googlebot|yammybot|openbot|slurp|msnbot|ask jeeves\\/teoma|ia_archiver)/}],c=void 0,m=void 0;for(c in w)if(w.hasOwnProperty(c)&&(m=w[c]).r.test(r)){e=m.s;break}switch(e&&/Windows/.test(e)&&(o=/Windows (.*)/.exec(e)[1],e=Constants.osName.windows),e){case Constants.osName.mac:o=/mac os x (10[\\.\\_\\d]+)/.exec(r)[1];break;case Constants.osName.android:o=/android ([\\.\\_\\d]+)/.exec(r)[1];break;case Constants.osName.ios:o=(o=/os (\\d+)_(\\d+)_?(\\d+)?/.exec(t))[1]+\".\"+o[2]+\".\"+(0|o[3])}return{browserName:s,browserVersion:a.toString(),os:e,osVersion:o,codeBase:i,userAgent:n}}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.detect=detect;var Constants=exports.Constants={codeBaseType:{chrome:\"Chrome\",firefox:\"Firefox\",edge:\"Edge\",plugin:\"Plugin\"},browserName:{chrome:\"Chrome\",firefox:\"Firefox\",edge:\"Edge\",msie:\"Microsoft Internet Explorer\",safari:\"Safari\"},osName:{windows:\"Windows\",mac:\"Mac OS X\",android:\"Android\",ios:\"iOS\"}};\n\n\n// WEBPACK FOOTER //\n// ../precalltest/dist/utility/stats/detectbrowser.js","/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2017 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 3.5.1\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n},{}],2:[function(_dereq_,module,exports){\n\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = _dereq_(\"./schedule\");\nvar Queue = _dereq_(\"./queue\");\nvar util = _dereq_(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n},{\"./queue\":26,\"./schedule\":29,\"./util\":36}],3:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = _dereq_(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n},{\"./promise\":22}],5:[function(_dereq_,module,exports){\n\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!true) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var args = [].slice.call(arguments, 1);;\n    if (!true) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n},{\"./util\":36}],6:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\n},{\"./util\":36}],7:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar getKeys = _dereq_(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\n},{\"./es5\":13,\"./util\":36}],8:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\n},{}],9:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = _dereq_(\"./errors\").Warning;\nvar util = _dereq_(\"./util\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (true ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    var self = this;\n    setTimeout(function() {\n        self._notifyUnhandledRejection();\n    }, 1);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new CustomEvent(name.toLowerCase(), {\n                    detail: event,\n                    cancelable: true\n                });\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],10:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n\n},{}],12:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = _dereq_(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n},{\"./es5\":13,\"./util\":36}],13:[function(_dereq_,module,exports){\nvar isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n},{}],14:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n},{}],15:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise, NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret === NEXT_FILTER) {\n            return ret;\n        } else if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nPromise.prototype.tapCatch = function (handlerOrPredicate) {\n    var len = arguments.length;\n    if(len === 1) {\n        return this._passThrough(handlerOrPredicate,\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    } else {\n         var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(new TypeError(\n                    \"tapCatch statement predicate: \"\n                    + \"expecting an object but got \" + util.classString(item)\n                ));\n            }\n        }\n        catchInstances.length = j;\n        var handler = arguments[i];\n        return this._passThrough(catchFilter(catchInstances, handler, this),\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    }\n\n};\n\nreturn PassThroughHandlerContext;\n};\n\n},{\"./catch_filter\":7,\"./util\":36}],16:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = _dereq_(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", String(value)) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],17:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!true) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!true) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var args = [].slice.call(arguments);;\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n},{\"./util\":36}],18:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\n},{\"./util\":36}],19:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n},{\"./util\":36}],20:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = _dereq_(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = _dereq_(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var args = [].slice.call(arguments, 1);;\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],21:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n},{\"./util\":36}],22:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = _dereq_(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = _dereq_(\"./es5\");\nvar Async = _dereq_(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = _dereq_(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    _dereq_(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = _dereq_(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = _dereq_(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    _dereq_(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (self == null || self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n\n}\n\nfunction Promise(executor) {\n    if (executor !== INTERNAL) {\n        check(this, executor);\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._resolveFromExecutor(executor);\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"Catch statement predicate: \" +\n                    \"expecting an object but got \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    if (executor === INTERNAL) return;\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\n_dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\n_dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n_dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n_dereq_(\"./direct_resolve\")(Promise);\n_dereq_(\"./synchronous_inspection\")(Promise);\n_dereq_(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.5.1\";\n_dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./call_get.js')(Promise);\n_dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n_dereq_('./timers.js')(Promise, INTERNAL, debug);\n_dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n_dereq_('./nodeify.js')(Promise);\n_dereq_('./promisify.js')(Promise, INTERNAL);\n_dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n_dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./settle.js')(Promise, PromiseArray, debug);\n_dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n_dereq_('./filter.js')(Promise, INTERNAL);\n_dereq_('./each.js')(Promise, INTERNAL);\n_dereq_('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n\n},{\"./any.js\":1,\"./async\":2,\"./bind\":3,\"./call_get.js\":5,\"./cancel\":6,\"./catch_filter\":7,\"./context\":8,\"./debuggability\":9,\"./direct_resolve\":10,\"./each.js\":11,\"./errors\":12,\"./es5\":13,\"./filter.js\":14,\"./finally\":15,\"./generators.js\":16,\"./join\":17,\"./map.js\":18,\"./method\":19,\"./nodeback\":20,\"./nodeify.js\":21,\"./promise_array\":23,\"./promisify.js\":24,\"./props.js\":25,\"./race.js\":27,\"./reduce.js\":28,\"./settle.js\":30,\"./some.js\":31,\"./synchronous_inspection\":32,\"./thenables\":33,\"./timers.js\":34,\"./using.js\":35,\"./util\":36}],23:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = _dereq_(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    case -6: return new Map();\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n},{\"./util\":36}],24:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = _dereq_(\"./util\");\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = _dereq_(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!true) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n\n},{\"./errors\":12,\"./nodeback\":20,\"./util\":36}],25:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar isObject = util.isObject;\nvar es5 = _dereq_(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, isMap ? -6 : -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n},{\"./es5\":13,\"./util\":36}],26:[function(_dereq_,module,exports){\n\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n},{}],27:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n},{\"./util\":36}],28:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\n},{\"./util\":36}],29:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n        };\n\n        return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n},{\"./util\":36}],30:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = _dereq_(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\n},{\"./util\":36}],31:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar RangeError = _dereq_(\"./errors\").RangeError;\nvar AggregateError = _dereq_(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n},{\"./errors\":12,\"./util\":36}],32:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n},{}],33:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n},{\"./util\":36}],34:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = _dereq_(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\n},{\"./util\":36}],35:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = _dereq_(\"./util\");\n    var TypeError = _dereq_(\"./errors\").TypeError;\n    var inherits = _dereq_(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n},{\"./errors\":12,\"./util\":36}],36:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var l = 8;\n    while (l--) new FakeConstructor();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj instanceof Error ||\n        (obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\");\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n},{\"./es5\":13}]},{},[4])(4)\n});                    ;if (typeof window !== 'undefined' && window !== null) {                               window.P = window.Promise;                                                     } else if (typeof self !== 'undefined' && self !== null) {                             self.P = self.Promise;                                                         }\n\n\n// WEBPACK FOOTER //\n// ../bluebird/js/browser/bluebird.js","/**\n * The events for the connection.\n */\n\n/**\n * Indicates that the connection has been disconnected. The event provides\n * the following parameters to its listeners:\n *\n * @param msg {string} a message associated with the disconnect such as the\n * last (known) error message\n */\nexport const CONNECTION_DISCONNECTED = 'connection.connectionDisconnected';\n\n/**\n * Indicates that the connection has been established. The event provides\n * the following parameters to its listeners:\n *\n * @param id {string} the ID of the local endpoint/participant/peer (within\n * the context of the established connection)\n */\nexport const CONNECTION_ESTABLISHED = 'connection.connectionEstablished';\n\n/**\n * Indicates that the connection has been failed for some reason. The event\n * provides the following parameters to its listeners:\n *\n * @param errType {JitsiConnectionErrors} the type of error associated with\n * the failure\n * @param errReason {string} the error (message) associated with the failure\n * @param credentials {object} the credentials used to connect (if any)\n * @param errReasonDetails {object} an optional object with details about\n * the error, like shard moving, suspending. Used for analytics purposes.\n */\nexport const CONNECTION_FAILED = 'connection.connectionFailed';\n\n/**\n * Indicates that the performed action cannot be executed because the\n * connection is not in the correct state(connected, disconnected, etc.)\n */\nexport const WRONG_STATE = 'connection.wrongState';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiConnectionEvents.js","/* global __filename */\n\nimport { getLogger } from 'jitsi-meet-logger';\n\nimport BridgeChannel from './BridgeChannel';\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\nimport * as JitsiConferenceEvents from '../../JitsiConferenceEvents';\nimport JitsiLocalTrack from './JitsiLocalTrack';\nimport JitsiTrackError from '../../JitsiTrackError';\nimport * as JitsiTrackErrors from '../../JitsiTrackErrors';\nimport Listenable from '../util/Listenable';\nimport { safeCounterIncrement } from '../util/MathUtil';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport browser from '../browser';\nimport RTCEvents from '../../service/RTC/RTCEvents';\nimport RTCUtils from './RTCUtils';\nimport Statistics from '../statistics/statistics';\nimport TraceablePeerConnection from './TraceablePeerConnection';\nimport VideoType from '../../service/RTC/VideoType';\n\nconst logger = getLogger(__filename);\n\n/**\n * The counter used to generated id numbers assigned to peer connections\n * @type {number}\n */\nlet peerConnectionIdCounter = 0;\n\n/**\n * The counter used to generate id number for the local\n * <code>MediaStreamTrack</code>s.\n * @type {number}\n */\nlet rtcTrackIdCounter = 0;\n\n/**\n *\n * @param tracksInfo\n * @param options\n */\nfunction createLocalTracks(tracksInfo, options) {\n    const newTracks = [];\n    let deviceId = null;\n\n    tracksInfo.forEach(trackInfo => {\n        if (trackInfo.mediaType === MediaType.AUDIO) {\n            deviceId = options.micDeviceId;\n        } else if (trackInfo.videoType === VideoType.CAMERA) {\n            deviceId = options.cameraDeviceId;\n        }\n        rtcTrackIdCounter = safeCounterIncrement(rtcTrackIdCounter);\n        const localTrack = new JitsiLocalTrack({\n            ...trackInfo,\n            deviceId,\n            facingMode: options.facingMode,\n            rtcId: rtcTrackIdCounter\n        });\n\n        newTracks.push(localTrack);\n    });\n\n    return newTracks;\n}\n\n/**\n * Creates {@code JitsiLocalTrack} instances from the passed in meta information\n * about MedieaTracks.\n *\n * @param {Object[]} mediaStreamMetaData - An array of meta information with\n * MediaTrack instances. Each can look like:\n * {{\n *     stream: MediaStream instance that holds a track with audio or video,\n *     track: MediaTrack within the MediaStream,\n *     videoType: \"camera\" or \"desktop\" or falsy,\n *     sourceId: ID of the desktopsharing source,\n *     sourceType: The desktopsharing source type\n * }}\n */\nfunction _newCreateLocalTracks(mediaStreamMetaData = []) {\n    return mediaStreamMetaData.map(metaData => {\n        const {\n            sourceId,\n            sourceType,\n            stream,\n            track,\n            videoType\n        } = metaData;\n\n        const { deviceId, facingMode } = track.getSettings();\n\n        // FIXME Move rtcTrackIdCounter to a static method in JitsiLocalTrack\n        // so RTC does not need to handle ID management. This move would be\n        // safer to do once the old createLocalTracks is removed.\n        rtcTrackIdCounter = safeCounterIncrement(rtcTrackIdCounter);\n\n        return new JitsiLocalTrack({\n            deviceId,\n            facingMode,\n            mediaType: track.kind,\n            rtcId: rtcTrackIdCounter,\n            sourceId,\n            sourceType,\n            stream,\n            track,\n            videoType: videoType || null\n        });\n    });\n}\n\n/**\n *\n */\nexport default class RTC extends Listenable {\n    /**\n     *\n     * @param conference\n     * @param options\n     */\n    constructor(conference, options = {}) {\n        super();\n        this.conference = conference;\n\n        /**\n         * A map of active <tt>TraceablePeerConnection</tt>.\n         * @type {Map.<number, TraceablePeerConnection>}\n         */\n        this.peerConnections = new Map();\n\n        this.localTracks = [];\n\n        this.options = options;\n\n        // BridgeChannel instance.\n        // @private\n        // @type {BridgeChannel}\n        this._channel = null;\n\n        // A flag whether we had received that the channel had opened we can\n        // get this flag out of sync if for some reason channel got closed\n        // from server, a desired behaviour so we can see errors when this\n        // happen.\n        // @private\n        // @type {boolean}\n        this._channelOpen = false;\n\n        /**\n         * The value specified to the last invocation of setLastN before the\n         * channel completed opening. If non-null, the value will be sent\n         * through a channel (once) as soon as it opens and will then be\n         * discarded.\n         * @private\n         * @type {number}\n         */\n        this._lastN = -1;\n\n        /**\n         * Defines the last N endpoints list. It can be null or an array once\n         * initialised with a channel last N event.\n         * @type {Array<string>|null}\n         * @private\n         */\n        this._lastNEndpoints = null;\n\n        /**\n         * The endpoint ID of currently pinned participant or <tt>null</tt> if\n         * no user is pinned.\n         * @type {string|null}\n         * @private\n         */\n        this._pinnedEndpoint = null;\n\n        /**\n         * The endpoint ID of currently selected participant or <tt>null</tt> if\n         * no user is selected.\n         * @type {string|null}\n         * @private\n         */\n        this._selectedEndpoint = null;\n\n        // The last N change listener.\n        this._lastNChangeListener = this._onLastNChanged.bind(this);\n\n        // Switch audio output device on all remote audio tracks. Local audio\n        // tracks handle this event by themselves.\n        if (RTCUtils.isDeviceChangeAvailable('output')) {\n            RTCUtils.addListener(RTCEvents.AUDIO_OUTPUT_DEVICE_CHANGED,\n                deviceId => this._updateAudioOutputForAudioTracks(deviceId));\n\n            RTCUtils.addListener(\n                RTCEvents.DEVICE_LIST_CHANGED,\n                () => this._updateAudioOutputForAudioTracks(\n                    RTCUtils.getAudioOutputDevice()));\n        }\n    }\n\n    /**\n     * Creates the local MediaStreams.\n     * @param {object} [options] Optional parameters.\n     * @param {array} options.devices The devices that will be requested.\n     * @param {string} options.resolution Resolution constraints.\n     * @param {bool} options.dontCreateJitsiTrack If <tt>true</tt> objects with\n     *     the following structure {stream: the Media Stream, type: \"audio\" or\n     *     \"video\", videoType: \"camera\" or \"desktop\"} will be returned trough\n     *     the Promise, otherwise JitsiTrack objects will be returned.\n     * @param {string} options.cameraDeviceId\n     * @param {string} options.micDeviceId\n     * @returns {*} Promise object that will receive the new JitsiTracks\n     */\n    static obtainAudioAndVideoPermissions(options) {\n        const usesNewGumFlow = browser.usesNewGumFlow();\n        const obtainMediaPromise = usesNewGumFlow\n            ? RTCUtils.newObtainAudioAndVideoPermissions(options)\n            : RTCUtils.obtainAudioAndVideoPermissions(options);\n\n        return obtainMediaPromise.then(\n            tracksInfo => {\n                const tracks = usesNewGumFlow\n                    ? _newCreateLocalTracks(tracksInfo)\n                    : createLocalTracks(tracksInfo, options);\n\n                return tracks.some(track => !track._isReceivingData())\n                    ? Promise.reject(\n                        new JitsiTrackError(\n                            JitsiTrackErrors.NO_DATA_FROM_SOURCE))\n                    : tracks;\n            });\n    }\n\n    /**\n     * Initializes the bridge channel of this instance.\n     * At least one of both, peerconnection or wsUrl parameters, must be\n     * given.\n     * @param {RTCPeerConnection} [peerconnection] WebRTC peer connection\n     * instance.\n     * @param {string} [wsUrl] WebSocket URL.\n     */\n    initializeBridgeChannel(peerconnection, wsUrl) {\n        this._channel = new BridgeChannel(\n            peerconnection, wsUrl, this.eventEmitter);\n\n        this._channelOpenListener = () => {\n            // Mark that channel as opened.\n            this._channelOpen = true;\n\n            // When the channel becomes available, tell the bridge about\n            // video selections so that it can do adaptive simulcast,\n            // we want the notification to trigger even if userJid\n            // is undefined, or null.\n            try {\n                this._channel.sendPinnedEndpointMessage(\n                    this._pinnedEndpoint);\n                this._channel.sendSelectedEndpointMessage(\n                    this._selectedEndpoint);\n            } catch (error) {\n                GlobalOnErrorHandler.callErrorHandler(error);\n                logger.error(\n                    `Cannot send selected(${this._selectedEndpoint})`\n                    + `pinned(${this._pinnedEndpoint}) endpoint message.`,\n                    error);\n            }\n\n            this.removeListener(RTCEvents.DATA_CHANNEL_OPEN,\n                this._channelOpenListener);\n            this._channelOpenListener = null;\n\n            // If setLastN was invoked before the bridge channel completed\n            // opening, apply the specified value now that the channel\n            // is open. NOTE that -1 is the default value assumed by both\n            // RTC module and the JVB.\n            if (this._lastN !== -1) {\n                this._channel.sendSetLastNMessage(this._lastN);\n            }\n        };\n\n        this.addListener(RTCEvents.DATA_CHANNEL_OPEN,\n            this._channelOpenListener);\n\n        // Add Last N change listener.\n        this.addListener(RTCEvents.LASTN_ENDPOINT_CHANGED,\n            this._lastNChangeListener);\n    }\n\n    /**\n     * Receives events when Last N had changed.\n     * @param {array} lastNEndpoints The new Last N endpoints.\n     * @private\n     */\n    _onLastNChanged(lastNEndpoints = []) {\n        const oldLastNEndpoints = this._lastNEndpoints || [];\n        let leavingLastNEndpoints = [];\n        let enteringLastNEndpoints = [];\n\n        this._lastNEndpoints = lastNEndpoints;\n\n        leavingLastNEndpoints = oldLastNEndpoints.filter(\n            id => !this.isInLastN(id));\n\n        enteringLastNEndpoints = lastNEndpoints.filter(\n            id => oldLastNEndpoints.indexOf(id) === -1);\n\n        this.conference.eventEmitter.emit(\n            JitsiConferenceEvents.LAST_N_ENDPOINTS_CHANGED,\n            leavingLastNEndpoints,\n            enteringLastNEndpoints);\n    }\n\n    /**\n     * Should be called when current media session ends and after the\n     * PeerConnection has been closed using PeerConnection.close() method.\n     */\n    onCallEnded() {\n        if (this._channel) {\n            // The BridgeChannel is not explicitly closed as the PeerConnection\n            // is closed on call ended which triggers datachannel onclose\n            // events. If using a WebSocket, the channel must be closed since\n            // it is not managed by the PeerConnection.\n            // The reference is cleared to disable any logic related to the\n            // channel.\n            if (this._channel && this._channel.mode === 'websocket') {\n                this._channel.close();\n            }\n\n            this._channel = null;\n            this._channelOpen = false;\n        }\n    }\n\n    /**\n     * Sets the maximum video size the local participant should receive from\n     * remote participants. Will no-op if no data channel has been established.\n     *\n     * @param {number} maxFrameHeightPixels the maximum frame height, in pixels,\n     * this receiver is willing to receive.\n     * @returns {void}\n     */\n    setReceiverVideoConstraint(maxFrameHeight) {\n        if (this._channel) {\n            this._channel.sendReceiverVideoConstraintMessage(maxFrameHeight);\n        }\n    }\n\n    /**\n     * Elects the participant with the given id to be the selected participant\n     * in order to always receive video for this participant (even when last n\n     * is enabled).\n     * If there is no channel we store it and send it through the channel once\n     * it is created.\n     * @param {string} id The user id.\n     * @throws NetworkError or InvalidStateError or Error if the operation\n     * fails.\n     */\n    selectEndpoint(id) {\n        // Cache the value if channel is missing, till we open it.\n        this._selectedEndpoint = id;\n        if (this._channel && this._channelOpen) {\n            this._channel.sendSelectedEndpointMessage(id);\n        }\n    }\n\n    /**\n     * Elects the participant with the given id to be the pinned participant in\n     * order to always receive video for this participant (even when last n is\n     * enabled).\n     * @param {stirng} id The user id.\n     * @throws NetworkError or InvalidStateError or Error if the operation\n     * fails.\n     */\n    pinEndpoint(id) {\n        // Cache the value if channel is missing, till we open it.\n        this._pinnedEndpoint = id;\n        if (this._channel && this._channelOpen) {\n            this._channel.sendPinnedEndpointMessage(id);\n        }\n    }\n\n    /**\n     *\n     * @param eventType\n     * @param listener\n     */\n    static addListener(eventType, listener) {\n        RTCUtils.addListener(eventType, listener);\n    }\n\n    /**\n     *\n     * @param eventType\n     * @param listener\n     */\n    static removeListener(eventType, listener) {\n        RTCUtils.removeListener(eventType, listener);\n    }\n\n    /**\n     *\n     */\n    static isRTCReady() {\n        return RTCUtils.isRTCReady();\n    }\n\n    /**\n     *\n     * @param options\n     */\n    static init(options = {}) {\n        this.options = options;\n\n        return RTCUtils.init(this.options);\n    }\n\n    /**\n     *\n     */\n    static getDeviceAvailability() {\n        return RTCUtils.getDeviceAvailability();\n    }\n\n    /* eslint-disable max-params */\n\n    /**\n     * Creates new <tt>TraceablePeerConnection</tt>\n     * @param {SignalingLayer} signaling The signaling layer that will\n     *      provide information about the media or participants which is not\n     *      carried over SDP.\n     * @param {object} iceConfig An object describing the ICE config like\n     *      defined in the WebRTC specification.\n     * @param {boolean} isP2P Indicates whether or not the new TPC will be used\n     *      in a peer to peer type of session.\n     * @param {object} options The config options.\n     * @param {boolean} options.disableSimulcast If set to 'true' will disable\n     *      the simulcast.\n     * @param {boolean} options.disableRtx If set to 'true' will disable the\n     *      RTX.\n     * @param {boolean} options.disableH264 If set to 'true' H264 will be\n     *      disabled by removing it from the SDP.\n     * @param {boolean} options.preferH264 If set to 'true' H264 will be\n     *      preferred over other video codecs.\n     * @return {TraceablePeerConnection}\n     */\n    createPeerConnection(signaling, iceConfig, isP2P, options) {\n        const pcConstraints = RTC.getPCConstraints(isP2P);\n\n        if (typeof options.abtestSuspendVideo !== 'undefined') {\n            RTCUtils.setSuspendVideo(pcConstraints, options.abtestSuspendVideo);\n\n            Statistics.analytics.addPermanentProperties(\n                { abtestSuspendVideo: options.abtestSuspendVideo });\n        }\n\n        peerConnectionIdCounter = safeCounterIncrement(peerConnectionIdCounter);\n        const newConnection\n            = new TraceablePeerConnection(\n                this,\n                peerConnectionIdCounter,\n                signaling,\n                iceConfig, pcConstraints,\n                isP2P, options);\n\n        this.peerConnections.set(newConnection.id, newConnection);\n\n        return newConnection;\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Removed given peer connection from this RTC module instance.\n     * @param {TraceablePeerConnection} traceablePeerConnection\n     * @return {boolean} <tt>true</tt> if the given peer connection was removed\n     * successfully or <tt>false</tt> if there was no peer connection mapped in\n     * this RTC instance.\n     */\n    _removePeerConnection(traceablePeerConnection) {\n        const id = traceablePeerConnection.id;\n\n        if (this.peerConnections.has(id)) {\n            // NOTE Remote tracks are not removed here.\n            this.peerConnections.delete(id);\n\n            return true;\n        }\n\n        return false;\n\n    }\n\n    /**\n     *\n     * @param track\n     */\n    addLocalTrack(track) {\n        if (!track) {\n            throw new Error('track must not be null nor undefined');\n        }\n\n        this.localTracks.push(track);\n\n        track.conference = this.conference;\n    }\n\n    /**\n     * Returns the current value for \"lastN\" - the amount of videos are going\n     * to be delivered. When set to -1 for unlimited or all available videos.\n     * @return {number}\n     */\n    getLastN() {\n        return this._lastN;\n    }\n\n    /**\n     * Get local video track.\n     * @returns {JitsiLocalTrack|undefined}\n     */\n    getLocalVideoTrack() {\n        const localVideo = this.getLocalTracks(MediaType.VIDEO);\n\n\n        return localVideo.length ? localVideo[0] : undefined;\n    }\n\n    /**\n     * Get local audio track.\n     * @returns {JitsiLocalTrack|undefined}\n     */\n    getLocalAudioTrack() {\n        const localAudio = this.getLocalTracks(MediaType.AUDIO);\n\n\n        return localAudio.length ? localAudio[0] : undefined;\n    }\n\n    /**\n     * Returns the local tracks of the given media type, or all local tracks if\n     * no specific type is given.\n     * @param {MediaType} [mediaType] Optional media type filter.\n     * (audio or video).\n     */\n    getLocalTracks(mediaType) {\n        let tracks = this.localTracks.slice();\n\n        if (mediaType !== undefined) {\n            tracks = tracks.filter(\n                track => track.getType() === mediaType);\n        }\n\n        return tracks;\n    }\n\n    /**\n     * Obtains all remote tracks currently known to this RTC module instance.\n     * @param {MediaType} [mediaType] The remote tracks will be filtered\n     *      by their media type if this argument is specified.\n     * @return {Array<JitsiRemoteTrack>}\n     */\n    getRemoteTracks(mediaType) {\n        let remoteTracks = [];\n\n        for (const tpc of this.peerConnections.values()) {\n            const pcRemoteTracks = tpc.getRemoteTracks(undefined, mediaType);\n\n            if (pcRemoteTracks) {\n                remoteTracks = remoteTracks.concat(pcRemoteTracks);\n            }\n        }\n\n        return remoteTracks;\n    }\n\n    /**\n     * Set mute for all local audio streams attached to the conference.\n     * @param value The mute value.\n     * @returns {Promise}\n     */\n    setAudioMute(value) {\n        const mutePromises = [];\n\n        this.getLocalTracks(MediaType.AUDIO).forEach(audioTrack => {\n            // this is a Promise\n            mutePromises.push(value ? audioTrack.mute() : audioTrack.unmute());\n        });\n\n        // We return a Promise from all Promises so we can wait for their\n        // execution.\n        return Promise.all(mutePromises);\n    }\n\n    /**\n     *\n     * @param track\n     */\n    removeLocalTrack(track) {\n        const pos = this.localTracks.indexOf(track);\n\n        if (pos === -1) {\n            return;\n        }\n\n        this.localTracks.splice(pos, 1);\n    }\n\n    /**\n     * Removes all JitsiRemoteTracks associated with given MUC nickname\n     * (resource part of the JID). Returns array of removed tracks.\n     *\n     * @param {string} Owner The resource part of the MUC JID.\n     * @returns {JitsiRemoteTrack[]}\n     */\n    removeRemoteTracks(owner) {\n        let removedTracks = [];\n\n        for (const tpc of this.peerConnections.values()) {\n            const pcRemovedTracks = tpc.removeRemoteTracks(owner);\n\n            removedTracks = removedTracks.concat(pcRemovedTracks);\n        }\n\n        logger.debug(\n            `Removed remote tracks for ${owner}`\n                + ` count: ${removedTracks.length}`);\n\n        return removedTracks;\n    }\n\n    /**\n     *\n     */\n    static getPCConstraints(isP2P) {\n        const pcConstraints\n            = isP2P ? RTCUtils.p2pPcConstraints : RTCUtils.pcConstraints;\n\n        if (!pcConstraints) {\n            return {};\n        }\n\n        return JSON.parse(JSON.stringify(pcConstraints));\n    }\n\n    /**\n     *\n     * @param elSelector\n     * @param stream\n     */\n    static attachMediaStream(elSelector, stream) {\n        return RTCUtils.attachMediaStream(elSelector, stream);\n    }\n\n    /**\n     * Returns the id of the given stream.\n     * @param {MediaStream} stream\n     */\n    static getStreamID(stream) {\n        return RTCUtils.getStreamID(stream);\n    }\n\n    /**\n     * Returns the id of the given track.\n     * @param {MediaStreamTrack} track\n     */\n    static getTrackID(track) {\n        return RTCUtils.getTrackID(track);\n    }\n\n    /**\n     * Returns true if retrieving the the list of input devices is supported\n     * and false if not.\n     */\n    static isDeviceListAvailable() {\n        return RTCUtils.isDeviceListAvailable();\n    }\n\n    /**\n     * Returns true if changing the input (camera / microphone) or output\n     * (audio) device is supported and false if not.\n     * @param {string} [deviceType] Type of device to change. Default is\n     *      undefined or 'input', 'output' - for audio output device change.\n     * @returns {boolean} true if available, false otherwise.\n     */\n    static isDeviceChangeAvailable(deviceType) {\n        return RTCUtils.isDeviceChangeAvailable(deviceType);\n    }\n\n    /**\n     * Returns currently used audio output device id, '' stands for default\n     * device\n     * @returns {string}\n     */\n    static getAudioOutputDevice() {\n        return RTCUtils.getAudioOutputDevice();\n    }\n\n    /**\n     * Returns list of available media devices if its obtained, otherwise an\n     * empty array is returned/\n     * @returns {array} list of available media devices.\n     */\n    static getCurrentlyAvailableMediaDevices() {\n        return RTCUtils.getCurrentlyAvailableMediaDevices();\n    }\n\n    /**\n     * Returns event data for device to be reported to stats.\n     * @returns {MediaDeviceInfo} device.\n     */\n    static getEventDataForActiveDevice(device) {\n        return RTCUtils.getEventDataForActiveDevice(device);\n    }\n\n    /**\n     * Sets current audio output device.\n     * @param {string} deviceId Id of 'audiooutput' device from\n     *      navigator.mediaDevices.enumerateDevices().\n     * @returns {Promise} resolves when audio output is changed, is rejected\n     *      otherwise\n     */\n    static setAudioOutputDevice(deviceId) {\n        return RTCUtils.setAudioOutputDevice(deviceId);\n    }\n\n    /**\n     * Returns <tt>true<tt/> if given WebRTC MediaStream is considered a valid\n     * \"user\" stream which means that it's not a \"receive only\" stream nor a\n     * \"mixed\" JVB stream.\n     *\n     * Clients that implement Unified Plan, such as Firefox use recvonly\n     * \"streams/channels/tracks\" for receiving remote stream/tracks, as opposed\n     * to Plan B where there are only 3 channels: audio, video and data.\n     *\n     * @param {MediaStream} stream The WebRTC MediaStream instance.\n     * @returns {boolean}\n     */\n    static isUserStream(stream) {\n        return RTC.isUserStreamById(RTCUtils.getStreamID(stream));\n    }\n\n    /**\n     * Returns <tt>true<tt/> if a WebRTC MediaStream identified by given stream\n     * ID is considered a valid \"user\" stream which means that it's not a\n     * \"receive only\" stream nor a \"mixed\" JVB stream.\n     *\n     * Clients that implement Unified Plan, such as Firefox use recvonly\n     * \"streams/channels/tracks\" for receiving remote stream/tracks, as opposed\n     * to Plan B where there are only 3 channels: audio, video and data.\n     *\n     * @param {string} streamId The id of WebRTC MediaStream.\n     * @returns {boolean}\n     */\n    static isUserStreamById(streamId) {\n        return streamId && streamId !== 'mixedmslabel'\n            && streamId !== 'default';\n    }\n\n    /**\n     * Allows to receive list of available cameras/microphones.\n     * @param {function} callback Would receive array of devices as an\n     *      argument.\n     */\n    static enumerateDevices(callback) {\n        RTCUtils.enumerateDevices(callback);\n    }\n\n    /**\n     * A method to handle stopping of the stream.\n     * One point to handle the differences in various implementations.\n     * @param {MediaStream} mediaStream MediaStream object to stop.\n     */\n    static stopMediaStream(mediaStream) {\n        RTCUtils.stopMediaStream(mediaStream);\n    }\n\n    /**\n     * Returns whether the desktop sharing is enabled or not.\n     * @returns {boolean}\n     */\n    static isDesktopSharingEnabled() {\n        return RTCUtils.isDesktopSharingEnabled();\n    }\n\n    /**\n     * Closes the currently opened bridge channel.\n     */\n    closeBridgeChannel() {\n        if (this._channel) {\n            this._channel.close();\n            this._channelOpen = false;\n\n            this.removeListener(RTCEvents.LASTN_ENDPOINT_CHANGED,\n                this._lastNChangeListener);\n        }\n    }\n\n    /* eslint-disable max-params */\n    /**\n     *\n     * @param {TraceablePeerConnection} tpc\n     * @param {number} ssrc\n     * @param {number} audioLevel\n     * @param {boolean} isLocal\n     */\n    setAudioLevel(tpc, ssrc, audioLevel, isLocal) {\n        const track = tpc.getTrackBySSRC(ssrc);\n\n        if (!track) {\n            return;\n        } else if (!track.isAudioTrack()) {\n            logger.warn(`Received audio level for non-audio track: ${ssrc}`);\n\n            return;\n        } else if (track.isLocal() !== isLocal) {\n            logger.error(\n                `${track} was expected to ${isLocal ? 'be' : 'not be'} local`);\n        }\n\n        track.setAudioLevel(audioLevel, tpc);\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Sends message via the bridge channel.\n     * @param {string} to The id of the endpoint that should receive the\n     *      message. If \"\" the message will be sent to all participants.\n     * @param {object} payload The payload of the message.\n     * @throws NetworkError or InvalidStateError or Error if the operation\n     * fails or there is no data channel created.\n     */\n    sendChannelMessage(to, payload) {\n        if (this._channel) {\n            this._channel.sendMessage(to, payload);\n        } else {\n            throw new Error('Channel support is disabled!');\n        }\n    }\n\n    /**\n     * Selects a new value for \"lastN\". The requested amount of videos are going\n     * to be delivered after the value is in effect. Set to -1 for unlimited or\n     * all available videos.\n     * @param {number} value the new value for lastN.\n     */\n    setLastN(value) {\n        if (this._lastN !== value) {\n            this._lastN = value;\n            if (this._channel && this._channelOpen) {\n                this._channel.sendSetLastNMessage(value);\n            }\n            this.eventEmitter.emit(RTCEvents.LASTN_VALUE_CHANGED, value);\n        }\n    }\n\n    /**\n     * Indicates if the endpoint id is currently included in the last N.\n     * @param {string} id The endpoint id that we check for last N.\n     * @returns {boolean} true if the endpoint id is in the last N or if we\n     * don't have bridge channel support, otherwise we return false.\n     */\n    isInLastN(id) {\n        return !this._lastNEndpoints // lastNEndpoints not initialised yet.\n            || this._lastNEndpoints.indexOf(id) > -1;\n    }\n\n    /**\n     * Updates the target audio output device for all remote audio tracks.\n     *\n     * @param {string} deviceId - The device id of the audio ouput device to\n     * use for all remote tracks.\n     * @private\n     * @returns {void}\n     */\n    _updateAudioOutputForAudioTracks(deviceId) {\n        const remoteAudioTracks = this.getRemoteTracks(MediaType.AUDIO);\n\n        for (const track of remoteAudioTracks) {\n            track.setAudioOutput(deviceId);\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/RTC.js","/* global $,\n          __filename,\n          attachMediaStream,\n          MediaStreamTrack,\n          RTCIceCandidate: true,\n          RTCPeerConnection,\n          RTCSessionDescription: true,\n          webkitMediaStream,\n          webkitRTCPeerConnection,\n          webkitURL\n*/\nimport { AVAILABLE_DEVICE } from '../../service/statistics/AnalyticsEvents';\nimport CameraFacingMode from '../../service/RTC/CameraFacingMode';\nimport EventEmitter from 'events';\nimport { getLogger } from 'jitsi-meet-logger';\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\nimport JitsiTrackError from '../../JitsiTrackError';\nimport Listenable from '../util/Listenable';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport Resolutions from '../../service/RTC/Resolutions';\nimport browser from '../browser';\nimport RTCEvents from '../../service/RTC/RTCEvents';\nimport ortcRTCPeerConnection from './ortc/RTCPeerConnection';\nimport screenObtainer from './ScreenObtainer';\nimport SDPUtil from '../xmpp/SDPUtil';\nimport Statistics from '../statistics/statistics';\nimport VideoType from '../../service/RTC/VideoType';\n\nconst logger = getLogger(__filename);\n\n// XXX Don't require Temasys unless it's to be used because it doesn't run on\n// React Native, for example.\nconst AdapterJS\n    = browser.isTemasysPluginUsed()\n        ? require('./adapter.screenshare')\n        : undefined;\n\n// Require adapter only for certain browsers. This is being done for\n// react-native, which has its own shims, and while browsers are being migrated\n// over to use adapter's shims.\nif (browser.usesNewGumFlow()) {\n    require('webrtc-adapter');\n}\n\nconst eventEmitter = new EventEmitter();\n\nconst AVAILABLE_DEVICES_POLL_INTERVAL_TIME = 3000; // ms\n\n/**\n * Default resolution to obtain for video tracks if no resolution is specified.\n * This default is used for old gum flow only, as new gum flow uses\n * {@link DEFAULT_CONSTRAINTS}.\n */\nconst OLD_GUM_DEFAULT_RESOLUTION = 720;\n\n/**\n * Default devices to obtain when no specific devices are specified. This\n * default is used for old gum flow only.\n */\nconst OLD_GUM_DEFAULT_DEVICES = [ 'audio', 'video' ];\n\n/**\n * Default MediaStreamConstraints to use for calls to getUserMedia.\n *\n * @private\n */\nconst DEFAULT_CONSTRAINTS = {\n    video: {\n        aspectRatio: 16 / 9,\n        height: {\n            ideal: 1080,\n            max: 1080,\n            min: 240\n        }\n    }\n};\n\n\n// TODO (brian): Move this devices hash, maybe to a model, so RTCUtils remains\n// stateless.\nconst devices = {\n    audio: false,\n    video: false\n};\n\n/**\n * The default frame rate for Screen Sharing.\n */\nconst SS_DEFAULT_FRAME_RATE = 5;\n\n// Currently audio output device change is supported only in Chrome and\n// default output always has 'default' device ID\nlet audioOutputDeviceId = 'default'; // default device\n// whether user has explicitly set a device to use\nlet audioOutputChanged = false;\n\n// Disables all audio processing\nlet disableAP = false;\n\n// Disables Acoustic Echo Cancellation\nlet disableAEC = false;\n\n// Disables Noise Suppression\nlet disableNS = false;\n\n// Disables Automatic Gain Control\nlet disableAGC = false;\n\n// Disables Highpass Filter\nlet disableHPF = false;\n\nconst featureDetectionAudioEl = document.createElement('audio');\nconst isAudioOutputDeviceChangeAvailable\n    = typeof featureDetectionAudioEl.setSinkId !== 'undefined';\n\nlet currentlyAvailableMediaDevices;\n\n/**\n * \"rawEnumerateDevicesWithCallback\" will be initialized only after WebRTC is\n * ready. Otherwise it is too early to assume that the devices listing is not\n * supported.\n */\nlet rawEnumerateDevicesWithCallback;\n\n/**\n *\n */\nfunction initRawEnumerateDevicesWithCallback() {\n    rawEnumerateDevicesWithCallback\n        = navigator.mediaDevices && navigator.mediaDevices.enumerateDevices\n            ? function(callback) {\n                navigator.mediaDevices.enumerateDevices().then(\n                    callback,\n                    () => callback([]));\n            }\n\n            // Safari:\n            // \"ReferenceError: Can't find variable: MediaStreamTrack\" when\n            // Temasys plugin is not installed yet, have to delay this call\n            // until WebRTC is ready.\n            : MediaStreamTrack && MediaStreamTrack.getSources\n                ? function(callback) {\n                    MediaStreamTrack.getSources(\n                        sources =>\n                            callback(\n                                sources.map(convertMediaStreamTrackSource)));\n                }\n                : undefined;\n}\n\n// TODO: currently no browser supports 'devicechange' event even in nightly\n// builds so no feature/browser detection is used at all. However in future this\n// should be changed to some expression. Progress on 'devicechange' event\n// implementation for Chrome/Opera/NWJS can be tracked at\n// https://bugs.chromium.org/p/chromium/issues/detail?id=388648, for Firefox -\n// at https://bugzilla.mozilla.org/show_bug.cgi?id=1152383. More information on\n// 'devicechange' event can be found in spec -\n// http://w3c.github.io/mediacapture-main/#event-mediadevices-devicechange\n// TODO: check MS Edge\nconst isDeviceChangeEventSupported = false;\n\nlet rtcReady = false;\n\n/**\n *\n * @param constraints\n * @param isNewStyleConstraintsSupported\n * @param resolution\n */\nfunction setResolutionConstraints(\n        constraints,\n        isNewStyleConstraintsSupported,\n        resolution) {\n    if (Resolutions[resolution]) {\n        if (isNewStyleConstraintsSupported) {\n            constraints.video.width = {\n                ideal: Resolutions[resolution].width\n            };\n            constraints.video.height = {\n                ideal: Resolutions[resolution].height\n            };\n        }\n\n        constraints.video.mandatory.minWidth = Resolutions[resolution].width;\n        constraints.video.mandatory.minHeight = Resolutions[resolution].height;\n    }\n\n    if (constraints.video.mandatory.minWidth) {\n        constraints.video.mandatory.maxWidth\n            = constraints.video.mandatory.minWidth;\n    }\n\n    if (constraints.video.mandatory.minHeight) {\n        constraints.video.mandatory.maxHeight\n            = constraints.video.mandatory.minHeight;\n    }\n}\n\n/**\n * @param {string[]} um required user media types\n *\n * @param {Object} [options={}] optional parameters\n * @param {string} options.resolution\n * @param {number} options.bandwidth\n * @param {number} options.fps\n * @param {string} options.desktopStream\n * @param {string} options.cameraDeviceId\n * @param {string} options.micDeviceId\n * @param {CameraFacingMode} options.facingMode\n * @param {bool} firefox_fake_device\n * @param {Object} options.frameRate - used only for dekstop sharing.\n * @param {Object} options.frameRate.min - Minimum fps\n * @param {Object} options.frameRate.max - Maximum fps\n */\nfunction getConstraints(um, options = {}) {\n    const constraints = {\n        audio: false,\n        video: false\n    };\n\n    // Don't mix new and old style settings for Chromium as this leads\n    // to TypeError in new Chromium versions. @see\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=614716\n    // This is a temporary solution, in future we will fully split old and\n    // new style constraints when new versions of Chromium and Firefox will\n    // have stable support of new constraints format. For more information\n    // @see https://github.com/jitsi/lib-jitsi-meet/pull/136\n    const isNewStyleConstraintsSupported\n        = browser.isFirefox()\n        || browser.isEdge()\n        || browser.isReactNative()\n        || browser.isTemasysPluginUsed();\n\n    if (um.indexOf('video') >= 0) {\n        // same behaviour as true\n        constraints.video = { mandatory: {},\n            optional: [] };\n\n        if (options.cameraDeviceId) {\n            if (isNewStyleConstraintsSupported) {\n                // New style of setting device id.\n                constraints.video.deviceId = options.cameraDeviceId;\n            }\n\n            // Old style.\n            constraints.video.optional.push({\n                sourceId: options.cameraDeviceId\n            });\n        } else {\n            // Prefer the front i.e. user-facing camera (to the back i.e.\n            // environment-facing camera, for example).\n            // TODO: Maybe use \"exact\" syntax if options.facingMode is defined,\n            // but this probably needs to be decided when updating other\n            // constraints, as we currently don't use \"exact\" syntax anywhere.\n            const facingMode = options.facingMode || CameraFacingMode.USER;\n\n            if (isNewStyleConstraintsSupported) {\n                constraints.video.facingMode = facingMode;\n            }\n            constraints.video.optional.push({\n                facingMode\n            });\n        }\n\n        if (options.minFps || options.maxFps || options.fps) {\n            // for some cameras it might be necessary to request 30fps\n            // so they choose 30fps mjpg over 10fps yuy2\n            if (options.minFps || options.fps) {\n                // Fall back to options.fps for backwards compatibility\n                options.minFps = options.minFps || options.fps;\n                constraints.video.mandatory.minFrameRate = options.minFps;\n            }\n            if (options.maxFps) {\n                constraints.video.mandatory.maxFrameRate = options.maxFps;\n            }\n        }\n\n        setResolutionConstraints(\n            constraints, isNewStyleConstraintsSupported, options.resolution);\n    }\n    if (um.indexOf('audio') >= 0) {\n        if (browser.isReactNative()) {\n            // The react-native-webrtc project that we're currently using\n            // expects the audio constraint to be a boolean.\n            constraints.audio = true;\n        } else if (browser.isFirefox()) {\n            if (options.micDeviceId) {\n                constraints.audio = {\n                    mandatory: {},\n                    deviceId: options.micDeviceId, // new style\n                    optional: [ {\n                        sourceId: options.micDeviceId // old style\n                    } ] };\n            } else {\n                constraints.audio = true;\n            }\n        } else {\n            // same behaviour as true\n            constraints.audio = { mandatory: {},\n                optional: [] };\n            if (options.micDeviceId) {\n                if (isNewStyleConstraintsSupported) {\n                    // New style of setting device id.\n                    constraints.audio.deviceId = options.micDeviceId;\n                }\n\n                // Old style.\n                constraints.audio.optional.push({\n                    sourceId: options.micDeviceId\n                });\n            }\n\n            // if it is good enough for hangouts...\n            constraints.audio.optional.push(\n                { echoCancellation: !disableAEC && !disableAP },\n                { googEchoCancellation: !disableAEC && !disableAP },\n                { googAutoGainControl: !disableAGC && !disableAP },\n                { googNoiseSuppression: !disableNS && !disableAP },\n                { googHighpassFilter: !disableHPF && !disableAP },\n                { googNoiseSuppression2: !disableNS && !disableAP },\n                { googEchoCancellation2: !disableAEC && !disableAP },\n                { googAutoGainControl2: !disableAGC && !disableAP }\n            );\n        }\n    }\n    if (um.indexOf('screen') >= 0) {\n        if (browser.isChrome()) {\n            constraints.video = {\n                mandatory: getSSConstraints({\n                    ...options,\n                    source: 'screen'\n                }),\n                optional: []\n            };\n\n        } else if (browser.isTemasysPluginUsed()) {\n            constraints.video = {\n                optional: [\n                    {\n                        sourceId: AdapterJS.WebRTCPlugin.plugin.screensharingKey\n                    }\n                ]\n            };\n        } else if (browser.isFirefox()) {\n            constraints.video = {\n                mozMediaSource: 'window',\n                mediaSource: 'window',\n                frameRate: options.frameRate || {\n                    min: SS_DEFAULT_FRAME_RATE,\n                    max: SS_DEFAULT_FRAME_RATE\n                }\n            };\n\n        } else {\n            const errmsg\n                = '\\'screen\\' WebRTC media source is supported only in Chrome'\n                    + ' and with Temasys plugin';\n\n            GlobalOnErrorHandler.callErrorHandler(new Error(errmsg));\n            logger.error(errmsg);\n        }\n    }\n    if (um.indexOf('desktop') >= 0) {\n        constraints.video = {\n            mandatory: getSSConstraints({\n                ...options,\n                source: 'desktop'\n            }),\n            optional: []\n        };\n    }\n\n    if (options.bandwidth) {\n        if (!constraints.video) {\n            // same behaviour as true\n            constraints.video = { mandatory: {},\n                optional: [] };\n        }\n        constraints.video.optional.push({ bandwidth: options.bandwidth });\n    }\n\n    // we turn audio for both audio and video tracks, the fake audio & video\n    // seems to work only when enabled in one getUserMedia call, we cannot get\n    // fake audio separate by fake video this later can be a problem with some\n    // of the tests\n    if (browser.isFirefox() && options.firefox_fake_device) {\n        // seems to be fixed now, removing this experimental fix, as having\n        // multiple audio tracks brake the tests\n        // constraints.audio = true;\n        constraints.fake = true;\n    }\n\n    return constraints;\n}\n\n/**\n * Creates a constraints object to be passed into a call to getUserMedia.\n *\n * @param {Array} um - An array of user media types to get. The accepted\n * types are \"video\", \"audio\", and \"desktop.\"\n * @param {Object} options - Various values to be added to the constraints.\n * @param {string} options.cameraDeviceId - The device id for the video\n * capture device to get video from.\n * @param {Object} options.constraints - Default constraints object to use\n * as a base for the returned constraints.\n * @param {Object} options.desktopStream - The desktop source id from which\n * to capture a desktop sharing video.\n * @param {string} options.facingMode - Which direction the camera is\n * pointing to.\n * @param {string} options.micDeviceId - The device id for the audio capture\n * device to get audio from.\n * @param {Object} options.frameRate - used only for dekstop sharing.\n * @param {Object} options.frameRate.min - Minimum fps\n * @param {Object} options.frameRate.max - Maximum fps\n * @private\n * @returns {Object}\n */\nfunction newGetConstraints(um = [], options = {}) {\n    // Create a deep copy of the constraints to avoid any modification of\n    // the passed in constraints object.\n    const constraints = JSON.parse(JSON.stringify(\n        options.constraints || DEFAULT_CONSTRAINTS));\n\n    if (um.indexOf('video') >= 0) {\n        if (!constraints.video) {\n            constraints.video = {};\n        }\n\n        if (options.cameraDeviceId) {\n            constraints.video.deviceId = options.cameraDeviceId;\n        } else {\n            const facingMode = options.facingMode || CameraFacingMode.USER;\n\n            constraints.video.facingMode = facingMode;\n        }\n    } else {\n        constraints.video = false;\n    }\n\n    if (um.indexOf('audio') >= 0) {\n        if (!constraints.audio || typeof constraints.audio === 'boolean') {\n            constraints.audio = {};\n        }\n\n        // NOTE(brian): the new-style ('advanced' instead of 'optional')\n        // doesn't seem to carry through the googXXX constraints\n        // Changing back to 'optional' here (even with video using\n        // the 'advanced' style) allows them to be passed through\n        // but also requires the device id to capture to be set in optional\n        // as sourceId otherwise the constraints are considered malformed.\n        if (!constraints.audio.optional) {\n            constraints.audio.optional = [];\n        }\n\n        constraints.audio.optional.push(\n            { sourceId: options.micDeviceId },\n            { echoCancellation: !disableAEC && !disableAP },\n            { googEchoCancellation: !disableAEC && !disableAP },\n            { googAutoGainControl: !disableAGC && !disableAP },\n            { googNoiseSuppression: !disableNS && !disableAP },\n            { googHighpassFilter: !disableHPF && !disableAP },\n            { googNoiseSuppression2: !disableNS && !disableAP },\n            { googEchoCancellation2: !disableAEC && !disableAP },\n            { googAutoGainControl2: !disableAGC && !disableAP }\n        );\n    } else {\n        constraints.audio = false;\n    }\n\n    if (um.indexOf('desktop') >= 0) {\n        if (!constraints.video || typeof constraints.video === 'boolean') {\n            constraints.video = {};\n        }\n\n        constraints.video = {\n            mandatory: getSSConstraints({\n                ...options,\n                source: 'desktop'\n            })\n        };\n    }\n\n    return constraints;\n}\n\n/**\n * Generates GUM constraints for screen sharing.\n *\n * @param {Object} options - The options passed to\n * <tt>obtainAudioAndVideoPermissions</tt>.\n * @returns {Object} - GUM constraints.\n *\n * TODO: Currently only the new GUM flow and Chrome is using the method. We\n * should make it work for all use cases.\n */\nfunction getSSConstraints(options = {}) {\n    const {\n        desktopStream,\n        frameRate = {\n            min: SS_DEFAULT_FRAME_RATE,\n            max: SS_DEFAULT_FRAME_RATE\n        }\n    } = options;\n    const { max, min } = frameRate;\n\n    const constraints = {\n        chromeMediaSource: options.source,\n        maxWidth: window.screen.width,\n        maxHeight: window.screen.height\n    };\n\n    if (typeof min === 'number') {\n        constraints.minFrameRate = min;\n    }\n\n    if (typeof max === 'number') {\n        constraints.maxFrameRate = max;\n    }\n\n    if (typeof desktopStream !== 'undefined') {\n        constraints.chromeMediaSourceId = desktopStream;\n    }\n\n    return constraints;\n}\n\n/**\n * Sets the availbale devices based on the options we requested and the\n * streams we received.\n * @param um the options we requested to getUserMedia.\n * @param stream the stream we received from calling getUserMedia.\n */\nfunction setAvailableDevices(um, stream) {\n    const audioTracksReceived = stream && stream.getAudioTracks().length > 0;\n    const videoTracksReceived = stream && stream.getVideoTracks().length > 0;\n\n    if (um.indexOf('video') !== -1) {\n        devices.video = videoTracksReceived;\n    }\n    if (um.indexOf('audio') !== -1) {\n        devices.audio = audioTracksReceived;\n    }\n\n    eventEmitter.emit(RTCEvents.AVAILABLE_DEVICES_CHANGED, devices);\n}\n\n/**\n * Checks if new list of available media devices differs from previous one.\n * @param {MediaDeviceInfo[]} newDevices - list of new devices.\n * @returns {boolean} - true if list is different, false otherwise.\n */\nfunction compareAvailableMediaDevices(newDevices) {\n    if (newDevices.length !== currentlyAvailableMediaDevices.length) {\n        return true;\n    }\n\n    /* eslint-disable newline-per-chained-call */\n\n    return (\n        newDevices.map(mediaDeviceInfoToJSON).sort().join('')\n            !== currentlyAvailableMediaDevices\n                .map(mediaDeviceInfoToJSON).sort().join(''));\n\n    /* eslint-enable newline-per-chained-call */\n\n    /**\n     *\n     * @param info\n     */\n    function mediaDeviceInfoToJSON(info) {\n        return JSON.stringify({\n            kind: info.kind,\n            deviceId: info.deviceId,\n            groupId: info.groupId,\n            label: info.label,\n            facing: info.facing\n        });\n    }\n}\n\n/**\n * Periodically polls enumerateDevices() method to check if list of media\n * devices has changed. This is temporary workaround until 'devicechange' event\n * will be supported by browsers.\n */\nfunction pollForAvailableMediaDevices() {\n    // Here we use plain navigator.mediaDevices.enumerateDevices instead of\n    // wrapped because we just need to know the fact the devices changed, labels\n    // do not matter. This fixes situation when we have no devices initially,\n    // and then plug in a new one.\n    if (rawEnumerateDevicesWithCallback) {\n        rawEnumerateDevicesWithCallback(ds => {\n            // We don't fire RTCEvents.DEVICE_LIST_CHANGED for the first time\n            // we call enumerateDevices(). This is the initial step.\n            if (typeof currentlyAvailableMediaDevices === 'undefined') {\n                currentlyAvailableMediaDevices = ds.slice(0);\n            } else if (compareAvailableMediaDevices(ds)) {\n                onMediaDevicesListChanged(ds);\n            }\n\n            window.setTimeout(pollForAvailableMediaDevices,\n                AVAILABLE_DEVICES_POLL_INTERVAL_TIME);\n        });\n    }\n}\n\n/**\n * Sends analytics event with the passed device list.\n *\n * @param {Array<MediaDeviceInfo>} deviceList - List with info about the\n * available devices.\n * @returns {void}\n */\nfunction sendDeviceListToAnalytics(deviceList) {\n    const audioInputDeviceCount\n        = deviceList.filter(d => d.kind === 'audioinput').length;\n    const audioOutputDeviceCount\n        = deviceList.filter(d => d.kind === 'audiooutput').length;\n    const videoInputDeviceCount\n        = deviceList.filter(d => d.kind === 'videoinput').length;\n    const videoOutputDeviceCount\n        = deviceList.filter(d => d.kind === 'videooutput').length;\n\n    deviceList.forEach(device => {\n        const attributes = {\n            'audio_input_device_count': audioInputDeviceCount,\n            'audio_output_device_count': audioOutputDeviceCount,\n            'video_input_device_count': videoInputDeviceCount,\n            'video_output_device_count': videoOutputDeviceCount,\n            'device_id': device.deviceId,\n            'device_group_id': device.groupId,\n            'device_kind': device.kind,\n            'device_label': device.label\n        };\n\n        Statistics.sendAnalytics(AVAILABLE_DEVICE, attributes);\n    });\n}\n\n/**\n * Event handler for the 'devicechange' event.\n *\n * @param {MediaDeviceInfo[]} devices - list of media devices.\n * @emits RTCEvents.DEVICE_LIST_CHANGED\n */\nfunction onMediaDevicesListChanged(devicesReceived) {\n    currentlyAvailableMediaDevices = devicesReceived.slice(0);\n    logger.info(\n        'list of media devices has changed:',\n        currentlyAvailableMediaDevices);\n\n    sendDeviceListToAnalytics(currentlyAvailableMediaDevices);\n\n    const videoInputDevices\n        = currentlyAvailableMediaDevices.filter(d => d.kind === 'videoinput');\n    const audioInputDevices\n        = currentlyAvailableMediaDevices.filter(d => d.kind === 'audioinput');\n    const videoInputDevicesWithEmptyLabels\n        = videoInputDevices.filter(d => d.label === '');\n    const audioInputDevicesWithEmptyLabels\n        = audioInputDevices.filter(d => d.label === '');\n\n    if (videoInputDevices.length\n            && videoInputDevices.length\n                === videoInputDevicesWithEmptyLabels.length) {\n        devices.video = false;\n    }\n\n    if (audioInputDevices.length\n            && audioInputDevices.length\n                === audioInputDevicesWithEmptyLabels.length) {\n        devices.audio = false;\n    }\n\n    eventEmitter.emit(RTCEvents.DEVICE_LIST_CHANGED, devicesReceived);\n}\n\n/**\n * Apply function with arguments if function exists.\n * Do nothing if function not provided.\n * @param {function} [fn] function to apply\n * @param {Array} [args=[]] arguments for function\n */\nfunction maybeApply(fn, args) {\n    fn && fn(...args);\n}\n\n/**\n * Wrap `getUserMedia` in order to convert between callback and Promise based\n * APIs.\n * @param {Function} getUserMedia native function\n * @returns {Function} wrapped function\n */\nfunction wrapGetUserMedia(getUserMedia, usePromises = false) {\n    let gUM;\n\n    if (usePromises) {\n        gUM = function(constraints, successCallback, errorCallback) {\n            return getUserMedia(constraints)\n                .then(stream => {\n                    maybeApply(successCallback, [ stream ]);\n\n                    return stream;\n                })\n                .catch(error => {\n                    maybeApply(errorCallback, [ error ]);\n\n                    throw error;\n                });\n        };\n    } else {\n        gUM = function(constraints, successCallback, errorCallback) {\n            getUserMedia(constraints, stream => {\n                maybeApply(successCallback, [ stream ]);\n            }, error => {\n                maybeApply(errorCallback, [ error ]);\n            });\n        };\n    }\n\n    return gUM;\n}\n\n/**\n * Use old MediaStreamTrack to get devices list and\n * convert it to enumerateDevices format.\n * @param {Function} callback function to call when received devices list.\n */\nfunction enumerateDevicesThroughMediaStreamTrack(callback) {\n    MediaStreamTrack.getSources(\n        sources => callback(sources.map(convertMediaStreamTrackSource)));\n}\n\n/**\n * Converts MediaStreamTrack Source to enumerateDevices format.\n * @param {Object} source\n */\nfunction convertMediaStreamTrackSource(source) {\n    const kind = (source.kind || '').toLowerCase();\n\n    return {\n        facing: source.facing || null,\n        label: source.label,\n\n        // theoretically deprecated MediaStreamTrack.getSources should\n        // not return 'audiooutput' devices but let's handle it in any\n        // case\n        kind: kind\n            ? kind === 'audiooutput' ? kind : `${kind}input`\n            : null,\n        deviceId: source.id,\n        groupId: source.groupId || null\n    };\n}\n\n/**\n * Handles the newly created Media Streams.\n * @param streams the new Media Streams\n * @param resolution the resolution of the video streams\n * @returns {*[]} object that describes the new streams\n */\nfunction handleLocalStream(streams, resolution) {\n    let audioStream, desktopStream, videoStream;\n    const res = [];\n\n    // XXX The function obtainAudioAndVideoPermissions has examined the type of\n    // the browser, its capabilities, etc. and has taken the decision whether to\n    // invoke getUserMedia per device (e.g. Firefox) or once for both audio and\n    // video (e.g. Chrome). In order to not duplicate the logic here, examine\n    // the specified streams and figure out what we've received based on\n    // obtainAudioAndVideoPermissions' decision.\n    if (streams) {\n        // As mentioned above, certian types of browser (e.g. Chrome) support\n        // (with a result which meets our requirements expressed bellow) calling\n        // getUserMedia once for both audio and video.\n        const audioVideo = streams.audioVideo;\n\n        if (audioVideo) {\n            const NativeMediaStream\n                 = window.webkitMediaStream || window.MediaStream;\n            const audioTracks = audioVideo.getAudioTracks();\n\n            if (audioTracks.length) {\n                // eslint-disable-next-line new-cap\n                audioStream = new NativeMediaStream();\n                for (let i = 0; i < audioTracks.length; i++) {\n                    audioStream.addTrack(audioTracks[i]);\n                }\n            }\n\n            const videoTracks = audioVideo.getVideoTracks();\n\n            if (videoTracks.length) {\n                // eslint-disable-next-line new-cap\n                videoStream = new NativeMediaStream();\n                for (let j = 0; j < videoTracks.length; j++) {\n                    videoStream.addTrack(videoTracks[j]);\n                }\n            }\n        } else {\n            // On other types of browser (e.g. Firefox) we choose (namely,\n            // obtainAudioAndVideoPermissions) to call getUserMedia per device\n            // (type).\n            audioStream = streams.audio;\n            videoStream = streams.video;\n        }\n\n        desktopStream = streams.desktop;\n    }\n\n    if (desktopStream) {\n        const { stream, sourceId, sourceType } = desktopStream;\n\n        res.push({\n            stream,\n            sourceId,\n            sourceType,\n            track: stream.getVideoTracks()[0],\n            mediaType: MediaType.VIDEO,\n            videoType: VideoType.DESKTOP\n        });\n    }\n    if (audioStream) {\n        res.push({\n            stream: audioStream,\n            track: audioStream.getAudioTracks()[0],\n            mediaType: MediaType.AUDIO,\n            videoType: null\n        });\n    }\n    if (videoStream) {\n        res.push({\n            stream: videoStream,\n            track: videoStream.getVideoTracks()[0],\n            mediaType: MediaType.VIDEO,\n            videoType: VideoType.CAMERA,\n            resolution\n        });\n    }\n\n    return res;\n}\n\n/**\n * Represents a default implementation of setting a <tt>MediaStream</tt> as the\n * source of a video element that tries to be browser-agnostic through feature\n * checking. Note though that it was not completely clear from the predating\n * browser-specific implementations what &quot;videoSrc&quot; was because one\n * implementation of {@link RTCUtils#getVideoSrc} would return\n * <tt>MediaStream</tt> (e.g. Firefox), another a <tt>string</tt> representation\n * of the <tt>URL</tt> of the <tt>MediaStream</tt> (e.g. Chrome) and the return\n * value was only used by {@link RTCUIHelper#getVideoId} which itself did not\n * appear to be used anywhere. Generally, the implementation will try to follow\n * the related standards i.e. work with the <tt>srcObject</tt> and <tt>src</tt>\n * properties of the specified <tt>element</tt> taking into account vender\n * prefixes.\n *\n * @param element the element whose video source/src is to be set to the\n * specified <tt>stream</tt>\n * @param {MediaStream} stream the <tt>MediaStream</tt> to set as the video\n * source/src of <tt>element</tt>\n */\nfunction defaultSetVideoSrc(element, stream) {\n    // srcObject\n    let srcObjectPropertyName = 'srcObject';\n\n    if (!(srcObjectPropertyName in element)) {\n        srcObjectPropertyName = 'mozSrcObject';\n        if (!(srcObjectPropertyName in element)) {\n            srcObjectPropertyName = null;\n        }\n    }\n    if (srcObjectPropertyName) {\n        element[srcObjectPropertyName] = stream;\n\n        return;\n    }\n\n    // src\n    let src;\n\n    if (stream) {\n        src = stream.jitsiObjectURL;\n\n        // Save the created URL for stream so we can reuse it and not keep\n        // creating URLs.\n        if (!src) {\n            stream.jitsiObjectURL\n                = src\n                    = (URL || webkitURL).createObjectURL(stream);\n        }\n    }\n    element.src = src || '';\n}\n\n/**\n *\n */\nclass RTCUtils extends Listenable {\n    /**\n     *\n     */\n    constructor() {\n        super(eventEmitter);\n    }\n\n    /**\n     * Depending on the browser, sets difference instance methods for\n     * interacting with user media and adds methods to native webrtc related\n     * objects. Also creates an instance variable for peer connection\n     * constraints.\n     *\n     * @param {Object} options\n     * @returns {void}\n     */\n    init(options = {}) {\n        if (typeof options.disableAEC === 'boolean') {\n            disableAEC = options.disableAEC;\n            logger.info(`Disable AEC: ${disableAEC}`);\n        }\n        if (typeof options.disableNS === 'boolean') {\n            disableNS = options.disableNS;\n            logger.info(`Disable NS: ${disableNS}`);\n        }\n        if (typeof options.disableAP === 'boolean') {\n            disableAP = options.disableAP;\n            logger.info(`Disable AP: ${disableAP}`);\n        }\n        if (typeof options.disableAGC === 'boolean') {\n            disableAGC = options.disableAGC;\n            logger.info(`Disable AGC: ${disableAGC}`);\n        }\n        if (typeof options.disableHPF === 'boolean') {\n            disableHPF = options.disableHPF;\n            logger.info(`Disable HPF: ${disableHPF}`);\n        }\n\n        // Initialize rawEnumerateDevicesWithCallback\n        initRawEnumerateDevicesWithCallback();\n\n        return new Promise((resolve, reject) => {\n            if (browser.usesNewGumFlow()) {\n                this.RTCPeerConnectionType = window.RTCPeerConnection;\n\n                this.getUserMedia\n                    = (constraints, successCallback, errorCallback) =>\n                        window.navigator.mediaDevices\n                            .getUserMedia(constraints)\n                            .then(stream => {\n                                successCallback && successCallback(stream);\n\n                                return stream;\n                            })\n                            .catch(err => {\n                                errorCallback && errorCallback(err);\n\n                                return Promise.reject(err);\n                            });\n\n                this.enumerateDevices = callback =>\n                    window.navigator.mediaDevices.enumerateDevices()\n                        .then(foundDevices => {\n                            callback(foundDevices);\n\n                            return foundDevices;\n                        })\n                        .catch(err => {\n                            logger.error(`Error enumerating devices: ${err}`);\n\n                            callback([]);\n\n                            return [];\n                        });\n\n                this.attachMediaStream\n                    = wrapAttachMediaStream((element, stream) => {\n                        if (element) {\n                            element.srcObject = stream;\n                        }\n\n                        return element;\n                    });\n\n                this.getStreamID = stream => stream.id;\n                this.getTrackID = track => track.id;\n            } else if (browser.isChrome() // this is chrome < 61\n                    || browser.isOpera()\n                    || browser.isNWJS()\n                    || browser.isElectron()\n                    || browser.isReactNative()) {\n\n                this.RTCPeerConnectionType = webkitRTCPeerConnection;\n                const getUserMedia\n                    = navigator.webkitGetUserMedia.bind(navigator);\n\n                this.getUserMedia = wrapGetUserMedia(getUserMedia);\n                this.enumerateDevices = rawEnumerateDevicesWithCallback;\n\n                this.attachMediaStream\n                    = wrapAttachMediaStream((element, stream) => {\n                        defaultSetVideoSrc(element, stream);\n\n                        return element;\n                    });\n                this.getStreamID = function(stream) {\n                    // A. MediaStreams from FF endpoints have the characters '{'\n                    // and '}' that make jQuery choke.\n                    // B. The react-native-webrtc implementation that we use on\n                    // React Native at the time of this writing returns a number\n                    // for the id of MediaStream. Let's just say that a number\n                    // contains no special characters.\n                    const id = stream.id;\n\n                    // XXX The return statement is affected by automatic\n                    // semicolon insertion (ASI). No line terminator is allowed\n                    // between the return keyword and the expression.\n                    return (\n                        typeof id === 'number'\n                            ? id\n                            : SDPUtil.filterSpecialChars(id));\n                };\n                this.getTrackID = function(track) {\n                    return track.id;\n                };\n\n                if (!webkitMediaStream.prototype.getVideoTracks) {\n                    webkitMediaStream.prototype.getVideoTracks = function() {\n                        return this.videoTracks;\n                    };\n                }\n                if (!webkitMediaStream.prototype.getAudioTracks) {\n                    webkitMediaStream.prototype.getAudioTracks = function() {\n                        return this.audioTracks;\n                    };\n                }\n            } else if (browser.isEdge()) {\n                this.RTCPeerConnectionType = ortcRTCPeerConnection;\n                this.getUserMedia\n                    = wrapGetUserMedia(\n                        navigator.mediaDevices.getUserMedia.bind(\n                            navigator.mediaDevices),\n                        true);\n                this.enumerateDevices = rawEnumerateDevicesWithCallback;\n                this.attachMediaStream\n                    = wrapAttachMediaStream((element, stream) => {\n                        defaultSetVideoSrc(element, stream);\n\n                        return element;\n                    });\n\n                // ORTC does not generate remote MediaStreams so those are\n                // manually created by the ORTC shim. This means that their\n                // id (internally generated) does not match the stream id\n                // signaled into the remote SDP. Therefore, the shim adds a\n                // custom jitsiRemoteId property with the original stream id.\n                this.getStreamID = function(stream) {\n                    const id = stream.jitsiRemoteId || stream.id;\n\n                    return SDPUtil.filterSpecialChars(id);\n                };\n\n                // Remote MediaStreamTracks generated by ORTC (within a\n                // RTCRtpReceiver) have an internally/random id which does not\n                // match the track id signaled in the remote SDP. The shim adds\n                // a custom jitsi-id property with the original track id.\n                this.getTrackID = function(track) {\n                    return track.jitsiRemoteId || track.id;\n                };\n            } else if (browser.isTemasysPluginUsed()) {\n                // Detect IE/Safari\n                const webRTCReadyCb = () => {\n                    this.RTCPeerConnectionType = RTCPeerConnection;\n                    this.getUserMedia = window.getUserMedia;\n                    this.enumerateDevices\n                        = enumerateDevicesThroughMediaStreamTrack;\n                    this.attachMediaStream\n                        = wrapAttachMediaStream((element, stream) => {\n                            if (stream) {\n                                if (stream.id === 'dummyAudio'\n                                        || stream.id === 'dummyVideo') {\n                                    return;\n                                }\n\n                                // The container must be visible in order to\n                                // play or attach the stream when Temasys plugin\n                                // is in use\n                                const containerSel = $(element);\n\n                                if (browser.isTemasysPluginUsed()\n                                        && !containerSel.is(':visible')) {\n                                    containerSel.show();\n                                }\n                                const video\n                                    = stream.getVideoTracks().length > 0;\n\n                                if (video && !$(element).is(':visible')) {\n                                    throw new Error(\n                                        'video element must be visible to'\n                                            + ' attach video stream');\n                                }\n                            }\n\n                            return attachMediaStream(element, stream);\n                        });\n                    this.getStreamID\n                        = stream => SDPUtil.filterSpecialChars(stream.label);\n                    this.getTrackID\n                        = track => track.id;\n\n                    onReady(\n                        options,\n                        this.getUserMediaWithConstraints.bind(this));\n                };\n                const webRTCReadyPromise\n                    = new Promise(r => AdapterJS.webRTCReady(r));\n\n                // Resolve or reject depending on whether the Temasys plugin is\n                // installed.\n                AdapterJS.WebRTCPlugin.isPluginInstalled(\n                    AdapterJS.WebRTCPlugin.pluginInfo.prefix,\n                    AdapterJS.WebRTCPlugin.pluginInfo.plugName,\n                    AdapterJS.WebRTCPlugin.pluginInfo.type,\n                    /* installed */ () => {\n                        webRTCReadyPromise.then(() => {\n                            webRTCReadyCb();\n                            resolve();\n                        });\n                    },\n                    /* not installed */ () => {\n                        const error\n                            = new Error('Temasys plugin is not installed');\n\n                        error.name = 'WEBRTC_NOT_READY';\n                        error.webRTCReadyPromise = webRTCReadyPromise;\n\n                        reject(error);\n                    });\n            } else {\n                rejectWithWebRTCNotSupported(\n                    'Browser does not appear to be WebRTC-capable',\n                    reject);\n\n                return;\n            }\n\n            this._initPCConstraints(options);\n\n            // Call onReady() if Temasys plugin is not used\n            if (!browser.isTemasysPluginUsed()) {\n                onReady(options, this.getUserMediaWithConstraints.bind(this));\n                resolve();\n            }\n        });\n    }\n\n    /**\n     * Creates instance objects for peer connection constraints both for p2p\n     * and outside of p2p.\n     *\n     * @params {Object} options - Configuration for setting RTCUtil's instance\n     * objects for peer connection constraints.\n     * @params {boolean} options.useIPv6 - Set to true if IPv6 should be used.\n     * @params {boolean} options.disableSuspendVideo - Whether or not video\n     * should become suspended if bandwidth estimation becomes low.\n     * @params {Object} options.testing - Additional configuration for work in\n     * development.\n     * @params {Object} options.testing.forceP2PSuspendVideoRatio - True if\n     * video should become suspended if bandwidth estimation becomes low while\n     * in peer to peer connection mode.\n     */\n    _initPCConstraints(options) {\n        if (browser.isFirefox()) {\n            this.pcConstraints = {};\n        } else if (browser.isChrome()\n            || browser.isOpera()\n            || browser.isNWJS()\n            || browser.isElectron()\n            || browser.isReactNative()) {\n            this.pcConstraints = { optional: [\n                { googHighStartBitrate: 0 },\n                { googPayloadPadding: true },\n                { googScreencastMinBitrate: 400 },\n                { googCpuOveruseDetection: true },\n                { googCpuOveruseEncodeUsage: true },\n                { googCpuUnderuseThreshold: 55 },\n                { googCpuOveruseThreshold: 85 }\n            ] };\n\n            if (options.useIPv6) {\n                // https://code.google.com/p/webrtc/issues/detail?id=2828\n                this.pcConstraints.optional.push({ googIPv6: true });\n            }\n\n            this.p2pPcConstraints\n                = JSON.parse(JSON.stringify(this.pcConstraints));\n\n            // Allows sending of video to be suspended if the bandwidth\n            // estimation is too low.\n            if (!options.disableSuspendVideo) {\n                this.pcConstraints.optional.push(\n                    { googSuspendBelowMinBitrate: true });\n            }\n\n            // There's no reason not to use this for p2p\n            this.p2pPcConstraints.optional.push({\n                googSuspendBelowMinBitrate: true\n            });\n        }\n\n        this.p2pPcConstraints = this.p2pPcConstraints || this.pcConstraints;\n    }\n\n    /* eslint-disable max-params */\n\n    /**\n    * @param {string[]} um required user media types\n    * @param {function} successCallback\n    * @param {Function} failureCallback\n    * @param {Object} [options] optional parameters\n    * @param {string} options.resolution\n    * @param {number} options.bandwidth\n    * @param {number} options.fps\n    * @param {string} options.desktopStream\n    * @param {string} options.cameraDeviceId\n    * @param {string} options.micDeviceId\n    * @param {Object} options.frameRate - used only for dekstop sharing.\n    * @param {Object} options.frameRate.min - Minimum fps\n    * @param {Object} options.frameRate.max - Maximum fps\n    * @returns {Promise} Returns a media stream on success or a JitsiTrackError\n    * on failure.\n    **/\n    getUserMediaWithConstraints(\n            um,\n            successCallback,\n            failureCallback,\n            options = {}) {\n        const constraints = getConstraints(um, options);\n\n        logger.info('Get media constraints', constraints);\n\n        return new Promise((resolve, reject) => {\n            try {\n                this.getUserMedia(\n                    constraints,\n                    stream => {\n                        logger.log('onUserMediaSuccess');\n                        setAvailableDevices(um, stream);\n\n                        if (successCallback) {\n                            successCallback(stream);\n                        }\n\n                        resolve(stream);\n                    },\n                    error => {\n                        setAvailableDevices(um, undefined);\n                        logger.warn(\n                            'Failed to get access to local media. Error ',\n                            error, constraints);\n                        const jitsiTrackError\n                            = new JitsiTrackError(error, constraints, um);\n\n                        if (failureCallback) {\n                            failureCallback(jitsiTrackError);\n                        }\n\n                        reject(jitsiTrackError);\n                    });\n            } catch (e) {\n                logger.error('GUM failed: ', e);\n                const jitsiTrackError\n                    = new JitsiTrackError(e, constraints, um);\n\n                if (failureCallback) {\n                    failureCallback(jitsiTrackError);\n                }\n\n                reject(jitsiTrackError);\n            }\n        });\n    }\n\n    /**\n     * Acquires a media stream via getUserMedia that\n     * matches the given constraints\n     *\n     * @param {array} umDevices which devices to acquire (e.g. audio, video)\n     * @param {Object} constraints - Stream specifications to use.\n     * @returns {Promise}\n     */\n    _newGetUserMediaWithConstraints(umDevices, constraints = {}) {\n        return new Promise((resolve, reject) => {\n            try {\n                this.getUserMedia(constraints)\n                    .then(stream => {\n                        logger.log('onUserMediaSuccess');\n\n                        // TODO(brian): Is this call needed? Why is this\n                        // happening at gUM time? Isn't there an event listener\n                        // for this?\n                        setAvailableDevices(umDevices, stream);\n\n                        resolve(stream);\n                    })\n                    .catch(error => {\n                        logger.warn('Failed to get access to local media. '\n                            + ` ${error} ${constraints} `);\n\n                        // TODO(brian): Is this call needed? Why is this\n                        // happening at gUM time? Isn't there an event listener\n                        // for this?\n                        setAvailableDevices(umDevices, undefined);\n                        reject(new JitsiTrackError(\n                            error, constraints, umDevices));\n                    });\n            } catch (error) {\n                logger.error(`GUM failed: ${error}`);\n                reject(new JitsiTrackError(error, constraints, umDevices));\n            }\n        });\n    }\n\n    /**\n     * Acquire a display stream via the screenObtainer. This requires extra\n     * logic compared to use screenObtainer versus normal device capture logic\n     * in RTCUtils#_newGetUserMediaWithConstraints.\n     *\n     * @param {Object} options\n     * @param {Object} options.desktopSharingExtensionExternalInstallation\n     * @param {string[]} options.desktopSharingSources\n     * @param {Object} options.gumOptions.frameRate\n     * @param {Object} options.gumOptions.frameRate.min - Minimum fps\n     * @param {Object} options.gumOptions.frameRate.max - Maximum fps\n     * @returns {Promise} A promise which will be resolved with an object whic\n     * contains the acquired display stream. If desktop sharing is not supported\n     * then a rejected promise will be returned.\n     */\n    _newGetDesktopMedia(options) {\n        if (!screenObtainer.isSupported() || !browser.supportsVideo()) {\n            return Promise.reject(\n                new Error('Desktop sharing is not supported!'));\n        }\n\n        const {\n            desktopSharingExtensionExternalInstallation,\n            desktopSharingSources,\n            gumOptions\n        } = options;\n\n        return new Promise((resolve, reject) => {\n            screenObtainer.obtainStream(\n                {\n                    ...desktopSharingExtensionExternalInstallation,\n                    desktopSharingSources,\n                    gumOptions\n                },\n                stream => {\n                    resolve(stream);\n                },\n                error => {\n                    reject(error);\n                });\n        });\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Creates the local MediaStreams.\n     * @param {Object} [options] optional parameters\n     * @param {Array} options.devices the devices that will be requested\n     * @param {string} options.resolution resolution constraints\n     * @param {bool} options.dontCreateJitsiTrack if <tt>true</tt> objects with\n     * the following structure {stream: the Media Stream, type: \"audio\" or\n     * \"video\", videoType: \"camera\" or \"desktop\"} will be returned trough the\n     * Promise, otherwise JitsiTrack objects will be returned.\n     * @param {string} options.cameraDeviceId\n     * @param {string} options.micDeviceId\n     * @param {Object} options.desktopSharingFrameRate\n     * @param {Object} options.desktopSharingFrameRate.min - Minimum fps\n     * @param {Object} options.desktopSharingFrameRate.max - Maximum fps\n     * @returns {*} Promise object that will receive the new JitsiTracks\n     */\n    obtainAudioAndVideoPermissions(options = {}) {\n        options.devices = options.devices || [ ...OLD_GUM_DEFAULT_DEVICES ];\n        options.resolution = options.resolution || OLD_GUM_DEFAULT_RESOLUTION;\n\n        const requestingDesktop = options.devices.includes('desktop');\n\n        if (requestingDesktop && !screenObtainer.isSupported()) {\n            return Promise.reject(\n                new Error('Desktop sharing is not supported!'));\n        }\n\n        let gumPromise;\n\n        if (browser.supportsMediaStreamConstructor()) {\n            gumPromise = this._getAudioAndVideoStreams(options);\n        } else {\n            // If the MediaStream constructor is not supported, then get tracks\n            // in separate GUM calls in order to keep different tracks separate.\n            gumPromise = this._getAudioAndVideoStreamsSeparately(options);\n        }\n\n        return gumPromise.then(streams =>\n            handleLocalStream(streams, options.resolution));\n    }\n\n    /**\n     * Performs one call to getUserMedia for audio and/or video and another call\n     * for desktop.\n     *\n     * @param {Object} options - An object describing how the gUM request should\n     * be executed. See {@link obtainAudioAndVideoPermissions} for full options.\n     * @returns {*} Promise object that will receive the new JitsiTracks on\n     * success or a JitsiTrackError on failure.\n     */\n    _getAudioAndVideoStreams(options) {\n        const requestingDesktop = options.devices.includes('desktop');\n\n        options.devices = options.devices.filter(device =>\n            device !== 'desktop');\n\n        const gumPromise = options.devices.length\n            ? this.getUserMediaWithConstraints(\n                options.devices, null, null, options)\n            : Promise.resolve(null);\n\n        return gumPromise\n            .then(avStream => {\n                // If any requested devices are missing, call gum again in\n                // an attempt to obtain the actual error. For example, the\n                // requested video device is missing or permission was\n                // denied.\n                const missingTracks\n                    = this._getMissingTracks(options.devices, avStream);\n\n                if (missingTracks.length) {\n                    this.stopMediaStream(avStream);\n\n                    return this.getUserMediaWithConstraints(\n                        missingTracks, options)\n\n                        // GUM has already failed earlier and this success\n                        // handling should not be reached.\n                        .then(() => Promise.reject(new JitsiTrackError(\n                            { name: 'UnknownError' },\n                            getConstraints(options.devices, options),\n                            missingTracks)));\n                }\n\n                return avStream;\n            })\n            .then(audioVideo => {\n                if (!requestingDesktop) {\n                    return { audioVideo };\n                }\n\n                return new Promise((resolve, reject) => {\n                    screenObtainer.obtainStream(\n                        this._parseDesktopSharingOptions(options),\n                        desktop => resolve({\n                            audioVideo,\n                            desktop\n                        }),\n                        error => {\n                            if (audioVideo) {\n                                this.stopMediaStream(audioVideo);\n                            }\n                            reject(error);\n                        });\n                });\n            });\n    }\n\n    /**\n     * Private utility for determining if the passed in MediaStream contains\n     * tracks of the type(s) specified in the requested devices.\n     *\n     * @param {string[]} requestedDevices - The track types that are expected to\n     * be includes in the stream.\n     * @param {MediaStream} stream - The MediaStream to check if it has the\n     * expected track types.\n     * @returns {string[]} An array of string with the missing track types. The\n     * array will be empty if all requestedDevices are found in the stream.\n     */\n    _getMissingTracks(requestedDevices = [], stream) {\n        const missingDevices = [];\n\n        const audioDeviceRequested = requestedDevices.includes('audio');\n        const audioTracksReceived\n            = stream && stream.getAudioTracks().length > 0;\n\n        if (audioDeviceRequested && !audioTracksReceived) {\n            missingDevices.push('audio');\n        }\n\n        const videoDeviceRequested = requestedDevices.includes('video');\n        const videoTracksReceived\n            = stream && stream.getVideoTracks().length > 0;\n\n        if (videoDeviceRequested && !videoTracksReceived) {\n            missingDevices.push('video');\n        }\n\n        return missingDevices;\n    }\n\n    /**\n     * Performs separate getUserMedia calls for audio and video instead of in\n     * one call. Will also request desktop if specified.\n     *\n     * @param {Object} options - An object describing how the gUM request should\n     * be executed. See {@link obtainAudioAndVideoPermissions} for full options.\n     * @returns {*} Promise object that will receive the new JitsiTracks on\n     * success or a JitsiTrackError on failure.\n     */\n    _getAudioAndVideoStreamsSeparately(options) {\n        return new Promise((resolve, reject) => {\n            const deviceGUM = {\n                audio: (...args) =>\n                    this.getUserMediaWithConstraints([ 'audio' ], ...args),\n                video: (...args) =>\n                    this.getUserMediaWithConstraints([ 'video' ], ...args),\n                desktop: (...args) =>\n                    screenObtainer.obtainStream(\n                        this._parseDesktopSharingOptions(options), ...args)\n            };\n\n            obtainDevices({\n                devices: options.devices,\n                streams: [],\n                successCallback: resolve,\n                errorCallback: reject,\n                deviceGUM\n            });\n        });\n    }\n\n    /**\n     * Returns an object formatted for specifying desktop sharing parameters.\n     *\n     * @param {Object} options - Takes in the same options object as\n     * {@link obtainAudioAndVideoPermissions}.\n     * @returns {Object}\n     */\n    _parseDesktopSharingOptions(options) {\n        return {\n            ...options.desktopSharingExtensionExternalInstallation,\n            desktopSharingSources: options.desktopSharingSources,\n            gumOptions: {\n                frameRate: options.desktopSharingFrameRate\n            }\n        };\n    }\n\n    /**\n     * Gets streams from specified device types. This function intentionally\n     * ignores errors for upstream to catch and handle instead.\n     *\n     * @param {Object} options - A hash describing what devices to get and\n     * relevant constraints.\n     * @param {string[]} options.devices - The types of media to capture. Valid\n     * values are \"desktop\", \"audio\", and \"video\".\n     * @param {Object} options.desktopSharingFrameRate\n     * @param {Object} options.desktopSharingFrameRate.min - Minimum fps\n     * @param {Object} options.desktopSharingFrameRate.max - Maximum fps\n     * @returns {Promise} The promise, when successful, will return an array of\n     * meta data for the requested device type, which includes the stream and\n     * track. If an error occurs, it will be deferred to the caller for\n     * handling.\n     */\n    newObtainAudioAndVideoPermissions(options) {\n        logger.info('Using the new gUM flow');\n\n        const mediaStreamsMetaData = [];\n\n        // Declare private functions to be used in the promise chain below.\n        // These functions are declared in the scope of this function because\n        // they are not being used anywhere else, so only this function needs to\n        // know about them.\n\n        /**\n         * Executes a request for desktop media if specified in options.\n         *\n         * @returns {Promise}\n         */\n        const maybeRequestDesktopDevice = function() {\n            const umDevices = options.devices || [];\n            const isDesktopDeviceRequsted = umDevices.indexOf('desktop') !== -1;\n\n            const {\n                desktopSharingExtensionExternalInstallation,\n                desktopSharingSources,\n                desktopSharingFrameRate\n            } = options;\n\n            return isDesktopDeviceRequsted\n                ? this._newGetDesktopMedia(\n                    {\n                        desktopSharingExtensionExternalInstallation,\n                        desktopSharingSources,\n                        gumOptions: {\n                            frameRate: desktopSharingFrameRate\n                        }\n                    })\n                : Promise.resolve();\n        }.bind(this);\n\n        /**\n         * Creates a meta data object about the passed in desktopStream and\n         * pushes the meta data to the internal array mediaStreamsMetaData to be\n         * returned later.\n         *\n         * @param {MediaStreamTrack} desktopStream - A track for a desktop\n         * capture.\n         * @returns {void}\n         */\n        const maybeCreateAndAddDesktopTrack = function(desktopStream) {\n            if (!desktopStream) {\n                return;\n            }\n\n            const { stream, sourceId, sourceType } = desktopStream;\n\n            mediaStreamsMetaData.push({\n                stream,\n                sourceId,\n                sourceType,\n                track: stream.getVideoTracks()[0],\n                videoType: VideoType.DESKTOP\n            });\n        };\n\n        /**\n         * Executes a request for audio and/or video, as specified in options.\n         * By default both audio and video will be captured if options.devices\n         * is not defined.\n         *\n         * @returns {Promise}\n         */\n        const maybeRequestCaptureDevices = function() {\n            const umDevices = options.devices || [ 'audio', 'video' ];\n            const requestedCaptureDevices = umDevices.filter(device =>\n                device === 'audio'\n                || (device === 'video' && browser.supportsVideo()));\n\n            if (!requestedCaptureDevices.length) {\n                return Promise.resolve();\n            }\n\n            const constraints = newGetConstraints(\n                requestedCaptureDevices, options);\n\n            logger.info('Got media constraints: ', constraints);\n\n            return this._newGetUserMediaWithConstraints(\n                requestedCaptureDevices, constraints);\n        }.bind(this);\n\n        /**\n         * Splits the passed in media stream into separate audio and video\n         * streams and creates meta data objects for each and pushes them to the\n         * internal array mediaStreamsMetaData to be returned later.\n         *\n         * @param {MediaStreamTrack} avStream - A track for with audio and/or\n         * video track.\n         * @returns {void}\n         */\n        const maybeCreateAndAddAVTracks = function(avStream) {\n            if (!avStream) {\n                return;\n            }\n\n            const audioTracks = avStream.getAudioTracks();\n\n            if (audioTracks.length) {\n                const audioStream = new MediaStream(audioTracks);\n\n                mediaStreamsMetaData.push({\n                    stream: audioStream,\n                    track: audioStream.getAudioTracks()[0]\n                });\n            }\n\n            const videoTracks = avStream.getVideoTracks();\n\n            if (videoTracks.length) {\n                const videoStream = new MediaStream(videoTracks);\n\n                mediaStreamsMetaData.push({\n                    stream: videoStream,\n                    track: videoStream.getVideoTracks()[0],\n                    videoType: VideoType.CAMERA\n                });\n            }\n        };\n\n        return maybeRequestDesktopDevice()\n            .then(maybeCreateAndAddDesktopTrack)\n            .then(maybeRequestCaptureDevices)\n            .then(maybeCreateAndAddAVTracks)\n            .then(() => mediaStreamsMetaData);\n    }\n\n    /**\n     *\n     */\n    getDeviceAvailability() {\n        return devices;\n    }\n\n    /**\n     *\n     */\n    isRTCReady() {\n        return rtcReady;\n    }\n\n    /**\n     *\n     */\n    _isDeviceListAvailable() {\n        if (!rtcReady) {\n            throw new Error('WebRTC not ready yet');\n        }\n\n        return Boolean(\n            (navigator.mediaDevices\n                && navigator.mediaDevices.enumerateDevices)\n            || (typeof MediaStreamTrack !== 'undefined'\n                && MediaStreamTrack.getSources));\n    }\n\n    /**\n     * Returns a promise which can be used to make sure that the WebRTC stack\n     * has been initialized.\n     *\n     * @returns {Promise} which is resolved only if the WebRTC stack is ready.\n     * Note that currently we do not detect stack initialization failure and\n     * the promise is never rejected(unless unexpected error occurs).\n     */\n    onRTCReady() {\n        if (rtcReady) {\n            return Promise.resolve();\n        }\n\n        return new Promise(resolve => {\n            const listener = () => {\n                eventEmitter.removeListener(RTCEvents.RTC_READY, listener);\n                resolve();\n            };\n\n            eventEmitter.addListener(RTCEvents.RTC_READY, listener);\n\n            // We have no failed event, so... it either resolves or nothing\n            // happens.\n        });\n\n    }\n\n    /**\n     * Checks if its possible to enumerate available cameras/microphones.\n     *\n     * @returns {Promise<boolean>} a Promise which will be resolved only once\n     * the WebRTC stack is ready, either with true if the device listing is\n     * available available or with false otherwise.\n     */\n    isDeviceListAvailable() {\n        return this.onRTCReady().then(this._isDeviceListAvailable.bind(this));\n    }\n\n    /**\n     * Returns true if changing the input (camera / microphone) or output\n     * (audio) device is supported and false if not.\n     * @params {string} [deviceType] - type of device to change. Default is\n     *      undefined or 'input', 'output' - for audio output device change.\n     * @returns {boolean} true if available, false otherwise.\n     */\n    isDeviceChangeAvailable(deviceType) {\n        return deviceType === 'output' || deviceType === 'audiooutput'\n            ? isAudioOutputDeviceChangeAvailable\n            : browser.isChrome()\n                || browser.isFirefox()\n                || browser.isOpera()\n                || browser.isTemasysPluginUsed()\n                || browser.isNWJS()\n                || browser.isElectron()\n                || browser.isEdge();\n    }\n\n    /**\n     * A method to handle stopping of the stream.\n     * One point to handle the differences in various implementations.\n     * @param mediaStream MediaStream object to stop.\n     */\n    stopMediaStream(mediaStream) {\n        mediaStream.getTracks().forEach(track => {\n            // stop() not supported with IE\n            if (!browser.isTemasysPluginUsed() && track.stop) {\n                track.stop();\n            }\n        });\n\n        // leave stop for implementation still using it\n        if (mediaStream.stop) {\n            mediaStream.stop();\n        }\n\n        // The MediaStream implementation of the react-native-webrtc project has\n        // an explicit release method that is to be invoked in order to release\n        // used resources such as memory.\n        if (mediaStream.release) {\n            mediaStream.release();\n        }\n\n        // if we have done createObjectURL, lets clean it\n        const url = mediaStream.jitsiObjectURL;\n\n        if (url) {\n            delete mediaStream.jitsiObjectURL;\n            (URL || webkitURL).revokeObjectURL(url);\n        }\n    }\n\n    /**\n     * Returns whether the desktop sharing is enabled or not.\n     * @returns {boolean}\n     */\n    isDesktopSharingEnabled() {\n        return screenObtainer.isSupported();\n    }\n\n    /**\n     * Sets current audio output device.\n     * @param {string} deviceId - id of 'audiooutput' device from\n     *      navigator.mediaDevices.enumerateDevices(), 'default' for default\n     *      device\n     * @returns {Promise} - resolves when audio output is changed, is rejected\n     *      otherwise\n     */\n    setAudioOutputDevice(deviceId) {\n        if (!this.isDeviceChangeAvailable('output')) {\n            Promise.reject(\n                new Error('Audio output device change is not supported'));\n        }\n\n        return featureDetectionAudioEl.setSinkId(deviceId)\n            .then(() => {\n                audioOutputDeviceId = deviceId;\n                audioOutputChanged = true;\n\n                logger.log(`Audio output device set to ${deviceId}`);\n\n                eventEmitter.emit(RTCEvents.AUDIO_OUTPUT_DEVICE_CHANGED,\n                    deviceId);\n            });\n    }\n\n    /**\n     * Returns currently used audio output device id, '' stands for default\n     * device\n     * @returns {string}\n     */\n    getAudioOutputDevice() {\n        return audioOutputDeviceId;\n    }\n\n    /**\n     * Returns list of available media devices if its obtained, otherwise an\n     * empty array is returned/\n     * @returns {Array} list of available media devices.\n     */\n    getCurrentlyAvailableMediaDevices() {\n        return currentlyAvailableMediaDevices;\n    }\n\n    /**\n     * Returns event data for device to be reported to stats.\n     * @returns {MediaDeviceInfo} device.\n     */\n    getEventDataForActiveDevice(device) {\n        const deviceList = [];\n        const deviceData = {\n            'deviceId': device.deviceId,\n            'kind': device.kind,\n            'label': device.label,\n            'groupId': device.groupId\n        };\n\n        deviceList.push(deviceData);\n\n        return { deviceList };\n    }\n\n    /**\n     * Configures the given PeerConnection constraints to either enable or\n     * disable (according to the value of the 'enable' parameter) the\n     * 'googSuspendBelowMinBitrate' option.\n     * @param constraints the constraints on which to operate.\n     * @param enable {boolean} whether to enable or disable the suspend video\n     * option.\n     */\n    setSuspendVideo(constraints, enable) {\n        if (!constraints.optional) {\n            constraints.optional = [];\n        }\n\n        // Get rid of all \"googSuspendBelowMinBitrate\" constraints (we assume\n        // that the elements of constraints.optional contain a single property).\n        constraints.optional\n            = constraints.optional.filter(\n                c => !c.hasOwnProperty('googSuspendBelowMinBitrate'));\n\n        if (enable) {\n            constraints.optional.push({ googSuspendBelowMinBitrate: 'true' });\n        }\n    }\n}\n\n/**\n * Rejects a Promise because WebRTC is not supported.\n *\n * @param {string} errorMessage - The human-readable message of the Error which\n * is the reason for the rejection.\n * @param {Function} reject - The reject function of the Promise.\n * @returns {void}\n */\nfunction rejectWithWebRTCNotSupported(errorMessage, reject) {\n    const error = new Error(errorMessage);\n\n    // WebRTC is not supported either natively or via a known plugin such as\n    // Temasys.\n    // XXX The Error class already has a property name which is commonly used to\n    // detail the represented error in a non-human-readable way (in contrast to\n    // the human-readable property message). I explicitly did not want to\n    // introduce a new specific property.\n    // FIXME None of the existing JitsiXXXErrors seemed to be appropriate\n    // recipients of the constant WEBRTC_NOT_SUPPORTED so I explicitly chose to\n    // leave it as a magic string at the time of this writing.\n    error.name = 'WEBRTC_NOT_SUPPORTED';\n\n    logger.error(errorMessage);\n    reject(error);\n}\n\nconst rtcUtils = new RTCUtils();\n\n/**\n *\n * @param options\n */\nfunction obtainDevices(options) {\n    if (!options.devices || options.devices.length === 0) {\n        return options.successCallback(options.streams || {});\n    }\n\n    const device = options.devices.splice(0, 1);\n\n    options.deviceGUM[device](\n        stream => {\n            options.streams = options.streams || {};\n            options.streams[device] = stream;\n            obtainDevices(options);\n        },\n        error => {\n            Object.keys(options.streams).forEach(\n                d => rtcUtils.stopMediaStream(options.streams[d]));\n            logger.error(\n                `failed to obtain ${device} stream - stop`, error);\n\n            options.errorCallback(error);\n        });\n}\n\n/**\n * In case of IE we continue from 'onReady' callback passed to RTCUtils\n * constructor. It will be invoked by Temasys plugin once it is initialized.\n *\n * @param options\n * @param GUM\n */\nfunction onReady(options, GUM) {\n    rtcReady = true;\n    eventEmitter.emit(RTCEvents.RTC_READY, true);\n    screenObtainer.init(options, GUM);\n\n    if (rtcUtils.isDeviceListAvailable() && rawEnumerateDevicesWithCallback) {\n        rawEnumerateDevicesWithCallback(ds => {\n            currentlyAvailableMediaDevices = ds.splice(0);\n\n            logger.info('Available devices: ', currentlyAvailableMediaDevices);\n            sendDeviceListToAnalytics(currentlyAvailableMediaDevices);\n\n            eventEmitter.emit(RTCEvents.DEVICE_LIST_AVAILABLE,\n                currentlyAvailableMediaDevices);\n\n            if (isDeviceChangeEventSupported) {\n                navigator.mediaDevices.addEventListener(\n                    'devicechange',\n                    () => rtcUtils.enumerateDevices(onMediaDevicesListChanged));\n            } else {\n                pollForAvailableMediaDevices();\n            }\n        });\n    }\n}\n\n/**\n * Wraps original attachMediaStream function to set current audio output device\n * if this is supported.\n * @param {Function} origAttachMediaStream\n * @returns {Function}\n */\nfunction wrapAttachMediaStream(origAttachMediaStream) {\n    return function(element, stream) {\n        // eslint-disable-next-line prefer-rest-params\n        const res = origAttachMediaStream.apply(rtcUtils, arguments);\n\n        if (stream\n                && rtcUtils.isDeviceChangeAvailable('output')\n                && stream.getAudioTracks\n                && stream.getAudioTracks().length\n\n                // we skip setting audio output if there was no explicit change\n                && audioOutputChanged) {\n            element.setSinkId(rtcUtils.getAudioOutputDevice())\n                .catch(function(ex) {\n                    const err\n                        = new JitsiTrackError(ex, null, [ 'audiooutput' ]);\n\n                    GlobalOnErrorHandler.callUnhandledRejectionHandler({\n                        promise: this, // eslint-disable-line no-invalid-this\n                        reason: err\n                    });\n\n                    logger.warn(\n                        'Failed to set audio output device for the element.'\n                            + ' Default audio output device will be used'\n                            + ' instead',\n                        element,\n                        err);\n                });\n        }\n\n        return res;\n    };\n}\n\nexport default rtcUtils;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/RTCUtils.js","import * as transform from 'sdp-transform';\n\n/**\n * Parses the primary SSRC of given SSRC group.\n * @param {object} group the SSRC group object as defined by the 'sdp-transform'\n * @return {Number} the primary SSRC number\n */\nexport function parsePrimarySSRC(group) {\n    return parseInt(group.ssrcs.split(' ')[0], 10);\n}\n\n/**\n * Parses the secondary SSRC of given SSRC group.\n * @param {object} group the SSRC group object as defined by the 'sdp-transform'\n * @return {Number} the secondary SSRC number\n */\nexport function parseSecondarySSRC(group) {\n    return parseInt(group.ssrcs.split(' ')[1], 10);\n}\n\n/**\n * Tells how many distinct SSRCs are contained in given media line.\n * @param {Object} mLine the media line object as defined by 'sdp-transform' lib\n * @return {number}\n */\nfunction _getSSRCCount(mLine) {\n    if (!mLine.ssrcs) {\n        return 0;\n    }\n\n    return mLine.ssrcs\n        .map(ssrcInfo => ssrcInfo.id)\n        .filter((ssrc, index, array) => array.indexOf(ssrc) === index)\n        .length;\n}\n\n/**\n * A wrapper around 'sdp-transform' media description object which provides\n * utility methods for common SDP/SSRC related operations.\n */\nclass MLineWrap {\n\n    /**\n     * Creates new <tt>MLineWrap</t>>\n     * @param {Object} mLine the media line object as defined by 'sdp-transform'\n     * lib.\n     */\n    constructor(mLine) {\n        if (!mLine) {\n            throw new Error('mLine is undefined');\n        }\n\n        this.mLine = mLine;\n    }\n\n    /**\n     * Getter for the mLine's \"ssrcs\" array. If the array was undefined an empty\n     * one will be preassigned.\n     *\n     * @return {Array<Object>} an array of 'sdp-transform' SSRC attributes\n     * objects.\n     */\n    get ssrcs() {\n        if (!this.mLine.ssrcs) {\n            this.mLine.ssrcs = [];\n        }\n\n        return this.mLine.ssrcs;\n    }\n\n    /**\n     * Setter for the mLine's \"ssrcs\" array.\n     *\n     * @param {Array<Object>} ssrcs an array of 'sdp-transform' SSRC attributes\n     * objects.\n     */\n    set ssrcs(ssrcs) {\n        this.mLine.ssrcs = ssrcs;\n    }\n\n    /**\n     * Returns the direction of the underlying media description.\n     * @return {string} the media direction name as defined in the SDP.\n     */\n    get direction() {\n        return this.mLine.direction;\n    }\n\n    /**\n     * Modifies the direction of the underlying media description.\n     * @param {string} direction the new direction to be set\n     */\n    set direction(direction) {\n        this.mLine.direction = direction;\n    }\n\n    /**\n     * Exposes the SSRC group array of the underlying media description object.\n     * @return {Array.<Object>}\n     */\n    get ssrcGroups() {\n        if (!this.mLine.ssrcGroups) {\n            this.mLine.ssrcGroups = [];\n        }\n\n        return this.mLine.ssrcGroups;\n    }\n\n    /**\n     * Modifies the SSRC groups array of the underlying media description\n     * object.\n     * @param {Array.<Object>} ssrcGroups\n     */\n    set ssrcGroups(ssrcGroups) {\n        this.mLine.ssrcGroups = ssrcGroups;\n    }\n\n    /**\n     * Obtains value from SSRC attribute.\n     * @param {number} ssrcNumber the SSRC number for which attribute is to be\n     * found\n     * @param {string} attrName the name of the SSRC attribute to be found.\n     * @return {string|undefined} the value of SSRC attribute or\n     * <tt>undefined</tt> if no such attribute exists.\n     */\n    getSSRCAttrValue(ssrcNumber, attrName) {\n        const attribute = this.ssrcs.find(\n            ssrcObj => ssrcObj.id === ssrcNumber\n            && ssrcObj.attribute === attrName);\n\n\n        return attribute && attribute.value;\n    }\n\n    /**\n     * Removes all attributes for given SSRC number.\n     * @param {number} ssrcNum the SSRC number for which all attributes will be\n     * removed.\n     */\n    removeSSRC(ssrcNum) {\n        if (!this.mLine.ssrcs || !this.mLine.ssrcs.length) {\n            return;\n        }\n\n        this.mLine.ssrcs\n            = this.mLine.ssrcs.filter(ssrcObj => ssrcObj.id !== ssrcNum);\n    }\n\n    /**\n     * Adds SSRC attribute\n     * @param {object} ssrcObj the SSRC attribute object as defined in\n     * the 'sdp-transform' lib.\n     */\n    addSSRCAttribute(ssrcObj) {\n        this.ssrcs.push(ssrcObj);\n    }\n\n    /**\n     * Finds a SSRC group matching both semantics and SSRCs in order.\n     * @param {string} semantics the name of the semantics\n     * @param {string} [ssrcs] group SSRCs as a string (like it's defined in\n     * SSRC group object of the 'sdp-transform' lib) e.g. \"1232546 342344 25434\"\n     * @return {object|undefined} the SSRC group object or <tt>undefined</tt> if\n     * not found.\n     */\n    findGroup(semantics, ssrcs) {\n        return this.ssrcGroups.find(\n            group =>\n                group.semantics === semantics\n                    && (!ssrcs || ssrcs === group.ssrcs));\n    }\n\n    /**\n     * Finds all groups matching given semantic's name.\n     * @param {string} semantics the name of the semantics\n     * @return {Array.<object>} an array of SSRC group objects as defined by\n     * the 'sdp-transform' lib.\n     */\n    findGroups(semantics) {\n        return this.ssrcGroups.filter(\n            group => group.semantics === semantics);\n    }\n\n    /**\n     * Finds all groups matching given semantic's name and group's primary SSRC.\n     * @param {string} semantics the name of the semantics\n     * @param {number} primarySSRC the primary SSRC number to be matched\n     * @return {Object} SSRC group object as defined by the 'sdp-transform' lib.\n     */\n    findGroupByPrimarySSRC(semantics, primarySSRC) {\n        return this.ssrcGroups.find(\n            group => group.semantics === semantics\n                && parsePrimarySSRC(group) === primarySSRC);\n    }\n\n    /**\n     * @param {string|null} msid the media stream id or <tt>null</tt> to match\n     * the first SSRC object with any 'msid' value.\n     * @return {Object|undefined} the SSRC object as defined by 'sdp-transform'\n     * lib.\n     */\n    findSSRCByMSID(msid) {\n        return this.ssrcs.find(\n            ssrcObj => ssrcObj.attribute === 'msid'\n                && (msid === null || ssrcObj.value === msid));\n    }\n\n    /**\n     * Gets the SSRC count for the underlying media description.\n     * @return {number}\n     */\n    getSSRCCount() {\n        return _getSSRCCount(this.mLine);\n    }\n\n    /**\n     * Checks whether the underlying media description contains any SSRC groups.\n     * @return {boolean} <tt>true</tt> if there are any SSRC groups or\n     * <tt>false</tt> otherwise.\n     */\n    containsAnySSRCGroups() {\n        return this.mLine.ssrcGroups !== undefined;\n    }\n\n    /**\n     * Finds the primary video SSRC.\n     * @returns {number|undefined} the primary video ssrc\n     * @throws Error if the underlying media description is not a video\n     */\n    getPrimaryVideoSsrc() {\n        const mediaType = this.mLine.type;\n\n        if (mediaType !== 'video') {\n            throw new Error(\n                `getPrimarySsrc doesn't work with '${mediaType}'`);\n        }\n\n        const numSsrcs = _getSSRCCount(this.mLine);\n\n        if (numSsrcs === 1) {\n            // Not using \"ssrcs\" getter on purpose here\n            return this.mLine.ssrcs[0].id;\n        }\n\n        // Look for a SIM, FID, or FEC-FR group\n        if (this.mLine.ssrcGroups) {\n            const simGroup = this.findGroup('SIM');\n\n            if (simGroup) {\n                return parsePrimarySSRC(simGroup);\n            }\n            const fidGroup = this.findGroup('FID');\n\n            if (fidGroup) {\n                return parsePrimarySSRC(fidGroup);\n            }\n            const fecGroup = this.findGroup('FEC-FR');\n\n            if (fecGroup) {\n                return parsePrimarySSRC(fecGroup);\n            }\n        }\n\n    }\n\n    /**\n     * Obtains RTX SSRC from the underlying video description (the\n     * secondary SSRC of the first \"FID\" group found)\n     * @param {number} primarySsrc the video ssrc for which to find the\n     * corresponding rtx ssrc\n     * @returns {number|undefined} the rtx ssrc (or undefined if there isn't\n     * one)\n     */\n    getRtxSSRC(primarySsrc) {\n        const fidGroup = this.findGroupByPrimarySSRC('FID', primarySsrc);\n\n\n        return fidGroup && parseSecondarySSRC(fidGroup);\n    }\n\n    /**\n     * Obtains all SSRCs contained in the underlying media description.\n     * @return {Array.<number>} an array with all SSRC as numbers.\n     */\n    getSSRCs() {\n        return this.ssrcs\n            .map(ssrcInfo => ssrcInfo.id)\n            .filter((ssrc, index, array) => array.indexOf(ssrc) === index);\n    }\n\n    /**\n     * Obtains primary video SSRCs.\n     * @return {Array.<number>} an array of all primary video SSRCs as numbers.\n     * @throws Error if the wrapped media description is not a video.\n     */\n    getPrimaryVideoSSRCs() {\n        const mediaType = this.mLine.type;\n\n        if (mediaType !== 'video') {\n            throw new Error(\n                `getPrimaryVideoSSRCs doesn't work with ${mediaType}`);\n        }\n\n        const videoSSRCs = this.getSSRCs();\n\n        for (const ssrcGroupInfo of this.ssrcGroups) {\n            // Right now, FID and FEC-FR groups are the only ones we parse to\n            // disqualify streams.  If/when others arise we'll\n            // need to add support for them here\n            if (ssrcGroupInfo.semantics === 'FID'\n                    || ssrcGroupInfo.semantics === 'FEC-FR') {\n                // secondary streams should be filtered out\n                const secondarySsrc = parseSecondarySSRC(ssrcGroupInfo);\n\n                videoSSRCs.splice(\n                    videoSSRCs.indexOf(secondarySsrc), 1);\n            }\n        }\n\n        return videoSSRCs;\n    }\n\n    /**\n     * Dumps all SSRC groups of this media description to JSON.\n     */\n    dumpSSRCGroups() {\n        return JSON.stringify(this.mLine.ssrcGroups);\n    }\n\n    /**\n     * Removes all SSRC groups which contain given SSRC number at any position.\n     * @param {number} ssrc the SSRC for which all matching groups are to be\n     * removed.\n     */\n    removeGroupsWithSSRC(ssrc) {\n        if (!this.mLine.ssrcGroups) {\n            return;\n        }\n\n        this.mLine.ssrcGroups = this.mLine.ssrcGroups\n            .filter(groupInfo => groupInfo.ssrcs.indexOf(`${ssrc}`) === -1);\n    }\n\n    /**\n     * Removes groups that match given semantics.\n     * @param {string} semantics e.g. \"SIM\" or \"FID\"\n     */\n    removeGroupsBySemantics(semantics) {\n        if (!this.mLine.ssrcGroups) {\n            return;\n        }\n\n        this.mLine.ssrcGroups\n            = this.mLine.ssrcGroups\n                .filter(groupInfo => groupInfo.semantics !== semantics);\n    }\n\n    /**\n     * Replaces SSRC (does not affect SSRC groups, but only attributes).\n     * @param {number} oldSSRC the old SSRC number\n     * @param {number} newSSRC the new SSRC number\n     */\n    replaceSSRC(oldSSRC, newSSRC) {\n        if (this.mLine.ssrcs) {\n            this.mLine.ssrcs.forEach(ssrcInfo => {\n                if (ssrcInfo.id === oldSSRC) {\n                    ssrcInfo.id = newSSRC;\n                }\n            });\n        }\n    }\n\n    /**\n     * Adds given SSRC group to this media description.\n     * @param {object} group the SSRC group object as defined by\n     * the 'sdp-transform' lib.\n     */\n    addSSRCGroup(group) {\n        this.ssrcGroups.push(group);\n    }\n}\n\n/**\n * Utility class for SDP manipulation using the 'sdp-transform' library.\n *\n * Typical use usage scenario:\n *\n * const transformer = new SdpTransformWrap(rawSdp);\n * const videoMLine = transformer.selectMedia('video);\n * if (videoMLine) {\n *     videoMLiner.addSSRCAttribute({\n *         id: 2342343,\n *         attribute: \"cname\",\n *         value: \"someCname\"\n *     });\n *     rawSdp = transformer.toRawSdp();\n * }\n */\nexport class SdpTransformWrap {\n\n    /**\n     * Creates new instance and parses the raw SDP into objects using\n     * 'sdp-transform' lib.\n     * @param {string} rawSDP the SDP in raw text format.\n     */\n    constructor(rawSDP) {\n        this.parsedSDP = transform.parse(rawSDP);\n    }\n\n    /**\n     * Selects the first media SDP of given name.\n     * @param {string} mediaType the name of the media e.g. 'audio', 'video',\n     * 'data'.\n     * @return {MLineWrap|null} return {@link MLineWrap} instance for the media\n     * line or <tt>null</tt> if not found. The object returned references\n     * the underlying SDP state held by this <tt>SdpTransformWrap</tt> instance\n     * (it's not a copy).\n     */\n    selectMedia(mediaType) {\n        const selectedMLine\n            = this.parsedSDP.media.find(mLine => mLine.type === mediaType);\n\n        return selectedMLine ? new MLineWrap(selectedMLine) : null;\n    }\n\n    /**\n     * Converts the currently stored SDP state in this instance to raw text SDP\n     * format.\n     * @return {string}\n     */\n    toRawSDP() {\n        return transform.write(this.parsedSDP);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/SdpTransformUtil.js","/**\n * Status that video SIP GW service is available.\n * @type {string}\n */\nexport const STATUS_AVAILABLE = 'available';\n\n/**\n * Status that video SIP GW service is not available.\n * @type {string}\n */\nexport const STATUS_UNDEFINED = 'undefined';\n\n/**\n * Status that video SIP GW service is available but there are no free nodes\n * at the moment to serve new requests.\n * @type {string}\n */\nexport const STATUS_BUSY = 'busy';\n\n/**\n * Video SIP GW session state, currently running.\n * @type {string}\n */\nexport const STATE_ON = 'on';\n\n/**\n * Video SIP GW session state, currently stopped and not running.\n * @type {string}\n */\nexport const STATE_OFF = 'off';\n\n/**\n * Video SIP GW session state, currently is starting.\n * @type {string}\n */\nexport const STATE_PENDING = 'pending';\n\n/**\n * Video SIP GW session state, has observed some issues and is retrying at the\n * moment.\n * @type {string}\n */\nexport const STATE_RETRYING = 'retrying';\n\n/**\n * Video SIP GW session state, tried to start but it failed.\n * @type {string}\n */\nexport const STATE_FAILED = 'failed';\n\n/**\n * Error on trying to create video SIP GW session in conference where\n * there is no room connection (hasn't joined or has left the room).\n * @type {string}\n */\nexport const ERROR_NO_CONNECTION = 'error_no_connection';\n\n/**\n * Error on trying to create video SIP GW session with address for which\n * there is an already created session.\n * @type {string}\n */\nexport const ERROR_SESSION_EXISTS = 'error_session_already_exists';\n\n\n\n// WEBPACK FOOTER //\n// ./modules/videosipgw/VideoSIPGWConstants.js","/**\n * Indicates that the local connection statistics were updated.\n */\nexport const LOCAL_STATS_UPDATED = 'cq.local_stats_updated';\n\n/**\n * Indicates that the connection statistics for a particular remote participant\n * were updated.\n */\nexport const REMOTE_STATS_UPDATED = 'cq.remote_stats_updated';\n\n\n\n// WEBPACK FOOTER //\n// ./service/connectivity/ConnectionQualityEvents.js","/**\n * The errors for the conference.\n */\n\n/**\n * Indicates that client must be authenticated to create the conference.\n */\nexport const AUTHENTICATION_REQUIRED = 'conference.authenticationRequired';\n\n/**\n * Indicates that chat error occurred.\n */\nexport const CHAT_ERROR = 'conference.chatError';\n\n/**\n * Indicates that conference has been destroyed.\n */\nexport const CONFERENCE_DESTROYED = 'conference.destroyed';\n\n/**\n * Indicates that max users limit has been reached.\n */\nexport const CONFERENCE_MAX_USERS = 'conference.max_users';\n\n/**\n * Indicates that a connection error occurred when trying to join a conference.\n */\nexport const CONNECTION_ERROR = 'conference.connectionError';\n\n/**\n * Indicates that a connection error is due to not allowed,\n * occurred when trying to join a conference.\n */\nexport const NOT_ALLOWED_ERROR = 'conference.connectionError.notAllowed';\n\n/**\n * Indicates that focus error happened.\n */\nexport const FOCUS_DISCONNECTED = 'conference.focusDisconnected';\n\n/**\n * Indicates that focus left the conference.\n */\nexport const FOCUS_LEFT = 'conference.focusLeft';\n\n/**\n * Indicates that graceful shutdown happened.\n */\nexport const GRACEFUL_SHUTDOWN = 'conference.gracefulShutdown';\n\n/**\n * Indicates that the versions of the server side components are incompatible\n * with the client side.\n */\nexport const INCOMPATIBLE_SERVER_VERSIONS\n    = 'conference.incompatible_server_versions';\n\n/**\n * Indicates that jingle fatal error happened.\n */\nexport const JINGLE_FATAL_ERROR = 'conference.jingleFatalError';\n\n/**\n * Indicates that password cannot be set for this conference.\n */\nexport const PASSWORD_NOT_SUPPORTED = 'conference.passwordNotSupported';\n\n/**\n * Indicates that a password is required in order to join the conference.\n */\nexport const PASSWORD_REQUIRED = 'conference.passwordRequired';\n\n/**\n * Indicates that reservation system returned error.\n */\nexport const RESERVATION_ERROR = 'conference.reservationError';\n\n/**\n * Indicates that the conference setup failed.\n */\nexport const SETUP_FAILED = 'conference.setup_failed';\n\n/**\n * Indicates that there is no available videobridge.\n */\nexport const VIDEOBRIDGE_NOT_AVAILABLE = 'conference.videobridgeNotAvailable';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiConferenceErrors.js","/*! callstats.js  version = 3.27.0 2017-12-14 */\nfunction SWPlugin(){this.attaches=[],this.signalListeners=[],this.mapFnc=null}SWPlugin.prototype={constructor:SWPlugin,add:function(a){console.log(\"Abstract method is called width value: \"+a)},remove:function(a){console.log(\"Abstract method is called with value: \"+a)},attach:function(a,b){this.attaches.push({cb:a,that:\"undefined\"==typeof b?null:b})},notify:function(a){for(var b=0;b<this.attaches.length;++b){var c=this.attaches[b];c.cb?c.cb.call(c.that,a):c.cb(a)}},addMapFnc:function(a){this.mapFnc=a},map:function(){},mapping:function(a,b){null!==this.mapFnc&&this.mapFnc(a,b)},addSignalListener:function(a,b,c){this.signalListeners.push({signalName:a,cb:b,that:\"undefined\"==typeof c?null:c})},signalize:function(a,b){for(var c=0;c<this.signalListeners.length;++c){var d=this.signalListeners[c];d.signalName===a&&null!==d.cb&&void 0!==d.cb&&(d.that?d.cb.call(d.that,b):d.cb(b))}}},module.exports=SWPlugin;\n\n\n// WEBPACK FOOTER //\n// ../react-native-callstats/swPlugin.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n// WEBPACK FOOTER //\n// ../node-libs-browser/node_modules/process/browser.js","const Resolutions = {\n    '1080': {\n        width: 1920,\n        height: 1080,\n        order: 7\n    },\n    'fullhd': {\n        width: 1920,\n        height: 1080,\n        order: 7\n    },\n    '720': {\n        width: 1280,\n        height: 720,\n        order: 6\n    },\n    'hd': {\n        width: 1280,\n        height: 720,\n        order: 6\n    },\n    '960': {\n        width: 960,\n        height: 720,\n        order: 5\n    },\n\n    // 16:9 resolution first.\n    '360': {\n        width: 640,\n        height: 360,\n        order: 4\n    },\n    '640': {\n        width: 640,\n        height: 480,\n        order: 3\n    },\n    'vga': {\n        width: 640,\n        height: 480,\n        order: 3\n    },\n\n    // 16:9 resolution first.\n    '180': {\n        width: 320,\n        height: 180,\n        order: 2\n    },\n    '320': {\n        width: 320,\n        height: 240,\n        order: 1\n    }\n};\n\nmodule.exports = Resolutions;\n\n\n\n// WEBPACK FOOTER //\n// ./service/RTC/Resolutions.js","/* global __filename */\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as JitsiConferenceEvents from '../../JitsiConferenceEvents';\nimport * as JitsiTrackEvents from '../../JitsiTrackEvents';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport browser from '../browser';\nimport RTCEvents from '../../service/RTC/RTCEvents';\nimport Statistics from '../statistics/statistics';\n\nconst logger = getLogger(__filename);\n\n/**\n * Default value of 500 milliseconds for\n * {@link ParticipantConnectionStatus.outOfLastNTimeout}.\n *\n * @type {number}\n */\nconst DEFAULT_NOT_IN_LAST_N_TIMEOUT = 500;\n\n/**\n * Default value of 2000 milliseconds for\n * {@link ParticipantConnectionStatus.rtcMuteTimeout}.\n *\n * @type {number}\n */\nconst DEFAULT_RTC_MUTE_TIMEOUT = 2000;\n\n/**\n * The time to wait a track to be restored. Track which was out of lastN\n * should be inactive and when entering lastN it becomes restoring and when\n * data is received from bridge it will become active, but if no data is\n * received for some time we set status of that participant connection to\n * interrupted.\n * @type {number}\n */\nconst DEFAULT_RESTORING_TIMEOUT = 5000;\n\n/**\n * Participant connection statuses.\n *\n * @type {{\n *      ACTIVE: string,\n *      INACTIVE: string,\n *      INTERRUPTED: string,\n *      RESTORING: string\n * }}\n */\nexport const ParticipantConnectionStatus = {\n    /**\n     * Status indicating that connection is currently active.\n     */\n    ACTIVE: 'active',\n\n    /**\n     * Status indicating that connection is currently inactive.\n     * Inactive means the connection was stopped on purpose from the bridge,\n     * like exiting lastN or adaptivity decided to drop video because of not\n     * enough bandwidth.\n     */\n    INACTIVE: 'inactive',\n\n    /**\n     * Status indicating that connection is currently interrupted.\n     */\n    INTERRUPTED: 'interrupted',\n\n    /**\n     * Status indicating that connection is currently restoring.\n     */\n    RESTORING: 'restoring'\n};\n\n/**\n * Class is responsible for emitting\n * JitsiConferenceEvents.PARTICIPANT_CONN_STATUS_CHANGED events.\n */\nexport default class ParticipantConnectionStatusHandler {\n    /* eslint-disable max-params*/\n    /**\n     * Calculates the new {@link ParticipantConnectionStatus} based on\n     * the values given for some specific remote user. It is assumed that\n     * the conference is currently in the JVB mode (in contrary to the P2P mode)\n     * @param {boolean} isConnectionActiveByJvb true if the JVB did not get any\n     * data from the user for the last 15 seconds.\n     * @param {boolean} isInLastN indicates whether the user is in the last N\n     * set. When set to false it means that JVB is not sending any video for\n     * the user.\n     * @param {boolean} isRestoringTimedout if true it means that the user has\n     * been outside of last N too long to be considered\n     * {@link ParticipantConnectionStatus.RESTORING}.\n     * @param {boolean} isVideoMuted true if the user is video muted and we\n     * should not expect to receive any video.\n     * @param {boolean} isVideoTrackFrozen if the current browser support video\n     * frozen detection then it will be set to true when the video track is\n     * frozen. If the current browser does not support frozen detection the it's\n     * always false.\n     * @return {ParticipantConnectionStatus} the new connection status for\n     * the user for whom the values above were provided.\n     * @private\n     */\n    static _getNewStateForJvbMode(\n            isConnectionActiveByJvb,\n            isInLastN,\n            isRestoringTimedout,\n            isVideoMuted,\n            isVideoTrackFrozen) {\n        if (!isConnectionActiveByJvb) {\n            // when there is a connection problem signaled from jvb\n            // it means no media was flowing for at least 15secs, so both audio\n            // and video are most likely interrupted\n            return ParticipantConnectionStatus.INTERRUPTED;\n        } else if (isVideoMuted) {\n            // If the connection is active according to JVB and the user is\n            // video muted there is no way for the connection to be inactive,\n            // because the detection logic below only makes sense for video.\n            return ParticipantConnectionStatus.ACTIVE;\n        }\n\n        // Logic when isVideoTrackFrozen is supported\n        if (browser.supportsVideoMuteOnConnInterrupted()) {\n            if (!isVideoTrackFrozen) {\n                // If the video is playing we're good\n                return ParticipantConnectionStatus.ACTIVE;\n            } else if (isInLastN) {\n                return isRestoringTimedout\n                    ? ParticipantConnectionStatus.INTERRUPTED\n                    : ParticipantConnectionStatus.RESTORING;\n            }\n\n            return ParticipantConnectionStatus.INACTIVE;\n        }\n\n        // Because this browser is incapable of detecting frozen video we must\n        // rely on the lastN value\n        return isInLastN\n            ? ParticipantConnectionStatus.ACTIVE\n            : ParticipantConnectionStatus.INACTIVE;\n    }\n\n    /* eslint-enable max-params*/\n\n    /**\n     * In P2P mode we don't care about any values coming from the JVB and\n     * the connection status can be only active or interrupted.\n     * @param {boolean} isVideoMuted the user if video muted\n     * @param {boolean} isVideoTrackFrozen true if the video track for\n     * the remote user is currently frozen. If the current browser does not\n     * support video frozen detection then it's always false.\n     * @return {ParticipantConnectionStatus}\n     * @private\n     */\n    static _getNewStateForP2PMode(isVideoMuted, isVideoTrackFrozen) {\n        if (!browser.supportsVideoMuteOnConnInterrupted()) {\n            // There's no way to detect problems in P2P when there's no video\n            // track frozen detection...\n            return ParticipantConnectionStatus.ACTIVE;\n        }\n\n        return isVideoMuted || !isVideoTrackFrozen\n            ? ParticipantConnectionStatus.ACTIVE\n            : ParticipantConnectionStatus.INTERRUPTED;\n    }\n\n    /**\n     * Creates new instance of <tt>ParticipantConnectionStatus</tt>.\n     *\n     * @constructor\n     * @param {RTC} rtc the RTC service instance\n     * @param {JitsiConference} conference parent conference instance\n     * @param {Object} options\n     * @param {number} [options.rtcMuteTimeout=2000] custom value for\n     * {@link ParticipantConnectionStatus.rtcMuteTimeout}.\n     * @param {number} [options.outOfLastNTimeout=500] custom value for\n     * {@link ParticipantConnectionStatus.outOfLastNTimeout}.\n     */\n    constructor(rtc, conference, options) {\n        this.rtc = rtc;\n        this.conference = conference;\n\n        /**\n         * A map of the \"endpoint ID\"(which corresponds to the resource part\n         * of MUC JID(nickname)) to the timeout callback IDs scheduled using\n         * window.setTimeout.\n         * @type {Object.<string, number>}\n         */\n        this.trackTimers = {};\n\n        /**\n         * This map holds the endpoint connection status received from the JVB\n         * (as it might be different than the one stored in JitsiParticipant).\n         * Required for getting back in sync when remote video track is removed.\n         * @type {Object.<string, boolean>}\n         */\n        this.connStatusFromJvb = { };\n\n        /**\n         * If video track frozen detection through RTC mute event is supported,\n         * we wait some time until video track is considered frozen. But because\n         * when the user falls out of last N it is expected for the video to\n         * freeze this timeout must be significantly reduced in \"out of last N\"\n         * case.\n         *\n         * Basically this value is used instead of {@link rtcMuteTimeout} when\n         * user is not in last N.\n         * @type {number}\n         */\n        this.outOfLastNTimeout\n            = typeof options.outOfLastNTimeout === 'number'\n                ? options.outOfLastNTimeout : DEFAULT_NOT_IN_LAST_N_TIMEOUT;\n\n        /**\n         * How long we're going to wait after the RTC video track muted event\n         * for the corresponding signalling mute event, before the connection\n         * interrupted is fired. The default value is\n         * {@link DEFAULT_RTC_MUTE_TIMEOUT}.\n         *\n         * @type {number} amount of time in milliseconds\n         */\n        this.rtcMuteTimeout\n            = typeof options.rtcMuteTimeout === 'number'\n                ? options.rtcMuteTimeout : DEFAULT_RTC_MUTE_TIMEOUT;\n\n        /**\n         * This map holds a timestamp indicating  when participant's video track\n         * was RTC muted (it is assumed that each participant can have only 1\n         * video track at a time). The purpose of storing the timestamp is to\n         * avoid the transition to disconnected status in case of legitimate\n         * video mute operation where the signalling video muted event can\n         * arrive shortly after RTC muted event.\n         *\n         * The key is participant's ID which is the same as endpoint id in\n         * the Colibri conference allocated on the JVB.\n         *\n         * The value is a timestamp measured in milliseconds obtained with\n         * <tt>Date.now()</tt>.\n         *\n         * FIXME merge this logic with NO_DATA_FROM_SOURCE event\n         *       implemented in JitsiLocalTrack by extending the event to\n         *       the remote track and allowing to set different timeout for\n         *       local and remote tracks.\n         *\n         * @type {Object.<string, number>}\n         */\n        this.rtcMutedTimestamp = { };\n        logger.info(`RtcMuteTimeout set to: ${this.rtcMuteTimeout}`);\n\n        /**\n         * This map holds the timestamps indicating when participant's video\n         * entered lastN set. Participants entering lastN will have connection\n         * status restoring and when we start receiving video will become\n         * active, but if video is not received for certain time\n         * {@link DEFAULT_RESTORING_TIMEOUT} that participant connection status\n         * will become interrupted.\n         *\n         * @type {Map<string, number>}\n         */\n        this.enteredLastNTimestamp = new Map();\n\n        /**\n         * A map of the \"endpoint ID\"(which corresponds to the resource part\n         * of MUC JID(nickname)) to the restoring timeout callback IDs\n         * scheduled using window.setTimeout.\n         *\n         * @type {Map<string, number>}\n         */\n        this.restoringTimers = new Map();\n    }\n\n    /**\n     * Gets the video frozen timeout for given user.\n     * @param {string} id endpoint/participant ID\n     * @return {number} how long are we going to wait since RTC video muted\n     * even, before a video track is considered frozen.\n     * @private\n     */\n    _getVideoFrozenTimeout(id) {\n        return this.rtc.isInLastN(id)\n            ? this.rtcMuteTimeout : this.outOfLastNTimeout;\n    }\n\n    /**\n     * Initializes <tt>ParticipantConnectionStatus</tt> and bind required event\n     * listeners.\n     */\n    init() {\n\n        this._onEndpointConnStatusChanged\n            = this.onEndpointConnStatusChanged.bind(this);\n\n        this.rtc.addListener(\n            RTCEvents.ENDPOINT_CONN_STATUS_CHANGED,\n            this._onEndpointConnStatusChanged);\n\n        // Handles P2P status changes\n        this._onP2PStatus = this.refreshConnectionStatusForAll.bind(this);\n        this.conference.on(JitsiConferenceEvents.P2P_STATUS, this._onP2PStatus);\n\n        // On some browsers MediaStreamTrack trigger \"onmute\"/\"onunmute\"\n        // events for video type tracks when they stop receiving data which is\n        // often a sign that remote user is having connectivity issues\n        if (browser.supportsVideoMuteOnConnInterrupted()) {\n\n            this._onTrackRtcMuted = this.onTrackRtcMuted.bind(this);\n            this.rtc.addListener(\n                RTCEvents.REMOTE_TRACK_MUTE, this._onTrackRtcMuted);\n\n            this._onTrackRtcUnmuted = this.onTrackRtcUnmuted.bind(this);\n            this.rtc.addListener(\n                RTCEvents.REMOTE_TRACK_UNMUTE, this._onTrackRtcUnmuted);\n\n            // Track added/removed listeners are used to bind \"mute\"/\"unmute\"\n            // event handlers\n            this._onRemoteTrackAdded = this.onRemoteTrackAdded.bind(this);\n            this.conference.on(\n                JitsiConferenceEvents.TRACK_ADDED,\n                this._onRemoteTrackAdded);\n\n            this._onRemoteTrackRemoved = this.onRemoteTrackRemoved.bind(this);\n            this.conference.on(\n                JitsiConferenceEvents.TRACK_REMOVED,\n                this._onRemoteTrackRemoved);\n\n            // Listened which will be bound to JitsiRemoteTrack to listen for\n            // signalling mute/unmute events.\n            this._onSignallingMuteChanged\n                = this.onSignallingMuteChanged.bind(this);\n        }\n\n        this._onLastNChanged = this._onLastNChanged.bind(this);\n        this.conference.on(\n            JitsiConferenceEvents.LAST_N_ENDPOINTS_CHANGED,\n            this._onLastNChanged);\n\n        this._onLastNValueChanged\n            = this.refreshConnectionStatusForAll.bind(this);\n        this.rtc.on(\n            RTCEvents.LASTN_VALUE_CHANGED, this._onLastNValueChanged);\n    }\n\n    /**\n     * Removes all event listeners and disposes of all resources held by this\n     * instance.\n     */\n    dispose() {\n\n        this.rtc.removeListener(\n            RTCEvents.ENDPOINT_CONN_STATUS_CHANGED,\n            this._onEndpointConnStatusChanged);\n\n        if (browser.supportsVideoMuteOnConnInterrupted()) {\n            this.rtc.removeListener(\n                RTCEvents.REMOTE_TRACK_MUTE,\n                this._onTrackRtcMuted);\n            this.rtc.removeListener(\n                RTCEvents.REMOTE_TRACK_UNMUTE,\n                this._onTrackRtcUnmuted);\n\n            this.conference.off(\n                JitsiConferenceEvents.TRACK_ADDED,\n                this._onRemoteTrackAdded);\n            this.conference.off(\n                JitsiConferenceEvents.TRACK_REMOVED,\n                this._onRemoteTrackRemoved);\n        }\n\n        this.conference.off(\n            JitsiConferenceEvents.LAST_N_ENDPOINTS_CHANGED,\n            this._onLastNChanged);\n\n        this.rtc.removeListener(\n            RTCEvents.LASTN_VALUE_CHANGED, this._onLastNValueChanged);\n\n        this.conference.off(\n            JitsiConferenceEvents.P2P_STATUS, this._onP2PStatus);\n\n        const participantIds = Object.keys(this.trackTimers);\n\n        for (const participantId of participantIds) {\n            this.clearTimeout(participantId);\n            this.clearRtcMutedTimestamp(participantId);\n        }\n\n        // Clear RTC connection status cache\n        this.connStatusFromJvb = {};\n    }\n\n    /**\n     * Handles RTCEvents.ENDPOINT_CONN_STATUS_CHANGED triggered when we receive\n     * notification over the data channel from the bridge about endpoint's\n     * connection status update.\n     * @param {string} endpointId the endpoint ID(MUC nickname/resource JID)\n     * @param {boolean} isActive true if the connection is OK or false otherwise\n     */\n    onEndpointConnStatusChanged(endpointId, isActive) {\n\n        logger.debug(\n            `Detector RTCEvents.ENDPOINT_CONN_STATUS_CHANGED(${Date.now()}): ${\n                endpointId}: ${isActive}`);\n\n        // Filter out events for the local JID for now\n        if (endpointId !== this.conference.myUserId()) {\n            // Store the status received over the data channels\n            this.connStatusFromJvb[endpointId] = isActive;\n            this.figureOutConnectionStatus(endpointId);\n        }\n    }\n\n    /**\n     * Changes connection status.\n     * @param {JitsiParticipant} participant\n     * @param newStatus\n     */\n    _changeConnectionStatus(participant, newStatus) {\n        if (participant.getConnectionStatus() !== newStatus) {\n\n            const endpointId = participant.getId();\n\n            participant._setConnectionStatus(newStatus);\n\n            logger.debug(\n                `Emit endpoint conn status(${Date.now()}) ${endpointId}: ${\n                    newStatus}`);\n\n            // Log the event on CallStats\n            Statistics.sendLog(\n                JSON.stringify({\n                    id: 'peer.conn.status',\n                    participant: endpointId,\n                    status: newStatus\n                }));\n\n            this.conference.eventEmitter.emit(\n                JitsiConferenceEvents.PARTICIPANT_CONN_STATUS_CHANGED,\n                endpointId, newStatus);\n        }\n    }\n\n    /**\n     * Reset the postponed \"connection interrupted\" event which was previously\n     * scheduled as a timeout on RTC 'onmute' event.\n     *\n     * @param {string} participantId the participant for which the \"connection\n     * interrupted\" timeout was scheduled\n     */\n    clearTimeout(participantId) {\n        if (this.trackTimers[participantId]) {\n            window.clearTimeout(this.trackTimers[participantId]);\n            this.trackTimers[participantId] = null;\n        }\n    }\n\n    /**\n     * Clears the timestamp of the RTC muted event for participant's video track\n     * @param {string} participantId the id of the conference participant which\n     * is the same as the Colibri endpoint ID of the video channel allocated for\n     * the user on the videobridge.\n     */\n    clearRtcMutedTimestamp(participantId) {\n        this.rtcMutedTimestamp[participantId] = null;\n    }\n\n    /**\n     * Bind signalling mute event listeners for video {JitsiRemoteTrack} when\n     * a new one is added to the conference.\n     *\n     * @param {JitsiTrack} remoteTrack the {JitsiTrack} which is being added to\n     * the conference.\n     */\n    onRemoteTrackAdded(remoteTrack) {\n        if (!remoteTrack.isLocal()\n                && remoteTrack.getType() === MediaType.VIDEO) {\n\n            logger.debug(\n                `Detector on remote track added for: ${\n                    remoteTrack.getParticipantId()}`);\n\n            remoteTrack.on(\n                JitsiTrackEvents.TRACK_MUTE_CHANGED,\n                this._onSignallingMuteChanged);\n        }\n    }\n\n    /**\n     * Removes all event listeners bound to the remote video track and clears\n     * any related timeouts.\n     *\n     * @param {JitsiRemoteTrack} remoteTrack the remote track which is being\n     * removed from the conference.\n     */\n    onRemoteTrackRemoved(remoteTrack) {\n        if (!remoteTrack.isLocal()\n                && remoteTrack.getType() === MediaType.VIDEO) {\n\n            const endpointId = remoteTrack.getParticipantId();\n\n            logger.debug(`Detector on remote track removed: ${endpointId}`);\n\n            remoteTrack.off(\n                JitsiTrackEvents.TRACK_MUTE_CHANGED,\n                this._onSignallingMuteChanged);\n\n            this.clearTimeout(endpointId);\n            this.clearRtcMutedTimestamp(endpointId);\n\n            this.figureOutConnectionStatus(endpointId);\n        }\n    }\n\n    /**\n     * Checks if given participant's video is considered frozen.\n     * @param {JitsiParticipant} participant\n     * @return {boolean} <tt>true</tt> if the video has frozen for given\n     * participant or <tt>false</tt> when it's either not considered frozen\n     * (yet) or if freeze detection is not supported by the current browser.\n     *\n     * FIXME merge this logic with NO_DATA_FROM_SOURCE event\n     *       implemented in JitsiLocalTrack by extending the event to\n     *       the remote track and allowing to set different timeout for\n     *       local and remote tracks.\n     *\n     */\n    isVideoTrackFrozen(participant) {\n        if (!browser.supportsVideoMuteOnConnInterrupted()) {\n            return false;\n        }\n\n        const id = participant.getId();\n        const hasAnyVideoRTCMuted = participant.hasAnyVideoTrackWebRTCMuted();\n        const rtcMutedTimestamp = this.rtcMutedTimestamp[id];\n        const timeout = this._getVideoFrozenTimeout(id);\n\n        return hasAnyVideoRTCMuted\n            && typeof rtcMutedTimestamp === 'number'\n            && (Date.now() - rtcMutedTimestamp) >= timeout;\n    }\n\n    /**\n     * Goes over every participant and updates connectivity status.\n     * Should be called when a parameter which affects all of the participants\n     * is changed (P2P for example).\n     */\n    refreshConnectionStatusForAll() {\n        const participants = this.conference.getParticipants();\n\n        for (const participant of participants) {\n            this.figureOutConnectionStatus(participant.getId());\n        }\n    }\n\n    /**\n     * Figures out (and updates) the current connectivity status for\n     * the participant identified by the given id.\n     *\n     * @param {string} id the participant's id (MUC nickname or Colibri endpoint\n     * ID).\n     */\n    figureOutConnectionStatus(id) {\n        const participant = this.conference.getParticipantById(id);\n\n        if (!participant) {\n            // Probably the participant is no longer in the conference\n            // (at the time of writing this code, participant is\n            // detached from the conference and TRACK_REMOVED events are\n            // fired),\n            // so we don't care, but let's print the warning for\n            // debugging purpose\n            logger.warn(`figure out conn status - no participant for: ${id}`);\n\n            return;\n        }\n\n        const inP2PMode = this.conference.isP2PActive();\n        const isRestoringTimedOut = this._isRestoringTimedout(id);\n        const audioOnlyMode = this.rtc.getLastN() === 0;\n\n        // NOTE Overriding videoMuted to true for audioOnlyMode should disable\n        // any detection based on video playback or the last N.\n        const isVideoMuted = participant.isVideoMuted() || audioOnlyMode;\n        const isVideoTrackFrozen = this.isVideoTrackFrozen(participant);\n        const isInLastN = this.rtc.isInLastN(id);\n        let isConnActiveByJvb = this.connStatusFromJvb[id];\n\n        if (typeof isConnActiveByJvb !== 'boolean') {\n            // If no status was received from the JVB it means that it's active\n            // (the bridge does not send notification unless there is a problem)\n            logger.debug('Assuming connection active by JVB - no notification');\n            isConnActiveByJvb = true;\n        }\n\n        const newState\n            = inP2PMode\n                ? ParticipantConnectionStatusHandler._getNewStateForP2PMode(\n                    isVideoMuted,\n                    isVideoTrackFrozen)\n                : ParticipantConnectionStatusHandler._getNewStateForJvbMode(\n                    isConnActiveByJvb,\n                    isInLastN,\n                    isRestoringTimedOut,\n                    isVideoMuted,\n                    isVideoTrackFrozen);\n\n        // if the new state is not restoring clear timers and timestamps\n        // that we use to track the restoring state\n        if (newState !== ParticipantConnectionStatus.RESTORING) {\n            this._clearRestoringTimer(id);\n        }\n\n        logger.debug(\n            `Figure out conn status for ${id}, is video muted: ${\n                isVideoMuted} is active(jvb): ${\n                isConnActiveByJvb} video track frozen: ${\n                isVideoTrackFrozen} p2p mode: ${\n                inP2PMode} is in last N: ${\n                isInLastN} currentStatus => newStatus: ${\n                participant.getConnectionStatus()} => ${newState}`);\n\n        this._changeConnectionStatus(participant, newState);\n    }\n\n    /**\n     * On change in Last N set check all leaving and entering participants to\n     * change their corresponding statuses.\n     *\n     * @param {Array<string>} leavingLastN array of ids leaving lastN.\n     * @param {Array<string>} enteringLastN array of ids entering lastN.\n     * @private\n     */\n    _onLastNChanged(leavingLastN = [], enteringLastN = []) {\n        const now = Date.now();\n\n        logger.debug(\n            'leaving/entering lastN', leavingLastN, enteringLastN, now);\n\n        for (const id of leavingLastN) {\n            this.enteredLastNTimestamp.delete(id);\n            this._clearRestoringTimer(id);\n            this.figureOutConnectionStatus(id);\n        }\n        for (const id of enteringLastN) {\n            // store the timestamp this id is entering lastN\n            this.enteredLastNTimestamp.set(id, now);\n            this.figureOutConnectionStatus(id);\n        }\n    }\n\n    /**\n     * Clears the restoring timer for participant's video track and the\n     * timestamp for entering lastN.\n     *\n     * @param {string} participantId the id of the conference participant which\n     * is the same as the Colibri endpoint ID of the video channel allocated for\n     * the user on the videobridge.\n     */\n    _clearRestoringTimer(participantId) {\n        const rTimer = this.restoringTimers.get(participantId);\n\n        if (rTimer) {\n            clearTimeout(rTimer);\n            this.restoringTimers.delete(participantId);\n        }\n    }\n\n    /**\n     * Checks whether a track had stayed enough in restoring state, compares\n     * current time and the time the track entered in lastN. If it hasn't\n     * timedout and there is no timer added, add new timer in order to give it\n     * more time to become active or mark it as interrupted on next check.\n     *\n     * @param {string} participantId the id of the conference participant which\n     * is the same as the Colibri endpoint ID of the video channel allocated for\n     * the user on the videobridge.\n     * @returns {boolean} <tt>true</tt> if the track was in restoring state\n     * more than the timeout ({@link DEFAULT_RESTORING_TIMEOUT}.) in order to\n     * set its status to interrupted.\n     * @private\n     */\n    _isRestoringTimedout(participantId) {\n        const enteredLastNTimestamp\n            = this.enteredLastNTimestamp.get(participantId);\n\n        if (enteredLastNTimestamp\n            && (Date.now() - enteredLastNTimestamp)\n                >= DEFAULT_RESTORING_TIMEOUT) {\n            return true;\n        }\n\n        // still haven't reached timeout, if there is no timer scheduled,\n        // schedule one so we can track the restoring state and change it after\n        // reaching the timeout\n        const rTimer = this.restoringTimers.get(participantId);\n\n        if (!rTimer) {\n            this.restoringTimers.set(participantId, setTimeout(\n                () => this.figureOutConnectionStatus(participantId),\n                DEFAULT_RESTORING_TIMEOUT));\n        }\n\n        return false;\n    }\n\n    /**\n     * Handles RTC 'onmute' event for the video track.\n     *\n     * @param {JitsiRemoteTrack} track the video track for which 'onmute' event\n     * will be processed.\n     */\n    onTrackRtcMuted(track) {\n        const participantId = track.getParticipantId();\n        const participant = this.conference.getParticipantById(participantId);\n\n        logger.debug(`Detector track RTC muted: ${participantId}`, Date.now());\n        if (!participant) {\n            logger.error(`No participant for id: ${participantId}`);\n\n            return;\n        }\n        this.rtcMutedTimestamp[participantId] = Date.now();\n        if (!participant.isVideoMuted()) {\n            // If the user is not muted according to the signalling we'll give\n            // it some time, before the connection interrupted event is\n            // triggered.\n            this.clearTimeout(participantId);\n\n            // The timeout is reduced when user is not in the last N\n            const timeout = this._getVideoFrozenTimeout(participantId);\n\n            this.trackTimers[participantId] = window.setTimeout(() => {\n                logger.debug(\n                    `Set RTC mute timeout for: ${participantId}\\\n                     of ${timeout} ms`);\n                this.clearTimeout(participantId);\n                this.figureOutConnectionStatus(participantId);\n            }, timeout);\n        }\n    }\n\n    /**\n     * Handles RTC 'onunmute' event for the video track.\n     *\n     * @param {JitsiRemoteTrack} track the video track for which 'onunmute'\n     * event will be processed.\n     */\n    onTrackRtcUnmuted(track) {\n        const participantId = track.getParticipantId();\n\n        logger.debug(\n            `Detector track RTC unmuted: ${participantId}`, Date.now());\n\n        this.clearTimeout(participantId);\n        this.clearRtcMutedTimestamp(participantId);\n\n        this.figureOutConnectionStatus(participantId);\n    }\n\n    /**\n     * Here the signalling \"mute\"/\"unmute\" events are processed.\n     *\n     * @param {JitsiRemoteTrack} track the remote video track for which\n     * the signalling mute/unmute event will be processed.\n     */\n    onSignallingMuteChanged(track) {\n        const participantId = track.getParticipantId();\n\n        logger.debug(\n            `Detector on track signalling mute changed: ${participantId}`,\n            track.isMuted());\n\n        this.figureOutConnectionStatus(participantId);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/connectivity/ParticipantConnectionStatus.js","/*! adapterjs - v0.14.0 - 2016-10-03 */\nvar console = require(\"jitsi-meet-logger\").getLogger(__filename);\n// Adapter's interface.\nvar AdapterJS = AdapterJS || {};\n\n// Browserify compatibility\nif(typeof exports !== 'undefined') {\n  module.exports = AdapterJS;\n}\n\nAdapterJS.options = AdapterJS.options || {};\n\n// uncomment to get virtual webcams\n// AdapterJS.options.getAllCams = true;\n\n// uncomment to prevent the install prompt when the plugin in not yet installed\n// AdapterJS.options.hidePluginInstallPrompt = true;\n\n// AdapterJS version\nAdapterJS.VERSION = '0.14.0';\n\n// This function will be called when the WebRTC API is ready to be used\n// Whether it is the native implementation (Chrome, Firefox, Opera) or\n// the plugin\n// You may Override this function to synchronise the start of your application\n// with the WebRTC API being ready.\n// If you decide not to override use this synchronisation, it may result in\n// an extensive CPU usage on the plugin start (once per tab loaded)\n// Params:\n//    - isUsingPlugin: true is the WebRTC plugin is being used, false otherwise\n//\nAdapterJS.onwebrtcready = AdapterJS.onwebrtcready || function(isUsingPlugin) {\n  // The WebRTC API is ready.\n  // Override me and do whatever you want here\n};\n\n// New interface to store multiple callbacks, private\nAdapterJS._onwebrtcreadies = [];\n\n// Sets a callback function to be called when the WebRTC interface is ready.\n// The first argument is the function to callback.\\\n// Throws an error if the first argument is not a function\nAdapterJS.webRTCReady = function (callback) {\n  if (typeof callback !== 'function') {\n    throw new Error('Callback provided is not a function');\n  }\n\n  if (true === AdapterJS.onwebrtcreadyDone) {\n    // All WebRTC interfaces are ready, just call the callback\n    callback(null !== AdapterJS.WebRTCPlugin.plugin);\n  } else {\n    // will be triggered automatically when your browser/plugin is ready.\n    AdapterJS._onwebrtcreadies.push(callback);\n  }\n};\n\n// Plugin namespace\nAdapterJS.WebRTCPlugin = AdapterJS.WebRTCPlugin || {};\n\n// The object to store plugin information\n/* jshint ignore:start */\nAdapterJS.WebRTCPlugin.pluginInfo = AdapterJS.WebRTCPlugin.pluginInfo || {\n  prefix : 'Tem',\n  plugName : 'TemWebRTCPlugin',\n  pluginId : 'plugin0',\n  type : 'application/x-temwebrtcplugin',\n  onload : '__TemWebRTCReady0',\n  portalLink : 'http://skylink.io/plugin/',\n  downloadLink : null, //set below\n  companyName: 'Temasys',\n  downloadLinks : {\n    mac: 'http://bit.ly/webrtcpluginpkg',\n    win: 'http://bit.ly/webrtcpluginmsi'\n  }\n};\nif(typeof AdapterJS.WebRTCPlugin.pluginInfo.downloadLinks !== \"undefined\" && AdapterJS.WebRTCPlugin.pluginInfo.downloadLinks !== null) {\n  if(!!navigator.platform.match(/^Mac/i)) {\n    AdapterJS.WebRTCPlugin.pluginInfo.downloadLink = AdapterJS.WebRTCPlugin.pluginInfo.downloadLinks.mac;\n  }\n  else if(!!navigator.platform.match(/^Win/i)) {\n    AdapterJS.WebRTCPlugin.pluginInfo.downloadLink = AdapterJS.WebRTCPlugin.pluginInfo.downloadLinks.win;\n  }\n}\n\n/* jshint ignore:end */\n\nAdapterJS.WebRTCPlugin.TAGS = {\n  NONE  : 'none',\n  AUDIO : 'audio',\n  VIDEO : 'video'\n};\n\n// Unique identifier of each opened page\nAdapterJS.WebRTCPlugin.pageId = Math.random().toString(36).slice(2);\n\n// Use this whenever you want to call the plugin.\nAdapterJS.WebRTCPlugin.plugin = null;\n\n// Set log level for the plugin once it is ready.\n// The different values are\n// This is an asynchronous function that will run when the plugin is ready\nAdapterJS.WebRTCPlugin.setLogLevel = null;\n\n// Defines webrtc's JS interface according to the plugin's implementation.\n// Define plugin Browsers as WebRTC Interface.\nAdapterJS.WebRTCPlugin.defineWebRTCInterface = null;\n\n// This function detects whether or not a plugin is installed.\n// Checks if Not IE (firefox, for example), else if it's IE,\n// we're running IE and do something. If not it is not supported.\nAdapterJS.WebRTCPlugin.isPluginInstalled = null;\n\n // Lets adapter.js wait until the the document is ready before injecting the plugin\nAdapterJS.WebRTCPlugin.pluginInjectionInterval = null;\n\n// Inject the HTML DOM object element into the page.\nAdapterJS.WebRTCPlugin.injectPlugin = null;\n\n// States of readiness that the plugin goes through when\n// being injected and stated\nAdapterJS.WebRTCPlugin.PLUGIN_STATES = {\n  NONE : 0,           // no plugin use\n  INITIALIZING : 1,   // Detected need for plugin\n  INJECTING : 2,      // Injecting plugin\n  INJECTED: 3,        // Plugin element injected but not usable yet\n  READY: 4            // Plugin ready to be used\n};\n\n// Current state of the plugin. You cannot use the plugin before this is\n// equal to AdapterJS.WebRTCPlugin.PLUGIN_STATES.READY\nAdapterJS.WebRTCPlugin.pluginState = AdapterJS.WebRTCPlugin.PLUGIN_STATES.NONE;\n\n// True is AdapterJS.onwebrtcready was already called, false otherwise\n// Used to make sure AdapterJS.onwebrtcready is only called once\nAdapterJS.onwebrtcreadyDone = false;\n\n// Log levels for the plugin.\n// To be set by calling AdapterJS.WebRTCPlugin.setLogLevel\n/*\nLog outputs are prefixed in some cases.\n  INFO: Information reported by the plugin.\n  ERROR: Errors originating from within the plugin.\n  WEBRTC: Error originating from within the libWebRTC library\n*/\n// From the least verbose to the most verbose\nAdapterJS.WebRTCPlugin.PLUGIN_LOG_LEVELS = {\n  NONE : 'NONE',\n  ERROR : 'ERROR',\n  WARNING : 'WARNING',\n  INFO: 'INFO',\n  VERBOSE: 'VERBOSE',\n  SENSITIVE: 'SENSITIVE'\n};\n\n// Does a waiting check before proceeding to load the plugin.\nAdapterJS.WebRTCPlugin.WaitForPluginReady = null;\n\n// This methid will use an interval to wait for the plugin to be ready.\nAdapterJS.WebRTCPlugin.callWhenPluginReady = null;\n\n// !!!! WARNING: DO NOT OVERRIDE THIS FUNCTION. !!!\n// This function will be called when plugin is ready. It sends necessary\n// details to the plugin.\n// The function will wait for the document to be ready and the set the\n// plugin state to AdapterJS.WebRTCPlugin.PLUGIN_STATES.READY,\n// indicating that it can start being requested.\n// This function is not in the IE/Safari condition brackets so that\n// TemPluginLoaded function might be called on Chrome/Firefox.\n// This function is the only private function that is not encapsulated to\n// allow the plugin method to be called.\n__TemWebRTCReady0 = function () {\n  if (document.readyState === 'complete') {\n    AdapterJS.WebRTCPlugin.pluginState = AdapterJS.WebRTCPlugin.PLUGIN_STATES.READY;\n    AdapterJS.maybeThroughWebRTCReady();\n  } else {\n    var timer = setInterval(function () {\n      if (document.readyState === 'complete') {\n        // TODO: update comments, we wait for the document to be ready\n        clearInterval(timer);\n        AdapterJS.WebRTCPlugin.pluginState = AdapterJS.WebRTCPlugin.PLUGIN_STATES.READY;\n        AdapterJS.maybeThroughWebRTCReady();\n      }\n    }, 100);\n  }\n};\n\nAdapterJS.maybeThroughWebRTCReady = function() {\n  if (!AdapterJS.onwebrtcreadyDone) {\n    AdapterJS.onwebrtcreadyDone = true;\n\n    // If new interface for multiple callbacks used\n    if (AdapterJS._onwebrtcreadies.length) {\n      AdapterJS._onwebrtcreadies.forEach(function (callback) {\n        if (typeof(callback) === 'function') {\n          callback(AdapterJS.WebRTCPlugin.plugin !== null);\n        }\n      });\n    // Else if no callbacks on new interface assuming user used old(deprecated) way to set callback through AdapterJS.onwebrtcready = ...\n    } else if (typeof(AdapterJS.onwebrtcready) === 'function') {\n      AdapterJS.onwebrtcready(AdapterJS.WebRTCPlugin.plugin !== null);\n    }\n  }\n};\n\n// Text namespace\nAdapterJS.TEXT = {\n  PLUGIN: {\n    REQUIRE_INSTALLATION: 'This website requires you to install a WebRTC-enabling plugin ' +\n      'to work on this browser.',\n    NOT_SUPPORTED: 'Your browser does not support WebRTC.',\n    BUTTON: 'Install Now'\n  },\n  REFRESH: {\n    REQUIRE_REFRESH: 'Please refresh page',\n    BUTTON: 'Refresh Page'\n  }\n};\n\n// The result of ice connection states.\n// - starting: Ice connection is starting.\n// - checking: Ice connection is checking.\n// - connected Ice connection is connected.\n// - completed Ice connection is connected.\n// - done Ice connection has been completed.\n// - disconnected Ice connection has been disconnected.\n// - failed Ice connection has failed.\n// - closed Ice connection is closed.\nAdapterJS._iceConnectionStates = {\n  starting : 'starting',\n  checking : 'checking',\n  connected : 'connected',\n  completed : 'connected',\n  done : 'completed',\n  disconnected : 'disconnected',\n  failed : 'failed',\n  closed : 'closed'\n};\n\n//The IceConnection states that has been fired for each peer.\nAdapterJS._iceConnectionFiredStates = [];\n\n\n// Check if WebRTC Interface is defined.\nAdapterJS.isDefined = null;\n\n// This function helps to retrieve the webrtc detected browser information.\n// This sets:\n// - webrtcDetectedBrowser: The browser agent name.\n// - webrtcDetectedVersion: The browser version.\n// - webrtcMinimumVersion: The minimum browser version still supported by AJS.\n// - webrtcDetectedType: The types of webRTC support.\n//   - 'moz': Mozilla implementation of webRTC.\n//   - 'webkit': WebKit implementation of webRTC.\n//   - 'plugin': Using the plugin implementation.\nAdapterJS.parseWebrtcDetectedBrowser = function () {\n  var hasMatch = null;\n\n  // Detect Opera (8.0+)\n  if ((!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0) {\n    hasMatch = navigator.userAgent.match(/OPR\\/(\\d+)/i) || [];\n\n    webrtcDetectedBrowser   = 'opera';\n    webrtcDetectedVersion   = parseInt(hasMatch[1] || '0', 10);\n    webrtcMinimumVersion    = 26;\n    webrtcDetectedType      = 'webkit';\n    webrtcDetectedDCSupport = 'SCTP'; // Opera 20+ uses Chrome 33\n\n  // Detect Bowser on iOS\n  } else if (navigator.userAgent.match(/Bowser\\/[0-9.]*/g)) {\n    hasMatch = navigator.userAgent.match(/Bowser\\/[0-9.]*/g) || [];\n\n    var chromiumVersion = parseInt((navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./i) || [])[2] || '0', 10);\n\n    webrtcDetectedBrowser   = 'bowser';\n    webrtcDetectedVersion   = parseFloat((hasMatch[0] || '0/0').split('/')[1], 10);\n    webrtcMinimumVersion    = 0;\n    webrtcDetectedType      = 'webkit';\n    webrtcDetectedDCSupport = chromiumVersion > 30 ? 'SCTP' : 'RTP';\n\n\n  // Detect Opera on iOS (does not support WebRTC yet)\n  } else if (navigator.userAgent.indexOf('OPiOS') > 0) {\n    hasMatch = navigator.userAgent.match(/OPiOS\\/([0-9]+)\\./);\n\n    // Browser which do not support webrtc yet\n    webrtcDetectedBrowser   = 'opera';\n    webrtcDetectedVersion   = parseInt(hasMatch[1] || '0', 10);\n    webrtcMinimumVersion    = 0;\n    webrtcDetectedType      = null;\n    webrtcDetectedDCSupport = null;\n\n  // Detect Chrome on iOS (does not support WebRTC yet)\n  } else if (navigator.userAgent.indexOf('CriOS') > 0) {\n    hasMatch = navigator.userAgent.match(/CriOS\\/([0-9]+)\\./) || [];\n\n    webrtcDetectedBrowser   = 'chrome';\n    webrtcDetectedVersion   = parseInt(hasMatch[1] || '0', 10);\n    webrtcMinimumVersion    = 0;\n    webrtcDetectedType      = null;\n    webrtcDetectedDCSupport = null;\n\n  // Detect Firefox on iOS (does not support WebRTC yet)\n  } else if (navigator.userAgent.indexOf('FxiOS') > 0) {\n    hasMatch = navigator.userAgent.match(/FxiOS\\/([0-9]+)\\./) || [];\n\n    // Browser which do not support webrtc yet\n    webrtcDetectedBrowser   = 'firefox';\n    webrtcDetectedVersion   = parseInt(hasMatch[1] || '0', 10);\n    webrtcMinimumVersion    = 0;\n    webrtcDetectedType      = null;\n    webrtcDetectedDCSupport = null;\n\n  // Detect IE (6-11)\n  } else if (/*@cc_on!@*/false || !!document.documentMode) {\n    hasMatch = /\\brv[ :]+(\\d+)/g.exec(navigator.userAgent) || [];\n\n    webrtcDetectedBrowser   = 'IE';\n    webrtcDetectedVersion   = parseInt(hasMatch[1], 10);\n    webrtcMinimumVersion    = 9;\n    webrtcDetectedType      = 'plugin';\n    webrtcDetectedDCSupport = 'SCTP';\n\n    if (!webrtcDetectedVersion) {\n      hasMatch = /\\bMSIE[ :]+(\\d+)/g.exec(navigator.userAgent) || [];\n\n      webrtcDetectedVersion = parseInt(hasMatch[1] || '0', 10);\n    }\n\n  // Detect Edge (20+)\n  } else if (!!window.StyleMedia || navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n    hasMatch = navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/) || [];\n\n    // Previous webrtc/adapter uses minimum version as 10547 but checking in the Edge release history,\n    // It's close to 13.10547 and ObjectRTC API is fully supported in that version\n\n    webrtcDetectedBrowser   = 'edge';\n    webrtcDetectedVersion   = parseFloat((hasMatch[0] || '0/0').split('/')[1], 10);\n    webrtcMinimumVersion    = 13.10547;\n    webrtcDetectedType      = 'ms';\n    webrtcDetectedDCSupport = null;\n\n  // Detect Firefox (1.0+)\n  // Placed before Safari check to ensure Firefox on Android is detected\n  } else if (typeof InstallTrigger !== 'undefined' || navigator.userAgent.indexOf('irefox') > 0) {\n    hasMatch = navigator.userAgent.match(/Firefox\\/([0-9]+)\\./) || [];\n\n    webrtcDetectedBrowser   = 'firefox';\n    webrtcDetectedVersion   = parseInt(hasMatch[1] || '0', 10);\n    webrtcMinimumVersion    = 31;\n    webrtcDetectedType      = 'moz';\n    webrtcDetectedDCSupport = 'SCTP';\n\n  // Detect Chrome (1+ and mobile)\n  // Placed before Safari check to ensure Chrome on Android is detected\n  } else if ((!!window.chrome && !!window.chrome.webstore) || navigator.userAgent.indexOf('Chrom') > 0) {\n    hasMatch = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./i) || [];\n\n    webrtcDetectedBrowser   = 'chrome';\n    webrtcDetectedVersion   = parseInt(hasMatch[2] || '0', 10);\n    webrtcMinimumVersion    = 38;\n    webrtcDetectedType      = 'webkit';\n    webrtcDetectedDCSupport = webrtcDetectedVersion > 30 ? 'SCTP' : 'RTP'; // Chrome 31+ supports SCTP without flags\n\n  // Detect Safari\n  } else if (/^((?!chrome|android).)*safari/i.test(navigator.userAgent)) {\n    hasMatch = navigator.userAgent.match(/version\\/(\\d+)/i) || [];\n\n    var isMobile = navigator.userAgent.match(/(iPhone|iPad)/gi) || [];\n\n    webrtcDetectedBrowser   = 'safari';\n    webrtcDetectedVersion   = parseInt(hasMatch[1] || '0', 10);\n    webrtcMinimumVersion    = 7;\n    webrtcDetectedType      = isMobile.length === 0 ? 'plugin' : null;\n    webrtcDetectedDCSupport = isMobile.length === 0 ? 'SCTP' : null;\n\n  // Detect WebView on iOS (does not support WebRTC yet)\n  } else if (/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)) {\n    hasMatch = navigator.userAgent.match(/AppleWebKit\\/([0-9]+)\\./) || [];\n\n    webrtcDetectedBrowser   = 'safari';\n    webrtcDetectedVersion   = parseInt(hasMatch[1] || '0', 10);\n    webrtcMinimumVersion    = 0;\n    webrtcDetectedType      = null;\n    webrtcDetectedDCSupport = null;\n\n  }\n\n  window.webrtcDetectedBrowser   = webrtcDetectedBrowser;\n  window.webrtcDetectedVersion   = webrtcDetectedVersion;\n  window.webrtcMinimumVersion    = webrtcMinimumVersion;\n  window.webrtcDetectedType      = webrtcDetectedType; // Scope it to window for better consistency\n  window.webrtcDetectedDCSupport = webrtcDetectedDCSupport; // Scope it to window for better consistency\n};\n\nAdapterJS.addEvent = function(elem, evnt, func) {\n  if (elem.addEventListener) { // W3C DOM\n    elem.addEventListener(evnt, func, false);\n  } else if (elem.attachEvent) {// OLD IE DOM\n    elem.attachEvent('on'+evnt, func);\n  } else { // No much to do\n    elem[evnt] = func;\n  }\n};\n\nAdapterJS.renderNotificationBar = function (text, buttonText, buttonLink, openNewTab, displayRefreshBar) {\n  // only inject once the page is ready\n  if (document.readyState !== 'complete') {\n    return;\n  }\n\n  var w = window;\n  var i = document.createElement('iframe');\n  i.name = 'adapterjs-alert';\n  i.style.position = 'fixed';\n  i.style.top = '-41px';\n  i.style.left = 0;\n  i.style.right = 0;\n  i.style.width = '100%';\n  i.style.height = '40px';\n  i.style.backgroundColor = '#ffffe1';\n  i.style.border = 'none';\n  i.style.borderBottom = '1px solid #888888';\n  i.style.zIndex = '9999999';\n  if(typeof i.style.webkitTransition === 'string') {\n    i.style.webkitTransition = 'all .5s ease-out';\n  } else if(typeof i.style.transition === 'string') {\n    i.style.transition = 'all .5s ease-out';\n  }\n  document.body.appendChild(i);\n  var c = (i.contentWindow) ? i.contentWindow :\n    (i.contentDocument.document) ? i.contentDocument.document : i.contentDocument;\n  c.document.open();\n  c.document.write('<span style=\"display: inline-block; font-family: Helvetica, Arial,' +\n    'sans-serif; font-size: .9rem; padding: 4px; vertical-align: ' +\n    'middle; cursor: default;\">' + text + '</span>');\n  if(buttonText && buttonLink) {\n    c.document.write('<button id=\"okay\">' + buttonText + '</button><button id=\"cancel\">Cancel</button>');\n    c.document.close();\n\n    // On click on okay\n    AdapterJS.addEvent(c.document.getElementById('okay'), 'click', function(e) {\n      if (!!displayRefreshBar) {\n        AdapterJS.renderNotificationBar(AdapterJS.TEXT.EXTENSION ?\n          AdapterJS.TEXT.EXTENSION.REQUIRE_REFRESH : AdapterJS.TEXT.REFRESH.REQUIRE_REFRESH,\n          AdapterJS.TEXT.REFRESH.BUTTON, 'javascript:location.reload()'); // jshint ignore:line\n      }\n      window.open(buttonLink, !!openNewTab ? '_blank' : '_top');\n\n      e.preventDefault();\n      try {\n        e.cancelBubble = true;\n      } catch(error) { }\n\n      var pluginInstallInterval = setInterval(function(){\n        if(! isIE) {\n          navigator.plugins.refresh(false);\n        }\n        AdapterJS.WebRTCPlugin.isPluginInstalled(\n          AdapterJS.WebRTCPlugin.pluginInfo.prefix,\n          AdapterJS.WebRTCPlugin.pluginInfo.plugName,\n          AdapterJS.WebRTCPlugin.pluginInfo.type,\n          function() { // plugin now installed\n            clearInterval(pluginInstallInterval);\n            AdapterJS.WebRTCPlugin.defineWebRTCInterface();\n          },\n          function() {\n            // still no plugin detected, nothing to do\n          });\n      } , 500);\n    });\n\n    // On click on Cancel\n    AdapterJS.addEvent(c.document.getElementById('cancel'), 'click', function(e) {\n      w.document.body.removeChild(i);\n    });\n  } else {\n    c.document.close();\n  }\n  setTimeout(function() {\n    if(typeof i.style.webkitTransform === 'string') {\n      i.style.webkitTransform = 'translateY(40px)';\n    } else if(typeof i.style.transform === 'string') {\n      i.style.transform = 'translateY(40px)';\n    } else {\n      i.style.top = '0px';\n    }\n  }, 300);\n};\n\n// -----------------------------------------------------------\n// Detected webrtc implementation. Types are:\n// - 'moz': Mozilla implementation of webRTC.\n// - 'webkit': WebKit implementation of webRTC.\n// - 'plugin': Using the plugin implementation.\nwebrtcDetectedType = null;\n\n// Set the settings for creating DataChannels, MediaStream for\n// Cross-browser compability.\n// - This is only for SCTP based support browsers.\n// the 'urls' attribute.\ncheckMediaDataChannelSettings =\n  function (peerBrowserAgent, peerBrowserVersion, callback, constraints) {\n  if (typeof callback !== 'function') {\n    return;\n  }\n  var beOfferer = true;\n  var isLocalFirefox = webrtcDetectedBrowser === 'firefox';\n  // Nightly version does not require MozDontOfferDataChannel for interop\n  var isLocalFirefoxInterop = webrtcDetectedType === 'moz' && webrtcDetectedVersion > 30;\n  var isPeerFirefox = peerBrowserAgent === 'firefox';\n  var isPeerFirefoxInterop = peerBrowserAgent === 'firefox' &&\n    ((peerBrowserVersion) ? (peerBrowserVersion > 30) : false);\n\n  // Resends an updated version of constraints for MozDataChannel to work\n  // If other userAgent is firefox and user is firefox, remove MozDataChannel\n  if ((isLocalFirefox && isPeerFirefox) || (isLocalFirefoxInterop)) {\n    try {\n      delete constraints.mandatory.MozDontOfferDataChannel;\n    } catch (error) {\n      console.error('Failed deleting MozDontOfferDataChannel');\n      console.error(error);\n    }\n  } else if ((isLocalFirefox && !isPeerFirefox)) {\n    constraints.mandatory.MozDontOfferDataChannel = true;\n  }\n  if (!isLocalFirefox) {\n    // temporary measure to remove Moz* constraints in non Firefox browsers\n    for (var prop in constraints.mandatory) {\n      if (constraints.mandatory.hasOwnProperty(prop)) {\n        if (prop.indexOf('Moz') !== -1) {\n          delete constraints.mandatory[prop];\n        }\n      }\n    }\n  }\n  // Firefox (not interopable) cannot offer DataChannel as it will cause problems to the\n  // interopability of the media stream\n  if (isLocalFirefox && !isPeerFirefox && !isLocalFirefoxInterop) {\n    beOfferer = false;\n  }\n  callback(beOfferer, constraints);\n};\n\n// Handles the differences for all browsers ice connection state output.\n// - Tested outcomes are:\n//   - Chrome (offerer)  : 'checking' > 'completed' > 'completed'\n//   - Chrome (answerer) : 'checking' > 'connected'\n//   - Firefox (offerer) : 'checking' > 'connected'\n//   - Firefox (answerer): 'checking' > 'connected'\ncheckIceConnectionState = function (peerId, iceConnectionState, callback) {\n  if (typeof callback !== 'function') {\n    console.warn('No callback specified in checkIceConnectionState. Aborted.');\n    return;\n  }\n  peerId = (peerId) ? peerId : 'peer';\n\n  if (!AdapterJS._iceConnectionFiredStates[peerId] ||\n    iceConnectionState === AdapterJS._iceConnectionStates.disconnected ||\n    iceConnectionState === AdapterJS._iceConnectionStates.failed ||\n    iceConnectionState === AdapterJS._iceConnectionStates.closed) {\n    AdapterJS._iceConnectionFiredStates[peerId] = [];\n  }\n  iceConnectionState = AdapterJS._iceConnectionStates[iceConnectionState];\n  if (AdapterJS._iceConnectionFiredStates[peerId].indexOf(iceConnectionState) < 0) {\n    AdapterJS._iceConnectionFiredStates[peerId].push(iceConnectionState);\n    if (iceConnectionState === AdapterJS._iceConnectionStates.connected) {\n      setTimeout(function () {\n        AdapterJS._iceConnectionFiredStates[peerId]\n          .push(AdapterJS._iceConnectionStates.done);\n        callback(AdapterJS._iceConnectionStates.done);\n      }, 1000);\n    }\n    callback(iceConnectionState);\n  }\n  return;\n};\n\n// Firefox:\n// - Creates iceServer from the url for Firefox.\n// - Create iceServer with stun url.\n// - Create iceServer with turn url.\n//   - Ignore the transport parameter from TURN url for FF version <=27.\n//   - Return null for createIceServer if transport=tcp.\n// - FF 27 and above supports transport parameters in TURN url,\n// - So passing in the full url to create iceServer.\n// Chrome:\n// - Creates iceServer from the url for Chrome M33 and earlier.\n//   - Create iceServer with stun url.\n//   - Chrome M28 & above uses below TURN format.\n// Plugin:\n// - Creates Ice Server for Plugin Browsers\n//   - If Stun - Create iceServer with stun url.\n//   - Else - Create iceServer with turn url\n//   - This is a WebRTC Function\ncreateIceServer = null;\n\n// Firefox:\n// - Creates IceServers for Firefox\n//   - Use .url for FireFox.\n//   - Multiple Urls support\n// Chrome:\n// - Creates iceServers from the urls for Chrome M34 and above.\n//   - .urls is supported since Chrome M34.\n//   - Multiple Urls support\n// Plugin:\n// - Creates Ice Servers for Plugin Browsers\n//   - Multiple Urls support\n//   - This is a WebRTC Function\ncreateIceServers = null;\n//------------------------------------------------------------\n\n//The RTCPeerConnection object.\nRTCPeerConnection = null;\n\n// Creates RTCSessionDescription object for Plugin Browsers\nRTCSessionDescription = (typeof RTCSessionDescription === 'function') ?\n  RTCSessionDescription : null;\n\n// Creates RTCIceCandidate object for Plugin Browsers\nRTCIceCandidate = (typeof RTCIceCandidate === 'function') ?\n  RTCIceCandidate : null;\n\n// Get UserMedia (only difference is the prefix).\n// Code from Adam Barth.\ngetUserMedia = null;\n\n// Attach a media stream to an element.\nattachMediaStream = null;\n\n// Re-attach a media stream to an element.\nreattachMediaStream = null;\n\n\n// Detected browser agent name. Types are:\n// - 'firefox': Firefox browser.\n// - 'chrome': Chrome browser.\n// - 'opera': Opera browser.\n// - 'safari': Safari browser.\n// - 'IE' - Internet Explorer browser.\nwebrtcDetectedBrowser = null;\n\n// Detected browser version.\nwebrtcDetectedVersion = null;\n\n// The minimum browser version still supported by AJS.\nwebrtcMinimumVersion  = null;\n\n// Check for browser types and react accordingly\nif ( (navigator.mozGetUserMedia ||\n      navigator.webkitGetUserMedia ||\n      (navigator.mediaDevices &&\n       navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)))\n    && !((navigator.userAgent.match(/android/ig) || []).length === 0 &&\n      (navigator.userAgent.match(/chrome/ig) || []).length === 0 && navigator.userAgent.indexOf('Safari/') > 0)) {\n\n  ///////////////////////////////////////////////////////////////////\n  // INJECTION OF GOOGLE'S ADAPTER.JS CONTENT\n\n/* jshint ignore:start */\n  (function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.adapter = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n   /* eslint-env node */\n  'use strict';\n\n  // SDP helpers.\n  var SDPUtils = {};\n\n  // Generate an alphanumeric identifier for cname or mids.\n  // TODO: use UUIDs instead? https://gist.github.com/jed/982883\n  SDPUtils.generateIdentifier = function() {\n    return Math.random().toString(36).substr(2, 10);\n  };\n\n  // The RTCP CNAME used by all peerconnections from the same JS.\n  SDPUtils.localCName = SDPUtils.generateIdentifier();\n\n  // Splits SDP into lines, dealing with both CRLF and LF.\n  SDPUtils.splitLines = function(blob) {\n    return blob.trim().split('\\n').map(function(line) {\n      return line.trim();\n    });\n  };\n  // Splits SDP into sessionpart and mediasections. Ensures CRLF.\n  SDPUtils.splitSections = function(blob) {\n    var parts = blob.split('\\nm=');\n    return parts.map(function(part, index) {\n      return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n    });\n  };\n\n  // Returns lines that start with a certain prefix.\n  SDPUtils.matchPrefix = function(blob, prefix) {\n    return SDPUtils.splitLines(blob).filter(function(line) {\n      return line.indexOf(prefix) === 0;\n    });\n  };\n\n  // Parses an ICE candidate line. Sample input:\n  // candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n  // rport 55996\"\n  SDPUtils.parseCandidate = function(line) {\n    var parts;\n    // Parse both variants.\n    if (line.indexOf('a=candidate:') === 0) {\n      parts = line.substring(12).split(' ');\n    } else {\n      parts = line.substring(10).split(' ');\n    }\n\n    var candidate = {\n      foundation: parts[0],\n      component: parts[1],\n      protocol: parts[2].toLowerCase(),\n      priority: parseInt(parts[3], 10),\n      ip: parts[4],\n      port: parseInt(parts[5], 10),\n      // skip parts[6] == 'typ'\n      type: parts[7]\n    };\n\n    for (var i = 8; i < parts.length; i += 2) {\n      switch (parts[i]) {\n        case 'raddr':\n          candidate.relatedAddress = parts[i + 1];\n          break;\n        case 'rport':\n          candidate.relatedPort = parseInt(parts[i + 1], 10);\n          break;\n        case 'tcptype':\n          candidate.tcpType = parts[i + 1];\n          break;\n        default: // Unknown extensions are silently ignored.\n          break;\n      }\n    }\n    return candidate;\n  };\n\n  // Translates a candidate object into SDP candidate attribute.\n  SDPUtils.writeCandidate = function(candidate) {\n    var sdp = [];\n    sdp.push(candidate.foundation);\n    sdp.push(candidate.component);\n    sdp.push(candidate.protocol.toUpperCase());\n    sdp.push(candidate.priority);\n    sdp.push(candidate.ip);\n    sdp.push(candidate.port);\n\n    var type = candidate.type;\n    sdp.push('typ');\n    sdp.push(type);\n    if (type !== 'host' && candidate.relatedAddress &&\n        candidate.relatedPort) {\n      sdp.push('raddr');\n      sdp.push(candidate.relatedAddress); // was: relAddr\n      sdp.push('rport');\n      sdp.push(candidate.relatedPort); // was: relPort\n    }\n    if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n      sdp.push('tcptype');\n      sdp.push(candidate.tcpType);\n    }\n    return 'candidate:' + sdp.join(' ');\n  };\n\n  // Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n  // a=rtpmap:111 opus/48000/2\n  SDPUtils.parseRtpMap = function(line) {\n    var parts = line.substr(9).split(' ');\n    var parsed = {\n      payloadType: parseInt(parts.shift(), 10) // was: id\n    };\n\n    parts = parts[0].split('/');\n\n    parsed.name = parts[0];\n    parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n    // was: channels\n    parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n    return parsed;\n  };\n\n  // Generate an a=rtpmap line from RTCRtpCodecCapability or\n  // RTCRtpCodecParameters.\n  SDPUtils.writeRtpMap = function(codec) {\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n      pt = codec.preferredPayloadType;\n    }\n    return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n        (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n  };\n\n  // Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n  // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n  SDPUtils.parseExtmap = function(line) {\n    var parts = line.substr(9).split(' ');\n    return {\n      id: parseInt(parts[0], 10),\n      uri: parts[1]\n    };\n  };\n\n  // Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n  // RTCRtpHeaderExtension.\n  SDPUtils.writeExtmap = function(headerExtension) {\n    return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n         ' ' + headerExtension.uri + '\\r\\n';\n  };\n\n  // Parses an ftmp line, returns dictionary. Sample input:\n  // a=fmtp:96 vbr=on;cng=on\n  // Also deals with vbr=on; cng=on\n  SDPUtils.parseFmtp = function(line) {\n    var parsed = {};\n    var kv;\n    var parts = line.substr(line.indexOf(' ') + 1).split(';');\n    for (var j = 0; j < parts.length; j++) {\n      kv = parts[j].trim().split('=');\n      parsed[kv[0].trim()] = kv[1];\n    }\n    return parsed;\n  };\n\n  // Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\n  SDPUtils.writeFmtp = function(codec) {\n    var line = '';\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n      pt = codec.preferredPayloadType;\n    }\n    if (codec.parameters && Object.keys(codec.parameters).length) {\n      var params = [];\n      Object.keys(codec.parameters).forEach(function(param) {\n        params.push(param + '=' + codec.parameters[param]);\n      });\n      line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n    }\n    return line;\n  };\n\n  // Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n  // a=rtcp-fb:98 nack rpsi\n  SDPUtils.parseRtcpFb = function(line) {\n    var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n    return {\n      type: parts.shift(),\n      parameter: parts.join(' ')\n    };\n  };\n  // Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\n  SDPUtils.writeRtcpFb = function(codec) {\n    var lines = '';\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n      pt = codec.preferredPayloadType;\n    }\n    if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n      // FIXME: special handling for trr-int?\n      codec.rtcpFeedback.forEach(function(fb) {\n        lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n        (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n            '\\r\\n';\n      });\n    }\n    return lines;\n  };\n\n  // Parses an RFC 5576 ssrc media attribute. Sample input:\n  // a=ssrc:3735928559 cname:something\n  SDPUtils.parseSsrcMedia = function(line) {\n    var sp = line.indexOf(' ');\n    var parts = {\n      ssrc: parseInt(line.substr(7, sp - 7), 10)\n    };\n    var colon = line.indexOf(':', sp);\n    if (colon > -1) {\n      parts.attribute = line.substr(sp + 1, colon - sp - 1);\n      parts.value = line.substr(colon + 1);\n    } else {\n      parts.attribute = line.substr(sp + 1);\n    }\n    return parts;\n  };\n\n  // Extracts DTLS parameters from SDP media section or sessionpart.\n  // FIXME: for consistency with other functions this should only\n  //   get the fingerprint line as input. See also getIceParameters.\n  SDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n    var lines = SDPUtils.splitLines(mediaSection);\n    // Search in session part, too.\n    lines = lines.concat(SDPUtils.splitLines(sessionpart));\n    var fpLine = lines.filter(function(line) {\n      return line.indexOf('a=fingerprint:') === 0;\n    })[0].substr(14);\n    // Note: a=setup line is ignored since we use the 'auto' role.\n    var dtlsParameters = {\n      role: 'auto',\n      fingerprints: [{\n        algorithm: fpLine.split(' ')[0],\n        value: fpLine.split(' ')[1]\n      }]\n    };\n    return dtlsParameters;\n  };\n\n  // Serializes DTLS parameters to SDP.\n  SDPUtils.writeDtlsParameters = function(params, setupType) {\n    var sdp = 'a=setup:' + setupType + '\\r\\n';\n    params.fingerprints.forEach(function(fp) {\n      sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n    });\n    return sdp;\n  };\n  // Parses ICE information from SDP media section or sessionpart.\n  // FIXME: for consistency with other functions this should only\n  //   get the ice-ufrag and ice-pwd lines as input.\n  SDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n    var lines = SDPUtils.splitLines(mediaSection);\n    // Search in session part, too.\n    lines = lines.concat(SDPUtils.splitLines(sessionpart));\n    var iceParameters = {\n      usernameFragment: lines.filter(function(line) {\n        return line.indexOf('a=ice-ufrag:') === 0;\n      })[0].substr(12),\n      password: lines.filter(function(line) {\n        return line.indexOf('a=ice-pwd:') === 0;\n      })[0].substr(10)\n    };\n    return iceParameters;\n  };\n\n  // Serializes ICE parameters to SDP.\n  SDPUtils.writeIceParameters = function(params) {\n    return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n        'a=ice-pwd:' + params.password + '\\r\\n';\n  };\n\n  // Parses the SDP media section and returns RTCRtpParameters.\n  SDPUtils.parseRtpParameters = function(mediaSection) {\n    var description = {\n      codecs: [],\n      headerExtensions: [],\n      fecMechanisms: [],\n      rtcp: []\n    };\n    var lines = SDPUtils.splitLines(mediaSection);\n    var mline = lines[0].split(' ');\n    for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n      var pt = mline[i];\n      var rtpmapline = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n      if (rtpmapline) {\n        var codec = SDPUtils.parseRtpMap(rtpmapline);\n        var fmtps = SDPUtils.matchPrefix(\n            mediaSection, 'a=fmtp:' + pt + ' ');\n        // Only the first a=fmtp:<pt> is considered.\n        codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n        codec.rtcpFeedback = SDPUtils.matchPrefix(\n            mediaSection, 'a=rtcp-fb:' + pt + ' ')\n          .map(SDPUtils.parseRtcpFb);\n        description.codecs.push(codec);\n        // parse FEC mechanisms from rtpmap lines.\n        switch (codec.name.toUpperCase()) {\n          case 'RED':\n          case 'ULPFEC':\n            description.fecMechanisms.push(codec.name.toUpperCase());\n            break;\n          default: // only RED and ULPFEC are recognized as FEC mechanisms.\n            break;\n        }\n      }\n    }\n    SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n      description.headerExtensions.push(SDPUtils.parseExtmap(line));\n    });\n    // FIXME: parse rtcp.\n    return description;\n  };\n\n  // Generates parts of the SDP media section describing the capabilities /\n  // parameters.\n  SDPUtils.writeRtpDescription = function(kind, caps) {\n    var sdp = '';\n\n    // Build the mline.\n    sdp += 'm=' + kind + ' ';\n    sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n    sdp += ' UDP/TLS/RTP/SAVPF ';\n    sdp += caps.codecs.map(function(codec) {\n      if (codec.preferredPayloadType !== undefined) {\n        return codec.preferredPayloadType;\n      }\n      return codec.payloadType;\n    }).join(' ') + '\\r\\n';\n\n    sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n    sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n    // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n    caps.codecs.forEach(function(codec) {\n      sdp += SDPUtils.writeRtpMap(codec);\n      sdp += SDPUtils.writeFmtp(codec);\n      sdp += SDPUtils.writeRtcpFb(codec);\n    });\n    // FIXME: add headerExtensions, fecMechanism and rtcp.\n    sdp += 'a=rtcp-mux\\r\\n';\n    return sdp;\n  };\n\n  // Parses the SDP media section and returns an array of\n  // RTCRtpEncodingParameters.\n  SDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n    var encodingParameters = [];\n    var description = SDPUtils.parseRtpParameters(mediaSection);\n    var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n    var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n    // filter a=ssrc:... cname:, ignore PlanB-msid\n    var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(parts) {\n      return parts.attribute === 'cname';\n    });\n    var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n    var secondarySsrc;\n\n    var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(function(line) {\n      var parts = line.split(' ');\n      parts.shift();\n      return parts.map(function(part) {\n        return parseInt(part, 10);\n      });\n    });\n    if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n      secondarySsrc = flows[0][1];\n    }\n\n    description.codecs.forEach(function(codec) {\n      if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n        var encParam = {\n          ssrc: primarySsrc,\n          codecPayloadType: parseInt(codec.parameters.apt, 10),\n          rtx: {\n            payloadType: codec.payloadType,\n            ssrc: secondarySsrc\n          }\n        };\n        encodingParameters.push(encParam);\n        if (hasRed) {\n          encParam = JSON.parse(JSON.stringify(encParam));\n          encParam.fec = {\n            ssrc: secondarySsrc,\n            mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n          };\n          encodingParameters.push(encParam);\n        }\n      }\n    });\n    if (encodingParameters.length === 0 && primarySsrc) {\n      encodingParameters.push({\n        ssrc: primarySsrc\n      });\n    }\n\n    // we support both b=AS and b=TIAS but interpret AS as TIAS.\n    var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n    if (bandwidth.length) {\n      if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n        bandwidth = parseInt(bandwidth[0].substr(7), 10);\n      } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n        bandwidth = parseInt(bandwidth[0].substr(5), 10);\n      }\n      encodingParameters.forEach(function(params) {\n        params.maxBitrate = bandwidth;\n      });\n    }\n    return encodingParameters;\n  };\n\n  SDPUtils.writeSessionBoilerplate = function() {\n    // FIXME: sess-id should be an NTP timestamp.\n    return 'v=0\\r\\n' +\n        'o=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\\r\\n' +\n        's=-\\r\\n' +\n        't=0 0\\r\\n';\n  };\n\n  SDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n    var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n    // Map ICE parameters (ufrag, pwd) to SDP.\n    sdp += SDPUtils.writeIceParameters(\n        transceiver.iceGatherer.getLocalParameters());\n\n    // Map DTLS parameters to SDP.\n    sdp += SDPUtils.writeDtlsParameters(\n        transceiver.dtlsTransport.getLocalParameters(),\n        type === 'offer' ? 'actpass' : 'active');\n\n    sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n    if (transceiver.rtpSender && transceiver.rtpReceiver) {\n      sdp += 'a=sendrecv\\r\\n';\n    } else if (transceiver.rtpSender) {\n      sdp += 'a=sendonly\\r\\n';\n    } else if (transceiver.rtpReceiver) {\n      sdp += 'a=recvonly\\r\\n';\n    } else {\n      sdp += 'a=inactive\\r\\n';\n    }\n\n    // FIXME: for RTX there might be multiple SSRCs. Not implemented in Edge yet.\n    if (transceiver.rtpSender) {\n      var msid = 'msid:' + stream.id + ' ' +\n          transceiver.rtpSender.track.id + '\\r\\n';\n      sdp += 'a=' + msid;\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n          ' ' + msid;\n    }\n    // FIXME: this should be written by writeRtpDescription.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n    return sdp;\n  };\n\n  // Gets the direction from the mediaSection or the sessionpart.\n  SDPUtils.getDirection = function(mediaSection, sessionpart) {\n    // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n    var lines = SDPUtils.splitLines(mediaSection);\n    for (var i = 0; i < lines.length; i++) {\n      switch (lines[i]) {\n        case 'a=sendrecv':\n        case 'a=sendonly':\n        case 'a=recvonly':\n        case 'a=inactive':\n          return lines[i].substr(2);\n        default:\n          // FIXME: What should happen here?\n      }\n    }\n    if (sessionpart) {\n      return SDPUtils.getDirection(sessionpart);\n    }\n    return 'sendrecv';\n  };\n\n  // Expose public methods.\n  module.exports = SDPUtils;\n\n  },{}],2:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n   /* eslint-env node */\n\n  'use strict';\n\n  // Shimming starts here.\n  (function() {\n    // Utils.\n    var logging = require('./utils').log;\n    var browserDetails = require('./utils').browserDetails;\n    // Export to the adapter global object visible in the browser.\n    module.exports.browserDetails = browserDetails;\n    module.exports.extractVersion = require('./utils').extractVersion;\n    module.exports.disableLog = require('./utils').disableLog;\n\n    // Uncomment the line below if you want logging to occur, including logging\n    // for the switch statement below. Can also be turned on in the browser via\n    // adapter.disableLog(false), but then logging from the switch statement below\n    // will not appear.\n    // require('./utils').disableLog(false);\n\n    // Browser shims.\n    var chromeShim = require('./chrome/chrome_shim') || null;\n    var edgeShim = require('./edge/edge_shim') || null;\n    var firefoxShim = require('./firefox/firefox_shim') || null;\n    var safariShim = require('./safari/safari_shim') || null;\n\n    // Shim browser if found.\n    switch (browserDetails.browser) {\n      case 'opera': // fallthrough as it uses chrome shims\n      case 'chrome':\n        if (!chromeShim || !chromeShim.shimPeerConnection) {\n          logging('Chrome shim is not included in this adapter release.');\n          return;\n        }\n        logging('adapter.js shimming chrome.');\n        // Export to the adapter global object visible in the browser.\n        module.exports.browserShim = chromeShim;\n\n        chromeShim.shimGetUserMedia();\n        chromeShim.shimMediaStream();\n        chromeShim.shimSourceObject();\n        chromeShim.shimPeerConnection();\n        chromeShim.shimOnTrack();\n        break;\n      case 'firefox':\n        if (!firefoxShim || !firefoxShim.shimPeerConnection) {\n          logging('Firefox shim is not included in this adapter release.');\n          return;\n        }\n        logging('adapter.js shimming firefox.');\n        // Export to the adapter global object visible in the browser.\n        module.exports.browserShim = firefoxShim;\n\n        firefoxShim.shimGetUserMedia();\n        firefoxShim.shimSourceObject();\n        firefoxShim.shimPeerConnection();\n        firefoxShim.shimOnTrack();\n        break;\n      case 'edge':\n        if (!edgeShim || !edgeShim.shimPeerConnection) {\n          logging('MS edge shim is not included in this adapter release.');\n          return;\n        }\n        logging('adapter.js shimming edge.');\n        // Export to the adapter global object visible in the browser.\n        module.exports.browserShim = edgeShim;\n\n        edgeShim.shimGetUserMedia();\n        edgeShim.shimPeerConnection();\n        break;\n      case 'safari':\n        if (!safariShim) {\n          logging('Safari shim is not included in this adapter release.');\n          return;\n        }\n        logging('adapter.js shimming safari.');\n        // Export to the adapter global object visible in the browser.\n        module.exports.browserShim = safariShim;\n\n        safariShim.shimGetUserMedia();\n        break;\n      default:\n        logging('Unsupported browser!');\n    }\n  })();\n\n  },{\"./chrome/chrome_shim\":3,\"./edge/edge_shim\":5,\"./firefox/firefox_shim\":7,\"./safari/safari_shim\":9,\"./utils\":10}],3:[function(require,module,exports){\n\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n   /* eslint-env node */\n  'use strict';\n  var logging = require('../utils.js').log;\n  var browserDetails = require('../utils.js').browserDetails;\n\n  var chromeShim = {\n    shimMediaStream: function() {\n      window.MediaStream = window.MediaStream || window.webkitMediaStream;\n    },\n\n    shimOnTrack: function() {\n      if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n          window.RTCPeerConnection.prototype)) {\n        Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n          get: function() {\n            return this._ontrack;\n          },\n          set: function(f) {\n            var self = this;\n            if (this._ontrack) {\n              this.removeEventListener('track', this._ontrack);\n              this.removeEventListener('addstream', this._ontrackpoly);\n            }\n            this.addEventListener('track', this._ontrack = f);\n            this.addEventListener('addstream', this._ontrackpoly = function(e) {\n              // onaddstream does not fire when a track is added to an existing\n              // stream. But stream.onaddtrack is implemented so we use that.\n              e.stream.addEventListener('addtrack', function(te) {\n                var event = new Event('track');\n                event.track = te.track;\n                event.receiver = {track: te.track};\n                event.streams = [e.stream];\n                self.dispatchEvent(event);\n              });\n              e.stream.getTracks().forEach(function(track) {\n                var event = new Event('track');\n                event.track = track;\n                event.receiver = {track: track};\n                event.streams = [e.stream];\n                this.dispatchEvent(event);\n              }.bind(this));\n            }.bind(this));\n          }\n        });\n      }\n    },\n\n    shimSourceObject: function() {\n      if (typeof window === 'object') {\n        if (window.HTMLMediaElement &&\n          !('srcObject' in window.HTMLMediaElement.prototype)) {\n          // Shim the srcObject property, once, when HTMLMediaElement is found.\n          Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n            get: function() {\n              return this._srcObject;\n            },\n            set: function(stream) {\n              var self = this;\n              // Use _srcObject as a private property for this shim\n              this._srcObject = stream;\n              if (this.src) {\n                URL.revokeObjectURL(this.src);\n              }\n\n              if (!stream) {\n                this.src = '';\n                return;\n              }\n              this.src = URL.createObjectURL(stream);\n              // We need to recreate the blob url when a track is added or\n              // removed. Doing it manually since we want to avoid a recursion.\n              stream.addEventListener('addtrack', function() {\n                if (self.src) {\n                  URL.revokeObjectURL(self.src);\n                }\n                self.src = URL.createObjectURL(stream);\n              });\n              stream.addEventListener('removetrack', function() {\n                if (self.src) {\n                  URL.revokeObjectURL(self.src);\n                }\n                self.src = URL.createObjectURL(stream);\n              });\n            }\n          });\n        }\n      }\n    },\n\n    shimPeerConnection: function() {\n      // The RTCPeerConnection object.\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        // Translate iceTransportPolicy to iceTransports,\n        // see https://code.google.com/p/webrtc/issues/detail?id=4869\n        logging('PeerConnection');\n        if (pcConfig && pcConfig.iceTransportPolicy) {\n          pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n        }\n\n        var pc = new webkitRTCPeerConnection(pcConfig, pcConstraints);\n        var origGetStats = pc.getStats.bind(pc);\n        pc.getStats = function(selector, successCallback, errorCallback) {\n          var self = this;\n          var args = arguments;\n\n          // If selector is a function then we are in the old style stats so just\n          // pass back the original getStats format to avoid breaking old users.\n          if (arguments.length > 0 && typeof selector === 'function') {\n            return origGetStats(selector, successCallback);\n          }\n\n          var fixChromeStats_ = function(response) {\n            var standardReport = {};\n            var reports = response.result();\n            reports.forEach(function(report) {\n              var standardStats = {\n                id: report.id,\n                timestamp: report.timestamp,\n                type: report.type\n              };\n              report.names().forEach(function(name) {\n                standardStats[name] = report.stat(name);\n              });\n              standardReport[standardStats.id] = standardStats;\n            });\n\n            return standardReport;\n          };\n\n          // shim getStats with maplike support\n          var makeMapStats = function(stats, legacyStats) {\n            var map = new Map(Object.keys(stats).map(function(key) {\n              return[key, stats[key]];\n            }));\n            legacyStats = legacyStats || stats;\n            Object.keys(legacyStats).forEach(function(key) {\n              map[key] = legacyStats[key];\n            });\n            return map;\n          };\n\n          if (arguments.length >= 2) {\n            var successCallbackWrapper_ = function(response) {\n              args[1](makeMapStats(fixChromeStats_(response)));\n            };\n\n            return origGetStats.apply(this, [successCallbackWrapper_,\n                arguments[0]]);\n          }\n\n          // promise-support\n          return new Promise(function(resolve, reject) {\n            if (args.length === 1 && typeof selector === 'object') {\n              origGetStats.apply(self, [\n                function(response) {\n                  resolve(makeMapStats(fixChromeStats_(response)));\n                }, reject]);\n            } else {\n              // Preserve legacy chrome stats only on legacy access of stats obj\n              origGetStats.apply(self, [\n                function(response) {\n                  resolve(makeMapStats(fixChromeStats_(response),\n                      response.result()));\n                }, reject]);\n            }\n          }).then(successCallback, errorCallback);\n        };\n\n        return pc;\n      };\n      window.RTCPeerConnection.prototype = webkitRTCPeerConnection.prototype;\n\n      // wrap static methods. Currently just generateCertificate.\n      if (webkitRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return webkitRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n\n      ['createOffer', 'createAnswer'].forEach(function(method) {\n        var nativeMethod = webkitRTCPeerConnection.prototype[method];\n        webkitRTCPeerConnection.prototype[method] = function() {\n          var self = this;\n          if (arguments.length < 1 || (arguments.length === 1 &&\n              typeof arguments[0] === 'object')) {\n            var opts = arguments.length === 1 ? arguments[0] : undefined;\n            return new Promise(function(resolve, reject) {\n              nativeMethod.apply(self, [resolve, reject, opts]);\n            });\n          }\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n\n      // add promise support -- natively available in Chrome 51\n      if (browserDetails.version < 51) {\n        ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n            .forEach(function(method) {\n              var nativeMethod = webkitRTCPeerConnection.prototype[method];\n              webkitRTCPeerConnection.prototype[method] = function() {\n                var args = arguments;\n                var self = this;\n                var promise = new Promise(function(resolve, reject) {\n                  nativeMethod.apply(self, [args[0], resolve, reject]);\n                });\n                if (args.length < 2) {\n                  return promise;\n                }\n                return promise.then(function() {\n                  args[1].apply(null, []);\n                },\n                function(err) {\n                  if (args.length >= 3) {\n                    args[2].apply(null, [err]);\n                  }\n                });\n              };\n            });\n      }\n\n      // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n          .forEach(function(method) {\n            var nativeMethod = webkitRTCPeerConnection.prototype[method];\n            webkitRTCPeerConnection.prototype[method] = function() {\n              arguments[0] = new ((method === 'addIceCandidate') ?\n                  RTCIceCandidate : RTCSessionDescription)(arguments[0]);\n              return nativeMethod.apply(this, arguments);\n            };\n          });\n\n      // support for addIceCandidate(null)\n      var nativeAddIceCandidate =\n          RTCPeerConnection.prototype.addIceCandidate;\n      RTCPeerConnection.prototype.addIceCandidate = function() {\n        return arguments[0] === null ? Promise.resolve()\n            : nativeAddIceCandidate.apply(this, arguments);\n      };\n    }\n  };\n\n\n  // Expose public methods.\n  module.exports = {\n    shimMediaStream: chromeShim.shimMediaStream,\n    shimOnTrack: chromeShim.shimOnTrack,\n    shimSourceObject: chromeShim.shimSourceObject,\n    shimPeerConnection: chromeShim.shimPeerConnection,\n    shimGetUserMedia: require('./getusermedia')\n  };\n\n  },{\"../utils.js\":10,\"./getusermedia\":4}],4:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n   /* eslint-env node */\n  'use strict';\n  var logging = require('../utils.js').log;\n\n  // Expose public methods.\n  module.exports = function() {\n    var constraintsToChrome_ = function(c) {\n      if (typeof c !== 'object' || c.mandatory || c.optional) {\n        return c;\n      }\n      var cc = {};\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n        if (r.exact !== undefined && typeof r.exact === 'number') {\n          r.min = r.max = r.exact;\n        }\n        var oldname_ = function(prefix, name) {\n          if (prefix) {\n            return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n          }\n          return (name === 'deviceId') ? 'sourceId' : name;\n        };\n        if (r.ideal !== undefined) {\n          cc.optional = cc.optional || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[oldname_('min', key)] = r.ideal;\n            cc.optional.push(oc);\n            oc = {};\n            oc[oldname_('max', key)] = r.ideal;\n            cc.optional.push(oc);\n          } else {\n            oc[oldname_('', key)] = r.ideal;\n            cc.optional.push(oc);\n          }\n        }\n        if (r.exact !== undefined && typeof r.exact !== 'number') {\n          cc.mandatory = cc.mandatory || {};\n          cc.mandatory[oldname_('', key)] = r.exact;\n        } else {\n          ['min', 'max'].forEach(function(mix) {\n            if (r[mix] !== undefined) {\n              cc.mandatory = cc.mandatory || {};\n              cc.mandatory[oldname_(mix, key)] = r[mix];\n            }\n          });\n        }\n      });\n      if (c.advanced) {\n        cc.optional = (cc.optional || []).concat(c.advanced);\n      }\n      return cc;\n    };\n\n    var shimConstraints_ = function(constraints, func) {\n      constraints = JSON.parse(JSON.stringify(constraints));\n      if (constraints && constraints.audio) {\n        constraints.audio = constraintsToChrome_(constraints.audio);\n      }\n      if (constraints && typeof constraints.video === 'object') {\n        // Shim facingMode for mobile, where it defaults to \"user\".\n        var face = constraints.video.facingMode;\n        face = face && ((typeof face === 'object') ? face : {ideal: face});\n\n        if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                      face.ideal === 'user' || face.ideal === 'environment')) &&\n            !(navigator.mediaDevices.getSupportedConstraints &&\n              navigator.mediaDevices.getSupportedConstraints().facingMode)) {\n          delete constraints.video.facingMode;\n          if (face.exact === 'environment' || face.ideal === 'environment') {\n            // Look for \"back\" in label, or use last cam (typically back cam).\n            return navigator.mediaDevices.enumerateDevices()\n            .then(function(devices) {\n              devices = devices.filter(function(d) {\n                return d.kind === 'videoinput';\n              });\n              var back = devices.find(function(d) {\n                return d.label.toLowerCase().indexOf('back') !== -1;\n              }) || (devices.length && devices[devices.length - 1]);\n              if (back) {\n                constraints.video.deviceId = face.exact ? {exact: back.deviceId} :\n                                                          {ideal: back.deviceId};\n              }\n              constraints.video = constraintsToChrome_(constraints.video);\n              logging('chrome: ' + JSON.stringify(constraints));\n              return func(constraints);\n            });\n          }\n        }\n        constraints.video = constraintsToChrome_(constraints.video);\n      }\n      logging('chrome: ' + JSON.stringify(constraints));\n      return func(constraints);\n    };\n\n    var shimError_ = function(e) {\n      return {\n        name: {\n          PermissionDeniedError: 'NotAllowedError',\n          ConstraintNotSatisfiedError: 'OverconstrainedError'\n        }[e.name] || e.name,\n        message: e.message,\n        constraint: e.constraintName,\n        toString: function() {\n          return this.name + (this.message && ': ') + this.message;\n        }\n      };\n    };\n\n    var getUserMedia_ = function(constraints, onSuccess, onError) {\n      shimConstraints_(constraints, function(c) {\n        navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n          onError(shimError_(e));\n        });\n      });\n    };\n\n    navigator.getUserMedia = getUserMedia_;\n\n    // Returns the result of getUserMedia as a Promise.\n    var getUserMediaPromise_ = function(constraints) {\n      return new Promise(function(resolve, reject) {\n        navigator.getUserMedia(constraints, resolve, reject);\n      });\n    };\n\n    if (!navigator.mediaDevices) {\n      navigator.mediaDevices = {\n        getUserMedia: getUserMediaPromise_,\n        enumerateDevices: function() {\n          return new Promise(function(resolve) {\n            var kinds = {audio: 'audioinput', video: 'videoinput'};\n            return MediaStreamTrack.getSources(function(devices) {\n              resolve(devices.map(function(device) {\n                return {label: device.label,\n                        kind: kinds[device.kind],\n                        deviceId: device.id,\n                        groupId: ''};\n              }));\n            });\n          });\n        }\n      };\n    }\n\n    // A shim for getUserMedia method on the mediaDevices object.\n    // TODO(KaptenJansson) remove once implemented in Chrome stable.\n    if (!navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia = function(constraints) {\n        return getUserMediaPromise_(constraints);\n      };\n    } else {\n      // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n      // function which returns a Promise, it does not accept spec-style\n      // constraints.\n      var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n          bind(navigator.mediaDevices);\n      navigator.mediaDevices.getUserMedia = function(cs) {\n        return shimConstraints_(cs, function(c) {\n          return origGetUserMedia(c).catch(function(e) {\n            return Promise.reject(shimError_(e));\n          });\n        });\n      };\n    }\n\n    // Dummy devicechange event methods.\n    // TODO(KaptenJansson) remove once implemented in Chrome stable.\n    if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n      navigator.mediaDevices.addEventListener = function() {\n        logging('Dummy mediaDevices.addEventListener called.');\n      };\n    }\n    if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n      navigator.mediaDevices.removeEventListener = function() {\n        logging('Dummy mediaDevices.removeEventListener called.');\n      };\n    }\n  };\n\n  },{\"../utils.js\":10}],5:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n   /* eslint-env node */\n  'use strict';\n\n  var SDPUtils = require('sdp');\n  var browserDetails = require('../utils').browserDetails;\n\n  var edgeShim = {\n    shimPeerConnection: function() {\n      if (window.RTCIceGatherer) {\n        // ORTC defines an RTCIceCandidate object but no constructor.\n        // Not implemented in Edge.\n        if (!window.RTCIceCandidate) {\n          window.RTCIceCandidate = function(args) {\n            return args;\n          };\n        }\n        // ORTC does not have a session description object but\n        // other browsers (i.e. Chrome) that will support both PC and ORTC\n        // in the future might have this defined already.\n        if (!window.RTCSessionDescription) {\n          window.RTCSessionDescription = function(args) {\n            return args;\n          };\n        }\n      }\n\n      window.RTCPeerConnection = function(config) {\n        var self = this;\n\n        var _eventTarget = document.createDocumentFragment();\n        ['addEventListener', 'removeEventListener', 'dispatchEvent']\n            .forEach(function(method) {\n              self[method] = _eventTarget[method].bind(_eventTarget);\n            });\n\n        this.onicecandidate = null;\n        this.onaddstream = null;\n        this.ontrack = null;\n        this.onremovestream = null;\n        this.onsignalingstatechange = null;\n        this.oniceconnectionstatechange = null;\n        this.onnegotiationneeded = null;\n        this.ondatachannel = null;\n\n        this.localStreams = [];\n        this.remoteStreams = [];\n        this.getLocalStreams = function() {\n          return self.localStreams;\n        };\n        this.getRemoteStreams = function() {\n          return self.remoteStreams;\n        };\n\n        this.localDescription = new RTCSessionDescription({\n          type: '',\n          sdp: ''\n        });\n        this.remoteDescription = new RTCSessionDescription({\n          type: '',\n          sdp: ''\n        });\n        this.signalingState = 'stable';\n        this.iceConnectionState = 'new';\n        this.iceGatheringState = 'new';\n\n        this.iceOptions = {\n          gatherPolicy: 'all',\n          iceServers: []\n        };\n        if (config && config.iceTransportPolicy) {\n          switch (config.iceTransportPolicy) {\n            case 'all':\n            case 'relay':\n              this.iceOptions.gatherPolicy = config.iceTransportPolicy;\n              break;\n            case 'none':\n              // FIXME: remove once implementation and spec have added this.\n              throw new TypeError('iceTransportPolicy \"none\" not supported');\n            default:\n              // don't set iceTransportPolicy.\n              break;\n          }\n        }\n        this.usingBundle = config && config.bundlePolicy === 'max-bundle';\n\n        if (config && config.iceServers) {\n          // Edge does not like\n          // 1) stun:\n          // 2) turn: that does not have all of turn:host:port?transport=udp\n          // 3) turn: with ipv6 addresses\n          var iceServers = JSON.parse(JSON.stringify(config.iceServers));\n          this.iceOptions.iceServers = iceServers.filter(function(server) {\n            if (server && server.urls) {\n              var urls = server.urls;\n              if (typeof urls === 'string') {\n                urls = [urls];\n              }\n              urls = urls.filter(function(url) {\n                return (url.indexOf('turn:') === 0 &&\n                    url.indexOf('transport=udp') !== -1 &&\n                    url.indexOf('turn:[') === -1) ||\n                    (url.indexOf('stun:') === 0 &&\n                      browserDetails.version >= 14393);\n              })[0];\n              return !!urls;\n            }\n            return false;\n          });\n        }\n\n        // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n        // everything that is needed to describe a SDP m-line.\n        this.transceivers = [];\n\n        // since the iceGatherer is currently created in createOffer but we\n        // must not emit candidates until after setLocalDescription we buffer\n        // them in this array.\n        this._localIceCandidatesBuffer = [];\n      };\n\n      window.RTCPeerConnection.prototype._emitBufferedCandidates = function() {\n        var self = this;\n        var sections = SDPUtils.splitSections(self.localDescription.sdp);\n        // FIXME: need to apply ice candidates in a way which is async but\n        // in-order\n        this._localIceCandidatesBuffer.forEach(function(event) {\n          var end = !event.candidate || Object.keys(event.candidate).length === 0;\n          if (end) {\n            for (var j = 1; j < sections.length; j++) {\n              if (sections[j].indexOf('\\r\\na=end-of-candidates\\r\\n') === -1) {\n                sections[j] += 'a=end-of-candidates\\r\\n';\n              }\n            }\n          } else if (event.candidate.candidate.indexOf('typ endOfCandidates')\n              === -1) {\n            sections[event.candidate.sdpMLineIndex + 1] +=\n                'a=' + event.candidate.candidate + '\\r\\n';\n          }\n          self.localDescription.sdp = sections.join('');\n          self.dispatchEvent(event);\n          if (self.onicecandidate !== null) {\n            self.onicecandidate(event);\n          }\n          if (!event.candidate && self.iceGatheringState !== 'complete') {\n            var complete = self.transceivers.every(function(transceiver) {\n              return transceiver.iceGatherer &&\n                  transceiver.iceGatherer.state === 'completed';\n            });\n            if (complete) {\n              self.iceGatheringState = 'complete';\n            }\n          }\n        });\n        this._localIceCandidatesBuffer = [];\n      };\n\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\n        // Clone is necessary for local demos mostly, attaching directly\n        // to two different senders does not work (build 10547).\n        this.localStreams.push(stream.clone());\n        this._maybeFireNegotiationNeeded();\n      };\n\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n        var idx = this.localStreams.indexOf(stream);\n        if (idx > -1) {\n          this.localStreams.splice(idx, 1);\n          this._maybeFireNegotiationNeeded();\n        }\n      };\n\n      window.RTCPeerConnection.prototype.getSenders = function() {\n        return this.transceivers.filter(function(transceiver) {\n          return !!transceiver.rtpSender;\n        })\n        .map(function(transceiver) {\n          return transceiver.rtpSender;\n        });\n      };\n\n      window.RTCPeerConnection.prototype.getReceivers = function() {\n        return this.transceivers.filter(function(transceiver) {\n          return !!transceiver.rtpReceiver;\n        })\n        .map(function(transceiver) {\n          return transceiver.rtpReceiver;\n        });\n      };\n\n      // Determines the intersection of local and remote capabilities.\n      window.RTCPeerConnection.prototype._getCommonCapabilities =\n          function(localCapabilities, remoteCapabilities) {\n            var commonCapabilities = {\n              codecs: [],\n              headerExtensions: [],\n              fecMechanisms: []\n            };\n            localCapabilities.codecs.forEach(function(lCodec) {\n              for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n                var rCodec = remoteCapabilities.codecs[i];\n                if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n                    lCodec.clockRate === rCodec.clockRate &&\n                    lCodec.numChannels === rCodec.numChannels) {\n                  // push rCodec so we reply with offerer payload type\n                  commonCapabilities.codecs.push(rCodec);\n\n                  // determine common feedback mechanisms\n                  rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n                    for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n                      if (lCodec.rtcpFeedback[j].type === fb.type &&\n                          lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n                        return true;\n                      }\n                    }\n                    return false;\n                  });\n                  // FIXME: also need to determine .parameters\n                  //  see https://github.com/openpeer/ortc/issues/569\n                  break;\n                }\n              }\n            });\n\n            localCapabilities.headerExtensions\n                .forEach(function(lHeaderExtension) {\n                  for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n                       i++) {\n                    var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n                    if (lHeaderExtension.uri === rHeaderExtension.uri) {\n                      commonCapabilities.headerExtensions.push(rHeaderExtension);\n                      break;\n                    }\n                  }\n                });\n\n            // FIXME: fecMechanisms\n            return commonCapabilities;\n          };\n\n      // Create ICE gatherer, ICE transport and DTLS transport.\n      window.RTCPeerConnection.prototype._createIceAndDtlsTransports =\n          function(mid, sdpMLineIndex) {\n            var self = this;\n            var iceGatherer = new RTCIceGatherer(self.iceOptions);\n            var iceTransport = new RTCIceTransport(iceGatherer);\n            iceGatherer.onlocalcandidate = function(evt) {\n              var event = new Event('icecandidate');\n              event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n              var cand = evt.candidate;\n              var end = !cand || Object.keys(cand).length === 0;\n              // Edge emits an empty object for RTCIceCandidateComplete\n              if (end) {\n                // polyfill since RTCIceGatherer.state is not implemented in\n                // Edge 10547 yet.\n                if (iceGatherer.state === undefined) {\n                  iceGatherer.state = 'completed';\n                }\n\n                // Emit a candidate with type endOfCandidates to make the samples\n                // work. Edge requires addIceCandidate with this empty candidate\n                // to start checking. The real solution is to signal\n                // end-of-candidates to the other side when getting the null\n                // candidate but some apps (like the samples) don't do that.\n                event.candidate.candidate =\n                    'candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates';\n              } else {\n                // RTCIceCandidate doesn't have a component, needs to be added\n                cand.component = iceTransport.component === 'RTCP' ? 2 : 1;\n                event.candidate.candidate = SDPUtils.writeCandidate(cand);\n              }\n\n              // update local description.\n              var sections = SDPUtils.splitSections(self.localDescription.sdp);\n              if (event.candidate.candidate.indexOf('typ endOfCandidates')\n                  === -1) {\n                sections[event.candidate.sdpMLineIndex + 1] +=\n                    'a=' + event.candidate.candidate + '\\r\\n';\n              } else {\n                sections[event.candidate.sdpMLineIndex + 1] +=\n                    'a=end-of-candidates\\r\\n';\n              }\n              self.localDescription.sdp = sections.join('');\n\n              var complete = self.transceivers.every(function(transceiver) {\n                return transceiver.iceGatherer &&\n                    transceiver.iceGatherer.state === 'completed';\n              });\n\n              // Emit candidate if localDescription is set.\n              // Also emits null candidate when all gatherers are complete.\n              switch (self.iceGatheringState) {\n                case 'new':\n                  self._localIceCandidatesBuffer.push(event);\n                  if (end && complete) {\n                    self._localIceCandidatesBuffer.push(\n                        new Event('icecandidate'));\n                  }\n                  break;\n                case 'gathering':\n                  self._emitBufferedCandidates();\n                  self.dispatchEvent(event);\n                  if (self.onicecandidate !== null) {\n                    self.onicecandidate(event);\n                  }\n                  if (complete) {\n                    self.dispatchEvent(new Event('icecandidate'));\n                    if (self.onicecandidate !== null) {\n                      self.onicecandidate(new Event('icecandidate'));\n                    }\n                    self.iceGatheringState = 'complete';\n                  }\n                  break;\n                case 'complete':\n                  // should not happen... currently!\n                  break;\n                default: // no-op.\n                  break;\n              }\n            };\n            iceTransport.onicestatechange = function() {\n              self._updateConnectionState();\n            };\n\n            var dtlsTransport = new RTCDtlsTransport(iceTransport);\n            dtlsTransport.ondtlsstatechange = function() {\n              self._updateConnectionState();\n            };\n            dtlsTransport.onerror = function() {\n              // onerror does not set state to failed by itself.\n              dtlsTransport.state = 'failed';\n              self._updateConnectionState();\n            };\n\n            return {\n              iceGatherer: iceGatherer,\n              iceTransport: iceTransport,\n              dtlsTransport: dtlsTransport\n            };\n          };\n\n      // Start the RTP Sender and Receiver for a transceiver.\n      window.RTCPeerConnection.prototype._transceive = function(transceiver,\n          send, recv) {\n        var params = this._getCommonCapabilities(transceiver.localCapabilities,\n            transceiver.remoteCapabilities);\n        if (send && transceiver.rtpSender) {\n          params.encodings = transceiver.sendEncodingParameters;\n          params.rtcp = {\n            cname: SDPUtils.localCName\n          };\n          if (transceiver.recvEncodingParameters.length) {\n            params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n          }\n          transceiver.rtpSender.send(params);\n        }\n        if (recv && transceiver.rtpReceiver) {\n          params.encodings = transceiver.recvEncodingParameters;\n          params.rtcp = {\n            cname: transceiver.cname\n          };\n          if (transceiver.sendEncodingParameters.length) {\n            params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n          }\n          transceiver.rtpReceiver.receive(params);\n        }\n      };\n\n      window.RTCPeerConnection.prototype.setLocalDescription =\n          function(description) {\n            var self = this;\n            var sections;\n            var sessionpart;\n            if (description.type === 'offer') {\n              // FIXME: What was the purpose of this empty if statement?\n              // if (!this._pendingOffer) {\n              // } else {\n              if (this._pendingOffer) {\n                // VERY limited support for SDP munging. Limited to:\n                // * changing the order of codecs\n                sections = SDPUtils.splitSections(description.sdp);\n                sessionpart = sections.shift();\n                sections.forEach(function(mediaSection, sdpMLineIndex) {\n                  var caps = SDPUtils.parseRtpParameters(mediaSection);\n                  self._pendingOffer[sdpMLineIndex].localCapabilities = caps;\n                });\n                this.transceivers = this._pendingOffer;\n                delete this._pendingOffer;\n              }\n            } else if (description.type === 'answer') {\n              sections = SDPUtils.splitSections(self.remoteDescription.sdp);\n              sessionpart = sections.shift();\n              var isIceLite = SDPUtils.matchPrefix(sessionpart,\n                  'a=ice-lite').length > 0;\n              sections.forEach(function(mediaSection, sdpMLineIndex) {\n                var transceiver = self.transceivers[sdpMLineIndex];\n                var iceGatherer = transceiver.iceGatherer;\n                var iceTransport = transceiver.iceTransport;\n                var dtlsTransport = transceiver.dtlsTransport;\n                var localCapabilities = transceiver.localCapabilities;\n                var remoteCapabilities = transceiver.remoteCapabilities;\n\n                var rejected = mediaSection.split('\\n', 1)[0]\n                    .split(' ', 2)[1] === '0';\n\n                if (!rejected && !transceiver.isDatachannel) {\n                  var remoteIceParameters = SDPUtils.getIceParameters(\n                      mediaSection, sessionpart);\n                  if (isIceLite) {\n                    var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n                    .map(function(cand) {\n                      return SDPUtils.parseCandidate(cand);\n                    })\n                    .filter(function(cand) {\n                      return cand.component === '1';\n                    });\n                    // ice-lite only includes host candidates in the SDP so we can\n                    // use setRemoteCandidates (which implies an\n                    // RTCIceCandidateComplete)\n                    if (cands.length) {\n                      iceTransport.setRemoteCandidates(cands);\n                    }\n                  }\n                  var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n                      mediaSection, sessionpart);\n                  if (isIceLite) {\n                    remoteDtlsParameters.role = 'server';\n                  }\n\n                  if (!self.usingBundle || sdpMLineIndex === 0) {\n                    iceTransport.start(iceGatherer, remoteIceParameters,\n                        isIceLite ? 'controlling' : 'controlled');\n                    dtlsTransport.start(remoteDtlsParameters);\n                  }\n\n                  // Calculate intersection of capabilities.\n                  var params = self._getCommonCapabilities(localCapabilities,\n                      remoteCapabilities);\n\n                  // Start the RTCRtpSender. The RTCRtpReceiver for this\n                  // transceiver has already been started in setRemoteDescription.\n                  self._transceive(transceiver,\n                      params.codecs.length > 0,\n                      false);\n                }\n              });\n            }\n\n            this.localDescription = {\n              type: description.type,\n              sdp: description.sdp\n            };\n            switch (description.type) {\n              case 'offer':\n                this._updateSignalingState('have-local-offer');\n                break;\n              case 'answer':\n                this._updateSignalingState('stable');\n                break;\n              default:\n                throw new TypeError('unsupported type \"' + description.type +\n                    '\"');\n            }\n\n            // If a success callback was provided, emit ICE candidates after it\n            // has been executed. Otherwise, emit callback after the Promise is\n            // resolved.\n            var hasCallback = arguments.length > 1 &&\n              typeof arguments[1] === 'function';\n            if (hasCallback) {\n              var cb = arguments[1];\n              window.setTimeout(function() {\n                cb();\n                if (self.iceGatheringState === 'new') {\n                  self.iceGatheringState = 'gathering';\n                }\n                self._emitBufferedCandidates();\n              }, 0);\n            }\n            var p = Promise.resolve();\n            p.then(function() {\n              if (!hasCallback) {\n                if (self.iceGatheringState === 'new') {\n                  self.iceGatheringState = 'gathering';\n                }\n                // Usually candidates will be emitted earlier.\n                window.setTimeout(self._emitBufferedCandidates.bind(self), 500);\n              }\n            });\n            return p;\n          };\n\n      window.RTCPeerConnection.prototype.setRemoteDescription =\n          function(description) {\n            var self = this;\n            var stream = new MediaStream();\n            var receiverList = [];\n            var sections = SDPUtils.splitSections(description.sdp);\n            var sessionpart = sections.shift();\n            var isIceLite = SDPUtils.matchPrefix(sessionpart,\n                'a=ice-lite').length > 0;\n            this.usingBundle = SDPUtils.matchPrefix(sessionpart,\n                'a=group:BUNDLE ').length > 0;\n            sections.forEach(function(mediaSection, sdpMLineIndex) {\n              var lines = SDPUtils.splitLines(mediaSection);\n              var mline = lines[0].substr(2).split(' ');\n              var kind = mline[0];\n              var rejected = mline[1] === '0';\n              var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n\n              var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:');\n              if (mid.length) {\n                mid = mid[0].substr(6);\n              } else {\n                mid = SDPUtils.generateIdentifier();\n              }\n\n              // Reject datachannels which are not implemented yet.\n              if (kind === 'application' && mline[2] === 'DTLS/SCTP') {\n                self.transceivers[sdpMLineIndex] = {\n                  mid: mid,\n                  isDatachannel: true\n                };\n                return;\n              }\n\n              var transceiver;\n              var iceGatherer;\n              var iceTransport;\n              var dtlsTransport;\n              var rtpSender;\n              var rtpReceiver;\n              var sendEncodingParameters;\n              var recvEncodingParameters;\n              var localCapabilities;\n\n              var track;\n              // FIXME: ensure the mediaSection has rtcp-mux set.\n              var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n              var remoteIceParameters;\n              var remoteDtlsParameters;\n              if (!rejected) {\n                remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n                    sessionpart);\n                remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n                    sessionpart);\n                remoteDtlsParameters.role = 'client';\n              }\n              recvEncodingParameters =\n                  SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n              var cname;\n              // Gets the first SSRC. Note that with RTX there might be multiple\n              // SSRCs.\n              var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                  .map(function(line) {\n                    return SDPUtils.parseSsrcMedia(line);\n                  })\n                  .filter(function(obj) {\n                    return obj.attribute === 'cname';\n                  })[0];\n              if (remoteSsrc) {\n                cname = remoteSsrc.value;\n              }\n\n              var isComplete = SDPUtils.matchPrefix(mediaSection,\n                  'a=end-of-candidates', sessionpart).length > 0;\n              var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n                  .map(function(cand) {\n                    return SDPUtils.parseCandidate(cand);\n                  })\n                  .filter(function(cand) {\n                    return cand.component === '1';\n                  });\n              if (description.type === 'offer' && !rejected) {\n                var transports = self.usingBundle && sdpMLineIndex > 0 ? {\n                  iceGatherer: self.transceivers[0].iceGatherer,\n                  iceTransport: self.transceivers[0].iceTransport,\n                  dtlsTransport: self.transceivers[0].dtlsTransport\n                } : self._createIceAndDtlsTransports(mid, sdpMLineIndex);\n\n                if (isComplete) {\n                  transports.iceTransport.setRemoteCandidates(cands);\n                }\n\n                localCapabilities = RTCRtpReceiver.getCapabilities(kind);\n                sendEncodingParameters = [{\n                  ssrc: (2 * sdpMLineIndex + 2) * 1001\n                }];\n\n                rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport, kind);\n\n                track = rtpReceiver.track;\n                receiverList.push([track, rtpReceiver]);\n                // FIXME: not correct when there are multiple streams but that is\n                // not currently supported in this shim.\n                stream.addTrack(track);\n\n                // FIXME: look at direction.\n                if (self.localStreams.length > 0 &&\n                    self.localStreams[0].getTracks().length >= sdpMLineIndex) {\n                  var localTrack;\n                  if (kind === 'audio') {\n                    localTrack = self.localStreams[0].getAudioTracks()[0];\n                  } else if (kind === 'video') {\n                    localTrack = self.localStreams[0].getVideoTracks()[0];\n                  }\n                  if (localTrack) {\n                    rtpSender = new RTCRtpSender(localTrack,\n                        transports.dtlsTransport);\n                  }\n                }\n\n                self.transceivers[sdpMLineIndex] = {\n                  iceGatherer: transports.iceGatherer,\n                  iceTransport: transports.iceTransport,\n                  dtlsTransport: transports.dtlsTransport,\n                  localCapabilities: localCapabilities,\n                  remoteCapabilities: remoteCapabilities,\n                  rtpSender: rtpSender,\n                  rtpReceiver: rtpReceiver,\n                  kind: kind,\n                  mid: mid,\n                  cname: cname,\n                  sendEncodingParameters: sendEncodingParameters,\n                  recvEncodingParameters: recvEncodingParameters\n                };\n                // Start the RTCRtpReceiver now. The RTPSender is started in\n                // setLocalDescription.\n                self._transceive(self.transceivers[sdpMLineIndex],\n                    false,\n                    direction === 'sendrecv' || direction === 'sendonly');\n              } else if (description.type === 'answer' && !rejected) {\n                transceiver = self.transceivers[sdpMLineIndex];\n                iceGatherer = transceiver.iceGatherer;\n                iceTransport = transceiver.iceTransport;\n                dtlsTransport = transceiver.dtlsTransport;\n                rtpSender = transceiver.rtpSender;\n                rtpReceiver = transceiver.rtpReceiver;\n                sendEncodingParameters = transceiver.sendEncodingParameters;\n                localCapabilities = transceiver.localCapabilities;\n\n                self.transceivers[sdpMLineIndex].recvEncodingParameters =\n                    recvEncodingParameters;\n                self.transceivers[sdpMLineIndex].remoteCapabilities =\n                    remoteCapabilities;\n                self.transceivers[sdpMLineIndex].cname = cname;\n\n                if ((isIceLite || isComplete) && cands.length) {\n                  iceTransport.setRemoteCandidates(cands);\n                }\n                if (!self.usingBundle || sdpMLineIndex === 0) {\n                  iceTransport.start(iceGatherer, remoteIceParameters,\n                      'controlling');\n                  dtlsTransport.start(remoteDtlsParameters);\n                }\n\n                self._transceive(transceiver,\n                    direction === 'sendrecv' || direction === 'recvonly',\n                    direction === 'sendrecv' || direction === 'sendonly');\n\n                if (rtpReceiver &&\n                    (direction === 'sendrecv' || direction === 'sendonly')) {\n                  track = rtpReceiver.track;\n                  receiverList.push([track, rtpReceiver]);\n                  stream.addTrack(track);\n                } else {\n                  // FIXME: actually the receiver should be created later.\n                  delete transceiver.rtpReceiver;\n                }\n              }\n            });\n\n            this.remoteDescription = {\n              type: description.type,\n              sdp: description.sdp\n            };\n            switch (description.type) {\n              case 'offer':\n                this._updateSignalingState('have-remote-offer');\n                break;\n              case 'answer':\n                this._updateSignalingState('stable');\n                break;\n              default:\n                throw new TypeError('unsupported type \"' + description.type +\n                    '\"');\n            }\n            if (stream.getTracks().length) {\n              self.remoteStreams.push(stream);\n              window.setTimeout(function() {\n                var event = new Event('addstream');\n                event.stream = stream;\n                self.dispatchEvent(event);\n                if (self.onaddstream !== null) {\n                  window.setTimeout(function() {\n                    self.onaddstream(event);\n                  }, 0);\n                }\n\n                receiverList.forEach(function(item) {\n                  var track = item[0];\n                  var receiver = item[1];\n                  var trackEvent = new Event('track');\n                  trackEvent.track = track;\n                  trackEvent.receiver = receiver;\n                  trackEvent.streams = [stream];\n                  self.dispatchEvent(event);\n                  if (self.ontrack !== null) {\n                    window.setTimeout(function() {\n                      self.ontrack(trackEvent);\n                    }, 0);\n                  }\n                });\n              }, 0);\n            }\n            if (arguments.length > 1 && typeof arguments[1] === 'function') {\n              window.setTimeout(arguments[1], 0);\n            }\n            return Promise.resolve();\n          };\n\n      window.RTCPeerConnection.prototype.close = function() {\n        this.transceivers.forEach(function(transceiver) {\n          /* not yet\n          if (transceiver.iceGatherer) {\n            transceiver.iceGatherer.close();\n          }\n          */\n          if (transceiver.iceTransport) {\n            transceiver.iceTransport.stop();\n          }\n          if (transceiver.dtlsTransport) {\n            transceiver.dtlsTransport.stop();\n          }\n          if (transceiver.rtpSender) {\n            transceiver.rtpSender.stop();\n          }\n          if (transceiver.rtpReceiver) {\n            transceiver.rtpReceiver.stop();\n          }\n        });\n        // FIXME: clean up tracks, local streams, remote streams, etc\n        this._updateSignalingState('closed');\n      };\n\n      // Update the signaling state.\n      window.RTCPeerConnection.prototype._updateSignalingState =\n          function(newState) {\n            this.signalingState = newState;\n            var event = new Event('signalingstatechange');\n            this.dispatchEvent(event);\n            if (this.onsignalingstatechange !== null) {\n              this.onsignalingstatechange(event);\n            }\n          };\n\n      // Determine whether to fire the negotiationneeded event.\n      window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded =\n          function() {\n            // Fire away (for now).\n            var event = new Event('negotiationneeded');\n            this.dispatchEvent(event);\n            if (this.onnegotiationneeded !== null) {\n              this.onnegotiationneeded(event);\n            }\n          };\n\n      // Update the connection state.\n      window.RTCPeerConnection.prototype._updateConnectionState = function() {\n        var self = this;\n        var newState;\n        var states = {\n          'new': 0,\n          closed: 0,\n          connecting: 0,\n          checking: 0,\n          connected: 0,\n          completed: 0,\n          failed: 0\n        };\n        this.transceivers.forEach(function(transceiver) {\n          states[transceiver.iceTransport.state]++;\n          states[transceiver.dtlsTransport.state]++;\n        });\n        // ICETransport.completed and connected are the same for this purpose.\n        states.connected += states.completed;\n\n        newState = 'new';\n        if (states.failed > 0) {\n          newState = 'failed';\n        } else if (states.connecting > 0 || states.checking > 0) {\n          newState = 'connecting';\n        } else if (states.disconnected > 0) {\n          newState = 'disconnected';\n        } else if (states.new > 0) {\n          newState = 'new';\n        } else if (states.connected > 0 || states.completed > 0) {\n          newState = 'connected';\n        }\n\n        if (newState !== self.iceConnectionState) {\n          self.iceConnectionState = newState;\n          var event = new Event('iceconnectionstatechange');\n          this.dispatchEvent(event);\n          if (this.oniceconnectionstatechange !== null) {\n            this.oniceconnectionstatechange(event);\n          }\n        }\n      };\n\n      window.RTCPeerConnection.prototype.createOffer = function() {\n        var self = this;\n        if (this._pendingOffer) {\n          throw new Error('createOffer called while there is a pending offer.');\n        }\n        var offerOptions;\n        if (arguments.length === 1 && typeof arguments[0] !== 'function') {\n          offerOptions = arguments[0];\n        } else if (arguments.length === 3) {\n          offerOptions = arguments[2];\n        }\n\n        var tracks = [];\n        var numAudioTracks = 0;\n        var numVideoTracks = 0;\n        // Default to sendrecv.\n        if (this.localStreams.length) {\n          numAudioTracks = this.localStreams[0].getAudioTracks().length;\n          numVideoTracks = this.localStreams[0].getVideoTracks().length;\n        }\n        // Determine number of audio and video tracks we need to send/recv.\n        if (offerOptions) {\n          // Reject Chrome legacy constraints.\n          if (offerOptions.mandatory || offerOptions.optional) {\n            throw new TypeError(\n                'Legacy mandatory/optional constraints not supported.');\n          }\n          if (offerOptions.offerToReceiveAudio !== undefined) {\n            numAudioTracks = offerOptions.offerToReceiveAudio;\n          }\n          if (offerOptions.offerToReceiveVideo !== undefined) {\n            numVideoTracks = offerOptions.offerToReceiveVideo;\n          }\n        }\n        if (this.localStreams.length) {\n          // Push local streams.\n          this.localStreams[0].getTracks().forEach(function(track) {\n            tracks.push({\n              kind: track.kind,\n              track: track,\n              wantReceive: track.kind === 'audio' ?\n                  numAudioTracks > 0 : numVideoTracks > 0\n            });\n            if (track.kind === 'audio') {\n              numAudioTracks--;\n            } else if (track.kind === 'video') {\n              numVideoTracks--;\n            }\n          });\n        }\n        // Create M-lines for recvonly streams.\n        while (numAudioTracks > 0 || numVideoTracks > 0) {\n          if (numAudioTracks > 0) {\n            tracks.push({\n              kind: 'audio',\n              wantReceive: true\n            });\n            numAudioTracks--;\n          }\n          if (numVideoTracks > 0) {\n            tracks.push({\n              kind: 'video',\n              wantReceive: true\n            });\n            numVideoTracks--;\n          }\n        }\n\n        var sdp = SDPUtils.writeSessionBoilerplate();\n        var transceivers = [];\n        tracks.forEach(function(mline, sdpMLineIndex) {\n          // For each track, create an ice gatherer, ice transport,\n          // dtls transport, potentially rtpsender and rtpreceiver.\n          var track = mline.track;\n          var kind = mline.kind;\n          var mid = SDPUtils.generateIdentifier();\n\n          var transports = self.usingBundle && sdpMLineIndex > 0 ? {\n            iceGatherer: transceivers[0].iceGatherer,\n            iceTransport: transceivers[0].iceTransport,\n            dtlsTransport: transceivers[0].dtlsTransport\n          } : self._createIceAndDtlsTransports(mid, sdpMLineIndex);\n\n          var localCapabilities = RTCRtpSender.getCapabilities(kind);\n          var rtpSender;\n          var rtpReceiver;\n\n          // generate an ssrc now, to be used later in rtpSender.send\n          var sendEncodingParameters = [{\n            ssrc: (2 * sdpMLineIndex + 1) * 1001\n          }];\n          if (track) {\n            rtpSender = new RTCRtpSender(track, transports.dtlsTransport);\n          }\n\n          if (mline.wantReceive) {\n            rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport, kind);\n          }\n\n          transceivers[sdpMLineIndex] = {\n            iceGatherer: transports.iceGatherer,\n            iceTransport: transports.iceTransport,\n            dtlsTransport: transports.dtlsTransport,\n            localCapabilities: localCapabilities,\n            remoteCapabilities: null,\n            rtpSender: rtpSender,\n            rtpReceiver: rtpReceiver,\n            kind: kind,\n            mid: mid,\n            sendEncodingParameters: sendEncodingParameters,\n            recvEncodingParameters: null\n          };\n        });\n        if (this.usingBundle) {\n          sdp += 'a=group:BUNDLE ' + transceivers.map(function(t) {\n            return t.mid;\n          }).join(' ') + '\\r\\n';\n        }\n        tracks.forEach(function(mline, sdpMLineIndex) {\n          var transceiver = transceivers[sdpMLineIndex];\n          sdp += SDPUtils.writeMediaSection(transceiver,\n              transceiver.localCapabilities, 'offer', self.localStreams[0]);\n        });\n\n        this._pendingOffer = transceivers;\n        var desc = new RTCSessionDescription({\n          type: 'offer',\n          sdp: sdp\n        });\n        if (arguments.length && typeof arguments[0] === 'function') {\n          window.setTimeout(arguments[0], 0, desc);\n        }\n        return Promise.resolve(desc);\n      };\n\n      window.RTCPeerConnection.prototype.createAnswer = function() {\n        var self = this;\n\n        var sdp = SDPUtils.writeSessionBoilerplate();\n        if (this.usingBundle) {\n          sdp += 'a=group:BUNDLE ' + this.transceivers.map(function(t) {\n            return t.mid;\n          }).join(' ') + '\\r\\n';\n        }\n        this.transceivers.forEach(function(transceiver) {\n          if (transceiver.isDatachannel) {\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n' +\n                'c=IN IP4 0.0.0.0\\r\\n' +\n                'a=mid:' + transceiver.mid + '\\r\\n';\n            return;\n          }\n          // Calculate intersection of capabilities.\n          var commonCapabilities = self._getCommonCapabilities(\n              transceiver.localCapabilities,\n              transceiver.remoteCapabilities);\n\n          sdp += SDPUtils.writeMediaSection(transceiver, commonCapabilities,\n              'answer', self.localStreams[0]);\n        });\n\n        var desc = new RTCSessionDescription({\n          type: 'answer',\n          sdp: sdp\n        });\n        if (arguments.length && typeof arguments[0] === 'function') {\n          window.setTimeout(arguments[0], 0, desc);\n        }\n        return Promise.resolve(desc);\n      };\n\n      window.RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n        if (candidate === null) {\n          this.transceivers.forEach(function(transceiver) {\n            transceiver.iceTransport.addRemoteCandidate({});\n          });\n        } else {\n          var mLineIndex = candidate.sdpMLineIndex;\n          if (candidate.sdpMid) {\n            for (var i = 0; i < this.transceivers.length; i++) {\n              if (this.transceivers[i].mid === candidate.sdpMid) {\n                mLineIndex = i;\n                break;\n              }\n            }\n          }\n          var transceiver = this.transceivers[mLineIndex];\n          if (transceiver) {\n            var cand = Object.keys(candidate.candidate).length > 0 ?\n                SDPUtils.parseCandidate(candidate.candidate) : {};\n            // Ignore Chrome's invalid candidates since Edge does not like them.\n            if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n              return;\n            }\n            // Ignore RTCP candidates, we assume RTCP-MUX.\n            if (cand.component !== '1') {\n              return;\n            }\n            // A dirty hack to make samples work.\n            if (cand.type === 'endOfCandidates') {\n              cand = {};\n            }\n            transceiver.iceTransport.addRemoteCandidate(cand);\n\n            // update the remoteDescription.\n            var sections = SDPUtils.splitSections(this.remoteDescription.sdp);\n            sections[mLineIndex + 1] += (cand.type ? candidate.candidate.trim()\n                : 'a=end-of-candidates') + '\\r\\n';\n            this.remoteDescription.sdp = sections.join('');\n          }\n        }\n        if (arguments.length > 1 && typeof arguments[1] === 'function') {\n          window.setTimeout(arguments[1], 0);\n        }\n        return Promise.resolve();\n      };\n\n      window.RTCPeerConnection.prototype.getStats = function() {\n        var promises = [];\n        this.transceivers.forEach(function(transceiver) {\n          ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n              'dtlsTransport'].forEach(function(method) {\n                if (transceiver[method]) {\n                  promises.push(transceiver[method].getStats());\n                }\n              });\n        });\n        var cb = arguments.length > 1 && typeof arguments[1] === 'function' &&\n            arguments[1];\n        return new Promise(function(resolve) {\n          // shim getStats with maplike support\n          var results = new Map();\n          Promise.all(promises).then(function(res) {\n            res.forEach(function(result) {\n              Object.keys(result).forEach(function(id) {\n                results.set(id, result[id]);\n                results[id] = result[id];\n              });\n            });\n            if (cb) {\n              window.setTimeout(cb, 0, results);\n            }\n            resolve(results);\n          });\n        });\n      };\n    }\n  };\n\n  // Expose public methods.\n  module.exports = {\n    shimPeerConnection: edgeShim.shimPeerConnection,\n    shimGetUserMedia: require('./getusermedia')\n  };\n\n  },{\"../utils\":10,\"./getusermedia\":6,\"sdp\":1}],6:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n   /* eslint-env node */\n  'use strict';\n\n  // Expose public methods.\n  module.exports = function() {\n    var shimError_ = function(e) {\n      return {\n        name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n        message: e.message,\n        constraint: e.constraint,\n        toString: function() {\n          return this.name;\n        }\n      };\n    };\n\n    // getUserMedia error shim.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      return origGetUserMedia(c).catch(function(e) {\n        return Promise.reject(shimError_(e));\n      });\n    };\n  };\n\n  },{}],7:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n   /* eslint-env node */\n  'use strict';\n\n  var browserDetails = require('../utils').browserDetails;\n\n  var firefoxShim = {\n    shimOnTrack: function() {\n      if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n          window.RTCPeerConnection.prototype)) {\n        Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n          get: function() {\n            return this._ontrack;\n          },\n          set: function(f) {\n            if (this._ontrack) {\n              this.removeEventListener('track', this._ontrack);\n              this.removeEventListener('addstream', this._ontrackpoly);\n            }\n            this.addEventListener('track', this._ontrack = f);\n            this.addEventListener('addstream', this._ontrackpoly = function(e) {\n              e.stream.getTracks().forEach(function(track) {\n                var event = new Event('track');\n                event.track = track;\n                event.receiver = {track: track};\n                event.streams = [e.stream];\n                this.dispatchEvent(event);\n              }.bind(this));\n            }.bind(this));\n          }\n        });\n      }\n    },\n\n    shimSourceObject: function() {\n      // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n      if (typeof window === 'object') {\n        if (window.HTMLMediaElement &&\n          !('srcObject' in window.HTMLMediaElement.prototype)) {\n          // Shim the srcObject property, once, when HTMLMediaElement is found.\n          Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n            get: function() {\n              return this.mozSrcObject;\n            },\n            set: function(stream) {\n              this.mozSrcObject = stream;\n            }\n          });\n        }\n      }\n    },\n\n    shimPeerConnection: function() {\n      if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n          window.mozRTCPeerConnection)) {\n        return; // probably media.peerconnection.enabled=false in about:config\n      }\n      // The RTCPeerConnection object.\n      if (!window.RTCPeerConnection) {\n        window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n          if (browserDetails.version < 38) {\n            // .urls is not supported in FF < 38.\n            // create RTCIceServers with a single url.\n            if (pcConfig && pcConfig.iceServers) {\n              var newIceServers = [];\n              for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                var server = pcConfig.iceServers[i];\n                if (server.hasOwnProperty('urls')) {\n                  for (var j = 0; j < server.urls.length; j++) {\n                    var newServer = {\n                      url: server.urls[j]\n                    };\n                    if (server.urls[j].indexOf('turn') === 0) {\n                      newServer.username = server.username;\n                      newServer.credential = server.credential;\n                    }\n                    newIceServers.push(newServer);\n                  }\n                } else {\n                  newIceServers.push(pcConfig.iceServers[i]);\n                }\n              }\n              pcConfig.iceServers = newIceServers;\n            }\n          }\n          return new mozRTCPeerConnection(pcConfig, pcConstraints);\n        };\n        window.RTCPeerConnection.prototype = mozRTCPeerConnection.prototype;\n\n        // wrap static methods. Currently just generateCertificate.\n        if (mozRTCPeerConnection.generateCertificate) {\n          Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n            get: function() {\n              return mozRTCPeerConnection.generateCertificate;\n            }\n          });\n        }\n\n        window.RTCSessionDescription = mozRTCSessionDescription;\n        window.RTCIceCandidate = mozRTCIceCandidate;\n      }\n\n      // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n          .forEach(function(method) {\n            var nativeMethod = RTCPeerConnection.prototype[method];\n            RTCPeerConnection.prototype[method] = function() {\n              arguments[0] = new ((method === 'addIceCandidate') ?\n                  RTCIceCandidate : RTCSessionDescription)(arguments[0]);\n              return nativeMethod.apply(this, arguments);\n            };\n          });\n\n      // support for addIceCandidate(null)\n      var nativeAddIceCandidate =\n          RTCPeerConnection.prototype.addIceCandidate;\n      RTCPeerConnection.prototype.addIceCandidate = function() {\n        return arguments[0] === null ? Promise.resolve()\n            : nativeAddIceCandidate.apply(this, arguments);\n      };\n\n      // shim getStats with maplike support\n      var makeMapStats = function(stats) {\n        var map = new Map();\n        Object.keys(stats).forEach(function(key) {\n          map.set(key, stats[key]);\n          map[key] = stats[key];\n        });\n        return map;\n      };\n\n      var nativeGetStats = RTCPeerConnection.prototype.getStats;\n      RTCPeerConnection.prototype.getStats = function(selector, onSucc, onErr) {\n        return nativeGetStats.apply(this, [selector || null])\n          .then(function(stats) {\n            return makeMapStats(stats);\n          })\n          .then(onSucc, onErr);\n      };\n    }\n  };\n\n  // Expose public methods.\n  module.exports = {\n    shimOnTrack: firefoxShim.shimOnTrack,\n    shimSourceObject: firefoxShim.shimSourceObject,\n    shimPeerConnection: firefoxShim.shimPeerConnection,\n    shimGetUserMedia: require('./getusermedia')\n  };\n\n  },{\"../utils\":10,\"./getusermedia\":8}],8:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n   /* eslint-env node */\n  'use strict';\n\n  var logging = require('../utils').log;\n  var browserDetails = require('../utils').browserDetails;\n\n  // Expose public methods.\n  module.exports = function() {\n    var shimError_ = function(e) {\n      return {\n        name: {\n          SecurityError: 'NotAllowedError',\n          PermissionDeniedError: 'NotAllowedError'\n        }[e.name] || e.name,\n        message: {\n          'The operation is insecure.': 'The request is not allowed by the ' +\n          'user agent or the platform in the current context.'\n        }[e.message] || e.message,\n        constraint: e.constraint,\n        toString: function() {\n          return this.name + (this.message && ': ') + this.message;\n        }\n      };\n    };\n\n    // getUserMedia constraints shim.\n    var getUserMedia_ = function(constraints, onSuccess, onError) {\n      var constraintsToFF37_ = function(c) {\n        if (typeof c !== 'object' || c.require) {\n          return c;\n        }\n        var require = [];\n        Object.keys(c).forEach(function(key) {\n          if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n            return;\n          }\n          var r = c[key] = (typeof c[key] === 'object') ?\n              c[key] : {ideal: c[key]};\n          if (r.min !== undefined ||\n              r.max !== undefined || r.exact !== undefined) {\n            require.push(key);\n          }\n          if (r.exact !== undefined) {\n            if (typeof r.exact === 'number') {\n              r. min = r.max = r.exact;\n            } else {\n              c[key] = r.exact;\n            }\n            delete r.exact;\n          }\n          if (r.ideal !== undefined) {\n            c.advanced = c.advanced || [];\n            var oc = {};\n            if (typeof r.ideal === 'number') {\n              oc[key] = {min: r.ideal, max: r.ideal};\n            } else {\n              oc[key] = r.ideal;\n            }\n            c.advanced.push(oc);\n            delete r.ideal;\n            if (!Object.keys(r).length) {\n              delete c[key];\n            }\n          }\n        });\n        if (require.length) {\n          c.require = require;\n        }\n        return c;\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      if (browserDetails.version < 38) {\n        logging('spec: ' + JSON.stringify(constraints));\n        if (constraints.audio) {\n          constraints.audio = constraintsToFF37_(constraints.audio);\n        }\n        if (constraints.video) {\n          constraints.video = constraintsToFF37_(constraints.video);\n        }\n        logging('ff37: ' + JSON.stringify(constraints));\n      }\n      return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n        onError(shimError_(e));\n      });\n    };\n\n    // Returns the result of getUserMedia as a Promise.\n    var getUserMediaPromise_ = function(constraints) {\n      return new Promise(function(resolve, reject) {\n        getUserMedia_(constraints, resolve, reject);\n      });\n    };\n\n    // Shim for mediaDevices on older versions.\n    if (!navigator.mediaDevices) {\n      navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n        addEventListener: function() { },\n        removeEventListener: function() { }\n      };\n    }\n    navigator.mediaDevices.enumerateDevices =\n        navigator.mediaDevices.enumerateDevices || function() {\n          return new Promise(function(resolve) {\n            var infos = [\n              {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n              {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n            ];\n            resolve(infos);\n          });\n        };\n\n    if (browserDetails.version < 41) {\n      // Work around http://bugzil.la/1169665\n      var orgEnumerateDevices =\n          navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n      navigator.mediaDevices.enumerateDevices = function() {\n        return orgEnumerateDevices().then(undefined, function(e) {\n          if (e.name === 'NotFoundError') {\n            return [];\n          }\n          throw e;\n        });\n      };\n    }\n    if (browserDetails.version < 49) {\n      var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n          bind(navigator.mediaDevices);\n      navigator.mediaDevices.getUserMedia = function(c) {\n        return origGetUserMedia(c).catch(function(e) {\n          return Promise.reject(shimError_(e));\n        });\n      };\n    }\n    navigator.getUserMedia = function(constraints, onSuccess, onError) {\n      if (browserDetails.version < 44) {\n        return getUserMedia_(constraints, onSuccess, onError);\n      }\n      // Replace Firefox 44+'s deprecation warning with unprefixed version.\n      console.warn('navigator.getUserMedia has been replaced by ' +\n                   'navigator.mediaDevices.getUserMedia');\n      navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n    };\n  };\n\n  },{\"../utils\":10}],9:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  'use strict';\n  var safariShim = {\n    // TODO: DrAlex, should be here, double check against LayoutTests\n    // shimOnTrack: function() { },\n\n    // TODO: once the back-end for the mac port is done, add.\n    // TODO: check for webkitGTK+\n    // shimPeerConnection: function() { },\n\n    shimGetUserMedia: function() {\n      navigator.getUserMedia = navigator.webkitGetUserMedia;\n    }\n  };\n\n  // Expose public methods.\n  module.exports = {\n    shimGetUserMedia: safariShim.shimGetUserMedia\n    // TODO\n    // shimOnTrack: safariShim.shimOnTrack,\n    // shimPeerConnection: safariShim.shimPeerConnection\n  };\n\n  },{}],10:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n   /* eslint-env node */\n  'use strict';\n\n  var logDisabled_ = true;\n\n  // Utility methods.\n  var utils = {\n    disableLog: function(bool) {\n      if (typeof bool !== 'boolean') {\n        return new Error('Argument type: ' + typeof bool +\n            '. Please use a boolean.');\n      }\n      logDisabled_ = bool;\n      return (bool) ? 'adapter.js logging disabled' :\n          'adapter.js logging enabled';\n    },\n\n    log: function() {\n      if (typeof window === 'object') {\n        if (logDisabled_) {\n          return;\n        }\n        if (typeof console !== 'undefined' && typeof console.log === 'function') {\n          console.log.apply(console, arguments);\n        }\n      }\n    },\n\n    /**\n     * Extract browser version out of the provided user agent string.\n     *\n     * @param {!string} uastring userAgent string.\n     * @param {!string} expr Regular expression used as match criteria.\n     * @param {!number} pos position in the version string to be returned.\n     * @return {!number} browser version.\n     */\n    extractVersion: function(uastring, expr, pos) {\n      var match = uastring.match(expr);\n      return match && match.length >= pos && parseInt(match[pos], 10);\n    },\n\n    /**\n     * Browser detector.\n     *\n     * @return {object} result containing browser and version\n     *     properties.\n     */\n    detectBrowser: function() {\n      // Returned result object.\n      var result = {};\n      result.browser = null;\n      result.version = null;\n\n      // Fail early if it's not a browser\n      if (typeof window === 'undefined' || !window.navigator) {\n        result.browser = 'Not a browser.';\n        return result;\n      }\n\n      // Firefox.\n      if (navigator.mozGetUserMedia) {\n        result.browser = 'firefox';\n        result.version = this.extractVersion(navigator.userAgent,\n            /Firefox\\/([0-9]+)\\./, 1);\n\n      // all webkit-based browsers\n      } else if (navigator.webkitGetUserMedia) {\n        // Chrome, Chromium, Webview, Opera, all use the chrome shim for now\n        if (window.webkitRTCPeerConnection) {\n          result.browser = 'chrome';\n          result.version = this.extractVersion(navigator.userAgent,\n            /Chrom(e|ium)\\/([0-9]+)\\./, 2);\n\n        // Safari or unknown webkit-based\n        // for the time being Safari has support for MediaStreams but not webRTC\n        } else {\n          // Safari UA substrings of interest for reference:\n          // - webkit version:           AppleWebKit/602.1.25 (also used in Op,Cr)\n          // - safari UI version:        Version/9.0.3 (unique to Safari)\n          // - safari UI webkit version: Safari/601.4.4 (also used in Op,Cr)\n          //\n          // if the webkit version and safari UI webkit versions are equals,\n          // ... this is a stable version.\n          //\n          // only the internal webkit version is important today to know if\n          // media streams are supported\n          //\n          if (navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/)) {\n            result.browser = 'safari';\n            result.version = this.extractVersion(navigator.userAgent,\n              /AppleWebKit\\/([0-9]+)\\./, 1);\n\n          // unknown webkit-based browser\n          } else {\n            result.browser = 'Unsupported webkit-based browser ' +\n                'with GUM support but no WebRTC support.';\n            return result;\n          }\n        }\n\n      // Edge.\n      } else if (navigator.mediaDevices &&\n          navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n        result.browser = 'edge';\n        result.version = this.extractVersion(navigator.userAgent,\n            /Edge\\/(\\d+).(\\d+)$/, 2);\n\n      // Default fallthrough: not supported.\n      } else {\n        result.browser = 'Not a supported browser.';\n        return result;\n      }\n\n      return result;\n    }\n  };\n\n  // Export.\n  module.exports = {\n    log: utils.log,\n    disableLog: utils.disableLog,\n    browserDetails: utils.detectBrowser(),\n    extractVersion: utils.extractVersion\n  };\n\n  },{}]},{},[2])(2)\n});\n/* jshint ignore:end */\n\n  // END OF INJECTION OF GOOGLE'S ADAPTER.JS CONTENT\n  ///////////////////////////////////////////////////////////////////\n\n  AdapterJS.parseWebrtcDetectedBrowser();\n\n  ///////////////////////////////////////////////////////////////////\n  // EXTENSION FOR CHROME, FIREFOX AND EDGE\n  // Includes legacy functions\n  // -- createIceServer\n  // -- createIceServers\n  // -- MediaStreamTrack.getSources\n  //\n  // and additional shims\n  // -- attachMediaStream\n  // -- reattachMediaStream\n  // -- requestUserMedia\n  // -- a call to AdapterJS.maybeThroughWebRTCReady (notifies WebRTC is ready)\n\n  // Add support for legacy functions createIceServer and createIceServers\n  if ( navigator.mozGetUserMedia ) {\n    // Shim for MediaStreamTrack.getSources.\n    MediaStreamTrack.getSources = function(successCb) {\n      setTimeout(function() {\n        var infos = [\n          { kind: 'audio', id: 'default', label:'', facing:'' },\n          { kind: 'video', id: 'default', label:'', facing:'' }\n        ];\n        successCb(infos);\n      }, 0);\n    };\n\n    // Attach a media stream to an element.\n    attachMediaStream = function(element, stream) {\n      element.srcObject = stream;\n      return element;\n    };\n\n    reattachMediaStream = function(to, from) {\n      to.srcObject = from.srcObject;\n      return to;\n    };\n\n    createIceServer = function (url, username, password) {\n      console.warn('createIceServer is deprecated. It should be replaced with an application level implementation.');\n      // Note: Google's import of AJS will auto-reverse to 'url': '...' for FF < 38\n\n      var iceServer = null;\n      var urlParts = url.split(':');\n      if (urlParts[0].indexOf('stun') === 0) {\n        iceServer = { urls : [url] };\n      } else if (urlParts[0].indexOf('turn') === 0) {\n        if (webrtcDetectedVersion < 27) {\n          var turnUrlParts = url.split('?');\n          if (turnUrlParts.length === 1 ||\n            turnUrlParts[1].indexOf('transport=udp') === 0) {\n            iceServer = {\n              urls : [turnUrlParts[0]],\n              credential : password,\n              username : username\n            };\n          }\n        } else {\n          iceServer = {\n            urls : [url],\n            credential : password,\n            username : username\n          };\n        }\n      }\n      return iceServer;\n    };\n\n    createIceServers = function (urls, username, password) {\n      console.warn('createIceServers is deprecated. It should be replaced with an application level implementation.');\n\n      var iceServers = [];\n      for (i = 0; i < urls.length; i++) {\n        var iceServer = createIceServer(urls[i], username, password);\n        if (iceServer !== null) {\n          iceServers.push(iceServer);\n        }\n      }\n      return iceServers;\n    };\n  } else if ( navigator.webkitGetUserMedia ) {\n    // Attach a media stream to an element.\n    attachMediaStream = function(element, stream) {\n      if (webrtcDetectedVersion >= 43) {\n        element.srcObject = stream;\n      } else if (typeof element.src !== 'undefined') {\n        element.src = URL.createObjectURL(stream);\n      } else {\n        console.error('Error attaching stream to element.');\n        // logging('Error attaching stream to element.');\n      }\n      return element;\n    };\n\n    reattachMediaStream = function(to, from) {\n      if (webrtcDetectedVersion >= 43) {\n        to.srcObject = from.srcObject;\n      } else {\n        to.src = from.src;\n      }\n      return to;\n    };\n\n    createIceServer = function (url, username, password) {\n      console.warn('createIceServer is deprecated. It should be replaced with an application level implementation.');\n\n      var iceServer = null;\n      var urlParts = url.split(':');\n      if (urlParts[0].indexOf('stun') === 0) {\n        iceServer = { 'url' : url };\n      } else if (urlParts[0].indexOf('turn') === 0) {\n        iceServer = {\n          'url' : url,\n          'credential' : password,\n          'username' : username\n        };\n      }\n      return iceServer;\n    };\n\n    createIceServers = function (urls, username, password) {\n      console.warn('createIceServers is deprecated. It should be replaced with an application level implementation.');\n\n      var iceServers = [];\n      if (webrtcDetectedVersion >= 34) {\n        iceServers = {\n          'urls' : urls,\n          'credential' : password,\n          'username' : username\n        };\n      } else {\n        for (i = 0; i < urls.length; i++) {\n          var iceServer = createIceServer(urls[i], username, password);\n          if (iceServer !== null) {\n            iceServers.push(iceServer);\n          }\n        }\n      }\n      return iceServers;\n    };\n  } else if (navigator.mediaDevices && navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n    // Attach a media stream to an element.\n    attachMediaStream = function(element, stream) {\n      element.srcObject = stream;\n      return element;\n    };\n\n    reattachMediaStream = function(to, from) {\n      to.srcObject = from.srcObject;\n      return to;\n    };\n  }\n\n  // Need to override attachMediaStream and reattachMediaStream\n  // to support the plugin's logic\n  attachMediaStream_base = attachMediaStream;\n\n  if (webrtcDetectedBrowser === 'opera') {\n    attachMediaStream_base = function (element, stream) {\n      if (webrtcDetectedVersion > 38) {\n        element.srcObject = stream;\n      } else if (typeof element.src !== 'undefined') {\n        element.src = URL.createObjectURL(stream);\n      }\n      // Else it doesn't work\n    };\n  }\n\n  attachMediaStream = function (element, stream) {\n    if ((webrtcDetectedBrowser === 'chrome' ||\n         webrtcDetectedBrowser === 'opera') &&\n        !stream) {\n      // Chrome does not support \"src = null\"\n      element.src = '';\n    } else {\n      attachMediaStream_base(element, stream);\n    }\n    return element;\n  };\n  reattachMediaStream_base = reattachMediaStream;\n  reattachMediaStream = function (to, from) {\n    reattachMediaStream_base(to, from);\n    return to;\n  };\n\n  // Propagate attachMediaStream and gUM in window and AdapterJS\n  window.attachMediaStream      = attachMediaStream;\n  window.reattachMediaStream    = reattachMediaStream;\n  window.getUserMedia           = function(constraints, onSuccess, onFailure) {\n    navigator.getUserMedia(constraints, onSuccess, onFailure);\n  };\n  AdapterJS.attachMediaStream   = attachMediaStream;\n  AdapterJS.reattachMediaStream = reattachMediaStream;\n  AdapterJS.getUserMedia        = getUserMedia;\n\n  // Removed Google defined promises when promise is not defined\n  if (typeof Promise === 'undefined') {\n    requestUserMedia = null;\n  }\n\n  AdapterJS.maybeThroughWebRTCReady();\n\n  // END OF EXTENSION OF CHROME, FIREFOX AND EDGE\n  ///////////////////////////////////////////////////////////////////\n\n} else { // TRY TO USE PLUGIN\n\n  ///////////////////////////////////////////////////////////////////\n  // WEBRTC PLUGIN SHIM\n  // Will automatically check if the plugin is available and inject it\n  // into the DOM if it is.\n  // When the plugin is not available, will prompt a banner to suggest installing it\n  // Use AdapterJS.options.hidePluginInstallPrompt to prevent this banner from popping\n  //\n  // Shims the follwing:\n  // -- getUserMedia\n  // -- MediaStreamTrack\n  // -- MediaStreamTrack.getSources\n  // -- RTCPeerConnection\n  // -- RTCSessionDescription\n  // -- RTCIceCandidate\n  // -- createIceServer\n  // -- createIceServers\n  // -- attachMediaStream\n  // -- reattachMediaStream\n  // -- webrtcDetectedBrowser\n  // -- webrtcDetectedVersion\n\n  // IE 9 is not offering an implementation of console.log until you open a console\n  if (typeof console !== 'object' || typeof console.log !== 'function') {\n    /* jshint -W020 */\n    console = {} || console;\n    // Implemented based on console specs from MDN\n    // You may override these functions\n    console.log = function (arg) {};\n    console.info = function (arg) {};\n    console.error = function (arg) {};\n    console.dir = function (arg) {};\n    console.exception = function (arg) {};\n    console.trace = function (arg) {};\n    console.warn = function (arg) {};\n    console.count = function (arg) {};\n    console.debug = function (arg) {};\n    console.count = function (arg) {};\n    console.time = function (arg) {};\n    console.timeEnd = function (arg) {};\n    console.group = function (arg) {};\n    console.groupCollapsed = function (arg) {};\n    console.groupEnd = function (arg) {};\n    /* jshint +W020 */\n  }\n  AdapterJS.parseWebrtcDetectedBrowser();\n  isIE = webrtcDetectedBrowser === 'IE';\n\n  /* jshint -W035 */\n  AdapterJS.WebRTCPlugin.WaitForPluginReady = function() {\n    while (AdapterJS.WebRTCPlugin.pluginState !== AdapterJS.WebRTCPlugin.PLUGIN_STATES.READY) {\n      /* empty because it needs to prevent the function from running. */\n    }\n  };\n  /* jshint +W035 */\n\n  AdapterJS.WebRTCPlugin.callWhenPluginReady = function (callback) {\n    if (AdapterJS.WebRTCPlugin.pluginState === AdapterJS.WebRTCPlugin.PLUGIN_STATES.READY) {\n      // Call immediately if possible\n      // Once the plugin is set, the code will always take this path\n      callback();\n    } else {\n      // otherwise start a 100ms interval\n      var checkPluginReadyState = setInterval(function () {\n        if (AdapterJS.WebRTCPlugin.pluginState === AdapterJS.WebRTCPlugin.PLUGIN_STATES.READY) {\n          clearInterval(checkPluginReadyState);\n          callback();\n        }\n      }, 100);\n    }\n  };\n\n  AdapterJS.WebRTCPlugin.setLogLevel = function(logLevel) {\n    AdapterJS.WebRTCPlugin.callWhenPluginReady(function() {\n      AdapterJS.WebRTCPlugin.plugin.setLogLevel(logLevel);\n    });\n  };\n\n  AdapterJS.WebRTCPlugin.injectPlugin = function () {\n    // only inject once the page is ready\n    if (document.readyState !== 'complete') {\n      return;\n    }\n\n    // Prevent multiple injections\n    if (AdapterJS.WebRTCPlugin.pluginState !== AdapterJS.WebRTCPlugin.PLUGIN_STATES.INITIALIZING) {\n      return;\n    }\n\n    AdapterJS.WebRTCPlugin.pluginState = AdapterJS.WebRTCPlugin.PLUGIN_STATES.INJECTING;\n\n    if (webrtcDetectedBrowser === 'IE' && webrtcDetectedVersion <= 10) {\n      var frag = document.createDocumentFragment();\n      AdapterJS.WebRTCPlugin.plugin = document.createElement('div');\n      AdapterJS.WebRTCPlugin.plugin.innerHTML = '<object id=\"' +\n        AdapterJS.WebRTCPlugin.pluginInfo.pluginId + '\" type=\"' +\n        AdapterJS.WebRTCPlugin.pluginInfo.type + '\" ' + 'width=\"1\" height=\"1\">' +\n        '<param name=\"pluginId\" value=\"' +\n        AdapterJS.WebRTCPlugin.pluginInfo.pluginId + '\" /> ' +\n        '<param name=\"windowless\" value=\"false\" /> ' +\n        '<param name=\"pageId\" value=\"' + AdapterJS.WebRTCPlugin.pageId + '\" /> ' +\n        '<param name=\"onload\" value=\"' + AdapterJS.WebRTCPlugin.pluginInfo.onload + '\" />' +\n        '<param name=\"tag\" value=\"' + AdapterJS.WebRTCPlugin.TAGS.NONE + '\" />' +\n        // uncomment to be able to use virtual cams\n        (AdapterJS.options.getAllCams ? '<param name=\"forceGetAllCams\" value=\"True\" />':'') +\n\n        '</object>';\n      while (AdapterJS.WebRTCPlugin.plugin.firstChild) {\n        frag.appendChild(AdapterJS.WebRTCPlugin.plugin.firstChild);\n      }\n      document.body.appendChild(frag);\n\n      // Need to re-fetch the plugin\n      AdapterJS.WebRTCPlugin.plugin =\n        document.getElementById(AdapterJS.WebRTCPlugin.pluginInfo.pluginId);\n    } else {\n      // Load Plugin\n      AdapterJS.WebRTCPlugin.plugin = document.createElement('object');\n      AdapterJS.WebRTCPlugin.plugin.id =\n        AdapterJS.WebRTCPlugin.pluginInfo.pluginId;\n      // IE will only start the plugin if it's ACTUALLY visible\n      if (isIE) {\n        AdapterJS.WebRTCPlugin.plugin.width = '1px';\n        AdapterJS.WebRTCPlugin.plugin.height = '1px';\n      } else { // The size of the plugin on Safari should be 0x0px\n              // so that the autorisation prompt is at the top\n        AdapterJS.WebRTCPlugin.plugin.width = '0px';\n        AdapterJS.WebRTCPlugin.plugin.height = '0px';\n      }\n      AdapterJS.WebRTCPlugin.plugin.type = AdapterJS.WebRTCPlugin.pluginInfo.type;\n      AdapterJS.WebRTCPlugin.plugin.innerHTML = '<param name=\"onload\" value=\"' +\n        AdapterJS.WebRTCPlugin.pluginInfo.onload + '\">' +\n        '<param name=\"pluginId\" value=\"' +\n        AdapterJS.WebRTCPlugin.pluginInfo.pluginId + '\">' +\n        '<param name=\"windowless\" value=\"false\" /> ' +\n        (AdapterJS.options.getAllCams ? '<param name=\"forceGetAllCams\" value=\"True\" />':'') +\n        '<param name=\"pageId\" value=\"' + AdapterJS.WebRTCPlugin.pageId + '\">' +\n        '<param name=\"tag\" value=\"' + AdapterJS.WebRTCPlugin.TAGS.NONE + '\" />';\n      document.body.appendChild(AdapterJS.WebRTCPlugin.plugin);\n    }\n\n\n    AdapterJS.WebRTCPlugin.pluginState = AdapterJS.WebRTCPlugin.PLUGIN_STATES.INJECTED;\n  };\n\n  AdapterJS.WebRTCPlugin.isPluginInstalled =\n    function (comName, plugName, plugType, installedCb, notInstalledCb) {\n    if (!isIE) {\n      var pluginArray = navigator.mimeTypes;\n      for (var i = 0; i < pluginArray.length; i++) {\n        if (pluginArray[i].type.indexOf(plugType) >= 0) {\n          installedCb();\n          return;\n        }\n      }\n      notInstalledCb();\n    } else {\n      try {\n        var axo = new ActiveXObject(comName + '.' + plugName);\n      } catch (e) {\n        notInstalledCb();\n        return;\n      }\n      installedCb();\n    }\n  };\n\n  AdapterJS.WebRTCPlugin.defineWebRTCInterface = function () {\n    if (AdapterJS.WebRTCPlugin.pluginState ===\n        AdapterJS.WebRTCPlugin.PLUGIN_STATES.READY) {\n      console.error('AdapterJS - WebRTC interface has already been defined');\n      return;\n    }\n\n    AdapterJS.WebRTCPlugin.pluginState = AdapterJS.WebRTCPlugin.PLUGIN_STATES.INITIALIZING;\n\n    AdapterJS.isDefined = function (variable) {\n      return variable !== null && variable !== undefined;\n    };\n\n    createIceServer = function (url, username, password) {\n      var iceServer = null;\n      var urlParts = url.split(':');\n      if (urlParts[0].indexOf('stun') === 0) {\n        iceServer = {\n          'url' : url,\n          'hasCredentials' : false\n        };\n      } else if (urlParts[0].indexOf('turn') === 0) {\n        iceServer = {\n          'url' : url,\n          'hasCredentials' : true,\n          'credential' : password,\n          'username' : username\n        };\n      }\n      return iceServer;\n    };\n\n    createIceServers = function (urls, username, password) {\n      var iceServers = [];\n      for (var i = 0; i < urls.length; ++i) {\n        iceServers.push(createIceServer(urls[i], username, password));\n      }\n      return iceServers;\n    };\n\n    RTCSessionDescription = function (info) {\n      AdapterJS.WebRTCPlugin.WaitForPluginReady();\n      return AdapterJS.WebRTCPlugin.plugin.\n        ConstructSessionDescription(info.type, info.sdp);\n    };\n\n    RTCPeerConnection = function (servers, constraints) {\n      // Validate server argumenr\n      if (!(servers === undefined ||\n            servers === null ||\n            Array.isArray(servers.iceServers))) {\n        throw new Error('Failed to construct \\'RTCPeerConnection\\': Malformed RTCConfiguration');\n      }\n\n      // Validate constraints argument\n      if (typeof constraints !== 'undefined' && constraints !== null) {\n        var invalidConstraits = false;\n        invalidConstraits |= typeof constraints !== 'object';\n        invalidConstraits |= constraints.hasOwnProperty('mandatory') &&\n                              constraints.mandatory !== undefined &&\n                              constraints.mandatory !== null &&\n                              constraints.mandatory.constructor !== Object;\n        invalidConstraits |= constraints.hasOwnProperty('optional') &&\n                              constraints.optional !== undefined &&\n                              constraints.optional !== null &&\n                              !Array.isArray(constraints.optional);\n        if (invalidConstraits) {\n          throw new Error('Failed to construct \\'RTCPeerConnection\\': Malformed constraints object');\n        }\n      }\n\n      // Call relevant PeerConnection constructor according to plugin version\n      AdapterJS.WebRTCPlugin.WaitForPluginReady();\n\n      // RTCPeerConnection prototype from the old spec\n      var iceServers = null;\n      if (servers && Array.isArray(servers.iceServers)) {\n        iceServers = servers.iceServers;\n        for (var i = 0; i < iceServers.length; i++) {\n          // Legacy plugin versions compatibility\n          if (iceServers[i].urls && !iceServers[i].url) {\n            iceServers[i].url = iceServers[i].urls;\n          }\n          iceServers[i].hasCredentials = AdapterJS.\n            isDefined(iceServers[i].username) &&\n            AdapterJS.isDefined(iceServers[i].credential);\n        }\n      }\n\n      if (AdapterJS.WebRTCPlugin.plugin.PEER_CONNECTION_VERSION &&\n          AdapterJS.WebRTCPlugin.plugin.PEER_CONNECTION_VERSION > 1) {\n        // RTCPeerConnection prototype from the new spec\n        if (iceServers) {\n          servers.iceServers = iceServers;\n        }\n        return AdapterJS.WebRTCPlugin.plugin.PeerConnection(servers);\n      } else {\n        var mandatory = (constraints && constraints.mandatory) ?\n          constraints.mandatory : null;\n        var optional = (constraints && constraints.optional) ?\n          constraints.optional : null;\n        return AdapterJS.WebRTCPlugin.plugin.\n          PeerConnection(AdapterJS.WebRTCPlugin.pageId,\n          iceServers, mandatory, optional);\n      }\n    };\n\n    MediaStreamTrack = function(){};\n    MediaStreamTrack.getSources = function (callback) {\n      AdapterJS.WebRTCPlugin.callWhenPluginReady(function() {\n        AdapterJS.WebRTCPlugin.plugin.GetSources(callback);\n      });\n    };\n\n    // getUserMedia constraints shim.\n    // Copied from Chrome\n    var constraintsToPlugin = function(c) {\n      if (typeof c !== 'object' || c.mandatory || c.optional) {\n        return c;\n      }\n      var cc = {};\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n        if (r.exact !== undefined && typeof r.exact === 'number') {\n          r.min = r.max = r.exact;\n        }\n        var oldname = function(prefix, name) {\n          if (prefix) {\n            return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n          }\n          return (name === 'deviceId') ? 'sourceId' : name;\n        };\n        if (r.ideal !== undefined) {\n          cc.optional = cc.optional || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[oldname('min', key)] = r.ideal;\n            cc.optional.push(oc);\n            oc = {};\n            oc[oldname('max', key)] = r.ideal;\n            cc.optional.push(oc);\n          } else {\n            oc[oldname('', key)] = r.ideal;\n            cc.optional.push(oc);\n          }\n        }\n        if (r.exact !== undefined && typeof r.exact !== 'number') {\n          cc.mandatory = cc.mandatory || {};\n          cc.mandatory[oldname('', key)] = r.exact;\n        } else {\n          ['min', 'max'].forEach(function(mix) {\n            if (r[mix] !== undefined) {\n              cc.mandatory = cc.mandatory || {};\n              cc.mandatory[oldname(mix, key)] = r[mix];\n            }\n          });\n        }\n      });\n      if (c.advanced) {\n        cc.optional = (cc.optional || []).concat(c.advanced);\n      }\n      return cc;\n    };\n\n    getUserMedia = function (constraints, successCallback, failureCallback) {\n      var cc = {};\n      cc.audio = constraints.audio ?\n        constraintsToPlugin(constraints.audio) : false;\n      cc.video = constraints.video ?\n        constraintsToPlugin(constraints.video) : false;\n\n      AdapterJS.WebRTCPlugin.callWhenPluginReady(function() {\n        AdapterJS.WebRTCPlugin.plugin.\n          getUserMedia(cc, successCallback, failureCallback);\n      });\n    };\n    window.navigator.getUserMedia = getUserMedia;\n\n    // Defined mediaDevices when promises are available\n    if ( !navigator.mediaDevices &&\n      typeof Promise !== 'undefined') {\n      requestUserMedia = function(constraints) {\n        return new Promise(function(resolve, reject) {\n          getUserMedia(constraints, resolve, reject);\n        });\n      };\n      navigator.mediaDevices = {getUserMedia: requestUserMedia,\n                                enumerateDevices: function() {\n        return new Promise(function(resolve) {\n          var kinds = {audio: 'audioinput', video: 'videoinput'};\n          return MediaStreamTrack.getSources(function(devices) {\n            resolve(devices.map(function(device) {\n              return {label: device.label,\n                      kind: kinds[device.kind],\n                      id: device.id,\n                      deviceId: device.id,\n                      groupId: ''};\n            }));\n          });\n        });\n      }};\n    }\n\n    attachMediaStream = function (element, stream) {\n      if (!element || !element.parentNode) {\n        return;\n      }\n\n      var streamId;\n      if (stream === null) {\n        streamId = '';\n      } else {\n        if (typeof stream.enableSoundTracks !== 'undefined') {\n          stream.enableSoundTracks(true);\n        }\n        streamId = stream.id;\n      }\n\n      var elementId = element.id.length === 0 ? Math.random().toString(36).slice(2) : element.id;\n      var nodeName = element.nodeName.toLowerCase();\n      if (nodeName !== 'object') { // not a plugin <object> tag yet\n        var tag;\n        switch(nodeName) {\n          case 'audio':\n            tag = AdapterJS.WebRTCPlugin.TAGS.AUDIO;\n            break;\n          case 'video':\n            tag = AdapterJS.WebRTCPlugin.TAGS.VIDEO;\n            break;\n          default:\n            tag = AdapterJS.WebRTCPlugin.TAGS.NONE;\n          }\n\n        var frag = document.createDocumentFragment();\n        var temp = document.createElement('div');\n        var classHTML = '';\n        if (element.className) {\n          classHTML = 'class=\"' + element.className + '\" ';\n        } else if (element.attributes && element.attributes['class']) {\n          classHTML = 'class=\"' + element.attributes['class'].value + '\" ';\n        }\n\n        temp.innerHTML = '<object id=\"' + elementId + '\" ' + classHTML +\n          'type=\"' + AdapterJS.WebRTCPlugin.pluginInfo.type + '\">' +\n          '<param name=\"pluginId\" value=\"' + elementId + '\" /> ' +\n          '<param name=\"pageId\" value=\"' + AdapterJS.WebRTCPlugin.pageId + '\" /> ' +\n          '<param name=\"windowless\" value=\"true\" /> ' +\n          '<param name=\"streamId\" value=\"' + streamId + '\" /> ' +\n          '<param name=\"tag\" value=\"' + tag + '\" /> ' +\n          '</object>';\n        while (temp.firstChild) {\n          frag.appendChild(temp.firstChild);\n        }\n\n        var height = '';\n        var width = '';\n        if (element.clientWidth || element.clientHeight) {\n          width = element.clientWidth;\n          height = element.clientHeight;\n        }\n        else if (element.width || element.height) {\n          width = element.width;\n          height = element.height;\n        }\n\n        element.parentNode.insertBefore(frag, element);\n        frag = document.getElementById(elementId);\n        frag.width = width;\n        frag.height = height;\n        element.parentNode.removeChild(element);\n      } else { // already an <object> tag, just change the stream id\n        var children = element.children;\n        for (var i = 0; i !== children.length; ++i) {\n          if (children[i].name === 'streamId') {\n            children[i].value = streamId;\n            break;\n          }\n        }\n        element.setStreamId(streamId);\n      }\n      var newElement = document.getElementById(elementId);\n      AdapterJS.forwardEventHandlers(newElement, element, Object.getPrototypeOf(element));\n\n      return newElement;\n    };\n\n    reattachMediaStream = function (to, from) {\n      var stream = null;\n      var children = from.children;\n      for (var i = 0; i !== children.length; ++i) {\n        if (children[i].name === 'streamId') {\n          AdapterJS.WebRTCPlugin.WaitForPluginReady();\n          stream = AdapterJS.WebRTCPlugin.plugin\n            .getStreamWithId(AdapterJS.WebRTCPlugin.pageId, children[i].value);\n          break;\n        }\n      }\n      if (stream !== null) {\n        return attachMediaStream(to, stream);\n      } else {\n        console.log('Could not find the stream associated with this element');\n      }\n    };\n\n    // Propagate attachMediaStream and gUM in window and AdapterJS\n    window.attachMediaStream      = attachMediaStream;\n    window.reattachMediaStream    = reattachMediaStream;\n    window.getUserMedia           = getUserMedia;\n    AdapterJS.attachMediaStream   = attachMediaStream;\n    AdapterJS.reattachMediaStream = reattachMediaStream;\n    AdapterJS.getUserMedia        = getUserMedia;\n\n    AdapterJS.forwardEventHandlers = function (destElem, srcElem, prototype) {\n      properties = Object.getOwnPropertyNames( prototype );\n      for(var prop in properties) {\n        if (prop) {\n          propName = properties[prop];\n\n          if (typeof propName.slice === 'function' &&\n              propName.slice(0,2) === 'on' &&\n              typeof srcElem[propName] === 'function') {\n              AdapterJS.addEvent(destElem, propName.slice(2), srcElem[propName]);\n          }\n        }\n      }\n      var subPrototype = Object.getPrototypeOf(prototype);\n      if(!!subPrototype) {\n        AdapterJS.forwardEventHandlers(destElem, srcElem, subPrototype);\n      }\n    };\n\n    RTCIceCandidate = function (candidate) {\n      if (!candidate.sdpMid) {\n        candidate.sdpMid = '';\n      }\n\n      AdapterJS.WebRTCPlugin.WaitForPluginReady();\n      return AdapterJS.WebRTCPlugin.plugin.ConstructIceCandidate(\n        candidate.sdpMid, candidate.sdpMLineIndex, candidate.candidate\n      );\n    };\n\n    // inject plugin\n    AdapterJS.addEvent(document, 'readystatechange', AdapterJS.WebRTCPlugin.injectPlugin);\n    AdapterJS.WebRTCPlugin.injectPlugin();\n  };\n\n  // This function will be called if the plugin is needed (browser different\n  // from Chrome or Firefox), but the plugin is not installed.\n  AdapterJS.WebRTCPlugin.pluginNeededButNotInstalledCb = AdapterJS.WebRTCPlugin.pluginNeededButNotInstalledCb ||\n    function() {\n      AdapterJS.addEvent(document,\n                        'readystatechange',\n                         AdapterJS.WebRTCPlugin.pluginNeededButNotInstalledCbPriv);\n      AdapterJS.WebRTCPlugin.pluginNeededButNotInstalledCbPriv();\n    };\n\n  AdapterJS.WebRTCPlugin.pluginNeededButNotInstalledCbPriv = function () {\n    if (AdapterJS.options.hidePluginInstallPrompt) {\n      return;\n    }\n\n    var downloadLink = AdapterJS.WebRTCPlugin.pluginInfo.downloadLink;\n    if(downloadLink) { // if download link\n      var popupString;\n      if (AdapterJS.WebRTCPlugin.pluginInfo.portalLink) { // is portal link\n       popupString = 'This website requires you to install the ' +\n        ' <a href=\"' + AdapterJS.WebRTCPlugin.pluginInfo.portalLink +\n        '\" target=\"_blank\">' + AdapterJS.WebRTCPlugin.pluginInfo.companyName +\n        ' WebRTC Plugin</a>' +\n        ' to work on this browser.';\n      } else { // no portal link, just print a generic explanation\n       popupString = AdapterJS.TEXT.PLUGIN.REQUIRE_INSTALLATION;\n      }\n\n      AdapterJS.renderNotificationBar(popupString, AdapterJS.TEXT.PLUGIN.BUTTON, downloadLink);\n    } else { // no download link, just print a generic explanation\n      AdapterJS.renderNotificationBar(AdapterJS.TEXT.PLUGIN.NOT_SUPPORTED);\n    }\n  };\n\n\n  // Try to detect the plugin and act accordingly\n  AdapterJS.WebRTCPlugin.isPluginInstalled(\n    AdapterJS.WebRTCPlugin.pluginInfo.prefix,\n    AdapterJS.WebRTCPlugin.pluginInfo.plugName,\n    AdapterJS.WebRTCPlugin.pluginInfo.type,\n    AdapterJS.WebRTCPlugin.defineWebRTCInterface,\n    AdapterJS.WebRTCPlugin.pluginNeededButNotInstalledCb);\n\n  // END OF WEBRTC PLUGIN SHIM\n  ///////////////////////////////////////////////////////////////////\n}\n\n(function () {\n\n  'use strict';\n\n  var baseGetUserMedia = null;\n\n  AdapterJS.TEXT.EXTENSION = {\n    REQUIRE_INSTALLATION_FF: 'To enable screensharing you need to install the Skylink WebRTC tools Firefox Add-on.',\n    REQUIRE_INSTALLATION_CHROME: 'To enable screensharing you need to install the Skylink WebRTC tools Chrome Extension.',\n    REQUIRE_REFRESH: 'Please refresh this page after the Skylink WebRTC tools extension has been installed.',\n    BUTTON_FF: 'Install Now',\n    BUTTON_CHROME: 'Go to Chrome Web Store'\n  };\n\n  var clone = function(obj) {\n    if (null === obj || 'object' !== typeof obj) {\n      return obj;\n    }\n    var copy = obj.constructor();\n    for (var attr in obj) {\n      if (obj.hasOwnProperty(attr)) {\n        copy[attr] = obj[attr];\n      }\n    }\n    return copy;\n  };\n\n  if (window.navigator.mozGetUserMedia) {\n    baseGetUserMedia = window.navigator.getUserMedia;\n\n    navigator.getUserMedia = function (constraints, successCb, failureCb) {\n\n      if (constraints && constraints.video && !!constraints.video.mediaSource) {\n        // intercepting screensharing requests\n\n        // Invalid mediaSource for firefox, only \"screen\" and \"window\" are supported\n        if (constraints.video.mediaSource !== 'screen' && constraints.video.mediaSource !== 'window') {\n          failureCb(new Error('GetUserMedia: Only \"screen\" and \"window\" are supported as mediaSource constraints'));\n          return;\n        }\n\n        var updatedConstraints = clone(constraints);\n\n        //constraints.video.mediaSource = constraints.video.mediaSource;\n        updatedConstraints.video.mozMediaSource = updatedConstraints.video.mediaSource;\n\n        // so generally, it requires for document.readyState to be completed before the getUserMedia could be invoked.\n        // strange but this works anyway\n        var checkIfReady = setInterval(function () {\n          if (document.readyState === 'complete') {\n            clearInterval(checkIfReady);\n\n            baseGetUserMedia(updatedConstraints, successCb, function (error) {\n              if (['PermissionDeniedError', 'SecurityError'].indexOf(error.name) > -1 && window.parent.location.protocol === 'https:') {\n                AdapterJS.renderNotificationBar(AdapterJS.TEXT.EXTENSION.REQUIRE_INSTALLATION_FF,\n                  AdapterJS.TEXT.EXTENSION.BUTTON_FF,\n                  'https://addons.mozilla.org/en-US/firefox/addon/skylink-webrtc-tools/', true, true);\n              } else {\n                failureCb(error);\n              }\n            });\n          }\n        }, 1);\n\n      } else { // regular GetUserMediaRequest\n        baseGetUserMedia(constraints, successCb, failureCb);\n      }\n    };\n\n    AdapterJS.getUserMedia = window.getUserMedia = navigator.getUserMedia;\n    /* Comment out to prevent recursive errors\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return new Promise(function(resolve, reject) {\n        window.getUserMedia(constraints, resolve, reject);\n      });\n    };*/\n\n  } else if (window.navigator.webkitGetUserMedia && window.webrtcDetectedBrowser !== 'safari') {\n    baseGetUserMedia = window.navigator.getUserMedia;\n\n    navigator.getUserMedia = function (constraints, successCb, failureCb) {\n      if (constraints && constraints.video && !!constraints.video.mediaSource) {\n        if (window.webrtcDetectedBrowser !== 'chrome') {\n          // This is Opera, which does not support screensharing\n          failureCb(new Error('Current browser does not support screensharing'));\n          return;\n        }\n\n        // would be fine since no methods\n        var updatedConstraints = clone(constraints);\n\n        var chromeCallback = function(error, sourceId) {\n          if(!error) {\n            updatedConstraints.video.mandatory = updatedConstraints.video.mandatory || {};\n            updatedConstraints.video.mandatory.chromeMediaSource = 'desktop';\n            updatedConstraints.video.mandatory.maxWidth = window.screen.width > 1920 ? window.screen.width : 1920;\n            updatedConstraints.video.mandatory.maxHeight = window.screen.height > 1080 ? window.screen.height : 1080;\n\n            if (sourceId) {\n              updatedConstraints.video.mandatory.chromeMediaSourceId = sourceId;\n            }\n\n            delete updatedConstraints.video.mediaSource;\n\n            baseGetUserMedia(updatedConstraints, successCb, failureCb);\n\n          } else { // GUM failed\n            if (error === 'permission-denied') {\n              failureCb(new Error('Permission denied for screen retrieval'));\n            } else {\n              // NOTE(J-O): I don't think we ever pass in here.\n              // A failure to capture the screen does not lead here.\n              failureCb(new Error('Failed retrieving selected screen'));\n            }\n          }\n        };\n\n        var onIFrameCallback = function (event) {\n          if (!event.data) {\n            return;\n          }\n\n          if (event.data.chromeMediaSourceId) {\n            if (event.data.chromeMediaSourceId === 'PermissionDeniedError') {\n                chromeCallback('permission-denied');\n            } else {\n              chromeCallback(null, event.data.chromeMediaSourceId);\n            }\n          }\n\n          if (event.data.chromeExtensionStatus) {\n            if (event.data.chromeExtensionStatus === 'not-installed') {\n              AdapterJS.renderNotificationBar(AdapterJS.TEXT.EXTENSION.REQUIRE_INSTALLATION_CHROME,\n                AdapterJS.TEXT.EXTENSION.BUTTON_CHROME,\n                event.data.data, true, true);\n            } else {\n              chromeCallback(event.data.chromeExtensionStatus, null);\n            }\n          }\n\n          // this event listener is no more needed\n          window.removeEventListener('message', onIFrameCallback);\n        };\n\n        window.addEventListener('message', onIFrameCallback);\n\n        postFrameMessage({\n          captureSourceId: true\n        });\n\n      } else {\n        baseGetUserMedia(constraints, successCb, failureCb);\n      }\n    };\n\n    AdapterJS.getUserMedia = window.getUserMedia = navigator.getUserMedia;\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return new Promise(function(resolve, reject) {\n        window.getUserMedia(constraints, resolve, reject);\n      });\n    };\n\n  } else if (navigator.mediaDevices && navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n    // nothing here because edge does not support screensharing\n    console.warn('Edge does not support screensharing feature in getUserMedia');\n\n  } else {\n    baseGetUserMedia = window.navigator.getUserMedia;\n\n    navigator.getUserMedia = function (constraints, successCb, failureCb) {\n      if (constraints && constraints.video && !!constraints.video.mediaSource) {\n        // would be fine since no methods\n        var updatedConstraints = clone(constraints);\n\n        // wait for plugin to be ready\n        AdapterJS.WebRTCPlugin.callWhenPluginReady(function() {\n          // check if screensharing feature is available\n          if (!!AdapterJS.WebRTCPlugin.plugin.HasScreensharingFeature &&\n            !!AdapterJS.WebRTCPlugin.plugin.isScreensharingAvailable) {\n            // set the constraints\n            updatedConstraints.video.optional = updatedConstraints.video.optional || [];\n            updatedConstraints.video.optional.push({\n              sourceId: AdapterJS.WebRTCPlugin.plugin.screensharingKey || 'Screensharing'\n            });\n\n            delete updatedConstraints.video.mediaSource;\n          } else {\n            failureCb(new Error('Your version of the WebRTC plugin does not support screensharing'));\n            return;\n          }\n          baseGetUserMedia(updatedConstraints, successCb, failureCb);\n        });\n      } else {\n        baseGetUserMedia(constraints, successCb, failureCb);\n      }\n    };\n\n    AdapterJS.getUserMedia = getUserMedia =\n       window.getUserMedia = navigator.getUserMedia;\n    if ( navigator.mediaDevices &&\n      typeof Promise !== 'undefined') {\n      navigator.mediaDevices.getUserMedia = typeof requestUserMedia === 'undefined' ? undefined : requestUserMedia;\n    }\n  }\n\n  // For chrome, use an iframe to load the screensharing extension\n  // in the correct domain.\n  // Modify here for custom screensharing extension in chrome\n  if (window.webrtcDetectedBrowser === 'chrome') {\n    var iframe = document.createElement('iframe');\n\n    iframe.onload = function() {\n      iframe.isLoaded = true;\n    };\n\n    iframe.src = 'https://cdn.temasys.com.sg/skylink/extensions/detectRTC.html';\n    iframe.style.display = 'none';\n\n    (document.body || document.documentElement).appendChild(iframe);\n\n    var postFrameMessage = function (object) { // jshint ignore:line\n      object = object || {};\n\n      if (!iframe.isLoaded) {\n        setTimeout(function () {\n          iframe.contentWindow.postMessage(object, '*');\n        }, 100);\n        return;\n      }\n\n      iframe.contentWindow.postMessage(object, '*');\n    };\n  } else if (window.webrtcDetectedBrowser === 'opera') {\n    console.warn('Opera does not support screensharing feature in getUserMedia');\n  }\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/RTC/adapter.screenshare.js\n// module id = 37\n// module chunks = 0","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Ordered log levels.\n */\nvar levels = {\n    \"trace\": 0,\n    \"debug\": 1,\n    \"info\": 2,\n    \"log\": 3,\n    \"warn\": 4,\n    \"error\": 5\n};\n\n/**\n * The default transport - console\n * @type LoggerTransport\n */\nLogger.consoleTransport = console;\n\n/**\n * The array which stores currently registered global transports.\n * @type {[LoggerTransport]}\n */\nvar globalTransports = [ Logger.consoleTransport ];\n\n/**\n * Adds given {@link LoggerTransport} instance to the list of global\n * transports which means that it'll be used by all {@link Logger}s\n * @param {LoggerTransport} transport\n */\nLogger.addGlobalTransport = function(transport) {\n    if (globalTransports.indexOf(transport) === -1) {\n        globalTransports.push(transport);\n    }\n};\n\n/**\n * Removes given {@link LoggerTransport} instance from the list of global\n * transports\n * @param {LoggerTransport} transport\n */\nLogger.removeGlobalTransport = function(transport) {\n    var transportIdx = globalTransports.indexOf(transport);\n    if (transportIdx !== -1) {\n        globalTransports.splice(transportIdx, 1);\n    }\n};\n\n/**\n * Parses Error's object stack trace and extracts information about the last\n * caller before the log method was called.\n * @returns JS object with info about the caller - method name, file location,\n * line and column.\n */\nfunction getCallerInfo() {\n    var callerInfo = {\n        methodName: \"\",\n        fileLocation: \"\",\n        line: null,\n        column: null\n    };\n    //gets the part of the stack without the logger wrappers\n    var error = new Error();\n    var stack = error.stack? error.stack.split(\"\\n\") : [];\n    if(!stack || stack.length < 1) {\n        return callerInfo;\n    }\n    var m = null;\n    if(stack[3]) {\n        m = stack[3].match(/\\s*at\\s*(.+?)\\s*\\((\\S*)\\s*:(\\d*)\\s*:(\\d*)\\)/);\n    }\n    if(!m || m.length <= 4) {\n        //Firefox && Safari\n        if(stack[2].indexOf(\"log@\") === 0){\n            //Safari\n            callerInfo.methodName = stack[3].substr(0, stack[3].indexOf(\"@\"));\n        } else {\n            //Firefox\n            callerInfo.methodName = stack[2].substr(0, stack[2].indexOf(\"@\"));\n        }\n        return callerInfo;\n    }\n\n    callerInfo.methodName = m[1];\n    callerInfo.fileLocation = m[2];\n    callerInfo.line = m[3];\n    callerInfo.column = m[4];\n    return callerInfo;\n}\n\n/**\n * Logs messages using the transports and level from the logger.\n * @param logger a logger instance.\n * @param level the log level of the message. See the levels variable.\n * @param arguments array with arguments that will be logged.\n */\nfunction log() {\n    var logger = arguments[0], level = arguments[1],\n        args = Array.prototype.slice.call(arguments, 2);\n    if(levels[level] < logger.level) {\n        return;\n    }\n\n    var callerInfo = getCallerInfo();\n    var transports = globalTransports.concat(logger.transports);\n    for(var i = 0; i < transports.length; i++) {\n        var t = transports[i];\n        var l = t[level];\n        if(l && typeof(l) === \"function\") {\n            l.bind(t, logger.id? \"[\" + logger.id + \"]\" : \"\", \"<\" + callerInfo.methodName + \">: \")\n                .apply(t, args);\n        }\n    }\n}\n\n/**\n *\n * Constructs new logger object.\n * @param level the logging level for the new logger\n * @param id optional identifier for the logger instance.\n * @param {LoggerTransport} transports optional list of handlers(objects) for\n * the logs. The handlers must support - log, warn, error, debug, info, trace.\n * @param format optional (NOT implemented) string.\n */\nfunction Logger(level, id, transports, format) {\n    this.id = id;\n    this.format = format;\n    this.transports = transports;\n    if(!this.transports) {\n        this.transports = [];\n    }\n    this.level = levels[level];\n    var methods = Object.keys(levels);\n    for(var i = 0; i < methods.length; i++){\n        this[methods[i]] =\n            log.bind(null, this, methods[i]);\n    }\n}\n\n/**\n * Sets the log level for the logger.\n * @param level the new log level.\n */\nLogger.prototype.setLevel = function (level) {\n    this.level = levels[level];\n};\nmodule.exports = Logger;\n\n/**\n * Enum for the supported log levels.\n */\nLogger.levels = {\n    TRACE: \"trace\",\n    DEBUG: \"debug\",\n    INFO: \"info\",\n    LOG: \"log\",\n    WARN: \"warn\",\n    ERROR: \"error\"\n};\n\n\n\n// WEBPACK FOOTER //\n// ../jitsi-meet-logger/lib/Logger.js","import bowser from 'bowser';\n\nimport {\n    CHROME,\n    OPERA,\n    FIREFOX,\n    INTERNET_EXPLORER,\n    EDGE,\n    SAFARI,\n    NWJS,\n    ELECTRON,\n    REACT_NATIVE,\n    UNKNOWN\n} from './browsers';\n\n/**\n * Maps the names of the browsers from bowser to the internal names defined in\n * ./browsers.js\n */\nconst bowserNameToJitsiName = {\n    'Chrome': CHROME,\n    'Chromium': CHROME,\n    'Opera': OPERA,\n    'Firefox': FIREFOX,\n    'Internet Explorer': INTERNET_EXPLORER,\n    'Microsoft Edge': EDGE,\n    'Safari': SAFARI\n};\n\n/**\n * Detects Electron environment.\n *\n * @returns {Object} - The name (ELECTRON) and version.\n */\nfunction _detectElectron() {\n    const userAgent = navigator.userAgent;\n\n    if (userAgent.match(/Electron/)) {\n        const version = userAgent.match(/Electron\\/([\\d.]+)/)[1];\n\n        return {\n            name: ELECTRON,\n            version\n        };\n    }\n}\n\n/**\n * Detects NWJS environment.\n *\n * @returns {Object} - The name (NWJS) and version.\n */\nfunction _detectNWJS() {\n    const userAgent = navigator.userAgent;\n\n    if (userAgent.match(/JitsiMeetNW/)) {\n        const version = userAgent.match(/JitsiMeetNW\\/([\\d.]+)/)[1];\n\n        return {\n            name: NWJS,\n            version\n        };\n    }\n}\n\n/**\n * Detects React Native environment.\n * @returns {Object} - The name (REACT_NATIVE) and version\n */\nfunction _detectReactNative() {\n    const match\n        = navigator.userAgent.match(/\\b(react[ \\t_-]*native)(?:\\/(\\S+))?/i);\n    let version;\n\n    // If we're remote debugging a React Native app, it may be treated as\n    // Chrome. Check navigator.product as well and always return some version\n    // even if we can't get the real one.\n\n    if (match || navigator.product === 'ReactNative') {\n        let name;\n\n        if (match && match.length > 2) {\n            name = match[1];\n            version = match[2];\n        }\n        name || (name = 'react-native');\n        version || (version = 'unknown');\n\n        return {\n            name: REACT_NATIVE,\n            version\n        };\n    }\n}\n\n/**\n * Returns information about the current browser.\n *\n * @returns {Object} - The name and version of the browser.\n */\nfunction _detect() {\n    let browserInfo;\n    const detectors = [\n        _detectReactNative,\n        _detectElectron,\n        _detectNWJS\n    ];\n\n    // Try all browser detectors\n    for (let i = 0; i < detectors.length; i++) {\n        browserInfo = detectors[i]();\n        if (browserInfo) {\n            return browserInfo;\n        }\n    }\n\n    const { name, version } = bowser;\n\n    if (name in bowserNameToJitsiName) {\n\n        return {\n            name: bowserNameToJitsiName[name],\n            version\n        };\n    }\n\n    return {\n        name: UNKNOWN,\n        version: undefined\n    };\n}\n\n/**\n * Implements browser detection.\n */\nexport default class BrowserDetection {\n    /**\n     * Creates new BrowserDetection instance.\n     *\n     * @param {Object} [browserInfo] - Information about the browser.\n     * @param {string} browserInfo.name - The name of the browser.\n     * @param {string} browserInfo.version - The version of the browser.\n     */\n    constructor(browserInfo) {\n        let name, version;\n\n        if (typeof browserInfo === 'undefined') {\n            const detectedBrowserInfo = _detect();\n\n            name = detectedBrowserInfo.name;\n            version = detectedBrowserInfo.version;\n        } else if (browserInfo.name in bowserNameToJitsiName) {\n            name = bowserNameToJitsiName[browserInfo.name];\n            version = browserInfo.version;\n        } else {\n            name = UNKNOWN;\n            version = undefined;\n        }\n\n        this._name = name;\n        this._version = version;\n    }\n\n    /**\n     * Gets current browser name.\n     * @returns {string}\n     */\n    getName() {\n        return this._name;\n    }\n\n    /**\n     * Checks if current browser is Chrome.\n     * @returns {boolean}\n     */\n    isChrome() {\n        return this._name === CHROME;\n    }\n\n    /**\n     * Checks if current browser is Opera.\n     * @returns {boolean}\n     */\n    isOpera() {\n        return this._name === OPERA;\n    }\n\n    /**\n     * Checks if current browser is Firefox.\n     * @returns {boolean}\n     */\n    isFirefox() {\n        return this._name === FIREFOX;\n    }\n\n    /**\n     * Checks if current browser is Internet Explorer.\n     * @returns {boolean}\n     */\n    isIExplorer() {\n        return this._name === INTERNET_EXPLORER;\n    }\n\n    /**\n     * Checks if current browser is Microsoft Edge.\n     * @returns {boolean}\n     */\n    isEdge() {\n        return this._name === EDGE;\n    }\n\n    /**\n     * Checks if current browser is Safari.\n     * @returns {boolean}\n     */\n    isSafari() {\n        return this._name === SAFARI;\n    }\n\n    /**\n     * Checks if current environment is NWJS.\n     * @returns {boolean}\n     */\n    isNWJS() {\n        return this._name === NWJS;\n    }\n\n    /**\n     * Checks if current environment is Electron.\n     * @returns {boolean}\n     */\n    isElectron() {\n        return this._name === ELECTRON;\n    }\n\n    /**\n     * Checks if current environment is React Native.\n     * @returns {boolean}\n     */\n    isReactNative() {\n        return this._name === REACT_NATIVE;\n    }\n\n    /**\n     * Returns the version of the current browser.\n     * @returns {string}\n     */\n    getVersion() {\n        return this._version;\n    }\n\n    /**\n     * Compares the passed version with the current browser version.\n     * {@see https://github.com/lancedikson/bowser}\n     */\n    static compareVersions = bowser.compareVersions;\n\n    /**\n     * Compares the passed version with the current browser version.\n     *\n     * @param {*} version - The version to compare with. Anything different\n     * than string will be converted to string.\n     * @returns {number|undefined} - Returns 0 if the version is equal to the\n     * current one, 1 if the version is greater than the current one, -1 if the\n     * version is lower than the current one and undefined if the current\n     * browser version is unknown.\n     */\n    compareVersion(version) {\n        if (this._version) {\n            return bowser.compareVersions([ String(version), this._version ]);\n        }\n    }\n\n    /**\n     * Compares the passed version with the current browser version.\n     *\n     * @param {*} version - The version to compare with. Anything different\n     * than string will be converted to string.\n     * @returns {boolean|undefined} - Returns true if the current version is\n     * greater than the passed version and false otherwise. Returns undefined if\n     * the current browser version is unknown.\n     */\n    isVersionGreaterThan(version) {\n        return this.compareVersion(version) === -1;\n    }\n\n    /**\n     * Compares the passed version with the current browser version.\n     *\n     * @param {*} version - The version to compare with. Anything different\n     * than string will be converted to string.\n     * @returns {boolean|undefined} - Returns true if the current version is\n     * lower than the passed version and false otherwise. Returns undefined if\n     * the current browser version is unknown.\n     */\n    isVersionLessThan(version) {\n        return this.compareVersion(version) === 1;\n    }\n\n    /**\n     * Compares the passed version with the current browser version.\n     *\n     * @param {*} version - The version to compare with. Anything different\n     * than string will be converted to string.\n     * @returns {boolean|undefined} - Returns true if the current version is\n     * equal to the passed version and false otherwise. Returns undefined if\n     * the current browser version is unknown.\n     */\n    isVersionEqualTo(version) {\n        return this.compareVersion(version) === 0;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../js-utils/browser-detection/BrowserDetection.js","// TODO: Maybe fix the values to 'Chrome', 'Internet Explorer', etc. Currently\n// this values needs to be as they are becuse they are going to analytics,\n// callstats, etc.\n\nexport const CHROME = 'chrome';\n\nexport const OPERA = 'opera';\n\nexport const FIREFOX = 'firefox';\n\nexport const INTERNET_EXPLORER = 'iexplorer';\n\nexport const EDGE = 'edge';\n\nexport const SAFARI = 'safari';\n\nexport const NWJS = 'nwjs';\n\nexport const ELECTRON = 'electron';\n\nexport const REACT_NATIVE = 'react-native';\n\nexport const UNKNOWN = 'unknown';\n\n\n\n// WEBPACK FOOTER //\n// ../js-utils/browser-detection/browsers.js","import { BrowserDetection } from '../browser-detection';\n\n// TODO: Move BrowserCapabilities from lib-jitsi-meet here and use the JSON\n// format for them.\n\n/**\n * Implements browser capabilities for lib-jitsi-meet.\n */\nexport default class BrowserCapabilities {\n    /**\n     * Creates new BrowserCapabilities instance.\n     *\n     * @param {Object} capabilitiesDB - The JSON database with capabilities.\n     * @param {boolean} [isUsingIFrame] - True if Jitsi Meet is loaded in iframe\n     * and false otherwise.\n     * @param {Object} [browserInfo] - Information about the browser.\n     * @param {string} browserInfo.name - The name of the browser.\n     * @param {string} browserInfo.version - The version of the browser.\n     */\n    constructor(capabilitiesDB = {}, isUsingIFrame = false, browserInfo) {\n        const browser = new BrowserDetection(browserInfo);\n        let capabilitiesByVersion;\n\n        // If the capabilitiesDB is not in the correct format or the type of the\n        // version of the browser is undefined(the version is unknown) or the\n        // version type is not compatible (not a string) we'll consider the\n        // browser as not supported.\n        if (typeof capabilitiesDB === 'object'\n                && typeof browser.getVersion() === 'string') {\n            const browserCapabilities = capabilitiesDB[browser.getName()] || [];\n\n            for (let i = 0; i < browserCapabilities.length; i++) {\n                const capabilities = browserCapabilities[i];\n\n                if (typeof capabilities !== 'object') {\n                    // eslint-disable-next-line no-continue\n                    continue;\n                }\n\n                const version = capabilities.version;\n\n                if (!version || !browser.isVersionGreaterThan(version)) {\n                    capabilitiesByVersion = capabilities;\n                    break;\n                }\n            }\n        }\n\n        if (!capabilitiesByVersion || !capabilitiesByVersion.capabilities) {\n            this._capabilities = { isSupported: false };\n        } else if (isUsingIFrame) {\n            this._capabilities = {\n                ...capabilitiesByVersion.capabilities,\n                ...capabilitiesByVersion.iframeCapabilities\n            };\n        } else {\n            this._capabilities = capabilitiesByVersion.capabilities;\n        }\n\n        if (typeof this._capabilities.isSupported === 'undefined') {\n            // we have some capabilities but isSupported property is not filled.\n            this._capabilities.isSupported = true;\n        } else if (this._capabilities.isSupported === false) {\n            // Clean the other capabilities.\n            this._capabilities = { isSupported: false };\n        }\n    }\n\n    /**\n     * Checks whether the browser is supported by Jitsi Meet.\n     *\n     * @returns {boolean}\n     */\n    isSupported() {\n        return this._capabilities.isSupported;\n    }\n\n    /**\n     * Checks whether the browser supports incoming audio.\n     *\n     * @returns {boolean}\n     */\n    supportsAudioIn() {\n        return this._capabilities.audioIn || false;\n    }\n\n    /**\n     * Checks whether the browser supports outgoing audio.\n     *\n     * @returns {boolean}\n     */\n    supportsAudioOut() {\n        return this._capabilities.audioOut || false;\n    }\n\n\n    /**\n     * Checks whether the browser supports screen sharing.\n     *\n     * @returns {boolean}\n     */\n    supportsScreenSharing() {\n        return this._capabilities.screenSharing || false;\n    }\n\n    /**\n     * Checks whether the browser supports incomming video.\n     *\n     * @returns {boolean}\n     */\n    supportsVideoIn() {\n        return this._capabilities.videoIn || false;\n    }\n\n    /**\n     * Checks whether the browser supports incomming video.\n     *\n     * @returns {boolean}\n     */\n    supportsVideoOut() {\n        return this._capabilities.videoOut || false;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../js-utils/browser-capabilities/BrowserCapabilities.js","var apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmeidate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n\n\n\n// WEBPACK FOOTER //\n// ../timers-browserify/main.js","/*! precalltest  version = 1.1.6 2018-01-23 */\n\n\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Promise=require(\"bluebird\"),TurnTest=function(){function e(t){_classCallCheck(this,e),this.connection=t,this.active=!1,this.results={}}return _createClass(e,[{key:\"getResults\",value:function(){return this.results}},{key:\"start\",value:function(){var e=this,t=new Promise(function(t,n){e.resolveCb=t,e.rejectCb=n});return this.connection.setMessageCallback(this.handleMessage.bind(this)),this.connection.setErrorCallback(this.handleError.bind(this)),this.active=!0,this.forceStopped=!1,this.initiate(),t}},{key:\"stop\",value:function(){this.active=!1}},{key:\"forceStop\",value:function(){this.forceStopped=!0,this.stop(),this.finished()}},{key:\"isActive\",value:function(){return this.active}},{key:\"initiate\",value:function(){}},{key:\"handleMessage\",value:function(e){}},{key:\"handleError\",value:function(e){}},{key:\"send\",value:function(e){this.connection.send(e)}},{key:\"finished\",value:function(){this.active=!1,this.resolveCb&&(this.resolveCb(),this.resolveCb=null)}},{key:\"failed\",value:function(e){this.active=!1,this.rejectCb&&(this.rejectCb(e),this.rejectCb=null)}}]),e}();exports.TurnTest=TurnTest;\n\n\n// WEBPACK FOOTER //\n// ../precalltest/dist/tests/turnTest.js","/*! precalltest  version = 1.1.6 2018-01-23 */\n\n\"use strict\";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function randomAsciiString(e){for(var t=\"\",r=0;r<e;r++)t+=String.fromCharCode(35+58*Math.random());return t}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.randomAsciiString=exports.MessageMaker=void 0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),_timestamps=require(\"../utility/timestamps\"),Timestamps=_interopRequireWildcard(_timestamps),MessageMaker=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1200;_classCallCheck(this,e),this.message={timestamp:\"\",sentBytes:1e4,padding:\"\"};var r=randomAsciiString(t-Timestamps.getCurrent().toString().length-JSON.stringify(this.message).length);this.message.padding=r}return _createClass(e,[{key:\"make\",value:function(e){return this.message.timestamp=Timestamps.getCurrent(),this.message.sentBytes=e,JSON.stringify(this.message)}}]),e}();exports.MessageMaker=MessageMaker,exports.randomAsciiString=randomAsciiString;\n\n\n// WEBPACK FOOTER //\n// ../precalltest/dist/utility/messageMaker.js","/**\n * Provides statistics for the local stream.\n */\n\nimport browser from '../browser';\n\n/**\n * Size of the webaudio analyzer buffer.\n * @type {number}\n */\nconst WEBAUDIO_ANALYZER_FFT_SIZE = 2048;\n\n/**\n * Value of the webaudio analyzer smoothing time parameter.\n * @type {number}\n */\nconst WEBAUDIO_ANALYZER_SMOOTING_TIME = 0.8;\n\nwindow.AudioContext = window.AudioContext || window.webkitAudioContext;\n\nlet context = null;\n\nif (window.AudioContext) {\n    context = new AudioContext();\n\n    // XXX Not all browsers define a suspend method on AudioContext. As the\n    // invocation is at the (ES6 module) global execution level, it breaks the\n    // loading of the lib-jitsi-meet library in such browsers and, consequently,\n    // the loading of the very Web app that uses the lib-jitsi-meet library. For\n    // example, Google Chrome 40 on Android does not define the method but we\n    // still want to be able to load the lib-jitsi-meet library there and\n    // display a page which notifies the user that the Web app is not supported\n    // there.\n    context.suspend && context.suspend();\n}\n\n/**\n * Converts time domain data array to audio level.\n * @param samples the time domain data array.\n * @returns {number} the audio level\n */\nfunction timeDomainDataToAudioLevel(samples) {\n\n    let maxVolume = 0;\n\n    const length = samples.length;\n\n    for (let i = 0; i < length; i++) {\n        if (maxVolume < samples[i]) {\n            maxVolume = samples[i];\n        }\n    }\n\n    return parseFloat(((maxVolume - 127) / 128).toFixed(3));\n}\n\n/**\n * Animates audio level change\n * @param newLevel the new audio level\n * @param lastLevel the last audio level\n * @returns {Number} the audio level to be set\n */\nfunction animateLevel(newLevel, lastLevel) {\n    let value = 0;\n    const diff = lastLevel - newLevel;\n\n    if (diff > 0.2) {\n        value = lastLevel - 0.2;\n    } else if (diff < -0.4) {\n        value = lastLevel + 0.4;\n    } else {\n        value = newLevel;\n    }\n\n    return parseFloat(value.toFixed(3));\n}\n\n\n/**\n * <tt>LocalStatsCollector</tt> calculates statistics for the local stream.\n *\n * @param stream the local stream\n * @param interval stats refresh interval given in ms.\n * @param callback function that receives the audio levels.\n * @constructor\n */\nexport default function LocalStatsCollector(stream, interval, callback) {\n    this.stream = stream;\n    this.intervalId = null;\n    this.intervalMilis = interval;\n    this.audioLevel = 0;\n    this.callback = callback;\n}\n\n/**\n * Starts the collecting the statistics.\n */\nLocalStatsCollector.prototype.start = function() {\n    if (!LocalStatsCollector.isLocalStatsSupported()) {\n        return;\n    }\n    context.resume();\n    const analyser = context.createAnalyser();\n\n    analyser.smoothingTimeConstant = WEBAUDIO_ANALYZER_SMOOTING_TIME;\n    analyser.fftSize = WEBAUDIO_ANALYZER_FFT_SIZE;\n\n    const source = context.createMediaStreamSource(this.stream);\n\n    source.connect(analyser);\n\n\n    const self = this;\n\n    this.intervalId = setInterval(\n        () => {\n            const array = new Uint8Array(analyser.frequencyBinCount);\n\n            analyser.getByteTimeDomainData(array);\n            const audioLevel = timeDomainDataToAudioLevel(array);\n\n            if (audioLevel !== self.audioLevel) {\n                self.audioLevel = animateLevel(audioLevel, self.audioLevel);\n                self.callback(self.audioLevel);\n            }\n        },\n        this.intervalMilis\n    );\n};\n\n/**\n * Stops collecting the statistics.\n */\nLocalStatsCollector.prototype.stop = function() {\n    if (this.intervalId) {\n        clearInterval(this.intervalId);\n        this.intervalId = null;\n    }\n};\n\n/**\n * Checks if the environment has the necessary conditions to support\n * collecting stats from local streams.\n *\n * @returns {boolean}\n */\nLocalStatsCollector.isLocalStatsSupported = function() {\n    return Boolean(context && !browser.isTemasysPluginUsed());\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/LocalStatsCollector.js","/**\n * Notifies about audio level in RTP statistics by SSRC.\n *\n * @param ssrc - The synchronization source identifier (SSRC) of the\n * endpoint/participant whose audio level is being reported.\n * @param {number} audioLevel - The audio level of <tt>ssrc</tt> according to\n * RTP statistics.\n * @param {boolean} isLocal - <tt>true</tt> if <tt>ssrc</tt> identifies the\n * local endpoint/participant; otherwise, <tt>false</tt>.\n */\nexport const AUDIO_LEVEL = 'statistics.audioLevel';\n\n/**\n * An event fired just before the statistics module gets disposes and it's\n * the last chance to submit some logs that will end up in stats services like\n * CallStats (if enabled).\n */\nexport const BEFORE_DISPOSED = 'statistics.before_disposed';\n\n/**\n * An event carrying all statistics by ssrc.\n */\nexport const BYTE_SENT_STATS = 'statistics.byte_sent_stats';\n\n/**\n * An event carrying connection statistics.\n *\n * @param {object} connectionStats - The connection statistics carried by the\n * event such as <tt>bandwidth</tt>, <tt>bitrate</tt>, <tt>packetLoss</tt>,\n * <tt>resolution</tt>, and <tt>transport</tt>.\n */\nexport const CONNECTION_STATS = 'statistics.connectionstats';\n\n\n\n// WEBPACK FOOTER //\n// ./service/statistics/Events.js","const currentExecutingScript = require('current-executing-script');\n\n/* eslint-disable max-params */\n\n/**\n * Implements utility functions which facilitate the dealing with scripts such\n * as the download and execution of a JavaScript file.\n */\nconst ScriptUtil = {\n    /**\n     * Loads a script from a specific source.\n     *\n     * @param src the source from the which the script is to be (down)loaded\n     * @param async true to asynchronously load the script or false to\n     * synchronously load the script\n     * @param prepend true to schedule the loading of the script as soon as\n     * possible or false to schedule the loading of the script at the end of the\n     * scripts known at the time\n     * @param relativeURL whether we need load the library from url relative\n     * to the url that lib-jitsi-meet was loaded. Useful when sourcing the\n     * library from different location than the app that is using it\n     * @param loadCallback on load callback function\n     * @param errorCallback callback to be called on error loading the script\n     */\n    loadScript(\n            src,\n            async,\n            prepend,\n            relativeURL,\n            loadCallback,\n            errorCallback) {\n        const d = document;\n        const tagName = 'script';\n        const script = d.createElement(tagName);\n        const referenceNode = d.getElementsByTagName(tagName)[0];\n\n        script.async = async;\n\n        if (relativeURL) {\n            // finds the src url of the current loaded script\n            // and use it as base of the src supplied argument\n            const scriptEl = currentExecutingScript();\n\n            if (scriptEl) {\n                const scriptSrc = scriptEl.src;\n                const baseScriptSrc\n                    = scriptSrc.substring(0, scriptSrc.lastIndexOf('/') + 1);\n\n                if (scriptSrc && baseScriptSrc) {\n                    // eslint-disable-next-line no-param-reassign\n                    src = baseScriptSrc + src;\n                }\n            }\n        }\n\n        if (loadCallback) {\n            script.onload = loadCallback;\n        }\n        if (errorCallback) {\n            script.onerror = errorCallback;\n        }\n\n        script.src = src;\n        if (prepend) {\n            referenceNode.parentNode.insertBefore(script, referenceNode);\n        } else {\n            referenceNode.parentNode.appendChild(script);\n        }\n    }\n};\n\n/* eslint-enable max-params */\n\nmodule.exports = ScriptUtil;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/ScriptUtil.js","/* global $ */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport { Strophe } from 'strophe.js';\nimport 'strophejs-plugin-disco';\n\nimport RandomUtil from '../util/RandomUtil';\nimport * as JitsiConnectionErrors from '../../JitsiConnectionErrors';\nimport * as JitsiConnectionEvents from '../../JitsiConnectionEvents';\nimport browser from '../browser';\nimport initEmuc from './strophe.emuc';\nimport initJingle from './strophe.jingle';\nimport initStropheUtil from './strophe.util';\nimport initPing from './strophe.ping';\nimport initRayo from './strophe.rayo';\nimport initStropheLogger from './strophe.logger';\nimport Listenable from '../util/Listenable';\nimport Caps from './Caps';\n\nconst logger = getLogger(__filename);\n\n/**\n *\n * @param token\n * @param bosh\n */\nfunction createConnection(token, bosh = '/http-bind') {\n    // Append token as URL param\n    if (token) {\n        // eslint-disable-next-line no-param-reassign\n        bosh += `${bosh.indexOf('?') === -1 ? '?' : '&'}token=${token}`;\n    }\n\n    const conn = new Strophe.Connection(bosh);\n\n    // The default maxRetries is 5, which is too long.\n    conn.maxRetries = 3;\n\n    return conn;\n}\n\n/**\n *\n */\nexport default class XMPP extends Listenable {\n    /**\n     * FIXME describe all options\n     * @param {Object} options\n     * @param {Array<Object>} options.p2pStunServers see\n     * {@link JingleConnectionPlugin} for more details.\n     * @param token\n     */\n    constructor(options, token) {\n        super();\n        this.connection = null;\n        this.disconnectInProgress = false;\n        this.connectionTimes = {};\n        this.options = options;\n        this.token = token;\n        this.authenticatedUser = false;\n        this._initStrophePlugins(this);\n\n        this.connection = createConnection(token, options.bosh);\n\n        this.caps = new Caps(this.connection, this.options.clientNode);\n\n        // Initialize features advertised in disco-info\n        this.initFeaturesList();\n\n        // Setup a disconnect on unload as a way to facilitate API consumers. It\n        // sounds like they would want that. A problem for them though may be if\n        // they wanted to utilize the connected connection in an unload handler\n        // of their own. However, it should be fairly easy for them to do that\n        // by registering their unload handler before us.\n        $(window).on('beforeunload unload', this.disconnect.bind(this));\n    }\n\n    /**\n     * Initializes the list of feature advertised through the disco-info\n     * mechanism.\n     */\n    initFeaturesList() {\n        // http://xmpp.org/extensions/xep-0167.html#support\n        // http://xmpp.org/extensions/xep-0176.html#support\n        this.caps.addFeature('urn:xmpp:jingle:1');\n        this.caps.addFeature('urn:xmpp:jingle:apps:rtp:1');\n        this.caps.addFeature('urn:xmpp:jingle:transports:ice-udp:1');\n        this.caps.addFeature('urn:xmpp:jingle:apps:dtls:0');\n        this.caps.addFeature('urn:xmpp:jingle:transports:dtls-sctp:1');\n        this.caps.addFeature('urn:xmpp:jingle:apps:rtp:audio');\n        this.caps.addFeature('urn:xmpp:jingle:apps:rtp:video');\n\n        if (!this.options.disableRtx && browser.supportsRtx()) {\n            this.caps.addFeature('urn:ietf:rfc:4588');\n        }\n\n        // this is dealt with by SDP O/A so we don't need to announce this\n        // XEP-0293\n        // this.caps.addFeature('urn:xmpp:jingle:apps:rtp:rtcp-fb:0');\n        // XEP-0294\n        // this.caps.addFeature('urn:xmpp:jingle:apps:rtp:rtp-hdrext:0');\n\n        this.caps.addFeature('urn:ietf:rfc:5761'); // rtcp-mux\n        this.caps.addFeature('urn:ietf:rfc:5888'); // a=group, e.g. bundle\n\n        // this.caps.addFeature('urn:ietf:rfc:5576'); // a=ssrc\n\n        // Enable Lipsync ?\n        if (browser.isChrome() && this.options.enableLipSync !== false) {\n            logger.info('Lip-sync enabled !');\n            this.caps.addFeature('http://jitsi.org/meet/lipsync');\n        }\n\n        if (this.connection.rayo) {\n            this.caps.addFeature('urn:xmpp:rayo:client:1');\n        }\n    }\n\n    /**\n     *\n     */\n    getConnection() {\n        return this.connection;\n    }\n\n    /**\n     * Receive connection status changes and handles them.\n     *\n     * @param {Object} credentials\n     * @param {string} credentials.jid - The user's XMPP ID passed to the\n     * connect method. For example, 'user@xmpp.com'.\n     * @param {string} credentials.password - The password passed to the connect\n     * method.\n     * @param {string} status - One of Strophe's connection status strings.\n     * @param {string} [msg] - The connection error message provided by Strophe.\n     */\n    connectionHandler(credentials = {}, status, msg) {\n        const now = window.performance.now();\n        const statusStr = Strophe.getStatusString(status).toLowerCase();\n\n        this.connectionTimes[statusStr] = now;\n        logger.log(\n            `(TIME) Strophe ${statusStr}${msg ? `[${msg}]` : ''}:\\t`,\n            now);\n        if (status === Strophe.Status.CONNECTED\n            || status === Strophe.Status.ATTACHED) {\n            if (this.options.useStunTurn\n                || (this.options.p2p && this.options.p2p.useStunTurn)) {\n                this.connection.jingle.getStunAndTurnCredentials();\n            }\n\n            logger.info(`My Jabber ID: ${this.connection.jid}`);\n\n            // Schedule ping ?\n            const pingJid = this.connection.domain;\n\n            this.connection.ping.hasPingSupport(\n                pingJid,\n                hasPing => {\n                    if (hasPing) {\n                        this.connection.ping.startInterval(pingJid);\n                    } else {\n                        logger.warn(`Ping NOT supported by ${pingJid}`);\n                    }\n                });\n\n            if (credentials.password) {\n                this.authenticatedUser = true;\n            }\n            if (this.connection && this.connection.connected\n                    && Strophe.getResourceFromJid(this.connection.jid)) {\n                // .connected is true while connecting?\n                // this.connection.send($pres());\n                this.eventEmitter.emit(\n                    JitsiConnectionEvents.CONNECTION_ESTABLISHED,\n                    Strophe.getResourceFromJid(this.connection.jid));\n            }\n        } else if (status === Strophe.Status.CONNFAIL) {\n            if (msg === 'x-strophe-bad-non-anon-jid') {\n                this.anonymousConnectionFailed = true;\n            } else {\n                this.connectionFailed = true;\n            }\n            this.lastErrorMsg = msg;\n            if (msg === 'giving-up') {\n                this.eventEmitter.emit(\n                    JitsiConnectionEvents.CONNECTION_FAILED,\n                    JitsiConnectionErrors.OTHER_ERROR, msg);\n            }\n        } else if (status === Strophe.Status.DISCONNECTED) {\n            // Stop ping interval\n            this.connection.ping.stopInterval();\n            const wasIntentionalDisconnect = this.disconnectInProgress;\n            const errMsg = msg || this.lastErrorMsg;\n\n            this.disconnectInProgress = false;\n            if (this.anonymousConnectionFailed) {\n                // prompt user for username and password\n                this.eventEmitter.emit(\n                    JitsiConnectionEvents.CONNECTION_FAILED,\n                    JitsiConnectionErrors.PASSWORD_REQUIRED);\n            } else if (this.connectionFailed) {\n                this.eventEmitter.emit(\n                    JitsiConnectionEvents.CONNECTION_FAILED,\n                    JitsiConnectionErrors.OTHER_ERROR,\n                    errMsg,\n                    undefined, /* credentials */\n                    this._getConnectionFailedReasonDetails());\n            } else if (wasIntentionalDisconnect) {\n                this.eventEmitter.emit(\n                    JitsiConnectionEvents.CONNECTION_DISCONNECTED, errMsg);\n            } else {\n                // XXX if Strophe drops the connection while not being asked to,\n                // it means that most likely some serious error has occurred.\n                // One currently known case is when a BOSH request fails for\n                // more than 4 times. The connection is dropped without\n                // supplying a reason(error message/event) through the API.\n                logger.error('XMPP connection dropped!');\n\n                // XXX if the last request error is within 5xx range it means it\n                // was a server failure\n                const lastErrorStatus = Strophe.getLastErrorStatus();\n\n                if (lastErrorStatus >= 500 && lastErrorStatus < 600) {\n                    this.eventEmitter.emit(\n                        JitsiConnectionEvents.CONNECTION_FAILED,\n                        JitsiConnectionErrors.SERVER_ERROR,\n                        errMsg || 'server-error');\n                } else {\n                    this.eventEmitter.emit(\n                        JitsiConnectionEvents.CONNECTION_FAILED,\n                        JitsiConnectionErrors.CONNECTION_DROPPED_ERROR,\n                        errMsg || 'connection-dropped-error');\n                }\n            }\n        } else if (status === Strophe.Status.AUTHFAIL) {\n            // wrong password or username, prompt user\n            this.eventEmitter.emit(\n                JitsiConnectionEvents.CONNECTION_FAILED,\n                JitsiConnectionErrors.PASSWORD_REQUIRED,\n                msg,\n                credentials);\n        }\n    }\n\n    /**\n     *\n     * @param jid\n     * @param password\n     */\n    _connect(jid, password) {\n        // connection.connect() starts the connection process.\n        //\n        // As the connection process proceeds, the user supplied callback will\n        // be triggered multiple times with status updates. The callback should\n        // take two arguments - the status code and the error condition.\n        //\n        // The status code will be one of the values in the Strophe.Status\n        // constants. The error condition will be one of the conditions defined\n        // in RFC 3920 or the condition strophe-parsererror.\n        //\n        // The Parameters wait, hold and route are optional and only relevant\n        // for BOSH connections. Please see XEP 124 for a more detailed\n        // explanation of the optional parameters.\n        //\n        // Connection status constants for use by the connection handler\n        // callback.\n        //\n        //  Status.ERROR - An error has occurred (websockets specific)\n        //  Status.CONNECTING - The connection is currently being made\n        //  Status.CONNFAIL - The connection attempt failed\n        //  Status.AUTHENTICATING - The connection is authenticating\n        //  Status.AUTHFAIL - The authentication attempt failed\n        //  Status.CONNECTED - The connection has succeeded\n        //  Status.DISCONNECTED - The connection has been terminated\n        //  Status.DISCONNECTING - The connection is currently being terminated\n        //  Status.ATTACHED - The connection has been attached\n\n        this.anonymousConnectionFailed = false;\n        this.connectionFailed = false;\n        this.lastErrorMsg = undefined;\n        this.connection.connect(\n            jid,\n            password,\n            this.connectionHandler.bind(this, {\n                jid,\n                password\n            }));\n    }\n\n    /**\n     * Attach to existing connection. Can be used for optimizations. For\n     * example: if the connection is created on the server we can attach to it\n     * and start using it.\n     *\n     * @param options {object} connecting options - rid, sid, jid and password.\n     */\n    attach(options) {\n        const now = this.connectionTimes.attaching = window.performance.now();\n\n        logger.log(`(TIME) Strophe Attaching\\t:${now}`);\n        this.connection.attach(options.jid, options.sid,\n            parseInt(options.rid, 10) + 1,\n            this.connectionHandler.bind(this, {\n                jid: options.jid,\n                password: options.password\n            }));\n    }\n\n    /**\n     *\n     * @param jid\n     * @param password\n     */\n    connect(jid, password) {\n        if (!jid) {\n            const { anonymousdomain, domain } = this.options.hosts;\n            let configDomain = anonymousdomain || domain;\n\n            // Force authenticated domain if room is appended with '?login=true'\n            // or if we're joining with the token\n\n            // FIXME Do not rely on window.location because (1) React Native\n            // does not have a window.location by default and (2) here we cannot\n            // know for sure that query/search has not be stripped from\n            // window.location by the time the following executes.\n            const { location } = window;\n\n            if (anonymousdomain) {\n                const search = location && location.search;\n\n                if ((search && search.indexOf('login=true') !== -1)\n                        || this.token) {\n                    configDomain = domain;\n                }\n            }\n\n            // eslint-disable-next-line no-param-reassign\n            jid = configDomain || (location && location.hostname);\n        }\n\n        return this._connect(jid, password);\n    }\n\n    /**\n     *\n     * @param roomName\n     * @param options\n     */\n    createRoom(roomName, options) {\n        // By default MUC nickname is the resource part of the JID\n        let mucNickname = Strophe.getNodeFromJid(this.connection.jid);\n        let roomjid = `${roomName}@${this.options.hosts.muc}/`;\n        const cfgNickname\n            = options.useNicks && options.nick ? options.nick : null;\n\n        if (cfgNickname) {\n            // Use nick if it's defined\n            mucNickname = options.nick;\n        } else if (!this.authenticatedUser) {\n            // node of the anonymous JID is very long - here we trim it a bit\n            mucNickname = mucNickname.substr(0, 8);\n        }\n\n        // Constant JIDs need some random part to be appended in order to be\n        // able to join the MUC more than once.\n        if (this.authenticatedUser || cfgNickname !== null) {\n            mucNickname += `-${RandomUtil.randomHexString(6)}`;\n        }\n\n        roomjid += mucNickname;\n\n        return this.connection.emuc.createRoom(roomjid, null, options);\n    }\n\n    /**\n     * Returns the logs from strophe.jingle.\n     * @returns {Object}\n     */\n    getJingleLog() {\n        const jingle = this.connection.jingle;\n\n\n        return jingle ? jingle.getLog() : {};\n    }\n\n    /**\n     * Returns the logs from strophe.\n     */\n    getXmppLog() {\n        return (this.connection.logger || {}).log || null;\n    }\n\n    /**\n     *\n     */\n    dial(...args) {\n        this.connection.rayo.dial(...args);\n    }\n\n    /**\n     *\n     * @param jid\n     * @param mute\n     */\n    setMute(jid, mute) {\n        this.connection.moderate.setMute(jid, mute);\n    }\n\n    /**\n     *\n     * @param jid\n     */\n    eject(jid) {\n        this.connection.moderate.eject(jid);\n    }\n\n    /**\n     *\n     */\n    getSessions() {\n        return this.connection.jingle.sessions;\n    }\n\n    /**\n     * Disconnects this from the XMPP server (if this is connected).\n     *\n     * @param ev optionally, the event which triggered the necessity to\n     * disconnect from the XMPP server (e.g. beforeunload, unload).\n     */\n    disconnect(ev) {\n        if (this.disconnectInProgress\n                || !this.connection\n                || !this.connection.connected) {\n            this.eventEmitter.emit(JitsiConnectionEvents.WRONG_STATE);\n\n            return;\n        }\n\n        this.disconnectInProgress = true;\n\n        // XXX Strophe is asynchronously sending by default. Unfortunately, that\n        // means that there may not be enough time to send an unavailable\n        // presence or disconnect at all. Switching Strophe to synchronous\n        // sending is not much of an option because it may lead to a noticeable\n        // delay in navigating away from the current location. As a compromise,\n        // we will try to increase the chances of sending an unavailable\n        // presence and/or disconecting within the short time span that we have\n        // upon unloading by invoking flush() on the connection. We flush() once\n        // before disconnect() in order to attemtp to have its unavailable\n        // presence at the top of the send queue. We flush() once more after\n        // disconnect() in order to attempt to have its unavailable presence\n        // sent as soon as possible.\n        this.connection.flush();\n\n        if (ev !== null && typeof ev !== 'undefined') {\n            const evType = ev.type;\n\n            if (evType === 'beforeunload' || evType === 'unload') {\n                // XXX Whatever we said above, synchronous sending is the best\n                // (known) way to properly disconnect from the XMPP server.\n                // Consequently, it may be fine to have the source code and\n                // comment it in or out depending on whether we want to run with\n                // it for some time.\n                this.connection.options.sync = true;\n            }\n        }\n\n        this.connection.disconnect();\n\n        if (this.connection.options.sync !== true) {\n            this.connection.flush();\n        }\n    }\n\n    /**\n     *\n     */\n    _initStrophePlugins() {\n        const iceConfig = {\n            jvb: { iceServers: [ ] },\n            p2p: { iceServers: [ ] }\n        };\n\n        // FIXME: remove once we have a default config template. -saghul\n        const defaultStunServers = [\n            { urls: 'stun:stun.l.google.com:19302' },\n            { urls: 'stun:stun1.l.google.com:19302' },\n            { urls: 'stun:stun2.l.google.com:19302' }\n        ];\n\n        const p2pStunServers = (this.options.p2p\n            && this.options.p2p.stunServers) || defaultStunServers;\n\n        if (Array.isArray(p2pStunServers)) {\n            logger.info('P2P STUN servers: ', p2pStunServers);\n            iceConfig.p2p.iceServers = p2pStunServers;\n        }\n\n        if (this.options.p2p && this.options.p2p.iceTransportPolicy) {\n            logger.info('P2P ICE transport policy: ',\n                this.options.p2p.iceTransportPolicy);\n\n            iceConfig.p2p.iceTransportPolicy\n                = this.options.p2p.iceTransportPolicy;\n        }\n\n        initEmuc(this);\n        initJingle(this, this.eventEmitter, iceConfig);\n        initStropheUtil();\n        initPing(this);\n        initRayo();\n        initStropheLogger();\n    }\n\n    /**\n     * Returns details about connection failure. Shard change or is it after\n     * suspend.\n     * @returns {object} contains details about a connection failure.\n     * @private\n     */\n    _getConnectionFailedReasonDetails() {\n        const details = {};\n\n        // check for moving between shard if information is available\n        if (this.options.deploymentInfo\n            && this.options.deploymentInfo.shard\n            && this.connection._proto\n            && this.connection._proto.lastResponseHeaders) {\n\n            // split headers by line\n            const headersArr = this.connection._proto.lastResponseHeaders\n                .trim().split(/[\\r\\n]+/);\n            const headers = {};\n\n            headersArr.forEach(line => {\n                const parts = line.split(': ');\n                const header = parts.shift();\n                const value = parts.join(': ');\n\n                headers[header] = value;\n            });\n\n            /* eslint-disable camelcase */\n            details.shard_changed\n                = this.options.deploymentInfo.shard\n                    !== headers['x-jitsi-shard'];\n            /* eslint-enable camelcase */\n        }\n\n        /* eslint-disable camelcase */\n        // check for possible suspend\n        details.suspend_time = this.connection.ping.getPingSuspendTime();\n        /* eslint-enable camelcase */\n\n        return details;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/xmpp.js","/**\n * The errors for the connection.\n */\n\n/**\n * Indicates that the connection was dropped with an error which was most likely\n * caused by some networking issues. The dropped term in this context means that\n * the connection was closed unexpectedly (not on user's request).\n *\n * One example is 'item-not-found' error thrown by Prosody when the BOSH session\n * times out after 60 seconds of inactivity. On the other hand 'item-not-found'\n * could also happen when BOSH request is sent to the server with the session-id\n * that is not know to the server. But this should not happen in lib-jitsi-meet\n * case as long as the service is configured correctly (there is no bug).\n */\nexport const CONNECTION_DROPPED_ERROR = 'connection.droppedError';\n\n/**\n * Not specified errors.\n */\nexport const OTHER_ERROR = 'connection.otherError';\n\n/**\n * Indicates that a password is required in order to join the conference.\n */\nexport const PASSWORD_REQUIRED = 'connection.passwordRequired';\n\n/**\n * Indicates that the connection was dropped, because of too many 5xx HTTP\n * errors on BOSH requests.\n */\nexport const SERVER_ERROR = 'connection.serverError';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiConnectionErrors.js","/**\n * The transciption is on.\n *\n * @type {String}\n */\nexport const ON = 'on';\n\n/**\n * The transciption is off.\n *\n * @type {String}\n */\nexport const OFF = 'off';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiTranscriptionStatus.js","const AuthenticationEvents = {\n    /**\n     * Event callback arguments:\n     * function(authenticationEnabled, userIdentity)\n     * authenticationEnabled - indicates whether authentication has been enabled\n     *                         in this session\n     * userIdentity - if user has been logged in then it contains user name. If\n     *                contains 'null' or 'undefined' then user is not logged in.\n     */\n    IDENTITY_UPDATED: 'authentication.identity_updated'\n};\n\nmodule.exports = AuthenticationEvents;\n\n\n\n// WEBPACK FOOTER //\n// ./service/authentication/AuthenticationEvents.js","/* global $ */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport { $iq } from 'strophe.js';\n\nconst XMPPEvents = require('../../service/xmpp/XMPPEvents');\nconst JitsiRecorderErrors = require('../../JitsiRecorderErrors');\nconst GlobalOnErrorHandler = require('../util/GlobalOnErrorHandler');\n\nconst logger = getLogger(__filename);\n\n/**\n * Extracts the error details from given error element/node.\n *\n * @param {Element|Object} errorIqNode - Either DOM element or the structure\n * from ChatRoom packet2JSON.\n * @return {{\n *     code: string,\n *     type: string,\n *     message: string\n * }}\n */\nfunction getJibriErrorDetails(errorIqNode) {\n    if (typeof errorIqNode.querySelector === 'function') {\n        const error = errorIqNode.querySelector('error');\n        const errorText = error && error.querySelector('text');\n\n        return error && {\n            code: error.attributes.code && error.attributes.code.value,\n            type: error.attributes.type && error.attributes.type.value,\n            message: errorText && errorText.textContent\n        };\n    }\n\n    let error = null;\n\n    for (const child of errorIqNode.children) {\n        if (child.tagName === 'error') {\n            error = child;\n            break;\n        }\n    }\n\n    if (!error) {\n        return null;\n    }\n\n    let errorText = null;\n\n    for (const errorChild of error.children) {\n        if (errorChild.tagName === 'text') {\n            errorText = errorChild.value;\n            break;\n        }\n    }\n\n    return {\n        code: error.attributes.code,\n        type: error.attributes.type,\n        message: errorText\n    };\n}\n\n/* eslint-disable max-params */\n\n/**\n *\n * @param type\n * @param eventEmitter\n * @param connection\n * @param focusMucJid\n * @param jirecon\n * @param roomjid\n */\nexport default function Recording(\n        type,\n        eventEmitter,\n        connection,\n        focusMucJid,\n        jirecon,\n        roomjid) {\n    this.eventEmitter = eventEmitter;\n    this.connection = connection;\n    this.state = null;\n    this.focusMucJid = focusMucJid;\n    this.jirecon = jirecon;\n    this.url = null;\n    this.type = type;\n    this._isSupported\n        = !(\n            (type === Recording.types.JIRECON && !this.jirecon)\n                || (type !== Recording.types.JIBRI\n                    && type !== Recording.types.JIBRI_FILE\n                    && type !== Recording.types.COLIBRI));\n\n    /**\n     * The ID of the jirecon recording session. Jirecon generates it when we\n     * initially start recording, and it needs to be used in subsequent requests\n     * to jirecon.\n     */\n    this.jireconRid = null;\n    this.roomjid = roomjid;\n}\n\n/* eslint-enable max-params */\n\nRecording.types = {\n    COLIBRI: 'colibri',\n    JIRECON: 'jirecon',\n    JIBRI: 'jibri',\n    JIBRI_FILE: 'jibri_file'\n};\n\nRecording.status = {\n    ON: 'on',\n    OFF: 'off',\n    AVAILABLE: 'available',\n    UNAVAILABLE: 'unavailable',\n    PENDING: 'pending',\n    RETRYING: 'retrying',\n    ERROR: 'error',\n    BUSY: 'busy',\n    FAILED: 'failed'\n};\n\nRecording.action = {\n    START: 'start',\n    STOP: 'stop'\n};\n\nRecording.prototype.handleJibriPresence = function(jibri) {\n    const attributes = jibri.attributes;\n\n    if (!attributes) {\n        return;\n    }\n\n    const newState = attributes.status;\n    const errorDetails = getJibriErrorDetails(jibri);\n\n    logger.log(`Handle Jibri presence : ${newState}`, errorDetails);\n\n    if (newState === this.state) {\n        return;\n    }\n\n    if (newState === 'undefined') {\n        this.state = Recording.status.UNAVAILABLE;\n    } else if (newState === Recording.status.OFF) {\n        if (!this.state\n            || this.state === 'undefined'\n            || this.state === Recording.status.UNAVAILABLE) {\n            this.state = Recording.status.AVAILABLE;\n        } else {\n            this.state = Recording.status.OFF;\n        }\n    } else {\n        this.state = newState;\n    }\n\n    this.eventEmitter.emit(XMPPEvents.RECORDER_STATE_CHANGED, this.state);\n};\n\n/* eslint-disable max-params */\n\nRecording.prototype.setRecordingJibri = function(\n        state,\n        callback,\n        errCallback,\n        options = {}) {\n    if (state === this.state) {\n        errCallback(JitsiRecorderErrors.INVALID_STATE);\n    }\n\n    // FIXME jibri does not accept IQ without 'url' attribute set ?\n    const iq\n        = $iq({\n            to: this.focusMucJid,\n            type: 'set'\n        })\n            .c('jibri', {\n                'xmlns': 'http://jitsi.org/protocol/jibri',\n                'action':\n                    state === Recording.status.ON\n                        ? Recording.action.START\n                        : Recording.action.STOP,\n                'recording_mode':\n                    this.type === Recording.types.JIBRI_FILE\n                        ? 'file'\n                        : 'stream',\n                'streamid':\n                    this.type === Recording.types.JIBRI\n                        ? options.streamId\n                        : undefined\n            })\n            .up();\n\n    logger.log(`Set jibri recording: ${state}`, iq.nodeTree);\n    logger.log(iq.nodeTree);\n    this.connection.sendIQ(\n        iq,\n        result => {\n            logger.log('Result', result);\n\n            const jibri = $(result).find('jibri');\n\n            callback(jibri.attr('state'), jibri.attr('url'));\n        },\n        error => {\n            logger.log(\n                'Failed to start recording, error: ',\n                getJibriErrorDetails(error));\n            errCallback(error);\n        });\n};\n\n/* eslint-enable max-params */\n\nRecording.prototype.setRecordingJirecon\n    = function(state, callback, errCallback) {\n        if (state === this.state) {\n            errCallback(new Error('Invalid state!'));\n        }\n\n        const iq\n            = $iq({\n                to: this.jirecon,\n                type: 'set'\n            })\n                .c('recording', { xmlns: 'http://jitsi.org/protocol/jirecon',\n                    action: state === Recording.status.ON\n                        ? Recording.action.START\n                        : Recording.action.STOP,\n                    mucjid: this.roomjid });\n\n        if (state === Recording.status.OFF) {\n            iq.attrs({ rid: this.jireconRid });\n        }\n\n        logger.log('Start recording');\n        const self = this;\n\n        this.connection.sendIQ(\n            iq,\n            result => {\n                // TODO wait for an IQ with the real status, since this is\n                // provisional?\n                // eslint-disable-next-line newline-per-chained-call\n                self.jireconRid = $(result).find('recording').attr('rid');\n\n                const stateStr\n                    = state === Recording.status.ON ? 'started' : 'stopped';\n\n                logger.log(`Recording ${stateStr}(jirecon)${result}`);\n\n                self.state = state;\n                if (state === Recording.status.OFF) {\n                    self.jireconRid = null;\n                }\n\n                callback(state);\n            },\n            error => {\n                logger.log('Failed to start recording, error: ', error);\n                errCallback(error);\n            });\n    };\n\n/* eslint-disable max-params */\n\n// Sends a COLIBRI message which enables or disables (according to 'state')\n// the recording on the bridge. Waits for the result IQ and calls 'callback'\n// with the new recording state, according to the IQ.\nRecording.prototype.setRecordingColibri = function(\n        state,\n        callback,\n        errCallback,\n        options) {\n    const elem = $iq({\n        to: this.focusMucJid,\n        type: 'set'\n    });\n\n    elem.c('conference', {\n        xmlns: 'http://jitsi.org/protocol/colibri'\n    });\n    elem.c('recording', {\n        state,\n        token: options.token\n    });\n\n    const self = this;\n\n    this.connection.sendIQ(\n        elem,\n        result => {\n            logger.log('Set recording \"', state, '\". Result:', result);\n            const recordingElem = $(result).find('>conference>recording');\n            const newState = recordingElem.attr('state');\n\n            self.state = newState;\n            callback(newState);\n\n            if (newState === 'pending') {\n                self.connection.addHandler(iq => {\n                    // eslint-disable-next-line newline-per-chained-call\n                    const s = $(iq).find('recording').attr('state');\n\n                    if (s) {\n                        self.state = newState;\n                        callback(s);\n                    }\n                }, 'http://jitsi.org/protocol/colibri', 'iq', null, null, null);\n            }\n        },\n        error => {\n            logger.warn(error);\n            errCallback(error);\n        }\n    );\n};\n\n/* eslint-enable max-params */\n\nRecording.prototype.setRecording = function(...args) {\n    switch (this.type) {\n    case Recording.types.JIRECON:\n        this.setRecordingJirecon(...args);\n        break;\n    case Recording.types.COLIBRI:\n        this.setRecordingColibri(...args);\n        break;\n    case Recording.types.JIBRI:\n    case Recording.types.JIBRI_FILE:\n        this.setRecordingJibri(...args);\n        break;\n    default: {\n        const errmsg = 'Unknown recording type!';\n\n        GlobalOnErrorHandler.callErrorHandler(new Error(errmsg));\n        logger.error(errmsg);\n        break;\n    }\n    }\n};\n\n/**\n * Starts/stops the recording.\n * @param {Object} options\n * @param {string} options.token token for authentication\n * @param {string} options.streamId the stream ID to be used with Jibri in\n * the streaming mode.\n * @param statusChangeHandler {function} receives the new status as argument.\n */\nRecording.prototype.toggleRecording = function(\n        options = { },\n        statusChangeHandler) {\n    const oldState = this.state;\n\n    // If the recorder is currently unavailable we throw an error.\n    if (oldState === Recording.status.UNAVAILABLE\n        || oldState === Recording.status.FAILED) {\n        statusChangeHandler(\n            Recording.status.FAILED,\n            JitsiRecorderErrors.RECORDER_UNAVAILABLE);\n    } else if (oldState === Recording.status.BUSY) {\n        statusChangeHandler(\n            Recording.status.BUSY,\n            JitsiRecorderErrors.RECORDER_BUSY);\n    }\n\n    // If we're about to turn ON the recording we need either a streamId or\n    // an authentication token depending on the recording type. If we don't\n    // have any of those we throw an error.\n    if ((oldState === Recording.status.OFF\n                || oldState === Recording.status.AVAILABLE)\n            && ((!options.token && this.type === Recording.types.COLIBRI)\n                || (!options.streamId\n                    && this.type === Recording.types.JIBRI))) {\n        statusChangeHandler(\n            Recording.status.FAILED,\n            JitsiRecorderErrors.NO_TOKEN);\n        logger.error('No token passed!');\n\n        return;\n    }\n\n    const newState\n        = oldState === Recording.status.AVAILABLE\n                || oldState === Recording.status.OFF\n            ? Recording.status.ON\n            : Recording.status.OFF;\n\n    const self = this;\n\n    logger.log('Toggle recording (old state, new state): ', oldState, newState);\n    this.setRecording(\n        newState,\n        (state, url) => {\n            // If the state is undefined we're going to wait for presence\n            // update.\n            if (state && state !== oldState) {\n                self.state = state;\n                self.url = url;\n                statusChangeHandler(state);\n            }\n        },\n        error => statusChangeHandler(Recording.status.FAILED, error),\n        options);\n};\n\n/**\n * Returns true if the recording is supproted and false if not.\n */\nRecording.prototype.isSupported = function() {\n    return this._isSupported;\n};\n\n/**\n * Returns null if the recording is not supported, \"on\" if the recording started\n * and \"off\" if the recording is not started.\n */\nRecording.prototype.getState = function() {\n    return this.state;\n};\n\n/**\n * Returns the url of the recorded video.\n */\nRecording.prototype.getURL = function() {\n    return this.url;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/recording.js","/**\n * Enumeration with the errors for the conference.\n * @type {{string: string}}\n */\nconst JitsiRecorderErrors = {\n    /**\n     * Indicates that the recorder is currently unavailable.\n     */\n    RECORDER_UNAVAILABLE: 'recorder.unavailable',\n\n    /**\n     * Indicates that all available recorders are currently busy.\n     */\n    RECORDER_BUSY: 'recorder.busy',\n\n    /**\n     * Indicates that the authentication token is missing.\n     */\n    NO_TOKEN: 'recorder.noToken',\n\n    /**\n     * Indicates that a state change failed.\n     */\n    STATE_CHANGE_FAILED: 'recorder.stateChangeFailed',\n\n    /**\n     * Indicates an invalid state.\n     */\n    INVALID_STATE: 'recorder.invalidState'\n};\n\nmodule.exports = JitsiRecorderErrors;\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiRecorderErrors.js","/**\n * The pending Jingle session state which means the session as defined in\n * XEP-0166(before 'session-invite/session-accept' took place).\n *\n * @type {string}\n */\nexport const PENDING = 'pending';\n\n/**\n * The active Jingle session state as defined in XEP-0166\n * (after 'session-invite'/'session-accept').\n *\n * @type {string}\n */\nexport const ACTIVE = 'active';\n\n/**\n * The ended Jingle session state as defined in XEP-0166\n * (after 'session-terminate').\n * @type {string}\n */\nexport const ENDED = 'ended';\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/JingleSessionState.js","/* global $ */\n\nimport SDPUtil from './SDPUtil';\n\n/**\n *\n * @param sdp\n */\nexport default function SDP(sdp) {\n    const media = sdp.split('\\r\\nm=');\n\n    for (let i = 1, length = media.length; i < length; i++) {\n        let mediaI = `m=${media[i]}`;\n\n        if (i !== length - 1) {\n            mediaI += '\\r\\n';\n        }\n        media[i] = mediaI;\n    }\n    const session = `${media.shift()}\\r\\n`;\n\n    this.media = media;\n    this.raw = session + media.join('');\n    this.session = session;\n}\n\n/**\n * A flag will make {@link transportToJingle} and {@link jingle2media} replace\n * ICE candidates IPs with invalid value of '1.1.1.1' which will cause ICE\n * failure. The flag is used in the automated testing.\n * @type {boolean}\n */\nSDP.prototype.failICE = false;\n\n/**\n * Whether or not to remove TCP ice candidates when translating from/to jingle.\n * @type {boolean}\n */\nSDP.prototype.removeTcpCandidates = false;\n\n/**\n * Whether or not to remove UDP ice candidates when translating from/to jingle.\n * @type {boolean}\n */\nSDP.prototype.removeUdpCandidates = false;\n\n/**\n * Returns map of MediaChannel mapped per channel idx.\n */\nSDP.prototype.getMediaSsrcMap = function() {\n    const self = this;\n    const mediaSSRCs = {};\n    let tmp;\n\n    for (let mediaindex = 0; mediaindex < self.media.length; mediaindex++) {\n        tmp = SDPUtil.findLines(self.media[mediaindex], 'a=ssrc:');\n        const mid\n            = SDPUtil.parseMID(\n                SDPUtil.findLine(self.media[mediaindex], 'a=mid:'));\n        const media = {\n            mediaindex,\n            mid,\n            ssrcs: {},\n            ssrcGroups: []\n        };\n\n        mediaSSRCs[mediaindex] = media;\n        tmp.forEach(line => {\n            const linessrc = line.substring(7).split(' ')[0];\n\n            // allocate new ChannelSsrc\n\n            if (!media.ssrcs[linessrc]) {\n                media.ssrcs[linessrc] = {\n                    ssrc: linessrc,\n                    lines: []\n                };\n            }\n            media.ssrcs[linessrc].lines.push(line);\n        });\n        tmp = SDPUtil.findLines(self.media[mediaindex], 'a=ssrc-group:');\n        tmp.forEach(line => {\n            const idx = line.indexOf(' ');\n            const semantics = line.substr(0, idx).substr(13);\n            const ssrcs = line.substr(14 + semantics.length).split(' ');\n\n            if (ssrcs.length) {\n                media.ssrcGroups.push({\n                    semantics,\n                    ssrcs\n                });\n            }\n        });\n    }\n\n    return mediaSSRCs;\n};\n\n/**\n * Returns <tt>true</tt> if this SDP contains given SSRC.\n * @param ssrc the ssrc to check.\n * @returns {boolean} <tt>true</tt> if this SDP contains given SSRC.\n */\nSDP.prototype.containsSSRC = function(ssrc) {\n    // FIXME this code is really strange - improve it if you can\n    const medias = this.getMediaSsrcMap();\n    let result = false;\n\n    Object.keys(medias).forEach(mediaindex => {\n        if (result) {\n            return;\n        }\n        if (medias[mediaindex].ssrcs[ssrc]) {\n            result = true;\n        }\n    });\n\n    return result;\n};\n\n// remove iSAC and CN from SDP\nSDP.prototype.mangle = function() {\n    let i, j, lines, mline, newdesc, rtpmap;\n\n    for (i = 0; i < this.media.length; i++) {\n        lines = this.media[i].split('\\r\\n');\n        lines.pop(); // remove empty last element\n        mline = SDPUtil.parseMLine(lines.shift());\n        if (mline.media !== 'audio') {\n            continue; // eslint-disable-line no-continue\n        }\n        newdesc = '';\n        mline.fmt.length = 0;\n        for (j = 0; j < lines.length; j++) {\n            if (lines[j].substr(0, 9) === 'a=rtpmap:') {\n                rtpmap = SDPUtil.parseRTPMap(lines[j]);\n                if (rtpmap.name === 'CN' || rtpmap.name === 'ISAC') {\n                    continue; // eslint-disable-line no-continue\n                }\n                mline.fmt.push(rtpmap.id);\n            }\n            newdesc += `${lines[j]}\\r\\n`;\n        }\n        this.media[i] = `${SDPUtil.buildMLine(mline)}\\r\\n${newdesc}`;\n    }\n    this.raw = this.session + this.media.join('');\n};\n\n// remove lines matching prefix from session section\nSDP.prototype.removeSessionLines = function(prefix) {\n    const self = this;\n    const lines = SDPUtil.findLines(this.session, prefix);\n\n    lines.forEach(line => {\n        self.session = self.session.replace(`${line}\\r\\n`, '');\n    });\n    this.raw = this.session + this.media.join('');\n\n    return lines;\n};\n\n// remove lines matching prefix from a media section specified by mediaindex\n// TODO: non-numeric mediaindex could match mid\nSDP.prototype.removeMediaLines = function(mediaindex, prefix) {\n    const self = this;\n    const lines = SDPUtil.findLines(this.media[mediaindex], prefix);\n\n    lines.forEach(line => {\n        self.media[mediaindex]\n            = self.media[mediaindex].replace(`${line}\\r\\n`, '');\n    });\n    this.raw = this.session + this.media.join('');\n\n    return lines;\n};\n\n// add content's to a jingle element\nSDP.prototype.toJingle = function(elem, thecreator) {\n    let i, j, k, lines, mline, rtpmap, ssrc, tmp;\n\n    // new bundle plan\n\n    lines = SDPUtil.findLines(this.session, 'a=group:');\n    if (lines.length) {\n        for (i = 0; i < lines.length; i++) {\n            tmp = lines[i].split(' ');\n            const semantics = tmp.shift().substr(8);\n\n            elem.c('group', { xmlns: 'urn:xmpp:jingle:apps:grouping:0',\n                semantics });\n            for (j = 0; j < tmp.length; j++) {\n                elem.c('content', { name: tmp[j] }).up();\n            }\n            elem.up();\n        }\n    }\n    for (i = 0; i < this.media.length; i++) {\n        mline = SDPUtil.parseMLine(this.media[i].split('\\r\\n')[0]);\n        if (!(mline.media === 'audio'\n              || mline.media === 'video'\n              || mline.media === 'application')) {\n            continue; // eslint-disable-line no-continue\n        }\n        const assrcline = SDPUtil.findLine(this.media[i], 'a=ssrc:');\n\n        if (assrcline) {\n            ssrc = assrcline.substring(7).split(' ')[0]; // take the first\n        } else {\n            ssrc = false;\n        }\n\n        elem.c('content', { creator: thecreator,\n            name: mline.media });\n        const amidline = SDPUtil.findLine(this.media[i], 'a=mid:');\n\n        if (amidline) {\n            // prefer identifier from a=mid if present\n            const mid = SDPUtil.parseMID(amidline);\n\n            elem.attrs({ name: mid });\n        }\n\n        if (SDPUtil.findLine(this.media[i], 'a=rtpmap:').length) {\n            elem.c('description',\n                { xmlns: 'urn:xmpp:jingle:apps:rtp:1',\n                    media: mline.media });\n            if (ssrc) {\n                elem.attrs({ ssrc });\n            }\n            for (j = 0; j < mline.fmt.length; j++) {\n                rtpmap\n                    = SDPUtil.findLine(\n                        this.media[i],\n                        `a=rtpmap:${mline.fmt[j]}`);\n                elem.c('payload-type', SDPUtil.parseRTPMap(rtpmap));\n\n                // put any 'a=fmtp:' + mline.fmt[j] lines into <param name=foo\n                // value=bar/>\n                const afmtpline\n                    = SDPUtil.findLine(\n                        this.media[i],\n                        `a=fmtp:${mline.fmt[j]}`);\n\n                if (afmtpline) {\n                    tmp = SDPUtil.parseFmtp(afmtpline);\n\n                    // eslint-disable-next-line max-depth\n                    for (k = 0; k < tmp.length; k++) {\n                        elem.c('parameter', tmp[k]).up();\n                    }\n                }\n\n                // XEP-0293 -- map a=rtcp-fb\n                this.rtcpFbToJingle(i, elem, mline.fmt[j]);\n\n                elem.up();\n            }\n            const crypto\n                = SDPUtil.findLines(this.media[i], 'a=crypto:', this.session);\n\n            if (crypto.length) {\n                elem.c('encryption', { required: 1 });\n                crypto.forEach(\n                    line => elem.c('crypto', SDPUtil.parseCrypto(line)).up());\n                elem.up(); // end of encryption\n            }\n\n            if (ssrc) {\n                const ssrcMap = SDPUtil.parseSSRC(this.media[i]);\n\n                for (const [ availableSsrc, ssrcParameters ] of ssrcMap) {\n                    elem.c('source', {\n                        ssrc: availableSsrc,\n                        xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'\n                    });\n\n                    ssrcParameters.forEach(ssrcSdpLine => {\n                        // get everything after first space\n                        const idx = ssrcSdpLine.indexOf(' ');\n                        const kv = ssrcSdpLine.substr(idx + 1);\n\n                        elem.c('parameter');\n                        if (kv.indexOf(':') === -1) {\n                            elem.attrs({ name: kv });\n                        } else {\n                            const name = kv.split(':', 2)[0];\n\n                            elem.attrs({ name });\n\n                            let v = kv.split(':', 2)[1];\n\n                            v = SDPUtil.filterSpecialChars(v);\n                            elem.attrs({ value: v });\n                        }\n                        elem.up();\n                    });\n\n                    elem.up();\n                }\n\n                // XEP-0339 handle ssrc-group attributes\n                const ssrcGroupLines\n                    = SDPUtil.findLines(this.media[i], 'a=ssrc-group:');\n\n                ssrcGroupLines.forEach(line => {\n                    const idx = line.indexOf(' ');\n                    const semantics = line.substr(0, idx).substr(13);\n                    const ssrcs = line.substr(14 + semantics.length).split(' ');\n\n                    if (ssrcs.length) {\n                        elem.c('ssrc-group', { semantics,\n                            xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0' });\n                        ssrcs.forEach(s => elem.c('source', { ssrc: s }).up());\n                        elem.up();\n                    }\n                });\n            }\n\n            const ridLines = SDPUtil.findLines(this.media[i], 'a=rid');\n\n            if (ridLines.length) {\n                // Map a line which looks like \"a=rid:2 send\" to just\n                // the rid (\"2\")\n                const rids = ridLines\n                    .map(ridLine => ridLine.split(':')[1])\n                    .map(ridInfo => ridInfo.split(' ')[0]);\n\n                rids.forEach(rid => {\n                    elem.c('source', {\n                        rid,\n                        xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'\n                    });\n                    elem.up();\n                });\n                const unifiedSimulcast\n                    = SDPUtil.findLine(this.media[i], 'a=simulcast');\n\n                if (unifiedSimulcast) {\n                    elem.c('rid-group', {\n                        semantics: 'SIM',\n                        xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'\n                    });\n                    rids.forEach(rid => {\n                        elem.c('source', { rid }).up();\n                    });\n                    elem.up();\n                }\n            }\n\n            if (SDPUtil.findLine(this.media[i], 'a=rtcp-mux')) {\n                elem.c('rtcp-mux').up();\n            }\n\n            // XEP-0293 -- map a=rtcp-fb:*\n            this.rtcpFbToJingle(i, elem, '*');\n\n            // XEP-0294\n            lines = SDPUtil.findLines(this.media[i], 'a=extmap:');\n            if (lines.length) {\n                for (j = 0; j < lines.length; j++) {\n                    tmp = SDPUtil.parseExtmap(lines[j]);\n                    elem.c('rtp-hdrext', {\n                        xmlns: 'urn:xmpp:jingle:apps:rtp:rtp-hdrext:0',\n                        uri: tmp.uri,\n                        id: tmp.value\n                    });\n\n                    // eslint-disable-next-line max-depth\n                    if (tmp.hasOwnProperty('direction')) {\n\n                        // eslint-disable-next-line max-depth\n                        switch (tmp.direction) {\n                        case 'sendonly':\n                            elem.attrs({ senders: 'responder' });\n                            break;\n                        case 'recvonly':\n                            elem.attrs({ senders: 'initiator' });\n                            break;\n                        case 'sendrecv':\n                            elem.attrs({ senders: 'both' });\n                            break;\n                        case 'inactive':\n                            elem.attrs({ senders: 'none' });\n                            break;\n                        }\n                    }\n\n                    // TODO: handle params\n                    elem.up();\n                }\n            }\n            elem.up(); // end of description\n        }\n\n        // map ice-ufrag/pwd, dtls fingerprint, candidates\n        this.transportToJingle(i, elem);\n\n        const m = this.media[i];\n\n        if (SDPUtil.findLine(m, 'a=sendrecv', this.session)) {\n            elem.attrs({ senders: 'both' });\n        } else if (SDPUtil.findLine(m, 'a=sendonly', this.session)) {\n            elem.attrs({ senders: 'initiator' });\n        } else if (SDPUtil.findLine(m, 'a=recvonly', this.session)) {\n            elem.attrs({ senders: 'responder' });\n        } else if (SDPUtil.findLine(m, 'a=inactive', this.session)) {\n            elem.attrs({ senders: 'none' });\n        }\n        if (mline.port === '0') {\n            // estos hack to reject an m-line\n            elem.attrs({ senders: 'rejected' });\n        }\n        elem.up(); // end of content\n    }\n    elem.up();\n\n    return elem;\n};\n\nSDP.prototype.transportToJingle = function(mediaindex, elem) {\n    let tmp;\n    const self = this;\n\n    elem.c('transport');\n\n    // XEP-0343 DTLS/SCTP\n    const sctpmap\n        = SDPUtil.findLine(this.media[mediaindex], 'a=sctpmap:', self.session);\n\n    if (sctpmap) {\n        const sctpAttrs = SDPUtil.parseSCTPMap(sctpmap);\n\n        elem.c('sctpmap', {\n            xmlns: 'urn:xmpp:jingle:transports:dtls-sctp:1',\n            number: sctpAttrs[0], /* SCTP port */\n            protocol: sctpAttrs[1] /* protocol */\n        });\n\n        // Optional stream count attribute\n        if (sctpAttrs.length > 2) {\n            elem.attrs({ streams: sctpAttrs[2] });\n        }\n        elem.up();\n    }\n\n    // XEP-0320\n    const fingerprints\n        = SDPUtil.findLines(\n            this.media[mediaindex],\n            'a=fingerprint:',\n            this.session);\n\n    fingerprints.forEach(line => {\n        tmp = SDPUtil.parseFingerprint(line);\n        tmp.xmlns = 'urn:xmpp:jingle:apps:dtls:0';\n        elem.c('fingerprint').t(tmp.fingerprint);\n        delete tmp.fingerprint;\n\n        // eslint-disable-next-line no-param-reassign\n        line\n            = SDPUtil.findLine(\n                self.media[mediaindex],\n                'a=setup:',\n                self.session);\n        if (line) {\n            tmp.setup = line.substr(8);\n        }\n        elem.attrs(tmp);\n        elem.up(); // end of fingerprint\n    });\n    tmp = SDPUtil.iceparams(this.media[mediaindex], this.session);\n    if (tmp) {\n        tmp.xmlns = 'urn:xmpp:jingle:transports:ice-udp:1';\n        elem.attrs(tmp);\n\n        // XEP-0176\n        const lines\n            = SDPUtil.findLines(\n                this.media[mediaindex],\n                'a=candidate:',\n                this.session);\n\n        if (lines.length) { // add any a=candidate lines\n            lines.forEach(line => {\n                const candidate = SDPUtil.candidateToJingle(line);\n\n                if (self.failICE) {\n                    candidate.ip = '1.1.1.1';\n                }\n                const protocol\n                    = candidate && typeof candidate.protocol === 'string'\n                        ? candidate.protocol.toLowerCase()\n                        : '';\n\n                if ((self.removeTcpCandidates\n                        && (protocol === 'tcp' || protocol === 'ssltcp'))\n                    || (self.removeUdpCandidates && protocol === 'udp')) {\n                    return;\n                }\n                elem.c('candidate', candidate).up();\n            });\n        }\n    }\n    elem.up(); // end of transport\n};\n\n// XEP-0293\nSDP.prototype.rtcpFbToJingle = function(mediaindex, elem, payloadtype) {\n    const lines\n        = SDPUtil.findLines(\n            this.media[mediaindex],\n            `a=rtcp-fb:${payloadtype}`);\n\n    lines.forEach(line => {\n        const tmp = SDPUtil.parseRTCPFB(line);\n\n        if (tmp.type === 'trr-int') {\n            elem.c('rtcp-fb-trr-int', {\n                xmlns: 'urn:xmpp:jingle:apps:rtp:rtcp-fb:0',\n                value: tmp.params[0]\n            });\n            elem.up();\n        } else {\n            elem.c('rtcp-fb', {\n                xmlns: 'urn:xmpp:jingle:apps:rtp:rtcp-fb:0',\n                type: tmp.type\n            });\n            if (tmp.params.length > 0) {\n                elem.attrs({ 'subtype': tmp.params[0] });\n            }\n            elem.up();\n        }\n    });\n};\n\nSDP.prototype.rtcpFbFromJingle = function(elem, payloadtype) { // XEP-0293\n    let media = '';\n    let tmp\n        = elem.find(\n            '>rtcp-fb-trr-int[xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\"]');\n\n    if (tmp.length) {\n        media += 'a=rtcp-fb:* trr-int ';\n        if (tmp.attr('value')) {\n            media += tmp.attr('value');\n        } else {\n            media += '0';\n        }\n        media += '\\r\\n';\n    }\n    tmp = elem.find('>rtcp-fb[xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\"]');\n    tmp.each(function() {\n        /* eslint-disable no-invalid-this */\n        media += `a=rtcp-fb:${payloadtype} ${$(this).attr('type')}`;\n        if ($(this).attr('subtype')) {\n            media += ` ${$(this).attr('subtype')}`;\n        }\n        media += '\\r\\n';\n\n        /* eslint-enable no-invalid-this */\n    });\n\n    return media;\n};\n\n// construct an SDP from a jingle stanza\nSDP.prototype.fromJingle = function(jingle) {\n    const self = this;\n\n    this.raw = 'v=0\\r\\n'\n        + 'o=- 1923518516 2 IN IP4 0.0.0.0\\r\\n'// FIXME\n        + 's=-\\r\\n'\n        + 't=0 0\\r\\n';\n\n    // http://tools.ietf.org/html/draft-ietf-mmusic-sdp-bundle-negotiation-04\n    // #section-8\n    const groups\n        = $(jingle).find('>group[xmlns=\"urn:xmpp:jingle:apps:grouping:0\"]');\n\n    if (groups.length) {\n        groups.each((idx, group) => {\n            const contents\n                = $(group)\n                    .find('>content')\n                    .map((_, content) => content.getAttribute('name'))\n                    .get();\n\n            if (contents.length > 0) {\n                self.raw\n                    += `a=group:${\n                        group.getAttribute('semantics')\n                            || group.getAttribute('type')} ${\n                        contents.join(' ')}\\r\\n`;\n            }\n        });\n    }\n\n    this.session = this.raw;\n    jingle.find('>content').each(function() {\n        // eslint-disable-next-line no-invalid-this\n        const m = self.jingle2media($(this));\n\n        self.media.push(m);\n    });\n\n    // reconstruct msid-semantic -- apparently not necessary\n    /*\n     var msid = SDPUtil.parseSSRC(this.raw);\n     if (msid.hasOwnProperty('mslabel')) {\n     this.session += \"a=msid-semantic: WMS \" + msid.mslabel + \"\\r\\n\";\n     }\n     */\n\n    this.raw = this.session + this.media.join('');\n};\n\n// translate a jingle content element into an an SDP media part\nSDP.prototype.jingle2media = function(content) {\n    const desc = content.find('description');\n    let media = '';\n    const self = this;\n    const sctp = content.find(\n        '>transport>sctpmap[xmlns=\"urn:xmpp:jingle:transports:dtls-sctp:1\"]');\n\n    let tmp = { media: desc.attr('media') };\n\n    tmp.port = '1';\n    if (content.attr('senders') === 'rejected') {\n        // estos hack to reject an m-line.\n        tmp.port = '0';\n    }\n    if (content.find('>transport>fingerprint').length\n            || desc.find('encryption').length) {\n        tmp.proto = sctp.length ? 'DTLS/SCTP' : 'RTP/SAVPF';\n    } else {\n        tmp.proto = 'RTP/AVPF';\n    }\n    if (sctp.length) {\n        media += `m=application 1 DTLS/SCTP ${sctp.attr('number')}\\r\\n`;\n        media += `a=sctpmap:${sctp.attr('number')} ${sctp.attr('protocol')}`;\n\n        const streamCount = sctp.attr('streams');\n\n        if (streamCount) {\n            media += ` ${streamCount}\\r\\n`;\n        } else {\n            media += '\\r\\n';\n        }\n    } else {\n        tmp.fmt\n            = desc\n                .find('payload-type')\n                .map(function() {\n                    // eslint-disable-next-line no-invalid-this\n                    return this.getAttribute('id');\n                })\n                .get();\n        media += `${SDPUtil.buildMLine(tmp)}\\r\\n`;\n    }\n\n    media += 'c=IN IP4 0.0.0.0\\r\\n';\n    if (!sctp.length) {\n        media += 'a=rtcp:1 IN IP4 0.0.0.0\\r\\n';\n    }\n    tmp\n        = content.find(\n            '>transport[xmlns=\"urn:xmpp:jingle:transports:ice-udp:1\"]');\n    if (tmp.length) {\n        if (tmp.attr('ufrag')) {\n            media += `${SDPUtil.buildICEUfrag(tmp.attr('ufrag'))}\\r\\n`;\n        }\n        if (tmp.attr('pwd')) {\n            media += `${SDPUtil.buildICEPwd(tmp.attr('pwd'))}\\r\\n`;\n        }\n        tmp.find('>fingerprint').each(function() {\n            /* eslint-disable no-invalid-this */\n            // FIXME: check namespace at some point\n            media += `a=fingerprint:${this.getAttribute('hash')}`;\n            media += ` ${$(this).text()}`;\n            media += '\\r\\n';\n            if (this.getAttribute('setup')) {\n                media += `a=setup:${this.getAttribute('setup')}\\r\\n`;\n            }\n\n            /* eslint-enable no-invalid-this */\n        });\n    }\n    switch (content.attr('senders')) {\n    case 'initiator':\n        media += 'a=sendonly\\r\\n';\n        break;\n    case 'responder':\n        media += 'a=recvonly\\r\\n';\n        break;\n    case 'none':\n        media += 'a=inactive\\r\\n';\n        break;\n    case 'both':\n        media += 'a=sendrecv\\r\\n';\n        break;\n    }\n    media += `a=mid:${content.attr('name')}\\r\\n`;\n\n    // <description><rtcp-mux/></description>\n    // see http://code.google.com/p/libjingle/issues/detail?id=309 -- no spec\n    // though\n    // and http://mail.jabber.org/pipermail/jingle/2011-December/001761.html\n    if (desc.find('rtcp-mux').length) {\n        media += 'a=rtcp-mux\\r\\n';\n    }\n\n    if (desc.find('encryption').length) {\n        desc.find('encryption>crypto').each(function() {\n            /* eslint-disable no-invalid-this */\n            media += `a=crypto:${this.getAttribute('tag')}`;\n            media += ` ${this.getAttribute('crypto-suite')}`;\n            media += ` ${this.getAttribute('key-params')}`;\n            if (this.getAttribute('session-params')) {\n                media += ` ${this.getAttribute('session-params')}`;\n            }\n            media += '\\r\\n';\n\n            /* eslint-enable no-invalid-this */\n        });\n    }\n    desc.find('payload-type').each(function() {\n        /* eslint-disable no-invalid-this */\n        media += `${SDPUtil.buildRTPMap(this)}\\r\\n`;\n        if ($(this).find('>parameter').length) {\n            media += `a=fmtp:${this.getAttribute('id')} `;\n            media\n                += $(this)\n                    .find('parameter')\n                    .map(function() {\n                        const name = this.getAttribute('name');\n\n                        return (\n                            (name ? `${name}=` : '')\n                                + this.getAttribute('value'));\n                    })\n                    .get()\n                    .join('; ');\n            media += '\\r\\n';\n        }\n\n        // xep-0293\n        media += self.rtcpFbFromJingle($(this), this.getAttribute('id'));\n\n        /* eslint-enable no-invalid-this */\n    });\n\n    // xep-0293\n    media += self.rtcpFbFromJingle(desc, '*');\n\n    // xep-0294\n    tmp\n        = desc.find(\n            '>rtp-hdrext[xmlns=\"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0\"]');\n    tmp.each(function() {\n        /* eslint-disable no-invalid-this */\n        media\n            += `a=extmap:${this.getAttribute('id')} ${\n                this.getAttribute('uri')}\\r\\n`;\n\n        /* eslint-enable no-invalid-this */\n    });\n\n    content\n        .find(\n            '>transport[xmlns=\"urn:xmpp:jingle:transports:ice-udp:1\"]'\n                + '>candidate')\n        .each(function() {\n            /* eslint-disable no-invalid-this */\n            let protocol = this.getAttribute('protocol');\n\n            protocol\n                = typeof protocol === 'string' ? protocol.toLowerCase() : '';\n\n            if ((self.removeTcpCandidates\n                    && (protocol === 'tcp' || protocol === 'ssltcp'))\n                || (self.removeUdpCandidates && protocol === 'udp')) {\n                return;\n            } else if (self.failICE) {\n                this.setAttribute('ip', '1.1.1.1');\n            }\n\n            media += SDPUtil.candidateFromJingle(this);\n\n            /* eslint-enable no-invalid-this */\n        });\n\n    // XEP-0339 handle ssrc-group attributes\n    content\n        .find('description>ssrc-group[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]')\n        .each(function() {\n            /* eslint-disable no-invalid-this */\n            const semantics = this.getAttribute('semantics');\n            const ssrcs\n                = $(this)\n                    .find('>source')\n                    .map(function() {\n                        return this.getAttribute('ssrc');\n                    })\n                    .get();\n\n            if (ssrcs.length) {\n                media += `a=ssrc-group:${semantics} ${ssrcs.join(' ')}\\r\\n`;\n            }\n\n            /* eslint-enable no-invalid-this */\n        });\n\n    tmp\n        = content.find(\n            'description>source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]');\n    tmp.each(function() {\n        /* eslint-disable no-invalid-this */\n        const ssrc = this.getAttribute('ssrc');\n\n        // eslint-disable-next-line newline-per-chained-call\n        $(this).find('>parameter').each(function() {\n            const name = this.getAttribute('name');\n            let value = this.getAttribute('value');\n\n            value = SDPUtil.filterSpecialChars(value);\n            media += `a=ssrc:${ssrc} ${name}`;\n            if (value && value.length) {\n                media += `:${value}`;\n            }\n            media += '\\r\\n';\n        });\n\n        /* eslint-enable no-invalid-this */\n    });\n\n    return media;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/SDP.js","/**\n * Event triggered when participant's muted status changes.\n * @param {string} endpointId the track owner's identifier (MUC nickname)\n * @param {MediaType} mediaType \"audio\" or \"video\"\n * @param {boolean} isMuted the new muted state\n */\nexport const PEER_MUTED_CHANGED = 'signaling.peerMuted';\n\n/**\n * Event triggered when participant's video type changes.\n * @param {string} endpointId the video owner's ID (MUC nickname)\n * @param {VideoType} videoType the new value\n */\nexport const PEER_VIDEO_TYPE_CHANGED = 'signaling.peerVideoType';\n\n\n\n// WEBPACK FOOTER //\n// ./service/RTC/SignalingEvents.js","/* global __filename, module */\nimport EventEmitter from 'events';\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as JitsiTrackEvents from '../../JitsiTrackEvents';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport RTCUtils from './RTCUtils';\n\nconst logger = getLogger(__filename);\n\n/**\n * Maps our handler types to MediaStreamTrack properties.\n */\nconst trackHandler2Prop = {\n    'track_mute': 'onmute', // Not supported on FF\n    'track_unmute': 'onunmute',\n    'track_ended': 'onended'\n};\n\n/**\n * Adds onended/oninactive handler to a MediaStream.\n * @param mediaStream a MediaStream to attach onended/oninactive handler\n * @param handler the handler\n */\nfunction addMediaStreamInactiveHandler(mediaStream, handler) {\n    // Temasys will use onended\n    if (typeof mediaStream.active === 'undefined') {\n        mediaStream.onended = handler;\n    } else {\n        mediaStream.oninactive = handler;\n    }\n}\n\n/**\n * Represents a single media track (either audio or video).\n */\nexport default class JitsiTrack extends EventEmitter {\n    /* eslint-disable max-params */\n    /**\n     * Represents a single media track (either audio or video).\n     * @constructor\n     * @param conference the rtc instance\n     * @param stream the WebRTC MediaStream instance\n     * @param track the WebRTC MediaStreamTrack instance, must be part of\n     * the given <tt>stream</tt>.\n     * @param streamInactiveHandler the function that will handle\n     *        onended/oninactive events of the stream.\n     * @param trackMediaType the media type of the JitsiTrack\n     * @param videoType the VideoType for this track if any\n     */\n    constructor(\n            conference,\n            stream,\n            track,\n            streamInactiveHandler,\n            trackMediaType,\n            videoType) {\n        super();\n\n        // aliases for addListener/removeListener\n        this.addEventListener = this.addListener;\n        this.removeEventListener = this.off = this.removeListener;\n\n        /**\n         * Array with the HTML elements that are displaying the streams.\n         * @type {Array}\n         */\n        this.containers = [];\n        this.conference = conference;\n        this.audioLevel = -1;\n        this.type = trackMediaType;\n        this.track = track;\n        this.videoType = videoType;\n        this.handlers = new Map();\n\n        /**\n         * Indicates whether this JitsiTrack has been disposed. If true, this\n         * JitsiTrack is to be considered unusable and operations involving it\n         * are to fail (e.g. {@link JitsiConference#addTrack(JitsiTrack)},\n         * {@link JitsiConference#removeTrack(JitsiTrack)}).\n         * @type {boolean}\n         */\n        this.disposed = false;\n\n        /**\n         * The inactive handler which will be triggered when the underlying\n         * <tt>MediaStream</tt> ends.\n         *\n         * @private\n         * @type {Function}\n         */\n        this._streamInactiveHandler = streamInactiveHandler;\n\n        this._setStream(stream);\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Sets handler to the WebRTC MediaStream or MediaStreamTrack object\n     * depending on the passed type.\n     * @param {string} type the type of the handler that is going to be set\n     * @param {Function} handler the handler.\n     */\n    _setHandler(type, handler) {\n        if (!trackHandler2Prop.hasOwnProperty(type)) {\n            logger.error(`Invalid handler type ${type}`);\n\n            return;\n        }\n        if (handler) {\n            this.handlers.set(type, handler);\n        } else {\n            this.handlers.delete(type);\n        }\n\n        if (this.stream) {\n            // FIXME Why only video tracks?\n            for (const track of this.stream.getVideoTracks()) {\n                track[trackHandler2Prop[type]] = handler;\n            }\n        }\n    }\n\n    /**\n     * Unregisters all event handlers bound to the underlying media stream/track\n     * @private\n     */\n    _unregisterHandlers() {\n        if (!this.stream) {\n            logger.warn(\n                `${this}: unable to unregister handlers - no stream object`);\n\n            return;\n        }\n\n        for (const type of this.handlers.keys()) {\n            // FIXME Why only video tracks?\n            for (const videoTrack of this.stream.getVideoTracks()) {\n                videoTrack[trackHandler2Prop[type]] = undefined;\n            }\n        }\n        if (this._streamInactiveHandler) {\n            addMediaStreamInactiveHandler(this.stream, undefined);\n        }\n    }\n\n    /**\n     * Sets the stream property of JitsiTrack object and sets all stored\n     * handlers to it.\n     *\n     * @param {MediaStream} stream the new stream.\n     * @protected\n     */\n    _setStream(stream) {\n        if (this.stream === stream) {\n            return;\n        }\n\n        this.stream = stream;\n\n        // TODO Practically, that's like the opposite of _unregisterHandlers\n        // i.e. may be abstracted into a function/method called\n        // _registerHandlers for clarity and easing the maintenance of the two\n        // pieces of source code.\n        if (this.stream) {\n            for (const type of this.handlers.keys()) {\n                this._setHandler(type, this.handlers.get(type));\n            }\n            if (this._streamInactiveHandler) {\n                addMediaStreamInactiveHandler(\n                    this.stream, this._streamInactiveHandler);\n            }\n        }\n    }\n\n    /**\n     * Returns the type (audio or video) of this track.\n     */\n    getType() {\n        return this.type;\n    }\n\n    /**\n     * Check if this is an audio track.\n     */\n    isAudioTrack() {\n        return this.getType() === MediaType.AUDIO;\n    }\n\n    /**\n     * Checks whether the underlying WebRTC <tt>MediaStreamTrack</tt> is muted\n     * according to it's 'muted' field status.\n     * @return {boolean} <tt>true</tt> if the underlying\n     * <tt>MediaStreamTrack</tt> is muted or <tt>false</tt> otherwise.\n     */\n    isWebRTCTrackMuted() {\n        return this.track && this.track.muted;\n    }\n\n    /**\n     * Check if this is a video track.\n     */\n    isVideoTrack() {\n        return this.getType() === MediaType.VIDEO;\n    }\n\n    /**\n     * Checks whether this is a local track.\n     * @abstract\n     * @return {boolean} 'true' if it's a local track or 'false' otherwise.\n     */\n    isLocal() {\n        throw new Error('Not implemented by subclass');\n    }\n\n    /**\n     * Returns the WebRTC MediaStream instance.\n     */\n    getOriginalStream() {\n        return this.stream;\n    }\n\n    /**\n     * Returns the ID of the underlying WebRTC Media Stream(if any)\n     * @returns {String|null}\n     */\n    getStreamId() {\n        return this.stream ? this.stream.id : null;\n    }\n\n    /**\n     * Return the underlying WebRTC MediaStreamTrack\n     * @returns {MediaStreamTrack}\n     */\n    getTrack() {\n        return this.track;\n    }\n\n    /**\n     * Returns the ID of the underlying WebRTC MediaStreamTrack(if any)\n     * @returns {String|null}\n     */\n    getTrackId() {\n        return this.track ? this.track.id : null;\n    }\n\n    /**\n     * Return meaningful usage label for this track depending on it's media and\n     * eventual video type.\n     * @returns {string}\n     */\n    getUsageLabel() {\n        if (this.isAudioTrack()) {\n            return 'mic';\n        }\n\n        return this.videoType ? this.videoType : 'default';\n    }\n\n    /**\n     * Eventually will trigger RTCEvents.TRACK_ATTACHED event.\n     * @param container the video/audio container to which this stream is\n     *        attached and for which event will be fired.\n     * @private\n     */\n    _maybeFireTrackAttached(container) {\n        if (this.conference && container) {\n            this.conference._onTrackAttach(this, container);\n        }\n    }\n\n    /**\n     * Attaches the MediaStream of this track to an HTML container.\n     * Adds the container to the list of containers that are displaying the\n     * track. Note that Temasys plugin will replace original audio/video element\n     * with 'object' when stream is being attached to the container for the\n     * first time.\n     * * NOTE * if given container element is not visible when the stream is\n     * being attached it will be shown back given that Temasys plugin is\n     * currently in use.\n     *\n     * @param container the HTML container which can be 'video' or 'audio'\n     * element. It can also be 'object' element if Temasys plugin is in use and\n     * this method has been called previously on video or audio HTML element.\n     *\n     * @returns potentially new instance of container if it was replaced by the\n     *          library. That's the case when Temasys plugin is in use.\n     */\n    attach(container) {\n        let c = container;\n\n        if (this.stream) {\n            c = RTCUtils.attachMediaStream(container, this.stream);\n        }\n        this.containers.push(c);\n        this._maybeFireTrackAttached(c);\n        this._attachTTFMTracker(c);\n\n        return c;\n    }\n\n    /**\n     * Removes this JitsiTrack from the passed HTML container.\n     *\n     * @param container the HTML container to detach from this JitsiTrack. If\n     * <tt>null</tt> or <tt>undefined</tt>, all containers are removed. A\n     * container can be a 'video', 'audio' or 'object' HTML element instance to\n     * which this JitsiTrack is currently attached.\n     */\n    detach(container) {\n        for (let cs = this.containers, i = cs.length - 1; i >= 0; --i) {\n            const c = cs[i];\n\n            if (!container) {\n                RTCUtils.attachMediaStream(c, null);\n            }\n            if (!container || c === container) {\n                cs.splice(i, 1);\n            }\n        }\n\n        if (container) {\n            RTCUtils.attachMediaStream(container, null);\n        }\n    }\n\n    /**\n     * Attach time to first media tracker only if there is conference and only\n     * for the first element.\n     *\n     * @param {HTMLElement} container the HTML container which can be 'video' or\n     * 'audio' element. It can also be 'object' element if Temasys plugin is in\n     * use and this method has been called previously on video or audio HTML\n     * element.\n     * @private\n     */\n    _attachTTFMTracker(container) { // eslint-disable-line no-unused-vars\n        // Should be defined by the classes that are extending JitsiTrack\n    }\n\n    /**\n     * Removes attached event listeners.\n     *\n     * @returns {Promise}\n     */\n    dispose() {\n        this.removeAllListeners();\n\n        this.disposed = true;\n\n        return Promise.resolve();\n    }\n\n    /**\n     * Returns true if this is a video track and the source of the video is a\n     * screen capture as opposed to a camera.\n     */\n    isScreenSharing() {\n        // FIXME: Should be fixed or removed.\n    }\n\n    /**\n     * Returns id of the track.\n     * @returns {string|null} id of the track or null if this is fake track.\n     */\n    getId() {\n        if (this.stream) {\n            return RTCUtils.getStreamID(this.stream);\n        }\n\n        return null;\n    }\n\n    /**\n     * Checks whether the MediaStream is active/not ended.\n     * When there is no check for active we don't have information and so\n     * will return that stream is active (in case of FF).\n     * @returns {boolean} whether MediaStream is active.\n     */\n    isActive() {\n        if (typeof this.stream.active !== 'undefined') {\n            return this.stream.active;\n        }\n\n        return true;\n    }\n\n    /**\n     * Sets the audio level for the stream\n     * @param {number} audioLevel value between 0 and 1\n     * @param {TraceablePeerConnection} [tpc] the peerconnection instance which\n     * is source for the audio level. It can be <tt>undefined</tt> for\n     * a local track if the audio level was measured outside of the\n     * peerconnection (see /modules/statistics/LocalStatsCollector.js).\n     */\n    setAudioLevel(audioLevel, tpc) {\n        if (this.audioLevel !== audioLevel) {\n            this.audioLevel = audioLevel;\n            this.emit(\n                JitsiTrackEvents.TRACK_AUDIO_LEVEL_CHANGED,\n                audioLevel,\n                tpc);\n        }\n    }\n\n    /**\n     * Returns the msid of the stream attached to the JitsiTrack object or null\n     * if no stream is attached.\n     */\n    getMSID() {\n        const streamId = this.getStreamId();\n        const trackId = this.getTrackId();\n\n        return streamId && trackId ? `${streamId} ${trackId}` : null;\n    }\n\n    /**\n     * Sets new audio output device for track's DOM elements. Video tracks are\n     * ignored.\n     * @param {string} audioOutputDeviceId - id of 'audiooutput' device from\n     *      navigator.mediaDevices.enumerateDevices(), '' for default device\n     * @emits JitsiTrackEvents.TRACK_AUDIO_OUTPUT_CHANGED\n     * @returns {Promise}\n     */\n    setAudioOutput(audioOutputDeviceId) {\n        if (!RTCUtils.isDeviceChangeAvailable('output')) {\n            return Promise.reject(\n                new Error('Audio output device change is not supported'));\n        }\n\n        // All audio communication is done through audio tracks, so ignore\n        // changing audio output for video tracks at all.\n        if (this.isVideoTrack()) {\n            return Promise.resolve();\n        }\n\n        return (\n            Promise.all(\n                this.containers.map(\n                    element =>\n                        element.setSinkId(audioOutputDeviceId)\n                            .catch(error => {\n                                logger.warn(\n                                    'Failed to change audio output device on'\n                                        + ' element. Default or previously set'\n                                        + ' audio output device will be used.',\n                                    element,\n                                    error);\n                                throw error;\n                            }))\n            )\n                .then(() => {\n                    this.emit(\n                        JitsiTrackEvents.TRACK_AUDIO_OUTPUT_CHANGED,\n                        audioOutputDeviceId);\n                }));\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/JitsiTrack.js","/**\n * The possible camera facing modes. For now support only 'user' and\n * 'environment' because 'left' and 'right' are not used anywhere in our\n * projects at the time of this writing. For more information please refer to\n * https://w3c.github.io/mediacapture-main/getusermedia.html\n * #def-constraint-facingMode.\n *\n * @enum {string}\n */\nconst CameraFacingMode = {\n    /**\n     * The mode which specifies the environment-facing camera.\n     */\n    ENVIRONMENT: 'environment',\n\n    /**\n     * The mode which specifies the user-facing camera.\n     */\n    USER: 'user'\n};\n\nmodule.exports = CameraFacingMode;\n\n\n\n// WEBPACK FOOTER //\n// ./service/RTC/CameraFacingMode.js","var grammar = module.exports = {\n  v: [{\n    name: 'version',\n    reg: /^(\\d*)$/\n  }],\n  o: [{ //o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: '%s %s %d %s IP%d %s'\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly..\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  //k: [{}], // outdated thing ignored\n  t: [{ //t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: '%d %d'\n  }],\n  c: [{ //c=IN IP4 10.47.197.26\n    name: 'connection',\n    reg: /^IN IP(\\d) (\\S*)/,\n    names: ['version', 'ip'],\n    format: 'IN IP%d %s'\n  }],\n  b: [{ //b=AS:4000\n    push: 'bandwidth',\n    reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n    names: ['type', 'limit'],\n    format: '%s:%s'\n  }],\n  m: [{ //m=video 51744 RTP/AVP 126 97 98 34 31\n    // NB: special - pushes to session\n    // TODO: rtp/fmtp should be filtered by the payloads found here?\n    reg: /^(\\w*) (\\d*) ([\\w\\/]*)(?: (.*))?/,\n    names: ['type', 'port', 'protocol', 'payloads'],\n    format: '%s %d %s %s'\n  }],\n  a: [\n    { //a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-\\.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding) ?\n          'rtpmap:%d %s/%s/%s':\n          o.rate ?\n          'rtpmap:%d %s/%s':\n          'rtpmap:%d %s';\n      }\n    },\n    { //a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      //a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: 'fmtp:%d %s'\n    },\n    { //a=control:streamid=0\n      name: 'control',\n      reg: /^control:(.*)/,\n      format: 'control:%s'\n    },\n    { //a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null) ?\n          'rtcp:%d %s IP%d %s':\n          'rtcp:%d';\n      }\n    },\n    { //a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: 'rtcp-fb:%d trr-int %d'\n    },\n    { //a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null) ?\n          'rtcp-fb:%s %s %s':\n          'rtcp-fb:%s %s';\n      }\n    },\n    { //a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      //a=extmap:1/recvonly URI-gps-string\n      push: 'ext',\n      reg: /^extmap:(\\d+)(?:\\/(\\w+))? (\\S*)(?: (\\S*))?/,\n      names: ['value', 'direction', 'uri', 'config'],\n      format: function (o) {\n        return 'extmap:%d' + (o.direction ? '/%s' : '%v') + ' %s' + (o.config ? ' %s' : '');\n      }\n    },\n    { //a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null) ?\n          'crypto:%d %s %s %s':\n          'crypto:%d %s %s';\n      }\n    },\n    { //a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: 'setup:%s'\n    },\n    { //a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: 'mid:%s'\n    },\n    { //a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: 'msid:%s'\n    },\n    { //a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*)/,\n      format: 'ptime:%d'\n    },\n    { //a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*)/,\n      format: 'maxptime:%d'\n    },\n    { //a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    { //a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    { //a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: 'ice-ufrag:%s'\n    },\n    { //a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: 'ice-pwd:%s'\n    },\n    { //a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: 'fingerprint:%s %s'\n    },\n    { //a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      //a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n      //a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n      //a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n      //a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n      format: function (o) {\n        var str = 'candidate:%s %d %s %d %s %d typ %s';\n\n        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? ' tcptype %s' : '%v';\n\n        if (o.generation != null) {\n          str += ' generation %d';\n        }\n\n        str += (o['network-id'] != null) ? ' network-id %d' : '%v';\n        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';\n        return str;\n      }\n    },\n    { //a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    { //a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: 'remote-candidates:%s'\n    },\n    { //a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: 'ice-options:%s'\n    },\n    { //a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: 'ssrcs',\n      reg: /^ssrc:(\\d*) ([\\w_]*)(?::(.*))?/,\n      names: ['id', 'attribute', 'value'],\n      format: function (o) {\n        var str = 'ssrc:%d';\n        if (o.attribute != null) {\n          str += ' %s';\n          if (o.value != null) {\n            str += ':%s';\n          }\n        }\n        return str;\n      }\n    },\n    { //a=ssrc-group:FEC 1 2\n      //a=ssrc-group:FEC-FR 3004364195 1080772241\n      push: 'ssrcGroups',\n      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E\n      reg: /^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: 'ssrc-group:%s %s'\n    },\n    { //a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: 'msidSemantic',\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: 'msid-semantic: %s %s' // space after ':' is not accidental\n    },\n    { //a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: 'group:%s %s'\n    },\n    { //a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    { //a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    { //a=sctpmap:5000 webrtc-datachannel 1024\n      name: 'sctpmap',\n      reg: /^sctpmap:([\\w_\\/]*) (\\S*)(?: (\\S*))?/,\n      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n      format: function (o) {\n        return (o.maxMessageSize != null) ?\n          'sctpmap:%s %s %s' :\n          'sctpmap:%s %s';\n      }\n    },\n    { //a=x-google-flag:conference\n      name: 'xGoogleFlag',\n      reg: /^x-google-flag:([^\\s]*)/,\n      format: 'x-google-flag:%s'\n    },\n    { //a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0\n      push: 'rids',\n      reg: /^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,\n      names: ['id', 'direction', 'params'],\n      format: function (o) {\n        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';\n      }\n    },\n    { //a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]\n      //a=imageattr:* send [x=800,y=640] recv *\n      //a=imageattr:100 recv [x=320,y=240]\n      push: 'imageattrs',\n      reg: new RegExp(\n        //a=imageattr:97\n        '^imageattr:(\\\\d+|\\\\*)' +\n        //send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]\n        '[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)' +\n        //recv [x=330,y=250]\n        '(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?'\n      ),\n      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],\n      format: function (o) {\n        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    { //a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8\n      //a=simulcast:recv 1;4,5 send 6;7\n      name: 'simulcast',\n      reg: new RegExp(\n        //a=simulcast:\n        '^simulcast:' +\n        //send 1,2,3;~4,~5\n        '(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)' +\n        //space + recv 6;~7,~8\n        '(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?' +\n        //end\n        '$'\n      ),\n      names: ['dir1', 'list1', 'dir2', 'list2'],\n      format: function (o) {\n        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    { //Old simulcast draft 03 (implemented by Firefox)\n      //  https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03\n      //a=simulcast: recv pt=97;98 send pt=97\n      //a=simulcast: send rid=5;6;7 paused=6,7\n      name: 'simulcast_03',\n      reg: /^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,\n      names: ['value'],\n      format: 'simulcast: %s'\n    },\n    {\n      //a=framerate:25\n      //a=framerate:29.97\n      name: 'framerate',\n      reg: /^framerate:(\\d+(?:$|\\.\\d+))/,\n      format: 'framerate:%s'\n    },\n    { // any a= that we don't understand is kepts verbatim on media.invalid\n      push: 'invalid',\n      names: ['value']\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = '%s';\n    }\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ../sdp-transform/lib/grammar.js"," /* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress); // was: relAddr\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort); // was: relPort\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n}\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  // was: channels\n  parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n          ? '/' + headerExtension.direction\n          : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      params.push(param + '=' + codec.parameters[param]);\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n}\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n      'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  caps.headerExtensions.forEach(function(extension) {\n    sdp += SDPUtils.writeExtmap(extension);\n  });\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.split(' ');\n    parts.shift();\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n        rtx: {\n          ssrc: secondarySsrc\n        }\n      };\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: secondarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  var cname;\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n      .map(function(line) {\n        return SDPUtils.parseSsrcMedia(line);\n      })\n      .filter(function(obj) {\n        return obj.attribute === 'cname';\n      })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'msid';\n  });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=thisisadapterortc ' + sessionId + ' ' + version + ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5],\n  };\n}\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n\n\n\n// WEBPACK FOOTER //\n// ../sdp/sdp.js","/* global MediaRecorder, MediaStream, webkitMediaStream */\n\nconst RecordingResult = require('./recordingResult');\n\n/**\n * Possible audio formats MIME types\n */\nconst AUDIO_WEBM = 'audio/webm'; // Supported in chrome\nconst AUDIO_OGG = 'audio/ogg'; // Supported in firefox\n\n/**\n * A TrackRecorder object holds all the information needed for recording a\n * single JitsiTrack (either remote or local)\n * @param track The JitsiTrack the object is going to hold\n */\nconst TrackRecorder = function(track) {\n    // The JitsiTrack holding the stream\n    this.track = track;\n\n    // The MediaRecorder recording the stream\n    this.recorder = null;\n\n    // The array of data chunks recorded from the stream\n    // acts as a buffer until the data is stored on disk\n    this.data = null;\n\n    // the name of the person of the JitsiTrack. This can be undefined and/or\n    // not unique\n    this.name = null;\n\n    // the time of the start of the recording\n    this.startTime = null;\n};\n\n/**\n * Starts the recording of a JitsiTrack in a TrackRecorder object.\n * This will also define the timestamp and try to update the name\n * @param trackRecorder the TrackRecorder to start\n */\nfunction startRecorder(trackRecorder) {\n    if (trackRecorder.recorder === undefined) {\n        throw new Error('Passed an object to startRecorder which is not a '\n            + 'TrackRecorder object');\n    }\n    trackRecorder.recorder.start();\n    trackRecorder.startTime = new Date();\n}\n\n/**\n * Stops the recording of a JitsiTrack in a TrackRecorder object.\n * This will also try to update the name\n * @param trackRecorder the TrackRecorder to stop\n */\nfunction stopRecorder(trackRecorder) {\n    if (trackRecorder.recorder === undefined) {\n        throw new Error('Passed an object to stopRecorder which is not a '\n            + 'TrackRecorder object');\n    }\n    trackRecorder.recorder.stop();\n}\n\n/**\n * Determines which kind of audio recording the browser supports\n * chrome supports \"audio/webm\" and firefox supports \"audio/ogg\"\n */\nfunction determineCorrectFileType() {\n    if (MediaRecorder.isTypeSupported(AUDIO_WEBM)) {\n        return AUDIO_WEBM;\n    } else if (MediaRecorder.isTypeSupported(AUDIO_OGG)) {\n        return AUDIO_OGG;\n    }\n    throw new Error(\n        'unable to create a MediaRecorder with the right mimetype!');\n}\n\n/**\n * main exported object of the file, holding all\n * relevant functions and variables for the outside world\n * @param jitsiConference the jitsiConference which this object\n * is going to record\n */\nfunction AudioRecorder(jitsiConference) {\n    // array of TrackRecorders, where each trackRecorder\n    // holds the JitsiTrack, MediaRecorder and recorder data\n    this.recorders = [];\n\n    // get which file type is supported by the current browser\n    this.fileType = determineCorrectFileType();\n\n    // boolean flag for active recording\n    this.isRecording = false;\n\n    // the jitsiconference the object is recording\n    this.jitsiConference = jitsiConference;\n}\n\n/**\n * Add the the exported module so that it can be accessed by other files\n */\nAudioRecorder.determineCorrectFileType = determineCorrectFileType;\n\n/**\n * Adds a new TrackRecorder object to the array.\n *\n * @param track the track potentially holding an audio stream\n */\nAudioRecorder.prototype.addTrack = function(track) {\n    if (track.isAudioTrack()) {\n        // create the track recorder\n        const trackRecorder = this.instantiateTrackRecorder(track);\n\n        // push it to the local array of all recorders\n\n        this.recorders.push(trackRecorder);\n\n        // update the name of the trackRecorders\n        this.updateNames();\n\n        // If we're already recording, immediately start recording this new\n        // track.\n        if (this.isRecording) {\n            startRecorder(trackRecorder);\n        }\n    }\n};\n\n/**\n * Creates a TrackRecorder object. Also creates the MediaRecorder and\n * data array for the trackRecorder.\n * @param track the JitsiTrack holding the audio MediaStream(s)\n */\nAudioRecorder.prototype.instantiateTrackRecorder = function(track) {\n    const trackRecorder = new TrackRecorder(track);\n\n    // Create a new stream which only holds the audio track\n    const originalStream = trackRecorder.track.getOriginalStream();\n    const stream = createEmptyStream();\n\n    originalStream.getAudioTracks().forEach(t => stream.addTrack(t));\n\n    // Create the MediaRecorder\n    trackRecorder.recorder = new MediaRecorder(stream,\n        { mimeType: this.fileType });\n\n    // array for holding the recorder data. Resets it when\n    // audio already has been recorder once\n    trackRecorder.data = [];\n\n    // function handling a dataEvent, e.g the stream gets new data\n    trackRecorder.recorder.ondataavailable = function(dataEvent) {\n        if (dataEvent.data.size > 0) {\n            trackRecorder.data.push(dataEvent.data);\n        }\n    };\n\n    return trackRecorder;\n};\n\n/**\n * Notifies the module that a specific track has stopped, e.g participant left\n * the conference.\n * if the recording has not started yet, the TrackRecorder will be removed from\n * the array. If the recording has started, the recorder will stop recording\n * but not removed from the array so that the recorded stream can still be\n * accessed\n *\n * @param {JitsiTrack} track the JitsiTrack to remove from the recording session\n */\nAudioRecorder.prototype.removeTrack = function(track) {\n    if (track.isVideoTrack()) {\n        return;\n    }\n\n    const array = this.recorders;\n    let i;\n\n    for (i = 0; i < array.length; i++) {\n        if (array[i].track.getParticipantId() === track.getParticipantId()) {\n            const recorderToRemove = array[i];\n\n            if (this.isRecording) {\n                stopRecorder(recorderToRemove);\n            } else {\n                // remove the TrackRecorder from the array\n                array.splice(i, 1);\n            }\n        }\n    }\n\n    // make sure the names are up to date\n    this.updateNames();\n};\n\n/**\n * Tries to update the name value of all TrackRecorder in the array.\n * If it hasn't changed,it will keep the exiting name. If it changes to a\n * undefined value, the old value will also be kept.\n */\nAudioRecorder.prototype.updateNames = function() {\n    const conference = this.jitsiConference;\n\n    this.recorders.forEach(trackRecorder => {\n        if (trackRecorder.track.isLocal()) {\n            trackRecorder.name = 'the transcriber';\n        } else {\n            const id = trackRecorder.track.getParticipantId();\n            const participant = conference.getParticipantById(id);\n            const newName = participant.getDisplayName();\n\n            if (newName !== 'undefined') {\n                trackRecorder.name = newName;\n            }\n        }\n    });\n};\n\n/**\n * Starts the audio recording of every local and remote track\n */\nAudioRecorder.prototype.start = function() {\n    if (this.isRecording) {\n        throw new Error('audiorecorder is already recording');\n    }\n\n    // set boolean isRecording flag to true so if new participants join the\n    // conference, that track can instantly start recording as well\n    this.isRecording = true;\n\n    // start all the mediaRecorders\n    this.recorders.forEach(trackRecorder => startRecorder(trackRecorder));\n\n    // log that recording has started\n    console.log(\n        `Started the recording of the audio. There are currently ${\n            this.recorders.length} recorders active.`);\n};\n\n/**\n * Stops the audio recording of every local and remote track\n */\nAudioRecorder.prototype.stop = function() {\n    // set the boolean flag to false\n    this.isRecording = false;\n\n    // stop all recorders\n    this.recorders.forEach(trackRecorder => stopRecorder(trackRecorder));\n    console.log('stopped recording');\n};\n\n/**\n * link hacking to download all recorded audio streams\n */\nAudioRecorder.prototype.download = function() {\n    this.recorders.forEach(trackRecorder => {\n        const blob = new Blob(trackRecorder.data, { type: this.fileType });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n\n        document.body.appendChild(a);\n        a.style = 'display: none';\n        a.href = url;\n        a.download = `test.${this.fileType.split('/')[1]}`;\n        a.click();\n        window.URL.revokeObjectURL(url);\n    });\n};\n\n/**\n * returns the audio files of all recorders as an array of objects,\n * which include the name of the owner of the track and the starting time stamp\n * @returns {Array} an array of RecordingResult objects\n */\nAudioRecorder.prototype.getRecordingResults = function() {\n    if (this.isRecording) {\n        throw new Error(\n            'cannot get blobs because the AudioRecorder is still recording!');\n    }\n\n    // make sure the names are up to date before sending them off\n    this.updateNames();\n\n    const array = [];\n\n    this.recorders.forEach(\n        recorder =>\n            array.push(\n                new RecordingResult(\n                    new Blob(recorder.data, { type: this.fileType }),\n                    recorder.name,\n                    recorder.startTime)));\n\n    return array;\n};\n\n/**\n * Gets the mime type of the recorder audio\n * @returns {String} the mime type of the recorder audio\n */\nAudioRecorder.prototype.getFileType = function() {\n    return this.fileType;\n};\n\n/**\n * Creates a empty MediaStream object which can be used\n * to add MediaStreamTracks to\n * @returns MediaStream\n */\nfunction createEmptyStream() {\n    // Firefox supports the MediaStream object, Chrome webkitMediaStream\n    if (typeof MediaStream !== 'undefined') {\n        return new MediaStream();\n    } else if (typeof webkitMediaStream !== 'undefined') {\n        return new webkitMediaStream(); // eslint-disable-line new-cap\n    }\n    throw new Error('cannot create a clean mediaStream');\n}\n\n/**\n * export the main object AudioRecorder\n */\nmodule.exports = AudioRecorder;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/transcription/audioRecorder.js","/**\n * The events for the media devices.\n */\n\n/**\n * Indicates that the list of available media devices has been changed. The\n * event provides the following parameters to its listeners:\n *\n * @param {MediaDeviceInfo[]} devices - array of MediaDeviceInfo or\n *  MediaDeviceInfo-like objects that are currently connected.\n *  @see https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo\n */\nexport const DEVICE_LIST_CHANGED = 'mediaDevices.devicechange';\n\n/**\n * Indicates that the environment is currently showing permission prompt to\n * access camera and/or microphone. The event provides the following\n * parameters to its listeners:\n *\n * @param {'chrome'|'opera'|'firefox'|'iexplorer'|'safari'|'nwjs'\n *  |'react-native'|'android'} environmentType - type of browser or\n *  other execution environment.\n */\nexport const PERMISSION_PROMPT_IS_SHOWN\n    = 'mediaDevices.permissionPromptIsShown';\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiMediaDevicesEvents.js","// For legacy purposes, preserve the UMD of the public API of the Jitsi Meet\n// library (a.k.a. JitsiMeetJS).\nmodule.exports = require('./JitsiMeetJS').default;\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","/* global __filename */\n\nimport { createGetUserMediaEvent } from './service/statistics/AnalyticsEvents';\nimport AuthUtil from './modules/util/AuthUtil';\nimport * as ConnectionQualityEvents\n    from './service/connectivity/ConnectionQualityEvents';\nimport GlobalOnErrorHandler from './modules/util/GlobalOnErrorHandler';\nimport * as JitsiConferenceErrors from './JitsiConferenceErrors';\nimport * as JitsiConferenceEvents from './JitsiConferenceEvents';\nimport JitsiConnection from './JitsiConnection';\nimport * as JitsiConnectionErrors from './JitsiConnectionErrors';\nimport * as JitsiConnectionEvents from './JitsiConnectionEvents';\nimport JitsiMediaDevices from './JitsiMediaDevices';\nimport * as JitsiMediaDevicesEvents from './JitsiMediaDevicesEvents';\nimport JitsiRecorderErrors from './JitsiRecorderErrors';\nimport JitsiTrackError from './JitsiTrackError';\nimport * as JitsiTrackErrors from './JitsiTrackErrors';\nimport * as JitsiTrackEvents from './JitsiTrackEvents';\nimport * as JitsiTranscriptionStatus from './JitsiTranscriptionStatus';\nimport LocalStatsCollector from './modules/statistics/LocalStatsCollector';\nimport Recording from './modules/xmpp/recording';\nimport Logger from 'jitsi-meet-logger';\nimport * as MediaType from './service/RTC/MediaType';\nimport Resolutions from './service/RTC/Resolutions';\nimport { ParticipantConnectionStatus }\n    from './modules/connectivity/ParticipantConnectionStatus';\nimport RTC from './modules/RTC/RTC';\nimport browser from './modules/browser';\nimport RTCUIHelper from './modules/RTC/RTCUIHelper';\nimport ScriptUtil from './modules/util/ScriptUtil';\nimport Statistics from './modules/statistics/statistics';\nimport * as VideoSIPGWConstants from './modules/videosipgw/VideoSIPGWConstants';\n\nconst logger = Logger.getLogger(__filename);\n\n// The amount of time to wait until firing\n// JitsiMediaDevicesEvents.PERMISSION_PROMPT_IS_SHOWN event\nconst USER_MEDIA_PERMISSION_PROMPT_TIMEOUT = 1000;\n\n/**\n *\n * @param resolution\n */\nfunction getLowerResolution(resolution) {\n    if (!Resolutions[resolution]) {\n        return null;\n    }\n    const order = Resolutions[resolution].order;\n    let res = null;\n    let resName = null;\n\n    Object.keys(Resolutions).forEach(r => {\n        const value = Resolutions[r];\n\n        if (!res || (res.order < value.order && value.order < order)) {\n            resName = r;\n            res = value;\n        }\n    });\n\n    return resName;\n}\n\n/**\n * Extracts from an 'options' objects with a specific format\n * (TODO what IS the format?) the attributes which are to be logged in analytics\n * events.\n *\n * @param options gum options (???)\n * @returns {*} the attributes to attach to analytics events.\n */\nfunction getAnalyticsAttributesFromOptions(options) {\n    const attributes = {\n        'audio_requested':\n            options.devices.includes('audio'),\n        'video_requested':\n            options.devices.includes('video'),\n        'screen_sharing_requested':\n            options.devices.includes('desktop')\n    };\n\n    if (attributes.video_requested) {\n        attributes.resolution = options.resolution;\n    }\n\n    return attributes;\n}\n\n/**\n * The public API of the Jitsi Meet library (a.k.a. JitsiMeetJS).\n */\nexport default {\n\n    version: '{#COMMIT_HASH#}',\n\n    JitsiConnection,\n    constants: {\n        participantConnectionStatus: ParticipantConnectionStatus,\n        recordingStatus: Recording.status,\n        recordingTypes: Recording.types,\n        sipVideoGW: VideoSIPGWConstants,\n        transcriptionStatus: JitsiTranscriptionStatus\n    },\n    events: {\n        conference: JitsiConferenceEvents,\n        connection: JitsiConnectionEvents,\n        track: JitsiTrackEvents,\n        mediaDevices: JitsiMediaDevicesEvents,\n        connectionQuality: ConnectionQualityEvents\n    },\n    errors: {\n        conference: JitsiConferenceErrors,\n        connection: JitsiConnectionErrors,\n        recorder: JitsiRecorderErrors,\n        track: JitsiTrackErrors\n    },\n    errorTypes: {\n        JitsiTrackError\n    },\n    logLevels: Logger.levels,\n    mediaDevices: JitsiMediaDevices,\n    analytics: Statistics.analytics,\n    init(options) {\n        Statistics.init(options);\n\n        // Initialize global window.connectionTimes\n        // FIXME do not use 'window'\n        if (!window.connectionTimes) {\n            window.connectionTimes = {};\n        }\n\n        if (options.enableAnalyticsLogging !== true) {\n            logger.warn('Analytics disabled, disposing.');\n            this.analytics.dispose();\n        }\n\n        if (options.enableWindowOnErrorHandler) {\n            GlobalOnErrorHandler.addHandler(\n                this.getGlobalOnErrorHandler.bind(this));\n        }\n\n        // Log deployment-specific information, if available.\n        // Defined outside the application by individual deployments\n        const aprops = options.deploymentInfo;\n\n        if (aprops && Object.keys(aprops).length > 0) {\n            const logObject = {};\n\n            for (const attr in aprops) {\n                if (aprops.hasOwnProperty(attr)) {\n                    logObject[attr] = aprops[attr];\n                }\n            }\n\n            logObject.id = 'deployment_info';\n            Statistics.sendLog(JSON.stringify(logObject));\n        }\n\n        if (this.version) {\n            const logObject = {\n                id: 'component_version',\n                component: 'lib-jitsi-meet',\n                version: this.version\n            };\n\n            Statistics.sendLog(JSON.stringify(logObject));\n        }\n\n        return RTC.init(options || {});\n    },\n\n    /**\n     * Returns whether the desktop sharing is enabled or not.\n     * @returns {boolean}\n     */\n    isDesktopSharingEnabled() {\n        return RTC.isDesktopSharingEnabled();\n    },\n    setLogLevel(level) {\n        Logger.setLogLevel(level);\n    },\n\n    /**\n     * Sets the log level to the <tt>Logger</tt> instance with given id.\n     * @param {Logger.levels} level the logging level to be set\n     * @param {string} id the logger id to which new logging level will be set.\n     * Usually it's the name of the JavaScript source file including the path\n     * ex. \"modules/xmpp/ChatRoom.js\"\n     */\n    setLogLevelById(level, id) {\n        Logger.setLogLevelById(level, id);\n    },\n\n    /**\n     * Registers new global logger transport to the library logging framework.\n     * @param globalTransport\n     * @see Logger.addGlobalTransport\n     */\n    addGlobalLogTransport(globalTransport) {\n        Logger.addGlobalTransport(globalTransport);\n    },\n\n    /**\n     * Removes global logging transport from the library logging framework.\n     * @param globalTransport\n     * @see Logger.removeGlobalTransport\n     */\n    removeGlobalLogTransport(globalTransport) {\n        Logger.removeGlobalTransport(globalTransport);\n    },\n\n    /**\n     * Creates the media tracks and returns them trough the callback.\n     * @param options Object with properties / settings specifying the tracks\n     * which should be created. should be created or some additional\n     * configurations about resolution for example.\n     * @param {Array} options.devices the devices that will be requested\n     * @param {string} options.resolution resolution constraints\n     * @param {bool} options.dontCreateJitsiTrack if <tt>true</tt> objects with\n     * the following structure {stream: the Media Stream, type: \"audio\" or\n     * \"video\", videoType: \"camera\" or \"desktop\"} will be returned trough the\n     * Promise, otherwise JitsiTrack objects will be returned.\n     * @param {string} options.cameraDeviceId\n     * @param {string} options.micDeviceId\n     * @param {object} options.desktopSharingExtensionExternalInstallation -\n     * enables external installation process for desktop sharing extension if\n     * the inline installation is not posible. The following properties should\n     * be provided:\n     * @param {intiger} interval - the interval (in ms) for\n     * checking whether the desktop sharing extension is installed or not\n     * @param {Function} checkAgain - returns boolean. While checkAgain()==true\n     * createLocalTracks will wait and check on every \"interval\" ms for the\n     * extension. If the desktop extension is not install and checkAgain()==true\n     * createLocalTracks will finish with rejected Promise.\n     * @param {Function} listener - The listener will be called to notify the\n     * user of lib-jitsi-meet that createLocalTracks is starting external\n     * extension installation process.\n     * NOTE: If the inline installation process is not possible and external\n     * installation is enabled the listener property will be called to notify\n     * the start of external installation process. After that createLocalTracks\n     * will start to check for the extension on every interval ms until the\n     * plugin is installed or until checkAgain return false. If the extension\n     * is found createLocalTracks will try to get the desktop sharing track and\n     * will finish the execution. If checkAgain returns false, createLocalTracks\n     * will finish the execution with rejected Promise.\n     *\n     * @param {boolean} (firePermissionPromptIsShownEvent) - if event\n     *      JitsiMediaDevicesEvents.PERMISSION_PROMPT_IS_SHOWN should be fired\n     * @returns {Promise.<{Array.<JitsiTrack>}, JitsiConferenceError>}\n     *     A promise that returns an array of created JitsiTracks if resolved,\n     *     or a JitsiConferenceError if rejected.\n     */\n    createLocalTracks(options = {}, firePermissionPromptIsShownEvent) {\n        let promiseFulfilled = false;\n\n        if (firePermissionPromptIsShownEvent === true) {\n            window.setTimeout(() => {\n                if (!promiseFulfilled) {\n                    JitsiMediaDevices.emitEvent(\n                        JitsiMediaDevicesEvents.PERMISSION_PROMPT_IS_SHOWN,\n                        browser.getName());\n                }\n            }, USER_MEDIA_PERMISSION_PROMPT_TIMEOUT);\n        }\n\n        if (!window.connectionTimes) {\n            window.connectionTimes = {};\n        }\n        window.connectionTimes['obtainPermissions.start']\n            = window.performance.now();\n\n        return RTC.obtainAudioAndVideoPermissions(options)\n            .then(tracks => {\n                promiseFulfilled = true;\n\n                window.connectionTimes['obtainPermissions.end']\n                    = window.performance.now();\n\n                Statistics.sendAnalytics(\n                    createGetUserMediaEvent(\n                        'success',\n                        getAnalyticsAttributesFromOptions(options)));\n\n                if (!RTC.options.disableAudioLevels) {\n                    for (let i = 0; i < tracks.length; i++) {\n                        const track = tracks[i];\n                        const mStream = track.getOriginalStream();\n\n                        if (track.getType() === MediaType.AUDIO) {\n                            Statistics.startLocalStats(mStream,\n                                track.setAudioLevel.bind(track));\n                            track.addEventListener(\n                                JitsiTrackEvents.LOCAL_TRACK_STOPPED,\n                                () => {\n                                    Statistics.stopLocalStats(mStream);\n                                });\n                        }\n                    }\n                }\n\n                // set real device ids\n                const currentlyAvailableMediaDevices\n                    = RTC.getCurrentlyAvailableMediaDevices();\n\n                if (currentlyAvailableMediaDevices) {\n                    for (let i = 0; i < tracks.length; i++) {\n                        const track = tracks[i];\n\n                        track._setRealDeviceIdFromDeviceList(\n                            currentlyAvailableMediaDevices);\n                    }\n                }\n\n                return tracks;\n            })\n            .catch(error => {\n                promiseFulfilled = true;\n\n                if (error.name === JitsiTrackErrors.UNSUPPORTED_RESOLUTION\n                    && !browser.usesNewGumFlow()) {\n                    const oldResolution = options.resolution || '720';\n                    const newResolution = getLowerResolution(oldResolution);\n\n                    if (newResolution !== null) {\n                        options.resolution = newResolution;\n\n                        logger.debug(\n                            'Retry createLocalTracks with resolution',\n                            newResolution);\n\n                        Statistics.sendAnalytics(createGetUserMediaEvent(\n                            'warning',\n                            {\n                                'old_resolution': oldResolution,\n                                'new_resolution': newResolution,\n                                reason: 'unsupported resolution'\n                            }));\n\n                        return this.createLocalTracks(options);\n                    }\n                }\n\n                if (error.name\n                        === JitsiTrackErrors.CHROME_EXTENSION_USER_CANCELED) {\n                    // User cancelled action is not really an error, so only\n                    // log it as an event to avoid having conference classified\n                    // as partially failed\n                    const logObject = {\n                        id: 'chrome_extension_user_canceled',\n                        message: error.message\n                    };\n\n                    Statistics.sendLog(JSON.stringify(logObject));\n\n                    Statistics.sendAnalytics(\n                        createGetUserMediaEvent(\n                            'warning',\n                            {\n                                reason: 'extension install user canceled'\n                            }));\n                } else if (error.name === JitsiTrackErrors.NOT_FOUND) {\n                    // logs not found devices with just application log to cs\n                    const logObject = {\n                        id: 'usermedia_missing_device',\n                        status: error.gum.devices\n                    };\n\n                    Statistics.sendLog(JSON.stringify(logObject));\n\n                    const attributes\n                        = getAnalyticsAttributesFromOptions(options);\n\n                    attributes.reason = 'device not found';\n                    attributes.devices = error.gum.devices.join('.');\n                    Statistics.sendAnalytics(\n                        createGetUserMediaEvent('error', attributes));\n                } else {\n                    // Report gUM failed to the stats\n                    Statistics.sendGetUserMediaFailed(error);\n\n                    const attributes\n                        = getAnalyticsAttributesFromOptions(options);\n\n                    attributes.reason = error.name;\n                    Statistics.sendAnalytics(\n                        createGetUserMediaEvent('error', attributes));\n                }\n\n                window.connectionTimes['obtainPermissions.end']\n                    = window.performance.now();\n\n                return Promise.reject(error);\n            });\n    },\n\n    /**\n     * Checks if its possible to enumerate available cameras/microphones.\n     * @returns {Promise<boolean>} a Promise which will be resolved only once\n     * the WebRTC stack is ready, either with true if the device listing is\n     * available available or with false otherwise.\n     * @deprecated use JitsiMeetJS.mediaDevices.isDeviceListAvailable instead\n     */\n    isDeviceListAvailable() {\n        logger.warn('This method is deprecated, use '\n            + 'JitsiMeetJS.mediaDevices.isDeviceListAvailable instead');\n\n        return this.mediaDevices.isDeviceListAvailable();\n    },\n\n    /**\n     * Returns true if changing the input (camera / microphone) or output\n     * (audio) device is supported and false if not.\n     * @params {string} [deviceType] - type of device to change. Default is\n     *      undefined or 'input', 'output' - for audio output device change.\n     * @returns {boolean} true if available, false otherwise.\n     * @deprecated use JitsiMeetJS.mediaDevices.isDeviceChangeAvailable instead\n     */\n    isDeviceChangeAvailable(deviceType) {\n        logger.warn('This method is deprecated, use '\n            + 'JitsiMeetJS.mediaDevices.isDeviceChangeAvailable instead');\n\n        return this.mediaDevices.isDeviceChangeAvailable(deviceType);\n    },\n\n\n    /**\n     * Checks if the current environment supports having multiple audio\n     * input devices in use simultaneously.\n     *\n     * @returns {boolean} True if multiple audio input devices can be used.\n     */\n    isMultipleAudioInputSupported() {\n        return this.mediaDevices.isMultipleAudioInputSupported();\n    },\n\n    /**\n     * Checks if local tracks can collect stats and collection is enabled.\n     *\n     * @param {boolean} True if stats are being collected for local tracks.\n     */\n    isCollectingLocalStats() {\n        return Statistics.audioLevelsEnabled\n            && LocalStatsCollector.isLocalStatsSupported();\n    },\n\n    /**\n     * Executes callback with list of media devices connected.\n     * @param {function} callback\n     * @deprecated use JitsiMeetJS.mediaDevices.enumerateDevices instead\n     */\n    enumerateDevices(callback) {\n        logger.warn('This method is deprecated, use '\n            + 'JitsiMeetJS.mediaDevices.enumerateDevices instead');\n        this.mediaDevices.enumerateDevices(callback);\n    },\n\n    /* eslint-disable max-params */\n\n    /**\n     * @returns function that can be used to be attached to window.onerror and\n     * if options.enableWindowOnErrorHandler is enabled returns\n     * the function used by the lib.\n     * (function(message, source, lineno, colno, error)).\n     */\n    getGlobalOnErrorHandler(message, source, lineno, colno, error) {\n        logger.error(\n            `UnhandledError: ${message}`,\n            `Script: ${source}`,\n            `Line: ${lineno}`,\n            `Column: ${colno}`,\n            'StackTrace: ', error);\n        Statistics.reportGlobalError(error);\n    },\n\n    /* eslint-enable max-params */\n\n    /**\n     * Represents a hub/namespace for utility functionality which may be of\n     * interest to lib-jitsi-meet clients.\n     */\n    util: {\n        AuthUtil,\n        RTCUIHelper,\n        ScriptUtil,\n        browser\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiMeetJS.js","const AuthUtil = {\n    /**\n     * Creates the URL pointing to JWT token authentication service. It is\n     * formatted from the 'urlPattern' argument which can contain the following\n     * constants:\n     * '{room}' - name of the conference room passed as <tt>roomName</tt>\n     * argument to this method.\n     * '{roleUpgrade}' - will contain 'true' if the URL will be used for\n     * the role upgrade scenario, where user connects from anonymous domain and\n     * then gets upgraded to the moderator by logging-in from the popup window.\n     *\n     * @param urlPattern a URL pattern pointing to the login service\n     * @param roomName the name of the conference room for which the user will\n     * be authenticated\n     * @param {bool} roleUpgrade <tt>true</tt> if the URL will be used for role\n     * upgrade scenario, where the user logs-in from the popup window in order\n     * to have the moderator rights granted\n     *\n     * @returns {string|null} the URL pointing to JWT login service or\n     * <tt>null</tt> if 'urlPattern' is not a string and the URL can not be\n     * constructed.\n     */\n    getTokenAuthUrl(urlPattern, roomName, roleUpgrade) {\n        const url = urlPattern;\n\n        if (typeof url !== 'string') {\n            return null;\n        }\n\n        return url.replace('{room}', roomName)\n            .replace('{roleUpgrade}', roleUpgrade === true);\n    }\n};\n\nmodule.exports = AuthUtil;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/AuthUtil.js","import {\n    CONNECTION_DISCONNECTED as ANALYTICS_CONNECTION_DISCONNECTED,\n    createConnectionFailedEvent\n} from './service/statistics/AnalyticsEvents';\nimport JitsiConference from './JitsiConference';\nimport * as JitsiConnectionEvents from './JitsiConnectionEvents';\nimport Statistics from './modules/statistics/statistics';\nimport XMPP from './modules/xmpp/xmpp';\n\n/**\n * Creates a new connection object for the Jitsi Meet server side video\n * conferencing service. Provides access to the JitsiConference interface.\n * @param appID identification for the provider of Jitsi Meet video conferencing\n * services.\n * @param token the JWT token used to authenticate with the server(optional)\n * @param options Object with properties / settings related to connection with\n * the server.\n * @constructor\n */\nexport default function JitsiConnection(appID, token, options) {\n    this.appID = appID;\n    this.token = token;\n    this.options = options;\n    this.xmpp = new XMPP(options, token);\n\n    /* eslint-disable max-params */\n    this.addEventListener(JitsiConnectionEvents.CONNECTION_FAILED,\n        (errType, msg, credentials, details) => {\n            Statistics.sendAnalyticsAndLog(\n                createConnectionFailedEvent(errType, msg, details));\n        });\n    /* eslint-enable max-params */\n\n    this.addEventListener(JitsiConnectionEvents.CONNECTION_DISCONNECTED,\n        msg => {\n            // we can see disconnects from normal tab closing of the browser\n            // and then there are no msgs, but we want to log only disconnects\n            // when there is real error\n            // XXX Do we need the difference in handling between the log and\n            // analytics event here?\n            if (msg) {\n                Statistics.sendAnalytics(\n                    ANALYTICS_CONNECTION_DISCONNECTED,\n                    { message: msg });\n            }\n            Statistics.sendLog(\n                JSON.stringify(\n                    {\n                        id: ANALYTICS_CONNECTION_DISCONNECTED,\n                        msg\n                    }));\n        });\n}\n\n/**\n * Connect the client with the server.\n * @param options {object} connecting options\n * (for example authentications parameters).\n */\nJitsiConnection.prototype.connect = function(options = {}) {\n    this.xmpp.connect(options.id, options.password);\n};\n\n/**\n * Attach to existing connection. Can be used for optimizations. For example:\n * if the connection is created on the server we can attach to it and start\n * using it.\n *\n * @param options {object} connecting options - rid, sid and jid.\n */\nJitsiConnection.prototype.attach = function(options) {\n    this.xmpp.attach(options);\n};\n\n/**\n * Disconnect the client from the server.\n */\nJitsiConnection.prototype.disconnect = function(...args) {\n    // XXX Forward any arguments passed to JitsiConnection.disconnect to\n    // XMPP.disconnect. For example, the caller of JitsiConnection.disconnect\n    // may optionally pass the event which triggered the disconnect in order to\n    // provide the implementation with finer-grained context.\n    this.xmpp.disconnect(...args);\n};\n\n/**\n * This method allows renewal of the tokens if they are expiring.\n * @param token the new token.\n */\nJitsiConnection.prototype.setToken = function(token) {\n    this.token = token;\n};\n\n/**\n * Creates and joins new conference.\n * @param name the name of the conference; if null - a generated name will be\n * provided from the api\n * @param options Object with properties / settings related to the conference\n * that will be created.\n * @returns {JitsiConference} returns the new conference object.\n */\nJitsiConnection.prototype.initJitsiConference = function(name, options) {\n    return new JitsiConference({\n        name,\n        config: options,\n        connection: this\n    });\n};\n\n/**\n * Subscribes the passed listener to the event.\n * @param event {JitsiConnectionEvents} the connection event.\n * @param listener {Function} the function that will receive the event\n */\nJitsiConnection.prototype.addEventListener = function(event, listener) {\n    this.xmpp.addListener(event, listener);\n};\n\n/**\n * Unsubscribes the passed handler.\n * @param event {JitsiConnectionEvents} the connection event.\n * @param listener {Function} the function that will receive the event\n */\nJitsiConnection.prototype.removeEventListener = function(event, listener) {\n    this.xmpp.removeListener(event, listener);\n};\n\n/**\n * Returns measured connectionTimes.\n */\nJitsiConnection.prototype.getConnectionTimes = function() {\n    return this.xmpp.connectionTimes;\n};\n\n/**\n * Adds new feature to the list of supported features for the local\n * participant.\n * @param {String} feature the name of the feature.\n * @param {boolean} submit if true - the new list of features will be\n * immediately submitted to the others.\n */\nJitsiConnection.prototype.addFeature = function(feature, submit = false) {\n    return this.xmpp.caps.addFeature(feature, submit);\n};\n\n/**\n * Removes a feature from the list of supported features for the local\n * participant\n * @param {String} feature the name of the feature.\n * @param {boolean} submit if true - the new list of features will be\n * immediately submitted to the others.\n */\nJitsiConnection.prototype.removeFeature = function(feature, submit = false) {\n    return this.xmpp.caps.removeFeature(feature, submit);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiConnection.js","/* global __filename, $, Promise */\nimport { Strophe } from 'strophe.js';\n\nimport {\n    ACTION_JINGLE_RESTART,\n    ACTION_JINGLE_SI_RECEIVED,\n    ACTION_JINGLE_TERMINATE,\n    ACTION_P2P_ESTABLISHED,\n    ACTION_P2P_FAILED,\n    ACTION_P2P_SWITCH_TO_JVB,\n    ICE_ESTABLISHMENT_DURATION_DIFF,\n    createJingleEvent,\n    createP2PEvent\n} from './service/statistics/AnalyticsEvents';\nimport AvgRTPStatsReporter from './modules/statistics/AvgRTPStatsReporter';\nimport ComponentsVersions from './modules/version/ComponentsVersions';\nimport ConnectionQuality from './modules/connectivity/ConnectionQuality';\nimport { getLogger } from 'jitsi-meet-logger';\nimport GlobalOnErrorHandler from './modules/util/GlobalOnErrorHandler';\nimport EventEmitter from 'events';\nimport authenticateAndUpgradeRole from './authenticateAndUpgradeRole';\nimport * as JitsiConferenceErrors from './JitsiConferenceErrors';\nimport JitsiConferenceEventManager from './JitsiConferenceEventManager';\nimport * as JitsiConferenceEvents from './JitsiConferenceEvents';\nimport JitsiDTMFManager from './modules/DTMF/JitsiDTMFManager';\nimport JitsiParticipant from './JitsiParticipant';\nimport JitsiTrackError from './JitsiTrackError';\nimport * as JitsiTrackErrors from './JitsiTrackErrors';\nimport * as JitsiTrackEvents from './JitsiTrackEvents';\nimport Jvb121EventGenerator from './modules/event/Jvb121EventGenerator';\nimport * as MediaType from './service/RTC/MediaType';\nimport ParticipantConnectionStatusHandler\n    from './modules/connectivity/ParticipantConnectionStatus';\nimport P2PDominantSpeakerDetection from './modules/P2PDominantSpeakerDetection';\nimport RTC from './modules/RTC/RTC';\nimport browser from './modules/browser';\nimport * as RTCEvents from './service/RTC/RTCEvents';\nimport Statistics from './modules/statistics/statistics';\nimport TalkMutedDetection from './modules/TalkMutedDetection';\nimport Transcriber from './modules/transcription/transcriber';\nimport VideoType from './service/RTC/VideoType';\nimport VideoSIPGW from './modules/videosipgw/VideoSIPGW';\nimport * as VideoSIPGWConstants from './modules/videosipgw/VideoSIPGWConstants';\nimport * as XMPPEvents from './service/xmpp/XMPPEvents';\n\nimport SpeakerStatsCollector from './modules/statistics/SpeakerStatsCollector';\n\nconst logger = getLogger(__filename);\n\n/**\n * Creates a JitsiConference object with the given name and properties.\n * Note: this constructor is not a part of the public API (objects should be\n * created using JitsiConnection.createConference).\n * @param options.config properties / settings related to the conference that\n * will be created.\n * @param options.name the name of the conference\n * @param options.connection the JitsiConnection object for this\n * JitsiConference.\n * @param {number} [options.config.avgRtpStatsN=15] how many samples are to be\n * collected by {@link AvgRTPStatsReporter}, before arithmetic mean is\n * calculated and submitted to the analytics module.\n * @param {boolean} [options.config.p2p.enabled] when set to <tt>true</tt>\n * the peer to peer mode will be enabled. It means that when there are only 2\n * participants in the conference an attempt to make direct connection will be\n * made. If the connection succeeds the conference will stop sending data\n * through the JVB connection and will use the direct one instead.\n * @param {number} [options.config.p2p.backToP2PDelay=5] a delay given in\n * seconds, before the conference switches back to P2P, after the 3rd\n * participant has left the room.\n * @param {number} [options.config.channelLastN=-1] The requested amount of\n * videos are going to be delivered after the value is in effect. Set to -1 for\n * unlimited or all available videos.\n * @param {number} [options.config.forceJVB121Ratio]\n * \"Math.random() < forceJVB121Ratio\" will determine whether a 2 people\n * conference should be moved to the JVB instead of P2P. The decision is made on\n * the responder side, after ICE succeeds on the P2P connection.\n * @param {*} [options.config.openBridgeChannel] Which kind of communication to\n * open with the videobridge. Values can be \"datachannel\", \"websocket\", true\n * (treat it as \"datachannel\"), undefined (treat it as \"datachannel\") and false\n * (don't open any channel).\n * @constructor\n *\n * FIXME Make all methods which are called from lib-internal classes\n *       to non-public (use _). To name a few:\n *       {@link JitsiConference.onLocalRoleChanged}\n *       {@link JitsiConference.onUserRoleChanged}\n *       {@link JitsiConference.onMemberLeft}\n *       and so on...\n */\nexport default function JitsiConference(options) {\n    if (!options.name || options.name.toLowerCase() !== options.name) {\n        const errmsg\n            = 'Invalid conference name (no conference name passed or it '\n                + 'contains invalid characters like capital letters)!';\n\n        logger.error(errmsg);\n        throw new Error(errmsg);\n    }\n    this.eventEmitter = new EventEmitter();\n    this.options = options;\n    this.eventManager = new JitsiConferenceEventManager(this);\n    this.participants = {};\n    this._init(options);\n    this.componentsVersions = new ComponentsVersions(this);\n\n    /**\n     * Jingle session instance for the JVB connection.\n     * @type {JingleSessionPC}\n     */\n    this.jvbJingleSession = null;\n    this.lastDominantSpeaker = null;\n    this.dtmfManager = null;\n    this.somebodySupportsDTMF = false;\n    this.authEnabled = false;\n    this.startAudioMuted = false;\n    this.startVideoMuted = false;\n    this.startMutedPolicy = {\n        audio: false,\n        video: false\n    };\n    this.availableDevices = {\n        audio: undefined,\n        video: undefined\n    };\n    this.isMutedByFocus = false;\n\n    // Flag indicates if the 'onCallEnded' method was ever called on this\n    // instance. Used to log extra analytics event for debugging purpose.\n    // We need to know if the potential issue happened before or after\n    // the restart.\n    this.wasStopped = false;\n\n    /**\n     * The object which monitors local and remote connection statistics (e.g.\n     * sending bitrate) and calculates a number which represents the connection\n     * quality.\n     */\n    this.connectionQuality\n        = new ConnectionQuality(this, this.eventEmitter, options);\n\n    /**\n     * Reports average RTP statistics to the analytics module.\n     * @type {AvgRTPStatsReporter}\n     */\n    this.avgRtpStatsReporter\n        = new AvgRTPStatsReporter(this, options.config.avgRtpStatsN || 15);\n\n    /**\n     * Indicates whether the connection is interrupted or not.\n     */\n    this.isJvbConnectionInterrupted = false;\n\n    /**\n     * The object which tracks active speaker times\n     */\n    this.speakerStatsCollector = new SpeakerStatsCollector(this);\n\n    /* P2P related fields below: */\n\n    /**\n     * Stores reference to deferred start P2P task. It's created when 3rd\n     * participant leaves the room in order to avoid ping pong effect (it\n     * could be just a page reload).\n     * @type {number|null}\n     */\n    this.deferredStartP2PTask = null;\n\n    const delay\n        = parseInt(options.config.p2p && options.config.p2p.backToP2PDelay, 10);\n\n    /**\n     * A delay given in seconds, before the conference switches back to P2P\n     * after the 3rd participant has left.\n     * @type {number}\n     */\n    this.backToP2PDelay = isNaN(delay) ? 5 : delay;\n    logger.info(`backToP2PDelay: ${this.backToP2PDelay}`);\n\n    /**\n     * If set to <tt>true</tt> it means the P2P ICE is no longer connected.\n     * When <tt>false</tt> it means that P2P ICE (media) connection is up\n     * and running.\n     * @type {boolean}\n     */\n    this.isP2PConnectionInterrupted = false;\n\n    /**\n     * Flag set to <tt>true</tt> when P2P session has been established\n     * (ICE has been connected) and this conference is currently in the peer to\n     * peer mode (P2P connection is the active one).\n     * @type {boolean}\n     */\n    this.p2p = false;\n\n    /**\n     * A JingleSession for the direct peer to peer connection.\n     * @type {JingleSessionPC}\n     */\n    this.p2pJingleSession = null;\n\n    this.videoSIPGWHandler = new VideoSIPGW(this.room);\n}\n\n// FIXME convert JitsiConference to ES6 - ASAP !\nJitsiConference.prototype.constructor = JitsiConference;\n\n/**\n * Initializes the conference object properties\n * @param options {object}\n * @param options.connection {JitsiConnection} overrides this.connection\n */\nJitsiConference.prototype._init = function(options = {}) {\n    // Override connection and xmpp properties (Useful if the connection\n    // reloaded)\n    if (options.connection) {\n        this.connection = options.connection;\n        this.xmpp = this.connection.xmpp;\n\n        // Setup XMPP events only if we have new connection object.\n        this.eventManager.setupXMPPListeners();\n    }\n\n    const { config } = this.options;\n\n    this.room = this.xmpp.createRoom(this.options.name, config);\n\n    // Connection interrupted/restored listeners\n    this._onIceConnectionInterrupted\n        = this._onIceConnectionInterrupted.bind(this);\n    this.room.addListener(\n        XMPPEvents.CONNECTION_INTERRUPTED, this._onIceConnectionInterrupted);\n\n    this._onIceConnectionRestored = this._onIceConnectionRestored.bind(this);\n    this.room.addListener(\n        XMPPEvents.CONNECTION_RESTORED, this._onIceConnectionRestored);\n\n    this._onIceConnectionEstablished\n        = this._onIceConnectionEstablished.bind(this);\n    this.room.addListener(\n        XMPPEvents.CONNECTION_ESTABLISHED, this._onIceConnectionEstablished);\n\n    this.room.updateDeviceAvailability(RTC.getDeviceAvailability());\n\n    if (!this.rtc) {\n        this.rtc = new RTC(this, options);\n        this.eventManager.setupRTCListeners();\n    }\n\n    this.participantConnectionStatus\n        = new ParticipantConnectionStatusHandler(\n            this.rtc,\n            this,\n            {\n                // Both these options are not public API, leaving it here only\n                // as an entry point through config for tuning up purposes.\n                // Default values should be adjusted as soon as optimal values\n                // are discovered.\n                rtcMuteTimeout: config._peerConnStatusRtcMuteTimeout,\n                outOfLastNTimeout: config._peerConnStatusOutOfLastNTimeout\n            });\n    this.participantConnectionStatus.init();\n\n    if (!this.statistics) {\n        // XXX The property location on the global variable window is not\n        // defined in all execution environments (e.g. react-native). While\n        // jitsi-meet may polyfill it when executing on react-native, it is\n        // better for the cross-platform support to not require window.location\n        // especially when there is a worthy alternative (as demonstrated\n        // bellow).\n        const windowLocation = window.location;\n\n        let callStatsAliasName = this.myUserId();\n\n        if (config.enableDisplayNameInStats && config.displayName) {\n            callStatsAliasName = config.displayName;\n        }\n\n        this.statistics = new Statistics(this.xmpp, {\n            callStatsAliasName,\n            callStatsConfIDNamespace:\n                config.callStatsConfIDNamespace\n                    || (windowLocation && windowLocation.hostname)\n                    || (config.hosts && config.hosts.domain),\n            callStatsCustomScriptUrl: config.callStatsCustomScriptUrl,\n            callStatsID: config.callStatsID,\n            callStatsSecret: config.callStatsSecret,\n            roomName: this.options.name,\n            swapUserNameAndAlias: config.enableStatsID,\n            applicationName: config.applicationName,\n            getWiFiStatsMethod: config.getWiFiStatsMethod\n        });\n    }\n\n    this.eventManager.setupChatRoomListeners();\n\n    // Always add listeners because on reload we are executing leave and the\n    // listeners are removed from statistics module.\n    this.eventManager.setupStatisticsListeners();\n\n    if (config.enableTalkWhileMuted) {\n        // eslint-disable-next-line no-new\n        new TalkMutedDetection(\n            this,\n            () =>\n                this.eventEmitter.emit(JitsiConferenceEvents.TALK_WHILE_MUTED));\n    }\n\n    if ('channelLastN' in config) {\n        this.setLastN(config.channelLastN);\n    }\n\n    /**\n     * Emits {@link JitsiConferenceEvents.JVB121_STATUS}.\n     * @type {Jvb121EventGenerator}\n     */\n    this.jvb121Status = new Jvb121EventGenerator(this);\n\n    // creates dominant speaker detection that works only in p2p mode\n    this.p2pDominantSpeakerDetection = new P2PDominantSpeakerDetection(this);\n};\n\n/**\n * Joins the conference.\n * @param password {string} the password\n */\nJitsiConference.prototype.join = function(password) {\n    if (this.room) {\n        this.room.join(password);\n    }\n};\n\n/**\n * Authenticates and upgrades the role of the local participant/user.\n *\n * @returns {Object} A <tt>thenable</tt> which (1) settles when the process of\n * authenticating and upgrading the role of the local participant/user finishes\n * and (2) has a <tt>cancel</tt> method that allows the caller to interrupt the\n * process.\n */\nJitsiConference.prototype.authenticateAndUpgradeRole = function(...args) {\n    return authenticateAndUpgradeRole.apply(this, args);\n};\n\n/**\n * Check if joined to the conference.\n */\nJitsiConference.prototype.isJoined = function() {\n    return this.room && this.room.joined;\n};\n\n/**\n * Tells whether or not the P2P mode is enabled in the configuration.\n * @return {boolean}\n */\nJitsiConference.prototype.isP2PEnabled = function() {\n    return Boolean(this.options.config.p2p && this.options.config.p2p.enabled)\n\n        // FIXME: remove once we have a default config template. -saghul\n        || typeof this.options.config.p2p === 'undefined';\n};\n\n/**\n * When in P2P test mode, the conference will not automatically switch to P2P\n * when there 2 participants.\n * @return {boolean}\n */\nJitsiConference.prototype.isP2PTestModeEnabled = function() {\n    return Boolean(this.options.config.testing\n        && this.options.config.testing.p2pTestMode);\n};\n\n/**\n * Leaves the conference.\n * @returns {Promise}\n */\nJitsiConference.prototype.leave = function() {\n    if (this.participantConnectionStatus) {\n        this.participantConnectionStatus.dispose();\n        this.participantConnectionStatus = null;\n    }\n    if (this.avgRtpStatsReporter) {\n        this.avgRtpStatsReporter.dispose();\n        this.avgRtpStatsReporter = null;\n    }\n\n    this.getLocalTracks().forEach(track => this.onLocalTrackRemoved(track));\n\n    this.rtc.closeBridgeChannel();\n    if (this.statistics) {\n        this.statistics.dispose();\n    }\n\n    // Close both JVb and P2P JingleSessions\n    if (this.jvbJingleSession) {\n        this.jvbJingleSession.close();\n        this.jvbJingleSession = null;\n    }\n    if (this.p2pJingleSession) {\n        this.p2pJingleSession.close();\n        this.p2pJingleSession = null;\n    }\n\n    // leave the conference\n    if (this.room) {\n        const room = this.room;\n\n        // Unregister connection state listeners\n        room.removeListener(\n            XMPPEvents.CONNECTION_INTERRUPTED,\n            this._onIceConnectionInterrupted);\n        room.removeListener(\n            XMPPEvents.CONNECTION_RESTORED,\n            this._onIceConnectionRestored);\n        room.removeListener(\n            XMPPEvents.CONNECTION_ESTABLISHED,\n            this._onIceConnectionEstablished);\n\n        this.room = null;\n\n        return room.leave().catch(() => {\n            // remove all participants because currently the conference won't\n            // be usable anyway. This is done on success automatically by the\n            // ChatRoom instance.\n            this.getParticipants().forEach(\n                participant => this.onMemberLeft(participant.getJid()));\n        });\n    }\n\n    // If this.room == null we are calling second time leave().\n    return Promise.reject(\n        new Error('The conference is has been already left'));\n};\n\n/**\n * Returns name of this conference.\n */\nJitsiConference.prototype.getName = function() {\n    return this.options.name;\n};\n\n/**\n * Check if authentication is enabled for this conference.\n */\nJitsiConference.prototype.isAuthEnabled = function() {\n    return this.authEnabled;\n};\n\n/**\n * Check if user is logged in.\n */\nJitsiConference.prototype.isLoggedIn = function() {\n    return Boolean(this.authIdentity);\n};\n\n/**\n * Get authorized login.\n */\nJitsiConference.prototype.getAuthLogin = function() {\n    return this.authIdentity;\n};\n\n/**\n * Check if external authentication is enabled for this conference.\n */\nJitsiConference.prototype.isExternalAuthEnabled = function() {\n    return this.room && this.room.moderator.isExternalAuthEnabled();\n};\n\n/**\n * Get url for external authentication.\n * @param {boolean} [urlForPopup] if true then return url for login popup,\n *                                else url of login page.\n * @returns {Promise}\n */\nJitsiConference.prototype.getExternalAuthUrl = function(urlForPopup) {\n    return new Promise((resolve, reject) => {\n        if (!this.isExternalAuthEnabled()) {\n            reject();\n\n            return;\n        }\n        if (urlForPopup) {\n            this.room.moderator.getPopupLoginUrl(resolve, reject);\n        } else {\n            this.room.moderator.getLoginUrl(resolve, reject);\n        }\n    });\n};\n\n/**\n * Returns the local tracks of the given media type, or all local tracks if no\n * specific type is given.\n * @param {MediaType} [mediaType] Optional media type (audio or video).\n */\nJitsiConference.prototype.getLocalTracks = function(mediaType) {\n    let tracks = [];\n\n    if (this.rtc) {\n        tracks = this.rtc.getLocalTracks(mediaType);\n    }\n\n    return tracks;\n};\n\n/**\n * Obtains local audio track.\n * @return {JitsiLocalTrack|null}\n */\nJitsiConference.prototype.getLocalAudioTrack = function() {\n    return this.rtc ? this.rtc.getLocalAudioTrack() : null;\n};\n\n/**\n * Obtains local video track.\n * @return {JitsiLocalTrack|null}\n */\nJitsiConference.prototype.getLocalVideoTrack = function() {\n    return this.rtc ? this.rtc.getLocalVideoTrack() : null;\n};\n\n/**\n * Attaches a handler for events(For example - \"participant joined\".) in the\n * conference. All possible event are defined in JitsiConferenceEvents.\n * @param eventId the event ID.\n * @param handler handler for the event.\n *\n * Note: consider adding eventing functionality by extending an EventEmitter\n * impl, instead of rolling ourselves\n */\nJitsiConference.prototype.on = function(eventId, handler) {\n    if (this.eventEmitter) {\n        this.eventEmitter.on(eventId, handler);\n    }\n};\n\n/**\n * Removes event listener\n * @param eventId the event ID.\n * @param [handler] optional, the specific handler to unbind\n *\n * Note: consider adding eventing functionality by extending an EventEmitter\n * impl, instead of rolling ourselves\n */\nJitsiConference.prototype.off = function(eventId, handler) {\n    if (this.eventEmitter) {\n        this.eventEmitter.removeListener(eventId, handler);\n    }\n};\n\n// Common aliases for event emitter\nJitsiConference.prototype.addEventListener = JitsiConference.prototype.on;\nJitsiConference.prototype.removeEventListener = JitsiConference.prototype.off;\n\n/**\n * Receives notifications from other participants about commands / custom events\n * (sent by sendCommand or sendCommandOnce methods).\n * @param command {String} the name of the command\n * @param handler {Function} handler for the command\n */\nJitsiConference.prototype.addCommandListener = function(command, handler) {\n    if (this.room) {\n        this.room.addPresenceListener(command, handler);\n    }\n};\n\n/**\n  * Removes command  listener\n  * @param command {String} the name of the command\n  */\nJitsiConference.prototype.removeCommandListener = function(command) {\n    if (this.room) {\n        this.room.removePresenceListener(command);\n    }\n};\n\n/**\n * Sends text message to the other participants in the conference\n * @param message the text message.\n */\nJitsiConference.prototype.sendTextMessage = function(message) {\n    if (this.room) {\n        this.room.sendMessage(message);\n    }\n};\n\n/**\n * Send private text message to another participant of the conference\n * @param message the text message.\n */\nJitsiConference.prototype.sendPrivateTextMessage = function(id, message) {\n    if (this.room) {\n        this.room.sendPrivateMessage(id, message);\n    }\n};\n\n/**\n * Send presence command.\n * @param name {String} the name of the command.\n * @param values {Object} with keys and values that will be sent.\n **/\nJitsiConference.prototype.sendCommand = function(name, values) {\n    if (this.room) {\n        this.room.addToPresence(name, values);\n        this.room.sendPresence();\n    }\n};\n\n/**\n * Send presence command one time.\n * @param name {String} the name of the command.\n * @param values {Object} with keys and values that will be sent.\n **/\nJitsiConference.prototype.sendCommandOnce = function(name, values) {\n    this.sendCommand(name, values);\n    this.removeCommand(name);\n};\n\n/**\n * Removes presence command.\n * @param name {String} the name of the command.\n **/\nJitsiConference.prototype.removeCommand = function(name) {\n    if (this.room) {\n        this.room.removeFromPresence(name);\n    }\n};\n\n/**\n * Sets the display name for this conference.\n * @param name the display name to set\n */\nJitsiConference.prototype.setDisplayName = function(name) {\n    if (this.room) {\n        // remove previously set nickname\n        this.room.removeFromPresence('nick');\n\n        this.room.addToPresence('nick', {\n            attributes: { xmlns: 'http://jabber.org/protocol/nick' },\n            value: name\n        });\n        this.room.sendPresence();\n    }\n};\n\n/**\n * Set new subject for this conference. (available only for moderator)\n * @param {string} subject new subject\n */\nJitsiConference.prototype.setSubject = function(subject) {\n    if (this.room && this.isModerator()) {\n        this.room.setSubject(subject);\n    }\n};\n\n/**\n * Get a transcriber object for all current participants in this conference\n * @return {Transcriber} the transcriber object\n */\nJitsiConference.prototype.getTranscriber = function() {\n    if (this.transcriber === undefined) {\n        this.transcriber = new Transcriber();\n\n        // add all existing local audio tracks to the transcriber\n        const localAudioTracks = this.getLocalTracks(MediaType.AUDIO);\n\n        for (const localAudio of localAudioTracks) {\n            this.transcriber.addTrack(localAudio);\n        }\n\n        // and all remote audio tracks\n        const remoteAudioTracks = this.rtc.getRemoteTracks(MediaType.AUDIO);\n\n        for (const remoteTrack of remoteAudioTracks) {\n            this.transcriber.addTrack(remoteTrack);\n        }\n    }\n\n    return this.transcriber;\n};\n\n/**\n * Returns the transcription status.\n *\n * @returns {String} \"on\" or \"off\".\n */\nJitsiConference.prototype.getTranscriptionStatus = function() {\n    return this.room.transcriptionStatus;\n};\n\n/**\n * Adds JitsiLocalTrack object to the conference.\n * @param track the JitsiLocalTrack object.\n * @returns {Promise<JitsiLocalTrack>}\n * @throws {Error} if the specified track is a video track and there is already\n * another video track in the conference.\n */\nJitsiConference.prototype.addTrack = function(track) {\n    if (track.isVideoTrack()) {\n        // Ensure there's exactly 1 local video track in the conference.\n        const localVideoTrack = this.rtc.getLocalVideoTrack();\n\n        if (localVideoTrack) {\n            // Don't be excessively harsh and severe if the API client happens\n            // to attempt to add the same local video track twice.\n            if (track === localVideoTrack) {\n                return Promise.resolve(track);\n            }\n\n            return Promise.reject(new Error(\n                'cannot add second video track to the conference'));\n\n        }\n    }\n\n    return this.replaceTrack(null, track);\n};\n\n/**\n * Fires TRACK_AUDIO_LEVEL_CHANGED change conference event (for local tracks).\n * @param {number} audioLevel the audio level\n * @param {TraceablePeerConnection} [tpc]\n */\nJitsiConference.prototype._fireAudioLevelChangeEvent = function(\n        audioLevel,\n        tpc) {\n    const activeTpc = this.getActivePeerConnection();\n\n    // There will be no TraceablePeerConnection if audio levels do not come from\n    // a peerconnection. LocalStatsCollector.js measures audio levels using Web\n    // Audio Analyser API and emits local audio levels events through\n    // JitsiTrack.setAudioLevel, but does not provide TPC instance which is\n    // optional.\n    if (!tpc || activeTpc === tpc) {\n        this.eventEmitter.emit(\n            JitsiConferenceEvents.TRACK_AUDIO_LEVEL_CHANGED,\n            this.myUserId(), audioLevel);\n    }\n};\n\n/**\n * Fires TRACK_MUTE_CHANGED change conference event.\n * @param track the JitsiTrack object related to the event.\n */\nJitsiConference.prototype._fireMuteChangeEvent = function(track) {\n    // check if track was muted by focus and now is unmuted by user\n    if (this.isMutedByFocus && track.isAudioTrack() && !track.isMuted()) {\n        this.isMutedByFocus = false;\n\n        // unmute local user on server\n        this.room.muteParticipant(this.room.myroomjid, false);\n    }\n    this.eventEmitter.emit(JitsiConferenceEvents.TRACK_MUTE_CHANGED, track);\n};\n\n/**\n * Clear JitsiLocalTrack properties and listeners.\n * @param track the JitsiLocalTrack object.\n */\nJitsiConference.prototype.onLocalTrackRemoved = function(track) {\n    track._setConference(null);\n    this.rtc.removeLocalTrack(track);\n    track.removeEventListener(JitsiTrackEvents.TRACK_MUTE_CHANGED,\n        track.muteHandler);\n    track.removeEventListener(JitsiTrackEvents.TRACK_AUDIO_LEVEL_CHANGED,\n        track.audioLevelHandler);\n\n    // send event for stopping screen sharing\n    // FIXME: we assume we have only one screen sharing track\n    // if we change this we need to fix this check\n    if (track.isVideoTrack() && track.videoType === VideoType.DESKTOP) {\n        this.statistics.sendScreenSharingEvent(false);\n    }\n\n    this.eventEmitter.emit(JitsiConferenceEvents.TRACK_REMOVED, track);\n};\n\n/**\n * Removes JitsiLocalTrack from the conference and performs\n * a new offer/answer cycle.\n * @param {JitsiLocalTrack} track\n * @returns {Promise}\n */\nJitsiConference.prototype.removeTrack = function(track) {\n    return this.replaceTrack(track, null);\n};\n\n/**\n * Replaces oldTrack with newTrack and performs a single offer/answer\n *  cycle after both operations are done.  Either oldTrack or newTrack\n *  can be null; replacing a valid 'oldTrack' with a null 'newTrack'\n *  effectively just removes 'oldTrack'\n * @param {JitsiLocalTrack} oldTrack the current stream in use to be replaced\n * @param {JitsiLocalTrack} newTrack the new stream to use\n * @returns {Promise} resolves when the replacement is finished\n */\nJitsiConference.prototype.replaceTrack = function(oldTrack, newTrack) {\n    // First do the removal of the oldTrack at the JitsiConference level\n    if (oldTrack) {\n        if (oldTrack.disposed) {\n            return Promise.reject(\n                new JitsiTrackError(JitsiTrackErrors.TRACK_IS_DISPOSED));\n        }\n    }\n    if (newTrack) {\n        if (newTrack.disposed) {\n            return Promise.reject(\n                new JitsiTrackError(JitsiTrackErrors.TRACK_IS_DISPOSED));\n        }\n    }\n\n    // Now replace the stream at the lower levels\n    return this._doReplaceTrack(oldTrack, newTrack)\n        .then(() => {\n            if (oldTrack) {\n                this.onLocalTrackRemoved(oldTrack);\n            }\n            if (newTrack) {\n                // Now handle the addition of the newTrack at the\n                // JitsiConference level\n                this._setupNewTrack(newTrack);\n            }\n\n            return Promise.resolve();\n        }, error => Promise.reject(new Error(error)));\n};\n\n/**\n * Replaces the tracks at the lower level by going through the Jingle session\n * and WebRTC peer connection. The method will resolve immediately if there is\n * currently no JingleSession started.\n * @param {JitsiLocalTrack|null} oldTrack the track to be removed during\n * the process or <tt>null</t> if the method should act as \"add track\"\n * @param {JitsiLocalTrack|null} newTrack the new track to be added or\n * <tt>null</tt> if the method should act as \"remove track\"\n * @return {Promise} resolved when the process is done or rejected with a string\n * which describes the error.\n * @private\n */\nJitsiConference.prototype._doReplaceTrack = function(oldTrack, newTrack) {\n    const replaceTrackPromises = [];\n\n    if (this.jvbJingleSession) {\n        replaceTrackPromises.push(\n            this.jvbJingleSession.replaceTrack(oldTrack, newTrack));\n    } else {\n        logger.info('_doReplaceTrack - no JVB JingleSession');\n    }\n\n    if (this.p2pJingleSession) {\n        replaceTrackPromises.push(\n            this.p2pJingleSession.replaceTrack(oldTrack, newTrack));\n    } else {\n        logger.info('_doReplaceTrack - no P2P JingleSession');\n    }\n\n    return Promise.all(replaceTrackPromises);\n};\n\n/**\n * Operations related to creating a new track\n * @param {JitsiLocalTrack} newTrack the new track being created\n */\nJitsiConference.prototype._setupNewTrack = function(newTrack) {\n    if (newTrack.isAudioTrack() || (newTrack.isVideoTrack()\n            && newTrack.videoType !== VideoType.DESKTOP)) {\n        // Report active device to statistics\n        const devices = RTC.getCurrentlyAvailableMediaDevices();\n        const device\n            = devices.find(\n                d =>\n                    d.kind === `${newTrack.getTrack().kind}input`\n                        && d.label === newTrack.getTrack().label);\n\n        if (device) {\n            Statistics.sendActiveDeviceListEvent(\n                RTC.getEventDataForActiveDevice(device));\n        }\n    }\n    if (newTrack.isVideoTrack()) {\n        this.removeCommand('videoType');\n        this.sendCommand('videoType', {\n            value: newTrack.videoType,\n            attributes: {\n                xmlns: 'http://jitsi.org/jitmeet/video'\n            }\n        });\n    }\n    this.rtc.addLocalTrack(newTrack);\n\n    // ensure that we're sharing proper \"is muted\" state\n    if (newTrack.isAudioTrack()) {\n        this.room.setAudioMute(newTrack.isMuted());\n    } else {\n        this.room.setVideoMute(newTrack.isMuted());\n    }\n\n    newTrack.muteHandler = this._fireMuteChangeEvent.bind(this, newTrack);\n    newTrack.audioLevelHandler = this._fireAudioLevelChangeEvent.bind(this);\n    newTrack.addEventListener(\n        JitsiTrackEvents.TRACK_MUTE_CHANGED,\n        newTrack.muteHandler);\n    newTrack.addEventListener(\n        JitsiTrackEvents.TRACK_AUDIO_LEVEL_CHANGED,\n        newTrack.audioLevelHandler);\n\n    newTrack._setConference(this);\n\n    this.eventEmitter.emit(JitsiConferenceEvents.TRACK_ADDED, newTrack);\n};\n\n/**\n * Method called by the {@link JitsiLocalTrack} (a video one) in order to add\n * back the underlying WebRTC MediaStream to the PeerConnection (which has\n * removed on video mute).\n * @param {JitsiLocalTrack} track the local track that will be added as part of\n * the unmute operation.\n * @return {Promise} resolved when the process is done or rejected with a string\n * which describes the error.\n */\nJitsiConference.prototype._addLocalTrackAsUnmute = function(track) {\n    const addAsUnmutePromises = [];\n\n    if (this.jvbJingleSession) {\n        addAsUnmutePromises.push(this.jvbJingleSession.addTrackAsUnmute(track));\n    } else {\n        logger.info(\n            'Add local MediaStream as unmute -'\n                + ' no JVB Jingle session started yet');\n    }\n\n    if (this.p2pJingleSession) {\n        addAsUnmutePromises.push(this.p2pJingleSession.addTrackAsUnmute(track));\n    } else {\n        logger.info(\n            'Add local MediaStream as unmute -'\n                + ' no P2P Jingle session started yet');\n    }\n\n    return Promise.all(addAsUnmutePromises);\n};\n\n/**\n * Method called by the {@link JitsiLocalTrack} (a video one) in order to remove\n * the underlying WebRTC MediaStream from the PeerConnection. The purpose of\n * that is to stop sending any data and turn off the HW camera device.\n * @param {JitsiLocalTrack} track the local track that will be removed.\n * @return {Promise}\n */\nJitsiConference.prototype._removeLocalTrackAsMute = function(track) {\n    const removeAsMutePromises = [];\n\n    if (this.jvbJingleSession) {\n        removeAsMutePromises.push(\n            this.jvbJingleSession.removeTrackAsMute(track));\n    } else {\n        logger.info(\n            'Remove local MediaStream - no JVB JingleSession started yet');\n    }\n    if (this.p2pJingleSession) {\n        removeAsMutePromises.push(\n            this.p2pJingleSession.removeTrackAsMute(track));\n    } else {\n        logger.info(\n            'Remove local MediaStream - no P2P JingleSession started yet');\n    }\n\n    return Promise.all(removeAsMutePromises);\n};\n\n/**\n * Get role of the local user.\n * @returns {string} user role: 'moderator' or 'none'\n */\nJitsiConference.prototype.getRole = function() {\n    return this.room.role;\n};\n\n/**\n * Check if local user is moderator.\n * @returns {boolean|null} true if local user is moderator, false otherwise. If\n * we're no longer in the conference room then <tt>null</tt> is returned.\n */\nJitsiConference.prototype.isModerator = function() {\n    return this.room ? this.room.isModerator() : null;\n};\n\n/**\n * Set password for the room.\n * @param {string} password new password for the room.\n * @returns {Promise}\n */\nJitsiConference.prototype.lock = function(password) {\n    if (!this.isModerator()) {\n        return Promise.reject();\n    }\n\n    return new Promise((resolve, reject) => {\n        this.room.lockRoom(\n            password || '',\n            () => resolve(),\n            err => reject(err),\n            () => reject(JitsiConferenceErrors.PASSWORD_NOT_SUPPORTED));\n    });\n};\n\n/**\n * Remove password from the room.\n * @returns {Promise}\n */\nJitsiConference.prototype.unlock = function() {\n    return this.lock();\n};\n\n/**\n * Elects the participant with the given id to be the selected participant in\n * order to receive higher video quality (if simulcast is enabled).\n * Or cache it if channel is not created and send it once channel is available.\n * @param participantId the identifier of the participant\n * @throws NetworkError or InvalidStateError or Error if the operation fails.\n */\nJitsiConference.prototype.selectParticipant = function(participantId) {\n    this.rtc.selectEndpoint(participantId);\n};\n\n/**\n * Elects the participant with the given id to be the pinned participant in\n * order to always receive video for this participant (even when last n is\n * enabled).\n * @param participantId the identifier of the participant\n * @throws NetworkError or InvalidStateError or Error if the operation fails.\n */\nJitsiConference.prototype.pinParticipant = function(participantId) {\n    this.rtc.pinEndpoint(participantId);\n};\n\n/**\n * Obtains the current value for \"lastN\". See {@link setLastN} for more info.\n * @returns {number}\n */\nJitsiConference.prototype.getLastN = function() {\n    return this.rtc.getLastN();\n};\n\n/**\n * Selects a new value for \"lastN\". The requested amount of videos are going\n * to be delivered after the value is in effect. Set to -1 for unlimited or\n * all available videos.\n * @param lastN the new number of videos the user would like to receive.\n * @throws Error or RangeError if the given value is not a number or is smaller\n * than -1.\n */\nJitsiConference.prototype.setLastN = function(lastN) {\n    if (!Number.isInteger(lastN) && !Number.parseInt(lastN, 10)) {\n        throw new Error(`Invalid value for lastN: ${lastN}`);\n    }\n    const n = Number(lastN);\n\n    if (n < -1) {\n        throw new RangeError('lastN cannot be smaller than -1');\n    }\n    this.rtc.setLastN(n);\n\n    // If the P2P session is not fully established yet, we wait until it gets\n    // established.\n    if (this.p2pJingleSession) {\n        const isVideoActive = n !== 0;\n\n        this.p2pJingleSession\n            .setMediaTransferActive(true, isVideoActive)\n            .catch(error => {\n                logger.error(\n                    `Failed to adjust video transfer status (${isVideoActive})`,\n                    error);\n            });\n    }\n};\n\n/**\n * Checks if the participant given by participantId is currently included in\n * the last N.\n * @param {string} participantId the identifier of the participant we would\n * like to check.\n * @return {boolean} true if the participant with id is in the last N set or\n * if there's no last N set, false otherwise.\n * @deprecated this method should never be used to figure out the UI, but\n * {@link ParticipantConnectionStatus} should be used instead.\n */\nJitsiConference.prototype.isInLastN = function(participantId) {\n    return this.rtc.isInLastN(participantId);\n};\n\n/**\n * @return Array<JitsiParticipant> an array of all participants in this\n * conference.\n */\nJitsiConference.prototype.getParticipants = function() {\n    return Object.keys(this.participants).map(function(key) {\n        return this.participants[key];\n    }, this);\n};\n\n/**\n * Returns the number of participants in the conference, including the local\n * participant.\n * @param countHidden {boolean} Whether or not to include hidden participants\n * in the count. Default: false.\n **/\nJitsiConference.prototype.getParticipantCount\n    = function(countHidden = false) {\n\n        let participants = this.getParticipants();\n\n        if (!countHidden) {\n            participants = participants.filter(p => !p.isHidden());\n        }\n\n        // Add one for the local participant.\n        return participants.length + 1;\n    };\n\n/**\n * @returns {JitsiParticipant} the participant in this conference with the\n * specified id (or undefined if there isn't one).\n * @param id the id of the participant.\n */\nJitsiConference.prototype.getParticipantById = function(id) {\n    return this.participants[id];\n};\n\n/**\n * Kick participant from this conference.\n * @param {string} id id of the participant to kick\n */\nJitsiConference.prototype.kickParticipant = function(id) {\n    const participant = this.getParticipantById(id);\n\n    if (!participant) {\n        return;\n    }\n    this.room.kick(participant.getJid());\n};\n\n/**\n * Mutes a participant.\n * @param {string} id The id of the participant to mute.\n */\nJitsiConference.prototype.muteParticipant = function(id) {\n    const participant = this.getParticipantById(id);\n\n    if (!participant) {\n        return;\n    }\n    this.room.muteParticipant(participant.getJid(), true);\n};\n\n/* eslint-disable max-params */\n\n/**\n * Notifies this JitsiConference that a new member has joined its chat room.\n *\n * FIXME This should NOT be exposed!\n *\n * @param jid the jid of the participant in the MUC\n * @param nick the display name of the participant\n * @param role the role of the participant in the MUC\n * @param isHidden indicates if this is a hidden participant (system\n * participant for example a recorder).\n * @param statsID the participant statsID (optional)\n * @param status the initial status if any\n */\nJitsiConference.prototype.onMemberJoined = function(\n        jid, nick, role, isHidden, statsID, status) {\n    const id = Strophe.getResourceFromJid(jid);\n\n    if (id === 'focus' || this.myUserId() === id) {\n        return;\n    }\n    const participant\n        = new JitsiParticipant(jid, this, nick, isHidden, statsID, status);\n\n    participant._role = role;\n    this.participants[id] = participant;\n    this.eventEmitter.emit(\n        JitsiConferenceEvents.USER_JOINED,\n        id,\n        participant);\n    this.xmpp.caps.getFeatures(jid)\n        .then(features => {\n            participant._supportsDTMF = features.has('urn:xmpp:jingle:dtmf:0');\n            this.updateDTMFSupport();\n        },\n        error => logger.warn(`Failed to discover features of ${jid}`, error));\n\n    this._maybeStartOrStopP2P();\n};\n\n/* eslint-enable max-params */\n\nJitsiConference.prototype.onMemberLeft = function(jid) {\n    const id = Strophe.getResourceFromJid(jid);\n\n    if (id === 'focus' || this.myUserId() === id) {\n        return;\n    }\n    const participant = this.participants[id];\n\n    delete this.participants[id];\n\n    const removedTracks = this.rtc.removeRemoteTracks(id);\n\n    removedTracks.forEach(\n        track =>\n            this.eventEmitter.emit(JitsiConferenceEvents.TRACK_REMOVED, track));\n\n    // there can be no participant in case the member that left is focus\n    if (participant) {\n        this.eventEmitter.emit(\n            JitsiConferenceEvents.USER_LEFT, id, participant);\n    }\n\n    this._maybeStartOrStopP2P(true /* triggered by user left event */);\n};\n\n/**\n * Method called on local MUC role change.\n * @param {string} role the name of new user's role as defined by XMPP MUC.\n */\nJitsiConference.prototype.onLocalRoleChanged = function(role) {\n    // Emit role changed for local  JID\n    this.eventEmitter.emit(\n        JitsiConferenceEvents.USER_ROLE_CHANGED, this.myUserId(), role);\n\n    // Maybe start P2P\n    this._maybeStartOrStopP2P();\n};\n\nJitsiConference.prototype.onUserRoleChanged = function(jid, role) {\n    const id = Strophe.getResourceFromJid(jid);\n    const participant = this.getParticipantById(id);\n\n    if (!participant) {\n        return;\n    }\n    participant._role = role;\n    this.eventEmitter.emit(JitsiConferenceEvents.USER_ROLE_CHANGED, id, role);\n};\n\nJitsiConference.prototype.onDisplayNameChanged = function(jid, displayName) {\n    const id = Strophe.getResourceFromJid(jid);\n    const participant = this.getParticipantById(id);\n\n    if (!participant) {\n        return;\n    }\n\n    if (participant._displayName === displayName) {\n        return;\n    }\n\n    participant._displayName = displayName;\n    this.eventEmitter.emit(\n        JitsiConferenceEvents.DISPLAY_NAME_CHANGED,\n        id,\n        displayName);\n};\n\n/**\n * Notifies this JitsiConference that a JitsiRemoteTrack was added into\n * the conference.\n *\n * @param {JitsiRemoteTrack} track the JitsiRemoteTrack which was added to this\n * JitsiConference\n */\nJitsiConference.prototype.onRemoteTrackAdded = function(track) {\n    if (track.isP2P && !this.isP2PActive()) {\n        logger.info(\n            'Trying to add remote P2P track, when not in P2P - IGNORED');\n\n        return;\n    } else if (!track.isP2P && this.isP2PActive()) {\n        logger.info(\n            'Trying to add remote JVB track, when in P2P - IGNORED');\n\n        return;\n    }\n\n    const id = track.getParticipantId();\n    const participant = this.getParticipantById(id);\n\n    if (!participant) {\n        logger.error(`No participant found for id: ${id}`);\n\n        return;\n    }\n\n    // Add track to JitsiParticipant.\n    participant._tracks.push(track);\n\n    if (this.transcriber) {\n        this.transcriber.addTrack(track);\n    }\n\n    const emitter = this.eventEmitter;\n\n    track.addEventListener(\n        JitsiTrackEvents.TRACK_MUTE_CHANGED,\n        () => emitter.emit(JitsiConferenceEvents.TRACK_MUTE_CHANGED, track));\n    track.addEventListener(\n        JitsiTrackEvents.TRACK_AUDIO_LEVEL_CHANGED,\n        (audioLevel, tpc) => {\n            const activeTPC = this.getActivePeerConnection();\n\n            if (activeTPC === tpc) {\n                emitter.emit(\n                    JitsiConferenceEvents.TRACK_AUDIO_LEVEL_CHANGED,\n                    id,\n                    audioLevel);\n            }\n        }\n    );\n\n    emitter.emit(JitsiConferenceEvents.TRACK_ADDED, track);\n};\n\n/**\n * Callback called by the Jingle plugin when 'session-answer' is received.\n * @param {JingleSessionPC} session the Jingle session for which an answer was\n * received.\n * @param {jQuery} answer a jQuery selector pointing to 'jingle' IQ element\n */\n// eslint-disable-next-line no-unused-vars\nJitsiConference.prototype.onCallAccepted = function(session, answer) {\n    if (this.p2pJingleSession === session) {\n        logger.info('P2P setAnswer');\n        this.p2pJingleSession.setAnswer(answer);\n    }\n};\n\n/**\n * Callback called by the Jingle plugin when 'transport-info' is received.\n * @param {JingleSessionPC} session the Jingle session for which the IQ was\n * received\n * @param {jQuery} transportInfo a jQuery selector pointing to 'jingle' IQ\n * element\n */\n// eslint-disable-next-line no-unused-vars\nJitsiConference.prototype.onTransportInfo = function(session, transportInfo) {\n    if (this.p2pJingleSession === session) {\n        logger.info('P2P addIceCandidates');\n        this.p2pJingleSession.addIceCandidates(transportInfo);\n    }\n};\n\n/**\n * Notifies this JitsiConference that a JitsiRemoteTrack was removed from\n * the conference.\n *\n * @param {JitsiRemoteTrack} removedTrack\n */\nJitsiConference.prototype.onRemoteTrackRemoved = function(removedTrack) {\n    this.getParticipants().forEach(participant => {\n        const tracks = participant.getTracks();\n\n        for (let i = 0; i < tracks.length; i++) {\n            if (tracks[i] === removedTrack) {\n                // Since the tracks have been compared and are\n                // considered equal the result of splice can be ignored.\n                participant._tracks.splice(i, 1);\n\n                this.eventEmitter.emit(\n                    JitsiConferenceEvents.TRACK_REMOVED, removedTrack);\n\n                if (this.transcriber) {\n                    this.transcriber.removeTrack(removedTrack);\n                }\n\n                break;\n            }\n        }\n    }, this);\n};\n\n/**\n * Handles an incoming call event for the P2P jingle session.\n */\nJitsiConference.prototype._onIncomingCallP2P = function(\n        jingleSession,\n        jingleOffer) {\n\n    let rejectReason;\n    const role = this.room.getMemberRole(jingleSession.remoteJid);\n\n    if (role !== 'moderator') {\n        rejectReason = {\n            reason: 'security-error',\n            reasonDescription: 'Only focus can start new sessions',\n            errorMsg: 'Rejecting session-initiate from non-focus and'\n                        + `non-moderator user: ${jingleSession.remoteJid}`\n        };\n    } else if (!browser.supportsP2P()) {\n        rejectReason = {\n            reason: 'unsupported-applications',\n            reasonDescription: 'P2P not supported',\n            errorMsg: 'This client does not support P2P connections'\n        };\n    } else if (!this.isP2PEnabled() && !this.isP2PTestModeEnabled()) {\n        rejectReason = {\n            reason: 'decline',\n            reasonDescription: 'P2P disabled',\n            errorMsg: 'P2P mode disabled in the configuration'\n        };\n    } else if (this.p2pJingleSession) {\n        // Reject incoming P2P call (already in progress)\n        rejectReason = {\n            reason: 'busy',\n            reasonDescription: 'P2P already in progress',\n            errorMsg: 'Duplicated P2P \"session-initiate\"'\n        };\n    }\n\n    if (rejectReason) {\n        this._rejectIncomingCall(jingleSession, rejectReason);\n    } else {\n        this._acceptP2PIncomingCall(jingleSession, jingleOffer);\n    }\n};\n\n/**\n * Handles an incoming call event.\n */\nJitsiConference.prototype.onIncomingCall = function(\n        jingleSession,\n        jingleOffer,\n        now) {\n    // Handle incoming P2P call\n    if (jingleSession.isP2P) {\n        this._onIncomingCallP2P(jingleSession, jingleOffer);\n    } else {\n        if (!this.room.isFocus(jingleSession.remoteJid)) {\n            const description = 'Rejecting session-initiate from non-focus.';\n\n            this._rejectIncomingCall(\n                jingleSession, {\n                    reason: 'security-error',\n                    reasonDescription: description,\n                    errorMsg: description\n                });\n\n            return;\n        }\n        this._acceptJvbIncomingCall(jingleSession, jingleOffer, now);\n    }\n};\n\n/**\n * Accepts an incoming call event for the JVB jingle session.\n */\nJitsiConference.prototype._acceptJvbIncomingCall = function(\n        jingleSession,\n        jingleOffer,\n        now) {\n\n    // Accept incoming call\n    this.jvbJingleSession = jingleSession;\n    this.room.connectionTimes['session.initiate'] = now;\n\n    if (this.wasStopped) {\n        Statistics.sendAnalyticsAndLog(\n            createJingleEvent(ACTION_JINGLE_RESTART, { p2p: false }));\n    }\n\n    Statistics.sendAnalytics(createJingleEvent(\n        ACTION_JINGLE_SI_RECEIVED,\n        {\n            p2p: false,\n            value: now\n        }));\n    try {\n        jingleSession.initialize(false /* initiator */, this.room, this.rtc);\n    } catch (error) {\n        GlobalOnErrorHandler.callErrorHandler(error);\n    }\n\n    // Open a channel with the videobridge.\n    this._setBridgeChannel(jingleOffer, jingleSession.peerconnection);\n\n    // Add local tracks to the session\n    try {\n        jingleSession.acceptOffer(\n            jingleOffer,\n            () => {\n                // If for any reason invite for the JVB session arrived after\n                // the P2P has been established already the media transfer needs\n                // to be turned off here.\n                if (this.isP2PActive() && this.jvbJingleSession) {\n                    this._suspendMediaTransferForJvbConnection();\n                }\n            },\n            error => {\n                GlobalOnErrorHandler.callErrorHandler(error);\n                logger.error(\n                    'Failed to accept incoming Jingle session', error);\n            },\n            this.getLocalTracks()\n        );\n\n        // Start callstats as soon as peerconnection is initialized,\n        // do not wait for XMPPEvents.PEERCONNECTION_READY, as it may never\n        // happen in case if user doesn't have or denied permission to\n        // both camera and microphone.\n        logger.info('Starting CallStats for JVB connection...');\n        this.statistics.startCallStats(\n            this.jvbJingleSession.peerconnection,\n            'jitsi' /* Remote user ID for JVB is 'jitsi' */);\n        this.statistics.startRemoteStats(this.jvbJingleSession.peerconnection);\n    } catch (e) {\n        GlobalOnErrorHandler.callErrorHandler(e);\n        logger.error(e);\n    }\n};\n\n/**\n * Sets the BridgeChannel.\n *\n * @param {jQuery} offerIq a jQuery selector pointing to the jingle element of\n * the offer IQ which may carry the WebSocket URL for the 'websocket'\n * BridgeChannel mode.\n * @param {TraceablePeerConnection} pc the peer connection which will be used\n * to listen for new WebRTC Data Channels (in the 'datachannel' mode).\n */\nJitsiConference.prototype._setBridgeChannel = function(offerIq, pc) {\n    let wsUrl = null;\n    const webSocket\n        = $(offerIq)\n            .find('>content>transport>web-socket')\n            .first();\n\n    if (webSocket.length === 1) {\n        wsUrl = webSocket[0].getAttribute('url');\n    }\n\n    let bridgeChannelType;\n\n    switch (this.options.config.openBridgeChannel) {\n    case 'datachannel':\n    case true:\n    case undefined:\n        bridgeChannelType = 'datachannel';\n        break;\n    case 'websocket':\n        bridgeChannelType = 'websocket';\n        break;\n    }\n\n    if (bridgeChannelType === 'datachannel'\n        && !browser.supportsDataChannels()) {\n        bridgeChannelType = 'websocket';\n    }\n\n    if (bridgeChannelType === 'datachannel') {\n        this.rtc.initializeBridgeChannel(pc, null);\n    } else if (bridgeChannelType === 'websocket' && wsUrl) {\n        this.rtc.initializeBridgeChannel(null, wsUrl);\n    }\n};\n\n/**\n * Rejects incoming Jingle call.\n * @param {JingleSessionPC} jingleSession the session instance to be rejected.\n * @param {object} [options]\n * @param {string} options.reason the name of the reason element as defined\n * by Jingle\n * @param {string} options.reasonDescription the reason description which will\n * be included in Jingle 'session-terminate' message.\n * @param {string} options.errorMsg an error message to be logged on global\n * error handler\n * @private\n */\nJitsiConference.prototype._rejectIncomingCall = function(\n        jingleSession,\n        options) {\n    if (options && options.errorMsg) {\n        GlobalOnErrorHandler.callErrorHandler(new Error(options.errorMsg));\n    }\n\n    // Terminate the jingle session with a reason\n    jingleSession.terminate(\n        null /* success callback => we don't care */,\n        error => {\n            logger.warn(\n                'An error occurred while trying to terminate'\n                    + ' invalid Jingle session', error);\n        }, {\n            reason: options && options.reason,\n            reasonDescription: options && options.reasonDescription,\n            sendSessionTerminate: true\n        });\n};\n\n/**\n * Handles the call ended event.\n * XXX is this due to the remote side terminating the Jingle session?\n *\n * @param {JingleSessionPC} jingleSession the jingle session which has been\n * terminated.\n * @param {String} reasonCondition the Jingle reason condition.\n * @param {String|null} reasonText human readable reason text which may provide\n * more details about why the call has been terminated.\n */\nJitsiConference.prototype.onCallEnded = function(\n        jingleSession,\n        reasonCondition,\n        reasonText) {\n    logger.info(\n        `Call ended: ${reasonCondition} - ${reasonText} P2P ?${\n            jingleSession.isP2P}`);\n    if (jingleSession === this.jvbJingleSession) {\n        this.wasStopped = true;\n\n        Statistics.sendAnalytics(\n            createJingleEvent(ACTION_JINGLE_TERMINATE, { p2p: false }));\n\n        // Stop the stats\n        if (this.statistics) {\n            this.statistics.stopRemoteStats(\n                this.jvbJingleSession.peerconnection);\n            logger.info('Stopping JVB CallStats');\n            this.statistics.stopCallStats(\n                this.jvbJingleSession.peerconnection);\n        }\n\n        // Current JVB JingleSession is no longer valid, so set it to null\n        this.jvbJingleSession = null;\n\n        // Let the RTC service do any cleanups\n        this.rtc.onCallEnded();\n    } else if (jingleSession === this.p2pJingleSession) {\n        // It's the responder who decides to enforce JVB mode, so that both\n        // initiator and responder are aware if it was intentional.\n        if (reasonCondition === 'decline' && reasonText === 'force JVB121') {\n            logger.info('In forced JVB 121 mode...');\n            Statistics.analytics.addPermanentProperties({ forceJvb121: true });\n        } else if (reasonCondition === 'connectivity-error'\n            && reasonText === 'ICE FAILED') {\n            // It can happen that the other peer detects ICE failed and\n            // terminates the session, before we get the event on our side.\n            // But we are able to parse the reason and mark it here.\n            Statistics.analytics.addPermanentProperties({ p2pFailed: true });\n        }\n        this._stopP2PSession();\n    } else {\n        logger.error(\n            'Received onCallEnded for invalid session',\n            jingleSession.sid,\n            jingleSession.remoteJid,\n            reasonCondition,\n            reasonText);\n    }\n};\n\n/**\n * Handles the suspend detected event. Leaves the room and fires suspended.\n * @param {JingleSessionPC} jingleSession\n */\nJitsiConference.prototype.onSuspendDetected = function(jingleSession) {\n    if (!jingleSession.isP2P) {\n        this.leave();\n        this.eventEmitter.emit(JitsiConferenceEvents.SUSPEND_DETECTED);\n    }\n};\n\nJitsiConference.prototype.updateDTMFSupport = function() {\n    let somebodySupportsDTMF = false;\n    const participants = this.getParticipants();\n\n    // check if at least 1 participant supports DTMF\n    for (let i = 0; i < participants.length; i += 1) {\n        if (participants[i].supportsDTMF()) {\n            somebodySupportsDTMF = true;\n            break;\n        }\n    }\n    if (somebodySupportsDTMF !== this.somebodySupportsDTMF) {\n        this.somebodySupportsDTMF = somebodySupportsDTMF;\n        this.eventEmitter.emit(\n            JitsiConferenceEvents.DTMF_SUPPORT_CHANGED,\n            somebodySupportsDTMF);\n    }\n};\n\n/**\n * Allows to check if there is at least one user in the conference\n * that supports DTMF.\n * @returns {boolean} true if somebody supports DTMF, false otherwise\n */\nJitsiConference.prototype.isDTMFSupported = function() {\n    return this.somebodySupportsDTMF;\n};\n\n/**\n * Returns the local user's ID\n * @return {string} local user's ID\n */\nJitsiConference.prototype.myUserId = function() {\n    return (\n        this.room && this.room.myroomjid\n            ? Strophe.getResourceFromJid(this.room.myroomjid)\n            : null);\n};\n\nJitsiConference.prototype.sendTones = function(tones, duration, pause) {\n    if (!this.dtmfManager) {\n        const peerConnection = this.getActivePeerConnection();\n\n        if (!peerConnection) {\n            logger.warn('cannot sendTones: no peer connection');\n\n            return;\n        }\n\n        const localAudio = this.getLocalAudioTrack();\n\n        if (!localAudio) {\n            logger.warn('cannot sendTones: no local audio stream');\n\n            return;\n        }\n        this.dtmfManager = new JitsiDTMFManager(localAudio, peerConnection);\n    }\n\n    this.dtmfManager.sendTones(tones, duration, pause);\n};\n\n/**\n * Returns true if recording is supported and false if not.\n */\nJitsiConference.prototype.isRecordingSupported = function() {\n    if (this.room) {\n        return this.room.isRecordingSupported();\n    }\n\n    return false;\n};\n\n/**\n * Returns null if the recording is not supported, \"on\" if the recording started\n * and \"off\" if the recording is not started.\n */\nJitsiConference.prototype.getRecordingState = function() {\n    return this.room ? this.room.getRecordingState() : undefined;\n};\n\n/**\n * Returns the url of the recorded video.\n */\nJitsiConference.prototype.getRecordingURL = function() {\n    return this.room ? this.room.getRecordingURL() : null;\n};\n\n/**\n * Starts/stops the recording\n */\nJitsiConference.prototype.toggleRecording = function(options) {\n    if (this.room) {\n        return this.room.toggleRecording(options, (status, error) => {\n            this.eventEmitter.emit(\n                JitsiConferenceEvents.RECORDER_STATE_CHANGED, status, error);\n        });\n    }\n    this.eventEmitter.emit(\n        JitsiConferenceEvents.RECORDER_STATE_CHANGED, 'error',\n        new Error('The conference is not created yet!'));\n};\n\n/**\n * Returns true if the SIP calls are supported and false otherwise\n */\nJitsiConference.prototype.isSIPCallingSupported = function() {\n    if (this.room) {\n        return this.room.isSIPCallingSupported();\n    }\n\n    return false;\n};\n\n/**\n * Dials a number.\n * @param number the number\n */\nJitsiConference.prototype.dial = function(number) {\n    if (this.room) {\n        return this.room.dial(number);\n    }\n\n    return new Promise((resolve, reject) => {\n        reject(new Error('The conference is not created yet!'));\n    });\n};\n\n/**\n * Hangup an existing call\n */\nJitsiConference.prototype.hangup = function() {\n    if (this.room) {\n        return this.room.hangup();\n    }\n\n    return new Promise((resolve, reject) => {\n        reject(new Error('The conference is not created yet!'));\n    });\n};\n\n/**\n * Starts the transcription service.\n */\nJitsiConference.prototype.startTranscriber = function() {\n    return this.dial('jitsi_meet_transcribe');\n};\n\n\n/**\n * Stops the transcription service.\n */\nJitsiConference.prototype.stopTranscriber = JitsiConference.prototype.hangup;\n\n/**\n * Returns the phone number for joining the conference.\n */\nJitsiConference.prototype.getPhoneNumber = function() {\n    if (this.room) {\n        return this.room.getPhoneNumber();\n    }\n\n    return null;\n};\n\n/**\n * Returns the pin for joining the conference with phone.\n */\nJitsiConference.prototype.getPhonePin = function() {\n    if (this.room) {\n        return this.room.getPhonePin();\n    }\n\n    return null;\n};\n\n/**\n * Will return P2P or JVB <tt>TraceablePeerConnection</tt> depending on\n * which connection is currently active.\n *\n * @return {TraceablePeerConnection|null} null if there isn't any active\n * <tt>TraceablePeerConnection</tt> currently available.\n * @public (FIXME how to make package local ?)\n */\nJitsiConference.prototype.getActivePeerConnection = function() {\n    if (this.isP2PActive()) {\n        return this.p2pJingleSession.peerconnection;\n    }\n\n    return this.jvbJingleSession ? this.jvbJingleSession.peerconnection : null;\n};\n\n/**\n * Returns the connection state for the current room. Its ice connection state\n * for its session.\n * NOTE that \"completed\" ICE state which can appear on the P2P connection will\n * be converted to \"connected\".\n * @return {string|null} ICE state name or <tt>null</tt> if there is no active\n * peer connection at this time.\n */\nJitsiConference.prototype.getConnectionState = function() {\n    const peerConnection = this.getActivePeerConnection();\n\n    return peerConnection ? peerConnection.getConnectionState() : null;\n};\n\n/**\n * Make all new participants mute their audio/video on join.\n * @param policy {Object} object with 2 boolean properties for video and audio:\n * @param {boolean} audio if audio should be muted.\n * @param {boolean} video if video should be muted.\n */\nJitsiConference.prototype.setStartMutedPolicy = function(policy) {\n    if (!this.isModerator()) {\n        return;\n    }\n    this.startMutedPolicy = policy;\n    this.room.removeFromPresence('startmuted');\n    this.room.addToPresence('startmuted', {\n        attributes: {\n            audio: policy.audio,\n            video: policy.video,\n            xmlns: 'http://jitsi.org/jitmeet/start-muted'\n        }\n    });\n    this.room.sendPresence();\n};\n\n/**\n * Returns current start muted policy\n * @returns {Object} with 2 properties - audio and video.\n */\nJitsiConference.prototype.getStartMutedPolicy = function() {\n    return this.startMutedPolicy;\n};\n\n/**\n * Check if audio is muted on join.\n */\nJitsiConference.prototype.isStartAudioMuted = function() {\n    return this.startAudioMuted;\n};\n\n/**\n * Check if video is muted on join.\n */\nJitsiConference.prototype.isStartVideoMuted = function() {\n    return this.startVideoMuted;\n};\n\n/**\n * Get object with internal logs.\n */\nJitsiConference.prototype.getLogs = function() {\n    const data = this.xmpp.getJingleLog();\n\n    const metadata = {};\n\n    metadata.time = new Date();\n    metadata.url = window.location.href;\n    metadata.ua = navigator.userAgent;\n\n    const log = this.xmpp.getXmppLog();\n\n    if (log) {\n        metadata.xmpp = log;\n    }\n\n    data.metadata = metadata;\n\n    return data;\n};\n\n/**\n * Returns measured connectionTimes.\n */\nJitsiConference.prototype.getConnectionTimes = function() {\n    return this.room.connectionTimes;\n};\n\n/**\n * Sets a property for the local participant.\n */\nJitsiConference.prototype.setLocalParticipantProperty = function(name, value) {\n    this.sendCommand(`jitsi_participant_${name}`, { value });\n};\n\n/**\n * Sends the given feedback through CallStats if enabled.\n *\n * @param overallFeedback an integer between 1 and 5 indicating the\n * user feedback\n * @param detailedFeedback detailed feedback from the user. Not yet used\n */\nJitsiConference.prototype.sendFeedback = function(\n        overallFeedback,\n        detailedFeedback) {\n    this.statistics.sendFeedback(overallFeedback, detailedFeedback);\n};\n\n/**\n * Returns true if the callstats integration is enabled, otherwise returns\n * false.\n *\n * @returns true if the callstats integration is enabled, otherwise returns\n * false.\n */\nJitsiConference.prototype.isCallstatsEnabled = function() {\n    return this.statistics.isCallstatsEnabled();\n};\n\n\n/**\n * Handles track attached to container (Calls associateStreamWithVideoTag method\n * from statistics module)\n * @param {JitsiLocalTrack|JitsiRemoteTrack} track the track\n * @param container the container\n */\nJitsiConference.prototype._onTrackAttach = function(track, container) {\n    const isLocal = track.isLocal();\n    let ssrc = null;\n    const isP2P = track.isP2P;\n    const remoteUserId = isP2P ? track.getParticipantId() : 'jitsi';\n    const peerConnection\n        = isP2P\n            ? this.p2pJingleSession && this.p2pJingleSession.peerconnection\n            : this.jvbJingleSession && this.jvbJingleSession.peerconnection;\n\n    if (isLocal) {\n        // Local tracks have SSRC stored on per peer connection basis\n        if (peerConnection) {\n            ssrc = peerConnection.getLocalSSRC(track);\n        }\n    } else {\n        ssrc = track.getSSRC();\n    }\n    if (!container.id || !ssrc || !peerConnection) {\n        return;\n    }\n\n    this.statistics.associateStreamWithVideoTag(\n        peerConnection,\n        ssrc,\n        isLocal,\n        remoteUserId,\n        track.getUsageLabel(),\n        container.id);\n};\n\n/**\n * Logs an \"application log\" message.\n * @param message {string} The message to log. Note that while this can be a\n * generic string, the convention used by lib-jitsi-meet and jitsi-meet is to\n * log valid JSON strings, with an \"id\" field used for distinguishing between\n * message types. E.g.: {id: \"recorder_status\", status: \"off\"}\n */\nJitsiConference.prototype.sendApplicationLog = function(message) {\n    Statistics.sendLog(message);\n};\n\n/**\n * Checks if the user identified by given <tt>mucJid</tt> is the conference\n * focus.\n * @param mucJid the full MUC address of the user to be checked.\n * @returns {boolean|null} <tt>true</tt> if MUC user is the conference focus,\n * <tt>false</tt> when is not. <tt>null</tt> if we're not in the MUC anymore and\n * are unable to figure out the status or if given <tt>mucJid</tt> is invalid.\n */\nJitsiConference.prototype._isFocus = function(mucJid) {\n    return this.room ? this.room.isFocus(mucJid) : null;\n};\n\n/**\n * Fires CONFERENCE_FAILED event with INCOMPATIBLE_SERVER_VERSIONS parameter\n */\nJitsiConference.prototype._fireIncompatibleVersionsEvent = function() {\n    this.eventEmitter.emit(JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.INCOMPATIBLE_SERVER_VERSIONS);\n};\n\n/**\n * Sends a message via the data channel.\n * @param to {string} the id of the endpoint that should receive the message.\n * If \"\" the message will be sent to all participants.\n * @param payload {object} the payload of the message.\n * @throws NetworkError or InvalidStateError or Error if the operation fails.\n */\nJitsiConference.prototype.sendEndpointMessage = function(to, payload) {\n    this.rtc.sendChannelMessage(to, payload);\n};\n\n/**\n * Sends a broadcast message via the data channel.\n * @param payload {object} the payload of the message.\n * @throws NetworkError or InvalidStateError or Error if the operation fails.\n */\nJitsiConference.prototype.broadcastEndpointMessage = function(payload) {\n    this.sendEndpointMessage('', payload);\n};\n\nJitsiConference.prototype.isConnectionInterrupted = function() {\n    return this.isP2PActive()\n        ? this.isP2PConnectionInterrupted : this.isJvbConnectionInterrupted;\n};\n\n/**\n * Handles {@link XMPPEvents.CONNECTION_INTERRUPTED}\n * @param {JingleSessionPC} session\n * @private\n */\nJitsiConference.prototype._onIceConnectionInterrupted = function(session) {\n    if (session.isP2P) {\n        this.isP2PConnectionInterrupted = true;\n    } else {\n        this.isJvbConnectionInterrupted = true;\n    }\n    if (session.isP2P === this.isP2PActive()) {\n        this.eventEmitter.emit(JitsiConferenceEvents.CONNECTION_INTERRUPTED);\n    }\n};\n\n/**\n * Handles {@link XMPPEvents.CONNECTION_ICE_FAILED}\n * @param {JingleSessionPC} session\n * @private\n */\nJitsiConference.prototype._onIceConnectionFailed = function(session) {\n    // We do nothing for the JVB connection, because it's up to the Jicofo to\n    // eventually come up with the new offer (at least for the time being).\n    if (session.isP2P) {\n        // Add p2pFailed property to analytics to distinguish, between \"good\"\n        // and \"bad\" connection\n        Statistics.analytics.addPermanentProperties({ p2pFailed: true });\n\n        if (this.p2pJingleSession) {\n            Statistics.sendAnalyticsAndLog(\n                createP2PEvent(\n                    ACTION_P2P_FAILED,\n                    {\n                        initiator: this.p2pJingleSession.isInitiator\n                    }));\n\n        }\n        this._stopP2PSession('connectivity-error', 'ICE FAILED');\n    }\n};\n\n/**\n * Handles {@link XMPPEvents.CONNECTION_RESTORED}\n * @param {JingleSessionPC} session\n * @private\n */\nJitsiConference.prototype._onIceConnectionRestored = function(session) {\n    if (session.isP2P) {\n        this.isP2PConnectionInterrupted = false;\n    } else {\n        this.isJvbConnectionInterrupted = false;\n    }\n\n    if (session.isP2P === this.isP2PActive()) {\n        this.eventEmitter.emit(JitsiConferenceEvents.CONNECTION_RESTORED);\n    }\n};\n\n/**\n * Accept incoming P2P Jingle call.\n * @param {JingleSessionPC} jingleSession the session instance\n * @param {jQuery} jingleOffer a jQuery selector pointing to 'jingle' IQ element\n * @private\n */\nJitsiConference.prototype._acceptP2PIncomingCall = function(\n        jingleSession,\n        jingleOffer) {\n    this.isP2PConnectionInterrupted = false;\n\n    // Accept the offer\n    this.p2pJingleSession = jingleSession;\n\n    this.p2pJingleSession.initialize(\n        false /* initiator */, this.room, this.rtc);\n\n    logger.info('Starting CallStats for P2P connection...');\n\n    let remoteID = Strophe.getResourceFromJid(this.p2pJingleSession.remoteJid);\n\n    if (this.options.config.enableStatsID) {\n        const participant = this.participants[remoteID];\n\n        if (participant) {\n            remoteID = participant.getStatsID() || remoteID;\n        }\n    }\n\n    this.statistics.startCallStats(\n        this.p2pJingleSession.peerconnection,\n        remoteID);\n\n    const localTracks = this.getLocalTracks();\n\n    this.p2pJingleSession.acceptOffer(\n        jingleOffer,\n        () => {\n            logger.debug('Got RESULT for P2P \"session-accept\"');\n        },\n        error => {\n            logger.error(\n                'Failed to accept incoming P2P Jingle session', error);\n        },\n        localTracks);\n};\n\n/**\n * Adds remote tracks to the conference associated with the JVB session.\n * @private\n */\nJitsiConference.prototype._addRemoteJVBTracks = function() {\n    this._addRemoteTracks(\n        'JVB', this.jvbJingleSession.peerconnection.getRemoteTracks());\n};\n\n/**\n * Adds remote tracks to the conference associated with the P2P session.\n * @private\n */\nJitsiConference.prototype._addRemoteP2PTracks = function() {\n    this._addRemoteTracks(\n        'P2P', this.p2pJingleSession.peerconnection.getRemoteTracks());\n};\n\n/**\n * Generates fake \"remote track added\" events for given Jingle session.\n * @param {string} logName the session's nickname which will appear in log\n * messages.\n * @param {Array<JitsiRemoteTrack>} remoteTracks the tracks that will be added\n * @private\n */\nJitsiConference.prototype._addRemoteTracks = function(logName, remoteTracks) {\n    for (const track of remoteTracks) {\n        logger.info(`Adding remote ${logName} track: ${track}`);\n        this.rtc.eventEmitter.emit(RTCEvents.REMOTE_TRACK_ADDED, track);\n    }\n};\n\n/**\n * Called when {@link XMPPEvents.CONNECTION_ESTABLISHED} event is\n * triggered for a {@link JingleSessionPC}. Switches the conference to use\n * the P2P connection if the event comes from the P2P session.\n * @param {JingleSessionPC} jingleSession the session instance.\n * @private\n */\nJitsiConference.prototype._onIceConnectionEstablished = function(\n        jingleSession) {\n    if (this.p2pJingleSession !== null) {\n        // store the establishment time of the p2p session as a field of the\n        // JitsiConference because the p2pJingleSession might get disposed (thus\n        // the value is lost).\n        this.p2pEstablishmentDuration\n            = this.p2pJingleSession.establishmentDuration;\n    }\n\n    if (this.jvbJingleSession !== null) {\n        this.jvbEstablishmentDuration\n            = this.jvbJingleSession.establishmentDuration;\n    }\n\n    let done = false;\n    const forceJVB121Ratio = this.options.config.forceJVB121Ratio;\n\n    // We don't care about the JVB case, there's nothing to be done\n    if (!jingleSession.isP2P) {\n        done = true;\n    } else if (this.p2pJingleSession !== jingleSession) {\n        logger.error('CONNECTION_ESTABLISHED - wrong P2P session instance ?!');\n\n        done = true;\n    } else if (!jingleSession.isInitiator\n        && typeof forceJVB121Ratio === 'number'\n        && Math.random() < forceJVB121Ratio) {\n        logger.info(`Forcing JVB 121 mode (ratio=${forceJVB121Ratio})...`);\n        Statistics.analytics.addPermanentProperties({ forceJvb121: true });\n        this._stopP2PSession('decline', 'force JVB121');\n\n        done = true;\n    }\n\n    if (!isNaN(this.p2pEstablishmentDuration)\n        && !isNaN(this.jvbEstablishmentDuration)) {\n        const establishmentDurationDiff\n            = this.p2pEstablishmentDuration - this.jvbEstablishmentDuration;\n\n        Statistics.sendAnalytics(\n            ICE_ESTABLISHMENT_DURATION_DIFF,\n            { value: establishmentDurationDiff });\n    }\n\n    if (done) {\n\n        return;\n    }\n\n    // Update P2P status and emit events\n    this._setP2PStatus(true);\n\n    // Remove remote tracks\n    if (this.jvbJingleSession) {\n        this._removeRemoteJVBTracks();\n    } else {\n        logger.info('Not removing remote JVB tracks - no session yet');\n    }\n\n    this._addRemoteP2PTracks();\n\n    // Stop media transfer over the JVB connection\n    if (this.jvbJingleSession) {\n        this._suspendMediaTransferForJvbConnection();\n    }\n\n    logger.info('Starting remote stats with p2p connection');\n    this.statistics.startRemoteStats(this.p2pJingleSession.peerconnection);\n\n    Statistics.sendAnalyticsAndLog(\n        createP2PEvent(\n            ACTION_P2P_ESTABLISHED,\n            {\n                initiator: this.p2pJingleSession.isInitiator\n            }));\n\n};\n\n/**\n * Clears the deferred start P2P task if it has been scheduled.\n * @private\n */\nJitsiConference.prototype._maybeClearDeferredStartP2P = function() {\n    if (this.deferredStartP2PTask) {\n        logger.info('Cleared deferred start P2P task');\n        clearTimeout(this.deferredStartP2PTask);\n        this.deferredStartP2PTask = null;\n    }\n};\n\n/**\n * Removes from the conference remote tracks associated with the JVB\n * connection.\n * @private\n */\nJitsiConference.prototype._removeRemoteJVBTracks = function() {\n    this._removeRemoteTracks(\n        'JVB', this.jvbJingleSession.peerconnection.getRemoteTracks());\n};\n\n/**\n * Removes from the conference remote tracks associated with the P2P\n * connection.\n * @private\n */\nJitsiConference.prototype._removeRemoteP2PTracks = function() {\n    this._removeRemoteTracks(\n        'P2P', this.p2pJingleSession.peerconnection.getRemoteTracks());\n};\n\n/**\n * Generates fake \"remote track removed\" events for given Jingle session.\n * @param {string} sessionNickname the session's nickname which will appear in\n * log messages.\n * @param {Array<JitsiRemoteTrack>} remoteTracks the tracks that will be removed\n * @private\n */\nJitsiConference.prototype._removeRemoteTracks = function(\n        sessionNickname,\n        remoteTracks) {\n    for (const track of remoteTracks) {\n        logger.info(`Removing remote ${sessionNickname} track: ${track}`);\n        this.rtc.eventEmitter.emit(RTCEvents.REMOTE_TRACK_REMOVED, track);\n    }\n};\n\n/**\n * Resumes media transfer over the JVB connection.\n * @private\n */\nJitsiConference.prototype._resumeMediaTransferForJvbConnection = function() {\n    logger.info('Resuming media transfer over the JVB connection...');\n    this.jvbJingleSession.setMediaTransferActive(true, true).then(\n        () => {\n            logger.info('Resumed media transfer over the JVB connection!');\n        },\n        error => {\n            logger.error(\n                'Failed to resume media transfer over the JVB connection:',\n                error);\n        });\n};\n\n/**\n * Sets new P2P status and updates some events/states hijacked from\n * the <tt>JitsiConference</tt>.\n * @param {boolean} newStatus the new P2P status value, <tt>true</tt> means that\n * P2P is now in use, <tt>false</tt> means that the JVB connection is now in use\n * @private\n */\nJitsiConference.prototype._setP2PStatus = function(newStatus) {\n    if (this.p2p === newStatus) {\n        logger.debug(`Called _setP2PStatus with the same status: ${newStatus}`);\n\n        return;\n    }\n    this.p2p = newStatus;\n    if (newStatus) {\n        logger.info('Peer to peer connection established!');\n\n        // When we end up in a valid P2P session need to reset the properties\n        // in case they have persisted, after session with another peer.\n        Statistics.analytics.addPermanentProperties({\n            p2pFailed: false,\n            forceJvb121: false\n        });\n\n        // Sync up video transfer active in case p2pJingleSession not existed\n        // when the lastN value was being adjusted.\n        const isVideoActive = this.rtc.getLastN() !== 0;\n\n        this.p2pJingleSession\n            .setMediaTransferActive(true, isVideoActive)\n            .catch(error => {\n                logger.error(\n                    'Failed to sync up P2P video transfer status'\n                        + `(${isVideoActive})`, error);\n            });\n    } else {\n        logger.info('Peer to peer connection closed!');\n    }\n\n    // Put the JVB connection on hold/resume\n    if (this.jvbJingleSession) {\n        this.statistics.sendConnectionResumeOrHoldEvent(\n            this.jvbJingleSession.peerconnection, !newStatus);\n    }\n\n    // Clear dtmfManager, so that it can be recreated with new connection\n    this.dtmfManager = null;\n\n    // Update P2P status\n    this.eventEmitter.emit(\n        JitsiConferenceEvents.P2P_STATUS,\n        this,\n        this.p2p);\n\n    // Refresh connection interrupted/restored\n    this.eventEmitter.emit(\n        this.isConnectionInterrupted()\n            ? JitsiConferenceEvents.CONNECTION_INTERRUPTED\n            : JitsiConferenceEvents.CONNECTION_RESTORED);\n};\n\n/**\n * Starts new P2P session.\n * @param {string} remoteJid the JID of the remote participant\n * @private\n */\nJitsiConference.prototype._startP2PSession = function(remoteJid) {\n    this._maybeClearDeferredStartP2P();\n    if (this.p2pJingleSession) {\n        logger.error('P2P session already started!');\n\n        return;\n    }\n\n    this.isP2PConnectionInterrupted = false;\n    this.p2pJingleSession\n        = this.xmpp.connection.jingle.newP2PJingleSession(\n            this.room.myroomjid,\n            remoteJid);\n    logger.info(\n        'Created new P2P JingleSession', this.room.myroomjid, remoteJid);\n\n    this.p2pJingleSession.initialize(true /* initiator */, this.room, this.rtc);\n\n    logger.info('Starting CallStats for P2P connection...');\n\n    let remoteID = Strophe.getResourceFromJid(this.p2pJingleSession.remoteJid);\n\n    if (this.options.config.enableStatsID) {\n        const participant = this.participants[remoteID];\n\n        if (participant) {\n            remoteID = participant.getStatsID() || remoteID;\n        }\n    }\n\n    this.statistics.startCallStats(\n        this.p2pJingleSession.peerconnection,\n        remoteID);\n\n    // NOTE one may consider to start P2P with the local tracks detached,\n    // but no data will be sent until ICE succeeds anyway. And we switch\n    // immediately once the P2P ICE connects.\n    const localTracks = this.getLocalTracks();\n\n    this.p2pJingleSession.invite(localTracks);\n};\n\n/**\n * Suspends media transfer over the JVB connection.\n * @private\n */\nJitsiConference.prototype._suspendMediaTransferForJvbConnection = function() {\n    logger.info('Suspending media transfer over the JVB connection...');\n    this.jvbJingleSession.setMediaTransferActive(false, false).then(\n        () => {\n            logger.info('Suspended media transfer over the JVB connection !');\n        },\n        error => {\n            logger.error(\n                'Failed to suspend media transfer over the JVB connection:',\n                error);\n        });\n};\n\n/**\n * Method when called will decide whether it's the time to start or stop\n * the P2P session.\n * @param {boolean} userLeftEvent if <tt>true</tt> it means that the call\n * originates from the user left event.\n * @private\n */\nJitsiConference.prototype._maybeStartOrStopP2P = function(userLeftEvent) {\n    if (!browser.supportsP2P()\n        || !this.isP2PEnabled()\n        || this.isP2PTestModeEnabled()) {\n        logger.info('Auto P2P disabled');\n\n        return;\n    }\n    const peers = this.getParticipants();\n    const peerCount = peers.length;\n    const isModerator = this.isModerator();\n\n    // FIXME 1 peer and it must *support* P2P switching\n    const shouldBeInP2P = peerCount === 1;\n\n    logger.debug(\n        `P2P? isModerator: ${isModerator}, peerCount: ${peerCount} => ${\n            shouldBeInP2P}`);\n\n    // Clear deferred \"start P2P\" task\n    if (!shouldBeInP2P && this.deferredStartP2PTask) {\n        this._maybeClearDeferredStartP2P();\n    }\n\n    // Start peer to peer session\n    if (isModerator && !this.p2pJingleSession && shouldBeInP2P) {\n        const peer = peerCount && peers[0];\n\n        // Everyone is a moderator ?\n        if (isModerator && peer.getRole() === 'moderator') {\n            const myId = this.myUserId();\n            const peersId = peer.getId();\n\n            if (myId > peersId) {\n                logger.debug(\n                    'Everyone\\'s a moderator - '\n                    + 'the other peer should start P2P', myId, peersId);\n\n                return;\n            } else if (myId === peersId) {\n                logger.error('The same IDs ? ', myId, peersId);\n\n                return;\n            }\n        }\n        const jid = peer.getJid();\n\n        if (userLeftEvent) {\n            if (this.deferredStartP2PTask) {\n                logger.error('Deferred start P2P task\\'s been set already!');\n\n                return;\n            }\n            logger.info(\n                `Will start P2P with: ${jid} after ${\n                    this.backToP2PDelay} seconds...`);\n            this.deferredStartP2PTask = setTimeout(\n                this._startP2PSession.bind(this, jid),\n                this.backToP2PDelay * 1000);\n        } else {\n            logger.info(`Will start P2P with: ${jid}`);\n            this._startP2PSession(jid);\n        }\n    } else if (this.p2pJingleSession && !shouldBeInP2P) {\n        logger.info(`Will stop P2P with: ${this.p2pJingleSession.remoteJid}`);\n\n        // Log that there will be a switch back to the JVB connection\n        if (this.p2pJingleSession.isInitiator && peerCount > 1) {\n            Statistics.sendAnalyticsAndLog(\n                createP2PEvent(ACTION_P2P_SWITCH_TO_JVB));\n        }\n        this._stopP2PSession();\n    }\n};\n\n/**\n * Stops the current P2P session.\n * @param {string} [reason=\"success\"] one of the Jingle \"reason\" element\n * names as defined by https://xmpp.org/extensions/xep-0166.html#def-reason\n * @param {string} [reasonDescription=\"Turing off P2P session\"] text\n * description that will be included in the session terminate message\n * @private\n */\nJitsiConference.prototype._stopP2PSession = function(\n        reason,\n        reasonDescription) {\n    if (!this.p2pJingleSession) {\n        logger.error('No P2P session to be stopped!');\n\n        return;\n    }\n\n    const wasP2PEstablished = this.isP2PActive();\n\n    // Swap remote tracks, but only if the P2P has been fully established\n    if (wasP2PEstablished) {\n        if (this.jvbJingleSession) {\n            this._resumeMediaTransferForJvbConnection();\n        }\n\n        // Remove remote P2P tracks\n        this._removeRemoteP2PTracks();\n    }\n\n    // Stop P2P stats\n    logger.info('Stopping remote stats for P2P connection');\n    this.statistics.stopRemoteStats(this.p2pJingleSession.peerconnection);\n    logger.info('Stopping CallStats for P2P connection');\n    this.statistics.stopCallStats(this.p2pJingleSession.peerconnection);\n\n    this.p2pJingleSession.terminate(\n        () => {\n            logger.info('P2P session terminate RESULT');\n        },\n        error => {\n            // Because both initiator and responder are simultaneously\n            // terminating their JingleSessions in case of the 'to JVB switch'\n            // when 3rd participant joins, both will dispose their sessions and\n            // reply with 'item-not-found' (see strophe.jingle.js). We don't\n            // want to log this as an error since it's expected behaviour.\n            //\n            // We want them both to terminate, because in case of initiator's\n            // crash the responder would stay in P2P mode until ICE fails which\n            // could take up to 20 seconds.\n            //\n            // NOTE lack of 'reason' is considered as graceful session terminate\n            // where both initiator and responder terminate their sessions\n            // simultaneously.\n            if (reason) {\n                logger.error(\n                    'An error occurred while trying to terminate'\n                        + ' P2P Jingle session', error);\n            }\n        }, {\n            reason: reason ? reason : 'success',\n            reasonDescription: reasonDescription\n                ? reasonDescription : 'Turing off P2P session',\n            sendSessionTerminate: this.room\n                && this.getParticipantById(\n                    Strophe.getResourceFromJid(this.p2pJingleSession.remoteJid))\n        });\n\n    this.p2pJingleSession = null;\n\n    // Update P2P status and other affected events/states\n    this._setP2PStatus(false);\n\n    if (wasP2PEstablished) {\n        // Add back remote JVB tracks\n        if (this.jvbJingleSession) {\n            this._addRemoteJVBTracks();\n        } else {\n            logger.info('Not adding remote JVB tracks - no session yet');\n        }\n    }\n};\n\n/**\n * Checks whether or not the conference is currently in the peer to peer mode.\n * Being in peer to peer mode means that the direct connection has been\n * established and the P2P connection is being used for media transmission.\n * @return {boolean} <tt>true</tt> if in P2P mode or <tt>false</tt> otherwise.\n */\nJitsiConference.prototype.isP2PActive = function() {\n    return this.p2p;\n};\n\n/**\n * Returns the current ICE state of the P2P connection.\n * NOTE: method is used by the jitsi-meet-torture tests.\n * @return {string|null} an ICE state or <tt>null</tt> if there's currently\n * no P2P connection.\n */\nJitsiConference.prototype.getP2PConnectionState = function() {\n    if (this.isP2PActive()) {\n        return this.p2pJingleSession.peerconnection.getConnectionState();\n    }\n\n    return null;\n};\n\n\n/**\n * Manually starts new P2P session (should be used only in the tests).\n */\nJitsiConference.prototype.startP2PSession = function() {\n    const peers = this.getParticipants();\n\n    // Start peer to peer session\n    if (peers.length === 1) {\n        const peerJid = peers[0].getJid();\n\n        this._startP2PSession(peerJid);\n    } else {\n        throw new Error(\n            'There must be exactly 1 participant to start the P2P session !');\n    }\n};\n\n/**\n * Manually stops the current P2P session (should be used only in the tests)\n */\nJitsiConference.prototype.stopP2PSession = function() {\n    this._stopP2PSession();\n};\n\n/**\n * Get a summary of how long current participants have been the dominant speaker\n * @returns {object}\n */\nJitsiConference.prototype.getSpeakerStats = function() {\n    return this.speakerStatsCollector.getStats();\n};\n\n/**\n * Sets the maximum video size the local participant should receive from remote\n * participants.\n *\n * @param {number} maxFrameHeightPixels the maximum frame height, in pixels,\n * this receiver is willing to receive.\n * @returns {void}\n */\nJitsiConference.prototype.setReceiverVideoConstraint = function(\n        maxFrameHeight) {\n    this.rtc.setReceiverVideoConstraint(maxFrameHeight);\n};\n\n/**\n * Creates a video SIP GW session and returns it if service is enabled. Before\n * creating a session one need to check whether video SIP GW service is\n * available in the system {@link JitsiConference.isVideoSIPGWAvailable}. Even\n * if there are available nodes to serve this request, after creating the\n * session those nodes can be taken and the request about using the\n * created session can fail.\n *\n * @param {string} sipAddress - The sip address to be used.\n * @param {string} displayName - The display name to be used for this session.\n * @returns {JitsiVideoSIPGWSession|Error} Returns null if conference is not\n * initialised and there is no room.\n */\nJitsiConference.prototype.createVideoSIPGWSession\n    = function(sipAddress, displayName) {\n        if (!this.room) {\n            return new Error(VideoSIPGWConstants.ERROR_NO_CONNECTION);\n        }\n\n        return this.videoSIPGWHandler\n            .createVideoSIPGWSession(sipAddress, displayName);\n    };\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiConference.js","/* global __filename */\n\nimport { createRtpStatsEvent } from '../../service/statistics/AnalyticsEvents';\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as ConnectionQualityEvents\n    from '../../service/connectivity/ConnectionQualityEvents';\nimport * as ConferenceEvents from '../../JitsiConferenceEvents';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport browser from '../browser';\nimport Statistics from './statistics';\nimport * as VideoType from '../../service/RTC/VideoType';\n\nconst logger = getLogger(__filename);\n\n/**\n * This will calculate an average for one, named stat and submit it to\n * the analytics module when requested. It automatically counts the samples.\n */\nclass AverageStatReport {\n    /**\n     * Creates new <tt>AverageStatReport</tt> for given name.\n     * @param {string} name that's the name of the event that will be reported\n     * to the analytics module.\n     */\n    constructor(name) {\n        this.name = name;\n        this.count = 0;\n        this.sum = 0;\n        this.samples = [];\n    }\n\n    /**\n     * Adds the next value that will be included in the average when\n     * {@link calculate} is called.\n     * @param {number} nextValue\n     */\n    addNext(nextValue) {\n        if (typeof nextValue !== 'number') {\n            logger.error(\n                `${this.name} - invalid value for idx: ${this.count}`,\n                nextValue);\n        } else if (!isNaN(nextValue)) {\n            this.sum += nextValue;\n            this.samples.push(nextValue);\n            this.count += 1;\n        }\n    }\n\n    /**\n     * Calculates an average for the samples collected using {@link addNext}.\n     * @return {number|NaN} an average of all collected samples or <tt>NaN</tt>\n     * if no samples were collected.\n     */\n    calculate() {\n        return this.sum / this.count;\n    }\n\n    /**\n     * Appends the report to the analytics \"data\" object. The object will be\n     * set under <tt>prefix</tt> + {@link this.name} key.\n     * @param {Object} report the analytics \"data\" object\n     */\n    appendReport(report) {\n        report[`${this.name}_avg`] = this.calculate();\n        report[`${this.name}_samples`] = JSON.stringify(this.samples);\n    }\n\n    /**\n     * Clears all memory of any samples collected, so that new average can be\n     * calculated using this instance.\n     */\n    reset() {\n        this.samples = [];\n        this.sum = 0;\n        this.count = 0;\n    }\n}\n\n/**\n * Class gathers the stats that are calculated and reported for a\n * {@link TraceablePeerConnection} even if it's not currently active. For\n * example we want to monitor RTT for the JVB connection while in P2P mode.\n */\nclass ConnectionAvgStats {\n    /**\n     * Creates new <tt>ConnectionAvgStats</tt>\n     * @param {AvgRTPStatsReporter} avgRtpStatsReporter\n     * @param {boolean} isP2P\n     * @param {number} n the number of samples, before arithmetic mean is to be\n     * calculated and values submitted to the analytics module.\n     */\n    constructor(avgRtpStatsReporter, isP2P, n) {\n        /**\n         * Is this instance for JVB or P2P connection ?\n         * @type {boolean}\n         */\n        this.isP2P = isP2P;\n\n        /**\n         * How many samples are to be included in arithmetic mean calculation.\n         * @type {number}\n         * @private\n         */\n        this._n = n;\n\n        /**\n         * The current sample index. Starts from 0 and goes up to {@link _n})\n         * when analytics report will be submitted.\n         * @type {number}\n         * @private\n         */\n        this._sampleIdx = 0;\n\n        /**\n         * Average round trip time reported by the ICE candidate pair.\n         * @type {AverageStatReport}\n         */\n        this._avgRTT = new AverageStatReport('rtt');\n\n        /**\n         * Map stores average RTT to the JVB reported by remote participants.\n         * Mapped per participant id {@link JitsiParticipant.getId}.\n         *\n         * This is used only when {@link ConnectionAvgStats.isP2P} equals to\n         * <tt>false</tt>.\n         *\n         * @type {Map<string,AverageStatReport>}\n         * @private\n         */\n        this._avgRemoteRTTMap = new Map();\n\n        /**\n         * The conference for which stats will be collected and reported.\n         * @type {JitsiConference}\n         * @private\n         */\n        this._avgRtpStatsReporter = avgRtpStatsReporter;\n\n        /**\n         * The latest average E2E RTT for the JVB connection only.\n         *\n         * This is used only when {@link ConnectionAvgStats.isP2P} equals to\n         * <tt>false</tt>.\n         *\n         * @type {number}\n         */\n        this._avgEnd2EndRTT = undefined;\n\n        this._onConnectionStats = (tpc, stats) => {\n            if (this.isP2P === tpc.isP2P) {\n                this._calculateAvgStats(stats);\n            }\n        };\n\n        const conference = avgRtpStatsReporter._conference;\n\n        conference.statistics.addConnectionStatsListener(\n            this._onConnectionStats);\n\n        if (!this.isP2P) {\n            this._onUserLeft = id => this._avgRemoteRTTMap.delete(id);\n            conference.on(ConferenceEvents.USER_LEFT, this._onUserLeft);\n\n            this._onRemoteStatsUpdated\n                = (id, data) => this._processRemoteStats(id, data);\n            conference.on(\n                ConnectionQualityEvents.REMOTE_STATS_UPDATED,\n                this._onRemoteStatsUpdated);\n        }\n    }\n\n    /**\n     * Processes next batch of stats.\n     * @param {go figure} data\n     * @private\n     */\n    _calculateAvgStats(data) {\n        if (!data) {\n            logger.error('No stats');\n\n            return;\n        }\n\n        if (browser.supportsRTTStatistics()) {\n            if (data.transport && data.transport.length) {\n                this._avgRTT.addNext(data.transport[0].rtt);\n            }\n        }\n\n        this._sampleIdx += 1;\n\n        if (this._sampleIdx >= this._n) {\n            if (browser.supportsRTTStatistics()) {\n                const conference = this._avgRtpStatsReporter._conference;\n\n                const batchReport = {\n                    p2p: this.isP2P,\n                    'conference_size': conference.getParticipantCount()\n                };\n\n                if (data.transport && data.transport.length) {\n                    Object.assign(batchReport, {\n                        'local_candidate_type':\n                            data.transport[0].localCandidateType,\n                        'remote_candidate_type':\n                            data.transport[0].remoteCandidateType,\n                        'transport_type': data.transport[0].type\n                    });\n                }\n\n                this._avgRTT.appendReport(batchReport);\n\n                if (this.isP2P) {\n                    // Report RTT diff only for P2P.\n                    const jvbEnd2EndRTT = this\n                        ._avgRtpStatsReporter.jvbStatsMonitor._avgEnd2EndRTT;\n\n                    if (!isNaN(jvbEnd2EndRTT)) {\n                        // eslint-disable-next-line dot-notation\n                        batchReport['rtt_diff']\n                            = this._avgRTT.calculate() - jvbEnd2EndRTT;\n                    }\n                } else {\n                    // Report end to end RTT only for JVB.\n                    const avgRemoteRTT = this._calculateAvgRemoteRTT();\n                    const avgLocalRTT = this._avgRTT.calculate();\n\n                    this._avgEnd2EndRTT = avgLocalRTT + avgRemoteRTT;\n\n                    if (!isNaN(avgLocalRTT) && !isNaN(avgRemoteRTT)) {\n                        // eslint-disable-next-line dot-notation\n                        batchReport['end2end_rtt_avg'] = this._avgEnd2EndRTT;\n                    }\n                }\n\n                Statistics.sendAnalytics(createRtpStatsEvent(batchReport));\n            }\n\n            this._resetAvgStats();\n        }\n    }\n\n    /**\n     * Calculates arithmetic mean of all RTTs towards the JVB reported by\n     * participants.\n     * @return {number|NaN} NaN if not available (not enough data)\n     * @private\n     */\n    _calculateAvgRemoteRTT() {\n        let count = 0, sum = 0;\n\n        // FIXME should we ignore RTT for participant\n        // who \"is having connectivity issues\" ?\n        for (const remoteAvg of this._avgRemoteRTTMap.values()) {\n            const avg = remoteAvg.calculate();\n\n            if (!isNaN(avg)) {\n                sum += avg;\n                count += 1;\n                remoteAvg.reset();\n            }\n        }\n\n        return sum / count;\n    }\n\n    /**\n     * Processes {@link ConnectionQualityEvents.REMOTE_STATS_UPDATED} to analyse\n     * RTT towards the JVB reported by each participant.\n     * @param {string} id {@link JitsiParticipant.getId}\n     * @param {go figure in ConnectionQuality.js} data\n     * @private\n     */\n    _processRemoteStats(id, data) {\n        const validData = typeof data.jvbRTT === 'number';\n        let rttAvg = this._avgRemoteRTTMap.get(id);\n\n        if (!rttAvg && validData) {\n            rttAvg = new AverageStatReport(`${id}_stat_rtt`);\n            this._avgRemoteRTTMap.set(id, rttAvg);\n        }\n\n        if (validData) {\n            rttAvg.addNext(data.jvbRTT);\n        } else if (rttAvg) {\n            this._avgRemoteRTTMap.delete(id);\n        }\n    }\n\n    /**\n     * Reset cache of all averages and {@link _sampleIdx}.\n     * @private\n     */\n    _resetAvgStats() {\n        this._avgRTT.reset();\n        if (this._avgRemoteRTTMap) {\n            this._avgRemoteRTTMap.clear();\n        }\n        this._sampleIdx = 0;\n    }\n\n    /**\n     *\n     */\n    dispose() {\n\n        const conference = this._avgRtpStatsReporter._conference;\n\n        conference.statistics.removeConnectionStatsListener(\n            this._onConnectionStats);\n        if (!this.isP2P) {\n            conference.off(\n                ConnectionQualityEvents.REMOTE_STATS_UPDATED,\n                this._onRemoteStatsUpdated);\n            conference.off(\n                ConferenceEvents.USER_LEFT,\n                this._onUserLeft);\n        }\n    }\n}\n\n/**\n * Reports average RTP statistics values (arithmetic mean) to the analytics\n * module for things like bit rate, bandwidth, packet loss etc. It keeps track\n * of the P2P vs JVB conference modes and submits the values under different\n * namespaces (the events for P2P mode have 'p2p.' prefix). Every switch between\n * P2P mode resets the data collected so far and averages are calculated from\n * scratch.\n */\nexport default class AvgRTPStatsReporter {\n    /**\n     * Creates new instance of <tt>AvgRTPStatsReporter</tt>\n     * @param {JitsiConference} conference\n     * @param {number} n the number of samples, before arithmetic mean is to be\n     * calculated and values submitted to the analytics module.\n     */\n    constructor(conference, n) {\n        /**\n         * How many {@link ConnectionQualityEvents.LOCAL_STATS_UPDATED} samples\n         * are to be included in arithmetic mean calculation.\n         * @type {number}\n         * @private\n         */\n        this._n = n;\n\n        if (n > 0) {\n            logger.info(`Avg RTP stats will be calculated every ${n} samples`);\n        } else {\n            logger.info('Avg RTP stats reports are disabled.');\n\n            // Do not initialize\n            return;\n        }\n\n        /**\n         * The current sample index. Starts from 0 and goes up to {@link _n})\n         * when analytics report will be submitted.\n         * @type {number}\n         * @private\n         */\n        this._sampleIdx = 0;\n\n        /**\n         * The conference for which stats will be collected and reported.\n         * @type {JitsiConference}\n         * @private\n         */\n        this._conference = conference;\n\n        /**\n         * Average audio upload bitrate\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgAudioBitrateUp\n            = new AverageStatReport('bitrate_audio_upload');\n\n        /**\n         * Average audio download bitrate\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgAudioBitrateDown\n            = new AverageStatReport('bitrate_audio_download');\n\n        /**\n         * Average video upload bitrate\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgVideoBitrateUp\n            = new AverageStatReport('bitrate_video_upload');\n\n        /**\n         * Average video download bitrate\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgVideoBitrateDown\n            = new AverageStatReport('bitrate_video_download');\n\n        /**\n         * Average upload bandwidth\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgBandwidthUp\n            = new AverageStatReport('bandwidth_upload');\n\n        /**\n         * Average download bandwidth\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgBandwidthDown\n            = new AverageStatReport('bandwidth_download');\n\n        /**\n         * Average total packet loss\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgPacketLossTotal\n            = new AverageStatReport('packet_loss_total');\n\n        /**\n         * Average upload packet loss\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgPacketLossUp\n            = new AverageStatReport('packet_loss_upload');\n\n        /**\n         * Average download packet loss\n         * XXX What are the units?\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgPacketLossDown\n            = new AverageStatReport('packet_loss_download');\n\n        /**\n         * Average FPS for remote videos\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgRemoteFPS = new AverageStatReport('framerate_remote');\n\n        /**\n         * Average FPS for remote screen streaming videos (reported only if not\n         * a <tt>NaN</tt>).\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgRemoteScreenFPS\n            = new AverageStatReport('framerate_screen_remote');\n\n        /**\n         * Average FPS for local video (camera)\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgLocalFPS = new AverageStatReport('framerate_local');\n\n        /**\n         * Average FPS for local screen streaming video (reported only if not\n         * a <tt>NaN</tt>).\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgLocalScreenFPS\n            = new AverageStatReport('framerate_screen_local');\n\n        /**\n         * Average pixels for remote screen streaming videos (reported only if\n         * not a <tt>NaN</tt>).\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgRemoteCameraPixels\n            = new AverageStatReport('pixels_remote');\n\n        /**\n         * Average pixels for remote screen streaming videos (reported only if\n         * not a <tt>NaN</tt>).\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgRemoteScreenPixels\n            = new AverageStatReport('pixels_screen_remote');\n\n        /**\n         * Average pixels for local video (camera)\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgLocalCameraPixels\n            = new AverageStatReport('pixels_local');\n\n        /**\n         * Average pixels for local screen streaming video (reported only if not\n         * a <tt>NaN</tt>).\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgLocalScreenPixels\n            = new AverageStatReport('pixels_screen_local');\n\n        /**\n         * Average connection quality as defined by\n         * the {@link ConnectionQuality} module.\n         * @type {AverageStatReport}\n         * @private\n         */\n        this._avgCQ = new AverageStatReport('connection_quality');\n\n        this._onLocalStatsUpdated = data => this._calculateAvgStats(data);\n        conference.on(\n            ConnectionQualityEvents.LOCAL_STATS_UPDATED,\n            this._onLocalStatsUpdated);\n\n        this._onP2PStatusChanged = () => {\n            logger.debug('Resetting average stats calculation');\n            this._resetAvgStats();\n            this.jvbStatsMonitor._resetAvgStats();\n            this.p2pStatsMonitor._resetAvgStats();\n        };\n        conference.on(\n            ConferenceEvents.P2P_STATUS,\n            this._onP2PStatusChanged);\n\n        this._onJvb121StatusChanged = (oldStatus, newStatus) => {\n            // We want to reset only on the transition from false => true,\n            // because otherwise those stats are resetted on JVB <=> P2P\n            // transition.\n            if (newStatus === true) {\n                logger.info('Resetting JVB avg RTP stats');\n                this._resetAvgJvbStats();\n            }\n        };\n        conference.on(\n            ConferenceEvents.JVB121_STATUS,\n            this._onJvb121StatusChanged);\n\n        this.jvbStatsMonitor\n            = new ConnectionAvgStats(this, false /* JVB */, n);\n\n        this.p2pStatsMonitor\n            = new ConnectionAvgStats(this, true /* P2P */, n);\n    }\n\n    /**\n     * Processes next batch of stats reported on\n     * {@link ConnectionQualityEvents.LOCAL_STATS_UPDATED}.\n     * @param {go figure} data\n     * @private\n     */\n    _calculateAvgStats(data) {\n\n        if (!data) {\n            logger.error('No stats');\n\n            return;\n        }\n\n        const isP2P = this._conference.isP2PActive();\n        const confSize = this._conference.getParticipantCount();\n\n        if (!isP2P && confSize < 2) {\n\n            // There's no point in collecting stats for a JVB conference of 1.\n            // That happens for short period of time after everyone leaves\n            // the room, until Jicofo terminates the session.\n            return;\n        }\n\n        /* Uncomment to figure out stats structure\n        for (const key in data) {\n            if (data.hasOwnProperty(key)) {\n                logger.info(`local stat ${key}: `, data[key]);\n            }\n        } */\n\n        const bitrate = data.bitrate;\n        const bandwidth = data.bandwidth;\n        const packetLoss = data.packetLoss;\n        const frameRate = data.framerate;\n        const resolution = data.resolution;\n\n        if (!bitrate) {\n            logger.error('No \"bitrate\"');\n\n            return;\n        } else if (!bandwidth) {\n            logger.error('No \"bandwidth\"');\n\n            return;\n        } else if (!packetLoss) {\n            logger.error('No \"packetloss\"');\n\n            return;\n        } else if (!frameRate) {\n            logger.error('No \"framerate\"');\n\n            return;\n        } else if (!resolution) {\n            logger.error('No resolution');\n\n            return;\n        }\n\n        this._avgAudioBitrateUp.addNext(bitrate.audio.upload);\n        this._avgAudioBitrateDown.addNext(bitrate.audio.download);\n\n        this._avgVideoBitrateUp.addNext(bitrate.video.upload);\n        this._avgVideoBitrateDown.addNext(bitrate.video.download);\n\n        if (browser.supportsBandwidthStatistics()) {\n            this._avgBandwidthUp.addNext(bandwidth.upload);\n            this._avgBandwidthDown.addNext(bandwidth.download);\n        }\n\n        this._avgPacketLossUp.addNext(packetLoss.upload);\n        this._avgPacketLossDown.addNext(packetLoss.download);\n        this._avgPacketLossTotal.addNext(packetLoss.total);\n\n        this._avgCQ.addNext(data.connectionQuality);\n\n        if (frameRate) {\n            this._avgRemoteFPS.addNext(\n                this._calculateAvgVideoFps(\n                    frameRate, false /* remote */, VideoType.CAMERA));\n            this._avgRemoteScreenFPS.addNext(\n                this._calculateAvgVideoFps(\n                    frameRate, false /* remote */, VideoType.DESKTOP));\n\n            this._avgLocalFPS.addNext(\n                this._calculateAvgVideoFps(\n                    frameRate, true /* local */, VideoType.CAMERA));\n            this._avgLocalScreenFPS.addNext(\n                this._calculateAvgVideoFps(\n                    frameRate, true /* local */, VideoType.DESKTOP));\n        }\n\n        if (resolution) {\n            this._avgRemoteCameraPixels.addNext(\n                this._calculateAvgVideoPixels(\n                    resolution, false /* remote */, VideoType.CAMERA));\n\n            this._avgRemoteScreenPixels.addNext(\n                this._calculateAvgVideoPixels(\n                    resolution, false /* remote */, VideoType.DESKTOP));\n\n            this._avgLocalCameraPixels.addNext(\n                this._calculateAvgVideoPixels(\n                    resolution, true /* local */, VideoType.CAMERA));\n\n            this._avgLocalScreenPixels.addNext(\n                this._calculateAvgVideoPixels(\n                    resolution, true /* local */, VideoType.DESKTOP));\n        }\n\n        this._sampleIdx += 1;\n\n        if (this._sampleIdx >= this._n) {\n\n            const batchReport = {\n                p2p: isP2P,\n                'conference_size': confSize\n            };\n\n            if (data.transport && data.transport.length) {\n                Object.assign(batchReport, {\n                    'local_candidate_type':\n                        data.transport[0].localCandidateType,\n                    'remote_candidate_type':\n                        data.transport[0].remoteCandidateType,\n                    'transport_type': data.transport[0].type\n                });\n            }\n\n            this._avgAudioBitrateUp.appendReport(batchReport);\n            this._avgAudioBitrateDown.appendReport(batchReport);\n\n            this._avgVideoBitrateUp.appendReport(batchReport);\n            this._avgVideoBitrateDown.appendReport(batchReport);\n\n            if (browser.supportsBandwidthStatistics()) {\n                this._avgBandwidthUp.appendReport(batchReport);\n                this._avgBandwidthDown.appendReport(batchReport);\n            }\n            this._avgPacketLossUp.appendReport(batchReport);\n            this._avgPacketLossDown.appendReport(batchReport);\n            this._avgPacketLossTotal.appendReport(batchReport);\n\n            this._avgRemoteFPS.appendReport(batchReport);\n            if (!isNaN(this._avgRemoteScreenFPS.calculate())) {\n                this._avgRemoteScreenFPS.appendReport(batchReport);\n            }\n            this._avgLocalFPS.appendReport(batchReport);\n            if (!isNaN(this._avgLocalScreenFPS.calculate())) {\n                this._avgLocalScreenFPS.appendReport(batchReport);\n            }\n\n            this._avgRemoteCameraPixels.appendReport(batchReport);\n            if (!isNaN(this._avgRemoteScreenPixels.calculate())) {\n                this._avgRemoteScreenPixels.appendReport(batchReport);\n            }\n            this._avgLocalCameraPixels.appendReport(batchReport);\n            if (!isNaN(this._avgLocalScreenPixels.calculate())) {\n                this._avgLocalScreenPixels.appendReport(batchReport);\n            }\n\n            this._avgCQ.appendReport(batchReport);\n\n            Statistics.sendAnalytics(createRtpStatsEvent(batchReport));\n\n            this._resetAvgStats();\n        }\n    }\n\n    /**\n     * Calculates average number of pixels for the report\n     *\n     * @param {map} peerResolutions a map of peer resolutions\n     * @param {boolean} isLocal if the average is to be calculated for the local\n     * video or <tt>false</tt> if for remote videos.\n     * @param {VideoType} videoType\n     * @return {number|NaN} average number of pixels or <tt>NaN</tt> if there\n     * are no samples.\n     * @private\n     */\n    _calculateAvgVideoPixels(peerResolutions, isLocal, videoType) {\n        let peerPixelsSum = 0;\n        let peerCount = 0;\n        const myID = this._conference.myUserId();\n\n        for (const peerID of Object.keys(peerResolutions)) {\n            if (isLocal ? peerID === myID : peerID !== myID) {\n                const participant\n                    = isLocal\n                        ? null\n                        : this._conference.getParticipantById(peerID);\n                const videosResolution = peerResolutions[peerID];\n\n                // Do not continue without participant for non local peerID\n                if ((isLocal || participant) && videosResolution) {\n                    const peerAvgPixels = this._calculatePeerAvgVideoPixels(\n                        videosResolution, participant, videoType);\n\n                    if (!isNaN(peerAvgPixels)) {\n                        peerPixelsSum += peerAvgPixels;\n                        peerCount += 1;\n                    }\n                }\n            }\n        }\n\n        return peerPixelsSum / peerCount;\n    }\n\n    /**\n     * Calculate average pixels for either remote or local participant\n     * @param {object} videos maps resolution per video SSRC\n     * @param {JitsiParticipant|null} participant remote participant or\n     * <tt>null</tt> for local video pixels calculation.\n     * @param {VideoType} videoType the type of the video for which an average\n     * will be calculated.\n     * @return {number|NaN} average video pixels of all participant's videos or\n     * <tt>NaN</tt> if currently not available\n     * @private\n     */\n    _calculatePeerAvgVideoPixels(videos, participant, videoType) {\n        let ssrcs = Object.keys(videos).map(ssrc => Number(ssrc));\n        let videoTracks = null;\n\n        // NOTE that this method is supposed to be called for the stats\n        // received from the current peerconnection.\n        const tpc = this._conference.getActivePeerConnection();\n\n        if (participant) {\n            videoTracks = participant.getTracksByMediaType(MediaType.VIDEO);\n            if (videoTracks) {\n                ssrcs\n                    = ssrcs.filter(\n                        ssrc => videoTracks.find(\n                            track =>\n                                !track.isMuted()\n                                    && track.getSSRC() === ssrc\n                                    && track.videoType === videoType));\n            }\n        } else {\n            videoTracks = this._conference.getLocalTracks(MediaType.VIDEO);\n            ssrcs\n                = ssrcs.filter(\n                    ssrc => videoTracks.find(\n                        track =>\n                            !track.isMuted()\n                                && tpc.getLocalSSRC(track) === ssrc\n                                && track.videoType === videoType));\n        }\n\n        let peerPixelsSum = 0;\n        let peerSsrcCount = 0;\n\n        for (const ssrc of ssrcs) {\n            const peerSsrcPixels\n                = Number(videos[ssrc].height) * Number(videos[ssrc].width);\n\n            // FPS is reported as 0 for users with no video\n            if (!isNaN(peerSsrcPixels) && peerSsrcPixels > 0) {\n                peerPixelsSum += peerSsrcPixels;\n                peerSsrcCount += 1;\n            }\n        }\n\n        return peerPixelsSum / peerSsrcCount;\n    }\n\n\n    /**\n     * Calculates average FPS for the report\n     * @param {go figure} frameRate\n     * @param {boolean} isLocal if the average is to be calculated for the local\n     * video or <tt>false</tt> if for remote videos.\n     * @param {VideoType} videoType\n     * @return {number|NaN} average FPS or <tt>NaN</tt> if there are no samples.\n     * @private\n     */\n    _calculateAvgVideoFps(frameRate, isLocal, videoType) {\n        let peerFpsSum = 0;\n        let peerCount = 0;\n        const myID = this._conference.myUserId();\n\n        for (const peerID of Object.keys(frameRate)) {\n            if (isLocal ? peerID === myID : peerID !== myID) {\n                const participant\n                    = isLocal\n                        ? null : this._conference.getParticipantById(peerID);\n                const videosFps = frameRate[peerID];\n\n                // Do not continue without participant for non local peerID\n                if ((isLocal || participant) && videosFps) {\n                    const peerAvgFPS\n                        = this._calculatePeerAvgVideoFps(\n                            videosFps, participant, videoType);\n\n                    if (!isNaN(peerAvgFPS)) {\n                        peerFpsSum += peerAvgFPS;\n                        peerCount += 1;\n                    }\n                }\n            }\n        }\n\n        return peerFpsSum / peerCount;\n    }\n\n    /**\n     * Calculate average FPS for either remote or local participant\n     * @param {object} videos maps FPS per video SSRC\n     * @param {JitsiParticipant|null} participant remote participant or\n     * <tt>null</tt> for local FPS calculation.\n     * @param {VideoType} videoType the type of the video for which an average\n     * will be calculated.\n     * @return {number|NaN} average FPS of all participant's videos or\n     * <tt>NaN</tt> if currently not available\n     * @private\n     */\n    _calculatePeerAvgVideoFps(videos, participant, videoType) {\n        let ssrcs = Object.keys(videos).map(ssrc => Number(ssrc));\n        let videoTracks = null;\n\n        // NOTE that this method is supposed to be called for the stats\n        // received from the current peerconnection.\n        const tpc = this._conference.getActivePeerConnection();\n\n        if (participant) {\n            videoTracks = participant.getTracksByMediaType(MediaType.VIDEO);\n            if (videoTracks) {\n                ssrcs\n                    = ssrcs.filter(\n                        ssrc => videoTracks.find(\n                            track => !track.isMuted()\n                                && track.getSSRC() === ssrc\n                                && track.videoType === videoType));\n            }\n        } else {\n            videoTracks = this._conference.getLocalTracks(MediaType.VIDEO);\n            ssrcs\n                = ssrcs.filter(\n                    ssrc => videoTracks.find(\n                        track => !track.isMuted()\n                            && tpc.getLocalSSRC(track) === ssrc\n                            && track.videoType === videoType));\n        }\n\n        let peerFpsSum = 0;\n        let peerSsrcCount = 0;\n\n        for (const ssrc of ssrcs) {\n            const peerSsrcFps = Number(videos[ssrc]);\n\n            // FPS is reported as 0 for users with no video\n            if (!isNaN(peerSsrcFps) && peerSsrcFps > 0) {\n                peerFpsSum += peerSsrcFps;\n                peerSsrcCount += 1;\n            }\n        }\n\n        return peerFpsSum / peerSsrcCount;\n    }\n\n    /**\n     * Resets the stats related to JVB connection. Must not be called when in\n     * P2P mode, because then the {@link AverageStatReport} instances are\n     * tracking P2P stats. Note that this should never happen unless something\n     * is wrong with the P2P and JVB121 events.\n     * @private\n     */\n    _resetAvgJvbStats() {\n        this._resetAvgStats();\n        this.jvbStatsMonitor._resetAvgStats();\n    }\n\n    /**\n     * Reset cache of all averages and {@link _sampleIdx}.\n     * @private\n     */\n    _resetAvgStats() {\n        this._avgAudioBitrateUp.reset();\n        this._avgAudioBitrateDown.reset();\n\n        this._avgVideoBitrateUp.reset();\n        this._avgVideoBitrateDown.reset();\n\n        this._avgBandwidthUp.reset();\n        this._avgBandwidthDown.reset();\n\n        this._avgPacketLossUp.reset();\n        this._avgPacketLossDown.reset();\n        this._avgPacketLossTotal.reset();\n\n        this._avgRemoteFPS.reset();\n        this._avgRemoteScreenFPS.reset();\n        this._avgLocalFPS.reset();\n        this._avgLocalScreenFPS.reset();\n\n        this._avgRemoteCameraPixels.reset();\n        this._avgRemoteScreenPixels.reset();\n        this._avgLocalCameraPixels.reset();\n        this._avgLocalScreenPixels.reset();\n\n        this._avgCQ.reset();\n\n        this._sampleIdx = 0;\n    }\n\n    /**\n     * Unregisters all event listeners and stops working.\n     */\n    dispose() {\n        this._conference.off(\n            ConferenceEvents.P2P_STATUS,\n            this._onP2PStatusChanged);\n        this._conference.off(\n            ConnectionQualityEvents.LOCAL_STATS_UPDATED,\n            this._onLocalStatsUpdated);\n        this._conference.off(\n            ConferenceEvents.JVB121_STATUS,\n            this._onJvb121StatusChanged);\n        this.jvbStatsMonitor.dispose();\n        this.p2pStatsMonitor.dispose();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/AvgRTPStatsReporter.js","/* Copyright @ 2016 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Logger = require('./Logger.js');\n\n/**\n * Creates new <tt>LogCollector</tt>. Class implements <tt>LoggerTransport</tt>\n * and thus can be added as global transport in order to capture all the logs.\n *\n * It captures subsequent log lines created whenever <tt>Logger</tt> logs\n * a message and stores them in a queue in order to batch log entries. There are\n * time and size limit constraints which determine how often batch entries are\n * stored. Whenever one of these limits is exceeded the <tt>LogCollector</tt>\n * will use the <tt>logStorage</tt> object given as an argument to save\n * the batch log entry.\n *\n * @param {Object} logStorage an object which allows to store the logs collected\n * @param {function(string|object[])} logStorage.storeLogs a method called when\n * this <tt>LogCollector</tt> requests log entry storage. The method's argument\n * is an array which can contain <tt>string</tt>s and <tt>object</tt>s. If given\n * item is an object it means that it's an aggregated message. That is a message\n * which is the same as the previous one and it's representation has\n * the following format:\n * {\n *   {string} text: 'the text of some duplicated message'\n *   {number} count: 3 // how many times the message appeared in a row\n * }\n * If a message \"B\" after an aggregated message \"A\" is different, then it breaks\n * the sequence of \"A\". Which means that even if the next message \"C\" is\n * the same as \"A\" it will start a new aggregated message \"C\".\n * @param {function()} logStorage.isReady a method which should return\n * a <tt>boolean</tt> to tell the collector that it's ready to store. During the\n * time storage is not ready log batches will be cached and stored on the next\n * occasion (flush or interval timeout).\n *\n * @param {Object} options the <tt>LogCollector</tt> configuration options.\n * @param {number} options.maxEntryLength the size limit for a single log entry\n * to be stored. The <tt>LogCollector</tt> will push the entry as soon as it\n * reaches or exceeds this limit given that <tt>logStorage.isReady</tt>\n * returns <tt>true</tt>. Otherwise the log entry will be cached until the log\n * storage becomes ready. Note that the \"is ready\" condition is checked every\n * <tt>options.storeInterval</tt> milliseconds.\n * @param {number} options.storeInterval how often the logs should be stored in\n * case <tt>maxEntryLength</tt> was not exceeded.\n * @param {boolean} options.stringifyObjects indicates whether or not object\n * arguments should be \"stringified\" with <tt>JSON.stringify</tt> when a log\n * message is composed. Note that objects logged on the error log level are\n * always stringified.\n *\n * @constructor\n */\nfunction LogCollector(logStorage, options) {\n    this.logStorage = logStorage;\n    this.stringifyObjects\n        = options && options.stringifyObjects\n            ? options.stringifyObjects : false;\n    this.storeInterval\n        = options && options.storeInterval\n            ? options.storeInterval: 30000;\n    this.maxEntryLength\n        = options && options.maxEntryLength\n            ? options.maxEntryLength : 10000;\n    // Bind the log method for each level to the corresponding method name\n    // in order to implement \"global log transport\" object.\n    Object.keys(Logger.levels).forEach(\n    function (logLevel) {\n        var methodName = Logger.levels[logLevel];\n        this[methodName] = function (logLevel) {\n            this._log.apply(this, arguments);\n        }.bind(this, logLevel);\n    }.bind(this));\n    /**\n     * The ID of store logs interval if one is currently scheduled or\n     * <tt>null</tt> otherwise.\n     * @type {number|null}\n     */\n    this.storeLogsIntervalID = null;\n    /**\n     * The log messages that are to be batched into log entry when\n     * {@link LogCollector._flush} method is called.\n     * @type {string[]}\n     */\n    this.queue = [];\n    /**\n     * The total length of all messages currently stored in the {@link queue}.\n     * @type {number}\n     */\n    this.totalLen = 0;\n    /**\n     * An array used to temporarily store log batches, before the storage gets\n     * ready.\n     * @type {string[]}\n     */\n    this.outputCache = [];\n}\n\n/**\n * Method called inside of {@link formatLogMessage} in order to covert an\n * <tt>Object</tt> argument to string. The conversion will happen when either\n * 'stringifyObjects' option is enabled or on the {@link Logger.levels.ERROR}\n * log level. The default implementation uses <tt>JSON.stringify</tt> and\n * returns \"[object with circular refs?]\" instead of an object if it fails.\n *\n * @param {object} someObject the <tt>object</tt> to be stringified.\n *\n * @return {string} the result of <tt>JSON.stringify</tt> or\n * \"[object with circular refs?]\" if any error occurs during \"stringification\".\n *\n * @protected\n */\nLogCollector.prototype.stringify = function (someObject) {\n    try {\n        return JSON.stringify(someObject);\n    } catch (error) {\n        return \"[object with circular refs?]\";\n    }\n};\n\n/**\n * Formats log entry for the given logging level and arguments passed to the\n * <tt>Logger</tt>'s log method. The first argument is log level and the next\n * arguments have to be captured using JS built-in 'arguments' variable.\n *\n * @param {Logger.levels} logLevel provides the logging level of the message to\n * be logged.\n *\n * @return {string|null} a non-empty string representation of the log entry\n * crafted from the log arguments. If the return value is <tt>null</tt> then\n * the message wil be discarded by this <tt>LogCollector</tt>.\n *\n * @protected\n */\nLogCollector.prototype.formatLogMessage\n= function (logLevel/*, arg1, arg2, arg3... */) {\n    var msg = '';\n    for (var i = 1, len = arguments.length; i < len; i++) {\n        var arg = arguments[i];\n        // objects logged on error level are always converted to JSON\n        if ((this.stringifyObjects || logLevel === Logger.levels.ERROR)\n            && typeof arg === 'object') {\n            arg = this.stringify(arg);\n        }\n        msg += arg;\n        if (i != len - 1) {\n            msg += ' ';\n        }\n    }\n    return msg.length ? msg : null;\n};\n\n/**\n * The log method bound to each of the logging levels in order to implement\n * \"global log transport\" object.\n *\n * @private\n */\nLogCollector.prototype._log = function() {\n\n    // var logLevel = arguments[0]; first argument is the log level\n    var msg = this.formatLogMessage.apply(this, arguments);\n    if (msg) {\n        // The same as the previous message aggregation logic\n        var prevMessage\n            = this.queue.length ? this.queue[this.queue.length -1] : undefined;\n        // NOTE that typeof undefined is 'undefined'\n        var prevMessageText\n            = typeof prevMessage === 'object' ? prevMessage.text : prevMessage;\n        // Is it the same as the previous one ?\n        if (prevMessageText == msg) {\n            if (typeof prevMessage === 'object') {\n                prevMessage.count += 1;\n            } else {\n                this.queue[this.queue.length-1] = {\n                    text: msg,\n                    count: 2\n                }\n            }\n        } else {\n            this.queue.push(msg);\n            this.totalLen += msg.length;\n        }\n    }\n\n    if (this.totalLen >= this.maxEntryLength) {\n        this._flush(true /* force */, true /* reschedule */);\n    }\n};\n\n/**\n * Starts periodical \"store logs\" task which will be triggered at the interval\n * specified in the constructor options.\n */\nLogCollector.prototype.start = function () {\n    this._reschedulePublishInterval();\n};\n\n/**\n * Reschedules the periodical \"store logs\" task which will store the next batch\n * log entry in the storage.\n * @private\n */\nLogCollector.prototype._reschedulePublishInterval = function () {\n    if (this.storeLogsIntervalID) {\n        window.clearTimeout(this.storeLogsIntervalID);\n        this.storeLogsIntervalID = null;\n    }\n    // It's actually a timeout, because it is rescheduled on every flush\n    this.storeLogsIntervalID\n        = window.setTimeout(\n            this._flush.bind(\n                this, false /* do not force */, true /* reschedule */),\n            this.storeInterval);\n};\n\n/**\n * Call this method to flush the log entry buffer and store it in the log\n * storage immediately (given that the storage is ready).\n */\nLogCollector.prototype.flush = function() {\n    this._flush(\n        false /* do not force, as it will not be stored anyway */,\n        true /* reschedule next update */ )\n};\n\n/**\n * Stores the next batch log entry in the log storage.\n * @param {boolean} force enforce current logs batch to be stored or cached if\n * there is anything to be logged, but the storage is not ready yet. One of\n * legitimate reasons to force is when the logs length exceeds size limit which\n * could result in truncation.\n * @param {boolean} reschedule <tt>true</tt> if the next periodic task should be\n * scheduled after the log entry is stored. <tt>false</tt> will end the periodic\n * task cycle.\n * @private\n */\nLogCollector.prototype._flush = function(force, reschedule) {\n    // Publish only if there's anything to be logged\n    if (this.totalLen > 0 && (this.logStorage.isReady() || force)) {\n        //FIXME avoid truncating\n        // right now we don't care if the message size is \"slightly\" exceeded\n        if (this.logStorage.isReady()) {\n            // Sends all cached logs\n            if (this.outputCache.length) {\n                this.outputCache.forEach(\n                    function (cachedQueue) {\n                        this.logStorage.storeLogs(cachedQueue);\n                    }.bind(this)\n                );\n                // Clear the cache\n                this.outputCache = [];\n            }\n            // Send current batch\n            this.logStorage.storeLogs(this.queue);\n        } else {\n            this.outputCache.push(this.queue);\n        }\n\n        this.queue = [];\n        this.totalLen = 0;\n    }\n\n    if (reschedule) {\n        this._reschedulePublishInterval();\n    }\n};\n\n/**\n * Stops the periodical \"store logs\" task and immediately stores any pending\n * log entries as a batch.\n */\nLogCollector.prototype.stop = function() {\n    // Flush and stop publishing logs\n    this._flush(false /* do not force */, false /* do not reschedule */);\n};\n\nmodule.exports = LogCollector;\n\n\n\n// WEBPACK FOOTER //\n// ../jitsi-meet-logger/lib/LogCollector.js","import { getLogger } from 'jitsi-meet-logger';\nimport { BrowserDetection } from 'js-utils';\n\nconst logger = getLogger(__filename);\n\n// TODO: Move this code to js-utils.\n\n// NOTE: Now we are extending BrowserDetection in order to preserve\n// RTCBrowserType interface but maybe it worth exporting BrowserCapabilities\n// and BrowserDetection as separate objects in future.\n\n/**\n * Implements browser capabilities for lib-jitsi-meet.\n */\nexport default class BrowserCapabilities extends BrowserDetection {\n    /**\n     * Creates new BrowserCapabilities instance.\n     */\n    constructor() {\n        super();\n        logger.info(\n            `This appears to be ${this.getName()}, ver: ${this.getVersion()}`);\n    }\n\n    /**\n     * Tells whether or not the <tt>MediaStream/tt> is removed from\n     * the <tt>PeerConnection</tt> and disposed on video mute (in order to turn\n     * off the camera device).\n     * @return {boolean} <tt>true</tt> if the current browser supports this\n     * strategy or <tt>false</tt> otherwise.\n     */\n    doesVideoMuteByStreamRemove() {\n        return !(\n            this.isFirefox()\n            || this.isEdge()\n            || this.isSafariWithWebrtc()\n        );\n    }\n\n    /**\n     * Check whether or not the current browser support peer to peer connections\n     * @return {boolean} <tt>true</tt> if p2p is supported or <tt>false</tt>\n     * otherwise.\n     */\n    supportsP2P() {\n        return !this.isEdge();\n    }\n\n    /**\n     * Checks if current browser is a Safari and a version of Safari that\n     * supports native webrtc.\n     *\n     * @returns {boolean}\n     */\n    isSafariWithWebrtc() {\n        return this.isSafari()\n            && !this.isVersionLessThan('11');\n    }\n\n    /**\n     * Checks if Temasys RTC plugin is used.\n     * @returns {boolean}\n     */\n    isTemasysPluginUsed() {\n        // Temasys do not support Microsoft Edge:\n        // http://support.temasys.com.sg/support/solutions/articles/\n        // 5000654345-can-the-temasys-webrtc-plugin-be-used-with-microsoft-edge-\n        return (\n            (this.isSafari()\n                && !this.isSafariWithWebrtc())\n            || (this.isIExplorer()\n                && this.isVersionLessThan('12'))\n        );\n    }\n\n    /**\n     * Checks if the current browser triggers 'onmute'/'onunmute' events when\n     * user's connection is interrupted and the video stops playback.\n     * @returns {*|boolean} 'true' if the event is supported or 'false'\n     * otherwise.\n     */\n    supportsVideoMuteOnConnInterrupted() {\n        return this.isChrome() || this.isElectron();\n    }\n\n    /**\n     * Checks if the current browser reports upload and download bandwidth\n     * statistics.\n     * @return {boolean}\n     */\n    supportsBandwidthStatistics() {\n        // FIXME bandwidth stats are currently not implemented for FF on our\n        // side, but not sure if not possible ?\n        return !this.isFirefox() && !this.isEdge()\n            && !this.isSafariWithWebrtc();\n    }\n\n    /**\n     * Checks if the current browser supports WebRTC datachannels.\n     * @return {boolean}\n     */\n    supportsDataChannels() {\n        // NOTE: Edge does not yet implement DataChannel.\n        return !this.isEdge();\n    }\n\n\n    /**\n     * Checks if the current browser supports the MediaStream constructor as\n     * defined by https://www.w3.org/TR/mediacapture-streams/#constructors. In\n     * cases where there is no support, it maybe be necessary to get audio\n     * and video in two distinct GUM calls.\n     * @return {boolean}\n     */\n    supportsMediaStreamConstructor() {\n        return !this.isReactNative()\n            && !this.isTemasysPluginUsed();\n    }\n\n    /**\n     * Checks if the current browser reports round trip time statistics for\n     * the ICE candidate pair.\n     * @return {boolean}\n     */\n    supportsRTTStatistics() {\n        // Firefox does not seem to report RTT for ICE candidate pair:\n        // eslint-disable-next-line max-len\n        // https://www.w3.org/TR/webrtc-stats/#dom-rtcicecandidatepairstats-currentroundtriptime\n        // It does report mozRTT for RTP streams, but at the time of this\n        // writing it's value does not make sense most of the time\n        // (is reported as 1):\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1241066\n        // For Chrome and others we rely on 'googRtt'.\n        return !this.isFirefox() && !this.isEdge();\n    }\n\n    /**\n     * Checks whether the browser supports RTPSender.\n     *\n     * @returns {boolean}\n     */\n    supportsRtpSender() {\n        return this.isFirefox();\n    }\n\n    /**\n     * Checks whether the browser supports RTX.\n     *\n     * @returns {boolean}\n     */\n    supportsRtx() {\n        return !this.isFirefox();\n    }\n\n    /**\n     * Whether jitsi-meet supports simulcast on the current browser.\n     * @returns {boolean}\n     */\n    supportsSimulcast() {\n        return this.isChrome()\n            || this.isFirefox()\n            || this.isElectron()\n            || this.isNWJS()\n            || this.isReactNative();\n    }\n\n    /**\n     * Returns whether or not the current browser can support capturing video,\n     * be it camera or desktop, and displaying received video.\n     *\n     * @returns {boolean}\n     */\n    supportsVideo() {\n        // FIXME: Check if we can use supportsVideoOut and supportsVideoIn. I\n        // leave the old implementation here in order not to brake something.\n\n        // Currently Safari using webrtc/adapter does not support video due in\n        // part to Safari only supporting H264 and the bridge sending VP8.\n        return !this.isSafariWithWebrtc();\n    }\n\n    /**\n     * Checks if the browser uses plan B.\n     *\n     * @returns {boolean}\n     */\n    usesPlanB() {\n        return !this.usesUnifiedPlan();\n    }\n\n    /**\n     * Checks if the browser uses unified plan.\n     *\n     * @returns {boolean}\n     */\n    usesUnifiedPlan() {\n        return this.isFirefox();\n    }\n\n    /**\n     * Returns whether or not the current browser should be using the new\n     * getUserMedia flow, which utilizes the adapter shim. This method should\n     * be temporary and used while migrating all browsers to use adapter and\n     * the new getUserMedia.\n     *\n     * @returns {boolean}\n     */\n    usesNewGumFlow() {\n        return (this.isChrome()\n                && !this.isVersionLessThan('61'))\n            || this.isFirefox()\n            || this.isSafariWithWebrtc();\n\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/browser/BrowserCapabilities.js","/*!\n * Bowser - a browser detector\n * https://github.com/ded/bowser\n * MIT License | (c) Dustin Diaz 2015\n */\n\n!function (root, name, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(name, definition)\n  else root[name] = definition()\n}(this, 'bowser', function () {\n  /**\n    * See useragents.js for examples of navigator.userAgent\n    */\n\n  var t = true\n\n  function detect(ua) {\n\n    function getFirstMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[1]) || '';\n    }\n\n    function getSecondMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[2]) || '';\n    }\n\n    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n      , likeAndroid = /like android/i.test(ua)\n      , android = !likeAndroid && /android/i.test(ua)\n      , nexusMobile = /nexus\\s*[0-6]\\s*/i.test(ua)\n      , nexusTablet = !nexusMobile && /nexus\\s*[0-9]+/i.test(ua)\n      , chromeos = /CrOS/.test(ua)\n      , silk = /silk/i.test(ua)\n      , sailfish = /sailfish/i.test(ua)\n      , tizen = /tizen/i.test(ua)\n      , webos = /(web|hpw)os/i.test(ua)\n      , windowsphone = /windows phone/i.test(ua)\n      , samsungBrowser = /SamsungBrowser/i.test(ua)\n      , windows = !windowsphone && /windows/i.test(ua)\n      , mac = !iosdevice && !silk && /macintosh/i.test(ua)\n      , linux = !android && !sailfish && !tizen && !webos && /linux/i.test(ua)\n      , edgeVersion = getSecondMatch(/edg([ea]|ios)\\/(\\d+(\\.\\d+)?)/i)\n      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n      , tablet = /tablet/i.test(ua) && !/tablet pc/i.test(ua)\n      , mobile = !tablet && /[^-]mobi/i.test(ua)\n      , xbox = /xbox/i.test(ua)\n      , result\n\n    if (/opera/i.test(ua)) {\n      //  an old Opera\n      result = {\n        name: 'Opera'\n      , opera: t\n      , version: versionIdentifier || getFirstMatch(/(?:opera|opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/opr\\/|opios/i.test(ua)) {\n      // a new Opera\n      result = {\n        name: 'Opera'\n        , opera: t\n        , version: getFirstMatch(/(?:opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/SamsungBrowser/i.test(ua)) {\n      result = {\n        name: 'Samsung Internet for Android'\n        , samsungBrowser: t\n        , version: versionIdentifier || getFirstMatch(/(?:SamsungBrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/coast/i.test(ua)) {\n      result = {\n        name: 'Opera Coast'\n        , coast: t\n        , version: versionIdentifier || getFirstMatch(/(?:coast)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/yabrowser/i.test(ua)) {\n      result = {\n        name: 'Yandex Browser'\n      , yandexbrowser: t\n      , version: versionIdentifier || getFirstMatch(/(?:yabrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/ucbrowser/i.test(ua)) {\n      result = {\n          name: 'UC Browser'\n        , ucbrowser: t\n        , version: getFirstMatch(/(?:ucbrowser)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/mxios/i.test(ua)) {\n      result = {\n        name: 'Maxthon'\n        , maxthon: t\n        , version: getFirstMatch(/(?:mxios)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/epiphany/i.test(ua)) {\n      result = {\n        name: 'Epiphany'\n        , epiphany: t\n        , version: getFirstMatch(/(?:epiphany)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/puffin/i.test(ua)) {\n      result = {\n        name: 'Puffin'\n        , puffin: t\n        , version: getFirstMatch(/(?:puffin)[\\s\\/](\\d+(?:\\.\\d+)?)/i)\n      }\n    }\n    else if (/sleipnir/i.test(ua)) {\n      result = {\n        name: 'Sleipnir'\n        , sleipnir: t\n        , version: getFirstMatch(/(?:sleipnir)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/k-meleon/i.test(ua)) {\n      result = {\n        name: 'K-Meleon'\n        , kMeleon: t\n        , version: getFirstMatch(/(?:k-meleon)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (windowsphone) {\n      result = {\n        name: 'Windows Phone'\n      , osname: 'Windows Phone'\n      , windowsphone: t\n      }\n      if (edgeVersion) {\n        result.msedge = t\n        result.version = edgeVersion\n      }\n      else {\n        result.msie = t\n        result.version = getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/msie|trident/i.test(ua)) {\n      result = {\n        name: 'Internet Explorer'\n      , msie: t\n      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (chromeos) {\n      result = {\n        name: 'Chrome'\n      , osname: 'Chrome OS'\n      , chromeos: t\n      , chromeBook: t\n      , chrome: t\n      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/edg([ea]|ios)/i.test(ua)) {\n      result = {\n        name: 'Microsoft Edge'\n      , msedge: t\n      , version: edgeVersion\n      }\n    }\n    else if (/vivaldi/i.test(ua)) {\n      result = {\n        name: 'Vivaldi'\n        , vivaldi: t\n        , version: getFirstMatch(/vivaldi\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (sailfish) {\n      result = {\n        name: 'Sailfish'\n      , osname: 'Sailfish OS'\n      , sailfish: t\n      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/seamonkey\\//i.test(ua)) {\n      result = {\n        name: 'SeaMonkey'\n      , seamonkey: t\n      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/firefox|iceweasel|fxios/i.test(ua)) {\n      result = {\n        name: 'Firefox'\n      , firefox: t\n      , version: getFirstMatch(/(?:firefox|iceweasel|fxios)[ \\/](\\d+(\\.\\d+)?)/i)\n      }\n      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n        result.firefoxos = t\n        result.osname = 'Firefox OS'\n      }\n    }\n    else if (silk) {\n      result =  {\n        name: 'Amazon Silk'\n      , silk: t\n      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/phantom/i.test(ua)) {\n      result = {\n        name: 'PhantomJS'\n      , phantom: t\n      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/slimerjs/i.test(ua)) {\n      result = {\n        name: 'SlimerJS'\n        , slimer: t\n        , version: getFirstMatch(/slimerjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n      result = {\n        name: 'BlackBerry'\n      , osname: 'BlackBerry OS'\n      , blackberry: t\n      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (webos) {\n      result = {\n        name: 'WebOS'\n      , osname: 'WebOS'\n      , webos: t\n      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n      };\n      /touchpad\\//i.test(ua) && (result.touchpad = t)\n    }\n    else if (/bada/i.test(ua)) {\n      result = {\n        name: 'Bada'\n      , osname: 'Bada'\n      , bada: t\n      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n      };\n    }\n    else if (tizen) {\n      result = {\n        name: 'Tizen'\n      , osname: 'Tizen'\n      , tizen: t\n      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      };\n    }\n    else if (/qupzilla/i.test(ua)) {\n      result = {\n        name: 'QupZilla'\n        , qupzilla: t\n        , version: getFirstMatch(/(?:qupzilla)[\\s\\/](\\d+(?:\\.\\d+)+)/i) || versionIdentifier\n      }\n    }\n    else if (/chromium/i.test(ua)) {\n      result = {\n        name: 'Chromium'\n        , chromium: t\n        , version: getFirstMatch(/(?:chromium)[\\s\\/](\\d+(?:\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/chrome|crios|crmo/i.test(ua)) {\n      result = {\n        name: 'Chrome'\n        , chrome: t\n        , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (android) {\n      result = {\n        name: 'Android'\n        , version: versionIdentifier\n      }\n    }\n    else if (/safari|applewebkit/i.test(ua)) {\n      result = {\n        name: 'Safari'\n      , safari: t\n      }\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if (iosdevice) {\n      result = {\n        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n      }\n      // WTF: version is not part of user agent in web apps\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if(/googlebot/i.test(ua)) {\n      result = {\n        name: 'Googlebot'\n      , googlebot: t\n      , version: getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i) || versionIdentifier\n      }\n    }\n    else {\n      result = {\n        name: getFirstMatch(/^(.*)\\/(.*) /),\n        version: getSecondMatch(/^(.*)\\/(.*) /)\n     };\n   }\n\n    // set webkit or gecko flag for browsers based on these engines\n    if (!result.msedge && /(apple)?webkit/i.test(ua)) {\n      if (/(apple)?webkit\\/537\\.36/i.test(ua)) {\n        result.name = result.name || \"Blink\"\n        result.blink = t\n      } else {\n        result.name = result.name || \"Webkit\"\n        result.webkit = t\n      }\n      if (!result.version && versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    } else if (!result.opera && /gecko\\//i.test(ua)) {\n      result.name = result.name || \"Gecko\"\n      result.gecko = t\n      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n    }\n\n    // set OS flags for platforms that have multiple browsers\n    if (!result.windowsphone && (android || result.silk)) {\n      result.android = t\n      result.osname = 'Android'\n    } else if (!result.windowsphone && iosdevice) {\n      result[iosdevice] = t\n      result.ios = t\n      result.osname = 'iOS'\n    } else if (mac) {\n      result.mac = t\n      result.osname = 'macOS'\n    } else if (xbox) {\n      result.xbox = t\n      result.osname = 'Xbox'\n    } else if (windows) {\n      result.windows = t\n      result.osname = 'Windows'\n    } else if (linux) {\n      result.linux = t\n      result.osname = 'Linux'\n    }\n\n    function getWindowsVersion (s) {\n      switch (s) {\n        case 'NT': return 'NT'\n        case 'XP': return 'XP'\n        case 'NT 5.0': return '2000'\n        case 'NT 5.1': return 'XP'\n        case 'NT 5.2': return '2003'\n        case 'NT 6.0': return 'Vista'\n        case 'NT 6.1': return '7'\n        case 'NT 6.2': return '8'\n        case 'NT 6.3': return '8.1'\n        case 'NT 10.0': return '10'\n        default: return undefined\n      }\n    }\n\n    // OS version extraction\n    var osVersion = '';\n    if (result.windows) {\n      osVersion = getWindowsVersion(getFirstMatch(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i))\n    } else if (result.windowsphone) {\n      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n    } else if (result.mac) {\n      osVersion = getFirstMatch(/Mac OS X (\\d+([_\\.\\s]\\d+)*)/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (iosdevice) {\n      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (android) {\n      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n    } else if (result.webos) {\n      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.blackberry) {\n      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n    } else if (result.bada) {\n      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.tizen) {\n      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n    }\n    if (osVersion) {\n      result.osversion = osVersion;\n    }\n\n    // device type extraction\n    var osMajorVersion = !result.windows && osVersion.split('.')[0];\n    if (\n         tablet\n      || nexusTablet\n      || iosdevice == 'ipad'\n      || (android && (osMajorVersion == 3 || (osMajorVersion >= 4 && !mobile)))\n      || result.silk\n    ) {\n      result.tablet = t\n    } else if (\n         mobile\n      || iosdevice == 'iphone'\n      || iosdevice == 'ipod'\n      || android\n      || nexusMobile\n      || result.blackberry\n      || result.webos\n      || result.bada\n    ) {\n      result.mobile = t\n    }\n\n    // Graded Browser Support\n    // http://developer.yahoo.com/yui/articles/gbs\n    if (result.msedge ||\n        (result.msie && result.version >= 10) ||\n        (result.yandexbrowser && result.version >= 15) ||\n\t\t    (result.vivaldi && result.version >= 1.0) ||\n        (result.chrome && result.version >= 20) ||\n        (result.samsungBrowser && result.version >= 4) ||\n        (result.firefox && result.version >= 20.0) ||\n        (result.safari && result.version >= 6) ||\n        (result.opera && result.version >= 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n        (result.blackberry && result.version >= 10.1)\n        || (result.chromium && result.version >= 20)\n        ) {\n      result.a = t;\n    }\n    else if ((result.msie && result.version < 10) ||\n        (result.chrome && result.version < 20) ||\n        (result.firefox && result.version < 20.0) ||\n        (result.safari && result.version < 6) ||\n        (result.opera && result.version < 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n        || (result.chromium && result.version < 20)\n        ) {\n      result.c = t\n    } else result.x = t\n\n    return result\n  }\n\n  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent || '' : '')\n\n  bowser.test = function (browserList) {\n    for (var i = 0; i < browserList.length; ++i) {\n      var browserItem = browserList[i];\n      if (typeof browserItem=== 'string') {\n        if (browserItem in bowser) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Get version precisions count\n   *\n   * @example\n   *   getVersionPrecision(\"1.10.3\") // 3\n   *\n   * @param  {string} version\n   * @return {number}\n   */\n  function getVersionPrecision(version) {\n    return version.split(\".\").length;\n  }\n\n  /**\n   * Array::map polyfill\n   *\n   * @param  {Array} arr\n   * @param  {Function} iterator\n   * @return {Array}\n   */\n  function map(arr, iterator) {\n    var result = [], i;\n    if (Array.prototype.map) {\n      return Array.prototype.map.call(arr, iterator);\n    }\n    for (i = 0; i < arr.length; i++) {\n      result.push(iterator(arr[i]));\n    }\n    return result;\n  }\n\n  /**\n   * Calculate browser version weight\n   *\n   * @example\n   *   compareVersions(['1.10.2.1',  '1.8.2.1.90'])    // 1\n   *   compareVersions(['1.010.2.1', '1.09.2.1.90']);  // 1\n   *   compareVersions(['1.10.2.1',  '1.10.2.1']);     // 0\n   *   compareVersions(['1.10.2.1',  '1.0800.2']);     // -1\n   *\n   * @param  {Array<String>} versions versions to compare\n   * @return {Number} comparison result\n   */\n  function compareVersions(versions) {\n    // 1) get common precision for both versions, for example for \"10.0\" and \"9\" it should be 2\n    var precision = Math.max(getVersionPrecision(versions[0]), getVersionPrecision(versions[1]));\n    var chunks = map(versions, function (version) {\n      var delta = precision - getVersionPrecision(version);\n\n      // 2) \"9\" -> \"9.0\" (for precision = 2)\n      version = version + new Array(delta + 1).join(\".0\");\n\n      // 3) \"9.0\" -> [\"000000000\"\", \"000000009\"]\n      return map(version.split(\".\"), function (chunk) {\n        return new Array(20 - chunk.length).join(\"0\") + chunk;\n      }).reverse();\n    });\n\n    // iterate in reverse order by reversed chunks array\n    while (--precision >= 0) {\n      // 4) compare: \"000000009\" > \"000000010\" = false (but \"9\" > \"10\" = true)\n      if (chunks[0][precision] > chunks[1][precision]) {\n        return 1;\n      }\n      else if (chunks[0][precision] === chunks[1][precision]) {\n        if (precision === 0) {\n          // all version chunks are same\n          return 0;\n        }\n      }\n      else {\n        return -1;\n      }\n    }\n  }\n\n  /**\n   * Check if browser is unsupported\n   *\n   * @example\n   *   bowser.isUnsupportedBrowser({\n   *     msie: \"10\",\n   *     firefox: \"23\",\n   *     chrome: \"29\",\n   *     safari: \"5.1\",\n   *     opera: \"16\",\n   *     phantom: \"534\"\n   *   });\n   *\n   * @param  {Object}  minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function isUnsupportedBrowser(minVersions, strictMode, ua) {\n    var _bowser = bowser;\n\n    // make strictMode param optional with ua param usage\n    if (typeof strictMode === 'string') {\n      ua = strictMode;\n      strictMode = void(0);\n    }\n\n    if (strictMode === void(0)) {\n      strictMode = false;\n    }\n    if (ua) {\n      _bowser = detect(ua);\n    }\n\n    var version = \"\" + _bowser.version;\n    for (var browser in minVersions) {\n      if (minVersions.hasOwnProperty(browser)) {\n        if (_bowser[browser]) {\n          if (typeof minVersions[browser] !== 'string') {\n            throw new Error('Browser version in the minVersion map should be a string: ' + browser + ': ' + String(minVersions));\n          }\n\n          // browser version and min supported version.\n          return compareVersions([version, minVersions[browser]]) < 0;\n        }\n      }\n    }\n\n    return strictMode; // not found\n  }\n\n  /**\n   * Check if browser is supported\n   *\n   * @param  {Object} minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function check(minVersions, strictMode, ua) {\n    return !isUnsupportedBrowser(minVersions, strictMode, ua);\n  }\n\n  bowser.isUnsupportedBrowser = isUnsupportedBrowser;\n  bowser.compareVersions = compareVersions;\n  bowser.check = check;\n\n  /*\n   * Set our detect method to the main bowser object so we can\n   * reuse it to test other user agents.\n   * This is needed to implement future tests.\n   */\n  bowser._detect = detect;\n\n  /*\n   * Set our detect public method to the main bowser object\n   * This is needed to implement bowser in server side\n   */\n  bowser.detect = detect;\n  return bowser\n});\n\n\n\n// WEBPACK FOOTER //\n// ../js-utils/node_modules/bowser/src/bowser.js","module.exports = function() {\r\n\tthrow new Error(\"define cannot be used indirect\");\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../webpack/buildin/amd-define.js\n// module id = 70\n// module chunks = 0","import {\n    TYPE_OPERATIONAL,\n    TYPE_PAGE,\n    TYPE_TRACK,\n    TYPE_UI\n} from '../../service/statistics/AnalyticsEvents';\nimport { getLogger } from 'jitsi-meet-logger';\nimport browser from '../browser';\nimport Settings from '../settings/Settings';\n\nconst MAX_CACHE_SIZE = 100;\n\n// eslist-disable-line no-undef\nconst logger = getLogger(__filename);\n\n/**\n * This class provides an API to lib-jitsi-meet and its users for sending\n * analytics events. It serves as a bridge to different backend implementations\n * (\"analytics handlers\") and a cache for events attempted to be sent before\n * the analytics handlers were enabled.\n *\n * The API is designed to be an easy replacement for the previous version of\n * this adapter, and is meant to be extended with more convenience methods.\n *\n *\n * The API calls are translated to objects with the following structure, which\n * are then passed to the sendEvent(event) function of the underlying handlers:\n *\n * {\n *    type,\n *\n *    action,\n *    actionSubject,\n *    actionSubjectId,\n *    attributes,\n *    categories,\n *    containerId,\n *    containerType,\n *    name,\n *    objectId,\n *    objectType,\n *    source,\n *    tags\n * }\n *\n * The 'type' is one of 'operational', 'page', 'track' or 'ui', and some of the\n * other properties are considered required according to the type.\n *\n * For events with type 'page', the required properties are: name.\n *\n * For events with type 'operational' and 'ui', the required properties are:\n * action, actionSubject, source\n *\n * For events with type 'page', the required properties are:\n * action, actionSubject, source, containerType, containerId, objectType,\n * objectId\n */\nclass AnalyticsAdapter {\n    /**\n     * Creates new AnalyticsAdapter instance.\n     */\n    constructor() {\n        /**\n         * Whether this AnalyticsAdapter has been disposed of or not. Once this\n         * is set to true, the AnalyticsAdapter is disabled and does not accept\n         * any more events, and it can not be re-enabled.\n         * @type {boolean}\n         */\n        this.disposed = false;\n\n        /**\n         * The set of handlers to which events will be sent.\n         * @type {Set<any>}\n         */\n        this.analyticsHandlers = new Set();\n\n        /**\n         * The cache of events which are not sent yet. The cache is enabled\n         * while this field is truthy, and disabled otherwise.\n         * @type {Array}\n         */\n        this.cache = [];\n\n        /**\n         * Map of properties that will be added to every event. Note that the\n         * keys will be prefixed with \"permanent.\".\n         */\n        this.permanentProperties = {};\n\n        /**\n         * The name of the conference that this AnalyticsAdapter is associated\n         * with.\n         * @type {null}\n         */\n        this.conferenceName = '';\n\n        this.addPermanentProperties({\n            'callstats_name': Settings.callStatsUserName,\n            'user_agent': navigator.userAgent,\n            'browser_name': browser.getName()\n        });\n    }\n\n    /**\n     * Dispose analytics. Clears all handlers.\n     */\n    dispose() {\n        logger.warn('Disposing of analytics adapter.');\n        this.setAnalyticsHandlers([]);\n        this.disposed = true;\n    }\n\n    /**\n     * Sets the handlers that are going to be used to send analytics. Sends any\n     * cached events.\n     * @param {Array} handlers the handlers\n     */\n    setAnalyticsHandlers(handlers) {\n        if (this.disposed) {\n            return;\n        }\n\n        this.analyticsHandlers = new Set(handlers);\n\n        // Note that we disable the cache even if the set of handlers is empty.\n        const cache = this.cache;\n\n        this.cache = null;\n        if (cache) {\n            cache.forEach(event => this._sendEvent(event));\n        }\n    }\n\n    /**\n     * Adds a set of permanent properties to this this AnalyticsAdapter.\n     * Permanent properties will be added as \"attributes\" to events sent to\n     * the underlying \"analytics handlers\", and their keys will be prefixed\n     * by \"permanent_\", i.e. adding a permanent property {key: \"value\"} will\n     * result in {\"permanent_key\": \"value\"} object to be added to the\n     * \"attributes\" field of events.\n     *\n     * @param {Object} properties the properties to add\n     */\n    addPermanentProperties(properties) {\n        for (const property in properties) {\n            if (properties.hasOwnProperty(property)) {\n                this.permanentProperties[`permanent_${property}`]\n                    = properties[property];\n            }\n        }\n    }\n\n    /**\n     * Sets the name of the conference that this AnalyticsAdapter is associated\n     * with.\n     * @param name the name to set.\n     */\n    setConferenceName(name) {\n        this.conferenceName = name;\n        this.addPermanentProperties({ 'conference_name': name });\n    }\n\n    /**\n     * Sends an event with a given name and given properties. The first\n     * parameter is either a string or an object. If it is a string, it is used\n     * as the event name and the second parameter is used at the attributes to\n     * attach to the event. If it is an object, it represents the whole event,\n     * including any desired attributes, and the second parameter is ignored.\n     *\n     * @param {String|Object} eventName either a string to be used as the name\n     * of the event, or an event object. If an event object is passed, the\n     * properties parameters is ignored.\n     * @param {Object} properties the properties/attributes to attach to the\n     * event, if eventName is a string.\n     */\n    sendEvent(eventName, properties = {}) {\n        if (this.disposed) {\n            logger.warn('Not sending an event, disposed.');\n\n            return;\n        }\n\n        let event = null;\n\n        if (typeof eventName === 'string') {\n            event = {\n                type: TYPE_OPERATIONAL,\n                action: eventName,\n                actionSubject: eventName,\n                source: eventName,\n                attributes: properties\n            };\n        } else if (typeof eventName === 'object') {\n            event = eventName;\n        }\n\n        if (!this._verifyRequiredFields(event)) {\n            logger.error(\n                `Dropping a mis-formatted event: ${JSON.stringify(event)}`);\n\n            return;\n        }\n\n        this._sendEvent(event);\n    }\n\n    /**\n     * Checks whether an event has all of the required fields set, and tries\n     * to fill in some of the missing fields with reasonable default values.\n     * Returns true if after this operation the event has all of the required\n     * fields set, and false otherwise (if some of the required fields were not\n     * set and the attempt to fill them in with a default failed).\n     *\n     * @param event the event object.\n     * @return {boolean} true if the event (after the call to this function)\n     * contains all of the required fields, and false otherwise.\n     * @private\n     */\n    _verifyRequiredFields(event) {\n        if (!event) {\n            return false;\n        }\n\n        if (!event.type) {\n            event.type = TYPE_OPERATIONAL;\n        }\n\n        const type = event.type;\n\n        if (type !== TYPE_OPERATIONAL && type !== TYPE_PAGE\n            && type !== TYPE_UI && type !== TYPE_TRACK) {\n            logger.error(`Unknown event type: ${type}`);\n\n            return false;\n        }\n\n        if (type === TYPE_PAGE) {\n            return Boolean(event.name);\n        }\n\n        // Try to set some reasonable default values in case some of the\n        // parameters required by the handler API are missing.\n        event.action = event.action || event.name || event.actionSubject;\n        event.actionSubject = event.actionSubject || event.name || event.action;\n        event.source = event.source || event.name || event.action\n            || event.actionSubject;\n\n        if (!event.action || !event.actionSubject || !event.source) {\n            logger.error(\n                'Required field missing (action, actionSubject or source)');\n\n            return false;\n        }\n\n        // Track events have additional required fields.\n        if (type === TYPE_TRACK) {\n            event.objectType = event.objectType || 'generic-object-type';\n            event.containerType = event.containerType || 'conference';\n            if (event.containerType === 'conference' && !event.containerId) {\n                event.containerId = this.conferenceName;\n            }\n\n\n            if (!event.objectType || !event.objectId\n                || !event.containerType || !event.containerId) {\n                logger.error(\n                    'Required field missing (containerId, containerType, '\n                        + 'objectId or objectType)');\n\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * Saves an event to the cache, if the cache is enabled.\n     * @param event the event to save.\n     * @returns {boolean} true if the event was saved, and false otherwise (i.e.\n     * if the cache was disabled).\n     * @private\n     */\n    _maybeCacheEvent(event) {\n        if (this.cache) {\n            this.cache.push(event);\n\n            // We limit the size of the cache, in case the user fails to ever\n            // set the analytics handlers.\n            if (this.cache.length > MAX_CACHE_SIZE) {\n                this.cache.splice(0, 1);\n            }\n\n            return true;\n        }\n\n        return false;\n\n    }\n\n    /**\n     *\n     * @param event\n     * @private\n     */\n    _sendEvent(event) {\n        if (this._maybeCacheEvent(event)) {\n            // The event was consumed by the cache.\n        } else {\n            // We append the permanent properties at the time we send the event,\n            // not at the time we receive it.\n            this._appendPermanentProperties(event);\n\n            for (const handler of this.analyticsHandlers) {\n                try {\n                    handler.sendEvent(event);\n                } catch (e) {\n                    logger.warn(`Error sending analytics event: ${e}`);\n                }\n            }\n        }\n    }\n\n    /**\n     * Extends an event object with the configured permanent properties.\n     * @param event the event to extend with permanent properties.\n     * @private\n     */\n    _appendPermanentProperties(event) {\n        if (!event.attributes) {\n            event.attributes = {};\n        }\n\n        event.attributes\n            = Object.assign(event.attributes, this.permanentProperties);\n    }\n\n}\n\nexport default new AnalyticsAdapter();\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/AnalyticsAdapter.js","const RandomUtil = require('./RandomUtil');\n\n/**\n * from faker.js - Copyright (c) 2014-2015 Matthew Bergman & Marak Squires\n * MIT License\n * http://github.com/marak/faker.js/\n *\n * @const\n */\nconst names = [\n    'Aaliyah', 'Aaron', 'Abagail', 'Abbey', 'Abbie', 'Abbigail', 'Abby',\n    'Abdiel', 'Abdul', 'Abdullah', 'Abe', 'Abel', 'Abelardo', 'Abigail',\n    'Abigale', 'Abigayle', 'Abner', 'Abraham', 'Ada', 'Adah', 'Adalberto',\n    'Adaline', 'Adam', 'Adan', 'Addie', 'Addison', 'Adela', 'Adelbert', 'Adele',\n    'Adelia', 'Adeline', 'Adell', 'Adella', 'Adelle', 'Aditya', 'Adolf',\n    'Adolfo', 'Adolph', 'Adolphus', 'Adonis', 'Adrain', 'Adrian', 'Adriana',\n    'Adrianna', 'Adriel', 'Adrien', 'Adrienne', 'Afton', 'Aglae', 'Agnes',\n    'Agustin', 'Agustina', 'Ahmad', 'Ahmed', 'Aida', 'Aidan', 'Aiden', 'Aileen',\n    'Aisha', 'Aiyana', 'Akeem', 'Al', 'Alaina', 'Alan', 'Alana', 'Alanis',\n    'Alanna', 'Alayna', 'Alba', 'Albert', 'Alberta', 'Albertha', 'Alberto',\n    'Albin', 'Albina', 'Alda', 'Alden', 'Alec', 'Aleen', 'Alejandra',\n    'Alejandrin', 'Alek', 'Alena', 'Alene', 'Alessandra', 'Alessandro',\n    'Alessia', 'Aletha', 'Alex', 'Alexa', 'Alexander', 'Alexandra', 'Alexandre',\n    'Alexandrea', 'Alexandria', 'Alexandrine', 'Alexandro', 'Alexane',\n    'Alexanne', 'Alexie', 'Alexis', 'Alexys', 'Alexzander', 'Alf', 'Alfonso',\n    'Alfonzo', 'Alford', 'Alfred', 'Alfreda', 'Alfredo', 'Ali', 'Alia', 'Alice',\n    'Alicia', 'Alisa', 'Alisha', 'Alison', 'Alivia', 'Aliya', 'Aliyah', 'Aliza',\n    'Alize', 'Allan', 'Allen', 'Allene', 'Allie', 'Allison', 'Ally', 'Alphonso',\n    'Alta', 'Althea', 'Alva', 'Alvah', 'Alvena', 'Alvera', 'Alverta', 'Alvina',\n    'Alvis', 'Alyce', 'Alycia', 'Alysa', 'Alysha', 'Alyson', 'Alysson',\n    'Amalia', 'Amanda', 'Amani', 'Amara', 'Amari', 'Amaya', 'Amber', 'Ambrose',\n    'Amelia', 'Amelie', 'Amely', 'America', 'Americo', 'Amie', 'Amina', 'Amir',\n    'Amira', 'Amiya', 'Amos', 'Amparo', 'Amy', 'Amya', 'Ana', 'Anabel',\n    'Anabelle', 'Anahi', 'Anais', 'Anastacio', 'Anastasia', 'Anderson', 'Andre',\n    'Andreane', 'Andreanne', 'Andres', 'Andrew', 'Andy', 'Angel', 'Angela',\n    'Angelica', 'Angelina', 'Angeline', 'Angelita', 'Angelo', 'Angie', 'Angus',\n    'Anibal', 'Anika', 'Anissa', 'Anita', 'Aniya', 'Aniyah', 'Anjali', 'Anna',\n    'Annabel', 'Annabell', 'Annabelle', 'Annalise', 'Annamae', 'Annamarie',\n    'Anne', 'Annetta', 'Annette', 'Annie', 'Ansel', 'Ansley', 'Anthony',\n    'Antoinette', 'Antone', 'Antonetta', 'Antonette', 'Antonia', 'Antonietta',\n    'Antonina', 'Antonio', 'Antwan', 'Antwon', 'Anya', 'April', 'Ara',\n    'Araceli', 'Aracely', 'Arch', 'Archibald', 'Ardella', 'Arden', 'Ardith',\n    'Arely', 'Ari', 'Ariane', 'Arianna', 'Aric', 'Ariel', 'Arielle', 'Arjun',\n    'Arlene', 'Arlie', 'Arlo', 'Armand', 'Armando', 'Armani', 'Arnaldo', 'Arne',\n    'Arno', 'Arnold', 'Arnoldo', 'Arnulfo', 'Aron', 'Art', 'Arthur', 'Arturo',\n    'Arvel', 'Arvid', 'Arvilla', 'Aryanna', 'Asa', 'Asha', 'Ashlee', 'Ashleigh',\n    'Ashley', 'Ashly', 'Ashlynn', 'Ashton', 'Ashtyn', 'Asia', 'Assunta',\n    'Astrid', 'Athena', 'Aubree', 'Aubrey', 'Audie', 'Audra', 'Audreanne',\n    'Audrey', 'August', 'Augusta', 'Augustine', 'Augustus', 'Aurelia',\n    'Aurelie', 'Aurelio', 'Aurore', 'Austen', 'Austin', 'Austyn', 'Autumn',\n    'Ava', 'Avery', 'Avis', 'Axel', 'Ayana', 'Ayden', 'Ayla', 'Aylin', 'Baby',\n    'Bailee', 'Bailey', 'Barbara', 'Barney', 'Baron', 'Barrett', 'Barry',\n    'Bart', 'Bartholome', 'Barton', 'Baylee', 'Beatrice', 'Beau', 'Beaulah',\n    'Bell', 'Bella', 'Belle', 'Ben', 'Benedict', 'Benjamin', 'Bennett',\n    'Bennie', 'Benny', 'Benton', 'Berenice', 'Bernadette', 'Bernadine',\n    'Bernard', 'Bernardo', 'Berneice', 'Bernhard', 'Bernice', 'Bernie',\n    'Berniece', 'Bernita', 'Berry', 'Bert', 'Berta', 'Bertha', 'Bertram',\n    'Bertrand', 'Beryl', 'Bessie', 'Beth', 'Bethany', 'Bethel', 'Betsy',\n    'Bette', 'Bettie', 'Betty', 'Bettye', 'Beulah', 'Beverly', 'Bianka', 'Bill',\n    'Billie', 'Billy', 'Birdie', 'Blair', 'Blaise', 'Blake', 'Blanca',\n    'Blanche', 'Blaze', 'Bo', 'Bobbie', 'Bobby', 'Bonita', 'Bonnie', 'Boris',\n    'Boyd', 'Brad', 'Braden', 'Bradford', 'Bradley', 'Bradly', 'Brady',\n    'Braeden', 'Brain', 'Brandi', 'Brando', 'Brandon', 'Brandt', 'Brandy',\n    'Brandyn', 'Brannon', 'Branson', 'Brant', 'Braulio', 'Braxton', 'Brayan',\n    'Breana', 'Breanna', 'Breanne', 'Brenda', 'Brendan', 'Brenden', 'Brendon',\n    'Brenna', 'Brennan', 'Brennon', 'Brent', 'Bret', 'Brett', 'Bria', 'Brian',\n    'Briana', 'Brianne', 'Brice', 'Bridget', 'Bridgette', 'Bridie', 'Brielle',\n    'Brigitte', 'Brionna', 'Brisa', 'Britney', 'Brittany', 'Brock', 'Broderick',\n    'Brody', 'Brook', 'Brooke', 'Brooklyn', 'Brooks', 'Brown', 'Bruce',\n    'Bryana', 'Bryce', 'Brycen', 'Bryon', 'Buck', 'Bud', 'Buddy', 'Buford',\n    'Bulah', 'Burdette', 'Burley', 'Burnice', 'Buster', 'Cade', 'Caden',\n    'Caesar', 'Caitlyn', 'Cale', 'Caleb', 'Caleigh', 'Cali', 'Calista',\n    'Callie', 'Camden', 'Cameron', 'Camila', 'Camilla', 'Camille', 'Camren',\n    'Camron', 'Camryn', 'Camylle', 'Candace', 'Candelario', 'Candice',\n    'Candida', 'Candido', 'Cara', 'Carey', 'Carissa', 'Carlee', 'Carleton',\n    'Carley', 'Carli', 'Carlie', 'Carlo', 'Carlos', 'Carlotta', 'Carmel',\n    'Carmela', 'Carmella', 'Carmelo', 'Carmen', 'Carmine', 'Carol', 'Carolanne',\n    'Carole', 'Carolina', 'Caroline', 'Carolyn', 'Carolyne', 'Carrie',\n    'Carroll', 'Carson', 'Carter', 'Cary', 'Casandra', 'Casey', 'Casimer',\n    'Casimir', 'Casper', 'Cassandra', 'Cassandre', 'Cassidy', 'Cassie',\n    'Catalina', 'Caterina', 'Catharine', 'Catherine', 'Cathrine', 'Cathryn',\n    'Cathy', 'Cayla', 'Ceasar', 'Cecelia', 'Cecil', 'Cecile', 'Cecilia',\n    'Cedrick', 'Celestine', 'Celestino', 'Celia', 'Celine', 'Cesar', 'Chad',\n    'Chadd', 'Chadrick', 'Chaim', 'Chance', 'Chandler', 'Chanel', 'Chanelle',\n    'Charity', 'Charlene', 'Charles', 'Charley', 'Charlie', 'Charlotte',\n    'Chase', 'Chasity', 'Chauncey', 'Chaya', 'Chaz', 'Chelsea', 'Chelsey',\n    'Chelsie', 'Chesley', 'Chester', 'Chet', 'Cheyanne', 'Cheyenne', 'Chloe',\n    'Chris', 'Christ', 'Christa', 'Christelle', 'Christian', 'Christiana',\n    'Christina', 'Christine', 'Christop', 'Christophe', 'Christopher',\n    'Christy', 'Chyna', 'Ciara', 'Cicero', 'Cielo', 'Cierra', 'Cindy',\n    'Citlalli', 'Clair', 'Claire', 'Clara', 'Clarabelle', 'Clare', 'Clarissa',\n    'Clark', 'Claud', 'Claude', 'Claudia', 'Claudie', 'Claudine', 'Clay',\n    'Clemens', 'Clement', 'Clementina', 'Clementine', 'Clemmie', 'Cleo',\n    'Cleora', 'Cleta', 'Cletus', 'Cleve', 'Cleveland', 'Clifford', 'Clifton',\n    'Clint', 'Clinton', 'Clotilde', 'Clovis', 'Cloyd', 'Clyde', 'Coby', 'Cody',\n    'Colby', 'Cole', 'Coleman', 'Colin', 'Colleen', 'Collin', 'Colt', 'Colten',\n    'Colton', 'Columbus', 'Concepcion', 'Conner', 'Connie', 'Connor', 'Conor',\n    'Conrad', 'Constance', 'Constantin', 'Consuelo', 'Cooper', 'Cora',\n    'Coralie', 'Corbin', 'Cordelia', 'Cordell', 'Cordia', 'Cordie', 'Corene',\n    'Corine', 'Cornelius', 'Cornell', 'Corrine', 'Cortez', 'Cortney', 'Cory',\n    'Coty', 'Courtney', 'Coy', 'Craig', 'Crawford', 'Creola', 'Cristal',\n    'Cristian', 'Cristina', 'Cristobal', 'Cristopher', 'Cruz', 'Crystal',\n    'Crystel', 'Cullen', 'Curt', 'Curtis', 'Cydney', 'Cynthia', 'Cyril',\n    'Cyrus', 'Dagmar', 'Dahlia', 'Daija', 'Daisha', 'Daisy', 'Dakota', 'Dale',\n    'Dallas', 'Dallin', 'Dalton', 'Damaris', 'Dameon', 'Damian', 'Damien',\n    'Damion', 'Damon', 'Dan', 'Dana', 'Dandre', 'Dane', 'D\\'angelo', 'Dangelo',\n    'Danial', 'Daniela', 'Daniella', 'Danielle', 'Danika', 'Dannie', 'Danny',\n    'Dante', 'Danyka', 'Daphne', 'Daphnee', 'Daphney', 'Darby', 'Daren',\n    'Darian', 'Dariana', 'Darien', 'Dario', 'Darion', 'Darius', 'Darlene',\n    'Daron', 'Darrel', 'Darrell', 'Darren', 'Darrick', 'Darrin', 'Darrion',\n    'Darron', 'Darryl', 'Darwin', 'Daryl', 'Dashawn', 'Dasia', 'Dave', 'David',\n    'Davin', 'Davion', 'Davon', 'Davonte', 'Dawn', 'Dawson', 'Dax', 'Dayana',\n    'Dayna', 'Dayne', 'Dayton', 'Dean', 'Deangelo', 'Deanna', 'Deborah',\n    'Declan', 'Dedric', 'Dedrick', 'Dee', 'Deion', 'Deja', 'Dejah', 'Dejon',\n    'Dejuan', 'Delaney', 'Delbert', 'Delfina', 'Delia', 'Delilah', 'Dell',\n    'Della', 'Delmer', 'Delores', 'Delpha', 'Delphia', 'Delphine', 'Delta',\n    'Demarco', 'Demarcus', 'Demario', 'Demetris', 'Demetrius', 'Demond', 'Dena',\n    'Denis', 'Dennis', 'Deon', 'Deondre', 'Deontae', 'Deonte', 'Dereck',\n    'Derek', 'Derick', 'Deron', 'Derrick', 'Deshaun', 'Deshawn', 'Desiree',\n    'Desmond', 'Dessie', 'Destany', 'Destin', 'Destinee', 'Destiney', 'Destini',\n    'Destiny', 'Devan', 'Devante', 'Deven', 'Devin', 'Devon', 'Devonte',\n    'Devyn', 'Dewayne', 'Dewitt', 'Dexter', 'Diamond', 'Diana', 'Dianna',\n    'Diego', 'Dillan', 'Dillon', 'Dimitri', 'Dina', 'Dino', 'Dion', 'Dixie',\n    'Dock', 'Dolly', 'Dolores', 'Domenic', 'Domenica', 'Domenick', 'Domenico',\n    'Domingo', 'Dominic', 'Dominique', 'Don', 'Donald', 'Donato', 'Donavon',\n    'Donna', 'Donnell', 'Donnie', 'Donny', 'Dora', 'Dorcas', 'Dorian', 'Doris',\n    'Dorothea', 'Dorothy', 'Dorris', 'Dortha', 'Dorthy', 'Doug', 'Douglas',\n    'Dovie', 'Doyle', 'Drake', 'Drew', 'Duane', 'Dudley', 'Dulce', 'Duncan',\n    'Durward', 'Dustin', 'Dusty', 'Dwight', 'Dylan', 'Earl', 'Earlene',\n    'Earline', 'Earnest', 'Earnestine', 'Easter', 'Easton', 'Ebba', 'Ebony',\n    'Ed', 'Eda', 'Edd', 'Eddie', 'Eden', 'Edgar', 'Edgardo', 'Edison', 'Edmond',\n    'Edmund', 'Edna', 'Eduardo', 'Edward', 'Edwardo', 'Edwin', 'Edwina',\n    'Edyth', 'Edythe', 'Effie', 'Efrain', 'Efren', 'Eileen', 'Einar', 'Eino',\n    'Eladio', 'Elaina', 'Elbert', 'Elda', 'Eldon', 'Eldora', 'Eldred',\n    'Eldridge', 'Eleanora', 'Eleanore', 'Eleazar', 'Electa', 'Elena', 'Elenor',\n    'Elenora', 'Eleonore', 'Elfrieda', 'Eli', 'Elian', 'Eliane', 'Elias',\n    'Eliezer', 'Elijah', 'Elinor', 'Elinore', 'Elisa', 'Elisabeth', 'Elise',\n    'Eliseo', 'Elisha', 'Elissa', 'Eliza', 'Elizabeth', 'Ella', 'Ellen',\n    'Ellie', 'Elliot', 'Elliott', 'Ellis', 'Ellsworth', 'Elmer', 'Elmira',\n    'Elmo', 'Elmore', 'Elna', 'Elnora', 'Elody', 'Eloisa', 'Eloise', 'Elouise',\n    'Eloy', 'Elroy', 'Elsa', 'Else', 'Elsie', 'Elta', 'Elton', 'Elva', 'Elvera',\n    'Elvie', 'Elvis', 'Elwin', 'Elwyn', 'Elyse', 'Elyssa', 'Elza', 'Emanuel',\n    'Emelia', 'Emelie', 'Emely', 'Emerald', 'Emerson', 'Emery', 'Emie', 'Emil',\n    'Emile', 'Emilia', 'Emiliano', 'Emilie', 'Emilio', 'Emily', 'Emma',\n    'Emmalee', 'Emmanuel', 'Emmanuelle', 'Emmet', 'Emmett', 'Emmie', 'Emmitt',\n    'Emmy', 'Emory', 'Ena', 'Enid', 'Enoch', 'Enola', 'Enos', 'Enrico',\n    'Enrique', 'Ephraim', 'Era', 'Eriberto', 'Eric', 'Erica', 'Erich', 'Erick',\n    'Ericka', 'Erik', 'Erika', 'Erin', 'Erling', 'Erna', 'Ernest', 'Ernestina',\n    'Ernestine', 'Ernesto', 'Ernie', 'Ervin', 'Erwin', 'Eryn', 'Esmeralda',\n    'Esperanza', 'Esta', 'Esteban', 'Estefania', 'Estel', 'Estell', 'Estella',\n    'Estelle', 'Estevan', 'Esther', 'Estrella', 'Etha', 'Ethan', 'Ethel',\n    'Ethelyn', 'Ethyl', 'Ettie', 'Eudora', 'Eugene', 'Eugenia', 'Eula', 'Eulah',\n    'Eulalia', 'Euna', 'Eunice', 'Eusebio', 'Eva', 'Evalyn', 'Evan',\n    'Evangeline', 'Evans', 'Eve', 'Eveline', 'Evelyn', 'Everardo', 'Everett',\n    'Everette', 'Evert', 'Evie', 'Ewald', 'Ewell', 'Ezekiel', 'Ezequiel',\n    'Ezra', 'Fabian', 'Fabiola', 'Fae', 'Fannie', 'Fanny', 'Fatima', 'Faustino',\n    'Fausto', 'Favian', 'Fay', 'Faye', 'Federico', 'Felicia', 'Felicita',\n    'Felicity', 'Felipa', 'Felipe', 'Felix', 'Felton', 'Fermin', 'Fern',\n    'Fernando', 'Ferne', 'Fidel', 'Filiberto', 'Filomena', 'Finn', 'Fiona',\n    'Flavie', 'Flavio', 'Fleta', 'Fletcher', 'Flo', 'Florence', 'Florencio',\n    'Florian', 'Florida', 'Florine', 'Flossie', 'Floy', 'Floyd', 'Ford',\n    'Forest', 'Forrest', 'Foster', 'Frances', 'Francesca', 'Francesco',\n    'Francis', 'Francisca', 'Francisco', 'Franco', 'Frank', 'Frankie', 'Franz',\n    'Fred', 'Freda', 'Freddie', 'Freddy', 'Frederic', 'Frederick', 'Frederik',\n    'Frederique', 'Fredrick', 'Fredy', 'Freeda', 'Freeman', 'Freida', 'Frida',\n    'Frieda', 'Friedrich', 'Fritz', 'Furman', 'Gabe', 'Gabriel', 'Gabriella',\n    'Gabrielle', 'Gaetano', 'Gage', 'Gail', 'Gardner', 'Garett', 'Garfield',\n    'Garland', 'Garnet', 'Garnett', 'Garret', 'Garrett', 'Garrick', 'Garrison',\n    'Garry', 'Garth', 'Gaston', 'Gavin', 'Gay', 'Gayle', 'Gaylord', 'Gene',\n    'General', 'Genesis', 'Genevieve', 'Gennaro', 'Genoveva', 'Geo', 'Geoffrey',\n    'George', 'Georgette', 'Georgiana', 'Georgianna', 'Geovanni', 'Geovanny',\n    'Geovany', 'Gerald', 'Geraldine', 'Gerard', 'Gerardo', 'Gerda', 'Gerhard',\n    'Germaine', 'German', 'Gerry', 'Gerson', 'Gertrude', 'Gia', 'Gianni',\n    'Gideon', 'Gilbert', 'Gilberto', 'Gilda', 'Giles', 'Gillian', 'Gina',\n    'Gino', 'Giovani', 'Giovanna', 'Giovanni', 'Giovanny', 'Gisselle',\n    'Giuseppe', 'Gladyce', 'Gladys', 'Glen', 'Glenda', 'Glenna', 'Glennie',\n    'Gloria', 'Godfrey', 'Golda', 'Golden', 'Gonzalo', 'Gordon', 'Grace',\n    'Gracie', 'Graciela', 'Grady', 'Graham', 'Grant', 'Granville', 'Grayce',\n    'Grayson', 'Green', 'Greg', 'Gregg', 'Gregoria', 'Gregorio', 'Gregory',\n    'Greta', 'Gretchen', 'Greyson', 'Griffin', 'Grover', 'Guadalupe', 'Gudrun',\n    'Guido', 'Guillermo', 'Guiseppe', 'Gunnar', 'Gunner', 'Gus', 'Gussie',\n    'Gust', 'Gustave', 'Guy', 'Gwen', 'Gwendolyn', 'Hadley', 'Hailee', 'Hailey',\n    'Hailie', 'Hal', 'Haleigh', 'Haley', 'Halie', 'Halle', 'Hallie', 'Hank',\n    'Hanna', 'Hannah', 'Hans', 'Hardy', 'Harley', 'Harmon', 'Harmony', 'Harold',\n    'Harrison', 'Harry', 'Harvey', 'Haskell', 'Hassan', 'Hassie', 'Hattie',\n    'Haven', 'Hayden', 'Haylee', 'Hayley', 'Haylie', 'Hazel', 'Hazle', 'Heath',\n    'Heather', 'Heaven', 'Heber', 'Hector', 'Heidi', 'Helen', 'Helena',\n    'Helene', 'Helga', 'Hellen', 'Helmer', 'Heloise', 'Henderson', 'Henri',\n    'Henriette', 'Henry', 'Herbert', 'Herman', 'Hermann', 'Hermina', 'Herminia',\n    'Herminio', 'Hershel', 'Herta', 'Hertha', 'Hester', 'Hettie', 'Hilario',\n    'Hilbert', 'Hilda', 'Hildegard', 'Hillard', 'Hillary', 'Hilma', 'Hilton',\n    'Hipolito', 'Hiram', 'Hobart', 'Holden', 'Hollie', 'Hollis', 'Holly',\n    'Hope', 'Horace', 'Horacio', 'Hortense', 'Hosea', 'Houston', 'Howard',\n    'Howell', 'Hoyt', 'Hubert', 'Hudson', 'Hugh', 'Hulda', 'Humberto', 'Hunter',\n    'Hyman', 'Ian', 'Ibrahim', 'Icie', 'Ida', 'Idell', 'Idella', 'Ignacio',\n    'Ignatius', 'Ike', 'Ila', 'Ilene', 'Iliana', 'Ima', 'Imani', 'Imelda',\n    'Immanuel', 'Imogene', 'Ines', 'Irma', 'Irving', 'Irwin', 'Isaac', 'Isabel',\n    'Isabell', 'Isabella', 'Isabelle', 'Isac', 'Isadore', 'Isai', 'Isaiah',\n    'Isaias', 'Isidro', 'Ismael', 'Isobel', 'Isom', 'Israel', 'Issac', 'Itzel',\n    'Iva', 'Ivah', 'Ivory', 'Ivy', 'Izabella', 'Izaiah', 'Jabari', 'Jace',\n    'Jacey', 'Jacinthe', 'Jacinto', 'Jack', 'Jackeline', 'Jackie', 'Jacklyn',\n    'Jackson', 'Jacky', 'Jaclyn', 'Jacquelyn', 'Jacques', 'Jacynthe', 'Jada',\n    'Jade', 'Jaden', 'Jadon', 'Jadyn', 'Jaeden', 'Jaida', 'Jaiden', 'Jailyn',\n    'Jaime', 'Jairo', 'Jakayla', 'Jake', 'Jakob', 'Jaleel', 'Jalen', 'Jalon',\n    'Jalyn', 'Jamaal', 'Jamal', 'Jamar', 'Jamarcus', 'Jamel', 'Jameson',\n    'Jamey', 'Jamie', 'Jamil', 'Jamir', 'Jamison', 'Jammie', 'Jan', 'Jana',\n    'Janae', 'Jane', 'Janelle', 'Janessa', 'Janet', 'Janice', 'Janick', 'Janie',\n    'Janis', 'Janiya', 'Jannie', 'Jany', 'Jaquan', 'Jaquelin', 'Jaqueline',\n    'Jared', 'Jaren', 'Jarod', 'Jaron', 'Jarred', 'Jarrell', 'Jarret',\n    'Jarrett', 'Jarrod', 'Jarvis', 'Jasen', 'Jasmin', 'Jason', 'Jasper',\n    'Jaunita', 'Javier', 'Javon', 'Javonte', 'Jay', 'Jayce', 'Jaycee', 'Jayda',\n    'Jayde', 'Jayden', 'Jaydon', 'Jaylan', 'Jaylen', 'Jaylin', 'Jaylon',\n    'Jayme', 'Jayne', 'Jayson', 'Jazlyn', 'Jazmin', 'Jazmyn', 'Jazmyne', 'Jean',\n    'Jeanette', 'Jeanie', 'Jeanne', 'Jed', 'Jedediah', 'Jedidiah', 'Jeff',\n    'Jefferey', 'Jeffery', 'Jeffrey', 'Jeffry', 'Jena', 'Jenifer', 'Jennie',\n    'Jennifer', 'Jennings', 'Jennyfer', 'Jensen', 'Jerad', 'Jerald', 'Jeramie',\n    'Jeramy', 'Jerel', 'Jeremie', 'Jeremy', 'Jermain', 'Jermaine', 'Jermey',\n    'Jerod', 'Jerome', 'Jeromy', 'Jerrell', 'Jerrod', 'Jerrold', 'Jerry',\n    'Jess', 'Jesse', 'Jessica', 'Jessie', 'Jessika', 'Jessy', 'Jessyca',\n    'Jesus', 'Jett', 'Jettie', 'Jevon', 'Jewel', 'Jewell', 'Jillian', 'Jimmie',\n    'Jimmy', 'Jo', 'Joan', 'Joana', 'Joanie', 'Joanne', 'Joannie', 'Joanny',\n    'Joany', 'Joaquin', 'Jocelyn', 'Jodie', 'Jody', 'Joe', 'Joel', 'Joelle',\n    'Joesph', 'Joey', 'Johan', 'Johann', 'Johanna', 'Johathan', 'John',\n    'Johnathan', 'Johnathon', 'Johnnie', 'Johnny', 'Johnpaul', 'Johnson',\n    'Jolie', 'Jon', 'Jonas', 'Jonatan', 'Jonathan', 'Jonathon', 'Jordan',\n    'Jordane', 'Jordi', 'Jordon', 'Jordy', 'Jordyn', 'Jorge', 'Jose', 'Josefa',\n    'Josefina', 'Joseph', 'Josephine', 'Josh', 'Joshua', 'Joshuah', 'Josiah',\n    'Josiane', 'Josianne', 'Josie', 'Josue', 'Jovan', 'Jovani', 'Jovanny',\n    'Jovany', 'Joy', 'Joyce', 'Juana', 'Juanita', 'Judah', 'Judd', 'Jude',\n    'Judge', 'Judson', 'Judy', 'Jules', 'Julia', 'Julian', 'Juliana',\n    'Julianne', 'Julie', 'Julien', 'Juliet', 'Julio', 'Julius', 'June',\n    'Junior', 'Junius', 'Justen', 'Justice', 'Justina', 'Justine', 'Juston',\n    'Justus', 'Justyn', 'Juvenal', 'Juwan', 'Kacey', 'Kaci', 'Kacie', 'Kade',\n    'Kaden', 'Kadin', 'Kaela', 'Kaelyn', 'Kaia', 'Kailee', 'Kailey', 'Kailyn',\n    'Kaitlin', 'Kaitlyn', 'Kale', 'Kaleb', 'Kaleigh', 'Kaley', 'Kali', 'Kallie',\n    'Kameron', 'Kamille', 'Kamren', 'Kamron', 'Kamryn', 'Kane', 'Kara',\n    'Kareem', 'Karelle', 'Karen', 'Kari', 'Kariane', 'Karianne', 'Karina',\n    'Karine', 'Karl', 'Karlee', 'Karley', 'Karli', 'Karlie', 'Karolann',\n    'Karson', 'Kasandra', 'Kasey', 'Kassandra', 'Katarina', 'Katelin',\n    'Katelyn', 'Katelynn', 'Katharina', 'Katherine', 'Katheryn', 'Kathleen',\n    'Kathlyn', 'Kathryn', 'Kathryne', 'Katlyn', 'Katlynn', 'Katrina', 'Katrine',\n    'Kattie', 'Kavon', 'Kay', 'Kaya', 'Kaycee', 'Kayden', 'Kayla', 'Kaylah',\n    'Kaylee', 'Kayleigh', 'Kayley', 'Kayli', 'Kaylie', 'Kaylin', 'Keagan',\n    'Keanu', 'Keara', 'Keaton', 'Keegan', 'Keeley', 'Keely', 'Keenan', 'Keira',\n    'Keith', 'Kellen', 'Kelley', 'Kelli', 'Kellie', 'Kelly', 'Kelsi', 'Kelsie',\n    'Kelton', 'Kelvin', 'Ken', 'Kendall', 'Kendra', 'Kendrick', 'Kenna',\n    'Kennedi', 'Kennedy', 'Kenneth', 'Kennith', 'Kenny', 'Kenton', 'Kenya',\n    'Kenyatta', 'Kenyon', 'Keon', 'Keshaun', 'Keshawn', 'Keven', 'Kevin',\n    'Kevon', 'Keyon', 'Keyshawn', 'Khalid', 'Khalil', 'Kian', 'Kiana', 'Kianna',\n    'Kiara', 'Kiarra', 'Kiel', 'Kiera', 'Kieran', 'Kiley', 'Kim', 'Kimberly',\n    'King', 'Kip', 'Kira', 'Kirk', 'Kirsten', 'Kirstin', 'Kitty', 'Kobe',\n    'Koby', 'Kody', 'Kolby', 'Kole', 'Korbin', 'Korey', 'Kory', 'Kraig', 'Kris',\n    'Krista', 'Kristian', 'Kristin', 'Kristina', 'Kristofer', 'Kristoffer',\n    'Kristopher', 'Kristy', 'Krystal', 'Krystel', 'Krystina', 'Kurt', 'Kurtis',\n    'Kyla', 'Kyle', 'Kylee', 'Kyleigh', 'Kyler', 'Kylie', 'Kyra', 'Lacey',\n    'Lacy', 'Ladarius', 'Lafayette', 'Laila', 'Laisha', 'Lamar', 'Lambert',\n    'Lamont', 'Lance', 'Landen', 'Lane', 'Laney', 'Larissa', 'Laron', 'Larry',\n    'Larue', 'Laura', 'Laurel', 'Lauren', 'Laurence', 'Lauretta', 'Lauriane',\n    'Laurianne', 'Laurie', 'Laurine', 'Laury', 'Lauryn', 'Lavada', 'Lavern',\n    'Laverna', 'Laverne', 'Lavina', 'Lavinia', 'Lavon', 'Lavonne', 'Lawrence',\n    'Lawson', 'Layla', 'Layne', 'Lazaro', 'Lea', 'Leann', 'Leanna', 'Leanne',\n    'Leatha', 'Leda', 'Lee', 'Leif', 'Leila', 'Leilani', 'Lela', 'Lelah',\n    'Leland', 'Lelia', 'Lempi', 'Lemuel', 'Lenna', 'Lennie', 'Lenny', 'Lenora',\n    'Lenore', 'Leo', 'Leola', 'Leon', 'Leonard', 'Leonardo', 'Leone', 'Leonel',\n    'Leonie', 'Leonor', 'Leonora', 'Leopold', 'Leopoldo', 'Leora', 'Lera',\n    'Lesley', 'Leslie', 'Lesly', 'Lessie', 'Lester', 'Leta', 'Letha', 'Letitia',\n    'Levi', 'Lew', 'Lewis', 'Lexi', 'Lexie', 'Lexus', 'Lia', 'Liam', 'Liana',\n    'Libbie', 'Libby', 'Lila', 'Lilian', 'Liliana', 'Liliane', 'Lilla',\n    'Lillian', 'Lilliana', 'Lillie', 'Lilly', 'Lily', 'Lilyan', 'Lina',\n    'Lincoln', 'Linda', 'Lindsay', 'Lindsey', 'Linnea', 'Linnie', 'Linwood',\n    'Lionel', 'Lisa', 'Lisandro', 'Lisette', 'Litzy', 'Liza', 'Lizeth',\n    'Lizzie', 'Llewellyn', 'Lloyd', 'Logan', 'Lois', 'Lola', 'Lolita', 'Loma',\n    'Lon', 'London', 'Lonie', 'Lonnie', 'Lonny', 'Lonzo', 'Lora', 'Loraine',\n    'Loren', 'Lorena', 'Lorenz', 'Lorenza', 'Lorenzo', 'Lori', 'Lorine',\n    'Lorna', 'Lottie', 'Lou', 'Louie', 'Louisa', 'Lourdes', 'Louvenia',\n    'Lowell', 'Loy', 'Loyal', 'Loyce', 'Lucas', 'Luciano', 'Lucie', 'Lucienne',\n    'Lucile', 'Lucinda', 'Lucio', 'Lucious', 'Lucius', 'Lucy', 'Ludie',\n    'Ludwig', 'Lue', 'Luella', 'Luigi', 'Luis', 'Luisa', 'Lukas', 'Lula',\n    'Lulu', 'Luna', 'Lupe', 'Lura', 'Lurline', 'Luther', 'Luz', 'Lyda', 'Lydia',\n    'Lyla', 'Lynn', 'Lyric', 'Lysanne', 'Mabel', 'Mabelle', 'Mable', 'Mac',\n    'Macey', 'Maci', 'Macie', 'Mack', 'Mackenzie', 'Macy', 'Madaline',\n    'Madalyn', 'Maddison', 'Madeline', 'Madelyn', 'Madelynn', 'Madge', 'Madie',\n    'Madilyn', 'Madisen', 'Madison', 'Madisyn', 'Madonna', 'Madyson', 'Mae',\n    'Maegan', 'Maeve', 'Mafalda', 'Magali', 'Magdalen', 'Magdalena', 'Maggie',\n    'Magnolia', 'Magnus', 'Maia', 'Maida', 'Maiya', 'Major', 'Makayla',\n    'Makenna', 'Makenzie', 'Malachi', 'Malcolm', 'Malika', 'Malinda', 'Mallie',\n    'Mallory', 'Malvina', 'Mandy', 'Manley', 'Manuel', 'Manuela', 'Mara',\n    'Marc', 'Marcel', 'Marcelina', 'Marcelino', 'Marcella', 'Marcelle',\n    'Marcellus', 'Marcelo', 'Marcia', 'Marco', 'Marcos', 'Marcus', 'Margaret',\n    'Margarete', 'Margarett', 'Margaretta', 'Margarette', 'Margarita', 'Marge',\n    'Margie', 'Margot', 'Margret', 'Marguerite', 'Maria', 'Mariah', 'Mariam',\n    'Marian', 'Mariana', 'Mariane', 'Marianna', 'Marianne', 'Mariano',\n    'Maribel', 'Marie', 'Mariela', 'Marielle', 'Marietta', 'Marilie', 'Marilou',\n    'Marilyne', 'Marina', 'Mario', 'Marion', 'Marisa', 'Marisol', 'Maritza',\n    'Marjolaine', 'Marjorie', 'Marjory', 'Mark', 'Markus', 'Marlee', 'Marlen',\n    'Marlene', 'Marley', 'Marlin', 'Marlon', 'Marques', 'Marquis', 'Marquise',\n    'Marshall', 'Marta', 'Martin', 'Martina', 'Martine', 'Marty', 'Marvin',\n    'Mary', 'Maryam', 'Maryjane', 'Maryse', 'Mason', 'Mateo', 'Mathew',\n    'Mathias', 'Mathilde', 'Matilda', 'Matilde', 'Matt', 'Matteo', 'Mattie',\n    'Maud', 'Maude', 'Maudie', 'Maureen', 'Maurice', 'Mauricio', 'Maurine',\n    'Maverick', 'Mavis', 'Max', 'Maxie', 'Maxime', 'Maximilian', 'Maximillia',\n    'Maximillian', 'Maximo', 'Maximus', 'Maxine', 'Maxwell', 'May', 'Maya',\n    'Maybell', 'Maybelle', 'Maye', 'Maymie', 'Maynard', 'Mayra', 'Mazie',\n    'Mckayla', 'Mckenna', 'Mckenzie', 'Meagan', 'Meaghan', 'Meda', 'Megane',\n    'Meggie', 'Meghan', 'Mekhi', 'Melany', 'Melba', 'Melisa', 'Melissa',\n    'Mellie', 'Melody', 'Melvin', 'Melvina', 'Melyna', 'Melyssa', 'Mercedes',\n    'Meredith', 'Merl', 'Merle', 'Merlin', 'Merritt', 'Mertie', 'Mervin',\n    'Meta', 'Mia', 'Micaela', 'Micah', 'Michael', 'Michaela', 'Michale',\n    'Micheal', 'Michel', 'Michele', 'Michelle', 'Miguel', 'Mikayla', 'Mike',\n    'Mikel', 'Milan', 'Miles', 'Milford', 'Miller', 'Millie', 'Milo', 'Milton',\n    'Mina', 'Minerva', 'Minnie', 'Miracle', 'Mireille', 'Mireya', 'Misael',\n    'Missouri', 'Misty', 'Mitchel', 'Mitchell', 'Mittie', 'Modesta', 'Modesto',\n    'Mohamed', 'Mohammad', 'Mohammed', 'Moises', 'Mollie', 'Molly', 'Mona',\n    'Monica', 'Monique', 'Monroe', 'Monserrat', 'Monserrate', 'Montana',\n    'Monte', 'Monty', 'Morgan', 'Moriah', 'Morris', 'Mortimer', 'Morton',\n    'Mose', 'Moses', 'Moshe', 'Mossie', 'Mozell', 'Mozelle', 'Muhammad',\n    'Muriel', 'Murl', 'Murphy', 'Murray', 'Mustafa', 'Mya', 'Myah', 'Mylene',\n    'Myles', 'Myra', 'Myriam', 'Myrl', 'Myrna', 'Myron', 'Myrtice', 'Myrtie',\n    'Myrtis', 'Myrtle', 'Nadia', 'Nakia', 'Name', 'Nannie', 'Naomi', 'Naomie',\n    'Napoleon', 'Narciso', 'Nash', 'Nasir', 'Nat', 'Natalia', 'Natalie',\n    'Natasha', 'Nathan', 'Nathanael', 'Nathanial', 'Nathaniel', 'Nathen',\n    'Nayeli', 'Neal', 'Ned', 'Nedra', 'Neha', 'Neil', 'Nelda', 'Nella', 'Nelle',\n    'Nellie', 'Nels', 'Nelson', 'Neoma', 'Nestor', 'Nettie', 'Neva', 'Newell',\n    'Newton', 'Nia', 'Nicholas', 'Nicholaus', 'Nichole', 'Nick', 'Nicklaus',\n    'Nickolas', 'Nico', 'Nicola', 'Nicolas', 'Nicole', 'Nicolette', 'Nigel',\n    'Nikita', 'Nikki', 'Nikko', 'Niko', 'Nikolas', 'Nils', 'Nina', 'Noah',\n    'Noble', 'Noe', 'Noel', 'Noelia', 'Noemi', 'Noemie', 'Noemy', 'Nola',\n    'Nolan', 'Nona', 'Nora', 'Norbert', 'Norberto', 'Norene', 'Norma', 'Norris',\n    'Norval', 'Norwood', 'Nova', 'Novella', 'Nya', 'Nyah', 'Nyasia', 'Obie',\n    'Oceane', 'Ocie', 'Octavia', 'Oda', 'Odell', 'Odessa', 'Odie', 'Ofelia',\n    'Okey', 'Ola', 'Olaf', 'Ole', 'Olen', 'Oleta', 'Olga', 'Olin', 'Oliver',\n    'Ollie', 'Oma', 'Omari', 'Omer', 'Ona', 'Onie', 'Opal', 'Ophelia', 'Ora',\n    'Oral', 'Oran', 'Oren', 'Orie', 'Orin', 'Orion', 'Orland', 'Orlando',\n    'Orlo', 'Orpha', 'Orrin', 'Orval', 'Orville', 'Osbaldo', 'Osborne', 'Oscar',\n    'Osvaldo', 'Oswald', 'Oswaldo', 'Otha', 'Otho', 'Otilia', 'Otis', 'Ottilie',\n    'Ottis', 'Otto', 'Ova', 'Owen', 'Ozella', 'Pablo', 'Paige', 'Palma',\n    'Pamela', 'Pansy', 'Paolo', 'Paris', 'Parker', 'Pascale', 'Pasquale', 'Pat',\n    'Patience', 'Patricia', 'Patrick', 'Patsy', 'Pattie', 'Paul', 'Paula',\n    'Pauline', 'Paxton', 'Payton', 'Pearl', 'Pearlie', 'Pearline', 'Pedro',\n    'Peggie', 'Penelope', 'Percival', 'Percy', 'Perry', 'Pete', 'Peter',\n    'Petra', 'Peyton', 'Philip', 'Phoebe', 'Phyllis', 'Pierce', 'Pierre',\n    'Pietro', 'Pink', 'Pinkie', 'Piper', 'Polly', 'Porter', 'Precious',\n    'Presley', 'Preston', 'Price', 'Prince', 'Princess', 'Priscilla',\n    'Providenci', 'Prudence', 'Queen', 'Queenie', 'Quentin', 'Quincy', 'Quinn',\n    'Quinten', 'Quinton', 'Rachael', 'Rachel', 'Rachelle', 'Rae', 'Raegan',\n    'Rafael', 'Rafaela', 'Raheem', 'Rahsaan', 'Rahul', 'Raina', 'Raleigh',\n    'Ralph', 'Ramiro', 'Ramon', 'Ramona', 'Randal', 'Randall', 'Randi', 'Randy',\n    'Ransom', 'Raoul', 'Raphael', 'Raphaelle', 'Raquel', 'Rashad', 'Rashawn',\n    'Rasheed', 'Raul', 'Raven', 'Ray', 'Raymond', 'Raymundo', 'Reagan',\n    'Reanna', 'Reba', 'Rebeca', 'Rebecca', 'Rebeka', 'Rebekah', 'Reece', 'Reed',\n    'Reese', 'Regan', 'Reggie', 'Reginald', 'Reid', 'Reilly', 'Reina',\n    'Reinhold', 'Remington', 'Rene', 'Renee', 'Ressie', 'Reta', 'Retha',\n    'Retta', 'Reuben', 'Reva', 'Rex', 'Rey', 'Reyes', 'Reymundo', 'Reyna',\n    'Reynold', 'Rhea', 'Rhett', 'Rhianna', 'Rhiannon', 'Rhoda', 'Ricardo',\n    'Richard', 'Richie', 'Richmond', 'Rick', 'Rickey', 'Rickie', 'Ricky',\n    'Rico', 'Rigoberto', 'Riley', 'Rita', 'River', 'Robb', 'Robbie', 'Robert',\n    'Roberta', 'Roberto', 'Robin', 'Robyn', 'Rocio', 'Rocky', 'Rod', 'Roderick',\n    'Rodger', 'Rodolfo', 'Rodrick', 'Rodrigo', 'Roel', 'Rogelio', 'Roger',\n    'Rogers', 'Rolando', 'Rollin', 'Roma', 'Romaine', 'Roman', 'Ron', 'Ronaldo',\n    'Ronny', 'Roosevelt', 'Rory', 'Rosa', 'Rosalee', 'Rosalia', 'Rosalind',\n    'Rosalinda', 'Rosalyn', 'Rosamond', 'Rosanna', 'Rosario', 'Roscoe', 'Rose',\n    'Rosella', 'Roselyn', 'Rosemarie', 'Rosemary', 'Rosendo', 'Rosetta',\n    'Rosie', 'Rosina', 'Roslyn', 'Ross', 'Rossie', 'Rowan', 'Rowena', 'Rowland',\n    'Roxane', 'Roxanne', 'Roy', 'Royal', 'Royce', 'Rozella', 'Ruben', 'Rubie',\n    'Ruby', 'Rubye', 'Rudolph', 'Rudy', 'Rupert', 'Russ', 'Russel', 'Russell',\n    'Rusty', 'Ruth', 'Ruthe', 'Ruthie', 'Ryan', 'Ryann', 'Ryder', 'Rylan',\n    'Rylee', 'Ryleigh', 'Ryley', 'Sabina', 'Sabrina', 'Sabryna', 'Sadie',\n    'Sadye', 'Sage', 'Saige', 'Sallie', 'Sally', 'Salma', 'Salvador',\n    'Salvatore', 'Sam', 'Samanta', 'Samantha', 'Samara', 'Samir', 'Sammie',\n    'Sammy', 'Samson', 'Sandra', 'Sandrine', 'Sandy', 'Sanford', 'Santa',\n    'Santiago', 'Santina', 'Santino', 'Santos', 'Sarah', 'Sarai', 'Sarina',\n    'Sasha', 'Saul', 'Savanah', 'Savanna', 'Savannah', 'Savion', 'Scarlett',\n    'Schuyler', 'Scot', 'Scottie', 'Scotty', 'Seamus', 'Sean', 'Sebastian',\n    'Sedrick', 'Selena', 'Selina', 'Selmer', 'Serena', 'Serenity', 'Seth',\n    'Shad', 'Shaina', 'Shakira', 'Shana', 'Shane', 'Shanel', 'Shanelle',\n    'Shania', 'Shanie', 'Shaniya', 'Shanna', 'Shannon', 'Shanny', 'Shanon',\n    'Shany', 'Sharon', 'Shaun', 'Shawn', 'Shawna', 'Shaylee', 'Shayna',\n    'Shayne', 'Shea', 'Sheila', 'Sheldon', 'Shemar', 'Sheridan', 'Sherman',\n    'Sherwood', 'Shirley', 'Shyann', 'Shyanne', 'Sibyl', 'Sid', 'Sidney',\n    'Sienna', 'Sierra', 'Sigmund', 'Sigrid', 'Sigurd', 'Silas', 'Sim', 'Simeon',\n    'Simone', 'Sincere', 'Sister', 'Skye', 'Skyla', 'Skylar', 'Sofia',\n    'Soledad', 'Solon', 'Sonia', 'Sonny', 'Sonya', 'Sophia', 'Sophie',\n    'Spencer', 'Stacey', 'Stacy', 'Stan', 'Stanford', 'Stanley', 'Stanton',\n    'Stefan', 'Stefanie', 'Stella', 'Stephan', 'Stephania', 'Stephanie',\n    'Stephany', 'Stephen', 'Stephon', 'Sterling', 'Steve', 'Stevie', 'Stewart',\n    'Stone', 'Stuart', 'Summer', 'Sunny', 'Susan', 'Susana', 'Susanna', 'Susie',\n    'Suzanne', 'Sven', 'Syble', 'Sydnee', 'Sydney', 'Sydni', 'Sydnie', 'Sylvan',\n    'Sylvester', 'Sylvia', 'Tabitha', 'Tad', 'Talia', 'Talon', 'Tamara',\n    'Tamia', 'Tania', 'Tanner', 'Tanya', 'Tara', 'Taryn', 'Tate', 'Tatum',\n    'Tatyana', 'Taurean', 'Tavares', 'Taya', 'Taylor', 'Teagan', 'Ted', 'Telly',\n    'Terence', 'Teresa', 'Terrance', 'Terrell', 'Terrence', 'Terrill', 'Terry',\n    'Tess', 'Tessie', 'Tevin', 'Thad', 'Thaddeus', 'Thalia', 'Thea', 'Thelma',\n    'Theo', 'Theodora', 'Theodore', 'Theresa', 'Therese', 'Theresia', 'Theron',\n    'Thomas', 'Thora', 'Thurman', 'Tia', 'Tiana', 'Tianna', 'Tiara', 'Tierra',\n    'Tiffany', 'Tillman', 'Timmothy', 'Timmy', 'Timothy', 'Tina', 'Tito',\n    'Titus', 'Tobin', 'Toby', 'Tod', 'Tom', 'Tomas', 'Tomasa', 'Tommie',\n    'Toney', 'Toni', 'Tony', 'Torey', 'Torrance', 'Torrey', 'Toy', 'Trace',\n    'Tracey', 'Tracy', 'Travis', 'Travon', 'Tre', 'Tremaine', 'Tremayne',\n    'Trent', 'Trenton', 'Tressa', 'Tressie', 'Treva', 'Trever', 'Trevion',\n    'Trevor', 'Trey', 'Trinity', 'Trisha', 'Tristian', 'Tristin', 'Triston',\n    'Troy', 'Trudie', 'Trycia', 'Trystan', 'Turner', 'Twila', 'Tyler', 'Tyra',\n    'Tyree', 'Tyreek', 'Tyrel', 'Tyrell', 'Tyrese', 'Tyrique', 'Tyshawn',\n    'Tyson', 'Ubaldo', 'Ulices', 'Ulises', 'Una', 'Unique', 'Urban', 'Uriah',\n    'Uriel', 'Ursula', 'Vada', 'Valentin', 'Valentina', 'Valentine', 'Valerie',\n    'Vallie', 'Van', 'Vance', 'Vanessa', 'Vaughn', 'Veda', 'Velda', 'Vella',\n    'Velma', 'Velva', 'Vena', 'Verda', 'Verdie', 'Vergie', 'Verla', 'Verlie',\n    'Vern', 'Verna', 'Verner', 'Vernice', 'Vernie', 'Vernon', 'Verona',\n    'Veronica', 'Vesta', 'Vicenta', 'Vicente', 'Vickie', 'Vicky', 'Victor',\n    'Victoria', 'Vida', 'Vidal', 'Vilma', 'Vince', 'Vincent', 'Vincenza',\n    'Vincenzo', 'Vinnie', 'Viola', 'Violet', 'Violette', 'Virgie', 'Virgil',\n    'Virginia', 'Virginie', 'Vita', 'Vito', 'Viva', 'Vivian', 'Viviane',\n    'Vivianne', 'Vivien', 'Vivienne', 'Vladimir', 'Wade', 'Waino', 'Waldo',\n    'Walker', 'Wallace', 'Walter', 'Walton', 'Wanda', 'Ward', 'Warren',\n    'Watson', 'Wava', 'Waylon', 'Wayne', 'Webster', 'Weldon', 'Wellington',\n    'Wendell', 'Wendy', 'Werner', 'Westley', 'Weston', 'Whitney', 'Wilber',\n    'Wilbert', 'Wilburn', 'Wiley', 'Wilford', 'Wilfred', 'Wilfredo', 'Wilfrid',\n    'Wilhelm', 'Wilhelmine', 'Will', 'Willa', 'Willard', 'William', 'Willie',\n    'Willis', 'Willow', 'Willy', 'Wilma', 'Wilmer', 'Wilson', 'Wilton',\n    'Winfield', 'Winifred', 'Winnifred', 'Winona', 'Winston', 'Woodrow',\n    'Wyatt', 'Wyman', 'Xander', 'Xavier', 'Xzavier', 'Yadira', 'Yasmeen',\n    'Yasmin', 'Yasmine', 'Yazmin', 'Yesenia', 'Yessenia', 'Yolanda', 'Yoshiko',\n    'Yvette', 'Yvonne', 'Zachariah', 'Zachary', 'Zachery', 'Zack', 'Zackary',\n    'Zackery', 'Zakary', 'Zander', 'Zane', 'Zaria', 'Zechariah', 'Zelda',\n    'Zella', 'Zelma', 'Zena', 'Zetta', 'Zion', 'Zita', 'Zoe', 'Zoey', 'Zoie',\n    'Zoila', 'Zola', 'Zora', 'Zula'\n];\n\n/**\n * Generate random username.\n * @returns {string} random username\n */\nfunction generateUsername() {\n    const name = RandomUtil.randomElement(names);\n    const suffix = RandomUtil.randomAlphanumStr(3);\n\n    return `${name}-${suffix}`;\n}\n\nmodule.exports = {\n    generateUsername\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/UsernameGenerator.js","/* global callstats */\n\nimport browser from '../browser';\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\n\nconst logger = require('jitsi-meet-logger').getLogger(__filename);\n\n/**\n * We define enumeration of wrtcFuncNames as we need them before\n * callstats is initialized to queue events.\n * @const\n * @see http://www.callstats.io/api/#enumeration-of-wrtcfuncnames\n */\nconst wrtcFuncNames = {\n    createOffer: 'createOffer',\n    createAnswer: 'createAnswer',\n    setLocalDescription: 'setLocalDescription',\n    setRemoteDescription: 'setRemoteDescription',\n    addIceCandidate: 'addIceCandidate',\n    getUserMedia: 'getUserMedia',\n    iceConnectionFailure: 'iceConnectionFailure',\n    signalingError: 'signalingError',\n    applicationLog: 'applicationLog'\n};\n\n/**\n * We define enumeration of fabricEvent as we need them before\n * callstats is initialized to queue events.\n * @const\n * @see http://www.callstats.io/api/#enumeration-of-fabricevent\n */\nconst fabricEvent = {\n    fabricHold: 'fabricHold',\n    fabricResume: 'fabricResume',\n    audioMute: 'audioMute',\n    audioUnmute: 'audioUnmute',\n    videoPause: 'videoPause',\n    videoResume: 'videoResume',\n    fabricUsageEvent: 'fabricUsageEvent',\n    fabricStats: 'fabricStats',\n    fabricTerminated: 'fabricTerminated',\n    screenShareStart: 'screenShareStart',\n    screenShareStop: 'screenShareStop',\n    dominantSpeaker: 'dominantSpeaker',\n    activeDeviceList: 'activeDeviceList'\n};\n\n/**\n * The user id to report to callstats as destination.\n * @type {string}\n */\nconst DEFAULT_REMOTE_USER = 'jitsi';\n\n/**\n * Type of pending reports, can be event or an error.\n * @type {{ERROR: string, EVENT: string}}\n */\nconst reportType = {\n    ERROR: 'error',\n    EVENT: 'event',\n    MST_WITH_USERID: 'mstWithUserID'\n};\n\n/**\n * Set of currently existing {@link CallStats} instances.\n * @type {Set<CallStats>}\n */\nlet _fabrics;\n\n/**\n * An instance of this class is a wrapper for the CallStats API fabric. A fabric\n * reports one peer connection the the CallStats backend and is allocated with\n * {@link callstats.addNewFabric}. It has a bunch of instance methods for\n * reporting various events. A fabric is considered disposed when\n * {@link CallStats.sendTerminateEvent} is executed.\n *\n * Currently only one backend instance can be created ever and it's done using\n * {@link CallStats.initBackend}. At the time of this writing there is no way to\n * explicitly shutdown the backend, but it's supposed to close it's connection\n * automatically, after all fabrics have been terminated.\n */\nexport default class CallStats {\n    /**\n     * A callback passed to {@link callstats.addNewFabric}.\n     * @param {string} error 'success' means ok\n     * @param {string} msg some more details\n     * @private\n     */\n    static _addNewFabricCallback(error, msg) {\n        if (CallStats.backend && error !== 'success') {\n            logger.error(`Monitoring status: ${error} msg: ${msg}`);\n        }\n    }\n\n    /**\n     * Callback passed to {@link callstats.initialize} (backend initialization)\n     * @param {string} error 'success' means ok\n     * @param {String} msg\n     * @private\n     */\n    static _initCallback(error, msg) {\n        logger.log(`CallStats Status: err=${error} msg=${msg}`);\n\n        // there is no lib, nothing to report to\n        if (error !== 'success') {\n            return;\n        }\n\n        CallStats.backendInitialized = true;\n\n        // I hate that\n        let atLeastOneFabric = false;\n        let defaultInstance = null;\n\n        for (const callStatsInstance of CallStats.fabrics.values()) {\n            if (!callStatsInstance.hasFabric) {\n                logger.debug('addNewFabric - initCallback');\n                if (callStatsInstance._addNewFabric()) {\n                    atLeastOneFabric = true;\n                    if (!defaultInstance) {\n                        defaultInstance = callStatsInstance;\n                    }\n                }\n            }\n        }\n\n        if (!atLeastOneFabric) {\n            return;\n        }\n\n        CallStats._emptyReportQueue(defaultInstance);\n    }\n\n    /**\n     * Empties report queue.\n     *\n     * @param {CallStats} csInstance - The callstats instance.\n     * @private\n     */\n    static _emptyReportQueue(csInstance) {\n        // There is no conference ID nor a PeerConnection available when some of\n        // the events are scheduled on the reportsQueue, so those will be\n        // reported on the first initialized fabric.\n        const defaultConfID = csInstance.confID;\n        const defaultPC = csInstance.peerconnection;\n\n        // notify callstats about failures if there were any\n        for (const report of CallStats.reportsQueue) {\n            if (report.type === reportType.ERROR) {\n                const errorData = report.data;\n\n                CallStats._reportError(\n                    csInstance,\n                    errorData.type,\n                    errorData.error,\n                    errorData.pc || defaultPC);\n            } else if (report.type === reportType.EVENT) {\n                // if we have and event to report and we failed to add\n                // fabric this event will not be reported anyway, returning\n                // an error\n                const eventData = report.data;\n\n                CallStats.backend.sendFabricEvent(\n                    report.pc || defaultPC,\n                    eventData.event,\n                    defaultConfID,\n                    eventData.eventData);\n            } else if (report.type === reportType.MST_WITH_USERID) {\n                const data = report.data;\n\n                CallStats.backend.associateMstWithUserID(\n                    report.pc || defaultPC,\n                    data.callStatsId,\n                    defaultConfID,\n                    data.ssrc,\n                    data.usageLabel,\n                    data.containerId\n                );\n            }\n        }\n        CallStats.reportsQueue.length = 0;\n    }\n\n    /* eslint-disable max-params */\n    /**\n     * Reports an error to callstats.\n     *\n     * @param {CallStats} [cs]\n     * @param type the type of the error, which will be one of the wrtcFuncNames\n     * @param error the error\n     * @param pc the peerconnection\n     * @private\n     */\n    static _reportError(cs, type, error, pc) {\n        let _error = error;\n\n        if (!_error) {\n            logger.warn('No error is passed!');\n            _error = new Error('Unknown error');\n        }\n        if (CallStats.backendInitialized && cs) {\n            CallStats.backend.reportError(pc, cs.confID, type, _error);\n        } else {\n            CallStats.reportsQueue.push({\n                type: reportType.ERROR,\n                data: {\n                    error: _error,\n                    pc,\n                    type\n                }\n            });\n        }\n\n        // else just ignore it\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Reports an error to callstats.\n     *\n     * @param {CallStats} cs\n     * @param event the type of the event, which will be one of the fabricEvent\n     * @param eventData additional data to pass to event\n     * @private\n     */\n    static _reportEvent(cs, event, eventData) {\n        const pc = cs && cs.peerconnection;\n        const confID = cs && cs.confID;\n\n        if (CallStats.backendInitialized && cs) {\n            CallStats.backend.sendFabricEvent(pc, event, confID, eventData);\n        } else {\n            CallStats.reportsQueue.push({\n                confID,\n                pc,\n                type: reportType.EVENT,\n                data: { event,\n                    eventData }\n            });\n        }\n    }\n\n    /**\n     * Wraps some of the CallStats API method and logs their calls with\n     * arguments on the debug logging level. Also wraps some of the backend\n     * methods execution into try catch blocks to not crash the app in case\n     * there is a problem with the backend itself.\n     * @param {callstats} theBackend\n     * @private\n     */\n    static _traceAndCatchBackendCalls(theBackend) {\n        const tryCatchMethods = [\n            'associateMstWithUserID',\n            'sendFabricEvent',\n            'sendUserFeedback'\n\n            // 'reportError', - this one needs special handling - see code below\n        ];\n\n        for (const methodName of tryCatchMethods) {\n            const originalMethod = theBackend[methodName];\n\n            theBackend[methodName] = function(...theArguments) {\n                try {\n                    return originalMethod.apply(theBackend, theArguments);\n                } catch (e) {\n                    GlobalOnErrorHandler.callErrorHandler(e);\n                }\n            };\n        }\n        const debugMethods = [\n            'associateMstWithUserID',\n            'sendFabricEvent',\n            'sendUserFeedback'\n\n            // 'reportError', - this one needs special handling - see code below\n        ];\n\n        for (const methodName of debugMethods) {\n            const originalMethod = theBackend[methodName];\n\n            theBackend[methodName] = function(...theArguments) {\n                logger.debug(methodName, theArguments);\n                originalMethod.apply(theBackend, theArguments);\n            };\n        }\n        const originalReportError = theBackend.reportError;\n\n        /* eslint-disable max-params */\n        theBackend.reportError = function(pc, cs, type, ...args) {\n            // Logs from the logger are submitted on the applicationLog event\n            // \"type\". Logging the arguments on the logger will create endless\n            // loop, because it will put all the logs to the logger queue again.\n            if (type === wrtcFuncNames.applicationLog) {\n                // NOTE otherArguments are not logged to the console on purpose\n                // to not log the whole log batch\n                // FIXME check the current logging level (currently not exposed\n                // by the logger implementation)\n                // NOTE it is not safe to log whole objects on react-native as\n                // those contain too many circular references and may crash\n                // the app.\n                if (!browser.isReactNative()) {\n                    console && console.debug('reportError', pc, cs, type);\n                }\n            } else {\n                logger.debug('reportError', pc, cs, type, ...args);\n            }\n            try {\n                originalReportError.call(theBackend, pc, cs, type, ...args);\n            } catch (exception) {\n                if (type === wrtcFuncNames.applicationLog) {\n                    console && console.error('reportError', exception);\n                } else {\n                    GlobalOnErrorHandler.callErrorHandler(exception);\n                }\n            }\n        };\n\n        /* eslint-enable max-params */\n    }\n\n    /**\n     * Returns the Set with the currently existing {@link CallStats} instances.\n     * Lazily initializes the Set to allow any Set polyfills to be applied.\n     * @type {Set<CallStats>}\n     */\n    static get fabrics() {\n        if (!_fabrics) {\n            _fabrics = new Set();\n        }\n\n        return _fabrics;\n    }\n\n    /**\n     * Initializes the CallStats backend. Should be called only if\n     * {@link CallStats.isBackendInitialized} returns <tt>false</tt>.\n     * @param {object} options\n     * @param {String} options.callStatsID CallStats credentials - ID\n     * @param {String} options.callStatsSecret CallStats credentials - secret\n     * @param {string} options.aliasName the <tt>aliasName</tt> part of\n     * the <tt>userID</tt> aka endpoint ID, see CallStats docs for more info.\n     * @param {string} options.userName the <tt>userName</tt> part of\n     * the <tt>userID</tt> aka display name, see CallStats docs for more info.\n     *\n     */\n    static initBackend(options) {\n        if (CallStats.backend) {\n            throw new Error('CallStats backend has been initialized already!');\n        }\n        try {\n            // In react-native we need to import the callstats module, but\n            // imports are only allowed at top-level, so we must use require\n            // here. Sigh.\n            const CallStatsBackend\n                = browser.isReactNative()\n                    ? require('react-native-callstats/callstats')\n                    : callstats;\n\n            CallStats.backend = new CallStatsBackend();\n\n            CallStats._traceAndCatchBackendCalls(CallStats.backend);\n\n            CallStats.userID = {\n                aliasName: options.aliasName,\n                userName: options.userName\n            };\n            CallStats.callStatsID = options.callStatsID;\n            CallStats.callStatsSecret = options.callStatsSecret;\n\n            let configParams;\n\n            if (options.applicationName) {\n                configParams = {\n                    applicationVersion:\n                        `${options.applicationName} (${\n                            browser.getName()})`\n                };\n            }\n\n            // userID is generated or given by the origin server\n            CallStats.backend.initialize(\n                CallStats.callStatsID,\n                CallStats.callStatsSecret,\n                CallStats.userID,\n                CallStats._initCallback,\n                undefined,\n                configParams);\n\n            const getWiFiStatsMethod = options.getWiFiStatsMethod;\n\n            if (getWiFiStatsMethod) {\n                CallStats.backend.attachWifiStatsHandler(getWiFiStatsMethod);\n\n                getWiFiStatsMethod().then(result => {\n                    if (result) {\n                        logger.info('Reported wifi addresses:'\n                            , JSON.parse(result).addresses);\n                    }\n                })\n                .catch(() => {});// eslint-disable-line no-empty-function\n            }\n\n            return true;\n        } catch (e) {\n            // The callstats.io API failed to initialize (e.g. because its\n            // download did not succeed in general or on time). Further attempts\n            // to utilize it cannot possibly succeed.\n            GlobalOnErrorHandler.callErrorHandler(e);\n            CallStats.backend = null;\n            logger.error(e);\n\n            return false;\n        }\n    }\n\n    /**\n     * Checks if the CallStats backend has been created. It does not mean that\n     * it has been initialized, but only that the API instance has been\n     * allocated successfully.\n     * @return {boolean} <tt>true</tt> if backend exists or <tt>false</tt>\n     * otherwise\n     */\n    static isBackendInitialized() {\n        return Boolean(CallStats.backend);\n    }\n\n    /**\n     * Notifies CallStats about active device.\n     * @param {{deviceList: {String:String}}} devicesData list of devices with\n     * their data\n     * @param {CallStats} cs callstats instance related to the event\n     */\n    static sendActiveDeviceListEvent(devicesData, cs) {\n        CallStats._reportEvent(cs, fabricEvent.activeDeviceList, devicesData);\n    }\n\n    /**\n     * Notifies CallStats that there is a log we want to report.\n     *\n     * @param {Error} e error to send or {String} message\n     * @param {CallStats} cs callstats instance related to the error (optional)\n     */\n    static sendApplicationLog(e, cs) {\n        try {\n            CallStats._reportError(\n                cs,\n                wrtcFuncNames.applicationLog,\n                e,\n                cs && cs.peerconnection);\n        } catch (error) {\n            // If sendApplicationLog fails it should not be printed to\n            // the logger, because it will try to push the logs again\n            // (through sendApplicationLog) and an endless loop is created.\n            if (console && (typeof console.error === 'function')) {\n                // FIXME send analytics event as well\n                console.error('sendApplicationLog failed', error);\n            }\n        }\n    }\n\n    /**\n     * Sends the given feedback through CallStats.\n     *\n     * @param {string} conferenceID the conference ID for which the feedback\n     * will be reported.\n     * @param overall an integer between 1 and 5 indicating the\n     * user feedback\n     * @param comment detailed feedback from the user.\n     */\n    static sendFeedback(conferenceID, overall, comment) {\n        if (CallStats.backend) {\n            CallStats.backend.sendUserFeedback(\n                conferenceID, {\n                    userID: CallStats.userID,\n                    overall,\n                    comment\n                });\n        } else {\n            logger.error('Failed to submit feedback to CallStats - no backend');\n        }\n    }\n\n    /**\n     * Notifies CallStats that getUserMedia failed.\n     *\n     * @param {Error} e error to send\n     * @param {CallStats} cs callstats instance related to the error (optional)\n     */\n    static sendGetUserMediaFailed(e, cs) {\n        CallStats._reportError(cs, wrtcFuncNames.getUserMedia, e, null);\n    }\n\n    /**\n     * Notifies CallStats for mute events\n     * @param mute {boolean} true for muted and false for not muted\n     * @param type {String} \"audio\"/\"video\"\n     * @param {CallStats} cs callstats instance related to the event\n     */\n    static sendMuteEvent(mute, type, cs) {\n        let event;\n\n        if (type === 'video') {\n            event = mute ? fabricEvent.videoPause : fabricEvent.videoResume;\n        } else {\n            event = mute ? fabricEvent.audioMute : fabricEvent.audioUnmute;\n        }\n\n        CallStats._reportEvent(cs, event);\n    }\n\n    /**\n     * Creates new CallStats instance that handles all callstats API calls for\n     * given {@link TraceablePeerConnection}. Each instance is meant to handle\n     * one CallStats fabric added with 'addFabric' API method for the\n     * {@link TraceablePeerConnection} instance passed in the constructor.\n     * @param {TraceablePeerConnection} tpc\n     * @param {Object} options\n     * @param {string} options.confID the conference ID that wil be used to\n     * report the session.\n     * @param {string} [options.remoteUserID='jitsi'] the remote user ID to\n     * which given <tt>tpc</tt> is connected.\n     */\n    constructor(tpc, options) {\n        this.confID = options.confID;\n        this.tpc = tpc;\n        this.peerconnection = tpc.peerconnection;\n        this.remoteUserID = options.remoteUserID || DEFAULT_REMOTE_USER;\n        this.hasFabric = false;\n\n        CallStats.fabrics.add(this);\n\n        if (CallStats.backendInitialized) {\n            this._addNewFabric();\n\n            // if this is the first fabric let's try to empty the\n            // report queue. Reports all events that we recorded between\n            // backend initialization and receiving the first fabric\n            if (CallStats.fabrics.size === 1) {\n                CallStats._emptyReportQueue(this);\n            }\n        }\n    }\n\n    /**\n     * Initializes CallStats fabric by calling \"addNewFabric\" for\n     * the peer connection associated with this instance.\n     * @return {boolean} true if the call was successful or false otherwise.\n     */\n    _addNewFabric() {\n        logger.info('addNewFabric', this.remoteUserID);\n        try {\n            const fabricAttributes = {\n                remoteEndpointType:\n                    this.tpc.isP2P\n                        ? CallStats.backend.endpointType.peer\n                        : CallStats.backend.endpointType.server\n            };\n            const ret\n                = CallStats.backend.addNewFabric(\n                    this.peerconnection,\n                    this.remoteUserID,\n                    CallStats.backend.fabricUsage.multiplex,\n                    this.confID,\n                    fabricAttributes,\n                    CallStats._addNewFabricCallback);\n\n            this.hasFabric = true;\n\n            const success = ret.status === 'success';\n\n            if (!success) {\n                logger.error('callstats fabric not initilized', ret.message);\n            }\n\n            return success;\n\n        } catch (error) {\n            GlobalOnErrorHandler.callErrorHandler(error);\n\n            return false;\n        }\n    }\n\n    /* eslint-disable max-params */\n\n    /**\n     * Lets CallStats module know where is given SSRC rendered by providing\n     * renderer tag ID.\n     * If the lib is not initialized yet queue the call for later, when it's\n     * ready.\n     * @param {number} ssrc the SSRC of the stream\n     * @param {boolean} isLocal indicates whether this the stream is local\n     * @param {string|null} streamEndpointId if the stream is not local the it\n     * needs to contain the stream owner's ID\n     * @param {string} usageLabel meaningful usage label of this stream like\n     *        'microphone', 'camera' or 'screen'.\n     * @param {string} containerId  the id of media 'audio' or 'video' tag which\n     *        renders the stream.\n     */\n    associateStreamWithVideoTag(\n            ssrc,\n            isLocal,\n            streamEndpointId,\n            usageLabel,\n            containerId) {\n        if (!CallStats.backend) {\n            return;\n        }\n\n        const callStatsId = isLocal ? CallStats.userID : streamEndpointId;\n\n        if (CallStats.backendInitialized) {\n            CallStats.backend.associateMstWithUserID(\n                this.peerconnection,\n                callStatsId,\n                this.confID,\n                ssrc,\n                usageLabel,\n                containerId);\n        } else {\n            CallStats.reportsQueue.push({\n                type: reportType.MST_WITH_USERID,\n                pc: this.peerconnection,\n                data: {\n                    callStatsId,\n                    containerId,\n                    ssrc,\n                    usageLabel\n                }\n            });\n        }\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Notifies CallStats that we are the new dominant speaker in the\n     * conference.\n     */\n    sendDominantSpeakerEvent() {\n        CallStats._reportEvent(this, fabricEvent.dominantSpeaker);\n    }\n\n    /**\n     * Notifies CallStats that the fabric for the underlying peerconnection was\n     * closed and no evens should be reported, after this call.\n     */\n    sendTerminateEvent() {\n        if (CallStats.backendInitialized) {\n            CallStats.backend.sendFabricEvent(\n                this.peerconnection,\n                CallStats.backend.fabricEvent.fabricTerminated,\n                this.confID);\n        }\n        CallStats.fabrics.delete(this);\n    }\n\n    /**\n     * Notifies CallStats for ice connection failed\n     */\n    sendIceConnectionFailedEvent() {\n        CallStats._reportError(\n            this,\n            wrtcFuncNames.iceConnectionFailure,\n            null,\n            this.peerconnection);\n    }\n\n    /**\n     * Notifies CallStats that peer connection failed to create offer.\n     *\n     * @param {Error} e error to send\n     */\n    sendCreateOfferFailed(e) {\n        CallStats._reportError(\n            this, wrtcFuncNames.createOffer, e, this.peerconnection);\n    }\n\n    /**\n     * Notifies CallStats that peer connection failed to create answer.\n     *\n     * @param {Error} e error to send\n     */\n    sendCreateAnswerFailed(e) {\n        CallStats._reportError(\n            this, wrtcFuncNames.createAnswer, e, this.peerconnection);\n    }\n\n    /**\n     * Sends either resume or hold event for the fabric associated with\n     * the underlying peerconnection.\n     * @param {boolean} isResume true to resume or false to hold\n     */\n    sendResumeOrHoldEvent(isResume) {\n        CallStats._reportEvent(\n            this,\n            isResume ? fabricEvent.fabricResume : fabricEvent.fabricHold);\n    }\n\n    /**\n     * Notifies CallStats for screen sharing events\n     * @param {boolean} start true for starting screen sharing and\n     * false for not stopping\n     * @param {string|null} ssrc - optional ssrc value, used only when\n     * starting screen sharing.\n     */\n    sendScreenSharingEvent(start, ssrc) {\n        let eventData;\n\n        if (ssrc) {\n            eventData = { ssrc };\n        }\n\n        CallStats._reportEvent(\n            this,\n            start ? fabricEvent.screenShareStart : fabricEvent.screenShareStop,\n            eventData);\n    }\n\n    /**\n     * Notifies CallStats that peer connection failed to set local description.\n     *\n     * @param {Error} e error to send\n     */\n    sendSetLocalDescFailed(e) {\n        CallStats._reportError(\n            this, wrtcFuncNames.setLocalDescription, e, this.peerconnection);\n    }\n\n    /**\n     * Notifies CallStats that peer connection failed to set remote description.\n     *\n     * @param {Error} e error to send\n     */\n    sendSetRemoteDescFailed(e) {\n        CallStats._reportError(\n            this, wrtcFuncNames.setRemoteDescription, e, this.peerconnection);\n    }\n\n    /**\n     * Notifies CallStats that peer connection failed to add ICE candidate.\n     *\n     * @param {Error} e error to send\n     */\n    sendAddIceCandidateFailed(e) {\n        CallStats._reportError(\n            this, wrtcFuncNames.addIceCandidate, e, this.peerconnection);\n    }\n}\n\n/**\n * The CallStats API backend instance\n * @type {callstats}\n */\nCallStats.backend = null;\n\n// some errors/events may happen before CallStats init\n// in this case we accumulate them in this array\n// and send them to callstats on init\nCallStats.reportsQueue = [];\n\n/**\n * Whether the library was successfully initialized(the backend) using its\n * initialize method.\n * @type {boolean}\n */\nCallStats.backendInitialized = false;\n\n/**\n * Part of the CallStats credentials - application ID\n * @type {string}\n */\nCallStats.callStatsID = null;\n\n/**\n * Part of the CallStats credentials - application secret\n * @type {string}\n */\nCallStats.callStatsSecret = null;\n\n/**\n * Local CallStats user ID structure. Can be set only once when\n * {@link backend} is initialized, so it's static for the time being.\n * See CallStats API for more info:\n * https://www.callstats.io/api/#userid\n * @type {object}\n */\nCallStats.userID = null;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/CallStats.js","/*! callstats.js  version = 3.27.0 2017-12-14 */\n\"use strict\";!function(){function a(){function a(){var a=(Math.random()+1).toString(36);return a.substring(2,a.length)}function b(){return window.performance.now?window.performance.now()+window.performance.timing.navigationStart:Date.now()}function c(){var a=b();return a+bb.currentOffset}function d(a){if(!$a||!$a.rtc_rtp_parameters||!$a.rtc_rtp_parameters.encodings)return void a.streams.forEach(function(a){var b=a.data;\"video\"===b.mediaType&&a.streamType===ub.outbound&&(b.csioSCSValidationSampleCount=null,b.csioAvgMaxBitrateDiff=null,b.csioAvgDeltaThroughput=null,b.csioMaxBitrateAboveRatio=null,b.csioCCDrivenRatio=null)});var b=function(a){return Sb[a]?Sb[a]:(Sb[a]={total:0,above:0,ccDriven:0,sumMaxBitrateDiff:0,sumThroughputDiff:0,prevCsioAvgBRKbps:0},Sb[a])},c=function(a,c,d,e,f){var g=b(a.ssrc);a.csioSCSValidationSampleCount=++g.total,g.sumMaxBitrateDiff+=c,a.csioAvgMaxBitrateDiff=g.sumMaxBitrateDiff/g.total,g.sumThroughputDiff+=d,a.csioAvgDeltaThroughput=g.sumThroughputDiff/g.total,e&&(g.above+=1),a.csioMaxBitrateAboveRatio=g.above/g.total,f&&(g.ccDriven+=1),a.csioCCDrivenRatio=g.ccDriven/g.total},d=0;$a.rtc_rtp_parameters.encodings.forEach(function(a){a&&(d=Math.max(d,a.maxBitrate))});var e=0;if(_a){_a.encodings.forEach(function(a){e=Math.max(e,a.maxBitrate)});var f=0,g=0,h=null,i=null;a.streams.forEach(function(a){var j=a.data,k=b(j.ssrc);\"video\"===j.mediaType&&a.streamType===ub.outbound&&(0<e&&.9*e<1e3*j.csioAvgBRKbps?(f=d-e,i=!1):(f=d-1e3*j.csioAvgBRKbps,i=!0),h=0<f,g=j.csioAvgBRKbps-k.prevCsioAvgBRKbps,k.prevCsioAvgBRKbps=j.csioAvgBRKbps,c(j,f,g,h,i))})}}function e(){return window.performance.now?window.performance.now():null}function f(){navigator&&\"function\"==typeof navigator.getBattery&&navigator.getBattery().then(function(a){Xa=a})}function g(){if(Xa)return Xa.level}function h(){if(Xa)return Xa.charging}function i(a,b){return a.sort().toString()===b.sort().toString()}function j(a,b,c){navigator&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&navigator.mediaDevices.enumerateDevices().then(function(d){la?i(la,d)||(la=d,_b(a,b,c)):(la=d,_b(a,b,c)),setTimeout(function(){j(a,b,c)},sa)}).catch(function(){setTimeout(function(){j(a,b,c)},sa)})}function k(){Z&&Z().then(function(a){ka=JSON.parse(a),setTimeout(function(){k()},ta)}).catch(function(){setTimeout(function(){k()},ta)})}function l(){qa||window&&window.addEventListener&&window.addEventListener(\"beforeunload\",function(a){var b;for(b in ab)ab.hasOwnProperty(b)&&Xb(jb.userLeft,null,b,ab[b].ucID,null,null,null);return cb&&(bb.offsetResults=[],bb.syncHandler=null,cb=!1),\"Are you sure you want to close the call?\"})}function m(a,b,c,d,f){var g=kc(c,d),h=null;g&&(h=e(),Xb(jb.mediaPlaybackStartEvent,b,c,a,{ssrc:f,highResTs:h},g,null))}function n(a,b,c,d,f){var g=kc(c,d),h=null;g&&(h=e(),Xb(jb.mediaSuspendedEvent,b,c,a,{ssrc:f,highResTs:h},g,null))}function o(a,b,c,d){var e,f=document.getElementById(b);f&&(f.oncanplay=function(){e=ab[a].ucID;var b=jc(a,c);b&&m(e,b.remoteUserID,a,c,d)},f.onsuspend=function(){e=ab[a].ucID;var b=jc(a,c);b&&n(e,b.remoteUserID,a,c,d)})}function p(a){var b=Aa.codebase,c=!1;if(null===a)c=!1;else if(b===Fb.firefox){var d=typeof mozRTCPeerConnection,e=typeof RTCPeerConnection;\"undefined\"!==d&&a instanceof mozRTCPeerConnection?c=!0:\"undefined\"!==e&&a instanceof RTCPeerConnection&&(c=!0)}else null!==hb&&a instanceof hb&&(c=!0),\"function\"!=typeof a&&b!==Fb.edge||(c=!0),void 0!==typeof a.createOffer&&(c=!0);return c}function q(a,b){var c;return a&&(b===Fb.chrome?a.googLocalAddress?(c=a.googLocalAddress,c.concat(\":\",a.googRemoteAddress)):a.selectedCandidatePairId&&(c=a.selectedCandidatePairId):b===Fb.firefox&&(a.localAddr?(c=a.localAddr,c.concat(\":\",a.remoteAddr)):a.selectedCandidatePairId&&(c=a.selectedCandidatePairId))),cc(c)}function r(){var a;return a=navigator.onLine===!0?\"online\":\"offline\"}function s(a,b,c){var d=null;c.ssrcMap.hasOwnProperty(a.data.ssrc)&&(c.ssrcMap[a.data.ssrc].mediaType=a.data.mediaType,a.data.googCodecName?d=a.data.googCodecName:a.data.codec&&(d=a.data.codec),c.ssrcMap[a.data.ssrc].codec=d,a.data.codecImplementationName&&(c.ssrcMap[a.data.ssrc].codecImplementationName=a.data.codecImplementationName))}function t(a,b,c){var d,e,f,g,h,i,j,k,l=[];if(void 0!==a.lastStatsSent&&void 0!==a.lastStatsSent.statistics.Transport)for(f=a.lastStatsSent.statistics.Transport,g=a.latestEventSent,h=void 0,d=0;d<b.length;d++){for(h=void 0,e=0;e<f.length;e++)if(b[d].hash===f[e].hash){h=f[e];break}void 0!==h&&(i=parseInt(h.bytesReceived,10),j=parseInt(h.bytesSent,10),k=c-g,k>0&&(b[d].csioReceivedBwKbps=8*(parseInt(b[d].bytesReceived,10)-i)/k,b[d].csioSentBwKbps=8*(parseInt(b[d].bytesSent,10)-j)/k,b[d].csioIntBytesReceived=parseInt(b[d].bytesReceived,10)-i,b[d].csioIntBytesSent=parseInt(b[d].bytesSent,10)-j,void 0!==h.packetsSent&&void 0!==b[d].packetsSent&&(b[d].csioSentPacketRate=(parseInt(b[d].packetsSent,10)-parseInt(h.packetsSent,10))/(k/1e3),b[d].csioIntPacketsSent=parseInt(b[d].packetsSent,10)-parseInt(h.packetsSent,10)),void 0!==h.packetsReceived&&void 0!==b[d].packetsReceived&&(b[d].csioReceivedPacketRate=(parseInt(b[d].packetsReceived,10)-parseInt(h.packetsReceived,10))/(k/1e3),b[d].csioIntPacketsReceived=parseInt(b[d].packetsReceived,10)-parseInt(h.packetsReceived,10))),l.push(b[d]))}return l}function u(a,b,c,d){var e=[];return c===Fb.firefox?e=b:b&&(e=t(a,b,d)),e}function v(a){var b,c,d;for(b in a.streams)if(a.streams.hasOwnProperty(b)){if(a.streams[b].inbound)for(d in a.streams[b].inbound)a.streams[b].inbound.hasOwnProperty(d)&&(c=a.streams[b].inbound[d].mark,c===wb.bad?a.streams[b].inbound[d].mark=2:c===wb.fair?a.streams[b].inbound[d].mark=1:a.streams[b].inbound[d].mark=0);if(a.streams[b].outbound)for(d in a.streams[b].outbound)a.streams[b].outbound.hasOwnProperty(d)&&(c=a.streams[b].outbound[d].mark,c===wb.bad?a.streams[b].outbound[d].mark=2:c===wb.fair?a.streams[b].outbound[d].mark=1:a.streams[b].outbound[d].mark=0)}return a}function w(a){var b={},c=od.getConferenceURL();return a.connectionState&&(b.connectionState=a.connectionState),a.fabricState&&(b.fabricState=a.fabricState),c&&(b.conferenceURL=c),b.streams={},null===a.streams?b:(a.streams.forEach(function(a){var c={cname:a.cname,ssrc:a.ssrc,msid:a.msid,remoteUserID:a.userID,usageLabel:a.usage,associatedVideoTag:a.associatedVideoTag};a.data.hasOwnProperty(\"csioIntFL\")&&(c.fractionLoss=a.data.csioIntFL),a.data.hasOwnProperty(\"csioIntBRKbps\")&&(c.bitrate=a.data.csioIntBRKbps),a.data.hasOwnProperty(\"csioMark\")&&(c.quality=a.data.csioMark),a.data.hasOwnProperty(\"csioMediaType\")&&(c.mediaType=a.data.csioMediaType),a.data.hasOwnProperty(\"googRtt\")&&(c.rtt=a.data.googRtt),a.data.hasOwnProperty(\"mozRtt\")&&(c.rtt=a.data.mozRtt),a.data.hasOwnProperty(\"roundTripTime\")&&(c.rtt=a.data.roundTripTime),a.data.hasOwnProperty(\"jitter\")&&(c.jitter=a.data.jitter),a.data.hasOwnProperty(\"googJitterReceived\")&&(c.jitter=a.data.googJitterReceived),a.data.hasOwnProperty(\"audioOutputLevel\")&&(c.audioOutputLevel=a.data.audioOutputLevel),a.data.hasOwnProperty(\"audioInputLevel\")&&(c.audioInputLevel=a.data.audioInputLevel),a.data.hasOwnProperty(\"audioLevel\")&&(c.audioLevel=a.data.audioLevel),a.data.hasOwnProperty(\"csioAvgRtt\")&&(c.averageRTT=a.data.csioAvgRtt),a.data.hasOwnProperty(\"csioAvgJitter\")&&(c.averageJitter=a.data.csioAvgJitter),a.data.hasOwnProperty(\"csioPktLossPercentage\")&&(c.packetLossPercentage=a.data.csioPktLossPercentage),a.reportType&&\"local\"===a.reportType?a.streamType&&(c.statsType=a.streamType+\"-rtp\"):a.reportType&&\"remote\"===a.reportType&&a.streamType&&(c.statsType=\"remote-\"+a.streamType+\"-rtp\"),b.streams[a.ssrc]=c}),b)}function x(a,b,d,e,f,g){var h=c();a.hasOwnProperty(\"token\")&&a.hasOwnProperty(\"ucID\")&&!cb?(S(kb.processedStats,a,g),b.latestEventSent=h,b.lastFabricState=b.pcState):(a.clockUnsynced=cb,Oa.cacheEvent({channel:kb.processedStats,data:a}))}function y(a,b){for(var c in b)b.hasOwnProperty(c)&&\"id\"!==c&&\"type\"!==c&&\"timestamp\"!==c&&(a[c]=b[c]);return a}function z(a,e,f,i,j){function k(k){if(k){var l=c(),m=b();void 0===i.lastRawStatsSentInterval||null===i.lastRawStatsSentInterval?i.lastRawStatsSentInterval=m-i.statsPollingStart:i.lastRawStatsSentInterval=m-i.rawstatsTS+i.lastRawStatsSentInterval,void 0===i.lastProcessedStatsSentInterval||null===i.lastProcessedStatsSentInterval?i.lastProcessedStatsSentInterval=Fa+1:i.lastProcessedStatsSentInterval=m-i.rawstatsTS+i.lastProcessedStatsSentInterval,i.rawstatsTS=m;var n={},o=Aa.codebase,p=i.conferenceID,t=i.remoteUserID;n.version=da,n.appID=ma,n.conferenceID=encodeURIComponent(p),n.apiTS=l,n.timeShift=0,n.fabricState=i.pcState,n.pcID=i.pcHash,void 0!==f&&(n.ucID=f),Ua.authToken&&(n.token=Ua.authToken),n.localID=encodeURIComponent(e),n.remoteID=t?encodeURIComponent(t):null,n.deviceID=pa;var y,z,A,C,G,H,J,K={streams:[]},L=null,M=!1,N=!1,O={},P={};for(L=nc(k),y=0;y<L.length;++y)if(z=E(L[y]),A=B(z),!F(A))if(A.hasOwnProperty(\"Transport\"))C=\"Transport\",K.hasOwnProperty(C)||(K[C]=[]),o!==Fb.firefox?(parseInt(A[C].bytesReceived,10)>0||parseInt(A[C].bytesSent,10)>0)&&(K[C].push(A[C]),\"true\"!==A[C].googActiveConnection&&A[C].googActiveConnection!==!0||(n.activeConnectionIndex=K[C].length)):(K[C].push(A[C]),\"true\"!==A[C].selected&&A[C].selected!==!0||(n.activeConnectionIndex=K[C].length));else if(A.localCandidate)O[A.localCandidate.id]=A.localCandidate;else if(A.remoteCandidate)P[A.remoteCandidate.id]=A.remoteCandidate;else if(A.bwe)K.bwe=A.bwe;else if(A.trackStats)K.trackStats||(K.trackStats=[]),K.trackStats.push(A.trackStats);else if(A.codec)K.codec||(K.codec=[]),K.codec.push(A.codec);else if(A.candidatePair)K.candidatePair||(K.candidatePair=[]),K.candidatePair.push(A.candidatePair);else{H=Ub(i,A.ssrc),void 0!==H&&H.localStartTime||(J=Wb(t,p,f,i,j,null),J&&(N=!0),H=Ub(i,A.ssrc)),H&&(G=H.remoteUserID),void 0===G&&(G=t);var Q={userID:G,data:A.data,reportType:A.reportType,streamType:A.streamType,ssrc:A.ssrc};void 0!==H&&(Q.cname=H.cname,Q.msid=H.msid,Q.associatedVideoTag=H.associatedVideoTag,Q.usage=H.usageLabel),K.streams.push(Q)}if(n.statistics=K,K.Transport&&(M=D(K.Transport,i)),M&&cd(j,jb.fabricTransportSwitch,p),K.Transport||o!==Fb.firefox||(K.Transport=K.candidatePair.filter(function(a){return!(!a.selected&&\"true\"!==a.selected)})),K.Transport)for(var R=0;R<K.Transport.length;R++)K.Transport[R].hash=q(K.Transport[R],o);i.pcState===xb.disrupted&&I(n),K.trackStats&&(K=hd(K)),K.Transport&&K.candidatePair&&(K=gd(K)),N&&Xb(jb.ssrcMap,t,p,f,Vb(i),i.pcHash),Za&&(Xb(kb.senderConfiguration,t,p,f,$a,i.pcHash),Za=!1);var S={},T={response:null},V={response:null},W={response:null},X=null;if(ja.fire(ja.events.OnPolling,{streams:K.streams,codeBase:o}),ja.fire(ja.events.OnOneWayAudioDisruptionsRequest,V),null!==V.response&&V.response.forEach(function(a){X={mediaType:a.mediaType,ssrc:a.ssrc,disruptionType:a.type},Xb(jb.oneWayMedia,t,p,f,X,i.pcHash)}),ja.fire(ja.events.OnSendingThroughputObservationsRequest,W),null!==W.response&&(X=W.response,Xb(kb.sendingThroughputObservations,t,p,f,X,i.pcHash)),ja.fire(ja.events.OnStatsRequest,T),null!==T.response){if(T.response.streams)for(y=0;y<T.response.streams.length;y++)s(T.response.streams[y],o,i);S.streams=T.response.streams;for(var Y=0<Ma.length,Z=0,$=function(a){a.data.ssrc===Z&&(Y|=\"audio\"===a.mediaType&&a.streamType===ub.inbound)};0<Ma.length;)Z=Ma.shift(),S.streams.forEach($);if(Y){var _={mediaType:\"audio\",ssrc:null,disruptionType:vb.noInboundAudioOnlyFabric};Xb(jb.oneWayMedia,t,p,f,_,i.pcHash)}if(S.fabricState=i.pcState,S.connectionState=r(),K.Transport&&(S.Transport=u(i,K.Transport,o,l)),K.bwe&&(S.bwe=K.bwe),void 0===i.processedStatsTupleArray&&(i.processedStatsTupleArray=[]),Da.stats){var aa=w(S);Da.stats(aa)}S.apiTS=l,S.batteryStatus={},S.batteryStatus.batteryLevel=g(),S.batteryStatus.isBatteryCharging=h(),S.wifiStats=ka,S=v(S),d(S),i.processedStatsTupleArray.push(S),n.processedStatistics=i.processedStatsTupleArray,i.lastStatsSent=n;var ba=U(n);delete ba.statistics,i.lastProcessedStatsSentInterval>=Fa&&(i.processedStatsTupleArray=[],Ra.add(ba,ba.processedStatistics.length),ba.msgStat=Ra.getStat(),x(ba,i,p,t,e,a),i.lastProcessedStatsSentInterval=0)}}}return k}function A(a){var b;return yb.hasOwnProperty(a)?a===yb.createOffer||a===yb.createAnswer||a===yb.setRemoteDescription?b=zb.negotiationFailure:a===yb.setLocalDescription?b=zb.sdpError:a===yb.addIceCandidate?b=zb.sdpError:a===yb.getUserMedia?b=zb.mediaConfigError:a===yb.iceConnectionFailure?b=zb.iceFailure:a===yb.signalingError?b=zb.signalingError:(a===yb.applicationLog||yb.applicationError)&&(b=zb.applicationLog):b=Pb.invalidWebRTCFunctionName,b}function B(a){var b={};if(\"inboundrtp\"===a.type||\"outboundrtp\"===a.type||\"inbound-rtp\"===a.type||\"outbound-rtp\"===a.type){if(b.ssrc=a.ssrc,b.streamType=\"inboundrtp\"===a.type||\"inbound-rtp\"===a.type?\"inbound\":\"outbound\",\"Safari\"===Aa.name&&!a.mediaType){a.id.includes(\"Audio\")?a.mediaType=\"audio\":a.id.includes(\"Video\")&&(a.mediaType=\"video\");var c=a.id.split(\"_\");if(c[1])try{a.ssrc=parseInt(c[1]),b.ssrc=a.ssrc}catch(a){}}b.data=a,void 0!==a.isRemote?b.reportType=\"true\"===a.isRemote||a.isRemote===!0?\"remote\":\"local\":b.reportType=\"local\",a.trackId&&(b.trackId=a.trackId),a.mediaType&&(b.mediaType=a.mediaType)}else\"candidatepair\"===a.type&&a.selected?b.Transport=a:\"localcandidate\"===a.type||\"local-candidate\"===a.type?b.localCandidate=a:\"remotecandidate\"===a.type||\"remote-candidate\"===a.type?b.remoteCandidate=a:\"transport\"===a.type||\"googCandidatePair\"===a.type?b.Transport=a:\"VideoBwe\"===a.type?b.bwe=a:\"track\"===a.type?b.trackStats=a:\"candidate-pair\"===a.type?b.candidatePair=a:\"codec\"===a.type?b.codec=a:\"ssrc\"===a.type&&(b.reportType=\"local\",a.bytesSent?b.streamType=\"outbound\":b.streamType=\"inbound\",b.ssrc=a.ssrc,b.data=a);return b}function C(a){var b=\"None\";switch(a){case 0:b=\"TURN/TLS\";break;case 1:b=\"TURN/TCP\";break;case 2:b=\"TURN/UDP\"}return b}function D(a,b){var c,d,e,f,g,h,i,j,k,l=!1,m=\"None\",n=!1,o=Aa.codebase,p=function(a){if(a.typePreference){var b=a.typePreference>>24;return\"rtp\"===a.protocol&&a.address===c&&(b>=0&&b<=2&&(m=C(b)),!0)}return!1};for(i=0;i<a.length;i++)if(j=a[i],o!==Fb.firefox||\"candidatepair\"!==j.type||\"true\"!==j.selected&&j.selected!==!0?\"googCandidatePair\"!==j.type||\"true\"!==j.googActiveConnection&&j.googActiveConnection!==!0?\"transport\"===j.type&&(n=!0,j.selectedCandidatePairId&&(k=j.selectedCandidatePairId)):(n=!0,c=j.googLocalAddress,d=j.googRemoteAddress,e=j.googLocalCandidateType,f=j.googRemoteCandidateType,g=j.googTransportType):(n=!0,c=j.localAddr,d=j.remoteAddr,e=j.localAddrType,f=j.remoteAddrType,g=j.transportType),n){c&&(h=0===c.indexOf(\"[\")),b.iceCandidates.some(p);break}if(!n)return l;var q=b.transportData;return void 0!==q&&q.localAddr===c&&q.remoteAddr===d&&q.transportType===g&&q.selectedCandidatePairId===k||(b.transportData={localAddr:c,remoteAddr:d,localAddrType:e,remoteAddrType:f,transportType:g,ipv6:h,relayType:m,selectedCandidatePairId:k},l=!0),l}function E(a){var b,c={};a.timestamp instanceof Date&&(c.timestamp=a.timestamp.getTime().toString()),a.type&&(c.type=a.type);var d=0;if(a.names){var e=a.names();for(d=0;d<e.length;++d)c[e[d]]=a.stat(e[d])}else for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);if(c.values){for(d=0;d<c.values.length;++d){a=c.values[d];for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b])}delete c.values}return c}function F(a){if(null===a)return!0;if(a.length>0)return!1;if(0===a.length)return!0;var b;for(b in a)if(a.hasOwnProperty(b))return!1;return!0}function G(a){return{magicKey:a,statsSubmissionInterval:Fa,endpoint:Ya,localUserIDObject:oa}}function H(a,b,c){var d=ab[a];void 0===d&&(ab[a]={},ab[a].participants=null,c&&(ab[a].userJoinedSent=!0),b&&(ab[a].refreshPresence=b))}function I(a){var b,c=a.statistics.outbound;if(void 0!==c)for(b in c)c.hasOwnProperty(b)&&(c[b].data.mozRtt?c[b].data.mozRtt=0:c[b].data.googRtt?c[b].data.googRtt=0:c[b].data.rtt?c[b].data.rtt=0:c[b].data.roundTripTime&&(c[b].data.roundTripTime=0))}function J(a){return clearInterval(a),null}function K(){var a;for(a in ab)ab.hasOwnProperty(a)&&(ab[a].refreshPresence=J(ab[a].refreshPresence),delete ab[a].refreshPresence);W()}function L(a){var b=!1;if(!a)return b;var c=ab[a];return void 0!==c&&c.participants&&c.participants.length>0&&(b=!0),b}function M(a,b){var c=ab[a],d=[];if(void 0===c)d.push(b),ab[a]={},ab[a].participants=d;else{var e=c.participants;null===e?(d.push(b),c.participants=d):e.push(b)}}function N(a){var b=!1;if(!ab[a])return{conferenceFinished:b,ucID:null};var c=ab[a].ucID;return 0===ab[a].participants.length&&(J(ab[a].refreshPresence),W(),Oa.sendCachedEvents(Ua,cb),delete ab[a],b=!0),{conferenceFinished:b,ucID:c}}function O(a,b){Xb(jb.userLeft,null,a,b,null,null,null),W(),db=Rb,Rb=null}function P(){var a,b=function(a){return setInterval(function(){ac(a)},Ha)};for(a in ab)if(ab.hasOwnProperty(a)){if(a===ia)return;ac(a),ab[a].refreshPresence=b(a)}X()}function Q(){bb.syncHandler||(Ob(ma,na,\"log\",{msg:\"start clockSync\"}),bb.offsetResults=[],ld(),bb.syncHandler=!0)}function R(a){try{if(window&&window.sessionStorage){var b=JSON.parse(window.sessionStorage.getItem(\"csio_ucid_data\"));if(b&&b[a])return b[a].ucID}}catch(a){return null}return null}function S(a,b,c){var d=b.action,e=b.remoteID,f=b.ucID;b.channel=a,Ua._isTokenValid(Ua.authToken,ma,na)?(f&&!cb&&e||Hb.indexOf(d)!==-1)&&b.conferenceID!==ia?(b.token=Ua.authToken,pd(a,b,c),c&&d&&c(nb.success,d+\" sent to the backend.\")):(b.clockUnsynced=cb,Oa.cacheEvent({channel:a,data:b,callback:c})):Ua.sendAuthenticationRequest(ma,na,function(g,h){g!==nb.success?(g===ob.authOngoing&&(b.clockUnsynced=cb,Oa.cacheEvent({channel:a,data:b,callback:c})),c&&g!==ob.authOngoing&&c(g,h)):g===nb.success&&\"SDK authentication successful.\"===h&&((f&&!cb&&e||Hb.indexOf(d)!==-1)&&b.conferenceID!==ia?(b.token=Ua.authToken,pd(a,b,c),c&&d&&c(nb.success,d+\" sent to the backend.\")):(b.clockUnsynced=cb,Oa.cacheEvent({channel:a,data:b,callback:c})))})}function T(a){a&&a(ob.authOngoing,\"Authentication Ongoing\")}function U(a){var b;if(null===a||\"object\"!=typeof a)return a;if(a instanceof Array){b=[];for(var c=0,d=a.length;c<d;c++)b[c]=U(a[c]);return b}if(a instanceof Object){b={};for(var e in a)a.hasOwnProperty(e)&&(b[e]=U(a[e]));return b}}function V(){var a={};Object.keys(ab).forEach(function(b){var c=ab[b];if(!c)return!0;var d,e,f={ucID:c.ucID,userJoinedSent:c.userJoinedSent},g=[];if(c.participants){var h,i=c.participants;for(d=0;d<i.length;d++)e={},h=i[d],e={pcID:h.pcHash,pcState:h.pcState,iceConnectionState:h.iceConnectionState,iceGatheringState:h.iceGatheringState,iceCandidatesNumber:h.iceCandidates.length,remoteUserID:h.remoteUserID},g.push(e)}f.participants=g,a[b]=f});var b={authStatus:!!Ua.tokenData,clockSync:!cb,stateMachine:a,pageURL:window.location.href,eventType:\"warn\",version:da};b.wsStatus=od.getWSConnectionState(),Ob(ma,na,\"stateMachine\",b)}function W(){eb||(eb=setInterval(function(){V()},fb))}function X(){J(eb),eb=null}function Y(){Array.prototype.find||Object.defineProperty(Array.prototype,\"find\",{value:function(a){if(null===this)throw new TypeError(\"Array.prototype.find called on null or undefined\");if(\"function\"!=typeof a)throw new TypeError(\"predicate must be a function\");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;f<d;f++)if(b=c[f],a.call(e,b,f,c))return b}})}var Z,$=require(\"./callstatsUtils\"),_=require(\"./statsReporter\"),aa=require(\"./pcCallbackHandler\"),ba=\"https://collector.callstats.io:443/\",ca=\"https://auth.callstats.io/\",da=\"3.27.0\",ea=\"wss://collector.callstats.io:443/csiows/collectCallStats\",fa=\"https://dashboard.callstats.io/apps/\",ga=\"https://dashboard.callstats.io/api-internal/v1/qmodelthresholds\",ha=\"https://appsettings.callstats.io/v1/apps/\",ia=\"csio-conf-id-tmp\",ja=new _.Reporter,ka=null;window&&(window.csioChromeLegacyGetStats=!0);var la,ma=null,na=null,oa=null,pa=null,qa=!1,ra=!1,sa=1e4,ta=1e4,ua=1e3,va=\"\",wa=function(a,b){var c=\"precalltest error (\"+a+\"): \"+b;console.warn(c),Ob&&Ob(ma,na,\"log\",{msg:c}),va+=\"(error)\"},xa=require(\"precalltest\"),ya=null;try{ya=new xa.PreCallTest}catch(a){wa(\"initializing\",a)}var za,Aa,Ba=[],Ca={create:Date.now()},Da={stats:null,defaultConfig:null,recommendedConfig:null,preCallTest:null},Ea=2e4,Fa=15e3,Ga=!1,Ha=1e4,Ia=5e3,Ja=2e3,Ka=!0,La=!0,Ma=[],Na=function(){function a(a,b){setTimeout(function(){var b=c(),d=b-a.data.apiTS;a.data.timeShift=d,S(a.channel,a.data,a.callback)},b)}this.eventCache=[],this.updateRemoteUserID=function(a,b){for(var c,d=this,e=0;e<d.eventCache.length;e++)c=d.eventCache[e],c.data.pcID===b&&(c.data.remoteID=a)},this.sendCachedEvents=function(b,d,e,f,g,h){var i=this;if(0!==i.eventCache.length){if(!b.authToken)return void b.sendAuthenticationRequest(ma,na);if(!d){var j,k,l,m,n=c(),o=[],p=Math.max(Fa/i.eventCache.length,gb);for(j=0;j<i.eventCache.length;j++)if(l=i.eventCache[j],!l.data.remoteID&&l.data.pcID||l.data.conferenceID===ia)o.push(i.eventCache[j]);else if(l.data.action!==jb.userJoined){if(l.data.token=b.authToken,e&&l.data.apiTS>=n-f||!l.data.ucID)if(m=decodeURIComponent(l.data.conferenceID),ab[m]&&ab[m].ucID)l.data.ucID=ab[m].ucID;else{if(m!==g){o.push(i.eventCache[j]);continue}l.data.ucID=h}if(l.data.clockUnsynced&&(l.data.apiTS+=bb.currentOffset),l.channel===kb.processedStats&&l.data.clockUnsynced&&l.data.processedStatistics&&l.data.processedStatistics.length>0)for(k=0;k<l.data.processedStatistics.length;k++)l.data.processedStatistics[k].apiTS+=bb.currentOffset;delete l.data.clockUnsynced,a(l,p*(j+1))}else o.push(i.eventCache[j]);i.eventCache=o}}},this.sendCachedUserJoinedEvents=function(b){var c=this;if(0!==c.eventCache.length){if(!b.authToken)return void b.sendAuthenticationRequest(ma,na);var d,e,f=[],g=Math.max(Fa/c.eventCache.length,gb);for(d=0;d<c.eventCache.length;d++)e=c.eventCache[d],!e.data.remoteID&&e.data.pcID||e.data.conferenceID===ia?f.push(c.eventCache[d]):e.data.action===jb.userJoined||e.data.action===ib.fabricSetupFailed?(e.data.token=b.authToken,e.data.clockUnsynced&&(e.data.apiTS=e.data.apiTS+bb.currentOffset),e.data.value&&(e.data.value.statsSubmissionInterval=Fa),a(e,g*(d+1))):f.push(c.eventCache[d]);c.eventCache=f}},this.updateConferenceId=function(a){for(var b,c=this,d=0;d<c.eventCache.length;d++)b=c.eventCache[d],b.data.conferenceID===ia&&(b.data.conferenceID=a)},this.cacheEvent=function(a){this.eventCache.push(a)},this.sendCachedFeedback=function(){var a=Jb(\"feedback\"),b=JSON.parse(Jb(\"csio_auth_data\"));if(a&&b){var c=JSON.parse(a),d=b===c.token;d||na!==c.userID||(c.token=b,d=!0),d?S(kb.userFeedback,c):Kb(\"feedback\")}}},Oa=new Na,Pa=function(){this.size_max=0,this.size_ewma=0,this.statNum_max=0,this.statNum_ewma=0,this.msg_num=0,this.maxInterval=0,this.minInterval=0,this.avgInterval=0,this.stdInterval=0},Qa=function(){this.stat=new Pa,this.lastTime=null,this.samplesCount=0,this.add=function(a,c){var d=this.memorySizeOf(a);if(this.stat.size_ewma=.5*this.stat.size_ewma+.5*d,this.stat.size_max<d&&(this.stat.size_max=d),this.stat.statNum_ewma=.5*this.stat.statNum_ewma+.5*c,this.stat.statNum_max<c&&(this.stat.statNum_max=c),this.stat.msg_num+=1,null===this.lastTime)return void(this.lastTime=b());var e=b()-this.lastTime;this.lastTime=b(),(0===this.stat.maxInterval||this.stat.maxInterval<e)&&(this.maxInterval=e),(0===this.stat.minInterval||e<this.stat.minInterval)&&(this.minInterval=e),this.stat.avgInterval=(this.stat.avgInterval*this.samplesCount+e)/(this.samplesCount+c),this.samplesCount+=c,this.stat.stdInterval=(31*this.stat.stdInterval+Math.abs(this.stat.avgInterval-e))/32},this.getStat=function(){return this.stat},this.memorySizeOf=function(a){function b(a){if(null!==a&&void 0!==a)switch(typeof a){case\"number\":c+=8;break;case\"string\":c+=2*a.length;break;case\"boolean\":c+=4;break;case\"object\":var d=Object.prototype.toString.call(a).slice(8,-1);if(\"Object\"===d||\"Array\"===d)for(var e in a)a.hasOwnProperty(e)&&b(a[e]);else c+=2*a.toString().length}return c}var c=0;return b(a)}},Ra=new Qa,Sa={appSecret:\"appSecret\",jwt:\"jwt\"},Ta=function(){var a=this,b=\"urn:x-callstats:auth:errorActions\",d=.9;this.authInProgress=!1,this.tokenData=null,this.authToken=null,this.type=Sa.appSecret,this.tokenGenerator=function(a,b){b(\"Token generator not set\")};var e=null,f=null,g=!1,h=window.atob,i=window.btoa,j=[\"Authentication Internal Error\",\"Invalid Credentials\",\"Invalid Credentials\",\"Invalid Credentials\",\"Invalid Credentials\",\"Origin URL missmatch\",\"Invalid Credentials\",\"Authentication Protocol Error\"],k=function(a){return i(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(a,b){return String.fromCharCode(\"0x\"+b)}))},l=function(a){return i(a).replace(/\\+/g,\"-\").replace(/\\//g,\"_\").replace(/\\=+$/,\"\")},m=function(a){return k(a).replace(/\\+/g,\"-\").replace(/\\//g,\"_\").replace(/\\=+$/,\"\")},n=function(a){for(var b=h(a.replace(/[ \\r\\n]+$/,\"\")),c=[],d=0;d<b.length;++d){var e=b.charCodeAt(d).toString(16);1===e.length&&(e=\"0\"+e),c.push(e)}return c.join(\"\")},o={};o.cryptotype=null,window.crypto&&window.crypto.subtle?(o.cryptotype=\"standard\",o.subtlecrypto=window.crypto.subtle):window.crypto&&!window.crypto.subtle&&window.crypto.webkitSubtle?(o.cryptotype=\"webkit\",o.subtlecrypto=window.crypto.webkitSubtle):window.msCrypto&&window.msCrypto.subtle?(o.cryptotype=\"ie\",o.subtlecrypto=window.msCrypto.subtle):(o.subtlecrypto=null,console.info(\"WebCryptography API not supported in this browser.\")),o.sign=function(a,b,c,d){if(\"HS256\"!==a.alg)return d(\"Use header.alg=HS256\");a=JSON.stringify(a),\"string\"!=typeof b&&(b=JSON.stringify(b));var e=m(a)+\".\"+m(b);if(window.csioReactNative)return void window.csiosign(e,c,function(a,b){return a?(console.log(\"Token sign error\",a),d(a)):d(null,b)});for(var f=new ArrayBuffer(e.length),g=new Uint8Array(f),h=e.length-1;h>=0;h--)g[h]=e.charCodeAt(h);var i=function(a){for(var b=\"\",c=new Uint8Array(a),f=c.byteLength,g=0;g<f;g++)b+=String.fromCharCode(c[g]);return e+=\".\"+l(b),d(null,e)},j=function(a){return d(a)},k={name:\"HMAC\"};\"ie\"!==o.cryptotype&&\"webkit\"!==o.cryptotype||(k.hash={name:\"sha-256\"});var n=o.subtlecrypto.sign(k,c,g);\"ie\"===o.cryptotype?(n.onerror=j,n.oncomplete=function(a){i(a.target.result)}):n.then(i).catch(j)},o.decode=function(a){try{return JSON.parse(h(a.split(\".\")[1]))}catch(a){return console.error(\"Couldn't decode token. \",a),null}},o.importKey=function(a,b,c){if(window.csioReactNative)return void b(a);if(\"webkit\"===o.cryptotype)for(;a.length<32;)a+=\"\\0\";var d={kty:\"oct\",k:l(a),alg:\"HS256\"},e={name:\"HMAC\",hash:{name:\"SHA-256\"}};if(\"ie\"===o.cryptotype?d.extractable=!1:d.ext=!1,\"webkit\"===o.cryptotype&&(e=null,d.use=\"sig\"),\"ie\"===o.cryptotype||\"webkit\"===o.cryptotype){var f=JSON.stringify(d);d=new Uint8Array(f.length);for(var g=0;g<f.length;g++)d[g]=f.charCodeAt(g)}var h=o.subtlecrypto.importKey(\"jwk\",d,e,!1,[\"sign\"]);\"ie\"===o.cryptotype?(h.onerror=c,h.oncomplete=function(a){b(a.target.result)}):h.then(b).catch(c)},this.setAuthType=function(a){this.type=a},this._isTokenValid=function(a,b,d){var e=!1,f=Aa.codebase;if(null===a)return!1;try{var g=o.decode(a);if(null!==g&&g.appID===b&&g.userID===encodeURIComponent(d)){var h=null;if(f===Fb.firefox){var i=g.expiry.split(\" \").join(\"T\");h=Date.parse(i)}else h=new Date(g.expiry);var j=new Date(c());j<h&&(e=!0)}return e}catch(a){}return!1},this.setupAuthToken=function(a){Ib(\"csio_auth_data\",JSON.stringify(a)),this.authToken=a,this.tokenData=o.decode(a),Fa=parseInt(this.tokenData.submissionInterval,10),ja.setSubmissionInterval(Fa),ja.setReportingMode(this.tokenData.adaptiveInterval),Ga=this.tokenData.collectSDP},this.sendAuthenticationRequest=function(c,f,h){if(c&&f){if(a.authInProgress)return void T(h);null!==e&&(clearTimeout(e),e=null),p(),a.authInProgress=!0,a.tokenGenerator(g,function(i,j){if(null!==i)return a.authInProgress=!1,void(h&&h(nb.tokenGenerationError,i.toString()));var k=ca+\"authenticate\",l={client_id:f+\"@\"+ma,code:j,grant_type:\"authorization_code\"};jd(k,l,function(i,j){var k=null;a.authInProgress=!1,Ca.auth=j;try{k=JSON.parse(i.response)}catch(a){console.error(\"Authentication response parse error\")}if(!k)return void(e=setTimeout(a.sendAuthenticationRequest,Ia,c,f,h));if(200===i.status){if(\"bearer\"!==k.token_type)return console.error(\"Authentication was successful, but token type was not bearer. Scheduling retry.\"),void(e=setTimeout(a.sendAuthenticationRequest,Ia,c,f,h));a.setupAuthToken(k.access_token);var l=parseInt(1e3*parseInt(k.expires_in)*d);if(q(l,c,f,h),g=!1,h&&h(nb.success,\"SDK authentication successful.\"),k.iceServers&&!ra&&ya)try{va=k.iceServers[0].username+\" \",ya.start(k.iceServers,gc.bind(this)),Ob(ma,na,\"log\",{msg:\"precalltest started \"+va}),va+=\"(started)\"}catch(a){wa(\"start\",a),ya.crashDisconnect()}ra&&(Ob(ma,na,\"log\",{msg:\"precalltest disabled \"+va}),va+=\"(disabled)\"),hc(),od._isChannelReady()?(Oa.sendCachedUserJoinedEvents(Ua),h&&h(nb.success,\"WebSocket establishment successful.\")):od._setupWebSocketConnection(function(a,b){h&&h(a,b)})}else{if(k[b]&&k[b].length>0)return r(c,f,h,k[b],a.type);console.error(\"Authentication failed, but no error actions were defined in response.\"),e=setTimeout(a.sendAuthenticationRequest,Ia,c,f,h)}})})}};var p=function(){null!==f&&(clearTimeout(f),f=null)},q=function(b,c,d,e){p(),f=setTimeout(function(){a.sendAuthenticationRequest(c,d,e)},b)},r=function(a,b,c,d,e){if(0!==d.length){var f=d.shift();if(f.action===Qb.RETRY)return e===Sa.jwt&&q(f.params.timeout,a,b,c),r(a,b,c,d);if(f.action===Qb.GET_NEW_TOKEN)return g=!0,r(a,b,c,d);if(f.action===Qb.REPORT_ERROR){var h=\"Authentication Error\";return f.params&&f.params.errorCode>=0&&(h=j[f.params.errorCode]),c&&c(nb.authError,h),r(a,b,c,d)}}};this.appSecretTokenGenerator=function(b){var c=null,d=null,e=!1,f=null;b.indexOf(\":\")>-1&&(f=n(b.split(\":\")[0]),b=b.split(\":\")[1]);var g=function(a){b=null,c=a},h=function(a){e=!0,b=null,console.error(\"Couldn't import key\",a)};return o.importKey(b,g,h),function(b,g){if(e)return g(\"appsecret based token generation failed\");if(!b&&null!==d)return g(null,d);if(null===c)return setTimeout(function(){a.tokenGenerator(b,g)},100);var h={userID:na,appID:ma};f&&(h.keyID=f),o.sign({alg:\"HS256\"},h,c,function(a,b){return a?g(a):(d=b,g(null,b))})}}},Ua=new Ta,Va=new $;try{Aa=Va.detectBrowserInfo()}catch(a){console.log(\"detectBrowserInfo: Error\",a)}var Wa;window.csioReactNative||(Wa=Va.measureAppLoadingPerformance(Aa),Ca.loading=Wa);var Xa,Ya={type:\"browser\",name:Aa.name,ver:Aa.ver,os:Aa.os,osVersion:Aa.osVersion,userAgent:Aa.userAgent},Za=!1,$a=null,_a=null,ab={},bb={currentOffset:0,offsetResults:[],syncStartTime:null,syncAttempts:5,syncHandler:null,maxAllowedLatency:6e4},cb=!0,db=null,eb=null,fb=2e4,gb=100,hb=null;\"Firefox\"===Aa.name?hb=mozRTCPeerConnection:\"Chrome\"===Aa.name||\"Opera\"===Aa.name?hb=webkitRTCPeerConnection:\"Safari\"===Aa.name?console.log(\"Browser type Safari\"):\"Edge\"===Aa.name&&(hb=window.RTCPeerConnection);var ib={fabricSetupFailed:\"fabricSetupFailed\",fabricHold:\"fabricHold\",fabricResume:\"fabricResume\",audioMute:\"audioMute\",audioUnmute:\"audioUnmute\",videoPause:\"videoPause\",videoResume:\"videoResume\",fabricUsageEvent:\"fabricUsageEvent\",fabricTerminated:\"fabricTerminated\",screenShareStart:\"screenShareStart\",screenShareStop:\"screenShareStop\",dominantSpeaker:\"dominantSpeaker\",userIDChangedEvent:\"userIDChangedEvent\",activeDeviceList:\"activeDeviceList\",applicationErrorLog:\"applicationErrorLog\"},jb={autoFabricSetup:\"autoFabricSetup\",userJoined:\"userJoined\",userLeft:\"userLeft\",refreshPresence:\"userAlive\",ssrcMap:\"ssrcMap\",mediaPlaybackStartEvent:\"mediaPlaybackStartEvent\",mediaSuspendedEvent:\"mediaSuspendedEvent\",oneWayMedia:\"oneWayMedia\",fabricStateChange:\"fabricStateChange\",iceDisruptionStart:\"iceDisruptionStart\",iceDisruptionEnd:\"iceDisruptionEnd\",fabricTransportSwitch:\"fabricTransportSwitch\",iceConnectionDisruptionStart:\"iceConnectionDisruptionStart\",iceConnectionDisruptionEnd:\"iceConnectionDisruptionEnd\",iceAborted:\"iceAborted\",iceTerminated:\"iceTerminated\",iceFailed:\"iceFailed\",iceRestarted:\"iceRestarted\",fabricDropped:\"fabricDropped\",connectedDevices:\"connectedDevices\",iceCompleted:\"iceCompleted\",iceCandidateFound:\"iceCandidateFound\"},kb={sdpSubmission:\"sdpSubmissionEvent\",rtpStats:\"rtpStats\",processedStats:\"processedStats\",callStatsEvent:\"callStatsEvent\",userFeedback:\"userFeedbackEvent\",clockSync:\"clockSync\",preCallTest:\"preCallTest\",senderConfiguration:\"senderConfiguration\",\nsendingThroughputObservations:\"sendingThroughputObservations\"},lb={results:\"preCallTestResults\",associate:\"preCallTestAssociate\"},mb={success:\"success\",failure:\"failure\"},nb={httpError:\"httpError\",authError:\"authError\",wsChannelFailure:\"wsChannelFailure\",success:\"success\",csProtoError:\"csProtoError\",appConnectivityError:\"appConnectivityError\",tokenGenerationError:\"tokenGenerationError\",ok:\"OK\"},ob={authOngoing:\"authOngoing\"},pb={peer:\"peer\",server:\"server\"},qb={sendonly:\"sendonly\",receiveonly:\"receiveonly\",sendrecv:\"sendrecv\",inactive:\"inactive\"},rb={audio:\"audio\",video:\"video\",data:\"data\",screen:\"screen\",multiplex:\"multiplex\",unbundled:\"unbundled\"},sb={local:\"local\",remote:\"remote\"},tb={excellent:5,good:4,fair:3,poor:2,bad:1},ub={local:\"local\",remote:\"remote\",inbound:\"inbound\",outbound:\"outbound\"},vb={noAudioInMultiplexFabric:\"noAudioInMultiplexFabric\",noOutboundAudioOnlyFabric:\"noOutboundAudioOnlyFabric\",noInboundAudioOnlyFabric:\"noInboundAudioOnlyFabric\"},wb={excellent:\"excellent\",fair:\"fair\",bad:\"bad\"},xb={established:\"established\",initializing:\"initializing\",failed:\"failed\",disrupted:\"disrupted\",checkingDisrupted:\"checkingDisrupted\"},yb={createOffer:\"createOffer\",createAnswer:\"createAnswer\",setLocalDescription:\"setLocalDescription\",setRemoteDescription:\"setRemoteDescription\",addIceCandidate:\"addIceCandidate\",getUserMedia:\"getUserMedia\",iceConnectionFailure:\"iceConnectionFailure\",signalingError:\"signalingError\",applicationError:\"applicationError\",applicationLog:\"applicationLog\"},zb={mediaConfigError:\"MediaConfigError\",negotiationFailure:\"NegotiationFailure\",sdpError:\"SDPGenerationError\",iceFailure:\"IceConnectionFailure\",transportFailure:\"TransportFailure\",signalingError:\"SignalingError\",applicationError:\"ApplicationError\",applicationLog:\"ApplicationLog\"},Ab={video:{gThreshold:1024,rThreshold:256},audio:{gThreshold:30,rThreshold:8}},Bb={video:{gThreshold:.8,rThreshold:.3}},Cb={video:{gThreshold:400,rThreshold:1e3}},Db={video:{gThreshold:10,rThreshold:50},audio:{gThreshold:15,rThreshold:30}},Eb={audio:{gThreshold:240,rThreshold:400}},Fb={chrome:\"Chrome\",firefox:\"Firefox\",edge:\"Edge\"},Gb={signalingState:\"signalingState\",iceConnectionState:\"iceConnectionState\",iceGatheringState:\"iceGatheringState\"},Hb=[jb.userJoined,jb.refreshPresence,ib.fabricSetupFailed],Ib=function(a,b){try{window&&window.localStorage&&window.localStorage.setItem(a,b)}catch(a){return}},Jb=function(a){try{if(window&&window.localStorage)return window.localStorage.getItem(a)}catch(a){return null}return null},Kb=function(a){try{window&&window.localStorage&&window.localStorage.removeItem(a)}catch(a){return}},Lb=function(){if(pa=Jb(\"endpointID\"),null===pa){var a=b(),c=Math.random()*a;Ac(c.toString(),function(a){pa=a,Ib(\"endpointID\",pa)})}},Mb=function(a,c,d,e,f){var g=null,h=null,i=null,j=new XMLHttpRequest;if(\"Microsoft Internet Explorer\"!==Aa.name&&(j.timeout=d),j){j.open(\"GET\",encodeURI(a));for(var k in c)j.setRequestHeader(k,c[k]);g=b(),j.onload=function(){h=b(),i=h-g,e(j,i)},j.ontimeout=f,j.send()}},Nb=function(a,b,c,d){var e=new XMLHttpRequest;if(e){if(e.open(\"POST\",encodeURI(a)),e.setRequestHeader(\"Content-Type\",\"application/json\"),d)for(var f in d)e.setRequestHeader(f,d[f]);e.onload=function(){c(e)},e.send(b)}},Ob=function(a,c,d,e){if(Ka&&a){var f=ba+\"generics\",g={appID:a,timestamp:b(),userID:encodeURIComponent(c),version:da,eventType:d,data:e},h=JSON.stringify(g);za!==h&&(za=h,Nb(f,h,function(a){200===a.status?console.log(\"Got generic response: %o\",a.response):200!==a.status&&console.log(\"Got error for generic request %o, %s\",a,a.status)}))}};window&&window.addEventListener&&window.addEventListener(\"error\",function(a){if(a&&a.filename&&a.filename.indexOf(\"callstats\")>-1){var b,c=!1,d={fileName:a.filename,line:a.lineno,col:a.colno,jsVersion:da,eventType:\"error\",message:a.message,pageURL:window.location.href};for(b in ab)ab.hasOwnProperty(b)&&(d.conferenceID=b,Ob(ma,na,\"onErrorLog\",d),c=!0);c||Ob(ma,na,\"onErrorLog\",d)}});var Pb={invalidWebRTCFunctionName:\"Invalid WebRTC function name\"},Qb={RETRY:0,GET_NEW_TOKEN:1,REPORT_ERROR:2},Rb=a(),Sb=Object.create(null),Tb=function(a,d,e){var f=RegExp.prototype.test.bind(/^([a-z])=(.*)/),g=/^ssrc:(\\d*) ([\\w_]*):(.*)/,h=/^ssrc-group:SIM (\\d*)/;d.split(/(\\r\\n|\\r|\\n)/).filter(f).forEach(function(d){var f=d[0],i=d.slice(2);if(\"a\"===f){if(g.test(i)){var j=i.match(g),k=j[1];void 0===a.ssrcMap[k]&&(a.ssrcMap[k]={}),a.ssrcMap[k][j[2]]=j[3],a.ssrcMap[k].localStartTime=b(),a.ssrcMap[k].syncedStartTime=c(),a.ssrcMap[k].streamType=e}h.test(i)&&(void 0===a.ssrcMap.ssrcGroup&&(a.ssrcMap.ssrcGroup={},a.ssrcMap.ssrcGroup[e]={}),a.ssrcMap.ssrcGroup[e].simulcastGroup=i.match(/\\d+/g))}})},Ub=function(a,b){return a.ssrcMap[b]},Vb=function(a){return a.ssrcMap},Wb=function(a,b,c,d,e,f){if(!e.localDescription||!e.remoteDescription)return!1;var g=e.localDescription.sdp,h=e.remoteDescription.sdp;if(!g||!h||g===d.localSDP&&h===d.remoteSDP)return!1;if(Tb(d,g,ub.outbound),Tb(d,h,ub.inbound),Ga){var i={sdp:{}};i.sdp.localSDP=g!==d.localSDP?g:-1,i.sdp.remoteSDP=h!==d.remoteSDP?h:-1,Zb(a,b,c,i,d.pcHash,f)}return d.localSDP=g,d.remoteSDP=h,!0},Xb=function(a,b,d,e,f,g,h){if(!a)return void console.error(\"sendEvent: Invalid eventType \");var i=c(),j={version:da,apiTS:i,action:a,localID:encodeURIComponent(na),remoteID:b?encodeURIComponent(b):null,conferenceID:encodeURIComponent(d),timeShift:0,appID:ma,ucID:e,pcID:g,deviceID:pa,value:f};return null===d?void Ob(ma,na,\"log\",{msg:\"conferenceID is null in sendEvent for \"+a}):void S(kb.callStatsEvent,j,h)},Yb=function(a,b,d,e){if(!a)return void console.error(\"sendEvent: Invalid eventType \");var f=c(),g={version:da,channel:kb.preCallTest,timestamp:f,apiTS:f,action:a,eventType:a,localID:encodeURIComponent(na),remoteID:encodeURIComponent(na),conferenceID:encodeURIComponent(b),timeShift:0,appID:ma,ucID:d,deviceID:pa,token:Ua.authToken};return a===lb.results&&(g.results=e,null==b)?void pd(kb.preCallTest,g):(a===lb.associate&&(g.ids=e),void(d&&!cb?S(kb.preCallTest,g):(g.clockUnsynced=cb,Oa.cacheEvent({channel:kb.preCallTest,data:g,callback:null}))))},Zb=function(a,b,d,e,f,g){var h=c(),i={version:da,appID:ma,conferenceID:encodeURIComponent(b),ucID:d,apiTS:h,localID:encodeURIComponent(na),remoteID:encodeURIComponent(a),pcID:f,deviceID:pa,sdpPayload:e,action:kb.sdpSubmission};Ua.authToken&&d&&!cb?(i.token=Ua.authToken,S(kb.sdpSubmission,i,g)):(i.clockUnsynced=cb,Oa.cacheEvent({channel:kb.sdpSubmission,data:i,callback:g}),Ua.authToken||Ua.sendAuthenticationRequest(ma,na))},$b=function(a,b,c,d,e,f,g){sc(a,function(a){b.localCandidates=a.localCandidates,b.remoteCandidates=a.remoteCandidates,b.iceCandidatePairs=a.iceCandidatePairs,b.activeIceCandidatePair=Nc(b.iceCandidatePairs),g.currPair=b.activeIceCandidatePair,Xb(jb.fabricStateChange,e,c,d,g,f)})},_b=function(a,b,c){var d={connectedDevices:la},e=ab[a]?ab[a].ucID:null;Xb(jb.connectedDevices,b,a,e,d,c)},ac=function(a){var b={ucID:ab[a].ucID,endpoint:Ya,magicKey:Rb};Xb(jb.refreshPresence,null,a,ab[a].ucID,b,null)},bc=function(a,b){var c={};return c.status=a,b&&(c.message=b),c},cc=function(a,b){var c,d,e,f=0;if(!a)return f;for(c=0,e=a.length;c<e;c++)d=a.charCodeAt(c),f=(f<<5)-f+d,f|=0;return b&&b(f),f},dc=function(a,c,d,e,f,g){if(!a||!d||!c)return console.error(\"initialize: Argument missing/invalid\"),bc(mb.failure,\"initialize: Argument missing/invalid\");if(e&&\"function\"!=typeof e)return console.error(\"initialize: Argument missing/invalid\"),bc(mb.failure,\"initialize: Argument missing/invalid\");if(f&&\"function\"!=typeof f)return console.error(\"initialize: Argument missing/invalid\"),bc(mb.failure,\"initialize: Argument missing/invalid\");if(Ua.setAuthType(Sa.jwt),\"function\"!=typeof c){if(Ua.setAuthType(Sa.appSecret),!(window.crypto&&(window.crypto.subtle||window.crypto.webkitSubtle)||window.msCrypto&&window.msCrypto.subtle||window.csioReactNative))return console.error(\"Browser does not support Web Cryptography API. App secret based authentication requires Web Cryptography API\"),e&&e(nb.tokenGenerationError,\"Browser does not support Web Cryptography API. App secret based authentication requires Web Cryptography API\"),bc(mb.failure,\"Browser does not support Web Cryptography API. App secret based authentication requires Web Cryptography API\");c=Ua.appSecretTokenGenerator(c)}if(\"string\"==typeof a&&(a=parseInt(a,10)),ma=a,isNaN(ma))return bc(mb.failure,\"Invalid Credentials\");if(\"object\"==typeof d?(na=d.aliasName,oa=d):na=d,Ca.initializeSinceCreate=b()-Ca.create,Ob(ma,na,\"log\",{msg:\"callstats initialize in progress\"}),g&&(g.disableBeforeUnloadHandler===!0&&(qa=!0),null!==g.applicationVersion&&void 0!==g.applicationVersion&&(Ya.appVer=uc(g.applicationVersion,30)),g.disablePrecalltest===!0&&(ra=!0)),Ua.tokenGenerator=c,Jb(\"csio_auth_data\"))try{var h=JSON.parse(Jb(\"csio_auth_data\"));Ua._isTokenValid(h,ma,na)&&(e&&e(nb.success,\"SDK authentication successful.\"),Ua.setupAuthToken(h),hc(),od._isChannelReady()||od._setupWebSocketConnection(e))}catch(a){console.log(\"initialize: Error\",a)}l(),f&&(Da.stats=f);try{Ua.sendAuthenticationRequest(ma,na,e)}catch(a){console.log(\"initialize: Error\",a)}return bc(mb.success)},ec=function(){Ca.sent||(Ca.remoteofferSinceCreate&&Ca.config&&Ca.senderConfig||Ca.errorSinceCreate)&&(console.log(\"Send generic event for timing\"),Ob(ma,na,\"timing\",Ca),Ca.sent=!0)},fc=function(a,b){\"function\"==typeof b&&Da.hasOwnProperty(a)&&(Da[a]=b)},gc=function(a){Ob(ma,na,\"log\",{msg:\"precalltest finished \"+va}),va+=\"(finished)\",Da.preCallTest&&Da.preCallTest(a);try{Ba.push(a.id);var b=null,c=null;for(var d in ab)if(ab.hasOwnProperty(d)){b=d,ab[d].ucID&&(c=ab[d].ucID);break}Yb(lb.results,b,c,a)}catch(a){wa(\"send results\",a)}},hc=function(){var a=ha+ma,b={Authorization:\"Bearer \"+Ua.authToken},c=Ja,d=function(a,b){200!==a.status&&setTimeout(function(){f()},100),Ca.config=b,ec();var c=JSON.parse(a.response);if(console.log(\"internal config:\",c),c.submissionInterval&&(Fa=parseInt(c.submissionInterval,10),ja.setSubmissionInterval(Fa)),c.adaptiveStats&&ja.setReportingMode(c.adaptiveStats),c.collectSDP&&(Ga=c.collectSDP),c.qmodelThresholdsAPI){var d=c.qmodelThresholdsAPI;id(\"eModelThreshold\",d,Eb),id(\"throughputThreshold\",d,Ab),id(\"fractionalLossThreshold\",d,Db),id(\"rttThreshold\",d,Cb),id(\"currOverPrevFrameRateThreshold\",d,Bb)}},e=function(a){200!==a.status&&setTimeout(function(){g()},100);var b=JSON.parse(a.response),c=function(a,b){var c={};return b&&(c={peerConnection:null,media:null}),a.peerConnection&&(c.peerConnection=a.peerConnection),a.media&&(c.media=a.media),a.sender&&(c.sender=a.sender),a.confidence&&(c.confidence=a.confidence),c};if(Da.defaultConfig&&b.default){var d=c(b.default,!0);d!=={}&&Da.defaultConfig(d)}if(Da.recommendedConfig&&b.recommended){var e=c(b.recommended,!1);e!=={}&&Da.recommendedConfig(e)}},f=function(){Mb(a+\"/configurations/internal\",b,c,d,f)},g=function(){Mb(a+\"/configurations\",b,c,e,g)};f(),g()},ic=function(a){return function(b){return b.pc===a||(!(!a.callstatsID||b.pcHash!==a.callstatsID)||void 0)}},jc=function(a,b){var c=null,d=null;return ab[a]&&ab[a].participants&&(d=ab[a].participants.filter(ic(b))),c=d&&d.length>0?d[0]:null},kc=function(a,b){var c=null,d=null;return c=jc(a,b),c&&(d=c.pcHash),d},lc=function(a){var b=null,c=null,d=null;for(b in ab)if(ab.hasOwnProperty(b)&&(d=jc(b,a))){c={fabric:d,conferenceID:b};break}return c},mc=function(a,b){var c=0;if(a&&ab[b].participants)for(c=0;c<ab[b].participants.length;c++)if(ab[b].participants[c].pcHash===a.pcHash){ab[b].participants.splice(c,1);break}},nc=function(a){if(a){var b=[],c=0;if(a&&a.result)b=a.result();else if(a&&a.forEach)a.forEach(function(a){b.push(a)});else for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}},oc=function(a){var b,c=null,d=null,e=null,f=[],g=[],h=[],i=0;if(c=nc(a),!c)return{localCandidates:f,remoteCandidates:g};for(i=0;i<c.length;++i)if(d=E(c[i]),e=B(d),e.localCandidate)f.push(e.localCandidate);else if(e.remoteCandidate)g.push(e.remoteCandidate);else if(e.Transport){if(\"transport\"===e.Transport.type){b=e.Transport.selectedCandidatePairId;continue}h.push(e.Transport)}else e.candidatePair&&h.push(e.candidatePair);if(b)for(i=0;i<h.length;i++)h[i].id===b&&(h[i].googActiveConnection=\"true\");return{localCandidates:f,remoteCandidates:g,iceCandidatePairs:h}},pc=function(a){function b(b){var c={};c=oc(b),a(c)}return b},qc=function(a){var b=null;return a&&(b=a.message+\" : \"+a.stack),b},rc=function(a,b,c,d,e,f){var g=Aa.codebase,h=Aa.name;if(g===Fb.firefox)if(La)try{a.getStats().then(c(b,d,e,f,a)).catch(function(h){La=!1,Ob(ma,d,\"log\",{msg:\"### \"+g+\" getStats reports error \"+qc(h)}),a.getStats(null,c(b,d,e,f,a))})}catch(h){La=!1,Ob(ma,d,\"log\",{msg:\"### \"+g+\" getStats reports error \"+qc(h)}),a.getStats(null,c(b,d,e,f,a))}else a.getStats(null,c(b,d,e,f,a),function(a){console.log(\"getstats error \",a)});else if(\"Safari\"===h)a.getStats().then(c(b,d,e,f,a)).catch(function(a){Ob(ma,d,\"log\",{msg:\"### \"+g+\" getStats reports error \"+qc(a)})});else if(g===Fb.chrome)if(window&&window.csioReactNative)a.getStats(null,c(b,d,e,f,a),function(a){Ob(ma,d,\"log\",{msg:\"### \"+g+\" getStats reports error \"+qc(a)})});else if(La)try{a.getStats().then(c(b,d,e,f,a)).catch(function(h){La=!1,Ob(ma,d,\"log\",{msg:\"### \"+g+\" getStats reports error \"+qc(h)}),a.getStats(c(b,d,e,f,a))})}catch(h){La=!1,Ob(ma,d,\"log\",{msg:\"### \"+g+\" getStats reports error \"+qc(h)}),a.getStats(c(b,d,e,f,a))}else a.getStats(c(b,d,e,f,a));else g===Fb.edge&&a.getStats().then(c(b,d,e,f,a)).catch(function(a){Ob(ma,d,\"log\",{msg:\"### \"+g+\" getStats reports error \"+qc(a)})})},sc=function(a,b){try{rc(a,b,pc)}catch(a){console.log(\"csioGetStats: Error\",a)}},tc=function(a,b,c,d){if(c||(c=ia),!a||!b)return console.error(\"sendFabricEvent: Arguments missing/Invalid\"),bc(mb.failure,\"sendFabricEvent: Arguments missing/Invalid\");if(!ma||!na||!ab[c])return console.error(\"sendFabricEvent: SDK is not initialized or no Fabrics added.\"),bc(mb.failure,\"sendFabricEvent: SDK is not initialized or no Fabrics added.\");if(b===ib.fabricSetupFailed)return console.error(\"sendFabricEvent: Unsupported fabricEvent fabricSetupFailed\"),bc(mb.failure,\"sendFabricEvent: Unsupported fabricEvent fabricSetupFailed\");if(!p(a))return console.error(\"sendFabricEvent: Invalid PeerConnection object passed\"),bc(mb.failure,\"sendFabricEvent: Invalid PeerConnection object passed\");if(!ib.hasOwnProperty(b)&&!jb.hasOwnProperty(b))return console.error(\"sendFabricEvent: Invalid fabricEvents value: \",b),bc(mb.failure,\"sendFabricEvent: Invalid fabricEvents value: \"+b);var e={},f=null,g=ab[c],h=null;if(void 0===g)return console.error(\"sendFabricEvent: Conference ID not found!\"),bc(mb.failure,\"sendFabricEvent: Conference ID not found!\");if(h=jc(c,a),null===h)return console.error(\"sendFabricEvent: fabricData is null\"),bc(mb.failure,\"sendFabricEvent: fabricData is null\");if(f=h.remoteUserID,b===ib.activeDeviceList){if(!d||!d.deviceList)return console.error(\"sendFabricEvent: Arguments missing/Invalid\"),bc(mb.failure,\"sendFabricEvent: Arguments missing/Invalid\");if(!(d.deviceList instanceof Array))return console.error(\"sendFabricEvent: DeviceList Invalid\"),bc(mb.failure,\"sendFabricEvent: DeviceList Invalid\");e={magicKey:Rb,endpoint:Ya,activeDevicelist:d.deviceList}}if(b!==ib.screenShareStart&&b!==ib.screenShareStop||(e={magicKey:Rb,endpoint:Ya},d&&(e.ssrc=d.ssrc)),Xb(b,f,c,g.ucID,e,h.pcHash,h.pcCallback),b===ib.fabricTerminated){if(ab[c].participants){h&&(h.statsInterval=J(h.statsInterval),mc(h,c));var i=N(c);i.conferenceFinished&&O(c,i.ucID)}}else b===ib.fabricHold?(h.statsInterval=J(h.statsInterval),h.onHold=!0):b===ib.fabricResume&&(h.onHold=!1,Qc(h,a,c,f));return bc(mb.success)},uc=function(a,b){return a&&\"string\"==typeof a?(a.length>b&&(a=a.substring(0,b)),a):null},vc=function(a){return a&&\"string\"==typeof a?a=uc(a,Ea):a&&\"object\"==typeof a&&a.message&&(a.message=uc(a.message,Ea)),a},wc=function(a,b,c){return b?b:a&&a[c]?a[c].sdp:-1},xc=function(c,d,e,f,g,h){if(d||(d=ia),void 0===c||!e)return console.error(\"reportError: Arguments missing/invalid\"),bc(mb.error,\"reportError: Arguments missing/invalid\");if(!ma||!na)return console.error(\"reportError: SDK is not initialized\"),bc(mb.error,\"reportError: SDK is not initialized\");if(!yb.hasOwnProperty(e))return console.error(\"reportError: Invalid webRTC functionName value: %o\",e),bc(mb.error,\"reportError: Invalid webRTC functionName value: \"+e);void 0===f&&console.warn(\"reportError: Missing dom error parameter\");var i,j,k,l=null,m=b(),n=ab[d],o=null,q=m,r=null,s=null,t=null,u=null;if(t=R(d),j=A(e),e!==yb.getUserMedia&&(u=a()),f)if(window.DOMException&&f instanceof window.DOMException)f={message:f.message,name:f.name};else if(\"object\"==typeof f){var v={};f.message&&(v.message=f.message),f.name&&(v.name=f.name),f.constraintName&&(v.constraintName=f.constraintName),f.stack&&(v.stack=f.stack),f=v}if(f=vc(f),p(c)){n&&(t=n.ucID),o=jc(d,c),o?(i=o.remoteUserID,q=o.startTime,r=o.pcState,s=o.pc.iceConnectionState,u=o.pcHash,k=o.pcCallback):i=na;var w=m-q;if(l={failureDelay:w,reason:j,domError:f,fabricState:r,iceConnectionState:s,function:e,magicKey:Rb,endpoint:Ya},e===yb.applicationLog||e===yb.applicationError?Xb(ib.applicationErrorLog,i,d,t,l,u,k):(Xb(ib.fabricSetupFailed,i,d,t,l,u,k),Ca.errorSinceCreate=b()-Ca.create,ec()),g||h||c&&c.localDescription||c&&c.remoteDescription){var x={sdp:{}};x.sdp.localSDP=wc(c,g,\"localDescription\"),x.sdp.remoteSDP=wc(c,h,\"remoteDescription\"),Zb(i,d,t,x,u)}}else null===Rb&&(Rb=a()),i=na,l={failureDelay:0,reason:j,domError:f,function:e,magicKey:Rb,endpoint:Ya},e===yb.applicationLog||e===yb.applicationError?Xb(ib.applicationErrorLog,i,d,t,l,null,null):Xb(ib.fabricSetupFailed,i,d,t,l,u,null);return bc(mb.success)},yc=function(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b[b.length]=d:d>127&&d<2048?(b[b.length]=d>>6|192,b[b.length]=63&d|128):(b[b.length]=d>>12|224,b[b.length]=d>>6&63|128,b[b.length]=63&d|128)}return new Uint8Array(b).buffer},zc=function(a){for(var b,c=new DataView(a),d=\"\",e=0;e<c.byteLength;e++)b=c.getUint8(e).toString(16),b.length<2&&(b=\"0\"+b),d+=b;return d},Ac=function(a,b){var c={name:\"SHA-256\"};if(window.crypto){var d=window.crypto.subtle||window.crypto.webkitSubtle;if(!d)return void cc(a,b);d.digest(c,yc(a)).then(function(a){b(zc(a))}).catch(function(){cc(a,b)})}else if(window.msCrypto){if(!window.msCrypto.subtle)return void cc(a,b);var e=window.msCrypto.subtle.digest(c,yc(a));e.oncomplete=function(a){a.target&&b(zc(a.target.result))},e.onerror=function(){cc(a,b)}}else cc(a,b)},Bc=function(a,b,c){var d;if(!b||!a)return console.error(\"sendUserFeedback: Arguments missing/Invalid\"),bc(mb.error,\"sendUserFeedback: Arguments missing/Invalid\");if(\"object\"!=typeof b)return console.error(\"sendUserFeedback: Invalid feedback object.\"),bc(mb.error,\"sendUserFeedback: Invalid feedback object.\");if(0===Object.keys(b).length)return console.error(\"sendUserFeedback: Feedback data object must not be empty.\"),bc(mb.error,\"sendUserFeedback: Feedback data object must not be empty.\");var e=ab[a],f=null;void 0!==e&&void 0!==e.ucID&&(f=e.ucID);var g=null;if(g=null===Rb?db:Rb,null===f&&(f=R(a)),null===f)return console.error(\"sendUserFeedback: ucID unavailable\"),bc(mb.error,\"sendUserFeedback: ucID unavailable\");d=\"object\"==typeof b.userID?b.userID.aliasName:b.userID,b&&b.overall<=0&&(b.overall=null);var h={conferenceID:encodeURIComponent(a),magicKey:g,appID:ma,version:da,ucID:f,remoteID:encodeURIComponent(d),userID:encodeURIComponent(d),userQoe:{overall:b.overall}};return b.video&&(h.userQoe.video=b.video),b.audio&&(h.userQoe.audio=b.audio),b.screen&&(h.userQoe.screen=b.screen),b.comment&&(h.userQoe.comment=b.comment),Ua.authToken&&!cb?(h.token=Ua.authToken,Ib(\"feedback\",JSON.stringify(h)),S(kb.userFeedback,h,c)):(h.clockUnsynced=cb,Oa.cacheEvent({channel:kb.userFeedback,data:h,callback:c}),Ua.sendAuthenticationRequest(ma,d)),bc(mb.success)},Cc=function(a){return a?\"function\"!=typeof a?(console.error(\"attachWifiStatsHandler: Arguments Invalid\"),bc(mb.error,\"attachWifiStatsHandler: Arguments Invalid\")):(Z=a,void k()):(console.error(\"attachWifiStatsHandler: Arguments missing\"),bc(mb.error,\"attachWifiStatsHandler: Arguments missing\"))},Dc=function(a,b,c,d,e,f){var g=null;if(g=\"object\"==typeof b?b.aliasName:b,c||(c=ia),!(a&&d&&e&&g))return console.error(\"associateMstWithUserID: Arguments missing\"),bc(mb.error,\"associateMstWithUserID: Arguments missing\");if(!p(a))return console.error(\"associateMstWithUserID: Invalid PeerConnection object passed\"),bc(mb.error,\"associateMstWithUserID: Invalid PeerConnection object passed\");var h=ab[c];if(void 0===h)return console.error(\"associateMstWithUserID: conferenceID doesn't exist\"),bc(mb.error,\"associateMstWithUserID: conferenceID doesn't exist\");var i=null;if(i=jc(c,a),null===i)return console.error(\"associateMstWithUserID: Unknown pcObject passed\"),bc(mb.error,\"associateMstWithUserID: Unknown pcObject passed\");var j=Ub(i,d);return void 0===j&&(i.ssrcMap[d]={},j=Ub(i,d)),j.remoteUserID=g,j.ssrc=d,j.associatedVideoTag=f,j.usageLabel=e,f&&g!==na&&o(c,f,a,d),bc(mb.success)},Ec=function(a){var b=ab[ia];if(b){var c=ab[ia].participants;if(c)for(var d=0;d<c.length;d++)c[d].conferenceID=a}},Fc=function(a){Oa.updateConferenceId(encodeURIComponent(a))},Gc=function(a,b){var c=lc(b);c&&Oa.updateRemoteUserID(a,c.fabric.pcHash)},Hc=function(a,b){var c=null;c=lc(b),c&&(c.fabric.remoteUserID=a)},Ic=function(){Oa.sendCachedUserJoinedEvents(Ua),Oa.sendCachedEvents(Ua,cb)},Jc=function(a,b){return a?(a.conferenceID&&(Ec(a.conferenceID),ab[a.conferenceID]=ab[ia],Fc(a.conferenceID),Ic()),a.remoteUserID&&b&&(Gc(a.remoteUserID,b),Hc(a.remoteUserID,b),Ic()),bc(mb.success)):(console.error(\"setIdentifiers: Arguments missing/Invalid\"),bc(mb.error,\"_setIdentifiers: Arguments missing/Invalid\"))},Kc=function(a){return window&&!window.csioproxy?(console.error(\"setCallstatsURLs: cannot be called if window.csioproxy is false\"),bc(mb.error,\"setCallstatsURLs: cannot be called if window.csioproxy is false\")):a?(a.collectorURL&&(ba=a.collectorURL),a.authServiceURL&&(ca=a.authServiceURL),a.csioInternalAPIURL&&(ga=a.csioInternalAPIURL),a.wsURL&&(ea=a.wsURL),kd(),Q(),W(),bc(mb.success)):(console.error(\"setCallstatsURLs: Arguments missing/Invalid\"),bc(mb.error,\"setCallstatsURLs: Arguments missing/Invalid\"))},Lc=function(c,d,e,f,g,h){var i,k,l=null,m=pb.peer,n=qb.sendrecv,o={authStatus:!!Ua.tokenData,clockSync:!cb,msg:\"addNewFabric called\",eventType:\"warn\",pageURL:window.location.href,conferenceID:f,version:da};if(W(),Ob(ma,na,\"stateMachine\",o),l=d&&\"object\"==typeof d?d.aliasName:d,f||(f=ia),!c||!e)return console.error(\"addNewFabric: Arguments missing/Invalid\"),bc(mb.error,\"addNewFabric: Arguments missing/Invalid\");if(!ma||!na)return console.error(\"addNewFabric: SDK not initialized.\"),bc(mb.error,\"addNewFabric: SDK not initialized\");if(!p(c))return console.error(\"addNewFabric: Invalid PeerConnection object passed\"),bc(mb.error,\"addNewFabric: Invalid PeerConnection object passed\");if(!rb.hasOwnProperty(e)||e instanceof Function)return console.error(\"addNewFabric: Invalid fabricUsage value\"),bc(mb.error,\"addNewFabric: Invalid fabricUsage value\");if(h&&\"function\"==typeof h&&(i=h),g&&\"function\"==typeof g&&(i=g),g&&\"function\"!=typeof g){if(g.remoteEndpointType){if(!pb.hasOwnProperty(g.remoteEndpointType))return console.error(\"addNewFabric: Invalid remoteEndpointType value\"),bc(mb.error,\"addNewFabric: Invalid remoteEndpointType value\");m=g.remoteEndpointType}if(g.fabricTransmissionDirection){if(!qb.hasOwnProperty(g.fabricTransmissionDirection))return console.error(\"addNewFabric: Invalid fabricTransmissionDirection value\"),bc(mb.error,\"addNewFabric: Invalid fabricTransmissionDirection value\");n=g.fabricTransmissionDirection}}var q=b();Ca.addnewfabricSinceCreate=q-Ca.create,ec(),null===Rb&&(Rb=a());var r=null,s=!1;if(!L(f)){var t=G(Rb);Xb(jb.userJoined,null,f,null,t,null,null),s=!0,o={authStatus:!!Ua.tokenData,clockSync:!cb,msg:\"userJoined sent\",pageURL:window.location.href,eventType:\"warn\",conferenceID:f,version:da},Ob(ma,na,\"stateMachine\",o)}if(H(f,r,s),!jc(f,c)){if(c){new aa(c,_c,Zc,Pc,Yc)}k=a();var u={pc:c,remoteUserID:l,fabricUsage:e,magicKey:Rb,startTime:q,pcCallback:h,pcState:xb.initializing,fabricSetupSent:!1,iceCandidates:[],iceConnectionState:c.iceConnectionState,latestEventSent:q,pcHash:k,localSDP:-1,remoteSDP:-1,statsInterval:null,intervalAdaptionPhase:!0,gatheringIceCandidatesDelay:0,connectivityIceStatusDelay:0,numNegotiationNeededCalls:0,currentActivePhaseIndex:0,onHold:!1,ssrcMap:{},conferenceID:f,remoteEndpointType:m,fabricTransmissionDirection:n};Za&&(Xb(kb.senderConfiguration,d,f,null,$a,u.pcHash),Za=!1),\"function\"!=typeof c||c.callstatsID||(c.callstatsID=k),\"connected\"!==c.iceConnectionState&&\"completed\"!==c.iceConnectionState||(u.pcState=xb.established),M(f,u),u.pcState===xb.established&&(bd(c,jb.autoFabricSetup,f),Qc(u,c,f));var v=function(a){var b=0;return Object.keys(a).forEach(function(a){a&&a.mediaType&&(b+=\"audio\"===a.mediaType?1:0)}),0<b},w=function(){return!!u.ssrcMap&&v(u.ssrcMap)},x=function(){return!(!u.ssrcMap||n!==qb.sendonly)&&v(u.ssrcMap)},y=function(){return!!u.ssrcMap&&void Object.keys(u.ssrcMap).forEach(function(a){Ma.push(a)})},z=null;if(e===rb.multiplex&&w()?z={mediaType:\"audio\",ssrc:null,disruptionType:vb.noAudioInMultiplexFabric}:e===rb.audio&&x()?z={mediaType:\"audio\",ssrc:null,disruptionType:vb.noOutboundAudioOnlyFabric}:e===rb.audio&&n===qb.receiveonly&&y(),z){var A=ab[f]?ab[f].ucID:null;Xb(jb.oneWayMedia,l,f,A,z,u.pcHash)}}if(!k){var B=jc(f,c);k=B.pcHash}if(j(f,l,k),ya)try{var C=Ba;Ba=[];var D=null;if(D=ya.getId(),D&&C.push(D),C.length>0){var E=ab[f].ucID;Yb(lb.associate,f,E,C)}}catch(a){wa(\"send associate\",a)}return bc(mb.success)},Mc=function(a,b,c,d){if(!(a&&c&&d&&b))return console.error(\"reportUserIDChange: Arguments missing/Invalid\"),bc(mb.error,\"reportUserIDChange: Arguments missing/Invalid\");if(!ma||!na)return console.error(\"reportUserIDChange: SDK not initialized.\"),bc(mb.error,\"reportUserIDChange: SDK not initialized\");if(\"\"===c||\"\"===b)return console.error(\"reportUserIDChange: id or  conferenceID MUST not be empty\"),bc(mb.error,\"reportUserIDChange: id or  conferenceID MUST not be empty\");if(!p(a))return console.error(\"reportUserIDChange: Invalid PeerConnection object passed\"),bc(mb.error,\"reportUserIDChange: Invalid PeerConnection object passed\");var e,f=null,g=ab[b];if(void 0===g)return console.error(\"reportUserIDChange: Conference ID not found!\"),bc(mb.error,\"reportUserIDChange: Conference ID not found!\");var h=null;if(void 0===g.ucID)return console.error(\"reportUserIDChange: addNewFabric was not called\"),Ob(ma,na,\"log\",{msg:\"### reportUserIDChange: addNewFabric was not called\"}),bc(mb.error,\"reportUserIDChange: addNewFabric was not called\");if(h=g.ucID,f=jc(b,a),null===f)return console.error(\"reportUserIDChange: Invalid pcObject passed as argument\"),bc(mb.error,\"reportUserIDChange: Invalid pcObject passed as argument\");var i={id:c,idType:d};return Xb(ib.userIDChangedEvent,e,b,h,i,null,f.pcCallback),bc(mb.success)},Nc=function(a){var b=null;if(a&&a.length>0){var c=a.filter(function(a){return\"true\"===a.selected||\"true\"===a.googActiveConnection||a.selected===!0||a.googActiveConnection===!0});c.length>0&&(b=c[0])}return b},Oc=function(a){var c=b(),d=function(){Ca.senderConfig=-1,Ca.senderExists=!1,ec()},e=function(a){var d=JSON.parse(a.response);console.log(\"Sender config response:\",a.status,d);var e;d.recommended&&d.recommended.sender&&(e=d.recommended.sender,console.log(\"ConfigService, recommended SENDER info:\",e)),e&&($a=e,Za=!0),Ca.senderConfig=b()-c,Ca.senderExists=!!e,ec()},f=function(a){_a=a;var b=ha+ma+\"/configurations\",c={Authorization:\"Bearer \"+Ua.authToken},d={app_id:ma,local_id:na,rtc_rtp_parameters:a},f=JSON.stringify(d);Nb(b,f,e,c)},g=function(){var a={encodings:[{maxBitrate:0}]};f(a)};if(Object.keys(ab).length>1)return console.warn(\"Multiple PCs found, skipping\"),void d();if(!a.getSenders||\"function\"!=typeof a.getSenders)return console.warn(\"Get senders error\"),void g();var h,i=a.getSenders();for(var j in i){var k=i[j];if(\"object\"!=typeof k||!k.track||\"object\"!=typeof k.track||!k.track.kind)return console.warn(\"Access senders error\"),void d();if(\"video\"===k.track.kind){if(h)return console.warn(\"Multiple video sender, skipping\"),void d();h=k}}if(!h)return console.warn(\"No video sender found\"),void d();if(!h.getParameters||\"function\"!=typeof h.getParameters)return console.warn(\"Sender getParameters error\"),void g();var l=h.getParameters();return\"object\"!=typeof l?void d():(\"encodings\"in l||(l.encodings=[]),0===l.encodings.length&&l.encodings.push({maxBitrate:0}),void f(l))},Pc=function(a,c){if(a){var d,e=null;if(void 0!==c){var f=c.signalingState;if(e=lc(c),e&&e.fabric){d=e.fabric.signalingState,e.fabric.signalingState=f;var g=e.conferenceID,h=e.fabric,i=h.remoteUserID,j=ab[g].ucID,k={changedState:Gb.signalingState,prevState:d,newState:f};$b(c,h,g,j,i,h.pcHash,k),\"closed\"===f&&tc(c,ib.fabricTerminated,e.conferenceID),\"have-local-offer\"!==f&&\"have-local-pranswer\"!==f&&\"stable\"!==f||e.sentSenderConfigRequest||(console.log(f,\".. requesting sender config.\",e.sentSenderConfigRequest),e.sentSenderConfigRequest=!0,Oc(c))}if(\"closed\"===f&&ya)try{ya.callFinished()}catch(a){wa(\"callFinished\",a),ya.crashDisconnect()}if(\"have-remote-offer\"===f||\"stable\"===f){if(Ca.remoteofferSinceCreate=b()-Ca.create,ec(),ya)try{ya.callStarts()}catch(a){wa(\"callStarts\",a),ya.crashDisconnect()}Ob(ma,na,\"log\",{msg:\"precalltest told to stop \"+va}),va+=\"(stopped)\"}}}},Qc=function(a,c,d){if(!a.onHold){var e=c,f=d;null===a.statsInterval&&(a.statsPollingStart=b(),ad(e,f),a.statsInterval=setInterval(function(){ad(e,f)},ua))}},Rc=function(a,b,c,d,e,f){f.localCandidates=b.localCandidates,f.remoteCandidates=b.remoteCandidates,f.iceCandidatePairs=b.iceCandidatePairs,Xb(jb.iceFailed,c,d,e,f,b.pcHash,b.pcCallback)},Sc=function(a,b,c,d){var e=b.iceConnectionState,f=b.remoteUserID,g=ab[c],h={prevIceConnectionState:e,currIceConnectionState:a.iceConnectionState,currPair:b.activeIceCandidatePair,failureDelay:d};b.pcState=xb.failed,\"checking\"===e?Rc(a,b,f,c,g.ucID,h):\"completed\"===e||\"connected\"===e?Xb(jb.fabricDropped,f,c,g.ucID,h,b.pcHash,b.pcCallback):\"disconnected\"===e&&b.established?Xb(jb.fabricDropped,f,c,g.ucID,h,b.pcHash,b.pcCallback):\"disconnected\"===e&&Rc(a,b,f,c,g.ucID,h)},Tc=function(a,c,d,e){var f=c.iceConnectionState,g=c.remoteUserID,h=ab[d],i=b(),j={prevIceConnectionState:f,currIceConnectionState:a.iceConnectionState,prevPair:c.activeIceCandidatePair},k=c.pcState===xb.disrupted,l=\"completed\"===a.iceConnectionState;c.connectivityIceStatusDelay=e,c.established=!0,sc(a,function(a){if(c.localCandidates=a.localCandidates,c.remoteCandidates=a.remoteCandidates,c.iceCandidatePairs=a.iceCandidatePairs,c.activeIceCandidatePair=Nc(c.iceCandidatePairs),j.currPair=c.activeIceCandidatePair,j.disruptionDelay=i-c.disruptedTS,k)Xb(jb.iceDisruptionEnd,g,d,h.ucID,j,c.pcHash);else if(l){var b={};b.iceCandidatePairs=a.iceCandidatePairs,Xb(jb.iceCompleted,g,d,h.ucID,b,c.pcHash)}}),bd(c.pc,jb.autoFabricSetup,d),c.pcState=xb.established,Qc(c,a,d,g)},Uc=function(a,c,d){var e=c.iceConnectionState,f=c.remoteUserID,g=ab[d],h=b(),i={prevIceConnectionState:e,currIceConnectionState:a.iceConnectionState,prevIceConnectionStateTs:c.iceConnectionStateTS,currPair:c.activeIceCandidatePair};c.startTime=h,\"connected\"===e||\"completed\"===e?(c.pcState=xb.disrupted,c.disruptedTS=h,Xb(jb.iceDisruptionStart,f,d,g.ucID,i,c.pcHash,c.pcCallback),c.pcCallback&&c.pcCallback(nb.appConnectivityError,\"Connectivity check for PC object to \"+f+\" failed.\")):\"checking\"===e&&(c.pcState=xb.checkingDisrupted,c.disruptedTS=h,Xb(jb.iceConnectionDisruptionStart,f,d,g.ucID,i,c.pcHash,c.pcCallback),c.pcCallback&&c.pcCallback(nb.appConnectivityError,\"Connectivity check for PC object to \"+f+\" failed.\"))},Vc=function(a,b,c,d){var e=b.iceConnectionState,f=b.remoteUserID,g=ab[c],h={prevIceConnectionState:e,currIceConnectionState:a.iceConnectionState};\"new\"===e||\"checking\"===e?(h.failureDelay=d,Xb(jb.iceAborted,f,c,g.ucID,h,b.pcHash,b.pcCallback)):(h.currPair=b.activeIceCandidatePair,\nXb(jb.iceTerminated,f,c,g.ucID,h,b.pcHash,b.pcCallback))},Wc=function(a,b,c){var d=b.iceConnectionState,e=b.remoteUserID,f=ab[c],g={prevIceConnectionState:d,currIceConnectionState:a.iceConnectionState,prevPair:b.activeIceCandidatePair};\"new\"!==d&&(b.established=!1,Xb(jb.iceRestarted,e,c,f.ucID,g,b.pcHash,b.pcCallback))},Xc=function(a,c,d,e){var f=c.iceConnectionState,g=c.remoteUserID,h=ab[d],i=b(),j={prevIceConnectionState:f,currIceConnectionState:a.iceConnectionState};c.gatheringIceCandidatesDelay=e,\"disconnected\"===f&&c.pcState===xb.checkingDisrupted&&(j.disruptionDelay=i-c.disruptedTS,Xb(jb.iceConnectionDisruptionEnd,g,d,h.ucID,j,c.pcHash,c.pcCallback))},Yc=function(a,b){if(a&&void 0!==b){var c=null;c=lc(b),c&&c.fabric&&c.fabric.numNegotiationNeededCalls++}},Zc=function(a,c){if(a&&void 0!==c){var d,e,f,g,h,i=null,j=null;if(j=lc(c),j&&j.fabric){i=j.fabric,d=j.conferenceID,e=b(),f=e-i.startTime,g=i.iceConnectionState,h=i.iceGatheringState;var k=i.remoteUserID,l=ab[d].ucID,m={changedState:Gb.iceConnectionState,prevState:g,newState:c.iceConnectionState};if($b(c,i,d,l,k,i.pcHash,m),h!==c.iceGatheringState){var n={changedState:Gb.iceGatheringState,prevState:h,newState:c.iceGatheringState};$b(c,i,d,l,k,i.pcHash,n)}\"complete\"===c.iceGatheringState&&\"checking\"===c.iceConnectionState&&Xc(c,i,d,f),\"connected\"===c.iceConnectionState||\"completed\"===c.iceConnectionState?Tc(c,i,d,f):\"failed\"===c.iceConnectionState?Sc(c,i,d,f):\"disconnected\"===c.iceConnectionState?Uc(c,i,d):\"closed\"===c.iceConnectionState?Vc(c,i,d,f):\"new\"===c.iceConnectionState&&Wc(),i.iceConnectionState=c.iceConnectionState,i.iceGatheringState=c.iceGatheringState,i.iceConnectionStateTS=b()}}},$c=function(a,b){var c=lc(a);if(c&&c.fabric){var d=c.fabric,e=d.remoteUserID,f=c.conferenceID,g=ab[f].ucID;Xb(jb.iceCandidateFound,e,f,g,b,d.pcHash)}},_c=function(a,b){var c,d,e;if(void 0!==b){if(null!==a.candidate){var f=a.candidate.candidate;d=f.split(\" \");var g=\"1\"===d[1]?\"rtp\":\"rtcp\";\"0\"!==d[5]&&(e=d[4].indexOf(\":\")!==-1,c={transport:d[2],protocol:g,typePreference:d[3],address:e?\"[\"+d[4]+\"]:\"+d[5]:d[4]+\":\"+d[5],type:d[7],media:a.candidate.sdpMid})}var h=null;h=lc(b),sc(b,function(a){h.localCandidates=a.localCandidates,h.remoteCandidates=a.remoteCandidates,h.iceCandidatePairs=a.iceCandidatePairs,h.activeIceCandidatePair=Nc(h.iceCandidatePairs)}),h&&h.fabric&&(void 0!==c&&h.fabric.iceCandidates.indexOf(c)===-1&&h.fabric.iceCandidates.push(c),c&&h.fabric.fabricSetupSent&&$c(b,c))}},ad=function(a,b){if(!ab.hasOwnProperty(b))return void console.error(\"ConferenceID %o doesn't exist. Can't call getStats for it.\",b);if(\"closed\"===a.signalingState)return tc(a,ib.fabricTerminated,b),!0;var c=jc(b,a);if(c.pcState!==xb.established&&c.lastFabricState===c.pcState&&\"connected\"!==a.iceConnectionState&&\"completed\"!==a.iceConnectionState)return!0;var d=ab[b].ucID;try{rc(a,c.pcCallback,z,na,d,c)}catch(a){console.log(\"csioGetStats: Error\",a)}},bd=function(a,c,d){var e,f=null,g=ab[d],h=null,i=b();if(void 0===g&&console.error(\"sendAutoFabricSetupEvent: Conference ID not found!\"),h=jc(d,a),null===h&&console.error(\"sendAutoFabricSetupEvent: fabricData is null\"),!h.fabricSetupSent){f=h.remoteUserID,e=i-h.startTime;var j={setupDelay:e,iceGatheringDelay:h.gatheringIceCandidatesDelay,iceConnectivityDelay:h.connectivityIceStatusDelay,remoteEndpointType:h.remoteEndpointType,fabricTransmissionDirection:h.fabricTransmissionDirection};cb||(j.clockSyncOffset=bb.currentOffset),sc(a,function(a){j.localCandidates=a.localCandidates,j.remoteCandidates=a.remoteCandidates,j.iceCandidatePairs=a.iceCandidatePairs,h.localCandidates=a.localCandidates,h.remoteCandidates=a.remoteCandidates,h.iceCandidatePairs=a.iceCandidatePairs,h.pcState=xb.established,h.activeIceCandidatePair=Nc(h.iceCandidatePairs),h.fabricSetupSent||(Xb(c,f,d,g.ucID,j,h.pcHash,h.pcCallback),h.fabricSetupSent=!0)})}},cd=function(a,b,c){var d={},e=null,f=ab[c],g=null;void 0===f&&console.error(\"sendFabricTransportSwitchEvent: Conference ID not found!\"),g=jc(c,a),null===g&&console.error(\"sendFabricTransportSwitchEvent: fabricData is null\"),e=g.remoteUserID,d.prevPair=g.activeIceCandidatePair,sc(a,function(a){d.currPair=Nc(a.iceCandidatePairs),g.activeIceCandidatePair=d.currPair,d.switchDelay=null,d.relayType=g.transportData.relayType,Xb(b,e,c,f.ucID,d,g.pcHash,g.pcCallback)})},dd=function(a,b){if(a.trackStats){var c=a.trackStats.filter(function(a){return a.id===b});if(c.length>0)return c[0]}},ed=function(a,b){if(a.codec){var c=a.codec.filter(function(a){return a.id===b});if(c.length>0)return c[0]}},fd=function(a,b){if(a.candidatePair){var c=a.candidatePair.filter(function(a){return a.id===b});if(c.length>0)return c[0]}},gd=function(a){for(var b,c,d=a.Transport.length,e=0;e<d;e++)c=a.Transport[e],c.selectedCandidatePairId&&(b=fd(a,c.selectedCandidatePairId),b&&(a.Transport[e]=y(a.Transport[e],b)));return a},hd=function(a){for(var b,c,d,e=a.streams.length,f=0;f<e;f++)b=a.streams[f],b.data.trackId&&(c=dd(a,b.data.trackId),c&&(a.streams[f].data=y(a.streams[f].data,c))),b.data.codecId&&(d=ed(a,b.data.codecId),d&&(a.streams[f].data=y(a.streams[f].data,d)));return a},id=function(a,b,c){b.hasOwnProperty(a)&&(b[a].hasOwnProperty(\"video\")&&(b[a].video.isGreaterBetter?(c.video.gThreshold=b[a].video.upperThreshold,c.video.rThreshold=b[a].video.lowerThreshold):(c.video.gThreshold=b[a].video.lowerThreshold,c.video.rThreshold=b[a].video.upperThreshold)),b[a].hasOwnProperty(\"audio\")&&(b[a].audio.isGreaterBetter?(c.audio.gThreshold=b[a].audio.upperThreshold,c.audio.rThreshold=b[a].audio.lowerThreshold):(c.audio.gThreshold=b[a].audio.lowerThreshold,c.audio.rThreshold=b[a].audio.upperThreshold)))},jd=function(a,c,d){var e=[],f=null,g=null;for(var h in c)c.hasOwnProperty(h)&&e.push(encodeURIComponent(h)+\"=\"+encodeURIComponent(c[h]));var i=e.join(\"&\"),j=new XMLHttpRequest;j.open(\"POST\",a),j.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\"),f=b(),j.onload=function(){g=b();var a=g-f;d(j,a)},j.send(i)},kd=function(){Mb(ga,null,5e3,function(a){if(200===a.status)try{var b=JSON.parse(a.responseText);id(\"eModelThreshold\",b,Eb),id(\"throughputThreshold\",b,Ab),id(\"fractionalLossThreshold\",b,Db),id(\"rttThreshold\",b,Cb),id(\"currOverPrevFrameRateThreshold\",b,Bb)}catch(a){return a}},function(){cb&&kd()})},ld=function(){var a=ba+\"clockSync\",c=null,d=null;Mb(a,null,5e3,function(a,e){200===a.status?(c=JSON.parse(a.response),d=b(),md(c,e,d)):cb&&setTimeout(function(){ld()},100)},function(){cb&&ld()})},md=function(a,b,c){if(cb){var d=b/2;if(d>bb.maxAllowedLatency)bb.offsetResults=[],Ob(ma,na,\"log\",{msg:\"clockSync restarting\"});else{var e=a.now+d,f=e-c;bb.offsetResults.push(f),Ob(ma,na,\"log\",{msg:\"clockSync Info serverTime \"+e+\" responseRecvTs \"+c+\" requestExecutionTime \"+b})}if(bb.offsetResults.length>=bb.syncAttempts){var g=bb.offsetResults.reduce(function(a,b){return a+b});bb.currentOffset=g/bb.offsetResults.length,Ob(ma,na,\"log\",{msg:\"clockSync Done \"+bb.currentOffset+\"Length \"+bb.offsetResults.length}),bb.offsetResults=[],cb=!1,Oa.sendCachedUserJoinedEvents(Ua),Oa.sendCachedEvents(Ua,cb)}else cb&&setTimeout(function(){ld()},100)}},nd=function(){var a=this,c=null,d=!1,e=!1,f={},g={initiated:\"initiated\",connected:\"connected\",closed:\"closed\"};this._wsConnectionState=g.closed;var h=function(a,b){try{if(window&&window.sessionStorage){var c=JSON.parse(window.sessionStorage.getItem(\"csio_ucid_data\"));c||(c={}),c[a]||(c[a]={}),c[a].ucID=b,window.sessionStorage.setItem(\"csio_ucid_data\",JSON.stringify(c))}}catch(a){return}f[a]=fa+ma+\"/conferences/\"+encodeURIComponent(a)+\"/\"+b+\"/general\"};this.getConferenceURL=function(){return f},this._setupWebSocketConnection=function(f){return a._wsConnectionState===g.initiated||a._wsConnectionState===g.connected?(Ob(ma,na,\"log\",{msg:\"### _setupWebSocketConnection is called when already connected!\"}),console.log(\"### _setupWebSocketConnection is called when already connected!\"),void(f&&f(nb.success,\"WebSocket establishment successful.\"))):(a._wsConnectionState=g.initiated,c=new WebSocket(ea,\"echo-protocol\"),c.onopen=function(){console.log(\"**** Successfully connected to the backend \",e,na),Ob(ma,na,\"log\",{msg:\"Successfully connected to the backend\"}),a._wsConnectionState=g.connected,d?e=!0:d=!0,Oa.sendCachedUserJoinedEvents(Ua),e&&(P(),Oa.sendCachedEvents(Ua,cb)),e=!1},c.onclose=function(){a._wsConnectionState=g.closed,console.log(\"**** Connection to the server closed.\"),Ob(ma,na,\"log\",{msg:\"Connection to the server closed.\"}),K(),c&&(c=null),f&&f(nb.httpError,\"Connection to the server closed.\")},c.onerror=function(b){a._wsConnectionState=g.closed,Ob(ma,na,\"log\",{msg:\"WebSocket establishment failed.\"}),console.log(\"WebSocket establishment failed.\",b),f&&f(nb.wsChannelFailure,\"WebSocket establishment failed.\",b)},void(c.onmessage=function(a){var c,d=a.data,e=b(),g=JSON.parse(d);if(\"Error\"===g.status)\"Invalid client token.\"===g.reason&&(Ua.tokenData=null,Ua.authToken=null,Ua.sendAuthenticationRequest(ma,na)),f&&f(nb.csProtoError,d.reason);else if(\"200 OK\"===g.status)if(\"feedback\"===g.event)Kb(\"feedback\");else if(g.event===jb.userJoined||g.event===jb.refreshPresence){var i=!1,j=null;c=decodeURIComponent(g.conferenceID);var k=function(a){return setInterval(function(){ac(a)},Ha)};ab.hasOwnProperty(c)&&(ab[c].ucID!==g.ucID&&(i=!0,h(c,g.ucID),j=g.conferenceCreationTS?g.conferenceCreationTS:g.conferenceDuration),g.event!==jb.userJoined||ab[c].refreshPresence||(ab[c].refreshPresence=k(c),X()),ab[c].ucID=g.ucID),Oa.sendCachedFeedback(),Oa.sendCachedEvents(Ua,cb,i,j,c,g.ucID)}else g.event===kb.clockSync?md(g,e):g.event===ib.fabricSetupFailed&&(c=decodeURIComponent(g.conferenceID),g.ucID&&(h(c,g.ucID),Oa.sendCachedFeedback(),Oa.sendCachedEvents(Ua,cb,!0,0,c,g.ucID)))}))},this._isChannelReady=function(){return!(!c||1!==c.readyState)},this.getWSConnectionState=function(){return c?c.readyState:-1},this.send=function(a){c.send(JSON.stringify(a))}},od=new nd,pd=function(a,b,c){if(od._isChannelReady())try{od.send(b)}catch(d){d&&\"InvalidStateError\"===d.name&&Oa.cacheEvent({channel:a,data:b,callback:c})}else Oa.cacheEvent({channel:a,data:b,callback:c}),od._setupWebSocketConnection()};return f(),Lb(),Y(),window&&!window.csioproxy&&(kd(),Q()),window&&window.csioChromeLegacyGetStats&&(La=!1),{version:da,initialize:dc,on:fc,fabricEvent:ib,addNewFabric:Lc,sendFabricEvent:tc,sendUserFeedback:Bc,associateMstWithUserID:Dc,attachWifiStatsHandler:Cc,csError:nb,fabricUsage:rb,qualityRating:tb,webRTCFunctions:yb,reportError:xc,reportUserIDChange:Mc,userIDType:sb,setProxyConfig:Kc,callStatsAPIReturnStatus:mb,setIdentifiers:Jc,transmissionDirection:qb,endpointType:pb}}\"function\"==typeof define&&define.amd?define(\"callstats\",[],a):global.callstats=a,module.exports=a}(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:this);\n\n\n// WEBPACK FOOTER //\n// ../react-native-callstats/callstats.js","/*! callstats.js  version = 3.27.0 2017-12-14 */\n\"use strict\";function callstatsUtils(){}callstatsUtils.prototype.measureAppLoadingPerformance=function(a){var b=0,c=Number.MAX_VALUE,d=0,e=\"\",f=\"\",g=window.performance;if(!(\"performance\"in window&&\"timing\"in window.performance&&\"navigation\"in window.performance))return{support:\"none\",total:void 0};var h=g.timing.loadEventEnd-g.timing.navigationStart;if(\"Chrome\"===a.name||\"Opera\"===a.name){var i,j=g.getEntriesByType(\"resource\");for(i=0;i<j.length;i++)j[i].duration>d&&(f=j[i].name.substr(j[i].name.lastIndexOf(\"/\")+1),d=j[i].duration),j[i].duration<c&&(e=j[i].name.substr(j[i].name.lastIndexOf(\"/\")+1),c=j[i].duration),j[i].name.indexOf(\"CALLSTATS_SRC_URLstatic/callstats\")>-1&&(b=j[i].duration);return{support:\"full\",callstats:b,min:{name:e,time:c},max:{name:f,time:d},total:h}}return\"Firefox\"===a.name?{support:\"limited\",total:h}:void 0},callstatsUtils.prototype.detectBrowserInfo=function(){var a=\"Chrome\",b=null,c=null,d=null,e={goog:\"Chrome\",moz:\"Firefox\",plugin:\"Plugin\",edge:\"Edge\"},f=e.goog;if(!window.navigator.userAgent||window.csioReactNative)return console.log(\"Invalid userAgent\"),window&&window.csioGetOsName&&(b=window.csioGetOsName()),window&&window.csioGetOsVer&&(c=window.csioGetOsVer()),window&&window.csioReactNative&&(d=\"react-native\"),{name:a,codebase:f,os:b,osVersion:c,userAgent:d};d=navigator.userAgent;var g,h=d.toLowerCase(),i=navigator.appVersion,j=\"\"+parseFloat(navigator.appVersion);(g=h.indexOf(\"opera\"))!==-1?(a=\"Opera\",j=h.substring(g+6),(g=h.indexOf(\"Version\"))!==-1&&(j=h.substring(g+8)),f=e.goog):(g=h.indexOf(\"opr\"))!==-1?(a=\"Opera\",j=h.substring(g+4),(g=h.indexOf(\"Version\"))!==-1&&(j=h.substring(g+8)),f=e.goog):(g=h.indexOf(\"msie\"))!==-1?(a=\"Microsoft Internet Explorer\",j=h.substring(g+5),f=e.goog):(g=h.indexOf(\"edge\"))!==-1?(a=e.edge,j=h.substring(g+5),f=e.edge):(g=h.indexOf(\"chrome\"))!==-1?(a=e.goog,j=h.substring(g+7),f=e.goog):(g=h.indexOf(\"safari\"))!==-1?(a=\"Safari\",j=h.substring(g+7),(g=h.indexOf(\"version\"))!==-1&&(j=h.substring(g+8)),f=e.goog):(g=h.indexOf(\"firefox\"))!==-1?(a=\"Firefox\",j=h.substring(g+8),f=e.moz):(g=h.indexOf(\"trident\"))!==-1&&(a=\"Microsoft Internet Explorer\",g=h.indexOf(\"rv\"),j=h.substring(g+3,g+7),f=e.goog);var k,l,m=[{s:\"Windows 3.11\",r:/win16/},{s:\"Windows 95\",r:/(windows 95|win95|windows_95)/},{s:\"Windows ME\",r:/(win 9x 4.90|windows me)/},{s:\"Windows 98\",r:/(windows 98|win98)/},{s:\"Windows CE\",r:/windows ce/},{s:\"Windows 2000\",r:/(windows nt 5.0|windows 2000)/},{s:\"Windows XP\",r:/(windows nt 5.1|windows xp)/},{s:\"Windows Server 2003\",r:/windows nt 5.2/},{s:\"Windows Vista\",r:/windows nt 6.0/},{s:\"Windows 7\",r:/(windows 7|windows nt 6.1)/},{s:\"Windows 8.1\",r:/(windows 8.1|windows nt 6.3)/},{s:\"Windows 8\",r:/(windows 8|windows nt 6.2)/},{s:\"Windows 10\",r:/(windows 10|windows nt 10.0)/},{s:\"Windows NT 4.0\",r:/(windows nt 4.0|winnt4.0|winnt|windows nt)/},{s:\"Windows ME\",r:/windows me/},{s:\"Android\",r:/android/},{s:\"Open BSD\",r:/openbsd/},{s:\"Sun OS\",r:/sunos/},{s:\"Linux\",r:/(linux|x11)/},{s:\"iOS\",r:/(iphone|ipad|ipod)/},{s:\"Mac OS X\",r:/mac os x/},{s:\"Mac OS\",r:/(macppc|macintel|mac_powerpc|macintosh)/},{s:\"QNX\",r:/qnx/},{s:\"UNIX\",r:/unix/},{s:\"BeOS\",r:/beos/},{s:\"OS/2\",r:/os\\/2/},{s:\"Search Bot\",r:/(nuhk|googlebot|yammybot|openbot|slurp|msnbot|ask jeeves\\/teoma|ia_archiver)/}];for(k in m)if(l=m[k],l.r.test(h)){b=l.s;break}switch(b&&/Windows/.test(b)&&(c=/Windows (.*)/.exec(b)[1],b=\"Windows\"),b){case\"Mac OS X\":c=/mac os x (10[\\.\\_\\d]+)/.exec(h)[1];break;case\"Android\":c=/android ([\\.\\_\\d]+)/.exec(h)[1];break;case\"iOS\":c=/os (\\d+)_(\\d+)_?(\\d+)?/.exec(i),c=c[1]+\".\"+c[2]+\".\"+(0|c[3])}return{name:a,ver:j.toString(),os:b,osVersion:c,codebase:f,userAgent:d}},module.exports=callstatsUtils;\n\n\n// WEBPACK FOOTER //\n// ../react-native-callstats/callstatsUtils.js","/*! callstats.js  version = 3.27.0 2017-12-14 */\nfunction PusherPlug(){this.invoker=null,this.receiver=null}function Notifier(){this.listeners=[]}function SenderGate(a){this.stats=null,this.lastResponsed=(new Date).getTime(),this.onDataSent=a}function Measurement(a){this.ssrc=null,this.direction=void 0,this.mediaType=null,this.resolution=null,this.frameRateReceived=null,this.frameWidth=null,this.rtt=null,this.droppedFramesNum=null,this.packetLosts=null,this.jitter=null,this.bytesReceived=-1,this.packetsReceived=-1,this.packetsDiscarded=-1,this.bytesSent=-1,this.packetsSent=-1,this.stream=a}function NumberComparator(a,b){var c=\"number\"==typeof a?a:parseInt(a),d=\"number\"==typeof b?b:parseInt(b);return c===d?0:c<d?-1:1}function MeasurementRTTComparator(a,b){return NumberComparator(a.rtt,b.rtt)}function MeasurementFrameHeightComparator(a,b){return NumberComparator(a.frameHeight,b.frameHeight)}function MeasurementFrameWidthComparator(a,b){return NumberComparator(a.frameWidth,b.frameWidth)}function MeasurementJitterComparator(a,b){return NumberComparator(a.jitter,b.jitter)}function MeasurementFrameRateReceivedComparator(a,b){var c=parseInt(a.frameRateReceived),d=parseInt(b.frameRateReceived);return c===d?0:c<d?-1:1}function MeasurementMerger(a,b){return a}function Assembler(){this.codeBase=null,this.mediaType={unknown:\"unknown\",audio:\"audio\",video:\"video\"},this.codeBaseType={chrome:\"Chrome\",firefox:\"Firefox\",edge:\"Edge\"}}function SWValueTracker(a){SWPlugin.call(this),this.extractorFnc=a,this.prev=0,this.delta=0,this.first=0,this.actual=0,this.addSignalListener(Reporter.Signals.onDataSent,this.onDataSent,this)}function SWValueHolder(a){SWPlugin.call(this),this.extractorFnc=a,this.prev=null}function FractionLost(a,b){this.intervalPacketsRecv=b,this.intervalLoss=a}function FractionLostComparator(a,b){var c=a.getValue(),d=b.getValue();return c===d?0:c<d?-1:1}function FractionLostMerger(a,b){var c=(a.getIntervalLoss()+b.getIntervalLoss())/2,d=(a.getIntervalPacketsRecv()+b.getIntervalPacketsRecv())/2;return new FractionLost(c,d)}function Monitor(){this.measurements=new SlidingWindow(Reporter.maxItemsNum,Reporter.timeoutInMs),this.packetLostTracker=new SWValueTracker(function(a){return a.packetLosts}),this.measurements.addPlugin(this.packetLostTracker),this.packetsDiscardedTracker=new SWValueTracker(function(a){return a.packetsDiscarded}),this.measurements.addPlugin(this.packetsDiscardedTracker),this.resolutionTracker=new SWValueHolder(function(a){return a.resolution}),this.measurements.addPlugin(this.resolutionTracker),this.jitter95PercentileTracker=new SWPercentileTracker(MeasurementJitterComparator,95,MeasurementMerger),this.measurements.addPlugin(this.jitter95PercentileTracker),this.jitter95PercentileTracker.addFilter(function(a){return void 0!==a.jitter&&null!==a.jitter}),this.rtt95PercentileTracker=new SWPercentileTracker(MeasurementRTTComparator,95,MeasurementMerger),this.measurements.addPlugin(this.rtt95PercentileTracker),this.rtt95PercentileTracker.addFilter(function(a){return void 0!==a.rtt&&null!==a.rtt&&0<a.rtt}),this.frameHeight50PercentileTracker=new SWPercentileTracker(MeasurementFrameHeightComparator,50,MeasurementMerger),this.measurements.addPlugin(this.frameHeight50PercentileTracker),this.frameHeight50PercentileTracker.addFilter(function(a){return void 0!==a.frameHeight&&null!==a.frameHeight&&0<a.frameHeight}),this.frameHeight95PercentileTracker=new SWPercentileTracker(MeasurementFrameHeightComparator,95,MeasurementMerger),this.measurements.addPlugin(this.frameHeight95PercentileTracker),this.frameHeight95PercentileTracker.addFilter(function(a){return void 0!==a.frameHeight&&null!==a.frameHeight&&0<a.frameHeight}),this.frameRate50PercentileTracker=new SWPercentileTracker(MeasurementFrameRateReceivedComparator,50,MeasurementMerger),this.measurements.addPlugin(this.frameRate50PercentileTracker),this.frameRate50PercentileTracker.addFilter(function(a){return void 0!==a.frameRateReceived&&null!==a.frameRateReceived}),this.frameRate95PercentileTracker=new SWPercentileTracker(MeasurementFrameRateReceivedComparator,95,MeasurementMerger),this.measurements.addPlugin(this.frameRate95PercentileTracker),this.frameRate95PercentileTracker.addFilter(function(a){return void 0!==a.frameRateReceived&&null!==a.frameRateReceived}),this.frameWidth50PercentileTracker=new SWPercentileTracker(MeasurementFrameWidthComparator,50,MeasurementMerger),this.measurements.addPlugin(this.frameWidth50PercentileTracker),this.frameWidth50PercentileTracker.addFilter(function(a){return void 0!==a.frameWidth&&null!==a.frameWidth&&0<a.frameWidth}),this.frameWidth95PercentileTracker=new SWPercentileTracker(MeasurementFrameWidthComparator,95,MeasurementMerger),this.measurements.addPlugin(this.frameWidth95PercentileTracker),this.frameWidth95PercentileTracker.addFilter(function(a){return void 0!==a.frameWidth&&null!==a.frameWidth&&0<a.frameWidth}),this.rttAvgRTTracker=new SWAvg(function(a){return a.rtt}),this.measurements.addPlugin(this.rttAvgRTTracker),this.rttAvgRTTracker.addFilter(function(a){return void 0!==a.rtt&&null!==a.rtt&&0<a.rtt}),this.frameRateMeanTracker=new SWAvg(function(a){return a.frameRateReceived}),this.measurements.addPlugin(this.frameRateMeanTracker),this.frameRateMeanTracker.addFilter(function(a){return void 0!==a.frameRateReceived&&null!==a.frameRateReceived&&0<a.frameRateReceived}),this.frameHeightMeanTracker=new SWAvg(function(a){return a.frameHeight}),this.measurements.addPlugin(this.frameHeightMeanTracker),this.frameHeightMeanTracker.addFilter(function(a){return void 0!==a.frameHeight&&null!==a.frameHeight&&0<a.frameHeight}),this.frameWidthMeanTracker=new SWAvg(function(a){return a.frameWidth}),this.measurements.addPlugin(this.frameWidthMeanTracker),this.frameWidthMeanTracker.addFilter(function(a){return void 0!==a.frameHeight&&null!==a.frameWidth&&0<a.frameWidth}),this.jitterAvgTracker=new SWAvg(function(a){return a.jitter}),this.measurements.addPlugin(this.jitterAvgTracker),this.jitterAvgTracker.addFilter(function(a){return void 0!==a.jitter&&null!==a.jitter&&0<a.jitter}),this.intervalFractionLosts=new SlidingWindow(Reporter.maxItemsNum,Reporter.timeoutInMs),this.FLPercentileTracker=new SWPercentileTracker(FractionLostComparator,95,FractionLostMerger),this.intervalFractionLosts.addPlugin(this.FLPercentileTracker),this.lastSent=0,this.firstAdded=0,this.lastAdded=0,this.doSending=!1,this.mediaType=null,this.direction=null,this.lastTraffic=0,this.ssrc=0}function InboundMonitor(){Monitor.call(this),this.bytesReceivedTracker=new SWValueTracker(function(a){return a.bytesReceived}),this.packetsReceivedTracker=new SWValueTracker(function(a){return a.packetsReceived}),this.addPlugin(this.bytesReceivedTracker),this.addPlugin(this.packetsReceivedTracker),this.csioIntBRKbpsCount=0,this.csioIntPRCount=0}function InbAudioMonitor(){InboundMonitor.call(this),this.quality={eModel:0,bandwidth:0},this.direction=Measurement.Direction.inbound,this.mediaType=Measurement.MediaTypes.audio}function InbVideoMonitor(){InboundMonitor.call(this),this.frameRateReceivedTracker=new SWValueTracker(function(a){return a.frameRateReceived}),this.frameRatePercTracker=new SWPercentileTracker(MeasurementFrameRateReceivedComparator,10,MeasurementMerger),this.frameRatePercTracker.addFilter(function(a){return void 0!==a.frameRateReceived&&null!==a.frameRateReceived}),this.frameRatePercTracker.attach(this.setFrameRateReceived10,this),this.frameRateReceived10=null,this.addPlugin(this.frameRatePercTracker),this.addPlugin(this.frameRateReceivedTracker),this.quality={eModel:0,bandwidth:0,frameRate:0},this.direction=Measurement.Direction.inbound,this.mediaType=Measurement.MediaTypes.video}function OutboundMonitor(){Monitor.call(this),this.bytesSentTracker=new SWValueTracker(function(a){return a.bytesSent}),this.packetsSentTracker=new SWValueTracker(function(a){return a.packetsSent}),this.addPlugin(this.bytesSentTracker),this.addPlugin(this.packetsSentTracker),this.csioIntBRKbpsCount=0,this.csioIntPRCount=0}function OutbVideoMonitor(){OutboundMonitor.call(this),this.frameRateReceivedTracker=new SWValueTracker(function(a){return a.frameRateReceived}),this.frameRatePercTracker=new SWPercentileTracker(MeasurementFrameRateReceivedComparator,10,MeasurementMerger),this.frameRatePercTracker.addFilter(function(a){return void 0!==a.frameRateReceived&&null!==a.frameRateReceived}),this.frameRatePercTracker.attach(this.setFrameRateReceived10,this),this.frameRateReceived10=null,this.addPlugin(this.frameRatePercTracker),this.addPlugin(this.frameRateReceivedTracker),this.quality={eModel:0,bandwidth:0,frameRate:0},this.sendingThroughputObservations={ssrc:0,started:0,max:0,maxTs:0,stable:0,stableTs:0,ready:!1,maxVerified:!1,stableVerified:!1},this.direction=Measurement.Direction.outbound,this.mediaType=Measurement.MediaTypes.video}function OutbAudioMonitor(){OutboundMonitor.call(this),this.quality={eModel:0,bandwidth:0},this.direction=Measurement.Direction.outbound,this.mediaType=Measurement.MediaTypes.audio}function Monitors(){this.monitors={},this.assembler=new Assembler,this.sendable=!1,this.inbOneWayAudioDisruption={sent:!1,started:0,hasTrafficTs:0},this.outbOneWayAudioDisruption={sent:!1,started:0,hasTrafficTs:0}}function Analyzer(a){this.monitors=new Monitors,this.output=new PusherPlug,this.lastForwarded=(new Date).getTime(),this.lastInterval=0,this.sentCounter=0,this.nextInterval=0,a.addListener(this.monitors.onDataSent,this.monitors),a.addListener(this.onDataSent,this)}function Reporter(){this.states={Idle:\"Idle\",Run:\"Run\"},this.events={OnPolling:\"OnPolling\",OnStatsRequest:\"OnStatsRequest\",OnStop:\"OnStop\",OnStart:\"OnStart\",OnOneWayAudioDisruptionsRequest:\"OnOneWayAudioDisruptionsRequest\",OnSendingThroughputObservationsRequest:\"OnSendingThroughputObservationsRequest\"},this.onDataSent=new Notifier,this.analyzer=new Analyzer(this.onDataSent),this.senderGate=new SenderGate(this.onDataSent),this.sendingThroughputObservationsSent=!1,this.analyzer.output.connect(this.senderGate.receiver,this.senderGate),this.currentState=this.states.Run}var SlidingWindow=require(\"./slidingWindow\"),SWPlugin=require(\"./swPlugin\"),SWPercentileTracker=require(\"./swPercentileTracker\"),SWAvg=require(\"./swAvg\");Reporter.disruptions=[],Reporter.adaptiveSending=!0,Reporter.minMeasurementsNum=20,Reporter.SendingTimeTresholds={max:3e4,min:1e3,regular:5e3},Reporter.minDeltaTimeInMs=1e3,Reporter.maxItemsNum=1e3,Reporter.timeoutInMs=3e5,Reporter.Signals={onDataSent:\"onDataSent\"},PusherPlug.prototype={constructor:PusherPlug,connect:function(a,b){this.invoker=void 0===b?null:b,this.receiver=a},send:function(a){return null===this.receiver?void console.warn(\"There is no receiver to call\"):null===this.invoker?void this.receiver(a):void this.receiver.call(this.invoker,a)}},Notifier.prototype={constructor:Notifier,addListener:function(a,b){this.listeners.push({callback:a,that:b})},notify:function(){for(var a=0;a<this.listeners.length;++a){var b=this.listeners[a];void 0!==b.callback&&null!==b.callback&&(null===b.that?b.callback():b.callback.call(b.that))}}},SenderGate.prototype={constructor:SenderGate,receiver:function(a){this.stats=a,this.initiate=!1},requestStats:function(){var a=null,b=(new Date).getTime();if(null===this.stats)return null;if(this.initiate&&b-Reporter.SendingTimeTresholds.min<this.lastResponsed)return console.warn(\"Reporter : Too small interval between two sampling to response\"),null;var c=b-this.lastResponsed;return console.log(\"Elapsed time since last report: \"+c),a={streams:this.stats},this.stats=null,this.lastResponsed=b,this.onDataSent.notify(),this.initiate=!0,a}},Measurement.MediaTypes={audio:\"audio\",video:\"video\"},Measurement.Direction={inbound:\"inbound\",outbound:\"outbound\"},Measurement.prototype={constructor:Measurement,toString:function(){return\"Measurement {RTT: \"+this.RTT+\"; }\"}},Assembler.prototype={constructor:Assembler,do:function(a,b){var c=new Measurement(a);if(c.ssrc=a.ssrc,c.mediaType=this.getMediaType(a),c.resolution=this.getResolution(a),c.frameRateReceived=this.getFrameRate(a),c.frameWidth=this.getFrameWidth(a),c.frameHeight=this.getFrameHeight(a),c.rtt=this.getLatencyData(a),c.droppedFramesNum=this.getDroppedFramesNum(a),c.packetLosts=this.getPacketLosts(a),c.jitter=this.getJitter(a),a.streamType===Measurement.Direction.inbound?(c.direction=Measurement.Direction.inbound,c.bytesReceived=this.getBytesReceived(a),c.packetsReceived=this.getPacketsReceived(a),c.packetsDiscarded=this.getPacketsDiscarded(a)):a.streamType===Measurement.Direction.outbound&&(c.direction=Measurement.Direction.outbound,c.bytesSent=this.getBytesSent(a),c.packetsSent=this.getPacketsSent(a)),void 0!==b&&b===!0){c.rawdats={};for(var d in a.data)a.data.hasOwnProperty(d)&&(c.rawdats[d]=a.data[d])}return c},setupCodeBase:function(a){this.codeBase=a},getBytesSent:function(a){if(void 0===a.data.bytesSent)return 0;var b=this.checkForNan(parseInt(a.data.bytesSent,10));return null!==b?b:0},getBytesReceived:function(a){if(void 0===a.data.bytesReceived)return 0;var b=this.checkForNan(parseInt(a.data.bytesReceived,10));return null!==b?b:0},getPacketsReceived:function(a){if(void 0===a.data.packetsReceived)return 0;var b=this.checkForNegativeValue(parseInt(a.data.packetsReceived,10));return null!==b?b:0},getPacketsSent:function(a){if(void 0===a.data.packetsSent)return 0;var b=this.checkForNegativeValue(parseInt(a.data.packetsSent,10));return null!==b?b:0},getPacketsDiscarded:function(a){if(void 0===a.data.discardedPackets)return 0;var b=this.checkForNan(parseInt(a.data.discardedPackets,10));return null!==b?b:0},getPacketLosts:function(a){if(void 0===a.data.packetsLost)return 0;var b=this.checkForNegativeValue(parseInt(a.data.packetsLost,10));return null!==b?b:0},getDroppedFramesNum:function(a){if(void 0===a.data.droppedFrames)return 0;var b=this.checkForNegativeValue(parseInt(a.data.droppedFrames,10));return null!==b?b:0},getFrameRate:function(a){var b;return void 0!==a.data.googFrameRateOutput?b=parseInt(a.data.googFrameRateOutput,10):void 0!==a.data.googFrameRateDecoded?b=parseInt(a.data.googFrameRateDecoded,10):void 0!==a.data.googFrameRateReceived?b=parseInt(a.data.googFrameRateReceived,10):void 0!==a.data.googFrameRateSent?b=parseInt(a.data.googFrameRateSent,10):void 0!==a.data.framerateMean&&(b=parseInt(a.data.framerateMean,10)),void 0!==b&&(b=isNaN(b)||b<0?null:b),b},getFrameHeight:function(a){var b;return void 0!==a.data.googFrameHeightReceived?b=a.data.googFrameHeightReceived:void 0!==a.data.googFrameHeightSent?b=a.data.googFrameHeightSent:void 0!==a.data.frameHeight&&(b=a.data.frameHeight),b},getJitter:function(a){if(void 0!==a){var b;return void 0!==a.data.googJitterReceived?(b=this.checkForNan(parseInt(a.data.googJitterReceived,10)),b?b/1e3:b):this.codeBase===this.codeBaseType.chrome&&void 0!==a.data.jitter?(b=this.checkForNan(parseInt(a.data.jitter,10)),b?b/1e3:b):this.codeBase===this.codeBaseType.firefox&&void 0!==a.data.jitter?this.checkForNan(parseInt(a.data.jitter,10)):void 0}},getResolution:function(a){var b,c,d,e=\"unavailable\";return b=this.getFrameRate(a),d=this.getFrameWidth(a),c=this.getFrameHeight(a),void 0!==b&&void 0!==d&&void 0!==c&&d>0&&c>0&&(e=d.concat(\"x\",c,\"@\",b)),e},getFrameWidth:function(a){var b;return void 0!==a.data.googFrameWidthReceived?b=a.data.googFrameWidthReceived:void 0!==a.data.googFrameWidthSent?b=a.data.googFrameWidthSent:void 0!==a.data.frameWidth&&(b=a.data.frameWidth),b},validateRTT:function(a){var b;return b=isNaN(a)||a<0?null:a},getLatencyData:function(a){return void 0===a?null:void 0!==a.data.googRtt?this.validateRTT(parseInt(a.data.googRtt,10)):void 0!==a.data.roundTripTime?this.validateRTT(parseInt(a.data.roundTripTime,10)):void 0!==a.data.mozRtt?this.validateRTT(parseInt(a.data.mozRtt,10)):null},getMediaType:function(a){var b=this.mediaType.unknown;if(void 0!==a)return a.data&&void 0!==a.data.mediaType?a.data.mediaType:(a.data.mediaType?b=a.data.mediaType:void 0!==a.data.googFrameRateReceived||void 0!==a.data.googFrameRateSent?b=this.mediaType.video:void 0!==a.data.audioInputLevel||void 0!==a.data.audioOutputLevel||void 0!==a.data.audioLevel?b=this.mediaType.audio:void 0!==a.data.framerateMean&&(b=this.mediaType.video),b)},checkForNan:function(a){var b=isNaN(a)?null:a;return b},checkForNegativeValue:function(a){if(a=this.checkForNan(a),null!==a){var b=a<0?null:a;return b}},toString:function(){return\"ToString function is not defined. for this object\"}},SWValueTracker.prototype=Object.create(SWPlugin.prototype),SWValueTracker.prototype.constructor=SWValueTracker,SWValueTracker.prototype.onDataSent=function(){this.prev=this.actual},SWValueTracker.prototype.getActual=function(){return this.actual},SWValueTracker.prototype.getFirst=function(){return this.first},SWValueTracker.prototype.getDelta=function(){return this.delta=this.actual-this.prev,this.delta},SWValueTracker.prototype.getPrevious=function(){return this.prev},SWValueTracker.prototype.add=function(a){var b=this.extractorFnc(a);if(void 0!==b&&null!==b){if(0===this.first)return this.first=b,void(this.actual=b);this.actual=b,this.notify({last:this.prev,delta:this.delta})}},SWValueTracker.prototype.remove=function(){},SWValueHolder.prototype=Object.create(SWPlugin.prototype),SWValueHolder.prototype.constructor=SWValueHolder,SWValueHolder.prototype.add=function(a){void 0!==a&&null!==a&&(this.prev=this.extractorFnc(a))},SWValueHolder.prototype.remove=function(){},SWValueHolder.prototype.getPrevious=function(){return this.prev},FractionLost.prototype={constructor:FractionLost,getIntervalLoss:function(){return this.intervalLoss},getIntervalPacketsRecv:function(){return this.intervalPacketsRecv},getValue:function(){return void 0===this.intervalPacketsRecv||void 0===this.intervalLoss?null:null===this.intervalPacketsRecv||null===this.intervalLoss?null:0===this.intervalLoss&&0===this.intervalPacketsRecv?0:this.intervalLoss/(this.intervalPacketsRecv+this.intervalLoss)}},Monitor.VideoThroughputThresholds={green:1024,red:256},Monitor.AudioThroughputThresholds={green:30,red:8},Monitor.FrameRateRatioTresholds={green:.8,red:.3},Monitor.VideoRTTThresholds={green:400,red:1e3},Monitor.VideoFractionLostTreshdolds={green:10,red:50},Monitor.AudioFractionLostTresholds={green:15,red:30},Monitor.AudioEModelTresholds={green:240,red:400},Monitor.avQualityRating={excellent:3,fair:2,bad:1},Monitor.avQualityRatingString={excellent:\"excellent\",fair:\"fair\",bad:\"bad\"},Monitor.prototype={constructor:Monitor,doStart:function(){return!0},getStartTime:function(){return this.firstAdded},hasTraffic:function(){var a=this.getLastMeasurement();return this.direction===Measurement.Direction.inbound?0<a.bytesReceived:this.direction===Measurement.Direction.outbound&&0<a.bytesSent},getTotalTimeInMs:function(){return 0===this.firstAdded?0:this.lastAdded-this.firstAdded},getDeltaTimeInMs:function(){return 0===this.lastSent?this.lastAdded-this.firstAdded:this.lastAdded-this.lastSent},getLastMeasurement:function(){return this.measurements.getLast()},setSSRC:function(a){this.ssrc=a},getSSRC:function(){return this.ssrc},add:function(a){var b=(new Date).getTime();if(0===this.firstAdded){if(!this.doStart(a))return;this.firstAdded=b}this.lastAdded=b,this.measurements.add(a)},requestSending:function(){this.doSending=!0},setIntBRAndPR:function(a,b,c){var d=this.getDeltaTimeInMs(),e=Math.max(Reporter.minDeltaTimeInMs,d),f=8*a.getDelta()/e,g=b.getDelta()/(e/1e3);c.data.csioIntBRKbps=f,c.data.csioIntPR=g,0<f?this.csioIntBRKbpsCount=10:0<this.csioIntBRKbpsCount&&(--this.csioIntBRKbpsCount,this.requestSendingIf(1e3<d&&this.csioIntPRCount<5,\"OutboundMonitor csioIntBRKbps is 0 and this is the reason for sending\")),0<g?this.csioIntPRCount=10:0<this.csioIntPRCount&&(--this.csioIntPRCount,this.requestSendingIf(1e3<d&&this.csioIntPRCount<5,\"OutboundMonitor csioIntPR is 0 and this is the reason for sending: \"))},requestSendingIf:function(a,b){this.doSending=this.doSending||a},getAvgRTT:function(){return this.rttAvgRTTracker.getResult()},getResolution:function(){return this.resolutionTracker.getPrevious()},percentileTrackerExtractor:function(a,b,c){var d=null,e=a.getResult();return null===e?c:(d=b(e.actual),null===d?c:d)},getRTT95:function(){var a=this.percentileTrackerExtractor(this.rtt95PercentileTracker,function(a){return a.rtt},null),b=this.getLastMeasurement();if(null!==b&&null!==a){var c=Math.max(.1*a,50);this.requestSendingIf(a+c<b.rtt,\"RTT95 the reason of sending \"+a+\" < \"+b.rtt)}return a},getJitter95:function(){var a=this.percentileTrackerExtractor(this.jitter95PercentileTracker,function(a){return a.jitter},null),b=this.getLastMeasurement();if(null!==b){var c=Math.max(.1*a,10);this.requestSendingIf(a+c<b.jitter,\"Jitter95 the reason of sending \"+a+\" < \"+b.jitter)}return this.result},getFrameRateMean:function(){return this.frameRateMeanTracker.getResult()},getFrameWidth50Percentile:function(){return this.percentileTrackerExtractor(this.frameWidth50PercentileTracker,function(a){return a.frameWidth},null)},getFrameWidth95Percentile:function(){return this.percentileTrackerExtractor(this.frameWidth95PercentileTracker,function(a){return a.frameWidth},null)},getFrameHeight50Percentile:function(){return this.percentileTrackerExtractor(this.frameHeight50PercentileTracker,function(a){return a.frameHeight},null)},getFrameHeight95Percentile:function(){return this.percentileTrackerExtractor(this.frameHeight95PercentileTracker,function(a){return a.frameHeight},null)},getFrameRate50Percentile:function(){return this.percentileTrackerExtractor(this.frameRate50PercentileTracker,function(a){return a.frameRateReceived},null)},getFrameRate95Percentile:function(){return this.percentileTrackerExtractor(this.frameRate95PercentileTracker,function(a){return a.frameRateReceived},null)},getFrameHeightMean:function(){return this.frameHeightMeanTracker.getResult()},getFrameWidthMean:function(){return this.frameWidthMeanTracker.getResult()},getAvgJitter:function(){return this.jitterAvgTracker.getResult()},getQualityEvaluation:function(a,b){if(void 0!==a&&void 0!==b){if(null===a||null===a)return null;var c;return c=b.green<=a?Monitor.avQualityRating.excellent:b.red<a&&a<b.green?Monitor.avQualityRating.fair:Monitor.avQualityRating.bad}},getQualityReverseEvaluation:function(a,b){if(void 0!==a&&void 0!==b){if(null===a||null===a)return null;var c;return c=b.red<a?Monitor.avQualityRating.bad:b.green<=a&&a<=b.red?Monitor.avQualityRating.fair:Monitor.avQualityRating.excellent}},hasData:function(){return this.measurements.refresh(),1<this.measurements.getItemsNum()},addPlugin:function(a){this.measurements.addPlugin(a)},setup:function(a){a.data.csioIntBRKbps=0,a.data.csioAvgBRKbps=0,a.data.csioIntFL=void 0,a.data.csioIntMs=Math.max(Reporter.SendingTimeTresholds.regular,this.getDeltaTimeInMs()),a.data.csioIntPR=void 0,a.data.csioPercentileFl=void 0,a.data.csioIntPktLoss=void 0,a.data.csioAvgJitter=this.getAvgJitter(),a.data.csioAvgRtt=this.getAvgRTT(),a.data.csioPercentileJitter=this.getJitter95(),a.data.csioSig2Latency=this.getRTT95(),a.data.csioTimeElapseMs=this.getTotalTimeInMs(),a.data.csioeM=(null!==this.getRTT95()?this.getRTT95():0)+40,a.data.csiores=this.getResolution(),a.data.csioFrameWidth95Percentile=this.getFrameWidth95Percentile(),a.data.csioFrameWidth50Percentile=this.getFrameWidth50Percentile(),a.data.csioFrameHeight95Percentile=this.getFrameHeight95Percentile(),a.data.csioFrameHeight50Percentile=this.getFrameHeight50Percentile(),a.data.csioFrameRate95Percentile=this.getFrameRate95Percentile(),a.data.csioFrameRate50Percentile=this.getFrameRate50Percentile(),a.data.csioFrameWidthMean=this.getFrameWidthMean(),a.data.csioFrameHeightMean=this.getFrameHeightMean(),a.data.csioFrameRateMean=this.getFrameRateMean()},addIntervalFractionLost:function(a){this.intervalFractionLosts.add(a)},getLastFractionLost:function(){return this.intervalFractionLosts.getLast()},getIntervalFractionLost95:function(){var a,b=this.FLPercentileTracker.getResult();if(null===b)return 0;a=b.actual.getValue();var c=this.getLastFractionLost();if(null!==c&&null!==a){var d=Math.max(.05,c.getValue());this.requestSendingIf(c.getValue()+d<a,\"Fraction lost is the reason for sending \"+c.getValue()+\" \"+a)}return a},onDataSent:function(){var a=(new Date).getTime();this.measurements.signalize(Reporter.Signals.onDataSent,null),this.lastSent=a},isValid:function(){for(var a=0;a<arguments.length;a++)if(null===arguments[a]||void 0===arguments[a])return!1;return!0},doSend:function(){if(this.hasData()===!1)return!0;var a=this.doSending;return this.doSending=!1,a},getMediaType:function(){return this.mediaType},getDirection:function(){return this.direction}},InboundMonitor.prototype=Object.create(Monitor.prototype),InboundMonitor.prototype.constructor=InboundMonitor,InboundMonitor.prototype.setRTT95=function(a){Monitor.prototype.setRTT95(a)},InboundMonitor.prototype.setup=function(a){Monitor.prototype.setup.call(this,a);var b=new FractionLost(this.packetLostTracker.getDelta(),this.packetsReceivedTracker.getDelta());this.addIntervalFractionLost(b),a.data.csioIntPktRcv=this.packetsReceivedTracker.getDelta(),this.setIntBRAndPR(this.bytesReceivedTracker,this.packetsReceivedTracker,a),this.getTotalTimeInMs()>0&&(a.data.csioAvgBRKbps=8*this.bytesReceivedTracker.getActual()/this.getTotalTimeInMs()),a.data.csioIntFL=b.getValue(),a.data.csioPercentileFl=this.getIntervalFractionLost95(),a.data.csioeM=(null!==this.getRTT95()?this.getRTT95():0)+40,a.data.csioIntPktLoss=this.packetLostTracker.getDelta(),void 0!==a.data.csioAvgBRKbps&&null!==a.data.csioAvgBRKbps?a.data.csioAvgPacketSize=this.bytesReceivedTracker.getDelta()/this.packetsReceivedTracker.getDelta():a.data.csioAvgPacketSize=null,a.data.csioPktLossPercentage=this.packetLostTracker.getDelta()/this.packetsReceivedTracker.getDelta()*100},InbAudioMonitor.prototype=Object.create(InboundMonitor.prototype),InbAudioMonitor.prototype.constructor=InbAudioMonitor,InbAudioMonitor.prototype.setup=function(a){InboundMonitor.prototype.setup.call(this,a),a.data.csioMediaType=Measurement.MediaTypes.audio,this.quality.eModel=this.getQualityReverseEvaluation(a.data.csioeM,Monitor.AudioEModelTresholds),this.quality.bandwidth=this.getQualityEvaluation(a.data.csioIntBRKbps,Monitor.AudioThroughputThresholds),a.data.csioMark=this.getQuality()},InbAudioMonitor.prototype.getQuality=function(){var a=0,b=.5*this.quality.bandwidth+.5*this.quality.eModel;return b=Math.floor(b),b===Monitor.avQualityRating.excellent?a=Monitor.avQualityRatingString.excellent:b===Monitor.avQualityRating.fair?a=Monitor.avQualityRatingString.fair:b===Monitor.avQualityRating.bad&&(a=Monitor.avQualityRatingString.bad),a},InbVideoMonitor.prototype=Object.create(InboundMonitor.prototype),InbVideoMonitor.prototype.constructor=InbVideoMonitor,InbVideoMonitor.prototype.setFrameRatioQuality=function(){var a=this.frameRateReceivedTracker.getActual(),b=this.frameRateReceivedTracker.getPrevious(),c=0;this.quality.frameRate=0,void 0!==a&&void 0!==b&&null!==a&&null!==b&&0!==b&&(c=a/b,this.quality.frameRate=this.getQualityEvaluation(c,Monitor.FrameRateRatioTresholds))},InbVideoMonitor.prototype.setFrameRateReceived10=function(a){return null===a?void(this.frameRateReceived10=null):void(this.frameRateReceived10=a.actual)},InbVideoMonitor.prototype.setup=function(a){InboundMonitor.prototype.setup.call(this,a),a.data.csioMediaType=Measurement.MediaTypes.video,this.setFrameRatioQuality(),this.quality.eModel=this.getQualityReverseEvaluation(a.data.csioeM,Monitor.AudioEModelTresholds),this.quality.bandwidth=this.getQualityEvaluation(a.data.csioIntBRKbps,Monitor.VideoThroughputThresholds),a.data.csioMark=this.getQuality()},InbVideoMonitor.prototype.getQuality=function(){var a=0,b=.33*this.quality.bandwidth+.33*this.quality.eModel+.33*this.quality.frameRate;return b=Math.floor(b),b===Monitor.avQualityRating.excellent?a=Monitor.avQualityRatingString.excellent:b===Monitor.avQualityRating.fair?a=Monitor.avQualityRatingString.fair:b===Monitor.avQualityRating.bad&&(a=Monitor.avQualityRatingString.bad),a},OutboundMonitor.prototype=Object.create(Monitor.prototype),OutboundMonitor.prototype.constructor=OutboundMonitor,OutboundMonitor.prototype.setup=function(a){Monitor.prototype.setup.call(this,a);var b=new FractionLost(this.packetLostTracker.getDelta(),this.packetsSentTracker.getDelta());this.addIntervalFractionLost(b),this.setIntBRAndPR(this.bytesSentTracker,this.packetsSentTracker,a),this.getTotalTimeInMs()>0&&(a.data.csioAvgBRKbps=8*this.bytesSentTracker.getActual()/this.getTotalTimeInMs()),a.data.csioIntFL=b.getValue(),a.data.csioIntPktRcv=this.packetsSentTracker.getDelta(),a.data.csioPercentileFl=this.getIntervalFractionLost95(),a.data.csioeM=(null!==this.getRTT95()?this.getRTT95():0)+40,a.data.csioIntPktLoss=this.packetLostTracker.getDelta(),void 0!==a.data.csioAvgBRKbps&&null!==a.data.csioAvgBRKbps?a.data.csioAvgPacketSize=this.bytesSentTracker.getDelta()/this.packetsSentTracker.getDelta():a.data.csioAvgPacketSize=null,a.data.csioPktLossPercentage=this.packetLostTracker.getDelta()/this.packetsSentTracker.getDelta()*100},OutbVideoMonitor.verificationElapsedThreshold=1e4,OutbVideoMonitor.initialElapsedThreshold=15e3,OutbVideoMonitor.minStableKBpsSlack=50,OutbVideoMonitor.prototype=Object.create(OutboundMonitor.prototype),OutbVideoMonitor.prototype.constructor=OutbVideoMonitor,OutbVideoMonitor.prototype.setFrameRatioQuality=function(){var a=this.frameRateReceivedTracker.getActual(),b=this.frameRateReceivedTracker.getPrevious(),c=0;this.quality.frameRate=0,void 0!==a&&void 0!==b&&null!==a&&null!==b&&0!==b&&(c=a/b,this.quality.frameRate=this.getQualityEvaluation(c,Monitor.FrameRateRatioTresholds))},OutbVideoMonitor.prototype.setFrameRateReceived10=function(a){return null===a?void(this.frameRateReceived10=null):void(this.frameRateReceived10=a.actual)},OutbVideoMonitor.prototype.getSendingKBitrateObservations=function(){var a=this.sendingThroughputObservations;return a.ready?{ssrc:a.ssrc,maxsendingKBitrate:a.max,timeToMaxSendingKBitrate:a.maxTs-a.started,stablesendingKBitrate:a.stable,timeToStableSendingKBitrate:a.stableTs-a.started}:null},OutbVideoMonitor.prototype.checkSendingKBitrateObservations=function(a){var b=this.sendingThroughputObservations,c=(new Date).getTime();if(b.ready!==!0){if(0===b.started)return b.ssrc=this.getSSRC(),void(b.started=c);var d=a.data.csioIntBRKbps,e=Math.min(OutbVideoMonitor.minStableKBpsSlack,.05*d);b.max<d?(b.max=d,b.maxTs=c):OutbVideoMonitor.verificationElapsedThreshold<c-b.maxTs&&(b.maxVerified=!0),c-b.started<OutbVideoMonitor.initialElapsedThreshold||(d-e<a.data.csioAvgBRKbps&&a.data.csioAvgBRKbps<d+e&&(b.stableTs=c,b.stable=d,b.stableVerified=!0),b.stableVerified&&b.maxVerified&&(b.ready=!0))}},OutbVideoMonitor.prototype.setup=function(a){OutboundMonitor.prototype.setup.call(this,a),a.data.csioMediaType=Measurement.MediaTypes.video,this.setFrameRatioQuality(),this.quality.eModel=this.getQualityReverseEvaluation(a.data.csioeM,Monitor.AudioEModelTresholds),this.quality.bandwidth=this.getQualityEvaluation(a.data.csioIntBRKbps,Monitor.VideoThroughputThresholds),a.data.csioMark=this.getQuality(),this.checkSendingKBitrateObservations(a)},OutbVideoMonitor.prototype.getQuality=function(){var a=0,b=.33*this.quality.bandwidth+.33*this.quality.eModel+.33*this.quality.frameRate;return b=Math.floor(b),b===Monitor.avQualityRating.excellent?a=Monitor.avQualityRatingString.excellent:b===Monitor.avQualityRating.fair?a=Monitor.avQualityRatingString.fair:b===Monitor.avQualityRating.bad&&(a=Monitor.avQualityRatingString.bad),a},OutbAudioMonitor.prototype=Object.create(OutboundMonitor.prototype),OutbAudioMonitor.prototype.constructor=OutbAudioMonitor,OutbAudioMonitor.prototype.setEModelQuality=function(a){a<Monitor.AudioEModelTresholds.green?this.quality.eModel=Monitor.avQualityRating.excellent:a>Monitor.AudioEModelTresholds.green&&a<Monitor.AudioEModelTresholds.red?this.quality.eModel=Monitor.avQualityRating.fair:a>Monitor.AudioEModelTresholds.red&&(this.quality.eModel=Monitor.avQualityRating.bad)},OutbAudioMonitor.prototype.setThroughputQuality=function(a){null!==a&&void 0!==a&&(a>Monitor.AudioThroughputThresholds.green?this.quality.bandwidth=Monitor.avQualityRating.excellent:a>Monitor.AudioThroughputThresholds.red&&a<Monitor.AudioThroughputThresholds.green?this.quality.bandwidth=Monitor.avQualityRating.fair:a<Monitor.AudioThroughputThresholds.red&&(this.quality.bandwidth=Monitor.avQualityRating.bad));\n},OutbAudioMonitor.prototype.setup=function(a){OutboundMonitor.prototype.setup.call(this,a),this.setThroughputQuality(a.data.csioIntBRKbps),this.setEModelQuality(a.data.csioeM),a.data.csioMediaType=Measurement.MediaTypes.audio,a.data.csioMark=this.getQuality()},OutbAudioMonitor.prototype.doSend=function(){return this.hasData()===!1,!1},OutbAudioMonitor.prototype.getQuality=function(){var a=0,b=.5*this.quality.bandwidth+.5*this.quality.eModel;return b=Math.floor(b),b===Monitor.avQualityRating.excellent?a=Monitor.avQualityRatingString.excellent:b===Monitor.avQualityRating.fair?a=Monitor.avQualityRatingString.fair:b===Monitor.avQualityRating.bad&&(a=Monitor.avQualityRatingString.bad),a},Monitors.OneWayAudioDisruptionTimeout=5e3,Monitors.DisruptionsMediaType={audio:\"audio\",video:\"video\",screen:\"screen\"},Monitors.DisruptionsType={inbOneWayAudioDisruption:\"inbOneWayAudioDisruption\",outbOneWayAudioDisruption:\"outbOneWayAudioDisruption\"},Monitors.prototype={constructor:Monitors,getMonitor:function(a){var b;if(this.monitors[a.direction]&&(b=this.monitors[a.direction][a.ssrc]),void 0!==b)return this.monitors[a.direction][a.ssrc];var c=a.direction===Measurement.Direction.inbound,d=a.direction===Measurement.Direction.outbound,e=a.mediaType===Measurement.MediaTypes.audio,f=a.mediaType===Measurement.MediaTypes.video;return b=c&&e?new InbAudioMonitor:d&&e?new OutbAudioMonitor:c&&f?new InbVideoMonitor:d&&f?new OutbVideoMonitor:null,b.setSSRC(a.ssrc),this.monitors[a.direction]||(this.monitors[a.direction]={}),this.monitors[a.direction][a.ssrc]=b,b},setupCodeBase:function(a){this.assembler.setupCodeBase(a)},isSendable:function(){var a=this.sendable;return this.sendable=!1,a},process:function(a){var b=this.assembler.do(a),c=this.getMonitor(b);return null===c||void 0===c?void console.warn(\"For ssrc \"+b.ssrc+\"we do not have monitor\"):(c.doSend(b)&&(this.sendable=!0),c.add(b),void c.setup(a))},checkDistortions:function(){var a,b=[],c=[],d=this.monitors[Measurement.Direction.inbound];d&&Object.keys(d).forEach(function(c){a=d[c],a.getMediaType()===Measurement.MediaTypes.audio&&b.push(a)}),d=this.monitors[Measurement.Direction.outbound],d&&Object.keys(d).forEach(function(b){a=d[b],a.getMediaType()===Measurement.MediaTypes.audio&&c.push(a)}),[this.getInbOneWayAudioDisruption(b,c),this.getOutbOneWayAudioDisruption(b,c)].forEach(function(a){a&&Reporter.disruptions.push(a)})},getSendingThroughputObservations:function(){var a=[],b=null,c=this.monitors[Measurement.Direction.outbound];return c?(Object.keys(c).forEach(function(d){b=c[d],b.getMediaType()===Measurement.MediaTypes.video&&a.push(b.getSendingKBitrateObservations())}),a):null},getInbOneWayAudioDisruption:function(a,b){var c=this.inbOneWayAudioDisruption,d=(new Date).getTime();if(c.sent)return null;var e=b.filter(function(a){return 0===a.getStartTime()}).length<1,f=b.filter(function(a){return!a.hasTraffic()}).length<1;if(!e||f)return null;if(!a.length)return null;var g=a.filter(function(a){return!a.hasTraffic()});if(g.length<1)return c.started=0,null;if(0===c.started)return c.started=d,null;if(d-Monitors.OneWayAudioDisruptionTimeout<c.started)return null;var h=g[0].getSSRC();return c.sent=!0,{mediaType:Monitors.DisruptionsMediaType.audio,type:Monitors.DisruptionsType.inbOneWayAudioDisruption,ssrc:h}},getOutbOneWayAudioDisruption:function(a,b){var c=this.outbOneWayAudioDisruption,d=(new Date).getTime();if(c.sent)return null;var e=a.filter(function(a){return 0===a.getStartTime()}).length<1,f=a.filter(function(a){return!a.hasTraffic()}).length<1;if(!e||!f)return null;if(!b.length)return null;var g=b.filter(function(a){return!a.hasTraffic()});if(g.length<1)return c.started=0,null;if(0===c.started)return c.started=d,null;if(d-Monitors.OneWayAudioDisruptionTimeout<c.started)return null;var h=g[0].getSSRC();return c.sent=!0,{mediaType:Monitors.DisruptionsMediaType.audio,type:Monitors.DisruptionsType.outbOneWayAudioDisruption,ssrc:h}},toString:function(){return\"ToString function is not defined. for this object\"},onDataSent:function(){for(var a in this.monitors)if(this.monitors.hasOwnProperty(a))for(var b in this.monitors[a])if(this.monitors[a].hasOwnProperty(b)){var c=this.monitors[a][b];null!==c?c.onDataSent():console.warn(\"A Monitor with ssrc: \"+b+\" should not be null but it is!\")}}},Analyzer.prototype={constructor:Analyzer,onDataSent:function(){++this.sentCounter},getSendingThroughputObservations:function(){var a=this.monitors.getSendingThroughputObservations();if(!a)return null;var b=a.filter(function(a){return null===a}).length<1;return b?a:null},receive:function(a){var b=(new Date).getTime(),c=a.streams,d=a.codeBase;this.monitors.setupCodeBase(d);for(var e=0;e<c.length;++e){var f=c[e];this.monitors.process(f)}this.monitors.checkDistortions();var g=!1;if(Reporter.adaptiveSending===!1)g=this.lastForwarded+Reporter.SendingTimeTresholds.regular<b,g&&(this.output.send(c),this.lastInterval=b-this.lastForwarded,this.lastForwarded=b);else{var h=this.monitors.isSendable();if(0===this.sentCounter?g=!0:this.sentCounter<5?(g=this.lastForwarded+Reporter.SendingTimeTresholds.regular<b,h=!1):g=this.lastForwarded+Math.min(Reporter.SendingTimeTresholds.max,this.nextInterval)<b,g||h)if(this.output.send(c),this.lastInterval=b-this.lastForwarded,this.lastForwarded=b,h)this.lastInterval=Math.max(Reporter.SendingTimeTresholds.min,this.lastInterval/2);else if(g){var i=Math.random()+1;this.nextInterval=Math.min(Reporter.SendingTimeTresholds.max,this.lastInterval*i)}}}},Reporter.prototype={constructor:Reporter,fire:function(a){var b;switch(this.currentState){case this.states.Idle:switch(a){case this.events.OnStart:this.currentState=this.states.Run;break;default:console.warn(\"Unhandled event \"+a+\" in \"+this.currentState+\" mode\")}break;case this.states.Run:switch(a){case this.events.OnStop:this.currentState=this.states.Idle;break;case this.events.OnPolling:var c=arguments[1];this.analyzer.receive(c);break;case this.events.OnOneWayAudioDisruptionsRequest:if(b=arguments[1],void 0===b){console.warn(\"OnStatsRequest event required a parameter to store the response\");break}0<Reporter.disruptions.length&&(b.response=Reporter.disruptions,Reporter.disruptions=[]);break;case this.events.OnSendingThroughputObservationsRequest:if(b=arguments[1],void 0===b){console.warn(\"OnSendingThroughputObservationsRequest event required a parameter to store the response\");break}this.sendingThroughputObservationsSent===!1&&(b.response=this.analyzer.getSendingThroughputObservations(),this.sendingThroughputObservationsSent=null!==b.response);break;case this.events.OnStatsRequest:if(b=arguments[1],void 0===b){console.warn(\"OnStatsRequest event required a parameter to store the response\");break}b.response=this.senderGate.requestStats();break;default:console.warn(\"Unhandled event \"+a+\" in \"+this.currentState+\" mode\")}break;default:console.error(\"The Reporter machine is in an unkown state: \"+this.currentState)}},toString:function(){return\"Reporter is in \"+this.currentState},setReportingMode:function(a){Reporter.adaptiveSending=a===!0},setSubmissionInterval:function(a){Reporter.SendingTimeTresholds.regular=a,Reporter.adaptiveSending?(Reporter.SendingTimeTresholds.min=1e3,Reporter.SendingTimeTresholds.max=3e4):(Reporter.SendingTimeTresholds.min=a,Reporter.SendingTimeTresholds.max=a)}},module.exports.Reporter=Reporter;\n\n\n// WEBPACK FOOTER //\n// ../react-native-callstats/statsReporter.js","/*! callstats.js  version = 3.27.0 2017-12-14 */\nfunction SlidingWindow(a,b){this.items=[],this.plugins=[],this.timeoutInMs=b,this.maxItemsNum=a,this.minItemsNum=0,this.last=null}var SWItem=require(\"./swItem\");SlidingWindow.prototype={constructor:SlidingWindow,signalize:function(a,b){for(var c=0;c<this.plugins.length;++c){var d=this.plugins[c];null!==d.signalize&&void 0!==d.signalize?d.signalize.call(d,a,b):console.warn(d)}},toString:function(){return\"\"}},SlidingWindow.prototype.getLast=function(){return this.last},SlidingWindow.prototype.setMaxItemsNum=function(a){this.maxItemsNum=a},SlidingWindow.prototype.setTimeoutInMs=function(a){this.timeoutInMs=a},SlidingWindow.prototype.setMinItemsNum=function(a){this.minItemsNum=a},SlidingWindow.prototype.refresh=function(){if(!(this.items.length<=this.minItemsNum)){for(;0<this.maxItemsNum&&this.maxItemsNum<=this.items.length;)this.remove();0<this.timeoutInMs&&this.timeoutInMs<this.items[0].getElapsed()&&(this.remove(),this.refresh())}},SlidingWindow.prototype.getItemsNum=function(){return this.items.length},SlidingWindow.prototype.add=function(a){this.refresh(),this.items.push(new SWItem(a));for(var b=0;b<this.plugins.length;b++){var c=this.plugins[b];c.add(a)}this.last=a},SlidingWindow.prototype.map=function(a){for(var b=0;b<this.plugins.length;b++){var c=this.plugins[b];c.map(a)}},SlidingWindow.prototype.remove=function(){for(var a=this.items.shift(),b=0;b<this.plugins.length;b++){var c=this.plugins[b];c.remove(a.value)}},SlidingWindow.prototype.foreach=function(a,b){var c=this.items;void 0!==b&&(c=b(c));for(var d=0;d<c.length;d++){var e=c[d];a(e.value)}},SlidingWindow.prototype.addPlugin=function(a){this.plugins.push(a)},module.exports=SlidingWindow;\n\n\n// WEBPACK FOOTER //\n// ../react-native-callstats/slidingWindow.js","/*! callstats.js  version = 3.27.0 2017-12-14 */\nfunction SWItem(a){this.value=a,this.created=(new Date).getTime()}SWItem.prototype={constructor:SWItem,getElapsed:function(){return(new Date).getTime()-this.created},toString:function(){return\"\"}},module.exports=SWItem;\n\n\n// WEBPACK FOOTER //\n// ../react-native-callstats/swItem.js","/*! callstats.js  version = 3.27.0 2017-12-14 */\nfunction SWPercentileTracker(a,b,c){if(SWPlugin.call(this),99<b||b<1)throw new RangeError(\"Percentile parameter must be between 1 and 99\");this.comparator=a,this.percentile=b,this.meanCalcer=\"undefined\"==typeof c?function(a,b){return(a+b)/2}:c,this.ratio=b/(100-b),this.maxtree=new BinaryTree(a),this.mintree=new BinaryTree(a),this.ratio<1?this.required=1/this.ratio+1:1<this.ratio?this.required=this.ratio+1:this.required=2,this.maxcounter=this.mincounter=0,this.result=null,this.filter=null}var SWPercentileNotification=require(\"./swPercentileNotification\"),BinaryTree=require(\"./binaryTree\"),SWPlugin=require(\"./swPlugin\");SWPercentileTracker.prototype=Object.create(SWPlugin.prototype),SWPercentileTracker.prototype.constructor=SWPercentileTracker,SWPercentileTracker.prototype.addFilter=function(a,b){this.filter={callback:a,that:b}},SWPercentileTracker.prototype.doFilter=function(a){return null===this.filter||(void 0===this.filter.that||null===this.filter.that?this.filter.callback(a):this.filter.callback.call(this.filter.that,a))},SWPercentileTracker.prototype.getResult=function(){return this.result},SWPercentileTracker.prototype.add=function(a){if(this.doFilter(a)){if(this.maxcounter<1)return this.maxtree.insert(a),void++this.maxcounter;this.comparator(a,this.maxtree.getTopValue())<=0?(this.maxtree.insert(a),++this.maxcounter):(this.mintree.insert(a),++this.mincounter),this.balancing(),this.calculate()}},SWPercentileTracker.prototype.remove=function(a){if(this.doFilter(a)){if(this.maxtree.delete(a))--this.maxcounter;else{if(!this.mintree.delete(a))throw new ReferenceError(\"The requested value \"+a+\" is not found in trees\");--this.mincounter}this.balancing(),this.calculate()}},SWPercentileTracker.prototype.balancing=function(){var a=function(){for(var a=(this.maxcounter+1)/(this.mincounter-1);;a=(this.maxcounter+1)/(this.mincounter-1)){if(this.ratio<a||this.mincounter<1)return;this.maxtree.insertByTop(this.mintree.deleteBottomValue()),++this.maxcounter,--this.mincounter}},b=function(){for(var a=(this.maxcounter-1)/(this.mincounter+1);;a=(this.maxcounter-1)/(this.mincounter+1)){if(a<this.ratio||this.maxcounter<1)return;this.mintree.insertByBottom(this.maxtree.deleteTopValue()),++this.mincounter,--this.maxcounter}};if(!(this.maxcounter+this.mincounter<this.required)){if(this.mincounter<1)return void b.call(this);if(this.maxcounter<1)return void a.call(this);var c=this.maxcounter/this.mincounter;this.ratio<c?b.call(this):a.call(this)}},SWPercentileTracker.prototype.calculate=function(){var a,b,c=new SWPercentileNotification,d=null,e=this.mincounter+this.maxcounter;if(!(e<1)){if(this.mincounter<1?(b=this.maxtree.getTopValue(),a=this.maxtree.getBottomValue()):this.maxcounter<1?(b=this.mintree.getTopValue(),a=this.mintree.getBottomValue()):(b=this.mintree.getTopValue(),a=this.maxtree.getBottomValue()),c.min=a,c.max=b,c.tracked=e,e<this.required||this.mincounter<1)return d=this.ratio<1?a:1<this.ratio?b:this.meanCalcer(a,b),c.actual=d,c.estimated=!0,this.result=c,void this.notify(this.result);var f=this.maxcounter/this.mincounter;d=this.ratio<f?this.maxtree.getTopValue():f<this.ratio?this.mintree.getBottomValue():this.meanCalcer(this.mintree.getBottomValue(),this.maxtree.getTopValue()),c.actual=d,this.result=c,this.notify(this.result)}},SWPercentileTracker.prototype.map=function(a){this.mapping(this.result.actual,a)},module.exports=SWPercentileTracker;\n\n\n// WEBPACK FOOTER //\n// ../react-native-callstats/swPercentileTracker.js","/*! callstats.js  version = 3.27.0 2017-12-14 */\nfunction SWPercentileNotification(){this.estimated=!1,this.tracked=0,this.max=this.min=this.actual=null}SWPercentileNotification.prototype={constructor:SWPercentileNotification,toString:function(){return\"Tracked: \"+this.tracked+\" Estimated: \"+this.estimated+\" Min: \"+this.min+\" Max: \"+this.max+\" Actual: \"+this.actual}},module.exports=SWPercentileNotification;\n\n\n// WEBPACK FOOTER //\n// ../react-native-callstats/swPercentileNotification.js","/*! callstats.js  version = 3.27.0 2017-12-14 */\nfunction BinaryTreeNode(a){this.value=[],this.value.push(a),this.left=null,this.right=null}function BinaryTree(a){this.root=null,this.top=null,this.bottom=null,this.comparator=a,this.node_counter=0,this.duplicate_counter=0}BinaryTreeNode.prototype={constructor:BinaryTreeNode,toString:function(){return this.value.toString()}},BinaryTree.prototype={constructor:BinaryTree},BinaryTree.prototype.getTop=function(){return this.top},BinaryTree.prototype.getTopValue=function(){return null===this.top?null:this.top.value[0]},BinaryTree.prototype.getBottomValue=function(){return null===this.bottom?null:this.bottom.value[0]},BinaryTree.prototype.getBottom=function(){return this.bottom},BinaryTree.prototype.getDuplicatedCounter=function(){return this.duplicate_counter},BinaryTree.prototype.getNodeCounter=function(){return this.node_counter},BinaryTree.prototype.getSize=function(){return this.duplicate_counter+this.node_counter},BinaryTree.prototype.logTree=function(){function a(b,c,d){if(null!==b){for(var e=\"-\",f=0;f<c;++f)e+=\"--\";console.log(e+\"> (\"+d+\") values: [\"+b.value.toString()+\"]\"),null!==b.left&&a(b.left,c+1,\"Left\"),null!==b.right&&a(b.right,c+1,\"Right\")}}return null===this.root?void console.log(\"This tree is empty\"):(console.log(\"Size of the tree: \"+this.getSize()+\" Node: \"+this.getNodeCounter()+\" Duplicates: \"+this.getDuplicatedCounter()+\" Top: \"+this.getTop().toString()+\" Bottom: \"+this.getBottom().toString()),void a(this.root,0,\"Root\"))},BinaryTree.prototype.insertByTop=function(a){this.inserting(a,this.top)},BinaryTree.prototype.insertByBottom=function(a){this.inserting(a,this.bottom)},BinaryTree.prototype.insert=function(a){this.inserting(a,this.root)},BinaryTree.prototype.inserting=function(a,b){var c=function(){var b=new BinaryTreeNode(a);return(null===this.top||this.comparator(this.top.value[0],b.value[0])<0)&&(this.top=b),(null===this.bottom||this.comparator(b.value[0],this.bottom.value[0])<0)&&(this.bottom=b),b};if(null===this.root)return this.root=c.call(this),void(this.node_counter=1);for(var d=null,e=b,f=0,g=function(b){return b===a};null!==e;){if(f=this.comparator(a,e.value[0]),0===f)return void(e.value.find(g)||(e.value.push(a),++this.duplicate_counter));d=e,e=f<0?e.left:e.right}++this.node_counter,f<0?d.left=c.call(this):d.right=c.call(this)},BinaryTree.prototype.search=function(a){for(var b,c=this.root,d=null,e=function(b){return b===a};null!==c;){if(b=this.comparator(a,c.value[0]),0===b)return c.value.find(e)?(c.parent=d,c):null;d=c,c=b<0?c.left:c.right}return null},BinaryTree.prototype.getRightist=function(a){for(var b=null;null!==a.right;)b=a,a=a.right;return a.parent=b,a},BinaryTree.prototype.getLeftist=function(a){for(var b=null;null!==a.left;)b=a,a=a.left;return a.parent=b,a},BinaryTree.prototype.deleteBottomValue=function(){for(;null===this.bottom;)return null;var a=this.bottom.value[0];return this.delete(a),a},BinaryTree.prototype.deleteTopValue=function(){for(;null===this.top;)return null;var a=this.top.value[0];return this.delete(a),a},BinaryTree.prototype.delete=function(a){var b=null,c=function(a,b,c){null!==b?b.left===a?b.left=c:b.right=c:this.root=c},d=function(a){return null===this.root?void(this.bottom=this.top=null):(0===this.comparator(this.top.value[0],a.value[0])&&(this.top=this.getRightist(this.root)),void(0===this.comparator(this.bottom.value[0],a.value[0])&&(this.bottom=this.getLeftist(this.root))))};if(b=this.search(a),null===b)return!1;if(1<b.value.length)return b.value.splice(b.value.indexOf(a),1),--this.duplicate_counter,!0;if(--this.node_counter,null===b.left&&null===b.right)c.call(this,b,b.parent,null);else if(null===b.left)c.call(this,b,b.parent,b.right);else if(null===b.right)c.call(this,b,b.parent,b.left);else{for(var e=b.left,f=b;null!==e.right;f=e,e=e.right);f===b?f.left=e.left:f.right=e.left,b.value.shift(),b.value=b.value.concat(e.value)}return d.call(this,b),!0},module.exports=BinaryTree;\n\n\n// WEBPACK FOOTER //\n// ../react-native-callstats/binaryTree.js","/*! callstats.js  version = 3.27.0 2017-12-14 */\nfunction SWAvg(a){SWPlugin.call(this),this.avg=0,this.sum=0,this.count=0,this.filter=null,void 0===a?this.extractor=function(a){return a}:this.extractor=a}var SWPlugin=require(\"./swPlugin\");SWAvg.prototype=Object.create(SWPlugin.prototype),SWAvg.prototype.constructor=SWAvg,SWAvg.prototype.add=function(a){(null===this.filter||void 0===this.filter||this.filter(a))&&(this.sum+=parseInt(this.extractor(a)),++this.count,this.calc(this))},SWAvg.prototype.addFilter=function(a){this.filter=a},SWAvg.prototype.remove=function(a){(null===this.filter||void 0===this.filter||this.filter(a))&&(this.sum-=parseInt(this.extractor(a)),--this.count,this.calc(this))},SWAvg.prototype.calc=function(){this.count<1||(this.avg=this.sum/this.count,this.notify(this.avg))},SWAvg.prototype.getResult=function(){return this.avg},module.exports=SWAvg;\n\n\n// WEBPACK FOOTER //\n// ../react-native-callstats/swAvg.js","/*! callstats.js  version = 3.27.0 2017-12-14 */\nfunction pcCallbackHandler(a,b,c,d,e){this.pc=a,this.onIceCandidateCallback=b,this.onIceConnectionStateChangeCallback=c,this.onPcSignalingStateChangeCallback=d,this.onPcNegotiationNeededCallback=e,a.addEventListener?(this.pc.addEventListener(\"icecandidate\",this.iceCandidateCallback.bind(this),!1),this.pc.addEventListener(\"iceconnectionstatechange\",this.iceConnectionStateChangeCallback.bind(this),!1),this.pc.addEventListener(\"signalingstatechange\",this.pcSignalingStateChangeCallback.bind(this),!1),this.pc.addEventListener(\"negotiationneeded\",this.pcNegotiationNeededCallback.bind(this),!1)):a.attachEvent&&(this.pc.attachEvent(\"onicecandidate\",this.iceCandidateCallback.bind(this)),this.pc.attachEvent(\"oniceconnectionstatechange\",this.iceConnectionStateChangeCallback.bind(this)),this.pc.attachEvent(\"onsignalingstatechange\",this.pcSignalingStateChangeCallback.bind(this)),this.pc.attachEvent(\"onnegotiationneeded\",this.pcNegotiationNeededCallback.bind(this)))}pcCallbackHandler.prototype.iceCandidateCallback=function(a){try{this.onIceCandidateCallback(a,this.pc)}catch(a){console.log(\"onIceCandidateCallback: Error\",a)}},pcCallbackHandler.prototype.iceConnectionStateChangeCallback=function(a){try{this.onIceConnectionStateChangeCallback(a,this.pc)}catch(a){console.log(\"onIceConnectionStateChangeCallback: Error\",a)}},pcCallbackHandler.prototype.pcSignalingStateChangeCallback=function(a){try{this.onPcSignalingStateChangeCallback(a,this.pc)}catch(a){console.log(\"onPcSignalingStateChangeCallback: Error\",a)}},pcCallbackHandler.prototype.pcNegotiationNeededCallback=function(a){try{this.onPcNegotiationNeededCallback(a,this.pc)}catch(a){console.log(\"onPcNegotiationNeededCallback: Error\",a)}},module.exports=pcCallbackHandler;\n\n\n// WEBPACK FOOTER //\n// ../react-native-callstats/pcCallbackHandler.js","/*! precalltest  version = 1.1.6 2018-01-23 */\n\n\"use strict\";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.PreCallTest=void 0;var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}}(),_turnConnection=require(\"./turnConnection\"),_rttTest=require(\"./tests/rttTest\"),_throughputTest=require(\"./tests/throughputTest\"),_resultsHandler=require(\"./utility/resultsHandler\"),_onlineCheck=require(\"./utility/onlineCheck\"),_detectbrowser=require(\"./utility/stats/detectbrowser\"),Promise=require(\"bluebird\"),TEST_NAMES={RTT:\"rtt\",THROUGHPUT:\"throughput\"},FAILURE_RETRIES=10,PreCallTest=function(){function t(){_classCallCheck(this,t),this.browserInfo=(0,_detectbrowser.detect)(),this.turnConnection=new _turnConnection.TurnConnection(this.browserInfo),this.onlineCheck=new _onlineCheck.OnlineCheck,this.callsInProgress=0,this.turnTests=[TEST_NAMES.RTT,TEST_NAMES.THROUGHPUT],this.active=!1,this.rtt=null,this.resultsHandler=null}return _createClass(t,[{key:\"start\",value:function(t,e){if(this.browserInfo.browserName!==_detectbrowser.Constants.browserName.msie&&(this.iceServers=t,this.callback=e,!this.active&&!(this.callsInProgress>0)&&t)){this.turnTestCounter=0,this.resultsHandler=new _resultsHandler.ResultsHandler;var s={type:\"browser\",os:this.browserInfo.os,osVersion:this.browserInfo.osVersion,buildName:this.browserInfo.browserName,buildVersion:this.browserInfo.browserVersion};this.resultsHandler.add(\"endpointInfo\",s),this.onlineCheck.start(),this.active=!0,this._start()}}},{key:\"_start\",value:function(){var t=this;this.active&&this.turnConnection.connect(this.iceServers).then(function(){t.active&&t.startTurnTests().then(function(){t.stop()},function(e){t.stop()})},function(e){t.resultsHandler.failure(e),t.resultsHandler.getFailureNumber()>=FAILURE_RETRIES?t.stop():(t.turnConnection.disconnect(),setTimeout(function(){t._start()},0))})}},{key:\"stop\",value:function(){var t=this;if(this.browserInfo.browserName!==_detectbrowser.Constants.browserName.msie&&this.active){this.active=!1,this.activeTurnTest&&this.activeTurnTest.forceStop();var e=this.onlineCheck.stop();this.resultsHandler.add(\"onlineStatus\",e),this.turnConnection.getIceResults().then(function(e){t.resultsHandler.add(\"ice\",e),t.turnConnection.disconnect(),t.sendResults()},function(e){t.resultsHandler.failure(e),t.turnConnection.disconnect(),t.sendResults()})}}},{key:\"sendResults\",value:function(){var t=this.resultsHandler.getResults();this.callback&&this.callback(t),this.resultsHandler=null}},{key:\"callStarts\",value:function(){this.callsInProgress+=1,this.stop()}},{key:\"callFinished\",value:function(){this.callsInProgress-=1}},{key:\"getId\",value:function(){return this.resultsHandler?this.resultsHandler.getId():null}},{key:\"crashDisconnect\",value:function(){try{this.turnConnection.disconnect()}catch(t){}}},{key:\"startTurnTests\",value:function(){var t=this;if(this.turnTestCounter>=this.turnTests.length)return new Promise(function(t,e){t()});var e=this.turnTests[this.turnTestCounter],s=null;switch(e){case TEST_NAMES.RTT:s=new _rttTest.RttTest(this.turnConnection);break;case TEST_NAMES.THROUGHPUT:s=new _throughputTest.ThroughputTest(this.turnConnection,this.rtt);break;default:return new Promise(function(t,s){s(new Error(\"Unknown test: \"+e))})}return this.activeTurnTest=s,this.active?s.start().then(function(){return t.handleTestResults(e,s.getResults()),t.turnTestCounter+=1,t.activeTurnTest=null,t.startTurnTests()},function(n){return t.handleTestResults(e,s.getResults(),n),t.turnTestCounter+=1,t.activeTurnTest=null,t.startTurnTests()}):new Promise(function(t,e){e(new Error(\"Test trying to start while testing is not active\"))})}},{key:\"handleTestResults\",value:function(t,e){null==(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)&&t==TEST_NAMES.RTT&&(this.rtt=e.median),this.resultsHandler&&this.resultsHandler.add(t,e)}}]),t}();exports.PreCallTest=PreCallTest;\n\n\n// WEBPACK FOOTER //\n// ../precalltest/dist/main.js","/*! precalltest  version = 1.1.6 2018-01-23 */\n\n\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.TurnConnection=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,\"value\"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}return function(t,n,c){return n&&e(t.prototype,n),c&&e(t,c),t}}(),_parsedIceCandidate=require(\"./utility/parsedIceCandidate\"),_getstatshandler=require(\"./utility/stats/getstatshandler\"),_detectbrowser=require(\"./utility/stats/detectbrowser\"),Promise=require(\"bluebird\"),ICE_CHECKING_TIMEOUT=1e4,CONNECTION_TIMEOUT=3e4,TurnConnection=function(){function e(t){_classCallCheck(this,e),this.reset(),this.statshandler=new _getstatshandler.GetStatsHandler(t)}return _createClass(e,[{key:\"reset\",value:function(){this.iceServers=null,this.pctpc1=null,this.pctpc2=null,this.sendChannel=null,this.messageCallback=null,this.errorCallback=null,this.parsedIceResults={}}},{key:\"setMessageCallback\",value:function(e){this.messageCallback=e}},{key:\"setErrorCallback\",value:function(e){this.errorCallback=e}},{key:\"send\",value:function(e){if(this.sendChannel)try{this.sendChannel.send(e)}catch(e){this.raiseSendError(e)}else this.raiseSendError(new Error(\"No send channel\"))}},{key:\"raiseSendError\",value:function(e){this.errorCallback&&this.errorCallback(e)}},{key:\"assignEvent\",value:function(e,t,n){e.addEventListener?e.addEventListener(t,n.bind(this),!1):e.attachEvent&&(t=\"on\"+t,e.attachEvent(t,n.bind(this)))}},{key:\"connect\",value:function(e){var t=this;this.reset();var n=new Promise(function(e,n){t.resolveCb=e,t.rejectCb=n});this.iceServers=e;var c=null;try{if(RTCPeerConnection?c=RTCPeerConnection:webkitRTCPeerConnection?c=webkitRTCPeerConnection:mozRTCPeerConnection?c=mozRTCPeerConnection:window&&window.RTCPeerConnection&&(c=window.RTCPeerConnection),!c)return this.rejectCb(new Error(\"RTCPeerConnection not found\")),n}catch(e){return this.rejectCb(e),n}var r={ordered:!1,maxRetransmits:0},s={iceTransportPolicy:\"all\",iceServers:this.iceServers};try{this.pctpc1=new c(s),this.pctpc2=new c(s)}catch(e){return this.rejectDisconnect(e),n}return this.connectionTimer=setTimeout(function(){delete t.connectionTimer,t.rejectDisconnect(new Error(\"Connection timeout\"))},CONNECTION_TIMEOUT),this.sendChannel=this.pctpc1.createDataChannel(\"precalltest\",r),this.sendChannel.binaryType=\"arraybuffer\",this.assignEvent(this.sendChannel,\"error\",function(e){t.raiseSendError(e),t.rejectDisconnect(e)}),this.assignEvent(this.pctpc2,\"datachannel\",function(e){var n=e.channel;t.assignEvent(n,\"open\",function(e){t.resolveCb&&(t.resolveCb(),t.resolveCb=null)}),t.assignEvent(n,\"close\",function(e){t&&t.disconnect&&t.disconnect()}),t.assignEvent(n,\"message\",function(e){t.messageCallback&&t.messageCallback(e.data)}),t.assignEvent(n,\"error\",function(e){t.errorCallback&&t.errorCallback(e),t.rejectDisconnect(e)})}),this.assignEvent(this.pctpc1,\"icecandidate\",function(e){t.onIceCandidate(t.pctpc1,e)}),this.assignEvent(this.pctpc1,\"iceconnectionstatechange\",function(e){t.onIceStateChange(t.pctpc1,e)}),this.assignEvent(this.pctpc2,\"icecandidate\",function(e){t.onIceCandidate(t.pctpc2,e)}),this.assignEvent(this.pctpc2,\"iceconnectionstatechange\",function(e){t.onIceStateChange(t.pctpc2,e)}),this.pctpc1.createOffer().then(function(e,n){t.onCreateOfferSuccess(e)},function(e){t.onCreateOfferError(t.pctpc1,e)}),n}},{key:\"rejectDisconnect\",value:function(e){this.rejectCb&&(this.rejectCb(e),this.disconnect())}},{key:\"disconnect\",value:function(){if(clearTimeout(this.connectionTimer),clearTimeout(this.iceTimer),this.pctpc1)try{this.pctpc1.close()}catch(e){}if(this.pctpc1=null,this.pctpc2)try{this.pctpc2.close()}catch(e){}this.pctpc2=null,this.resolveCb=null,this.rejectCb=null}},{key:\"getName\",value:function(e){return e===this.pctpc1?\"pctpc1\":\"pctpc2\"}},{key:\"getOtherPc\",value:function(e){return e===this.pctpc1?this.pctpc2:this.pctpc1}},{key:\"onCreateOfferError\",value:function(e,t){this.rejectDisconnect(t)}},{key:\"onCreateAnswerError\",value:function(e,t){this.rejectDisconnect(t)}},{key:\"onCreateOfferSuccess\",value:function(e){var t=this;this.pctpc1.setLocalDescription(e).then(function(){t.onSetLocalSuccess(t.pctpc1)},function(e){t.onSetSessionDescriptionError(t.pctpc1,e)}),this.pctpc2.setRemoteDescription(e).then(function(){t.onSetRemoteSuccess(t.pctpc2)},function(e){t.onSetRemoteSessionDescriptionError(t.pctpc2,e)}),this.pctpc2.createAnswer().then(function(e){t.onCreateAnswerSuccess(e)},function(e){t.onCreateAnswerError(t.pctpc2,e)})}},{key:\"onSetLocalSuccess\",value:function(e){}},{key:\"onSetRemoteSuccess\",value:function(e){}},{key:\"onSetSessionDescriptionError\",value:function(e,t){this.rejectDisconnect(t)}},{key:\"onSetRemoteSessionDescriptionError\",value:function(e,t){this.rejectDisconnect(t)}},{key:\"onCreateAnswerSuccess\",value:function(e){var t=this;this.pctpc2.setLocalDescription(e).then(function(){t.onSetLocalSuccess(t.pctpc2)},function(e){t.onSetSessionDescriptionError(t.pctpc2,e)}),this.pctpc1.setRemoteDescription(e).then(function(){t.onSetRemoteSuccess(t.pctpc1)},function(e){t.onSetRemoteSessionDescriptionError(t.pctpc1,e)})}},{key:\"onIceCandidate\",value:function(e,t){var n=this;if(t.candidate){var c=new _parsedIceCandidate.ParsedIceCandidate(t.candidate);e==this.pctpc1&&this.statshandler.codeBase==_detectbrowser.Constants.codeBaseType.chrome&&(c.isRelay()&&(c.isTypeTransportUdp()&&(this.parsedIceResults.relayUdpGathered=!0),c.isTypeTransportTcp()&&(this.parsedIceResults.relayTcpGathered=!0),c.isTypeTransportTls()&&(this.parsedIceResults.relayTlsGathered=!0)),c.isServerReflexive()&&(this.parsedIceResults.srflxGathered=!0)),c.isRelay()&&this.getOtherPc(e).addIceCandidate(t.candidate).then(function(){n.onAddIceCandidateSuccess(e)},function(t){n.onAddIceCandidateError(e,t,c.isRelay())})}}},{key:\"onAddIceCandidateSuccess\",value:function(e){}},{key:\"onAddIceCandidateError\",value:function(e,t,n){n&&this.rejectDisconnect(t)}},{key:\"onIceStateChange\",value:function(e,t){var n=this,c=\"(?)\";e&&(c=e.iceConnectionState),\"failed\"===c&&this.rejectDisconnect(new Error(\"ICE failure\")),\"checking\"!==c||this.iceTimer||(this.iceTimer=setTimeout(function(){delete n.iceTimer,n.rejectDisconnect(new Error(\"ICE timeout\"))},ICE_CHECKING_TIMEOUT)),\"completed\"!==c&&\"connected\"!==c||(clearTimeout(this.iceTimer),delete this.iceTimer)}},{key:\"getIceResults\",value:function(){var e=this;return new Promise(function(t,n){for(var c=JSON.parse(JSON.stringify(e.iceServers)),r=0;r<c.length;r++){var s=c[r];c.hasOwnProperty(s)||delete s.credential}var i={turnIpAddress:\"\",turnIpVersion:\"\",turnTransport:\"\",iceServers:c,ipv6Supported:!1,ipv4Supported:!1,relayTlsGathered:!1,relayTcpGathered:!1,relayUdpGathered:!1,srflxGathered:!1,relayTlsSuccess:!1,relayTcpSuccess:!1,relayUdpSuccess:!1,srflxSuccess:!1};for(var a in e.parsedIceResults)e.parsedIceResults.hasOwnProperty(a)&&(i[a]=e.parsedIceResults[a]);e.pctpc1?e.statshandler.getIceCandidates(e.pctpc1).then(function(e){for(var n=0;n<e.iceCandidatePairs.length;n++){var c=e.iceCandidatePairs[n];if(c.googActiveConnection||c.selected)for(var r=0;r<e.localCandidates.length;r++){var s=e.localCandidates[r],a=null;if(a=s.ip?s.ip:s.ipAddress,s.id==c.localCandidateId){i.turnIpAddress=a;var o=-1!==a.indexOf(\":\");i.turnIpVersion=o?\"ipv6\":\"ipv4\",i.turnTransport=s.mozLocalTransport,!0}\"relay\"!==s.candidateType&&\"relayed\"!==s.candidateType||(\"udp\"===s.mozLocalTransport&&(i.relayUdpSuccess=!0),\"tcp\"===s.mozLocalTransport&&(i.relayTcpSuccess=!0),\"tls\"===s.mozLocalTransport&&(i.relayTlsSuccess=!0)),-1!==a.indexOf(\":\")?i.ipv6Supported=!0:i.ipv4Supported=!0}}for(var l=0;l<e.localCandidates.length;l++){var d=e.localCandidates[l];\"relay\"!==d.candidateType&&\"relayed\"!==d.candidateType||(\"udp\"===d.mozLocalTransport&&(i.relayUdpGathered=!0),\"tcp\"===d.mozLocalTransport&&(i.relayTcpGathered=!0),\"tls\"===d.mozLocalTransport&&(i.relayTlsGathered=!0)),\"srflx\"!==d.candidateType&&\"serverreflexive\"!==d.candidateType||(i.srflxGathered=!0)}for(var p=0;p<e.iceCandidatePairs.length;p++){var u=e.iceCandidatePairs[p];if(\"succeeded\"===u.state)for(var h=0;h<e.localCandidates.length;h++){var f=e.localCandidates[h];f.id==u.localCandidateId&&(\"relay\"!==f.candidateType&&\"relayed\"!==f.candidateType||(\"udp\"===f.mozLocalTransport&&(i.relayUdpSuccess=!0),\"tcp\"===f.mozLocalTransport&&(i.relayTcpSuccess=!0),\"tls\"===f.mozLocalTransport&&(i.relayTlsSuccess=!0)),\"srflx\"!==f.candidateType&&\"serverreflexive\"!==f.candidateType||(i.srflxSuccess=!0))}}t(i)},function(e){n(e)}):n(new Error(\"PC not available for stats\"))},function(e){reject(e)})}}]),e}();exports.TurnConnection=TurnConnection;\n\n\n// WEBPACK FOOTER //\n// ../precalltest/dist/turnConnection.js","/*! precalltest  version = 1.1.6 2018-01-23 */\n\n\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),ParsedIceCandidate=function(){function e(t){_classCallCheck(this,e),this.iceCandidateStr=t.candidate,this.parse()}return _createClass(e,[{key:\"parse\",value:function(){var e=this.iceCandidateStr.split(\" \");e.length<8||(this.protocol=\"1\"===e[1]?\"rtp\":\"rtcp\",this.transport=e[2],this.typeTransport=this.extractTypeTransport(e[3]),this.ipv6=-1!==e[4].indexOf(\":\"),this.ipAddress=e[4],this.port=e[5],this.type=e[7])}},{key:\"extractTypeTransport\",value:function(e){var t=\"None\",r=e>>24;if(\"rtp\"===this.protocol&&r>=0&&r<=2)switch(r){case 0:t=\"TLS\";break;case 1:t=\"TCP\";break;case 2:t=\"UDP\"}return t}},{key:\"getString\",value:function(){return this.iceCandidateStr}},{key:\"getType\",value:function(){return this.type}},{key:\"isHost\",value:function(){return\"host\"===this.type.toLowerCase()}},{key:\"isServerReflexive\",value:function(){return\"srflx\"===this.type.toLowerCase()}},{key:\"isPeerReflexive\",value:function(){return\"prflx\"===this.type.toLowerCase()}},{key:\"isRelay\",value:function(){return\"relay\"===this.type.toLowerCase()||\"relayed\"===this.type.toLowerCase()}},{key:\"getTypeTransport\",value:function(){return this.typeTransport}},{key:\"isTypeTransportUdp\",value:function(){return\"UDP\"===this.typeTransport}},{key:\"isTypeTransportTcp\",value:function(){return\"TCP\"===this.typeTransport}},{key:\"isTypeTransportTls\",value:function(){return\"TLS\"===this.typeTransport}},{key:\"getTransport\",value:function(){return this.transport}},{key:\"isUdp\",value:function(){return\"udp\"===this.transport.toLowerCase()}},{key:\"isTcp\",value:function(){return\"tcp\"===this.transport.toLowerCase()}},{key:\"getProtocol\",value:function(){return this.protocol}},{key:\"isRtp\",value:function(){return\"rtp\"===this.protocol}},{key:\"isRtcp\",value:function(){return\"rtcp\"===this.protocol}},{key:\"isIpv6\",value:function(){return this.ipv6}},{key:\"getIpAddress\",value:function(){return this.ipAddress}},{key:\"getPort\",value:function(){return this.port}}]),e}();exports.ParsedIceCandidate=ParsedIceCandidate;\n\n\n// WEBPACK FOOTER //\n// ../precalltest/dist/utility/parsedIceCandidate.js","/*! precalltest  version = 1.1.6 2018-01-23 */\n\n\"use strict\";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.GetStatsHandler=void 0;var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,s,a){return s&&t(e.prototype,s),a&&t(e,a),e}}(),_detectbrowser=require(\"./detectbrowser\"),_statsadapter=require(\"./statsadapter\"),Promise=require(\"bluebird\"),GetStatsHandler=function(){function t(e){_classCallCheck(this,t),this.codeBase=e.codeBase,this.browserName=e.browserName,this.adapter=new _statsadapter.StatsAdapter(this.codeBase,this.browserName),this.isPromiseBased=!0}return _createClass(t,[{key:\"getIceCandidates\",value:function(t){var e=this;return new Promise(function(s,a){e.csioGetStats(e.iceCandidatesHandler.bind(e),t,function(t){s(t)})})}},{key:\"iceCandidatesHandler\",value:function(t,e){e(this.adapter.getIceCandidates(t))}},{key:\"csioGetStats\",value:function(t,e,s){var a=_detectbrowser.Constants.codeBaseType.firefox,n=_detectbrowser.Constants.codeBaseType.chrome,i=_detectbrowser.Constants.codeBaseType.edge,r=_detectbrowser.Constants.browserName.safari;e&&(this.codeBase===a?this.getStatsFirefox(t,e,s):this.browserName===r?this.getStatsSafari(t,e,s):this.codeBase===n?this.getStatsChrome(t,e,s):this.codeBase===i&&this.getStatsEdge(t,e,s))}},{key:\"getStatsFirefox\",value:function(t,e,s){var a=this;if(a.isPromiseBased)try{e.getStats().then(function(e){t(e,s)}).catch(function(n){a.isPromiseBased=!1,e.getStats(null,function(e){t(e,s)},function(){})})}catch(n){a.isPromiseBased=!1,e.getStats(null,function(e){t(e,s)},function(){})}else e.getStats(null,function(e){t(e,s)},function(){})}},{key:\"getStatsChrome\",value:function(t,e,s){var a=this;if(window&&window.csioReactNative)e.getStats(null,function(e){t(e,s)},function(t){});else if(a.isPromiseBased)try{e.getStats().then(function(e){t(e,s)}).catch(function(n){a.isPromiseBased=!1,e.getStats(function(e){t(e,s)})})}catch(a){isPromiseBased=!1,e.getStats(function(e){t(e,s)})}else e.getStats(function(e){t(e,s)})}},{key:\"getStatsEdge\",value:function(t,e,s){e.getStats().then(function(e){t(e,s)}).catch(function(t){})}},{key:\"getStatsSafari\",value:function(t,e,s){e.getStats().then(function(e){t(e,s)}).catch(function(t){})}}]),t}();exports.GetStatsHandler=GetStatsHandler;\n\n\n// WEBPACK FOOTER //\n// ../precalltest/dist/utility/stats/getstatshandler.js","/*! precalltest  version = 1.1.6 2018-01-23 */\n\n\"use strict\";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.StatsAdapter=void 0;var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),_detectbrowser=require(\"./detectbrowser\"),StatsAdapter=function(){function t(e,a){_classCallCheck(this,t),this.codeBase=e,this.browser=a}return _createClass(t,[{key:\"getIceCandidates\",value:function(t){if(!t)return null;var e=this.extractRawStats(t);return this.processRawStatsForIceInfo(e)}},{key:\"extractRawStats\",value:function(t){var e=[],a=void 0,r=_detectbrowser.Constants.codeBaseType.firefox,s=_detectbrowser.Constants.codeBaseType.chrome,o=_detectbrowser.Constants.browserName.safari;if(this.codeBase===r&&this.browser!==o)t.forEach(function(t){e.push(t)});else if(this.codeBase===s&&this.browser!==o)t&&t.result?e=t.result():t&&t.forEach&&(e=[],t.forEach(function(t){e.push(t)}));else for(a in t)t.hasOwnProperty(a)&&e.push(t[a]);return e}},{key:\"processRawStatsForIceInfo\",value:function(t){var e=[],a=[],r=[],s=void 0;if(!t)return null;for(var o=0;o<t.length;++o){var n=this.getParsedStats(t[o]),i=this.statsClassifier(n);if(i.candidatePair)r.push(i.candidatePair);else if(i.transportStats){if(\"transport\"===i.transportStats.type){s=i.transportStats.selectedCandidatePairId;continue}r.push(i.transportStats)}else if(i.localCandidate){var c=i.localCandidate;if(\"relay\"==c.candidateType||\"relayed\"==c.candidateType){if(!c.mozLocalTransport){var d=c.priority>>24;c.mozLocalTransport=this.formatRelayType(d)}c.mozLocalTransport=c.mozLocalTransport.toLowerCase()}e.push(c)}else i.remoteCandidate&&a.push(i.remoteCandidate)}if(s)for(var l=0;l<r.length;++l)r[l].id===s&&(r[l].googActiveConnection=\"true\");return{localCandidates:e,remoteCandidates:a,iceCandidatePairs:r}}},{key:\"getParsedStats\",value:function(t){var e={};if(t.timestamp instanceof Date&&(e.timestamp=t.timestamp.getTime().toString()),t.type&&(e.type=t.type),t.names)for(var a=t.names(),r=0;r<a.length;++r)e[a[r]]=t.stat(a[r]);else Object.assign(e,t);if(e.values){for(var s=0;s<e.values.length;s++){var o=e.values[s];Object.assign(e,o)}delete e.values}return e}},{key:\"statsClassifier\",value:function(t){var e={},a=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];for(var s=0;s<a.length;s++){var o=a[s];if(t.type===o)return!0}return!1},r=a(\"inbound-rtp\",\"inboundrtp\"),s=\"true\"===t.isRemote||!0===t.isRemote;return r||a(\"outbound-rtp\",\"outboundrtp\")?(e.tracks={},e.tracks.data=t,e.tracks.ssrc=t.ssrc,e.tracks.streamType=r?\"inbound\":\"outbound\",e.tracks.reportType=\"local\",void 0!==t.isRemote&&(e.tracks.reportType=s?\"remote\":\"local\")):a(\"candidatepair\")&&t.selected?e.transportStats=t:a(\"localcandidate\",\"local-candidate\")?e.localCandidate=t:a(\"remotecandidate\",\"remote-candidate\")?e.remoteCandidate=t:a(\"transport\",\"googCandidatePair\")?e.transportStats=t:a(\"VideoBwe\")?e.bwe=t:a(\"track\")?e.trackStats=t:a(\"candidate-pair\")?e.candidatePair=t:a(\"codec\")?e.codec=t:a(\"ssrc\")&&(e.tracks={},e.tracks.data=t,e.tracks.ssrc=t.ssrc,e.tracks.reportType=\"local\",e.tracks.streamType=t.bytesSent?\"outbound\":\"inbound\"),e}},{key:\"formatRelayType\",value:function(t){var e=\"none\";switch(t){case 0:e=\"tls\";break;case 1:e=\"tcp\";break;case 2:e=\"udp\"}return e}}]),t}();exports.StatsAdapter=StatsAdapter;\n\n\n// WEBPACK FOOTER //\n// ../precalltest/dist/utility/stats/statsadapter.js","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n// WEBPACK FOOTER //\n// ../setimmediate/setImmediate.js","/*! precalltest  version = 1.1.6 2018-01-23 */\n\n\"use strict\";function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function _inherits(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.RttTest=void 0;var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}(),_get=function t(e,s,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,s);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:t(n,s,i)}if(\"value\"in r)return r.value;var u=r.get;if(void 0!==u)return u.call(i)},_timestamps=require(\"../utility/timestamps\"),Timestamps=_interopRequireWildcard(_timestamps),_turnTest=require(\"./turnTest\"),RTTSAMPLES=10,TIMEOUT=100,LAST_TIMEOUT=500,RttTest=function(t){function e(t){_classCallCheck(this,e);var s=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return s.sendTimer=null,s.countSent=0,s.rtts=[],s}return _inherits(e,_turnTest.TurnTest),_createClass(e,[{key:\"initiate\",value:function(){this.results.startTimestamp=Timestamps.getCurrent(),this.sendPing()}},{key:\"handleMessage\",value:function(t){if(this.isActive()){var e=parseInt(t,10),s=this.calculateRtt(e);this.rtts.push(s),this.countSent<RTTSAMPLES?this.sendPing():this.calculateMetrics()}}},{key:\"handleError\",value:function(t){this.fillResults(),this.failed(t)}},{key:\"sendPing\",value:function(){if(this.isActive()){var t=Timestamps.getCurrent();this.send(t.toString()),this.countSent+=1,this.sendTimer&&(clearTimeout(this.sendTimer),this.sendTimer=null),this.countSent<RTTSAMPLES?this.sendTimer=setTimeout(this.sendPing.bind(this),TIMEOUT):this.sendTimer=setTimeout(this.calculateMetrics.bind(this),LAST_TIMEOUT)}}},{key:\"calculateRtt\",value:function(t){return Timestamps.getCurrent()-t}},{key:\"calculateMetrics\",value:function(){this.sendTimer&&(clearTimeout(this.sendTimer),this.sendTimer=null),this.fillResults(),this.finished()}},{key:\"fillResults\",value:function(){this.results.sentMessages=this.countSent,this.results.unAckedMessages=this.countSent-this.rtts.length,this.results.maxMessages=RTTSAMPLES,this.results.forceStopped=this.forceStopped,this.results.median=this.median(),this.results.variance=this.variance(),this.results.endTimestamp=Timestamps.getCurrent()}},{key:\"median\",value:function(){if(0==this.rtts.length)return null;this.rtts.sort();var t=Math.floor(this.rtts.length/2);return this.rtts[t]}},{key:\"variance\",value:function(){if(0==this.rtts.length)return null;for(var t=0,e=this.median(),s=0;s<this.rtts.length;s++){var i=this.rtts[s];t+=Math.abs(i-e)}return t/=this.rtts.length}},{key:\"stop\",value:function(){this.isActive()&&(_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),\"stop\",this).call(this),this.fillResults())}}]),e}();exports.RttTest=RttTest;\n\n\n// WEBPACK FOOTER //\n// ../precalltest/dist/tests/rttTest.js","/*! precalltest  version = 1.1.6 2018-01-23 */\n\n\"use strict\";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.ThroughputTest=void 0;var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),_get=function e(t,s,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,s);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,s,i)}if(\"value\"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},_timestamps=require(\"../utility/timestamps\"),Timestamps=_interopRequireWildcard(_timestamps),_messageMaker=require(\"../utility/messageMaker\"),_turnTest=require(\"./turnTest\"),ThroughputTest=function(e){function t(e,s){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(i.sentBytes=0,i.receivedBytes=0,i.secondHalfBytes=0,i.secondHalfStart=null,i.bufferEmpty=0,i.chunkSize=1200,i.messageMaker=new _messageMaker.MessageMaker(i.chunkSize),i.duration=5e3,null!=s){var r=50*s;i.duration=Math.max(Math.min(r,1e4),1e3)}return i.sendTimer=null,i.lastMessage=null,i.intervals=[],i.intervalStart=0,i.intervalLength=100,i.intervalBytes=0,i}return _inherits(t,_turnTest.TurnTest),_createClass(t,[{key:\"initiate\",value:function(){if(window&&window.csioReactNative){var e=\"Not running throughput test for react-native\";this.handleError(new Error(e))}else this.startSend()}},{key:\"handleMessage\",value:function(e){var t=this;if(this.isActive()){this.lastMessage=e,this.receivedBytes+=e.length;var s=Timestamps.getCurrent();if(this.sendTimer||(this.results.startTimestamp=s,this.sendTimer=setTimeout(function(){t.stop(),t.finished()},this.duration)),0==this.intervalStart&&(this.intervalStart=s),this.intervalBytes+=e.length,s-this.intervalStart>=this.intervalLength){var i=s-this.intervalStart,r=this.averageThroughput(this.intervalBytes,i),n=null;try{n=s-JSON.parse(this.lastMessage).timestamp}catch(e){}this.intervals.push({startTimestamp:this.intervalStart,endTimestamp:s,bytesReceived:this.intervalBytes,average:r,rtt:n}),this.intervalStart=s,this.intervalBytes=0}this.results.startTimestamp&&s-this.results.startTimestamp>this.duration/2&&(this.secondHalfStart||(this.secondHalfStart=s),this.secondHalfBytes+=e.length)}}},{key:\"handleError\",value:function(e){this.stop(),this.failed(e)}},{key:\"averageThroughput\",value:function(e,t){return e/(t/1e3)*8/1024}},{key:\"bufferListener\",value:function(){this.sendChannel.removeEventListener(\"bufferedamountlow\",this.bufferListener.bind(this)),this.fillBuffer()}},{key:\"fillBuffer\",value:function(){for(0==this.sendChannel.bufferedAmount&&(this.bufferEmpty+=1);this.isActive();){if(this.sendChannel.bufferedAmount>this.bufferFullThreshold)return void(this.usePolling?setTimeout(this.fillBuffer.bind(this),250):this.sendChannel.addEventListener(\"bufferedamountlow\",this.bufferListener.bind(this)));var e=this.messageMaker.make(this.sentBytes);this.sentBytes+=e.length,this.send(e)}this.sendChannel.removeEventListener(\"bufferedamountlow\",this.bufferListener.bind(this))}},{key:\"startSend\",value:function(){this.isActive()&&(this.bufferFullThreshold=1e3*this.chunkSize,this.sendChannel=this.connection.sendChannel,this.usePolling=!0,\"number\"==typeof this.sendChannel.bufferedAmountLowThreshold&&(this.usePolling=!1,this.sendChannel.bufferedAmountLowThreshold=this.bufferFullThreshold/10),setTimeout(this.fillBuffer.bind(this),0))}},{key:\"fillResults\",value:function(){this.results.endTimestamp=Timestamps.getCurrent(),this.results.maxDuration=this.duration,this.results.forceStopped=this.forceStopped,this.results.bufferEmpty=this.bufferEmpty,this.results.intervals=this.intervals,this.results.bytesPrepared=this.sentBytes,this.results.bytesReceived=this.receivedBytes;var e=0,t=0;this.secondHalfStart&&(e=this.results.endTimestamp-this.secondHalfStart,t=this.averageThroughput(this.secondHalfBytes,e));var s=this.results.endTimestamp-this.results.startTimestamp,i=this.averageThroughput(this.receivedBytes,s);i>t&&(t=i),this.results.average=t;var r=null;try{r=JSON.parse(this.lastMessage)}catch(e){return}if(r){var n=r.sentBytes+this.lastMessage.length;this.results.bytesSent=n,this.results.fractionLostBytes=1-this.receivedBytes/n}else this.results.bytesSent=-1,this.results.fractionLostBytes=-1}},{key:\"stop\",value:function(){this.isActive()&&(clearTimeout(this.sendTimer),this.sendTimer=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"stop\",this).call(this),this.fillResults())}}]),t}();exports.ThroughputTest=ThroughputTest;\n\n\n// WEBPACK FOOTER //\n// ../precalltest/dist/tests/throughputTest.js","/*! precalltest  version = 1.1.6 2018-01-23 */\n\n\"use strict\";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.ResultsHandler=void 0;var _typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),_timestamps=require(\"./timestamps\"),Timestamps=_interopRequireWildcard(_timestamps),_messageMaker=require(\"./messageMaker\"),ResultsHandler=function(){function e(){_classCallCheck(this,e),this.start=Timestamps.getCurrent(),this.id=Math.trunc(this.start)+\"-\"+(0,_messageMaker.randomAsciiString)(20),this.version=\"1.1.6\",this.failures=[],this.results={},this.forceStopped=!1}return _createClass(e,[{key:\"getResults\",value:function(){return{id:this.id,version:this.version,forceStopped:this.forceStopped,startTimestamp:this.start,endTimestamp:Timestamps.getCurrent(),failures:this.failures,tests:this.results}}},{key:\"getFailureNumber\",value:function(){return this.failures.length}},{key:\"getId\",value:function(){return this.id}},{key:\"add\",value:function(e,t){this.results[e]=t,t.forceStopped&&!0===t.forceStopped&&(this.forceStopped=!0)}},{key:\"failure\",value:function(e){\"object\"===(void 0===e?\"undefined\":_typeof(e))&&(e=e.toString());var t={timestamp:Timestamps.getCurrent(),reason:e};this.failures.push(t)}}]),e}();exports.ResultsHandler=ResultsHandler;\n\n\n// WEBPACK FOOTER //\n// ../precalltest/dist/utility/resultsHandler.js","/*! precalltest  version = 1.1.6 2018-01-23 */\n\n\"use strict\";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.OnlineCheck=void 0;var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),_timestamps=require(\"./timestamps\"),Timestamps=_interopRequireWildcard(_timestamps),OnlineCheck=function(){function e(){_classCallCheck(this,e),this.active=!1}return _createClass(e,[{key:\"start\",value:function(){var e=this;this.active=!0,this.onlineCheck=[],window&&window.addEventListener&&\"function\"==typeof window.addEventListener&&(window.addEventListener(\"offline\",function(){e.addEntry()}),window.addEventListener(\"online\",function(){e.addEntry()}),this.addEntry())}},{key:\"addEntry\",value:function(){if(this.active){var e=Timestamps.getCurrent();if(navigator&&navigator.onLine){var n=navigator.onLine;this.onlineCheck.push({timestamp:e,online:n})}}}},{key:\"stop\",value:function(){var e=this;return this.active=!1,window&&window.removeEventListener&&\"function\"==typeof window.removeEventListener&&(window.removeEventListener(\"offline\",function(){e.addEntry()}),window.removeEventListener(\"online\",function(){e.addEntry()})),this.onlineCheck}}]),e}();exports.OnlineCheck=OnlineCheck;\n\n\n// WEBPACK FOOTER //\n// ../precalltest/dist/utility/onlineCheck.js","import browser from '../browser';\nimport { browsers } from 'js-utils';\n\nimport * as StatisticsEvents from '../../service/statistics/Events';\nimport * as MediaType from '../../service/RTC/MediaType';\n\nconst GlobalOnErrorHandler = require('../util/GlobalOnErrorHandler');\nconst logger = require('jitsi-meet-logger').getLogger(__filename);\n\n/* Whether we support the browser we are running into for logging statistics */\nconst browserSupported = browser.isChrome()\n        || browser.isOpera() || browser.isFirefox()\n        || browser.isNWJS() || browser.isElectron()\n        || browser.isTemasysPluginUsed() || browser.isEdge()\n        || browser.isSafariWithWebrtc();\n\n/**\n * The lib-jitsi-meet browser-agnostic names of the browser-specific keys\n * reported by RTCPeerConnection#getStats mapped by browser.\n */\nconst KEYS_BY_BROWSER_TYPE = {};\n\nKEYS_BY_BROWSER_TYPE[browsers.FIREFOX] = {\n    'ssrc': 'ssrc',\n    'packetsReceived': 'packetsReceived',\n    'packetsLost': 'packetsLost',\n    'packetsSent': 'packetsSent',\n    'bytesReceived': 'bytesReceived',\n    'bytesSent': 'bytesSent',\n    'framerateMean': 'framerateMean',\n    'ip': 'ipAddress',\n    'port': 'portNumber',\n    'protocol': 'transport'\n};\nKEYS_BY_BROWSER_TYPE[browsers.CHROME] = {\n    'receiveBandwidth': 'googAvailableReceiveBandwidth',\n    'sendBandwidth': 'googAvailableSendBandwidth',\n    'remoteAddress': 'googRemoteAddress',\n    'transportType': 'googTransportType',\n    'localAddress': 'googLocalAddress',\n    'activeConnection': 'googActiveConnection',\n    'ssrc': 'ssrc',\n    'packetsReceived': 'packetsReceived',\n    'packetsSent': 'packetsSent',\n    'packetsLost': 'packetsLost',\n    'bytesReceived': 'bytesReceived',\n    'bytesSent': 'bytesSent',\n    'googFrameHeightReceived': 'googFrameHeightReceived',\n    'googFrameWidthReceived': 'googFrameWidthReceived',\n    'googFrameHeightSent': 'googFrameHeightSent',\n    'googFrameWidthSent': 'googFrameWidthSent',\n    'googFrameRateReceived': 'googFrameRateReceived',\n    'googFrameRateSent': 'googFrameRateSent',\n    'audioInputLevel': 'audioInputLevel',\n    'audioOutputLevel': 'audioOutputLevel',\n    'currentRoundTripTime': 'googRtt',\n    'remoteCandidateType': 'googRemoteCandidateType',\n    'localCandidateType': 'googLocalCandidateType',\n    'ip': 'ip',\n    'port': 'port',\n    'protocol': 'protocol'\n};\nKEYS_BY_BROWSER_TYPE[browsers.EDGE] = {\n    'sendBandwidth': 'googAvailableSendBandwidth',\n    'remoteAddress': 'remoteAddress',\n    'transportType': 'protocol',\n    'localAddress': 'localAddress',\n    'activeConnection': 'activeConnection',\n    'ssrc': 'ssrc',\n    'packetsReceived': 'packetsReceived',\n    'packetsSent': 'packetsSent',\n    'packetsLost': 'packetsLost',\n    'bytesReceived': 'bytesReceived',\n    'bytesSent': 'bytesSent',\n    'googFrameHeightReceived': 'frameHeight',\n    'googFrameWidthReceived': 'frameWidth',\n    'googFrameHeightSent': 'frameHeight',\n    'googFrameWidthSent': 'frameWidth',\n    'googFrameRateReceived': 'framesPerSecond',\n    'googFrameRateSent': 'framesPerSecond',\n    'audioInputLevel': 'audioLevel',\n    'audioOutputLevel': 'audioLevel',\n    'currentRoundTripTime': 'roundTripTime'\n};\nKEYS_BY_BROWSER_TYPE[browsers.OPERA]\n    = KEYS_BY_BROWSER_TYPE[browsers.CHROME];\nKEYS_BY_BROWSER_TYPE[browsers.NWJS]\n    = KEYS_BY_BROWSER_TYPE[browsers.CHROME];\nKEYS_BY_BROWSER_TYPE[browsers.ELECTRON]\n    = KEYS_BY_BROWSER_TYPE[browsers.CHROME];\nKEYS_BY_BROWSER_TYPE[browsers.IEXPLORER]\n    = KEYS_BY_BROWSER_TYPE[browsers.CHROME];\nKEYS_BY_BROWSER_TYPE[browsers.SAFARI]\n    = KEYS_BY_BROWSER_TYPE[browsers.CHROME];\nKEYS_BY_BROWSER_TYPE[browsers.REACT_NATIVE]\n    = KEYS_BY_BROWSER_TYPE[browsers.CHROME];\n\n/**\n * Calculates packet lost percent using the number of lost packets and the\n * number of all packet.\n * @param lostPackets the number of lost packets\n * @param totalPackets the number of all packets.\n * @returns {number} packet loss percent\n */\nfunction calculatePacketLoss(lostPackets, totalPackets) {\n    if (!totalPackets || totalPackets <= 0\n            || !lostPackets || lostPackets <= 0) {\n        return 0;\n    }\n\n    return Math.round((lostPackets / totalPackets) * 100);\n}\n\n/**\n * Holds \"statistics\" for a single SSRC.\n * @constructor\n */\nfunction SsrcStats() {\n    this.loss = {};\n    this.bitrate = {\n        download: 0,\n        upload: 0\n    };\n    this.resolution = {};\n    this.framerate = 0;\n}\n\n/**\n * Sets the \"loss\" object.\n * @param loss the value to set.\n */\nSsrcStats.prototype.setLoss = function(loss) {\n    this.loss = loss || {};\n};\n\n/**\n * Sets resolution that belong to the ssrc represented by this instance.\n * @param resolution new resolution value to be set.\n */\nSsrcStats.prototype.setResolution = function(resolution) {\n    this.resolution = resolution || {};\n};\n\n/**\n * Adds the \"download\" and \"upload\" fields from the \"bitrate\" parameter to\n * the respective fields of the \"bitrate\" field of this object.\n * @param bitrate an object holding the values to add.\n */\nSsrcStats.prototype.addBitrate = function(bitrate) {\n    this.bitrate.download += bitrate.download;\n    this.bitrate.upload += bitrate.upload;\n};\n\n/**\n * Resets the bit rate for given <tt>ssrc</tt> that belong to the peer\n * represented by this instance.\n */\nSsrcStats.prototype.resetBitrate = function() {\n    this.bitrate.download = 0;\n    this.bitrate.upload = 0;\n};\n\n/**\n * Sets the \"framerate\".\n * @param framerate the value to set.\n */\nSsrcStats.prototype.setFramerate = function(framerate) {\n    this.framerate = framerate || 0;\n};\n\n/**\n *\n */\nfunction ConferenceStats() {\n\n    /**\n     * The bandwidth\n     * @type {{}}\n     */\n    this.bandwidth = {};\n\n    /**\n     * The bit rate\n     * @type {{}}\n     */\n    this.bitrate = {};\n\n    /**\n     * The packet loss rate\n     * @type {{}}\n     */\n    this.packetLoss = null;\n\n    /**\n     * Array with the transport information.\n     * @type {Array}\n     */\n    this.transport = [];\n}\n\n/* eslint-disable max-params */\n\n/**\n * <tt>StatsCollector</tt> registers for stats updates of given\n * <tt>peerconnection</tt> in given <tt>interval</tt>. On each update particular\n * stats are extracted and put in {@link SsrcStats} objects. Once the processing\n * is done <tt>audioLevelsUpdateCallback</tt> is called with <tt>this</tt>\n * instance as an event source.\n *\n * @param peerconnection WebRTC PeerConnection object.\n * @param audioLevelsInterval\n * @param statsInterval stats refresh interval given in ms.\n * @param eventEmitter\n * @constructor\n */\nexport default function StatsCollector(\n        peerconnection,\n        audioLevelsInterval,\n        statsInterval,\n        eventEmitter) {\n    // StatsCollector depends entirely on the format of the reports returned by\n    // RTCPeerConnection#getStats. Given that the value of\n    // browser#getName() is very unlikely to change at runtime, it\n    // makes sense to discover whether StatsCollector supports the executing\n    // browser as soon as possible. Otherwise, (1) getStatValue would have to\n    // needlessly check a \"static\" condition multiple times very very often and\n    // (2) the lack of support for the executing browser would be discovered and\n    // reported multiple times very very often too late in the execution in some\n    // totally unrelated callback.\n    /**\n     * The browser type supported by this StatsCollector. In other words, the\n     * type of the browser which initialized this StatsCollector\n     * instance.\n     * @private\n     */\n    this._browserType = browser.getName();\n    const keys = KEYS_BY_BROWSER_TYPE[this._browserType];\n\n    if (!keys) {\n        // eslint-disable-next-line no-throw-literal\n        throw `The browser type '${this._browserType}' isn't supported!`;\n    }\n\n    /**\n     * Whether to use the Promise-based getStats API or not.\n     * @type {boolean}\n     */\n    this._usesPromiseGetStats\n        = browser.isSafariWithWebrtc() || browser.isFirefox();\n\n    /**\n     * The function which is to be used to retrieve the value associated in a\n     * report returned by RTCPeerConnection#getStats with a lib-jitsi-meet\n     * browser-agnostic name/key.\n     *\n     * @function\n     * @private\n     */\n    this._getStatValue\n        = this._usesPromiseGetStats\n            ? this._defineNewGetStatValueMethod(keys)\n            : this._defineGetStatValueMethod(keys);\n\n    this.peerconnection = peerconnection;\n    this.baselineAudioLevelsReport = null;\n    this.currentAudioLevelsReport = null;\n    this.currentStatsReport = null;\n    this.previousStatsReport = null;\n    this.audioLevelsIntervalId = null;\n    this.eventEmitter = eventEmitter;\n    this.conferenceStats = new ConferenceStats();\n\n    // Updates stats interval\n    this.audioLevelsIntervalMilis = audioLevelsInterval;\n\n    this.statsIntervalId = null;\n    this.statsIntervalMilis = statsInterval;\n\n    /**\n     * Maps SSRC numbers to {@link SsrcStats}.\n     * @type {Map<number,SsrcStats}\n     */\n    this.ssrc2stats = new Map();\n}\n\n/* eslint-enable max-params */\n\n/**\n * Stops stats updates.\n */\nStatsCollector.prototype.stop = function() {\n    if (this.audioLevelsIntervalId) {\n        clearInterval(this.audioLevelsIntervalId);\n        this.audioLevelsIntervalId = null;\n    }\n\n    if (this.statsIntervalId) {\n        clearInterval(this.statsIntervalId);\n        this.statsIntervalId = null;\n    }\n};\n\n/**\n * Callback passed to <tt>getStats</tt> method.\n * @param error an error that occurred on <tt>getStats</tt> call.\n */\nStatsCollector.prototype.errorCallback = function(error) {\n    GlobalOnErrorHandler.callErrorHandler(error);\n    logger.error('Get stats error', error);\n    this.stop();\n};\n\n/**\n * Starts stats updates.\n */\nStatsCollector.prototype.start = function(startAudioLevelStats) {\n    const self = this;\n\n    if (startAudioLevelStats) {\n        this.audioLevelsIntervalId = setInterval(\n            () => {\n                // Interval updates\n                self.peerconnection.getStats(\n                    report => {\n                        let results = null;\n\n                        if (!report || !report.result\n                            || typeof report.result !== 'function') {\n                            results = report;\n                        } else {\n                            results = report.result();\n                        }\n                        self.currentAudioLevelsReport = results;\n                        if (this._usesPromiseGetStats) {\n                            self.processNewAudioLevelReport();\n                        } else {\n                            self.processAudioLevelReport();\n                        }\n\n                        self.baselineAudioLevelsReport\n                            = self.currentAudioLevelsReport;\n                    },\n                    self.errorCallback\n                );\n            },\n            self.audioLevelsIntervalMilis\n        );\n    }\n\n    if (browserSupported) {\n        this.statsIntervalId = setInterval(\n            () => {\n                // Interval updates\n                self.peerconnection.getStats(\n                    report => {\n                        let results = null;\n\n                        if (!report || !report.result\n                            || typeof report.result !== 'function') {\n                            // firefox\n                            results = report;\n                        } else {\n                            // chrome\n                            results = report.result();\n                        }\n\n                        self.currentStatsReport = results;\n                        try {\n                            if (this._usesPromiseGetStats) {\n                                self.processNewStatsReport();\n                            } else {\n                                self.processStatsReport();\n                            }\n                        } catch (e) {\n                            GlobalOnErrorHandler.callErrorHandler(e);\n                            logger.error(`Unsupported key:${e}`, e);\n                        }\n\n                        self.previousStatsReport = self.currentStatsReport;\n                    },\n                    self.errorCallback\n                );\n            },\n            self.statsIntervalMilis\n        );\n    }\n};\n\n/**\n * Defines a function which (1) is to be used as a StatsCollector method and (2)\n * gets the value from a specific report returned by RTCPeerConnection#getStats\n * associated with a lib-jitsi-meet browser-agnostic name.\n *\n * @param {Object.<string,string>} keys the map of LibJitsi browser-agnostic\n * names to RTCPeerConnection#getStats browser-specific keys\n */\nStatsCollector.prototype._defineGetStatValueMethod = function(keys) {\n    // Define the function which converts a lib-jitsi-meet browser-asnostic name\n    // to a browser-specific key of a report returned by\n    // RTCPeerConnection#getStats.\n    const keyFromName = function(name) {\n        const key = keys[name];\n\n        if (key) {\n            return key;\n        }\n\n        // eslint-disable-next-line no-throw-literal\n        throw `The property '${name}' isn't supported!`;\n    };\n\n    // Define the function which retrieves the value from a specific report\n    // returned by RTCPeerConnection#getStats associated with a given\n    // browser-specific key.\n    let itemStatByKey;\n\n    switch (this._browserType) {\n    case browsers.CHROME:\n    case browsers.OPERA:\n    case browsers.NWJS:\n    case browsers.ELECTRON:\n        // TODO What about other types of browser which are based on Chrome such\n        // as NW.js? Every time we want to support a new type browser we have to\n        // go and add more conditions (here and in multiple other places).\n        // Cannot we do a feature detection instead of a browser type check? For\n        // example, if item has a stat property of type function, then it's very\n        // likely that whoever defined it wanted you to call it in order to\n        // retrieve the value associated with a specific key.\n        itemStatByKey = (item, key) => item.stat(key);\n        break;\n    case browsers.REACT_NATIVE:\n        // The implementation provided by react-native-webrtc follows the\n        // Objective-C WebRTC API: RTCStatsReport has a values property of type\n        // Array in which each element is a key-value pair.\n        itemStatByKey = function(item, key) {\n            let value;\n\n            item.values.some(pair => {\n                if (pair.hasOwnProperty(key)) {\n                    value = pair[key];\n\n                    return true;\n                }\n\n                return false;\n\n            });\n\n            return value;\n        };\n        break;\n    case browsers.EDGE:\n        itemStatByKey = (item, key) => item[key];\n        break;\n    default:\n        itemStatByKey = (item, key) => item[key];\n    }\n\n    // Compose the 2 functions defined above to get a function which retrieves\n    // the value from a specific report returned by RTCPeerConnection#getStats\n    // associated with a specific lib-jitsi-meet browser-agnostic name.\n    return (item, name) => itemStatByKey(item, keyFromName(name));\n};\n\n/**\n * Obtains a stat value from given stat and converts it to a non-negative\n * number. If the value is either invalid or negative then 0 will be returned.\n * @param report\n * @param {string} name\n * @return {number}\n * @private\n */\nStatsCollector.prototype.getNonNegativeStat = function(report, name) {\n    let value = this._getStatValue(report, name);\n\n    if (typeof value !== 'number') {\n        value = Number(value);\n    }\n\n    if (isNaN(value)) {\n        return 0;\n    }\n\n    return Math.max(0, value);\n};\n\n/* eslint-disable no-continue */\n\n/**\n * Stats processing logic.\n */\nStatsCollector.prototype.processStatsReport = function() {\n    if (!this.previousStatsReport) {\n        return;\n    }\n\n    const getStatValue = this._getStatValue;\n    const byteSentStats = {};\n\n    for (const idx in this.currentStatsReport) {\n        if (!this.currentStatsReport.hasOwnProperty(idx)) {\n            continue;\n        }\n        const now = this.currentStatsReport[idx];\n\n        // The browser API may return \"undefined\" values in the array\n        if (!now) {\n            continue;\n        }\n\n        try {\n            const receiveBandwidth = getStatValue(now, 'receiveBandwidth');\n            const sendBandwidth = getStatValue(now, 'sendBandwidth');\n\n            if (receiveBandwidth || sendBandwidth) {\n                this.conferenceStats.bandwidth = {\n                    'download': Math.round(receiveBandwidth / 1000),\n                    'upload': Math.round(sendBandwidth / 1000)\n                };\n            }\n        } catch (e) { /* not supported*/ }\n\n        if (now.type === 'googCandidatePair') {\n            let active, ip, localCandidateType, localip,\n                remoteCandidateType, rtt, type;\n\n            try {\n                active = getStatValue(now, 'activeConnection');\n                if (!active) {\n                    continue;\n                }\n\n                ip = getStatValue(now, 'remoteAddress');\n                type = getStatValue(now, 'transportType');\n                localip = getStatValue(now, 'localAddress');\n                localCandidateType = getStatValue(now, 'localCandidateType');\n                remoteCandidateType = getStatValue(now, 'remoteCandidateType');\n                rtt = this.getNonNegativeStat(now, 'currentRoundTripTime');\n            } catch (e) { /* not supported*/ }\n            if (!ip || !type || !localip || active !== 'true') {\n                continue;\n            }\n\n            // Save the address unless it has been saved already.\n            const conferenceStatsTransport = this.conferenceStats.transport;\n\n            if (!conferenceStatsTransport.some(\n                    t =>\n                        t.ip === ip\n                            && t.type === type\n                            && t.localip === localip)) {\n                conferenceStatsTransport.push({\n                    ip,\n                    type,\n                    localip,\n                    p2p: this.peerconnection.isP2P,\n                    localCandidateType,\n                    remoteCandidateType,\n                    rtt\n                });\n            }\n            continue;\n        }\n\n        if (now.type === 'candidatepair') {\n            // we need succeeded and selected pairs only\n            if (now.state !== 'succeeded' || !now.selected) {\n                continue;\n            }\n\n            const local = this.currentStatsReport[now.localCandidateId];\n            const remote = this.currentStatsReport[now.remoteCandidateId];\n\n            this.conferenceStats.transport.push({\n                ip: `${remote.ipAddress}:${remote.portNumber}`,\n                type: local.transport,\n                localip: `${local.ipAddress}:${local.portNumber}`,\n                p2p: this.peerconnection.isP2P,\n                localCandidateType: local.candidateType,\n                remoteCandidateType: remote.candidateType\n            });\n        }\n\n        // NOTE: Edge's proprietary stats via RTCIceTransport.msGetStats().\n        if (now.msType === 'transportdiagnostics') {\n            this.conferenceStats.transport.push({\n                ip: now.remoteAddress,\n                type: now.protocol,\n                localip: now.localAddress,\n                p2p: this.peerconnection.isP2P\n            });\n        }\n\n        if (now.type !== 'ssrc' && now.type !== 'outboundrtp'\n            && now.type !== 'inboundrtp' && now.type !== 'track') {\n            continue;\n        }\n\n        // NOTE: In Edge, stats with type \"inboundrtp\" and \"outboundrtp\" are\n        // completely useless, so ignore them.\n        if (browser.isEdge()\n            && (now.type === 'inboundrtp' || now.type === 'outboundrtp')) {\n            continue;\n        }\n\n        const before = this.previousStatsReport[idx];\n        let ssrc = this.getNonNegativeStat(now, 'ssrc');\n\n        // If type=\"track\", take the first SSRC from ssrcIds.\n        if (now.type === 'track' && Array.isArray(now.ssrcIds)) {\n            ssrc = Number(now.ssrcIds[0]);\n        }\n\n        if (!before || !ssrc) {\n            continue;\n        }\n\n        // isRemote is available only in FF and is ignored in case of chrome\n        // according to the spec\n        // https://www.w3.org/TR/webrtc-stats/#dom-rtcrtpstreamstats-isremote\n        // when isRemote is true indicates that the measurements were done at\n        // the remote endpoint and reported in an RTCP RR/XR.\n        // Fixes a problem where we are calculating local stats wrong adding\n        // the sent bytes to the local download bitrate.\n        // In new W3 stats spec, type=\"track\" has a remoteSource boolean\n        // property.\n        // Edge uses the new format, so skip this check.\n        if (!browser.isEdge()\n                && (now.isRemote === true || now.remoteSource === true)) {\n            continue;\n        }\n\n        let ssrcStats = this.ssrc2stats.get(ssrc);\n\n        if (!ssrcStats) {\n            ssrcStats = new SsrcStats();\n            this.ssrc2stats.set(ssrc, ssrcStats);\n        }\n\n        let isDownloadStream = true;\n        let key = 'packetsReceived';\n        let packetsNow = getStatValue(now, key);\n\n        if (typeof packetsNow === 'undefined'\n            || packetsNow === null || packetsNow === '') {\n            isDownloadStream = false;\n            key = 'packetsSent';\n            packetsNow = getStatValue(now, key);\n            if (typeof packetsNow === 'undefined' || packetsNow === null) {\n                logger.warn('No packetsReceived nor packetsSent stat found');\n            }\n        }\n        if (!packetsNow || packetsNow < 0) {\n            packetsNow = 0;\n        }\n\n        const packetsBefore = this.getNonNegativeStat(before, key);\n        const packetsDiff = Math.max(0, packetsNow - packetsBefore);\n\n        const packetsLostNow\n            = this.getNonNegativeStat(now, 'packetsLost');\n        const packetsLostBefore\n            = this.getNonNegativeStat(before, 'packetsLost');\n        const packetsLostDiff = Math.max(0, packetsLostNow - packetsLostBefore);\n\n        ssrcStats.setLoss({\n            packetsTotal: packetsDiff + packetsLostDiff,\n            packetsLost: packetsLostDiff,\n            isDownloadStream\n        });\n\n        const bytesReceivedNow\n            = this.getNonNegativeStat(now, 'bytesReceived');\n        const bytesReceivedBefore\n            = this.getNonNegativeStat(before, 'bytesReceived');\n        const bytesReceived\n            = Math.max(0, bytesReceivedNow - bytesReceivedBefore);\n\n        let bytesSent = 0;\n\n        // TODO: clean this mess up!\n        let nowBytesTransmitted = getStatValue(now, 'bytesSent');\n\n        if (typeof nowBytesTransmitted === 'number'\n            || typeof nowBytesTransmitted === 'string') {\n            nowBytesTransmitted = Number(nowBytesTransmitted);\n            if (!isNaN(nowBytesTransmitted)) {\n                byteSentStats[ssrc] = nowBytesTransmitted;\n                if (nowBytesTransmitted > 0) {\n                    bytesSent = nowBytesTransmitted\n                        - getStatValue(before, 'bytesSent');\n                }\n            }\n        }\n        bytesSent = Math.max(0, bytesSent);\n\n        const timeMs = now.timestamp - before.timestamp;\n        let bitrateReceivedKbps = 0, bitrateSentKbps = 0;\n\n        if (timeMs > 0) {\n            // TODO is there any reason to round here?\n            bitrateReceivedKbps = Math.round((bytesReceived * 8) / timeMs);\n            bitrateSentKbps = Math.round((bytesSent * 8) / timeMs);\n        }\n\n        ssrcStats.addBitrate({\n            'download': bitrateReceivedKbps,\n            'upload': bitrateSentKbps\n        });\n\n        const resolution = {\n            height: null,\n            width: null\n        };\n\n        try {\n            let height, width;\n\n            if ((height = getStatValue(now, 'googFrameHeightReceived'))\n                && (width = getStatValue(now, 'googFrameWidthReceived'))) {\n                resolution.height = height;\n                resolution.width = width;\n            } else if ((height = getStatValue(now, 'googFrameHeightSent'))\n                && (width = getStatValue(now, 'googFrameWidthSent'))) {\n                resolution.height = height;\n                resolution.width = width;\n            }\n        } catch (e) { /* not supported*/ }\n\n        // Tries to get frame rate\n        let frameRate;\n\n        try {\n            frameRate = getStatValue(now, 'googFrameRateReceived')\n                || getStatValue(now, 'googFrameRateSent') || 0;\n        } catch (e) {\n            // if it fails with previous properties(chrome),\n            // let's try with another one (FF)\n            try {\n                frameRate = this.getNonNegativeStat(now, 'framerateMean');\n            } catch (err) { /* not supported*/ }\n        }\n        ssrcStats.setFramerate(Math.round(frameRate || 0));\n\n        if (resolution.height && resolution.width) {\n            ssrcStats.setResolution(resolution);\n        } else {\n            ssrcStats.setResolution(null);\n        }\n    }\n\n    this.eventEmitter.emit(\n        StatisticsEvents.BYTE_SENT_STATS, this.peerconnection, byteSentStats);\n\n    this._processAndEmitReport();\n};\n\n/**\n *\n */\nStatsCollector.prototype._processAndEmitReport = function() {\n    // process stats\n    const totalPackets = {\n        download: 0,\n        upload: 0\n    };\n    const lostPackets = {\n        download: 0,\n        upload: 0\n    };\n    let bitrateDownload = 0;\n    let bitrateUpload = 0;\n    const resolutions = {};\n    const framerates = {};\n    let audioBitrateDownload = 0;\n    let audioBitrateUpload = 0;\n    let videoBitrateDownload = 0;\n    let videoBitrateUpload = 0;\n\n    for (const [ ssrc, ssrcStats ] of this.ssrc2stats) {\n        // process packet loss stats\n        const loss = ssrcStats.loss;\n        const type = loss.isDownloadStream ? 'download' : 'upload';\n\n        totalPackets[type] += loss.packetsTotal;\n        lostPackets[type] += loss.packetsLost;\n\n        // process bitrate stats\n        bitrateDownload += ssrcStats.bitrate.download;\n        bitrateUpload += ssrcStats.bitrate.upload;\n\n        // collect resolutions and framerates\n        const track = this.peerconnection.getTrackBySSRC(ssrc);\n\n        if (track) {\n            if (track.isAudioTrack()) {\n                audioBitrateDownload += ssrcStats.bitrate.download;\n                audioBitrateUpload += ssrcStats.bitrate.upload;\n            } else {\n                videoBitrateDownload += ssrcStats.bitrate.download;\n                videoBitrateUpload += ssrcStats.bitrate.upload;\n            }\n\n            const participantId = track.getParticipantId();\n\n            if (participantId) {\n                const resolution = ssrcStats.resolution;\n\n                if (resolution.width\n                        && resolution.height\n                        && resolution.width !== -1\n                        && resolution.height !== -1) {\n                    const userResolutions = resolutions[participantId] || {};\n\n                    userResolutions[ssrc] = resolution;\n                    resolutions[participantId] = userResolutions;\n                }\n                if (ssrcStats.framerate !== 0) {\n                    const userFramerates = framerates[participantId] || {};\n\n                    userFramerates[ssrc] = ssrcStats.framerate;\n                    framerates[participantId] = userFramerates;\n                }\n            } else {\n                logger.error(`No participant ID returned by ${track}`);\n            }\n        } else if (this.peerconnection.isP2P) {\n            // NOTE For JVB connection there are JVB tracks reported in\n            // the stats, but they do not have corresponding JitsiRemoteTrack\n            // instances stored in TPC. It is not trivial to figure out that\n            // a SSRC belongs to JVB, so we print this error ony for the P2P\n            // connection for the time being.\n            //\n            // Also there will be reports for tracks removed from the session,\n            // for the users who have left the conference.\n            logger.error(\n                `JitsiTrack not found for SSRC ${ssrc}`\n                    + ` in ${this.peerconnection}`);\n        }\n\n        ssrcStats.resetBitrate();\n    }\n\n    this.conferenceStats.bitrate = {\n        'upload': bitrateUpload,\n        'download': bitrateDownload\n    };\n\n    this.conferenceStats.bitrate.audio = {\n        'upload': audioBitrateUpload,\n        'download': audioBitrateDownload\n    };\n\n    this.conferenceStats.bitrate.video = {\n        'upload': videoBitrateUpload,\n        'download': videoBitrateDownload\n    };\n\n    this.conferenceStats.packetLoss = {\n        total:\n            calculatePacketLoss(\n                lostPackets.download + lostPackets.upload,\n                totalPackets.download + totalPackets.upload),\n        download:\n            calculatePacketLoss(lostPackets.download, totalPackets.download),\n        upload:\n            calculatePacketLoss(lostPackets.upload, totalPackets.upload)\n    };\n\n    this.eventEmitter.emit(\n        StatisticsEvents.CONNECTION_STATS,\n        this.peerconnection,\n        {\n            'bandwidth': this.conferenceStats.bandwidth,\n            'bitrate': this.conferenceStats.bitrate,\n            'packetLoss': this.conferenceStats.packetLoss,\n            'resolution': resolutions,\n            'framerate': framerates,\n            'transport': this.conferenceStats.transport\n        });\n    this.conferenceStats.transport = [];\n};\n\n/**\n * Stats processing logic.\n */\nStatsCollector.prototype.processAudioLevelReport = function() {\n    if (!this.baselineAudioLevelsReport) {\n        return;\n    }\n\n    const getStatValue = this._getStatValue;\n\n    for (const idx in this.currentAudioLevelsReport) {\n        if (!this.currentAudioLevelsReport.hasOwnProperty(idx)) {\n            continue;\n        }\n\n        const now = this.currentAudioLevelsReport[idx];\n\n        if (now.type !== 'ssrc' && now.type !== 'track') {\n            continue;\n        }\n\n        const before = this.baselineAudioLevelsReport[idx];\n        let ssrc = this.getNonNegativeStat(now, 'ssrc');\n\n        if (!ssrc && Array.isArray(now.ssrcIds)) {\n            ssrc = Number(now.ssrcIds[0]);\n        }\n\n        if (!before) {\n            logger.warn(`${ssrc} not enough data`);\n            continue;\n        }\n\n        if (!ssrc) {\n            if ((Date.now() - now.timestamp) < 3000) {\n                logger.warn('No ssrc: ');\n            }\n            continue;\n        }\n\n        // Audio level\n        let audioLevel;\n\n        try {\n            audioLevel\n                = getStatValue(now, 'audioInputLevel')\n                    || getStatValue(now, 'audioOutputLevel');\n        } catch (e) { /* not supported*/\n            logger.warn('Audio Levels are not available in the statistics.');\n            clearInterval(this.audioLevelsIntervalId);\n\n            return;\n        }\n\n        if (audioLevel) {\n            let isLocal;\n\n            // If type=\"ssrc\" (legacy) check whether they are received packets.\n            if (now.type === 'ssrc') {\n                isLocal = !getStatValue(now, 'packetsReceived');\n\n            // If type=\"track\", check remoteSource boolean property.\n            } else {\n                isLocal = !now.remoteSource;\n            }\n\n            // According to the W3C WebRTC Stats spec, audioLevel should be in\n            // 0..1 range (0 == silence). However browsers don't behave that\n            // way so we must convert it to 0..1.\n            //\n            // In Edge the range is -100..0 (-100 == silence) measured in dB,\n            // so convert to linear. The levels are set to 0 for remote tracks,\n            // so don't convert those, since 0 means \"the maximum\" in Edge.\n            if (browser.isEdge()) {\n                audioLevel = audioLevel < 0 ? Math.pow(10, audioLevel / 20) : 0;\n\n            // TODO: Can't find specs about what this value really is, but it\n            // seems to vary between 0 and around 32k.\n            } else {\n                audioLevel = audioLevel / 32767;\n            }\n\n            this.eventEmitter.emit(\n                StatisticsEvents.AUDIO_LEVEL,\n                this.peerconnection,\n                ssrc,\n                audioLevel,\n                isLocal);\n        }\n    }\n};\n\n/* eslint-enable no-continue */\n\n/**\n * New promised based getStats report processing.\n * Tested with chrome, firefox and safari. Not switching it on for chrome as\n * frameRate stat is missing and calculating it using framesSent,\n * gives values double the values seen in webrtc-internals.\n * https://w3c.github.io/webrtc-stats/\n */\n\n/**\n * Defines a function which (1) is to be used as a StatsCollector method and (2)\n * gets the value from a specific report returned by RTCPeerConnection#getStats\n * associated with a lib-jitsi-meet browser-agnostic name in case of using\n * Promised based getStats.\n *\n * @param {Object.<string,string>} keys the map of LibJitsi browser-agnostic\n * names to RTCPeerConnection#getStats browser-specific keys\n */\nStatsCollector.prototype._defineNewGetStatValueMethod = function(keys) {\n    // Define the function which converts a lib-jitsi-meet browser-asnostic name\n    // to a browser-specific key of a report returned by\n    // RTCPeerConnection#getStats.\n    const keyFromName = function(name) {\n        const key = keys[name];\n\n        if (key) {\n            return key;\n        }\n\n        // eslint-disable-next-line no-throw-literal\n        throw `The property '${name}' isn't supported!`;\n    };\n\n    // Compose the 2 functions defined above to get a function which retrieves\n    // the value from a specific report returned by RTCPeerConnection#getStats\n    // associated with a specific lib-jitsi-meet browser-agnostic name.\n    return (item, name) => item[keyFromName(name)];\n};\n\n/**\n * Converts the value to a non-negative number.\n * If the value is either invalid or negative then 0 will be returned.\n * @param {*} v\n * @return {number}\n * @private\n */\nStatsCollector.prototype.getNonNegativeValue = function(v) {\n    let value = v;\n\n    if (typeof value !== 'number') {\n        value = Number(value);\n    }\n\n    if (isNaN(value)) {\n        return 0;\n    }\n\n    return Math.max(0, value);\n};\n\n/**\n * Calculates bitrate between before and now using a supplied field name and its\n * value in the stats.\n * @param {RTCInboundRtpStreamStats|RTCSentRtpStreamStats} now the current stats\n * @param {RTCInboundRtpStreamStats|RTCSentRtpStreamStats} before the\n * previous stats.\n * @param fieldName the field to use for calculations.\n * @return {number} the calculated bitrate between now and before.\n * @private\n */\nStatsCollector.prototype._calculateBitrate = function(now, before, fieldName) {\n    const bytesNow = this.getNonNegativeValue(now[fieldName]);\n    const bytesBefore = this.getNonNegativeValue(before[fieldName]);\n    const bytesProcessed = Math.max(0, bytesNow - bytesBefore);\n\n    const timeMs = now.timestamp - before.timestamp;\n    let bitrateKbps = 0;\n\n    if (timeMs > 0) {\n        // TODO is there any reason to round here?\n        bitrateKbps = Math.round((bytesProcessed * 8) / timeMs);\n    }\n\n    return bitrateKbps;\n};\n\n/**\n * Stats processing new getStats logic.\n */\nStatsCollector.prototype.processNewStatsReport = function() {\n    if (!this.previousStatsReport) {\n        return;\n    }\n\n    const getStatValue = this._getStatValue;\n    const byteSentStats = {};\n\n    this.currentStatsReport.forEach(now => {\n\n        // RTCIceCandidatePairStats\n        // https://w3c.github.io/webrtc-stats/#candidatepair-dict*\n        if (now.type === 'candidate-pair'\n            && now.nominated\n            && now.state === 'succeeded') {\n\n            const availableIncomingBitrate = now.availableIncomingBitrate;\n            const availableOutgoingBitrate = now.availableOutgoingBitrate;\n\n            if (availableIncomingBitrate || availableOutgoingBitrate) {\n                this.conferenceStats.bandwidth = {\n                    'download': Math.round(availableIncomingBitrate / 1000),\n                    'upload': Math.round(availableOutgoingBitrate / 1000)\n                };\n            }\n\n            const remoteUsedCandidate\n                = this.currentStatsReport.get(now.remoteCandidateId);\n            const localUsedCandidate\n                = this.currentStatsReport.get(now.localCandidateId);\n\n            // RTCIceCandidateStats\n            // https://w3c.github.io/webrtc-stats/#icecandidate-dict*\n            // safari currently does not provide ice candidates in stats\n            if (remoteUsedCandidate && localUsedCandidate) {\n                // FF uses non-standard ipAddress, portNumber, transport\n                // instead of ip, port, protocol\n                const remoteIpAddress = getStatValue(remoteUsedCandidate, 'ip');\n                const remotePort = getStatValue(remoteUsedCandidate, 'port');\n                const ip = `${remoteIpAddress}:${remotePort}`;\n\n                const localIpAddress = getStatValue(localUsedCandidate, 'ip');\n                const localPort = getStatValue(localUsedCandidate, 'port');\n\n                const localIp = `${localIpAddress}:${localPort}`;\n                const type = getStatValue(remoteUsedCandidate, 'protocol');\n\n                // Save the address unless it has been saved already.\n                const conferenceStatsTransport = this.conferenceStats.transport;\n\n                if (!conferenceStatsTransport.some(\n                        t =>\n                            t.ip === ip\n                            && t.type === type\n                            && t.localip === localIp)) {\n                    conferenceStatsTransport.push({\n                        ip,\n                        type,\n                        localIp,\n                        p2p: this.peerconnection.isP2P,\n                        localCandidateType: localUsedCandidate.candidateType,\n                        remoteCandidateType: remoteUsedCandidate.candidateType,\n                        networkType: localUsedCandidate.networkType,\n                        rtt: now.currentRoundTripTime * 1000\n                    });\n                }\n            }\n\n        // RTCReceivedRtpStreamStats\n        // https://w3c.github.io/webrtc-stats/#receivedrtpstats-dict*\n        // RTCSentRtpStreamStats\n        // https://w3c.github.io/webrtc-stats/#sentrtpstats-dict*\n        } else if (now.type === 'inbound-rtp' || now.type === 'outbound-rtp') {\n            const before = this.previousStatsReport.get(now.id);\n            const ssrc = this.getNonNegativeValue(now.ssrc);\n\n            if (!before || !ssrc) {\n                return;\n            }\n\n            let ssrcStats = this.ssrc2stats.get(ssrc);\n\n            if (!ssrcStats) {\n                ssrcStats = new SsrcStats();\n                this.ssrc2stats.set(ssrc, ssrcStats);\n            }\n\n            let isDownloadStream = true;\n            let key = 'packetsReceived';\n\n            if (now.type === 'outbound-rtp') {\n                isDownloadStream = false;\n                key = 'packetsSent';\n            }\n\n            let packetsNow = now[key];\n\n            if (!packetsNow || packetsNow < 0) {\n                packetsNow = 0;\n            }\n\n            const packetsBefore = this.getNonNegativeValue(before[key]);\n            const packetsDiff = Math.max(0, packetsNow - packetsBefore);\n\n            const packetsLostNow\n                = this.getNonNegativeValue(now.packetsLost);\n            const packetsLostBefore\n                = this.getNonNegativeValue(before.packetsLost);\n            const packetsLostDiff\n                = Math.max(0, packetsLostNow - packetsLostBefore);\n\n            ssrcStats.setLoss({\n                packetsTotal: packetsDiff + packetsLostDiff,\n                packetsLost: packetsLostDiff,\n                isDownloadStream\n            });\n\n            if (now.type === 'inbound-rtp') {\n\n                ssrcStats.addBitrate({\n                    'download': this._calculateBitrate(\n                                    now, before, 'bytesReceived'),\n                    'upload': 0\n                });\n\n                // RTCInboundRtpStreamStats\n                // https://w3c.github.io/webrtc-stats/#inboundrtpstats-dict*\n                // TODO: can we use framesDecoded for frame rate, available\n                // in chrome\n            } else {\n                byteSentStats[ssrc] = this.getNonNegativeValue(now.bytesSent);\n                ssrcStats.addBitrate({\n                    'download': 0,\n                    'upload': this._calculateBitrate(\n                                now, before, 'bytesSent')\n                });\n\n                // RTCOutboundRtpStreamStats\n                // https://w3c.github.io/webrtc-stats/#outboundrtpstats-dict*\n                // TODO: can we use framesEncoded for frame rate, available\n                // in chrome\n            }\n\n            // FF has framerateMean out of spec\n            const framerateMean = now.framerateMean;\n\n            if (framerateMean) {\n                ssrcStats.setFramerate(Math.round(framerateMean || 0));\n            }\n\n        // track for resolution\n        // RTCVideoHandlerStats\n        // https://w3c.github.io/webrtc-stats/#vststats-dict*\n        // RTCMediaHandlerStats\n        // https://w3c.github.io/webrtc-stats/#mststats-dict*\n        } else if (now.type === 'track') {\n\n            const resolution = {\n                height: now.frameHeight,\n                width: now.frameWidth\n            };\n\n            // Tries to get frame rate\n            let frameRate = now.framesPerSecond;\n\n            if (!frameRate) {\n                // we need to calculate it\n                const before = this.previousStatsReport.get(now.id);\n\n                if (before) {\n                    const timeMs = now.timestamp - before.timestamp;\n\n                    if (timeMs > 0 && now.framesSent) {\n                        const numberOfFramesSinceBefore\n                            = now.framesSent - before.framesSent;\n\n                        frameRate = (numberOfFramesSinceBefore / timeMs) * 1000;\n                    }\n                }\n\n                if (!frameRate) {\n                    return;\n                }\n            }\n\n            const trackIdentifier = now.trackIdentifier;\n            const ssrc = this.peerconnection.getSsrcByTrackId(trackIdentifier);\n            let ssrcStats = this.ssrc2stats.get(ssrc);\n\n            if (!ssrcStats) {\n                ssrcStats = new SsrcStats();\n                this.ssrc2stats.set(ssrc, ssrcStats);\n            }\n            ssrcStats.setFramerate(Math.round(frameRate || 0));\n\n            if (resolution.height && resolution.width) {\n                ssrcStats.setResolution(resolution);\n            } else {\n                ssrcStats.setResolution(null);\n            }\n        }\n    });\n\n    this.eventEmitter.emit(\n        StatisticsEvents.BYTE_SENT_STATS, this.peerconnection, byteSentStats);\n\n    this._processAndEmitReport();\n};\n\n/**\n * Stats processing logic.\n */\nStatsCollector.prototype.processNewAudioLevelReport = function() {\n    if (!this.baselineAudioLevelsReport) {\n        return;\n    }\n\n    this.currentAudioLevelsReport.forEach(now => {\n        if (now.type !== 'track') {\n            return;\n        }\n\n        // Audio level\n        const audioLevel = now.audioLevel;\n\n        if (!audioLevel) {\n            return;\n        }\n\n        const trackIdentifier = now.trackIdentifier;\n        const ssrc = this.peerconnection.getSsrcByTrackId(trackIdentifier);\n\n        if (ssrc) {\n            const isLocal\n                = ssrc === this.peerconnection.getLocalSSRC(\n                this.peerconnection.getLocalTracks(MediaType.AUDIO));\n\n            this.eventEmitter.emit(\n                StatisticsEvents.AUDIO_LEVEL,\n                this.peerconnection,\n                ssrc,\n                audioLevel,\n                isLocal);\n        }\n    });\n};\n\n/**\n * End new promised based getStats processing methods.\n */\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/RTPStatsCollector.js","/*!\n * currentExecutingScript\n * Get the currently executing script, regardless of its source/trigger/synchronicity. Similar to HTML5's `document.currentScript` but arguably much more useful!\n * Copyright (c) 2015 James M. Greene\n * Licensed MIT\n * https://github.com/JamesMGreene/currentExecutingScript\n * v0.1.3\n */\n(function(root, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else if (typeof exports === \"object\") {\n    // CommonJS-like environments that support `module.exports`,\n    // like Node.js. Does not work with strict CommonJS!\n    module.exports = factory();\n  } else {\n    // Browser globals (`root` is `window`)\n    root.currentExecutingScript = factory();\n  }\n}(\n  // Current context/scope\n  this || window,\n\n  // Factory function to return the export\n  function() {\n\nvar scriptReadyRegex = /^(interactive|loaded|complete)$/;\n\n// This page's URL (minus query string and fragment identifer hash, if any)\nvar fullPageUrl = !!window.location ? window.location.href : null;\nvar pageUrl = fullPageUrl ? fullPageUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\") || null : null;\n\n// Live NodeList collection\nvar scripts = document.getElementsByTagName(\"script\");\n\n// Check if the browser supports the `readyState` property on `script` elements\nvar supportsScriptReadyState = \"readyState\" in (scripts[0] || document.createElement(\"script\"));\n\n// Lousy browser detection for [not] Opera\nvar isNotOpera = !window.opera || window.opera.toString() !== \"[object Opera]\";\n\n// Detect if `document.currentScript` is supported\nvar hasNativeCurrentScriptAccessor = \"currentScript\" in document;\n\nvar originalStackDepthConfig;\n// Detect if the V8 Error Stack Trace API is supported\nif (\"stackTraceLimit\" in Error && Error.stackTraceLimit !== Infinity) {\n  originalStackDepthConfig = Error.stackTraceLimit;\n  Error.stackTraceLimit = Infinity;\n}\n\n\n// In some browsers (e.g. Chrome), you can get the current stack from an Error\n// object instance without needing to throw it. Avoiding an unnecessary\n// use of `throw` saves time and performance.\nvar hasStackBeforeThrowing = false,\n    hasStackAfterThrowing = false;\n(function() {\n  try {\n    var err = new Error();\n    hasStackBeforeThrowing = typeof err.stack === \"string\" && !!err.stack;\n    throw err;\n  }\n  catch (thrownErr) {\n    hasStackAfterThrowing = typeof thrownErr.stack === \"string\" && !!thrownErr.stack;\n  }\n})();\n\n\n// Normalize whitespace within a string\nfunction normalizeWhitespace(str) {\n  return str ? str.replace(/^\\s+$|\\s+$/g, \"\").replace(/\\s\\s+/g, \" \") : \"\";\n}\n\n// Get script object based on the `src` URL\nfunction getScriptFromUrl(url, eligibleScripts) {\n  var i,\n      script = null;\n\n  eligibleScripts = eligibleScripts || scripts;\n\n  if (typeof url === \"string\" && url) {\n    for (i = eligibleScripts.length; i--; ) {\n      if (eligibleScripts[i].src === url) {\n        // NOTE: Could check if the same script URL is used by more than one `script` element\n        // here... but let's not. That would yield less useful results in \"loose\" detection. ;)\n        script = eligibleScripts[i];\n        break;\n      }\n    }\n  }\n  return script;\n}\n\n// Get script object based on the caller function's source code body (text)\nfunction getInlineScriptFromCallerSource(callerFnSource, eligibleScripts) {\n  var i, inlineScriptText,\n      script = null,\n      callerSourceText = normalizeWhitespace(callerFnSource);\n\n  eligibleScripts = eligibleScripts || scripts;\n\n  if (callerFnSource && callerSourceText) {\n    for (i = eligibleScripts.length; i--; ) {\n      // Only look at inline scripts\n      if (!eligibleScripts[i].hasAttribute(\"src\")) {\n        inlineScriptText = normalizeWhitespace(eligibleScripts[i].text);\n        if (inlineScriptText.indexOf(callerSourceText) !== -1) {\n          // If more than one match is found, don't return any\n          if (script) {\n            script = null;\n            break;\n          }\n          script = eligibleScripts[i];\n        }\n      }\n    }\n  }\n\n  return script;\n}\n\n// If there is only a single inline script on the page, return it; otherwise `null`\nfunction getSoleInlineScript(eligibleScripts) {\n  var i, len,\n      script = null;\n  eligibleScripts = eligibleScripts || scripts;\n  for (i = 0, len = eligibleScripts.length; i < len; i++) {\n    if (!eligibleScripts[i].hasAttribute(\"src\")) {\n      if (script) {\n        script = null;\n        break;\n      }\n      script = eligibleScripts[i];\n    }\n  }\n  return script;\n}\n\n// Get the currently executing script URL from an Error stack trace\nfunction getScriptUrlFromStack(stack, skipStackDepth) {\n  var matches, remainingStack,\n      url = null,\n      ignoreMessage = typeof skipStackDepth === \"number\";\n  skipStackDepth = ignoreMessage ? Math.round(skipStackDepth) : 0;\n  if (typeof stack === \"string\" && stack) {\n    if (ignoreMessage) {\n      matches = stack.match(/(data:text\\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\\/\\/[\\/]?.+?\\/[^:\\)]*?)(?::\\d+)(?::\\d+)?/);\n    }\n    else {\n      matches = stack.match(/^(?:|[^:@]*@|.+\\)@(?=data:text\\/javascript|blob|http[s]?|file)|.+?\\s+(?: at |@)(?:[^:\\(]+ )*[\\(]?)(data:text\\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\\/\\/[\\/]?.+?\\/[^:\\)]*?)(?::\\d+)(?::\\d+)?/);\n\n      if (!(matches && matches[1])) {\n        matches = stack.match(/\\)@(data:text\\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\\/\\/[\\/]?.+?\\/[^:\\)]*?)(?::\\d+)(?::\\d+)?/);\n      }\n    }\n\n    if (matches && matches[1]) {\n      if (skipStackDepth > 0) {\n        remainingStack = stack.slice(stack.indexOf(matches[0]) + matches[0].length);\n        url = getScriptUrlFromStack(remainingStack, (skipStackDepth - 1));\n      }\n      else {\n        url = matches[1];\n      }\n    }\n\n    // TODO: Handle more edge cases!\n    // Fixes #1\n    // See https://github.com/JamesMGreene/currentExecutingScript/issues/1\n\n    // ???\n\n  }\n  return url;\n}\n\n\n// Get the farthest currently executing (i.e. yes, EXECUTING) `script` DOM\n// element for the caller function, regardless of whether it is that `script`\n// DOM element is currently being evaluated for the first time. The farthest\n// currently executing `script` DOM element would typically be considered the\n// originator of the current execution stack.\nfunction _farthestExecutingScript() {\n  /*jshint noarg:false */\n\n  // TODO: Implement!\n  // Fixes #3\n  // See https://github.com/JamesMGreene/currentExecutingScript/issues/3\n  return null;\n\n/*\n  // Yes, this IS possible, i.e. if a script removes other scripts (or itself)\n  if (scripts.length === 0) {\n    return null;\n  }\n\n  // Guaranteed accurate in IE 6-10.\n  // Not accurate/supported in any other browsers.\n  if (isNotOpera && supportsScriptReadyState) {\n    for (var i = scripts.length; i--; ) {\n      if (scripts[i].readyState === \"interactive\") {\n        return scripts[i];\n      }\n    }\n  }\n\n  var stack,\n      e = new Error();\n  if (hasStackBeforeThrowing) {\n    stack = e.stack;\n  }\n  if (!stack && hasStackAfterThrowing) {\n    try {\n      throw e;\n    }\n    catch (err) {\n      // NOTE: Cannot use `err.sourceURL` or `err.fileName` as they will always be THIS script\n      stack = err.stack;\n    }\n  }\n  if (stack) {\n    var url = getScriptUrlFromStack(stack, skipStackDepth);\n    var script = getScriptFromUrl(url, scripts );\n    if (!script && pageUrl && url === pageUrl) {\n      // Try to find the correct inline script by searching through\n      // inline scripts' text content for the caller function's source\n      // code to be present. If the caller function's source code is\n      // not available, see if there is only one inline script element\n      // in the DOM and return that (even though it may be wrong)\n\n      // TODO: Implement!\n      // Fixes #4 in part\n      // See https://github.com/JamesMGreene/currentExecutingScript/issues/4\n\n      var callerFn = _farthestExecutingScript.caller || null,\n          callerFnStack = [],\n          callerFnSource = null;\n\n      while (callerFn) {\n        callerFnStack.push(callerFn);\n        callerFn = callerFn.caller || null;\n      }\n      callerFn = callerFnStack.slice(-1)[0];\n      callerFnSource = callerFn ? (\"\" + callerFn) : null;\n\n\n      if (callerFnSource) {\n        script = getInlineScriptFromCallerSource(callerFnSource);\n      }\n      else {\n        // NOTE: This is a loose assumption that could be inaccurate!\n        //\n        // Inaccuracies:\n        //  - If the inline script that initiated the call was also removed from the DOM.\n        //  - If the call was initiated by an element's inline event handler,\n        //    e.g. `<a onclick=\"(function() { alert(currentExecutingScript()); }()\">click</a>`\n        script = getSoleInlineScript();\n      }\n    }\n    return script;\n  }\n\n  // NOTE: This is a loose assumption that could be inaccurate!\n  //\n  // Inaccuracies:\n  //  - If a script is created dynamically and appended to some position\n  //    other than the very end of the document.\n  //  - If multiple scripts are created dynamically and all appended to the\n  //    same position within the document (and do not have their `async` attributes\n  //    set to `false`, at least in browsers that support async script evaluation.\n  //    other than the very end of the document.\n  //  - If any scripts are added with the `async` attribute set to `true` in a browser\n  //    that supports it.\n  //  - May get confused by `script` elements within `svg` elements\n  return scripts[scripts.length - 1] || null;\n*/\n}\n\n\n// Get the originating currently executing (i.e. yes, EXECUTING) `script` DOM\n// element or attribute node (e.g. `onclick`) for the caller function,\n// regardless of whether it is that `script` DOM element is currently being\n// evaluated for the first time. The originating currently executing `script`\n// DOM element [or attribute node] is the originator of the current execution stack.\nfunction _originatingExecutingScript() {\n  // TODO: Implement!\n  // Fixes #2\n  // See https://github.com/JamesMGreene/currentExecutingScript/issues/2\n  return null;\n}\n\n// Get the nearest currently executing (i.e. yes, EXECUTING) `script` DOM\n// element for the caller function, regardless of whether it is that `script`\n// DOM element is currently being evaluated for the first time.\nfunction _nearestExecutingScript() {\n  /*jshint noarg:false */\n\n  // Yes, this IS possible, i.e. if a script removes other scripts (or itself)\n  if (scripts.length === 0) {\n    return null;\n  }\n\n  var i, e, stack, url, script,\n      eligibleScripts = [],\n      skipStackDepth = _nearestExecutingScript.skipStackDepth || 1,\n\n      // TODO: Implement!\n      // Fixes #4 in part\n      // See https://github.com/JamesMGreene/currentExecutingScript/issues/4\n      callerFnSource = null;  //(\"\" + (_nearestExecutingScript.caller || \"\")) || null;\n\n  // This part will only help in IE 6-10.\n  for (i = 0; i < scripts.length; i++) {\n    if (isNotOpera && supportsScriptReadyState) {\n      if (scriptReadyRegex.test(scripts[i].readyState)) {\n        eligibleScripts.push(scripts[i]);\n      }\n    }\n    else {\n      eligibleScripts.push(scripts[i]);\n    }\n  }\n\n  e = new Error();\n  if (hasStackBeforeThrowing) {\n    stack = e.stack;\n  }\n  if (!stack && hasStackAfterThrowing) {\n    try {\n      throw e;\n    }\n    catch (err) {\n      // NOTE: Cannot use `err.sourceURL` or `err.fileName` as they will always be THIS script\n      stack = err.stack;\n    }\n  }\n\n  if (stack) {\n    url = getScriptUrlFromStack(stack, skipStackDepth);\n    script = getScriptFromUrl(url, eligibleScripts);\n\n    if (!script && pageUrl && url === pageUrl) {\n      // Try to find the correct inline script by searching through\n      // inline scripts' text content for the caller function's source\n      // code to be present.\n      if (callerFnSource) {\n        script = getInlineScriptFromCallerSource(callerFnSource, eligibleScripts);\n      }\n      // If the caller function's source code is not available, see if\n      // there is only one inline script element in the DOM and return\n      // that (even though it may be wrong)...\n      else {\n        // NOTE: This is a loose assumption that could be inaccurate!\n        //\n        // Inaccuracies:\n        //  - If the inline script that initiated the call was also removed from the DOM.\n        //  - If the call was initiated by an element's inline event handler,\n        //    e.g. `<a onclick=\"(function() { alert(currentExecutingScript()); }()\">click</a>`\n        script = getSoleInlineScript(eligibleScripts);\n      }\n    }\n  }\n\n  //\n  // Welcome to the Island of Inaccurate Assumptions!\n  // NOTE: ALL of the following are loose assumptions that could be inaccurate!\n  //\n\n  if (!script) {\n    // Inaccuracies:\n    //  - If the inline script that initiated the call was also removed from the DOM.\n    //  - If the call was initiated by an element's inline event handler,\n    //    e.g. `<a onclick=\"(function() { alert(currentExecutingScript()); }()\">click</a>`\n    if (eligibleScripts.length === 1) {\n      script = eligibleScripts[0];\n    }\n  }\n\n  if (!script) {\n    // Inaccuracies:\n    //  - If script currently being synchronously evaluated by the parser is the\n    //    originator of this call stack but NOT the source script of the caller/invocation\n    //    e.g.\n    //    ```html\n    //    <script id=\"a\">\n    //    function getCurrentScriptCallerFn() {\n    //      return currentExecutingScript.near();\n    //    }\n    //    </script>\n    //    <script id=\"b\">\n    //    // Should get `script[id=\"a\"]` but will get `script[id=\"b\"]` instead\n    //    getCurrentScriptCallerFn();\n    //    </script>\n    if (hasNativeCurrentScriptAccessor) {\n      script = document.currentScript;\n    }\n  }\n\n  if (!script) {\n    // Inaccuracies:\n    //  - If script currently being synchronously evaluated by the parser is the\n    //    originator of this call stack but NOT the source script of the caller/invocation\n    //    e.g.\n    //    ```html\n    //    <script id=\"a\">\n    //    function getCurrentScriptCallerFn() {\n    //      return currentExecutingScript.near();\n    //    }\n    //    </script>\n    //    <script id=\"b\">\n    //    // Should get `script[id=\"a\"]` but will get `script[id=\"b\"]` instead\n    //    getCurrentScriptCallerFn();\n    //    </script>\n    if (isNotOpera && supportsScriptReadyState) {\n      for (i = eligibleScripts.length; i--; ) {\n        if (eligibleScripts[i].readyState === \"interactive\") {\n          script = eligibleScripts[i];\n          break;\n        }\n      }\n    }\n  }\n\n  if (!script) {\n    // Inaccuracies:\n    //  - If a script is created dynamically and appended to some position\n    //    other than the very end of the document.\n    //  - If multiple scripts are created dynamically and all appended to the\n    //    same position within the document (and do not have their `async` attributes\n    //    set to `false`, at least in browsers that support async script evaluation.\n    //    other than the very end of the document.\n    //  - If any scripts are added with the `async` attribute set to `true` in a browser\n    //    that supports it.\n    //  - May get confused by `script` elements within `svg` elements\n    //  - If script currently being synchronously evaluated by the parser is the\n    //    originator of this call stack but NOT the source script of the caller/invocation\n    //    e.g.\n    //    ```html\n    //    <script id=\"a\">\n    //    function getCurrentScriptCallerFn() {\n    //      return currentExecutingScript.near();\n    //    }\n    //    </script>\n    //    <script id=\"b\">\n    //    // Should get `script[id=\"a\"]` but will get `script[id=\"b\"]` instead\n    //    getCurrentScriptCallerFn();\n    //    </script>\n    //    ```\n    script = eligibleScripts[eligibleScripts.length - 1] || null;\n  }\n\n  return script;\n}\n\n// Default stack depth to skip over when analyzing call stack frames\n_nearestExecutingScript.skipStackDepth = 1;\n\n\n\n    //\n    // Export the API\n    //\n    var currentExecutingScript    = _nearestExecutingScript;      // default\n    currentExecutingScript.near   = _nearestExecutingScript;\n    currentExecutingScript.far    = _farthestExecutingScript;\n    currentExecutingScript.origin = _originatingExecutingScript;\n\n\n    // Just return a value to define the module export.\n    // This example returns an object, but the module\n    // can return a function as the exported value.\n    return currentExecutingScript;\n  })\n);\n\n\n\n// WEBPACK FOOTER //\n// ../current-executing-script/dist/currentExecutingScript.js","const Constants = {\n    LOCAL_JID: 'local'\n};\n\nmodule.exports = Constants;\n\n\n\n// WEBPACK FOOTER //\n// ./service/statistics/constants.js","import Statistics from '../statistics/statistics';\n\nconst logger = require('jitsi-meet-logger').getLogger(__filename);\n\n/**\n * The constant for the name of the focus component.\n * @type {string}\n */\nComponentsVersions.FOCUS_COMPONENT = 'focus';\n\n/**\n * The constant for the name of the videobridge component.\n * @type {string}\n */\nComponentsVersions.VIDEOBRIDGE_COMPONENT = 'videobridge';\n\n/**\n * The constant for the name of the XMPP server component.\n * @type {string}\n */\nComponentsVersions.XMPP_SERVER_COMPONENT = 'xmpp';\n\n/**\n * Creates new instance of <tt>ComponentsVersions</tt> which will be discovering\n * the versions of conferencing system components in given\n * <tt>JitsiConference</tt>.\n * @param conference <tt>JitsiConference</tt> instance which will be used to\n *        listen for focus presence updates.\n * @constructor\n */\nexport default function ComponentsVersions(conference) {\n\n    this.versions = {};\n\n    this.conference = conference;\n    this.conference.addCommandListener(\n        'versions', this.processPresence.bind(this));\n}\n\nComponentsVersions.prototype.processPresence\n    = function(node, mucResource, mucJid) {\n        if (node.attributes.xmlns !== 'http://jitsi.org/jitmeet') {\n            logger.warn('Ignored presence versions node - invalid xmlns', node);\n\n            return;\n        }\n\n        if (!this.conference._isFocus(mucJid)) {\n            logger.warn(\n                `Received versions not from the focus user: ${node}`,\n                mucJid);\n\n            return;\n        }\n\n        const log = [];\n\n        node.children.forEach(item => {\n\n            const componentName = item.attributes.name;\n\n            if (componentName !== ComponentsVersions.FOCUS_COMPONENT\n            && componentName !== ComponentsVersions.XMPP_SERVER_COMPONENT\n            && componentName !== ComponentsVersions.VIDEOBRIDGE_COMPONENT) {\n                logger.warn(\n                    `Received version for not supported component name: ${\n                        componentName}`);\n\n                return;\n            }\n\n            const version = item.value;\n\n            if (this.versions[componentName] !== version) {\n                this.versions[componentName] = version;\n                logger.info(`Got ${componentName} version: ${version}`);\n\n                log.push({\n                    id: 'component_version',\n                    component: componentName,\n                    version\n                });\n            }\n        });\n\n        // logs versions to stats\n        if (log.length > 0) {\n            Statistics.sendLog(JSON.stringify(log));\n        }\n    };\n\n/**\n * Obtains the version of conferencing system component.\n * @param componentName the name of the component for which we want to obtain\n *        the version.\n * @returns {String} which describes the version of the component identified by\n *          given <tt>componentName</tt> or <tt>undefined</tt> if not found.\n */\nComponentsVersions.prototype.getComponentVersion = function(componentName) {\n    return this.versions[componentName];\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/version/ComponentsVersions.js","import * as ConnectionQualityEvents\n    from '../../service/connectivity/ConnectionQualityEvents';\nimport * as ConferenceEvents from '../../JitsiConferenceEvents';\nimport { getLogger } from 'jitsi-meet-logger';\n\nconst XMPPEvents = require('../../service/xmpp/XMPPEvents');\nconst VideoType = require('../../service/RTC/VideoType');\nconst Resolutions = require('../../service/RTC/Resolutions');\n\nconst logger = getLogger(__filename);\n\n/**\n * The value to use for the \"type\" field for messages sent by ConnectionQuality\n * over the data channel.\n */\nconst STATS_MESSAGE_TYPE = 'stats';\n\n/**\n * See media/engine/simulcast.ss from webrtc.org\n */\nconst kSimulcastFormats = [\n    { width: 1920,\n        height: 1080,\n        layers: 3,\n        max: 5000,\n        target: 4000,\n        min: 800 },\n    { width: 1280,\n        height: 720,\n        layers: 3,\n        max: 2500,\n        target: 2500,\n        min: 600 },\n    { width: 960,\n        height: 540,\n        layers: 3,\n        max: 900,\n        target: 900,\n        min: 450 },\n    { width: 640,\n        height: 360,\n        layers: 2,\n        max: 700,\n        target: 500,\n        min: 150 },\n    { width: 480,\n        height: 270,\n        layers: 2,\n        max: 450,\n        target: 350,\n        min: 150 },\n    { width: 320,\n        height: 180,\n        layers: 1,\n        max: 200,\n        target: 150,\n        min: 30 }\n];\n\n/**\n * The maximum bitrate to use as a measurement against the participant's current\n * bitrate. This cap helps in the cases where the participant's bitrate is high\n * but not enough to fulfill high targets, such as with 1080p.\n */\nconst MAX_TARGET_BITRATE = 2500;\n\n/**\n * The initial bitrate for video in kbps.\n */\nlet startBitrate = 800;\n\n/**\n * Gets the expected bitrate (in kbps) in perfect network conditions.\n * @param simulcast {boolean} whether simulcast is enabled or not.\n * @param resolution {Resolution} the resolution.\n * @param millisSinceStart {number} the number of milliseconds since sending\n * video started.\n */\nfunction getTarget(simulcast, resolution, millisSinceStart) {\n    // Completely ignore the bitrate in the first 5 seconds, as the first\n    // event seems to fire very early and the value is suspicious and causes\n    // false positives.\n    if (millisSinceStart < 5000) {\n        return 1;\n    }\n\n    let target = 0;\n    let height = Math.min(resolution.height, resolution.width);\n\n    if (simulcast) {\n        // Find the first format with height no bigger than ours.\n        let simulcastFormat = kSimulcastFormats.find(f => f.height <= height);\n\n        if (simulcastFormat) {\n            // Sum the target fields from all simulcast layers for the given\n            // resolution (e.g. 720p + 360p + 180p).\n            for (height = simulcastFormat.height; height >= 180; height /= 2) {\n                const targetHeight = height;\n\n                simulcastFormat\n                    = kSimulcastFormats.find(f => f.height === targetHeight);\n                if (simulcastFormat) {\n                    target += simulcastFormat.target;\n                } else {\n                    break;\n                }\n            }\n        }\n    } else {\n        // See GetMaxDefaultVideoBitrateKbps in\n        // media/engine/webrtcvideoengine2.cc from webrtc.org\n        const pixels = resolution.width * resolution.height;\n\n        if (pixels <= 320 * 240) {\n            target = 600;\n        } else if (pixels <= 640 * 480) {\n            target = 1700;\n        } else if (pixels <= 960 * 540) {\n            target = 2000;\n        } else {\n            target = 2500;\n        }\n    }\n\n    // Allow for an additional 1 second for ramp up -- delay any initial drop\n    // of connection quality by 1 second.\n    return Math.min(target, rampUp(Math.max(0, millisSinceStart - 1000)));\n}\n\n/**\n * Gets the bitrate to which GCC would have ramped up in perfect network\n * conditions after millisSinceStart milliseconds.\n * @param millisSinceStart {number} the number of milliseconds since sending\n * video was enabled.\n */\nfunction rampUp(millisSinceStart) {\n    if (millisSinceStart > 60000) {\n        return Number.MAX_SAFE_INTEGER;\n    }\n\n    // According to GCC the send side bandwidth estimation grows with at most\n    // 8% per second.\n    // https://tools.ietf.org/html/draft-ietf-rmcat-gcc-02#section-5.5\n    return startBitrate * Math.pow(1.08, millisSinceStart / 1000);\n}\n\n/**\n * A class which monitors the local statistics coming from the RTC modules, and\n * calculates a \"connection quality\" value, in percent, for the media\n * connection. A value of 100% indicates a very good network connection, and a\n * value of 0% indicates a poor connection.\n */\nexport default class ConnectionQuality {\n    /**\n     *\n     * @param conference\n     * @param eventEmitter\n     * @param options\n     */\n    constructor(conference, eventEmitter, options) {\n        this.eventEmitter = eventEmitter;\n\n        /**\n         * The owning JitsiConference.\n         */\n        this._conference = conference;\n\n        /**\n         * Holds statistics about the local connection quality.\n         */\n        this._localStats = {\n            connectionQuality: 100,\n            jvbRTT: undefined\n        };\n\n        /**\n         * The time this._localStats.connectionQuality was last updated.\n         */\n        this._lastConnectionQualityUpdate = -1;\n\n        /**\n         * Maps a participant ID to an object holding connection quality\n         * statistics received from this participant.\n         */\n        this._remoteStats = {};\n\n        /**\n         * The time that the ICE state last changed to CONNECTED. We use this\n         * to calculate how much time we as a sender have had to ramp-up.\n         */\n        this._timeIceConnected = -1;\n\n        /**\n         * The time that local video was unmuted. We use this to calculate how\n         * much time we as a sender have had to ramp-up.\n         */\n        this._timeVideoUnmuted = -1;\n\n\n        // We assume a global startBitrate value for the sake of simplicity.\n        if (options.startBitrate && options.startBitrate > 0) {\n            startBitrate = options.startBitrate;\n        }\n\n        // TODO: consider ignoring these events and letting the user of\n        // lib-jitsi-meet handle these separately.\n        conference.on(\n            ConferenceEvents.CONNECTION_INTERRUPTED,\n            () => {\n                this._updateLocalConnectionQuality(0);\n                this.eventEmitter.emit(\n                    ConnectionQualityEvents.LOCAL_STATS_UPDATED,\n                    this._localStats);\n                this._broadcastLocalStats();\n            });\n\n        conference.room.addListener(\n            XMPPEvents.ICE_CONNECTION_STATE_CHANGED,\n            (jingleSession, newState) => {\n                if (!jingleSession.isP2P && newState === 'connected') {\n                    this._timeIceConnected = window.performance.now();\n                }\n            });\n\n        // Listen to DataChannel message from other participants in the\n        // conference, and update the _remoteStats field accordingly.\n        conference.on(\n            ConferenceEvents.ENDPOINT_MESSAGE_RECEIVED,\n            (participant, payload) => {\n                if (payload.type === STATS_MESSAGE_TYPE) {\n                    this._updateRemoteStats(\n                        participant.getId(), payload.values);\n                }\n            });\n\n        // Listen to local statistics events originating from the RTC module\n        // and update the _localStats field.\n        // Oh, and by the way, the resolutions of all remote participants are\n        // also piggy-backed in these \"local\" statistics. It's obvious, really,\n        // if one carefully reads the *code* (but not the docs) in\n        // UI/VideoLayout/VideoLayout.js#updateLocalConnectionStats in\n        // jitsi-meet\n        // TODO: We should keep track of the remote resolution in _remoteStats,\n        // and notify about changes via separate events.\n        conference.statistics.addConnectionStatsListener(\n            this._updateLocalStats.bind(this));\n\n        // Save the last time we were unmuted.\n        conference.on(\n            ConferenceEvents.TRACK_MUTE_CHANGED,\n            track => {\n                if (track.isVideoTrack()) {\n                    if (track.isMuted()) {\n                        this._timeVideoUnmuted = -1;\n                    } else {\n                        this._maybeUpdateUnmuteTime();\n                    }\n                }\n            });\n        conference.on(\n            ConferenceEvents.TRACK_ADDED,\n            track => {\n                if (track.isVideoTrack() && !track.isMuted()) {\n                    this._maybeUpdateUnmuteTime();\n                }\n            });\n    }\n\n    /**\n     * Sets _timeVideoUnmuted if it was previously unset. If it was already set,\n     * doesn't change it.\n     */\n    _maybeUpdateUnmuteTime() {\n        if (this._timeVideoUnmuted < 0) {\n            this._timeVideoUnmuted = window.performance.now();\n        }\n    }\n\n    /**\n     * Calculates a new \"connection quality\" value.\n     * @param videoType {VideoType} the type of the video source (camera or\n     * a screen capture).\n     * @param isMuted {boolean} whether the local video is muted.\n     * @param resolutionName {Resolution} the input resolution used by the\n     * camera.\n     * @returns {*} the newly calculated connection quality.\n     */\n    _calculateConnectionQuality(videoType, isMuted, resolutionName) {\n\n        // resolutionName is an index into Resolutions (where \"720\" is\n        // \"1280x720\" and \"960\" is \"960x720\" ...).\n        const resolution = Resolutions[resolutionName];\n\n        let quality = 100;\n        let packetLoss;\n\n        // TODO: take into account packet loss for received streams\n\n        if (this._localStats.packetLoss) {\n            packetLoss = this._localStats.packetLoss.upload;\n\n            // Ugly Hack Alert (UHA):\n            // The packet loss for the upload direction is calculated based on\n            // incoming RTCP Receiver Reports. Since we don't have RTCP\n            // termination for audio, these reports come from the actual\n            // receivers in the conference and therefore the reported packet\n            // loss includes loss from the bridge to the receiver.\n            // When we are sending video this effect is small, because the\n            // number of video packets is much larger than the number of audio\n            // packets (and our calculation is based on the total number of\n            // received and lost packets).\n            // When video is muted, however, the effect might be significant,\n            // but we don't know what it is. We do know that it is positive, so\n            // as a temporary solution, until RTCP termination is implemented\n            // for the audio streams, we relax the packet loss checks here.\n            if (isMuted) {\n                packetLoss *= 0.5;\n            }\n        }\n\n        if (isMuted || !resolution || videoType === VideoType.DESKTOP\n            || this._timeIceConnected < 0\n            || this._timeVideoUnmuted < 0) {\n\n            // Calculate a value based on packet loss only.\n            if (packetLoss === undefined) {\n                logger.error('Cannot calculate connection quality, unknown '\n                    + 'packet loss.');\n                quality = 100;\n            } else if (packetLoss <= 2) {\n                quality = 100; // Full 5 bars.\n            } else if (packetLoss <= 4) {\n                quality = 70; // 4 bars\n            } else if (packetLoss <= 6) {\n                quality = 50; // 3 bars\n            } else if (packetLoss <= 8) {\n                quality = 30; // 2 bars\n            } else if (packetLoss <= 12) {\n                quality = 10; // 1 bars\n            } else {\n                quality = 0; // Still 1 bar, but slower climb-up.\n            }\n        } else {\n            // Calculate a value based on the sending bitrate.\n\n            // time since sending of video was enabled.\n            const millisSinceStart = window.performance.now()\n                    - Math.max(this._timeVideoUnmuted, this._timeIceConnected);\n\n            // Figure out if simulcast is in use\n            const activeTPC = this._conference.getActivePeerConnection();\n            const isSimulcastOn\n                = Boolean(activeTPC && activeTPC.isSimulcastOn());\n\n            // expected sending bitrate in perfect conditions\n            let target\n                = getTarget(isSimulcastOn, resolution, millisSinceStart);\n\n            target = Math.min(0.9 * target, MAX_TARGET_BITRATE);\n\n            quality = 100 * this._localStats.bitrate.upload / target;\n\n            // Whatever the bitrate, drop early if there is significant loss\n            if (packetLoss && packetLoss >= 10) {\n                quality = Math.min(quality, 30);\n            }\n        }\n\n        // Make sure that the quality doesn't climb quickly\n        if (this._lastConnectionQualityUpdate > 0) {\n            const maxIncreasePerSecond = 2;\n            const prevConnectionQuality = this._localStats.connectionQuality;\n            const diffSeconds\n                = (window.performance.now() - this._lastConnectionQualityUpdate)\n                    / 1000;\n\n            quality\n                = Math.min(\n                    quality,\n                    prevConnectionQuality\n                        + (diffSeconds * maxIncreasePerSecond));\n        }\n\n        return Math.min(100, quality);\n    }\n\n    /**\n     * Updates the localConnectionQuality value\n     * @param values {number} the new value. Should be in [0, 100].\n     */\n    _updateLocalConnectionQuality(value) {\n        this._localStats.connectionQuality = value;\n        this._lastConnectionQualityUpdate = window.performance.now();\n    }\n\n    /**\n     * Broadcasts the local statistics to all other participants in the\n     * conference.\n     */\n    _broadcastLocalStats() {\n        // Send only the data that remote participants care about.\n        const data = {\n            bitrate: this._localStats.bitrate,\n            packetLoss: this._localStats.packetLoss,\n            connectionQuality: this._localStats.connectionQuality,\n            jvbRTT: this._localStats.jvbRTT\n        };\n\n        try {\n            this._conference.broadcastEndpointMessage({\n                type: STATS_MESSAGE_TYPE,\n                values: data });\n        } catch (e) {\n            // We often hit this in the beginning of a call, before the data\n            // channel is ready. It is not a big problem, because we will\n            // send the statistics again after a few seconds, and the error is\n            // already logged elsewhere. So just ignore it.\n\n            // let errorMsg = \"Failed to broadcast local stats\";\n            // logger.error(errorMsg, e);\n            // GlobalOnErrorHandler.callErrorHandler(\n            //    new Error(errorMsg + \": \" + e));\n        }\n    }\n\n    /**\n     * Updates the local statistics\n     * @param {TraceablePeerConnection} tpc the peerconnection which emitted\n     * the stats\n     * @param data new statistics\n     */\n    _updateLocalStats(tpc, data) {\n        // Update jvbRTT\n        if (!tpc.isP2P) {\n            const jvbRTT\n                = data.transport\n                    && data.transport.length && data.transport[0].rtt;\n\n            this._localStats.jvbRTT = jvbRTT ? jvbRTT : undefined;\n        }\n\n        // Do not continue with processing of other stats if they do not\n        // originate from the active peerconnection\n        if (tpc !== this._conference.getActivePeerConnection()) {\n            return;\n        }\n\n        let key;\n        const updateLocalConnectionQuality\n            = !this._conference.isConnectionInterrupted();\n        const localVideoTrack\n            = this._conference.getLocalVideoTrack();\n        const videoType\n            = localVideoTrack ? localVideoTrack.videoType : undefined;\n        const isMuted = localVideoTrack ? localVideoTrack.isMuted() : true;\n        const resolution = localVideoTrack ? localVideoTrack.resolution : null;\n\n        if (!isMuted) {\n            this._maybeUpdateUnmuteTime();\n        }\n\n        // Copy the fields already in 'data'.\n        for (key in data) {\n            if (data.hasOwnProperty(key)) {\n                this._localStats[key] = data[key];\n            }\n        }\n\n        // And re-calculate the connectionQuality field.\n        if (updateLocalConnectionQuality) {\n            this._updateLocalConnectionQuality(\n                this._calculateConnectionQuality(\n                    videoType,\n                    isMuted,\n                    resolution));\n        }\n\n        this.eventEmitter.emit(\n            ConnectionQualityEvents.LOCAL_STATS_UPDATED,\n            this._localStats);\n        this._broadcastLocalStats();\n    }\n\n    /**\n     * Updates remote statistics\n     * @param id the id of the remote participant\n     * @param data the statistics received\n     */\n    _updateRemoteStats(id, data) {\n        // Use only the fields we need\n        this._remoteStats[id] = {\n            bitrate: data.bitrate,\n            packetLoss: data.packetLoss,\n            connectionQuality: data.connectionQuality,\n            jvbRTT: data.jvbRTT\n        };\n\n        this.eventEmitter.emit(\n            ConnectionQualityEvents.REMOTE_STATS_UPDATED,\n            id,\n            this._remoteStats[id]);\n    }\n\n    /**\n     * Returns the local statistics.\n     * Exported only for use in jitsi-meet-torture.\n     */\n    getStats() {\n        return this._localStats;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/connectivity/ConnectionQuality.js","import {\n    CONNECTION_DISCONNECTED,\n    CONNECTION_ESTABLISHED,\n    CONNECTION_FAILED\n} from './JitsiConnectionEvents';\nimport XMPP from './modules/xmpp/xmpp';\n\n/**\n * @typedef {Object} UpgradeRoleError\n *\n * @property {JitsiConnectionErrors} [connectionError] - One of\n * {@link JitsiConnectionErrors} which occurred when trying to connect to the\n * XMPP server.\n * @property {String} [authenticationError] - One of XMPP error conditions\n * returned by Jicofo on authentication attempt. See\n * {@link https://xmpp.org/rfcs/rfc3920.html#streams-error}.\n * @property {String} [message] - More details about the error.\n * @property {Object} [credentials] - The credentials that failed the\n * authentication.\n * @property {String} [credentials.jid] - The XMPP ID part of the credentials\n * that failed the authentication.\n * @property {string} [credentials.password] - The password part of the\n * credentials that failed the authentication.\n *\n * NOTE If neither one of the errors is present, then the operation has been\n * canceled.\n */\n\n/* eslint-disable no-invalid-this */\n\n/**\n * Connects to the XMPP server using the specified credentials and contacts\n * Jicofo in order to obtain a session ID (which is then stored in the local\n * storage). The user's role of the parent conference will be upgraded to\n * moderator (by Jicofo). It's also used to join the conference when starting\n * from anonymous domain and only authenticated users are allowed to create new\n * rooms.\n *\n * @param {Object} options\n * @param {string} options.id - XMPP user's ID to log in. For example,\n * user@xmpp-server.com.\n * @param {string} options.password - XMPP user's password to log in with.\n * @param {string} [options.roomPassword] - The password to join the MUC with.\n * @param {Function} [options.onLoginSuccessful] - Callback called when logging\n * into the XMPP server was successful. The next step will be to obtain a new\n * session ID from Jicofo and join the MUC using it which will effectively\n * upgrade the user's role to moderator.\n * @returns {Object} A <tt>thenable</tt> which (1) settles when the process of\n * authenticating and upgrading the role of the specified XMPP user finishes and\n * (2) has a <tt>cancel</tt> method that allows the caller to interrupt the\n * process. If the process finishes successfully, the session ID has been stored\n * in the settings and the <tt>thenable</tt> is resolved. If the process\n * finishes with failure, the <tt>thenable</tt> is rejected with reason of type\n * {@link UpgradeRoleError} which will have either <tt>connectionError</tt> or\n * <tt>authenticationError</tt> property set depending on which of the steps has\n * failed. If <tt>cancel</tt> is called before the process finishes, then the\n * thenable will be rejected with an empty object (i.e. no error property will\n * be set on the rejection reason).\n */\nexport default function authenticateAndUpgradeRole({\n    // 1. Log the specified XMPP user in.\n    id,\n    password,\n\n    // 2. Let the API client/consumer know as soon as the XMPP user has been\n    //    successfully logged in.\n    onLoginSuccessful,\n\n    // 3. Join the MUC.\n    roomPassword\n}) {\n    let canceled = false;\n    let rejectPromise;\n    let xmpp = new XMPP(this.connection.options);\n\n    const process = new Promise((resolve, reject) => {\n        // The process is represented by a Thenable with a cancel method. The\n        // Thenable is implemented using Promise and the cancel using the\n        // Promise's reject function.\n        rejectPromise = reject;\n\n\n        xmpp.addListener(\n            CONNECTION_DISCONNECTED,\n            () => {\n                xmpp = undefined;\n            });\n        xmpp.addListener(\n            CONNECTION_ESTABLISHED,\n            () => {\n                if (canceled) {\n                    return;\n                }\n\n                // Let the caller know that the XMPP login was successful.\n                onLoginSuccessful && onLoginSuccessful();\n\n                // Now authenticate with Jicofo and get a new session ID.\n                const room\n                    = xmpp.createRoom(this.options.name, this.options.config);\n\n                room.moderator.authenticate()\n                    .then(() => {\n                        xmpp && xmpp.disconnect();\n\n                        if (canceled) {\n                            return;\n                        }\n\n                        // At this point we should have the new session ID\n                        // stored in the settings. Jicofo will allow to join the\n                        // room.\n                        this.join(roomPassword);\n\n                        resolve();\n                    })\n                    .catch(({ error, message }) => {\n                        xmpp.disconnect();\n\n                        reject({\n                            authenticationError: error,\n                            message\n                        });\n                    });\n            });\n        xmpp.addListener(\n            CONNECTION_FAILED,\n            (connectionError, message, credentials) => {\n                reject({\n                    connectionError,\n                    credentials,\n                    message\n                });\n                xmpp = undefined;\n            });\n\n        canceled || xmpp.connect(id, password);\n    });\n\n    /**\n     * Cancels the process, if it's in progress, of authenticating and upgrading\n     * the role of the local participant/user.\n     *\n     * @public\n     * @returns {void}\n     */\n    process.cancel = () => {\n        canceled = true;\n        rejectPromise({});\n        xmpp && xmpp.disconnect();\n    };\n\n    return process;\n}\n\n/* eslint-enable no-invalid-this */\n\n\n\n// WEBPACK FOOTER //\n// ./authenticateAndUpgradeRole.js","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(require('strophe.js')) :\n\ttypeof define === 'function' && define.amd ? define(['strophe.js'], factory) :\n\t(factory(global.window));\n}(this, (function (strophe_js) { 'use strict';\n\nstrophe_js.Strophe.addConnectionPlugin('disco',\n{\n    _connection: null,\n    _identities : [],\n    _features : [],\n    _items : [],\n    /** Function: init\n     * Plugin init\n     *\n     * Parameters:\n     *   (Strophe.Connection) conn - Strophe connection\n     */\n    init: function(conn)\n    {\n    this._connection = conn;\n        this._identities = [];\n        this._features   = [];\n        this._items      = [];\n        // disco info\n        conn.addHandler(this._onDiscoInfo.bind(this), strophe_js.Strophe.NS.DISCO_INFO, 'iq', 'get', null, null);\n        // disco items\n        conn.addHandler(this._onDiscoItems.bind(this), strophe_js.Strophe.NS.DISCO_ITEMS, 'iq', 'get', null, null);\n    },\n    /** Function: addIdentity\n     * See http://xmpp.org/registrar/disco-categories.html\n     * Parameters:\n     *   (String) category - category of identity (like client, automation, etc ...)\n     *   (String) type - type of identity (like pc, web, bot , etc ...)\n     *   (String) name - name of identity in natural language\n     *   (String) lang - lang of name parameter\n     *\n     * Returns:\n     *   Boolean\n     */\n    addIdentity: function(category, type, name, lang)\n    {\n        for (var i=0; i<this._identities.length; i++)\n        {\n            if (this._identities[i].category == category &&\n                this._identities[i].type == type &&\n                this._identities[i].name == name &&\n                this._identities[i].lang == lang)\n            {\n                return false;\n            }\n        }\n        this._identities.push({category: category, type: type, name: name, lang: lang});\n        return true;\n    },\n    /** Function: addFeature\n     *\n     * Parameters:\n     *   (String) var_name - feature name (like jabber:iq:version)\n     *\n     * Returns:\n     *   boolean\n     */\n    addFeature: function(var_name)\n    {\n        for (var i=0; i<this._features.length; i++)\n        {\n             if (this._features[i] == var_name)\n                 return false;\n        }\n        this._features.push(var_name);\n        return true;\n    },\n    /** Function: removeFeature\n     *\n     * Parameters:\n     *   (String) var_name - feature name (like jabber:iq:version)\n     *\n     * Returns:\n     *   boolean\n     */\n    removeFeature: function(var_name)\n    {\n        for (var i=0; i<this._features.length; i++)\n        {\n             if (this._features[i] === var_name){\n                 this._features.splice(i,1);\n                 return true;\n             }\n        }\n        return false;\n    },\n    /** Function: addItem\n     *\n     * Parameters:\n     *   (String) jid\n     *   (String) name\n     *   (String) node\n     *   (Function) call_back\n     *\n     * Returns:\n     *   boolean\n     */\n    addItem: function(jid, name, node, call_back)\n    {\n        if (node && !call_back)\n            return false;\n        this._items.push({jid: jid, name: name, node: node, call_back: call_back});\n        return true;\n    },\n    /** Function: info\n     * Info query\n     *\n     * Parameters:\n     *   (Function) call_back\n     *   (String) jid\n     *   (String) node\n     */\n    info: function(jid, node, success, error, timeout)\n    {\n        var attrs = {xmlns: strophe_js.Strophe.NS.DISCO_INFO};\n        if (node)\n            attrs.node = node;\n\n        var info = strophe_js.$iq({from:this._connection.jid,\n                         to:jid, type:'get'}).c('query', attrs);\n        this._connection.sendIQ(info, success, error, timeout);\n    },\n    /** Function: items\n     * Items query\n     *\n     * Parameters:\n     *   (Function) call_back\n     *   (String) jid\n     *   (String) node\n     */\n    items: function(jid, node, success, error, timeout)\n    {\n        var attrs = {xmlns: strophe_js.Strophe.NS.DISCO_ITEMS};\n        if (node)\n            attrs.node = node;\n\n        var items = strophe_js.$iq({from:this._connection.jid,\n                         to:jid, type:'get'}).c('query', attrs);\n        this._connection.sendIQ(items, success, error, timeout);\n    },\n\n    /** PrivateFunction: _buildIQResult\n     */\n    _buildIQResult: function(stanza, query_attrs)\n    {\n        var id   =  stanza.getAttribute('id');\n        var from = stanza.getAttribute('from');\n        var iqresult = strophe_js.$iq({type: 'result', id: id});\n\n        if (from !== null) {\n            iqresult.attrs({to: from});\n        }\n\n        return iqresult.c('query', query_attrs);\n    },\n\n    /** PrivateFunction: _onDiscoInfo\n     * Called when receive info request\n     */\n    _onDiscoInfo: function(stanza)\n    {\n        var node = stanza.getElementsByTagName('query')[0].getAttribute('node');\n        var attrs = {xmlns: strophe_js.Strophe.NS.DISCO_INFO};\n        var i;\n        if (node)\n        {\n            attrs.node = node;\n        }\n        var iqresult = this._buildIQResult(stanza, attrs);\n        for (i=0; i<this._identities.length; i++)\n        {\n            attrs = {category: this._identities[i].category,\n                         type    : this._identities[i].type};\n            if (this._identities[i].name)\n                attrs.name = this._identities[i].name;\n            if (this._identities[i].lang)\n                attrs['xml:lang'] = this._identities[i].lang;\n            iqresult.c('identity', attrs).up();\n        }\n        for (i=0; i<this._features.length; i++)\n        {\n            iqresult.c('feature', {'var':this._features[i]}).up();\n        }\n        this._connection.send(iqresult.tree());\n        return true;\n    },\n    /** PrivateFunction: _onDiscoItems\n     * Called when receive items request\n     */\n    _onDiscoItems: function(stanza)\n    {\n        var query_attrs = {xmlns: strophe_js.Strophe.NS.DISCO_ITEMS};\n        var node = stanza.getElementsByTagName('query')[0].getAttribute('node');\n        var items, i;\n        if (node)\n        {\n            query_attrs.node = node;\n            items = [];\n            for (i = 0; i < this._items.length; i++)\n            {\n                if (this._items[i].node == node)\n                {\n                    items = this._items[i].call_back(stanza);\n                    break;\n                }\n            }\n        }\n        else\n        {\n            items = this._items;\n        }\n        var iqresult = this._buildIQResult(stanza, query_attrs);\n        for (i = 0; i < items.length; i++)\n        {\n            var attrs = {jid:  items[i].jid};\n            if (items[i].name)\n                attrs.name = items[i].name;\n            if (items[i].node)\n                attrs.node = items[i].node;\n            iqresult.c('item', attrs).up();\n        }\n        this._connection.send(iqresult.tree());\n        return true;\n    }\n});\n\n})));\n//# sourceMappingURL=strophe.disco.js.map\n\n\n\n// WEBPACK FOOTER //\n// ../strophejs-plugin-disco/lib/strophe.disco.js","/* global $ */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport { Strophe } from 'strophe.js';\n\nimport ChatRoom from './ChatRoom';\nimport { ConnectionPluginListenable } from './ConnectionPlugin';\nimport XMPPEvents from '../../service/xmpp/XMPPEvents';\n\nconst logger = getLogger(__filename);\n\n/**\n * MUC connection plugin.\n */\nclass MucConnectionPlugin extends ConnectionPluginListenable {\n    /**\n     *\n     * @param xmpp\n     */\n    constructor(xmpp) {\n        super();\n        this.xmpp = xmpp;\n        this.rooms = {};\n    }\n\n    /**\n     *\n     * @param connection\n     */\n    init(connection) {\n        super.init(connection);\n\n        // add handlers (just once)\n        this.connection.addHandler(this.onPresence.bind(this), null,\n            'presence', null, null, null, null);\n        this.connection.addHandler(this.onPresenceUnavailable.bind(this),\n            null, 'presence', 'unavailable', null);\n        this.connection.addHandler(this.onPresenceError.bind(this), null,\n            'presence', 'error', null);\n        this.connection.addHandler(this.onMessage.bind(this), null,\n            'message', null, null);\n        this.connection.addHandler(this.onMute.bind(this),\n            'http://jitsi.org/jitmeet/audio', 'iq', 'set', null, null);\n    }\n\n    /**\n     *\n     * @param jid\n     * @param password\n     * @param options\n     */\n    createRoom(jid, password, options) {\n        const roomJid = Strophe.getBareJidFromJid(jid);\n\n        if (this.rooms[roomJid]) {\n            const errmsg = 'You are already in the room!';\n\n            logger.error(errmsg);\n            throw new Error(errmsg);\n        }\n        this.rooms[roomJid] = new ChatRoom(this.connection, jid,\n            password, this.xmpp, options);\n        this.eventEmitter.emit(\n            XMPPEvents.EMUC_ROOM_ADDED, this.rooms[roomJid]);\n\n        return this.rooms[roomJid];\n    }\n\n    /**\n     *\n     * @param jid\n     */\n    doLeave(jid) {\n        this.eventEmitter.emit(\n            XMPPEvents.EMUC_ROOM_REMOVED, this.rooms[jid]);\n        delete this.rooms[jid];\n    }\n\n    /**\n     *\n     * @param pres\n     */\n    onPresence(pres) {\n        const from = pres.getAttribute('from');\n\n        // What is this for? A workaround for something?\n        if (pres.getAttribute('type')) {\n            return true;\n        }\n\n        const room = this.rooms[Strophe.getBareJidFromJid(from)];\n\n        if (!room) {\n            return;\n        }\n\n        // Parse status.\n        if ($(pres).find('>x[xmlns=\"http://jabber.org/protocol/muc#user\"]'\n            + '>status[code=\"201\"]').length) {\n            room.createNonAnonymousRoom();\n        }\n\n        room.onPresence(pres);\n\n        return true;\n    }\n\n    /**\n     *\n     * @param pres\n     */\n    onPresenceUnavailable(pres) {\n        const from = pres.getAttribute('from');\n        const room = this.rooms[Strophe.getBareJidFromJid(from)];\n\n        if (!room) {\n            return;\n        }\n\n        room.onPresenceUnavailable(pres, from);\n\n        return true;\n    }\n\n    /**\n     *\n     * @param pres\n     */\n    onPresenceError(pres) {\n        const from = pres.getAttribute('from');\n        const room = this.rooms[Strophe.getBareJidFromJid(from)];\n\n        if (!room) {\n            return;\n        }\n\n        room.onPresenceError(pres, from);\n\n        return true;\n    }\n\n    /**\n     *\n     * @param msg\n     */\n    onMessage(msg) {\n        // FIXME: this is a hack. but jingle on muc makes nickchanges hard\n        const from = msg.getAttribute('from');\n        const room = this.rooms[Strophe.getBareJidFromJid(from)];\n\n        if (!room) {\n            return;\n        }\n\n        room.onMessage(msg, from);\n\n        return true;\n    }\n\n    /**\n     * TODO: Document\n     * @param iq\n     */\n    onMute(iq) {\n        const from = iq.getAttribute('from');\n        const room = this.rooms[Strophe.getBareJidFromJid(from)];\n\n        // XXX What are the semantics of the return value? Why is it sometimes\n        // undefined and sometimes a boolean?\n        if (!room) {\n            return;\n        }\n\n        room.onMute(iq);\n\n        return true;\n    }\n}\n\n/**\n *\n * @param XMPP\n */\nexport default function(XMPP) {\n    Strophe.addConnectionPlugin('emuc', new MucConnectionPlugin(XMPP));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/strophe.emuc.js","/* global $, __filename */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport { $iq, $msg, $pres, Strophe } from 'strophe.js';\n\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\nimport * as JitsiTranscriptionStatus from '../../JitsiTranscriptionStatus';\nimport Listenable from '../util/Listenable';\nimport Settings from '../settings/Settings';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport XMPPEvents from '../../service/xmpp/XMPPEvents';\n\nimport Moderator from './moderator';\nimport Recorder from './recording';\n\nconst logger = getLogger(__filename);\n\nconst parser = {\n    packet2JSON(packet, nodes) {\n        const self = this;\n\n        // eslint-disable-next-line newline-per-chained-call\n        $(packet).children().each(function() {\n            // eslint-disable-next-line no-invalid-this\n            const tagName = $(this).prop('tagName');\n            const node = {\n                tagName\n            };\n\n            node.attributes = {};\n\n            // eslint-disable-next-line no-invalid-this\n            $($(this)[0].attributes).each((index, attr) => {\n                node.attributes[attr.name] = attr.value;\n            });\n\n            // eslint-disable-next-line no-invalid-this\n            const text = Strophe.getText($(this)[0]);\n\n            if (text) {\n                node.value = text;\n            }\n            node.children = [];\n            nodes.push(node);\n\n            // eslint-disable-next-line no-invalid-this\n            self.packet2JSON($(this), node.children);\n        });\n    },\n    json2packet(nodes, packet) {\n        for (let i = 0; i < nodes.length; i++) {\n            const node = nodes[i];\n\n            if (node) {\n                packet.c(node.tagName, node.attributes);\n                if (node.value) {\n                    packet.t(node.value);\n                }\n                if (node.children) {\n                    this.json2packet(node.children, packet);\n                }\n                packet.up();\n            }\n        }\n\n        // packet.up();\n    }\n};\n\n/**\n * Returns array of JS objects from the presence JSON associated with the passed\n / nodeName\n * @param pres the presence JSON\n * @param nodeName the name of the node (videomuted, audiomuted, etc)\n */\nfunction filterNodeFromPresenceJSON(pres, nodeName) {\n    const res = [];\n\n    for (let i = 0; i < pres.length; i++) {\n        if (pres[i].tagName === nodeName) {\n            res.push(pres[i]);\n        }\n    }\n\n    return res;\n}\n\n/**\n * Constants used to verify if a given JSON message via the MUC should be\n * considered as a ENDPOINT_MESSAGE\n */\nconst VALID_FIELD_NAMES = [ 'jitsi-meet-muc-msg-topic', 'payload' ];\n\n/**\n * Check if the given argument is a valid JSON ENDPOINT_MESSAGE string by\n * parsing it and checking if it has a field called 'jitsi-meet-muc-msg-topic'\n * and a field called 'payload'\n *\n * @param {string} jsonString check if this string is a valid json string\n * and contains the special structure\n * @returns {boolean, object} if given object is a valid JSON string, return\n * the json object. Otherwise, return false;\n */\nfunction tryParseJSONAndVerify(jsonString) {\n    try {\n        const json = JSON.parse(jsonString);\n\n        // Handle non-exception-throwing cases:\n        // Neither JSON.parse(false) or JSON.parse(1234) throw errors,\n        // hence the type-checking,\n        // but... JSON.parse(null) returns null, and\n        // typeof null === \"object\",\n        // so we must check for that, too.\n        // Thankfully, null is falsey, so this suffices:\n        if (json && typeof json === 'object') {\n            const topic = json[VALID_FIELD_NAMES[0]];\n            const payload = json[VALID_FIELD_NAMES[1]];\n\n            if ((typeof topic === 'string' || topic instanceof String)\n                && payload) {\n\n                return json;\n            }\n\n            logger.debug('parsing valid json but does not have correct '\n                + 'structure', 'topic: ', topic, 'payload: ', payload);\n        }\n    } catch (e) {\n\n        return false;\n    }\n\n    return false;\n}\n\n// XXX As ChatRoom constructs XMPP stanzas and Strophe is build around the idea\n// of chaining function calls, allow long function call chains.\n/* eslint-disable newline-per-chained-call */\n\n/**\n *\n */\nexport default class ChatRoom extends Listenable {\n\n    /* eslint-disable max-params */\n\n    /**\n     *\n     * @param connection\n     * @param jid\n     * @param password\n     * @param XMPP\n     * @param options\n     */\n    constructor(connection, jid, password, XMPP, options) {\n        super();\n        this.xmpp = XMPP;\n        this.connection = connection;\n        this.roomjid = Strophe.getBareJidFromJid(jid);\n        this.myroomjid = jid;\n        this.password = password;\n        logger.info(`Joined MUC as ${this.myroomjid}`);\n        this.members = {};\n        this.presMap = {};\n        this.presHandlers = {};\n        this.joined = false;\n        this.role = null;\n        this.focusMucJid = null;\n        this.noBridgeAvailable = false;\n        this.options = options || {};\n        this.moderator\n            = new Moderator(this.roomjid, this.xmpp, this.eventEmitter, {\n                connection: this.xmpp.options,\n                conference: this.options\n            });\n        this.initPresenceMap(options);\n        this.lastPresences = {};\n        this.phoneNumber = null;\n        this.phonePin = null;\n        this.connectionTimes = {};\n        this.participantPropertyListener = null;\n\n        this.locked = false;\n        this.transcriptionStatus = JitsiTranscriptionStatus.OFF;\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     *\n     */\n    initPresenceMap(options = {}) {\n        this.presMap.to = this.myroomjid;\n        this.presMap.xns = 'http://jabber.org/protocol/muc';\n        this.presMap.nodes = [];\n        this.presMap.nodes.push({\n            'tagName': 'user-agent',\n            'value': navigator.userAgent,\n            'attributes': { xmlns: 'http://jitsi.org/jitmeet/user-agent' }\n        });\n\n        if (options.enableStatsID) {\n            this.presMap.nodes.push({\n                'tagName': 'stats-id',\n                'value': Settings.callStatsUserName\n            });\n        }\n\n        // We need to broadcast 'videomuted' status from the beginning, cause\n        // Jicofo makes decisions based on that. Initialize it with 'false'\n        // here.\n        this.addVideoInfoToPresence(false);\n\n        if (options.deploymentInfo && options.deploymentInfo.userRegion) {\n            this.presMap.nodes.push({\n                'tagName': 'region',\n                'attributes': {\n                    id: options.deploymentInfo.userRegion,\n                    xmlns: 'http://jitsi.org/jitsi-meet'\n                }\n            });\n        }\n    }\n\n    /**\n     *\n     * @param devices\n     */\n    updateDeviceAvailability(devices) {\n        this.presMap.nodes.push({\n            'tagName': 'devices',\n            'children': [\n                {\n                    'tagName': 'audio',\n                    'value': devices.audio\n                },\n                {\n                    'tagName': 'video',\n                    'value': devices.video\n                }\n            ]\n        });\n    }\n\n    /**\n     *\n     * @param password\n     */\n    join(password) {\n        this.password = password;\n        this.moderator.allocateConferenceFocus(() => this.sendPresence(true));\n    }\n\n    /**\n     *\n     * @param fromJoin\n     */\n    sendPresence(fromJoin) {\n        const to = this.presMap.to;\n\n        if (!to || (!this.joined && !fromJoin)) {\n            // Too early to send presence - not initialized\n            return;\n        }\n\n        const pres = $pres({ to });\n\n        // xep-0045 defines: \"including in the initial presence stanza an empty\n        // <x/> element qualified by the 'http://jabber.org/protocol/muc'\n        // namespace\" and subsequent presences should not include that or it can\n        // be considered as joining, and server can send us the message history\n        // for the room on every presence\n        if (fromJoin) {\n            pres.c('x', { xmlns: this.presMap.xns });\n\n            if (this.password) {\n                pres.c('password').t(this.password).up();\n            }\n            pres.up();\n        }\n\n        parser.json2packet(this.presMap.nodes, pres);\n        this.connection.send(pres);\n        if (fromJoin) {\n            // XXX We're pressed for time here because we're beginning a complex\n            // and/or lengthy conference-establishment process which supposedly\n            // involves multiple RTTs. We don't have the time to wait for\n            // Strophe to decide to send our IQ.\n            this.connection.flush();\n        }\n    }\n\n    /**\n     * Sends the presence unavailable, signaling the server\n     * we want to leave the room.\n     */\n    doLeave() {\n        logger.log('do leave', this.myroomjid);\n        const pres = $pres({ to: this.myroomjid,\n            type: 'unavailable' });\n\n        this.presMap.length = 0;\n\n        // XXX Strophe is asynchronously sending by default. Unfortunately, that\n        // means that there may not be enough time to send the unavailable\n        // presence. Switching Strophe to synchronous sending is not much of an\n        // option because it may lead to a noticeable delay in navigating away\n        // from the current location. As a compromise, we will try to increase\n        // the chances of sending the unavailable presence within the short time\n        // span that we have upon unloading by invoking flush() on the\n        // connection. We flush() once before sending/queuing the unavailable\n        // presence in order to attemtp to have the unavailable presence at the\n        // top of the send queue. We flush() once more after sending/queuing the\n        // unavailable presence in order to attempt to have it sent as soon as\n        // possible.\n        this.connection.flush();\n        this.connection.send(pres);\n        this.connection.flush();\n    }\n\n    /**\n     *\n     */\n    discoRoomInfo() {\n        // https://xmpp.org/extensions/xep-0045.html#disco-roominfo\n\n        const getInfo\n            = $iq({\n                type: 'get',\n                to: this.roomjid\n            })\n                .c('query', { xmlns: Strophe.NS.DISCO_INFO });\n\n        this.connection.sendIQ(getInfo, result => {\n            const locked\n                = $(result).find('>query>feature[var=\"muc_passwordprotected\"]')\n                    .length\n                    === 1;\n\n            if (locked !== this.locked) {\n                this.eventEmitter.emit(XMPPEvents.MUC_LOCK_CHANGED, locked);\n                this.locked = locked;\n            }\n        }, error => {\n            GlobalOnErrorHandler.callErrorHandler(error);\n            logger.error('Error getting room info: ', error);\n        });\n    }\n\n    /**\n     *\n     */\n    createNonAnonymousRoom() {\n        // http://xmpp.org/extensions/xep-0045.html#createroom-reserved\n\n        const getForm = $iq({ type: 'get',\n            to: this.roomjid })\n            .c('query', { xmlns: 'http://jabber.org/protocol/muc#owner' })\n            .c('x', { xmlns: 'jabber:x:data',\n                type: 'submit' });\n\n        const self = this;\n\n        this.connection.sendIQ(getForm, form => {\n            if (!$(form).find(\n                    '>query>x[xmlns=\"jabber:x:data\"]'\n                    + '>field[var=\"muc#roomconfig_whois\"]').length) {\n                const errmsg = 'non-anonymous rooms not supported';\n\n                GlobalOnErrorHandler.callErrorHandler(new Error(errmsg));\n                logger.error(errmsg);\n\n                return;\n            }\n\n            const formSubmit = $iq({ to: self.roomjid,\n                type: 'set' })\n                .c('query', { xmlns: 'http://jabber.org/protocol/muc#owner' });\n\n            formSubmit.c('x', { xmlns: 'jabber:x:data',\n                type: 'submit' });\n\n            formSubmit.c('field', { 'var': 'FORM_TYPE' })\n                .c('value')\n                .t('http://jabber.org/protocol/muc#roomconfig').up().up();\n\n            formSubmit.c('field', { 'var': 'muc#roomconfig_whois' })\n                .c('value').t('anyone').up().up();\n\n            self.connection.sendIQ(formSubmit);\n\n        }, error => {\n            GlobalOnErrorHandler.callErrorHandler(error);\n            logger.error('Error getting room configuration form: ', error);\n        });\n    }\n\n    /**\n     *\n     * @param pres\n     */\n    onPresence(pres) {\n        const from = pres.getAttribute('from');\n\n        // Parse roles.\n        const member = {};\n\n        member.show = $(pres).find('>show').text();\n        const $statusNode = $(pres).find('>status');\n        const hasStatus = $statusNode.length;\n\n        if (hasStatus) {\n            member.status = $statusNode.text();\n        }\n        let hasStatusUpdate = false;\n\n        const mucUserItem\n            = $(pres).find(\n                '>x[xmlns=\"http://jabber.org/protocol/muc#user\"]>item');\n\n        member.affiliation = mucUserItem.attr('affiliation');\n        member.role = mucUserItem.attr('role');\n\n        // Focus recognition\n        const jid = mucUserItem.attr('jid');\n\n        member.jid = jid;\n        member.isFocus\n            = jid && jid.indexOf(`${this.moderator.getFocusUserJid()}/`) === 0;\n        member.isHiddenDomain\n            = jid && jid.indexOf('@') > 0\n                && this.options.hiddenDomain\n                    === jid.substring(jid.indexOf('@') + 1, jid.indexOf('/'));\n\n        $(pres).find('>x').remove();\n        const nodes = [];\n\n        parser.packet2JSON(pres, nodes);\n        this.lastPresences[from] = nodes;\n        let jibri = null;\n\n        // process nodes to extract data needed for MUC_JOINED and\n        // MUC_MEMBER_JOINED events\n\n        for (let i = 0; i < nodes.length; i++) {\n            const node = nodes[i];\n\n            switch (node.tagName) {\n            case 'nick':\n                member.nick = node.value;\n                break;\n            case 'userId':\n                member.id = node.value;\n                break;\n            case 'stats-id':\n                member.statsID = node.value;\n                break;\n            }\n        }\n\n        if (from === this.myroomjid) {\n            const newRole\n                = member.affiliation === 'owner' ? member.role : 'none';\n\n            if (this.role !== newRole) {\n                this.role = newRole;\n                this.eventEmitter.emit(\n                    XMPPEvents.LOCAL_ROLE_CHANGED,\n                    this.role);\n            }\n            if (!this.joined) {\n                this.joined = true;\n                const now = this.connectionTimes['muc.joined']\n                    = window.performance.now();\n\n                logger.log('(TIME) MUC joined:\\t', now);\n\n                // set correct initial state of locked\n                if (this.password) {\n                    this.locked = true;\n                }\n\n                this.eventEmitter.emit(XMPPEvents.MUC_JOINED);\n            }\n        } else if (this.members[from] === undefined) {\n            // new participant\n            this.members[from] = member;\n            logger.log('entered', from, member);\n            hasStatusUpdate = member.status !== undefined;\n            if (member.isFocus) {\n                this._initFocus(from, jid);\n            } else {\n                this.eventEmitter.emit(\n                    XMPPEvents.MUC_MEMBER_JOINED,\n                    from,\n                    member.nick,\n                    member.role,\n                    member.isHiddenDomain,\n                    member.statsID,\n                    member.status);\n\n                // we are reporting the status with the join\n                // so we do not want a second event about status update\n                hasStatusUpdate = false;\n            }\n        } else {\n            // Presence update for existing participant\n            // Watch role change:\n            const memberOfThis = this.members[from];\n\n            if (memberOfThis.role !== member.role) {\n                memberOfThis.role = member.role;\n                this.eventEmitter.emit(\n                    XMPPEvents.MUC_ROLE_CHANGED, from, member.role);\n            }\n\n            if (member.isFocus) {\n                // From time to time first few presences of the focus are not\n                // containing it's jid. That way we can mark later the focus\n                // member instead of not marking it at all and not starting the\n                // conference.\n                // FIXME: Maybe there is a better way to handle this issue. It\n                // seems there is some period of time in prosody that the\n                // configuration form is received but not applied. And if any\n                // participant joins during that period of time the first\n                // presence from the focus won't conain <item jid=\"focus...\" />.\n                memberOfThis.isFocus = true;\n                this._initFocus(from, jid);\n            }\n\n            // store the new display name\n            if (member.displayName) {\n                memberOfThis.displayName = member.displayName;\n            }\n\n            // update stored status message to be able to detect changes\n            if (memberOfThis.status !== member.status) {\n                hasStatusUpdate = true;\n                memberOfThis.status = member.status;\n            }\n        }\n\n        // after we had fired member or room joined events, lets fire events\n        // for the rest info we got in presence\n        for (let i = 0; i < nodes.length; i++) {\n            const node = nodes[i];\n\n            switch (node.tagName) {\n            case 'nick':\n                if (!member.isFocus) {\n                    const displayName\n                        = this.xmpp.options.displayJids\n                            ? Strophe.getResourceFromJid(from)\n                            : member.nick;\n\n                    if (displayName && displayName.length > 0) {\n                        this.eventEmitter.emit(\n                            XMPPEvents.DISPLAY_NAME_CHANGED,\n                            from,\n                            displayName);\n                    }\n                }\n                break;\n            case 'bridgeNotAvailable':\n                if (member.isFocus && !this.noBridgeAvailable) {\n                    this.noBridgeAvailable = true;\n                    this.eventEmitter.emit(XMPPEvents.BRIDGE_DOWN);\n                }\n                break;\n            case 'jibri-recording-status':\n                jibri = node;\n                break;\n            case 'transcription-status': {\n                const { attributes } = node;\n\n                if (!attributes) {\n                    break;\n                }\n\n                const { status } = attributes;\n\n                if (status && status !== this.transcriptionStatus) {\n                    this.transcriptionStatus = status;\n                    this.eventEmitter.emit(\n                        XMPPEvents.TRANSCRIPTION_STATUS_CHANGED,\n                        status\n                    );\n                }\n\n\n                break;\n            }\n            case 'call-control': {\n                const att = node.attributes;\n\n                if (!att) {\n                    break;\n                }\n                this.phoneNumber = att.phone || null;\n                this.phonePin = att.pin || null;\n                this.eventEmitter.emit(XMPPEvents.PHONE_NUMBER_CHANGED);\n                break;\n            }\n            default:\n                this.processNode(node, from);\n            }\n        }\n\n        // Trigger status message update if necessary\n        if (hasStatusUpdate) {\n            this.eventEmitter.emit(\n                XMPPEvents.PRESENCE_STATUS,\n                from,\n                member.status);\n        }\n\n        if (jibri) {\n            this.lastJibri = jibri;\n            if (this.recording) {\n                this.recording.handleJibriPresence(jibri);\n            }\n        }\n    }\n\n    /**\n     * Initialize some properties when the focus participant is verified.\n     * @param from jid of the focus\n     * @param mucJid the jid of the focus in the muc\n     */\n    _initFocus(from, mucJid) {\n        this.focusMucJid = from;\n        if (!this.recording) {\n            this.recording = new Recorder(this.options.recordingType,\n                this.eventEmitter, this.connection, this.focusMucJid,\n                this.options.jirecon, this.roomjid);\n            if (this.lastJibri) {\n                this.recording.handleJibriPresence(this.lastJibri);\n            }\n        }\n        logger.info(`Ignore focus: ${from}, real JID: ${mucJid}`);\n    }\n\n    /**\n     * Sets the special listener to be used for \"command\"s whose name starts\n     * with \"jitsi_participant_\".\n     */\n    setParticipantPropertyListener(listener) {\n        this.participantPropertyListener = listener;\n    }\n\n    /**\n     *\n     * @param node\n     * @param from\n     */\n    processNode(node, from) {\n        // make sure we catch all errors coming from any handler\n        // otherwise we can remove the presence handler from strophe\n        try {\n            let tagHandlers = this.presHandlers[node.tagName];\n\n            if (node.tagName.startsWith('jitsi_participant_')) {\n                tagHandlers = [ this.participantPropertyListener ];\n            }\n\n            if (tagHandlers) {\n                tagHandlers.forEach(handler => {\n                    handler(node, Strophe.getResourceFromJid(from), from);\n                });\n            }\n        } catch (e) {\n            GlobalOnErrorHandler.callErrorHandler(e);\n            logger.error(`Error processing:${node.tagName} node.`, e);\n        }\n    }\n\n    /**\n     * Send text message to the other participants in the conference\n     * @param body\n     * @param nickname\n     */\n    sendMessage(body, nickname) {\n        const msg = $msg({ to: this.roomjid,\n            type: 'groupchat' });\n\n        msg.c('body', body).up();\n        if (nickname) {\n            msg.c('nick', { xmlns: 'http://jabber.org/protocol/nick' })\n                .t(nickname)\n                .up()\n                .up();\n        }\n        this.connection.send(msg);\n        this.eventEmitter.emit(XMPPEvents.SENDING_CHAT_MESSAGE, body);\n    }\n\n    /**\n     * Send private text message to another participant of the conference\n     * @param id id/muc resource of the receiver\n     * @param body\n     * @param nickname\n     */\n    sendPrivateMessage(id, body, nickname) {\n        const msg = $msg({ to: `${this.roomjid}/${id}`,\n            type: 'chat' });\n\n        msg.c('body', body).up();\n        if (nickname) {\n            msg.c('nick', { xmlns: 'http://jabber.org/protocol/nick' })\n                .t(nickname)\n                .up()\n                .up();\n        }\n\n        this.connection.send(msg);\n        this.eventEmitter.emit(XMPPEvents.SENDING_PRIVATE_CHAT_MESSAGE, body);\n    }\n\n\n    /**\n     *\n     * @param subject\n     */\n    setSubject(subject) {\n        const msg = $msg({ to: this.roomjid,\n            type: 'groupchat' });\n\n        msg.c('subject', subject);\n        this.connection.send(msg);\n    }\n\n    /**\n     * Called when participant leaves.\n     * @param jid the jid of the participant that leaves\n     * @param skipEvents optional params to skip any events, including check\n     * whether this is the focus that left\n     */\n    onParticipantLeft(jid, skipEvents) {\n\n        delete this.lastPresences[jid];\n\n        if (skipEvents) {\n            return;\n        }\n\n        this.eventEmitter.emit(XMPPEvents.MUC_MEMBER_LEFT, jid);\n\n        this.moderator.onMucMemberLeft(jid);\n    }\n\n    /**\n     *\n     * @param pres\n     * @param from\n     */\n    onPresenceUnavailable(pres, from) {\n        // ignore presence\n        if ($(pres).find('>ignore[xmlns=\"http://jitsi.org/jitmeet/\"]').length) {\n            return true;\n        }\n\n        // room destroyed ?\n        if ($(pres).find('>x[xmlns=\"http://jabber.org/protocol/muc#user\"]'\n            + '>destroy').length) {\n            let reason;\n            const reasonSelect\n                = $(pres).find(\n                    '>x[xmlns=\"http://jabber.org/protocol/muc#user\"]'\n                        + '>destroy>reason');\n\n            if (reasonSelect.length) {\n                reason = reasonSelect.text();\n            }\n\n            this.eventEmitter.emit(XMPPEvents.MUC_DESTROYED, reason);\n            this.connection.emuc.doLeave(this.roomjid);\n\n            return true;\n        }\n\n        // Status code 110 indicates that this notification is \"self-presence\".\n        const isSelfPresence\n            = $(pres)\n                .find(\n                    '>x[xmlns=\"http://jabber.org/protocol/muc#user\"]>'\n                        + 'status[code=\"110\"]')\n                .length;\n        const isKick\n            = $(pres)\n                .find(\n                    '>x[xmlns=\"http://jabber.org/protocol/muc#user\"]'\n                        + '>status[code=\"307\"]')\n                .length;\n        const membersKeys = Object.keys(this.members);\n\n        if (!isSelfPresence) {\n            delete this.members[from];\n            this.onParticipantLeft(from, false);\n        } else if (membersKeys.length > 0) {\n            // If the status code is 110 this means we're leaving and we would\n            // like to remove everyone else from our view, so we trigger the\n            // event.\n            membersKeys.forEach(jid => {\n                const member = this.members[jid];\n\n                delete this.members[jid];\n                this.onParticipantLeft(jid, member.isFocus);\n            });\n            this.connection.emuc.doLeave(this.roomjid);\n\n            // we fire muc_left only if this is not a kick,\n            // kick has both statuses 110 and 307.\n            if (!isKick) {\n                this.eventEmitter.emit(XMPPEvents.MUC_LEFT);\n            }\n        }\n\n        if (isKick && this.myroomjid === from) {\n            this.eventEmitter.emit(XMPPEvents.KICKED);\n        }\n    }\n\n    /**\n     *\n     * @param msg\n     * @param from\n     */\n    onMessage(msg, from) {\n        const nick\n            = $(msg).find('>nick[xmlns=\"http://jabber.org/protocol/nick\"]')\n                .text()\n            || Strophe.getResourceFromJid(from);\n\n        const txt = $(msg).find('>body').text();\n        const type = msg.getAttribute('type');\n\n        if (type === 'error') {\n            this.eventEmitter.emit(XMPPEvents.CHAT_ERROR_RECEIVED,\n                $(msg).find('>text').text(), txt);\n\n            return true;\n        }\n\n        const subject = $(msg).find('>subject');\n\n        if (subject.length) {\n            const subjectText = subject.text();\n\n            if (subjectText || subjectText === '') {\n                this.eventEmitter.emit(XMPPEvents.SUBJECT_CHANGED, subjectText);\n                logger.log(`Subject is changed to ${subjectText}`);\n            }\n        }\n\n        // xep-0203 delay\n        let stamp = $(msg).find('>delay').attr('stamp');\n\n        if (!stamp) {\n            // or xep-0091 delay, UTC timestamp\n            stamp = $(msg).find('>[xmlns=\"jabber:x:delay\"]').attr('stamp');\n\n            if (stamp) {\n                // the format is CCYYMMDDThh:mm:ss\n                const dateParts\n                    = stamp.match(/(\\d{4})(\\d{2})(\\d{2}T\\d{2}:\\d{2}:\\d{2})/);\n\n                stamp = `${dateParts[1]}-${dateParts[2]}-${dateParts[3]}Z`;\n            }\n        }\n\n        if (from === this.roomjid\n                && $(msg)\n                    .find(\n                        '>x[xmlns=\"http://jabber.org/protocol/muc#user\"]'\n                            + '>status[code=\"104\"]')\n                    .length) {\n            this.discoRoomInfo();\n        }\n\n        const json = tryParseJSONAndVerify(txt);\n\n        if (json) {\n            this.eventEmitter.emit(XMPPEvents.JSON_MESSAGE_RECEIVED,\n                from, json);\n\n            return;\n        }\n\n        if (txt) {\n            if (type === 'chat') {\n                logger.log('privatechat', nick, txt);\n                this.eventEmitter.emit(XMPPEvents.PRIVATE_MESSAGE_RECEIVED,\n                        from, nick, txt, this.myroomjid, stamp);\n            }\n            if (type === 'groupchat') {\n                logger.log('chat', nick, txt);\n                this.eventEmitter.emit(XMPPEvents.MESSAGE_RECEIVED,\n                        from, nick, txt, this.myroomjid, stamp);\n            }\n        }\n    }\n\n    /**\n     *\n     * @param pres\n     * @param from\n     */\n    onPresenceError(pres, from) {\n        if ($(pres)\n                .find(\n                    '>error[type=\"auth\"]'\n                        + '>not-authorized['\n                        + 'xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"]')\n                .length) {\n            logger.log('on password required', from);\n            this.eventEmitter.emit(XMPPEvents.PASSWORD_REQUIRED);\n        } else if ($(pres)\n                .find(\n                    '>error[type=\"cancel\"]'\n                        + '>not-allowed['\n                        + 'xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"]')\n                .length) {\n            const toDomain = Strophe.getDomainFromJid(pres.getAttribute('to'));\n\n            if (toDomain === this.xmpp.options.hosts.anonymousdomain) {\n                // enter the room by replying with 'not-authorized'. This would\n                // result in reconnection from authorized domain.\n                // We're either missing Jicofo/Prosody config for anonymous\n                // domains or something is wrong.\n                this.eventEmitter.emit(XMPPEvents.ROOM_JOIN_ERROR);\n\n            } else {\n                logger.warn('onPresError ', pres);\n                this.eventEmitter.emit(\n                    XMPPEvents.ROOM_CONNECT_NOT_ALLOWED_ERROR);\n            }\n        } else if ($(pres).find('>error>service-unavailable').length) {\n            logger.warn('Maximum users limit for the room has been reached',\n                pres);\n            this.eventEmitter.emit(XMPPEvents.ROOM_MAX_USERS_ERROR);\n        } else {\n            logger.warn('onPresError ', pres);\n            this.eventEmitter.emit(XMPPEvents.ROOM_CONNECT_ERROR);\n        }\n    }\n\n    /**\n     *\n     * @param jid\n     */\n    kick(jid) {\n        const kickIQ = $iq({ to: this.roomjid,\n            type: 'set' })\n            .c('query', { xmlns: 'http://jabber.org/protocol/muc#admin' })\n            .c('item', { nick: Strophe.getResourceFromJid(jid),\n                role: 'none' })\n            .c('reason').t('You have been kicked.').up().up().up();\n\n        this.connection.sendIQ(\n            kickIQ,\n            result => logger.log('Kick participant with jid: ', jid, result),\n            error => logger.log('Kick participant error: ', error));\n    }\n\n    /* eslint-disable max-params */\n\n    /**\n     *\n     * @param key\n     * @param onSuccess\n     * @param onError\n     * @param onNotSupported\n     */\n    lockRoom(key, onSuccess, onError, onNotSupported) {\n        // http://xmpp.org/extensions/xep-0045.html#roomconfig\n        this.connection.sendIQ(\n            $iq({\n                to: this.roomjid,\n                type: 'get'\n            })\n                .c('query', { xmlns: 'http://jabber.org/protocol/muc#owner' }),\n            res => {\n                if ($(res)\n                        .find(\n                            '>query>x[xmlns=\"jabber:x:data\"]'\n                                + '>field[var=\"muc#roomconfig_roomsecret\"]')\n                        .length) {\n                    const formsubmit\n                        = $iq({\n                            to: this.roomjid,\n                            type: 'set'\n                        })\n                            .c('query', {\n                                xmlns: 'http://jabber.org/protocol/muc#owner'\n                            });\n\n                    formsubmit.c('x', {\n                        xmlns: 'jabber:x:data',\n                        type: 'submit'\n                    });\n                    formsubmit\n                        .c('field', { 'var': 'FORM_TYPE' })\n                        .c('value')\n                        .t('http://jabber.org/protocol/muc#roomconfig')\n                        .up()\n                        .up();\n                    formsubmit\n                        .c('field', { 'var': 'muc#roomconfig_roomsecret' })\n                        .c('value')\n                        .t(key)\n                        .up()\n                        .up();\n\n                    // Fixes a bug in prosody 0.9.+\n                    // https://code.google.com/p/lxmppd/issues/detail?id=373\n                    formsubmit\n                        .c('field', { 'var': 'muc#roomconfig_whois' })\n                        .c('value')\n                        .t('anyone')\n                        .up()\n                        .up();\n\n                    // FIXME: is muc#roomconfig_passwordprotectedroom required?\n                    this.connection.sendIQ(formsubmit, onSuccess, onError);\n                } else {\n                    onNotSupported();\n                }\n            },\n            onError);\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     *\n     * @param key\n     * @param values\n     */\n    addToPresence(key, values) {\n        values.tagName = key;\n        this.removeFromPresence(key);\n        this.presMap.nodes.push(values);\n    }\n\n    /**\n     *\n     * @param key\n     */\n    removeFromPresence(key) {\n        const nodes = this.presMap.nodes.filter(node => key !== node.tagName);\n\n        this.presMap.nodes = nodes;\n    }\n\n    /**\n     *\n     * @param name\n     * @param handler\n     */\n    addPresenceListener(name, handler) {\n        if (typeof handler !== 'function') {\n            throw new Error('\"handler\" is not a function');\n        }\n        let tagHandlers = this.presHandlers[name];\n\n        if (!tagHandlers) {\n            this.presHandlers[name] = tagHandlers = [];\n        }\n        if (tagHandlers.indexOf(handler) === -1) {\n            tagHandlers.push(handler);\n        } else {\n            logger.warn(\n                `Trying to add the same handler more than once for: ${name}`);\n        }\n    }\n\n    /**\n     *\n     * @param name\n     * @param handler\n     */\n    removePresenceListener(name, handler) {\n        const tagHandlers = this.presHandlers[name];\n        const handlerIdx = tagHandlers ? tagHandlers.indexOf(handler) : -1;\n\n        // eslint-disable-next-line no-negated-condition\n        if (handlerIdx !== -1) {\n            tagHandlers.splice(handlerIdx, 1);\n        } else {\n            logger.warn(`Handler for: ${name} was not registered`);\n        }\n    }\n\n    /**\n     * Checks if the user identified by given <tt>mucJid</tt> is the conference\n     * focus.\n     * @param mucJid the full MUC address of the user to be checked.\n     * @returns {boolean|null} <tt>true</tt> if MUC user is the conference focus\n     * or <tt>false</tt> if is not. When given <tt>mucJid</tt> does not exist in\n     * the MUC then <tt>null</tt> is returned.\n     */\n    isFocus(mucJid) {\n        const member = this.members[mucJid];\n\n        if (member) {\n            return member.isFocus;\n        }\n\n        return null;\n    }\n\n    /**\n     *\n     */\n    isModerator() {\n        return this.role === 'moderator';\n    }\n\n    /**\n     *\n     * @param peerJid\n     */\n    getMemberRole(peerJid) {\n        if (this.members[peerJid]) {\n            return this.members[peerJid].role;\n        }\n\n        return null;\n    }\n\n    /**\n     *\n     * @param mute\n     * @param callback\n     */\n    setVideoMute(mute, callback) {\n        this.sendVideoInfoPresence(mute);\n        if (callback) {\n            callback(mute);\n        }\n    }\n\n    /**\n     *\n     * @param mute\n     * @param callback\n     */\n    setAudioMute(mute, callback) {\n        return this.sendAudioInfoPresence(mute, callback);\n    }\n\n    /**\n     *\n     * @param mute\n     */\n    addAudioInfoToPresence(mute) {\n        this.removeFromPresence('audiomuted');\n        this.addToPresence(\n            'audiomuted',\n            {\n                attributes: { 'xmlns': 'http://jitsi.org/jitmeet/audio' },\n                value: mute.toString()\n            });\n    }\n\n    /**\n     *\n     * @param mute\n     * @param callback\n     */\n    sendAudioInfoPresence(mute, callback) {\n        this.addAudioInfoToPresence(mute);\n        if (this.connection) {\n            this.sendPresence();\n        }\n        if (callback) {\n            callback();\n        }\n    }\n\n    /**\n     *\n     * @param mute\n     */\n    addVideoInfoToPresence(mute) {\n        this.removeFromPresence('videomuted');\n        this.addToPresence(\n            'videomuted',\n            {\n                attributes: { 'xmlns': 'http://jitsi.org/jitmeet/video' },\n                value: mute.toString()\n            });\n    }\n\n    /**\n     *\n     * @param mute\n     */\n    sendVideoInfoPresence(mute) {\n        this.addVideoInfoToPresence(mute);\n        if (!this.connection) {\n            return;\n        }\n        this.sendPresence();\n    }\n\n    /**\n     * Obtains the info about given media advertised in the MUC presence of\n     * the participant identified by the given endpoint JID.\n     * @param {string} endpointId the endpoint ID mapped to the participant\n     * which corresponds to MUC nickname.\n     * @param {MediaType} mediaType the type of the media for which presence\n     * info will be obtained.\n     * @return {PeerMediaInfo} presenceInfo an object with media presence\n     * info or <tt>null</tt> either if there is no presence available or if\n     * the media type given is invalid.\n     */\n    getMediaPresenceInfo(endpointId, mediaType) {\n        // Will figure out current muted status by looking up owner's presence\n        const pres = this.lastPresences[`${this.roomjid}/${endpointId}`];\n\n        if (!pres) {\n            // No presence available\n            return null;\n        }\n        const data = {\n            muted: false, // unmuted by default\n            videoType: undefined // no video type by default\n        };\n        let mutedNode = null;\n\n        if (mediaType === MediaType.AUDIO) {\n            mutedNode = filterNodeFromPresenceJSON(pres, 'audiomuted');\n        } else if (mediaType === MediaType.VIDEO) {\n            mutedNode = filterNodeFromPresenceJSON(pres, 'videomuted');\n            const videoTypeNode = filterNodeFromPresenceJSON(pres, 'videoType');\n\n            if (videoTypeNode.length > 0) {\n                data.videoType = videoTypeNode[0].value;\n            }\n        } else {\n            logger.error(`Unsupported media type: ${mediaType}`);\n\n            return null;\n        }\n\n        data.muted = mutedNode.length > 0 && mutedNode[0].value === 'true';\n\n        return data;\n    }\n\n    /**\n     * Returns true if the recording is supproted and false if not.\n     */\n    isRecordingSupported() {\n        if (this.recording) {\n            return this.recording.isSupported();\n        }\n\n        return false;\n    }\n\n    /**\n     * Returns null if the recording is not supported, \"on\" if the recording\n     * started and \"off\" if the recording is not started.\n     */\n    getRecordingState() {\n        return this.recording ? this.recording.getState() : undefined;\n    }\n\n    /**\n     * Returns the url of the recorded video.\n     */\n    getRecordingURL() {\n        return this.recording ? this.recording.getURL() : null;\n    }\n\n    /**\n     * Starts/stops the recording\n     * @param token token for authentication\n     * @param statusChangeHandler {function} receives the new status as\n     * argument.\n     */\n    toggleRecording(options, statusChangeHandler) {\n        if (this.recording) {\n            return this.recording.toggleRecording(options, statusChangeHandler);\n        }\n\n        return statusChangeHandler('error',\n            new Error('The conference is not created yet!'));\n    }\n\n    /**\n     * Returns true if the SIP calls are supported and false otherwise\n     */\n    isSIPCallingSupported() {\n        if (this.moderator) {\n            return this.moderator.isSipGatewayEnabled();\n        }\n\n        return false;\n    }\n\n    /**\n     * Dials a number.\n     * @param number the number\n     */\n    dial(number) {\n        return this.connection.rayo.dial(number, 'fromnumber',\n            Strophe.getBareJidFromJid(this.myroomjid), this.password,\n            this.focusMucJid);\n    }\n\n    /**\n     * Hangup an existing call\n     */\n    hangup() {\n        return this.connection.rayo.hangup();\n    }\n\n    /**\n     * Returns the phone number for joining the conference.\n     */\n    getPhoneNumber() {\n        return this.phoneNumber;\n    }\n\n    /**\n     * Returns the pin for joining the conference with phone.\n     */\n    getPhonePin() {\n        return this.phonePin;\n    }\n\n    /**\n     * Mutes remote participant.\n     * @param jid of the participant\n     * @param mute\n     */\n    muteParticipant(jid, mute) {\n        logger.info('set mute', mute);\n        const iqToFocus = $iq(\n            { to: this.focusMucJid,\n                type: 'set' })\n            .c('mute', {\n                xmlns: 'http://jitsi.org/jitmeet/audio',\n                jid\n            })\n            .t(mute.toString())\n            .up();\n\n        this.connection.sendIQ(\n            iqToFocus,\n            result => logger.log('set mute', result),\n            error => logger.log('set mute error', error));\n    }\n\n    /**\n     * TODO: Document\n     * @param iq\n     */\n    onMute(iq) {\n        const from = iq.getAttribute('from');\n\n        if (from !== this.focusMucJid) {\n            logger.warn('Ignored mute from non focus peer');\n\n            return;\n        }\n        const mute = $(iq).find('mute');\n\n        if (mute.length && mute.text() === 'true') {\n            this.eventEmitter.emit(XMPPEvents.AUDIO_MUTED_BY_FOCUS);\n        } else {\n            // XXX Why do we support anything but muting? Why do we encode the\n            // value in the text of the element? Why do we use a separate XML\n            // namespace?\n            logger.warn('Ignoring a mute request which does not explicitly '\n                + 'specify a positive mute command.');\n        }\n    }\n\n    /**\n     * Leaves the room. Closes the jingle session.\n     * @returns {Promise} which is resolved if XMPPEvents.MUC_LEFT is received\n     * less than 5s after sending presence unavailable. Otherwise the promise is\n     * rejected.\n     */\n    leave() {\n        return new Promise((resolve, reject) => {\n            const timeout = setTimeout(() => onMucLeft(true), 5000);\n            const eventEmitter = this.eventEmitter;\n\n            /**\n             *\n             * @param doReject\n             */\n            function onMucLeft(doReject = false) {\n                eventEmitter.removeListener(XMPPEvents.MUC_LEFT, onMucLeft);\n                clearTimeout(timeout);\n                if (doReject) {\n                    // the timeout expired\n                    reject(new Error('The timeout for the confirmation about '\n                        + 'leaving the room expired.'));\n                } else {\n                    resolve();\n                }\n            }\n            eventEmitter.on(XMPPEvents.MUC_LEFT, onMucLeft);\n            this.doLeave();\n        });\n    }\n}\n\n/* eslint-enable newline-per-chained-call */\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/ChatRoom.js","/* global $, Promise */\n\nconst logger = require('jitsi-meet-logger').getLogger(__filename);\n\nimport { $iq, Strophe } from 'strophe.js';\n\nconst XMPPEvents = require('../../service/xmpp/XMPPEvents');\nconst AuthenticationEvents\n    = require('../../service/authentication/AuthenticationEvents');\nconst GlobalOnErrorHandler = require('../util/GlobalOnErrorHandler');\n\nimport browser from '../browser';\nimport Settings from '../settings/Settings';\n\n/**\n *\n * @param step\n */\nfunction createExpBackoffTimer(step) {\n    let count = 1;\n\n    return function(reset) {\n        // Reset call\n        if (reset) {\n            count = 1;\n\n            return;\n        }\n\n        // Calculate next timeout\n        const timeout = Math.pow(2, count - 1);\n\n        count += 1;\n\n        return timeout * step;\n    };\n}\n\n/* eslint-disable max-params */\n\n/**\n *\n * @param roomName\n * @param xmpp\n * @param emitter\n * @param options\n */\nexport default function Moderator(roomName, xmpp, emitter, options) {\n    this.roomName = roomName;\n    this.xmppService = xmpp;\n    this.getNextTimeout = createExpBackoffTimer(1000);\n    this.getNextErrorTimeout = createExpBackoffTimer(1000);\n\n    // External authentication stuff\n    this.externalAuthEnabled = false;\n    this.options = options;\n\n    // Sip gateway can be enabled by configuring Jigasi host in config.js or\n    // it will be enabled automatically if focus detects the component through\n    // service discovery.\n    this.sipGatewayEnabled\n        = this.options.connection.hosts\n            && this.options.connection.hosts.call_control !== undefined;\n\n    this.eventEmitter = emitter;\n\n    this.connection = this.xmppService.connection;\n\n    // FIXME: Message listener that talks to POPUP window\n    /**\n     *\n     * @param event\n     */\n    function listener(event) {\n        if (event.data && event.data.sessionId) {\n            if (event.origin !== window.location.origin) {\n                logger.warn(\n                    `Ignoring sessionId from different origin: ${\n                        event.origin}`);\n\n                return;\n            }\n            Settings.sessionId = event.data.sessionId;\n\n            // After popup is closed we will authenticate\n        }\n    }\n\n    // Register\n    if (window.addEventListener) {\n        window.addEventListener('message', listener, false);\n    } else {\n        window.attachEvent('onmessage', listener);\n    }\n}\n\n/* eslint-enable max-params */\n\nModerator.prototype.isExternalAuthEnabled = function() {\n    return this.externalAuthEnabled;\n};\n\nModerator.prototype.isSipGatewayEnabled = function() {\n    return this.sipGatewayEnabled;\n};\n\nModerator.prototype.onMucMemberLeft = function(jid) {\n    logger.info(`Someone left is it focus ? ${jid}`);\n    const resource = Strophe.getResourceFromJid(jid);\n\n    if (resource === 'focus') {\n        logger.info(\n            'Focus has left the room - leaving conference');\n        this.eventEmitter.emit(XMPPEvents.FOCUS_LEFT);\n    }\n};\n\nModerator.prototype.setFocusUserJid = function(focusJid) {\n    if (!this.focusUserJid) {\n        this.focusUserJid = focusJid;\n        logger.info(`Focus jid set to:  ${this.focusUserJid}`);\n    }\n};\n\nModerator.prototype.getFocusUserJid = function() {\n    return this.focusUserJid;\n};\n\nModerator.prototype.getFocusComponent = function() {\n    // Get focus component address\n    let focusComponent = this.options.connection.hosts.focus;\n\n    // If not specified use default:  'focus.domain'\n\n    if (!focusComponent) {\n        focusComponent = `focus.${this.options.connection.hosts.domain}`;\n    }\n\n    return focusComponent;\n};\n\nModerator.prototype.createConferenceIq = function() {\n    // Generate create conference IQ\n    const elem = $iq({ to: this.getFocusComponent(),\n        type: 'set' });\n\n    // Session Id used for authentication\n    const { sessionId } = Settings;\n    const machineUID = Settings.machineId;\n\n    logger.info(`Session ID: ${sessionId} machine UID: ${machineUID}`);\n\n    elem.c('conference', {\n        xmlns: 'http://jitsi.org/protocol/focus',\n        room: this.roomName,\n        'machine-uid': machineUID\n    });\n\n    if (sessionId) {\n        elem.attrs({ 'session-id': sessionId });\n    }\n    if (this.options.connection.enforcedBridge !== undefined) {\n        elem.c(\n            'property', {\n                name: 'enforcedBridge',\n                value: this.options.connection.enforcedBridge\n            }).up();\n    }\n\n    // Tell the focus we have Jigasi configured\n    if (this.options.connection.hosts !== undefined\n        && this.options.connection.hosts.call_control !== undefined) {\n        elem.c(\n            'property', {\n                name: 'call_control',\n                value: this.options.connection.hosts.call_control\n            }).up();\n    }\n    if (this.options.conference.channelLastN !== undefined) {\n        elem.c(\n            'property', {\n                name: 'channelLastN',\n                value: this.options.conference.channelLastN\n            }).up();\n    }\n    elem.c(\n        'property', {\n            name: 'disableRtx',\n            value: Boolean(this.options.conference.disableRtx)\n        }).up();\n    elem.c(\n        'property', {\n            name: 'enableLipSync',\n            value: this.options.connection.enableLipSync !== false\n        }).up();\n    if (this.options.conference.audioPacketDelay !== undefined) {\n        elem.c(\n            'property', {\n                name: 'audioPacketDelay',\n                value: this.options.conference.audioPacketDelay\n            }).up();\n    }\n    if (this.options.conference.startBitrate) {\n        elem.c(\n            'property', {\n                name: 'startBitrate',\n                value: this.options.conference.startBitrate\n            }).up();\n    }\n    if (this.options.conference.minBitrate) {\n        elem.c(\n            'property', {\n                name: 'minBitrate',\n                value: this.options.conference.minBitrate\n            }).up();\n    }\n\n    let openSctp;\n\n    switch (this.options.conference.openBridgeChannel) {\n    case 'datachannel':\n    case true:\n    case undefined:\n        openSctp = true;\n        break;\n    case 'websocket':\n        openSctp = false;\n        break;\n    }\n\n    if (openSctp && !browser.supportsDataChannels()) {\n        openSctp = false;\n    }\n\n    elem.c(\n        'property', {\n            name: 'openSctp',\n            value: openSctp\n        }).up();\n\n    if (this.options.conference.startAudioMuted !== undefined) {\n        elem.c(\n            'property', {\n                name: 'startAudioMuted',\n                value: this.options.conference.startAudioMuted\n            }).up();\n    }\n    if (this.options.conference.startVideoMuted !== undefined) {\n        elem.c(\n            'property', {\n                name: 'startVideoMuted',\n                value: this.options.conference.startVideoMuted\n            }).up();\n    }\n    if (this.options.conference.stereo !== undefined) {\n        elem.c(\n            'property', {\n                name: 'stereo',\n                value: this.options.conference.stereo\n            }).up();\n    }\n    if (this.options.conference.useRoomAsSharedDocumentName !== undefined) {\n        elem.c(\n            'property', {\n                name: 'useRoomAsSharedDocumentName',\n                value: this.options.conference.useRoomAsSharedDocumentName\n            }).up();\n    }\n    elem.up();\n\n    return elem;\n};\n\n\nModerator.prototype.parseSessionId = function(resultIq) {\n    // eslint-disable-next-line newline-per-chained-call\n    const sessionId = $(resultIq).find('conference').attr('session-id');\n\n    if (sessionId) {\n        logger.info(`Received sessionId:  ${sessionId}`);\n        Settings.sessionId = sessionId;\n    }\n};\n\nModerator.prototype.parseConfigOptions = function(resultIq) {\n    // eslint-disable-next-line newline-per-chained-call\n    this.setFocusUserJid($(resultIq).find('conference').attr('focusjid'));\n\n    const authenticationEnabled\n        = $(resultIq).find(\n            '>conference>property'\n            + '[name=\\'authentication\\'][value=\\'true\\']').length > 0;\n\n    logger.info(`Authentication enabled: ${authenticationEnabled}`);\n\n    this.externalAuthEnabled = $(resultIq).find(\n        '>conference>property'\n            + '[name=\\'externalAuth\\'][value=\\'true\\']').length > 0;\n\n    logger.info(\n        `External authentication enabled: ${this.externalAuthEnabled}`);\n\n    if (!this.externalAuthEnabled) {\n        // We expect to receive sessionId in 'internal' authentication mode\n        this.parseSessionId(resultIq);\n    }\n\n    // eslint-disable-next-line newline-per-chained-call\n    const authIdentity = $(resultIq).find('>conference').attr('identity');\n\n    this.eventEmitter.emit(AuthenticationEvents.IDENTITY_UPDATED,\n        authenticationEnabled, authIdentity);\n\n    // Check if focus has auto-detected Jigasi component(this will be also\n    // included if we have passed our host from the config)\n    if ($(resultIq).find(\n        '>conference>property'\n        + '[name=\\'sipGatewayEnabled\\'][value=\\'true\\']').length) {\n        this.sipGatewayEnabled = true;\n    }\n\n    logger.info(`Sip gateway enabled:  ${this.sipGatewayEnabled}`);\n};\n\n// FIXME We need to show the fact that we're waiting for the focus to the user\n// (or that the focus is not available)\n/**\n * Allocates the conference focus.\n *\n * @param {Function} callback - the function to be called back upon the\n * successful allocation of the conference focus\n */\nModerator.prototype.allocateConferenceFocus = function(callback) {\n    // Try to use focus user JID from the config\n    this.setFocusUserJid(this.options.connection.focusUserJid);\n\n    // Send create conference IQ\n    this.connection.sendIQ(\n        this.createConferenceIq(),\n        result => this._allocateConferenceFocusSuccess(result, callback),\n        error => this._allocateConferenceFocusError(error, callback));\n\n    // XXX We're pressed for time here because we're beginning a complex and/or\n    // lengthy conference-establishment process which supposedly involves\n    // multiple RTTs. We don't have the time to wait for Strophe to decide to\n    // send our IQ.\n    this.connection.flush();\n};\n\n/**\n * Invoked by {@link #allocateConferenceFocus} upon its request receiving an\n * error result.\n *\n * @param error - the error result of the request that\n * {@link #allocateConferenceFocus} sent\n * @param {Function} callback - the function to be called back upon the\n * successful allocation of the conference focus\n */\nModerator.prototype._allocateConferenceFocusError = function(error, callback) {\n    // If the session is invalid, remove and try again without session ID to get\n    // a new one\n    const invalidSession\n        = $(error).find('>error>session-invalid').length\n            || $(error).find('>error>not-acceptable').length;\n\n    if (invalidSession) {\n        logger.info('Session expired! - removing');\n        Settings.sessionId = undefined;\n    }\n    if ($(error).find('>error>graceful-shutdown').length) {\n        this.eventEmitter.emit(XMPPEvents.GRACEFUL_SHUTDOWN);\n\n        return;\n    }\n\n    // Check for error returned by the reservation system\n    const reservationErr = $(error).find('>error>reservation-error');\n\n    if (reservationErr.length) {\n        // Trigger error event\n        const errorCode = reservationErr.attr('error-code');\n        const errorTextNode = $(error).find('>error>text');\n        let errorMsg;\n\n        if (errorTextNode) {\n            errorMsg = errorTextNode.text();\n        }\n        this.eventEmitter.emit(\n            XMPPEvents.RESERVATION_ERROR,\n            errorCode,\n            errorMsg);\n\n        return;\n    }\n\n    // Not authorized to create new room\n    if ($(error).find('>error>not-authorized').length) {\n        logger.warn('Unauthorized to start the conference', error);\n        const toDomain = Strophe.getDomainFromJid(error.getAttribute('to'));\n\n        if (toDomain !== this.options.connection.hosts.anonymousdomain) {\n            // FIXME \"is external\" should come either from the focus or\n            // config.js\n            this.externalAuthEnabled = true;\n        }\n        this.eventEmitter.emit(XMPPEvents.AUTHENTICATION_REQUIRED);\n\n        return;\n    }\n    const waitMs = this.getNextErrorTimeout();\n    const errmsg = `Focus error, retry after ${waitMs}`;\n\n    GlobalOnErrorHandler.callErrorHandler(new Error(errmsg));\n    logger.error(errmsg, error);\n\n    // Show message\n    const focusComponent = this.getFocusComponent();\n    const retrySec = waitMs / 1000;\n\n    // FIXME: message is duplicated ? Do not show in case of session invalid\n    // which means just a retry\n\n    if (!invalidSession) {\n        this.eventEmitter.emit(\n            XMPPEvents.FOCUS_DISCONNECTED,\n            focusComponent,\n            retrySec);\n    }\n\n    // Reset response timeout\n    this.getNextTimeout(true);\n    window.setTimeout(() => this.allocateConferenceFocus(callback), waitMs);\n};\n\n/**\n * Invoked by {@link #allocateConferenceFocus} upon its request receiving a\n * success (i.e. non-error) result.\n *\n * @param result - the success (i.e. non-error) result of the request that\n * {@link #allocateConferenceFocus} sent\n * @param {Function} callback - the function to be called back upon the\n * successful allocation of the conference focus\n */\nModerator.prototype._allocateConferenceFocusSuccess = function(\n        result,\n        callback) {\n    // Setup config options\n    this.parseConfigOptions(result);\n\n    // Reset the error timeout (because we haven't failed here).\n    this.getNextErrorTimeout(true);\n\n    // eslint-disable-next-line newline-per-chained-call\n    if ($(result).find('conference').attr('ready') === 'true') {\n        // Reset the non-error timeout (because we've succeeded here).\n        this.getNextTimeout(true);\n\n        // Exec callback\n        callback();\n    } else {\n        const waitMs = this.getNextTimeout();\n\n        logger.info(`Waiting for the focus... ${waitMs}`);\n        window.setTimeout(() => this.allocateConferenceFocus(callback),\n            waitMs);\n    }\n};\n\nModerator.prototype.authenticate = function() {\n    return new Promise((resolve, reject) => {\n        this.connection.sendIQ(\n            this.createConferenceIq(),\n            result => {\n                this.parseSessionId(result);\n                resolve();\n            },\n            errorIq => reject({\n                error: $(errorIq).find('iq>error :first')\n                    .prop('tagName'),\n                message: $(errorIq).find('iq>error>text')\n                    .text()\n            })\n        );\n    });\n};\n\nModerator.prototype.getLoginUrl = function(urlCallback, failureCallback) {\n    this._getLoginUrl(/* popup */ false, urlCallback, failureCallback);\n};\n\n/**\n *\n * @param {boolean} popup false for {@link Moderator#getLoginUrl} or true for\n * {@link Moderator#getPopupLoginUrl}\n * @param urlCb\n * @param failureCb\n */\nModerator.prototype._getLoginUrl = function(popup, urlCb, failureCb) {\n    const iq = $iq({ to: this.getFocusComponent(),\n        type: 'get' });\n    const attrs = {\n        xmlns: 'http://jitsi.org/protocol/focus',\n        room: this.roomName,\n        'machine-uid': Settings.machineId\n    };\n    let str = 'auth url'; // for logger\n\n    if (popup) {\n        attrs.popup = true;\n        str = `POPUP ${str}`;\n    }\n    iq.c('login-url', attrs);\n\n    /**\n     * Implements a failure callback which reports an error message and an error\n     * through (1) GlobalOnErrorHandler, (2) logger, and (3) failureCb.\n     *\n     * @param {string} errmsg the error messsage to report\n     * @param {*} error the error to report (in addition to errmsg)\n     */\n    function reportError(errmsg, err) {\n        GlobalOnErrorHandler.callErrorHandler(new Error(errmsg));\n        logger.error(errmsg, err);\n        failureCb(err);\n    }\n    this.connection.sendIQ(\n        iq,\n        result => {\n            // eslint-disable-next-line newline-per-chained-call\n            let url = $(result).find('login-url').attr('url');\n\n            url = decodeURIComponent(url);\n            if (url) {\n                logger.info(`Got ${str}: ${url}`);\n                urlCb(url);\n            } else {\n                reportError(`Failed to get ${str} from the focus`, result);\n            }\n        },\n        reportError.bind(undefined, `Get ${str} error`)\n    );\n};\n\nModerator.prototype.getPopupLoginUrl = function(urlCallback, failureCallback) {\n    this._getLoginUrl(/* popup */ true, urlCallback, failureCallback);\n};\n\nModerator.prototype.logout = function(callback) {\n    const iq = $iq({ to: this.getFocusComponent(),\n        type: 'set' });\n    const { sessionId } = Settings;\n\n    if (!sessionId) {\n        callback();\n\n        return;\n    }\n    iq.c('logout', {\n        xmlns: 'http://jitsi.org/protocol/focus',\n        'session-id': sessionId\n    });\n    this.connection.sendIQ(\n        iq,\n        result => {\n            // eslint-disable-next-line newline-per-chained-call\n            let logoutUrl = $(result).find('logout').attr('logout-url');\n\n            if (logoutUrl) {\n                logoutUrl = decodeURIComponent(logoutUrl);\n            }\n            logger.info(`Log out OK, url: ${logoutUrl}`, result);\n            Settings.sessionId = undefined;\n            callback(logoutUrl);\n        },\n        error => {\n            const errmsg = 'Logout error';\n\n            GlobalOnErrorHandler.callErrorHandler(new Error(errmsg));\n            logger.error(errmsg, error);\n        }\n    );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/moderator.js","/* global $, __filename */\n\nimport {\n    ACTION_JINGLE_TR_RECEIVED,\n    ACTION_JINGLE_TR_SUCCESS,\n    createJingleEvent\n} from '../../service/statistics/AnalyticsEvents';\nimport { getLogger } from 'jitsi-meet-logger';\nimport { $iq, Strophe } from 'strophe.js';\n\nimport XMPPEvents from '../../service/xmpp/XMPPEvents';\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\nimport RandomUtil from '../util/RandomUtil';\nimport Statistics from '../statistics/statistics';\n\nimport JingleSessionPC from './JingleSessionPC';\nimport ConnectionPlugin from './ConnectionPlugin';\n\nconst logger = getLogger(__filename);\n\n// XXX Strophe is build around the idea of chaining function calls so allow long\n// function call chains.\n/* eslint-disable newline-per-chained-call */\n\n/**\n *\n */\nclass JingleConnectionPlugin extends ConnectionPlugin {\n    /**\n     * Creates new <tt>JingleConnectionPlugin</tt>\n     * @param {XMPP} xmpp\n     * @param {EventEmitter} eventEmitter\n     * @param {Object} iceConfig an object that holds the iceConfig to be passed\n     * to the p2p and the jvb <tt>PeerConnection</tt>.\n     */\n    constructor(xmpp, eventEmitter, iceConfig) {\n        super();\n        this.xmpp = xmpp;\n        this.eventEmitter = eventEmitter;\n        this.sessions = {};\n        this.jvbIceConfig = iceConfig.jvb;\n        this.p2pIceConfig = iceConfig.p2p;\n        this.mediaConstraints = {\n            mandatory: {\n                'OfferToReceiveAudio': true,\n                'OfferToReceiveVideo': true\n            }\n\n            // MozDontOfferDataChannel: true when this is firefox\n        };\n    }\n\n    /**\n     *\n     * @param connection\n     */\n    init(connection) {\n        super.init(connection);\n        this.connection.addHandler(this.onJingle.bind(this),\n            'urn:xmpp:jingle:1', 'iq', 'set', null, null);\n    }\n\n    /**\n     *\n     * @param iq\n     */\n    onJingle(iq) {\n        const sid = $(iq).find('jingle').attr('sid');\n        const action = $(iq).find('jingle').attr('action');\n        const fromJid = iq.getAttribute('from');\n\n        // send ack first\n        const ack = $iq({ type: 'result',\n            to: fromJid,\n            id: iq.getAttribute('id')\n        });\n\n        logger.log(`on jingle ${action} from ${fromJid}`, iq);\n        let sess = this.sessions[sid];\n\n        if (action !== 'session-initiate') {\n            if (!sess) {\n                ack.attrs({ type: 'error' });\n                ack.c('error', { type: 'cancel' })\n                    .c('item-not-found', {\n                        xmlns: 'urn:ietf:params:xml:ns:xmpp-stanzas'\n                    })\n                    .up()\n                    .c('unknown-session', {\n                        xmlns: 'urn:xmpp:jingle:errors:1'\n                    });\n                logger.warn('invalid session id', iq);\n                this.connection.send(ack);\n\n                return true;\n            }\n\n            // local jid is not checked\n            if (fromJid !== sess.remoteJid) {\n                logger.warn(\n                    'jid mismatch for session id', sid, sess.remoteJid, iq);\n                ack.attrs({ type: 'error' });\n                ack.c('error', { type: 'cancel' })\n                    .c('item-not-found', {\n                        xmlns: 'urn:ietf:params:xml:ns:xmpp-stanzas'\n                    })\n                    .up()\n                    .c('unknown-session', {\n                        xmlns: 'urn:xmpp:jingle:errors:1'\n                    });\n                this.connection.send(ack);\n\n                return true;\n            }\n        } else if (sess !== undefined) {\n            // Existing session with same session id. This might be out-of-order\n            // if the sess.remoteJid is the same as from.\n            ack.attrs({ type: 'error' });\n            ack.c('error', { type: 'cancel' })\n                .c('service-unavailable', {\n                    xmlns: 'urn:ietf:params:xml:ns:xmpp-stanzas'\n                })\n                .up();\n            logger.warn('duplicate session id', sid, iq);\n            this.connection.send(ack);\n\n            return true;\n        }\n        const now = window.performance.now();\n\n        // FIXME that should work most of the time, but we'd have to\n        // think how secure it is to assume that user with \"focus\"\n        // nickname is Jicofo.\n        const isP2P = Strophe.getResourceFromJid(fromJid) !== 'focus';\n\n        // see http://xmpp.org/extensions/xep-0166.html#concepts-session\n\n        switch (action) {\n        case 'session-initiate': {\n            logger.log('(TIME) received session-initiate:\\t', now);\n            const startMuted = $(iq).find('jingle>startmuted');\n\n            if (startMuted && startMuted.length > 0) {\n                const audioMuted = startMuted.attr('audio');\n                const videoMuted = startMuted.attr('video');\n\n                this.eventEmitter.emit(\n                    XMPPEvents.START_MUTED_FROM_FOCUS,\n                    audioMuted === 'true',\n                    videoMuted === 'true');\n            }\n\n            logger.info(\n                `Marking session from ${fromJid\n                } as ${isP2P ? '' : '*not*'} P2P`);\n            sess\n                = new JingleSessionPC(\n                    $(iq).find('jingle').attr('sid'),\n                    $(iq).attr('to'),\n                    fromJid,\n                    this.connection,\n                    this.mediaConstraints,\n                    isP2P ? this.p2pIceConfig : this.jvbIceConfig,\n                    isP2P,\n                    /* initiator */ false,\n                    this.xmpp.options);\n\n            this.sessions[sess.sid] = sess;\n\n            this.eventEmitter.emit(XMPPEvents.CALL_INCOMING,\n                sess, $(iq).find('>jingle'), now);\n            break;\n        }\n        case 'session-accept': {\n            this.eventEmitter.emit(\n                XMPPEvents.CALL_ACCEPTED, sess, $(iq).find('>jingle'));\n            break;\n        }\n        case 'content-modify': {\n            sess.modifyContents($(iq).find('>jingle'));\n            break;\n        }\n        case 'transport-info': {\n            this.eventEmitter.emit(\n                XMPPEvents.TRANSPORT_INFO, sess, $(iq).find('>jingle'));\n            break;\n        }\n        case 'session-terminate': {\n            logger.log('terminating...', sess.sid);\n            let reasonCondition = null;\n            let reasonText = null;\n\n            if ($(iq).find('>jingle>reason').length) {\n                reasonCondition\n                    = $(iq).find('>jingle>reason>:first')[0].tagName;\n                reasonText = $(iq).find('>jingle>reason>text').text();\n            }\n            this.terminate(sess.sid, reasonCondition, reasonText);\n            this.eventEmitter.emit(XMPPEvents.CALL_ENDED,\n                sess, reasonCondition, reasonText);\n            break;\n        }\n        case 'transport-replace':\n            logger.info('(TIME) Start transport replace', now);\n            Statistics.sendAnalytics(createJingleEvent(\n                ACTION_JINGLE_TR_RECEIVED,\n                {\n                    p2p: isP2P,\n                    value: now\n                }));\n\n            sess.replaceTransport($(iq).find('>jingle'), () => {\n                const successTime = window.performance.now();\n\n                logger.info('(TIME) Transport replace success!', successTime);\n                Statistics.sendAnalytics(createJingleEvent(\n                    ACTION_JINGLE_TR_SUCCESS,\n                    {\n                        p2p: isP2P,\n                        value: successTime\n                    }));\n            }, error => {\n                GlobalOnErrorHandler.callErrorHandler(error);\n                logger.error('Transport replace failed', error);\n                sess.sendTransportReject();\n            });\n            break;\n        case 'addsource': // FIXME: proprietary, un-jingleish\n        case 'source-add': // FIXME: proprietary\n            sess.addRemoteStream($(iq).find('>jingle>content'));\n            break;\n        case 'removesource': // FIXME: proprietary, un-jingleish\n        case 'source-remove': // FIXME: proprietary\n            sess.removeRemoteStream($(iq).find('>jingle>content'));\n            break;\n        default:\n            logger.warn('jingle action not implemented', action);\n            ack.attrs({ type: 'error' });\n            ack.c('error', { type: 'cancel' })\n                .c('bad-request',\n                    { xmlns: 'urn:ietf:params:xml:ns:xmpp-stanzas' })\n                .up();\n            break;\n        }\n        this.connection.send(ack);\n\n        return true;\n    }\n\n    /**\n     * Creates new <tt>JingleSessionPC</tt> meant to be used in a direct P2P\n     * connection, configured as 'initiator'.\n     * @param {string} me our JID\n     * @param {string} peer remote participant's JID\n     * @return {JingleSessionPC}\n     */\n    newP2PJingleSession(me, peer) {\n        const sess\n            = new JingleSessionPC(\n                RandomUtil.randomHexString(12),\n                me,\n                peer,\n                this.connection,\n                this.mediaConstraints,\n                this.p2pIceConfig,\n                /* P2P */ true,\n                /* initiator */ true,\n                this.xmpp.options);\n\n        this.sessions[sess.sid] = sess;\n\n        return sess;\n    }\n\n    /**\n     *\n     * @param sid\n     * @param reasonCondition\n     * @param reasonText\n     */\n    terminate(sid, reasonCondition, reasonText) {\n        if (this.sessions.hasOwnProperty(sid)) {\n            if (this.sessions[sid].state !== 'ended') {\n                this.sessions[sid].onTerminated(reasonCondition, reasonText);\n            }\n            delete this.sessions[sid];\n        }\n    }\n\n    /**\n     *\n     */\n    getStunAndTurnCredentials() {\n        // get stun and turn configuration from server via xep-0215\n        // uses time-limited credentials as described in\n        // http://tools.ietf.org/html/draft-uberti-behave-turn-rest-00\n        //\n        // See https://code.google.com/p/prosody-modules/source/browse/\n        // mod_turncredentials/mod_turncredentials.lua\n        // for a prosody module which implements this.\n        //\n        // Currently, this doesn't work with updateIce and therefore credentials\n        // with a long validity have to be fetched before creating the\n        // peerconnection.\n        // TODO: implement refresh via updateIce as described in\n        //      https://code.google.com/p/webrtc/issues/detail?id=1650\n        this.connection.sendIQ(\n            $iq({ type: 'get',\n                to: this.connection.domain })\n                .c('services', { xmlns: 'urn:xmpp:extdisco:1' })\n                .c('service', { host: `turn.${this.connection.domain}` }),\n            res => {\n                const iceservers = [];\n\n                $(res).find('>services>service').each((idx, el) => {\n                    // eslint-disable-next-line no-param-reassign\n                    el = $(el);\n                    const dict = {};\n                    const type = el.attr('type');\n\n                    switch (type) {\n                    case 'stun':\n                        dict.url = `stun:${el.attr('host')}`;\n                        if (el.attr('port')) {\n                            dict.url += `:${el.attr('port')}`;\n                        }\n                        iceservers.push(dict);\n                        break;\n                    case 'turn':\n                    case 'turns': {\n                        dict.url = `${type}:`;\n                        const username = el.attr('username');\n\n                        // https://code.google.com/p/webrtc/issues/detail\n                        // ?id=1508\n\n                        if (username) {\n                            const match\n                                = navigator.userAgent.match(\n                                    /Chrom(e|ium)\\/([0-9]+)\\./);\n\n                            if (match && parseInt(match[2], 10) < 28) {\n                                dict.url += `${username}@`;\n                            } else {\n                                // only works in M28\n                                dict.username = username;\n                            }\n                        }\n                        dict.url += el.attr('host');\n                        const port = el.attr('port');\n\n                        if (port && port !== '3478') {\n                            dict.url += `:${el.attr('port')}`;\n                        }\n                        const transport = el.attr('transport');\n\n                        if (transport && transport !== 'udp') {\n                            dict.url += `?transport=${transport}`;\n                        }\n\n                        dict.credential = el.attr('password')\n                                || dict.credential;\n                        iceservers.push(dict);\n                        break;\n                    }\n                    }\n                });\n\n                const options = this.xmpp.options;\n\n                if (options.useStunTurn) {\n                    this.jvbIceConfig.iceServers = iceservers;\n                }\n\n                if (options.p2p && options.p2p.useStunTurn) {\n                    this.p2pIceConfig.iceServers = iceservers;\n                }\n\n            }, err => {\n                logger.warn('getting turn credentials failed', err);\n                logger.warn('is mod_turncredentials or similar installed?');\n            });\n\n        // implement push?\n    }\n\n    /**\n     * Returns the data saved in 'updateLog' in a format to be logged.\n     */\n    getLog() {\n        const data = {};\n\n        Object.keys(this.sessions).forEach(sid => {\n            const session = this.sessions[sid];\n            const pc = session.peerconnection;\n\n            if (pc && pc.updateLog) {\n                // FIXME: should probably be a .dump call\n                data[`jingle_${sid}`] = {\n                    updateLog: pc.updateLog,\n                    stats: pc.stats,\n                    url: window.location.href\n                };\n            }\n        });\n\n        return data;\n    }\n}\n\n/* eslint-enable newline-per-chained-call */\n\n/**\n *\n * @param XMPP\n * @param eventEmitter\n * @param iceConfig\n */\nexport default function initJingle(XMPP, eventEmitter, iceConfig) {\n    Strophe.addConnectionPlugin(\n        'jingle',\n        new JingleConnectionPlugin(XMPP, eventEmitter, iceConfig));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/strophe.jingle.js","/* global __filename, $ */\n\nimport {\n    ICE_DURATION,\n    ICE_STATE_CHANGED\n} from '../../service/statistics/AnalyticsEvents';\nimport async from 'async';\nimport { getLogger } from 'jitsi-meet-logger';\nimport { $iq, Strophe } from 'strophe.js';\nimport { integerHash } from '../util/StringUtils';\n\nimport JingleSession from './JingleSession';\nimport * as JingleSessionState from './JingleSessionState';\nimport SDP from './SDP';\nimport SDPDiffer from './SDPDiffer';\nimport SDPUtil from './SDPUtil';\nimport SignalingLayerImpl from './SignalingLayerImpl';\n\nimport Statistics from '../statistics/statistics';\nimport XMPPEvents from '../../service/xmpp/XMPPEvents';\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\n\nconst logger = getLogger(__filename);\n\n/**\n * Constant tells how long we're going to wait for IQ response, before timeout\n * error is  triggered.\n * @type {number}\n */\nconst IQ_TIMEOUT = 10000;\n\n/*\n * The default number of samples (per stat) to keep when webrtc stats gathering\n * is enabled in TraceablePeerConnection.\n */\nconst DEFAULT_MAX_STATS = 300;\n\n/**\n *\n */\nexport default class JingleSessionPC extends JingleSession {\n    /**\n     * Parses 'senders' attribute of the video content.\n     * @param {jQuery} jingleContents\n     * @return {string|null} one of the values of content \"senders\" attribute\n     * defined by Jingle. If there is no \"senders\" attribute or if the value is\n     * invalid then <tt>null</tt> will be returned.\n     * @private\n     */\n    static parseVideoSenders(jingleContents) {\n        const videoContents = jingleContents.find('>content[name=\"video\"]');\n\n        if (videoContents.length) {\n            const senders = videoContents[0].getAttribute('senders');\n\n            if (senders === 'both'\n                || senders === 'initiator'\n                || senders === 'responder'\n                || senders === 'none') {\n                return senders;\n            }\n        }\n\n        return null;\n    }\n\n    /* eslint-disable max-params */\n\n    /**\n     * Creates new <tt>JingleSessionPC</tt>\n     * @param {string} sid the Jingle Session ID - random string which\n     * identifies the session\n     * @param {string} localJid our JID\n     * @param {string} remoteJid remote peer JID\n     * @param {Strophe.Connection} connection Strophe XMPP connection instance\n     * used to send packets.\n     * @param mediaConstraints the media constraints object passed to\n     * createOffer/Answer, as defined by the WebRTC standard\n     * @param iceConfig the ICE servers config object as defined by the WebRTC\n     * standard.\n     * @param {boolean} isP2P indicates whether this instance is\n     * meant to be used in a direct, peer to peer connection or <tt>false</tt>\n     * if it's a JVB connection.\n     * @param {boolean} isInitiator indicates whether or not we are the side\n     * which sends the 'session-initiate'.\n     * @param {object} options a set of config options\n     * @param {boolean} options.webrtcIceUdpDisable <tt>true</tt> to block UDP\n     * candidates.\n     * @param {boolean} options.webrtcIceTcpDisable <tt>true</tt> to block TCP\n     * candidates.\n     * @param {boolean} options.failICE it's an option used in the tests. Set to\n     * <tt>true</tt> to block any real candidates and make the ICE fail.\n     *\n     * @constructor\n     *\n     * @implements {SignalingLayer}\n     */\n    constructor(\n            sid,\n            localJid,\n            remoteJid,\n            connection,\n            mediaConstraints,\n            iceConfig,\n            isP2P,\n            isInitiator,\n            options) {\n        super(\n            sid, localJid, remoteJid, connection, mediaConstraints, iceConfig);\n\n        /**\n         * Stores result of {@link window.performance.now()} at the time when\n         * ICE enters 'checking' state.\n         * @type {number|null} null if no value has been stored yet\n         * @private\n         */\n        this._iceCheckingStartedTimestamp = null;\n\n        /**\n         * Stores result of {@link window.performance.now()} at the time when\n         * first ICE candidate is spawned by the peerconnection to mark when\n         * ICE gathering started. That's, because ICE gathering state changed\n         * events are not supported by most of the browsers, so we try something\n         * that will work everywhere. It may not be as accurate, but given that\n         * 'host' candidate usually comes first, the delay should be minimal.\n         * @type {number|null} null if no value has been stored yet\n         * @private\n         */\n        this._gatheringStartedTimestamp = null;\n\n        /**\n         * Indicates whether or not this session is willing to send/receive\n         * video media. When set to <tt>false</tt> the underlying peer\n         * connection will disable local video transfer and the remote peer will\n         * be will be asked to stop sending video via 'content-modify' IQ\n         * (the senders attribute of video contents will be adjusted\n         * accordingly). Note that this notification is sent only in P2P\n         * session, because Jicofo does not support it yet. Obviously when\n         * the value is changed from <tt>false</tt> to <tt>true</tt> another\n         * notification will be sent to resume video transfer on the remote\n         * side.\n         * @type {boolean}\n         * @private\n         */\n        this._localVideoActive = true;\n\n        /**\n         * Indicates whether or not the remote peer has video transfer active.\n         * When set to <tt>true</tt> it means that remote peer is neither\n         * sending nor willing to receive video. In such case we'll ask\n         * our peerconnection to stop sending video by calling\n         * {@link TraceablePeerConnection.setVideoTransferActive} with\n         * <tt>false</tt>.\n         * @type {boolean}\n         * @private\n         */\n        this._remoteVideoActive = true;\n\n        /**\n         * Marks that ICE gathering duration has been reported already. That\n         * prevents reporting it again, after eventual 'transport-replace' (JVB\n         * conference migration/ICE restart).\n         * @type {boolean}\n         * @private\n         */\n        this._gatheringReported = false;\n\n        this.lasticecandidate = false;\n        this.closed = false;\n\n        /**\n         * Indicates whether this instance is an initiator or an answerer of\n         * the Jingle session.\n         * @type {boolean}\n         */\n        this.isInitiator = isInitiator;\n\n        /**\n         * Indicates whether or not this <tt>JingleSessionPC</tt> is used in\n         * a peer to peer type of session.\n         * @type {boolean} <tt>true</tt> if it's a peer to peer\n         * session or <tt>false</tt> if it's a JVB session\n         */\n        this.isP2P = isP2P;\n\n        /**\n         * The signaling layer implementation.\n         * @type {SignalingLayerImpl}\n         */\n        this.signalingLayer = new SignalingLayerImpl();\n\n        this.webrtcIceUdpDisable = Boolean(options.webrtcIceUdpDisable);\n        this.webrtcIceTcpDisable = Boolean(options.webrtcIceTcpDisable);\n\n        /**\n         * Flag used to enforce ICE failure through the URL parameter for\n         * the automatic testing purpose.\n         * @type {boolean}\n         */\n        this.failICE = Boolean(options.failICE);\n\n        this.modificationQueue\n            = async.queue(this._processQueueTasks.bind(this), 1);\n\n        /**\n         * Flag used to guarantee that the connection established event is\n         * triggered just once.\n         * @type {boolean}\n         */\n        this.wasConnected = false;\n\n        /**\n         * Keeps track of how long (in ms) it took from ICE start to ICE\n         * connect.\n         *\n         * @type {number}\n         */\n        this.establishmentDuration = undefined;\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Checks whether or not this session instance has been ended and eventually\n     * logs a message which mentions that given <tt>actionName</tt> was\n     * cancelled.\n     * @param {string} actionName\n     * @return {boolean} <tt>true</tt> if this {@link JingleSessionPC} has\n     * entered {@link JingleSessionState.ENDED} or <tt>false</tt> otherwise.\n     * @private\n     */\n    _assertNotEnded(actionName) {\n        if (this.state === JingleSessionState.ENDED) {\n            logger.log(\n                `The session has ended - cancelling action: ${actionName}`);\n\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     *\n     */\n    doInitialize() {\n        this.lasticecandidate = false;\n\n        // True if reconnect is in progress\n        this.isReconnect = false;\n\n        // Set to true if the connection was ever stable\n        this.wasstable = false;\n\n        const pcOptions = { disableRtx: this.room.options.disableRtx };\n\n        if (this.room.options.gatherStats) {\n            pcOptions.maxstats = DEFAULT_MAX_STATS;\n        }\n\n        if (this.isP2P) {\n            // simulcast needs to be disabled for P2P (121) calls\n            pcOptions.disableSimulcast = true;\n            pcOptions.disableH264\n                = this.room.options.p2p && this.room.options.p2p.disableH264;\n            pcOptions.preferH264\n                = this.room.options.p2p && this.room.options.p2p.preferH264;\n\n            const abtestSuspendVideo = this._abtestSuspendVideoEnabled();\n\n            if (typeof abtestSuspendVideo !== 'undefined') {\n                pcOptions.abtestSuspendVideo = abtestSuspendVideo;\n            }\n        } else {\n            // H264 does not support simulcast, so it needs to be disabled.\n            pcOptions.disableSimulcast\n                = this.room.options.disableSimulcast\n                    || (this.room.options.preferH264\n                            && !this.room.options.disableH264);\n            pcOptions.preferH264 = this.room.options.preferH264;\n            pcOptions.enableFirefoxSimulcast\n                = this.room.options.testing\n                    && this.room.options.testing.enableFirefoxSimulcast;\n        }\n\n        this.peerconnection\n            = this.rtc.createPeerConnection(\n                    this.signalingLayer,\n                    this.iceConfig,\n                    this.isP2P,\n                    pcOptions);\n\n        this.peerconnection.onicecandidate = ev => {\n            if (!ev) {\n                // There was an incomplete check for ev before which left\n                // the last line of the function unprotected from a potential\n                // throw of an exception. Consequently, it may be argued that\n                // the check is unnecessary. Anyway, I'm leaving it and making\n                // the check complete.\n                return;\n            }\n\n            // XXX this is broken, candidate is not parsed.\n            const candidate = ev.candidate;\n            const now = window.performance.now();\n\n            if (candidate) {\n                if (this._gatheringStartedTimestamp === null) {\n                    this._gatheringStartedTimestamp = now;\n                }\n\n                // Discard candidates of disabled protocols.\n                let protocol = candidate.protocol;\n\n                if (typeof protocol === 'string') {\n                    protocol = protocol.toLowerCase();\n                    if (protocol === 'tcp' || protocol === 'ssltcp') {\n                        if (this.webrtcIceTcpDisable) {\n                            return;\n                        }\n                    } else if (protocol === 'udp') {\n                        if (this.webrtcIceUdpDisable) {\n                            return;\n                        }\n                    }\n                }\n            } else if (!this._gatheringReported) {\n                // End of gathering\n                Statistics.sendAnalytics(\n                    ICE_DURATION,\n                    {\n                        phase: 'gathering',\n                        value: now - this._gatheringStartedTimestamp,\n                        p2p: this.isP2P,\n                        initiator: this.isInitiator\n                    });\n                this._gatheringReported = true;\n            }\n            this.sendIceCandidate(candidate);\n        };\n\n        // Note there is a change in the spec about closed:\n        // This value moved into the RTCPeerConnectionState enum in\n        // the May 13, 2016 draft of the specification, as it reflects the state\n        // of the RTCPeerConnection, not the signaling connection. You now\n        // detect a closed connection by checking for connectionState to be\n        // \"closed\" instead.\n        // I suppose at some point this will be moved to onconnectionstatechange\n        this.peerconnection.onsignalingstatechange = () => {\n            if (!this.peerconnection) {\n                return;\n            }\n            if (this.peerconnection.signalingState === 'stable') {\n                this.wasstable = true;\n            } else if (\n                (this.peerconnection.signalingState === 'closed'\n                || this.peerconnection.connectionState === 'closed')\n                && !this.closed) {\n                this.room.eventEmitter.emit(XMPPEvents.SUSPEND_DETECTED, this);\n            }\n        };\n\n        /**\n         * The oniceconnectionstatechange event handler contains the code to\n         * execute when the iceconnectionstatechange event, of type Event,\n         * is received by this RTCPeerConnection. Such an event is sent when\n         * the value of RTCPeerConnection.iceConnectionState changes.\n         */\n        this.peerconnection.oniceconnectionstatechange = () => {\n            if (!this.peerconnection\n                    || !this._assertNotEnded('oniceconnectionstatechange')) {\n                return;\n            }\n            const now = window.performance.now();\n\n            if (!this.isP2P) {\n                this.room.connectionTimes[\n                    `ice.state.${this.peerconnection.iceConnectionState}`]\n                    = now;\n            }\n            logger.log(\n                `(TIME) ICE ${this.peerconnection.iceConnectionState}`\n                    + ` P2P? ${this.isP2P}:\\t`,\n                now);\n\n            Statistics.sendAnalytics(\n                ICE_STATE_CHANGED,\n                {\n                    p2p: this.isP2P,\n                    state: this.peerconnection.iceConnectionState,\n                    'signaling_state': this.peerconnection.signalingState,\n                    reconnect: this.isReconnect,\n                    value: now\n                });\n\n            this.room.eventEmitter.emit(\n                XMPPEvents.ICE_CONNECTION_STATE_CHANGED,\n                this,\n                this.peerconnection.iceConnectionState);\n            switch (this.peerconnection.iceConnectionState) {\n            case 'checking':\n                this._iceCheckingStartedTimestamp = now;\n                break;\n            case 'connected':\n                // Informs interested parties that the connection has been\n                // restored.\n                if (this.peerconnection.signalingState === 'stable') {\n                    if (this.isReconnect) {\n                        this.room.eventEmitter.emit(\n                            XMPPEvents.CONNECTION_RESTORED, this);\n                    }\n                }\n\n                if (!this.wasConnected && this.wasstable) {\n\n                    Statistics.sendAnalytics(\n                        ICE_DURATION,\n                        {\n                            phase: 'checking',\n                            value: now - this._iceCheckingStartedTimestamp,\n                            p2p: this.isP2P,\n                            initiator: this.isInitiator\n                        });\n\n                    // Switch between ICE gathering and ICE checking whichever\n                    // started first (scenarios are different for initiator\n                    // vs responder)\n                    const iceStarted\n                        = Math.min(\n                            this._iceCheckingStartedTimestamp,\n                            this._gatheringStartedTimestamp);\n\n                    this.establishmentDuration = now - iceStarted;\n\n                    Statistics.sendAnalytics(\n                        ICE_DURATION,\n                        {\n                            phase: 'establishment',\n                            value: this.establishmentDuration,\n                            p2p: this.isP2P,\n                            initiator: this.isInitiator\n                        });\n\n                    this.wasConnected = true;\n                    this.room.eventEmitter.emit(\n                        XMPPEvents.CONNECTION_ESTABLISHED, this);\n                }\n                this.isReconnect = false;\n                break;\n            case 'disconnected':\n                if (this.closed) {\n                    break;\n                }\n                this.isReconnect = true;\n\n                // Informs interested parties that the connection has been\n                // interrupted.\n                if (this.wasstable) {\n                    this.room.eventEmitter.emit(\n                        XMPPEvents.CONNECTION_INTERRUPTED, this);\n                }\n                break;\n            case 'failed':\n                this.room.eventEmitter.emit(\n                    XMPPEvents.CONNECTION_ICE_FAILED, this);\n                this.room.eventEmitter.emit(\n                    XMPPEvents.CONFERENCE_SETUP_FAILED,\n                    this,\n                    new Error('ICE fail'));\n                break;\n            }\n        };\n        this.peerconnection.onnegotiationneeded = () => {\n            this.room.eventEmitter.emit(XMPPEvents.PEERCONNECTION_READY, this);\n        };\n\n        // The signaling layer will bind it's listeners at this point\n        this.signalingLayer.setChatRoom(this.room);\n    }\n\n    /**\n     * Sends given candidate in Jingle 'transport-info' message.\n     * @param {RTCIceCandidate} candidate the WebRTC ICE candidate instance\n     * @private\n     */\n    sendIceCandidate(candidate) {\n        const localSDP = new SDP(this.peerconnection.localDescription.sdp);\n\n        if (candidate && !this.lasticecandidate) {\n            const ice\n                = SDPUtil.iceparams(\n                    localSDP.media[candidate.sdpMLineIndex], localSDP.session);\n            const jcand = SDPUtil.candidateToJingle(candidate.candidate);\n\n            if (!(ice && jcand)) {\n                const errorMesssage = 'failed to get ice && jcand';\n\n                GlobalOnErrorHandler.callErrorHandler(new Error(errorMesssage));\n                logger.error(errorMesssage);\n\n                return;\n            }\n            ice.xmlns = 'urn:xmpp:jingle:transports:ice-udp:1';\n\n            if (this.usedrip) {\n                if (this.dripContainer.length === 0) {\n                    // start 20ms callout\n                    setTimeout(() => {\n                        if (this.dripContainer.length === 0) {\n                            return;\n                        }\n                        this.sendIceCandidates(this.dripContainer);\n                        this.dripContainer = [];\n                    }, 20);\n                }\n                this.dripContainer.push(candidate);\n            } else {\n                this.sendIceCandidates([ candidate ]);\n            }\n        } else {\n            logger.log('sendIceCandidate: last candidate.');\n\n            // FIXME: remember to re-think in ICE-restart\n            this.lasticecandidate = true;\n        }\n    }\n\n    /**\n     * Sends given candidates in Jingle 'transport-info' message.\n     * @param {Array<RTCIceCandidate>} candidates an array of the WebRTC ICE\n     * candidate instances\n     * @private\n     */\n    sendIceCandidates(candidates) {\n        if (!this._assertNotEnded('sendIceCandidates')) {\n\n            return;\n        }\n\n        logger.log('sendIceCandidates', candidates);\n        const cand = $iq({ to: this.remoteJid,\n            type: 'set' })\n            .c('jingle', { xmlns: 'urn:xmpp:jingle:1',\n                action: 'transport-info',\n                initiator: this.initiator,\n                sid: this.sid });\n\n        const localSDP = new SDP(this.peerconnection.localDescription.sdp);\n\n        for (let mid = 0; mid < localSDP.media.length; mid++) {\n            const cands = candidates.filter(el => el.sdpMLineIndex === mid);\n            const mline\n                = SDPUtil.parseMLine(localSDP.media[mid].split('\\r\\n')[0]);\n\n            if (cands.length > 0) {\n                const ice\n                    = SDPUtil.iceparams(localSDP.media[mid], localSDP.session);\n\n                ice.xmlns = 'urn:xmpp:jingle:transports:ice-udp:1';\n                cand.c('content', {\n                    creator: this.initiator === this.localJid\n                        ? 'initiator' : 'responder',\n                    name: cands[0].sdpMid ? cands[0].sdpMid : mline.media\n                }).c('transport', ice);\n                for (let i = 0; i < cands.length; i++) {\n                    const candidate\n                        = SDPUtil.candidateToJingle(cands[i].candidate);\n\n                    // Mangle ICE candidate if 'failICE' test option is enabled\n\n                    if (this.failICE) {\n                        candidate.ip = '1.1.1.1';\n                    }\n                    cand.c('candidate', candidate).up();\n                }\n\n                // add fingerprint\n                const fingerprintLine\n                    = SDPUtil.findLine(\n                        localSDP.media[mid],\n                        'a=fingerprint:', localSDP.session);\n\n                if (fingerprintLine) {\n                    const tmp = SDPUtil.parseFingerprint(fingerprintLine);\n\n                    tmp.required = true;\n                    cand.c(\n                        'fingerprint',\n                        { xmlns: 'urn:xmpp:jingle:apps:dtls:0' })\n                        .t(tmp.fingerprint);\n                    delete tmp.fingerprint;\n                    cand.attrs(tmp);\n                    cand.up();\n                }\n                cand.up(); // transport\n                cand.up(); // content\n            }\n        }\n\n        // might merge last-candidate notification into this, but it is called\n        // a lot later. See webrtc issue #2340\n        // logger.log('was this the last candidate', this.lasticecandidate);\n        this.connection.sendIQ(\n            cand, null, this.newJingleErrorHandler(cand), IQ_TIMEOUT);\n    }\n\n    /**\n     * {@inheritDoc}\n     */\n    addIceCandidates(elem) {\n        if (this.peerconnection.signalingState === 'closed') {\n            logger.warn('Ignored add ICE candidate when in closed state');\n\n            return;\n        }\n\n        const iceCandidates = [];\n\n        elem.find('>content>transport>candidate')\n            .each((idx, candidate) => {\n                let line = SDPUtil.candidateFromJingle(candidate);\n\n                line = line.replace('\\r\\n', '').replace('a=', '');\n\n                // FIXME this code does not care to handle\n                // non-bundle transport\n                const rtcCandidate = new RTCIceCandidate({\n                    sdpMLineIndex: 0,\n\n                    // FF comes up with more complex names like audio-23423,\n                    // Given that it works on both Chrome and FF without\n                    // providing it, let's leave it like this for the time\n                    // being...\n                    // sdpMid: 'audio',\n                    sdpMid: '',\n                    candidate: line\n                });\n\n                iceCandidates.push(rtcCandidate);\n            });\n\n        if (!iceCandidates.length) {\n            logger.error(\n                'No ICE candidates to add ?', elem[0] && elem[0].outerHTML);\n\n            return;\n        }\n\n        // We want to have this task queued, so that we know it is executed,\n        // after the initial sRD/sLD offer/answer cycle was done (based on\n        // the assumption that candidates are spawned after the offer/answer\n        // and XMPP preserves order).\n        const workFunction = finishedCallback => {\n            for (const iceCandidate of iceCandidates) {\n                this.peerconnection.addIceCandidate(\n                    iceCandidate,\n                    () => {\n                        logger.debug('addIceCandidate ok!');\n                    },\n                    error => {\n                        logger.error('addIceCandidate failed!', error);\n                    });\n            }\n\n            finishedCallback();\n        };\n\n        logger.debug(\n            `Queued add (${iceCandidates.length}) ICE candidates task...`);\n        this.modificationQueue.push(workFunction);\n    }\n\n    /**\n     *\n     * @param contents\n     */\n    readSsrcInfo(contents) {\n        const ssrcs\n            = $(contents).find(\n                '>description>'\n                    + 'source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]');\n\n        ssrcs.each((i, ssrcElement) => {\n            const ssrc = Number(ssrcElement.getAttribute('ssrc'));\n\n            if (this.isP2P) {\n                // In P2P all SSRCs are owner by the remote peer\n                this.signalingLayer.setSSRCOwner(\n                    ssrc, Strophe.getResourceFromJid(this.remoteJid));\n            } else {\n                $(ssrcElement)\n                    .find('>ssrc-info[xmlns=\"http://jitsi.org/jitmeet\"]')\n                    .each((i3, ssrcInfoElement) => {\n                        const owner = ssrcInfoElement.getAttribute('owner');\n\n                        if (owner && owner.length) {\n                            if (isNaN(ssrc) || ssrc < 0) {\n                                logger.warn(\n                                    `Invalid SSRC ${ssrc} value received`\n                                        + ` for ${owner}`);\n                            } else {\n                                this.signalingLayer.setSSRCOwner(\n                                    ssrc,\n                                    Strophe.getResourceFromJid(owner));\n                            }\n                        }\n                    });\n            }\n        });\n    }\n\n    /**\n     * Makes the underlying TraceablePeerConnection generate new SSRC for\n     * the recvonly video stream.\n     * @deprecated\n     */\n    generateRecvonlySsrc() {\n        if (this.peerconnection) {\n            this.peerconnection.generateRecvonlySsrc();\n        } else {\n            logger.error(\n                'Unable to generate recvonly SSRC - no peerconnection');\n        }\n    }\n\n    /* eslint-disable max-params */\n    /**\n     * Accepts incoming Jingle 'session-initiate' and should send\n     * 'session-accept' in result.\n     * @param jingleOffer jQuery selector pointing to the jingle element of\n     * the offer IQ\n     * @param success callback called when we accept incoming session\n     * successfully and receive RESULT packet to 'session-accept' sent.\n     * @param failure function(error) called if for any reason we fail to accept\n     * the incoming offer. 'error' argument can be used to log some details\n     * about the error.\n     * @param {Array<JitsiLocalTrack>} [localTracks] the optional list of\n     * the local tracks that will be added, before the offer/answer cycle\n     * executes. We allow the localTracks to optionally be passed in so that\n     * the addition of the local tracks and the processing of the initial offer\n     * can all be done atomically. We want to make sure that any other\n     * operations which originate in the XMPP Jingle messages related with\n     * this session to be executed with an assumption that the initial\n     * offer/answer cycle has been executed already.\n     */\n    acceptOffer(jingleOffer, success, failure, localTracks) {\n        this.setOfferAnswerCycle(\n            jingleOffer,\n            () => {\n                // FIXME we may not care about RESULT packet for session-accept\n                // then we should either call 'success' here immediately or\n                // modify sendSessionAccept method to do that\n                this.sendSessionAccept(success, failure);\n            },\n            failure,\n            localTracks);\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Creates an offer and sends Jingle 'session-initiate' to the remote peer.\n     * @param {Array<JitsiLocalTrack>} localTracks the local tracks that will be\n     * added, before the offer/answer cycle executes (for the local track\n     * addition to be an atomic operation together with the offer/answer).\n     */\n    invite(localTracks) {\n        if (!this.isInitiator) {\n            throw new Error('Trying to invite from the responder session');\n        }\n        const workFunction = finishedCallback => {\n            for (const localTrack of localTracks) {\n                this.peerconnection.addTrack(localTrack);\n            }\n            this.peerconnection.createOffer(\n                offerSdp => {\n                    this.peerconnection.setLocalDescription(\n                        offerSdp,\n                        () => {\n                            // NOTE that the offer is obtained from\n                            // the localDescription getter as it needs to go\n                            // though the transformation chain.\n                            this.sendSessionInitiate(\n                                this.peerconnection.localDescription.sdp);\n                            finishedCallback();\n                        },\n                        error => {\n                            logger.error(\n                                'Failed to set local SDP', error, offerSdp);\n                            finishedCallback(error);\n                        });\n                },\n                error => {\n                    logger.error(\n                        'Failed to create an offer',\n                        error,\n                        this.mediaConstraints);\n                    finishedCallback(error);\n                },\n                this.mediaConstraints);\n        };\n\n        this.modificationQueue.push(\n            workFunction,\n            error => {\n                if (error) {\n                    logger.error('invite error', error);\n                } else {\n                    logger.debug('invite executed - OK');\n                }\n            });\n    }\n\n    /**\n     * Sends 'session-initiate' to the remote peer.\n     *\n     * NOTE this method is synchronous and we're not waiting for the RESULT\n     * response which would delay the startup process.\n     *\n     * @param {string} offerSdp  - The local session description which will be\n     * used to generate an offer.\n     * @private\n     */\n    sendSessionInitiate(offerSdp) {\n        let init = $iq({\n            to: this.remoteJid,\n            type: 'set'\n        }).c('jingle', {\n            xmlns: 'urn:xmpp:jingle:1',\n            action: 'session-initiate',\n            initiator: this.initiator,\n            sid: this.sid\n        });\n\n        new SDP(offerSdp).toJingle(\n            init,\n            this.initiator === this.me ? 'initiator' : 'responder');\n        init = init.tree();\n        logger.info('Session-initiate: ', init);\n        this.connection.sendIQ(init,\n            () => {\n                logger.info('Got RESULT for \"session-initiate\"');\n            },\n            error => {\n                logger.error('\"session-initiate\" error', error);\n            },\n            IQ_TIMEOUT);\n    }\n\n    /**\n     * Sets the answer received from the remote peer.\n     * @param jingleAnswer\n     */\n    setAnswer(jingleAnswer) {\n        if (!this.isInitiator) {\n            throw new Error('Trying to set an answer on the responder session');\n        }\n        this.setOfferAnswerCycle(\n            jingleAnswer,\n            () => {\n                logger.info('setAnswer - succeeded');\n            },\n            error => {\n                logger.error('setAnswer failed: ', error);\n            });\n    }\n\n    /* eslint-disable max-params */\n    /**\n     * This is a setRemoteDescription/setLocalDescription cycle which starts at\n     * converting Strophe Jingle IQ into remote offer SDP. Once converted\n     * setRemoteDescription, createAnswer and setLocalDescription calls follow.\n     * @param jingleOfferAnswerIq jQuery selector pointing to the jingle element\n     *        of the offer (or answer) IQ\n     * @param success callback called when sRD/sLD cycle finishes successfully.\n     * @param failure callback called with an error object as an argument if we\n     *        fail at any point during setRD, createAnswer, setLD.\n     * @param {Array<JitsiLocalTrack>} [localTracks] the optional list of\n     * the local tracks that will be added, before the offer/answer cycle\n     * executes (for the local track addition to be an atomic operation together\n     * with the offer/answer).\n     */\n    setOfferAnswerCycle(jingleOfferAnswerIq, success, failure, localTracks) {\n        const workFunction = finishedCallback => {\n\n            if (localTracks) {\n                for (const track of localTracks) {\n                    this.peerconnection.addTrack(track);\n                }\n            }\n\n            const newRemoteSdp\n                = this._processNewJingleOfferIq(jingleOfferAnswerIq);\n            const oldLocalSdp\n                = this.peerconnection.localDescription.sdp;\n\n            this._renegotiate(newRemoteSdp.raw)\n                .then(() => {\n                    if (this.state === JingleSessionState.PENDING) {\n                        this.state = JingleSessionState.ACTIVE;\n\n                        // Sync up video transfer active/inactive only after\n                        // the initial O/A cycle. We want to adjust the video\n                        // media direction only in the local SDP and the Jingle\n                        // contents direction included in the initial\n                        // offer/answer is mapped to the remote SDP. Jingle\n                        // 'content-modify' IQ is processed in a way that it\n                        // will only modify local SDP when remote peer is no\n                        // longer interested in receiving video content.\n                        // Changing media direction in the remote SDP will mess\n                        // up our SDP translation chain (simulcast, video mute,\n                        // RTX etc.)\n                        if (this.isP2P && !this._localVideoActive) {\n                            this.sendContentModify(this._localVideoActive);\n                        }\n                    }\n\n                    // Old local SDP will be available when we're setting answer\n                    // for the first time, but not when offer and it's fine\n                    // since we're generating an answer now it will contain all\n                    // our SSRCs\n                    if (oldLocalSdp) {\n                        const newLocalSdp\n                            = new SDP(this.peerconnection.localDescription.sdp);\n\n                        this.notifyMySSRCUpdate(\n                            new SDP(oldLocalSdp), newLocalSdp);\n                    }\n\n                    finishedCallback();\n                }, error => {\n                    logger.error(\n                        `Error renegotiating after setting new remote ${\n                            this.isInitiator ? 'answer: ' : 'offer: '}${error}`,\n                        newRemoteSdp);\n                    JingleSessionPC.onJingleFatalError(this, error);\n                    finishedCallback(error);\n                });\n        };\n\n        this.modificationQueue.push(\n            workFunction,\n            error => {\n                error ? failure(error) : success();\n            });\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Although it states \"replace transport\" it does accept full Jingle offer\n     * which should contain new ICE transport details.\n     * @param jingleOfferElem an element Jingle IQ that contains new offer and\n     *        transport info.\n     * @param success callback called when we succeed to accept new offer.\n     * @param failure function(error) called when we fail to accept new offer.\n     */\n    replaceTransport(jingleOfferElem, success, failure) {\n\n        // We need to first set an offer without the 'data' section to have the\n        // SCTP stack cleaned up. After that the original offer is set to have\n        // the SCTP connection established with the new bridge.\n        this.room.eventEmitter.emit(XMPPEvents.ICE_RESTARTING, this);\n        const originalOffer = jingleOfferElem.clone();\n\n        jingleOfferElem.find('>content[name=\\'data\\']').remove();\n\n        // First set an offer without the 'data' section\n        this.setOfferAnswerCycle(\n            jingleOfferElem,\n            () => {\n                // Now set the original offer(with the 'data' section)\n                this.setOfferAnswerCycle(\n                    originalOffer,\n                    () => {\n                        const localSDP\n                            = new SDP(this.peerconnection.localDescription.sdp);\n\n                        this.sendTransportAccept(localSDP, success, failure);\n                    },\n                    failure);\n            },\n            failure\n        );\n    }\n\n    /**\n     * Sends Jingle 'session-accept' message.\n     * @param {function()} success callback called when we receive 'RESULT'\n     *        packet for the 'session-accept'\n     * @param {function(error)} failure called when we receive an error response\n     *        or when the request has timed out.\n     * @private\n     */\n    sendSessionAccept(success, failure) {\n        // NOTE: since we're just reading from it, we don't need to be within\n        //  the modification queue to access the local description\n        const localSDP = new SDP(this.peerconnection.localDescription.sdp);\n        let accept = $iq({ to: this.remoteJid,\n            type: 'set' })\n            .c('jingle', { xmlns: 'urn:xmpp:jingle:1',\n                action: 'session-accept',\n                initiator: this.initiator,\n                responder: this.responder,\n                sid: this.sid });\n\n        if (this.webrtcIceTcpDisable) {\n            localSDP.removeTcpCandidates = true;\n        }\n        if (this.webrtcIceUdpDisable) {\n            localSDP.removeUdpCandidates = true;\n        }\n        if (this.failICE) {\n            localSDP.failICE = true;\n        }\n        localSDP.toJingle(\n            accept,\n            this.initiator === this.localJid ? 'initiator' : 'responder',\n            null);\n\n        // Calling tree() to print something useful\n        accept = accept.tree();\n        logger.info('Sending session-accept', accept);\n        this.connection.sendIQ(accept,\n            success,\n            this.newJingleErrorHandler(accept, error => {\n                failure(error);\n\n                // 'session-accept' is a critical timeout and we'll\n                // have to restart\n                this.room.eventEmitter.emit(\n                    XMPPEvents.SESSION_ACCEPT_TIMEOUT, this);\n            }),\n            IQ_TIMEOUT);\n\n        // XXX Videobridge needs WebRTC's answer (ICE ufrag and pwd, DTLS\n        // fingerprint and setup) ASAP in order to start the connection\n        // establishment.\n        //\n        // FIXME Flushing the connection at this point triggers an issue with\n        // BOSH request handling in Prosody on slow connections.\n        //\n        // The problem is that this request will be quite large and it may take\n        // time before it reaches Prosody. In the meantime Strophe may decide\n        // to send the next one. And it was observed that a small request with\n        // 'transport-info' usually follows this one. It does reach Prosody\n        // before the previous one was completely received. 'rid' on the server\n        // is increased and Prosody ignores the request with 'session-accept'.\n        // It will never reach Jicofo and everything in the request table is\n        // lost. Removing the flush does not guarantee it will never happen, but\n        // makes it much less likely('transport-info' is bundled with\n        // 'session-accept' and any immediate requests).\n        //\n        // this.connection.flush();\n    }\n\n    /**\n     * Will send 'content-modify' IQ in order to ask the remote peer to\n     * either stop or resume sending video media.\n     * @param {boolean} videoTransferActive <tt>false</tt> to let the other peer\n     * know that we're not sending nor interested in receiving video contents.\n     * When set to <tt>true</tt> remote peer will be asked to resume video\n     * transfer.\n     * @private\n     */\n    sendContentModify(videoTransferActive) {\n        const newSendersValue = videoTransferActive ? 'both' : 'none';\n\n        const sessionModify\n            = $iq({\n                to: this.remoteJid,\n                type: 'set'\n            })\n                .c('jingle', {\n                    xmlns: 'urn:xmpp:jingle:1',\n                    action: 'content-modify',\n                    initiator: this.initiator,\n                    sid: this.sid\n                })\n                .c('content', {\n                    name: 'video',\n                    senders: newSendersValue\n                });\n\n        logger.info(\n            `Sending content-modify, video senders: ${newSendersValue}`);\n\n        this.connection.sendIQ(\n            sessionModify,\n            null,\n            this.newJingleErrorHandler(sessionModify),\n            IQ_TIMEOUT);\n    }\n\n    /**\n     * Sends Jingle 'transport-accept' message which is a response to\n     * 'transport-replace'.\n     * @param localSDP the 'SDP' object with local session description\n     * @param success callback called when we receive 'RESULT' packet for\n     *        'transport-replace'\n     * @param failure function(error) called when we receive an error response\n     *        or when the request has timed out.\n     * @private\n     */\n    sendTransportAccept(localSDP, success, failure) {\n        let transportAccept = $iq({ to: this.remoteJid,\n            type: 'set' })\n            .c('jingle', {\n                xmlns: 'urn:xmpp:jingle:1',\n                action: 'transport-accept',\n                initiator: this.initiator,\n                sid: this.sid\n            });\n\n        localSDP.media.forEach((medialines, idx) => {\n            const mline = SDPUtil.parseMLine(medialines.split('\\r\\n')[0]);\n\n            transportAccept.c('content',\n                {\n                    creator:\n                        this.initiator === this.localJid\n                            ? 'initiator'\n                            : 'responder',\n                    name: mline.media\n                }\n            );\n            localSDP.transportToJingle(idx, transportAccept);\n            transportAccept.up();\n        });\n\n        // Calling tree() to print something useful to the logger\n        transportAccept = transportAccept.tree();\n        logger.info('Sending transport-accept: ', transportAccept);\n\n        this.connection.sendIQ(transportAccept,\n            success,\n            this.newJingleErrorHandler(transportAccept, failure),\n            IQ_TIMEOUT);\n    }\n\n    /**\n     * Sends Jingle 'transport-reject' message which is a response to\n     * 'transport-replace'.\n     * @param success callback called when we receive 'RESULT' packet for\n     *        'transport-replace'\n     * @param failure function(error) called when we receive an error response\n     *        or when the request has timed out.\n     *\n     * FIXME method should be marked as private, but there's some spaghetti that\n     *       needs to be fixed prior doing that\n     */\n    sendTransportReject(success, failure) {\n        // Send 'transport-reject', so that the focus will\n        // know that we've failed\n        let transportReject = $iq({ to: this.remoteJid,\n            type: 'set' })\n            .c('jingle', {\n                xmlns: 'urn:xmpp:jingle:1',\n                action: 'transport-reject',\n                initiator: this.initiator,\n                sid: this.sid\n            });\n\n        transportReject = transportReject.tree();\n        logger.info('Sending \\'transport-reject', transportReject);\n\n        this.connection.sendIQ(transportReject,\n            success,\n            this.newJingleErrorHandler(transportReject, failure),\n            IQ_TIMEOUT);\n    }\n\n    /**\n     * @inheritDoc\n     */\n    terminate(success, failure, options) {\n        if (this.state === JingleSessionState.ENDED) {\n            return;\n        }\n\n        if (!options || Boolean(options.sendSessionTerminate)) {\n            let sessionTerminate\n                = $iq({\n                    to: this.remoteJid,\n                    type: 'set'\n                })\n                    .c('jingle', {\n                        xmlns: 'urn:xmpp:jingle:1',\n                        action: 'session-terminate',\n                        initiator: this.initiator,\n                        sid: this.sid\n                    })\n                    .c('reason')\n                    .c((options && options.reason) || 'success');\n\n            if (options && options.reasonDescription) {\n                sessionTerminate.up()\n                    .c('text')\n                    .t(options.reasonDescription);\n            }\n\n            // Calling tree() to print something useful\n            sessionTerminate = sessionTerminate.tree();\n            logger.info('Sending session-terminate', sessionTerminate);\n            this.connection.sendIQ(\n                sessionTerminate,\n                success,\n                this.newJingleErrorHandler(sessionTerminate, failure),\n                IQ_TIMEOUT);\n        } else {\n            logger.info(`Skipped sending session-terminate for ${this}`);\n        }\n\n        // this should result in 'onTerminated' being called by strope.jingle.js\n        this.connection.jingle.terminate(this.sid);\n    }\n\n    /**\n     *\n     * @param reasonCondition\n     * @param reasonText\n     */\n    onTerminated(reasonCondition, reasonText) {\n        this.state = JingleSessionState.ENDED;\n        this.establishmentDuration = undefined;\n\n        // Do something with reason and reasonCondition when we start to care\n        // this.reasonCondition = reasonCondition;\n        // this.reasonText = reasonText;\n        logger.info(`Session terminated ${this}`, reasonCondition, reasonText);\n\n        this.close();\n    }\n\n    /**\n     * Parse the information from the xml sourceAddElem and translate it\n     *  into sdp lines\n     * @param {jquery xml element} sourceAddElem the source-add\n     *  element from jingle\n     * @param {SDP object} currentRemoteSdp the current remote\n     *  sdp (as of this new source-add)\n     * @returns {list} a list of SDP line strings that should\n     *  be added to the remote SDP\n     */\n    _parseSsrcInfoFromSourceAdd(sourceAddElem, currentRemoteSdp) {\n        const addSsrcInfo = [];\n\n        $(sourceAddElem).each((i1, content) => {\n            const name = $(content).attr('name');\n            let lines = '';\n\n            $(content)\n                .find('ssrc-group[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]')\n                .each(function() {\n                    // eslint-disable-next-line no-invalid-this\n                    const semantics = this.getAttribute('semantics');\n                    const ssrcs\n                        = $(this) // eslint-disable-line no-invalid-this\n                            .find('>source')\n                            .map(function() {\n                                // eslint-disable-next-line no-invalid-this\n                                return this.getAttribute('ssrc');\n                            })\n                            .get();\n\n                    if (ssrcs.length) {\n                        lines\n                            += `a=ssrc-group:${semantics} ${\n                                ssrcs.join(' ')}\\r\\n`;\n                    }\n                });\n\n            // handles both >source and >description>source\n            const tmp\n                = $(content).find(\n                    'source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]');\n\n            /* eslint-disable no-invalid-this */\n            tmp.each(function() {\n                const ssrc = $(this).attr('ssrc');\n\n                if (currentRemoteSdp.containsSSRC(ssrc)) {\n                    logger.warn(\n                        `Source-add request for existing SSRC: ${ssrc}`);\n\n                    return;\n                }\n\n                // eslint-disable-next-line newline-per-chained-call\n                $(this).find('>parameter').each(function() {\n                    lines += `a=ssrc:${ssrc} ${$(this).attr('name')}`;\n                    if ($(this).attr('value') && $(this).attr('value').length) {\n                        lines += `:${$(this).attr('value')}`;\n                    }\n                    lines += '\\r\\n';\n                });\n            });\n\n            /* eslint-enable no-invalid-this */\n            currentRemoteSdp.media.forEach((media, i2) => {\n                if (!SDPUtil.findLine(media, `a=mid:${name}`)) {\n                    return;\n                }\n                if (!addSsrcInfo[i2]) {\n                    addSsrcInfo[i2] = '';\n                }\n                addSsrcInfo[i2] += lines;\n            });\n        });\n\n        return addSsrcInfo;\n    }\n\n    /**\n     * Handles a Jingle source-add message for this Jingle session.\n     * @param elem An array of Jingle \"content\" elements.\n     */\n    addRemoteStream(elem) {\n        this._addOrRemoveRemoteStream(true /* add */, elem);\n    }\n\n    /**\n     * Handles a Jingle source-remove message for this Jingle session.\n     * @param elem An array of Jingle \"content\" elements.\n     */\n    removeRemoteStream(elem) {\n        this._addOrRemoveRemoteStream(false /* remove */, elem);\n    }\n\n    /**\n     * Handles either Jingle 'source-add' or 'source-remove' message for this\n     * Jingle session.\n     * @param {boolean} isAdd <tt>true</tt> for 'source-add' or <tt>false</tt>\n     * otherwise.\n     * @param {Array<Element>} elem an array of Jingle \"content\" elements.\n     * @private\n     */\n    _addOrRemoveRemoteStream(isAdd, elem) {\n        const logPrefix = isAdd ? 'addRemoteStream' : 'removeRemoteStream';\n\n        if (isAdd) {\n            this.readSsrcInfo(elem);\n        }\n\n        const workFunction = finishedCallback => {\n            if (!this.peerconnection.localDescription\n                || !this.peerconnection.localDescription.sdp) {\n                const errMsg = `${logPrefix} - localDescription not ready yet`;\n\n                logger.error(errMsg);\n                finishedCallback(errMsg);\n\n                return;\n            }\n\n            logger.log(`Processing ${logPrefix}`);\n            logger.log(\n                'ICE connection state: ',\n                this.peerconnection.iceConnectionState);\n\n            const oldLocalSdp\n                = new SDP(this.peerconnection.localDescription.sdp);\n            const sdp = new SDP(this.peerconnection.remoteDescription.sdp);\n            const addOrRemoveSsrcInfo\n                = isAdd\n                    ? this._parseSsrcInfoFromSourceAdd(elem, sdp)\n                    : this._parseSsrcInfoFromSourceRemove(elem, sdp);\n            const newRemoteSdp\n                = isAdd\n                    ? this._processRemoteAddSource(addOrRemoveSsrcInfo)\n                    : this._processRemoteRemoveSource(addOrRemoveSsrcInfo);\n\n            this._renegotiate(newRemoteSdp.raw)\n                .then(() => {\n                    const newLocalSdp\n                        = new SDP(this.peerconnection.localDescription.sdp);\n\n                    logger.log(\n                        `${logPrefix} - OK, SDPs: `, oldLocalSdp, newLocalSdp);\n                    this.notifyMySSRCUpdate(oldLocalSdp, newLocalSdp);\n                    finishedCallback();\n                }, error => {\n                    logger.error(`${logPrefix} failed:`, error);\n                    finishedCallback(error);\n                });\n        };\n\n        // Queue and execute\n        this.modificationQueue.push(workFunction);\n    }\n\n    /**\n     * The 'task' function will be given a callback it MUST call with either:\n     *  1) No arguments if it was successful or\n     *  2) An error argument if there was an error\n     * If the task wants to process the success or failure of the task, it\n     * should pass a handler to the .push function, e.g.:\n     * queue.push(task, (err) => {\n     *     if (err) {\n     *         // error handling\n     *     } else {\n     *         // success handling\n     *     }\n     * });\n     */\n    _processQueueTasks(task, finishedCallback) {\n        task(finishedCallback);\n    }\n\n    /**\n     * Takes in a jingle offer iq, returns the new sdp offer\n     * @param {jquery xml element} offerIq the incoming offer\n     * @returns {SDP object} the jingle offer translated to SDP\n     */\n    _processNewJingleOfferIq(offerIq) {\n        const remoteSdp = new SDP('');\n\n        if (this.webrtcIceTcpDisable) {\n            remoteSdp.removeTcpCandidates = true;\n        }\n        if (this.webrtcIceUdpDisable) {\n            remoteSdp.removeUdpCandidates = true;\n        }\n        if (this.failICE) {\n            remoteSdp.failICE = true;\n        }\n\n        remoteSdp.fromJingle(offerIq);\n        this.readSsrcInfo($(offerIq).find('>content'));\n\n        return remoteSdp;\n    }\n\n    /**\n     * Remove the given ssrc lines from the current remote sdp\n     * @param {list} removeSsrcInfo a list of SDP line strings that\n     *  should be removed from the remote SDP\n     * @returns type {SDP Object} the new remote SDP (after removing the lines\n     *  in removeSsrcInfo\n     */\n    _processRemoteRemoveSource(removeSsrcInfo) {\n        const remoteSdp = new SDP(this.peerconnection.remoteDescription.sdp);\n\n        removeSsrcInfo.forEach((lines, idx) => {\n            // eslint-disable-next-line no-param-reassign\n            lines = lines.split('\\r\\n');\n            lines.pop(); // remove empty last element;\n            lines.forEach(line => {\n                remoteSdp.media[idx]\n                    = remoteSdp.media[idx].replace(`${line}\\r\\n`, '');\n            });\n        });\n        remoteSdp.raw = remoteSdp.session + remoteSdp.media.join('');\n\n        return remoteSdp;\n    }\n\n    /**\n     * Add the given ssrc lines to the current remote sdp\n     * @param {list} addSsrcInfo a list of SDP line strings that\n     *  should be added to the remote SDP\n     * @returns type {SDP Object} the new remote SDP (after removing the lines\n     *  in removeSsrcInfo\n     */\n    _processRemoteAddSource(addSsrcInfo) {\n        const remoteSdp = new SDP(this.peerconnection.remoteDescription.sdp);\n\n        addSsrcInfo.forEach((lines, idx) => {\n            remoteSdp.media[idx] += lines;\n        });\n        remoteSdp.raw = remoteSdp.session + remoteSdp.media.join('');\n\n        return remoteSdp;\n    }\n\n    /**\n     * Do a new o/a flow using the existing remote description\n     * @param {string} [optionalRemoteSdp] optional, raw remote sdp\n     *  to use.  If not provided, the remote sdp from the\n     *  peerconnection will be used\n     * @returns {Promise} promise which resolves when the\n     *  o/a flow is complete with no arguments or\n     *  rejects with an error {string}\n     */\n    _renegotiate(optionalRemoteSdp) {\n        const remoteSdp\n            = optionalRemoteSdp || this.peerconnection.remoteDescription.sdp;\n\n        if (!remoteSdp) {\n            return Promise.reject(\n                'Can not renegotiate without remote description,'\n                    + `- current state: ${this.state}`);\n        }\n\n        const remoteDescription = new RTCSessionDescription({\n            type: this.isInitiator ? 'answer' : 'offer',\n            sdp: remoteSdp\n        });\n\n        return new Promise((resolve, reject) => {\n            if (this.peerconnection.signalingState === 'closed') {\n                reject('Attempted to renegotiate in state closed');\n\n                return;\n            }\n            if (this.isInitiator) {\n                this._initiatorRenegotiate(remoteDescription, resolve, reject);\n            } else {\n                this._responderRenegotiate(remoteDescription, resolve, reject);\n            }\n        });\n    }\n\n    /**\n     * Renegotiate cycle implementation for the responder case.\n     * @param {object} remoteDescription the SDP object as defined by the WebRTC\n     * which will be used as remote description in the cycle.\n     * @param {function} resolve the success callback\n     * @param {function} reject the failure callback\n     * @private\n     */\n    _responderRenegotiate(remoteDescription, resolve, reject) {\n        // FIXME use WebRTC promise API to simplify things\n        logger.debug('Renegotiate: setting remote description');\n        this.peerconnection.setRemoteDescription(\n            remoteDescription,\n            () => {\n                logger.debug('Renegotiate: creating answer');\n                this.peerconnection.createAnswer(\n                    answer => {\n                        logger.debug('Renegotiate: setting local description');\n                        this.peerconnection.setLocalDescription(\n                            answer,\n                            () => {\n                                resolve();\n                            },\n                            error => {\n                                reject(\n                                    `setLocalDescription failed: ${error}`);\n                            }\n                        );\n                    },\n                    error => reject(`createAnswer failed: ${error}`),\n                    this.mediaConstraints\n                );\n            },\n            error => reject(`setRemoteDescription failed: ${error}`)\n        );\n    }\n\n    /**\n     * Renegotiate cycle implementation for the initiator's case.\n     * @param {object} remoteDescription the SDP object as defined by the WebRTC\n     * which will be used as remote description in the cycle.\n     * @param {function} resolve the success callback\n     * @param {function} reject the failure callback\n     * @private\n     */\n    _initiatorRenegotiate(remoteDescription, resolve, reject) {\n        // FIXME use WebRTC promise API to simplify things\n        if (this.peerconnection.signalingState === 'have-local-offer') {\n\n            // Skip createOffer and setLocalDescription or FF will fail\n            logger.debug(\n                'Renegotiate: setting remote description');\n            this.peerconnection.setRemoteDescription(\n                remoteDescription,\n                () => {\n                    // In case when the answer is being set for the first time,\n                    // full sRD/sLD cycle is required to have the local\n                    // description updated and SSRCs synchronized correctly.\n                    // Otherwise SSRCs for streams added after invite, but\n                    // before the answer was accepted will not be detected.\n                    // The reason for that is that renegotiate can not be called\n                    // when adding tracks and they will not be reflected in\n                    // the local SDP.\n                    this._initiatorRenegotiate(\n                        remoteDescription, resolve, reject);\n                },\n                error => reject(`setRemoteDescription failed: ${error}`)\n            );\n        } else {\n            logger.debug('Renegotiate: creating offer');\n            this.peerconnection.createOffer(\n                offer => {\n                    logger.debug('Renegotiate: setting local description');\n                    this.peerconnection.setLocalDescription(offer,\n                        () => {\n                            logger.debug(\n                                'Renegotiate: setting remote description');\n                            this.peerconnection.setRemoteDescription(\n                                remoteDescription,\n                                () => {\n                                    resolve();\n                                },\n                                error => reject(\n                                    `setRemoteDescription failed: ${error}`)\n                            );\n                        },\n                        error => {\n                            reject('setLocalDescription failed: ', error);\n                        });\n                },\n                error => reject(`createOffer failed: ${error}`),\n                this.mediaConstraints);\n        }\n    }\n\n    /**\n     * Replaces <tt>oldTrack</tt> with <tt>newTrack</tt> and performs a single\n     * offer/answer cycle after both operations are done. Either\n     * <tt>oldTrack</tt> or <tt>newTrack</tt> can be null; replacing a valid\n     * <tt>oldTrack</tt> with a null <tt>newTrack</tt> effectively just removes\n     * <tt>oldTrack</tt>\n     * @param {JitsiLocalTrack|null} oldTrack the current track in use to be\n     * replaced\n     * @param {JitsiLocalTrack|null} newTrack the new track to use\n     * @returns {Promise} which resolves once the replacement is complete\n     *  with no arguments or rejects with an error {string}\n     */\n    replaceTrack(oldTrack, newTrack) {\n        const workFunction = finishedCallback => {\n            // Check if the connection was closed and pretend everything is OK.\n            // This can happen if a track removal is scheduled but takes place\n            // after the connection is closed.\n            if (this.peerconnection.signalingState === 'closed'\n                || this.peerconnection.connectionState === 'closed'\n                || this.closed) {\n\n                finishedCallback();\n\n                return;\n            }\n\n            const oldLocalSdp = this.peerconnection.localDescription.sdp;\n\n            // NOTE the code below assumes that no more than 1 video track\n            // can be added to the peer connection.\n            // Transition from no video to video (possibly screen sharing)\n            if (!oldTrack && newTrack && newTrack.isVideoTrack()) {\n                // Clearing current primary SSRC will make\n                // the SdpConsistency generate a new one which will result\n                // with:\n                // 1. source-remove for the recvonly\n                // 2. source-add for the new video stream\n                this.peerconnection.clearRecvonlySsrc();\n\n            // Transition from video to no video\n            } else if (oldTrack && oldTrack.isVideoTrack() && !newTrack) {\n                // Clearing current primary SSRC and generating the recvonly\n                // will result in:\n                // 1. source-remove for the old video stream\n                // 2. source-add for the recvonly stream\n                this.peerconnection.clearRecvonlySsrc();\n                this.peerconnection.generateRecvonlySsrc();\n            }\n            if (oldTrack) {\n                this.peerconnection.removeTrack(oldTrack);\n            }\n            if (newTrack) {\n                this.peerconnection.addTrack(newTrack);\n            }\n\n            if ((oldTrack || newTrack)\n                && this.state === JingleSessionState.ACTIVE) {\n                this._renegotiate()\n                    .then(() => {\n                        const newLocalSDP\n                            = new SDP(\n                                this.peerconnection.localDescription.sdp);\n\n                        this.notifyMySSRCUpdate(\n                            new SDP(oldLocalSdp), newLocalSDP);\n                        finishedCallback();\n                    },\n                    finishedCallback /* will be called with en error */);\n            } else {\n                finishedCallback();\n            }\n        };\n\n        this.modificationQueue.push(\n            workFunction,\n            error => {\n                if (error) {\n                    logger.error('Replace track error:', error);\n                } else {\n                    logger.info('Replace track done!');\n                }\n            });\n    }\n\n    /**\n     * Parse the information from the xml sourceRemoveElem and translate it\n     *  into sdp lines\n     * @param {jquery xml element} sourceRemoveElem the source-remove\n     *  element from jingle\n     * @param {SDP object} currentRemoteSdp the current remote\n     *  sdp (as of this new source-remove)\n     * @returns {list} a list of SDP line strings that should\n     *  be removed from the remote SDP\n     */\n    _parseSsrcInfoFromSourceRemove(sourceRemoveElem, currentRemoteSdp) {\n        const removeSsrcInfo = [];\n\n        $(sourceRemoveElem).each((i1, content) => {\n            const name = $(content).attr('name');\n            let lines = '';\n\n            $(content)\n                .find('ssrc-group[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]')\n                .each(function() {\n                    /* eslint-disable no-invalid-this */\n                    const semantics = this.getAttribute('semantics');\n                    const ssrcs\n                        = $(this)\n                            .find('>source')\n                            .map(function() {\n                                return this.getAttribute('ssrc');\n                            })\n                            .get();\n\n                    if (ssrcs.length) {\n                        lines\n                            += `a=ssrc-group:${semantics} ${\n                                ssrcs.join(' ')}\\r\\n`;\n                    }\n\n                    /* eslint-enable no-invalid-this */\n                });\n            const ssrcs = [];\n\n            // handles both >source and >description>source versions\n            const tmp\n                = $(content).find(\n                    'source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]');\n\n            tmp.each(function() {\n                // eslint-disable-next-line no-invalid-this\n                const ssrc = $(this).attr('ssrc');\n\n                ssrcs.push(ssrc);\n            });\n            currentRemoteSdp.media.forEach((media, i2) => {\n                if (!SDPUtil.findLine(media, `a=mid:${name}`)) {\n                    return;\n                }\n                if (!removeSsrcInfo[i2]) {\n                    removeSsrcInfo[i2] = '';\n                }\n                ssrcs.forEach(ssrc => {\n                    const ssrcLines\n                        = SDPUtil.findLines(media, `a=ssrc:${ssrc}`);\n\n                    if (ssrcLines.length) {\n                        removeSsrcInfo[i2] += `${ssrcLines.join('\\r\\n')}\\r\\n`;\n                    }\n                });\n                removeSsrcInfo[i2] += lines;\n            });\n        });\n\n        return removeSsrcInfo;\n    }\n\n    /**\n     * Will print an error if there is any difference, between the SSRCs given\n     * in the <tt>oldSDP</tt> and the ones currently described in\n     * the peerconnection's local description.\n     * @param {string} operationName the operation's name which will be printed\n     * in the error message.\n     * @param {SDP} oldSDP the old local SDP which will be compared with\n     * the current one.\n     * @return {boolean} <tt>true</tt> if there was any change or <tt>false</tt>\n     * otherwise.\n     * @private\n     */\n    _verifyNoSSRCChanged(operationName, oldSDP) {\n        const currentLocalSDP\n            = new SDP(this.peerconnection.localDescription.sdp);\n        let sdpDiff = new SDPDiffer(oldSDP, currentLocalSDP);\n        const addedMedia = sdpDiff.getNewMedia();\n\n        if (Object.keys(addedMedia).length) {\n            logger.error(\n                `${this} - some SSRC were added on ${operationName}`,\n                addedMedia);\n\n            return false;\n        }\n\n        sdpDiff = new SDPDiffer(currentLocalSDP, oldSDP);\n        const removedMedia = sdpDiff.getNewMedia();\n\n        if (Object.keys(removedMedia).length) {\n            logger.error(\n                `${this} - some SSRCs were removed on ${operationName}`,\n                removedMedia);\n\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Adds local track back to this session, as part of the unmute operation.\n     * @param {JitsiLocalTrack} track\n     * @return {Promise} a promise that will resolve once the local track is\n     * added back to this session and renegotiation succeeds. Will be rejected\n     * with a <tt>string</tt> that provides some error details in case something\n     * goes wrong.\n     */\n    addTrackAsUnmute(track) {\n        return this._addRemoveTrackAsMuteUnmute(\n            false /* add as unmute */, track);\n    }\n\n    /**\n     * Remove local track as part of the mute operation.\n     * @param {JitsiLocalTrack} track the local track to be removed\n     * @return {Promise} a promise which will be resolved once the local track\n     * is removed from this session and the renegotiation is performed.\n     * The promise will be rejected with a <tt>string</tt> that the describes\n     * the error if anything goes wrong.\n     */\n    removeTrackAsMute(track) {\n        return this._addRemoveTrackAsMuteUnmute(\n            true /* remove as mute */, track);\n    }\n\n    /**\n     * See {@link addTrackAsUnmute} and {@link removeTrackAsMute}.\n     * @param {boolean} isMute <tt>true</tt> for \"remove as mute\" or\n     * <tt>false</tt> for \"add as unmute\".\n     * @param {JitsiLocalTrack} track the track that will be added/removed\n     * @private\n     */\n    _addRemoveTrackAsMuteUnmute(isMute, track) {\n        if (!track) {\n            return Promise.reject('invalid \"track\" argument value');\n        }\n        const operationName = isMute ? 'removeTrackMute' : 'addTrackUnmute';\n        const workFunction = finishedCallback => {\n            const tpc = this.peerconnection;\n\n            if (!tpc) {\n                finishedCallback(\n                    `Error:  tried ${operationName} track with no active peer`\n                        + 'connection');\n\n                return;\n            }\n            const oldLocalSDP = tpc.localDescription.sdp;\n            const tpcOperation\n                = isMute\n                    ? tpc.removeTrackMute.bind(tpc, track)\n                    : tpc.addTrackUnmute.bind(tpc, track);\n\n            if (!tpcOperation()) {\n                finishedCallback(`${operationName} failed!`);\n            } else if (!oldLocalSDP || !tpc.remoteDescription.sdp) {\n                finishedCallback();\n            } else {\n                this._renegotiate()\n                    .then(() => {\n                        // The results are ignored, as this check failure is not\n                        // enough to fail the whole operation. It will log\n                        // an error inside.\n                        this._verifyNoSSRCChanged(\n                            operationName, new SDP(oldLocalSDP));\n                        finishedCallback();\n                    },\n                    finishedCallback /* will be called with an error */);\n            }\n        };\n\n        return new Promise((resolve, reject) => {\n            this.modificationQueue.push(\n                workFunction,\n                error => {\n                    if (error) {\n                        reject(error);\n                    } else {\n                        resolve();\n                    }\n                });\n        });\n    }\n\n    /**\n     * Resumes or suspends media transfer over the underlying peer connection.\n     * @param {boolean} audioActive <tt>true</tt> to enable audio media\n     * transfer or <tt>false</tt> to suspend audio media transmission.\n     * @param {boolean} videoActive <tt>true</tt> to enable video media\n     * transfer or <tt>false</tt> to suspend video media transmission.\n     * @return {Promise} a <tt>Promise</tt> which will resolve once\n     * the operation is done. It will be rejected with an error description as\n     * a string in case anything goes wrong.\n     */\n    setMediaTransferActive(audioActive, videoActive) {\n        if (!this.peerconnection) {\n            return Promise.reject(\n                'Can not modify transfer active state,'\n                    + ' before \"initialize\" is called');\n        }\n\n        const logAudioStr = audioActive ? 'audio active' : 'audio inactive';\n        const logVideoStr = videoActive ? 'video active' : 'video inactive';\n\n        logger.info(`Queued make ${logVideoStr}, ${logAudioStr} task...`);\n\n        const workFunction = finishedCallback => {\n            const isSessionActive = this.state === JingleSessionState.ACTIVE;\n\n            // Because the value is modified on the queue it's impossible to\n            // check it's final value reliably prior to submitting the task.\n            // The rule here is that the last submitted state counts.\n            // Check the values here to avoid unnecessary renegotiation cycle.\n            const audioActiveChanged\n                = this.peerconnection.setAudioTransferActive(audioActive);\n\n            if (this._localVideoActive !== videoActive) {\n                this._localVideoActive = videoActive;\n\n                // Do only for P2P - Jicofo will reply with 'bad-request'\n                // We don't want to send 'content-modify', before the initial\n                // O/A (state === JingleSessionState.ACTIVE), because that will\n                // mess up video media direction in the remote SDP.\n                // 'content-modify' when processed only affects the media\n                // direction in the local SDP. We're doing that, because setting\n                // 'inactive' on video media in remote SDP will mess up our SDP\n                // translation chain (simulcast, RTX, video mute etc.).\n                if (this.isP2P && isSessionActive) {\n                    this.sendContentModify(videoActive);\n                }\n            }\n\n            const pcVideoActiveChanged\n                = this.peerconnection.setVideoTransferActive(\n                    this._localVideoActive && this._remoteVideoActive);\n\n            // Will do the sRD/sLD cycle to update SDPs and adjust the media\n            // direction\n            if (isSessionActive\n                    && (audioActiveChanged || pcVideoActiveChanged)) {\n                this._renegotiate()\n                    .then(\n                        finishedCallback,\n                        finishedCallback /* will be called with an error */);\n            } else {\n                finishedCallback();\n            }\n        };\n\n        return new Promise((resolve, reject) => {\n            this.modificationQueue.push(\n                workFunction,\n                error => {\n                    if (error) {\n                        reject(error);\n                    } else {\n                        resolve();\n                    }\n                });\n        });\n    }\n\n    /**\n     * Will put and execute on the queue a session modify task. Currently it\n     * only checks the senders attribute of the video content in order to figure\n     * out if the remote peer has video in the inactive state (stored locally\n     * in {@link _remoteVideoActive} - see field description for more info).\n     * @param {jQuery} jingleContents jQuery selector pointing to the jingle\n     * element of the session modify IQ.\n     * @see {@link _remoteVideoActive}\n     * @see {@link _localVideoActive}\n     */\n    modifyContents(jingleContents) {\n        const newVideoSenders\n            = JingleSessionPC.parseVideoSenders(jingleContents);\n\n        if (newVideoSenders === null) {\n            logger.error(\n                `${this} - failed to parse video \"senders\" attribute in`\n                    + '\"content-modify\" action');\n\n            return;\n        }\n\n        const workFunction = finishedCallback => {\n            if (this._assertNotEnded('content-modify')\n                    && this._modifyRemoteVideoActive(newVideoSenders)) {\n                // Will do the sRD/sLD cycle to update SDPs and adjust\n                // the media direction\n                this._renegotiate()\n                    .then(finishedCallback, finishedCallback /* (error) */);\n            } else {\n                finishedCallback();\n            }\n        };\n\n        logger.debug(\n            `${this} queued \"content-modify\" task`\n                + `(video senders=\"${newVideoSenders}\")`);\n\n        this.modificationQueue.push(\n            workFunction,\n            error => {\n                if (error) {\n                    logger.error('\"content-modify\" failed', error);\n                }\n            });\n    }\n\n    /**\n     * Processes new value of remote video \"senders\" Jingle attribute and tries\n     * to apply it for {@link _remoteVideoActive}.\n     * @param {string} remoteVideoSenders the value of \"senders\" attribute of\n     * Jingle video content element advertised by remote peer.\n     * @return {boolean} <tt>true</tt> if the change affected state of\n     * the underlying peerconnection and renegotiation is required for\n     * the changes to take effect.\n     * @private\n     */\n    _modifyRemoteVideoActive(remoteVideoSenders) {\n        const isRemoteVideoActive\n            = remoteVideoSenders === 'both'\n                || (remoteVideoSenders === 'initiator' && this.isInitiator)\n                || (remoteVideoSenders === 'responder' && !this.isInitiator);\n\n        if (isRemoteVideoActive !== this._remoteVideoActive) {\n            logger.debug(\n                `${this} new remote video active: ${isRemoteVideoActive}`);\n            this._remoteVideoActive = isRemoteVideoActive;\n        }\n\n        return this.peerconnection.setVideoTransferActive(\n            this._localVideoActive && this._remoteVideoActive);\n    }\n\n    /**\n     * Figures out added/removed ssrcs and send update IQs.\n     * @param oldSDP SDP object for old description.\n     * @param newSDP SDP object for new description.\n     */\n    notifyMySSRCUpdate(oldSDP, newSDP) {\n\n        if (this.state !== JingleSessionState.ACTIVE) {\n            logger.warn(`Skipping SSRC update in '${this.state} ' state.`);\n\n            return;\n        }\n\n        // send source-remove IQ.\n        let sdpDiffer = new SDPDiffer(newSDP, oldSDP);\n        const remove = $iq({ to: this.remoteJid,\n            type: 'set' })\n            .c('jingle', {\n                xmlns: 'urn:xmpp:jingle:1',\n                action: 'source-remove',\n                initiator: this.initiator,\n                sid: this.sid\n            }\n            );\n        const removedAnySSRCs = sdpDiffer.toJingle(remove);\n\n        if (removedAnySSRCs) {\n            logger.info('Sending source-remove', remove.tree());\n            this.connection.sendIQ(\n                remove, null,\n                this.newJingleErrorHandler(remove), IQ_TIMEOUT);\n        } else {\n            logger.log('removal not necessary');\n        }\n\n        // send source-add IQ.\n        sdpDiffer = new SDPDiffer(oldSDP, newSDP);\n        const add = $iq({ to: this.remoteJid,\n            type: 'set' })\n            .c('jingle', {\n                xmlns: 'urn:xmpp:jingle:1',\n                action: 'source-add',\n                initiator: this.initiator,\n                sid: this.sid\n            }\n            );\n\n        const containsNewSSRCs = sdpDiffer.toJingle(add);\n\n        if (containsNewSSRCs) {\n            logger.info('Sending source-add', add.tree());\n            this.connection.sendIQ(\n                add, null, this.newJingleErrorHandler(add), IQ_TIMEOUT);\n        } else {\n            logger.log('addition not necessary');\n        }\n    }\n\n    /**\n     * Method returns function(errorResponse) which is a callback to be passed\n     * to Strophe connection.sendIQ method. An 'error' structure is created that\n     * is passed as 1st argument to given <tt>failureCb</tt>. The format of this\n     * structure is as follows:\n     * {\n     *  code: {XMPP error response code}\n     *  reason: {the name of XMPP error reason element or 'timeout' if the\n      *          request has timed out within <tt>IQ_TIMEOUT</tt> milliseconds}\n     *  source: {request.tree() that provides original request}\n     *  session: {this JingleSessionPC.toString()}\n     * }\n     * @param request Strophe IQ instance which is the request to be dumped into\n     *        the error structure\n     * @param failureCb function(error) called when error response was returned\n     *        or when a timeout has occurred.\n     * @returns {function(this:JingleSessionPC)}\n     */\n    newJingleErrorHandler(request, failureCb) {\n        return errResponse => {\n\n            const error = {};\n\n            // Get XMPP error code and condition(reason)\n            const errorElSel = $(errResponse).find('error');\n\n            if (errorElSel.length) {\n                error.code = errorElSel.attr('code');\n                const errorReasonSel = $(errResponse).find('error :first');\n\n                if (errorReasonSel.length) {\n                    error.reason = errorReasonSel[0].tagName;\n                }\n\n                const errorMsgSel = errorElSel.find('>text');\n\n                if (errorMsgSel.length) {\n                    error.msg = errorMsgSel.text();\n                }\n            }\n\n            if (!errResponse) {\n                error.reason = 'timeout';\n            }\n\n            error.session = this.toString();\n\n            if (failureCb) {\n                failureCb(error);\n            } else if (this.state === JingleSessionState.ENDED\n                        && error.reason === 'item-not-found') {\n                // When remote peer decides to terminate the session, but it\n                // still have few messages on the queue for processing,\n                // it will first send us 'session-terminate' (we enter ENDED)\n                // and then follow with 'item-not-found' for the queued requests\n                // We don't want to have that logged on error level.\n                logger.debug(`Jingle error: ${JSON.stringify(error)}`);\n            } else {\n                GlobalOnErrorHandler.callErrorHandler(\n                    new Error(\n                        `Jingle error: ${JSON.stringify(error)}`));\n            }\n        };\n    }\n\n    /**\n     *\n     * @param session\n     * @param error\n     */\n    static onJingleFatalError(session, error) {\n        if (this.room) {\n            this.room.eventEmitter.emit(\n                XMPPEvents.CONFERENCE_SETUP_FAILED, session, error);\n            this.room.eventEmitter.emit(\n                XMPPEvents.JINGLE_FATAL_ERROR, session, error);\n        }\n    }\n\n    /**\n     * Returns the ice connection state for the peer connection.\n     * @returns the ice connection state for the peer connection.\n     */\n    getIceConnectionState() {\n        return this.peerconnection.iceConnectionState;\n    }\n\n    /**\n     * Closes the peerconnection.\n     */\n    close() {\n        this.closed = true;\n\n        // The signaling layer will remove it's listeners\n        this.signalingLayer.setChatRoom(null);\n\n        // do not try to close if already closed.\n        this.peerconnection\n            && ((this.peerconnection.signalingState\n                    && this.peerconnection.signalingState !== 'closed')\n                || (this.peerconnection.connectionState\n                    && this.peerconnection.connectionState !== 'closed'))\n            && this.peerconnection.close();\n    }\n\n    /**\n     * Converts to string with minor summary.\n     * @return {string}\n     */\n    toString() {\n        return `JingleSessionPC[p2p=${this.isP2P},`\n                    + `initiator=${this.isInitiator},sid=${this.sid}]`;\n    }\n\n    /**\n     * If the A/B test for suspend video is disabled according to the room's\n     * configuration, returns undefined. Otherwise returns a boolean which\n     * indicates whether the suspend video option should be enabled or disabled.\n     */\n    _abtestSuspendVideoEnabled() {\n        if (!this.room.options.abTesting\n            || !this.room.options.abTesting.enableSuspendVideoTest) {\n            return;\n        }\n\n        // We want the two participants in a P2P call to agree on the value of\n        // the \"suspend\" option. We use the JID of the initiator, because it is\n        // both randomly selected and agreed upon by both participants.\n        const jid = this._getInitiatorJid();\n\n        return integerHash(jid) % 2 === 0;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/JingleSessionPC.js","/*!\n * async\n * https://github.com/caolan/async\n *\n * Copyright 2010-2014 Caolan McMahon\n * Released under the MIT license\n */\n/*jshint onevar: false, indent:4 */\n/*global setImmediate: false, setTimeout: false, console: false */\n(function () {\n\n    var async = {};\n\n    // global on the server, window in the browser\n    var root, previous_async;\n\n    root = this;\n    if (root != null) {\n      previous_async = root.async;\n    }\n\n    async.noConflict = function () {\n        root.async = previous_async;\n        return async;\n    };\n\n    function only_once(fn) {\n        var called = false;\n        return function() {\n            if (called) throw new Error(\"Callback was already called.\");\n            called = true;\n            fn.apply(root, arguments);\n        }\n    }\n\n    //// cross-browser compatiblity functions ////\n\n    var _toString = Object.prototype.toString;\n\n    var _isArray = Array.isArray || function (obj) {\n        return _toString.call(obj) === '[object Array]';\n    };\n\n    var _each = function (arr, iterator) {\n        if (arr.forEach) {\n            return arr.forEach(iterator);\n        }\n        for (var i = 0; i < arr.length; i += 1) {\n            iterator(arr[i], i, arr);\n        }\n    };\n\n    var _map = function (arr, iterator) {\n        if (arr.map) {\n            return arr.map(iterator);\n        }\n        var results = [];\n        _each(arr, function (x, i, a) {\n            results.push(iterator(x, i, a));\n        });\n        return results;\n    };\n\n    var _reduce = function (arr, iterator, memo) {\n        if (arr.reduce) {\n            return arr.reduce(iterator, memo);\n        }\n        _each(arr, function (x, i, a) {\n            memo = iterator(memo, x, i, a);\n        });\n        return memo;\n    };\n\n    var _keys = function (obj) {\n        if (Object.keys) {\n            return Object.keys(obj);\n        }\n        var keys = [];\n        for (var k in obj) {\n            if (obj.hasOwnProperty(k)) {\n                keys.push(k);\n            }\n        }\n        return keys;\n    };\n\n    //// exported async module functions ////\n\n    //// nextTick implementation with browser-compatible fallback ////\n    if (typeof process === 'undefined' || !(process.nextTick)) {\n        if (typeof setImmediate === 'function') {\n            async.nextTick = function (fn) {\n                // not a direct alias for IE10 compatibility\n                setImmediate(fn);\n            };\n            async.setImmediate = async.nextTick;\n        }\n        else {\n            async.nextTick = function (fn) {\n                setTimeout(fn, 0);\n            };\n            async.setImmediate = async.nextTick;\n        }\n    }\n    else {\n        async.nextTick = process.nextTick;\n        if (typeof setImmediate !== 'undefined') {\n            async.setImmediate = function (fn) {\n              // not a direct alias for IE10 compatibility\n              setImmediate(fn);\n            };\n        }\n        else {\n            async.setImmediate = async.nextTick;\n        }\n    }\n\n    async.each = function (arr, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        _each(arr, function (x) {\n            iterator(x, only_once(done) );\n        });\n        function done(err) {\n          if (err) {\n              callback(err);\n              callback = function () {};\n          }\n          else {\n              completed += 1;\n              if (completed >= arr.length) {\n                  callback();\n              }\n          }\n        }\n    };\n    async.forEach = async.each;\n\n    async.eachSeries = function (arr, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        var iterate = function () {\n            iterator(arr[completed], function (err) {\n                if (err) {\n                    callback(err);\n                    callback = function () {};\n                }\n                else {\n                    completed += 1;\n                    if (completed >= arr.length) {\n                        callback();\n                    }\n                    else {\n                        iterate();\n                    }\n                }\n            });\n        };\n        iterate();\n    };\n    async.forEachSeries = async.eachSeries;\n\n    async.eachLimit = function (arr, limit, iterator, callback) {\n        var fn = _eachLimit(limit);\n        fn.apply(null, [arr, iterator, callback]);\n    };\n    async.forEachLimit = async.eachLimit;\n\n    var _eachLimit = function (limit) {\n\n        return function (arr, iterator, callback) {\n            callback = callback || function () {};\n            if (!arr.length || limit <= 0) {\n                return callback();\n            }\n            var completed = 0;\n            var started = 0;\n            var running = 0;\n\n            (function replenish () {\n                if (completed >= arr.length) {\n                    return callback();\n                }\n\n                while (running < limit && started < arr.length) {\n                    started += 1;\n                    running += 1;\n                    iterator(arr[started - 1], function (err) {\n                        if (err) {\n                            callback(err);\n                            callback = function () {};\n                        }\n                        else {\n                            completed += 1;\n                            running -= 1;\n                            if (completed >= arr.length) {\n                                callback();\n                            }\n                            else {\n                                replenish();\n                            }\n                        }\n                    });\n                }\n            })();\n        };\n    };\n\n\n    var doParallel = function (fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.each].concat(args));\n        };\n    };\n    var doParallelLimit = function(limit, fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [_eachLimit(limit)].concat(args));\n        };\n    };\n    var doSeries = function (fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.eachSeries].concat(args));\n        };\n    };\n\n\n    var _asyncMap = function (eachfn, arr, iterator, callback) {\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        if (!callback) {\n            eachfn(arr, function (x, callback) {\n                iterator(x.value, function (err) {\n                    callback(err);\n                });\n            });\n        } else {\n            var results = [];\n            eachfn(arr, function (x, callback) {\n                iterator(x.value, function (err, v) {\n                    results[x.index] = v;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n    async.map = doParallel(_asyncMap);\n    async.mapSeries = doSeries(_asyncMap);\n    async.mapLimit = function (arr, limit, iterator, callback) {\n        return _mapLimit(limit)(arr, iterator, callback);\n    };\n\n    var _mapLimit = function(limit) {\n        return doParallelLimit(limit, _asyncMap);\n    };\n\n    // reduce only has a series version, as doing reduce in parallel won't\n    // work in many situations.\n    async.reduce = function (arr, memo, iterator, callback) {\n        async.eachSeries(arr, function (x, callback) {\n            iterator(memo, x, function (err, v) {\n                memo = v;\n                callback(err);\n            });\n        }, function (err) {\n            callback(err, memo);\n        });\n    };\n    // inject alias\n    async.inject = async.reduce;\n    // foldl alias\n    async.foldl = async.reduce;\n\n    async.reduceRight = function (arr, memo, iterator, callback) {\n        var reversed = _map(arr, function (x) {\n            return x;\n        }).reverse();\n        async.reduce(reversed, memo, iterator, callback);\n    };\n    // foldr alias\n    async.foldr = async.reduceRight;\n\n    var _filter = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (v) {\n                if (v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function (err) {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    };\n    async.filter = doParallel(_filter);\n    async.filterSeries = doSeries(_filter);\n    // select alias\n    async.select = async.filter;\n    async.selectSeries = async.filterSeries;\n\n    var _reject = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (v) {\n                if (!v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function (err) {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    };\n    async.reject = doParallel(_reject);\n    async.rejectSeries = doSeries(_reject);\n\n    var _detect = function (eachfn, arr, iterator, main_callback) {\n        eachfn(arr, function (x, callback) {\n            iterator(x, function (result) {\n                if (result) {\n                    main_callback(x);\n                    main_callback = function () {};\n                }\n                else {\n                    callback();\n                }\n            });\n        }, function (err) {\n            main_callback();\n        });\n    };\n    async.detect = doParallel(_detect);\n    async.detectSeries = doSeries(_detect);\n\n    async.some = function (arr, iterator, main_callback) {\n        async.each(arr, function (x, callback) {\n            iterator(x, function (v) {\n                if (v) {\n                    main_callback(true);\n                    main_callback = function () {};\n                }\n                callback();\n            });\n        }, function (err) {\n            main_callback(false);\n        });\n    };\n    // any alias\n    async.any = async.some;\n\n    async.every = function (arr, iterator, main_callback) {\n        async.each(arr, function (x, callback) {\n            iterator(x, function (v) {\n                if (!v) {\n                    main_callback(false);\n                    main_callback = function () {};\n                }\n                callback();\n            });\n        }, function (err) {\n            main_callback(true);\n        });\n    };\n    // all alias\n    async.all = async.every;\n\n    async.sortBy = function (arr, iterator, callback) {\n        async.map(arr, function (x, callback) {\n            iterator(x, function (err, criteria) {\n                if (err) {\n                    callback(err);\n                }\n                else {\n                    callback(null, {value: x, criteria: criteria});\n                }\n            });\n        }, function (err, results) {\n            if (err) {\n                return callback(err);\n            }\n            else {\n                var fn = function (left, right) {\n                    var a = left.criteria, b = right.criteria;\n                    return a < b ? -1 : a > b ? 1 : 0;\n                };\n                callback(null, _map(results.sort(fn), function (x) {\n                    return x.value;\n                }));\n            }\n        });\n    };\n\n    async.auto = function (tasks, callback) {\n        callback = callback || function () {};\n        var keys = _keys(tasks);\n        var remainingTasks = keys.length\n        if (!remainingTasks) {\n            return callback();\n        }\n\n        var results = {};\n\n        var listeners = [];\n        var addListener = function (fn) {\n            listeners.unshift(fn);\n        };\n        var removeListener = function (fn) {\n            for (var i = 0; i < listeners.length; i += 1) {\n                if (listeners[i] === fn) {\n                    listeners.splice(i, 1);\n                    return;\n                }\n            }\n        };\n        var taskComplete = function () {\n            remainingTasks--\n            _each(listeners.slice(0), function (fn) {\n                fn();\n            });\n        };\n\n        addListener(function () {\n            if (!remainingTasks) {\n                var theCallback = callback;\n                // prevent final callback from calling itself if it errors\n                callback = function () {};\n\n                theCallback(null, results);\n            }\n        });\n\n        _each(keys, function (k) {\n            var task = _isArray(tasks[k]) ? tasks[k]: [tasks[k]];\n            var taskCallback = function (err) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                if (args.length <= 1) {\n                    args = args[0];\n                }\n                if (err) {\n                    var safeResults = {};\n                    _each(_keys(results), function(rkey) {\n                        safeResults[rkey] = results[rkey];\n                    });\n                    safeResults[k] = args;\n                    callback(err, safeResults);\n                    // stop subsequent errors hitting callback multiple times\n                    callback = function () {};\n                }\n                else {\n                    results[k] = args;\n                    async.setImmediate(taskComplete);\n                }\n            };\n            var requires = task.slice(0, Math.abs(task.length - 1)) || [];\n            var ready = function () {\n                return _reduce(requires, function (a, x) {\n                    return (a && results.hasOwnProperty(x));\n                }, true) && !results.hasOwnProperty(k);\n            };\n            if (ready()) {\n                task[task.length - 1](taskCallback, results);\n            }\n            else {\n                var listener = function () {\n                    if (ready()) {\n                        removeListener(listener);\n                        task[task.length - 1](taskCallback, results);\n                    }\n                };\n                addListener(listener);\n            }\n        });\n    };\n\n    async.retry = function(times, task, callback) {\n        var DEFAULT_TIMES = 5;\n        var attempts = [];\n        // Use defaults if times not passed\n        if (typeof times === 'function') {\n            callback = task;\n            task = times;\n            times = DEFAULT_TIMES;\n        }\n        // Make sure times is a number\n        times = parseInt(times, 10) || DEFAULT_TIMES;\n        var wrappedTask = function(wrappedCallback, wrappedResults) {\n            var retryAttempt = function(task, finalAttempt) {\n                return function(seriesCallback) {\n                    task(function(err, result){\n                        seriesCallback(!err || finalAttempt, {err: err, result: result});\n                    }, wrappedResults);\n                };\n            };\n            while (times) {\n                attempts.push(retryAttempt(task, !(times-=1)));\n            }\n            async.series(attempts, function(done, data){\n                data = data[data.length - 1];\n                (wrappedCallback || callback)(data.err, data.result);\n            });\n        }\n        // If a callback is passed, run this as a controll flow\n        return callback ? wrappedTask() : wrappedTask\n    };\n\n    async.waterfall = function (tasks, callback) {\n        callback = callback || function () {};\n        if (!_isArray(tasks)) {\n          var err = new Error('First argument to waterfall must be an array of functions');\n          return callback(err);\n        }\n        if (!tasks.length) {\n            return callback();\n        }\n        var wrapIterator = function (iterator) {\n            return function (err) {\n                if (err) {\n                    callback.apply(null, arguments);\n                    callback = function () {};\n                }\n                else {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    var next = iterator.next();\n                    if (next) {\n                        args.push(wrapIterator(next));\n                    }\n                    else {\n                        args.push(callback);\n                    }\n                    async.setImmediate(function () {\n                        iterator.apply(null, args);\n                    });\n                }\n            };\n        };\n        wrapIterator(async.iterator(tasks))();\n    };\n\n    var _parallel = function(eachfn, tasks, callback) {\n        callback = callback || function () {};\n        if (_isArray(tasks)) {\n            eachfn.map(tasks, function (fn, callback) {\n                if (fn) {\n                    fn(function (err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        }\n        else {\n            var results = {};\n            eachfn.each(_keys(tasks), function (k, callback) {\n                tasks[k](function (err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.parallel = function (tasks, callback) {\n        _parallel({ map: async.map, each: async.each }, tasks, callback);\n    };\n\n    async.parallelLimit = function(tasks, limit, callback) {\n        _parallel({ map: _mapLimit(limit), each: _eachLimit(limit) }, tasks, callback);\n    };\n\n    async.series = function (tasks, callback) {\n        callback = callback || function () {};\n        if (_isArray(tasks)) {\n            async.mapSeries(tasks, function (fn, callback) {\n                if (fn) {\n                    fn(function (err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        }\n        else {\n            var results = {};\n            async.eachSeries(_keys(tasks), function (k, callback) {\n                tasks[k](function (err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.iterator = function (tasks) {\n        var makeCallback = function (index) {\n            var fn = function () {\n                if (tasks.length) {\n                    tasks[index].apply(null, arguments);\n                }\n                return fn.next();\n            };\n            fn.next = function () {\n                return (index < tasks.length - 1) ? makeCallback(index + 1): null;\n            };\n            return fn;\n        };\n        return makeCallback(0);\n    };\n\n    async.apply = function (fn) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return function () {\n            return fn.apply(\n                null, args.concat(Array.prototype.slice.call(arguments))\n            );\n        };\n    };\n\n    var _concat = function (eachfn, arr, fn, callback) {\n        var r = [];\n        eachfn(arr, function (x, cb) {\n            fn(x, function (err, y) {\n                r = r.concat(y || []);\n                cb(err);\n            });\n        }, function (err) {\n            callback(err, r);\n        });\n    };\n    async.concat = doParallel(_concat);\n    async.concatSeries = doSeries(_concat);\n\n    async.whilst = function (test, iterator, callback) {\n        if (test()) {\n            iterator(function (err) {\n                if (err) {\n                    return callback(err);\n                }\n                async.whilst(test, iterator, callback);\n            });\n        }\n        else {\n            callback();\n        }\n    };\n\n    async.doWhilst = function (iterator, test, callback) {\n        iterator(function (err) {\n            if (err) {\n                return callback(err);\n            }\n            var args = Array.prototype.slice.call(arguments, 1);\n            if (test.apply(null, args)) {\n                async.doWhilst(iterator, test, callback);\n            }\n            else {\n                callback();\n            }\n        });\n    };\n\n    async.until = function (test, iterator, callback) {\n        if (!test()) {\n            iterator(function (err) {\n                if (err) {\n                    return callback(err);\n                }\n                async.until(test, iterator, callback);\n            });\n        }\n        else {\n            callback();\n        }\n    };\n\n    async.doUntil = function (iterator, test, callback) {\n        iterator(function (err) {\n            if (err) {\n                return callback(err);\n            }\n            var args = Array.prototype.slice.call(arguments, 1);\n            if (!test.apply(null, args)) {\n                async.doUntil(iterator, test, callback);\n            }\n            else {\n                callback();\n            }\n        });\n    };\n\n    async.queue = function (worker, concurrency) {\n        if (concurrency === undefined) {\n            concurrency = 1;\n        }\n        function _insert(q, data, pos, callback) {\n          if (!q.started){\n            q.started = true;\n          }\n          if (!_isArray(data)) {\n              data = [data];\n          }\n          if(data.length == 0) {\n             // call drain immediately if there are no tasks\n             return async.setImmediate(function() {\n                 if (q.drain) {\n                     q.drain();\n                 }\n             });\n          }\n          _each(data, function(task) {\n              var item = {\n                  data: task,\n                  callback: typeof callback === 'function' ? callback : null\n              };\n\n              if (pos) {\n                q.tasks.unshift(item);\n              } else {\n                q.tasks.push(item);\n              }\n\n              if (q.saturated && q.tasks.length === q.concurrency) {\n                  q.saturated();\n              }\n              async.setImmediate(q.process);\n          });\n        }\n\n        var workers = 0;\n        var q = {\n            tasks: [],\n            concurrency: concurrency,\n            saturated: null,\n            empty: null,\n            drain: null,\n            started: false,\n            paused: false,\n            push: function (data, callback) {\n              _insert(q, data, false, callback);\n            },\n            kill: function () {\n              q.drain = null;\n              q.tasks = [];\n            },\n            unshift: function (data, callback) {\n              _insert(q, data, true, callback);\n            },\n            process: function () {\n                if (!q.paused && workers < q.concurrency && q.tasks.length) {\n                    var task = q.tasks.shift();\n                    if (q.empty && q.tasks.length === 0) {\n                        q.empty();\n                    }\n                    workers += 1;\n                    var next = function () {\n                        workers -= 1;\n                        if (task.callback) {\n                            task.callback.apply(task, arguments);\n                        }\n                        if (q.drain && q.tasks.length + workers === 0) {\n                            q.drain();\n                        }\n                        q.process();\n                    };\n                    var cb = only_once(next);\n                    worker(task.data, cb);\n                }\n            },\n            length: function () {\n                return q.tasks.length;\n            },\n            running: function () {\n                return workers;\n            },\n            idle: function() {\n                return q.tasks.length + workers === 0;\n            },\n            pause: function () {\n                if (q.paused === true) { return; }\n                q.paused = true;\n                q.process();\n            },\n            resume: function () {\n                if (q.paused === false) { return; }\n                q.paused = false;\n                q.process();\n            }\n        };\n        return q;\n    };\n    \n    async.priorityQueue = function (worker, concurrency) {\n        \n        function _compareTasks(a, b){\n          return a.priority - b.priority;\n        };\n        \n        function _binarySearch(sequence, item, compare) {\n          var beg = -1,\n              end = sequence.length - 1;\n          while (beg < end) {\n            var mid = beg + ((end - beg + 1) >>> 1);\n            if (compare(item, sequence[mid]) >= 0) {\n              beg = mid;\n            } else {\n              end = mid - 1;\n            }\n          }\n          return beg;\n        }\n        \n        function _insert(q, data, priority, callback) {\n          if (!q.started){\n            q.started = true;\n          }\n          if (!_isArray(data)) {\n              data = [data];\n          }\n          if(data.length == 0) {\n             // call drain immediately if there are no tasks\n             return async.setImmediate(function() {\n                 if (q.drain) {\n                     q.drain();\n                 }\n             });\n          }\n          _each(data, function(task) {\n              var item = {\n                  data: task,\n                  priority: priority,\n                  callback: typeof callback === 'function' ? callback : null\n              };\n              \n              q.tasks.splice(_binarySearch(q.tasks, item, _compareTasks) + 1, 0, item);\n\n              if (q.saturated && q.tasks.length === q.concurrency) {\n                  q.saturated();\n              }\n              async.setImmediate(q.process);\n          });\n        }\n        \n        // Start with a normal queue\n        var q = async.queue(worker, concurrency);\n        \n        // Override push to accept second parameter representing priority\n        q.push = function (data, priority, callback) {\n          _insert(q, data, priority, callback);\n        };\n        \n        // Remove unshift function\n        delete q.unshift;\n\n        return q;\n    };\n\n    async.cargo = function (worker, payload) {\n        var working     = false,\n            tasks       = [];\n\n        var cargo = {\n            tasks: tasks,\n            payload: payload,\n            saturated: null,\n            empty: null,\n            drain: null,\n            drained: true,\n            push: function (data, callback) {\n                if (!_isArray(data)) {\n                    data = [data];\n                }\n                _each(data, function(task) {\n                    tasks.push({\n                        data: task,\n                        callback: typeof callback === 'function' ? callback : null\n                    });\n                    cargo.drained = false;\n                    if (cargo.saturated && tasks.length === payload) {\n                        cargo.saturated();\n                    }\n                });\n                async.setImmediate(cargo.process);\n            },\n            process: function process() {\n                if (working) return;\n                if (tasks.length === 0) {\n                    if(cargo.drain && !cargo.drained) cargo.drain();\n                    cargo.drained = true;\n                    return;\n                }\n\n                var ts = typeof payload === 'number'\n                            ? tasks.splice(0, payload)\n                            : tasks.splice(0, tasks.length);\n\n                var ds = _map(ts, function (task) {\n                    return task.data;\n                });\n\n                if(cargo.empty) cargo.empty();\n                working = true;\n                worker(ds, function () {\n                    working = false;\n\n                    var args = arguments;\n                    _each(ts, function (data) {\n                        if (data.callback) {\n                            data.callback.apply(null, args);\n                        }\n                    });\n\n                    process();\n                });\n            },\n            length: function () {\n                return tasks.length;\n            },\n            running: function () {\n                return working;\n            }\n        };\n        return cargo;\n    };\n\n    var _console_fn = function (name) {\n        return function (fn) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            fn.apply(null, args.concat([function (err) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                if (typeof console !== 'undefined') {\n                    if (err) {\n                        if (console.error) {\n                            console.error(err);\n                        }\n                    }\n                    else if (console[name]) {\n                        _each(args, function (x) {\n                            console[name](x);\n                        });\n                    }\n                }\n            }]));\n        };\n    };\n    async.log = _console_fn('log');\n    async.dir = _console_fn('dir');\n    /*async.info = _console_fn('info');\n    async.warn = _console_fn('warn');\n    async.error = _console_fn('error');*/\n\n    async.memoize = function (fn, hasher) {\n        var memo = {};\n        var queues = {};\n        hasher = hasher || function (x) {\n            return x;\n        };\n        var memoized = function () {\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            var key = hasher.apply(null, args);\n            if (key in memo) {\n                async.nextTick(function () {\n                    callback.apply(null, memo[key]);\n                });\n            }\n            else if (key in queues) {\n                queues[key].push(callback);\n            }\n            else {\n                queues[key] = [callback];\n                fn.apply(null, args.concat([function () {\n                    memo[key] = arguments;\n                    var q = queues[key];\n                    delete queues[key];\n                    for (var i = 0, l = q.length; i < l; i++) {\n                      q[i].apply(null, arguments);\n                    }\n                }]));\n            }\n        };\n        memoized.memo = memo;\n        memoized.unmemoized = fn;\n        return memoized;\n    };\n\n    async.unmemoize = function (fn) {\n      return function () {\n        return (fn.unmemoized || fn).apply(null, arguments);\n      };\n    };\n\n    async.times = function (count, iterator, callback) {\n        var counter = [];\n        for (var i = 0; i < count; i++) {\n            counter.push(i);\n        }\n        return async.map(counter, iterator, callback);\n    };\n\n    async.timesSeries = function (count, iterator, callback) {\n        var counter = [];\n        for (var i = 0; i < count; i++) {\n            counter.push(i);\n        }\n        return async.mapSeries(counter, iterator, callback);\n    };\n\n    async.seq = function (/* functions... */) {\n        var fns = arguments;\n        return function () {\n            var that = this;\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            async.reduce(fns, args, function (newargs, fn, cb) {\n                fn.apply(that, newargs.concat([function () {\n                    var err = arguments[0];\n                    var nextargs = Array.prototype.slice.call(arguments, 1);\n                    cb(err, nextargs);\n                }]))\n            },\n            function (err, results) {\n                callback.apply(that, [err].concat(results));\n            });\n        };\n    };\n\n    async.compose = function (/* functions... */) {\n      return async.seq.apply(null, Array.prototype.reverse.call(arguments));\n    };\n\n    var _applyEach = function (eachfn, fns /*args...*/) {\n        var go = function () {\n            var that = this;\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            return eachfn(fns, function (fn, cb) {\n                fn.apply(that, args.concat([cb]));\n            },\n            callback);\n        };\n        if (arguments.length > 2) {\n            var args = Array.prototype.slice.call(arguments, 2);\n            return go.apply(this, args);\n        }\n        else {\n            return go;\n        }\n    };\n    async.applyEach = doParallel(_applyEach);\n    async.applyEachSeries = doSeries(_applyEach);\n\n    async.forever = function (fn, callback) {\n        function next(err) {\n            if (err) {\n                if (callback) {\n                    return callback(err);\n                }\n                throw err;\n            }\n            fn(next);\n        }\n        next();\n    };\n\n    // Node.js\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = async;\n    }\n    // AMD / RequireJS\n    else if (typeof define !== 'undefined' && define.amd) {\n        define([], function () {\n            return async;\n        });\n    }\n    // included directly via <script> tag\n    else {\n        root.async = async;\n    }\n\n}());\n\n\n\n// WEBPACK FOOTER //\n// ../async/lib/async.js","/**\n * Implements a simple hash code for a string (see\n * https://en.wikipedia.org/wiki/Java_hashCode()).\n *\n * @param {string} The string to return a hash of.\n * @return {Number} the integer hash code of the string.\n */\nfunction integerHash(string) {\n    if (!string) {\n        return 0;\n    }\n\n    let char, hash = 0, i;\n\n    for (i = 0; i < string.length; i++) {\n        char = string.charCodeAt(i);\n        hash += char * Math.pow(31, string.length - 1 - i);\n        hash = Math.abs(hash | 0); // eslint-disable-line no-bitwise\n    }\n\n    return hash;\n}\n\nmodule.exports = { integerHash };\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/StringUtils.js","/* global __filename */\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as JingleSessionState from './JingleSessionState';\n\nconst logger = getLogger(__filename);\n\n/**\n * JingleSession provides an API to manage a single Jingle session. We will\n * have different implementations depending on the underlying interface used\n * (i.e. WebRTC and ORTC) and here we hold the code common to all of them.\n */\nexport default class JingleSession {\n\n    /* eslint-disable max-params */\n\n    /**\n     * Creates new <tt>JingleSession</tt>.\n     * @param {string} sid the Jingle session identifier\n     * @param {string} localJid our JID\n     * @param {string} remoteJid the JID of the remote peer\n     * @param {Strophe.Connection} connection the XMPP connection\n     * @param {Object} mediaConstraints the media constraints object passed to\n     * the PeerConnection onCreateAnswer/Offer as defined by the WebRTC.\n     * @param {Object} iceConfig the ICE servers config object as defined by\n     * the WebRTC. Passed to the PeerConnection's constructor.\n     */\n    constructor(\n            sid,\n            localJid,\n            remoteJid,\n            connection,\n            mediaConstraints,\n            iceConfig) {\n        this.sid = sid;\n        this.localJid = localJid;\n        this.remoteJid = remoteJid;\n        this.connection = connection;\n        this.mediaConstraints = mediaConstraints;\n        this.iceConfig = iceConfig;\n\n        /**\n         * Whether to use dripping or not. Dripping is sending trickle\n         * candidates not one-by-one.\n         */\n        this.usedrip = true;\n\n        /**\n         *  When dripping is used, stores ICE candidates which are to be sent.\n         */\n        this.dripContainer = [];\n\n        /**\n         * The chat room instance associated with the session.\n         * @type {ChatRoom}\n         */\n        this.room = null;\n\n        /**\n         * Jingle session state - uninitialized until {@link initialize} is\n         * called @type {JingleSessionState}\n         */\n        this.state = null;\n\n        /**\n         * The RTC service instance\n         * @type {RTC}\n         */\n        this.rtc = null;\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Prepares this object to initiate a session.\n     * @param {boolean} isInitiator whether we will be the Jingle initiator.\n     * @param {ChatRoom} room the chat room for the conference associated with\n     * this session\n     * @param {RTC} rtc the RTC service instance\n     */\n    initialize(isInitiator, room, rtc) {\n        if (this.state !== null) {\n            const errmsg\n                = `attempt to initiate on session ${this.sid}\n                   in state ${this.state}`;\n\n            logger.error(errmsg);\n            throw new Error(errmsg);\n        }\n        this.room = room;\n        this.rtc = rtc;\n        this.state = JingleSessionState.PENDING;\n        this.initiator = isInitiator ? this.localJid : this.remoteJid;\n        this.responder = isInitiator ? this.remoteJid : this.localJid;\n        this.doInitialize();\n    }\n\n    /**\n     * The implementing class finishes initialization here. Called at the end of\n     * {@link initialize}.\n     * @protected\n     */\n    doInitialize() {} // eslint-disable-line no-empty-function\n\n    /* eslint-disable no-unused-vars, no-empty-function */\n\n    /**\n     * Adds the ICE candidates found in the 'contents' array as remote\n     * candidates?\n     * Note: currently only used on transport-info\n     *\n     * @param contents\n     */\n    addIceCandidates(contents) {}\n\n    /* eslint-enable no-unused-vars, no-empty-function */\n\n    /**\n     * Returns current state of this <tt>JingleSession</tt> instance.\n     * @returns {JingleSessionState} the current state of this session instance.\n     */\n    getState() {\n        return this.state;\n    }\n\n    /* eslint-disable no-unused-vars, no-empty-function */\n\n    /**\n     * Handles an 'add-source' event.\n     *\n     * @param contents an array of Jingle 'content' elements.\n     */\n    addSources(contents) {}\n\n    /**\n     * Handles a 'remove-source' event.\n     *\n     * @param contents an array of Jingle 'content' elements.\n     */\n    removeSources(contents) {}\n\n    /**\n     * Terminates this Jingle session by sending session-terminate\n     * @param success a callback called once the 'session-terminate' packet has\n     * been acknowledged with RESULT.\n     * @param failure a callback called when either timeout occurs or ERROR\n     * response is received.\n     * @param {Object} options\n     * @param {string} [options.reason] XMPP Jingle error condition\n     * @param {string} [options.reasonDescription] some meaningful error message\n     * @param {boolean} [options.sendSessionTerminate=true] set to false to skip\n     * sending session-terminate. It may not make sense to send it if the XMPP\n     * connection has been closed already or if the remote peer has disconnected\n     */\n    terminate(success, failure, options) {}\n\n    /**\n     * Handles an offer from the remote peer (prepares to accept a session).\n     * @param jingle the 'jingle' XML element.\n     * @param success callback called when we the incoming session has been\n     * accepted\n     * @param failure callback called when we fail for any reason, will supply\n     * error object with details(which is meant more to be printed to the logger\n     * than analysed in the code, as the error is unrecoverable anyway)\n     */\n    acceptOffer(jingle, success, failure) {}\n\n    /**\n     * Returns the JID of the initiator of the jingle session.\n     */\n    _getInitiatorJid() {\n        return this.isInitiator ? this.localJid : this.remoteJid;\n    }\n\n    /* eslint-enable no-unused-vars, no-empty-function */\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/JingleSession.js","import SDPUtil from './SDPUtil';\n\n// this could be useful in Array.prototype.\n/**\n *\n * @param array1\n * @param array2\n */\nfunction arrayEquals(array1, array2) {\n    // if the other array is a falsy value, return\n    if (!array2) {\n        return false;\n    }\n\n    // compare lengths - can save a lot of time\n    if (array1.length !== array2.length) {\n        return false;\n    }\n\n    for (let i = 0, l = array1.length; i < l; i++) {\n        // Check if we have nested arrays\n        if (array1[i] instanceof Array && array2[i] instanceof Array) {\n            // recurse into the nested arrays\n            if (!array1[i].equals(array2[i])) {\n                return false;\n            }\n        } else if (array1[i] !== array2[i]) {\n            // Warning - two different object instances will never be\n            // equal: {x:20} != {x:20}\n            return false;\n        }\n    }\n\n    return true;\n}\n\n/**\n *\n * @param mySDP\n * @param otherSDP\n */\nexport default function SDPDiffer(mySDP, otherSDP) {\n    this.mySDP = mySDP;\n    this.otherSDP = otherSDP;\n    if (!mySDP) {\n        throw new Error('\"mySDP\" is undefined!');\n    } else if (!otherSDP) {\n        throw new Error('\"otherSDP\" is undefined!');\n    }\n}\n\n/**\n * Returns map of MediaChannel that contains media contained in\n * 'mySDP', but not contained in 'otherSdp'. Mapped by channel idx.\n */\nSDPDiffer.prototype.getNewMedia = function() {\n\n    const myMedias = this.mySDP.getMediaSsrcMap();\n    const othersMedias = this.otherSDP.getMediaSsrcMap();\n    const newMedia = {};\n\n    Object.keys(othersMedias).forEach(othersMediaIdx => {\n        const myMedia = myMedias[othersMediaIdx];\n        const othersMedia = othersMedias[othersMediaIdx];\n\n        if (!myMedia && othersMedia) {\n            // Add whole channel\n            newMedia[othersMediaIdx] = othersMedia;\n\n            return;\n        }\n\n        // Look for new ssrcs across the channel\n        Object.keys(othersMedia.ssrcs).forEach(ssrc => {\n            if (Object.keys(myMedia.ssrcs).indexOf(ssrc) === -1) {\n                // Allocate channel if we've found ssrc that doesn't exist in\n                // our channel\n                if (!newMedia[othersMediaIdx]) {\n                    newMedia[othersMediaIdx] = {\n                        mediaindex: othersMedia.mediaindex,\n                        mid: othersMedia.mid,\n                        ssrcs: {},\n                        ssrcGroups: []\n                    };\n                }\n                newMedia[othersMediaIdx].ssrcs[ssrc] = othersMedia.ssrcs[ssrc];\n            }\n        });\n\n        // Look for new ssrc groups across the channels\n        othersMedia.ssrcGroups.forEach(otherSsrcGroup => {\n\n            // try to match the other ssrc-group with an ssrc-group of ours\n            let matched = false;\n\n            for (let i = 0; i < myMedia.ssrcGroups.length; i++) {\n                const mySsrcGroup = myMedia.ssrcGroups[i];\n\n                if (otherSsrcGroup.semantics === mySsrcGroup.semantics\n                    && arrayEquals(otherSsrcGroup.ssrcs, mySsrcGroup.ssrcs)) {\n\n                    matched = true;\n                    break;\n                }\n            }\n\n            if (!matched) {\n                // Allocate channel if we've found an ssrc-group that doesn't\n                // exist in our channel\n\n                if (!newMedia[othersMediaIdx]) {\n                    newMedia[othersMediaIdx] = {\n                        mediaindex: othersMedia.mediaindex,\n                        mid: othersMedia.mid,\n                        ssrcs: {},\n                        ssrcGroups: []\n                    };\n                }\n                newMedia[othersMediaIdx].ssrcGroups.push(otherSsrcGroup);\n            }\n        });\n    });\n\n    return newMedia;\n};\n\n/**\n * TODO: document!\n */\nSDPDiffer.prototype.toJingle = function(modify) {\n    const sdpMediaSsrcs = this.getNewMedia();\n\n    let modified = false;\n\n    Object.keys(sdpMediaSsrcs).forEach(mediaindex => {\n        modified = true;\n        const media = sdpMediaSsrcs[mediaindex];\n\n        modify.c('content', { name: media.mid });\n\n        modify.c('description',\n            { xmlns: 'urn:xmpp:jingle:apps:rtp:1',\n                media: media.mid });\n\n        // FIXME: not completely sure this operates on blocks and / or handles\n        // different ssrcs correctly\n        // generate sources from lines\n        Object.keys(media.ssrcs).forEach(ssrcNum => {\n            const mediaSsrc = media.ssrcs[ssrcNum];\n\n            modify.c('source', { xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0' });\n            modify.attrs({ ssrc: mediaSsrc.ssrc });\n\n            // iterate over ssrc lines\n            mediaSsrc.lines.forEach(line => {\n                const idx = line.indexOf(' ');\n                const kv = line.substr(idx + 1);\n\n                modify.c('parameter');\n                if (kv.indexOf(':') === -1) {\n                    modify.attrs({ name: kv });\n                } else {\n                    const nv = kv.split(':', 2);\n                    const name = nv[0];\n                    const value = SDPUtil.filterSpecialChars(nv[1]);\n\n                    modify.attrs({ name });\n                    modify.attrs({ value });\n                }\n                modify.up(); // end of parameter\n            });\n            modify.up(); // end of source\n        });\n\n        // generate source groups from lines\n        media.ssrcGroups.forEach(ssrcGroup => {\n            if (ssrcGroup.ssrcs.length) {\n\n                modify.c('ssrc-group', {\n                    semantics: ssrcGroup.semantics,\n                    xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'\n                });\n\n                ssrcGroup.ssrcs.forEach(ssrc => {\n                    modify.c('source', { ssrc })\n                        .up(); // end of source\n                });\n                modify.up(); // end of ssrc-group\n            }\n        });\n\n        modify.up(); // end of description\n        modify.up(); // end of content\n    });\n\n    return modified;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/SDPDiffer.js","/* global __filename */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport * as SignalingEvents from '../../service/RTC/SignalingEvents';\nimport SignalingLayer from '../../service/RTC/SignalingLayer';\n\nconst logger = getLogger(__filename);\n\n/**\n * Default XMPP implementation of the {@link SignalingLayer} interface. Obtains\n * the data from the MUC presence.\n */\nexport default class SignalingLayerImpl extends SignalingLayer {\n    /**\n     * Creates new instance.\n     */\n    constructor() {\n        super();\n\n        /**\n         * A map that stores SSRCs of remote streams. And is used only locally\n         * We store the mapping when jingle is received, and later is used\n         * onaddstream webrtc event where we have only the ssrc\n         * FIXME: This map got filled and never cleaned and can grow during long\n         * conference\n         * @type {Map<number, string>} maps SSRC number to jid\n         */\n        this.ssrcOwners = new Map();\n\n        /**\n         *\n         * @type {ChatRoom|null}\n         */\n        this.chatRoom = null;\n    }\n\n    /**\n     * Sets the <tt>ChatRoom</tt> instance used and binds presence listeners.\n     * @param {ChatRoom} room\n     */\n    setChatRoom(room) {\n        const oldChatRoom = this.chatRoom;\n\n        this.chatRoom = room;\n        if (oldChatRoom) {\n            oldChatRoom.removePresenceListener(\n                'audiomuted', this._audioMuteHandler);\n            oldChatRoom.removePresenceListener(\n                'videomuted', this._videoMuteHandler);\n            oldChatRoom.removePresenceListener(\n                'videoType', this._videoTypeHandler);\n        }\n        if (room) {\n            // SignalingEvents\n            this._audioMuteHandler = (node, from) => {\n                this.eventEmitter.emit(\n                    SignalingEvents.PEER_MUTED_CHANGED,\n                    from, MediaType.AUDIO, node.value === 'true');\n            };\n            room.addPresenceListener('audiomuted', this._audioMuteHandler);\n\n            this._videoMuteHandler = (node, from) => {\n                this.eventEmitter.emit(\n                    SignalingEvents.PEER_MUTED_CHANGED,\n                    from, MediaType.VIDEO, node.value === 'true');\n            };\n            room.addPresenceListener('videomuted', this._videoMuteHandler);\n\n            this._videoTypeHandler = (node, from) => {\n                this.eventEmitter.emit(\n                    SignalingEvents.PEER_VIDEO_TYPE_CHANGED,\n                    from, node.value);\n            };\n            room.addPresenceListener('videoType', this._videoTypeHandler);\n        }\n    }\n\n    /**\n     * @inheritDoc\n     */\n    getPeerMediaInfo(owner, mediaType) {\n        if (this.chatRoom) {\n            return this.chatRoom.getMediaPresenceInfo(owner, mediaType);\n        }\n        logger.error('Requested peer media info, before room was set');\n    }\n\n    /**\n     * @inheritDoc\n     */\n    getSSRCOwner(ssrc) {\n        return this.ssrcOwners.get(ssrc);\n    }\n\n    /**\n     * Set an SSRC owner.\n     * @param {number} ssrc an SSRC to be owned\n     * @param {string} endpointId owner's ID (MUC nickname)\n     * @throws TypeError if <tt>ssrc</tt> is not a number\n     */\n    setSSRCOwner(ssrc, endpointId) {\n        if (typeof ssrc !== 'number') {\n            throw new TypeError(`SSRC(${ssrc}) must be a number`);\n        }\n        this.ssrcOwners.set(ssrc, endpointId);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/SignalingLayerImpl.js","\nimport Listenable from '../../modules/util/Listenable';\n\n/**\n * An object that carries the info about specific media type advertised by\n * participant in the signaling channel.\n * @typedef {Object} PeerMediaInfo\n * @property {boolean} muted indicates if the media is currently muted\n * @property {VideoType|undefined} videoType the type of the video if applicable\n */\n\n/**\n * Interface used to expose the information carried over the signaling channel\n * which is not available to the RTC module in the media SDP.\n *\n * @interface SignalingLayer\n */\nexport default class SignalingLayer extends Listenable {\n\n    /**\n     * Obtains the endpoint ID for given SSRC.\n     * @param {number} ssrc the SSRC number.\n     * @return {string|null} the endpoint ID for given media SSRC.\n     */\n    getSSRCOwner(ssrc) { // eslint-disable-line no-unused-vars\n        throw new Error('not implemented');\n    }\n\n    /**\n     * Obtains the info about given media advertised in the MUC presence of\n     * the participant identified by the given MUC JID.\n     * @param {string} owner the MUC jid of the participant for whom\n     * {@link PeerMediaInfo} will be obtained.\n     * @param {MediaType} mediaType the type of the media for which presence\n     * info will be obtained.\n     * @return {PeerMediaInfo|null} presenceInfo an object with media presence\n     * info or <tt>null</tt> either if there is no presence available for given\n     * JID or if the media type given is invalid.\n     */\n    getPeerMediaInfo(owner, mediaType) { // eslint-disable-line no-unused-vars\n        throw new Error('not implemented');\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./service/RTC/SignalingLayer.js","/* global __filename */\n/**\n * Strophe logger implementation. Logs from level WARN and above.\n */\nimport { getLogger } from 'jitsi-meet-logger';\nimport { Strophe } from 'strophe.js';\n\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\n\nconst logger = getLogger(__filename);\n\n/**\n * This is the last HTTP error status captured from Strophe debug logs.\n * The purpose of storing it is to distinguish between the network and\n * infrastructure reason for connection being dropped (see connectionHandler in\n * xmpp.js). The value will be cleared (-1) if the subsequent request succeeds\n * which means that the failure could be transient.\n *\n * FIXME in the latest Strophe (not released on npm) there is API to handle\n * particular HTTP errors, but there is no way to learn if the subsequent\n * request succeeded in order to tell if the error was one time incident or if\n * it was the reason for dropping the connection by Strophe (the connection is\n * dropped after 5 subsequent failures). Ideally Strophe should provide more\n * details about the reason on why the connection stopped.\n *\n * @type {number}\n */\nlet lastErrorStatus = -1;\n\n/**\n * A regular expression used to catch Strophe's log message indicating that the\n * last BOSH request was successful. When there is such message seen the\n * {@link lastErrorStatus} will be set back to '-1'.\n * @type {RegExp}\n */\nconst resetLastErrorStatusRegExpr = /request id \\d+.\\d+ got 200/;\n\n/**\n * A regular expression used to capture the current value of the BOSH request\n * error status (HTTP error code or '0' or something else).\n * @type {RegExp}\n */\nconst lastErrorStatusRegExpr\n    = /request errored, status: (\\d+), number of errors: \\d+/;\n\n/**\n *\n */\nexport default function() {\n\n    Strophe.log = function(level, msg) {\n        // Our global handler reports uncaught errors to the stats which may\n        // interpret those as partial call failure.\n        // Strophe log entry about secondary request timeout does not mean that\n        // it's a final failure(the request will be restarted), so we lower it's\n        // level here to a warning.\n        logger.trace('Strophe', level, msg);\n        if (typeof msg === 'string'\n                && msg.indexOf('Request ') !== -1\n                && msg.indexOf('timed out (secondary), restarting') !== -1) {\n            // eslint-disable-next-line no-param-reassign\n            level = Strophe.LogLevel.WARN;\n        }\n\n        /* eslint-disable no-case-declarations */\n        switch (level) {\n        case Strophe.LogLevel.DEBUG:\n            // The log message which reports successful status is logged on\n            // Strophe's DEBUG level.\n            if (lastErrorStatus !== -1\n                    && resetLastErrorStatusRegExpr.test(msg)) {\n                logger.debug('Reset lastErrorStatus');\n                lastErrorStatus = -1;\n            }\n            break;\n        case Strophe.LogLevel.WARN:\n            logger.warn(`Strophe: ${msg}`);\n            const errStatusCapture = lastErrorStatusRegExpr.exec(msg);\n\n            if (errStatusCapture && errStatusCapture.length === 2) {\n                lastErrorStatus = parseInt(errStatusCapture[1], 10);\n                logger.debug(`lastErrorStatus set to: ${lastErrorStatus}`);\n            }\n            break;\n        case Strophe.LogLevel.ERROR:\n        case Strophe.LogLevel.FATAL:\n            // eslint-disable-next-line no-param-reassign\n            msg = `Strophe: ${msg}`;\n            GlobalOnErrorHandler.callErrorHandler(new Error(msg));\n            logger.error(msg);\n            break;\n        }\n\n        /* eslint-enable no-case-declarations */\n    };\n\n    /**\n     * Returns error status (HTTP error code) of the last BOSH request.\n     *\n     * @return {number} HTTP error code, '0' for unknown or \"god knows what\"\n     * (this is a hack).\n     */\n    Strophe.getLastErrorStatus = function() {\n        return lastErrorStatus;\n    };\n\n    Strophe.getStatusString = function(status) {\n        switch (status) {\n        case Strophe.Status.ERROR:\n            return 'ERROR';\n        case Strophe.Status.CONNECTING:\n            return 'CONNECTING';\n        case Strophe.Status.CONNFAIL:\n            return 'CONNFAIL';\n        case Strophe.Status.AUTHENTICATING:\n            return 'AUTHENTICATING';\n        case Strophe.Status.AUTHFAIL:\n            return 'AUTHFAIL';\n        case Strophe.Status.CONNECTED:\n            return 'CONNECTED';\n        case Strophe.Status.DISCONNECTED:\n            return 'DISCONNECTED';\n        case Strophe.Status.DISCONNECTING:\n            return 'DISCONNECTING';\n        case Strophe.Status.ATTACHED:\n            return 'ATTACHED';\n        default:\n            return 'unknown';\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/strophe.util.js","import { getLogger } from 'jitsi-meet-logger';\nimport { $iq, Strophe } from 'strophe.js';\n\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\n\nimport ConnectionPlugin from './ConnectionPlugin';\n\n\nconst logger = getLogger(__filename);\n\n/**\n * Ping every 10 sec\n */\nconst PING_INTERVAL = 10000;\n\n/**\n * Ping timeout error after 15 sec of waiting.\n */\nconst PING_TIMEOUT = 15000;\n\n/**\n * Will close the connection after 3 consecutive ping errors.\n */\nconst PING_THRESHOLD = 3;\n\n/**\n * The number of timestamps of send pings to keep.\n * The current value is 2 minutes.\n * @type {number} number of timestamps.\n */\nconst PING_TIMESTAMPS_TO_KEEP = 120000 / PING_INTERVAL;\n\n/**\n * XEP-0199 ping plugin.\n *\n * Registers \"urn:xmpp:ping\" namespace under Strophe.NS.PING.\n */\nclass PingConnectionPlugin extends ConnectionPlugin {\n    /**\n     * Contructs new object\n     * @param {XMPP} xmpp the xmpp module.\n     * @constructor\n     */\n    constructor(xmpp) {\n        super();\n        this.failedPings = 0;\n        this.xmpp = xmpp;\n        this.pingExecIntervals = new Array(PING_TIMESTAMPS_TO_KEEP);\n    }\n\n    /**\n     * Initializes the plugin. Method called by Strophe.\n     * @param connection Strophe connection instance.\n     */\n    init(connection) {\n        super.init(connection);\n        Strophe.addNamespace('PING', 'urn:xmpp:ping');\n    }\n\n    /* eslint-disable max-params */\n\n    /**\n     * Sends \"ping\" to given <tt>jid</tt>\n     * @param jid the JID to which ping request will be sent.\n     * @param success callback called on success.\n     * @param error callback called on error.\n     * @param timeout ms how long are we going to wait for the response. On\n     * timeout <tt>error<//t> callback is called with undefined error argument.\n     */\n    ping(jid, success, error, timeout) {\n        this._addPingExecutionTimestamp();\n\n        const iq = $iq({\n            type: 'get',\n            to: jid\n        });\n\n        iq.c('ping', { xmlns: Strophe.NS.PING });\n        this.connection.sendIQ(iq, success, error, timeout);\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * Checks if given <tt>jid</tt> has XEP-0199 ping support.\n     * @param jid the JID to be checked for ping support.\n     * @param callback function with boolean argument which will be\n     * <tt>true</tt> if XEP-0199 ping is supported by given <tt>jid</tt>\n     */\n    hasPingSupport(jid, callback) {\n        this.xmpp.caps.getFeatures(jid).then(features =>\n            callback(features.has('urn:xmpp:ping')), error => {\n            const errmsg = 'Ping feature discovery error';\n\n            GlobalOnErrorHandler.callErrorHandler(\n                new Error(`${errmsg}: ${error}`));\n            logger.error(errmsg, error);\n            callback(false);\n        });\n    }\n\n    /**\n     * Starts to send ping in given interval to specified remote JID.\n     * This plugin supports only one such task and <tt>stopInterval</tt>\n     * must be called before starting a new one.\n     * @param remoteJid remote JID to which ping requests will be sent to.\n     * @param interval task interval in ms.\n     */\n    startInterval(remoteJid, interval = PING_INTERVAL) {\n        if (this.intervalId) {\n            const errmsg = 'Ping task scheduled already';\n\n            GlobalOnErrorHandler.callErrorHandler(new Error(errmsg));\n            logger.error(errmsg);\n\n            return;\n        }\n        this.intervalId = window.setInterval(() => {\n            this.ping(remoteJid, () => {\n                this.failedPings = 0;\n            }, error => {\n                this.failedPings += 1;\n                const errmsg = `Ping ${error ? 'error' : 'timeout'}`;\n\n                if (this.failedPings >= PING_THRESHOLD) {\n                    GlobalOnErrorHandler.callErrorHandler(new Error(errmsg));\n                    logger.error(errmsg, error);\n\n                    // FIXME it doesn't help to disconnect when 3rd PING\n                    // times out, it only stops Strophe from retrying.\n                    // Not really sure what's the right thing to do in that\n                    // situation, but just closing the connection makes no\n                    // sense.\n                    // self.connection.disconnect();\n                } else {\n                    logger.warn(errmsg, error);\n                }\n            }, PING_TIMEOUT);\n        }, interval);\n        logger.info(`XMPP pings will be sent every ${interval} ms`);\n    }\n\n    /**\n     * Stops current \"ping\"  interval task.\n     */\n    stopInterval() {\n        if (this.intervalId) {\n            window.clearInterval(this.intervalId);\n            this.intervalId = null;\n            this.failedPings = 0;\n            logger.info('Ping interval cleared');\n        }\n    }\n\n    /**\n     * Adds the current time to the array of send ping timestamps.\n     * @private\n     */\n    _addPingExecutionTimestamp() {\n        this.pingExecIntervals.push(new Date().getTime());\n\n        // keep array length to PING_TIMESTAMPS_TO_KEEP\n        if (this.pingExecIntervals.length > PING_TIMESTAMPS_TO_KEEP) {\n            this.pingExecIntervals.shift();\n        }\n    }\n\n    /**\n     * Returns the maximum time between the recent sent pings, if there is a\n     * big value it means the computer was inactive for some time(suspended).\n     * Checks the maximum gap between sending pings, considering and the\n     * current time. Trying to detect computer inactivity (sleep).\n     *\n     * @returns {int} the time ping was suspended, if it was not 0 is returned.\n     */\n    getPingSuspendTime() {\n        const pingIntervals = this.pingExecIntervals.slice();\n\n        // we need current time, as if ping was sent now\n        // if computer sleeps we will get correct interval after next\n        // scheduled ping, bet we sometimes need that interval before waiting\n        // for the next ping, on closing the connection on error.\n        pingIntervals.push(new Date().getTime());\n\n        let maxInterval = 0;\n        let previousTS = pingIntervals[0];\n\n        pingIntervals.forEach(e => {\n            const currentInterval = e - previousTS;\n\n            if (currentInterval > maxInterval) {\n                maxInterval = currentInterval;\n            }\n\n            previousTS = e;\n        });\n\n        // remove the interval between the ping sent\n        // this way in normal execution there is no suspend and the return\n        // will be 0 or close to 0.\n        maxInterval -= PING_INTERVAL;\n\n        // make sure we do not return less than 0\n        return Math.max(maxInterval, 0);\n    }\n}\n\n/**\n *\n * @param xmpp\n */\nexport default function(xmpp) {\n    Strophe.addConnectionPlugin('ping', new PingConnectionPlugin(xmpp));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/strophe.ping.js","/* global $ */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport { $iq, Strophe } from 'strophe.js';\n\nimport ConnectionPlugin from './ConnectionPlugin';\n\nconst logger = getLogger(__filename);\n\nconst RAYO_XMLNS = 'urn:xmpp:rayo:1';\n\n/**\n *\n */\nclass RayoConnectionPlugin extends ConnectionPlugin {\n    /**\n     *\n     * @param connection\n     */\n    init(connection) {\n        super.init(connection);\n\n        this.connection.addHandler(\n            this.onRayo.bind(this), RAYO_XMLNS, 'iq', 'set', null, null);\n    }\n\n    /**\n     *\n     * @param iq\n     */\n    onRayo(iq) {\n        logger.info('Rayo IQ', iq);\n    }\n\n    /* eslint-disable max-params */\n\n    /**\n     *\n     * @param to\n     * @param from\n     * @param roomName\n     * @param roomPass\n     * @param focusMucJid\n     */\n    dial(to, from, roomName, roomPass, focusMucJid) {\n        return new Promise((resolve, reject) => {\n            if (!focusMucJid) {\n                reject(new Error('Internal error!'));\n\n                return;\n            }\n            const req = $iq({\n                type: 'set',\n                to: focusMucJid\n            });\n\n            req.c('dial', {\n                xmlns: RAYO_XMLNS,\n                to,\n                from\n            });\n            req.c('header', {\n                name: 'JvbRoomName',\n                value: roomName\n            }).up();\n\n            if (roomPass && roomPass.length) {\n                req.c('header', {\n                    name: 'JvbRoomPassword',\n                    value: roomPass\n                }).up();\n            }\n\n            this.connection.sendIQ(\n                req,\n                result => {\n                    logger.info('Dial result ', result);\n\n                    // eslint-disable-next-line newline-per-chained-call\n                    const resource = $(result).find('ref').attr('uri');\n\n                    this.callResource = resource.substr('xmpp:'.length);\n                    logger.info(`Received call resource: ${this.callResource}`);\n                    resolve();\n                },\n                error => {\n                    logger.info('Dial error ', error);\n                    reject(error);\n                });\n        });\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     *\n     */\n    hangup() {\n        return new Promise((resolve, reject) => {\n            if (!this.callResource) {\n                reject(new Error('No call in progress'));\n                logger.warn('No call in progress');\n\n                return;\n            }\n\n            const req = $iq({\n                type: 'set',\n                to: this.callResource\n            });\n\n            req.c('hangup', {\n                xmlns: RAYO_XMLNS\n            });\n\n            this.connection.sendIQ(req, result => {\n                logger.info('Hangup result ', result);\n                this.callResource = null;\n                resolve();\n            }, error => {\n                logger.info('Hangup error ', error);\n                this.callResource = null;\n                reject(new Error('Hangup error '));\n            });\n        });\n    }\n}\n\n/**\n *\n */\nexport default function() {\n    Strophe.addConnectionPlugin('rayo', new RayoConnectionPlugin());\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/strophe.rayo.js","import { Strophe } from 'strophe.js';\n\nimport ConnectionPlugin from './ConnectionPlugin';\n\n/**\n *  Logs raw stanzas and makes them available for download as JSON\n */\nclass StropheLogger extends ConnectionPlugin {\n    /**\n     *\n     */\n    constructor() {\n        super();\n        this.log = [];\n    }\n\n    /**\n     *\n     * @param connection\n     */\n    init(connection) {\n        super.init(connection);\n        this.connection.rawInput = this.logIncoming.bind(this);\n        this.connection.rawOutput = this.logOutgoing.bind(this);\n    }\n\n    /**\n     *\n     * @param stanza\n     */\n    logIncoming(stanza) {\n        this.log.push([ new Date().getTime(), 'incoming', stanza ]);\n    }\n\n    /**\n     *\n     * @param stanza\n     */\n    logOutgoing(stanza) {\n        this.log.push([ new Date().getTime(), 'outgoing', stanza ]);\n    }\n}\n\n/**\n *\n */\nexport default function() {\n    Strophe.addConnectionPlugin('logger', new StropheLogger());\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/strophe.logger.js","/* global $ */\n\nimport { b64_sha1, Strophe } from 'strophe.js'; // eslint-disable-line camelcase\n\nimport XMPPEvents from '../../service/xmpp/XMPPEvents';\nimport Listenable from '../util/Listenable';\n\n/**\n * The property\n */\nconst IDENTITY_PROPERTIES = [ 'category', 'type', 'lang', 'name' ];\nconst IDENTITY_PROPERTIES_FOR_COMPARE = [ 'category', 'type', 'lang' ];\nconst HASH = 'sha-1';\n\n/**\n *\n * @param a\n * @param b\n */\nfunction compareIdentities(a, b) {\n    let res = 0;\n\n    IDENTITY_PROPERTIES_FOR_COMPARE.some(key =>\n        (res = ((a[key] > b[key]) && 1) || ((a[key] < b[key]) && -1)) !== 0\n    );\n\n    return res;\n}\n\n/**\n * Implements xep-0115 ( http://xmpp.org/extensions/xep-0115.html )\n */\nexport default class Caps extends Listenable {\n    /**\n     * Constructs new Caps instance.\n     * @param {Strophe.Connection} connection the strophe connection object\n     * @param {String} node the value of the node attribute of the \"c\" xml node\n     * that will be sent to the other participants\n     */\n    constructor(connection = {}, node = 'http://jitsi.org/jitsimeet') {\n        super();\n        this.node = node;\n        this.disco = connection.disco;\n        if (!this.disco) {\n            throw new Error(\n                'Missing strophe-plugins '\n                + '(disco plugin is required)!');\n        }\n\n        this.versionToCapabilities = Object.create(null);\n        this.jidToVersion = Object.create(null);\n        this.version = '';\n        this.rooms = new Set();\n\n        const emuc = connection.emuc;\n\n        emuc.addListener(XMPPEvents.EMUC_ROOM_ADDED,\n            room => this._addChatRoom(room));\n        emuc.addListener(XMPPEvents.EMUC_ROOM_REMOVED,\n            room => this._removeChatRoom(room));\n        Object.keys(emuc.rooms).forEach(jid => {\n            this._addChatRoom(emuc.rooms[jid]);\n        });\n\n        Strophe.addNamespace('CAPS', 'http://jabber.org/protocol/caps');\n        this.disco.addFeature(Strophe.NS.CAPS);\n        connection.addHandler(this._handleCaps.bind(this), Strophe.NS.CAPS);\n\n        this._onMucMemberLeft = this._removeJidToVersionEntry.bind(this);\n    }\n\n    /**\n     * Adds new feature to the list of supported features for the local\n     * participant\n     * @param {String} feature the name of the feature.\n     * @param {boolean} submit if true - new presence with updated \"c\" node\n     * will be sent.\n     */\n    addFeature(feature, submit = false) {\n        this.disco.addFeature(feature);\n        this._generateVersion();\n        if (submit) {\n            this.submit();\n        }\n    }\n\n    /**\n     * Removes a feature from the list of supported features for the local\n     * participant\n     * @param {String} feature the name of the feature.\n     * @param {boolean} submit if true - new presence with updated \"c\" node\n     * will be sent.\n     */\n    removeFeature(feature, submit = false) {\n        this.disco.removeFeature(feature);\n        this._generateVersion();\n        if (submit) {\n            this.submit();\n        }\n    }\n\n    /**\n     * Sends new presence stanza for every room from the list of rooms.\n     */\n    submit() {\n        this.rooms.forEach(room => room.sendPresence());\n    }\n\n    /**\n     * Returns a set with the features for a participant.\n     * @param {String} jid the jid of the participant\n     * @param {int} timeout the timeout in ms for reply from the participant.\n     * @returns {Promise<Set<String>, Error>}\n     */\n    getFeatures(jid, timeout = 5000) {\n        const user\n            = jid in this.jidToVersion ? this.jidToVersion[jid] : null;\n\n        if (!user || !(user.version in this.versionToCapabilities)) {\n            const node = user ? `${user.node}#${user.version}` : null;\n\n\n            return new Promise((resolve, reject) =>\n                this.disco.info(jid, node, response => {\n                    const features = new Set();\n\n                    $(response)\n                        .find('>query>feature')\n                        .each(\n                            (idx, el) => features.add(el.getAttribute('var')));\n                    if (user) {\n                        // TODO: Maybe use the version + node + hash as keys?\n                        this.versionToCapabilities[user.version] = features;\n                    }\n                    resolve(features);\n                }, reject, timeout)\n            );\n        }\n\n        return Promise.resolve(this.versionToCapabilities[user.version]);\n    }\n\n    /**\n     * Adds ChatRoom instance to the list of rooms. Adds listeners to the room\n     * and adds \"c\" element to the presences of the room.\n     * @param {ChatRoom} room the room.\n     */\n    _addChatRoom(room) {\n        this.rooms.add(room);\n        room.addListener(XMPPEvents.MUC_MEMBER_LEFT, this._onMucMemberLeft);\n        this._fixChatRoomPresenceMap(room);\n    }\n\n    /**\n     * Removes ChatRoom instance from the list of rooms. Removes listeners\n     * added from the Caps class.\n     * @param {ChatRoom} room the room.\n     */\n    _removeChatRoom(room) {\n        this.rooms.delete(room);\n        room.removeListener(XMPPEvents.MUC_MEMBER_LEFT, this._onMucMemberLeft);\n    }\n\n    /**\n     * Creates/updates the \"c\" xml node into the presence of the passed room.\n     * @param {ChatRoom} room the room.\n     */\n    _fixChatRoomPresenceMap(room) {\n        room.addToPresence('c', {\n            attributes: {\n                xmlns: Strophe.NS.CAPS,\n                hash: HASH,\n                node: this.node,\n                ver: this.version\n            }\n        });\n    }\n\n    /**\n     * Handles this.version changes.\n     */\n    _notifyVersionChanged() {\n        // update the version for all rooms\n        this.rooms.forEach(room => this._fixChatRoomPresenceMap(room));\n        this.submit();\n    }\n\n    /**\n     * Generates the value for the \"ver\" attribute.\n     */\n    _generateVersion() {\n        const identities\n          = this.disco._identities.sort(compareIdentities).reduce(\n              (accumulatedValue, identity) =>\n                  `${\n                      IDENTITY_PROPERTIES.reduce(\n                          (tmp, key, idx) =>\n                              tmp\n                                  + (idx === 0 ? '' : '/')\n                                  + identity[key],\n                          '')\n                  }<`,\n              '');\n        const features\n            = this.disco._features.sort().reduce(\n                (tmp, feature) => `${tmp + feature}<`, '');\n\n        this.version = b64_sha1(identities + features);\n        this._notifyVersionChanged();\n    }\n\n    /**\n     * Parses the \"c\" xml node from presence.\n     * @param {DOMElement} stanza the presence packet\n     */\n    _handleCaps(stanza) {\n        const from = stanza.getAttribute('from');\n        const caps = stanza.querySelector('c');\n        const version = caps.getAttribute('ver');\n        const node = caps.getAttribute('node');\n        const oldVersion = this.jidToVersion[from];\n\n        this.jidToVersion[from] = { version,\n            node };\n        if (oldVersion && oldVersion.version !== version) {\n            this.eventEmitter.emit(XMPPEvents.PARTCIPANT_FEATURES_CHANGED,\n                from);\n        }\n\n        // return true to not remove the handler from Strophe\n        return true;\n    }\n\n    /**\n     * Removes entry from this.jidToVersion map.\n     * @param {String} jid the jid to be removed.\n     */\n    _removeJidToVersionEntry(jid) {\n        if (jid in this.jidToVersion) {\n            delete this.jidToVersion[jid];\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/Caps.js","/* global __filename */\nimport { Strophe } from 'strophe.js';\n\nimport {\n    ACTION_JINGLE_SA_TIMEOUT,\n    createBridgeDownEvent,\n    createConnectionStageReachedEvent,\n    createFocusLeftEvent,\n    createJingleEvent,\n    createRemotelyMutedEvent\n} from './service/statistics/AnalyticsEvents';\nimport AuthenticationEvents\n    from './service/authentication/AuthenticationEvents';\nimport EventEmitterForwarder from './modules/util/EventEmitterForwarder';\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as JitsiConferenceErrors from './JitsiConferenceErrors';\nimport * as JitsiConferenceEvents from './JitsiConferenceEvents';\nimport * as MediaType from './service/RTC/MediaType';\nimport RTCEvents from './service/RTC/RTCEvents';\nimport VideoType from './service/RTC/VideoType';\nimport Statistics from './modules/statistics/statistics';\nimport XMPPEvents from './service/xmpp/XMPPEvents';\n\nconst logger = getLogger(__filename);\n\n/**\n * Setups all event listeners related to conference\n * @param conference {JitsiConference} the conference\n */\nexport default function JitsiConferenceEventManager(conference) {\n    this.conference = conference;\n\n    // Listeners related to the conference only\n    conference.on(JitsiConferenceEvents.TRACK_MUTE_CHANGED,\n        track => {\n            if (!track.isLocal() || !conference.statistics) {\n                return;\n            }\n            const session\n                = track.isP2P\n                    ? conference.p2pJingleSession : conference.jvbJingleSession;\n\n            // TPC will be null, before the conference starts, but the event\n            // still should be queued\n            const tpc = (session && session.peerconnection) || null;\n\n            conference.statistics.sendMuteEvent(\n                tpc,\n                track.isMuted(),\n                track.getType());\n        });\n}\n\n/**\n * Setups event listeners related to conference.chatRoom\n */\nJitsiConferenceEventManager.prototype.setupChatRoomListeners = function() {\n    const conference = this.conference;\n    const chatRoom = conference.room;\n\n    this.chatRoomForwarder = new EventEmitterForwarder(chatRoom,\n        this.conference.eventEmitter);\n\n    chatRoom.addListener(XMPPEvents.ICE_RESTARTING, jingleSession => {\n        if (!jingleSession.isP2P) {\n            // If using DataChannel as bridge channel, it must be closed\n            // before ICE restart, otherwise Chrome will not trigger \"opened\"\n            // event for the channel established with the new bridge.\n            // TODO: This may be bypassed when using a WebSocket as bridge\n            // channel.\n            conference.rtc.closeBridgeChannel();\n        }\n\n        // else: there are no DataChannels in P2P session (at least for now)\n    });\n\n    chatRoom.addListener(XMPPEvents.AUDIO_MUTED_BY_FOCUS,\n        () => {\n            // TODO: Add a way to differentiate between commands which caused\n            // us to mute and those that did not change our state (i.e. we were\n            // already muted).\n            Statistics.sendAnalytics(createRemotelyMutedEvent());\n\n            // set isMutedByFocus when setAudioMute Promise ends\n            conference.rtc.setAudioMute(true).then(\n                () => {\n                    conference.isMutedByFocus = true;\n                },\n                () =>\n                    logger.warn(\n                        'Error while audio muting due to focus request'));\n        }\n    );\n\n    this.chatRoomForwarder.forward(XMPPEvents.SUBJECT_CHANGED,\n        JitsiConferenceEvents.SUBJECT_CHANGED);\n\n    this.chatRoomForwarder.forward(XMPPEvents.MUC_JOINED,\n        JitsiConferenceEvents.CONFERENCE_JOINED);\n\n    // send some analytics events\n    chatRoom.addListener(XMPPEvents.MUC_JOINED,\n        () => {\n            this.conference.isJvbConnectionInterrupted = false;\n\n            // TODO: Move all of the 'connectionTimes' logic to its own module.\n            Object.keys(chatRoom.connectionTimes).forEach(key => {\n                const event\n                    = createConnectionStageReachedEvent(\n                        `conference_${key}`,\n                        { value: chatRoom.connectionTimes[key] });\n\n                Statistics.sendAnalytics(event);\n            });\n\n            // TODO: Move all of the 'connectionTimes' logic to its own module.\n            Object.keys(chatRoom.xmpp.connectionTimes).forEach(key => {\n                const event\n                    = createConnectionStageReachedEvent(\n                        `xmpp_${key}`,\n                        { value: chatRoom.xmpp.connectionTimes[key] });\n\n                Statistics.sendAnalytics(event);\n            });\n        });\n\n    this.chatRoomForwarder.forward(XMPPEvents.ROOM_JOIN_ERROR,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.CONNECTION_ERROR);\n\n    this.chatRoomForwarder.forward(XMPPEvents.ROOM_CONNECT_ERROR,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.CONNECTION_ERROR);\n    this.chatRoomForwarder.forward(XMPPEvents.ROOM_CONNECT_NOT_ALLOWED_ERROR,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.NOT_ALLOWED_ERROR);\n\n    this.chatRoomForwarder.forward(XMPPEvents.ROOM_MAX_USERS_ERROR,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.CONFERENCE_MAX_USERS);\n\n    this.chatRoomForwarder.forward(XMPPEvents.PASSWORD_REQUIRED,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.PASSWORD_REQUIRED);\n\n    this.chatRoomForwarder.forward(XMPPEvents.AUTHENTICATION_REQUIRED,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.AUTHENTICATION_REQUIRED);\n\n    this.chatRoomForwarder.forward(XMPPEvents.BRIDGE_DOWN,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.VIDEOBRIDGE_NOT_AVAILABLE);\n    chatRoom.addListener(\n        XMPPEvents.BRIDGE_DOWN,\n        () => Statistics.sendAnalytics(createBridgeDownEvent()));\n\n    this.chatRoomForwarder.forward(XMPPEvents.RESERVATION_ERROR,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.RESERVATION_ERROR);\n\n    this.chatRoomForwarder.forward(XMPPEvents.GRACEFUL_SHUTDOWN,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.GRACEFUL_SHUTDOWN);\n\n    chatRoom.addListener(XMPPEvents.JINGLE_FATAL_ERROR,\n        (session, error) => {\n            if (!session.isP2P) {\n                conference.eventEmitter.emit(\n                    JitsiConferenceEvents.CONFERENCE_FAILED,\n                    JitsiConferenceErrors.JINGLE_FATAL_ERROR, error);\n            }\n        });\n\n    chatRoom.addListener(XMPPEvents.CONNECTION_ICE_FAILED,\n        jingleSession => {\n            conference._onIceConnectionFailed(jingleSession);\n        });\n\n    this.chatRoomForwarder.forward(XMPPEvents.MUC_DESTROYED,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.CONFERENCE_DESTROYED);\n\n    this.chatRoomForwarder.forward(XMPPEvents.CHAT_ERROR_RECEIVED,\n        JitsiConferenceEvents.CONFERENCE_ERROR,\n        JitsiConferenceErrors.CHAT_ERROR);\n\n    this.chatRoomForwarder.forward(XMPPEvents.FOCUS_DISCONNECTED,\n        JitsiConferenceEvents.CONFERENCE_FAILED,\n        JitsiConferenceErrors.FOCUS_DISCONNECTED);\n\n    chatRoom.addListener(XMPPEvents.FOCUS_LEFT,\n        () => {\n            Statistics.sendAnalytics(createFocusLeftEvent());\n            conference.eventEmitter.emit(\n                JitsiConferenceEvents.CONFERENCE_FAILED,\n                JitsiConferenceErrors.FOCUS_LEFT);\n        });\n\n    chatRoom.addListener(XMPPEvents.SESSION_ACCEPT_TIMEOUT,\n        jingleSession => {\n            Statistics.sendAnalyticsAndLog(\n                createJingleEvent(\n                    ACTION_JINGLE_SA_TIMEOUT,\n                    { p2p: jingleSession.isP2P }));\n        });\n\n    this.chatRoomForwarder.forward(XMPPEvents.RECORDER_STATE_CHANGED,\n        JitsiConferenceEvents.RECORDER_STATE_CHANGED);\n\n    this.chatRoomForwarder.forward(XMPPEvents.TRANSCRIPTION_STATUS_CHANGED,\n        JitsiConferenceEvents.TRANSCRIPTION_STATUS_CHANGED);\n\n    this.chatRoomForwarder.forward(XMPPEvents.VIDEO_SIP_GW_AVAILABILITY_CHANGED,\n        JitsiConferenceEvents.VIDEO_SIP_GW_AVAILABILITY_CHANGED);\n\n    this.chatRoomForwarder.forward(\n        XMPPEvents.VIDEO_SIP_GW_SESSION_STATE_CHANGED,\n        JitsiConferenceEvents.VIDEO_SIP_GW_SESSION_STATE_CHANGED);\n\n    this.chatRoomForwarder.forward(XMPPEvents.PHONE_NUMBER_CHANGED,\n        JitsiConferenceEvents.PHONE_NUMBER_CHANGED);\n\n    chatRoom.addListener(\n        XMPPEvents.CONFERENCE_SETUP_FAILED,\n        (jingleSession, error) => {\n            if (!jingleSession.isP2P) {\n                conference.eventEmitter.emit(\n                    JitsiConferenceEvents.CONFERENCE_FAILED,\n                    JitsiConferenceErrors.SETUP_FAILED,\n                    error);\n            }\n        });\n\n    chatRoom.setParticipantPropertyListener((node, from) => {\n        const participant = conference.getParticipantById(from);\n\n        if (!participant) {\n            return;\n        }\n\n        participant.setProperty(\n            node.tagName.substring('jitsi_participant_'.length),\n            node.value);\n    });\n\n    this.chatRoomForwarder.forward(XMPPEvents.KICKED,\n        JitsiConferenceEvents.KICKED);\n    chatRoom.addListener(XMPPEvents.KICKED,\n        () => {\n            conference.room = null;\n            conference.leave();\n        });\n    chatRoom.addListener(XMPPEvents.SUSPEND_DETECTED,\n        conference.onSuspendDetected.bind(conference));\n\n    this.chatRoomForwarder.forward(XMPPEvents.MUC_LOCK_CHANGED,\n        JitsiConferenceEvents.LOCK_STATE_CHANGED);\n\n    chatRoom.addListener(XMPPEvents.MUC_MEMBER_JOINED,\n        conference.onMemberJoined.bind(conference));\n    chatRoom.addListener(XMPPEvents.MUC_MEMBER_LEFT,\n        conference.onMemberLeft.bind(conference));\n    this.chatRoomForwarder.forward(XMPPEvents.MUC_LEFT,\n        JitsiConferenceEvents.CONFERENCE_LEFT);\n\n    chatRoom.addListener(XMPPEvents.DISPLAY_NAME_CHANGED,\n        conference.onDisplayNameChanged.bind(conference));\n\n    chatRoom.addListener(XMPPEvents.LOCAL_ROLE_CHANGED, role => {\n        conference.onLocalRoleChanged(role);\n\n        // log all events for the recorder operated by the moderator\n        if (conference.statistics && conference.isModerator()) {\n            conference.on(JitsiConferenceEvents.RECORDER_STATE_CHANGED,\n                (status, error) => {\n                    const logObject = {\n                        id: 'recorder_status',\n                        status\n                    };\n\n                    if (error) {\n                        logObject.error = error;\n                    }\n                    Statistics.sendLog(JSON.stringify(logObject));\n                });\n        }\n    });\n\n    chatRoom.addListener(XMPPEvents.MUC_ROLE_CHANGED,\n        conference.onUserRoleChanged.bind(conference));\n\n    chatRoom.addListener(AuthenticationEvents.IDENTITY_UPDATED,\n        (authEnabled, authIdentity) => {\n            conference.authEnabled = authEnabled;\n            conference.authIdentity = authIdentity;\n            conference.eventEmitter.emit(\n                JitsiConferenceEvents.AUTH_STATUS_CHANGED, authEnabled,\n                authIdentity);\n        });\n\n    chatRoom.addListener(\n        XMPPEvents.MESSAGE_RECEIVED,\n\n        // eslint-disable-next-line max-params\n        (jid, displayName, txt, myJid, ts) => {\n            const id = Strophe.getResourceFromJid(jid);\n\n            conference.eventEmitter.emit(\n                JitsiConferenceEvents.MESSAGE_RECEIVED,\n                id, txt, ts);\n        });\n\n    chatRoom.addListener(\n        XMPPEvents.PRIVATE_MESSAGE_RECEIVED,\n\n        // eslint-disable-next-line max-params\n        (jid, displayName, txt, myJid, ts) => {\n            const id = Strophe.getResourceFromJid(jid);\n\n            conference.eventEmitter.emit(\n                JitsiConferenceEvents.PRIVATE_MESSAGE_RECEIVED,\n                id, txt, ts);\n        });\n\n    chatRoom.addListener(XMPPEvents.PRESENCE_STATUS,\n        (jid, status) => {\n            const id = Strophe.getResourceFromJid(jid);\n            const participant = conference.getParticipantById(id);\n\n            if (!participant || participant._status === status) {\n                return;\n            }\n            participant._status = status;\n            conference.eventEmitter.emit(\n                JitsiConferenceEvents.USER_STATUS_CHANGED, id, status);\n        });\n\n    chatRoom.addListener(XMPPEvents.JSON_MESSAGE_RECEIVED,\n        (from, payload) => {\n            const id = Strophe.getResourceFromJid(from);\n            const participant = conference.getParticipantById(id);\n\n            if (participant) {\n                conference.eventEmitter.emit(\n                    JitsiConferenceEvents.ENDPOINT_MESSAGE_RECEIVED,\n                    participant, payload);\n            } else {\n                logger.warn(\n                    'Ignored XMPPEvents.JSON_MESSAGE_RECEIVED for not existing '\n                    + `participant: ${from}`,\n                    payload);\n            }\n        });\n\n    chatRoom.addPresenceListener('startmuted', (data, from) => {\n        let isModerator = false;\n\n        if (conference.myUserId() === from && conference.isModerator()) {\n            isModerator = true;\n        } else {\n            const participant = conference.getParticipantById(from);\n\n            if (participant && participant.isModerator()) {\n                isModerator = true;\n            }\n        }\n\n        if (!isModerator) {\n            return;\n        }\n\n        const startAudioMuted = data.attributes.audio === 'true';\n        const startVideoMuted = data.attributes.video === 'true';\n\n        let updated = false;\n\n        if (startAudioMuted !== conference.startMutedPolicy.audio) {\n            conference.startMutedPolicy.audio = startAudioMuted;\n            updated = true;\n        }\n\n        if (startVideoMuted !== conference.startMutedPolicy.video) {\n            conference.startMutedPolicy.video = startVideoMuted;\n            updated = true;\n        }\n\n        if (updated) {\n            conference.eventEmitter.emit(\n                JitsiConferenceEvents.START_MUTED_POLICY_CHANGED,\n                conference.startMutedPolicy\n            );\n        }\n    });\n\n    chatRoom.addPresenceListener('devices', (data, from) => {\n        let isAudioAvailable = false;\n        let isVideoAvailable = false;\n\n        data.children.forEach(config => {\n            if (config.tagName === 'audio') {\n                isAudioAvailable = config.value === 'true';\n            }\n            if (config.tagName === 'video') {\n                isVideoAvailable = config.value === 'true';\n            }\n        });\n\n        let availableDevices;\n\n        if (conference.myUserId() === from) {\n            availableDevices = conference.availableDevices;\n        } else {\n            const participant = conference.getParticipantById(from);\n\n            if (!participant) {\n                return;\n            }\n\n            availableDevices = participant._availableDevices;\n        }\n\n        let updated = false;\n\n        if (availableDevices.audio !== isAudioAvailable) {\n            updated = true;\n            availableDevices.audio = isAudioAvailable;\n        }\n\n        if (availableDevices.video !== isVideoAvailable) {\n            updated = true;\n            availableDevices.video = isVideoAvailable;\n        }\n\n        if (updated) {\n            conference.eventEmitter.emit(\n                JitsiConferenceEvents.AVAILABLE_DEVICES_CHANGED,\n                from, availableDevices);\n        }\n    });\n\n    if (conference.statistics) {\n        // FIXME ICE related events should end up in RTCEvents eventually\n        chatRoom.addListener(XMPPEvents.CONNECTION_ICE_FAILED,\n            session => {\n                conference.statistics.sendIceConnectionFailedEvent(\n                    session.peerconnection);\n            });\n\n        // FIXME XMPPEvents.ADD_ICE_CANDIDATE_FAILED is never emitted\n        chatRoom.addListener(XMPPEvents.ADD_ICE_CANDIDATE_FAILED,\n            (e, pc) => {\n                conference.statistics.sendAddIceCandidateFailed(e, pc);\n            });\n    }\n};\n\n/**\n * Setups event listeners related to conference.rtc\n */\nJitsiConferenceEventManager.prototype.setupRTCListeners = function() {\n    const conference = this.conference;\n    const rtc = conference.rtc;\n\n    rtc.addListener(\n        RTCEvents.REMOTE_TRACK_ADDED,\n        conference.onRemoteTrackAdded.bind(conference));\n\n    rtc.addListener(\n        RTCEvents.REMOTE_TRACK_REMOVED,\n        conference.onRemoteTrackRemoved.bind(conference));\n\n    rtc.addListener(RTCEvents.DOMINANT_SPEAKER_CHANGED,\n        id => {\n            if (conference.lastDominantSpeaker !== id && conference.room) {\n                conference.lastDominantSpeaker = id;\n                conference.eventEmitter.emit(\n                    JitsiConferenceEvents.DOMINANT_SPEAKER_CHANGED, id);\n            }\n            if (conference.statistics && conference.myUserId() === id) {\n                // We are the new dominant speaker.\n                conference.statistics.sendDominantSpeakerEvent();\n            }\n        });\n\n    rtc.addListener(RTCEvents.DATA_CHANNEL_OPEN, () => {\n        const now = window.performance.now();\n        const key = 'data.channel.opened';\n\n        // TODO: Move all of the 'connectionTimes' logic to its own module.\n        logger.log(`(TIME) ${key}`, now);\n        conference.room.connectionTimes[key] = now;\n        Statistics.sendAnalytics(\n            createConnectionStageReachedEvent(key, { value: now }));\n\n        conference.eventEmitter.emit(JitsiConferenceEvents.DATA_CHANNEL_OPENED);\n    });\n\n    rtc.addListener(\n        RTCEvents.AVAILABLE_DEVICES_CHANGED,\n        devices => conference.room.updateDeviceAvailability(devices));\n\n    rtc.addListener(RTCEvents.ENDPOINT_MESSAGE_RECEIVED,\n        (from, payload) => {\n            const participant = conference.getParticipantById(from);\n\n            if (participant) {\n                conference.eventEmitter.emit(\n                    JitsiConferenceEvents.ENDPOINT_MESSAGE_RECEIVED,\n                    participant, payload);\n            } else {\n                logger.warn(\n                    'Ignored ENDPOINT_MESSAGE_RECEIVED for not existing '\n                        + `participant: ${from}`,\n                    payload);\n            }\n        });\n\n    rtc.addListener(RTCEvents.LOCAL_UFRAG_CHANGED,\n        (tpc, ufrag) => {\n            if (!tpc.isP2P) {\n                Statistics.sendLog(\n                    JSON.stringify({\n                        id: 'local_ufrag',\n                        value: ufrag\n                    }));\n            }\n        });\n    rtc.addListener(RTCEvents.REMOTE_UFRAG_CHANGED,\n        (tpc, ufrag) => {\n            if (!tpc.isP2P) {\n                Statistics.sendLog(\n                    JSON.stringify({\n                        id: 'remote_ufrag',\n                        value: ufrag\n                    }));\n            }\n        });\n\n    rtc.addListener(RTCEvents.CREATE_ANSWER_FAILED,\n        (e, tpc) => {\n            conference.statistics.sendCreateAnswerFailed(e, tpc);\n        });\n\n    rtc.addListener(RTCEvents.CREATE_OFFER_FAILED,\n        (e, tpc) => {\n            conference.statistics.sendCreateOfferFailed(e, tpc);\n        });\n\n    rtc.addListener(RTCEvents.SET_LOCAL_DESCRIPTION_FAILED,\n        (e, tpc) => {\n            conference.statistics.sendSetLocalDescFailed(e, tpc);\n        });\n\n    rtc.addListener(RTCEvents.SET_REMOTE_DESCRIPTION_FAILED,\n        (e, tpc) => {\n            conference.statistics.sendSetRemoteDescFailed(e, tpc);\n        });\n\n    rtc.addListener(RTCEvents.LOCAL_TRACK_SSRC_UPDATED,\n        (track, ssrc) => {\n            // when starting screen sharing, the track is created and when\n            // we do set local description and we process the ssrc we\n            // will be notified for it and we will report it with the event\n            // for screen sharing\n            if (track.isVideoTrack() && track.videoType === VideoType.DESKTOP) {\n                conference.statistics.sendScreenSharingEvent(true, ssrc);\n            }\n        });\n};\n\n/**\n * Setups event listeners related to conference.xmpp\n */\nJitsiConferenceEventManager.prototype.setupXMPPListeners = function() {\n    const conference = this.conference;\n\n    conference.xmpp.caps.addListener(XMPPEvents.PARTCIPANT_FEATURES_CHANGED,\n        from => {\n            const participant\n                = conference.getParticipantById(\n                    Strophe.getResourceFromJid(from));\n\n            if (participant) {\n                conference.eventEmitter.emit(\n                    JitsiConferenceEvents.PARTCIPANT_FEATURES_CHANGED,\n                    participant);\n            }\n        });\n    conference.xmpp.addListener(\n        XMPPEvents.CALL_INCOMING,\n        conference.onIncomingCall.bind(conference));\n    conference.xmpp.addListener(\n        XMPPEvents.CALL_ACCEPTED,\n        conference.onCallAccepted.bind(conference));\n    conference.xmpp.addListener(\n        XMPPEvents.TRANSPORT_INFO,\n        conference.onTransportInfo.bind(conference));\n    conference.xmpp.addListener(\n        XMPPEvents.CALL_ENDED,\n        conference.onCallEnded.bind(conference));\n\n    conference.xmpp.addListener(XMPPEvents.START_MUTED_FROM_FOCUS,\n        (audioMuted, videoMuted) => {\n            if (conference.options.config.ignoreStartMuted) {\n                return;\n            }\n\n            conference.startAudioMuted = audioMuted;\n            conference.startVideoMuted = videoMuted;\n\n            // mute existing local tracks because this is initial mute from\n            // Jicofo\n            conference.getLocalTracks().forEach(track => {\n                switch (track.getType()) {\n                case MediaType.AUDIO:\n                    conference.startAudioMuted && track.mute();\n                    break;\n                case MediaType.VIDEO:\n                    conference.startVideoMuted && track.mute();\n                    break;\n                }\n            });\n\n            conference.eventEmitter.emit(JitsiConferenceEvents.STARTED_MUTED);\n        });\n};\n\n/**\n * Setups event listeners related to conference.statistics\n */\nJitsiConferenceEventManager.prototype.setupStatisticsListeners = function() {\n    const conference = this.conference;\n\n    if (!conference.statistics) {\n        return;\n    }\n\n    /* eslint-disable max-params */\n    conference.statistics.addAudioLevelListener((tpc, ssrc, level, isLocal) => {\n        conference.rtc.setAudioLevel(tpc, ssrc, level, isLocal);\n    });\n\n    /* eslint-enable max-params */\n\n    // Forward the \"before stats disposed\" event\n    conference.statistics.addBeforeDisposedListener(() => {\n        conference.eventEmitter.emit(\n            JitsiConferenceEvents.BEFORE_STATISTICS_DISPOSED);\n    });\n    conference.statistics.addByteSentStatsListener((tpc, stats) => {\n        conference.getLocalTracks(MediaType.AUDIO).forEach(track => {\n            const ssrc = tpc.getLocalSSRC(track);\n\n            if (!ssrc || !stats.hasOwnProperty(ssrc)) {\n                return;\n            }\n\n            track._onByteSentStatsReceived(tpc, stats[ssrc]);\n        });\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiConferenceEventManager.js","/**\n * Implements utility to forward events from one eventEmitter to another.\n * @param src {object} instance of EventEmitter or another class that implements\n * addListener method which will register listener to EventEmitter instance.\n * @param dest {object} instance of EventEmitter or another class that\n * implements emit method which will emit an event.\n */\nfunction EventEmitterForwarder(src, dest) {\n    if (!src || !dest || typeof src.addListener !== 'function'\n        || typeof dest.emit !== 'function') {\n        throw new Error('Invalid arguments passed to EventEmitterForwarder');\n    }\n    this.src = src;\n    this.dest = dest;\n}\n\n/**\n * Adds event to be forwarded from src to dest.\n * @param srcEvent {string} the event that EventEmitterForwarder is listening\n * for.\n * @param dstEvent {string} the event that will be fired from dest.\n * @param arguments all other passed arguments are going to be fired with\n * dstEvent.\n */\nEventEmitterForwarder.prototype.forward = function(...args) {\n    const srcEvent = args[0];\n\n    // This will be the \"this\" value for emit function.\n\n    args[0] = this.dest;\n\n    // Using bind.apply to pass the arguments as Array-like object (\"arguments\")\n    this.src.addListener(\n        srcEvent,\n        Function.prototype.bind.apply(this.dest.emit, args));\n};\n\nmodule.exports = EventEmitterForwarder;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/EventEmitterForwarder.js","const logger = require('jitsi-meet-logger').getLogger(__filename);\n\n/**\n *\n * @param localAudio\n * @param peerConnection\n */\nfunction JitsiDTMFManager(localAudio, peerConnection) {\n    const audioTrack = localAudio.getTrack();\n\n    if (!audioTrack) {\n        throw new Error('Failed to initialize DTMFSender: no audio track.');\n    }\n    this.dtmfSender\n        = peerConnection.peerconnection.createDTMFSender(audioTrack);\n    logger.debug('Initialized DTMFSender');\n}\n\nJitsiDTMFManager.prototype.sendTones = function(tones, duration, pause) {\n    this.dtmfSender.insertDTMF(tones, duration || 200, pause || 200);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/DTMF/JitsiDTMFManager.js","\nimport { Strophe } from 'strophe.js';\n\nimport * as JitsiConferenceEvents from './JitsiConferenceEvents';\nimport { ParticipantConnectionStatus }\n    from './modules/connectivity/ParticipantConnectionStatus';\nimport * as MediaType from './service/RTC/MediaType';\n\n/**\n * Represents a participant in (i.e. a member of) a conference.\n */\nexport default class JitsiParticipant {\n\n    /* eslint-disable max-params */\n\n    /**\n     * Initializes a new JitsiParticipant instance.\n     *\n     * @constructor\n     * @param jid the conference XMPP jid\n     * @param conference\n     * @param displayName\n     * @param {Boolean} hidden - True if the new JitsiParticipant instance is to\n     * represent a hidden participant; otherwise, false.\n     * @param {string} statsID - optional participant statsID\n     * @param {string} status - the initial status if any.\n     */\n    constructor(jid, conference, displayName, hidden, statsID, status) {\n        this._jid = jid;\n        this._id = Strophe.getResourceFromJid(jid);\n        this._conference = conference;\n        this._displayName = displayName;\n        this._supportsDTMF = false;\n        this._tracks = [];\n        this._role = 'none';\n        this._status = status;\n        this._availableDevices = {\n            audio: undefined,\n            video: undefined\n        };\n        this._hidden = hidden;\n        this._statsID = statsID;\n        this._connectionStatus = ParticipantConnectionStatus.ACTIVE;\n        this._properties = {};\n    }\n\n    /* eslint-enable max-params */\n\n    /**\n     * @returns {JitsiConference} The conference that this participant belongs\n     * to.\n     */\n    getConference() {\n        return this._conference;\n    }\n\n    /**\n     * Gets the value of a property of this participant.\n     */\n    getProperty(name) {\n        return this._properties[name];\n    }\n\n    /**\n     * Checks whether this <tt>JitsiParticipant</tt> has any video tracks which\n     * are muted according to their underlying WebRTC <tt>MediaStreamTrack</tt>\n     * muted status.\n     * @return {boolean} <tt>true</tt> if this <tt>participant</tt> contains any\n     * video <tt>JitsiTrack</tt>s which are muted as defined in\n     * {@link JitsiTrack.isWebRTCTrackMuted}.\n     */\n    hasAnyVideoTrackWebRTCMuted() {\n        return (\n            this.getTracks().some(\n                jitsiTrack =>\n                    jitsiTrack.getType() === MediaType.VIDEO\n                        && jitsiTrack.isWebRTCTrackMuted()));\n    }\n\n    /**\n     * Updates participant's connection status.\n     * @param {string} state the current participant connection state.\n     * {@link ParticipantConnectionStatus}.\n     * @private\n     */\n    _setConnectionStatus(status) {\n        this._connectionStatus = status;\n    }\n\n    /**\n     * Return participant's connectivity status.\n     *\n     * @returns {string} the connection status\n     * <tt>ParticipantConnectionStatus</tt> of the user.\n     * {@link ParticipantConnectionStatus}.\n     */\n    getConnectionStatus() {\n        return this._connectionStatus;\n    }\n\n    /**\n     * Sets the value of a property of this participant, and fires an event if\n     * the value has changed.\n     * @name the name of the property.\n     * @value the value to set.\n     */\n    setProperty(name, value) {\n        const oldValue = this._properties[name];\n\n        if (value !== oldValue) {\n            this._properties[name] = value;\n            this._conference.eventEmitter.emit(\n                JitsiConferenceEvents.PARTICIPANT_PROPERTY_CHANGED,\n                this,\n                name,\n                oldValue,\n                value);\n        }\n    }\n\n    /**\n     * @returns {Array.<JitsiTrack>} The list of media tracks for this\n     * participant.\n     */\n    getTracks() {\n        return this._tracks.slice();\n    }\n\n    /**\n     * @param {MediaType} mediaType\n     * @returns {Array.<JitsiTrack>} an array of media tracks for this\n     * participant, for given media type.\n     */\n    getTracksByMediaType(mediaType) {\n        return this.getTracks().filter(track => track.getType() === mediaType);\n    }\n\n    /**\n     * @returns {String} The ID of this participant.\n     */\n    getId() {\n        return this._id;\n    }\n\n    /**\n     * @returns {String} The JID of this participant.\n     */\n    getJid() {\n        return this._jid;\n    }\n\n    /**\n     * @returns {String} The human-readable display name of this participant.\n     */\n    getDisplayName() {\n        return this._displayName;\n    }\n\n    /**\n     * @returns {String} The stats ID of this participant.\n     */\n    getStatsID() {\n        return this._statsID;\n    }\n\n    /**\n     * @returns {String} The status of the participant.\n     */\n    getStatus() {\n        return this._status;\n    }\n\n    /**\n     * @returns {Boolean} Whether this participant is a moderator or not.\n     */\n    isModerator() {\n        return this._role === 'moderator';\n    }\n\n    /**\n     * @returns {Boolean} Whether this participant is a hidden participant. Some\n     * special system participants may want to join hidden (like for example the\n     * recorder).\n     */\n    isHidden() {\n        return this._hidden;\n    }\n\n    // Gets a link to an etherpad instance advertised by the participant?\n    // getEtherpad() {\n    // }\n\n    /**\n     * @returns {Boolean} Whether this participant has muted their audio.\n     */\n    isAudioMuted() {\n        return this._isMediaTypeMuted(MediaType.AUDIO);\n    }\n\n    /**\n     * Determines whether all JitsiTracks which are of a specific MediaType and\n     * which belong to this JitsiParticipant are muted.\n     *\n     * @param {MediaType} mediaType - The MediaType of the JitsiTracks to be\n     * checked.\n     * @private\n     * @returns {Boolean} True if all JitsiTracks which are of the specified\n     * mediaType and which belong to this JitsiParticipant are muted; otherwise,\n     * false.\n     */\n    _isMediaTypeMuted(mediaType) {\n        return this.getTracks().reduce(\n            (muted, track) =>\n                muted && (track.getType() !== mediaType || track.isMuted()),\n            true);\n    }\n\n    /**\n     * @returns {Boolean} Whether this participant has muted their video.\n     */\n    isVideoMuted() {\n        return this._isMediaTypeMuted(MediaType.VIDEO);\n    }\n\n    /**\n     * @returns {String} The role of this participant.\n     */\n    getRole() {\n        return this._role;\n    }\n\n    /**\n     *\n     */\n    supportsDTMF() {\n        return this._supportsDTMF;\n    }\n\n    /**\n     * Returns a set with the features for the participant.\n     * @param {int} timeout the timeout in ms for reply from the participant.\n     * @returns {Promise<Set<String>, Error>}\n     */\n    getFeatures(timeout = 5000) {\n        return this._conference.xmpp.caps.getFeatures(this._jid, timeout);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiParticipant.js","/* global __filename */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as JitsiConferenceEvents from '../../JitsiConferenceEvents';\n\nconst logger = getLogger(__filename);\n\n/**\n * Emits {@link JitsiConferenceEvents.JVB121_STATUS} events based on the current\n * P2P status and the conference participants count. See the event description\n * for more info.\n */\nexport default class Jvb121EventGenerator {\n    /**\n     * Creates new <tt>Jvb121EventGenerator</tt> for the given conference.\n     * @param {JitsiConference} conference\n     */\n    constructor(conference) {\n        this._conference = conference;\n\n        /**\n         * Indicates whether it's a one to one JVB conference (<tt>true</tt>)\n         * or a multiparty (<tt>false</tt>). Will be also <tt>false</tt> if\n         * the conference is currently in the P2P mode.\n         * @type {boolean}\n         * @private\n         */\n        this._jvb121 = true;\n\n        this._conference.addEventListener(\n            JitsiConferenceEvents.USER_JOINED, () => this.evaluateStatus());\n        this._conference.addEventListener(\n            JitsiConferenceEvents.USER_LEFT, () => this.evaluateStatus());\n        this._conference.addEventListener(\n            JitsiConferenceEvents.P2P_STATUS, () => this.evaluateStatus());\n    }\n\n    /**\n     * Checks whether the JVB121 value should be updated and a new event\n     * emitted.\n     */\n    evaluateStatus() {\n        const oldStatus = this._jvb121;\n        const newStatus\n            = !this._conference.isP2PActive()\n                && this._conference.getParticipantCount() <= 2;\n\n        if (oldStatus !== newStatus) {\n            this._jvb121 = newStatus;\n            logger.debug(`JVB121 status ${oldStatus} => ${newStatus}`);\n            this._conference.eventEmitter.emit(\n                JitsiConferenceEvents.JVB121_STATUS, oldStatus, newStatus);\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/event/Jvb121EventGenerator.js","import * as JitsiConferenceEvents from '../JitsiConferenceEvents';\n\n/**\n * The value which we use to say, every sound over this threshold\n * is talking on the mic.\n * @type {number}\n */\nconst SPEECH_DETECT_THRESHOLD = 0.6;\n\n/**\n * The <tt>P2PDominantSpeakerDetection</tt> is activated only when p2p is\n * currently used.\n * Listens for changes in the audio level changes of the local p2p audio track\n * or remote p2p one and fires dominant speaker events to be able to use\n * features depending on those events (speaker stats), to make them work without\n * the video bridge.\n */\nexport default class P2PDominantSpeakerDetection {\n    /**\n     * Creates P2PDominantSpeakerDetection\n     * @param conference the JitsiConference instance that created us.\n     * @constructor\n     */\n    constructor(conference) {\n        this.conference = conference;\n\n        conference.addEventListener(\n            JitsiConferenceEvents.TRACK_AUDIO_LEVEL_CHANGED,\n            this._audioLevel.bind(this));\n\n        this.myUserID = this.conference.myUserId();\n    }\n\n    /**\n     * Receives audio level events for all streams in the conference.\n     *\n     * @param {String} id - The participant id\n     * @param {number} audioLevel - The audio level.\n     */\n    _audioLevel(id, audioLevel) {\n\n        // we do not process if p2p is not active\n        // or audio level is under certain threshold\n        // or if the audio level is for local audio track which is muted\n        if (!this.conference.isP2PActive()\n            || audioLevel <= SPEECH_DETECT_THRESHOLD\n            || (id === this.myUserID\n                    && this.conference.getLocalAudioTrack().isMuted())) {\n            return;\n        }\n\n        this.conference.eventEmitter.emit(\n            JitsiConferenceEvents.DOMINANT_SPEAKER_CHANGED,\n            id);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/P2PDominantSpeakerDetection.js","import { getLogger } from 'jitsi-meet-logger';\n\nimport RTCEvents from '../../service/RTC/RTCEvents';\nimport GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\n\nconst logger = getLogger(__filename);\n\n/**\n * Handles a WebRTC RTCPeerConnection or a WebSocket instance to communicate\n * with the videobridge.\n */\nexport default class BridgeChannel {\n    /**\n     * Binds \"ondatachannel\" event listener on the given RTCPeerConnection\n     * instance, or creates a WebSocket connection with the videobridge.\n     * At least one of both, peerconnection or wsUrl parameters, must be\n     * given.\n     * @param {RTCPeerConnection} [peerconnection] WebRTC peer connection\n     * instance.\n     * @param {string} [wsUrl] WebSocket URL.\n     * @param {EventEmitter} eventEmitter EventEmitter instance.\n     */\n    constructor(peerconnection, wsUrl, emitter) {\n        if (!peerconnection && !wsUrl) {\n            throw new TypeError(\n                'At least peerconnection or wsUrl must be given');\n        } else if (peerconnection && wsUrl) {\n            throw new TypeError(\n                'Just one of peerconnection or wsUrl must be given');\n        }\n\n        if (peerconnection) {\n            logger.debug('constructor() with peerconnection');\n        } else {\n            logger.debug(`constructor() with wsUrl:\"${wsUrl}\"`);\n        }\n\n        // The underlying WebRTC RTCDataChannel or WebSocket instance.\n        // @type {RTCDataChannel|WebSocket}\n        this._channel = null;\n\n        // @type {EventEmitter}\n        this._eventEmitter = emitter;\n\n        // Whether a RTCDataChannel or WebSocket is internally used.\n        // @type {string} \"datachannel\" / \"websocket\"\n        this._mode = null;\n\n        // If a RTCPeerConnection is given, listen for new RTCDataChannel\n        // event.\n        if (peerconnection) {\n            peerconnection.ondatachannel = event => {\n                // NOTE: We assume that the \"onDataChannel\" event just fires\n                // once.\n\n                const datachannel = event.channel;\n\n                // Handle the RTCDataChannel.\n                this._handleChannel(datachannel);\n                this._mode = 'datachannel';\n            };\n\n        // Otherwise create a WebSocket connection.\n        } else if (wsUrl) {\n            // Create a WebSocket instance.\n            const ws = new WebSocket(wsUrl);\n\n            // Handle the WebSocket.\n            this._handleChannel(ws);\n            this._mode = 'websocket';\n        }\n    }\n\n    /**\n     * The channel mode.\n     * @return {string} \"datachannel\" or \"websocket\" (or null if not yet set).\n     */\n    get mode() {\n        return this._mode;\n    }\n\n    /**\n     * Closes the currently opened channel.\n     */\n    close() {\n        if (this._channel) {\n            try {\n                this._channel.close();\n            } catch (error) {} // eslint-disable-line no-empty\n\n            this._channel = null;\n        }\n    }\n\n    /**\n     * Whether there is an underlying RTCDataChannel or WebSocket and it's\n     * open.\n     * @return {boolean}\n     */\n    isOpen() {\n        return this._channel && (this._channel.readyState === 'open'\n            || this._channel.readyState === WebSocket.OPEN);\n    }\n\n    /**\n     * Sends message via the channel.\n     * @param {string} to The id of the endpoint that should receive the\n     * message. If \"\" the message will be sent to all participants.\n     * @param  {object} payload The payload of the message.\n     * @throws NetworkError or InvalidStateError from RTCDataChannel#send (@see\n     * {@link https://developer.mozilla.org/docs/Web/API/RTCDataChannel/send})\n     * or from WebSocket#send or Error with \"No opened channel\" message.\n     */\n    sendMessage(to, payload) {\n        this._send({\n            colibriClass: 'EndpointMessage',\n            msgPayload: payload,\n            to\n        });\n    }\n\n    /**\n     * Sends a \"lastN value changed\" message via the channel.\n     * @param {number} value The new value for lastN. -1 means unlimited.\n     */\n    sendSetLastNMessage(value) {\n        const jsonObject = {\n            colibriClass: 'LastNChangedEvent',\n            lastN: value\n        };\n\n        this._send(jsonObject);\n        logger.log(`Channel lastN set to: ${value}`);\n    }\n\n    /**\n     * Sends a \"pinned endpoint changed\" message via the channel.\n     * @param {string} endpointId The id of the pinned endpoint.\n     * @throws NetworkError or InvalidStateError from RTCDataChannel#send (@see\n     * {@link https://developer.mozilla.org/docs/Web/API/RTCDataChannel/send})\n     * or from WebSocket#send or Error with \"No opened channel\" message.\n     */\n    sendPinnedEndpointMessage(endpointId) {\n        logger.log(\n            'sending pinned changed notification to the bridge for endpoint ',\n            endpointId);\n\n        this._send({\n            colibriClass: 'PinnedEndpointChangedEvent',\n            pinnedEndpoint: endpointId || null\n        });\n    }\n\n    /**\n     * Sends a \"selected endpoint changed\" message via the channel.\n     * @param {string} endpointId The id of the selected endpoint.\n     * @throws NetworkError or InvalidStateError from RTCDataChannel#send (@see\n     * {@link https://developer.mozilla.org/docs/Web/API/RTCDataChannel/send})\n     * or from WebSocket#send or Error with \"No opened channel\" message.\n     */\n    sendSelectedEndpointMessage(endpointId) {\n        logger.log(\n            'sending selected changed notification to the bridge for endpoint ',\n            endpointId);\n\n        this._send({\n            colibriClass: 'SelectedEndpointChangedEvent',\n            selectedEndpoint: endpointId || null\n        });\n    }\n\n    /**\n     * Sends a \"receiver video constraint\" message via the channel.\n     * @param {Number} maxFrameHeightPixels the maximum frame height,\n     * in pixels, this receiver is willing to receive\n     */\n    sendReceiverVideoConstraintMessage(maxFrameHeightPixels) {\n        logger.log('sending a ReceiverVideoConstraint message with '\n            + `a maxFrameHeight of ${maxFrameHeightPixels} pixels`);\n        this._send({\n            colibriClass: 'ReceiverVideoConstraint',\n            maxFrameHeight: maxFrameHeightPixels\n        });\n    }\n\n    /**\n     * Set events on the given RTCDataChannel or WebSocket instance.\n     */\n    _handleChannel(channel) {\n        const emitter = this._eventEmitter;\n\n        channel.onopen = () => {\n            logger.info(`${this._mode} channel opened`);\n\n            // Code sample for sending string and/or binary data.\n            // Sends string message to the bridge:\n            //     channel.send(\"Hello bridge!\");\n            // Sends 12 bytes binary message to the bridge:\n            //     channel.send(new ArrayBuffer(12));\n\n            emitter.emit(RTCEvents.DATA_CHANNEL_OPEN);\n        };\n\n        channel.onerror = error => {\n            logger.error('Channel error:', error);\n        };\n\n        channel.onmessage = ({ data }) => {\n            // JSON object.\n            let obj;\n\n            try {\n                obj = JSON.parse(data);\n            } catch (error) {\n                GlobalOnErrorHandler.callErrorHandler(error);\n                logger.error(\n                    'Failed to parse channel message as JSON: ',\n                    data, error);\n\n                return;\n            }\n\n            const colibriClass = obj.colibriClass;\n\n            switch (colibriClass) {\n            case 'DominantSpeakerEndpointChangeEvent': {\n                // Endpoint ID from the Videobridge.\n                const dominantSpeakerEndpoint = obj.dominantSpeakerEndpoint;\n\n                logger.info(\n                    'Channel new dominant speaker event: ',\n                    dominantSpeakerEndpoint);\n                emitter.emit(\n                    RTCEvents.DOMINANT_SPEAKER_CHANGED,\n                    dominantSpeakerEndpoint);\n                break;\n            }\n            case 'EndpointConnectivityStatusChangeEvent': {\n                const endpoint = obj.endpoint;\n                const isActive = obj.active === 'true';\n\n                logger.info(\n                    `Endpoint connection status changed: ${endpoint} active ? ${\n                        isActive}`);\n                emitter.emit(RTCEvents.ENDPOINT_CONN_STATUS_CHANGED,\n                    endpoint, isActive);\n\n                break;\n            }\n            case 'EndpointMessage': {\n                emitter.emit(\n                    RTCEvents.ENDPOINT_MESSAGE_RECEIVED, obj.from,\n                    obj.msgPayload);\n\n                break;\n            }\n            case 'LastNEndpointsChangeEvent': {\n                // The new/latest list of last-n endpoint IDs.\n                const lastNEndpoints = obj.lastNEndpoints;\n\n                logger.info('Channel new last-n event: ',\n                    lastNEndpoints, obj);\n                emitter.emit(RTCEvents.LASTN_ENDPOINT_CHANGED,\n                    lastNEndpoints, obj);\n\n                break;\n            }\n            default: {\n                logger.debug('Channel JSON-formatted message: ', obj);\n\n                // The received message appears to be appropriately formatted\n                // (i.e. is a JSON object which assigns a value to the\n                // mandatory property colibriClass) so don't just swallow it,\n                // expose it to public consumption.\n                emitter.emit(`rtc.datachannel.${colibriClass}`, obj);\n            }\n            }\n        };\n\n        channel.onclose = () => {\n            logger.info('Channel closed');\n\n            // Remove the channel.\n            this._channel = null;\n        };\n\n        // Store the channel.\n        this._channel = channel;\n    }\n\n    /**\n     * Sends passed object via the channel.\n     * @param {object} jsonObject The object that will be sent.\n     * @throws NetworkError or InvalidStateError from RTCDataChannel#send (@see\n     * {@link https://developer.mozilla.org/docs/Web/API/RTCDataChannel/send})\n     * or from WebSocket#send or Error with \"No opened channel\" message.\n     */\n    _send(jsonObject) {\n        const channel = this._channel;\n\n        if (!this.isOpen()) {\n            throw new Error('No opened channel');\n        }\n\n        channel.send(JSON.stringify(jsonObject));\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/BridgeChannel.js","/* global __filename, Promise */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport JitsiTrack from './JitsiTrack';\nimport JitsiTrackError from '../../JitsiTrackError';\nimport {\n    TRACK_IS_DISPOSED,\n    TRACK_NO_STREAM_FOUND\n} from '../../JitsiTrackErrors';\nimport {\n    LOCAL_TRACK_STOPPED,\n    NO_DATA_FROM_SOURCE,\n    TRACK_MUTE_CHANGED\n} from '../../JitsiTrackEvents';\nimport browser from '../browser';\nimport RTCUtils from './RTCUtils';\nimport CameraFacingMode from '../../service/RTC/CameraFacingMode';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport RTCEvents from '../../service/RTC/RTCEvents';\nimport VideoType from '../../service/RTC/VideoType';\nimport {\n    TRACK_UNMUTED,\n    createNoDataFromSourceEvent\n} from '../../service/statistics/AnalyticsEvents';\nimport Statistics from '../statistics/statistics';\n\nconst logger = getLogger(__filename);\n\n/**\n * Represents a single media track(either audio or video).\n * One <tt>JitsiLocalTrack</tt> corresponds to one WebRTC MediaStreamTrack.\n */\nexport default class JitsiLocalTrack extends JitsiTrack {\n    /**\n     * Constructs new JitsiLocalTrack instance.\n     *\n     * @constructor\n     * @param {Object} trackInfo\n     * @param {number} trackInfo.rtcId the ID assigned by the RTC module\n     * @param trackInfo.stream WebRTC MediaStream, parent of the track\n     * @param trackInfo.track underlying WebRTC MediaStreamTrack for new\n     * JitsiRemoteTrack\n     * @param trackInfo.mediaType the MediaType of the JitsiRemoteTrack\n     * @param trackInfo.videoType the VideoType of the JitsiRemoteTrack\n     * @param trackInfo.resolution the video resolution if it's a video track\n     * @param trackInfo.deviceId the ID of the local device for this track\n     * @param trackInfo.facingMode the camera facing mode used in getUserMedia\n     * call\n     * @param {sourceId} trackInfo.sourceId - The id of the desktop sharing\n     * source. NOTE: defined for desktop sharing tracks only.\n     */\n    constructor({\n        deviceId,\n        facingMode,\n        mediaType,\n        resolution,\n        rtcId,\n        sourceId,\n        sourceType,\n        stream,\n        track,\n        videoType\n    }) {\n        super(\n            /* conference */ null,\n            stream,\n            track,\n            /* streamInactiveHandler */ () => this.emit(LOCAL_TRACK_STOPPED),\n            mediaType,\n            videoType);\n\n        /**\n         * The ID assigned by the RTC module on instance creation.\n         *\n         * @type {number}\n         */\n        this.rtcId = rtcId;\n        this.sourceId = sourceId;\n        this.sourceType = sourceType;\n\n        if (browser.usesNewGumFlow()) {\n            // Get the resolution from the track itself because it cannot be\n            // certain which resolution webrtc has fallen back to using.\n            this.resolution = track.getSettings().height;\n\n            // Cache the constraints of the track in case of any this track\n            // model needs to call getUserMedia again, such as when unmuting.\n            this._constraints = track.getConstraints();\n        } else {\n            // FIXME Currently, Firefox is ignoring our constraints about\n            // resolutions so we do not store it, to avoid wrong reporting of\n            // local track resolution.\n            this.resolution = browser.isFirefox() ? null : resolution;\n        }\n\n        this.deviceId = deviceId;\n\n        /**\n         * The <tt>Promise</tt> which represents the progress of a previously\n         * queued/scheduled {@link _setMuted} (from the point of view of\n         * {@link _queueSetMuted}).\n         *\n         * @private\n         * @type {Promise}\n         */\n        this._prevSetMuted = Promise.resolve();\n\n        /**\n         * The facing mode of the camera from which this JitsiLocalTrack\n         * instance was obtained.\n         *\n         * @private\n         * @type {CameraFacingMode|undefined}\n         */\n        this._facingMode = facingMode;\n\n        // Currently there is no way to know the MediaStreamTrack ended due to\n        // to device disconnect in Firefox through e.g. \"readyState\" property.\n        // Instead we will compare current track's label with device labels from\n        // enumerateDevices() list.\n        this._trackEnded = false;\n\n        /**\n         * Indicates whether data has been sent or not.\n         */\n        this._hasSentData = false;\n\n        /**\n         * Used only for detection of audio problems. We want to check only once\n         * whether the track is sending data ot not. This flag is set to false\n         * after the check.\n         */\n        this._testDataSent = true;\n\n        // Currently there is no way to determine with what device track was\n        // created (until getConstraints() support), however we can associate\n        // tracks with real devices obtained from enumerateDevices() call as\n        // soon as it's called.\n        this._realDeviceId = this.deviceId === '' ? undefined : this.deviceId;\n\n        /**\n         * On mute event we are waiting for 3s to check if the stream is going\n         * to be still muted before firing the event for camera issue detected\n         * (NO_DATA_FROM_SOURCE).\n         */\n        this._noDataFromSourceTimeout = null;\n\n        this._onDeviceListChanged = devices => {\n            this._setRealDeviceIdFromDeviceList(devices);\n\n            // Mark track as ended for those browsers that do not support\n            // \"readyState\" property. We do not touch tracks created with\n            // default device ID \"\".\n            if (typeof this.getTrack().readyState === 'undefined'\n                    && typeof this._realDeviceId !== 'undefined'\n                    && !devices.find(d => d.deviceId === this._realDeviceId)) {\n                this._trackEnded = true;\n            }\n        };\n\n        // Subscribe each created local audio track to\n        // RTCEvents.AUDIO_OUTPUT_DEVICE_CHANGED event. This is different from\n        // handling this event for remote tracks (which are handled in RTC.js),\n        // because there might be local tracks not attached to a conference.\n        if (this.isAudioTrack() && RTCUtils.isDeviceChangeAvailable('output')) {\n            this._onAudioOutputDeviceChanged = this.setAudioOutput.bind(this);\n            RTCUtils.addListener(\n                RTCEvents.AUDIO_OUTPUT_DEVICE_CHANGED,\n                this._onAudioOutputDeviceChanged);\n        }\n\n        RTCUtils.addListener(\n            RTCEvents.DEVICE_LIST_CHANGED,\n            this._onDeviceListChanged);\n\n        this._initNoDataFromSourceHandlers();\n    }\n\n    /**\n     * Returns if associated MediaStreamTrack is in the 'ended' state\n     *\n     * @returns {boolean}\n     */\n    isEnded() {\n        return this.getTrack().readyState === 'ended' || this._trackEnded;\n    }\n\n    /**\n     * Sets handlers to the MediaStreamTrack object that will detect camera\n     * issues.\n     */\n    _initNoDataFromSourceHandlers() {\n        if (this.isVideoTrack() && this.videoType === VideoType.CAMERA) {\n            const _onNoDataFromSourceError\n                = this._onNoDataFromSourceError.bind(this);\n\n            this._setHandler('track_mute', () => {\n                if (this._checkForCameraIssues()) {\n                    const now = window.performance.now();\n\n                    this._noDataFromSourceTimeout\n                        = setTimeout(_onNoDataFromSourceError, 3000);\n                    this._setHandler('track_unmute', () => {\n                        this._clearNoDataFromSourceMuteResources();\n                        Statistics.sendAnalyticsAndLog(\n                            TRACK_UNMUTED,\n                            {\n                                'media_type': this.getType(),\n                                'track_type': 'local',\n                                value: window.performance.now() - now\n                            });\n                    });\n                }\n            });\n            this._setHandler('track_ended', _onNoDataFromSourceError);\n        }\n    }\n\n    /**\n     * Clears all timeouts and handlers set on MediaStreamTrack mute event.\n     * FIXME: Change the name of the method with better one.\n     */\n    _clearNoDataFromSourceMuteResources() {\n        if (this._noDataFromSourceTimeout) {\n            clearTimeout(this._noDataFromSourceTimeout);\n            this._noDataFromSourceTimeout = null;\n        }\n        this._setHandler('track_unmute', undefined);\n    }\n\n    /**\n     * Called when potential camera issue is detected. Clears the handlers and\n     * timeouts set on MediaStreamTrack muted event. Verifies that the camera\n     * issue persists and fires NO_DATA_FROM_SOURCE event.\n     */\n    _onNoDataFromSourceError() {\n        this._clearNoDataFromSourceMuteResources();\n        if (this._checkForCameraIssues()) {\n            this._fireNoDataFromSourceEvent();\n        }\n    }\n\n    /**\n     * Fires NO_DATA_FROM_SOURCE event and logs it to analytics and callstats.\n     */\n    _fireNoDataFromSourceEvent() {\n        this.emit(NO_DATA_FROM_SOURCE);\n\n        Statistics.sendAnalytics(createNoDataFromSourceEvent(this.getType()));\n        const log = { name: NO_DATA_FROM_SOURCE };\n\n        if (this.isAudioTrack()) {\n            log.isReceivingData = this._isReceivingData();\n        }\n        Statistics.sendLog(JSON.stringify(log));\n    }\n\n    /**\n     * Sets real device ID by comparing track information with device\n     * information. This is temporary solution until getConstraints() method\n     * will be implemented in browsers.\n     *\n     * @param {MediaDeviceInfo[]} devices - list of devices obtained from\n     * enumerateDevices() call\n     */\n    _setRealDeviceIdFromDeviceList(devices) {\n        const track = this.getTrack();\n\n        // FIXME for temasys video track, label refers to id not the actual\n        // device\n        const device = devices.find(\n            d => d.kind === `${track.kind}input` && d.label === track.label);\n\n        if (device) {\n            this._realDeviceId = device.deviceId;\n        }\n    }\n\n    /**\n     * Sets the stream property of JitsiLocalTrack object and sets all stored\n     * handlers to it.\n     *\n     * @param {MediaStream} stream the new stream.\n     * @protected\n     */\n    _setStream(stream) {\n        super._setStream(stream);\n\n        if (stream) {\n            // Store the MSID for video mute/unmute purposes.\n            this.storedMSID = this.getMSID();\n            logger.debug(`Setting new MSID: ${this.storedMSID} on ${this}`);\n        } else {\n            logger.debug(`Setting 'null' stream on ${this}`);\n        }\n    }\n\n    /**\n     * Asynchronously mutes this track.\n     *\n     * @returns {Promise}\n     */\n    mute() {\n        return this._queueSetMuted(true);\n    }\n\n    /**\n     * Asynchronously unmutes this track.\n     *\n     * @returns {Promise}\n     */\n    unmute() {\n        return this._queueSetMuted(false);\n    }\n\n    /**\n     * Initializes a new Promise to execute {@link #_setMuted}. May be called\n     * multiple times in a row and the invocations of {@link #_setMuted} and,\n     * consequently, {@link #mute} and/or {@link #unmute} will be resolved in a\n     * serialized fashion.\n     *\n     * @param {boolean} muted - The value to invoke <tt>_setMuted</tt> with.\n     * @returns {Promise}\n     */\n    _queueSetMuted(muted) {\n        const setMuted = this._setMuted.bind(this, muted);\n\n        this._prevSetMuted = this._prevSetMuted.then(setMuted, setMuted);\n\n        return this._prevSetMuted;\n    }\n\n    /**\n     * Mutes / unmutes this track.\n     *\n     * @param {boolean} muted - If <tt>true</tt>, this track will be muted;\n     * otherwise, this track will be unmuted.\n     * @private\n     * @returns {Promise}\n     */\n    _setMuted(muted) {\n        if (this.isMuted() === muted) {\n            return Promise.resolve();\n        }\n\n        if (this.disposed) {\n            return Promise.reject(new JitsiTrackError(TRACK_IS_DISPOSED));\n        }\n\n        let promise = Promise.resolve();\n\n        // A function that will print info about muted status transition\n        const logMuteInfo = () => logger.info(`Mute ${this}: ${muted}`);\n\n        if (this.isAudioTrack()\n                || this.videoType === VideoType.DESKTOP\n                || !browser.doesVideoMuteByStreamRemove()) {\n            logMuteInfo();\n            if (this.track) {\n                this.track.enabled = !muted;\n            }\n        } else if (muted) {\n            promise = new Promise((resolve, reject) => {\n                logMuteInfo();\n                this._removeStreamFromConferenceAsMute(\n                    () => {\n                        // FIXME: Maybe here we should set the SRC for the\n                        // containers to something\n                        // We don't want any events to be fired on this stream\n                        this._unregisterHandlers();\n                        this._stopStream();\n                        this._setStream(null);\n                        resolve();\n                    },\n                    reject);\n            });\n        } else {\n            logMuteInfo();\n\n            // This path is only for camera.\n            const streamOptions = {\n                cameraDeviceId: this.getDeviceId(),\n                devices: [ MediaType.VIDEO ],\n                facingMode: this.getCameraFacingMode()\n            };\n\n            if (browser.usesNewGumFlow()) {\n                promise\n                    = RTCUtils.newObtainAudioAndVideoPermissions(Object.assign(\n                        {},\n                        streamOptions,\n                        { constraints: { video: this._constraints } }));\n            } else {\n                if (this.resolution) {\n                    streamOptions.resolution = this.resolution;\n                }\n\n                promise\n                    = RTCUtils.obtainAudioAndVideoPermissions(streamOptions);\n            }\n\n            promise.then(streamsInfo => {\n                const mediaType = this.getType();\n                const streamInfo\n                    = browser.usesNewGumFlow()\n                        ? streamsInfo.find(\n                            info => info.track.kind === mediaType)\n                        : streamsInfo.find(\n                            info => info.mediaType === mediaType);\n\n                if (streamInfo) {\n                    this._setStream(streamInfo.stream);\n                    this.track = streamInfo.track;\n\n                    // This is not good when video type changes after\n                    // unmute, but let's not crash here\n                    if (this.videoType !== streamInfo.videoType) {\n                        logger.warn(\n                            `${this}: video type has changed after unmute!`,\n                            this.videoType, streamInfo.videoType);\n                        this.videoType = streamInfo.videoType;\n                    }\n                } else {\n                    throw new JitsiTrackError(TRACK_NO_STREAM_FOUND);\n                }\n\n                this.containers = this.containers.map(\n                    cont => RTCUtils.attachMediaStream(cont, this.stream));\n\n                return this._addStreamToConferenceAsUnmute();\n            });\n        }\n\n        return promise\n            .then(() => this._sendMuteStatus(muted))\n            .then(() => this.emit(TRACK_MUTE_CHANGED, this));\n    }\n\n    /**\n     * Adds stream to conference and marks it as \"unmute\" operation.\n     *\n     * @private\n     * @returns {Promise}\n     */\n    _addStreamToConferenceAsUnmute() {\n        if (!this.conference) {\n            return Promise.resolve();\n        }\n\n        // FIXME it would be good to not included conference as part of this\n        // process. Only TraceablePeerConnections to which the track is attached\n        // should care about this action. The TPCs to which the track is not\n        // attached can sync up when track is re-attached.\n        // A problem with that is that the \"modify sources\" queue is part of\n        // the JingleSessionPC and it would be excluded from the process. One\n        // solution would be to extract class between TPC and JingleSessionPC\n        // which would contain the queue and would notify the signaling layer\n        // when local SSRCs are changed. This would help to separate XMPP from\n        // the RTC module.\n        return new Promise((resolve, reject) => {\n            this.conference._addLocalTrackAsUnmute(this)\n                .then(resolve, error => reject(new Error(error)));\n        });\n    }\n\n    /**\n     * Removes stream from conference and marks it as \"mute\" operation.\n     *\n     * @param {Function} successCallback will be called on success\n     * @param {Function} errorCallback will be called on error\n     * @private\n     */\n    _removeStreamFromConferenceAsMute(successCallback, errorCallback) {\n        if (!this.conference) {\n            successCallback();\n\n            return;\n        }\n        this.conference._removeLocalTrackAsMute(this).then(\n            successCallback,\n            error => errorCallback(new Error(error)));\n    }\n\n    /**\n     * Sends mute status for a track to conference if any.\n     *\n     * @param {boolean} mute - If track is muted.\n     * @private\n     * @returns {Promise}\n     */\n    _sendMuteStatus(mute) {\n        if (!this.conference || !this.conference.room) {\n            return Promise.resolve();\n        }\n\n        return new Promise(resolve => {\n            this.conference.room[\n                this.isAudioTrack()\n                    ? 'setAudioMute'\n                    : 'setVideoMute'](mute, resolve);\n        });\n    }\n\n    /**\n     * @inheritdoc\n     *\n     * Stops sending the media track. And removes it from the HTML.\n     * NOTE: Works for local tracks only.\n     *\n     * @extends JitsiTrack#dispose\n     * @returns {Promise}\n     */\n    dispose() {\n        let promise = Promise.resolve();\n\n        if (this.conference) {\n            promise = this.conference.removeTrack(this);\n        }\n\n        if (this.stream) {\n            this._stopStream();\n            this.detach();\n        }\n\n        RTCUtils.removeListener(RTCEvents.DEVICE_LIST_CHANGED,\n            this._onDeviceListChanged);\n\n        if (this._onAudioOutputDeviceChanged) {\n            RTCUtils.removeListener(RTCEvents.AUDIO_OUTPUT_DEVICE_CHANGED,\n                this._onAudioOutputDeviceChanged);\n        }\n\n        return promise.then(() => super.dispose());\n    }\n\n    /**\n     * Returns <tt>true</tt> - if the stream is muted and <tt>false</tt>\n     * otherwise.\n     *\n     * @returns {boolean} <tt>true</tt> - if the stream is muted and\n     * <tt>false</tt> otherwise.\n     */\n    isMuted() {\n        // this.stream will be null when we mute local video on Chrome\n        if (!this.stream) {\n            return true;\n        }\n        if (this.isVideoTrack() && !this.isActive()) {\n            return true;\n        }\n\n        return !this.track || !this.track.enabled;\n    }\n\n    /**\n     * Sets the JitsiConference object associated with the track. This is temp\n     * solution.\n     *\n     * @param conference the JitsiConference object\n     */\n    _setConference(conference) {\n        this.conference = conference;\n\n        // We want to keep up with postponed events which should have been fired\n        // on \"attach\" call, but for local track we not always have the\n        // conference before attaching. However this may result in duplicated\n        // events if they have been triggered on \"attach\" already.\n        for (let i = 0; i < this.containers.length; i++) {\n            this._maybeFireTrackAttached(this.containers[i]);\n        }\n    }\n\n    /**\n     * Returns <tt>true</tt>.\n     *\n     * @returns {boolean} <tt>true</tt>\n     */\n    isLocal() {\n        return true;\n    }\n\n    /**\n     * Returns device id associated with track.\n     *\n     * @returns {string}\n     */\n    getDeviceId() {\n        return this._realDeviceId || this.deviceId;\n    }\n\n    /**\n     * Returns the participant id which owns the track.\n     *\n     * @returns {string} the id of the participants. It corresponds to the\n     * Colibri endpoint id/MUC nickname in case of Jitsi-meet.\n     */\n    getParticipantId() {\n        return this.conference && this.conference.myUserId();\n    }\n\n    /**\n     * Handles bytes sent statistics.\n     *\n     * @param {TraceablePeerConnection} tpc the source of the \"bytes sent\" stat\n     * @param {number} bytesSent the new value\n     * NOTE: used only for audio tracks to detect audio issues.\n     */\n    _onByteSentStatsReceived(tpc, bytesSent) {\n        if (bytesSent > 0) {\n            this._hasSentData = true;\n        }\n        const iceConnectionState = tpc.getConnectionState();\n\n        if (this._testDataSent && iceConnectionState === 'connected') {\n            setTimeout(() => {\n                if (!this._hasSentData) {\n                    logger.warn(`${this} 'bytes sent' <= 0: \\\n                        ${this._bytesSent}`);\n\n                    // we are not receiving anything from the microphone\n                    this._fireNoDataFromSourceEvent();\n                }\n            }, 3000);\n            this._testDataSent = false;\n        }\n    }\n\n    /**\n     * Returns facing mode for video track from camera. For other cases (e.g.\n     * audio track or 'desktop' video track) returns undefined.\n     *\n     * @returns {CameraFacingMode|undefined}\n     */\n    getCameraFacingMode() {\n        if (this.isVideoTrack() && this.videoType === VideoType.CAMERA) {\n            // MediaStreamTrack#getSettings() is not implemented in many\n            // browsers, so we need feature checking here. Progress on the\n            // respective browser's implementation can be tracked at\n            // https://bugs.chromium.org/p/webrtc/issues/detail?id=2481 for\n            // Chromium and https://bugzilla.mozilla.org/show_bug.cgi?id=1213517\n            // for Firefox. Even if a browser implements getSettings() already,\n            // it might still not return anything for 'facingMode'.\n            let trackSettings;\n\n            try {\n                trackSettings = this.track.getSettings();\n            } catch (e) {\n                // XXX React-native-webrtc, for example, defines\n                // MediaStreamTrack#getSettings() but the implementation throws\n                // a \"Not implemented\" Error.\n            }\n            if (trackSettings && 'facingMode' in trackSettings) {\n                return trackSettings.facingMode;\n            }\n\n            if (typeof this._facingMode !== 'undefined') {\n                return this._facingMode;\n            }\n\n            // In most cases we are showing a webcam. So if we've gotten here,\n            // it should be relatively safe to assume that we are probably\n            // showing the user-facing camera.\n            return CameraFacingMode.USER;\n        }\n\n        return undefined;\n    }\n\n    /**\n     * Stops the associated MediaStream.\n     */\n    _stopStream() {\n\n        /**\n         * Indicates that we are executing {@link #_stopStream} i.e.\n         * {@link RTCUtils#stopMediaStream} for the <tt>MediaStream</tt>\n         * associated with this <tt>JitsiTrack</tt> instance.\n         *\n         * @private\n         * @type {boolean}\n         */\n        this._stopStreamInProgress = true;\n\n        try {\n            RTCUtils.stopMediaStream(this.stream);\n        } finally {\n            this._stopStreamInProgress = false;\n        }\n    }\n\n    /**\n     * Switches the camera facing mode if the WebRTC implementation supports the\n     * custom MediaStreamTrack._switchCamera method. Currently, the method in\n     * question is implemented in react-native-webrtc only. When such a WebRTC\n     * implementation is executing, the method is the preferred way to switch\n     * between the front/user-facing and the back/environment-facing cameras\n     * because it will likely be (as is the case of react-native-webrtc)\n     * noticeably faster that creating a new MediaStreamTrack via a new\n     * getUserMedia call with the switched facingMode constraint value.\n     * Moreover, the approach with a new getUserMedia call may not even work:\n     * WebRTC on Android and iOS is either very slow to open the camera a second\n     * time or plainly freezes attempting to do that.\n     */\n    _switchCamera() {\n        if (this.isVideoTrack()\n                && this.videoType === VideoType.CAMERA\n                && typeof this.track._switchCamera === 'function') {\n            this.track._switchCamera();\n\n            this._facingMode\n                = this._facingMode === CameraFacingMode.ENVIRONMENT\n                    ? CameraFacingMode.USER\n                    : CameraFacingMode.ENVIRONMENT;\n        }\n    }\n\n    /**\n     * Detects camera issues, i.e. returns true if we expect this track to be\n     * receiving data from its source, but it isn't receiving data.\n     *\n     * @returns {boolean} true if an issue is detected and false otherwise\n     */\n    _checkForCameraIssues() {\n        if (!this.isVideoTrack()\n                || this._stopStreamInProgress\n                || this.videoType === VideoType.DESKTOP) {\n            return false;\n        }\n\n        return !this._isReceivingData();\n    }\n\n    /**\n     * Checks whether the attached MediaStream is receiving data from source or\n     * not. If the stream property is null(because of mute or another reason)\n     * this method will return false.\n     * NOTE: This method doesn't indicate problem with the streams directly.\n     * For example in case of video mute the method will return false or if the\n     * user has disposed the track.\n     *\n     * @returns {boolean} true if the stream is receiving data and false\n     * this otherwise.\n     */\n    _isReceivingData() {\n        if (!this.stream) {\n            return false;\n        }\n\n        // In older version of the spec there is no muted property and\n        // readyState can have value muted. In the latest versions\n        // readyState can have values \"live\" and \"ended\" and there is\n        // muted boolean property. If the stream is muted that means that\n        // we aren't receiving any data from the source. We want to notify\n        // the users for error if the stream is muted or ended on it's\n        // creation.\n        return this.stream.getTracks().some(track =>\n            (!('readyState' in track) || track.readyState === 'live')\n                && (!('muted' in track) || track.muted !== true));\n    }\n\n    /**\n     * Creates a text representation of this local track instance.\n     *\n     * @return {string}\n     */\n    toString() {\n        return `LocalTrack[${this.rtcId},${this.getType()}]`;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/JitsiLocalTrack.js","/* global __filename, RTCIceGatherer, RTCIceTransport, RTCDtlsTransport,\nRTCRtpSender, RTCRtpReceiver */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport yaeti from 'yaeti';\n\nimport RTCSessionDescription from './RTCSessionDescription';\nimport * as utils from './utils';\nimport { InvalidStateError } from './errors';\nimport RandomUtil from '../../util/RandomUtil';\nimport SDPUtil from '../../xmpp/SDPUtil';\n\nconst logger = getLogger(__filename);\n\nconst RTCSignalingState = {\n    stable: 'stable',\n    haveLocalOffer: 'have-local-offer',\n    haveRemoteOffer: 'have-remote-offer',\n    closed: 'closed'\n};\n\nconst RTCIceGatheringState = {\n    new: 'new',\n    gathering: 'gathering',\n    complete: 'complete'\n};\n\nconst CNAME = `jitsi-ortc-cname-${RandomUtil.randomInt(10000, 99999)}`;\n\n/**\n * RTCPeerConnection shim for ORTC based endpoints (such as Edge).\n *\n * The interface is based on the W3C specification of 2015, which matches\n * the implementation of Chrome nowadays:\n *\n *   https://www.w3.org/TR/2015/WD-webrtc-20150210/\n *\n * It also implements Plan-B for multi-stream, and assumes single BUNDLEd\n * transport and rtcp-mux.\n */\nexport default class ortcRTCPeerConnection extends yaeti.EventTarget {\n    /**\n     */\n    constructor(pcConfig) {\n        super();\n\n        logger.debug('constructor() pcConfig:', pcConfig);\n\n        // Buffered local ICE candidates (in WebRTC format).\n        // @type {sequence<RTCIceCandidate>}\n        this._bufferedIceCandidates = [];\n\n        // Closed flag.\n        // @type {Boolean}\n        this._closed = false;\n\n        // RTCDtlsTransport.\n        // @type {RTCDtlsTransport}\n        this._dtlsTransport = null;\n\n        // RTCIceGatherer.\n        // @type {RTCIceGatherer}\n        this._iceGatherer = null;\n\n        // RTCPeerConnection iceGatheringState.\n        // NOTE: This should not be needed, but Edge does not implement\n        // iceGatherer.state.\n        // @type {RTCIceGatheringState}\n        this._iceGatheringState = RTCIceGatheringState.new;\n\n        // RTCIceTransport.\n        // @type {RTCIceTransport}\n        this._iceTransport = null;\n\n        // Local RTP capabilities (filtered with remote ones).\n        // @type {RTCRtpCapabilities}\n        this._localCapabilities = null;\n\n        // Local RTCSessionDescription.\n        // @type {RTCSessionDescription}\n        this._localDescription = null;\n\n        // Map with info regarding local media.\n        // - index: MediaStreamTrack.id\n        // - value: Object\n        //   - rtpSender: Associated RTCRtpSender instance\n        //   - stream: Associated MediaStream instance\n        //   - ssrc: Provisional or definitive SSRC\n        //   - rtxSsrc: Provisional or definitive SSRC for RTX\n        //   - sending: Boolean indicating whether rtpSender.send() was called.\n        this._localTrackInfos = new Map();\n\n        // Ordered Map with MID as key and kind as value.\n        // @type {map<String, String>}\n        this._mids = new Map();\n\n        // Remote RTCSessionDescription.\n        // @type {RTCSessionDescription}\n        this._remoteDescription = null;\n\n        // Map of remote streams.\n        // - index: MediaStream.jitsiRemoteId (as signaled in remote SDP)\n        // - value: MediaStream (locally generated so id does not match)\n        // @type {map<Number, MediaStream>}\n        this._remoteStreams = new Map();\n\n        // Map with info about receiving media.\n        // - index: Media SSRC\n        // - value: Object\n        //   - kind: 'audio' / 'video'\n        //   - ssrc: Media SSRC\n        //   - rtxSsrc: RTX SSRC (may be unset)\n        //   - streamId: MediaStream.jitsiRemoteId\n        //   - trackId: MediaStreamTrack.jitsiRemoteId\n        //   - cname: CNAME\n        //   - stream: MediaStream\n        //   - track: MediaStreamTrack\n        //   - rtpReceiver: Associated RTCRtpReceiver instance\n        // @type {map<Number, Object>}\n        this._remoteTrackInfos = new Map();\n\n        // Local SDP global fields.\n        this._sdpGlobalFields = {\n            id: SDPUtil.generateSsrc(),\n            version: 0\n        };\n\n        // RTCPeerConnection signalingState.\n        // @type {RTCSignalingState}\n        this._signalingState = RTCSignalingState.stable;\n\n        // Create the RTCIceGatherer.\n        this._setIceGatherer(pcConfig);\n\n        // Create the RTCIceTransport.\n        this._setIceTransport(this._iceGatherer);\n\n        // Create the RTCDtlsTransport.\n        this._setDtlsTransport(this._iceTransport);\n    }\n\n    /**\n     * Current ICE+DTLS connection state.\n     * @return {RTCPeerConnectionState}\n     */\n    get connectionState() {\n        return this._dtlsTransport.state;\n    }\n\n    /**\n     * Current ICE connection state.\n     * @return {RTCIceConnectionState}\n     */\n    get iceConnectionState() {\n        return this._iceTransport.state;\n    }\n\n    /**\n     * Current ICE gathering state.\n     * @return {RTCIceGatheringState}\n     */\n    get iceGatheringState() {\n        return this._iceGatheringState;\n    }\n\n    /**\n     * Gets the local description.\n     * @return {RTCSessionDescription}\n     */\n    get localDescription() {\n        return this._localDescription;\n    }\n\n    /**\n     * Gets the remote description.\n     * @return {RTCSessionDescription}\n     */\n    get remoteDescription() {\n        return this._remoteDescription;\n    }\n\n    /**\n     * Current signaling state.\n     * @return {RTCSignalingState}\n     */\n    get signalingState() {\n        return this._signalingState;\n    }\n\n    /**\n     * Adds a remote ICE candidate. Implements both the old callbacks based\n     * signature and the new Promise based style.\n     *\n     * Arguments in Promise mode:\n     * @param {RTCIceCandidate} candidate\n     *\n     * Arguments in callbacks mode:\n     * @param {RTCIceCandidate} candidate\n     * @param {function()} callback\n     * @param {function(error)} errback\n     */\n    addIceCandidate(candidate, ...args) {\n        let usePromise;\n        let callback;\n        let errback;\n\n        if (!candidate) {\n            throw new TypeError('candidate missing');\n        }\n\n        if (args.length === 0) {\n            usePromise = true;\n        } else {\n            usePromise = false;\n            callback = args[0];\n            errback = args[1];\n\n            if (typeof callback !== 'function') {\n                throw new TypeError('callback missing');\n            }\n\n            if (typeof errback !== 'function') {\n                throw new TypeError('errback missing');\n            }\n        }\n\n        logger.debug('addIceCandidate() candidate:', candidate);\n\n        if (usePromise) {\n            return this._addIceCandidate(candidate);\n        }\n\n        this._addIceCandidate(candidate)\n            .then(() => callback())\n            .catch(error => errback(error));\n    }\n\n    /**\n     * Adds a local MediaStream.\n     * @param {MediaStream} stream.\n     * NOTE: Deprecated API.\n     */\n    addStream(stream) {\n        logger.debug('addStream()');\n\n        this._addStream(stream);\n    }\n\n    /**\n     * Closes the RTCPeerConnection and all the underlying ORTC objects.\n     */\n    close() {\n        if (this._closed) {\n            return;\n        }\n\n        this._closed = true;\n\n        logger.debug('close()');\n\n        this._updateAndEmitSignalingStateChange(RTCSignalingState.closed);\n\n        // Close RTCIceGatherer.\n        // NOTE: Not yet implemented by Edge.\n        try {\n            this._iceGatherer.close();\n        } catch (error) {\n            logger.warn(`iceGatherer.close() failed:${error}`);\n        }\n\n        // Close RTCIceTransport.\n        try {\n            this._iceTransport.stop();\n        } catch (error) {\n            logger.warn(`iceTransport.stop() failed:${error}`);\n        }\n\n        // Close RTCDtlsTransport.\n        try {\n            this._dtlsTransport.stop();\n        } catch (error) {\n            logger.warn(`dtlsTransport.stop() failed:${error}`);\n        }\n\n        // Close and clear RTCRtpSenders.\n        for (const info of this._localTrackInfos.values()) {\n            const rtpSender = info.rtpSender;\n\n            try {\n                rtpSender.stop();\n            } catch (error) {\n                logger.warn(`rtpSender.stop() failed:${error}`);\n            }\n        }\n\n        this._localTrackInfos.clear();\n\n        // Close and clear RTCRtpReceivers.\n        for (const info of this._remoteTrackInfos.values()) {\n            const rtpReceiver = info.rtpReceiver;\n\n            try {\n                rtpReceiver.stop();\n            } catch (error) {\n                logger.warn(`rtpReceiver.stop() failed:${error}`);\n            }\n        }\n\n        this._remoteTrackInfos.clear();\n\n        // Clear remote streams.\n        this._remoteStreams.clear();\n    }\n\n    /**\n     * Creates a local answer. Implements both the old callbacks based signature\n     * and the new Promise based style.\n     *\n     * Arguments in Promise mode:\n     * @param {RTCOfferOptions} [options]\n     *\n     * Arguments in callbacks mode:\n     * @param {function(desc)} callback\n     * @param {function(error)} errback\n     * @param {MediaConstraints} [constraints]\n     */\n    createAnswer(...args) {\n        let usePromise;\n        let options;\n        let callback;\n        let errback;\n\n        if (args.length <= 1) {\n            usePromise = true;\n            options = args[0];\n        } else {\n            usePromise = false;\n            callback = args[0];\n            errback = args[1];\n            options = args[2];\n\n            if (typeof callback !== 'function') {\n                throw new TypeError('callback missing');\n            }\n\n            if (typeof errback !== 'function') {\n                throw new TypeError('errback missing');\n            }\n        }\n\n        logger.debug('createAnswer() options:', options);\n\n        if (usePromise) {\n            return this._createAnswer(options);\n        }\n\n        this._createAnswer(options)\n            .then(desc => callback(desc))\n            .catch(error => errback(error));\n    }\n\n    /**\n     * Creates a RTCDataChannel.\n     */\n    createDataChannel() {\n        logger.debug('createDataChannel()');\n\n        // NOTE: DataChannels not implemented in Edge.\n        throw new Error('createDataChannel() not supported in Edge');\n    }\n\n    /**\n     * Creates a local offer. Implements both the old callbacks based signature\n     * and the new Promise based style.\n     *\n     * Arguments in Promise mode:\n     * @param {RTCOfferOptions} [options]\n     *\n     * Arguments in callbacks mode:\n     * @param {function(desc)} callback\n     * @param {function(error)} errback\n     * @param {MediaConstraints} [constraints]\n     */\n    createOffer(...args) {\n        let usePromise;\n        let options;\n        let callback;\n        let errback;\n\n        if (args.length <= 1) {\n            usePromise = true;\n            options = args[0];\n        } else {\n            usePromise = false;\n            callback = args[0];\n            errback = args[1];\n            options = args[2];\n\n            if (typeof callback !== 'function') {\n                throw new TypeError('callback missing');\n            }\n\n            if (typeof errback !== 'function') {\n                throw new TypeError('errback missing');\n            }\n        }\n\n        logger.debug('createOffer() options:', options);\n\n        if (usePromise) {\n            return this._createOffer(options);\n        }\n\n        this._createOffer(options)\n            .then(desc => callback(desc))\n            .catch(error => errback(error));\n    }\n\n    /**\n     * Gets a sequence of local MediaStreams.\n     * @return {sequence<MediaStream>}\n     */\n    getLocalStreams() {\n        return Array.from(this._localTrackInfos.values())\n            .map(info => info.stream)\n            .filter((elem, pos, arr) => arr.indexOf(elem) === pos);\n    }\n\n    /**\n     * Gets a sequence of remote MediaStreams.\n     * @return {sequence<MediaStream>}\n     */\n    getRemoteStreams() {\n        return Array.from(this._remoteStreams.values());\n    }\n\n    /**\n     * Get RTP statistics. Implements both the old callbacks based signature\n     * and the new Promise based style.\n     *\n     * Arguments in Promise mode:\n     * @param {MediaStreamTrack} [selector]\n     *\n     * Arguments in callbacks mode:\n     * @param {MediaStreamTrack} [selector]\n     * @param {function(desc)} callback\n     * @param {function(error)} errback\n     */\n    getStats(...args) {\n        let usePromise;\n        let selector;\n        let callback;\n        let errback;\n\n        if (typeof args[0] === 'function') {\n            usePromise = false;\n            callback = args[0];\n            errback = args[1];\n        } else if (typeof args[1] === 'function') {\n            usePromise = false;\n            selector = args[0];\n            callback = args[1];\n            errback = args[2];\n        } else {\n            usePromise = true;\n            selector = args[0];\n        }\n\n        if (!usePromise && !errback) {\n            errback = error => {\n                logger.error(`getStats() failed: ${error}`);\n                logger.error(error.stack);\n            };\n        }\n\n        if (usePromise) {\n            return this._getStats(selector);\n        }\n\n        this._getStats(selector)\n            .then(stats => callback(stats))\n            .catch(error => errback(error));\n    }\n\n    /**\n     * Removes a local MediaStream.\n     * @param {MediaStream} stream.\n     * NOTE: Deprecated API.\n     */\n    removeStream(stream) {\n        logger.debug('removeStream()');\n\n        this._removeStream(stream);\n    }\n\n    /**\n     * Applies a local description. Implements both the old callbacks based\n     * signature and the new Promise based style.\n     *\n     * Arguments in Promise mode:\n     * @param {RTCSessionDescriptionInit} desc\n     *\n     * Arguments in callbacks mode:\n     * @param {RTCSessionDescription} desc\n     * @param {function()} callback\n     * @param {function(error)} errback\n     */\n    setLocalDescription(desc, ...args) {\n        let usePromise;\n        let callback;\n        let errback;\n\n        if (!desc) {\n            throw new TypeError('description missing');\n        }\n\n        if (args.length === 0) {\n            usePromise = true;\n        } else {\n            usePromise = false;\n            callback = args[0];\n            errback = args[1];\n\n            if (typeof callback !== 'function') {\n                throw new TypeError('callback missing');\n            }\n\n            if (typeof errback !== 'function') {\n                throw new TypeError('errback missing');\n            }\n        }\n\n        logger.debug('setLocalDescription() desc:', desc);\n\n        if (usePromise) {\n            return this._setLocalDescription(desc);\n        }\n\n        this._setLocalDescription(desc)\n            .then(() => callback())\n            .catch(error => errback(error));\n    }\n\n    /**\n     * Applies a remote description. Implements both the old callbacks based\n     * signature and the new Promise based style.\n     *\n     * Arguments in Promise mode:\n     * @param {RTCSessionDescriptionInit} desc\n     *\n     * Arguments in callbacks mode:\n     * @param {RTCSessionDescription} desc\n     * @param {function()} callback\n     * @param {function(error)} errback\n     */\n    setRemoteDescription(desc, ...args) {\n        let usePromise;\n        let callback;\n        let errback;\n\n        if (!desc) {\n            throw new TypeError('description missing');\n        }\n\n        if (args.length === 0) {\n            usePromise = true;\n        } else {\n            usePromise = false;\n            callback = args[0];\n            errback = args[1];\n\n            if (typeof callback !== 'function') {\n                throw new TypeError('callback missing');\n            }\n\n            if (typeof errback !== 'function') {\n                throw new TypeError('errback missing');\n            }\n        }\n\n        logger.debug('setRemoteDescription() desc:', desc);\n\n        if (usePromise) {\n            return this._setRemoteDescription(desc);\n        }\n\n        this._setRemoteDescription(desc)\n            .then(() => callback())\n            .catch(error => errback(error));\n    }\n\n    /**\n     * Promise based implementation for addIceCandidate().\n     * @return {Promise}\n     * @private\n     */\n    _addIceCandidate(candidate) { // eslint-disable-line no-unused-vars\n        if (this._closed) {\n            return Promise.reject(\n                new InvalidStateError('RTCPeerConnection closed'));\n        }\n\n        // NOTE: Edge does not support Trickle-ICE so just candidates in the\n        // remote SDP are applied. Candidates given later would be just\n        // ignored, so notify the called about that.\n        return Promise.reject(new Error('addIceCandidate() not supported'));\n    }\n\n    /**\n     * Implementation for addStream().\n     * @private\n     */\n    _addStream(stream) {\n        if (this._closed) {\n            throw new InvalidStateError('RTCPeerConnection closed');\n        }\n\n        // Create a RTCRtpSender for each track.\n        for (const track of stream.getTracks()) {\n            // Ignore if ended.\n            if (track.readyState === 'ended') {\n                logger.warn('ignoring ended MediaStreamTrack');\n\n                continue; // eslint-disable-line no-continue\n            }\n\n            // Ignore if track is already present.\n            if (this._localTrackInfos.has(track.id)) {\n                logger.warn('ignoring already handled MediaStreamTrack');\n\n                continue; // eslint-disable-line no-continue\n            }\n\n            const rtpSender = new RTCRtpSender(track, this._dtlsTransport);\n\n            // Store it in the map.\n            this._localTrackInfos.set(track.id, {\n                rtpSender,\n                stream\n            });\n        }\n\n        // Check for local tracks removal.\n        for (const [ trackId, info ] of this._localTrackInfos) {\n            const track = info.rtpSender.track;\n\n            // Check if any of the local tracks has been stopped.\n            if (track.readyState === 'ended') {\n                logger.warn(\n                    '_addStream() an already handled track was stopped, '\n                    + `track.id:${track.id}`);\n\n                try {\n                    info.rtpSender.stop();\n                } catch (error) {\n                    logger.warn(`rtpSender.stop() failed:${error}`);\n                }\n\n                // Remove from the map.\n                this._localTrackInfos.delete(track.id);\n\n            // Also, if the stream was already handled, check whether tracks\n            // have been removed via stream.removeTrack() and, if so, stop\n            // their RtpSenders.\n            } else if (info.stream === stream\n                && !stream.getTrackById(trackId)) {\n                logger.warn(\n                    '_addStream() a track in this stream was removed, '\n                    + `track.id:${trackId}`);\n\n                try {\n                    info.rtpSender.stop();\n                } catch (error) {\n                    logger.warn(`rtpSender.stop() failed:${error}`);\n                }\n\n                // Remove from the map.\n                this._localTrackInfos.delete(track.id);\n            }\n        }\n\n        // It may need to renegotiate.\n        this._emitNegotiationNeeded();\n    }\n\n    /**\n     * Promise based implementation for createAnswer().\n     * @returns {Promise}\n     * @private\n     */\n    _createAnswer(options) { // eslint-disable-line no-unused-vars\n        if (this._closed) {\n            return Promise.reject(\n                new InvalidStateError('RTCPeerConnection closed'));\n        }\n\n        if (this.signalingState !== RTCSignalingState.haveRemoteOffer) {\n            return Promise.reject(new InvalidStateError(\n                `invalid signalingState \"${this.signalingState}\"`));\n        }\n\n        // Create an answer.\n        const localDescription = this._createLocalDescription('answer');\n\n        // Resolve with it.\n        return Promise.resolve(localDescription);\n    }\n\n    /**\n     * Creates the local RTCSessionDescription.\n     * @param {String} type - 'offer' / 'answer'.\n     * @return {RTCSessionDescription}\n     */\n    _createLocalDescription(type) {\n        const sdpObject = {};\n        const localIceParameters = this._iceGatherer.getLocalParameters();\n        const localIceCandidates = this._iceGatherer.getLocalCandidates();\n        const localDtlsParameters = this._dtlsTransport.getLocalParameters();\n        const remoteDtlsParameters = this._dtlsTransport.getRemoteParameters();\n        const localCapabilities = this._localCapabilities;\n        const localTrackInfos = this._localTrackInfos;\n\n        // Increase SDP version if an offer.\n        if (type === 'offer') {\n            this._sdpGlobalFields.version++;\n        }\n\n        // SDP global fields.\n        sdpObject.version = 0;\n        sdpObject.origin = {\n            address: '127.0.0.1',\n            ipVer: 4,\n            netType: 'IN',\n            sessionId: this._sdpGlobalFields.id,\n            sessionVersion: this._sdpGlobalFields.version,\n            username: 'jitsi-ortc-webrtc-shim'\n        };\n        sdpObject.name = '-';\n        sdpObject.timing = {\n            start: 0,\n            stop: 0\n        };\n        sdpObject.msidSemantic = {\n            semantic: 'WMS',\n            token: '*'\n        };\n        sdpObject.groups = [\n            {\n                mids: Array.from(this._mids.keys()).join(' '),\n                type: 'BUNDLE'\n            }\n        ];\n        sdpObject.media = [];\n\n        // DTLS fingerprint.\n        sdpObject.fingerprint = {\n            hash: localDtlsParameters.fingerprints[0].value,\n            type: localDtlsParameters.fingerprints[0].algorithm\n        };\n\n        // Let's check whether there is video RTX.\n        let hasVideoRtx = false;\n\n        for (const codec of localCapabilities.codecs) {\n            if (codec.kind === 'video' && codec.name === 'rtx') {\n                hasVideoRtx = true;\n                break;\n            }\n        }\n\n        // Add m= sections.\n        for (const [ mid, kind ] of this._mids) {\n            addMediaSection.call(this, mid, kind);\n        }\n\n        // Create a RTCSessionDescription.\n        const localDescription = new RTCSessionDescription({\n            type,\n            _sdpObject: sdpObject\n        });\n\n        logger.debug('_createLocalDescription():', localDescription);\n\n        return localDescription;\n\n        /**\n         * Add a m= section.\n         */\n        function addMediaSection(mid, kind) {\n            const mediaObject = {};\n\n            // m= line.\n            mediaObject.type = kind;\n\n            switch (kind) {\n            case 'audio':\n            case 'video':\n                mediaObject.protocol = 'RTP/SAVPF';\n                mediaObject.port = 9;\n                mediaObject.direction = 'sendrecv';\n                break;\n            case 'application':\n                mediaObject.protocol = 'DTLS/SCTP';\n                mediaObject.port = 0; // Reject m section.\n                mediaObject.payloads = '0'; // Just put something.\n                mediaObject.direction = 'inactive';\n                break;\n            }\n\n            // c= line.\n            mediaObject.connection = {\n                ip: '127.0.0.1',\n                version: 4\n            };\n\n            // a=mid attribute.\n            mediaObject.mid = mid;\n\n            // ICE.\n            mediaObject.iceUfrag = localIceParameters.usernameFragment;\n            mediaObject.icePwd = localIceParameters.password;\n            mediaObject.candidates = [];\n\n            for (const candidate of localIceCandidates) {\n                const candidateObject = {};\n\n                // rtcp-mux is assumed, so component is always 1 (RTP).\n                candidateObject.component = 1;\n                candidateObject.foundation = candidate.foundation;\n                candidateObject.ip = candidate.ip;\n                candidateObject.port = candidate.port;\n                candidateObject.priority = candidate.priority;\n                candidateObject.transport\n                    = candidate.protocol.toLowerCase();\n                candidateObject.type = candidate.type;\n                if (candidateObject.transport === 'tcp') {\n                    candidateObject.tcptype = candidate.tcpType;\n                }\n\n                mediaObject.candidates.push(candidateObject);\n            }\n\n            mediaObject.endOfCandidates = 'end-of-candidates';\n\n            // DTLS.\n            // If 'offer' always use 'actpass'.\n            if (type === 'offer') {\n                mediaObject.setup = 'actpass';\n            } else {\n                mediaObject.setup = remoteDtlsParameters.role === 'server'\n                    ? 'active' : 'passive';\n            }\n\n            if (kind === 'audio' || kind === 'video') {\n                mediaObject.rtp = [];\n                mediaObject.rtcpFb = [];\n                mediaObject.fmtp = [];\n\n                // Array of payload types.\n                const payloads = [];\n\n                // Add codecs.\n                for (const codec of localCapabilities.codecs) {\n                    if (codec.kind && codec.kind !== kind) {\n                        continue; // eslint-disable-line no-continue\n                    }\n\n                    payloads.push(codec.preferredPayloadType);\n\n                    const rtpObject = {\n                        codec: codec.name,\n                        payload: codec.preferredPayloadType,\n                        rate: codec.clockRate\n                    };\n\n                    if (codec.numChannels > 1) {\n                        rtpObject.encoding = codec.numChannels;\n                    }\n\n                    mediaObject.rtp.push(rtpObject);\n\n                    // If codec has parameters add them into a=fmtp attributes.\n                    if (codec.parameters) {\n                        const paramFmtp = {\n                            config: '',\n                            payload: codec.preferredPayloadType\n                        };\n\n                        for (const name of Object.keys(codec.parameters)) {\n                            /* eslint-disable max-depth */\n                            if (paramFmtp.config) {\n                                paramFmtp.config += ';';\n                            }\n                            /* eslint-enable max-depth */\n\n                            paramFmtp.config\n                                += `${name}=${codec.parameters[name]}`;\n                        }\n\n                        if (paramFmtp.config) {\n                            mediaObject.fmtp.push(paramFmtp);\n                        }\n                    }\n\n                    // Set RTCP feedback.\n                    for (const fb of codec.rtcpFeedback || []) {\n                        mediaObject.rtcpFb.push({\n                            payload: codec.preferredPayloadType,\n                            subtype: fb.parameter || undefined,\n                            type: fb.type\n                        });\n                    }\n                }\n\n                // If there are no codecs, set this m section as unavailable.\n                if (payloads.length === 0) {\n                    mediaObject.payloads = '9'; // Just put something.\n                    mediaObject.port = 0;\n                    mediaObject.direction = 'inactive';\n                } else {\n                    mediaObject.payloads = payloads.join(' ');\n                }\n\n                // SSRCs.\n                mediaObject.ssrcs = [];\n                mediaObject.ssrcGroups = [];\n\n                // Add RTP sending stuff.\n                for (const info of localTrackInfos.values()) {\n                    const rtpSender = info.rtpSender;\n                    const streamId = info.stream.id;\n                    const track = rtpSender.track;\n\n                    // Ignore if ended.\n                    if (track.readyState === 'ended') {\n                        continue; // eslint-disable-line no-continue\n                    }\n\n                    if (track.kind !== kind) {\n                        continue; // eslint-disable-line no-continue\n                    }\n\n                    // Set a random provisional SSRC if not set.\n                    if (!info.ssrc) {\n                        info.ssrc = SDPUtil.generateSsrc();\n                    }\n\n                    // Whether RTX should be enabled.\n                    const enableRtx = hasVideoRtx && track.kind === 'video';\n\n                    // Set a random provisional RTX SSRC if not set.\n                    if (enableRtx && !info.rtxSsrc) {\n                        info.rtxSsrc = info.ssrc + 1;\n                    }\n\n                    mediaObject.ssrcs.push({\n                        attribute: 'cname',\n                        id: info.ssrc,\n                        value: CNAME\n                    });\n\n                    mediaObject.ssrcs.push({\n                        attribute: 'msid',\n                        id: info.ssrc,\n                        value: `${streamId} ${track.id}`\n                    });\n\n                    mediaObject.ssrcs.push({\n                        attribute: 'mslabel',\n                        id: info.ssrc,\n                        value: streamId\n                    });\n\n                    mediaObject.ssrcs.push({\n                        attribute: 'label',\n                        id: info.ssrc,\n                        value: track.id\n                    });\n\n                    if (enableRtx) {\n                        mediaObject.ssrcs.push({\n                            attribute: 'cname',\n                            id: info.rtxSsrc,\n                            value: CNAME\n                        });\n\n                        mediaObject.ssrcs.push({\n                            attribute: 'msid',\n                            id: info.rtxSsrc,\n                            value: `${streamId} ${track.id}`\n                        });\n\n                        mediaObject.ssrcs.push({\n                            attribute: 'mslabel',\n                            id: info.rtxSsrc,\n                            value: streamId\n                        });\n\n                        mediaObject.ssrcs.push({\n                            attribute: 'label',\n                            id: info.rtxSsrc,\n                            value: track.id\n                        });\n\n                        mediaObject.ssrcGroups.push({\n                            semantics: 'FID',\n                            ssrcs: `${info.ssrc} ${info.rtxSsrc}`\n                        });\n                    }\n                }\n\n                // RTP header extensions.\n                mediaObject.ext = [];\n\n                for (const extension of localCapabilities.headerExtensions) {\n                    if (extension.kind && extension.kind !== kind) {\n                        continue; // eslint-disable-line no-continue\n                    }\n\n                    mediaObject.ext.push({\n                        value: extension.preferredId,\n                        uri: extension.uri\n                    });\n                }\n\n                // a=rtcp-mux attribute.\n                mediaObject.rtcpMux = 'rtcp-mux';\n\n                // a=rtcp-rsize.\n                mediaObject.rtcpRsize = 'rtcp-rsize';\n            }\n\n            // Add the media section.\n            sdpObject.media.push(mediaObject);\n        }\n    }\n\n    /**\n     * Promise based implementation for createOffer().\n     * @returns {Promise}\n     * @private\n     */\n    _createOffer(options) { // eslint-disable-line no-unused-vars\n        if (this._closed) {\n            return Promise.reject(\n                new InvalidStateError('RTCPeerConnection closed'));\n        }\n\n        if (this.signalingState !== RTCSignalingState.stable) {\n            return Promise.reject(new InvalidStateError(\n                `invalid signalingState \"${this.signalingState}\"`));\n        }\n\n        // NOTE: P2P mode not yet supported, so createOffer() should never be\n        // called.\n        return Promise.reject(new Error('createoOffer() not yet supported'));\n    }\n\n    /**\n     * Emit 'addstream' event.\n     * @private\n     */\n    _emitAddStream(stream) {\n        if (this._closed) {\n            return;\n        }\n\n        logger.debug('emitting \"addstream\"');\n\n        const event = new yaeti.Event('addstream');\n\n        event.stream = stream;\n        this.dispatchEvent(event);\n    }\n\n    /**\n     * May emit buffered ICE candidates.\n     * @private\n     */\n    _emitBufferedIceCandidates() {\n        if (this._closed) {\n            return;\n        }\n\n        for (const sdpCandidate of this._bufferedIceCandidates) {\n            if (!sdpCandidate) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            // Now we have set the MID values of the SDP O/A, so let's fill the\n            // sdpMIndex of the candidate.\n            sdpCandidate.sdpMIndex = this._mids.keys().next().value;\n\n            logger.debug(\n                'emitting buffered \"icecandidate\", candidate:', sdpCandidate);\n\n            const event = new yaeti.Event('icecandidate');\n\n            event.candidate = sdpCandidate;\n            this.dispatchEvent(event);\n        }\n\n        this._bufferedIceCandidates = [];\n    }\n\n    /**\n     * May emit 'connectionstatechange' event.\n     * @private\n     */\n    _emitConnectionStateChange() {\n        if (this._closed && this.connectionState !== 'closed') {\n            return;\n        }\n\n        logger.debug(\n            'emitting \"connectionstatechange\", connectionState:',\n            this.connectionState);\n\n        const event = new yaeti.Event('connectionstatechange');\n\n        this.dispatchEvent(event);\n    }\n\n    /**\n     * May emit 'icecandidate' event.\n     * @private\n     */\n    _emitIceCandidate(candidate) {\n        if (this._closed) {\n            return;\n        }\n\n        let sdpCandidate = null;\n\n        if (candidate) {\n            // NOTE: We assume BUNDLE so let's just emit candidates for the\n            // first m= section.\n            const sdpMIndex = this._mids.keys().next().value;\n            const sdpMLineIndex = 0;\n            let sdpAttribute\n                = `candidate:${candidate.foundation} 1 ${candidate.protocol}`\n                + ` ${candidate.priority} ${candidate.ip} ${candidate.port}`\n                + ` typ ${candidate.type}`;\n\n            if (candidate.relatedAddress) {\n                sdpAttribute += ` raddr ${candidate.relatedAddress}`;\n            }\n            if (candidate.relatedPort) {\n                sdpAttribute += ` rport ${candidate.relatedPort}`;\n            }\n            if (candidate.protocol === 'tcp') {\n                sdpAttribute += ` tcptype ${candidate.tcpType}`;\n            }\n\n            sdpCandidate = {\n                candidate: sdpAttribute,\n                component: 1, // rtcp-mux assumed, so always 1 (RTP).\n                foundation: candidate.foundation,\n                ip: candidate.ip,\n                port: candidate.port,\n                priority: candidate.priority,\n                protocol: candidate.protocol,\n                type: candidate.type,\n                sdpMIndex,\n                sdpMLineIndex\n            };\n\n            if (candidate.protocol === 'tcp') {\n                sdpCandidate.tcptype = candidate.tcpType;\n            }\n            if (candidate.relatedAddress) {\n                sdpCandidate.relatedAddress = candidate.relatedAddress;\n            }\n            if (candidate.relatedPort) {\n                sdpCandidate.relatedPort = candidate.relatedPort;\n            }\n        }\n\n        // If we don't have yet a local description, buffer the candidate.\n        if (this._localDescription) {\n            logger.debug(\n                'emitting \"icecandidate\", candidate:', sdpCandidate);\n\n            const event = new yaeti.Event('icecandidate');\n\n            event.candidate = sdpCandidate;\n            this.dispatchEvent(event);\n        } else {\n            logger.debug(\n                'buffering gathered ICE candidate:', sdpCandidate);\n\n            this._bufferedIceCandidates.push(sdpCandidate);\n        }\n    }\n\n    /**\n     * May emit 'iceconnectionstatechange' event.\n     * @private\n     */\n    _emitIceConnectionStateChange() {\n        if (this._closed && this.iceConnectionState !== 'closed') {\n            return;\n        }\n\n        logger.debug(\n            'emitting \"iceconnectionstatechange\", iceConnectionState:',\n            this.iceConnectionState);\n\n        const event = new yaeti.Event('iceconnectionstatechange');\n\n        this.dispatchEvent(event);\n    }\n\n    /**\n     * May emit 'negotiationneeded' event.\n     * @private\n     */\n    _emitNegotiationNeeded() {\n        // Ignore if signalingState is not 'stable'.\n        if (this.signalingState !== RTCSignalingState.stable) {\n            return;\n        }\n\n        logger.debug('emitting \"negotiationneeded\"');\n\n        const event = new yaeti.Event('negotiationneeded');\n\n        this.dispatchEvent(event);\n    }\n\n    /**\n     * Emit 'removestream' event.\n     * @private\n     */\n    _emitRemoveStream(stream) {\n        if (this._closed) {\n            return;\n        }\n\n        logger.debug('emitting \"removestream\"');\n\n        const event = new yaeti.Event('removestream');\n\n        event.stream = stream;\n        this.dispatchEvent(event);\n    }\n\n    /**\n     * Get RTP parameters for a RTCRtpReceiver.\n     * @private\n     * @return {RTCRtpParameters}\n     */\n    _getParametersForRtpReceiver(kind, data) {\n        const ssrc = data.ssrc;\n        const rtxSsrc = data.rtxSsrc;\n        const cname = data.cname;\n        const localCapabilities = this._localCapabilities;\n        const parameters = {\n            codecs: [],\n            degradationPreference: 'balanced',\n            encodings: [],\n            headerExtensions: [],\n            muxId: '',\n            rtcp: {\n                cname,\n                compound: true, // NOTE: Implemented in Edge.\n                mux: true,\n                reducedSize: true // NOTE: Not yet implemented in Edge.\n            }\n        };\n\n        const codecs = [];\n        let codecPayloadType;\n\n        for (const codecCapability of localCapabilities.codecs) {\n            if (codecCapability.kind !== kind\n                || codecCapability.name === 'rtx') {\n                continue; // eslint-disable-line no-continue\n            }\n\n            codecPayloadType = codecCapability.preferredPayloadType;\n            codecs.push({\n                clockRate: codecCapability.clockRate,\n                maxptime: codecCapability.maxptime,\n                mimeType: codecCapability.mimeType,\n                name: codecCapability.name,\n                numChannels: codecCapability.numChannels,\n                parameters: codecCapability.parameters,\n                payloadType: codecCapability.preferredPayloadType,\n                ptime: codecCapability.ptime,\n                rtcpFeedback: codecCapability.rtcpFeedback\n            });\n\n            break;\n        }\n\n        if (rtxSsrc) {\n            for (const codecCapability of localCapabilities.codecs) {\n                if (codecCapability.kind !== kind\n                    || codecCapability.name !== 'rtx') {\n                    continue; // eslint-disable-line no-continue\n                }\n\n                codecs.push({\n                    clockRate: codecCapability.clockRate,\n                    mimeType: codecCapability.mimeType,\n                    name: 'rtx',\n                    parameters: codecCapability.parameters,\n                    payloadType: codecCapability.preferredPayloadType,\n                    rtcpFeedback: codecCapability.rtcpFeedback\n                });\n\n                break;\n            }\n        }\n\n        parameters.codecs = codecs;\n\n        const encoding = {\n            active: true,\n            codecPayloadType,\n            ssrc\n        };\n\n        if (rtxSsrc) {\n            encoding.rtx = {\n                ssrc: rtxSsrc\n            };\n        }\n\n        parameters.encodings.push(encoding);\n\n        for (const extension of localCapabilities.headerExtensions) {\n            if (extension.kind !== kind) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            parameters.headerExtensions.push({\n                encrypt: extension.preferredEncrypt,\n                id: extension.preferredId,\n                uri: extension.uri\n            });\n        }\n\n        return parameters;\n    }\n\n    /**\n     * Get RTP parameters for a RTCRtpSender.\n     * @private\n     * @return {RTCRtpParameters}\n     */\n    _getParametersForRtpSender(kind, data) {\n        const ssrc = data.ssrc;\n        const rtxSsrc = data.rtxSsrc;\n        const cname = CNAME;\n        const localCapabilities = this._localCapabilities;\n        const parameters = {\n            codecs: [],\n            degradationPreference: 'balanced',\n            encodings: [],\n            headerExtensions: [],\n            muxId: '',\n            rtcp: {\n                cname,\n                compound: true, // NOTE: Implemented in Edge.\n                mux: true,\n                reducedSize: true // NOTE: Not yet implemented in Edge.\n            }\n        };\n\n        const codecs = [];\n        let codecPayloadType;\n\n        for (const codecCapability of localCapabilities.codecs) {\n            if (codecCapability.kind !== kind\n                || codecCapability.name === 'rtx') {\n                continue; // eslint-disable-line no-continue\n            }\n\n            codecPayloadType = codecCapability.preferredPayloadType;\n            codecs.push({\n                clockRate: codecCapability.clockRate,\n                maxptime: codecCapability.maxptime,\n                mimeType: codecCapability.mimeType,\n                name: codecCapability.name,\n                numChannels: codecCapability.numChannels,\n                parameters: codecCapability.parameters,\n                payloadType: codecCapability.preferredPayloadType,\n                ptime: codecCapability.ptime,\n                rtcpFeedback: codecCapability.rtcpFeedback\n            });\n\n            break;\n        }\n\n        if (rtxSsrc) {\n            for (const codecCapability of localCapabilities.codecs) {\n                if (codecCapability.kind !== kind\n                    || codecCapability.name !== 'rtx') {\n                    continue; // eslint-disable-line no-continue\n                }\n\n                codecs.push({\n                    clockRate: codecCapability.clockRate,\n                    mimeType: codecCapability.mimeType,\n                    name: 'rtx',\n                    parameters: codecCapability.parameters,\n                    payloadType: codecCapability.preferredPayloadType,\n                    rtcpFeedback: codecCapability.rtcpFeedback\n                });\n\n                break;\n            }\n        }\n\n        parameters.codecs = codecs;\n\n        const encoding = {\n            active: true,\n            codecPayloadType,\n            ssrc\n        };\n\n        if (rtxSsrc) {\n            encoding.rtx = {\n                ssrc: rtxSsrc\n            };\n        }\n\n        parameters.encodings.push(encoding);\n\n        for (const extension of localCapabilities.headerExtensions) {\n            if (extension.kind !== kind) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            parameters.headerExtensions.push({\n                encrypt: extension.preferredEncrypt,\n                id: extension.preferredId,\n                uri: extension.uri\n            });\n        }\n\n        return parameters;\n    }\n\n    /**\n     * Promise based implementation for getStats().\n     * @return {Promise} RTCStats dictionary.\n     * @private\n     */\n    _getStats(selector) { // eslint-disable-line no-unused-vars\n        if (this._closed) {\n            return Promise.reject(\n                new InvalidStateError('RTCPeerConnection closed'));\n        }\n\n        const iceGatherer = this._iceGatherer;\n        const iceTransport = this._iceTransport;\n        const rtpSenders = [];\n        const rtpReceivers = [];\n        const promises = [];\n\n        // Get RtpSenders.\n        for (const info of this._localTrackInfos.values()) {\n            const { rtpSender, sending } = info;\n\n            if (sending) {\n                rtpSenders.push(rtpSender);\n            }\n        }\n\n        // Get RtpReceivers.\n        for (const info of this._remoteTrackInfos.values()) {\n            const { rtpReceiver } = info;\n\n            rtpReceivers.push(rtpReceiver);\n        }\n\n        // Collect all the stats.\n\n        if (iceGatherer) {\n            promises.push(\n                iceGatherer.getStats()\n                    .catch(() => null));\n        }\n\n        if (iceTransport) {\n            promises.push(\n                iceTransport.getStats()\n                    .catch(() => null));\n\n            // NOTE: Proprietary stuff in Edge.\n            if (typeof iceTransport.msGetStats === 'function') {\n                promises.push(\n                    iceTransport.msGetStats()\n                        .catch(() => null));\n            }\n        }\n\n        for (const rtpSender of rtpSenders) {\n            const isAudio = rtpSender.track.kind === 'audio';\n\n            promises.push(rtpSender.getStats()\n                .then(data => {\n                    // Remove audioLevel from type=\"track\" stats if this is\n                    // not an audio sender.\n                    if (!isAudio) {\n                        for (const key of Object.keys(data)) {\n                            const stat = data[key];\n\n                            if (stat.type === 'track') {\n                                delete stat.audioLevel;\n                            }\n                        }\n                    }\n\n                    return data;\n                })\n                .catch(() => null));\n        }\n\n        for (const rtpReceiver of rtpReceivers) {\n            const isAudio = rtpReceiver.track.kind === 'audio';\n\n            promises.push(rtpReceiver.getStats()\n                .then(data => {\n                    // Remove audioLevel from type=\"track\" stats if this is\n                    // not an audio receiver.\n                    if (!isAudio) {\n                        for (const key of Object.keys(data)) {\n                            const stat = data[key];\n\n                            if (stat.type === 'track') {\n                                delete stat.audioLevel;\n                            }\n                        }\n                    }\n\n                    return data;\n                })\n                .catch(() => null));\n        }\n\n        return Promise.all(promises)\n            .then(datas => {\n                const stats = {};\n\n                for (const data of datas) {\n                    if (!data) {\n                        continue; // eslint-disable-line no-continue\n                    }\n\n                    for (const key of Object.keys(data)) {\n                        stats[key] = data[key];\n                    }\n                }\n\n                return stats;\n            });\n    }\n\n    /**\n     * Handles the local initial answer.\n     * @return {Promise}\n     * @private\n     */\n    _handleLocalInitialAnswer(desc) {\n        logger.debug('_handleLocalInitialAnswer(), desc:', desc);\n\n        const sdpObject = desc.sdpObject;\n\n        // Update local capabilities as decided by the app.\n        this._localCapabilities = utils.extractCapabilities(sdpObject);\n\n        logger.debug('local capabilities:', this._localCapabilities);\n\n        // NOTE: We assume that the answer given by the app does not change\n        // SSRC or PT values. If so, things won't work as expected.\n    }\n\n    /**\n     * Handles a local re-answer.\n     * @return {Promise}\n     * @private\n     */\n    _handleLocalReAnswer(desc) {\n        logger.debug('_handleLocalReAnswer(), desc:', desc);\n\n        const sdpObject = desc.sdpObject;\n\n        // Update local capabilities as decided by the app.\n        this._localCapabilities = utils.extractCapabilities(sdpObject);\n\n        logger.debug('local capabilities:', this._localCapabilities);\n\n        // NOTE: We assume that the answer given by the app does not change\n        // SSRC or PT values. If so, things won't work as expected.\n    }\n\n    /**\n     * Handles the remote initial offer.\n     * @return {Promise}\n     * @private\n     */\n    _handleRemoteInitialOffer(desc) {\n        logger.debug('_handleRemoteInitialOffer(), desc:', desc);\n\n        const sdpObject = desc.sdpObject;\n\n        // Set MID values.\n        this._mids = utils.extractMids(sdpObject);\n\n        // Get remote RTP capabilities.\n        const remoteCapabilities = utils.extractCapabilities(sdpObject);\n\n        logger.debug('remote capabilities:', remoteCapabilities);\n\n        // Get local RTP capabilities (filter them with remote capabilities).\n        this._localCapabilities\n            = utils.getLocalCapabilities(remoteCapabilities);\n\n        // Start ICE and DTLS.\n        this._startIceAndDtls(desc);\n    }\n\n    /**\n     * Handles a remote re-offer.\n     * @return {Promise}\n     * @private\n     */\n    _handleRemoteReOffer(desc) {\n        logger.debug('_handleRemoteReOffer(), desc:', desc);\n\n        const sdpObject = desc.sdpObject;\n\n        // Update MID values (just in case).\n        this._mids = utils.extractMids(sdpObject);\n\n        // Get remote RTP capabilities (filter them with remote capabilities).\n        const remoteCapabilities = utils.extractCapabilities(sdpObject);\n\n        logger.debug('remote capabilities:', remoteCapabilities);\n\n        // Update local RTP capabilities (just in case).\n        this._localCapabilities\n            = utils.getLocalCapabilities(remoteCapabilities);\n    }\n\n    /**\n     * Start receiving remote media.\n     */\n    _receiveMedia() {\n        logger.debug('_receiveMedia()');\n\n        const currentRemoteSsrcs = new Set(this._remoteTrackInfos.keys());\n        const newRemoteTrackInfos\n            = utils.extractTrackInfos(this._remoteDescription.sdpObject);\n\n        // Map of new remote MediaStream indexed by MediaStream.jitsiRemoteId.\n        const addedRemoteStreams = new Map();\n\n        // Map of remote MediaStream indexed by added MediaStreamTrack.\n        // NOTE: Just filled for already existing streams.\n        const addedRemoteTracks = new Map();\n\n        // Map of remote MediaStream indexed by removed MediaStreamTrack.\n        const removedRemoteTracks = new Map();\n\n        logger.debug(\n            '_receiveMedia() remote track infos:', newRemoteTrackInfos);\n\n        // Check new tracks.\n        for (const [ ssrc, info ] of newRemoteTrackInfos) {\n            // If already handled, ignore it.\n            if (currentRemoteSsrcs.has(ssrc)) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            logger.debug(`_receiveMedia() new remote track, ssrc:${ssrc}`);\n\n            // Otherwise append to the map.\n            this._remoteTrackInfos.set(ssrc, info);\n\n            const kind = info.kind;\n            const rtxSsrc = info.rtxSsrc;\n            const streamRemoteId = info.streamId;\n            const trackRemoteId = info.trackId;\n            const cname = info.cname;\n            const isNewStream = !this._remoteStreams.has(streamRemoteId);\n            let stream;\n\n            if (isNewStream) {\n                logger.debug(\n                    `_receiveMedia() new remote stream, id:${streamRemoteId}`);\n\n                // Create a new MediaStream.\n                stream = new MediaStream();\n\n                // Set custom property with the remote id.\n                stream.jitsiRemoteId = streamRemoteId;\n\n                addedRemoteStreams.set(streamRemoteId, stream);\n                this._remoteStreams.set(streamRemoteId, stream);\n            } else {\n                stream = this._remoteStreams.get(streamRemoteId);\n            }\n\n            const rtpReceiver = new RTCRtpReceiver(this._dtlsTransport, kind);\n            const parameters = this._getParametersForRtpReceiver(kind, {\n                ssrc,\n                rtxSsrc,\n                cname\n            });\n\n            // Store the track into the info object.\n            // NOTE: This should not be needed, but Edge has a bug:\n            //   https://developer.microsoft.com/en-us/microsoft-edge/platform/\n            //   issues/12399497/\n            info.track = rtpReceiver.track;\n\n            // Set error handler.\n            rtpReceiver.onerror = ev => {\n                logger.error('rtpReceiver \"error\" event, event:');\n                logger.error(ev);\n            };\n\n            // Fill the info with the stream and rtpReceiver.\n            info.stream = stream;\n            info.rtpReceiver = rtpReceiver;\n\n            logger.debug(\n                'calling rtpReceiver.receive(), parameters:', parameters);\n\n            // Start receiving media.\n            try {\n                rtpReceiver.receive(parameters);\n\n                // Get the associated MediaStreamTrack.\n                const track = info.track;\n\n                // Set custom property with the remote id.\n                track.jitsiRemoteId = trackRemoteId;\n\n                // Add the track to the stream.\n                stream.addTrack(track);\n\n                if (!addedRemoteStreams.has(streamRemoteId)) {\n                    addedRemoteTracks.set(track, stream);\n                }\n            } catch (error) {\n                logger.error(`rtpReceiver.receive() failed:${error.message}`);\n                logger.error(error);\n            }\n        }\n\n        // Check track removal.\n        for (const ssrc of currentRemoteSsrcs) {\n            if (newRemoteTrackInfos.has(ssrc)) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            logger.debug(`_receiveMedia() remote track removed, ssrc:${ssrc}`);\n\n            const info = this._remoteTrackInfos.get(ssrc);\n            const stream = info.stream;\n            const track = info.track;\n            const rtpReceiver = info.rtpReceiver;\n\n            try {\n                rtpReceiver.stop();\n            } catch (error) {\n                logger.warn(`rtpReceiver.stop() failed:${error}`);\n            }\n\n            removedRemoteTracks.set(track, stream);\n            stream.removeTrack(track);\n            this._remoteTrackInfos.delete(ssrc);\n        }\n\n        // Emit MediaStream 'addtrack' for new tracks in already existing\n        // streams.\n        for (const [ track, stream ] of addedRemoteTracks) {\n            const event = new Event('addtrack');\n\n            event.track = track;\n            stream.dispatchEvent(event);\n        }\n\n        // Emit MediaStream 'removetrack' for removed tracks.\n        for (const [ track, stream ] of removedRemoteTracks) {\n            const event = new Event('removetrack');\n\n            event.track = track;\n            stream.dispatchEvent(event);\n        }\n\n        // Emit RTCPeerConnection 'addstream' for new remote streams.\n        for (const stream of addedRemoteStreams.values()) {\n            // Check whether at least a track was added, otherwise ignore it.\n            if (stream.getTracks().length === 0) {\n                logger.warn(\n                    'ignoring new stream for which no track could be added');\n\n                addedRemoteStreams.delete(stream.jitsiRemoteId);\n                this._remoteStreams.delete(stream.jitsiRemoteId);\n            } else {\n                this._emitAddStream(stream);\n            }\n        }\n\n        // Emit RTCPeerConnection 'removestream' for removed remote streams.\n        for (const [ streamRemoteId, stream ] of this._remoteStreams) {\n            if (stream.getTracks().length > 0) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            this._remoteStreams.delete(streamRemoteId);\n            this._emitRemoveStream(stream);\n        }\n    }\n\n    /**\n     * Implementation for removeStream().\n     * @private\n     */\n    _removeStream(stream) {\n        if (this._closed) {\n            throw new InvalidStateError('RTCPeerConnection closed');\n        }\n\n        // Stop and remove the RTCRtpSender associated to each track.\n        for (const track of stream.getTracks()) {\n            // Ignore if track not present.\n            if (!this._localTrackInfos.has(track.id)) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            const rtpSender = this._localTrackInfos.get(track.id).rtpSender;\n\n            try {\n                rtpSender.stop();\n            } catch (error) {\n                logger.warn(`rtpSender.stop() failed:${error}`);\n            }\n\n            // Remove from the map.\n            this._localTrackInfos.delete(track.id);\n        }\n\n        // It may need to renegotiate.\n        this._emitNegotiationNeeded();\n    }\n\n    /**\n     * Start sending our media to the remote.\n     */\n    _sendMedia() {\n        logger.debug('_sendMedia()');\n\n        for (const info of this._localTrackInfos.values()) {\n            // Ignore if already sending.\n            if (info.sending) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            const rtpSender = info.rtpSender;\n            const ssrc = info.ssrc;\n            const rtxSsrc = info.rtxSsrc;\n            const track = rtpSender.track;\n            const kind = track.kind;\n\n            const parameters = this._getParametersForRtpSender(kind, {\n                ssrc,\n                rtxSsrc\n            });\n\n            logger.debug(\n                'calling rtpSender.send(), parameters:', parameters);\n\n            // Start sending media.\n            try {\n                rtpSender.send(parameters);\n\n                // Update sending field.\n                info.sending = true;\n            } catch (error) {\n                logger.error(`rtpSender.send() failed:${error.message}`);\n                logger.error(error);\n            }\n        }\n    }\n\n    /**\n     * Creates the RTCDtlsTransport.\n     * @private\n     */\n    _setDtlsTransport(iceTransport) {\n        const dtlsTransport = new RTCDtlsTransport(iceTransport);\n\n        // NOTE: Not yet implemented by Edge.\n        dtlsTransport.onstatechange = () => {\n            logger.debug(\n                'dtlsTransport \"statechange\" event, '\n                + `state:${dtlsTransport.state}`);\n\n            this._emitConnectionStateChange();\n        };\n\n        // NOTE: Not standard, but implemented by Edge.\n        dtlsTransport.ondtlsstatechange = () => {\n            logger.debug(\n                'dtlsTransport \"dtlsstatechange\" event, '\n                + `state:${dtlsTransport.state}`);\n\n            this._emitConnectionStateChange();\n        };\n\n        dtlsTransport.onerror = ev => {\n            let message;\n\n            if (ev.message) {\n                message = ev.message;\n            } else if (ev.error) {\n                message = ev.error.message;\n            }\n\n            logger.error(`dtlsTransport \"error\" event, message:${message}`);\n\n            // TODO: Edge does not set state to 'failed' on error. We may\n            // hack it.\n\n            this._emitConnectionStateChange();\n        };\n\n        this._dtlsTransport = dtlsTransport;\n    }\n\n    /**\n     * Creates the RTCIceGatherer.\n     * @private\n     */\n    _setIceGatherer(pcConfig) {\n        const iceGatherOptions = {\n            gatherPolicy: pcConfig.iceTransportPolicy || 'all',\n            iceServers: pcConfig.iceServers || []\n        };\n        const iceGatherer = new RTCIceGatherer(iceGatherOptions);\n\n        // NOTE: Not yet implemented by Edge.\n        iceGatherer.onstatechange = () => {\n            logger.debug(\n                `iceGatherer \"statechange\" event, state:${iceGatherer.state}`);\n\n            this._updateAndEmitIceGatheringStateChange(iceGatherer.state);\n        };\n\n        iceGatherer.onlocalcandidate = ev => {\n            let candidate = ev.candidate;\n\n            // NOTE: Not yet implemented by Edge.\n            const complete = ev.complete;\n\n            logger.debug(\n                'iceGatherer \"localcandidate\" event, candidate:', candidate);\n\n            // NOTE: Instead of null candidate or complete:true, current Edge\n            // signals end of gathering with an empty candidate object.\n            if (complete\n                || !candidate\n                || Object.keys(candidate).length === 0) {\n\n                candidate = null;\n\n                this._updateAndEmitIceGatheringStateChange(\n                    RTCIceGatheringState.complete);\n                this._emitIceCandidate(null);\n            } else {\n                this._emitIceCandidate(candidate);\n            }\n        };\n\n        iceGatherer.onerror = ev => {\n            const errorCode = ev.errorCode;\n            const errorText = ev.errorText;\n\n            logger.error(\n                `iceGatherer \"error\" event, errorCode:${errorCode}, `\n                + `errorText:${errorText}`);\n        };\n\n        // NOTE: Not yet implemented by Edge, which starts gathering\n        // automatically.\n        try {\n            iceGatherer.gather();\n        } catch (error) {\n            logger.warn(`iceGatherer.gather() failed:${error}`);\n        }\n\n        this._iceGatherer = iceGatherer;\n    }\n\n    /**\n     * Creates the RTCIceTransport.\n     * @private\n     */\n    _setIceTransport(iceGatherer) {\n        const iceTransport = new RTCIceTransport(iceGatherer);\n\n        // NOTE: Not yet implemented by Edge.\n        iceTransport.onstatechange = () => {\n            logger.debug(\n                'iceTransport \"statechange\" event, '\n                + `state:${iceTransport.state}`);\n\n            this._emitIceConnectionStateChange();\n        };\n\n        // NOTE: Not standard, but implemented by Edge.\n        iceTransport.onicestatechange = () => {\n            logger.debug(\n                'iceTransport \"icestatechange\" event, '\n                + `state:${iceTransport.state}`);\n\n            if (iceTransport.state === 'completed') {\n                logger.debug(\n                    'nominated candidate pair:',\n                    iceTransport.getNominatedCandidatePair());\n            }\n\n            this._emitIceConnectionStateChange();\n        };\n\n        iceTransport.oncandidatepairchange = ev => {\n            logger.debug(\n                'iceTransport \"candidatepairchange\" event, '\n                + `pair:${ev.pair}`);\n        };\n\n        this._iceTransport = iceTransport;\n    }\n\n    /**\n     * Promise based implementation for setLocalDescription().\n     * @returns {Promise}\n     * @private\n     */\n    _setLocalDescription(desc) {\n        if (this._closed) {\n            return Promise.reject(\n                new InvalidStateError('RTCPeerConnection closed'));\n        }\n\n        let localDescription;\n\n        try {\n            localDescription = new RTCSessionDescription(desc);\n        } catch (error) {\n            return Promise.reject(new TypeError(\n                `invalid RTCSessionDescriptionInit: ${error}`));\n        }\n\n        switch (desc.type) {\n        case 'offer': {\n            if (this.signalingState !== RTCSignalingState.stable) {\n                return Promise.reject(new InvalidStateError(\n                    `invalid signalingState \"${this.signalingState}\"`));\n            }\n\n            // NOTE: P2P mode not yet supported, so createOffer() should never\n            // has been called, neither setLocalDescription() with an offer.\n            return Promise.reject(new TypeError(\n                'setLocalDescription() with type \"offer\" not supported'));\n        }\n        case 'answer': {\n            if (this.signalingState !== RTCSignalingState.haveRemoteOffer) {\n                return Promise.reject(new InvalidStateError(\n                    `invalid signalingState \"${this.signalingState}\"`));\n            }\n\n            const isLocalInitialAnswer = Boolean(!this._localDescription);\n\n            return Promise.resolve()\n                .then(() => {\n                    // Different handling for initial answer and re-answer.\n                    if (isLocalInitialAnswer) {\n                        return this._handleLocalInitialAnswer(localDescription);\n                    } else { // eslint-disable-line no-else-return\n                        return this._handleLocalReAnswer(localDescription);\n                    }\n                })\n                .then(() => {\n                    logger.debug('setLocalDescription() succeed');\n\n                    // Update local description.\n                    this._localDescription = localDescription;\n\n                    // Update signaling state.\n                    this._updateAndEmitSignalingStateChange(\n                        RTCSignalingState.stable);\n\n                    // If initial answer, emit buffered ICE candidates.\n                    if (isLocalInitialAnswer) {\n                        this._emitBufferedIceCandidates();\n                    }\n\n                    // Send our RTP.\n                    this._sendMedia();\n\n                    // Receive remote RTP.\n                    this._receiveMedia();\n                })\n                .catch(error => {\n                    logger.error(\n                        `setLocalDescription() failed: ${error.message}`);\n                    logger.error(error);\n\n                    throw error;\n                });\n        }\n        default:\n            return Promise.reject(new TypeError(\n                `unsupported description.type \"${desc.type}\"`));\n        }\n    }\n\n    /**\n     * Promise based implementation for setRemoteDescription().\n     * @returns {Promise}\n     * @private\n     */\n    _setRemoteDescription(desc) {\n        if (this._closed) {\n            return Promise.reject(\n                new InvalidStateError('RTCPeerConnection closed'));\n        }\n\n        let remoteDescription;\n\n        try {\n            remoteDescription = new RTCSessionDescription(desc);\n        } catch (error) {\n            return Promise.reject(new TypeError(\n                `invalid RTCSessionDescriptionInit: ${error}`));\n        }\n\n        switch (desc.type) {\n        case 'offer': {\n            if (this.signalingState !== RTCSignalingState.stable) {\n                return Promise.reject(new InvalidStateError(\n                    `invalid signalingState \"${this.signalingState}\"`));\n            }\n\n            const isRemoteInitialOffer = Boolean(!this._remoteDescription);\n\n            return Promise.resolve()\n                .then(() => {\n                    // Different handling for initial answer and re-answer.\n                    if (isRemoteInitialOffer) {\n                        return this._handleRemoteInitialOffer(\n                            remoteDescription);\n                    } else { // eslint-disable-line no-else-return\n                        return this._handleRemoteReOffer(remoteDescription);\n                    }\n                })\n                .then(() => {\n                    logger.debug('setRemoteDescription() succeed');\n\n                    // Update remote description.\n                    this._remoteDescription = remoteDescription;\n\n                    // Update signaling state.\n                    this._updateAndEmitSignalingStateChange(\n                        RTCSignalingState.haveRemoteOffer);\n                })\n                .catch(error => {\n                    logger.error(`setRemoteDescription() failed: ${error}`);\n\n                    throw error;\n                });\n        }\n        case 'answer': {\n            if (this.signalingState !== RTCSignalingState.haveLocalOffer) {\n                return Promise.reject(new InvalidStateError(\n                    `invalid signalingState \"${this.signalingState}\"`));\n            }\n\n            // NOTE: P2P mode not yet supported, so createOffer() should never\n            // has been called, neither setRemoteDescription() with an answer.\n            return Promise.reject(new TypeError(\n                'setRemoteDescription() with type \"answer\" not supported'));\n        }\n        default:\n            return Promise.reject(new TypeError(\n                `unsupported description.type \"${desc.type}\"`));\n        }\n    }\n\n    /**\n     * Start ICE and DTLS connection procedures.\n     * @param {RTCSessionDescription} desc - Remote description.\n     */\n    _startIceAndDtls(desc) {\n        const sdpObject = desc.sdpObject;\n        const remoteIceParameters\n            = utils.extractIceParameters(sdpObject);\n        const remoteIceCandidates\n            = utils.extractIceCandidates(sdpObject);\n        const remoteDtlsParameters\n            = utils.extractDtlsParameters(sdpObject);\n\n        // Start the RTCIceTransport.\n        switch (desc.type) {\n        case 'offer':\n            this._iceTransport.start(\n                this._iceGatherer, remoteIceParameters, 'controlled');\n            break;\n        case 'answer':\n            this._iceTransport.start(\n                this._iceGatherer, remoteIceParameters, 'controlling');\n            break;\n        }\n\n        // Add remote ICE candidates.\n        // NOTE: Remove candidates that Edge doesn't like.\n        for (const candidate of remoteIceCandidates) {\n            if (candidate.port === 0 || candidate.port === 9) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            this._iceTransport.addRemoteCandidate(candidate);\n        }\n\n        // Also signal a 'complete' candidate as per spec.\n        // NOTE: It should be {complete: true} but Edge prefers {}.\n        // NOTE: We know that addCandidate() is never used so we need to signal\n        // end of candidates (otherwise the RTCIceTransport never enters the\n        // 'completed' state).\n        this._iceTransport.addRemoteCandidate({});\n\n        // Set desired remote DTLS role (as we receive the offer).\n        switch (desc.type) {\n        case 'offer':\n            remoteDtlsParameters.role = 'server';\n            break;\n        case 'answer':\n            remoteDtlsParameters.role = 'client';\n            break;\n        }\n\n        // Start RTCDtlsTransport.\n        this._dtlsTransport.start(remoteDtlsParameters);\n    }\n\n    /**\n     * May update iceGatheringState and emit 'icegatheringstatechange' event.\n     * @private\n     */\n    _updateAndEmitIceGatheringStateChange(state) {\n        if (this._closed || state === this.iceGatheringState) {\n            return;\n        }\n\n        this._iceGatheringState = state;\n\n        logger.debug(\n            'emitting \"icegatheringstatechange\", iceGatheringState:',\n            this.iceGatheringState);\n\n        const event = new yaeti.Event('icegatheringstatechange');\n\n        this.dispatchEvent(event);\n    }\n\n    /**\n     * May update signalingState and emit 'signalingstatechange' event.\n     * @private\n     */\n    _updateAndEmitSignalingStateChange(state) {\n        if (state === this.signalingState) {\n            return;\n        }\n\n        this._signalingState = state;\n\n        logger.debug(\n            'emitting \"signalingstatechange\", signalingState:',\n            this.signalingState);\n\n        const event = new yaeti.Event('signalingstatechange');\n\n        this.dispatchEvent(event);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/ortc/RTCPeerConnection.js","module.exports =\n{\n\tEventTarget : require('./lib/EventTarget'),\n\tEvent       : require('./lib/Event')\n};\n\n\n\n// WEBPACK FOOTER //\n// ../yaeti/index.js","function yaetiEventTarget()\n{\n\tthis._listeners = {};\n}\n\nObject.defineProperties(yaetiEventTarget.prototype,\n\t{\n\t\tlisteners:\n\t\t{\n\t\t\tget: function()\n\t\t\t{\n\t\t\t\treturn this._listeners;\n\t\t\t}\n\t\t}\n\t});\n\nyaetiEventTarget.prototype.addEventListener = function(type, newListener)\n{\n\tvar listenersType;\n\tvar i;\n\tvar listener;\n\n\tif (!type || !newListener)\n\t\treturn;\n\n\tlistenersType = this._listeners[type];\n\n\tif (listenersType === undefined)\n\t\tthis._listeners[type] = listenersType = [];\n\n\tfor (i = 0; !!(listener = listenersType[i]); i++)\n\t{\n\t\tif (listener === newListener)\n\t\t\treturn;\n\t}\n\n\tlistenersType.push(newListener);\n};\n\nyaetiEventTarget.prototype.removeEventListener = function(type, oldListener)\n{\n\tvar listenersType;\n\tvar i;\n\tvar listener;\n\n\tif (!type || !oldListener)\n\t\treturn;\n\n\tlistenersType = this._listeners[type];\n\n\tif (listenersType === undefined)\n\t\treturn;\n\n\tfor (i = 0; !!(listener = listenersType[i]); i++)\n\t{\n\t\tif (listener === oldListener)\n\t\t{\n\t\t\tlistenersType.splice(i, 1);\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (listenersType.length === 0)\n\t\tdelete this._listeners[type];\n};\n\nyaetiEventTarget.prototype.dispatchEvent = function(event)\n{\n\tvar type;\n\tvar listenersType;\n\tvar dummyListener;\n\tvar stopImmediatePropagation = false;\n\tvar i;\n\tvar listener;\n\n\tif (!event || typeof event.type !== 'string')\n\t\tthrow new Error('`event` must have a valid `type` property');\n\n\t// Do some stuff to emulate DOM Event behavior (just if this is not a\n\t// DOM Event object).\n\tif (event._yaeti)\n\t{\n\t\tevent.target = this;\n\t\tevent.cancelable = true;\n\t}\n\n\t// Attempt to override the stopImmediatePropagation() method.\n\ttry\n\t{\n\t\tevent.stopImmediatePropagation = function()\n\t\t{\n\t\t\tstopImmediatePropagation = true;\n\t\t};\n\t}\n\tcatch (error)\n\t{}\n\n\ttype = event.type;\n\tlistenersType = (this._listeners[type] || []);\n\n\tdummyListener = this['on' + type];\n\n\tif (typeof dummyListener === 'function')\n\t{\n\t\ttry\n\t\t{\n\t\t\tdummyListener.call(this, event);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error(error);\n\t\t}\n\t}\n\n\tfor (i = 0; !!(listener = listenersType[i]); i++)\n\t{\n\t\tif (stopImmediatePropagation)\n\t\t\tbreak;\n\n\t\ttry\n\t\t{\n\t\t\tlistener.call(this, event);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error(error);\n\t\t}\n\t}\n\n\treturn !event.defaultPrevented;\n};\n\nmodule.exports = yaetiEventTarget;\n\n\n\n// WEBPACK FOOTER //\n// ../yaeti/lib/EventTarget.js","/**\n * In browsers export the native Event interface.\n */\n\nmodule.exports = global.Event;\n\n\n\n// WEBPACK FOOTER //\n// ../yaeti/lib/Event.browser.js","import sdpTransform from 'sdp-transform';\n\n/**\n * RTCSessionDescription implementation.\n */\nexport default class RTCSessionDescription {\n    /**\n     * RTCSessionDescription constructor.\n     * @param {Object} [data]\n     * @param {String} [data.type] - 'offer' / 'answer'.\n     * @param {String} [data.sdp] - SDP string.\n     * @param {Object} [data._sdpObject] - SDP object generated by the\n     * sdp-transform library.\n     */\n    constructor(data) {\n        // @type {String}\n        this._sdp = null;\n\n        // @type {Object}\n        this._sdpObject = null;\n\n        // @type {String}\n        this._type = null;\n\n        switch (data.type) {\n        case 'offer':\n            break;\n        case 'answer':\n            break;\n        default:\n            throw new TypeError(`invalid type \"${data.type}\"`);\n        }\n\n        this._type = data.type;\n\n        if (typeof data.sdp === 'string') {\n            this._sdp = data.sdp;\n            try {\n                this._sdpObject = sdpTransform.parse(data.sdp);\n            } catch (error) {\n                throw new Error(`invalid sdp: ${error}`);\n            }\n        } else if (typeof data._sdpObject === 'object') {\n            this._sdpObject = data._sdpObject;\n            try {\n                this._sdp = sdpTransform.write(data._sdpObject);\n            } catch (error) {\n                throw new Error(`invalid sdp object: ${error}`);\n            }\n        } else {\n            throw new TypeError('invalid sdp or _sdpObject');\n        }\n    }\n\n    /**\n     * Get sdp field.\n     * @return {String}\n     */\n    get sdp() {\n        return this._sdp;\n    }\n\n    /**\n     * Set sdp field.\n     * NOTE: This is not allowed per spec, but lib-jitsi-meet uses it.\n     * @param {String} sdp\n     */\n    set sdp(sdp) {\n        try {\n            this._sdpObject = sdpTransform.parse(sdp);\n        } catch (error) {\n            throw new Error(`invalid sdp: ${error}`);\n        }\n\n        this._sdp = sdp;\n    }\n\n    /**\n     * Gets the internal sdp object.\n     * @return {Object}\n     * @private\n     */\n    get sdpObject() {\n        return this._sdpObject;\n    }\n\n    /**\n     * Get type field.\n     * @return {String}\n     */\n    get type() {\n        return this._type;\n    }\n\n    /**\n     * Returns an object with type and sdp fields.\n     * @return {Object}\n     */\n    toJSON() {\n        return {\n            sdp: this._sdp,\n            type: this._type\n        };\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/ortc/RTCSessionDescription.js","var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = require('./grammar');\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar paramReducer = function (acc, expr) {\n  var s = expr.split(/=(.+)/, 2);\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  }\n  return acc;\n};\n\nexports.parseParams = function (str) {\n  return str.split(/\\;\\s?/).reduce(paramReducer, {});\n};\n\n// For backward compatibility - alias will be removed in 3.0.0\nexports.parseFmtpConfig = exports.parseParams;\n\nexports.parsePayloads = function (str) {\n  return str.split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\nexports.parseImageAttributes = function (str) {\n  return str.split(' ').map(function (item) {\n    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});\n  });\n};\n\nexports.parseSimulcastStreamList = function (str) {\n  return str.split(';').map(function (stream) {\n    return stream.split(',').map(function (format) {\n      var scid, paused = false;\n\n      if (format[0] !== '~') {\n        scid = toIntIfInt(format);\n      } else {\n        scid = toIntIfInt(format.substring(1, format.length));\n        paused = true;\n      }\n\n      return {\n        scid: scid,\n        paused: paused\n      };\n    });\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ../sdp-transform/lib/parser.js","var grammar = require('./grammar');\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n    case '%%':\n      return '%';\n    case '%s':\n      return String(arg);\n    case '%d':\n      return Number(arg);\n    case '%v':\n      return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // 'v=0' must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = ' '; // 's= ' must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = '';\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n\n\n\n// WEBPACK FOOTER //\n// ../sdp-transform/lib/writer.js","/* global RTCRtpReceiver */\n\nimport sdpTransform from 'sdp-transform';\n\n/**\n * Extract RTP capabilities from remote description.\n * @param {Object} sdpObject - Remote SDP object generated by sdp-transform.\n * @return {RTCRtpCapabilities}\n */\nexport function extractCapabilities(sdpObject) {\n    // Map of RtpCodecParameters indexed by payload type.\n    const codecsMap = new Map();\n\n    // Array of RtpHeaderExtensions.\n    const headerExtensions = [];\n\n    for (const m of sdpObject.media) {\n        // Media kind.\n        const kind = m.type;\n\n        if (kind !== 'audio' && kind !== 'video') {\n            continue; // eslint-disable-line no-continue\n        }\n\n        // Get codecs.\n        for (const rtp of m.rtp) {\n            const codec = {\n                clockRate: rtp.rate,\n                kind,\n                mimeType: `${kind}/${rtp.codec}`,\n                name: rtp.codec,\n                numChannels: rtp.encoding || 1,\n                parameters: {},\n                preferredPayloadType: rtp.payload,\n                rtcpFeedback: []\n            };\n\n            codecsMap.set(codec.preferredPayloadType, codec);\n        }\n\n        // Get codec parameters.\n        for (const fmtp of m.fmtp || []) {\n            const parameters = sdpTransform.parseFmtpConfig(fmtp.config);\n            const codec = codecsMap.get(fmtp.payload);\n\n            if (!codec) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            codec.parameters = parameters;\n        }\n\n        // Get RTCP feedback for each codec.\n        for (const fb of m.rtcpFb || []) {\n            const codec = codecsMap.get(fb.payload);\n\n            if (!codec) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            codec.rtcpFeedback.push({\n                parameter: fb.subtype || '',\n                type: fb.type\n            });\n        }\n\n        // Get RTP header extensions.\n        for (const ext of m.ext || []) {\n            const preferredId = ext.value;\n            const uri = ext.uri;\n            const headerExtension = {\n                kind,\n                uri,\n                preferredId\n            };\n\n            // Check if already present.\n            const duplicated = headerExtensions.find(savedHeaderExtension =>\n                headerExtension.kind === savedHeaderExtension.kind\n                    && headerExtension.uri === savedHeaderExtension.uri\n            );\n\n            if (!duplicated) {\n                headerExtensions.push(headerExtension);\n            }\n        }\n    }\n\n    return {\n        codecs: Array.from(codecsMap.values()),\n        fecMechanisms: [], // TODO\n        headerExtensions\n    };\n}\n\n/**\n * Extract DTLS parameters from remote description.\n * @param {Object} sdpObject - Remote SDP object generated by sdp-transform.\n * @return {RTCDtlsParameters}\n */\nexport function extractDtlsParameters(sdpObject) {\n    const media = getFirstActiveMediaSection(sdpObject);\n    const fingerprint = media.fingerprint || sdpObject.fingerprint;\n    let role;\n\n    switch (media.setup) {\n    case 'active':\n        role = 'client';\n        break;\n    case 'passive':\n        role = 'server';\n        break;\n    case 'actpass':\n        role = 'auto';\n        break;\n    }\n\n    return {\n        role,\n        fingerprints: [\n            {\n                algorithm: fingerprint.type,\n                value: fingerprint.hash\n            }\n        ]\n    };\n}\n\n/**\n * Extract ICE candidates from remote description.\n * NOTE: This implementation assumes a single BUNDLEd transport and rtcp-mux.\n * @param {Object} sdpObject - Remote SDP object generated by sdp-transform.\n * @return {sequence<RTCIceCandidate>}\n */\nexport function extractIceCandidates(sdpObject) {\n    const media = getFirstActiveMediaSection(sdpObject);\n    const candidates = [];\n\n    for (const c of media.candidates) {\n        // Ignore RTCP candidates (we assume rtcp-mux).\n        if (c.component !== 1) {\n            continue; // eslint-disable-line no-continue\n        }\n\n        const candidate = {\n            foundation: c.foundation,\n            ip: c.ip,\n            port: c.port,\n            priority: c.priority,\n            protocol: c.transport.toLowerCase(),\n            type: c.type\n        };\n\n        candidates.push(candidate);\n    }\n\n    return candidates;\n}\n\n/**\n * Extract ICE parameters from remote description.\n * NOTE: This implementation assumes a single BUNDLEd transport.\n * @param {Object} sdpObject - Remote SDP object generated by sdp-transform.\n * @return {RTCIceParameters}\n */\nexport function extractIceParameters(sdpObject) {\n    const media = getFirstActiveMediaSection(sdpObject);\n    const usernameFragment = media.iceUfrag;\n    const password = media.icePwd;\n    const icelite = sdpObject.icelite === 'ice-lite';\n\n    return {\n        icelite,\n        password,\n        usernameFragment\n    };\n}\n\n/**\n * Extract MID values from remote description.\n * @param {Object} sdpObject - Remote SDP object generated by sdp-transform.\n * @return {map<String, String>} Ordered Map with MID as key and kind as value.\n */\nexport function extractMids(sdpObject) {\n    const midToKind = new Map();\n\n    // Ignore disabled media sections.\n    for (const m of sdpObject.media) {\n        midToKind.set(m.mid, m.type);\n    }\n\n    return midToKind;\n}\n\n/**\n * Extract tracks information.\n * @param {Object} sdpObject - Remote SDP object generated by sdp-transform.\n * @return {Map}\n */\nexport function extractTrackInfos(sdpObject) {\n    // Map with info about receiving media.\n    // - index: Media SSRC\n    // - value: Object\n    //   - kind: 'audio' / 'video'\n    //   - ssrc: Media SSRC\n    //   - rtxSsrc: RTX SSRC (may be unset)\n    //   - streamId: MediaStream.jitsiRemoteId\n    //   - trackId: MediaStreamTrack.jitsiRemoteId\n    //   - cname: CNAME\n    // @type {map<Number, Object>}\n    const infos = new Map();\n\n    // Map with stream SSRC as index and associated RTX SSRC as value.\n    // @type {map<Number, Number>}\n    const rtxMap = new Map();\n\n    // Set of RTX SSRC values.\n    const rtxSet = new Set();\n\n    for (const m of sdpObject.media) {\n        const kind = m.type;\n\n        if (kind !== 'audio' && kind !== 'video') {\n            continue; // eslint-disable-line no-continue\n        }\n\n        // Get RTX information.\n        for (const ssrcGroup of m.ssrcGroups || []) {\n            // Just consider FID.\n            if (ssrcGroup.semantics !== 'FID') {\n                continue; // eslint-disable-line no-continue\n            }\n\n            const ssrcs\n                = ssrcGroup.ssrcs.split(' ').map(ssrc => Number(ssrc));\n            const ssrc = ssrcs[0];\n            const rtxSsrc = ssrcs[1];\n\n            rtxMap.set(ssrc, rtxSsrc);\n            rtxSet.add(rtxSsrc);\n        }\n\n        for (const ssrcObject of m.ssrcs || []) {\n            const ssrc = ssrcObject.id;\n\n            // Ignore RTX.\n            if (rtxSet.has(ssrc)) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            let info = infos.get(ssrc);\n\n            if (!info) {\n                info = {\n                    kind,\n                    rtxSsrc: rtxMap.get(ssrc),\n                    ssrc\n                };\n\n                infos.set(ssrc, info);\n            }\n\n            switch (ssrcObject.attribute) {\n            case 'cname': {\n                info.cname = ssrcObject.value;\n                break;\n            }\n            case 'msid': {\n                const values = ssrcObject.value.split(' ');\n                const streamId = values[0];\n                const trackId = values[1];\n\n                info.streamId = streamId;\n                info.trackId = trackId;\n                break;\n            }\n            case 'mslabel': {\n                const streamId = ssrcObject.value;\n\n                info.streamId = streamId;\n                break;\n            }\n            case 'label': {\n                const trackId = ssrcObject.value;\n\n                info.trackId = trackId;\n                break;\n            }\n            }\n        }\n    }\n\n    return infos;\n}\n\n/**\n * Get local ORTC RTP capabilities filtered and adapted to the given remote RTP\n * capabilities.\n * @param {RTCRtpCapabilities} filterWithCapabilities - RTP capabilities to\n * filter with.\n * @return {RTCRtpCapabilities}\n */\nexport function getLocalCapabilities(filterWithCapabilities) {\n    const localFullCapabilities = RTCRtpReceiver.getCapabilities();\n    const localCapabilities = {\n        codecs: [],\n        fecMechanisms: [],\n        headerExtensions: []\n    };\n\n    // Map of RTX and codec payloads.\n    // - index: Codec payloadType\n    // - value: Associated RTX payloadType\n    // @type {map<Number, Number>}\n    const remoteRtxMap = new Map();\n\n    // Set codecs.\n    for (const remoteCodec of filterWithCapabilities.codecs) {\n        const remoteCodecName = remoteCodec.name.toLowerCase();\n\n        if (remoteCodecName === 'rtx') {\n            remoteRtxMap.set(\n                remoteCodec.parameters.apt, remoteCodec.preferredPayloadType);\n\n            continue; // eslint-disable-line no-continue\n        }\n\n        const localCodec = localFullCapabilities.codecs.find(codec =>\n            codec.name.toLowerCase() === remoteCodecName\n                && codec.kind === remoteCodec.kind\n                && codec.clockRate === remoteCodec.clockRate\n        );\n\n        if (!localCodec) {\n            continue; // eslint-disable-line no-continue\n        }\n\n        const codec = {\n            clockRate: localCodec.clockRate,\n            kind: localCodec.kind,\n            mimeType: `${localCodec.kind}/${localCodec.name}`,\n            name: localCodec.name,\n            numChannels: localCodec.numChannels || 1,\n            parameters: {},\n            preferredPayloadType: remoteCodec.preferredPayloadType,\n            rtcpFeedback: []\n        };\n\n        for (const remoteParamName of Object.keys(remoteCodec.parameters)) {\n            const remoteParamValue\n                = remoteCodec.parameters[remoteParamName];\n\n            for (const localParamName of Object.keys(localCodec.parameters)) {\n                const localParamValue\n                    = localCodec.parameters[localParamName];\n\n                if (localParamName !== remoteParamName) {\n                    continue; // eslint-disable-line no-continue\n                }\n\n                // TODO: We should consider much more cases here, but Edge\n                // does not support many codec parameters.\n                if (localParamValue === remoteParamValue) {\n                    // Use this RTP parameter.\n                    codec.parameters[localParamName] = localParamValue;\n                    break;\n                }\n            }\n        }\n\n        for (const remoteFb of remoteCodec.rtcpFeedback) {\n            const localFb = localCodec.rtcpFeedback.find(fb =>\n                fb.type === remoteFb.type\n                    && fb.parameter === remoteFb.parameter\n            );\n\n            if (localFb) {\n                // Use this RTCP feedback.\n                codec.rtcpFeedback.push(localFb);\n            }\n        }\n\n        // Use this codec.\n        localCapabilities.codecs.push(codec);\n    }\n\n    // Add RTX for video codecs.\n    for (const codec of localCapabilities.codecs) {\n        const payloadType = codec.preferredPayloadType;\n\n        if (!remoteRtxMap.has(payloadType)) {\n            continue; // eslint-disable-line no-continue\n        }\n\n        const rtxCodec = {\n            clockRate: codec.clockRate,\n            kind: codec.kind,\n            mimeType: `${codec.kind}/rtx`,\n            name: 'rtx',\n            parameters: {\n                apt: payloadType\n            },\n            preferredPayloadType: remoteRtxMap.get(payloadType),\n            rtcpFeedback: []\n        };\n\n        // Add RTX codec.\n        localCapabilities.codecs.push(rtxCodec);\n    }\n\n    // Add RTP header extensions.\n    for (const remoteExtension of filterWithCapabilities.headerExtensions) {\n        const localExtension\n            = localFullCapabilities.headerExtensions.find(extension =>\n                extension.kind === remoteExtension.kind\n                    && extension.uri === remoteExtension.uri\n            );\n\n        if (localExtension) {\n            const extension = {\n                kind: localExtension.kind,\n                preferredEncrypt: Boolean(remoteExtension.preferredEncrypt),\n                preferredId: remoteExtension.preferredId,\n                uri: localExtension.uri\n            };\n\n            // Use this RTP header extension.\n            localCapabilities.headerExtensions.push(extension);\n        }\n    }\n\n    // Add FEC mechanisms.\n    // NOTE: We don't support FEC yet and, in fact, neither does Edge.\n    for (const remoteFecMechanism of filterWithCapabilities.fecMechanisms) {\n        const localFecMechanism\n            = localFullCapabilities.fecMechanisms.find(fec =>\n                fec === remoteFecMechanism\n            );\n\n        if (localFecMechanism) {\n            // Use this FEC mechanism.\n            localCapabilities.fecMechanisms.push(localFecMechanism);\n        }\n    }\n\n    return localCapabilities;\n}\n\n/**\n * Get the first acive media section.\n * @param {Object} sdpObject - SDP object generated by sdp-transform.\n * @return {Object} SDP media section as parsed by sdp-transform.\n */\nfunction getFirstActiveMediaSection(sdpObject) {\n    return sdpObject.media.find(m =>\n        m.iceUfrag && m.port !== 0\n    );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/ortc/utils.js","/**\n * Create a class inheriting from Error.\n */\nfunction createErrorClass(name) {\n    const klass = class extends Error {\n        /**\n         * Custom error class constructor.\n         * @param {string} message\n         */\n        constructor(message) {\n            super(message);\n\n            // Override `name` property value and make it non enumerable.\n            Object.defineProperty(this, 'name', { value: name });\n        }\n    };\n\n    return klass;\n}\n\nexport const InvalidStateError = createErrorClass('InvalidStateError');\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/ortc/errors.js","/* global chrome, $, alert */\n\nimport JitsiTrackError from '../../JitsiTrackError';\nimport * as JitsiTrackErrors from '../../JitsiTrackErrors';\nimport browser from '../browser';\n\nconst logger = require('jitsi-meet-logger').getLogger(__filename);\nconst GlobalOnErrorHandler = require('../util/GlobalOnErrorHandler');\n\n/**\n * Indicates whether the Chrome desktop sharing extension is installed.\n * @type {boolean}\n */\nlet chromeExtInstalled = false;\n\n/**\n * Indicates whether an update of the Chrome desktop sharing extension is\n * required.\n * @type {boolean}\n */\nlet chromeExtUpdateRequired = false;\n\n/**\n * Whether the jidesha extension for firefox is installed for the domain on\n * which we are running. Null designates an unknown value.\n * @type {null}\n */\nlet firefoxExtInstalled = null;\n\n/**\n * If set to true, detection of an installed firefox extension will be started\n * again the next time obtainScreenOnFirefox is called (e.g. next time the\n * user tries to enable screen sharing).\n */\nlet reDetectFirefoxExtension = false;\n\nlet gumFunction = null;\n\n/**\n * The error returned by chrome when trying to start inline installation from\n * popup.\n */\nconst CHROME_EXTENSION_POPUP_ERROR\n    = 'Inline installs can not be initiated from pop-up windows.';\n\n/**\n * The error returned by chrome when trying to start inline installation from\n * iframe.\n */\nconst CHROME_EXTENSION_IFRAME_ERROR\n    = 'Chrome Web Store installations can only be started by the top frame.';\n\n/**\n * The error returned by chrome when trying to start inline installation\n * not from the \"main\" whitelisted site.\n * @type {string}\n */\nconst CHROME_EXTENSION_INLINE_ERROR\n    = 'Installs can only be initiated by one of'\n        + ' the Chrome Web Store item\\'s verified sites.';\n\n/**\n * The error returned by chrome when trying to start inline installation\n * with extension that doesn't support inline installation.\n *\n * @type {string}\n */\nconst CHROME_EXTENSION_INLINE_NOT_SUPPORTED_ERROR\n    = 'Inline installation is not supported for this item. '\n        + 'The user will be redirected to the Chrome Web Store.';\n\n/**\n * The error message returned by chrome when the extension is installed.\n */\nconst CHROME_NO_EXTENSION_ERROR_MSG // eslint-disable-line no-unused-vars\n    = 'Could not establish connection. Receiving end does not exist.';\n\n/**\n * The error message returned by chrome when the extension install action needs\n * to be initiated by a user gesture.\n * @type {string}\n */\nconst CHROME_USER_GESTURE_REQ_ERROR\n    = 'Chrome Web Store installations can only be initated by a user gesture.';\n\n/**\n * Handles obtaining a stream from a screen capture on different browsers.\n */\nconst ScreenObtainer = {\n    /**\n     * If not <tt>null</tt> it means that the initialization process is still in\n     * progress. It is used to make desktop stream request wait and continue\n     * after it's done.\n     * {@type Promise|null}\n     */\n    intChromeExtPromise: null,\n\n    obtainStream: null,\n\n    /**\n     * Initializes the function used to obtain a screen capture\n     * (this.obtainStream).\n     *\n     * @param {object} options\n     * @param {boolean} [options.disableDesktopSharing]\n     * @param {boolean} [options.desktopSharingChromeDisabled]\n     * @param {boolean} [options.desktopSharingChromeExtId]\n     * @param {boolean} [options.desktopSharingFirefoxDisabled]\n     * @param {boolean} [options.desktopSharingFirefoxExtId] (deprecated)\n     * @param {Function} gum GUM method\n     */\n    init(options = {\n        disableDesktopSharing: false,\n        desktopSharingChromeDisabled: false,\n        desktopSharingChromeExtId: null,\n        desktopSharingFirefoxDisabled: false,\n        desktopSharingFirefoxExtId: null\n    }, gum) {\n        this.options = options;\n        gumFunction = gum;\n\n        this.obtainStream\n            = this.options.disableDesktopSharing\n                ? null : this._createObtainStreamMethod(options);\n\n        if (!this.obtainStream) {\n            logger.info('Desktop sharing disabled');\n        }\n    },\n\n    /**\n     * Returns a method which will be used to obtain the screen sharing stream\n     * (based on the browser type).\n     *\n     * @param {object} options passed from {@link init} - check description\n     * there\n     * @returns {Function}\n     * @private\n     */\n    _createObtainStreamMethod(options) {\n        if (browser.isNWJS()) {\n            return (_, onSuccess, onFailure) => {\n                window.JitsiMeetNW.obtainDesktopStream(\n                    onSuccess,\n                    (error, constraints) => {\n                        let jitsiError;\n\n                        // FIXME:\n                        // This is very very dirty fix for recognising that the\n                        // user have clicked the cancel button from the Desktop\n                        // sharing pick window. The proper solution would be to\n                        // detect this in the NWJS application by checking the\n                        // streamId === \"\". Even better solution would be to\n                        // stop calling GUM from the NWJS app and just pass the\n                        // streamId to lib-jitsi-meet. This way the desktop\n                        // sharing implementation for NWJS and chrome extension\n                        // will be the same and lib-jitsi-meet will be able to\n                        // control the constraints, check the streamId, etc.\n                        //\n                        // I cannot find documentation about \"InvalidStateError\"\n                        // but this is what we are receiving from GUM when the\n                        // streamId for the desktop sharing is \"\".\n\n                        if (error && error.name === 'InvalidStateError') {\n                            jitsiError = new JitsiTrackError(\n                                JitsiTrackErrors.CHROME_EXTENSION_USER_CANCELED\n                            );\n                        } else {\n                            jitsiError = new JitsiTrackError(\n                                error, constraints, [ 'desktop' ]);\n                        }\n                        (typeof onFailure === 'function')\n                            && onFailure(jitsiError);\n                    });\n            };\n        } else if (browser.isElectron()) {\n            return this.obtainScreenOnElectron;\n        } else if (browser.isTemasysPluginUsed()) {\n            // XXX Don't require Temasys unless it's to be used because it\n            // doesn't run on React Native, for example.\n            const plugin\n                = require('./adapter.screenshare').WebRTCPlugin.plugin;\n\n            if (!plugin.HasScreensharingFeature) {\n                logger.warn(\n                    'Screensharing not supported by this plugin version');\n\n                return null;\n            } else if (!plugin.isScreensharingAvailable) {\n                logger.warn(\n                    'Screensharing not available with Temasys plugin on'\n                        + ' this site');\n\n                return null;\n            }\n\n            logger.info('Using Temasys plugin for desktop sharing');\n\n            return obtainWebRTCScreen;\n        } else if (browser.isChrome() || browser.isOpera()) {\n            if (browser.isVersionLessThan('34')) {\n                logger.info('Chrome extension not supported until ver 34');\n\n                return null;\n            } else if (options.desktopSharingChromeDisabled\n                || options.desktopSharingChromeMethod === false\n                || !options.desktopSharingChromeExtId) {\n\n                // TODO: desktopSharingChromeMethod is deprecated, remove.\n                return null;\n            }\n\n            logger.info('Using Chrome extension for desktop sharing');\n            this.intChromeExtPromise\n                = initChromeExtension(options).then(() => {\n                    this.intChromeExtPromise = null;\n                });\n\n            return this.obtainScreenFromExtension;\n        } else if (browser.isFirefox()) {\n            if (options.desktopSharingFirefoxDisabled) {\n                return null;\n            } else if (window.location.protocol === 'http:') {\n                logger.log('Screen sharing is not supported over HTTP. '\n                    + 'Use of HTTPS is required.');\n\n                return null;\n            }\n\n            initFirefoxExtensionDetection(options);\n\n            return this.obtainScreenOnFirefox;\n        }\n\n        logger.log(\n            'Screen sharing not supported by the current browser: ',\n            browser.getName());\n\n        return null;\n    },\n\n    /**\n     * Checks whether obtaining a screen capture is supported in the current\n     * environment.\n     * @returns {boolean}\n     */\n    isSupported() {\n        return this.obtainStream !== null;\n    },\n\n    /**\n     * Obtains a screen capture stream on Firefox.\n     * @param callback\n     * @param errorCallback\n     */\n    obtainScreenOnFirefox(options, callback, errorCallback) {\n        let extensionRequired = false;\n        const { desktopSharingFirefoxMaxVersionExtRequired } = this.options;\n\n        if (desktopSharingFirefoxMaxVersionExtRequired === -1\n            || (desktopSharingFirefoxMaxVersionExtRequired >= 0\n            && !browser.isVersionGreaterThan(\n                desktopSharingFirefoxMaxVersionExtRequired))) {\n            extensionRequired = true;\n            logger.log(\n                `Jidesha extension required on firefox version ${\n                    browser.getVersion()}`);\n        }\n\n        if (!extensionRequired || firefoxExtInstalled === true) {\n            obtainWebRTCScreen(options.gumOptions, callback, errorCallback);\n\n            return;\n        }\n\n        if (reDetectFirefoxExtension) {\n            reDetectFirefoxExtension = false;\n            initFirefoxExtensionDetection(this.options);\n        }\n\n        // Give it some (more) time to initialize, and assume lack of\n        // extension if it hasn't.\n        if (firefoxExtInstalled === null) {\n            window.setTimeout(\n                () => {\n                    if (firefoxExtInstalled === null) {\n                        firefoxExtInstalled = false;\n                    }\n                    this.obtainScreenOnFirefox(\n                        options, callback, errorCallback);\n                },\n                300);\n            logger.log(\n                'Waiting for detection of jidesha on firefox to finish.');\n\n            return;\n        }\n\n        // We need an extension and it isn't installed.\n\n        // Make sure we check for the extension when the user clicks again.\n        firefoxExtInstalled = null;\n        reDetectFirefoxExtension = true;\n\n        // Make sure desktopsharing knows that we failed, so that it doesn't get\n        // stuck in 'switching' mode.\n        errorCallback(\n            new JitsiTrackError(JitsiTrackErrors.FIREFOX_EXTENSION_NEEDED));\n    },\n\n    /**\n     * Obtains a screen capture stream on Electron.\n     *\n     * @param {Object} [options] - Screen sharing options.\n     * @param {Array<string>} [options.desktopSharingSources] - Array with the\n     * sources that have to be displayed in the desktop picker window ('screen',\n     * 'window', etc.).\n     * @param onSuccess - Success callback.\n     * @param onFailure - Failure callback.\n     */\n    obtainScreenOnElectron(options = {}, onSuccess, onFailure) {\n        if (window.JitsiMeetScreenObtainer\n            && window.JitsiMeetScreenObtainer.openDesktopPicker) {\n            const { desktopSharingSources, gumOptions } = options;\n\n            window.JitsiMeetScreenObtainer.openDesktopPicker(\n                {\n                    desktopSharingSources: desktopSharingSources\n                        || this.options.desktopSharingChromeSources\n                },\n                (streamId, streamType) =>\n                    onGetStreamResponse(\n                        {\n                            response: {\n                                streamId,\n                                streamType\n                            },\n                            gumOptions\n                        },\n                        onSuccess,\n                        onFailure\n                    ),\n                err => onFailure(new JitsiTrackError(\n                    JitsiTrackErrors.ELECTRON_DESKTOP_PICKER_ERROR,\n                    err\n                ))\n            );\n        } else {\n            onFailure(new JitsiTrackError(\n                JitsiTrackErrors.ELECTRON_DESKTOP_PICKER_NOT_FOUND));\n        }\n    },\n\n    /**\n     * Asks Chrome extension to call chooseDesktopMedia and gets chrome\n     * 'desktop' stream for returned stream token.\n     */\n    obtainScreenFromExtension(options, streamCallback, failCallback) {\n        if (this.intChromeExtPromise !== null) {\n            this.intChromeExtPromise.then(() => {\n                this.obtainScreenFromExtension(\n                    options, streamCallback, failCallback);\n            });\n\n            return;\n        }\n\n        const {\n            desktopSharingChromeExtId,\n            desktopSharingChromeSources\n        } = this.options;\n\n        const {\n            gumOptions\n        } = options;\n\n        const doGetStreamFromExtensionOptions = {\n            desktopSharingChromeExtId,\n            desktopSharingChromeSources:\n                options.desktopSharingSources || desktopSharingChromeSources,\n            gumOptions\n        };\n\n        if (chromeExtInstalled) {\n            doGetStreamFromExtension(\n                doGetStreamFromExtensionOptions,\n                streamCallback,\n                failCallback);\n        } else {\n            if (chromeExtUpdateRequired) {\n                /* eslint-disable no-alert */\n                alert(\n                    'Jitsi Desktop Streamer requires update. '\n                    + 'Changes will take effect after next Chrome restart.');\n\n                /* eslint-enable no-alert */\n            }\n\n            // for opera there is no inline install\n            // extension \"Download Chrome Extension\" allows us to open\n            // the chrome webstore and install from there and then activate our\n            // extension\n            if (browser.isOpera()) {\n                this.handleExternalInstall(options, streamCallback,\n                    failCallback);\n\n                return;\n            }\n\n            try {\n                chrome.webstore.install(\n                    getWebStoreInstallUrl(this.options),\n                    arg => {\n                        logger.log('Extension installed successfully', arg);\n                        chromeExtInstalled = true;\n\n                        // We need to give a moment to the endpoint to become\n                        // available.\n                        waitForExtensionAfterInstall(this.options, 200, 10)\n                            .then(() => {\n                                doGetStreamFromExtension(\n                                    doGetStreamFromExtensionOptions,\n                                    streamCallback,\n                                    failCallback);\n                            })\n                            .catch(() => {\n                                this.handleExtensionInstallationError(options,\n                                    streamCallback, failCallback);\n                            });\n                    },\n                    this.handleExtensionInstallationError.bind(this,\n                        options, streamCallback, failCallback)\n                );\n            } catch (e) {\n                this.handleExtensionInstallationError(options, streamCallback,\n                    failCallback, e);\n            }\n        }\n    },\n\n    /* eslint-disable max-params */\n\n    handleExternalInstall(options, streamCallback, failCallback, e) {\n        const webStoreInstallUrl = getWebStoreInstallUrl(this.options);\n\n        options.listener('waitingForExtension', webStoreInstallUrl);\n        this.checkForChromeExtensionOnInterval(options, streamCallback,\n            failCallback, e);\n    },\n\n    handleExtensionInstallationError(options, streamCallback, failCallback, e) {\n        const webStoreInstallUrl = getWebStoreInstallUrl(this.options);\n\n        if ((CHROME_EXTENSION_POPUP_ERROR === e\n             || CHROME_EXTENSION_IFRAME_ERROR === e\n             || CHROME_EXTENSION_INLINE_ERROR === e\n             || CHROME_EXTENSION_INLINE_NOT_SUPPORTED_ERROR === e)\n                && options.interval > 0\n                && typeof options.checkAgain === 'function'\n                && typeof options.listener === 'function') {\n            this.handleExternalInstall(options, streamCallback,\n                failCallback, e);\n\n            return;\n        }\n\n        const msg\n            = `Failed to install the extension from ${webStoreInstallUrl}`;\n\n        logger.log(msg, e);\n\n        const error\n            = e === CHROME_USER_GESTURE_REQ_ERROR\n                ? JitsiTrackErrors.CHROME_EXTENSION_USER_GESTURE_REQUIRED\n                : JitsiTrackErrors.CHROME_EXTENSION_INSTALLATION_ERROR;\n\n        failCallback(new JitsiTrackError(error, msg));\n    },\n\n    /* eslint-enable max-params */\n\n    checkForChromeExtensionOnInterval(options, streamCallback, failCallback) {\n        if (options.checkAgain() === false) {\n            failCallback(new JitsiTrackError(\n                JitsiTrackErrors.CHROME_EXTENSION_INSTALLATION_ERROR));\n\n            return;\n        }\n        waitForExtensionAfterInstall(this.options, options.interval, 1)\n            .then(() => {\n                chromeExtInstalled = true;\n                options.listener('extensionFound');\n                this.obtainScreenFromExtension(options,\n                    streamCallback, failCallback);\n            })\n            .catch(() => {\n                this.checkForChromeExtensionOnInterval(options,\n                    streamCallback, failCallback);\n            });\n    }\n};\n\n/**\n * Obtains a desktop stream using getUserMedia.\n * For this to work on Chrome, the\n * 'chrome://flags/#enable-usermedia-screen-capture' flag must be enabled.\n *\n * On firefox, the document's domain must be white-listed in the\n * 'media.getusermedia.screensharing.allowed_domains' preference in\n * 'about:config'.\n */\nfunction obtainWebRTCScreen(options, streamCallback, failCallback) {\n    gumFunction(\n        [ 'screen' ],\n        stream => streamCallback({ stream }),\n        failCallback,\n        options\n    );\n}\n\n/**\n * Constructs inline install URL for Chrome desktop streaming extension.\n * The 'chromeExtensionId' must be defined in options parameter.\n * @param options supports \"desktopSharingChromeExtId\"\n * @returns {string}\n */\nfunction getWebStoreInstallUrl(options) {\n    return (\n        `https://chrome.google.com/webstore/detail/${\n            options.desktopSharingChromeExtId}`);\n}\n\n/**\n * Checks whether an update of the Chrome extension is required.\n * @param minVersion minimal required version\n * @param extVersion current extension version\n * @returns {boolean}\n */\nfunction isUpdateRequired(minVersion, extVersion) {\n    try {\n        const s1 = minVersion.split('.');\n        const s2 = extVersion.split('.');\n\n        const len = Math.max(s1.length, s2.length);\n\n        for (let i = 0; i < len; i++) {\n            let n1 = 0,\n                n2 = 0;\n\n            if (i < s1.length) {\n                n1 = parseInt(s1[i], 10);\n            }\n            if (i < s2.length) {\n                n2 = parseInt(s2[i], 10);\n            }\n\n            if (isNaN(n1) || isNaN(n2)) {\n                return true;\n            } else if (n1 !== n2) {\n                return n1 > n2;\n            }\n        }\n\n        // will happen if both versions have identical numbers in\n        // their components (even if one of them is longer, has more components)\n        return false;\n    } catch (e) {\n        GlobalOnErrorHandler.callErrorHandler(e);\n        logger.error('Failed to parse extension version', e);\n\n        return true;\n    }\n}\n\n/**\n *\n * @param callback\n * @param options\n */\nfunction checkChromeExtInstalled(callback, options) {\n    if (typeof chrome === 'undefined' || !chrome || !chrome.runtime) {\n        // No API, so no extension for sure\n        callback(false, false);\n\n        return;\n    }\n    chrome.runtime.sendMessage(\n        options.desktopSharingChromeExtId,\n        { getVersion: true },\n        response => {\n            if (!response || !response.version) {\n                // Communication failure - assume that no endpoint exists\n                logger.warn(\n                    'Extension not installed?: ', chrome.runtime.lastError);\n                callback(false, false);\n\n                return;\n            }\n\n            // Check installed extension version\n            const extVersion = response.version;\n\n            logger.log(`Extension version is: ${extVersion}`);\n            const updateRequired\n                = isUpdateRequired(\n                    options.desktopSharingChromeMinExtVersion,\n                    extVersion);\n\n            callback(!updateRequired, updateRequired);\n        }\n    );\n}\n\n/**\n *\n * @param options\n * @param streamCallback\n * @param failCallback\n */\nfunction doGetStreamFromExtension(options, streamCallback, failCallback) {\n    const {\n        desktopSharingChromeSources,\n        desktopSharingChromeExtId,\n        gumOptions\n    } = options;\n\n    // Sends 'getStream' msg to the extension.\n    // Extension id must be defined in the config.\n    chrome.runtime.sendMessage(\n        desktopSharingChromeExtId,\n        {\n            getStream: true,\n            sources: desktopSharingChromeSources\n        },\n        response => {\n            if (!response) {\n                // possibly re-wraping error message to make code consistent\n                const lastError = chrome.runtime.lastError;\n\n                failCallback(lastError instanceof Error\n                    ? lastError\n                    : new JitsiTrackError(\n                        JitsiTrackErrors.CHROME_EXTENSION_GENERIC_ERROR,\n                        lastError));\n\n                return;\n            }\n            logger.log('Response from extension: ', response);\n            onGetStreamResponse(\n                {\n                    response,\n                    gumOptions\n                },\n                streamCallback,\n                failCallback\n            );\n        }\n    );\n}\n\n/**\n * Initializes <link rel=chrome-webstore-item /> with extension id set in\n * config.js to support inline installs. Host site must be selected as main\n * website of published extension.\n * @param options supports \"desktopSharingChromeExtId\"\n */\nfunction initInlineInstalls(options) {\n    if ($('link[rel=chrome-webstore-item]').length === 0) {\n        $('head').append('<link rel=\"chrome-webstore-item\">');\n    }\n    $('link[rel=chrome-webstore-item]').attr('href',\n        getWebStoreInstallUrl(options));\n}\n\n/**\n *\n * @param options\n *\n * @return {Promise} - a Promise resolved once the initialization process is\n * finished.\n */\nfunction initChromeExtension(options) {\n    // Initialize Chrome extension inline installs\n    initInlineInstalls(options);\n\n    return new Promise(resolve => {\n        // Check if extension is installed\n        checkChromeExtInstalled((installed, updateRequired) => {\n            chromeExtInstalled = installed;\n            chromeExtUpdateRequired = updateRequired;\n            logger.info(\n                `Chrome extension installed: ${\n                    chromeExtInstalled} updateRequired: ${\n                    chromeExtUpdateRequired}`);\n            resolve();\n        }, options);\n    });\n}\n\n/**\n * Checks \"retries\" times on every \"waitInterval\"ms whether the ext is alive.\n * @param {Object} options the options passed to ScreanObtainer.obtainStream\n * @param {int} waitInterval the number of ms between retries\n * @param {int} retries the number of retries\n * @returns {Promise} returns promise that will be resolved when the extension\n * is alive and rejected if the extension is not alive even after \"retries\"\n * checks\n */\nfunction waitForExtensionAfterInstall(options, waitInterval, retries) {\n    if (retries === 0) {\n        return Promise.reject();\n    }\n\n    return new Promise((resolve, reject) => {\n        let currentRetries = retries;\n        const interval = window.setInterval(() => {\n            checkChromeExtInstalled(installed => {\n                if (installed) {\n                    window.clearInterval(interval);\n                    resolve();\n                } else {\n                    currentRetries--;\n                    if (currentRetries === 0) {\n                        reject();\n                        window.clearInterval(interval);\n                    }\n                }\n            }, options);\n        }, waitInterval);\n    });\n}\n\n/**\n * Handles response from external application / extension and calls GUM to\n * receive the desktop streams or reports error.\n * @param {object} options\n * @param {object} options.response\n * @param {string} options.response.streamId - the streamId for the desktop\n * stream.\n * @param {string} options.response.error - error to be reported.\n * @param {object} options.gumOptions - options passed to GUM.\n * @param {Function} onSuccess - callback for success.\n * @param {Function} onFailure - callback for failure.\n * @param {object} gumOptions - options passed to GUM.\n */\nfunction onGetStreamResponse(\n        options = {\n            response: {},\n            gumOptions: {}\n        },\n        onSuccess,\n        onFailure) {\n    const { streamId, streamType, error } = options.response || {};\n\n    if (streamId) {\n        gumFunction(\n            [ 'desktop' ],\n            stream => onSuccess({\n                stream,\n                sourceId: streamId,\n                sourceType: streamType\n            }),\n            onFailure,\n            {\n                desktopStream: streamId,\n                ...options.gumOptions\n            });\n    } else {\n        // As noted in Chrome Desktop Capture API:\n        // If user didn't select any source (i.e. canceled the prompt)\n        // then the callback is called with an empty streamId.\n        if (streamId === '') {\n            onFailure(new JitsiTrackError(\n                JitsiTrackErrors.CHROME_EXTENSION_USER_CANCELED));\n\n            return;\n        }\n\n        onFailure(new JitsiTrackError(\n            JitsiTrackErrors.CHROME_EXTENSION_GENERIC_ERROR,\n            error));\n    }\n}\n\n/**\n * Starts the detection of an installed jidesha extension for firefox.\n * @param options supports \"desktopSharingFirefoxDisabled\",\n * \"desktopSharingFirefoxExtId\"\n */\nfunction initFirefoxExtensionDetection(options) {\n    if (options.desktopSharingFirefoxDisabled) {\n        return;\n    }\n    if (firefoxExtInstalled === false || firefoxExtInstalled === true) {\n        return;\n    }\n    if (!options.desktopSharingFirefoxExtId) {\n        firefoxExtInstalled = false;\n\n        return;\n    }\n\n    const img = document.createElement('img');\n\n    img.onload = () => {\n        logger.log('Detected firefox screen sharing extension.');\n        firefoxExtInstalled = true;\n    };\n    img.onerror = () => {\n        logger.log('Detected lack of firefox screen sharing extension.');\n        firefoxExtInstalled = false;\n    };\n\n    // The jidesha extension exposes an empty image file under the url:\n    // \"chrome://EXT_ID/content/DOMAIN.png\"\n    // Where EXT_ID is the ID of the extension with \"@\" replaced by \".\", and\n    // DOMAIN is a domain whitelisted by the extension.\n    const extId = options.desktopSharingFirefoxExtId.replace('@', '.');\n    const domain = document.location.hostname;\n    const src = `chrome://${extId}/content/${domain}.png`;\n\n    img.setAttribute('src', src);\n}\n\nexport default ScreenObtainer;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/ScreenObtainer.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\nvar adapterFactory = require('./adapter_factory.js');\nmodule.exports = adapterFactory({window: global.window});\n\n\n\n// WEBPACK FOOTER //\n// ../webrtc-adapter/src/js/adapter_core.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\nvar utils = require('./utils');\n// Shimming starts here.\nmodule.exports = function(dependencies, opts) {\n  var window = dependencies && dependencies.window;\n\n  var options = {\n    shimChrome: true,\n    shimFirefox: true,\n    shimEdge: true,\n    shimSafari: true,\n  };\n\n  for (var key in opts) {\n    if (hasOwnProperty.call(opts, key)) {\n      options[key] = opts[key];\n    }\n  }\n\n  // Utils.\n  var logging = utils.log;\n  var browserDetails = utils.detectBrowser(window);\n\n  // Export to the adapter global object visible in the browser.\n  var adapter = {\n    browserDetails: browserDetails,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Uncomment the line below if you want logging to occur, including logging\n  // for the switch statement below. Can also be turned on in the browser via\n  // adapter.disableLog(false), but then logging from the switch statement below\n  // will not appear.\n  // require('./utils').disableLog(false);\n\n  // Browser shims.\n  var chromeShim = require('./chrome/chrome_shim') || null;\n  var edgeShim = require('./edge/edge_shim') || null;\n  var firefoxShim = require('./firefox/firefox_shim') || null;\n  var safariShim = require('./safari/safari_shim') || null;\n  var commonShim = require('./common_shim') || null;\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n      commonShim.shimCreateObjectURL(window);\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimSourceObject(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n      commonShim.shimCreateObjectURL(window);\n\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimSourceObject(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n      commonShim.shimCreateObjectURL(window);\n\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n\n      // the edge shim implements the full RTCIceCandidate object.\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n      commonShim.shimCreateObjectURL(window);\n\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n      safariShim.shimCreateOfferLegacy(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n};\n\n\n\n// WEBPACK FOOTER //\n// ../webrtc-adapter/src/js/adapter_factory.js","\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar utils = require('../utils.js');\nvar logging = utils.log;\n\nvar chromeShim = {\n  shimMediaStream: function(window) {\n    window.MediaStream = window.MediaStream || window.webkitMediaStream;\n  },\n\n  shimOnTrack: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n          }\n          this.addEventListener('track', this._ontrack = f);\n        }\n      });\n      var origSetRemoteDescription =\n          window.RTCPeerConnection.prototype.setRemoteDescription;\n      window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n        var pc = this;\n        if (!pc._ontrackpoly) {\n          pc._ontrackpoly = function(e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function(te) {\n              var receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = pc.getReceivers().find(function(r) {\n                  return r.track && r.track.id === te.track.id;\n                });\n              } else {\n                receiver = {track: te.track};\n              }\n\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver: receiver};\n              event.streams = [e.stream];\n              pc.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function(track) {\n              var receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = pc.getReceivers().find(function(r) {\n                  return r.track && r.track.id === track.id;\n                });\n              } else {\n                receiver = {track: track};\n              }\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver: receiver};\n              event.streams = [e.stream];\n              pc.dispatchEvent(event);\n            });\n          };\n          pc.addEventListener('addstream', pc._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n    }\n  },\n\n  shimGetSendersWithDtmf: function(window) {\n    // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        !('getSenders' in window.RTCPeerConnection.prototype) &&\n        'createDTMFSender' in window.RTCPeerConnection.prototype) {\n      var shimSenderWithDtmf = function(pc, track) {\n        return {\n          track: track,\n          get dtmf() {\n            if (this._dtmf === undefined) {\n              if (track.kind === 'audio') {\n                this._dtmf = pc.createDTMFSender(track);\n              } else {\n                this._dtmf = null;\n              }\n            }\n            return this._dtmf;\n          },\n          _pc: pc\n        };\n      };\n\n      // augment addTrack when getSenders is not available.\n      if (!window.RTCPeerConnection.prototype.getSenders) {\n        window.RTCPeerConnection.prototype.getSenders = function() {\n          this._senders = this._senders || [];\n          return this._senders.slice(); // return a copy of the internal state.\n        };\n        var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n        window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n          var pc = this;\n          var sender = origAddTrack.apply(pc, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(pc, track);\n            pc._senders.push(sender);\n          }\n          return sender;\n        };\n\n        var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n        window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n          var pc = this;\n          origRemoveTrack.apply(pc, arguments);\n          var idx = pc._senders.indexOf(sender);\n          if (idx !== -1) {\n            pc._senders.splice(idx, 1);\n          }\n        };\n      }\n      var origAddStream = window.RTCPeerConnection.prototype.addStream;\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origAddStream.apply(pc, [stream]);\n        stream.getTracks().forEach(function(track) {\n          pc._senders.push(shimSenderWithDtmf(pc, track));\n        });\n      };\n\n      var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origRemoveStream.apply(pc, [stream]);\n\n        stream.getTracks().forEach(function(track) {\n          var sender = pc._senders.find(function(s) {\n            return s.track === track;\n          });\n          if (sender) {\n            pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\n          }\n        });\n      };\n    } else if (typeof window === 'object' && window.RTCPeerConnection &&\n               'getSenders' in window.RTCPeerConnection.prototype &&\n               'createDTMFSender' in window.RTCPeerConnection.prototype &&\n               window.RTCRtpSender &&\n               !('dtmf' in window.RTCRtpSender.prototype)) {\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n      window.RTCPeerConnection.prototype.getSenders = function() {\n        var pc = this;\n        var senders = origGetSenders.apply(pc, []);\n        senders.forEach(function(sender) {\n          sender._pc = pc;\n        });\n        return senders;\n      };\n\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n        get: function() {\n          if (this._dtmf === undefined) {\n            if (this.track.kind === 'audio') {\n              this._dtmf = this._pc.createDTMFSender(this.track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function(window) {\n    var URL = window && window.URL;\n\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this._srcObject;\n          },\n          set: function(stream) {\n            var self = this;\n            // Use _srcObject as a private property for this shim\n            this._srcObject = stream;\n            if (this.src) {\n              URL.revokeObjectURL(this.src);\n            }\n\n            if (!stream) {\n              this.src = '';\n              return undefined;\n            }\n            this.src = URL.createObjectURL(stream);\n            // We need to recreate the blob url when a track is added or\n            // removed. Doing it manually since we want to avoid a recursion.\n            stream.addEventListener('addtrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n            stream.addEventListener('removetrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n          }\n        });\n      }\n    }\n  },\n\n  shimAddTrackRemoveTrack: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n    // shim addTrack and removeTrack.\n    if (window.RTCPeerConnection.prototype.addTrack &&\n        browserDetails.version >= 63) {\n      return;\n    }\n\n    // also shim pc.getLocalStreams when addTrack is shimmed\n    // to return the original streams.\n    var origGetLocalStreams = window.RTCPeerConnection.prototype\n        .getLocalStreams;\n    window.RTCPeerConnection.prototype.getLocalStreams = function() {\n      var self = this;\n      var nativeStreams = origGetLocalStreams.apply(this);\n      self._reverseStreams = self._reverseStreams || {};\n      return nativeStreams.map(function(stream) {\n        return self._reverseStreams[stream.id];\n      });\n    };\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      var pc = this;\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n\n      stream.getTracks().forEach(function(track) {\n        var alreadyExists = pc.getSenders().find(function(s) {\n          return s.track === track;\n        });\n        if (alreadyExists) {\n          throw new DOMException('Track already exists.',\n              'InvalidAccessError');\n        }\n      });\n      // Add identity mapping for consistency with addTrack.\n      // Unless this is being used with a stream from addTrack.\n      if (!pc._reverseStreams[stream.id]) {\n        var newStream = new window.MediaStream(stream.getTracks());\n        pc._streams[stream.id] = newStream;\n        pc._reverseStreams[newStream.id] = stream;\n        stream = newStream;\n      }\n      origAddStream.apply(pc, [stream]);\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      var pc = this;\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n\n      origRemoveStream.apply(pc, [(pc._streams[stream.id] || stream)]);\n      delete pc._reverseStreams[(pc._streams[stream.id] ?\n          pc._streams[stream.id].id : stream.id)];\n      delete pc._streams[stream.id];\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n      var pc = this;\n      if (pc.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      var streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(function(t) {\n            return t === track;\n          })) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      var alreadyExists = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n      var oldStream = pc._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(function() {\n          pc.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        var newStream = new window.MediaStream([track]);\n        pc._streams[stream.id] = newStream;\n        pc._reverseStreams[newStream.id] = stream;\n        pc.addStream(newStream);\n      }\n      return pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n    };\n\n    // replace the internal stream id with the external one and\n    // vice versa.\n    function replaceInternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n            externalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    function replaceExternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n            internalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    ['createOffer', 'createAnswer'].forEach(function(method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n      window.RTCPeerConnection.prototype[method] = function() {\n        var pc = this;\n        var args = arguments;\n        var isLegacyCall = arguments.length &&\n            typeof arguments[0] === 'function';\n        if (isLegacyCall) {\n          return nativeMethod.apply(pc, [\n            function(description) {\n              var desc = replaceInternalStreamId(pc, description);\n              args[0].apply(null, [desc]);\n            },\n            function(err) {\n              if (args[1]) {\n                args[1].apply(null, err);\n              }\n            }, arguments[2]\n          ]);\n        }\n        return nativeMethod.apply(pc, arguments)\n        .then(function(description) {\n          return replaceInternalStreamId(pc, description);\n        });\n      };\n    });\n\n    var origSetLocalDescription =\n        window.RTCPeerConnection.prototype.setLocalDescription;\n    window.RTCPeerConnection.prototype.setLocalDescription = function() {\n      var pc = this;\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(pc, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(pc, arguments[0]);\n      return origSetLocalDescription.apply(pc, arguments);\n    };\n\n    // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n    var origLocalDescription = Object.getOwnPropertyDescriptor(\n        window.RTCPeerConnection.prototype, 'localDescription');\n    Object.defineProperty(window.RTCPeerConnection.prototype,\n        'localDescription', {\n          get: function() {\n            var pc = this;\n            var description = origLocalDescription.get.apply(this);\n            if (description.type === '') {\n              return description;\n            }\n            return replaceInternalStreamId(pc, description);\n          }\n        });\n\n    window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n      var pc = this;\n      if (pc.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      var isLocal = sender._pc === pc;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      pc._streams = pc._streams || {};\n      var stream;\n      Object.keys(pc._streams).forEach(function(streamid) {\n        var hasTrack = pc._streams[streamid].getTracks().find(function(track) {\n          return sender.track === track;\n        });\n        if (hasTrack) {\n          stream = pc._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          pc.removeStream(pc._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        pc.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n  },\n\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        // Translate iceTransportPolicy to iceTransports,\n        // see https://code.google.com/p/webrtc/issues/detail?id=4869\n        // this was fixed in M56 along with unprefixing RTCPeerConnection.\n        logging('PeerConnection');\n        if (pcConfig && pcConfig.iceTransportPolicy) {\n          pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n        }\n\n        return new window.webkitRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype =\n          window.webkitRTCPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      if (window.webkitRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return window.webkitRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n    } else {\n      // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n      var OrigPeerConnection = window.RTCPeerConnection;\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (pcConfig && pcConfig.iceServers) {\n          var newIceServers = [];\n          for (var i = 0; i < pcConfig.iceServers.length; i++) {\n            var server = pcConfig.iceServers[i];\n            if (!server.hasOwnProperty('urls') &&\n                server.hasOwnProperty('url')) {\n              utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n              server = JSON.parse(JSON.stringify(server));\n              server.urls = server.url;\n              newIceServers.push(server);\n            } else {\n              newIceServers.push(pcConfig.iceServers[i]);\n            }\n          }\n          pcConfig.iceServers = newIceServers;\n        }\n        return new OrigPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return OrigPeerConnection.generateCertificate;\n        }\n      });\n    }\n\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function(selector,\n        successCallback, errorCallback) {\n      var self = this;\n      var args = arguments;\n\n      // If selector is a function then we are in the old style stats so just\n      // pass back the original getStats format to avoid breaking old users.\n      if (arguments.length > 0 && typeof selector === 'function') {\n        return origGetStats.apply(this, arguments);\n      }\n\n      // When spec-style getStats is supported, return those when called with\n      // either no arguments or the selector argument is null.\n      if (origGetStats.length === 0 && (arguments.length === 0 ||\n          typeof arguments[0] !== 'function')) {\n        return origGetStats.apply(this, []);\n      }\n\n      var fixChromeStats_ = function(response) {\n        var standardReport = {};\n        var reports = response.result();\n        reports.forEach(function(report) {\n          var standardStats = {\n            id: report.id,\n            timestamp: report.timestamp,\n            type: {\n              localcandidate: 'local-candidate',\n              remotecandidate: 'remote-candidate'\n            }[report.type] || report.type\n          };\n          report.names().forEach(function(name) {\n            standardStats[name] = report.stat(name);\n          });\n          standardReport[standardStats.id] = standardStats;\n        });\n\n        return standardReport;\n      };\n\n      // shim getStats with maplike support\n      var makeMapStats = function(stats) {\n        return new Map(Object.keys(stats).map(function(key) {\n          return [key, stats[key]];\n        }));\n      };\n\n      if (arguments.length >= 2) {\n        var successCallbackWrapper_ = function(response) {\n          args[1](makeMapStats(fixChromeStats_(response)));\n        };\n\n        return origGetStats.apply(this, [successCallbackWrapper_,\n          arguments[0]]);\n      }\n\n      // promise-support\n      return new Promise(function(resolve, reject) {\n        origGetStats.apply(self, [\n          function(response) {\n            resolve(makeMapStats(fixChromeStats_(response)));\n          }, reject]);\n      }).then(successCallback, errorCallback);\n    };\n\n    // add promise support -- natively available in Chrome 51\n    if (browserDetails.version < 51) {\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n          .forEach(function(method) {\n            var nativeMethod = window.RTCPeerConnection.prototype[method];\n            window.RTCPeerConnection.prototype[method] = function() {\n              var args = arguments;\n              var self = this;\n              var promise = new Promise(function(resolve, reject) {\n                nativeMethod.apply(self, [args[0], resolve, reject]);\n              });\n              if (args.length < 2) {\n                return promise;\n              }\n              return promise.then(function() {\n                args[1].apply(null, []);\n              },\n              function(err) {\n                if (args.length >= 3) {\n                  args[2].apply(null, [err]);\n                }\n              });\n            };\n          });\n    }\n\n    // promise support for createOffer and createAnswer. Available (without\n    // bugs) since M52: crbug/619289\n    if (browserDetails.version < 52) {\n      ['createOffer', 'createAnswer'].forEach(function(method) {\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\n        window.RTCPeerConnection.prototype[method] = function() {\n          var self = this;\n          if (arguments.length < 1 || (arguments.length === 1 &&\n              typeof arguments[0] === 'object')) {\n            var opts = arguments.length === 1 ? arguments[0] : undefined;\n            return new Promise(function(resolve, reject) {\n              nativeMethod.apply(self, [resolve, reject, opts]);\n            });\n          }\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n    }\n\n    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\n          window.RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n};\n\n\n// Expose public methods.\nmodule.exports = {\n  shimMediaStream: chromeShim.shimMediaStream,\n  shimOnTrack: chromeShim.shimOnTrack,\n  shimAddTrackRemoveTrack: chromeShim.shimAddTrackRemoveTrack,\n  shimGetSendersWithDtmf: chromeShim.shimGetSendersWithDtmf,\n  shimSourceObject: chromeShim.shimSourceObject,\n  shimPeerConnection: chromeShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n\n\n// WEBPACK FOOTER //\n// ../webrtc-adapter/src/js/chrome/chrome_shim.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar utils = require('../utils.js');\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n\n  var constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function(key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function(mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      var remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      var face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      var getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        var matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(function(devices) {\n            devices = devices.filter(function(d) {\n              return d.kind === 'videoinput';\n            });\n            var dev = devices.find(function(d) {\n              return matches.some(function(match) {\n                return d.label.toLowerCase().indexOf(match) !== -1;\n              });\n            });\n            if (!dev && devices.length && matches.indexOf('back') !== -1) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        InvalidStateError: 'NotReadableError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotReadableError',\n        MediaDeviceKillSwitchOn: 'NotReadableError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraintName,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function(c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {\n      getUserMedia: getUserMediaPromise_,\n      enumerateDevices: function() {\n        return new Promise(function(resolve) {\n          var kinds = {audio: 'audioinput', video: 'videoinput'};\n          return window.MediaStreamTrack.getSources(function(devices) {\n            resolve(devices.map(function(device) {\n              return {label: device.label,\n                kind: kinds[device.kind],\n                deviceId: device.id,\n                groupId: ''};\n            }));\n          });\n        });\n      },\n      getSupportedConstraints: function() {\n        return {\n          deviceId: true, echoCancellation: true, facingMode: true,\n          frameRate: true, height: true, width: true\n        };\n      }\n    };\n  }\n\n  // A shim for getUserMedia method on the mediaDevices object.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (!navigator.mediaDevices.getUserMedia) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return getUserMediaPromise_(constraints);\n    };\n  } else {\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, function(c) {\n        return origGetUserMedia(c).then(function(stream) {\n          if (c.audio && !stream.getAudioTracks().length ||\n              c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function(track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n          return stream;\n        }, function(e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n\n  // Dummy devicechange event methods.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n    navigator.mediaDevices.addEventListener = function() {\n      logging('Dummy mediaDevices.addEventListener called.');\n    };\n  }\n  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n    navigator.mediaDevices.removeEventListener = function() {\n      logging('Dummy mediaDevices.removeEventListener called.');\n    };\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ../webrtc-adapter/src/js/chrome/getusermedia.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\nvar shimRTCPeerConnection = require('rtcpeerconnection-shim');\n\nmodule.exports = {\n  shimGetUserMedia: require('./getusermedia'),\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    if (window.RTCIceGatherer) {\n      // ORTC defines an RTCIceCandidate object but no constructor.\n      // Not implemented in Edge.\n      if (!window.RTCIceCandidate) {\n        window.RTCIceCandidate = function(args) {\n          return args;\n        };\n      }\n      // ORTC does not have a session description object but\n      // other browsers (i.e. Chrome) that will support both PC and ORTC\n      // in the future might have this defined already.\n      if (!window.RTCSessionDescription) {\n        window.RTCSessionDescription = function(args) {\n          return args;\n        };\n      }\n      // this adds an additional event listener to MediaStrackTrack that signals\n      // when a tracks enabled property was changed. Workaround for a bug in\n      // addStream, see below. No longer required in 15025+\n      if (browserDetails.version < 15025) {\n        var origMSTEnabled = Object.getOwnPropertyDescriptor(\n            window.MediaStreamTrack.prototype, 'enabled');\n        Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n          set: function(value) {\n            origMSTEnabled.set.call(this, value);\n            var ev = new Event('enabled');\n            ev.enabled = value;\n            this.dispatchEvent(ev);\n          }\n        });\n      }\n    }\n\n    // ORTC defines the DTMF sender a bit different.\n    // https://github.com/w3c/ortc/issues/714\n    if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n        get: function() {\n          if (this._dtmf === undefined) {\n            if (this.track.kind === 'audio') {\n              this._dtmf = new window.RTCDtmfSender(this);\n            } else if (this.track.kind === 'video') {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        }\n      });\n    }\n\n    window.RTCPeerConnection =\n        shimRTCPeerConnection(window, browserDetails.version);\n  },\n  shimReplaceTrack: function(window) {\n    // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n    if (window.RTCRtpSender &&\n        !('replaceTrack' in window.RTCRtpSender.prototype)) {\n      window.RTCRtpSender.prototype.replaceTrack =\n          window.RTCRtpSender.prototype.setTrack;\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ../webrtc-adapter/src/js/edge/edge_shim.js","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all field are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this.localDescription = null;\n    this.remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (whih is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    this.transceivers.push(transceiver);\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // dpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n        event.candidate.candidate = serializedCandidate;\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc.localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc.localDescription.sdp =\n          SDPUtils.getDescription(pc.localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc.remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.isDatachannel) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc.localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (kind === 'application' && protocol === 'DTLS/SCTP') {\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          isDatachannel: true\n        };\n        return;\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc.remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      states[transceiver.iceTransport.state]++;\n      states[transceiver.dtlsTransport.state]++;\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0 || states.checking > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0 || states.completed > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc.remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.isDatachannel) {\n        sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n' +\n            'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc.remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].isDatachannel) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc.remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc.remoteDescription.sdp =\n              SDPUtils.getDescription(pc.remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.isDatachannel) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc.remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc.remoteDescription.sdp = sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function() {\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    var fixStatsType = function(stat) {\n      return {\n        inboundrtp: 'inbound-rtp',\n        outboundrtp: 'outbound-rtp',\n        candidatepair: 'candidate-pair',\n        localcandidate: 'local-candidate',\n        remotecandidate: 'remote-candidate'\n      }[stat.type] || stat.type;\n    };\n    return new Promise(function(resolve) {\n      // shim getStats with maplike support\n      var results = new Map();\n      Promise.all(promises).then(function(res) {\n        res.forEach(function(result) {\n          Object.keys(result).forEach(function(id) {\n            result[id].type = fixStatsType(result[id]);\n            results.set(id, result[id]);\n          });\n        });\n        resolve(results);\n      });\n    });\n  };\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n\n\n\n// WEBPACK FOOTER //\n// ../rtcpeerconnection-shim/rtcpeerconnection.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ../webpack/buildin/module.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var navigator = window && window.navigator;\n\n  var shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(function(e) {\n      return Promise.reject(shimError_(e));\n    });\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ../webrtc-adapter/src/js/edge/getusermedia.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\n\nvar firefoxShim = {\n  shimOnTrack: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.transceiver = {receiver: event.receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n    if (typeof window === 'object' && window.RTCTrackEvent &&\n        ('receiver' in window.RTCTrackEvent.prototype) &&\n        !('transceiver' in window.RTCTrackEvent.prototype)) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function() {\n          return {receiver: this.receiver};\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function(window) {\n    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this.mozSrcObject;\n          },\n          set: function(stream) {\n            this.mozSrcObject = stream;\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n        window.mozRTCPeerConnection)) {\n      return; // probably media.peerconnection.enabled=false in about:config\n    }\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (browserDetails.version < 38) {\n          // .urls is not supported in FF < 38.\n          // create RTCIceServers with a single url.\n          if (pcConfig && pcConfig.iceServers) {\n            var newIceServers = [];\n            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n              var server = pcConfig.iceServers[i];\n              if (server.hasOwnProperty('urls')) {\n                for (var j = 0; j < server.urls.length; j++) {\n                  var newServer = {\n                    url: server.urls[j]\n                  };\n                  if (server.urls[j].indexOf('turn') === 0) {\n                    newServer.username = server.username;\n                    newServer.credential = server.credential;\n                  }\n                  newIceServers.push(newServer);\n                }\n              } else {\n                newIceServers.push(pcConfig.iceServers[i]);\n              }\n            }\n            pcConfig.iceServers = newIceServers;\n          }\n        }\n        return new window.mozRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype =\n          window.mozRTCPeerConnection.prototype;\n\n      // wrap static methods. Currently just generateCertificate.\n      if (window.mozRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return window.mozRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n\n      window.RTCSessionDescription = window.mozRTCSessionDescription;\n      window.RTCIceCandidate = window.mozRTCIceCandidate;\n    }\n\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\n          window.RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n\n    // shim getStats with maplike support\n    var makeMapStats = function(stats) {\n      var map = new Map();\n      Object.keys(stats).forEach(function(key) {\n        map.set(key, stats[key]);\n        map[key] = stats[key];\n      });\n      return map;\n    };\n\n    var modernStatsTypes = {\n      inboundrtp: 'inbound-rtp',\n      outboundrtp: 'outbound-rtp',\n      candidatepair: 'candidate-pair',\n      localcandidate: 'local-candidate',\n      remotecandidate: 'remote-candidate'\n    };\n\n    var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function(\n      selector,\n      onSucc,\n      onErr\n    ) {\n      return nativeGetStats.apply(this, [selector || null])\n        .then(function(stats) {\n          if (browserDetails.version < 48) {\n            stats = makeMapStats(stats);\n          }\n          if (browserDetails.version < 53 && !onSucc) {\n            // Shim only promise getStats with spec-hyphens in type names\n            // Leave callback version alone; misc old uses of forEach before Map\n            try {\n              stats.forEach(function(stat) {\n                stat.type = modernStatsTypes[stat.type] || stat.type;\n              });\n            } catch (e) {\n              if (e.name !== 'TypeError') {\n                throw e;\n              }\n              // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n              stats.forEach(function(stat, i) {\n                stats.set(i, Object.assign({}, stat, {\n                  type: modernStatsTypes[stat.type] || stat.type\n                }));\n              });\n            }\n          }\n          return stats;\n        })\n        .then(onSucc, onErr);\n    };\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimOnTrack: firefoxShim.shimOnTrack,\n  shimSourceObject: firefoxShim.shimSourceObject,\n  shimPeerConnection: firefoxShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n\n\n// WEBPACK FOOTER //\n// ../webrtc-adapter/src/js/firefox/firefox_shim.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n  var MediaStreamTrack = window && window.MediaStreamTrack;\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        InternalError: 'NotReadableError',\n        NotSupportedError: 'TypeError',\n        PermissionDeniedError: 'NotAllowedError',\n        SecurityError: 'NotAllowedError'\n      }[e.name] || e.name,\n      message: {\n        'The operation is insecure.': 'The request is not allowed by the ' +\n        'user agent or the platform in the current context.'\n      }[e.message] || e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  // getUserMedia constraints shim.\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    var constraintsToFF37_ = function(c) {\n      if (typeof c !== 'object' || c.require) {\n        return c;\n      }\n      var require = [];\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = c[key] = (typeof c[key] === 'object') ?\n            c[key] : {ideal: c[key]};\n        if (r.min !== undefined ||\n            r.max !== undefined || r.exact !== undefined) {\n          require.push(key);\n        }\n        if (r.exact !== undefined) {\n          if (typeof r.exact === 'number') {\n            r. min = r.max = r.exact;\n          } else {\n            c[key] = r.exact;\n          }\n          delete r.exact;\n        }\n        if (r.ideal !== undefined) {\n          c.advanced = c.advanced || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[key] = {min: r.ideal, max: r.ideal};\n          } else {\n            oc[key] = r.ideal;\n          }\n          c.advanced.push(oc);\n          delete r.ideal;\n          if (!Object.keys(r).length) {\n            delete c[key];\n          }\n        }\n      });\n      if (require.length) {\n        c.require = require;\n      }\n      return c;\n    };\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (browserDetails.version < 38) {\n      logging('spec: ' + JSON.stringify(constraints));\n      if (constraints.audio) {\n        constraints.audio = constraintsToFF37_(constraints.audio);\n      }\n      if (constraints.video) {\n        constraints.video = constraintsToFF37_(constraints.video);\n      }\n      logging('ff37: ' + JSON.stringify(constraints));\n    }\n    return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n      onError(shimError_(e));\n    });\n  };\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      getUserMedia_(constraints, resolve, reject);\n    });\n  };\n\n  // Shim for mediaDevices on older versions.\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n      addEventListener: function() { },\n      removeEventListener: function() { }\n    };\n  }\n  navigator.mediaDevices.enumerateDevices =\n      navigator.mediaDevices.enumerateDevices || function() {\n        return new Promise(function(resolve) {\n          var infos = [\n            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n          ];\n          resolve(infos);\n        });\n      };\n\n  if (browserDetails.version < 41) {\n    // Work around http://bugzil.la/1169665\n    var orgEnumerateDevices =\n        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n    navigator.mediaDevices.enumerateDevices = function() {\n      return orgEnumerateDevices().then(undefined, function(e) {\n        if (e.name === 'NotFoundError') {\n          return [];\n        }\n        throw e;\n      });\n    };\n  }\n  if (browserDetails.version < 49) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      return origGetUserMedia(c).then(function(stream) {\n        // Work around https://bugzil.la/802326\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(function(track) {\n            track.stop();\n          });\n          throw new DOMException('The object can not be found here.',\n                                 'NotFoundError');\n        }\n        return stream;\n      }, function(e) {\n        return Promise.reject(shimError_(e));\n      });\n    };\n  }\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    var remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        var obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    if (browserDetails.version < 44) {\n      return getUserMedia_(constraints, onSuccess, onError);\n    }\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ../webrtc-adapter/src/js/firefox/getusermedia.js","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nvar utils = require('../utils');\n\nvar safariShim = {\n  // TODO: DrAlex, should be here, double check against LayoutTests\n\n  // TODO: once the back-end for the mac port is done, add.\n  // TODO: check for webkitGTK+\n  // shimPeerConnection: function() { },\n\n  shimLocalStreamsAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getLocalStreams = function() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n    }\n    if (!('getStreamById' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getStreamById = function(id) {\n        var result = null;\n        if (this._localStreams) {\n          this._localStreams.forEach(function(stream) {\n            if (stream.id === id) {\n              result = stream;\n            }\n          });\n        }\n        if (this._remoteStreams) {\n          this._remoteStreams.forEach(function(stream) {\n            if (stream.id === id) {\n              result = stream;\n            }\n          });\n        }\n        return result;\n      };\n    }\n    if (!('addStream' in window.RTCPeerConnection.prototype)) {\n      var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        if (this._localStreams.indexOf(stream) === -1) {\n          this._localStreams.push(stream);\n        }\n        var self = this;\n        stream.getTracks().forEach(function(track) {\n          _addTrack.call(self, track, stream);\n        });\n      };\n\n      window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n        if (stream) {\n          if (!this._localStreams) {\n            this._localStreams = [stream];\n          } else if (this._localStreams.indexOf(stream) === -1) {\n            this._localStreams.push(stream);\n          }\n        }\n        _addTrack.call(this, track, stream);\n      };\n    }\n    if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        var index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        var self = this;\n        var tracks = stream.getTracks();\n        this.getSenders().forEach(function(sender) {\n          if (tracks.indexOf(sender.track) !== -1) {\n            self.removeTrack(sender);\n          }\n        });\n      };\n    }\n  },\n  shimRemoteStreamsAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getRemoteStreams = function() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n    }\n    if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n        get: function() {\n          return this._onaddstream;\n        },\n        set: function(f) {\n          if (this._onaddstream) {\n            this.removeEventListener('addstream', this._onaddstream);\n            this.removeEventListener('track', this._onaddstreampoly);\n          }\n          this.addEventListener('addstream', this._onaddstream = f);\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            var stream = e.streams[0];\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = e.streams[0];\n            this.dispatchEvent(event);\n          }.bind(this));\n        }\n      });\n    }\n  },\n  shimCallbacksAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    var prototype = window.RTCPeerConnection.prototype;\n    var createOffer = prototype.createOffer;\n    var createAnswer = prototype.createAnswer;\n    var setLocalDescription = prototype.setLocalDescription;\n    var setRemoteDescription = prototype.setRemoteDescription;\n    var addIceCandidate = prototype.addIceCandidate;\n\n    prototype.createOffer = function(successCallback, failureCallback) {\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      var promise = createOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    prototype.createAnswer = function(successCallback, failureCallback) {\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      var promise = createAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    var withCallback = function(description, successCallback, failureCallback) {\n      var promise = setLocalDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setLocalDescription = withCallback;\n\n    withCallback = function(description, successCallback, failureCallback) {\n      var promise = setRemoteDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setRemoteDescription = withCallback;\n\n    withCallback = function(candidate, successCallback, failureCallback) {\n      var promise = addIceCandidate.apply(this, [candidate]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.addIceCandidate = withCallback;\n  },\n  shimGetUserMedia: function(window) {\n    var navigator = window && window.navigator;\n\n    if (!navigator.getUserMedia) {\n      if (navigator.webkitGetUserMedia) {\n        navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\n      } else if (navigator.mediaDevices &&\n          navigator.mediaDevices.getUserMedia) {\n        navigator.getUserMedia = function(constraints, cb, errcb) {\n          navigator.mediaDevices.getUserMedia(constraints)\n          .then(cb, errcb);\n        }.bind(navigator);\n      }\n    }\n  },\n  shimRTCIceServerUrls: function(window) {\n    // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n    var OrigPeerConnection = window.RTCPeerConnection;\n    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        var newIceServers = [];\n        for (var i = 0; i < pcConfig.iceServers.length; i++) {\n          var server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n    window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n    // wrap static methods. Currently just generateCertificate.\n    if ('generateCertificate' in window.RTCPeerConnection) {\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return OrigPeerConnection.generateCertificate;\n        }\n      });\n    }\n  },\n  shimTrackEventTransceiver: function(window) {\n    // Add event.transceiver member over deprecated event.receiver\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        ('receiver' in window.RTCTrackEvent.prototype) &&\n        // can't check 'transceiver' in window.RTCTrackEvent.prototype, as it is\n        // defined for some reason even when window.RTCTransceiver is not.\n        !window.RTCTransceiver) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function() {\n          return {receiver: this.receiver};\n        }\n      });\n    }\n  },\n\n  shimCreateOfferLegacy: function(window) {\n    var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n    window.RTCPeerConnection.prototype.createOffer = function(offerOptions) {\n      var pc = this;\n      if (offerOptions) {\n        var audioTransceiver = pc.getTransceivers().find(function(transceiver) {\n          return transceiver.sender.track &&\n              transceiver.sender.track.kind === 'audio';\n        });\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            audioTransceiver.setDirection('sendonly');\n          } else if (audioTransceiver.direction === 'recvonly') {\n            audioTransceiver.setDirection('inactive');\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          pc.addTransceiver('audio');\n        }\n\n        var videoTransceiver = pc.getTransceivers().find(function(transceiver) {\n          return transceiver.sender.track &&\n              transceiver.sender.track.kind === 'video';\n        });\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            videoTransceiver.setDirection('sendonly');\n          } else if (videoTransceiver.direction === 'recvonly') {\n            videoTransceiver.setDirection('inactive');\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          pc.addTransceiver('video');\n        }\n      }\n      return origCreateOffer.apply(pc, arguments);\n    };\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimCallbacksAPI: safariShim.shimCallbacksAPI,\n  shimLocalStreamsAPI: safariShim.shimLocalStreamsAPI,\n  shimRemoteStreamsAPI: safariShim.shimRemoteStreamsAPI,\n  shimGetUserMedia: safariShim.shimGetUserMedia,\n  shimRTCIceServerUrls: safariShim.shimRTCIceServerUrls,\n  shimTrackEventTransceiver: safariShim.shimTrackEventTransceiver,\n  shimCreateOfferLegacy: safariShim.shimCreateOfferLegacy\n  // TODO\n  // shimPeerConnection: safariShim.shimPeerConnection\n};\n\n\n\n// WEBPACK FOOTER //\n// ../webrtc-adapter/src/js/safari/safari_shim.js","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\nvar utils = require('./utils');\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object.\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var proto = window.RTCPeerConnection.prototype;\n  var nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    var wrappedCallback = function(e) {\n      cb(wrapper(e));\n    };\n    this._eventMap = this._eventMap || {};\n    this._eventMap[cb] = wrappedCallback;\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  var nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[cb]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    var unwrappedCb = this._eventMap[cb];\n    delete this._eventMap[cb];\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get: function() {\n      return this['_on' + eventNameToWrap];\n    },\n    set: function(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    }\n  });\n}\n\nmodule.exports = {\n  shimRTCIceCandidate: function(window) {\n    // foundation is arbitrarily chosen as an indicator for full support for\n    // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n    if (window.RTCIceCandidate && 'foundation' in\n        window.RTCIceCandidate.prototype) {\n      return;\n    }\n\n    var NativeRTCIceCandidate = window.RTCIceCandidate;\n    window.RTCIceCandidate = function(args) {\n      // Remove the a= which shouldn't be part of the candidate string.\n      if (typeof args === 'object' && args.candidate &&\n          args.candidate.indexOf('a=') === 0) {\n        args = JSON.parse(JSON.stringify(args));\n        args.candidate = args.candidate.substr(2);\n      }\n\n      // Augment the native candidate with the parsed fields.\n      var nativeCandidate = new NativeRTCIceCandidate(args);\n      var parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      var augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    };\n\n    // Hook up the augmented candidate in onicecandidate and\n    // addEventListener('icecandidate', ...)\n    wrapPeerConnectionEvent(window, 'icecandidate', function(e) {\n      if (e.candidate) {\n        Object.defineProperty(e, 'candidate', {\n          value: new window.RTCIceCandidate(e.candidate),\n          writable: 'false'\n        });\n      }\n      return e;\n    });\n  },\n\n  // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\n\n  shimCreateObjectURL: function(window) {\n    var URL = window && window.URL;\n\n    if (!(typeof window === 'object' && window.HTMLMediaElement &&\n          'srcObject' in window.HTMLMediaElement.prototype &&\n        URL.createObjectURL && URL.revokeObjectURL)) {\n      // Only shim CreateObjectURL using srcObject if srcObject exists.\n      return undefined;\n    }\n\n    var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\n    var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\n    var streams = new Map(), newId = 0;\n\n    URL.createObjectURL = function(stream) {\n      if ('getTracks' in stream) {\n        var url = 'polyblob:' + (++newId);\n        streams.set(url, stream);\n        utils.deprecated('URL.createObjectURL(stream)',\n            'elem.srcObject = stream');\n        return url;\n      }\n      return nativeCreateObjectURL(stream);\n    };\n    URL.revokeObjectURL = function(url) {\n      nativeRevokeObjectURL(url);\n      streams.delete(url);\n    };\n\n    var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\n                                              'src');\n    Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\n      get: function() {\n        return dsc.get.apply(this);\n      },\n      set: function(url) {\n        this.srcObject = streams.get(url) || null;\n        return dsc.set.apply(this, [url]);\n      }\n    });\n\n    var nativeSetAttribute = window.HTMLMediaElement.prototype.setAttribute;\n    window.HTMLMediaElement.prototype.setAttribute = function() {\n      if (arguments.length === 2 &&\n          ('' + arguments[0]).toLowerCase() === 'src') {\n        this.srcObject = streams.get(arguments[1]) || null;\n      }\n      return nativeSetAttribute.apply(this, arguments);\n    };\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ../webrtc-adapter/src/js/common_shim.js","\n\n/**\n * The method will increase the given number by 1. If the given counter is equal\n * or greater to {@link Number.MAX_SAFE_INTEGER} then it will be rolled back to\n * 1.\n * @param {number} number - An integer counter value to be incremented.\n * @return {number} the next counter value increased by 1 (see the description\n * above for exception).\n */\nexport function safeCounterIncrement(number) {\n    let nextValue = number;\n\n    if (number >= Number.MAX_SAFE_INTEGER) {\n        nextValue = 0;\n    }\n\n    return nextValue + 1;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/util/MathUtil.js","/* global __filename, RTCSessionDescription */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport transform from 'sdp-transform';\n\nimport * as GlobalOnErrorHandler from '../util/GlobalOnErrorHandler';\nimport JitsiRemoteTrack from './JitsiRemoteTrack';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport LocalSdpMunger from './LocalSdpMunger';\nimport RTC from './RTC';\nimport RTCUtils from './RTCUtils';\nimport browser from '../browser';\nimport RTCEvents from '../../service/RTC/RTCEvents';\nimport RtxModifier from '../xmpp/RtxModifier';\n\n// FIXME SDP tools should end up in some kind of util module\nimport SDP from '../xmpp/SDP';\nimport SdpConsistency from '../xmpp/SdpConsistency';\nimport { SdpTransformWrap } from '../xmpp/SdpTransformUtil';\nimport SDPUtil from '../xmpp/SDPUtil';\nimport * as SignalingEvents from '../../service/RTC/SignalingEvents';\n\nconst logger = getLogger(__filename);\nconst SIMULCAST_LAYERS = 3;\nconst SIM_LAYER_1_RID = '1';\nconst SIM_LAYER_2_RID = '2';\nconst SIM_LAYER_3_RID = '3';\nconst SIM_LAYER_RIDS = [ SIM_LAYER_1_RID, SIM_LAYER_2_RID, SIM_LAYER_3_RID ];\n\n/* eslint-disable max-params */\n\n/**\n * Creates new instance of 'TraceablePeerConnection'.\n *\n * @param {RTC} rtc the instance of <tt>RTC</tt> service\n * @param {number} id the peer connection id assigned by the parent RTC module.\n * @param {SignalingLayer} signalingLayer the signaling layer instance\n * @param {object} iceConfig WebRTC 'PeerConnection' ICE config\n * @param {object} constraints WebRTC 'PeerConnection' constraints\n * @param {boolean} isP2P indicates whether or not the new instance will be used\n * in a peer to peer connection\n * @param {object} options <tt>TracablePeerConnection</tt> config options.\n * @param {boolean} options.disableSimulcast if set to 'true' will disable\n * the simulcast.\n * @param {boolean} options.disableRtx if set to 'true' will disable the RTX\n * @param {boolean} options.enableFirefoxSimulcast if set to 'true' will enable\n * experimental simulcast support on Firefox.\n * @param {boolean} options.disableH264 If set to 'true' H264 will be\n *      disabled by removing it from the SDP.\n * @param {boolean} options.preferH264 if set to 'true' H264 will be preferred\n * over other video codecs.\n *\n * FIXME: initially the purpose of TraceablePeerConnection was to be able to\n * debug the peer connection. Since many other responsibilities have been added\n * it would make sense to extract a separate class from it and come up with\n * a more suitable name.\n *\n * @constructor\n */\nexport default function TraceablePeerConnection(\n        rtc,\n        id,\n        signalingLayer,\n        iceConfig,\n        constraints,\n        isP2P,\n        options) {\n\n    /**\n     * Indicates whether or not this peer connection instance is actively\n     * sending/receiving audio media. When set to <tt>false</tt> the SDP audio\n     * media direction will be adjusted to 'inactive' in order to suspend\n     * the transmission.\n     * @type {boolean}\n     * @private\n     */\n    this.audioTransferActive = true;\n\n    /**\n     * Indicates whether or not this peer connection instance is actively\n     * sending/receiving video media. When set to <tt>false</tt> the SDP video\n     * media direction will be adjusted to 'inactive' in order to suspend\n     * the transmission.\n     * @type {boolean}\n     * @private\n     */\n    this.videoTransferActive = true;\n\n    /**\n     * The parent instance of RTC service which created this\n     * <tt>TracablePeerConnection</tt>.\n     * @type {RTC}\n     */\n    this.rtc = rtc;\n\n    /**\n     * The peer connection identifier assigned by the RTC module.\n     * @type {number}\n     */\n    this.id = id;\n\n    /**\n     * Indicates whether or not this instance is used in a peer to peer\n     * connection.\n     * @type {boolean}\n     */\n    this.isP2P = isP2P;\n\n    // FIXME: We should support multiple streams per jid.\n    /**\n     * The map holds remote tracks associated with this peer connection.\n     * It maps user's JID to media type and remote track\n     * (one track per media type per user's JID).\n     * @type {Map<string, Map<MediaType, JitsiRemoteTrack>>}\n     */\n    this.remoteTracks = new Map();\n\n    /**\n     * A map which stores local tracks mapped by {@link JitsiLocalTrack.rtcId}\n     * @type {Map<number, JitsiLocalTrack>}\n     */\n    this.localTracks = new Map();\n\n    /**\n     * Keeps tracks of the WebRTC <tt>MediaStream</tt>s that have been added to\n     * the underlying WebRTC PeerConnection. An Array is used to avoid errors in\n     * IE11 with adding temasys MediaStream objects into other data structures.\n     * @type {Array}\n     * @private\n     */\n    this._addedStreams = [];\n\n    /**\n     * @typedef {Object} TPCGroupInfo\n     * @property {string} semantics the SSRC groups semantics\n     * @property {Array<number>} ssrcs group's SSRCs in order where the first\n     * one is group's primary SSRC, the second one is secondary (RTX) and so\n     * on...\n     */\n    /**\n     * @typedef {Object} TPCSSRCInfo\n     * @property {Array<number>} ssrcs an array which holds all track's SSRCs\n     * @property {Array<TPCGroupInfo>} groups an array stores all track's SSRC\n     * groups\n     */\n    /**\n     * Holds the info about local track's SSRCs mapped per their\n     * {@link JitsiLocalTrack.rtcId}\n     * @type {Map<number, TPCSSRCInfo>}\n     */\n    this.localSSRCs = new Map();\n\n    /**\n     * The local ICE username fragment for this session.\n     */\n    this.localUfrag = null;\n\n    /**\n     * The remote ICE username fragment for this session.\n     */\n    this.remoteUfrag = null;\n\n    /**\n     * The signaling layer which operates this peer connection.\n     * @type {SignalingLayer}\n     */\n    this.signalingLayer = signalingLayer;\n\n    // SignalingLayer listeners\n    this._peerVideoTypeChanged = this._peerVideoTypeChanged.bind(this);\n    this.signalingLayer.on(\n        SignalingEvents.PEER_VIDEO_TYPE_CHANGED,\n        this._peerVideoTypeChanged);\n\n    this._peerMutedChanged = this._peerMutedChanged.bind(this);\n    this.signalingLayer.on(\n        SignalingEvents.PEER_MUTED_CHANGED,\n        this._peerMutedChanged);\n    this.options = options;\n\n    this.peerconnection\n        = new RTCUtils.RTCPeerConnectionType(iceConfig, constraints);\n    this.updateLog = [];\n    this.stats = {};\n    this.statsinterval = null;\n\n    /**\n     * @type {number} The max number of stats to keep in this.stats. Limit to\n     * 300 values, i.e. 5 minutes; set to 0 to disable\n     */\n    this.maxstats = options.maxstats;\n    const Interop = require('sdp-interop').Interop;\n\n    this.interop = new Interop();\n    const Simulcast = require('sdp-simulcast');\n\n    this.simulcast = new Simulcast({ numOfLayers: SIMULCAST_LAYERS,\n        explodeRemoteSimulcast: false });\n    this.sdpConsistency = new SdpConsistency(this.toString());\n\n    /**\n     * Munges local SDP provided to the Jingle Session in order to prevent from\n     * sending SSRC updates on attach/detach and mute/unmute (for video).\n     * @type {LocalSdpMunger}\n     */\n    this.localSdpMunger = new LocalSdpMunger(this);\n\n    /**\n     * TracablePeerConnection uses RTC's eventEmitter\n     * @type {EventEmitter}\n     */\n    this.eventEmitter = rtc.eventEmitter;\n    this.rtxModifier = new RtxModifier();\n\n    // override as desired\n    this.trace = (what, info) => {\n        logger.debug(what, info);\n\n        /*\n        if (info && browser.isIExplorer()) {\n            if (info.length > 1024) {\n                logger.warn('WTRACE', what, info.substr(1024));\n            }\n            if (info.length > 2048) {\n                logger.warn('WTRACE', what, info.substr(2048));\n            }\n        }*/\n        this.updateLog.push({\n            time: new Date(),\n            type: what,\n            value: info || ''\n        });\n    };\n    this.onicecandidate = null;\n    this.peerconnection.onicecandidate = event => {\n        // FIXME: this causes stack overflow with Temasys Plugin\n        if (!browser.isTemasysPluginUsed()) {\n            this.trace(\n                'onicecandidate',\n                JSON.stringify(event.candidate, null, ' '));\n        }\n\n        if (this.onicecandidate !== null) {\n            this.onicecandidate(event);\n        }\n    };\n    this.peerconnection.onaddstream\n        = event => this._remoteStreamAdded(event.stream);\n    this.peerconnection.onremovestream\n        = event => this._remoteStreamRemoved(event.stream);\n    this.onsignalingstatechange = null;\n    this.peerconnection.onsignalingstatechange = event => {\n        this.trace('onsignalingstatechange', this.signalingState);\n        if (this.onsignalingstatechange !== null) {\n            this.onsignalingstatechange(event);\n        }\n    };\n    this.oniceconnectionstatechange = null;\n    this.peerconnection.oniceconnectionstatechange = event => {\n        this.trace('oniceconnectionstatechange', this.iceConnectionState);\n        if (this.oniceconnectionstatechange !== null) {\n            this.oniceconnectionstatechange(event);\n        }\n    };\n    this.onnegotiationneeded = null;\n    this.peerconnection.onnegotiationneeded = event => {\n        this.trace('onnegotiationneeded');\n        if (this.onnegotiationneeded !== null) {\n            this.onnegotiationneeded(event);\n        }\n    };\n    this.ondatachannel = null;\n    this.peerconnection.ondatachannel = event => {\n        this.trace('ondatachannel');\n        if (this.ondatachannel !== null) {\n            this.ondatachannel(event);\n        }\n    };\n\n    if (this.maxstats) {\n        this.statsinterval = window.setInterval(() => {\n            this.getStats(stats => {\n                if (stats.result\n                    && typeof stats.result === 'function') {\n                    const results = stats.result();\n\n                    for (let i = 0; i < results.length; ++i) {\n                        const res = results[i];\n\n                        res.names().forEach(name => {\n                            this._processStat(res, name, res.stat(name));\n                        });\n                    }\n                } else {\n                    stats.forEach(r => this._processStat(r, '', r));\n                }\n            }, () => {\n\n                // empty error callback\n            });\n        }, 1000);\n    }\n\n    logger.info(`Create new ${this}`);\n}\n\n/* eslint-enable max-params */\n\n/**\n * Process stat and adds it to the array of stats we store.\n * @param report the current stats report.\n * @param name the name of the report, if available\n * @param statValue the value to add.\n * @private\n */\nTraceablePeerConnection.prototype._processStat\n    = function(report, name, statValue) {\n        const id = `${report.id}-${name}`;\n        let s = this.stats[id];\n        const now = new Date();\n\n        if (!s) {\n            this.stats[id] = s = {\n                startTime: now,\n                endTime: now,\n                values: [],\n                times: []\n            };\n        }\n        s.values.push(statValue);\n        s.times.push(now.getTime());\n        if (s.values.length > this.maxstats) {\n            s.values.shift();\n            s.times.shift();\n        }\n        s.endTime = now;\n    };\n\n/**\n * Returns a string representation of a SessionDescription object.\n */\nconst dumpSDP = function(description) {\n    if (typeof description === 'undefined' || description === null) {\n        return '';\n    }\n\n    return `type: ${description.type}\\r\\n${description.sdp}`;\n};\n\n\n/**\n * Forwards the {@link peerconnection.iceConnectionState} state except that it\n * will convert \"completed\" into \"connected\" where both mean that the ICE has\n * succeeded and is up and running. We never see \"completed\" state for\n * the JVB connection, but it started appearing for the P2P one. This method\n * allows to adapt old logic to this new situation.\n * @return {string}\n */\nTraceablePeerConnection.prototype.getConnectionState = function() {\n    const state = this.peerconnection.iceConnectionState;\n\n    if (state === 'completed') {\n        return 'connected';\n    }\n\n    return state;\n};\n\n/**\n * Obtains the media direction for given {@link MediaType}. The method takes\n * into account whether or not there are any local tracks for media and\n * the {@link audioTransferActive} and {@link videoTransferActive} flags.\n * @param {MediaType} mediaType\n * @return {string} one of the SDP direction constants ('sendrecv, 'recvonly'\n * etc.) which should be used when setting local description on the peer\n * connection.\n * @private\n */\nTraceablePeerConnection.prototype._getDesiredMediaDirection = function(\n        mediaType) {\n    let mediaTransferActive = true;\n\n    if (mediaType === MediaType.AUDIO) {\n        mediaTransferActive = this.audioTransferActive;\n    } else if (mediaType === MediaType.VIDEO) {\n        mediaTransferActive = this.videoTransferActive;\n    }\n    if (mediaTransferActive) {\n        return this.hasAnyTracksOfType(mediaType) ? 'sendrecv' : 'recvonly';\n    }\n\n    return 'inactive';\n};\n\n/**\n * Tells whether or not this TPC instance is using Simulcast.\n * @return {boolean} <tt>true</tt> if simulcast is enabled and active or\n * <tt>false</tt> if it's turned off.\n */\nTraceablePeerConnection.prototype.isSimulcastOn = function() {\n    return !this.options.disableSimulcast\n        && browser.supportsSimulcast()\n\n        // Firefox has been added as supporting simulcast, but it is\n        // experimental so we only want to do it for firefox if the config\n        // option is set.  Unfortunately, browser::supportsSimulcast()\n        // doesn't have a reference to the config options, so we have\n        // to do it here\n        && (!browser.isFirefox()\n            || this.options.enableFirefoxSimulcast);\n};\n\n/**\n * Handles {@link SignalingEvents.PEER_VIDEO_TYPE_CHANGED}\n * @param {string} endpointId the video owner's ID (MUC nickname)\n * @param {VideoType} videoType the new value\n * @private\n */\nTraceablePeerConnection.prototype._peerVideoTypeChanged = function(\n        endpointId,\n        videoType) {\n    // Check if endpointId has a value to avoid action on random track\n    if (!endpointId) {\n        logger.error(`No endpointID on peerVideoTypeChanged ${this}`);\n\n        return;\n    }\n    const videoTrack = this.getRemoteTracks(endpointId, MediaType.VIDEO);\n\n    if (videoTrack.length) {\n        // NOTE 1 track per media type is assumed\n        videoTrack[0]._setVideoType(videoType);\n    }\n};\n\n/**\n * Handles remote track mute / unmute events.\n * @param {string} endpointId the track owner's identifier (MUC nickname)\n * @param {MediaType} mediaType \"audio\" or \"video\"\n * @param {boolean} isMuted the new mute state\n * @private\n */\nTraceablePeerConnection.prototype._peerMutedChanged = function(\n        endpointId,\n        mediaType,\n        isMuted) {\n    // Check if endpointId is a value to avoid doing action on all remote tracks\n    if (!endpointId) {\n        logger.error('On peerMuteChanged - no endpoint ID');\n\n        return;\n    }\n    const track = this.getRemoteTracks(endpointId, mediaType);\n\n    if (track.length) {\n        // NOTE 1 track per media type is assumed\n        track[0].setMute(isMuted);\n    }\n};\n\n/**\n * Obtains local tracks for given {@link MediaType}. If the <tt>mediaType</tt>\n * argument is omitted the list of all local tracks will be returned.\n * @param {MediaType} [mediaType]\n * @return {Array<JitsiLocalTrack>}\n */\nTraceablePeerConnection.prototype.getLocalTracks = function(mediaType) {\n    let tracks = Array.from(this.localTracks.values());\n\n    if (mediaType !== undefined) {\n        tracks = tracks.filter(track => track.getType() === mediaType);\n    }\n\n    return tracks;\n};\n\n/**\n * Checks whether or not this {@link TraceablePeerConnection} instance contains\n * any local tracks for given <tt>mediaType</tt>.\n * @param {MediaType} mediaType\n * @return {boolean}\n */\nTraceablePeerConnection.prototype.hasAnyTracksOfType = function(mediaType) {\n    if (!mediaType) {\n        throw new Error('\"mediaType\" is required');\n    }\n\n    return this.getLocalTracks(mediaType).length > 0;\n};\n\n/**\n * Obtains all remote tracks currently known to this PeerConnection instance.\n * @param {string} [endpointId] the track owner's identifier (MUC nickname)\n * @param {MediaType} [mediaType] the remote tracks will be filtered\n * by their media type if this argument is specified.\n * @return {Array<JitsiRemoteTrack>}\n */\nTraceablePeerConnection.prototype.getRemoteTracks = function(\n        endpointId,\n        mediaType) {\n    const remoteTracks = [];\n    const endpoints\n        = endpointId ? [ endpointId ] : this.remoteTracks.keys();\n\n    for (const endpoint of endpoints) {\n        const endpointTrackMap = this.remoteTracks.get(endpoint);\n\n        if (!endpointTrackMap) {\n\n            // Otherwise an empty Map() would have to be allocated above\n            // eslint-disable-next-line no-continue\n            continue;\n        }\n\n        for (const trackMediaType of endpointTrackMap.keys()) {\n            // per media type filtering\n            if (!mediaType || mediaType === trackMediaType) {\n                const mediaTrack = endpointTrackMap.get(trackMediaType);\n\n                if (mediaTrack) {\n                    remoteTracks.push(mediaTrack);\n                }\n            }\n        }\n    }\n\n    return remoteTracks;\n};\n\n/**\n * Tries to find {@link JitsiTrack} for given SSRC number. It will search both\n * local and remote tracks bound to this instance.\n * @param {number} ssrc\n * @return {JitsiTrack|null}\n */\nTraceablePeerConnection.prototype.getTrackBySSRC = function(ssrc) {\n    if (typeof ssrc !== 'number') {\n        throw new Error(`SSRC ${ssrc} is not a number`);\n    }\n    for (const localTrack of this.localTracks.values()) {\n        if (this.getLocalSSRC(localTrack) === ssrc) {\n            return localTrack;\n        }\n    }\n    for (const remoteTrack of this.getRemoteTracks()) {\n        if (remoteTrack.getSSRC() === ssrc) {\n            return remoteTrack;\n        }\n    }\n\n    return null;\n};\n\n/**\n * Tries to find SSRC number for given {@link JitsiTrack} id. It will search\n * both local and remote tracks bound to this instance.\n * @param {string} id\n * @return {number|null}\n */\nTraceablePeerConnection.prototype.getSsrcByTrackId = function(id) {\n\n    const findTrackById = track => track.getTrack().id === id;\n    const localTrack = this.getLocalTracks().find(findTrackById);\n\n    if (localTrack) {\n        return this.getLocalSSRC(localTrack);\n    }\n\n    const remoteTrack = this.getRemoteTracks().find(findTrackById);\n\n    if (remoteTrack) {\n        return remoteTrack.getSSRC();\n    }\n\n    return null;\n};\n\n/**\n * Called when new remote MediaStream is added to the PeerConnection.\n * @param {MediaStream} stream the WebRTC MediaStream for remote participant\n */\nTraceablePeerConnection.prototype._remoteStreamAdded = function(stream) {\n    const streamId = RTC.getStreamID(stream);\n\n    if (!RTC.isUserStreamById(streamId)) {\n        logger.info(\n            `${this} ignored remote 'stream added' event for non-user stream`\n             + `id: ${streamId}`);\n\n        return;\n    }\n\n    // Bind 'addtrack'/'removetrack' event handlers\n    if (browser.isChrome() || browser.isNWJS()\n        || browser.isElectron() || browser.isEdge()) {\n        stream.onaddtrack = event => {\n            this._remoteTrackAdded(stream, event.track);\n        };\n        stream.onremovetrack = event => {\n            this._remoteTrackRemoved(stream, event.track);\n        };\n    }\n\n    // Call remoteTrackAdded for each track in the stream\n    const streamAudioTracks = stream.getAudioTracks();\n\n    for (const audioTrack of streamAudioTracks) {\n        this._remoteTrackAdded(stream, audioTrack);\n    }\n    const streamVideoTracks = stream.getVideoTracks();\n\n    for (const videoTrack of streamVideoTracks) {\n        this._remoteTrackAdded(stream, videoTrack);\n    }\n};\n\n\n/**\n * Called on \"track added\" and \"stream added\" PeerConnection events (because we\n * handle streams on per track basis). Finds the owner and the SSRC for\n * the track and passes that to ChatRoom for further processing.\n * @param {MediaStream} stream the WebRTC MediaStream instance which is\n * the parent of the track\n * @param {MediaStreamTrack} track the WebRTC MediaStreamTrack added for remote\n * participant\n */\nTraceablePeerConnection.prototype._remoteTrackAdded = function(stream, track) {\n    const streamId = RTC.getStreamID(stream);\n    const mediaType = track.kind;\n\n    logger.info(`${this} remote track added:`, streamId, mediaType);\n\n    // look up an associated JID for a stream id\n    if (!mediaType) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(\n                `MediaType undefined for remote track, stream id: ${streamId}`\n            ));\n\n        // Abort\n        return;\n    }\n\n    const remoteSDP = new SDP(this.remoteDescription.sdp);\n    const mediaLines\n        = remoteSDP.media.filter(mls => mls.startsWith(`m=${mediaType}`));\n\n    if (!mediaLines.length) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(\n                `No media lines for type ${\n                    mediaType} found in remote SDP for remote track: ${\n                    streamId}`));\n\n        // Abort\n        return;\n    }\n\n    let ssrcLines = SDPUtil.findLines(mediaLines[0], 'a=ssrc:');\n\n    ssrcLines = ssrcLines.filter(\n        line => {\n            const msid\n                = browser.isTemasysPluginUsed() ? 'mslabel' : 'msid';\n\n\n            return line.indexOf(`${msid}:${streamId}`) !== -1;\n        });\n    if (!ssrcLines.length) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(\n                `No SSRC lines for streamId ${\n                    streamId} for remote track, media type: ${mediaType}`));\n\n        // Abort\n        return;\n    }\n\n    // FIXME the length of ssrcLines[0] not verified, but it will fail\n    // with global error handler anyway\n    const ssrcStr = ssrcLines[0].substring(7).split(' ')[0];\n    const trackSsrc = Number(ssrcStr);\n    const ownerEndpointId = this.signalingLayer.getSSRCOwner(trackSsrc);\n\n    if (isNaN(trackSsrc) || trackSsrc < 0) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(\n                `Invalid SSRC: ${ssrcStr} for remote track, msid: ${\n                    streamId} media type: ${mediaType}`));\n\n        // Abort\n        return;\n    } else if (!ownerEndpointId) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(\n                `No SSRC owner known for: ${\n                    trackSsrc} for remote track, msid: ${\n                    streamId} media type: ${mediaType}`));\n\n        // Abort\n        return;\n    }\n\n    logger.log(`${this} associated ssrc`, ownerEndpointId, trackSsrc);\n\n    const peerMediaInfo\n        = this.signalingLayer.getPeerMediaInfo(ownerEndpointId, mediaType);\n\n    if (!peerMediaInfo) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(\n                `${this}: no peer media info available for ${\n                    ownerEndpointId}`));\n\n        return;\n    }\n\n    const muted = peerMediaInfo.muted;\n    const videoType = peerMediaInfo.videoType; // can be undefined\n\n    this._createRemoteTrack(\n        ownerEndpointId, stream, track, mediaType, videoType, trackSsrc, muted);\n};\n\n// FIXME cleanup params\n/* eslint-disable max-params */\n\n/**\n * Initializes a new JitsiRemoteTrack instance with the data provided by\n * the signaling layer and SDP.\n *\n * @param {string} ownerEndpointId the owner's endpoint ID (MUC nickname)\n * @param {MediaStream} stream the WebRTC stream instance\n * @param {MediaStreamTrack} track the WebRTC track instance\n * @param {MediaType} mediaType the track's type of the media\n * @param {VideoType} [videoType] the track's type of the video (if applicable)\n * @param {number} ssrc the track's main SSRC number\n * @param {boolean} muted the initial muted status\n */\nTraceablePeerConnection.prototype._createRemoteTrack = function(\n        ownerEndpointId,\n        stream,\n        track,\n        mediaType,\n        videoType,\n        ssrc,\n        muted) {\n    const remoteTrack\n        = new JitsiRemoteTrack(\n            this.rtc, this.rtc.conference,\n            ownerEndpointId,\n            stream, track, mediaType, videoType, ssrc, muted, this.isP2P);\n    let remoteTracksMap = this.remoteTracks.get(ownerEndpointId);\n\n    if (!remoteTracksMap) {\n        remoteTracksMap = new Map();\n        this.remoteTracks.set(ownerEndpointId, remoteTracksMap);\n    }\n\n    if (remoteTracksMap.has(mediaType)) {\n        logger.error(\n            `${this} overwriting remote track! ${remoteTrack}`,\n            ownerEndpointId, mediaType);\n    }\n    remoteTracksMap.set(mediaType, remoteTrack);\n\n    this.eventEmitter.emit(RTCEvents.REMOTE_TRACK_ADDED, remoteTrack);\n};\n\n/* eslint-enable max-params */\n\n/**\n * Handles remote stream removal.\n * @param stream the WebRTC MediaStream object which is being removed from the\n * PeerConnection\n */\nTraceablePeerConnection.prototype._remoteStreamRemoved = function(stream) {\n    if (!RTC.isUserStream(stream)) {\n        const id = RTC.getStreamID(stream);\n\n        logger.info(\n            `Ignored remote 'stream removed' event for non-user stream ${id}`);\n\n        return;\n    }\n\n    // Call remoteTrackRemoved for each track in the stream\n    const streamVideoTracks = stream.getVideoTracks();\n\n    for (const videoTrack of streamVideoTracks) {\n        this._remoteTrackRemoved(stream, videoTrack);\n    }\n    const streamAudioTracks = stream.getAudioTracks();\n\n    for (const audioTrack of streamAudioTracks) {\n        this._remoteTrackRemoved(stream, audioTrack);\n    }\n};\n\n/**\n * Handles remote media track removal.\n * @param {MediaStream} stream WebRTC MediaStream instance which is the parent\n * of the track.\n * @param {MediaStreamTrack} track the WebRTC MediaStreamTrack which has been\n * removed from the PeerConnection.\n */\nTraceablePeerConnection.prototype._remoteTrackRemoved = function(\n        stream,\n        track) {\n    const streamId = RTC.getStreamID(stream);\n    const trackId = track && RTC.getTrackID(track);\n\n    logger.info(`${this} - remote track removed: ${streamId}, ${trackId}`);\n\n    if (!streamId) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(`${this} remote track removal failed - no stream ID`));\n\n        return;\n    }\n\n    if (!trackId) {\n        GlobalOnErrorHandler.callErrorHandler(\n            new Error(`${this} remote track removal failed - no track ID`));\n\n        return;\n    }\n\n    if (!this._removeRemoteTrackById(streamId, trackId)) {\n        // NOTE this warning is always printed when user leaves the room,\n        // because we remove remote tracks manually on MUC member left event,\n        // before the SSRCs are removed by Jicofo. In most cases it is fine to\n        // ignore this warning, but still it's better to keep it printed for\n        // debugging purposes.\n        //\n        // We could change the behaviour to emit track removed only from here,\n        // but the order of the events will change and consuming apps could\n        // behave unexpectedly (the \"user left\" event would come before \"track\n        // removed\" events).\n        logger.warn(\n            `${this} Removed track not found for msid: ${streamId},\n             track id: ${trackId}`);\n    }\n};\n\n/**\n * Finds remote track by it's stream and track ids.\n * @param {string} streamId the media stream id as defined by the WebRTC\n * @param {string} trackId the media track id as defined by the WebRTC\n * @return {JitsiRemoteTrack|undefined} the track's instance or\n * <tt>undefined</tt> if not found.\n * @private\n */\nTraceablePeerConnection.prototype._getRemoteTrackById = function(\n        streamId,\n        trackId) {\n    // .find will break the loop once the first match is found\n    for (const endpointTrackMap of this.remoteTracks.values()) {\n        for (const mediaTrack of endpointTrackMap.values()) {\n            // FIXME verify and try to use ===\n            /* eslint-disable eqeqeq */\n            if (mediaTrack.getStreamId() == streamId\n                && mediaTrack.getTrackId() == trackId) {\n                return mediaTrack;\n            }\n\n            /* eslint-enable eqeqeq */\n        }\n    }\n\n    return undefined;\n};\n\n/**\n * Removes all JitsiRemoteTracks associated with given MUC nickname\n * (resource part of the JID). Returns array of removed tracks.\n *\n * @param {string} owner - The resource part of the MUC JID.\n * @returns {JitsiRemoteTrack[]}\n */\nTraceablePeerConnection.prototype.removeRemoteTracks = function(owner) {\n    const removedTracks = [];\n    const remoteTracksMap = this.remoteTracks.get(owner);\n\n    if (remoteTracksMap) {\n        const removedAudioTrack = remoteTracksMap.get(MediaType.AUDIO);\n        const removedVideoTrack = remoteTracksMap.get(MediaType.VIDEO);\n\n        removedAudioTrack && removedTracks.push(removedAudioTrack);\n        removedVideoTrack && removedTracks.push(removedVideoTrack);\n\n        this.remoteTracks.delete(owner);\n    }\n\n    logger.debug(\n        `${this} removed remote tracks for ${owner} count: ${\n            removedTracks.length}`);\n\n    return removedTracks;\n};\n\n/**\n * Removes and disposes given <tt>JitsiRemoteTrack</tt> instance. Emits\n * {@link RTCEvents.REMOTE_TRACK_REMOVED}.\n * @param {JitsiRemoteTrack} toBeRemoved\n */\nTraceablePeerConnection.prototype._removeRemoteTrack = function(toBeRemoved) {\n    toBeRemoved.dispose();\n    const participantId = toBeRemoved.getParticipantId();\n    const remoteTracksMap = this.remoteTracks.get(participantId);\n\n    if (!remoteTracksMap) {\n        logger.error(\n            `removeRemoteTrack: no remote tracks map for ${participantId}`);\n    } else if (!remoteTracksMap.delete(toBeRemoved.getType())) {\n        logger.error(\n            `Failed to remove ${toBeRemoved} - type mapping messed up ?`);\n    }\n    this.eventEmitter.emit(RTCEvents.REMOTE_TRACK_REMOVED, toBeRemoved);\n};\n\n/**\n * Removes and disposes <tt>JitsiRemoteTrack</tt> identified by given stream and\n * track ids.\n *\n * @param {string} streamId the media stream id as defined by the WebRTC\n * @param {string} trackId the media track id as defined by the WebRTC\n * @returns {JitsiRemoteTrack|undefined} the track which has been removed or\n * <tt>undefined</tt> if no track matching given stream and track ids was\n * found.\n */\nTraceablePeerConnection.prototype._removeRemoteTrackById = function(\n        streamId,\n        trackId) {\n    const toBeRemoved = this._getRemoteTrackById(streamId, trackId);\n\n    if (toBeRemoved) {\n        this._removeRemoteTrack(toBeRemoved);\n    }\n\n    return toBeRemoved;\n};\n\n/**\n * @typedef {Object} SSRCGroupInfo\n * @property {Array<number>} ssrcs group's SSRCs\n * @property {string} semantics\n */\n/**\n * @typedef {Object} TrackSSRCInfo\n * @property {Array<number>} ssrcs track's SSRCs\n * @property {Array<SSRCGroupInfo>} groups track's SSRC groups\n */\n/**\n * Returns map with keys msid and <tt>TrackSSRCInfo</tt> values.\n * @param {Object} desc the WebRTC SDP instance.\n * @return {Map<string,TrackSSRCInfo>}\n */\nfunction extractSSRCMap(desc) {\n    /**\n     * Track SSRC infos mapped by stream ID (msid)\n     * @type {Map<string,TrackSSRCInfo>}\n     */\n    const ssrcMap = new Map();\n\n    /**\n     * Groups mapped by primary SSRC number\n     * @type {Map<number,Array<SSRCGroupInfo>>}\n     */\n    const groupsMap = new Map();\n\n    if (typeof desc !== 'object' || desc === null\n        || typeof desc.sdp !== 'string') {\n        logger.warn('An empty description was passed as an argument.');\n\n        return ssrcMap;\n    }\n\n    const session = transform.parse(desc.sdp);\n\n    if (!Array.isArray(session.media)) {\n        return ssrcMap;\n    }\n\n    for (const mLine of session.media) {\n        if (!Array.isArray(mLine.ssrcs)) {\n            continue; // eslint-disable-line no-continue\n        }\n\n        if (Array.isArray(mLine.ssrcGroups)) {\n            for (const group of mLine.ssrcGroups) {\n                if (typeof group.semantics !== 'undefined'\n                    && typeof group.ssrcs !== 'undefined') {\n                    // Parse SSRCs and store as numbers\n                    const groupSSRCs\n                        = group.ssrcs.split(' ').map(\n                            ssrcStr => parseInt(ssrcStr, 10));\n                    const primarySSRC = groupSSRCs[0];\n\n                    // Note that group.semantics is already present\n\n                    group.ssrcs = groupSSRCs;\n\n                    // eslint-disable-next-line max-depth\n                    if (!groupsMap.has(primarySSRC)) {\n                        groupsMap.set(primarySSRC, []);\n                    }\n                    groupsMap.get(primarySSRC).push(group);\n                }\n            }\n        }\n        for (const ssrc of mLine.ssrcs) {\n            if (ssrc.attribute !== 'msid') {\n                continue; // eslint-disable-line no-continue\n            }\n\n            const msid = ssrc.value;\n            let ssrcInfo = ssrcMap.get(msid);\n\n            if (!ssrcInfo) {\n                ssrcInfo = {\n                    ssrcs: [],\n                    groups: [],\n                    msid\n                };\n                ssrcMap.set(msid, ssrcInfo);\n            }\n\n            const ssrcNumber = ssrc.id;\n\n            ssrcInfo.ssrcs.push(ssrcNumber);\n\n            if (groupsMap.has(ssrcNumber)) {\n                const ssrcGroups = groupsMap.get(ssrcNumber);\n\n                for (const group of ssrcGroups) {\n                    ssrcInfo.groups.push(group);\n                }\n            }\n        }\n    }\n\n    return ssrcMap;\n}\n\n/**\n * Takes a SessionDescription object and returns a \"normalized\" version.\n * Currently it only takes care of ordering the a=ssrc lines.\n */\nconst normalizePlanB = function(desc) {\n    if (typeof desc !== 'object' || desc === null\n        || typeof desc.sdp !== 'string') {\n        logger.warn('An empty description was passed as an argument.');\n\n        return desc;\n    }\n\n    // eslint-disable-next-line no-shadow\n    const transform = require('sdp-transform');\n    const session = transform.parse(desc.sdp);\n\n    if (typeof session !== 'undefined'\n            && typeof session.media !== 'undefined'\n            && Array.isArray(session.media)) {\n        session.media.forEach(mLine => {\n\n            // Chrome appears to be picky about the order in which a=ssrc lines\n            // are listed in an m-line when rtx is enabled (and thus there are\n            // a=ssrc-group lines with FID semantics). Specifically if we have\n            // \"a=ssrc-group:FID S1 S2\" and the \"a=ssrc:S2\" lines appear before\n            // the \"a=ssrc:S1\" lines, SRD fails.\n            // So, put SSRC which appear as the first SSRC in an FID ssrc-group\n            // first.\n            const firstSsrcs = [];\n            const newSsrcLines = [];\n\n            if (typeof mLine.ssrcGroups !== 'undefined'\n                && Array.isArray(mLine.ssrcGroups)) {\n                mLine.ssrcGroups.forEach(group => {\n                    if (typeof group.semantics !== 'undefined'\n                        && group.semantics === 'FID') {\n                        if (typeof group.ssrcs !== 'undefined') {\n                            firstSsrcs.push(Number(group.ssrcs.split(' ')[0]));\n                        }\n                    }\n                });\n            }\n\n            if (Array.isArray(mLine.ssrcs)) {\n                let i;\n\n                for (i = 0; i < mLine.ssrcs.length; i++) {\n                    if (typeof mLine.ssrcs[i] === 'object'\n                        && typeof mLine.ssrcs[i].id !== 'undefined'\n                        && firstSsrcs.indexOf(mLine.ssrcs[i].id) >= 0) {\n                        newSsrcLines.push(mLine.ssrcs[i]);\n                        delete mLine.ssrcs[i];\n                    }\n                }\n\n                for (i = 0; i < mLine.ssrcs.length; i++) {\n                    if (typeof mLine.ssrcs[i] !== 'undefined') {\n                        newSsrcLines.push(mLine.ssrcs[i]);\n                    }\n                }\n\n                mLine.ssrcs = newSsrcLines;\n            }\n        });\n    }\n\n    const resStr = transform.write(session);\n\n\n    return new RTCSessionDescription({\n        type: desc.type,\n        sdp: resStr\n    });\n};\n\n/**\n * Makes sure that both audio and video directions are configured as 'sendrecv'.\n * @param {Object} localDescription the SDP object as defined by WebRTC.\n */\nconst enforceSendRecv = function(localDescription) {\n    if (!localDescription) {\n        throw new Error('No local description passed in.');\n    }\n\n    const transformer = new SdpTransformWrap(localDescription.sdp);\n    const audioMedia = transformer.selectMedia('audio');\n    let changed = false;\n\n    if (audioMedia && audioMedia.direction !== 'sendrecv') {\n        audioMedia.direction = 'sendrecv';\n        changed = true;\n    }\n\n    const videoMedia = transformer.selectMedia('video');\n\n    if (videoMedia && videoMedia.direction !== 'sendrecv') {\n        videoMedia.direction = 'sendrecv';\n        changed = true;\n    }\n\n    if (changed) {\n        return new RTCSessionDescription({\n            type: localDescription.type,\n            sdp: transformer.toRawSDP()\n        });\n    }\n\n    return localDescription;\n};\n\n/**\n *\n * @param {JitsiLocalTrack} localTrack\n */\nTraceablePeerConnection.prototype.getLocalSSRC = function(localTrack) {\n    const ssrcInfo = this._getSSRC(localTrack.rtcId);\n\n    return ssrcInfo && ssrcInfo.ssrcs[0];\n};\n\n/**\n * When doing unified plan simulcast, we'll have a set of ssrcs with the\n * same msid but no ssrc-group, since unified plan signals the simulcast\n * group via the a=simulcast line.  Unfortunately, Jicofo will complain\n * if it sees ssrcs with matching msids but no ssrc-group, so we'll inject\n * an ssrc-group line to make Jicofo happy.\n * NOTE: unlike plan B simulcast, the ssrcs in this inject ssrc-group will\n * NOT necessarily be in order of quality (low to high) because:\n * a) when translating between unified plan and plan b the order of the ssrcs\n * is not preserved and\n * b) it isn't guaranteed that firefox will give them to us in order to begin\n * with\n * @param desc A session description object (with 'type' and 'sdp' fields)\n * @return A session description object with its sdp field modified to\n * contain an inject ssrc-group for simulcast\n */\nTraceablePeerConnection.prototype._injectSsrcGroupForUnifiedSimulcast\n    = function(desc) {\n        const sdp = transform.parse(desc.sdp);\n        const video = sdp.media.find(mline => mline.type === 'video');\n\n        if (video.simulcast_03) {\n            const ssrcs = [];\n\n            video.ssrcs.forEach(ssrc => {\n                if (ssrc.attribute === 'msid') {\n                    ssrcs.push(ssrc.id);\n                }\n            });\n            video.ssrcGroups = video.ssrcGroups || [];\n            if (video.ssrcGroups.find(group => group.semantics === 'SIM')) {\n                // Group already exists, no need to do anything\n                return desc;\n            }\n            video.ssrcGroups.push({\n                semantics: 'SIM',\n                ssrcs: ssrcs.join(' ')\n            });\n        }\n\n        return new RTCSessionDescription({\n            type: desc.type,\n            sdp: transform.write(sdp)\n        });\n    };\n\n/* eslint-disable-next-line vars-on-top */\nconst getters = {\n    signalingState() {\n        return this.peerconnection.signalingState;\n    },\n    iceConnectionState() {\n        return this.peerconnection.iceConnectionState;\n    },\n    localDescription() {\n        let desc = this.peerconnection.localDescription;\n\n        if (!desc) {\n            logger.debug('getLocalDescription no localDescription found');\n\n            return {};\n        }\n\n        this.trace('getLocalDescription::preTransform', dumpSDP(desc));\n\n        // if we're running on FF, transform to Plan B first.\n        if (browser.usesUnifiedPlan()) {\n            desc = this.interop.toPlanB(desc);\n            this.trace('getLocalDescription::postTransform (Plan B)',\n                dumpSDP(desc));\n\n            desc = this._injectSsrcGroupForUnifiedSimulcast(desc);\n            this.trace('getLocalDescription::postTransform (inject ssrc group)',\n                dumpSDP(desc));\n        }\n\n        if (browser.doesVideoMuteByStreamRemove()) {\n            desc = this.localSdpMunger.maybeAddMutedLocalVideoTracksToSDP(desc);\n            logger.debug(\n                'getLocalDescription::postTransform (munge local SDP)', desc);\n        }\n\n        // What comes out of this getter will be signalled over Jingle to\n        // the other peer, so we need to make sure the media direction is\n        // 'sendrecv' because we won't change the direction later and don't want\n        // the other peer to think we can't send or receive.\n        //\n        // Note that the description we set in chrome does have the accurate\n        // direction (e.g. 'recvonly'), since that is technically what is\n        // happening (check setLocalDescription impl).\n        desc = enforceSendRecv(desc);\n\n        // See the method's doc for more info about this transformation.\n        desc = this.localSdpMunger.transformStreamIdentifiers(desc);\n\n        return desc;\n    },\n    remoteDescription() {\n        let desc = this.peerconnection.remoteDescription;\n\n        this.trace('getRemoteDescription::preTransform', dumpSDP(desc));\n\n        // if we're running on FF, transform to Plan B first.\n        if (browser.usesUnifiedPlan()) {\n            desc = this.interop.toPlanB(desc);\n            this.trace(\n                'getRemoteDescription::postTransform (Plan B)', dumpSDP(desc));\n        }\n\n        return desc || {};\n    }\n};\n\nObject.keys(getters).forEach(prop => {\n    Object.defineProperty(\n        TraceablePeerConnection.prototype,\n        prop, {\n            get: getters[prop]\n        }\n    );\n});\n\nTraceablePeerConnection.prototype._getSSRC = function(rtcId) {\n    return this.localSSRCs.get(rtcId);\n};\n\n/**\n * Add {@link JitsiLocalTrack} to this TPC.\n * @param {JitsiLocalTrack} track\n */\nTraceablePeerConnection.prototype.addTrack = function(track) {\n    const rtcId = track.rtcId;\n\n    logger.info(`add ${track} to: ${this}`);\n\n    if (this.localTracks.has(rtcId)) {\n        logger.error(`${track} is already in ${this}`);\n\n        return;\n    }\n\n    this.localTracks.set(rtcId, track);\n\n    const webrtcStream = track.getOriginalStream();\n\n    if (webrtcStream) {\n        this._addStream(webrtcStream);\n\n    // It's not ok for a track to not have a WebRTC stream if:\n    } else if (!browser.doesVideoMuteByStreamRemove()\n                || track.isAudioTrack()\n                || (track.isVideoTrack() && !track.isMuted())) {\n        logger.error(`${this} no WebRTC stream for: ${track}`);\n    }\n\n    // Muted video tracks do not have WebRTC stream\n    if (browser.doesVideoMuteByStreamRemove()\n            && track.isVideoTrack() && track.isMuted()) {\n        const ssrcInfo = this.generateNewStreamSSRCInfo(track);\n\n        this.sdpConsistency.setPrimarySsrc(ssrcInfo.ssrcs[0]);\n        const simGroup\n            = ssrcInfo.groups.find(groupInfo => groupInfo.semantics === 'SIM');\n\n        if (simGroup) {\n            this.simulcast.setSsrcCache(simGroup.ssrcs);\n        }\n        const fidGroups\n            = ssrcInfo.groups.filter(\n                groupInfo => groupInfo.semantics === 'FID');\n\n        if (fidGroups) {\n            const rtxSsrcMapping = new Map();\n\n            fidGroups.forEach(fidGroup => {\n                const primarySsrc = fidGroup.ssrcs[0];\n                const rtxSsrc = fidGroup.ssrcs[1];\n\n                rtxSsrcMapping.set(primarySsrc, rtxSsrc);\n            });\n            this.rtxModifier.setSsrcCache(rtxSsrcMapping);\n        }\n    }\n};\n\n/**\n * Adds local track as part of the unmute operation.\n * @param {JitsiLocalTrack} track the track to be added as part of the unmute\n * operation\n * @return {boolean} <tt>true</tt> if the state of underlying PC has changed and\n * the renegotiation is required or <tt>false</tt> otherwise.\n */\nTraceablePeerConnection.prototype.addTrackUnmute = function(track) {\n    if (!this._assertTrackBelongs('addTrackUnmute', track)) {\n        // Abort\n        return false;\n    }\n\n    logger.info(`Adding ${track} as unmute to ${this}`);\n    const webRtcStream = track.getOriginalStream();\n\n    if (!webRtcStream) {\n        logger.error(\n            `Unable to add ${track} as unmute to ${this} - no WebRTC stream`);\n\n        return false;\n    }\n    this._addStream(webRtcStream);\n\n    return true;\n};\n\n/**\n * Adds WebRTC media stream to the underlying PeerConnection\n * @param {MediaStream} mediaStream\n * @private\n */\nTraceablePeerConnection.prototype._addStream = function(mediaStream) {\n    this.peerconnection.addStream(mediaStream);\n    this._addedStreams.push(mediaStream);\n};\n\n/**\n * Removes WebRTC media stream from the underlying PeerConection\n * @param {MediaStream} mediaStream\n */\nTraceablePeerConnection.prototype._removeStream = function(mediaStream) {\n    if (browser.isFirefox()) {\n        this._handleFirefoxRemoveStream(mediaStream);\n    } else {\n        this.peerconnection.removeStream(mediaStream);\n    }\n    this._addedStreams\n        = this._addedStreams.filter(stream => stream !== mediaStream);\n};\n\n/**\n * This method when called will check if given <tt>localTrack</tt> belongs to\n * this TPC (that it has been previously added using {@link addTrack}). If the\n * track does not belong an error message will be logged.\n * @param {string} methodName the method name that will be logged in an error\n * message\n * @param {JitsiLocalTrack} localTrack\n * @return {boolean} <tt>true</tt> if given local track belongs to this TPC or\n * <tt>false</tt> otherwise.\n * @private\n */\nTraceablePeerConnection.prototype._assertTrackBelongs = function(\n        methodName,\n        localTrack) {\n    const doesBelong = this.localTracks.has(localTrack.rtcId);\n\n    if (!doesBelong) {\n        logger.error(\n            `${methodName}: ${localTrack} does not belong to ${this}`);\n    }\n\n    return doesBelong;\n};\n\n/**\n * Tells if the given WebRTC <tt>MediaStream</tt> has been added to\n * the underlying WebRTC PeerConnection.\n * @param {MediaStream} mediaStream\n * @returns {boolean}\n */\nTraceablePeerConnection.prototype.isMediaStreamInPc = function(mediaStream) {\n    return this._addedStreams.indexOf(mediaStream) > -1;\n};\n\n/**\n * Remove local track from this TPC.\n * @param {JitsiLocalTrack} localTrack the track to be removed from this TPC.\n *\n * FIXME It should probably remove a boolean just like {@link removeTrackMute}\n *       The same applies to addTrack.\n */\nTraceablePeerConnection.prototype.removeTrack = function(localTrack) {\n    const webRtcStream = localTrack.getOriginalStream();\n\n    this.trace(\n        'removeStream',\n        localTrack.rtcId, webRtcStream ? webRtcStream.id : undefined);\n\n    if (!this._assertTrackBelongs('removeStream', localTrack)) {\n        // Abort - nothing to be done here\n        return;\n    }\n    this.localTracks.delete(localTrack.rtcId);\n    this.localSSRCs.delete(localTrack.rtcId);\n\n    if (webRtcStream) {\n        if (browser.isFirefox()) {\n            this._handleFirefoxRemoveStream(webRtcStream);\n        } else {\n            this.peerconnection.removeStream(webRtcStream);\n        }\n    }\n};\n\n/**\n * Removes local track as part of the mute operation.\n * @param {JitsiLocalTrack} localTrack the local track to be remove as part of\n * the mute operation.\n * @return {boolean} <tt>true</tt> if the underlying PeerConnection's state has\n * changed and the renegotiation is required or <tt>false</tt> otherwise.\n */\nTraceablePeerConnection.prototype.removeTrackMute = function(localTrack) {\n    const webRtcStream = localTrack.getOriginalStream();\n\n    this.trace(\n        'removeStreamMute',\n        localTrack.rtcId, webRtcStream ? webRtcStream.id : null);\n\n    if (!this._assertTrackBelongs('removeStreamMute', localTrack)) {\n        // Abort - nothing to be done here\n        return false;\n    }\n\n    if (webRtcStream) {\n        logger.info(\n            `Removing ${localTrack} as mute from ${this}`);\n        this._removeStream(webRtcStream);\n\n        return true;\n    }\n\n    logger.error(`removeStreamMute - no WebRTC stream for ${localTrack}`);\n\n    return false;\n};\n\n/**\n * Remove stream handling for firefox\n * @param stream: webrtc media stream\n */\nTraceablePeerConnection.prototype._handleFirefoxRemoveStream = function(\n        stream) {\n    if (!stream) {\n        // There is nothing to be changed\n        return;\n    }\n    let sender = null;\n\n    // On Firefox we don't replace MediaStreams as this messes up the\n    // m-lines (which can't be removed in Plan Unified) and brings a lot\n    // of complications. Instead, we use the RTPSender and remove just\n    // the track.\n    let track = null;\n\n    if (stream.getAudioTracks() && stream.getAudioTracks().length) {\n        track = stream.getAudioTracks()[0];\n    } else if (stream.getVideoTracks() && stream.getVideoTracks().length) {\n        track = stream.getVideoTracks()[0];\n    }\n\n    if (!track) {\n        logger.error('Cannot remove tracks: no tracks.');\n\n        return;\n    }\n\n    // Find the right sender (for audio or video)\n    this.peerconnection.getSenders().some(s => {\n        if (s.track === track) {\n            sender = s;\n\n            return true;\n        }\n\n        return false;\n    });\n\n    if (sender) {\n        this.peerconnection.removeTrack(sender);\n    } else {\n        logger.log('Cannot remove tracks: no RTPSender.');\n    }\n};\n\nTraceablePeerConnection.prototype.createDataChannel = function(label, opts) {\n    this.trace('createDataChannel', label, opts);\n\n    return this.peerconnection.createDataChannel(label, opts);\n};\n\n/**\n * Ensures that the simulcast ssrc-group appears after any other ssrc-groups\n * in the SDP so that simulcast is properly activated.\n *\n * @param {Object} localSdp the WebRTC session description instance for\n * the local description.\n * @private\n */\nTraceablePeerConnection.prototype._ensureSimulcastGroupIsLast = function(\n        localSdp) {\n    let sdpStr = localSdp.sdp;\n\n    const videoStartIndex = sdpStr.indexOf('m=video');\n    const simStartIndex = sdpStr.indexOf('a=ssrc-group:SIM', videoStartIndex);\n    let otherStartIndex = sdpStr.lastIndexOf('a=ssrc-group');\n\n    if (simStartIndex === -1\n        || otherStartIndex === -1\n        || otherStartIndex === simStartIndex) {\n        return localSdp;\n    }\n\n    const simEndIndex = sdpStr.indexOf('\\r\\n', simStartIndex);\n    const simStr = sdpStr.substring(simStartIndex, simEndIndex + 2);\n\n    sdpStr = sdpStr.replace(simStr, '');\n    otherStartIndex = sdpStr.lastIndexOf('a=ssrc-group');\n    const otherEndIndex = sdpStr.indexOf('\\r\\n', otherStartIndex);\n    const sdpHead = sdpStr.slice(0, otherEndIndex);\n    const simStrTrimmed = simStr.trim();\n    const sdpTail = sdpStr.slice(otherEndIndex);\n\n    sdpStr = `${sdpHead}\\r\\n${simStrTrimmed}${sdpTail}`;\n\n    return new RTCSessionDescription({\n        type: localSdp.type,\n        sdp: sdpStr\n    });\n};\n\n/**\n * Will adjust audio and video media direction in the given SDP object to\n * reflect the current status of the {@link audioTransferActive} and\n * {@link videoTransferActive} flags.\n * @param {Object} localDescription the WebRTC session description instance for\n * the local description.\n * @private\n */\nTraceablePeerConnection.prototype._adjustLocalMediaDirection = function(\n        localDescription) {\n    const transformer = new SdpTransformWrap(localDescription.sdp);\n    let modifiedDirection = false;\n    const audioMedia = transformer.selectMedia('audio');\n\n    if (audioMedia) {\n        const desiredAudioDirection\n            = this._getDesiredMediaDirection(MediaType.AUDIO);\n\n        if (audioMedia.direction !== desiredAudioDirection) {\n            audioMedia.direction = desiredAudioDirection;\n            logger.info(\n                `Adjusted local audio direction to ${desiredAudioDirection}`);\n            modifiedDirection = true;\n        }\n    } else {\n        logger.warn('No \"audio\" media found int the local description');\n    }\n\n    const videoMedia = transformer.selectMedia('video');\n\n    if (videoMedia) {\n        const desiredVideoDirection\n            = this._getDesiredMediaDirection(MediaType.VIDEO);\n\n        if (videoMedia.direction !== desiredVideoDirection) {\n            videoMedia.direction = desiredVideoDirection;\n            logger.info(\n                `Adjusted local video direction to ${desiredVideoDirection}`);\n            modifiedDirection = true;\n        }\n    } else {\n        logger.warn('No \"video\" media found in the local description');\n    }\n\n    if (modifiedDirection) {\n        return new RTCSessionDescription({\n            type: localDescription.type,\n            sdp: transformer.toRawSDP()\n        });\n    }\n\n    return localDescription;\n};\n\nTraceablePeerConnection.prototype.setLocalDescription = function(\n        description,\n        successCallback,\n        failureCallback) {\n    let localSdp = description;\n\n    this.trace('setLocalDescription::preTransform', dumpSDP(localSdp));\n\n    if (this.options.disableH264 || this.options.preferH264) {\n        const parsedSdp = transform.parse(localSdp.sdp);\n        const videoMLine = parsedSdp.media.find(m => m.type === 'video');\n\n        if (this.options.disableH264) {\n            SDPUtil.stripVideoCodec(videoMLine, 'h264');\n        } else {\n            SDPUtil.preferVideoCodec(videoMLine, 'h264');\n        }\n\n        localSdp = new RTCSessionDescription({\n            type: localSdp.type,\n            sdp: transform.write(parsedSdp)\n        });\n\n        this.trace('setLocalDescription::postTransform (H264)',\n            dumpSDP(localSdp));\n    }\n\n    localSdp = this._adjustLocalMediaDirection(localSdp);\n\n    localSdp = this._ensureSimulcastGroupIsLast(localSdp);\n\n    // if we're using unified plan, transform to it first.\n    if (browser.usesUnifiedPlan()) {\n        localSdp = this.interop.toUnifiedPlan(localSdp);\n        this.trace(\n            'setLocalDescription::postTransform (Unified Plan)',\n            dumpSDP(localSdp));\n    }\n\n    this.peerconnection.setLocalDescription(localSdp,\n        () => {\n            this.trace('setLocalDescriptionOnSuccess');\n            const localUfrag = SDPUtil.getUfrag(localSdp.sdp);\n\n            if (localUfrag !== this.localUfrag) {\n                this.localUfrag = localUfrag;\n                this.eventEmitter.emit(\n                    RTCEvents.LOCAL_UFRAG_CHANGED, this, localUfrag);\n            }\n            successCallback();\n        },\n        err => {\n            this.trace('setLocalDescriptionOnFailure', err);\n            this.eventEmitter.emit(\n                RTCEvents.SET_LOCAL_DESCRIPTION_FAILED,\n                err, this);\n            failureCallback(err);\n        }\n    );\n};\n\n/**\n * Enables/disables audio media transmission on this peer connection. When\n * disabled the SDP audio media direction in the local SDP will be adjusted to\n * 'inactive' which means that no data will be sent nor accepted, but\n * the connection should be kept alive.\n * @param {boolean} active <tt>true</tt> to enable video media transmission or\n * <tt>false</tt> to disable. If the value is not a boolean the call will have\n * no effect.\n * @return {boolean} <tt>true</tt> if the value has changed and sRD/sLD cycle\n * needs to be executed in order for the changes to take effect or\n * <tt>false</tt> if the given value was the same as the previous one.\n * @public\n */\nTraceablePeerConnection.prototype.setAudioTransferActive = function(active) {\n    logger.debug(`${this} audio transfer active: ${active}`);\n    const changed = this.audioTransferActive !== active;\n\n    this.audioTransferActive = active;\n\n    return changed;\n};\n\n/**\n * Takes in a *unified plan* offer and inserts the appropriate\n * parameters for adding simulcast receive support.\n * @param {Object} desc - A session description object\n * @param {String} desc.type - the type (offer/answer)\n * @param {String} desc.sdp - the sdp content\n *\n * @return {Object} A session description (same format as above) object\n * with its sdp field modified to advertise simulcast receive support\n */\nTraceablePeerConnection.prototype._insertUnifiedPlanSimulcastReceive\n    = function(desc) {\n        const sdp = transform.parse(desc.sdp);\n        const video = sdp.media.find(mline => mline.type === 'video');\n\n        // In order of lowest to highest spatial quality\n        video.rids = [\n            {\n                id: SIM_LAYER_1_RID,\n                direction: 'recv'\n            },\n            {\n                id: SIM_LAYER_2_RID,\n                direction: 'recv'\n            },\n            {\n                id: SIM_LAYER_3_RID,\n                direction: 'recv'\n            }\n        ];\n        // eslint-disable-next-line camelcase\n        video.simulcast_03 = {\n            value: `recv rid=${SIM_LAYER_RIDS.join(';')}`\n        };\n\n        return new RTCSessionDescription({\n            type: desc.type,\n            sdp: transform.write(sdp)\n        });\n    };\n\nTraceablePeerConnection.prototype.setRemoteDescription = function(\n        description,\n        successCallback,\n        failureCallback) {\n    this.trace('setRemoteDescription::preTransform', dumpSDP(description));\n\n    // TODO the focus should squeze or explode the remote simulcast\n    // eslint-disable-next-line no-param-reassign\n    description = this.simulcast.mungeRemoteDescription(description);\n    this.trace(\n        'setRemoteDescription::postTransform (simulcast)',\n        dumpSDP(description));\n\n    if (this.options.preferH264) {\n        const parsedSdp = transform.parse(description.sdp);\n        const videoMLine = parsedSdp.media.find(m => m.type === 'video');\n\n        SDPUtil.preferVideoCodec(videoMLine, 'h264');\n\n        // eslint-disable-next-line no-param-reassign\n        description = new RTCSessionDescription({\n            type: description.type,\n            sdp: transform.write(parsedSdp)\n        });\n    }\n\n    // If the browser uses unified plan, transform to it first\n    if (browser.usesUnifiedPlan()) {\n        // eslint-disable-next-line no-param-reassign\n        description = new RTCSessionDescription({\n            type: description.type,\n            sdp: this.rtxModifier.stripRtx(description.sdp)\n        });\n\n        this.trace(\n            'setRemoteDescription::postTransform (stripRtx)',\n            dumpSDP(description));\n\n        // eslint-disable-next-line no-param-reassign\n        description = this.interop.toUnifiedPlan(description);\n        this.trace(\n            'setRemoteDescription::postTransform (Plan A)',\n            dumpSDP(description));\n\n        if (this.isSimulcastOn()) {\n            // eslint-disable-next-line no-param-reassign\n            description = this._insertUnifiedPlanSimulcastReceive(description);\n            this.trace(\n                'setRemoteDescription::postTransform (sim receive)',\n                dumpSDP(description));\n        }\n    } else {\n        // Plan B\n        // eslint-disable-next-line no-param-reassign\n        description = normalizePlanB(description);\n    }\n\n    // Safari WebRTC errors when no supported video codec is found in the offer.\n    // To prevent the error, inject H264 into the video mLine.\n    if (browser.isSafariWithWebrtc()) {\n        logger.debug('Maybe injecting H264 into the remote description');\n\n        // eslint-disable-next-line no-param-reassign\n        description = this._injectH264IfNotPresent(description);\n    }\n\n    this.peerconnection.setRemoteDescription(\n        description,\n        () => {\n            this.trace('setRemoteDescriptionOnSuccess');\n            const remoteUfrag = SDPUtil.getUfrag(description.sdp);\n\n            if (remoteUfrag !== this.remoteUfrag) {\n                this.remoteUfrag = remoteUfrag;\n                this.eventEmitter.emit(\n                    RTCEvents.REMOTE_UFRAG_CHANGED, this, remoteUfrag);\n            }\n            successCallback();\n        },\n        err => {\n            this.trace('setRemoteDescriptionOnFailure', err);\n            this.eventEmitter.emit(\n                RTCEvents.SET_REMOTE_DESCRIPTION_FAILED,\n                err,\n                this);\n            failureCallback(err);\n        });\n};\n\n/**\n * Inserts an H264 payload into the description if not already present. This is\n * need for Safari WebRTC, which errors when no supported video codec is found\n * in the offer. Related bug reports:\n * https://bugs.webkit.org/show_bug.cgi?id=173141\n * https://bugs.chromium.org/p/webrtc/issues/detail?id=4957\n *\n * @param {RTCSessionDescription} description - An RTCSessionDescription\n * to inject with an H264 payload.\n * @private\n * @returns {RTCSessionDescription}\n */\nTraceablePeerConnection.prototype._injectH264IfNotPresent = function(\n        description) {\n    const parsedSdp = transform.parse(description.sdp);\n    const videoMLine = parsedSdp.media.find(m => m.type === 'video');\n\n    if (!videoMLine) {\n        logger.debug('No videoMLine found, no need to inject H264.');\n\n        return description;\n    }\n\n    if (videoMLine.rtp.some(rtp => rtp.codec.toLowerCase() === 'h264')) {\n        logger.debug('H264 codec found in video mLine, no need to inject.');\n\n        return description;\n    }\n\n    const { fmtp, payloads, rtp } = videoMLine;\n    const payloadsArray = payloads.toString().split(' ');\n    let dummyPayloadType;\n\n    for (let i = 127; i >= 96; i--) {\n        if (!payloadsArray.includes(i)) {\n            dummyPayloadType = i;\n            payloadsArray.push(i);\n            videoMLine.payloads = payloadsArray.join(' ');\n            break;\n        }\n    }\n\n    if (typeof dummyPayloadType === 'undefined') {\n        logger.error('Could not find valid payload type to inject.');\n\n        return description;\n    }\n\n    rtp.push({\n        codec: 'H264',\n        payload: dummyPayloadType,\n        rate: 90000\n    });\n\n    fmtp.push({\n        config: 'level-asymmetry-allowed=1;'\n            + 'packetization-mode=1;'\n            + 'profile-level-id=42e01f',\n        payload: dummyPayloadType\n    });\n\n    logger.debug(\n        `Injecting H264 payload type ${dummyPayloadType} into video mLine.`);\n\n    return new RTCSessionDescription({\n        type: description.type,\n        sdp: transform.write(parsedSdp)\n    });\n};\n\n/**\n * Enables/disables video media transmission on this peer connection. When\n * disabled the SDP video media direction in the local SDP will be adjusted to\n * 'inactive' which means that no data will be sent nor accepted, but\n * the connection should be kept alive.\n * @param {boolean} active <tt>true</tt> to enable video media transmission or\n * <tt>false</tt> to disable. If the value is not a boolean the call will have\n * no effect.\n * @return {boolean} <tt>true</tt> if the value has changed and sRD/sLD cycle\n * needs to be executed in order for the changes to take effect or\n * <tt>false</tt> if the given value was the same as the previous one.\n * @public\n */\nTraceablePeerConnection.prototype.setVideoTransferActive = function(active) {\n    logger.debug(`${this} video transfer active: ${active}`);\n    const changed = this.videoTransferActive !== active;\n\n    this.videoTransferActive = active;\n\n    return changed;\n};\n\n/**\n * Makes the underlying TraceablePeerConnection generate new SSRC for\n * the recvonly video stream.\n */\nTraceablePeerConnection.prototype.generateRecvonlySsrc = function() {\n    const newSSRC = SDPUtil.generateSsrc();\n\n    logger.info(`${this} generated new recvonly SSRC: ${newSSRC}`);\n    this.sdpConsistency.setPrimarySsrc(newSSRC);\n};\n\n/**\n * Makes the underlying TraceablePeerConnection forget the current primary video\n * SSRC.\n */\nTraceablePeerConnection.prototype.clearRecvonlySsrc = function() {\n    logger.info('Clearing primary video SSRC!');\n    this.sdpConsistency.clearVideoSsrcCache();\n};\n\n/**\n * Closes underlying WebRTC PeerConnection instance and removes all remote\n * tracks by emitting {@link RTCEvents.REMOTE_TRACK_REMOVED} for each one of\n * them.\n */\nTraceablePeerConnection.prototype.close = function() {\n    this.trace('stop');\n\n    // Off SignalingEvents\n    this.signalingLayer.off(\n        SignalingEvents.PEER_MUTED_CHANGED, this._peerMutedChanged);\n    this.signalingLayer.off(\n        SignalingEvents.PEER_VIDEO_TYPE_CHANGED, this._peerVideoTypeChanged);\n\n    for (const peerTracks of this.remoteTracks.values()) {\n        for (const remoteTrack of peerTracks.values()) {\n            this._removeRemoteTrack(remoteTrack);\n        }\n    }\n    this.remoteTracks.clear();\n\n    this._addedStreams = [];\n\n    if (!this.rtc._removePeerConnection(this)) {\n        logger.error('RTC._removePeerConnection returned false');\n    }\n    if (this.statsinterval !== null) {\n        window.clearInterval(this.statsinterval);\n        this.statsinterval = null;\n    }\n    logger.info(`Closing ${this}...`);\n    this.peerconnection.close();\n};\n\n/**\n * Modifies the values of the setup attributes (defined by\n * {@link http://tools.ietf.org/html/rfc4145#section-4}) of a specific SDP\n * answer in order to overcome a delay of 1 second in the connection\n * establishment between Chrome and Videobridge.\n *\n * @param {SDP} offer - the SDP offer to which the specified SDP answer is\n * being prepared to respond\n * @param {SDP} answer - the SDP to modify\n * @private\n */\nconst _fixAnswerRFC4145Setup = function(offer, answer) {\n    if (!browser.isChrome()) {\n        // It looks like Firefox doesn't agree with the fix (at least in its\n        // current implementation) because it effectively remains active even\n        // after we tell it to become passive. Apart from Firefox which I tested\n        // after the fix was deployed, I tested Chrome only. In order to prevent\n        // issues with other browsers, limit the fix to Chrome for the time\n        // being.\n        return;\n    }\n\n    // XXX Videobridge is the (SDP) offerer and WebRTC (e.g. Chrome) is the\n    // answerer (as orchestrated by Jicofo). In accord with\n    // http://tools.ietf.org/html/rfc5245#section-5.2 and because both peers\n    // are ICE FULL agents, Videobridge will take on the controlling role and\n    // WebRTC will take on the controlled role. In accord with\n    // https://tools.ietf.org/html/rfc5763#section-5, Videobridge will use the\n    // setup attribute value of setup:actpass and WebRTC will be allowed to\n    // choose either the setup attribute value of setup:active or\n    // setup:passive. Chrome will by default choose setup:active because it is\n    // RECOMMENDED by the respective RFC since setup:passive adds additional\n    // latency. The case of setup:active allows WebRTC to send a DTLS\n    // ClientHello as soon as an ICE connectivity check of its succeeds.\n    // Unfortunately, Videobridge will be unable to respond immediately because\n    // may not have WebRTC's answer or may have not completed the ICE\n    // connectivity establishment. Even more unfortunate is that in the\n    // described scenario Chrome's DTLS implementation will insist on\n    // retransmitting its ClientHello after a second (the time is in accord\n    // with the respective RFC) and will thus cause the whole connection\n    // establishment to exceed at least 1 second. To work around Chrome's\n    // idiosyncracy, don't allow it to send a ClientHello i.e. change its\n    // default choice of setup:active to setup:passive.\n    if (offer && answer\n            && offer.media && answer.media\n            && offer.media.length === answer.media.length) {\n        answer.media.forEach((a, i) => {\n            if (SDPUtil.findLine(\n                    offer.media[i],\n                    'a=setup:actpass',\n                    offer.session)) {\n                answer.media[i]\n                    = a.replace(/a=setup:active/g, 'a=setup:passive');\n            }\n        });\n        answer.raw = answer.session + answer.media.join('');\n    }\n};\n\nTraceablePeerConnection.prototype.createAnswer = function(\n        successCallback,\n        failureCallback,\n        constraints) {\n    if (browser.supportsRtpSender() && this.isSimulcastOn()) {\n        const videoSender\n            = this.peerconnection.getSenders().find(sender =>\n                sender.track.kind === 'video');\n        const simParams = {\n            encodings: [\n                {\n                    rid: SIM_LAYER_1_RID,\n                    scaleResolutionDownBy: 4\n                },\n                {\n                    rid: SIM_LAYER_2_RID,\n                    scaleResolutionDownBy: 2\n                },\n                {\n                    rid: SIM_LAYER_3_RID\n                }\n            ]\n        };\n\n        videoSender.setParameters(simParams);\n    }\n    this._createOfferOrAnswer(\n        false /* answer */, successCallback, failureCallback, constraints);\n};\n\nTraceablePeerConnection.prototype.createOffer = function(\n        successCallback,\n        failureCallback,\n        constraints) {\n    this._createOfferOrAnswer(\n        true /* offer */, successCallback, failureCallback, constraints);\n};\n\n/* eslint-disable max-params */\n\nTraceablePeerConnection.prototype._createOfferOrAnswer = function(\n        isOffer,\n        successCallback,\n        failureCallback,\n        constraints) {\n    const logName = isOffer ? 'Offer' : 'Answer';\n\n    this.trace(`create${logName}`, JSON.stringify(constraints, null, ' '));\n\n    const _successCallback = resultSdp => {\n        try {\n            this.trace(\n                `create${logName}OnSuccess::preTransform`, dumpSDP(resultSdp));\n\n            // if we're using unified plan, transform to Plan B.\n            if (browser.usesUnifiedPlan()) {\n                // eslint-disable-next-line no-param-reassign\n                resultSdp = this.interop.toPlanB(resultSdp);\n                this.trace(\n                    `create${logName}OnSuccess::postTransform (Plan B)`,\n                    dumpSDP(resultSdp));\n                if (this.isSimulcastOn()) {\n                    // eslint-disable-next-line no-param-reassign\n                    resultSdp\n                        = this._injectSsrcGroupForUnifiedSimulcast(resultSdp);\n                    this.trace(\n                        `create${logName}OnSuccess::postTransform`\n                        + '(inject ssrc group)', dumpSDP(resultSdp));\n                }\n            }\n\n            /**\n             * We don't keep ssrcs consitent for Firefox because rewriting\n             *  the ssrcs between createAnswer and setLocalDescription breaks\n             *  the caching in sdp-interop (sdp-interop must know about all\n             *  ssrcs, and it updates its cache in toPlanB so if we rewrite them\n             *  after that, when we try and go back to unified plan it will\n             *  complain about unmapped ssrcs)\n             */\n            if (!browser.isFirefox()) {\n                // If there are no local video tracks, then a \"recvonly\"\n                // SSRC needs to be generated\n                if (!this.hasAnyTracksOfType(MediaType.VIDEO)\n                    && !this.sdpConsistency.hasPrimarySsrcCached()) {\n                    this.generateRecvonlySsrc();\n                }\n\n                // eslint-disable-next-line no-param-reassign\n                resultSdp = new RTCSessionDescription({\n                    type: resultSdp.type,\n                    sdp: this.sdpConsistency.makeVideoPrimarySsrcsConsistent(\n                        resultSdp.sdp)\n                });\n\n                this.trace(\n                    `create${logName}OnSuccess::postTransform `\n                         + '(make primary audio/video ssrcs consistent)',\n                    dumpSDP(resultSdp));\n            }\n\n            // Add simulcast streams if simulcast is enabled\n            if (this.isSimulcastOn()) {\n\n                // eslint-disable-next-line no-param-reassign\n                resultSdp = this.simulcast.mungeLocalDescription(resultSdp);\n                this.trace(\n                    `create${logName}`\n                        + 'OnSuccess::postTransform (simulcast)',\n                    dumpSDP(resultSdp));\n            }\n\n            if (!this.options.disableRtx && browser.supportsRtx()) {\n                // eslint-disable-next-line no-param-reassign\n                resultSdp = new RTCSessionDescription({\n                    type: resultSdp.type,\n                    sdp: this.rtxModifier.modifyRtxSsrcs(resultSdp.sdp)\n                });\n\n                this.trace(\n                    `create${logName}`\n                         + 'OnSuccess::postTransform (rtx modifier)',\n                    dumpSDP(resultSdp));\n            }\n\n            // Fix the setup attribute (see _fixAnswerRFC4145Setup for\n            //  details)\n            if (!isOffer) {\n                const remoteDescription\n                    = new SDP(this.remoteDescription.sdp);\n                const localDescription = new SDP(resultSdp.sdp);\n\n                _fixAnswerRFC4145Setup(remoteDescription, localDescription);\n\n                // eslint-disable-next-line no-param-reassign\n                resultSdp = new RTCSessionDescription({\n                    type: resultSdp.type,\n                    sdp: localDescription.raw\n                });\n            }\n\n            const ssrcMap = extractSSRCMap(resultSdp);\n\n            logger.debug('Got local SSRCs MAP: ', ssrcMap);\n            this._processLocalSSRCsMap(ssrcMap);\n\n            successCallback(resultSdp);\n        } catch (e) {\n            this.trace(`create${logName}OnError`, e);\n            this.trace(`create${logName}OnError`, dumpSDP(resultSdp));\n            logger.error(`create${logName}OnError`, e, dumpSDP(resultSdp));\n            failureCallback(e);\n        }\n    };\n\n    const _errorCallback = err => {\n        this.trace(`create${logName}OnFailure`, err);\n        const eventType\n            = isOffer\n                ? RTCEvents.CREATE_OFFER_FAILED\n                : RTCEvents.CREATE_ANSWER_FAILED;\n\n        this.eventEmitter.emit(eventType, err, this);\n        failureCallback(err);\n    };\n\n    // NOTE Temasys plugin does not support \"bind\" on peerconnection methods\n    if (isOffer) {\n        this.peerconnection.createOffer(\n            _successCallback, _errorCallback, constraints);\n    } else {\n        this.peerconnection.createAnswer(\n            _successCallback, _errorCallback, constraints);\n    }\n};\n\n/* eslint-enable max-params */\n\n/**\n * Extract primary SSRC from given {@link TrackSSRCInfo} object.\n * @param {TrackSSRCInfo} ssrcObj\n * @return {number|null} the primary SSRC or <tt>null</tt>\n */\nfunction extractPrimarySSRC(ssrcObj) {\n    if (ssrcObj && ssrcObj.groups && ssrcObj.groups.length) {\n        return ssrcObj.groups[0].ssrcs[0];\n    } else if (ssrcObj && ssrcObj.ssrcs && ssrcObj.ssrcs.length) {\n        return ssrcObj.ssrcs[0];\n    }\n\n    return null;\n}\n\n/**\n * Goes over the SSRC map extracted from the latest local description and tries\n * to match them with the local tracks (by MSID). Will update the values\n * currently stored in the {@link TraceablePeerConnection.localSSRCs} map.\n * @param {Map<string,TrackSSRCInfo>} ssrcMap\n * @private\n */\nTraceablePeerConnection.prototype._processLocalSSRCsMap = function(ssrcMap) {\n    for (const track of this.localTracks.values()) {\n        const trackMSID = track.getMSID();\n\n        if (ssrcMap.has(trackMSID)) {\n            const newSSRC = ssrcMap.get(trackMSID);\n\n            if (!newSSRC) {\n                logger.error(`No SSRC found for: ${trackMSID} in ${this}`);\n\n                return;\n            }\n            const oldSSRC = this.localSSRCs.get(track.rtcId);\n            const newSSRCNum = extractPrimarySSRC(newSSRC);\n            const oldSSRCNum = extractPrimarySSRC(oldSSRC);\n\n            // eslint-disable-next-line no-negated-condition\n            if (newSSRCNum !== oldSSRCNum) {\n                if (oldSSRCNum === null) {\n                    logger.info(\n                        `Storing new local SSRC for ${track} in ${this}`,\n                        newSSRC);\n                } else {\n                    logger.error(\n                        `Overwriting SSRC for ${track} ${trackMSID} in ${this\n                        } with: `, newSSRC);\n                }\n                this.localSSRCs.set(track.rtcId, newSSRC);\n\n                this.eventEmitter.emit(\n                    RTCEvents.LOCAL_TRACK_SSRC_UPDATED, track, newSSRCNum);\n            } else {\n                logger.debug(\n                    `The local SSRC(${newSSRCNum}) for ${track} ${trackMSID}`\n                     + `is still up to date in ${this}`);\n            }\n        } else {\n            logger.warn(`No local track matched with: ${trackMSID} in ${this}`);\n        }\n    }\n};\n\nTraceablePeerConnection.prototype.addIceCandidate = function(\n        candidate,\n        successCallback,\n        failureCallback) {\n    // var self = this;\n\n    // Calling JSON.stringify with temasys objects causes a stack overflow, so\n    // instead pick out values to log.\n    this.trace('addIceCandidate', JSON.stringify({\n        candidate: candidate.candidate,\n        sdpMid: candidate.sdpMid,\n        sdpMLineIndex: candidate.sdpMLineIndex,\n        usernameFragment: candidate.usernameFragment\n    }, null, ' '));\n    this.peerconnection.addIceCandidate(\n        candidate, successCallback, failureCallback);\n\n    /* maybe later\n     this.peerconnection.addIceCandidate(candidate,\n     function () {\n     self.trace('addIceCandidateOnSuccess');\n     successCallback();\n     },\n     function (err) {\n     self.trace('addIceCandidateOnFailure', err);\n     failureCallback(err);\n     }\n     );\n     */\n};\n\n/**\n * Obtains call-related stats from the peer connection.\n *\n * @param {Function} callback - The function to invoke after successfully\n * obtaining stats.\n * @param {Function} errback - The function to invoke after failing to obtain\n * stats.\n * @returns {void}\n */\nTraceablePeerConnection.prototype.getStats = function(callback, errback) {\n    // TODO: Is this the correct way to handle Opera, Temasys?\n    // TODO (brian): After moving all browsers to adapter, check if adapter is\n    // accounting for different getStats apis, making the browser-checking-if\n    // unnecessary.\n    if (browser.isTemasysPluginUsed()\n        || browser.isReactNative()) {\n        this.peerconnection.getStats(\n            null,\n            callback,\n            errback || (() => {\n\n                // Making sure that getStats won't fail if error callback is\n                // not passed.\n            }));\n    } else if (browser.isSafariWithWebrtc() || browser.isFirefox()) {\n        // uses the new Promise based getStats\n        this.peerconnection.getStats()\n            .then(callback)\n            .catch(errback || (() => {\n\n                // Making sure that getStats won't fail if error callback is\n                // not passed.\n            }));\n    } else {\n        this.peerconnection.getStats(callback);\n    }\n};\n\n/**\n * Generates and stores new SSRC info object for given local track.\n * The method should be called only for a video track being added to this TPC\n * in the muted state (given that the current browser uses this strategy).\n * @param {JitsiLocalTrack} track\n * @return {TPCSSRCInfo}\n */\nTraceablePeerConnection.prototype.generateNewStreamSSRCInfo = function(track) {\n    const rtcId = track.rtcId;\n    let ssrcInfo = this._getSSRC(rtcId);\n\n    if (ssrcInfo) {\n        logger.error(`Will overwrite local SSRCs for track ID: ${rtcId}`);\n    }\n    if (this.isSimulcastOn()) {\n        ssrcInfo = {\n            ssrcs: [],\n            groups: []\n        };\n        for (let i = 0; i < SIMULCAST_LAYERS; i++) {\n            ssrcInfo.ssrcs.push(SDPUtil.generateSsrc());\n        }\n        ssrcInfo.groups.push({\n            ssrcs: ssrcInfo.ssrcs.slice(),\n            semantics: 'SIM'\n        });\n    } else {\n        ssrcInfo = {\n            ssrcs: [ SDPUtil.generateSsrc() ],\n            groups: []\n        };\n    }\n    if (!this.options.disableRtx && browser.supportsRtx()) {\n        // Specifically use a for loop here because we'll\n        //  be adding to the list we're iterating over, so we\n        //  only want to iterate through the items originally\n        //  on the list\n        const currNumSsrcs = ssrcInfo.ssrcs.length;\n\n        for (let i = 0; i < currNumSsrcs; ++i) {\n            const primarySsrc = ssrcInfo.ssrcs[i];\n            const rtxSsrc = SDPUtil.generateSsrc();\n\n            ssrcInfo.ssrcs.push(rtxSsrc);\n            ssrcInfo.groups.push({\n                ssrcs: [ primarySsrc, rtxSsrc ],\n                semantics: 'FID'\n            });\n        }\n    }\n    ssrcInfo.msid = track.storedMSID;\n    this.localSSRCs.set(rtcId, ssrcInfo);\n\n    return ssrcInfo;\n};\n\n/**\n * Creates a text representation of this <tt>TraceablePeerConnection</tt>\n * instance.\n * @return {string}\n */\nTraceablePeerConnection.prototype.toString = function() {\n    return `TPC[${this.id},p2p:${this.isP2P}]`;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/TraceablePeerConnection.js","import { createTtfmEvent } from '../../service/statistics/AnalyticsEvents';\nimport JitsiTrack from './JitsiTrack';\nimport * as JitsiTrackEvents from '../../JitsiTrackEvents';\nimport browser from '../browser';\nimport Statistics from '../statistics/statistics';\n\nconst logger = require('jitsi-meet-logger').getLogger(__filename);\nconst RTCEvents = require('../../service/RTC/RTCEvents');\n\nlet ttfmTrackerAudioAttached = false;\nlet ttfmTrackerVideoAttached = false;\n\n/* eslint-disable max-params */\n\n/**\n * Represents a single media track (either audio or video).\n */\nexport default class JitsiRemoteTrack extends JitsiTrack {\n    /**\n     * Creates new JitsiRemoteTrack instance.\n     * @param {RTC} rtc the RTC service instance.\n     * @param {JitsiConference} conference the conference to which this track\n     *        belongs to\n     * @param {string} ownerEndpointId the endpoint ID of the track owner\n     * @param {MediaStream} stream WebRTC MediaStream, parent of the track\n     * @param {MediaStreamTrack} track underlying WebRTC MediaStreamTrack for\n     *        the new JitsiRemoteTrack\n     * @param {MediaType} mediaType the type of the media\n     * @param {VideoType} videoType the type of the video if applicable\n     * @param {number} ssrc the SSRC number of the Media Stream\n     * @param {boolean} muted the initial muted state\n     * @param {boolean} isP2P indicates whether or not this track belongs to a\n     * P2P session\n     * @throws {TypeError} if <tt>ssrc</tt> is not a number.\n     * @constructor\n     */\n    constructor(\n            rtc,\n            conference,\n            ownerEndpointId,\n            stream,\n            track,\n            mediaType,\n            videoType,\n            ssrc,\n            muted,\n            isP2P) {\n        super(\n            conference,\n            stream,\n            track,\n            () => {\n                // Nothing to do if the track is inactive.\n            },\n            mediaType,\n            videoType);\n        this.rtc = rtc;\n\n        // Prevent from mixing up type of SSRC which should be a number\n        if (typeof ssrc !== 'number') {\n            throw new TypeError(`SSRC ${ssrc} is not a number`);\n        }\n        this.ssrc = ssrc;\n        this.ownerEndpointId = ownerEndpointId;\n        this.muted = muted;\n        this.isP2P = isP2P;\n\n        // we want to mark whether the track has been ever muted\n        // to detect ttfm events for startmuted conferences, as it can\n        // significantly increase ttfm values\n        this.hasBeenMuted = muted;\n\n        // Bind 'onmute' and 'onunmute' event handlers\n        if (this.rtc && this.track) {\n            this._bindMuteHandlers();\n        }\n    }\n\n    /* eslint-enable max-params */\n    /**\n     * Attaches the track muted handlers.\n     *\n     * @returns {void}\n     */\n    _bindMuteHandlers() {\n        // Use feature detection for finding what event handling function is\n        // supported. On Internet Explorer, which uses uses temasys/firebreath,\n        // the track will have attachEvent instead of addEventListener.\n        //\n        // FIXME it would be better to use recently added '_setHandler' method,\n        // but:\n        // 1. It does not allow to set more than one handler to the event\n        // 2. It does mix MediaStream('inactive') with MediaStreamTrack events\n        // 3. Allowing to bind more than one event handler requires too much\n        //    refactoring around camera issues detection.\n        if (this.track.addEventListener) {\n            this.track.addEventListener('mute', () => this._onTrackMute());\n            this.track.addEventListener('unmute', () => this._onTrackUnmute());\n        } else if (this.track.attachEvent) {\n            // FIXME Internet Explorer is not emitting out mute/unmute events.\n            this.track.attachEvent('onmute', () => this._onTrackMute());\n            this.track.attachEvent('onunmute', () => this._onTrackUnmute());\n        }\n    }\n\n    /**\n     * Callback invoked when the track is muted. Emits an event notifying\n     * listeners of the mute event.\n     *\n     * @private\n     * @returns {void}\n     */\n    _onTrackMute() {\n        logger.debug(\n            `\"onmute\" event(${Date.now()}): `,\n            this.getParticipantId(), this.getType(), this.getSSRC());\n\n        this.rtc.eventEmitter.emit(RTCEvents.REMOTE_TRACK_MUTE, this);\n    }\n\n    /**\n     * Callback invoked when the track is unmuted. Emits an event notifying\n     * listeners of the mute event.\n     *\n     * @private\n     * @returns {void}\n     */\n    _onTrackUnmute() {\n        logger.debug(\n            `\"onunmute\" event(${Date.now()}): `,\n            this.getParticipantId(), this.getType(), this.getSSRC());\n\n        this.rtc.eventEmitter.emit(RTCEvents.REMOTE_TRACK_UNMUTE, this);\n    }\n\n    /**\n     * Sets current muted status and fires an events for the change.\n     * @param value the muted status.\n     */\n    setMute(value) {\n        if (this.muted === value) {\n            return;\n        }\n\n        if (value) {\n            this.hasBeenMuted = true;\n        }\n\n        // we can have a fake video stream\n        if (this.stream) {\n            this.stream.muted = value;\n        }\n\n        this.muted = value;\n        this.emit(JitsiTrackEvents.TRACK_MUTE_CHANGED, this);\n    }\n\n    /**\n     * Returns the current muted status of the track.\n     * @returns {boolean|*|JitsiRemoteTrack.muted} <tt>true</tt> if the track is\n     * muted and <tt>false</tt> otherwise.\n     */\n    isMuted() {\n        return this.muted;\n    }\n\n    /**\n     * Returns the participant id which owns the track.\n     *\n     * @returns {string} the id of the participants. It corresponds to the\n     * Colibri endpoint id/MUC nickname in case of Jitsi-meet.\n     */\n    getParticipantId() {\n        return this.ownerEndpointId;\n    }\n\n    /**\n     * Return false;\n     */\n    isLocal() {\n        return false;\n    }\n\n    /**\n     * Returns the synchronization source identifier (SSRC) of this remote\n     * track.\n     *\n     * @returns {number} the SSRC of this remote track.\n     */\n    getSSRC() {\n        return this.ssrc;\n    }\n\n    /**\n     * Changes the video type of the track.\n     *\n     * @param {string} type - The new video type(\"camera\", \"desktop\").\n     */\n    _setVideoType(type) {\n        if (this.videoType === type) {\n            return;\n        }\n        this.videoType = type;\n        this.emit(JitsiTrackEvents.TRACK_VIDEOTYPE_CHANGED, type);\n    }\n\n    /**\n     * Handles track play events.\n     */\n    _playCallback() {\n        const type = this.isVideoTrack() ? 'video' : 'audio';\n\n        const now = window.performance.now();\n\n        console.log(`(TIME) Render ${type}:\\t`, now);\n        this.conference.getConnectionTimes()[`${type}.render`] = now;\n\n        // The conference can be started without calling GUM\n        // FIXME if there would be a module for connection times this kind\n        // of logic (gumDuration or ttfm) should end up there\n        const gumStart = window.connectionTimes['obtainPermissions.start'];\n        const gumEnd = window.connectionTimes['obtainPermissions.end'];\n        const gumDuration\n            = !isNaN(gumEnd) && !isNaN(gumStart) ? gumEnd - gumStart : 0;\n\n        // Subtract the muc.joined-to-session-initiate duration because jicofo\n        // waits until there are 2 participants to start Jingle sessions.\n        const ttfm = now\n            - (this.conference.getConnectionTimes()['session.initiate']\n                - this.conference.getConnectionTimes()['muc.joined'])\n            - gumDuration;\n\n        this.conference.getConnectionTimes()[`${type}.ttfm`] = ttfm;\n        console.log(`(TIME) TTFM ${type}:\\t`, ttfm);\n\n        Statistics.sendAnalytics(createTtfmEvent(\n            {\n                'media_type': type,\n                muted: this.hasBeenMuted,\n                value: ttfm\n            }));\n\n    }\n\n    /**\n     * Attach time to first media tracker only if there is conference and only\n     * for the first element.\n     * @param container the HTML container which can be 'video' or 'audio'\n     * element. It can also be 'object' element if Temasys plugin is in use and\n     * this method has been called previously on video or audio HTML element.\n     * @private\n     */\n    _attachTTFMTracker(container) {\n        if ((ttfmTrackerAudioAttached && this.isAudioTrack())\n            || (ttfmTrackerVideoAttached && this.isVideoTrack())) {\n            return;\n        }\n\n        if (this.isAudioTrack()) {\n            ttfmTrackerAudioAttached = true;\n        }\n        if (this.isVideoTrack()) {\n            ttfmTrackerVideoAttached = true;\n        }\n\n        if (browser.isTemasysPluginUsed()) {\n            // XXX Don't require Temasys unless it's to be used because it\n            // doesn't run on React Native, for example.\n            const AdapterJS = require('./adapter.screenshare');\n\n            // FIXME: this is not working for IE11\n            AdapterJS.addEvent(\n                container,\n                'play',\n                this._playCallback.bind(this));\n        } else {\n            container.addEventListener(\n                'canplay',\n                this._playCallback.bind(this));\n        }\n    }\n\n    /**\n     * Creates a text representation of this remote track instance.\n     * @return {string}\n     */\n    toString() {\n        return `RemoteTrack[${\n            this.ownerEndpointId}, ${\n            this.getType()}, p2p: ${\n            this.isP2P}]`;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/JitsiRemoteTrack.js","/* global __filename */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport * as MediaType from '../../service/RTC/MediaType';\nimport { SdpTransformWrap } from '../xmpp/SdpTransformUtil';\n\nconst logger = getLogger(__filename);\n\n/**\n * Fakes local SDP exposed to {@link JingleSessionPC} through the local\n * description getter. Modifies the SDP, so that it will contain muted local\n * video tracks description, even though their underlying {MediaStreamTrack}s\n * are no longer in the WebRTC peerconnection. That prevents from SSRC updates\n * being sent to Jicofo/remote peer and prevents sRD/sLD cycle on the remote\n * side.\n */\nexport default class LocalSdpMunger {\n\n    /**\n     * Creates new <tt>LocalSdpMunger</tt> instance.\n     *\n     * @param {TraceablePeerConnection} tpc\n     */\n    constructor(tpc) {\n        this.tpc = tpc;\n    }\n\n    /**\n     * Makes sure that muted local video tracks associated with the parent\n     * {@link TraceablePeerConnection} are described in the local SDP. It's done\n     * in order to prevent from sending 'source-remove'/'source-add' Jingle\n     * notifications when local video track is muted (<tt>MediaStream</tt> is\n     * removed from the peerconnection).\n     *\n     * NOTE 1 video track is assumed\n     *\n     * @param {SdpTransformWrap} transformer the transformer instance which will\n     * be used to process the SDP.\n     * @return {boolean} <tt>true</tt> if there were any modifications to\n     * the SDP wrapped by <tt>transformer</tt>.\n     * @private\n     */\n    _addMutedLocalVideoTracksToSDP(transformer) {\n        // Go over each video tracks and check if the SDP has to be changed\n        const localVideos = this.tpc.getLocalTracks(MediaType.VIDEO);\n\n        if (!localVideos.length) {\n            return false;\n        } else if (localVideos.length !== 1) {\n            logger.error(\n                `${this.tpc} there is more than 1 video track ! `\n                    + 'Strange things may happen !', localVideos);\n        }\n\n        const videoMLine = transformer.selectMedia('video');\n\n        if (!videoMLine) {\n            logger.debug(\n                `${this.tpc} unable to hack local video track SDP`\n                    + '- no \"video\" media');\n\n            return false;\n        }\n\n        let modified = false;\n\n        for (const videoTrack of localVideos) {\n            const muted = videoTrack.isMuted();\n            const mediaStream = videoTrack.getOriginalStream();\n\n            // During the mute/unmute operation there are periods of time when\n            // the track's underlying MediaStream is not added yet to\n            // the PeerConnection. The SDP needs to be munged in such case.\n            const isInPeerConnection\n                = mediaStream && this.tpc.isMediaStreamInPc(mediaStream);\n            const shouldFakeSdp = muted || !isInPeerConnection;\n\n            logger.debug(\n                `${this.tpc} ${videoTrack} muted: ${\n                    muted}, is in PeerConnection: ${\n                    isInPeerConnection} => should fake sdp ? : ${\n                    shouldFakeSdp}`);\n\n            if (!shouldFakeSdp) {\n                continue; // eslint-disable-line no-continue\n            }\n\n            // Inject removed SSRCs\n            const requiredSSRCs\n                = this.tpc.isSimulcastOn()\n                    ? this.tpc.simulcast.ssrcCache\n                    : [ this.tpc.sdpConsistency.cachedPrimarySsrc ];\n\n            if (!requiredSSRCs.length) {\n                logger.error(\n                    `No SSRCs stored for: ${videoTrack} in ${this.tpc}`);\n\n                continue; // eslint-disable-line no-continue\n            }\n\n            modified = true;\n\n            // We need to fake sendrecv.\n            // NOTE the SDP produced here goes only to Jicofo and is never set\n            // as localDescription. That's why\n            // TraceablePeerConnection.mediaTransferActive is ignored here.\n            videoMLine.direction = 'sendrecv';\n\n            // Check if the recvonly has MSID\n            const primarySSRC = requiredSSRCs[0];\n\n            // FIXME The cname could come from the stream, but may turn out to\n            // be too complex. It is fine to come up with any value, as long as\n            // we only care about the actual SSRC values when deciding whether\n            // or not an update should be sent.\n            const primaryCname = `injected-${primarySSRC}`;\n\n            for (const ssrcNum of requiredSSRCs) {\n                // Remove old attributes\n                videoMLine.removeSSRC(ssrcNum);\n\n                // Inject\n                logger.debug(\n                    `${this.tpc} injecting video SSRC: ${ssrcNum} for ${\n                        videoTrack}`);\n                videoMLine.addSSRCAttribute({\n                    id: ssrcNum,\n                    attribute: 'cname',\n                    value: primaryCname\n                });\n                videoMLine.addSSRCAttribute({\n                    id: ssrcNum,\n                    attribute: 'msid',\n                    value: videoTrack.storedMSID\n                });\n            }\n            if (requiredSSRCs.length > 1) {\n                const group = {\n                    ssrcs: requiredSSRCs.join(' '),\n                    semantics: 'SIM'\n                };\n\n                if (!videoMLine.findGroup(group.semantics, group.ssrcs)) {\n                    // Inject the group\n                    logger.debug(\n                        `${this.tpc} injecting SIM group for ${videoTrack}`,\n                        group);\n                    videoMLine.addSSRCGroup(group);\n                }\n            }\n\n            // Insert RTX\n            // FIXME in P2P RTX is used by Chrome regardless of config option\n            // status. Because of that 'source-remove'/'source-add'\n            // notifications are still sent to remove/add RTX SSRC and FID group\n            if (!this.tpc.options.disableRtx) {\n                this.tpc.rtxModifier.modifyRtxSsrcs2(videoMLine);\n            }\n        }\n\n        return modified;\n    }\n\n    /**\n     * Modifies 'cname', 'msid', 'label' and 'mslabel' by appending\n     * the id of {@link LocalSdpMunger#tpc} at the end, preceding by a dash\n     * sign.\n     *\n     * @param {MLineWrap} mediaSection - The media part (audio or video) of the\n     * session description which will be modified in place.\n     * @returns {void}\n     * @private\n     */\n    _transformMediaIdentifiers(mediaSection) {\n        const pcId = this.tpc.id;\n\n        for (const ssrcLine of mediaSection.ssrcs) {\n            switch (ssrcLine.attribute) {\n            case 'cname':\n            case 'label':\n            case 'mslabel':\n                ssrcLine.value = ssrcLine.value && `${ssrcLine.value}-${pcId}`;\n                break;\n            case 'msid': {\n                if (ssrcLine.value) {\n                    const streamAndTrackIDs = ssrcLine.value.split(' ');\n\n                    if (streamAndTrackIDs.length === 2) {\n                        const streamId = streamAndTrackIDs[0];\n                        const trackId = streamAndTrackIDs[1];\n\n                        ssrcLine.value\n                            = `${streamId}-${pcId} ${trackId}-${pcId}`;\n                    } else {\n                        logger.warn(\n                            'Unable to munge local MSID'\n                                + `- weird format detected: ${ssrcLine.value}`);\n                    }\n                }\n                break;\n            }\n            }\n        }\n    }\n\n    /**\n     * Maybe modifies local description to fake local video tracks SDP when\n     * those are muted.\n     *\n     * @param {object} desc the WebRTC SDP object instance for the local\n     * description.\n     * @returns {RTCSessionDescription}\n     */\n    maybeAddMutedLocalVideoTracksToSDP(desc) {\n        if (!desc) {\n            throw new Error('No local description passed in.');\n        }\n\n        const transformer = new SdpTransformWrap(desc.sdp);\n\n        if (this._addMutedLocalVideoTracksToSDP(transformer)) {\n            return new RTCSessionDescription({\n                type: desc.type,\n                sdp: transformer.toRawSDP()\n            });\n        }\n\n        return desc;\n    }\n\n    /**\n     * This transformation will make sure that stream identifiers are unique\n     * across all of the local PeerConnections even if the same stream is used\n     * by multiple instances at the same time.\n     * Each PeerConnection assigns different SSRCs to the same local\n     * MediaStream, but the MSID remains the same as it's used to identify\n     * the stream by the WebRTC backend. The transformation will append\n     * {@link TraceablePeerConnection#id} at the end of each stream's identifier\n     * (\"cname\", \"msid\", \"label\" and \"mslabel\").\n     *\n     * @param {RTCSessionDescription} sessionDesc - The local session\n     * description (this instance remains unchanged).\n     * @return {RTCSessionDescription} - Transformed local session description\n     * (a modified copy of the one given as the input).\n     */\n    transformStreamIdentifiers(sessionDesc) {\n        // FIXME similar check is probably duplicated in all other transformers\n        if (!sessionDesc || !sessionDesc.sdp || !sessionDesc.type) {\n            return sessionDesc;\n        }\n\n        const transformer = new SdpTransformWrap(sessionDesc.sdp);\n        const audioMLine = transformer.selectMedia('audio');\n\n        if (audioMLine) {\n            this._transformMediaIdentifiers(audioMLine);\n        }\n\n        const videoMLine = transformer.selectMedia('video');\n\n        if (videoMLine) {\n            this._transformMediaIdentifiers(videoMLine);\n        }\n\n        return new RTCSessionDescription({\n            type: sessionDesc.type,\n            sdp: transformer.toRawSDP()\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/LocalSdpMunger.js","/* global __filename */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport { parseSecondarySSRC, SdpTransformWrap } from './SdpTransformUtil';\nimport SDPUtil from './SDPUtil';\n\nconst logger = getLogger(__filename);\n\n/**\n * Begin helper functions\n */\n/**\n * Updates or inserts the appropriate rtx information for primarySsrc with\n *  the given rtxSsrc.  If no rtx ssrc for primarySsrc currently exists, it will\n *  add the appropriate ssrc and ssrc group lines.  If primarySsrc already has\n *  an rtx ssrc, the appropriate ssrc and group lines will be updated\n * @param {MLineWrap} mLine\n * @param {object} primarySsrcInfo the info (ssrc, msid & cname) for the\n *  primary ssrc\n * @param {number} rtxSsrc the rtx ssrc to associate with the primary ssrc\n */\nfunction updateAssociatedRtxStream(mLine, primarySsrcInfo, rtxSsrc) {\n    logger.debug(\n        `Updating mline to associate ${rtxSsrc}`\n        + `rtx ssrc with primary stream, ${primarySsrcInfo.id}`);\n    const primarySsrc = primarySsrcInfo.id;\n    const primarySsrcMsid = primarySsrcInfo.msid;\n    const primarySsrcCname = primarySsrcInfo.cname;\n\n    const previousRtxSSRC = mLine.getRtxSSRC(primarySsrc);\n\n    if (previousRtxSSRC === rtxSsrc) {\n        logger.debug(`${rtxSsrc} was already associated with ${primarySsrc}`);\n\n        return;\n    }\n    if (previousRtxSSRC) {\n        logger.debug(\n            `${primarySsrc} was previously associated with rtx`\n            + `${previousRtxSSRC}, removing all references to it`);\n\n        // Stream already had an rtx ssrc that is different than the one given,\n        //  remove all trace of the old one\n        mLine.removeSSRC(previousRtxSSRC);\n\n        logger.debug(`groups before filtering for ${previousRtxSSRC}`);\n        logger.debug(mLine.dumpSSRCGroups());\n\n        mLine.removeGroupsWithSSRC(previousRtxSSRC);\n    }\n    mLine.addSSRCAttribute({\n        id: rtxSsrc,\n        attribute: 'cname',\n        value: primarySsrcCname\n    });\n    mLine.addSSRCAttribute({\n        id: rtxSsrc,\n        attribute: 'msid',\n        value: primarySsrcMsid\n    });\n    mLine.addSSRCGroup({\n        semantics: 'FID',\n        ssrcs: `${primarySsrc} ${rtxSsrc}`\n    });\n}\n\n/**\n * End helper functions\n */\n\n/**\n * Adds any missing RTX streams for video streams\n *  and makes sure that they remain consistent\n */\nexport default class RtxModifier {\n    /**\n     * Constructor\n     */\n    constructor() {\n        /**\n         * Map of video ssrc to corresponding RTX\n         *  ssrc\n         */\n        this.correspondingRtxSsrcs = new Map();\n    }\n\n    /**\n     * Clear the cached map of primary video ssrcs to\n     *  their corresponding rtx ssrcs so that they will\n     *  not be used for the next call to modifyRtxSsrcs\n     */\n    clearSsrcCache() {\n        this.correspondingRtxSsrcs.clear();\n    }\n\n    /**\n     * Explicitly set the primary video ssrc -> rtx ssrc\n     *  mapping to be used in modifyRtxSsrcs\n     * @param {Map} ssrcMapping a mapping of primary video\n     *  ssrcs to their corresponding rtx ssrcs\n     */\n    setSsrcCache(ssrcMapping) {\n        logger.debug('Setting ssrc cache to ', ssrcMapping);\n        this.correspondingRtxSsrcs = ssrcMapping;\n    }\n\n    /**\n     * Adds RTX ssrcs for any video ssrcs that don't\n     *  already have them.  If the video ssrc has been\n     *  seen before, and already had an RTX ssrc generated,\n     *  the same RTX ssrc will be used again.\n     * @param {string} sdpStr sdp in raw string format\n     */\n    modifyRtxSsrcs(sdpStr) {\n        const sdpTransformer = new SdpTransformWrap(sdpStr);\n        const videoMLine = sdpTransformer.selectMedia('video');\n\n        if (!videoMLine) {\n            logger.debug(`No 'video' media found in the sdp: ${sdpStr}`);\n\n            return sdpStr;\n        }\n\n        return this.modifyRtxSsrcs2(videoMLine)\n            ? sdpTransformer.toRawSDP() : sdpStr;\n    }\n\n    /**\n     * Does the same thing as {@link modifyRtxSsrcs}, but takes the\n     *  {@link MLineWrap} instance wrapping video media as an argument.\n     * @param {MLineWrap} videoMLine\n     * @return {boolean} <tt>true</tt> if the SDP wrapped by\n     *  {@link SdpTransformWrap} has been modified or <tt>false</tt> otherwise.\n     */\n    modifyRtxSsrcs2(videoMLine) {\n        if (videoMLine.direction === 'recvonly') {\n            logger.debug('RtxModifier doing nothing, video m line is recvonly');\n\n            return false;\n        }\n        if (videoMLine.getSSRCCount() < 1) {\n            logger.debug('RtxModifier doing nothing, no video ssrcs present');\n\n            return false;\n        }\n        logger.debug('Current ssrc mapping: ', this.correspondingRtxSsrcs);\n        const primaryVideoSsrcs = videoMLine.getPrimaryVideoSSRCs();\n\n        logger.debug('Parsed primary video ssrcs ', primaryVideoSsrcs,\n            ' making sure all have rtx streams');\n        for (const ssrc of primaryVideoSsrcs) {\n            const msid = videoMLine.getSSRCAttrValue(ssrc, 'msid');\n            const cname = videoMLine.getSSRCAttrValue(ssrc, 'cname');\n            let correspondingRtxSsrc = this.correspondingRtxSsrcs.get(ssrc);\n\n            if (correspondingRtxSsrc) {\n                logger.debug(\n                    'Already have an associated rtx ssrc for'\n                    + `video ssrc ${ssrc}: ${correspondingRtxSsrc}`);\n            } else {\n                logger.debug(\n                    `No previously associated rtx ssrc for video ssrc ${ssrc}`);\n\n                // If there's one in the sdp already for it, we'll just set\n                //  that as the corresponding one\n                const previousAssociatedRtxStream = videoMLine.getRtxSSRC(ssrc);\n\n                if (previousAssociatedRtxStream) {\n                    logger.debug(\n                        `Rtx stream ${previousAssociatedRtxStream} `\n                        + 'already existed in the sdp as an rtx stream for '\n                        + `${ssrc}`);\n                    correspondingRtxSsrc = previousAssociatedRtxStream;\n                } else {\n                    correspondingRtxSsrc = SDPUtil.generateSsrc();\n                    logger.debug(`Generated rtx ssrc ${correspondingRtxSsrc} `\n                                 + `for ssrc ${ssrc}`);\n                }\n                logger.debug(`Caching rtx ssrc ${correspondingRtxSsrc} `\n                             + `for video ssrc ${ssrc}`);\n                this.correspondingRtxSsrcs.set(ssrc, correspondingRtxSsrc);\n            }\n            updateAssociatedRtxStream(\n                videoMLine,\n                {\n                    id: ssrc,\n                    cname,\n                    msid\n                },\n                correspondingRtxSsrc);\n        }\n\n        // FIXME we're not looking into much details whether the SDP has been\n        // modified or not once the precondition requirements are met.\n        return true;\n    }\n\n    /**\n     * Strip all rtx streams from the given sdp\n     * @param {string} sdpStr sdp in raw string format\n     * @returns {string} sdp string with all rtx streams stripped\n     */\n    stripRtx(sdpStr) {\n        const sdpTransformer = new SdpTransformWrap(sdpStr);\n        const videoMLine = sdpTransformer.selectMedia('video');\n\n        if (!videoMLine) {\n            logger.debug(`No 'video' media found in the sdp: ${sdpStr}`);\n\n            return sdpStr;\n        }\n        if (videoMLine.direction === 'recvonly') {\n            logger.debug('RtxModifier doing nothing, video m line is recvonly');\n\n            return sdpStr;\n        }\n        if (videoMLine.getSSRCCount() < 1) {\n            logger.debug('RtxModifier doing nothing, no video ssrcs present');\n\n            return sdpStr;\n        }\n        if (!videoMLine.containsAnySSRCGroups()) {\n            logger.debug('RtxModifier doing nothing, '\n              + 'no video ssrcGroups present');\n\n            return sdpStr;\n        }\n        const fidGroups = videoMLine.findGroups('FID');\n\n        // Remove the fid groups from the mline\n\n        videoMLine.removeGroupsBySemantics('FID');\n\n        // Get the rtx ssrcs and remove them from the mline\n        for (const fidGroup of fidGroups) {\n            const rtxSsrc = parseSecondarySSRC(fidGroup);\n\n            videoMLine.removeSSRC(rtxSsrc);\n        }\n\n        return sdpTransformer.toRawSDP();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/RtxModifier.js","/* global __filename */\n\nimport { getLogger } from 'jitsi-meet-logger';\nimport {\n    parsePrimarySSRC,\n    parseSecondarySSRC,\n    SdpTransformWrap\n} from './SdpTransformUtil';\n\nconst logger = getLogger(__filename);\n\n/**\n * Handles the work of keeping video ssrcs consistent across multiple\n * o/a cycles, making it such that all stream operations can be\n * kept local and do not need to be signaled.\n * NOTE: This only keeps the 'primary' video ssrc consistent: meaning\n * the primary video stream\n */\nexport default class SdpConsistency {\n    /**\n     * Constructor\n     * @param {string} logPrefix the log prefix appended to every logged\n     * message, currently used to distinguish for which\n     * <tt>TraceablePeerConnection</tt> the instance works.\n     */\n    constructor(logPrefix) {\n        this.clearVideoSsrcCache();\n        this.logPrefix = logPrefix;\n    }\n\n    /**\n     * Clear the cached video primary and primary rtx ssrcs so that\n     *  they will not be used for the next call to\n     *  makeVideoPrimarySsrcsConsistent\n     */\n    clearVideoSsrcCache() {\n        this.cachedPrimarySsrc = null;\n        this.injectRecvOnly = false;\n    }\n\n    /**\n     * Explicitly set the primary ssrc to be used in\n     *  makeVideoPrimarySsrcsConsistent\n     * @param {number} primarySsrc the primarySsrc to be used\n     *  in future calls to makeVideoPrimarySsrcsConsistent\n     * @throws Error if <tt>primarySsrc</tt> is not a number\n     */\n    setPrimarySsrc(primarySsrc) {\n        if (typeof primarySsrc !== 'number') {\n            throw new Error('Primary SSRC must be a number!');\n        }\n        this.cachedPrimarySsrc = primarySsrc;\n    }\n\n    /**\n     * Checks whether or not there is a primary video SSRC cached already.\n     * @return {boolean}\n     */\n    hasPrimarySsrcCached() {\n        return Boolean(this.cachedPrimarySsrc);\n    }\n\n    /**\n     * Given an sdp string, either:\n     *  1) record the primary video and primary rtx ssrcs to be\n     *   used in future calls to makeVideoPrimarySsrcsConsistent or\n     *  2) change the primary and primary rtx ssrcs in the given sdp\n     *   to match the ones previously cached\n     * @param {string} sdpStr the sdp string to (potentially)\n     *  change to make the video ssrcs consistent\n     * @returns {string} a (potentially) modified sdp string\n     *  with ssrcs consistent with this class' cache\n     */\n    makeVideoPrimarySsrcsConsistent(sdpStr) {\n        const sdpTransformer = new SdpTransformWrap(sdpStr);\n        const videoMLine = sdpTransformer.selectMedia('video');\n\n        if (!videoMLine) {\n            logger.debug(\n                `${this.logPrefix} no 'video' media found in the sdp: `\n                    + `${sdpStr}`);\n\n            return sdpStr;\n        }\n\n        if (videoMLine.direction === 'recvonly') {\n            // If the mline is recvonly, we'll add the primary\n            //  ssrc as a recvonly ssrc\n            if (this.cachedPrimarySsrc && this.injectRecvOnly) {\n                videoMLine.addSSRCAttribute({\n                    id: this.cachedPrimarySsrc,\n                    attribute: 'cname',\n                    value: `recvonly-${this.cachedPrimarySsrc}`\n                });\n            } else {\n                logger.info(\n                    `${this.logPrefix} no SSRC found for the recvonly video`\n                        + 'stream!');\n            }\n        } else {\n            const newPrimarySsrc = videoMLine.getPrimaryVideoSsrc();\n\n            if (!newPrimarySsrc) {\n                logger.info(\n                    `${this.logPrefix} sdp-consistency couldn't`\n                        + ' parse new primary ssrc');\n\n                return sdpStr;\n            }\n            if (this.cachedPrimarySsrc) {\n                logger.info(\n                    `${this.logPrefix} sdp-consistency replacing new ssrc`\n                        + `${newPrimarySsrc} with cached `\n                        + `${this.cachedPrimarySsrc}`);\n                videoMLine.replaceSSRC(newPrimarySsrc, this.cachedPrimarySsrc);\n                for (const group of videoMLine.ssrcGroups) {\n                    if (group.semantics === 'FID') {\n                        const primarySsrc = parsePrimarySSRC(group);\n                        const rtxSsrc = parseSecondarySSRC(group);\n\n                        // eslint-disable-next-line max-depth\n                        if (primarySsrc === newPrimarySsrc) {\n                            group.ssrcs\n                                = `${this.cachedPrimarySsrc} ${rtxSsrc}`;\n                        }\n                    }\n                }\n            } else {\n                this.cachedPrimarySsrc = newPrimarySsrc;\n                logger.info(\n                    `${this.logPrefix} sdp-consistency caching primary ssrc`\n                        + `${this.cachedPrimarySsrc}`);\n            }\n\n            this.injectRecvOnly = true;\n        }\n\n        return sdpTransformer.toRawSDP();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xmpp/SdpConsistency.js","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexports.Interop = require('./interop');\n\n\n\n// WEBPACK FOOTER //\n// ../sdp-interop/lib/index.js","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* global RTCSessionDescription */\n/* global RTCIceCandidate */\n/* jshint -W097 */\n\"use strict\";\n\nvar transform = require('./transform');\nvar arrayEquals = require('./array-equals');\n\nfunction Interop() {\n\n    /**\n     * This map holds the most recent Unified Plan offer/answer SDP that was\n     * converted to Plan B, with the SDP type ('offer' or 'answer') as keys and\n     * the SDP string as values.\n     *\n     * @type {{}}\n     */\n    this.cache = {\n        mlB2UMap : {},\n        mlU2BMap : {}\n    };\n}\n\nmodule.exports = Interop;\n\n/**\n * Changes the candidate args to match with the related Unified Plan\n */\nInterop.prototype.candidateToUnifiedPlan = function(candidate) {\n    var cand = new RTCIceCandidate(candidate);\n\n    cand.sdpMLineIndex = this.cache.mlB2UMap[cand.sdpMLineIndex];\n    /* TODO: change sdpMid to (audio|video)-SSRC */\n\n    return cand;\n};\n\n/**\n * Changes the candidate args to match with the related Plan B\n */\nInterop.prototype.candidateToPlanB = function(candidate) {\n    var cand = new RTCIceCandidate(candidate);\n\n    if (cand.sdpMid.indexOf('audio') === 0) {\n      cand.sdpMid = 'audio';\n    } else if (cand.sdpMid.indexOf('video') === 0) {\n      cand.sdpMid = 'video';\n    } else {\n      throw new Error('candidate with ' + cand.sdpMid + ' not allowed');\n    }\n\n    cand.sdpMLineIndex = this.cache.mlU2BMap[cand.sdpMLineIndex];\n\n    return cand;\n};\n\n/**\n * Returns the index of the first m-line with the given media type and with a\n * direction which allows sending, in the last Unified Plan description with\n * type \"answer\" converted to Plan B. Returns {null} if there is no saved\n * answer, or if none of its m-lines with the given type allow sending.\n * @param type the media type (\"audio\" or \"video\").\n * @returns {*}\n */\nInterop.prototype.getFirstSendingIndexFromAnswer = function(type) {\n    if (!this.cache.answer) {\n        return null;\n    }\n\n    var session = transform.parse(this.cache.answer);\n    if (session && session.media && Array.isArray(session.media)){\n        for (var i = 0; i < session.media.length; i++) {\n            if (session.media[i].type == type &&\n                (!session.media[i].direction /* default to sendrecv */ ||\n                    session.media[i].direction === 'sendrecv' ||\n                    session.media[i].direction === 'sendonly')){\n                return i;\n            }\n        }\n    }\n\n    return null;\n};\n\n/**\n * This method transforms a Unified Plan SDP to an equivalent Plan B SDP. A\n * PeerConnection wrapper transforms the SDP to Plan B before passing it to the\n * application.\n *\n * @param desc\n * @returns {*}\n */\nInterop.prototype.toPlanB = function(desc) {\n    var self = this;\n    //#region Preliminary input validation.\n\n    if (typeof desc !== 'object' || desc === null ||\n        typeof desc.sdp !== 'string') {\n        console.warn('An empty description was passed as an argument.');\n        return desc;\n    }\n\n    // Objectify the SDP for easier manipulation.\n    var session = transform.parse(desc.sdp);\n\n    // If the SDP contains no media, there's nothing to transform.\n    if (typeof session.media === 'undefined' ||\n        !Array.isArray(session.media) || session.media.length === 0) {\n        console.warn('The description has no media.');\n        return desc;\n    }\n\n    // Try some heuristics to \"make sure\" this is a Unified Plan SDP. Plan B\n    // SDP has a video, an audio and a data \"channel\" at most.\n    if (session.media.length <= 3 && session.media.every(function(m) {\n            return ['video', 'audio', 'data'].indexOf(m.mid) !== -1;\n        })) {\n        console.warn('This description does not look like Unified Plan.');\n        return desc;\n    }\n\n    //#endregion\n\n    // HACK https://bugzilla.mozilla.org/show_bug.cgi?id=1113443\n    var sdp = desc.sdp;\n    var rewrite = false;\n    for (var i = 0; i < session.media.length; i++) {\n        var uLine = session.media[i];\n        uLine.rtp.forEach(function(rtp) {\n            if (rtp.codec === 'NULL')\n            {\n                rewrite = true;\n                var offer = transform.parse(self.cache.offer);\n                rtp.codec = offer.media[i].rtp[0].codec;\n            }\n        });\n    }\n    if (rewrite) {\n        sdp = transform.write(session);\n    }\n\n    // Unified Plan SDP is our \"precious\". Cache it for later use in the Plan B\n    // -> Unified Plan transformation.\n    this.cache[desc.type] = sdp;\n\n    //#region Convert from Unified Plan to Plan B.\n\n    // We rebuild the session.media array.\n    var media = session.media;\n    session.media = [];\n\n    // Associative array that maps channel types to channel objects for fast\n    // access to channel objects by their type, e.g. type2bl['audio']->channel\n    // obj.\n    var type2bl = {};\n\n    // Used to build the group:BUNDLE value after the channels construction\n    // loop.\n    var types = [];\n\n    media.forEach(function(uLine) {\n        // rtcp-mux is required in the Plan B SDP.\n        if ((typeof uLine.rtcpMux !== 'string' ||\n            uLine.rtcpMux !== 'rtcp-mux') &&\n            uLine.direction !== 'inactive') {\n            throw new Error('Cannot convert to Plan B because m-lines ' +\n                'without the rtcp-mux attribute were found.');\n        }\n\n        // If we don't have a channel for this uLine.type OR the selected is\n        // inactive, then select this uLine as the channel basis.\n        if (typeof type2bl[uLine.type] === 'undefined' ||\n            type2bl[uLine.type].direction === 'inactive') {\n            type2bl[uLine.type] = uLine;\n        }\n    });\n\n    // Implode the Unified Plan m-lines/tracks into Plan B channels.\n    media.forEach(function(uLine) {\n        if (uLine.type === 'application') {\n            session.media.push(uLine);\n            types.push(uLine.mid);\n            return;\n        }\n\n        // Add sources to the channel and handle a=msid.\n        if (typeof uLine.sources === 'object') {\n            Object.keys(uLine.sources).forEach(function(ssrc) {\n                if (typeof type2bl[uLine.type].sources !== 'object')\n                    type2bl[uLine.type].sources = {};\n\n                // Assign the sources to the channel.\n                type2bl[uLine.type].sources[ssrc] =\n                    uLine.sources[ssrc];\n\n                if (typeof uLine.msid !== 'undefined') {\n                    // In Plan B the msid is an SSRC attribute. Also, we don't\n                    // care about the obsolete label and mslabel attributes.\n                    //\n                    // Note that it is not guaranteed that the uLine will\n                    // have an msid. recvonly channels in particular don't have\n                    // one.\n                    type2bl[uLine.type].sources[ssrc].msid =\n                        uLine.msid;\n                }\n                // NOTE ssrcs in ssrc groups will share msids, as\n                // draft-uberti-rtcweb-plan-00 mandates.\n            });\n        }\n\n        // Add ssrc groups to the channel.\n        if (typeof uLine.ssrcGroups !== 'undefined' &&\n                Array.isArray(uLine.ssrcGroups)) {\n\n            // Create the ssrcGroups array, if it's not defined.\n            if (typeof type2bl[uLine.type].ssrcGroups === 'undefined' ||\n                    !Array.isArray(type2bl[uLine.type].ssrcGroups)) {\n                type2bl[uLine.type].ssrcGroups = [];\n            }\n\n            type2bl[uLine.type].ssrcGroups =\n                type2bl[uLine.type].ssrcGroups.concat(\n                    uLine.ssrcGroups);\n        }\n\n        if (type2bl[uLine.type] === uLine) {\n            // Plan B mids are in ['audio', 'video', 'data']\n            uLine.mid = uLine.type;\n\n            // Plan B doesn't support/need the bundle-only attribute.\n            delete uLine.bundleOnly;\n\n            // In Plan B the msid is an SSRC attribute.\n            delete uLine.msid;\n\n            if (uLine.direction !== 'inactive') {\n              // Used to build the group:BUNDLE value after this loop.\n              types.push(uLine.type);\n            }\n\n            // Add the channel to the new media array.\n            session.media.push(uLine);\n        }\n    });\n\n    // We regenerate the BUNDLE group with the new mids.\n    session.groups.some(function(group) {\n        if (group.type === 'BUNDLE') {\n            group.mids = types.join(' ');\n            return true;\n        }\n    });\n\n    // msid semantic\n    session.msidSemantic = {\n        semantic: 'WMS',\n        token: '*'\n    };\n\n    var resStr = transform.write(session);\n\n    return new RTCSessionDescription({\n        type: desc.type,\n        sdp: resStr\n    });\n\n    //#endregion\n};\n\n/**\n * This method transforms a Plan B SDP to an equivalent Unified Plan SDP. A\n * PeerConnection wrapper transforms the SDP to Unified Plan before passing it\n * to FF.\n *\n * @param desc\n * @returns {*}\n */\nInterop.prototype.toUnifiedPlan = function(desc) {\n    var self = this;\n    //#region Preliminary input validation.\n\n    if (typeof desc !== 'object' || desc === null ||\n        typeof desc.sdp !== 'string') {\n        console.warn('An empty description was passed as an argument.');\n        return desc;\n    }\n\n    var session = transform.parse(desc.sdp);\n\n    // If the SDP contains no media, there's nothing to transform.\n    if (typeof session.media === 'undefined' ||\n        !Array.isArray(session.media) || session.media.length === 0) {\n        console.warn('The description has no media.');\n        return desc;\n    }\n\n    // Try some heuristics to \"make sure\" this is a Plan B SDP. Plan B SDP has\n    // a video, an audio and a data \"channel\" at most.\n    if (session.media.length > 3 || !session.media.every(function(m) {\n            return ['video', 'audio', 'data'].indexOf(m.mid) !== -1;\n        })) {\n        console.warn('This description does not look like Plan B.');\n        return desc;\n    }\n\n    // Make sure this Plan B SDP can be converted to a Unified Plan SDP.\n    var mids = [];\n    session.media.forEach(function(m) {\n        mids.push(m.mid);\n    });\n\n    var hasBundle = false;\n    if (typeof session.groups !== 'undefined' &&\n        Array.isArray(session.groups)) {\n        hasBundle = session.groups.every(function(g) {\n            return g.type !== 'BUNDLE' ||\n                arrayEquals.apply(g.mids.sort(), [mids.sort()]);\n        });\n    }\n\n    if (!hasBundle) {\n        throw new Error(\"Cannot convert to Unified Plan because m-lines that\" +\n            \" are not bundled were found.\");\n    }\n\n    //#endregion\n\n\n    //#region Convert from Plan B to Unified Plan.\n\n    // Unfortunately, a Plan B offer/answer doesn't have enough information to\n    // rebuild an equivalent Unified Plan offer/answer.\n    //\n    // For example, if this is a local answer (in Unified Plan style) that we\n    // convert to Plan B prior to handing it over to the application (the\n    // PeerConnection wrapper called us, for instance, after a successful\n    // createAnswer), we want to remember the m-line at which we've seen the\n    // (local) SSRC. That's because when the application wants to do call the\n    // SLD method, forcing us to do the inverse transformation (from Plan B to\n    // Unified Plan), we need to know to which m-line to assign the (local)\n    // SSRC. We also need to know all the other m-lines that the original\n    // answer had and include them in the transformed answer as well.\n    //\n    // Another example is if this is a remote offer that we convert to Plan B\n    // prior to giving it to the application, we want to remember the mid at\n    // which we've seen the (remote) SSRC.\n    //\n    // In the iteration that follows, we use the cached Unified Plan (if it\n    // exists) to assign mids to ssrcs.\n\n    var cached;\n    if (typeof this.cache[desc.type] !== 'undefined') {\n        cached = transform.parse(this.cache[desc.type]);\n    }\n\n    var recvonlySsrcs = {\n        audio: {},\n        video: {}\n    };\n\n    // A helper map that sends mids to m-line objects. We use it later to\n    // rebuild the Unified Plan style session.media array.\n    var mid2ul = {};\n    var bIdx = 0;\n    var uIdx = 0;\n\n    session.media.forEach(function(bLine) {\n        if ((typeof bLine.rtcpMux !== 'string' ||\n            bLine.rtcpMux !== 'rtcp-mux') &&\n            bLine.direction !== 'inactive') {\n            throw new Error(\"Cannot convert to Unified Plan because m-lines \" +\n                \"without the rtcp-mux attribute were found.\");\n        }\n\n        if (bLine.type === 'application') {\n            mid2ul[bLine.mid] = bLine;\n            return;\n        }\n\n        // With rtcp-mux and bundle all the channels should have the same ICE\n        // stuff.\n        var sources = bLine.sources;\n        var ssrcGroups = bLine.ssrcGroups;\n        var candidates = bLine.candidates;\n        var iceUfrag = bLine.iceUfrag;\n        var icePwd = bLine.icePwd;\n        var fingerprint = bLine.fingerprint;\n        var port = bLine.port;\n\n        // We'll use the \"bLine\" object as a prototype for each new \"mLine\"\n        // that we create, but first we need to clean it up a bit.\n        delete bLine.sources;\n        delete bLine.ssrcGroups;\n        delete bLine.candidates;\n        delete bLine.iceUfrag;\n        delete bLine.icePwd;\n        delete bLine.fingerprint;\n        delete bLine.port;\n        delete bLine.mid;\n\n        // inverted ssrc group map\n        var ssrc2group = {};\n        if (typeof ssrcGroups !== 'undefined' && Array.isArray(ssrcGroups)) {\n            ssrcGroups.forEach(function (ssrcGroup) {\n\n                // TODO(gp) find out how to receive simulcast with FF. For the\n                // time being, hide it.\n                if (ssrcGroup.semantics === 'SIM') {\n                    return;\n                }\n\n                // XXX This might brake if an SSRC is in more than one group\n                // for some reason.\n                if (typeof ssrcGroup.ssrcs !== 'undefined' &&\n                    Array.isArray(ssrcGroup.ssrcs)) {\n                    ssrcGroup.ssrcs.forEach(function (ssrc) {\n                        if (typeof ssrc2group[ssrc] === 'undefined') {\n                            ssrc2group[ssrc] = [];\n                        }\n\n                        ssrc2group[ssrc].push(ssrcGroup);\n                    });\n                }\n            });\n        }\n\n        // ssrc to m-line index.\n        var ssrc2ml = {};\n\n        if (typeof sources === 'object') {\n\n            // Explode the Plan B channel sources with one m-line per source.\n            Object.keys(sources).forEach(function(ssrc) {\n\n                // The (unified) m-line for this SSRC. We either create it from\n                // scratch or, if it's a grouped SSRC, we re-use a related\n                // mline. In other words, if the source is grouped with another\n                // source, put the two together in the same m-line.\n                var uLine;\n\n                // We assume here that we are the answerer in the O/A, so any\n                // offers which we translate come from the remote side, while\n                // answers are local. So the check below is to make that we\n                // handle receive-only SSRCs in a special way only if they come\n                // from the remote side.\n                if (desc.type==='offer') {\n                    // We want to detect SSRCs which are used by a remote peer\n                    // in an m-line with direction=recvonly (i.e. they are\n                    // being used for RTCP only).\n                    // This information would have gotten lost if the remote\n                    // peer used Unified Plan and their local description was\n                    // translated to Plan B. So we use the lack of an MSID\n                    // attribute to deduce a \"receive only\" SSRC.\n                    if (!sources[ssrc].msid) {\n                        recvonlySsrcs[bLine.type][ssrc] = sources[ssrc];\n                        // Receive-only SSRCs must not create new m-lines. We\n                        // will assign them to an existing m-line later.\n                        return;\n                    }\n                }\n\n                if (typeof ssrc2group[ssrc] !== 'undefined' &&\n                    Array.isArray(ssrc2group[ssrc])) {\n                    ssrc2group[ssrc].some(function (ssrcGroup) {\n                        // ssrcGroup.ssrcs *is* an Array, no need to check\n                        // again here.\n                        return ssrcGroup.ssrcs.some(function (related) {\n                            if (typeof ssrc2ml[related] === 'object') {\n                                uLine = ssrc2ml[related];\n                                return true;\n                            }\n                        });\n                    });\n                }\n\n                if (typeof uLine === 'object') {\n                    // the m-line already exists. Just add the source.\n                    uLine.sources[ssrc] = sources[ssrc];\n                    delete sources[ssrc].msid;\n                } else {\n                    // Use the \"bLine\" as a prototype for the \"uLine\".\n                    uLine = Object.create(bLine);\n                    ssrc2ml[ssrc] = uLine;\n\n                    if (typeof sources[ssrc].msid !== 'undefined') {\n                        // Assign the msid of the source to the m-line. Note\n                        // that it is not guaranteed that the source will have\n                        // msid. In particular \"recvonly\" sources don't have an\n                        // msid. Note that \"recvonly\" is a term only defined\n                        // for m-lines.\n                        uLine.msid = sources[ssrc].msid;\n                        delete sources[ssrc].msid;\n                    }\n\n                    // We assign one SSRC per media line.\n                    uLine.sources = {};\n                    uLine.sources[ssrc] = sources[ssrc];\n                    uLine.ssrcGroups = ssrc2group[ssrc];\n\n                    // Use the cached Unified Plan SDP (if it exists) to assign\n                    // SSRCs to mids.\n                    if (typeof cached !== 'undefined' &&\n                        typeof cached.media !== 'undefined' &&\n                        Array.isArray(cached.media)) {\n\n                        cached.media.forEach(function (m) {\n                            if (typeof m.sources === 'object') {\n                                Object.keys(m.sources).forEach(function (s) {\n                                    if (s === ssrc) {\n                                        uLine.mid = m.mid;\n                                    }\n                                });\n                            }\n                        });\n                    }\n\n                    if (typeof uLine.mid === 'undefined') {\n\n                        // If this is an SSRC that we see for the first time\n                        // assign it a new mid. This is typically the case when\n                        // this method is called to transform a remote\n                        // description for the first time or when there is a\n                        // new SSRC in the remote description because a new\n                        // peer has joined the conference. Local SSRCs should\n                        // have already been added to the map in the toPlanB\n                        // method.\n                        //\n                        // Because FF generates answers in Unified Plan style,\n                        // we MUST already have a cached answer with all the\n                        // local SSRCs mapped to some m-line/mid.\n\n                        if (desc.type === 'answer') {\n                            throw new Error(\"An unmapped SSRC was found.\");\n                        }\n\n                        uLine.mid = [bLine.type, '-', ssrc].join('');\n                    }\n\n                    // Include the candidates in the 1st media line.\n                    uLine.candidates = candidates;\n                    uLine.iceUfrag = iceUfrag;\n                    uLine.icePwd = icePwd;\n                    uLine.fingerprint = fingerprint;\n                    uLine.port = port;\n\n                    mid2ul[uLine.mid] = uLine;\n\n                    self.cache.mlU2BMap[uIdx] = bIdx;\n                    if (typeof self.cache.mlB2UMap[bIdx] === 'undefined') {\n                      self.cache.mlB2UMap[bIdx] = uIdx;\n                    }\n                    uIdx++;\n                }\n            });\n        }\n\n        bIdx++;\n    });\n\n    // Rebuild the media array in the right order and add the missing mLines\n    // (missing from the Plan B SDP).\n    session.media = [];\n    mids = []; // reuse\n\n    if (desc.type === 'answer') {\n\n        // The media lines in the answer must match the media lines in the\n        // offer. The order is important too. Here we assume that Firefox is\n        // the answerer, so we merely have to use the reconstructed (unified)\n        // answer to update the cached (unified) answer accordingly.\n        //\n        // In the general case, one would have to use the cached (unified)\n        // offer to find the m-lines that are missing from the reconstructed\n        // answer, potentially grabbing them from the cached (unified) answer.\n        // One has to be careful with this approach because inactive m-lines do\n        // not always have an mid, making it tricky (impossible?) to find where\n        // exactly and which m-lines are missing from the reconstructed answer.\n\n        for (var i = 0; i < cached.media.length; i++) {\n            var uLine = cached.media[i];\n\n            if (typeof mid2ul[uLine.mid] === 'undefined') {\n\n                // The mid isn't in the reconstructed (unified) answer.\n                // This is either a (unified) m-line containing a remote\n                // track only, or a (unified) m-line containing a remote\n                // track and a local track that has been removed.\n                // In either case, it MUST exist in the cached\n                // (unified) answer.\n                //\n                // In case this is a removed local track, clean-up\n                // the (unified) m-line and make sure it's 'recvonly' or\n                // 'inactive'.\n\n                delete uLine.msid;\n                delete uLine.sources;\n                delete uLine.ssrcGroups;\n                if (!uLine.direction\n                    || uLine.direction === 'sendrecv')\n                    uLine.direction = 'recvonly';\n                else if (uLine.direction === 'sendonly')\n                    uLine.direction = 'inactive';\n            } else {\n                // This is an (unified) m-line/channel that contains a local\n                // track (sendrecv or sendonly channel) or it's a unified\n                // recvonly m-line/channel. In either case, since we're\n                // going from PlanB -> Unified Plan this m-line MUST\n                // exist in the cached answer.\n            }\n\n            session.media.push(uLine);\n\n            if (typeof uLine.mid === 'string') {\n                // inactive lines don't/may not have an mid.\n                mids.push(uLine.mid);\n            }\n        }\n    } else {\n\n        // SDP offer/answer (and the JSEP spec) forbids removing an m-section\n        // under any circumstances. If we are no longer interested in sending a\n        // track, we just remove the msid and ssrc attributes and set it to\n        // either a=recvonly (as the reofferer, we must use recvonly if the\n        // other side was previously sending on the m-section, but we can also\n        // leave the possibility open if it wasn't previously in use), or\n        // a=inactive.\n\n        if (typeof cached !== 'undefined' &&\n            typeof cached.media !== 'undefined' &&\n            Array.isArray(cached.media)) {\n            cached.media.forEach(function(uLine) {\n                mids.push(uLine.mid);\n                if (typeof mid2ul[uLine.mid] !== 'undefined') {\n                    session.media.push(mid2ul[uLine.mid]);\n                } else {\n                    delete uLine.msid;\n                    delete uLine.sources;\n                    delete uLine.ssrcGroups;\n                    if (!uLine.direction\n                        || uLine.direction === 'sendrecv')\n                        uLine.direction = 'recvonly';\n                    if (!uLine.direction\n                        || uLine.direction === 'sendonly')\n                        uLine.direction = 'inactive';\n                    session.media.push(uLine);\n                }\n            });\n        }\n\n        // Add all the remaining (new) m-lines of the transformed SDP.\n        Object.keys(mid2ul).forEach(function(mid) {\n            if (mids.indexOf(mid) === -1) {\n                mids.push(mid);\n                if (mid2ul[mid].direction === 'recvonly') {\n                    // This is a remote recvonly channel. Add its SSRC to the\n                    // appropriate sendrecv or sendonly channel.\n                    // TODO(gp) what if we don't have sendrecv/sendonly\n                    // channel?\n\n                    session.media.some(function (uLine) {\n                        if ((uLine.direction === 'sendrecv' ||\n                            uLine.direction === 'sendonly') &&\n                            uLine.type === mid2ul[mid].type) {\n\n                            // mid2ul[mid] shouldn't have any ssrc-groups\n                            Object.keys(mid2ul[mid].sources).forEach(\n                                function (ssrc) {\n                                uLine.sources[ssrc] =\n                                    mid2ul[mid].sources[ssrc];\n                            });\n\n                            return true;\n                        }\n                    });\n                } else {\n                    session.media.push(mid2ul[mid]);\n                }\n            }\n        });\n    }\n\n    // After we have constructed the Plan Unified m-lines we can figure out\n    // where (in which m-line) to place the 'recvonly SSRCs'.\n    // Note: we assume here that we are the answerer in the O/A, so any offers\n    // which we translate come from the remote side, while answers are local\n    // (and so our last local description is cached as an 'answer').\n    [\"audio\", \"video\"].forEach(function (type) {\n        if (!session || !session.media || !Array.isArray(session.media))\n            return;\n\n        var idx = null;\n        if (Object.keys(recvonlySsrcs[type]).length > 0) {\n            idx = self.getFirstSendingIndexFromAnswer(type);\n            if (idx === null){\n                // If this is the first offer we receive, we don't have a\n                // cached answer. Assume that we will be sending media using\n                // the first m-line for each media type.\n\n                for (var i = 0; i < session.media.length; i++) {\n                    if (session.media[i].type === type) {\n                        idx = i;\n                        break;\n                    }\n                }\n            }\n        }\n\n        if (idx && session.media.length > idx) {\n            var mLine = session.media[idx];\n            Object.keys(recvonlySsrcs[type]).forEach(function(ssrc) {\n                if (mLine.sources && mLine.sources[ssrc]) {\n                    console.warn(\"Replacing an existing SSRC.\");\n                }\n                if (!mLine.sources) {\n                    mLine.sources = {};\n                }\n\n                mLine.sources[ssrc] = recvonlySsrcs[type][ssrc];\n            });\n        }\n    });\n\n    // We regenerate the BUNDLE group (since we regenerated the mids)\n    session.groups.some(function(group) {\n        if (group.type === 'BUNDLE') {\n            group.mids = mids.join(' ');\n            return true;\n        }\n    });\n\n    // msid semantic\n    session.msidSemantic = {\n        semantic: 'WMS',\n        token: '*'\n    };\n\n    var resStr = transform.write(session);\n\n    // Cache the transformed SDP (Unified Plan) for later re-use in this\n    // function.\n    this.cache[desc.type] = resStr;\n\n    return new RTCSessionDescription({\n        type: desc.type,\n        sdp: resStr\n    });\n\n    //#endregion\n};\n\n\n\n// WEBPACK FOOTER //\n// ../sdp-interop/lib/interop.js","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar transform = require('sdp-transform');\n\nexports.write = function(session, opts) {\n\n  if (typeof session !== 'undefined' &&\n      typeof session.media !== 'undefined' &&\n      Array.isArray(session.media)) {\n\n    session.media.forEach(function (mLine) {\n      // expand sources to ssrcs\n      if (typeof mLine.sources !== 'undefined' &&\n        Object.keys(mLine.sources).length !== 0) {\n          mLine.ssrcs = [];\n          Object.keys(mLine.sources).forEach(function (ssrc) {\n            var source = mLine.sources[ssrc];\n            Object.keys(source).forEach(function (attribute) {\n              mLine.ssrcs.push({\n                id: ssrc,\n                attribute: attribute,\n                value: source[attribute]\n              });\n            });\n          });\n          delete mLine.sources;\n        }\n\n      // join ssrcs in ssrc groups\n      if (typeof mLine.ssrcGroups !== 'undefined' &&\n        Array.isArray(mLine.ssrcGroups)) {\n          mLine.ssrcGroups.forEach(function (ssrcGroup) {\n            if (typeof ssrcGroup.ssrcs !== 'undefined' &&\n                Array.isArray(ssrcGroup.ssrcs)) {\n              ssrcGroup.ssrcs = ssrcGroup.ssrcs.join(' ');\n            }\n          });\n        }\n    });\n  }\n\n  // join group mids\n  if (typeof session !== 'undefined' &&\n      typeof session.groups !== 'undefined' && Array.isArray(session.groups)) {\n\n    session.groups.forEach(function (g) {\n      if (typeof g.mids !== 'undefined' && Array.isArray(g.mids)) {\n        g.mids = g.mids.join(' ');\n      }\n    });\n  }\n\n  return transform.write(session, opts);\n};\n\nexports.parse = function(sdp) {\n  var session = transform.parse(sdp);\n\n  if (typeof session !== 'undefined' && typeof session.media !== 'undefined' &&\n      Array.isArray(session.media)) {\n\n    session.media.forEach(function (mLine) {\n      // group sources attributes by ssrc\n      if (typeof mLine.ssrcs !== 'undefined' && Array.isArray(mLine.ssrcs)) {\n        mLine.sources = {};\n        mLine.ssrcs.forEach(function (ssrc) {\n          if (!mLine.sources[ssrc.id])\n          mLine.sources[ssrc.id] = {};\n        mLine.sources[ssrc.id][ssrc.attribute] = ssrc.value;\n        });\n\n        delete mLine.ssrcs;\n      }\n\n      // split ssrcs in ssrc groups\n      if (typeof mLine.ssrcGroups !== 'undefined' &&\n        Array.isArray(mLine.ssrcGroups)) {\n          mLine.ssrcGroups.forEach(function (ssrcGroup) {\n            if (typeof ssrcGroup.ssrcs === 'string') {\n              ssrcGroup.ssrcs = ssrcGroup.ssrcs.split(' ');\n            }\n          });\n        }\n    });\n  }\n  // split group mids\n  if (typeof session !== 'undefined' &&\n      typeof session.groups !== 'undefined' && Array.isArray(session.groups)) {\n\n    session.groups.forEach(function (g) {\n      if (typeof g.mids === 'string') {\n        g.mids = g.mids.split(' ');\n      }\n    });\n  }\n\n  return session;\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ../sdp-interop/lib/transform.js","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule.exports = function arrayEquals(array) {\n    // if the other array is a falsy value, return\n    if (!array)\n        return false;\n\n    // compare lengths - can save a lot of time\n    if (this.length != array.length)\n        return false;\n\n    for (var i = 0, l = this.length; i < l; i++) {\n        // Check if we have nested arrays\n        if (this[i] instanceof Array && array[i] instanceof Array) {\n            // recurse into the nested arrays\n            if (!arrayEquals.apply(this[i], [array[i]]))\n                return false;\n        } else if (this[i] != array[i]) {\n            // Warning - two different object instances will never be equal:\n            // {x:20} != {x:20}\n            return false;\n        }\n    }\n    return true;\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ../sdp-interop/lib/array-equals.js","/* Copyright @ 2016 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar transform = require('sdp-transform');\nvar transformUtils = require('./transform-utils');\nvar parseSsrcs = transformUtils.parseSsrcs;\nvar writeSsrcs = transformUtils.writeSsrcs;\n\n//region Constants\n\nvar DEFAULT_NUM_OF_LAYERS = 3;\n\n//endregion\n\nfunction getSsrcAttribute (mLine, ssrc, attributeName) {\n    return mLine\n        .ssrcs\n        .filter(function(ssrcInfo) { return ssrcInfo.id === ssrc; })\n        .filter(function(ssrcInfo) { return ssrcInfo.attribute === attributeName; })\n        .map(function(ssrcInfo) { return ssrcInfo.value; })[0];\n}\n\n//region Ctor\n\nfunction Simulcast(options) {\n\n    this.options = options ? options : {};\n\n    if (!this.options.numOfLayers) {\n        this.options.numOfLayers = DEFAULT_NUM_OF_LAYERS;\n    }\n    console.log(\"SdpSimulcast: using \" + this.options.numOfLayers + \" layers\");\n\n    /**\n     * An IN-ORDER list of the simulcast ssrcs\n     * @type {list<number>}\n     */\n    this.ssrcCache = [];\n}\n\n//endregion\n\n//region Stateless private utility functions\n\n/**\n * Returns a random integer between min (included) and max (excluded)\n * Using Math.round() gives a non-uniform distribution!\n * @returns {number}\n */\nfunction generateSSRC() {\n    var min = 0, max = 0xffffffff;\n    return Math.floor(Math.random() * (max - min)) + min;\n};\n\nfunction processVideo(session, action) {\n    if (session == null || !Array.isArray(session.media)) {\n        return;\n    }\n\n    session.media.forEach(function (mLine) {\n        if (mLine.type === 'video') {\n            action(mLine);\n        }\n    });\n};\n\nfunction validateDescription(desc)\n{\n    return desc && desc != null\n        && desc.type && desc.type != ''\n        && desc.sdp && desc.sdp != '';\n}\n\nfunction explodeRemoteSimulcast(mLine) {\n\n    if (!mLine || !Array.isArray(mLine.ssrcGroups)) {\n        return;\n    }\n\n    var sources = parseSsrcs(mLine);\n    var order = [];\n\n    // Find the SIM group and explode its sources.\n    var j = mLine.ssrcGroups.length;\n    while (j--) {\n\n        if (mLine.ssrcGroups[j].semantics !== 'SIM') {\n            continue;\n        }\n\n        var simulcastSsrcs = mLine.ssrcGroups[j].ssrcs.split(' ');\n\n        for (var i = 0; i < simulcastSsrcs.length; i++) {\n\n            var ssrc = simulcastSsrcs[i];\n            order.push(ssrc);\n\n            var parts = sources[ssrc].msid.split(' ');\n            sources[ssrc].msid = [parts[0], '/', i, ' ', parts[1], '/', i].join('');\n            sources[ssrc].cname = [sources[ssrc].cname, '/', i].join('');\n\n            // Remove all the groups that this SSRC participates in.\n            mLine.ssrcGroups.forEach(function (relatedGroup) {\n                if (relatedGroup.semantics === 'SIM') {\n                    return;\n                }\n\n                var relatedSsrcs = relatedGroup.ssrcs.split(' ');\n                if (relatedSsrcs.indexOf(ssrc) === -1) {\n                    return;\n                }\n\n                // Nuke all the related SSRCs.\n                relatedSsrcs.forEach(function (relatedSSRC) {\n                    sources[relatedSSRC].msid = sources[ssrc].msid;\n                    sources[relatedSSRC].cname = sources[ssrc].cname;\n                    if (relatedSSRC !== ssrc) {\n                        order.push(relatedSSRC);\n                    }\n                });\n\n                // Schedule the related group for nuking.\n            })\n        }\n\n        mLine.ssrcs = writeSsrcs(sources, order);\n        mLine.ssrcGroups.splice(j, 1);\n    };\n}\n\nfunction implodeRemoteSimulcast(mLine) {\n\n    if (!mLine || !Array.isArray(mLine.ssrcGroups)) {\n        console.info('Halt: There are no SSRC groups in the remote ' +\n                'description.');\n        return;\n    }\n\n    var sources = parseSsrcs(mLine);\n\n    // Find the SIM group and nuke it.\n    mLine.ssrcGroups.forEach(function (simulcastGroup) {\n        if (simulcastGroup.semantics !== 'SIM') {\n            return;\n        }\n\n        console.info(\"Imploding SIM group: \" + simulcastGroup.ssrcs);\n        // Schedule the SIM group for nuking.\n        simulcastGroup.nuke = true;\n\n        var simulcastSsrcs = simulcastGroup.ssrcs.split(' ');\n\n        // Nuke all the higher layer SSRCs.\n        for (var i = 1; i < simulcastSsrcs.length; i++) {\n\n            var ssrc = simulcastSsrcs[i];\n            delete sources[ssrc];\n\n            // Remove all the groups that this SSRC participates in.\n            mLine.ssrcGroups.forEach(function (relatedGroup) {\n                if (relatedGroup.semantics === 'SIM') {\n                    return;\n                }\n\n                var relatedSsrcs = relatedGroup.ssrcs.split(' ');\n                if (relatedSsrcs.indexOf(ssrc) === -1) {\n                    return;\n                }\n\n                // Nuke all the related SSRCs.\n                relatedSsrcs.forEach(function (relatedSSRC) {\n                    delete sources[relatedSSRC];\n                });\n\n                // Schedule the related group for nuking.\n                relatedGroup.nuke = true;\n            })\n        }\n\n        return;\n    });\n\n    mLine.ssrcs = writeSsrcs(sources);\n\n    // Nuke all the scheduled groups.\n    var i = mLine.ssrcGroups.length;\n    while (i--) {\n        if (mLine.ssrcGroups[i].nuke) {\n            mLine.ssrcGroups.splice(i, 1);\n        }\n    }\n}\n\nfunction removeGoogConference(mLine) {\n    if (!mLine || !Array.isArray(mLine.invalid)) {\n        return;\n    }\n\n    var i = mLine.invalid.length;\n    while (i--) {\n        if (mLine.invalid[i].value == 'x-google-flag:conference') {\n            mLine.invalid.splice(i, 1);\n        }\n    }\n}\n\nfunction assertGoogConference(mLine) {\n    if (!mLine) {\n        return;\n    }\n\n    if (!Array.isArray(mLine.invalid)) {\n        mLine.invalid = [];\n    }\n\n    if (!mLine.invalid.some(\n            function (i) { return i.value === 'x-google-flag:conference' })) {\n        mLine.invalid.push({'value': 'x-google-flag:conference'});\n    }\n}\n\nSimulcast.prototype.clearSsrcCache = function() {\n    this.ssrcCache = [];\n}\n\n/**\n * When we start as video muted, all of the video\n *  ssrcs get generated so we can include them as part\n *  of the original session-accept.  That means we\n *  need this library to restore to those same ssrcs\n *  the first time we unmute, so we need the ability to\n *  force its cache\n */\nSimulcast.prototype.setSsrcCache = function(ssrcs) {\n    this.ssrcCache = ssrcs;\n}\n\n//endregion\n\n//region \"Private\" functions\n\n/**\n * Given a video mLine, return a list of the video ssrcs\n *  in simulcast layer order (returns a list of just\n *  the primary ssrc if there are no simulcast layers)\n */\nSimulcast.prototype._parseSimLayers = function (mLine) {\n    var simGroup = mLine.ssrcGroups &&\n        mLine.ssrcGroups.find(function(group) { return group.semantics === \"SIM\"; });\n    if (simGroup) {\n        return simGroup.ssrcs\n            .split(\" \")\n            .map(function(ssrcStr) { return parseInt(ssrcStr) });\n    } else {\n        return [mLine.ssrcs[0].id];\n    }\n}\n\nSimulcast.prototype._buildNewToOldSsrcMap = function (newSsrcList, oldSsrcList) {\n    var ssrcMap = {};\n    for (var i = 0; i < newSsrcList.length; ++i) {\n        var newSsrc = newSsrcList[i];\n        var oldSsrc = oldSsrcList[i] || null;\n        ssrcMap[newSsrc] = oldSsrc;\n    }\n    return ssrcMap;\n}\n\nSimulcast.prototype._fillInSourceDataFromCache = function(mLine) {\n    console.log(\"SdpSimulcast restoring from cache: \", this.ssrcCache);\n    var newSimSsrcs = this._parseSimLayers(mLine);\n    console.log(\"SdpSimulcast Parsed new sim ssrcs: \", newSimSsrcs);\n    var newMsid = getSsrcAttribute(mLine, newSimSsrcs[0], \"msid\");\n    var newCname = getSsrcAttribute(mLine, newSimSsrcs[0], \"cname\");\n    var ssrcsToReplace = this._buildNewToOldSsrcMap(newSimSsrcs, this.ssrcCache);\n    console.log(\"SdpSimulcast built replacement map: \", ssrcsToReplace);\n    // New sdp might only have 1 layer, so not every cached ssrc will have a new one\n    //  to replace directly\n    var ssrcsToAdd = this.ssrcCache\n        .filter(function(ssrc) { return Object.values(ssrcsToReplace).indexOf(ssrc) === -1; });\n    console.log(\"SdpSimulcast built ssrcs to add: \", ssrcsToAdd);\n\n    // First do the replacements\n    mLine.ssrcs.forEach(function(ssrc) {\n        if (ssrcsToReplace[ssrc.id]) {\n            ssrc.id = ssrcsToReplace[ssrc.id];\n        }\n    });\n    // Now the adds\n    ssrcsToAdd.forEach(function(ssrc) {\n        mLine.ssrcs.push({\n            id: ssrc,\n            attribute: \"msid\",\n            value: newMsid\n        });\n        mLine.ssrcs.push({\n            id: ssrc,\n            attribute: \"cname\",\n            value: newCname\n        });\n    });\n    mLine.ssrcGroups = mLine.ssrcGroups || [];\n    mLine.ssrcGroups.push({\n        semantics: \"SIM\",\n        ssrcs: this.ssrcCache.join(\" \")\n    });\n    return mLine;\n}\n\nSimulcast.prototype._generateSourceData = function(mLine, primarySsrc) {\n    var addAssociatedStream = function(mLine, ssrc) {\n        mLine.ssrcs.push({\n            id: ssrc,\n            attribute: \"cname\",\n            value: primarySsrcCname\n        });\n        mLine.ssrcs.push({\n            id: ssrc,\n            attribute: \"msid\",\n            value: primarySsrcMsid\n        });\n    }\n    var primarySsrcMsid = getSsrcAttribute(mLine, primarySsrc, \"msid\");\n    var primarySsrcCname = getSsrcAttribute(mLine, primarySsrc, \"cname\");\n\n    // Generate sim layers\n    var simSsrcs = [];\n    for (var i = 0; i < this.options.numOfLayers - 1; ++i) {\n        var simSsrc = generateSSRC();\n        addAssociatedStream(mLine, simSsrc);\n        simSsrcs.push(simSsrc);\n    }\n    mLine.ssrcGroups = mLine.ssrcGroups || [];\n    mLine.ssrcGroups.push({\n        semantics: \"SIM\",\n        ssrcs: primarySsrc + \" \" + simSsrcs.join(\" \")\n    });\n    return mLine;\n}\n\n\n\n// Assumptions:\n//  1) 'mLine' contains only a single primary video source\n//   (i.e. it will not already have simulcast streams inserted)\n//  2) 'mLine' MAY already contain an RTX stream for its video source\n//  3) 'mLine' is in sendrecv or sendonly state\n// Guarantees:\n//  1) return mLine will contain 2 additional simulcast layers\n//   generated\n//  2) if the base video ssrc in mLine has been seen before,\n//   then the same generated simulcast streams from before will\n//   be used again\n//  3) if rtx is enabled for the mLine, all generated simulcast\n//   streams will have rtx streams generated as well\n//  4) if rtx has been generated for a src before, we will generate\n//   the same rtx stream again\nSimulcast.prototype._restoreSimulcast = function(mLine) {\n    // First, find the primary video source in the given\n    // mLine and see if we've seen it before.\n    var primarySsrc;\n    var numSsrcs = mLine.ssrcs && mLine.ssrcs\n        .map(function(ssrcInfo) { return ssrcInfo.id; })\n        .filter(function(ssrc, index, array) {\n            return array.indexOf(ssrc) === index;\n        })\n        .length || 0;\n    var numGroups = (mLine.ssrcGroups && mLine.ssrcGroups.length) || 0;\n\n    if (numSsrcs === 0 || numSsrcs > 2) {\n        // Unsupported scenario\n        return mLine;\n    }\n    if (numSsrcs == 2 && numGroups === 0) {\n        // Unsupported scenario\n        return mLine;\n    }\n\n    if (numSsrcs === 1) {\n        primarySsrc = mLine.ssrcs[0].id;\n    } else {\n        // There must be an FID group, so parse\n        //  that and pull the primary ssrc from there\n        var fidGroup = mLine.ssrcGroups.filter(function(group) { return group.semantics === \"FID\"; })[0];\n        if (fidGroup) {\n            primarySsrc = parseInt(fidGroup.ssrcs.split(\" \")[0]);\n        } else {\n            // Unsupported scenario\n            return mLine;\n        }\n    }\n    console.log(\"SdpSimulcast: current ssrc cache: \", this.ssrcCache);\n    console.log(\"SdpSimulcast: parsed primary ssrc \" + primarySsrc);\n\n    var seenPrimarySsrc = this.ssrcCache.indexOf(primarySsrc) !== -1;\n\n    if (seenPrimarySsrc) {\n        console.log(\"SdpSimulcast: Have seen primary ssrc before, \" +\n            \"filling in data from cache\");\n        mLine = this._fillInSourceDataFromCache(mLine);\n    } else {\n        console.log(\"SdpSimulcast: Have not seen primary ssrc before, \" +\n            \"generating source data\");\n        mLine = this._generateSourceData(mLine, primarySsrc);\n    }\n    // Now update the cache to match whatever we've just put into this sdp\n    this.ssrcCache = this._parseSimLayers(mLine);\n    return mLine;\n}\n\n//endregion\n\n//region \"Public\" functions\n\n/**\n *\n * @param desc\n * @returns {RTCSessionDescription}\n */\nSimulcast.prototype.mungeRemoteDescription = function (desc) {\n\n    if (!validateDescription(desc)) {\n        return desc;\n    }\n\n    var session = transform.parse(desc.sdp);\n\n    var self = this;\n    processVideo(session, function (mLine) {\n\n        // Handle simulcast reception.\n        if (self.options.explodeRemoteSimulcast) {\n            explodeRemoteSimulcast(mLine);\n        } else {\n            implodeRemoteSimulcast(mLine);\n        }\n\n        // If native simulcast is enabled, we must append the x-goog-conference\n        // attribute to the SDP.\n        if (self.ssrcCache.length < 1) {\n            removeGoogConference(mLine);\n        } else {\n            assertGoogConference(mLine);\n        }\n    });\n\n    return new RTCSessionDescription({\n        type: desc.type,\n        sdp: transform.write(session)\n    });\n};\n\n/**\n *\n * NOTE this method should be called only if simulcast is supported by\n * the current browser, otherwise local SDP should not be munged.\n * @param desc\n * @returns {RTCSessionDescription}\n */\nSimulcast.prototype.mungeLocalDescription = function (desc) {\n\n    if (!validateDescription(desc)) {\n        return desc;\n    }\n\n    var session = transform.parse(desc.sdp);\n\n    var self = this;\n    processVideo(session, function (mLine) {\n        if (mLine.direction == 'recvonly' || mLine.direction == 'inactive')\n        {\n            return;\n        }\n        self._restoreSimulcast(mLine);\n    });\n\n    return new RTCSessionDescription({\n        type: desc.type,\n        sdp: transform.write(session)\n    });\n};\n\n//endregion\n\nmodule.exports = Simulcast;\n\n\n\n// WEBPACK FOOTER //\n// ../sdp-simulcast/lib/index.js","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * FIXME\n * @param sources FIXME\n * @param order An array of SSRCs which will be used to order the entries in\n * the returned array. Sources whose SSRC appears in 'order' will be added first,\n * in the specified order, and all other sources will be added afterwards (in\n * no specific order).\n * @returns {Array} FIXME\n */\nexports.writeSsrcs = function(sources, order) {\n  var ssrcs = [];\n\n  // expand sources to ssrcs\n  if (typeof sources !== 'undefined' &&\n      Object.keys(sources).length !== 0) {\n\n    if (!Array.isArray(order)) {\n      order = []\n    }\n\n    // Add the sources that appear in 'order' first.\n    for (var i = 0; i < order.length; i++) {\n      var ssrc = order[i];\n      var source = sources[ssrc];\n      Object.keys(source).forEach(function (attribute) {\n        ssrcs.push({\n          id: ssrc,\n          attribute: attribute,\n          value: source[attribute]\n        });\n      });\n    }\n\n    // Now add the rest of the sources.\n    Object.keys(sources).forEach(function (ssrc) {\n      ssrc = parseInt(ssrc); // Object.keys() returns string\n      if (order.indexOf(ssrc) >= 0) {\n        // Already added.\n        return;\n      }\n\n      var source = sources[ssrc];\n      Object.keys(source).forEach(function (attribute) {\n        ssrcs.push({\n          id: ssrc,\n          attribute: attribute,\n          value: source[attribute]\n        });\n      });\n    });\n  }\n\n  return ssrcs;\n};\n\nexports.parseSsrcs = function (mLine) {\n  var sources = {};\n  // group sources attributes by ssrc.\n  if (typeof mLine.ssrcs !== 'undefined' && Array.isArray(mLine.ssrcs)) {\n    mLine.ssrcs.forEach(function (ssrc) {\n      if (!sources[ssrc.id])\n        sources[ssrc.id] = {};\n      sources[ssrc.id][ssrc.attribute] = ssrc.value;\n    });\n  }\n  return sources;\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ../sdp-simulcast/lib/transform-utils.js","import * as JitsiConferenceEvents from '../JitsiConferenceEvents';\n\n/**\n * The value which we use to say, every sound over this threshold\n * is talking on the mic.\n * @type {number}\n */\nconst SPEECH_DETECT_THRESHOLD = 0.6;\n\n/**\n * Detect user trying to speek while is locally muted and fires an event.\n */\nexport default class TalkMutedDetection {\n    /**\n     * Creates TalkMutedDetection\n     * @param conference the JitsiConference instance that created us.\n     * @param callback the callback to call when detected that the local user is\n     * talking while her microphone is muted.\n     * @constructor\n     */\n    constructor(conference, callback) {\n        /**\n         * The callback to call when detected that the local user is talking\n         * while her microphone is muted.\n         *\n         * @private\n         */\n        this._callback = callback;\n\n        /**\n         * The indicator which determines whether <tt>callback</tt> has been\n         * invoked for the current local audio track of <tt>conference</tt> so\n         * that it is invoked once only.\n         *\n         * @private\n         */\n        this._eventFired = false;\n\n        // XXX I went back and forth on the subject of where to put the access\n        // to statistics. On the one had, (1) statistics is likely intended to\n        // be private to conference and (2) there is a desire to keep the\n        // dependencies of modules to the minimum (i.e. not have\n        // TalkMutedDetection depend on statistics). On the other hand, (1)\n        // statistics is technically not private because\n        // JitsiConferenceEventManager accesses it and (2) TalkMutedDetection\n        // works exactly because it knows that there are no audio levels for\n        // JitsiLocalTrack but there are audio levels for the local participant\n        // through statistics.\n        conference.statistics.addAudioLevelListener(\n            this._audioLevel.bind(this));\n\n        conference.on(\n            JitsiConferenceEvents.TRACK_MUTE_CHANGED,\n            this._trackMuteChanged.bind(this));\n        conference.on(\n            JitsiConferenceEvents.TRACK_ADDED,\n            this._trackAdded.bind(this));\n    }\n\n    /* eslint-disable max-params */\n    /**\n     * Receives audio level events for all send and receive streams.\n     *\n     * @param {TraceablePeerConnection} pc - WebRTC PeerConnection object of the\n     * @param {number} ssrc - The synchronization source identifier (SSRC) of\n     * the endpoint/participant/stream being reported.\n     * @param {number} audioLevel - The audio level of <tt>ssrc</tt>.\n     * @param {boolean} isLocal - <tt>true</tt> if <tt>ssrc</tt> represents a\n     * local/send stream or <tt>false</tt> for a remote/receive stream.\n     */\n    _audioLevel(tpc, ssrc, audioLevel, isLocal) {\n        // We are interested in the local audio stream only and if event is not\n        // sent yet.\n        if (!isLocal || !this.audioTrack || this._eventFired) {\n            return;\n        }\n\n        if (this.audioTrack.isMuted()\n            && audioLevel > SPEECH_DETECT_THRESHOLD) {\n            this._eventFired = true;\n            this._callback();\n        }\n    }\n    /* eslint-enable max-params */\n\n    /**\n     * Determines whether a specific {@link JitsiTrack} represents a local audio\n     * track.\n     *\n     * @param {JitsiTrack} track - The <tt>JitsiTrack</tt> to be checked whether\n     * it represents a local audio track.\n     * @private\n     * @return {boolean} - <tt>true</tt> if the specified <tt>track</tt>\n     * represents a local audio track; otherwise, <tt>false</tt>.\n     */\n    _isLocalAudioTrack(track) {\n        return track.isAudioTrack() && track.isLocal();\n    }\n\n    /**\n     * Notifies this <tt>TalkMutedDetection</tt> that a {@link JitsiTrack} was\n     * added to the associated {@link JitsiConference}. Looks for the local\n     * audio track only.\n     *\n     * @param {JitsiTrack} track - The added <tt>JitsiTrack</tt>.\n     * @private\n     */\n    _trackAdded(track) {\n        if (this._isLocalAudioTrack(track)) {\n            this.audioTrack = track;\n        }\n    }\n\n    /**\n     * Notifies this <tt>TalkMutedDetection</tt> that the mute state of a\n     * {@link JitsiTrack} has changed. Looks for the local audio track only.\n     *\n     * @param {JitsiTrack} track - The <tt>JitsiTrack</tt> whose mute state has\n     * changed.\n     * @private\n     */\n    _trackMuteChanged(track) {\n        if (this._isLocalAudioTrack(track) && track.isMuted()) {\n            this._eventFired = false;\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/TalkMutedDetection.js","const AudioRecorder = require('./audioRecorder');\nconst SphinxService = require(\n    './transcriptionServices/SphinxTranscriptionService');\n\nconst BEFORE_STATE = 'before';\nconst RECORDING_STATE = 'recording';\nconst TRANSCRIBING_STATE = 'transcribing';\nconst FINISHED_STATE = 'finished';\n\n// the amount of characters each line in the transcription will have\nconst MAXIMUM_SENTENCE_LENGTH = 80;\n\n/**\n * This is the main object for handing the Transcription. It interacts with\n * the audioRecorder to record every person in a conference and sends the\n * recorder audio to a transcriptionService. The returned speech-to-text result\n * will be merged to create a transcript\n * @param {AudioRecorder} audioRecorder An audioRecorder recording a conference\n */\nfunction Transcriber() {\n    // the object which can record all audio in the conference\n    this.audioRecorder = new AudioRecorder();\n\n    // this object can send the recorder audio to a speech-to-text service\n    this.transcriptionService = new SphinxService();\n\n    // holds a counter to keep track if merging can start\n    this.counter = null;\n\n    // holds the date when transcription started which makes it possible\n    // to calculate the offset between recordings\n    this.startTime = null;\n\n    // will hold the transcription once it is completed\n    this.transcription = null;\n\n    // this will be a method which will be called once the transcription is done\n    // with the transcription as parameter\n    this.callback = null;\n\n    // stores all the retrieved speech-to-text results to merge together\n    // this value will store an Array<Word> object\n    this.results = [];\n\n    // Stores the current state of the transcription process\n    this.state = BEFORE_STATE;\n\n    // Used in the updateTranscription method to add a new line when the\n    // sentence becomes to long\n    this.lineLength = 0;\n}\n\n/**\n * Method to start the transcription process. It will tell the audioRecorder\n * to start storing all audio streams and record the start time for merging\n * purposes\n */\nTranscriber.prototype.start = function start() {\n    if (this.state !== BEFORE_STATE) {\n        throw new Error(\n            `The transcription can only start when it's in the \"${\n                BEFORE_STATE}\" state. It's currently in the \"${\n                this.state}\" state`);\n    }\n    this.state = RECORDING_STATE;\n    this.audioRecorder.start();\n    this.startTime = new Date();\n};\n\n/**\n * Method to stop the transcription process. It will tell the audioRecorder to\n * stop, and get all the recorded audio to send it to the transcription service\n\n * @param callback a callback which will receive the transcription\n */\nTranscriber.prototype.stop = function stop(callback) {\n    if (this.state !== RECORDING_STATE) {\n        throw new Error(\n            `The transcription can only stop when it's in the \"${\n                RECORDING_STATE}\" state. It's currently in the \"${\n                this.state}\" state`);\n    }\n\n    // stop the recording\n    console.log('stopping recording and sending audio files');\n    this.audioRecorder.stop();\n\n    // and send all recorded audio the the transcription service\n    const callBack = blobCallBack.bind(null, this);\n\n    this.audioRecorder.getRecordingResults().forEach(recordingResult => {\n        this.transcriptionService.send(recordingResult, callBack);\n        this.counter++;\n    });\n\n    // set the state to \"transcribing\" so that maybeMerge() functions correctly\n    this.state = TRANSCRIBING_STATE;\n\n    // and store the callback for later\n    this.callback = callback;\n};\n\n/**\n * This method gets the answer from the transcription service, calculates the\n * offset and adds is to every Word object. It will also start the merging\n * when every send request has been received\n *\n * note: Make sure to bind this as a Transcription object\n * @param {Transcriber} transcriber the transcriber instance\n * @param {RecordingResult} answer a RecordingResult object with a defined\n * WordArray\n */\nfunction blobCallBack(transcriber, answer) {\n    console.log(\n        'retrieved an answer from the transcription service. The answer has an'\n            + ` array of length: ${answer.wordArray.length}`);\n\n    // first add the offset between the start of the transcription and\n    // the start of the recording to all start and end times\n    if (answer.wordArray.length > 0) {\n        let offset = answer.startTime.getUTCMilliseconds()\n            - transcriber.startTime.getUTCMilliseconds();\n\n        // transcriber time will always be earlier\n\n        if (offset < 0) {\n            offset = 0; // presume 0 if it somehow not earlier\n        }\n\n        let array = '[';\n\n        answer.wordArray.forEach(wordObject => {\n            wordObject.begin += offset;\n            wordObject.end += offset;\n            array += `${wordObject.word},`;\n        });\n        array += ']';\n        console.log(array);\n\n        // give a name value to the Array object so that the merging can access\n        // the name value without having to use the whole recordingResult object\n        // in the algorithm\n        answer.wordArray.name = answer.name;\n    }\n\n    // then store the array and decrease the counter\n    transcriber.results.push(answer.wordArray);\n    transcriber.counter--;\n    console.log(`current counter: ${transcriber.counter}`);\n\n    // and check if all results have been received.\n    transcriber.maybeMerge();\n}\n\n/**\n * this method will check if the counter is zero. If it is, it will call\n * the merging method\n */\nTranscriber.prototype.maybeMerge = function() {\n    if (this.state === TRANSCRIBING_STATE && this.counter === 0) {\n        // make sure to include the events in the result arrays before\n        // merging starts\n        this.merge();\n    }\n};\n\n/**\n * This method will merge all speech-to-text arrays together in one\n * readable transcription string\n */\nTranscriber.prototype.merge = function() {\n    console.log(\n        `starting merge process!\\n The length of the array: ${\n            this.results.length}`);\n    this.transcription = '';\n\n    // the merging algorithm will look over all Word objects who are at pos 0 in\n    // every array. It will then select the one closest in time to the\n    // previously placed word, while removing the selected word from its array\n    // note: words can be skipped the skipped word's begin and end time somehow\n    // end up between the closest word start and end time\n    const arrays = this.results;\n\n    // arrays of Word objects\n    const potentialWords = []; // array of the first Word objects\n    // check if any arrays are already empty and remove them\n\n    hasPopulatedArrays(arrays);\n\n    // populate all the potential Words for a first time\n    arrays.forEach(array => pushWordToSortedArray(potentialWords, array));\n\n    // keep adding words to transcription until all arrays are exhausted\n    while (hasPopulatedArrays(arrays)) {\n        // first select the lowest array;\n        let lowestWordArray = arrays[0];\n\n        arrays.forEach(wordArray => {\n            if (wordArray[0].begin < lowestWordArray[0].begin) {\n                lowestWordArray = wordArray;\n            }\n        });\n\n        // put the word in the transcription\n        let wordToAdd = lowestWordArray.shift();\n\n        this.updateTranscription(wordToAdd, lowestWordArray.name);\n\n        // keep going until a word in another array has a smaller time\n        // or the array is empty\n        while (lowestWordArray.length > 0) {\n            let foundSmaller = false;\n            const wordToCompare = lowestWordArray[0].begin;\n\n            arrays.forEach(wordArray => {\n                if (wordArray[0].begin < wordToCompare) {\n                    foundSmaller = true;\n                }\n            });\n\n            // add next word if no smaller time has been found\n            if (foundSmaller) {\n                break;\n            }\n\n            wordToAdd = lowestWordArray.shift();\n            this.updateTranscription(wordToAdd, null);\n        }\n\n    }\n\n    // set the state to finished and do the necessary left-over tasks\n    this.state = FINISHED_STATE;\n    if (this.callback) {\n        this.callback(this.transcription);\n    }\n};\n\n/**\n * Appends a word object to the transcription. It will make a new line with a\n * name if a name is specified\n * @param {Word} word the Word object holding the word to append\n * @param {String|null} name the name of a new speaker. Null if not applicable\n */\nTranscriber.prototype.updateTranscription = function(word, name) {\n    if (name !== undefined && name !== null) {\n        this.transcription += `\\n${name}:`;\n        this.lineLength = name.length + 1; // +1 for the semi-colon\n    }\n    if (this.lineLength + word.word.length > MAXIMUM_SENTENCE_LENGTH) {\n        this.transcription += '\\n    ';\n        this.lineLength = 4; // because of the 4 spaces after the new line\n    }\n    this.transcription += ` ${word.word}`;\n    this.lineLength += word.word.length + 1; // +1 for the space\n};\n\n/**\n * Check if the given 2 dimensional array has any non-zero Word-arrays in them.\n * All zero-element arrays inside will be removed\n * If any non-zero-element arrays are found, the method will return true.\n * otherwise it will return false\n * @param {Array<Array>} twoDimensionalArray the array to check\n * @returns {boolean} true if any non-zero arrays inside, otherwise false\n */\nfunction hasPopulatedArrays(twoDimensionalArray) {\n    for (let i = 0; i < twoDimensionalArray.length; i++) {\n        if (twoDimensionalArray[i].length === 0) {\n            twoDimensionalArray.splice(i, 1);\n        }\n    }\n\n    return twoDimensionalArray.length > 0;\n}\n\n/**\n * Push a word to the right location in a sorted array. The array is sorted\n * from lowest to highest start time. Every word is stored in an object which\n * includes the name of the person saying the word.\n *\n * @param {Array<Word>} array the sorted array to push to\n * @param {Word} word the word to push into the array\n */\nfunction pushWordToSortedArray(array, word) {\n    if (array.length === 0) {\n        array.push(word);\n    } else {\n        if (array[array.length - 1].begin <= word.begin) {\n            array.push(word);\n\n            return;\n        }\n\n        for (let i = 0; i < array.length; i++) {\n            if (word.begin < array[i].begin) {\n                array.splice(i, 0, word);\n\n                return;\n            }\n        }\n        array.push(word); // fail safe\n    }\n}\n\n/**\n * Gives the transcriber a JitsiTrack holding an audioStream to transcribe.\n * The JitsiTrack is given to the audioRecorder. If it doesn't hold an\n * audiostream, it will not be added by the audioRecorder\n * @param {JitsiTrack} track the track to give to the audioRecorder\n */\nTranscriber.prototype.addTrack = function(track) {\n    this.audioRecorder.addTrack(track);\n};\n\n/**\n * Remove the given track from the auioRecorder\n * @param track\n */\nTranscriber.prototype.removeTrack = function(track) {\n    this.audioRecorder.removeTrack(track);\n};\n\n/**\n * Will return the created transcription if it's avialable or throw an error\n * when it's not done yet\n * @returns {String} the transcription as a String\n */\nTranscriber.prototype.getTranscription = function() {\n    if (this.state !== FINISHED_STATE) {\n        throw new Error(\n            `The transcription can only be retrieved when it's in the \"${\n                FINISHED_STATE}\" state. It's currently in the \"${\n                this.state}\" state`);\n    }\n\n    return this.transcription;\n};\n\n/**\n * Returns the current state of the transcription process\n */\nTranscriber.prototype.getState = function() {\n    return this.state;\n};\n\n/**\n * Resets the state to the \"before\" state, such that it's again possible to\n * call the start method\n */\nTranscriber.prototype.reset = function() {\n    this.state = BEFORE_STATE;\n    this.counter = null;\n    this.transcription = null;\n    this.startTime = null;\n    this.callback = null;\n    this.results = [];\n    this.lineLength = 0;\n};\n\nmodule.exports = Transcriber;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/transcription/transcriber.js","/* eslint-disable max-params */\n\n/**\n * This object stores variables needed around the recording of an audio stream\n * and passing this recording along with additional information along to\n * different processes\n * @param blob the recording audio stream as a single blob\n * @param name the name of the person of the audio stream\n * @param startTime the time in UTC when recording of the audiostream started\n * @param wordArray the recorder audio stream transcribed as an array of Word\n *                  objects\n */\nconst RecordingResult = function(blob, name, startTime, wordArray) {\n    this.blob = blob;\n    this.name = name;\n    this.startTime = startTime;\n    this.wordArray = wordArray;\n};\n\n/* eslint-enable max-params */\n\nmodule.exports = RecordingResult;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/transcription/recordingResult.js","/* global config */\n\nconst TranscriptionService = require('./AbstractTranscriptionService');\nconst Word = require('../word');\nconst audioRecorder = require('./../audioRecorder');\n\n/**\n * Implements a TranscriptionService for a Sphinx4 http server\n */\nconst SphinxService = function() {\n    // set the correct url\n    this.url = getURL();\n};\n\n/**\n * Subclass of AbstractTranscriptionService\n */\nSphinxService.prototype = Object.create(TranscriptionService.prototype);\n\n/**\n * Set the right constructor\n */\nSphinxService.constructor = SphinxService;\n\n/**\n * Overrides the sendRequest method from AbstractTranscriptionService\n * it will send the audio stream the a Sphinx4 server to get the transcription\n *\n * @param audioFileBlob the recorder audio stream an a single Blob\n * @param callback the callback function retrieving the server response\n */\nSphinxService.prototype.sendRequest = function(audioFileBlob, callback) {\n    console.log(`sending an audio file  to ${this.url}`);\n    console.log(`the audio file being sent: ${audioFileBlob}`);\n    const request = new XMLHttpRequest();\n\n    request.onreadystatechange = function() {\n        if (request.readyState === XMLHttpRequest.DONE\n            && request.status === 200) {\n            callback(request.responseText);\n        } else if (request.readyState === XMLHttpRequest.DONE) {\n            throw new Error(\n                `unable to accept response from sphinx server. status: ${\n                    request.status}`);\n        }\n\n        // if not ready no point to throw an error\n    };\n    request.open('POST', this.url);\n    request.setRequestHeader('Content-Type',\n        audioRecorder.determineCorrectFileType());\n    request.send(audioFileBlob);\n    console.log(`send ${audioFileBlob}`);\n};\n\n/**\n * Overrides the formatResponse method from AbstractTranscriptionService\n * It will parse the answer from the server in the expected format\n *\n * @param response the JSON body retrieved from the Sphinx4 server\n */\nSphinxService.prototype.formatResponse = function(response) {\n    const result = JSON.parse(response).objects;\n\n    // make sure to delete the session id object, which is always\n    // the first value in the JSON array\n\n    result.shift();\n    const array = [];\n\n    result.forEach(\n        word =>\n            word.filler\n                || array.push(new Word(word.word, word.start, word.end)));\n\n    return array;\n};\n\n/**\n * checks wether the reply is empty, or doesn't contain a correct JSON object\n * @param response the server response\n * @return {boolean} whether the response is valid\n */\nSphinxService.prototype.verify = function(response) {\n    console.log(`response from server:${response.toString()}`);\n\n    // test if server responded with a string object\n    if (typeof response !== 'string') {\n        return false;\n    }\n\n    // test if the string can be parsed into valid JSON\n    let json;\n\n    try {\n        json = JSON.parse(response);\n    } catch (error) {\n        console.log(error);\n\n        return false;\n    }\n\n    // check if the JSON has a \"objects\" value\n    if (json.objects === undefined) {\n        return false;\n    }\n\n    // get the \"objects\" value and check for a session ID\n    const array = json.objects;\n\n    if (!(array[0] && array[0]['session-id'])) {\n        return false;\n    }\n\n    // everything seems to be in order\n    return true;\n};\n\n/**\n * Gets the URL to the Sphinx4 server from the config file. If it's not there,\n * it will throw an error\n *\n * @returns {string} the URL to the sphinx4 server\n */\nfunction getURL() {\n    const message = 'config does not contain an url to a Sphinx4 https server';\n\n    if (config.sphinxURL === undefined) {\n        console.log(message);\n    } else {\n        const toReturn = config.sphinxURL;\n\n        if (toReturn.includes !== undefined && toReturn.includes('https://')) {\n            return toReturn;\n        }\n        console.log(message);\n\n    }\n}\n\nmodule.exports = SphinxService;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/transcription/transcriptionServices/SphinxTranscriptionService.js","/**\n * Abstract class representing an interface to implement a speech-to-text\n * service on.\n */\nconst TranscriptionService = function() {\n    throw new Error('TranscriptionService is abstract and cannot be'\n        + 'created');\n};\n\n/**\n * This method can be used to send the recorder audio stream and\n * retrieve the answer from the transcription service from the callback\n *\n * @param {RecordingResult} recordingResult a recordingResult object which\n * includes the recorded audio stream as a blob\n * @param {Function} callback  which will retrieve the a RecordingResult with\n *        the answer as a WordArray\n */\nTranscriptionService.prototype.send = function send(recordingResult, callback) {\n    this.sendRequest(recordingResult.blob, response => {\n        if (this.verify(response)) {\n            recordingResult.wordArray = this.formatResponse(response);\n        } else {\n            console.log('the retrieved response from the server is not valid!');\n            recordingResult.wordArray = [];\n        }\n        callback(recordingResult);\n    });\n};\n\n/**\n * Abstract method which will rend the recorder audio stream to the implemented\n * transcription service and will retrieve an answer, which will be\n * called on the given callback method\n *\n * @param {Blob} audioBlob the recorded audio stream as a single Blob\n * @param {function} callback function which will retrieve the answer\n *                            from the service\n */\n// eslint-disable-next-line no-unused-vars\nTranscriptionService.prototype.sendRequest = function(audioBlob, callback) {\n    throw new Error('TranscriptionService.sendRequest is abstract');\n};\n\n/**\n * Abstract method which will parse the output from the implemented\n * transcription service to the expected format\n *\n * The transcriber class expect an array of word objects, where each word\n * object is one transcribed word by the service.\n *\n * The expected output of this method is an array of word objects, in\n * the correct order. That is, the first object in the array is the first word\n * being said, and the last word in the array is the last word being said\n *\n * @param response the answer from the speech-to-text server which needs to be\n *                 formatted\n * @return {Array<Word>} an array of Word objects\n */\n// eslint-disable-next-line no-unused-vars\nTranscriptionService.prototype.formatResponse = function(response) {\n    throw new Error('TranscriptionService.format is abstract');\n};\n\n/**\n * Abstract method which will verify that the response from the server is valid\n *\n * @param response the response from the server\n * @return {boolean} true if response is valid, false otherwise\n */\n// eslint-disable-next-line no-unused-vars\nTranscriptionService.prototype.verify = function(response) {\n    throw new Error('TranscriptionService.verify is abstract');\n};\n\nmodule.exports = TranscriptionService;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/transcription/transcriptionServices/AbstractTranscriptionService.js","/**\n * An object representing a transcribed word, with some additional information\n * @param word the word\n * @param begin the time the word was started being uttered\n * @param end the time the word stopped being uttered\n */\nconst Word = function(word, begin, end) {\n    this.word = word;\n    this.begin = begin;\n    this.end = end;\n};\n\n/**\n * Get the string representation of the word\n * @returns {*} the word as a string\n */\nWord.prototype.getWord = function() {\n    return this.word;\n};\n\n/**\n * Get the time the word started being uttered\n * @returns {*} the start time as an integer\n */\nWord.prototype.getBeginTime = function() {\n    return this.begin;\n};\n\n/**\n * Get the time the word stopped being uttered\n * @returns {*} the end time as an integer\n */\nWord.prototype.getEndTime = function() {\n    return this.end;\n};\n\nmodule.exports = Word;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/transcription/word.js","import { getLogger } from 'jitsi-meet-logger';\nconst logger = getLogger(__filename);\n\nimport JitsiVideoSIPGWSession from './JitsiVideoSIPGWSession';\nimport * as Constants from './VideoSIPGWConstants';\nimport XMPPEvents from '../../service/xmpp/XMPPEvents';\n\n/**\n * Main video SIP GW handler. Stores references of all created sessions.\n */\nexport default class VideoSIPGW {\n\n    /**\n     * Creates new handler.\n     *\n     * @param {ChatRoom} chatRoom - Tha chat room to handle.\n     */\n    constructor(chatRoom) {\n        this.chatRoom = chatRoom;\n        this.eventEmitter = chatRoom.eventEmitter;\n        logger.debug('creating VideoSIPGW');\n        this.sessions = {};\n\n        this.sessionStateChangeListener = this.sessionStateChanged.bind(this);\n\n        // VideoSIPGW, JitsiConference and ChatRoom are not reusable and no\n        // more than one VideoSIPGW can be created per JitsiConference,\n        // so we don't bother to cleanup\n        chatRoom.addPresenceListener('jibri-sip-status',\n            this.handleJibriSIPStatus.bind(this));\n        chatRoom.addPresenceListener('jibri-sip-call-state',\n            this.handleJibriSIPState.bind(this));\n    }\n\n    /**\n     * Handles presence nodes with name: jibri-sip-status.\n     *\n     * @param {Object} node the presence node Object to handle.\n     * Object representing part of the presence received over xmpp.\n     */\n    handleJibriSIPStatus(node) {\n        const attributes = node.attributes;\n\n        if (!attributes) {\n            return;\n        }\n\n        logger.debug('Handle video sip gw status : ', attributes);\n        const newStatus = attributes.status;\n\n        // check for global availability of the service\n        if (newStatus !== this.status\n            && (newStatus === Constants.STATUS_UNDEFINED\n                || newStatus === Constants.STATUS_AVAILABLE\n                || newStatus === Constants.STATUS_BUSY)) {\n            this.status = newStatus;\n            this.eventEmitter.emit(\n                XMPPEvents.VIDEO_SIP_GW_AVAILABILITY_CHANGED, this.status);\n        }\n    }\n\n    /**\n     * Handles presence nodes with name: jibri-sip-call-state.\n     *\n     * @param {Object} node the presence node Object to handle.\n     * Object representing part of the presence received over xmpp.\n     */\n    handleJibriSIPState(node) {\n        const attributes = node.attributes;\n\n        if (!attributes) {\n            return;\n        }\n\n        logger.debug('Handle video sip gw state : ', attributes);\n\n        const newState = attributes.state;\n\n        if (newState === this.state) {\n            return;\n        }\n\n        switch (newState) {\n        case Constants.STATE_ON:\n        case Constants.STATE_OFF:\n        case Constants.STATE_PENDING:\n        case Constants.STATE_RETRYING:\n        case Constants.STATE_FAILED: {\n            const address = attributes.sipaddress;\n\n            if (!address) {\n                return;\n            }\n\n            // find the corresponding session and set its state\n            const session = this.sessions[address];\n\n            if (session) {\n                session.setState(newState);\n            } else {\n                logger.warn('Video SIP GW session not found:', address);\n            }\n        }\n        }\n    }\n\n    /**\n     * Creates new session and stores its reference if it does not exist or\n     * returns an error otherwise.\n     *\n     * @param {string} sipAddress - The sip address to use.\n     * @param {string} displayName - The display name to use.\n     * @returns {JitsiVideoSIPGWSession|Error}\n     */\n    createVideoSIPGWSession(sipAddress, displayName) {\n        if (this.sessions[sipAddress]) {\n            logger.warn('There was already a Video SIP GW session for address',\n                sipAddress);\n\n            return new Error(Constants.ERROR_SESSION_EXISTS);\n        }\n\n        const session = new JitsiVideoSIPGWSession(\n            sipAddress, displayName, this.chatRoom);\n\n        session.addStateListener(this.sessionStateChangeListener);\n\n        this.sessions[sipAddress] = session;\n\n        return session;\n    }\n\n    /**\n     * Listener for session state changed. When a session goes to off or failed\n     * we delete its reference.\n     *\n     * @param {options} event - { address, oldState, newState, displayName }\n     */\n    sessionStateChanged(event) {\n        const address = event.address;\n\n        if (event.newState === Constants.STATE_OFF\n            || event.newState === Constants.STATE_FAILED) {\n            const session = this.sessions[address];\n\n            if (!session) {\n                logger.error('Missing Video SIP GW session with address:',\n                    address);\n\n                return;\n            }\n\n            session.removeStateListener(this.sessionStateChangeListener);\n            delete this.sessions[address];\n        }\n\n        this.eventEmitter.emit(\n            XMPPEvents.VIDEO_SIP_GW_SESSION_STATE_CHANGED,\n            event);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/videosipgw/VideoSIPGW.js","import { getLogger } from 'jitsi-meet-logger';\nimport { $iq } from 'strophe.js';\n\nimport Listenable from '../util/Listenable';\n\nimport * as VideoSIPGWConstants from './VideoSIPGWConstants';\n\nconst logger = getLogger(__filename);\n\n/**\n * The event name for current sip video session state changed.\n * @type {string} event name for sip video session state changed.\n */\nconst STATE_CHANGED = 'STATE_CHANGED';\n\n/**\n * Jitsi video SIP GW session. Holding its state and able to start/stop it.\n * When session is in OFF or FAILED stated it cannot be used anymore.\n */\nexport default class JitsiVideoSIPGWSession extends Listenable {\n\n    /**\n     * Creates new session with the desired sip address and display name.\n     *\n     * @param {string} sipAddress - The sip address to use when\n     * starting the session.\n     * @param {string} displayName - The display name to use for\n     * that participant.\n     * @param {ChatRoom} chatRoom - The chat room this session is bound to.\n     */\n    constructor(sipAddress, displayName, chatRoom) {\n        super();\n\n        this.sipAddress = sipAddress;\n        this.displayName = displayName;\n        this.chatRoom = chatRoom;\n\n        /*\n         * The initial state is undefined. Initial state cannot be STATE_OFF,\n         * the session enters this state when it was in STATE_ON and was stopped\n         * and such session cannot be used anymore.\n         *\n         * @type {VideoSIPGWConstants|undefined}\n         */\n        this.state = undefined;\n    }\n\n    /**\n     * Stops the current session.\n     */\n    stop() {\n        if (this.state === VideoSIPGWConstants.STATE_OFF\n            || this.state === VideoSIPGWConstants.STATE_FAILED) {\n            logger.warn('Video SIP GW session already stopped or failed!');\n\n            return;\n        }\n\n        this._sendJibriIQ('stop');\n    }\n\n    /**\n     * Starts a new session. Sends an iq to the focus.\n     */\n    start() {\n        // if state is off, this session was active for some reason\n        // and we should create new one, rather than reusing it\n        if (this.state === VideoSIPGWConstants.STATE_ON\n            || this.state === VideoSIPGWConstants.STATE_OFF\n            || this.state === VideoSIPGWConstants.STATE_PENDING\n            || this.state === VideoSIPGWConstants.STATE_RETRYING) {\n            logger.warn('Video SIP GW session already started!');\n\n            return;\n        }\n\n        this._sendJibriIQ('start');\n    }\n\n    /**\n     * Changes the state of this session.\n     *\n     * @param {string} newState - The new {VideoSIPGWConstants} state to set.\n     */\n    setState(newState) {\n        if (newState === this.state) {\n            return;\n        }\n\n        const oldState = this.state;\n\n        this.state = newState;\n        this.eventEmitter.emit(STATE_CHANGED,\n            {\n                address: this.sipAddress,\n                oldState,\n                newState: this.state,\n                displayName: this.displayName\n            }\n        );\n    }\n\n    /**\n     * Subscribes the passed listener to the event for state change of this\n     * session.\n     *\n     * @param {Function} listener - The function that will receive the event.\n     */\n    addStateListener(listener) {\n        this.addListener(STATE_CHANGED, listener);\n    }\n\n    /**\n     * Unsubscribes the passed handler.\n     *\n     * @param {Function} listener - The function to be removed.\n     */\n    removeStateListener(listener) {\n        this.removeListener(STATE_CHANGED, listener);\n    }\n\n    /**\n     * Sends a jibri command using an iq.\n     *\n     * @private\n     * @param {string} action - The action to send ('start' or 'stop').\n     */\n    _sendJibriIQ(action) {\n        const attributes = {\n            'xmlns': 'http://jitsi.org/protocol/jibri',\n            'action': action,\n            sipaddress: this.sipAddress\n        };\n\n        attributes.displayname = this.displayName;\n\n        const iq = $iq({\n            to: this.chatRoom.focusMucJid,\n            type: 'set' })\n            .c('jibri', attributes)\n            .up();\n\n        logger.debug(`${action} video SIP GW session`, iq.nodeTree);\n        this.chatRoom.connection.sendIQ(\n            iq,\n            () => {}, // eslint-disable-line no-empty-function\n            error => {\n                logger.error(\n                    `Failed to ${action} video SIP GW session, error: `, error);\n                this.setState(VideoSIPGWConstants.STATE_FAILED);\n            });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/videosipgw/JitsiVideoSIPGWSession.js","import * as JitsiConferenceEvents from '../../JitsiConferenceEvents';\nimport SpeakerStats from './SpeakerStats';\n\n/**\n * A collection for tracking speaker stats. Attaches listeners\n * to the conference to automatically update on tracked events.\n */\nexport default class SpeakerStatsCollector {\n    /**\n     * Initializes a new SpeakerStatsCollector instance.\n     *\n     * @constructor\n     * @param {JitsiConference} conference - The conference to track.\n     * @returns {void}\n     */\n    constructor(conference) {\n        this.stats = {\n            users: {\n\n                // userId: SpeakerStats\n            },\n            dominantSpeakerId: null\n        };\n\n        const userId = conference.myUserId();\n\n        this.stats.users[userId] = new SpeakerStats(userId, null, true);\n\n        conference.addEventListener(\n            JitsiConferenceEvents.DOMINANT_SPEAKER_CHANGED,\n            this._onDominantSpeaker.bind(this));\n        conference.addEventListener(\n            JitsiConferenceEvents.USER_JOINED,\n            this._onUserJoin.bind(this));\n        conference.addEventListener(\n            JitsiConferenceEvents.USER_LEFT,\n            this._onUserLeave.bind(this));\n        conference.addEventListener(\n            JitsiConferenceEvents.DISPLAY_NAME_CHANGED,\n            this._onDisplayNameChange.bind(this));\n    }\n\n    /**\n     * Reacts to dominant speaker change events by changing its speaker stats\n     * models to reflect the current dominant speaker.\n     *\n     * @param {string} dominantSpeakerId - The user id of the new\n     * dominant speaker.\n     * @returns {void}\n     * @private\n     */\n    _onDominantSpeaker(dominantSpeakerId) {\n        const oldDominantSpeaker\n            = this.stats.users[this.stats.dominantSpeakerId];\n        const newDominantSpaker = this.stats.users[dominantSpeakerId];\n\n        oldDominantSpeaker && oldDominantSpeaker.setIsDominantSpeaker(false);\n        newDominantSpaker && newDominantSpaker.setIsDominantSpeaker(true);\n        this.stats.dominantSpeakerId = dominantSpeakerId;\n    }\n\n    /**\n     * Reacts to user join events by creating a new SpeakerStats model.\n     *\n     * @param {string} userId - The user id of the new user.\n     * @param {JitsiParticipant} - The JitsiParticipant model for the new user.\n     * @returns {void}\n     * @private\n     */\n    _onUserJoin(userId, participant) {\n        let savedUser = this.stats.users[userId];\n\n        if (!savedUser) {\n            savedUser = this.stats.users[userId]\n                = new SpeakerStats(userId, participant.getDisplayName());\n        }\n    }\n\n    /**\n     * Reacts to user leave events by updating the associated user's\n     * SpeakerStats model.\n     *\n     * @param {string} userId - The user id of the user that left.\n     * @returns {void}\n     * @private\n     */\n    _onUserLeave(userId) {\n        const savedUser = this.stats.users[userId];\n\n        if (savedUser) {\n            savedUser.markAsHasLeft();\n        }\n    }\n\n    /**\n     * Reacts to user name change events by updating the last known name\n     * tracked in the associated SpeakerStats model.\n     *\n     * @param {string} userId - The user id of the user that left.\n     * @returns {void}\n     * @private\n     */\n    _onDisplayNameChange(userId, newName) {\n        const savedUser = this.stats.users[userId];\n\n        if (savedUser) {\n            savedUser.setDisplayName(newName);\n        }\n    }\n\n    /**\n     * Return a copy of the tracked SpeakerStats models.\n     *\n     * @returns {Object} The keys are the user ids and the values are the\n     * associated user's SpeakerStats model.\n     * @private\n     */\n    getStats() {\n        return this.stats.users;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/SpeakerStatsCollector.js","/**\n * A model for keeping track of each user's total\n * time as a dominant speaker. The model also\n * keeps track of the user's last known name\n * in case the user has left the meeting,\n * which is also tracked.\n */\nclass SpeakerStats {\n    /**\n     * Initializes a new SpeakerStats instance.\n     *\n     * @constructor\n     * @param {string} userId - The id of the user being tracked.\n     * @param {string} displayName - The name of the user being tracked.\n     * @param {boolean} isLocalStats - True if the stats model tracks\n     * the local user.\n     * @returns {void}\n     */\n    constructor(userId, displayName, isLocalStats) {\n        this._userId = userId;\n        this.setDisplayName(displayName);\n        this._isLocalStats = isLocalStats || false;\n        this.setIsDominantSpeaker(false);\n        this.totalDominantSpeakerTime = 0;\n        this._dominantSpeakerStart = null;\n        this._hasLeft = false;\n    }\n\n    /**\n     * Get the user id being tracked.\n     *\n     * @returns {string} The user id.\n     */\n    getUserId() {\n        return this._userId;\n    }\n\n    /**\n     * Get the name of the user being tracked.\n     *\n     * @returns {string} The user name.\n     */\n    getDisplayName() {\n        return this.displayName;\n    }\n\n    /**\n     * Updates the last known name of the user being tracked.\n     *\n     * @param {string} - The user name.\n     * @returns {void}\n     */\n    setDisplayName(newName) {\n        this.displayName = newName;\n    }\n\n    /**\n     * Returns true if the stats are tracking the local user.\n     *\n     * @returns {boolean}\n     */\n    isLocalStats() {\n        return this._isLocalStats;\n    }\n\n    /**\n     * Returns true if the tracked user is currently a dominant speaker.\n     *\n     * @returns {boolean}\n     */\n    isDominantSpeaker() {\n        return this._isDominantSpeaker;\n    }\n\n    /**\n     * Returns true if the tracked user is currently a dominant speaker.\n     *\n     * @param {boolean} - If true, the user will being accumulating time\n     * as dominant speaker. If false, the user will not accumulate time\n     * and will record any time accumulated since starting as dominant speaker.\n     * @returns {void}\n     */\n    setIsDominantSpeaker(isNowDominantSpeaker) {\n        if (!this._isDominantSpeaker && isNowDominantSpeaker) {\n            this._dominantSpeakerStart = Date.now();\n        } else if (this._isDominantSpeaker && !isNowDominantSpeaker) {\n            const now = Date.now();\n            const timeElapsed = now - (this._dominantSpeakerStart || 0);\n\n            this.totalDominantSpeakerTime += timeElapsed;\n            this._dominantSpeakerStart = null;\n        }\n\n        this._isDominantSpeaker = isNowDominantSpeaker;\n    }\n\n    /**\n     * Get how long the tracked user has been dominant speaker.\n     *\n     * @returns {number} - The speaker time in milliseconds.\n     */\n    getTotalDominantSpeakerTime() {\n        let total = this.totalDominantSpeakerTime;\n\n        if (this._isDominantSpeaker) {\n            total += Date.now() - this._dominantSpeakerStart;\n        }\n\n        return total;\n    }\n\n    /**\n     * Get whether or not the user is still in the meeting.\n     *\n     * @returns {boolean} True if the user is no longer in the meeting.\n     */\n    hasLeft() {\n        return this._hasLeft;\n    }\n\n    /**\n     * Set the user as having left the meeting.\n     *\n     * @returns {void}\n     */\n    markAsHasLeft() {\n        this._hasLeft = true;\n        this.setIsDominantSpeaker(false);\n    }\n}\n\nmodule.exports = SpeakerStats;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/statistics/SpeakerStats.js","import EventEmitter from 'events';\n\nimport * as MediaType from './service/RTC/MediaType';\nimport browser from './modules/browser';\nimport RTC from './modules/RTC/RTC';\nimport RTCEvents from './service/RTC/RTCEvents';\nimport Statistics from './modules/statistics/statistics';\n\nimport * as JitsiMediaDevicesEvents from './JitsiMediaDevicesEvents';\n\nconst eventEmitter = new EventEmitter();\n\n/**\n * Gathers data and sends it to statistics.\n * @param deviceID the device id to log\n * @param devices list of devices\n */\nfunction logOutputDevice(deviceID, devices) {\n    const device\n        = devices.find(\n            d => d.kind === 'audiooutput' && d.deviceId === deviceID);\n\n    if (device) {\n        Statistics.sendActiveDeviceListEvent(\n            RTC.getEventDataForActiveDevice(device));\n    }\n}\n\nconst JitsiMediaDevices = {\n    /**\n     * Executes callback with list of media devices connected.\n     * @param {function} callback\n     */\n    enumerateDevices(callback) {\n        RTC.enumerateDevices(callback);\n    },\n\n    /**\n     * Checks if its possible to enumerate available cameras/micropones.\n     * @returns {Promise<boolean>} a Promise which will be resolved only once\n     * the WebRTC stack is ready, either with true if the device listing is\n     * available available or with false otherwise.\n     */\n    isDeviceListAvailable() {\n        return RTC.isDeviceListAvailable();\n    },\n\n    /**\n     * Returns true if changing the input (camera / microphone) or output\n     * (audio) device is supported and false if not.\n     * @param {string} [deviceType] - type of device to change. Default is\n     *      undefined or 'input', 'output' - for audio output device change.\n     * @returns {boolean} true if available, false otherwise.\n     */\n    isDeviceChangeAvailable(deviceType) {\n        return RTC.isDeviceChangeAvailable(deviceType);\n    },\n\n    /**\n     * Returns true if user granted permission to media devices.\n     * @param {'audio'|'video'} [type] - type of devices to check,\n     *      undefined stands for both 'audio' and 'video' together\n     * @returns {boolean}\n     */\n    isDevicePermissionGranted(type) {\n        const permissions = RTC.getDeviceAvailability();\n\n        switch (type) {\n        case MediaType.VIDEO:\n            return permissions.video === true;\n        case MediaType.AUDIO:\n            return permissions.audio === true;\n        default:\n            return permissions.video === true && permissions.audio === true;\n        }\n    },\n\n    /**\n     * Returns true if it is possible to be simultaneously capturing audio\n     * from more than one device.\n     *\n     * @returns {boolean}\n     */\n    isMultipleAudioInputSupported() {\n        return !browser.isFirefox();\n    },\n\n    /**\n     * Returns currently used audio output device id, 'default' stands\n     * for default device\n     * @returns {string}\n     */\n    getAudioOutputDevice() {\n        return RTC.getAudioOutputDevice();\n    },\n\n    /**\n     * Sets current audio output device.\n     * @param {string} deviceId - id of 'audiooutput' device from\n     *      navigator.mediaDevices.enumerateDevices(), 'default' is for\n     *      default device\n     * @returns {Promise} - resolves when audio output is changed, is rejected\n     *      otherwise\n     */\n    setAudioOutputDevice(deviceId) {\n\n        const availableDevices = RTC.getCurrentlyAvailableMediaDevices();\n\n        if (availableDevices && availableDevices.length > 0) {\n            // if we have devices info report device to stats\n            // normally this will not happen on startup as this method is called\n            // too early. This will happen only on user selection of new device\n            logOutputDevice(deviceId, RTC.getCurrentlyAvailableMediaDevices());\n        }\n\n        return RTC.setAudioOutputDevice(deviceId);\n    },\n\n    /**\n     * Adds an event handler.\n     * @param {string} event - event name\n     * @param {function} handler - event handler\n     */\n    addEventListener(event, handler) {\n        eventEmitter.addListener(event, handler);\n    },\n\n    /**\n     * Removes event handler.\n     * @param {string} event - event name\n     * @param {function} handler - event handler\n     */\n    removeEventListener(event, handler) {\n        eventEmitter.removeListener(event, handler);\n    },\n\n    /**\n     * Emits an event.\n     * @param {string} event - event name\n     */\n    emitEvent(event, ...args) {\n        eventEmitter.emit(event, ...args);\n    },\n\n    /**\n     * Returns whether or not the current browser can support capturing video,\n     * be it camera or desktop, and displaying received video.\n     *\n     * @returns {boolean}\n     */\n    supportsVideo() {\n        // Defer to the browser capabilities to allow exposure of the api to the\n        // consumer but prevent other files from having to import\n        // JitsiMediaDevices.\n        return browser.supportsVideo();\n    }\n};\n\n\nRTC.addListener(\n    RTCEvents.DEVICE_LIST_CHANGED,\n    devices =>\n        eventEmitter.emit(\n            JitsiMediaDevicesEvents.DEVICE_LIST_CHANGED,\n            devices));\nRTC.addListener(\n    RTCEvents.DEVICE_LIST_AVAILABLE,\n    devices =>\n        logOutputDevice(\n            JitsiMediaDevices.getAudioOutputDevice(),\n            devices));\n\nexport default JitsiMediaDevices;\n\n\n\n// WEBPACK FOOTER //\n// ./JitsiMediaDevices.js","/* global $ */\n\nimport browser from '../browser';\n\nconst logger = require('jitsi-meet-logger').getLogger(__filename);\n\nconst RTCUIHelper = {\n\n    /**\n     * Returns the name of 'video' element depending on the browser that we're\n     * currently using.\n     * @returns {string} 'video' or 'object' string name of WebRTC video element\n     */\n    getVideoElementName() {\n        return browser.isTemasysPluginUsed() ? 'object' : 'video';\n    },\n\n    /**\n     * Finds video element inside of the given container.\n     * @param containerElement HTML element node instance which is supposed to\n     *        contain the video element.\n     * @returns {HTMLElement} video HTML element instance if found inside of the\n     *          container or undefined otherwise.\n     */\n    findVideoElement(containerElement) {\n        const videoElemName = RTCUIHelper.getVideoElementName();\n\n        if (!browser.isTemasysPluginUsed()) {\n            return $(containerElement).find(videoElemName)[0];\n        }\n        const matching\n            = $(containerElement).find(\n                ` ${videoElemName}>param[value=\"video\"]`);\n\n        if (matching.length) {\n            if (matching.length > 1) {\n                logger.warn(\n                    'Container with more than one video elements: ',\n                    containerElement);\n            }\n\n            return matching.parent()[0];\n        }\n\n        return undefined;\n    },\n\n    /**\n     * Returns whether or not the video element fires resize events.\n     *\n     * @returns {boolean}\n     */\n    isResizeEventSupported() {\n        return !browser.isTemasysPluginUsed();\n    },\n\n    /**\n     * Sets 'volume' property of given HTML element displaying RTC audio or\n     * video stream.\n     * @param streamElement HTML element to which the RTC stream is attached to.\n     * @param volume the volume value to be set.\n     */\n    setVolume(streamElement, volume) {\n        if (!browser.isIExplorer()) {\n            streamElement.volume = volume;\n        }\n    },\n\n    /**\n     * Sets 'autoplay' property of given HTML element displaying RTC audio or\n     * video stream.\n     * @param streamElement HTML element to which the RTC stream is attached to.\n     * @param autoPlay 'true' or 'false'\n     */\n    setAutoPlay(streamElement, autoPlay) {\n        if (!browser.isIExplorer()) {\n            streamElement.autoplay = autoPlay;\n        }\n    }\n};\n\nexport default RTCUIHelper;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/RTC/RTCUIHelper.js"],"sourceRoot":""}